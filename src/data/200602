From java-user-return-18694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 09:39:28 2006
Return-Path: <java-user-return-18694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86073 invoked from network); 1 Feb 2006 09:39:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 09:39:25 -0000
Received: (qmail 49481 invoked by uid 500); 1 Feb 2006 09:39:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49458 invoked by uid 500); 1 Feb 2006 09:39:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49447 invoked by uid 99); 1 Feb 2006 09:39:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 01:39:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 01:39:13 -0800
Received: by wproxy.gmail.com with SMTP id 58so306823wri
        for <java-user@lucene.apache.org>; Wed, 01 Feb 2006 01:38:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TRQhmkwL/5YMt2xarMglEuLMvAw18qp1v0LKRKq/RMcYj6dgIkX8/5KMNW4v5KuwiDMRu6dogUrdoOrkUcFhmYBRpkzxhqW9Tsgv9EdRnn6xOoeoEbZNH8TAXz1Wzxj75LAe4tIjB45WQtHxYv/akKMONZZGsR4lMmqhF/GOoo0=
Received: by 10.54.80.8 with SMTP id d8mr811008wrb;
        Wed, 01 Feb 2006 01:38:52 -0800 (PST)
Received: by 10.54.129.15 with HTTP; Wed, 1 Feb 2006 01:38:52 -0800 (PST)
Message-ID: <901c03930602010138r6354fa60xc935cffbabdc165b@mail.gmail.com>
Date: Wed, 1 Feb 2006 17:38:52 +0800
From: Dave Kor <davekor@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Related searches
In-Reply-To: <007801c62595$5dd3e340$6500a8c0@leondell>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <007801c62595$5dd3e340$6500a8c0@leondell>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 1/30/06, Leon Chaddock <leonchaddock@macranet.co.uk> wrote:
> Hi,
> Does anyone know if it is possible to show related searches with lucene, =
for example if
> someone searched for "car insurance" you could bring back the results and=
 related
> searches like these

One possible way is to use the vector space model on the set of
relevant documents returned by each query.

For example,
Relevant documents for the query "car insurance" are docids 1, 2, 4, 9, 10.
Relevant documents for the query "automobile insurance" are docids 2,
4, 8, 9, 10.
Relevant documents for the query "life insurance" are docids 3, 5, 7, 9.

Here, "automobile insurance" will be scored as more similar to "car
insurance" than "life insurance" because there is a larger set of
overlapping docids.

Lucene can be adapted for this purpose by creating a second index that
stores all unique queries and their set of relevant docids as Lucene
Documents. Instead of indexing text terms, we index docids. Finding
queries similiar to the original query, Q, is a simple matter of
querying this second index with the set of docids relevent to query Q.

Hope this helps.


--
Dave Kor, Research Assistant
Center for Information Mining and Extraction
School of Computing
National University of Singapore.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 10:22:50 2006
Return-Path: <java-user-return-18695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8087 invoked from network); 1 Feb 2006 10:22:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 10:22:46 -0000
Received: (qmail 5063 invoked by uid 500); 1 Feb 2006 10:22:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5042 invoked by uid 500); 1 Feb 2006 10:22:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5031 invoked by uid 99); 1 Feb 2006 10:22:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 02:22:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.58.180.53] (HELO vps.elderlycare-help.co.uk) (207.58.180.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 02:22:38 -0800
Received: from cpc1-flee1-0-0-cust801.glfd.cable.ntl.com ([86.4.143.34] helo=leondell)
	by vps.elderlycare-help.co.uk with esmtpa (Exim 4.52)
	id 1F4F7t-0006T2-91
	for java-user@lucene.apache.org; Wed, 01 Feb 2006 10:22:13 +0000
Message-ID: <005201c62719$5e199b80$6500a8c0@leondell>
From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
To: <java-user@lucene.apache.org>
References: <e97a509fb54c459aa9f81191c764d158@danicorp.com>
Subject: Memory problem
Date: Wed, 1 Feb 2006 10:21:55 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps.elderlycare-help.co.uk
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - macranet.co.uk
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

We have a lucene index of over 10 000 000 docs at this time.
When we try and run a search we get
java.lang.OutOfMemoryError: Java heap space

We have tried setting the xmx settings to 1gb but to no avail (the box has 
4gb of memory available) . IS there any guidance on handling memory or has 
anyone had similar problems before that could help?

Many thanks

Leon

----- Original Message ----- 
From: "Pradeep Sharma" <pradeep@danicorp.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 01, 2006 2:03 AM
Subject: Greetings and my first question - Is it a good practise to store 
application configuration in Lucene




I have just joined this user group, but I probably will be asking questions 
/ contributing for a while now as I am starting to work on a product which 
will use Lucene exclusively.

Still in the designing phase, and I see that we need to manage several user 
/ application specific configurations and I am exploring the idea of storing 
the configuration information also in the Index, may be create a separate 
index just for the configuration, because each module of the application 
will have access to Lucene classes.

I know technically this can be done, but are there any best practises which 
discourage this?

Thanks in advance.
-Pradeep



--------------------------------------------------------------------------------


No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.14.25/246 - Release Date: 30/01/2006


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 11:05:43 2006
Return-Path: <java-user-return-18696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28466 invoked from network); 1 Feb 2006 11:05:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 11:05:43 -0000
Received: (qmail 47884 invoked by uid 500); 1 Feb 2006 11:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47856 invoked by uid 500); 1 Feb 2006 11:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47843 invoked by uid 99); 1 Feb 2006 11:05:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 03:05:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.202 as permitted sender)
Received: from [66.249.82.202] (HELO xproxy.gmail.com) (66.249.82.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 03:05:32 -0800
Received: by xproxy.gmail.com with SMTP id i28so84624wxd
        for <java-user@lucene.apache.org>; Wed, 01 Feb 2006 03:05:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tGdo+hPtyw5SEklp3uRlGHjw7jZ61hwaQZulQWMlaUVU9PMxhtTnbysvUxBdZCDd2RT69t5tEERE/XOn92lobElxTqrjZOyYdxFm1Xm+R6nQvOWQKtNZI/yVt0I3t9QHh+RfBDx4NrfAnqfFnCzM6ChVz9g/XyjMua+pF2+vxNQ=
Received: by 10.70.133.2 with SMTP id g2mr9776920wxd;
        Wed, 01 Feb 2006 03:05:11 -0800 (PST)
Received: by 10.70.11.13 with HTTP; Wed, 1 Feb 2006 03:05:11 -0800 (PST)
Message-ID: <277d4c5d0602010305n6573d44dl72135fd578f601cb@mail.gmail.com>
Date: Wed, 1 Feb 2006 19:05:11 +0800
From: xing jiang <gingerons@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Related searches
In-Reply-To: <901c03930602010138r6354fa60xc935cffbabdc165b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1743_6146778.1138791911842"
References: <007801c62595$5dd3e340$6500a8c0@leondell>
	 <901c03930602010138r6354fa60xc935cffbabdc165b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1743_6146778.1138791911842
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi, I got a question of doing the related search.

For instance, if I want to say "Support Vector Machine" =3D=3D "SVM". Then,=
 How
can i use this information when retrieve documents. I dont think it can be
added in the Synonym Filter.


On 2/1/06, Dave Kor <davekor@gmail.com> wrote:
>
> On 1/30/06, Leon Chaddock <leonchaddock@macranet.co.uk> wrote:
> > Hi,
> > Does anyone know if it is possible to show related searches with lucene=
,
> for example if
> > someone searched for "car insurance" you could bring back the results
> and related
> > searches like these
>
> One possible way is to use the vector space model on the set of
> relevant documents returned by each query.
>
> For example,
> Relevant documents for the query "car insurance" are docids 1, 2, 4, 9,
> 10.
> Relevant documents for the query "automobile insurance" are docids 2,
> 4, 8, 9, 10.
> Relevant documents for the query "life insurance" are docids 3, 5, 7, 9.
>
> Here, "automobile insurance" will be scored as more similar to "car
> insurance" than "life insurance" because there is a larger set of
> overlapping docids.
>
> Lucene can be adapted for this purpose by creating a second index that
> stores all unique queries and their set of relevant docids as Lucene
> Documents. Instead of indexing text terms, we index docids. Finding
> queries similiar to the original query, Q, is a simple matter of
> querying this second index with the set of docids relevent to query Q.
>
> Hope this helps.
>
>
> --
> Dave Kor, Research Assistant
> Center for Information Mining and Extraction
> School of Computing
> National University of Singapore.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Regards

Jiang Xing

------=_Part_1743_6146778.1138791911842--

From java-user-return-18697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 11:18:27 2006
Return-Path: <java-user-return-18697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33977 invoked from network); 1 Feb 2006 11:18:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 11:18:27 -0000
Received: (qmail 65072 invoked by uid 500); 1 Feb 2006 11:18:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64905 invoked by uid 500); 1 Feb 2006 11:18:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64844 invoked by uid 99); 1 Feb 2006 11:18:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 03:18:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of nick@neoworks.com designates 80.168.17.114 as permitted sender)
Received: from [80.168.17.114] (HELO hermes.neoworks.co.uk) (80.168.17.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 03:18:09 -0800
Received: from kronos.neoworks.co.uk (kronos.neoworks.co.uk [10.0.0.132])
	by hermes.neoworks.co.uk (8.13.1/8.13.1) with ESMTP id k11B3PDx017733
	for <java-user@lucene.apache.org>; Wed, 1 Feb 2006 11:03:25 GMT
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C62721.1F8099AA"
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Subject: RE: Memory problem
Date: Wed, 1 Feb 2006 11:17:44 -0000
Message-ID: <DDEB64C8619AC64DBC074208B046611C02800C@kronos.neoworks.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <DDEB64C8619AC64DBC074208B046611C02800C@kronos.neoworks.co.uk>
Thread-Topic: Memory problem
Thread-Index: AcYnGXz61QD6A2ZGTb6AfV1RzJFGeAABn3ZO
From: "Nick Vincent" <nick@neoworks.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62721.1F8099AA
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Leon,
=20
I had a similar problem when doing a test import which I believe was =
actually down to object churn in parsing the data to create the =
Documents.  I achieved a quick fix by calling System.gc() every thousand =
documents.
=20
Cheers,
=20
Nick

________________________________

From: Leon Chaddock [mailto:leonchaddock@macranet.co.uk]
Sent: Wed 01/02/2006 10:21
To: java-user@lucene.apache.org
Subject: Memory problem



Hi All,

We have a lucene index of over 10 000 000 docs at this time.
When we try and run a search we get
java.lang.OutOfMemoryError: Java heap space

We have tried setting the xmx settings to 1gb but to no avail (the box =
has
4gb of memory available) . IS there any guidance on handling memory or =
has
anyone had similar problems before that could help?

Many thanks

Leon

----- Original Message -----
From: "Pradeep Sharma" <pradeep@danicorp.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 01, 2006 2:03 AM
Subject: Greetings and my first question - Is it a good practise to =
store
application configuration in Lucene




I have just joined this user group, but I probably will be asking =
questions
/ contributing for a while now as I am starting to work on a product =
which
will use Lucene exclusively.

Still in the designing phase, and I see that we need to manage several =
user
/ application specific configurations and I am exploring the idea of =
storing
the configuration information also in the Index, may be create a =
separate
index just for the configuration, because each module of the application
will have access to Lucene classes.

I know technically this can be done, but are there any best practises =
which
discourage this?

Thanks in advance.
-Pradeep



-------------------------------------------------------------------------=
-------


No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.14.25/246 - Release Date: =
30/01/2006


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C62721.1F8099AA
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C62721.1F8099AA--

From java-user-return-18698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 11:23:06 2006
Return-Path: <java-user-return-18698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35927 invoked from network); 1 Feb 2006 11:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 11:23:06 -0000
Received: (qmail 76517 invoked by uid 500); 1 Feb 2006 11:22:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76453 invoked by uid 500); 1 Feb 2006 11:22:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76387 invoked by uid 99); 1 Feb 2006 11:22:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 03:22:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.58.180.53] (HELO vps.elderlycare-help.co.uk) (207.58.180.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 03:22:47 -0800
Received: from cpc1-flee1-0-0-cust801.glfd.cable.ntl.com ([86.4.143.34] helo=leondell)
	by vps.elderlycare-help.co.uk with esmtpa (Exim 4.52)
	id 1F4G3o-0006ev-2U
	for java-user@lucene.apache.org; Wed, 01 Feb 2006 11:22:04 +0000
Message-ID: <007201c62721$ba5d0460$6500a8c0@leondell>
From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
To: <java-user@lucene.apache.org>
References: <DDEB64C8619AC64DBC074208B046611C02800C@kronos.neoworks.co.uk>
Subject: Re: Memory problem
Date: Wed, 1 Feb 2006 11:21:50 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps.elderlycare-help.co.uk
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - macranet.co.uk
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Nick,
 we didnt get the error on importing it was actually when conducting a 
search. Would this still help?
Thanks
Leon
----- Original Message ----- 
From: "Nick Vincent" <nick@neoworks.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 01, 2006 11:17 AM
Subject: RE: Memory problem


Hi Leon,

I had a similar problem when doing a test import which I believe was 
actually down to object churn in parsing the data to create the Documents. 
I achieved a quick fix by calling System.gc() every thousand documents.

Cheers,

Nick

________________________________

From: Leon Chaddock [mailto:leonchaddock@macranet.co.uk]
Sent: Wed 01/02/2006 10:21
To: java-user@lucene.apache.org
Subject: Memory problem



Hi All,

We have a lucene index of over 10 000 000 docs at this time.
When we try and run a search we get
java.lang.OutOfMemoryError: Java heap space

We have tried setting the xmx settings to 1gb but to no avail (the box has
4gb of memory available) . IS there any guidance on handling memory or has
anyone had similar problems before that could help?

Many thanks

Leon

----- Original Message -----
From: "Pradeep Sharma" <pradeep@danicorp.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 01, 2006 2:03 AM
Subject: Greetings and my first question - Is it a good practise to store
application configuration in Lucene




I have just joined this user group, but I probably will be asking questions
/ contributing for a while now as I am starting to work on a product which
will use Lucene exclusively.

Still in the designing phase, and I see that we need to manage several user
/ application specific configurations and I am exploring the idea of storing
the configuration information also in the Index, may be create a separate
index just for the configuration, because each module of the application
will have access to Lucene classes.

I know technically this can be done, but are there any best practises which
discourage this?

Thanks in advance.
-Pradeep



--------------------------------------------------------------------------------


No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.14.25/246 - Release Date: 30/01/2006


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org







--------------------------------------------------------------------------------


> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


--------------------------------------------------------------------------------


No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.14.25/246 - Release Date: 30/01/2006


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 12:16:39 2006
Return-Path: <java-user-return-18699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66890 invoked from network); 1 Feb 2006 12:16:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 12:16:39 -0000
Received: (qmail 67819 invoked by uid 500); 1 Feb 2006 12:16:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67744 invoked by uid 500); 1 Feb 2006 12:16:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67718 invoked by uid 99); 1 Feb 2006 12:16:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 04:16:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.20.168.25] (HELO uar.i-hypergrid.com) (217.20.168.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 04:16:22 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id D535888766
	for <java-user@lucene.apache.org>; Wed,  1 Feb 2006 14:16:01 +0200 (EET)
Message-ID: <43E0A676.5000405@i-hypergrid.com>
Date: Wed, 01 Feb 2006 14:15:50 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Memory problem
References: <e97a509fb54c459aa9f81191c764d158@danicorp.com> <005201c62719$5e199b80$6500a8c0@leondell>
In-Reply-To: <005201c62719$5e199b80$6500a8c0@leondell>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As long as you have many document in index there can many unique terms 
in index.
Every 128th term(by default) is written to term info index for faster 
term lookup.
This info is loaded entirely to memory when searching so this can 
increase memory usage.
Note that this does not depends on number of documents in index, it 
depends on number of unique terms in index.

This can be changed by setting higher value in 
indexWriter.setTermIndexInterval();
Be aware of setting this value too hight because search performance will 
degrade.
NOTE: this options is available only in Lucene 1.9.

Also it can depend on number of fields in document, the way you process 
them (store, index, tokenize etc.)


Leon Chaddock wrote:
> Hi All,
>
> We have a lucene index of over 10 000 000 docs at this time.
> When we try and run a search we get
> java.lang.OutOfMemoryError: Java heap space
>
> We have tried setting the xmx settings to 1gb but to no avail (the box 
> has 4gb of memory available) . IS there any guidance on handling 
> memory or has anyone had similar problems before that could help?
>
> Many thanks
>
> Leon
>
> ----- Original Message ----- From: "Pradeep Sharma" 
> <pradeep@danicorp.com>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, February 01, 2006 2:03 AM
> Subject: Greetings and my first question - Is it a good practise to 
> store application configuration in Lucene
>
>
>
>
> I have just joined this user group, but I probably will be asking 
> questions / contributing for a while now as I am starting to work on a 
> product which will use Lucene exclusively.
>
> Still in the designing phase, and I see that we need to manage several 
> user / application specific configurations and I am exploring the idea 
> of storing the configuration information also in the Index, may be 
> create a separate index just for the configuration, because each 
> module of the application will have access to Lucene classes.
>
> I know technically this can be done, but are there any best practises 
> which discourage this?
>
> Thanks in advance.
> -Pradeep
>
>
>
> -------------------------------------------------------------------------------- 
>
>
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.375 / Virus Database: 267.14.25/246 - Release Date: 
> 30/01/2006
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 12:24:48 2006
Return-Path: <java-user-return-18700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70523 invoked from network); 1 Feb 2006 12:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 12:24:48 -0000
Received: (qmail 79893 invoked by uid 500); 1 Feb 2006 12:24:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79865 invoked by uid 500); 1 Feb 2006 12:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79854 invoked by uid 99); 1 Feb 2006 12:24:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 04:24:41 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.138.151.43] (HELO inergen.sybase.com) (192.138.151.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 04:24:40 -0800
Received: from smtp2.sybase.com (sybgate2 [10.22.97.85])
	by inergen.sybase.com  with ESMTP id k11COJt29972
	for <java-user@lucene.apache.org>; Wed, 1 Feb 2006 04:24:19 -0800 (PST)
Received: from gwwest.sybase.com (localhost [127.0.0.1])
	by smtp2.sybase.com  with ESMTP id EAA04957
	for <java-user@lucene.apache.org>; Wed, 1 Feb 2006 04:24:19 -0800 (PST)
Subject: Sorting by Score
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5 September 26, 2003
Message-ID: <OF35A3A0F1.4333AA79-ON88257108.0043FEAC-85257108.0044240F@sybase.com>
From: Daniel.Clark@sybase.com
Date: Wed, 1 Feb 2006 07:24:17 -0500
X-MIMETrack: Serialize by Router on gwwest/SYBASE(Release 6.5.4|March 27, 2005) at 02/01/2006
 04:24:19 AM
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


My primary sort is by relevance score and my secondary sort is by date.
The Hits.getScore() method returns the score by 7 digits to the right of
the decimal point.  Therefore, If I round to only 2 decimal points in the
display, the underlying 7 point score will be different in the sort.

Example:   score = .7876546   Display score = 79%        The two scores
should be equal in sort.
            score = .7907536  Display score = 79%

How do I convert the score in the Hits.getScore() method to sort to the
rounded 2 decimal point float like the score displayed?  Any help will be
appreciated.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Daniel Clark, Senior Consultant
Sybase Federal Professional Services
6550 Rock Spring Drive, Suite 800
Bethesda, MD  20817
Office - (301) 896-1103
Office Fax - (301) 896-1604
Mobile - (703) 403-0340
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 13:45:05 2006
Return-Path: <java-user-return-18701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23692 invoked from network); 1 Feb 2006 13:45:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 13:45:05 -0000
Received: (qmail 87256 invoked by uid 500); 1 Feb 2006 13:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87219 invoked by uid 500); 1 Feb 2006 13:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87208 invoked by uid 99); 1 Feb 2006 13:44:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 05:44:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 05:44:57 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14E78859@mailer.syr.edu>; Wed, 1 Feb 2006 8:44:36 -0500
Message-ID: <43E0BB3B.4030908@syr.edu>
Date: Wed, 01 Feb 2006 08:44:27 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Distributed vs Merged Searching
References: <6c33f9950601311925n1c6c28e2o64f5be4b2c5e96b3@mail.gmail.com> <6c33f9950601311932o307aaa94q2c6a2ffbca148122@mail.gmail.com>
In-Reply-To: <6c33f9950601311932o307aaa94q2c6a2ffbca148122@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You might find http://hellonline.com/blog/?p=55 helpful.  It discusses 
some issues with parallel distributed searches and may be helpful.

How many documents are you expecting to index?  And how many unique 
terms do you expect?

Chun Wei Ho wrote:
> I am deploying a web application serving searches on a Lucene index,
> and am deciding between distributing search between several machines
> or single searching, and was hoping that someone could tell me from
> their experiences:
>
> + Is there anything particular to watch out for if using distributed
> searching instead of  searching one merged Lucene index?
>
> + What should be the size of the index that I am looking at before I
> need to (or should be) turn to distributed searching to reduce
> response/search time? I know it would depend a lot on hardware and request
> frequency but I was wondering if anyone could post their hardware
> info and index size as a reference of when/if they had to use
> distributed search due to load issues.
>
> Thanks :)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 16:33:23 2006
Return-Path: <java-user-return-18702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42200 invoked from network); 1 Feb 2006 16:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 16:33:22 -0000
Received: (qmail 38130 invoked by uid 500); 1 Feb 2006 16:33:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37968 invoked by uid 500); 1 Feb 2006 16:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37949 invoked by uid 99); 1 Feb 2006 16:33:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 08:33:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.112.4.54] (HELO smtp.nildram.co.uk) (195.112.4.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 08:33:05 -0800
Received: from raven (propel.gotadsl.co.uk [81.6.247.155])
	by smtp.nildram.co.uk (Postfix) with ESMTP id B6E6725872D
	for <java-user@lucene.apache.org>; Wed,  1 Feb 2006 16:27:51 +0000 (GMT)
From: "Gwyn Carwardine" <gwyn@carwardine.net>
To: <java-user@lucene.apache.org>
Subject: Indexing and searching and item with attachments
Date: Wed, 1 Feb 2006 16:24:06 -0000
Message-ID: <044a01c6274b$eea50360$ca03010a@theoldstore.propelsystems.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYnNbKcqAaYRGSfToWiJpOBCX8/tAAFRHhA
In-Reply-To: <43E0BB3B.4030908@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I want to be able to store items and attachments such that they are treated
as a single document.

On the other hand I want to be able to store them separately; there is not
point in reindexing an attachment if I've simply changed the description.

Here's an example: A system used to track job candidates and their CVs.

A database keeps the core stuff, such as name, address, next availability,
salary expectation, record of conversations etc. The candidates CV(s) are
stored separately in the file system.

In this example I want to enable full text searching. I want to be able to
specify a query of "salary:[20000 TO 30000] c#". In this case "salary" will
have been taken from the database and the "c#" I would expect to be found in
the CV.

If I store the items and attachments as separate documents then Lucene will
probably return me nothing. I need to effectively store them together, but
on the other hand I don't want to have to keep reindexing attachments that
haven't changed.

Is there a standard method for dealing with this?

-Gwyn


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 17:16:09 2006
Return-Path: <java-user-return-18703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65753 invoked from network); 1 Feb 2006 17:16:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 17:16:07 -0000
Received: (qmail 20078 invoked by uid 500); 1 Feb 2006 17:16:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19144 invoked by uid 500); 1 Feb 2006 17:15:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19133 invoked by uid 99); 1 Feb 2006 17:15:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 09:15:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.128.234.248] (HELO mail.quanam.it) (195.128.234.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 09:15:58 -0800
Received: from [192.168.68.125] by mail.quanam.it
	(MDaemon.PRO.v8.1.1.R)
	with ESMTP id md50000013631.msg
	for <java-user@lucene.apache.org>; Wed, 01 Feb 2006 18:15:37 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [267.14.25/247]); Wed, 01 Feb 2006 18:15:34 +0100
Message-ID: <43E0ECB6.9070003@softinstigate.com>
Date: Wed, 01 Feb 2006 18:15:34 +0100
From: Andrea Di Cesare <andrea@softinstigate.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
To:  java-user@lucene.apache.org
Subject: update a document with unstored fields
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary=------------000000000301090104000906
X-Authenticated-Sender: andrea@softinstigate.com
X-Spam-Processed: mail.quanam.it, Wed, 01 Feb 2006 18:15:37 +0100
	(not processed: message from valid local sender)
X-MDRemoteIP: 85.18.136.64
X-Return-Path: andrea@softinstigate.com
X-MDaemon-Deliver-To: java-user@lucene.apache.org
X-MDAV-Processed: mail.quanam.it, Wed, 01 Feb 2006 18:15:37 +0100
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------000000000301090104000906
Content-Type: text/plain; x-avg=cert; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Content-Description: "AVG certification"

No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.14.25/247 - Release Date: 31/01/2006=



--------------000000000301090104000906
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------000000000301090104000906--


From java-user-return-18704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 18:03:55 2006
Return-Path: <java-user-return-18704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91016 invoked from network); 1 Feb 2006 18:03:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 18:03:55 -0000
Received: (qmail 12489 invoked by uid 500); 1 Feb 2006 18:03:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12441 invoked by uid 500); 1 Feb 2006 18:03:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12394 invoked by uid 99); 1 Feb 2006 18:03:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 10:03:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 10:03:48 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E32B65B7C6; Wed,  1 Feb 2006 10:03:17 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DE9DD7F403
	for <java-user@lucene.apache.org>; Wed,  1 Feb 2006 10:03:17 -0800 (PST)
Date: Wed, 1 Feb 2006 10:03:17 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Memory problem
In-Reply-To: <005201c62719$5e199b80$6500a8c0@leondell>
Message-ID: <Pine.LNX.4.58.0602010944330.3417@hal.rescomp.berkeley.edu>
References: <e97a509fb54c459aa9f81191c764d158@danicorp.com>
 <005201c62719$5e199b80$6500a8c0@leondell>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


it seems like there are a few common things that bite people over and over
again that you should check first and foremost...


1) don't use more searchers/readers then you need.

Every time you open an IndexSearcher/IndexReader resources are used which
take up memory.  for an application pointed at a static index, you only
ever need one IndexReader/IndexSearcher that can be shared among multiple
threads issuing queries.  if your index is being incrimentally updated,
you should never need more then two searcher/reader pairs open at a time
-- one in use, and one that you open/warm up when you detect changes.
swap it in for the "in use" instance when ready, and close the old "in
use" instance as soon as all clients that were using it are done.

2) close your resources when you are finished with them.

The most common waste of memory i've seen is people who don't close
instances of IndexSearcher or IndexReader when they are done with them.
it's not enough to rely on them going out of scope and being garbage
collected, you have to explictly close them to ensure that things like the
CachingWrappingFilter and the FieldCache aren't caching large amounts of
data for an IndexReader that can never be used again.

A big part of this is making sure you know when your IndexSearcher is
going to close your IndexReader for you -- read the javadocs carefully.

3) don't sort on more fields then you can afford.

Every time you sort on a field, a FieldCache array is constructed for that
field.  If you need to save some ram, and you currently let your clients
sort on 30 different fields, try limiting their sort options -- those
arrays can take up a lot of space.

4) RangeQuery, PrefixQuery and WildCardQuery cost RAM

if you use RangeQuery, PrefixQuery and WildCardQuery be prepared for them
to eat up a lot of ram doing query expansion -- especially if you increase
BooleanQuery.maxClauseCount to prevent TooManyClauses exceptions.  the
trade off you make by doing that is that now a prefix query like "f:a*"
will expand into a boolean query containing every term in the field f that
starts with an "a" ... if you've got a lot of terms, that can be a very
big query, and it can take up a lot of RAM.

Consider using ConstantScoreRangeQuery, etc.. instead.

5) don't use field norms if you don't need them.

This is only an option if you are using 1.9, and it's only a big issue if
you have many indexed fields.  FieledNorms take up one byte per doc per
indexed field -- even if a doc doens't have a value for that field, it
still gets a norm for that field.  There are options when indexing to
prevent norms from being calculated, which can save a lot of space.




: Date: Wed, 1 Feb 2006 10:21:55 -0000
: From: Leon Chaddock <leonchaddock@macranet.co.uk>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Memory problem
:
: Hi All,
:
: We have a lucene index of over 10 000 000 docs at this time.
: When we try and run a search we get
: java.lang.OutOfMemoryError: Java heap space
:
: We have tried setting the xmx settings to 1gb but to no avail (the box has
: 4gb of memory available) . IS there any guidance on handling memory or has
: anyone had similar problems before that could help?
:
: Many thanks
:
: Leon
:
: ----- Original Message -----
: From: "Pradeep Sharma" <pradeep@danicorp.com>
: To: <java-user@lucene.apache.org>
: Sent: Wednesday, February 01, 2006 2:03 AM
: Subject: Greetings and my first question - Is it a good practise to store
: application configuration in Lucene
:
:
:
:
: I have just joined this user group, but I probably will be asking questions
: / contributing for a while now as I am starting to work on a product which
: will use Lucene exclusively.
:
: Still in the designing phase, and I see that we need to manage several user
: / application specific configurations and I am exploring the idea of storing
: the configuration information also in the Index, may be create a separate
: index just for the configuration, because each module of the application
: will have access to Lucene classes.
:
: I know technically this can be done, but are there any best practises which
: discourage this?
:
: Thanks in advance.
: -Pradeep
:
:
:
: --------------------------------------------------------------------------------
:
:
: No virus found in this incoming message.
: Checked by AVG Free Edition.
: Version: 7.1.375 / Virus Database: 267.14.25/246 - Release Date: 30/01/2006
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 20:13:37 2006
Return-Path: <java-user-return-18705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60962 invoked from network); 1 Feb 2006 20:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 20:13:36 -0000
Received: (qmail 42736 invoked by uid 500); 1 Feb 2006 20:13:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42707 invoked by uid 500); 1 Feb 2006 20:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42694 invoked by uid 99); 1 Feb 2006 20:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 12:13:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Eric.Isakson@sas.com designates 149.173.6.147 as permitted sender)
Received: from [149.173.6.147] (HELO mercav03.na.sas.com) (149.173.6.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 12:13:28 -0800
Received: from MERC23.na.sas.com ([10.19.9.179]) by mercav03.na.sas.com with InterScan Message Security Suite; Wed, 01 Feb 2006 15:13:06 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sorting by Score
Date: Wed, 1 Feb 2006 15:13:05 -0500
Message-ID: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting by Score
Thread-Index: AcYnKn0n9MSDBP2yRhq16L0oe5t8BQAP/8qg
From: "Eric Isakson" <Eric.Isakson@sas.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Am I understanding your problem correctly?

If you have two hits:

Hit A   score =3D .7876546   rounded score =3D .79    date 2006Feb01
Hit B   score =3D .7907536   rounded score =3D .79    date 2006Jan01

You would like to have the hits sorted as A, B but you are getting the =
hits in the order B, A because they are sorted before you are able to =
round off the scores.

I've not used the sorting code yet, but it looks like you have to =
provide some custom ScoreDocComparator by adding a SortField using the =
SortField(String field, SortComparatorSource comparator) constructor. =
I'm just not certain what you should specify for the field value since =
you really want to just round off the score.

Could someone with more experience using the Sort API clarify whether =
this is possible?
=20

-----Original Message-----
From: Daniel.Clark@sybase.com [mailto:Daniel.Clark@sybase.com]=20
Sent: Wednesday, February 01, 2006 7:24 AM
To: java-user@lucene.apache.org
Subject: Sorting by Score


My primary sort is by relevance score and my secondary sort is by date.
The Hits.getScore() method returns the score by 7 digits to the right of =
the decimal point.  Therefore, If I round to only 2 decimal points in =
the display, the underlying 7 point score will be different in the sort.

Example:   score =3D .7876546   Display score =3D 79%        The two =
scores
should be equal in sort.
            score =3D .7907536  Display score =3D 79%

How do I convert the score in the Hits.getScore() method to sort to the =
rounded 2 decimal point float like the score displayed?  Any help will =
be appreciated.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Daniel Clark, Senior Consultant
Sybase Federal Professional Services
6550 Rock Spring Drive, Suite 800
Bethesda, MD  20817
Office - (301) 896-1103
Office Fax - (301) 896-1604
Mobile - (703) 403-0340
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 21:06:50 2006
Return-Path: <java-user-return-18706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97757 invoked from network); 1 Feb 2006 21:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 21:06:49 -0000
Received: (qmail 38565 invoked by uid 500); 1 Feb 2006 21:06:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38548 invoked by uid 500); 1 Feb 2006 21:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38535 invoked by uid 99); 1 Feb 2006 21:06:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 13:06:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 13:06:42 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 867F85B774; Wed,  1 Feb 2006 13:06:12 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 80E927F403
	for <java-user@lucene.apache.org>; Wed,  1 Feb 2006 13:06:12 -0800 (PST)
Date: Wed, 1 Feb 2006 13:06:12 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: Sorting by Score
In-Reply-To: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
Message-ID: <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I've not used the sorting code yet, but it looks like you have to
: provide some custom ScoreDocComparator by adding a SortField using the
: SortField(String field, SortComparatorSource comparator) constructor.
: I'm just not certain what you should specify for the field value since
: you really want to just round off the score.
:
: Could someone with more experience using the Sort API clarify whether
: this is possible?

yes, it should be possible, and yes your description of a solution sounds
right ... the only odd thing is you'd be writting a
SortComparatorSource/ScoreDocComparator that would be ignoring the field
it's given, but there's nothing wrong with that.

Round your number to the desired precision, then compare them, and return
0 if they are equal so that the secondary sort (on date in this case) can
take affect.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 21:40:15 2006
Return-Path: <java-user-return-18707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14778 invoked from network); 1 Feb 2006 21:40:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 21:40:14 -0000
Received: (qmail 91341 invoked by uid 500); 1 Feb 2006 21:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91317 invoked by uid 500); 1 Feb 2006 21:40:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91299 invoked by uid 99); 1 Feb 2006 21:40:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 13:40:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Eric.Isakson@sas.com designates 149.173.6.148 as permitted sender)
Received: from [149.173.6.148] (HELO mercav05.na.sas.com) (149.173.6.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 13:40:02 -0800
Received: from MERC23.na.sas.com ([10.19.9.179]) by mercav05.na.sas.com with InterScan Message Security Suite; Wed, 01 Feb 2006 16:39:40 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sorting by Score
Date: Wed, 1 Feb 2006 16:39:39 -0500
Message-ID: <BFF5F6DFB538074B8A3FCD685C0DBE360124154A@MERC23.na.sas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting by Score
Thread-Index: AcYnc2q/qe+6hLAZTmOhjcfxZpVBBgABEfpQ
From: "Eric Isakson" <Eric.Isakson@sas.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

from your previous post about memory..."Every time you sort on a field, =
a FieldCache array is constructed for that field."

would that happen in this case for the field this comparator is not =
using?

-----Original Message-----
From: hossman@hal.rescomp.berkeley.edu =
[mailto:hossman@hal.rescomp.berkeley.edu] On Behalf Of Chris Hostetter
Sent: Wednesday, February 01, 2006 4:06 PM
To: java-user@lucene.apache.org
Subject: RE: Sorting by Score


: I've not used the sorting code yet, but it looks like you have to
: provide some custom ScoreDocComparator by adding a SortField using the
: SortField(String field, SortComparatorSource comparator) constructor.
: I'm just not certain what you should specify for the field value since
: you really want to just round off the score.
:
: Could someone with more experience using the Sort API clarify whether
: this is possible?

yes, it should be possible, and yes your description of a solution =
sounds right ... the only odd thing is you'd be writting a =
SortComparatorSource/ScoreDocComparator that would be ignoring the field =
it's given, but there's nothing wrong with that.

Round your number to the desired precision, then compare them, and =
return 0 if they are equal so that the secondary sort (on date in this =
case) can take affect.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 01 22:36:41 2006
Return-Path: <java-user-return-18708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41798 invoked from network); 1 Feb 2006 22:36:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Feb 2006 22:36:40 -0000
Received: (qmail 78353 invoked by uid 500); 1 Feb 2006 22:36:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78326 invoked by uid 500); 1 Feb 2006 22:36:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78315 invoked by uid 99); 1 Feb 2006 22:36:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 14:36:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 14:36:31 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3D3435B80B; Wed,  1 Feb 2006 14:36:04 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2E4627F403
	for <java-user@lucene.apache.org>; Wed,  1 Feb 2006 14:36:04 -0800 (PST)
Date: Wed, 1 Feb 2006 14:36:04 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: Sorting by Score
In-Reply-To: <BFF5F6DFB538074B8A3FCD685C0DBE360124154A@MERC23.na.sas.com>
Message-ID: <Pine.LNX.4.58.0602011429530.14150@hal.rescomp.berkeley.edu>
References: <BFF5F6DFB538074B8A3FCD685C0DBE360124154A@MERC23.na.sas.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: from your previous post about memory..."Every time you sort on a field,
: a FieldCache array is constructed for that field."
:
: would that happen in this case for the field this comparator is not using?

Ooohhh ... good question.  As long as you write your own implimentation of
SortComparatorSource from scratch, then no -- not unless you went out of
your way to initialize the FieldCache.  but if you subclass an existing
SortComparatorSource it might.  (trying to use the abstract class
SortComparator would definitely have that problem)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 04:31:47 2006
Return-Path: <java-user-return-18709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66654 invoked from network); 2 Feb 2006 04:31:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 04:31:47 -0000
Received: (qmail 10096 invoked by uid 500); 2 Feb 2006 04:31:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10070 invoked by uid 500); 2 Feb 2006 04:31:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10058 invoked by uid 99); 2 Feb 2006 04:31:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 20:31:41 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [61.6.32.55] (HELO smtp5.jaring.my) (61.6.32.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 20:31:40 -0800
Received: from webmail3.jaring.my (l4-bkj-p1.jaring.my [61.6.32.100])
	by smtp5.jaring.my (8.13.4/8.13.1) with ESMTP id k124V99N053011
	for <java-user@lucene.apache.org>; Thu, 2 Feb 2006 12:31:14 +0800 (MYT)
	(envelope-from azlan95@myjaring.net)
Received: (from www@localhost)
	by webmail3.jaring.my (8.12.9p2/8.12.9/Submit) id k124V4uK018031
	for java-user@lucene.apache.org; Thu, 2 Feb 2006 12:31:04 +0800 (MYT)
	(envelope-from azlan95@myjaring.net)
Received: from cgl-r4-a204.time.net.my (cgl-r4-a204.time.net.my [211.24.5.204]) 
	by webmail.jaring.my (IMP) with HTTP 
	for <my38184@mbox.jaring.my>; Thu,  2 Feb 2006 12:31:04 +0800
Message-ID: <1138854664.43e18b0852cc3@webmail.jaring.my>
Date: Thu,  2 Feb 2006 12:31:04 +0800
From: Azlan Abdul Latiff <azlan95@myjaring.net>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: IndexWriter.java
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: JARING Webmail v1.2 (http://www.jaring.my)
X-Originating-IP: 211.24.5.204
X-Virus-Scanned: JARING E-Mail Virus Scanner v2.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does anyone have the file IndexWriter.java?

Azlan


----------------------------------------------------------------
This e-mail has been sent via JARING webmail at http://www.jaring.my

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 04:38:03 2006
Return-Path: <java-user-return-18710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68420 invoked from network); 2 Feb 2006 04:38:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 04:38:03 -0000
Received: (qmail 13868 invoked by uid 500); 2 Feb 2006 04:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13827 invoked by uid 500); 2 Feb 2006 04:37:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13815 invoked by uid 99); 2 Feb 2006 04:37:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 20:37:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 20:37:56 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 257405B787; Wed,  1 Feb 2006 20:37:27 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1CB1A7F403
	for <java-user@lucene.apache.org>; Wed,  1 Feb 2006 20:37:27 -0800 (PST)
Date: Wed, 1 Feb 2006 20:37:27 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: IndexWriter.java
In-Reply-To: <1138854664.43e18b0852cc3@webmail.jaring.my>
Message-ID: <Pine.LNX.4.58.0602012034580.878@hal.rescomp.berkeley.edu>
References: <1138854664.43e18b0852cc3@webmail.jaring.my>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Does anyone have the file IndexWriter.java?

your question is very perplexing.  are you looking for the class that
comes with lucene? ...

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/lucene/index/IndexWriter.java?rev=372350&view=markup

...or are you looking for some other more high level API that just happens
to have the same name?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 05:30:38 2006
Return-Path: <java-user-return-18711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90838 invoked from network); 2 Feb 2006 05:30:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 05:30:38 -0000
Received: (qmail 70830 invoked by uid 500); 2 Feb 2006 05:30:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69759 invoked by uid 500); 2 Feb 2006 05:30:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69729 invoked by uid 99); 2 Feb 2006 05:30:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 21:30:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=EXTRA_MPART_TYPE,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 143.127.12.111 is neither permitted nor denied by domain of Vikas_Khengare@symantec.com)
Received: from [143.127.12.111] (HELO silver.veritas.com) (143.127.12.111)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 21:30:13 -0800
Received: from sxchcon1-int.veritas.com (HELO SVLXCHCON1.enterprise.veritas.com) ([10.137.18.171])
  by silver.veritas.com with ESMTP; 01 Feb 2006 21:29:51 -0800
Received: from itpxchmb2.enterprise.veritas.com ([10.216.17.1]) by SVLXCHCON1.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.211);
	 Wed, 1 Feb 2006 21:29:52 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----_=_NextPart_001_01C627B9.AB9C4580";
	type="multipart/alternative"
Subject: Sending query to multiple servers and combine all Hits from them ?
Date: Thu, 2 Feb 2006 10:59:42 +0530
Message-ID: <D17EC75396CC974E85E180CE6F7F045D035D776B@itpxchmb2.enterprise.veritas.com>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: Sending query to multiple servers and combine all Hits from them ?
Thread-Index: AcYnujMc2F+3rm9XRmqcn+/hkqoyGA==
From: "Vikas Khengare" <Vikas_Khengare@symantec.com>
To: <lucene-user@jakarta.apache.org>,
	<lucene-dev@jakarta.apache.org>,
	<java-dev@lucene.apache.org>,
	<java-user@lucene.apache.org>,
	<java-commits@lucene.apache.org>
X-OriginalArrivalTime: 02 Feb 2006 05:29:52.0287 (UTC) FILETIME=[B14092F0:01C627B9]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C627B9.AB9C4580
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_002_01C627B9.AB9C4580"


------_=_NextPart_002_01C627B9.AB9C4580
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi Friends.......
=20
        I am doing search application which has following scenario.
=20
Architecture =3D=3D>
1] Common GUI
2] When user enter one query then It should go to 4 searcher server (All
servers are on remote machines)
3] After searching all 4 server should return results i.e. Hits ( All
server return hits objects in diff formats i.e. all 4 servers return hit
doc's in diff formats)
4] Combine all Hits and form only type of result
5] Show that result in Uniform way to user
=20
Problems =3D=3D>
1] How do I send my search query to all 4 searcher server. ?
2] After searching How do I get all result (Hits) for combining them in
one bundle; Because they all are in different format. ?
3] Shall I use AJAX for sending query across multiple server and getting
results back from all servers( Or any other technology, if yes specify)
?
4] How do I combine all hits ?
=20
=20
=20
=20
Thanks..................
=20
Best Regards
[ vikas_khengare@symantec.com ]

------_=_NextPart_002_01C627B9.AB9C4580
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2800.1458" name=3DGENERATOR></HEAD>
<BODY>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>Hi=20
Friends.......</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I =
am doing=20
search application which has following scenario.</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN =
class=3D953260605-02022006>Architecture=20
=3D=3D&gt;</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>1] =
Common=20
GUI</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>2] =
When user enter=20
one query then It should go to 4 searcher server (All servers are on =
remote=20
machines)</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>3] =
After searching=20
all 4 server should return results i.e. Hits ( All server return hits =
objects in=20
diff formats i.e. all 4 servers return hit doc's in diff=20
formats)</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>4] =
Combine all Hits=20
and form only type of result</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>5] =
Show that result=20
in Uniform way to user</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN =
class=3D953260605-02022006>Problems=20
=3D=3D&gt;</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>1] How =
do I send my=20
search query to all 4 searcher server. ?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>2] =
After searching=20
How do I get all result (Hits) for combining them in one bundle; Because =
they=20
all are in different format. ?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN =
class=3D953260605-02022006>3]&nbsp;Shall&nbsp;I=20
use <STRONG>AJAX</STRONG> for sending query across multiple server and =
getting=20
results back from all servers( Or any other technology, if yes specify)=20
?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>4] How =
do I combine=20
all hits ?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><IMG height=3D448 src=3D"cid:953260605@02022006-17C5" width=3D594=20
v:shapes=3D"_x0000_s1081 _x0000_s1082 _x0000_s1083 _x0000_s1084 =
_x0000_s1085 _x0000_s1086 _x0000_s1087 _x0000_s1088 _x0000_s1089 =
_x0000_s1090 _x0000_s1091 _x0000_s1092 _x0000_s1093 _x0000_s1094 =
_x0000_s1095 _x0000_s1096 _x0000_s1097 _x0000_s1098 _x0000_s1099 =
_x0000_s1100 _x0000_s1101 _x0000_s1102 _x0000_s1103 _x0000_s1104"></DIV>
<DIV><SPAN class=3D953260605-02022006><FONT face=3DArial=20
size=3D2>Thanks..................</FONT></SPAN></DIV>
<DIV><SPAN class=3D953260605-02022006><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D953260605-02022006><FONT face=3DArial size=3D2>Best=20
Regards</FONT></SPAN></DIV>
<DIV><SPAN class=3D953260605-02022006><FONT face=3DArial size=3D2>[ <A=20
href=3D"mailto:vikas_khengare@symantec.com">vikas_khengare@symantec.com</=
A>=20
]</FONT></SPAN></DIV></BODY></HTML>

------_=_NextPart_002_01C627B9.AB9C4580--

------_=_NextPart_001_01C627B9.AB9C4580--

From java-user-return-18712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 05:30:39 2006
Return-Path: <java-user-return-18712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90909 invoked from network); 2 Feb 2006 05:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 05:30:38 -0000
Received: (qmail 70925 invoked by uid 500); 2 Feb 2006 05:30:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69805 invoked by uid 500); 2 Feb 2006 05:30:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69769 invoked by uid 500); 2 Feb 2006 05:30:14 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 69730 invoked by uid 99); 2 Feb 2006 05:30:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 21:30:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=EXTRA_MPART_TYPE,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 143.127.12.111 is neither permitted nor denied by domain of Vikas_Khengare@symantec.com)
Received: from [143.127.12.111] (HELO silver.veritas.com) (143.127.12.111)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 21:30:13 -0800
Received: from sxchcon1-int.veritas.com (HELO SVLXCHCON1.enterprise.veritas.com) ([10.137.18.171])
  by silver.veritas.com with ESMTP; 01 Feb 2006 21:29:51 -0800
Received: from itpxchmb2.enterprise.veritas.com ([10.216.17.1]) by SVLXCHCON1.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.211);
	 Wed, 1 Feb 2006 21:29:52 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----_=_NextPart_001_01C627B9.AB9C4580";
	type="multipart/alternative"
Subject: Sending query to multiple servers and combine all Hits from them ?
Date: Thu, 2 Feb 2006 10:59:42 +0530
Message-ID: <D17EC75396CC974E85E180CE6F7F045D035D776B@itpxchmb2.enterprise.veritas.com>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: Sending query to multiple servers and combine all Hits from them ?
Thread-Index: AcYnujMc2F+3rm9XRmqcn+/hkqoyGA==
From: "Vikas Khengare" <Vikas_Khengare@symantec.com>
To: <lucene-user@jakarta.apache.org>,
	<lucene-dev@jakarta.apache.org>,
	<java-dev@lucene.apache.org>,
	<java-user@lucene.apache.org>,
	<java-commits@lucene.apache.org>
X-OriginalArrivalTime: 02 Feb 2006 05:29:52.0287 (UTC) FILETIME=[B14092F0:01C627B9]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C627B9.AB9C4580
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_002_01C627B9.AB9C4580"


------_=_NextPart_002_01C627B9.AB9C4580
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi Friends.......
=20
        I am doing search application which has following scenario.
=20
Architecture =3D=3D>
1] Common GUI
2] When user enter one query then It should go to 4 searcher server (All
servers are on remote machines)
3] After searching all 4 server should return results i.e. Hits ( All
server return hits objects in diff formats i.e. all 4 servers return hit
doc's in diff formats)
4] Combine all Hits and form only type of result
5] Show that result in Uniform way to user
=20
Problems =3D=3D>
1] How do I send my search query to all 4 searcher server. ?
2] After searching How do I get all result (Hits) for combining them in
one bundle; Because they all are in different format. ?
3] Shall I use AJAX for sending query across multiple server and getting
results back from all servers( Or any other technology, if yes specify)
?
4] How do I combine all hits ?
=20
=20
=20
=20
Thanks..................
=20
Best Regards
[ vikas_khengare@symantec.com ]

------_=_NextPart_002_01C627B9.AB9C4580
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2800.1458" name=3DGENERATOR></HEAD>
<BODY>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>Hi=20
Friends.......</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I =
am doing=20
search application which has following scenario.</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN =
class=3D953260605-02022006>Architecture=20
=3D=3D&gt;</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>1] =
Common=20
GUI</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>2] =
When user enter=20
one query then It should go to 4 searcher server (All servers are on =
remote=20
machines)</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>3] =
After searching=20
all 4 server should return results i.e. Hits ( All server return hits =
objects in=20
diff formats i.e. all 4 servers return hit doc's in diff=20
formats)</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>4] =
Combine all Hits=20
and form only type of result</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>5] =
Show that result=20
in Uniform way to user</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN =
class=3D953260605-02022006>Problems=20
=3D=3D&gt;</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>1] How =
do I send my=20
search query to all 4 searcher server. ?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>2] =
After searching=20
How do I get all result (Hits) for combining them in one bundle; Because =
they=20
all are in different format. ?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN =
class=3D953260605-02022006>3]&nbsp;Shall&nbsp;I=20
use <STRONG>AJAX</STRONG> for sending query across multiple server and =
getting=20
results back from all servers( Or any other technology, if yes specify)=20
?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D953260605-02022006>4] How =
do I combine=20
all hits ?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D953260605-02022006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><IMG height=3D448 src=3D"cid:953260605@02022006-17C5" width=3D594=20
v:shapes=3D"_x0000_s1081 _x0000_s1082 _x0000_s1083 _x0000_s1084 =
_x0000_s1085 _x0000_s1086 _x0000_s1087 _x0000_s1088 _x0000_s1089 =
_x0000_s1090 _x0000_s1091 _x0000_s1092 _x0000_s1093 _x0000_s1094 =
_x0000_s1095 _x0000_s1096 _x0000_s1097 _x0000_s1098 _x0000_s1099 =
_x0000_s1100 _x0000_s1101 _x0000_s1102 _x0000_s1103 _x0000_s1104"></DIV>
<DIV><SPAN class=3D953260605-02022006><FONT face=3DArial=20
size=3D2>Thanks..................</FONT></SPAN></DIV>
<DIV><SPAN class=3D953260605-02022006><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D953260605-02022006><FONT face=3DArial size=3D2>Best=20
Regards</FONT></SPAN></DIV>
<DIV><SPAN class=3D953260605-02022006><FONT face=3DArial size=3D2>[ <A=20
href=3D"mailto:vikas_khengare@symantec.com">vikas_khengare@symantec.com</=
A>=20
]</FONT></SPAN></DIV></BODY></HTML>

------_=_NextPart_002_01C627B9.AB9C4580--

------_=_NextPart_001_01C627B9.AB9C4580--

From java-user-return-18713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 05:57:24 2006
Return-Path: <java-user-return-18713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3093 invoked from network); 2 Feb 2006 05:57:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 05:57:23 -0000
Received: (qmail 4253 invoked by uid 500); 2 Feb 2006 05:57:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4220 invoked by uid 500); 2 Feb 2006 05:57:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4208 invoked by uid 99); 2 Feb 2006 05:57:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 21:57:18 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Daniel.Pfeifer@tradedoubler.com designates 212.247.9.195 as permitted sender)
Received: from [212.247.9.195] (HELO smtp.tradedoubler.com) (212.247.9.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 21:57:16 -0800
Received: from EXHQ01.root.tradedoubler.com ([192.168.11.57]) by smtp.tradedoubler.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 2 Feb 2006 06:56:54 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C627BD.77CDF4A8"
Subject: RE: Sending query to multiple servers and combine all Hits from them ?
Date: Thu, 2 Feb 2006 06:56:53 +0100
Message-ID: <4BA24A13BFC8B24EBD64FCA6525003446BA0B7@EXHQ01.root.tradedoubler.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sending query to multiple servers and combine all Hits from them ?
Thread-Index: AcYnujMc2F+3rm9XRmqcn+/hkqoyGAAArLgg
From: "Daniel Pfeifer" <Daniel.Pfeifer@tradedoubler.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Feb 2006 05:56:54.0329 (UTC) FILETIME=[78108A90:01C627BD]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C627BD.77CDF4A8
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

You search all four servers by doing this (the QueryParser in this
example uses the Lucene 1.9 syntax):

=20

Searchable[] searchables =3D new Searchable[]{(Searchable)
Naming.lookup(x1), (Searchable) Naming.lookup(x2), ...};

MultiSearcher multiSearcher =3D new MultiSearcher(searchables);

Hits hits =3D multiSearcher.search(new QueryParser("title", new
StandardAnalyzer()).parse("title:Ajax"));

=20

/Daniel

=20

________________________________

From: Vikas Khengare [mailto:Vikas_Khengare@symantec.com]=20
Sent: den 2 februari 2006 06:30
To: lucene-user@jakarta.apache.org; lucene-dev@jakarta.apache.org;
java-dev@lucene.apache.org; java-user@lucene.apache.org;
java-commits@lucene.apache.org
Subject: Sending query to multiple servers and combine all Hits from
them ?

=20

Hi Friends.......

=20

        I am doing search application which has following scenario.

=20

Architecture =3D=3D>

1] Common GUI

2] When user enter one query then It should go to 4 searcher server (All
servers are on remote machines)

3] After searching all 4 server should return results i.e. Hits ( All
server return hits objects in diff formats i.e. all 4 servers return hit
doc's in diff formats)

4] Combine all Hits and form only type of result

5] Show that result in Uniform way to user

=20

Problems =3D=3D>

1] How do I send my search query to all 4 searcher server. ?

2] After searching How do I get all result (Hits) for combining them in
one bundle; Because they all are in different format. ?

3] Shall I use AJAX for sending query across multiple server and getting
results back from all servers( Or any other technology, if yes specify)
?

4] How do I combine all hits ?

=20

=20

=20



Thanks..................

=20

Best Regards

[ vikas_khengare@symantec.com ]


------_=_NextPart_001_01C627BD.77CDF4A8--

From java-user-return-18714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 07:13:38 2006
Return-Path: <java-user-return-18714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29784 invoked from network); 2 Feb 2006 07:13:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 07:13:38 -0000
Received: (qmail 72655 invoked by uid 500); 2 Feb 2006 07:13:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72622 invoked by uid 500); 2 Feb 2006 07:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72611 invoked by uid 99); 2 Feb 2006 07:13:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 23:13:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 66.249.92.197 as permitted sender)
Received: from [66.249.92.197] (HELO uproxy.gmail.com) (66.249.92.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 23:13:31 -0800
Received: by uproxy.gmail.com with SMTP id e2so60876ugf
        for <java-user@lucene.apache.org>; Wed, 01 Feb 2006 23:13:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hcy1/ykZcL2/yNcX70sOf39UjK2VV/9qxXszcnEadUTRwmbTjezomUdxM8gUif+TmTtMzkCYXnHzG+6suATyCJOWo3GyKQIuvHn4j9wICR9Qp652shcoY8JatxMzcpI/aOHv/mJkNXWT3nNioC0RlV4wXf4wiMM+gn7WiLXNheg=
Received: by 10.49.20.3 with SMTP id x3mr22070nfi;
        Wed, 01 Feb 2006 23:13:09 -0800 (PST)
Received: by 10.49.54.12 with HTTP; Wed, 1 Feb 2006 23:13:09 -0800 (PST)
Message-ID: <88c6a6720602012313q713ec82aw938c98bae0cc23a5@mail.gmail.com>
Date: Thu, 2 Feb 2006 01:13:09 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distributed vs Merged Searching
In-Reply-To: <6c33f9950601311932o307aaa94q2c6a2ffbca148122@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6c33f9950601311925n1c6c28e2o64f5be4b2c5e96b3@mail.gmail.com>
	 <6c33f9950601311932o307aaa94q2c6a2ffbca148122@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

One issue is that if you are splitting the index in half (for
example), getting some results from index A and some from index B,
then you need to merge the results somewhere.  But the scores coming
from the two indexes are not related at all, for example, document 100
from index A has score 0.85, document 200 from index B has score 0.90
-- this doesn't necessarily mean that document 200 should be ranked
before document 100.    This is one issue to deal with.

I think this issue has been discussed on this mailing list before.=20
Has anyone else had to deal with this issue with a distributed index?=20
What does Nutch do?

-chris

On 1/31/06, Chun Wei Ho <cwho.work@gmail.com> wrote:
> I am deploying a web application serving searches on a Lucene index,
> and am deciding between distributing search between several machines
> or single searching, and was hoping that someone could tell me from
> their experiences:
>
> + Is there anything particular to watch out for if using distributed
> searching instead of  searching one merged Lucene index?
>
> + What should be the size of the index that I am looking at before I
> need to (or should be) turn to distributed searching to reduce
> response/search time? I know it would depend a lot on hardware and reques=
t
> frequency but I was wondering if anyone could post their hardware
> info and index size as a reference of when/if they had to use
> distributed search due to load issues.
>
> Thanks :)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 07:18:39 2006
Return-Path: <java-user-return-18715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31193 invoked from network); 2 Feb 2006 07:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 07:18:39 -0000
Received: (qmail 80084 invoked by uid 500); 2 Feb 2006 07:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79072 invoked by uid 500); 2 Feb 2006 07:18:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79061 invoked by uid 99); 2 Feb 2006 07:18:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 23:18:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Feb 2006 23:18:31 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k127I8r21240
	for <java-user@lucene.apache.org>; Thu, 2 Feb 2006 01:18:08 -0600
Message-ID: <43E1B22F.2000105@getopt.org>
Date: Thu, 02 Feb 2006 08:18:07 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributed vs Merged Searching
References: <6c33f9950601311925n1c6c28e2o64f5be4b2c5e96b3@mail.gmail.com>	 <6c33f9950601311932o307aaa94q2c6a2ffbca148122@mail.gmail.com> <88c6a6720602012313q713ec82aw938c98bae0cc23a5@mail.gmail.com>
In-Reply-To: <88c6a6720602012313q713ec82aw938c98bae0cc23a5@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Lamprecht wrote:
> One issue is that if you are splitting the index in half (for
> example), getting some results from index A and some from index B,
> then you need to merge the results somewhere.  But the scores coming
> from the two indexes are not related at all, for example, document 100
> from index A has score 0.85, document 200 from index B has score 0.90
> -- this doesn't necessarily mean that document 200 should be ranked
> before document 100.    This is one issue to deal with.
>
> I think this issue has been discussed on this mailing list before. 
> Has anyone else had to deal with this issue with a distributed index? 
> What does Nutch do?
>   

Please see http://issues.apache.org/jira/browse/NUTCH-92 . A solution is 
described there, but not implemented yet...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 08:22:08 2006
Return-Path: <java-user-return-18716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61120 invoked from network); 2 Feb 2006 08:21:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 08:21:58 -0000
Received: (qmail 28322 invoked by uid 500); 2 Feb 2006 08:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28191 invoked by uid 500); 2 Feb 2006 08:21:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28162 invoked by uid 99); 2 Feb 2006 08:21:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 00:21:34 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 143.127.12.110 is neither permitted nor denied by domain of Vikas_Khengare@symantec.com)
Received: from [143.127.12.110] (HELO gold.veritas.com) (143.127.12.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 00:21:33 -0800
Received: from sxchcon1-int.veritas.com (HELO SVLXCHCON1.enterprise.veritas.com) ([10.137.18.171])
  by gold.veritas.com with ESMTP; 02 Feb 2006 00:21:12 -0800
Received: from itpxchmb2.enterprise.veritas.com ([10.216.17.1]) by SVLXCHCON1.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.211);
	 Thu, 2 Feb 2006 00:21:12 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C627D1.9EC89838"
Subject: How do I send search query to Multiple search Indexes ?
Date: Thu, 2 Feb 2006 13:51:09 +0530
Message-ID: <D17EC75396CC974E85E180CE6F7F045D035D789B@itpxchmb2.enterprise.veritas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How do I send search query to Multiple search Indexes ?
Thread-Index: AcYn0iZmg9XwWJvUQjuwEWweFceg2Q==
From: "Vikas Khengare" <Vikas_Khengare@symantec.com>
To: <lucene-user@jakarta.apache.org>,
	<lucene-dev@jakarta.apache.org>,
	<java-user@lucene.apache.org>,
	<java-dev@lucene.apache.org>
X-OriginalArrivalTime: 02 Feb 2006 08:21:12.0715 (UTC) FILETIME=[A0DD65B0:01C627D1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C627D1.9EC89838
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi Friends
=20
    How do I send one search query to multiple search Indexes which are
on remote machines ?
=20
    Which Technology will help me (AJAX / simple Servlet) ?
=20
Thanks........... in advance
=20
I hope I will get result from experts like you........
=20
Best Regards
[ vikas_khengare@symantec.com ]

------_=_NextPart_001_01C627D1.9EC89838--

From java-user-return-18717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 08:22:26 2006
Return-Path: <java-user-return-18717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61138 invoked from network); 2 Feb 2006 08:21:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 08:21:59 -0000
Received: (qmail 28351 invoked by uid 500); 2 Feb 2006 08:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28219 invoked by uid 500); 2 Feb 2006 08:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28190 invoked by uid 500); 2 Feb 2006 08:21:34 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 28163 invoked by uid 99); 2 Feb 2006 08:21:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 00:21:34 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 143.127.12.110 is neither permitted nor denied by domain of Vikas_Khengare@symantec.com)
Received: from [143.127.12.110] (HELO gold.veritas.com) (143.127.12.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 00:21:33 -0800
Received: from sxchcon1-int.veritas.com (HELO SVLXCHCON1.enterprise.veritas.com) ([10.137.18.171])
  by gold.veritas.com with ESMTP; 02 Feb 2006 00:21:12 -0800
Received: from itpxchmb2.enterprise.veritas.com ([10.216.17.1]) by SVLXCHCON1.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.211);
	 Thu, 2 Feb 2006 00:21:12 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C627D1.9EC89838"
Subject: How do I send search query to Multiple search Indexes ?
Date: Thu, 2 Feb 2006 13:51:09 +0530
Message-ID: <D17EC75396CC974E85E180CE6F7F045D035D789B@itpxchmb2.enterprise.veritas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How do I send search query to Multiple search Indexes ?
Thread-Index: AcYn0iZmg9XwWJvUQjuwEWweFceg2Q==
From: "Vikas Khengare" <Vikas_Khengare@symantec.com>
To: <lucene-user@jakarta.apache.org>,
	<lucene-dev@jakarta.apache.org>,
	<java-user@lucene.apache.org>,
	<java-dev@lucene.apache.org>
X-OriginalArrivalTime: 02 Feb 2006 08:21:12.0715 (UTC) FILETIME=[A0DD65B0:01C627D1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C627D1.9EC89838
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi Friends
=20
    How do I send one search query to multiple search Indexes which are
on remote machines ?
=20
    Which Technology will help me (AJAX / simple Servlet) ?
=20
Thanks........... in advance
=20
I hope I will get result from experts like you........
=20
Best Regards
[ vikas_khengare@symantec.com ]

------_=_NextPart_001_01C627D1.9EC89838--

From java-user-return-18718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 09:11:59 2006
Return-Path: <java-user-return-18718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85254 invoked from network); 2 Feb 2006 09:11:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 09:11:58 -0000
Received: (qmail 69899 invoked by uid 500); 2 Feb 2006 09:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69874 invoked by uid 500); 2 Feb 2006 09:11:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69863 invoked by uid 99); 2 Feb 2006 09:11:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 01:11:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 66.249.92.197 as permitted sender)
Received: from [66.249.92.197] (HELO uproxy.gmail.com) (66.249.92.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 01:11:50 -0800
Received: by uproxy.gmail.com with SMTP id e2so97115ugf
        for <java-user@lucene.apache.org>; Thu, 02 Feb 2006 01:11:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=m92sjdm/19uAwxszWYPfyEJO0Q2e8/O22ndwOo6yfdVb2+vbkTtOp+HXQnRYBPqEx8V3jDTwEfJEN6B654fEFgSzz0mWtZjuMvA9V+sprCF3/jPx/C2jmkmFhpxFEaA7Ych//MMgHPEE3JRIi7R5T+xSC2OYAWM27ySurCEOmh0=
Received: by 10.67.26.15 with SMTP id d15mr191132ugj;
        Thu, 02 Feb 2006 01:11:29 -0800 (PST)
Received: by 10.66.216.20 with HTTP; Thu, 2 Feb 2006 01:11:29 -0800 (PST)
Message-ID: <50f433360602020111q284c33bai2eab51b3b1f64c86@mail.gmail.com>
Date: Thu, 2 Feb 2006 01:11:29 -0800
From: Jeff Rodenburg <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How do I send search query to Multiple search Indexes ?
In-Reply-To: <D17EC75396CC974E85E180CE6F7F045D035D789B@itpxchmb2.enterprise.veritas.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41558_9580352.1138871489415"
References: <D17EC75396CC974E85E180CE6F7F045D035D789B@itpxchmb2.enterprise.veritas.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_41558_9580352.1138871489415
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Vikas -

Start with the RemoteSearchable class.  Technology will be RMI.

Hope this helps.

On 2/2/06, Vikas Khengare <Vikas_Khengare@symantec.com> wrote:
>
> Hi Friends
>
>     How do I send one search query to multiple search Indexes which are
> on remote machines ?
>
>     Which Technology will help me (AJAX / simple Servlet) ?
>
> Thanks........... in advance
>
> I hope I will get result from experts like you........
>
> Best Regards
> [ vikas_khengare@symantec.com ]
>
>

------=_Part_41558_9580352.1138871489415--

From java-user-return-18719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 12:24:46 2006
Return-Path: <java-user-return-18719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77193 invoked from network); 2 Feb 2006 12:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 12:24:44 -0000
Received: (qmail 30108 invoked by uid 500); 2 Feb 2006 12:24:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30090 invoked by uid 500); 2 Feb 2006 12:24:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30074 invoked by uid 99); 2 Feb 2006 12:24:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 04:24:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.58.180.53] (HELO vps.elderlycare-help.co.uk) (207.58.180.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 04:24:35 -0800
Received: from cpc1-flee1-0-0-cust801.glfd.cable.ntl.com ([86.4.143.34] helo=leondell)
	by vps.elderlycare-help.co.uk with esmtpa (Exim 4.52)
	id 1F4dVR-0003qa-9a
	for java-user@lucene.apache.org; Thu, 02 Feb 2006 12:24:09 +0000
Message-ID: <008b01c627f3$910751b0$6500a8c0@leondell>
From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
To: <java-user@lucene.apache.org>
References: <e97a509fb54c459aa9f81191c764d158@danicorp.com> <005201c62719$5e199b80$6500a8c0@leondell> <Pine.LNX.4.58.0602010944330.3417@hal.rescomp.berkeley.edu>
Subject: Re: Memory problem
Date: Thu, 2 Feb 2006 12:24:01 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps.elderlycare-help.co.uk
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - macranet.co.uk
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

With reference to the below. We are plannig to have two indexes, one that 
indexes and optimizes, and a mirror index one that we query against.

Once a day update the mirror index. Does this seem like a viable approach 
too people. We have a lot of data that is constantly updating so querying 
the index while optimizing just didnt seem to work?

Thanks



Every time you open an IndexSearcher/IndexReader resources are used which
> take up memory.  for an application pointed at a static index, you only
> ever need one IndexReader/IndexSearcher that can be shared among multiple
> threads issuing queries.  if your index is being incrimentally updated,
> you should never need more then two searcher/reader pairs open at a time
> -- one in use, and one that you open/warm up when you detect changes.
> swap it in for the "in use" instance when ready, and close the old "in
> use" instance as soon as all clients that were using it are done.


----- Original Message ----- 
From: "Chris Hostetter" <hossman_lucene@fucit.org>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 01, 2006 6:03 PM
Subject: Re: Memory problem


>
> it seems like there are a few common things that bite people over and over
> again that you should check first and foremost...
>
>
> 1) don't use more searchers/readers then you need.
>
> Every time you open an IndexSearcher/IndexReader resources are used which
> take up memory.  for an application pointed at a static index, you only
> ever need one IndexReader/IndexSearcher that can be shared among multiple
> threads issuing queries.  if your index is being incrimentally updated,
> you should never need more then two searcher/reader pairs open at a time
> -- one in use, and one that you open/warm up when you detect changes.
> swap it in for the "in use" instance when ready, and close the old "in
> use" instance as soon as all clients that were using it are done.
>
> 2) close your resources when you are finished with them.
>
> The most common waste of memory i've seen is people who don't close
> instances of IndexSearcher or IndexReader when they are done with them.
> it's not enough to rely on them going out of scope and being garbage
> collected, you have to explictly close them to ensure that things like the
> CachingWrappingFilter and the FieldCache aren't caching large amounts of
> data for an IndexReader that can never be used again.
>
> A big part of this is making sure you know when your IndexSearcher is
> going to close your IndexReader for you -- read the javadocs carefully.
>
> 3) don't sort on more fields then you can afford.
>
> Every time you sort on a field, a FieldCache array is constructed for that
> field.  If you need to save some ram, and you currently let your clients
> sort on 30 different fields, try limiting their sort options -- those
> arrays can take up a lot of space.
>
> 4) RangeQuery, PrefixQuery and WildCardQuery cost RAM
>
> if you use RangeQuery, PrefixQuery and WildCardQuery be prepared for them
> to eat up a lot of ram doing query expansion -- especially if you increase
> BooleanQuery.maxClauseCount to prevent TooManyClauses exceptions.  the
> trade off you make by doing that is that now a prefix query like "f:a*"
> will expand into a boolean query containing every term in the field f that
> starts with an "a" ... if you've got a lot of terms, that can be a very
> big query, and it can take up a lot of RAM.
>
> Consider using ConstantScoreRangeQuery, etc.. instead.
>
> 5) don't use field norms if you don't need them.
>
> This is only an option if you are using 1.9, and it's only a big issue if
> you have many indexed fields.  FieledNorms take up one byte per doc per
> indexed field -- even if a doc doens't have a value for that field, it
> still gets a norm for that field.  There are options when indexing to
> prevent norms from being calculated, which can save a lot of space.
>
>
>
>
> : Date: Wed, 1 Feb 2006 10:21:55 -0000
> : From: Leon Chaddock <leonchaddock@macranet.co.uk>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Memory problem
> :
> : Hi All,
> :
> : We have a lucene index of over 10 000 000 docs at this time.
> : When we try and run a search we get
> : java.lang.OutOfMemoryError: Java heap space
> :
> : We have tried setting the xmx settings to 1gb but to no avail (the box 
> has
> : 4gb of memory available) . IS there any guidance on handling memory or 
> has
> : anyone had similar problems before that could help?
> :
> : Many thanks
> :
> : Leon
> :
> : ----- Original Message -----
> : From: "Pradeep Sharma" <pradeep@danicorp.com>
> : To: <java-user@lucene.apache.org>
> : Sent: Wednesday, February 01, 2006 2:03 AM
> : Subject: Greetings and my first question - Is it a good practise to 
> store
> : application configuration in Lucene
> :
> :
> :
> :
> : I have just joined this user group, but I probably will be asking 
> questions
> : / contributing for a while now as I am starting to work on a product 
> which
> : will use Lucene exclusively.
> :
> : Still in the designing phase, and I see that we need to manage several 
> user
> : / application specific configurations and I am exploring the idea of 
> storing
> : the configuration information also in the Index, may be create a 
> separate
> : index just for the configuration, because each module of the application
> : will have access to Lucene classes.
> :
> : I know technically this can be done, but are there any best practises 
> which
> : discourage this?
> :
> : Thanks in advance.
> : -Pradeep
> :
> :
> :
> : --------------------------------------------------------------------------------
> :
> :
> : No virus found in this incoming message.
> : Checked by AVG Free Edition.
> : Version: 7.1.375 / Virus Database: 267.14.25/246 - Release Date: 
> 30/01/2006
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> -- 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.375 / Virus Database: 267.14.25/246 - Release Date: 
> 30/01/2006
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 13:17:58 2006
Return-Path: <java-user-return-18720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9447 invoked from network); 2 Feb 2006 13:17:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 13:17:58 -0000
Received: (qmail 15435 invoked by uid 500); 2 Feb 2006 13:17:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15411 invoked by uid 500); 2 Feb 2006 13:17:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15400 invoked by uid 99); 2 Feb 2006 13:17:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 05:17:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 05:17:50 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14E87DF4@mailer.syr.edu>; Thu, 2 Feb 2006 8:17:29 -0500
Message-ID: <43E205EE.4070503@syr.edu>
Date: Thu, 02 Feb 2006 08:15:26 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How do I send search query to Multiple search Indexes ?
References: <D17EC75396CC974E85E180CE6F7F045D035D789B@itpxchmb2.enterprise.veritas.com>
In-Reply-To: <D17EC75396CC974E85E180CE6F7F045D035D789B@itpxchmb2.enterprise.veritas.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please only post these types of questions to the java-user mailing list.

Vikas Khengare wrote:
> Hi Friends
>  
>     How do I send one search query to multiple search Indexes which are
> on remote machines ?
>  
>     Which Technology will help me (AJAX / simple Servlet) ?
>  
> Thanks........... in advance
>  
> I hope I will get result from experts like you........
>  
> Best Regards
> [ vikas_khengare@symantec.com ]
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 17:32:48 2006
Return-Path: <java-user-return-18721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89786 invoked from network); 2 Feb 2006 17:32:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 17:32:47 -0000
Received: (qmail 44128 invoked by uid 500); 2 Feb 2006 17:32:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44026 invoked by uid 500); 2 Feb 2006 17:32:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43992 invoked by uid 99); 2 Feb 2006 17:32:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 09:32:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 09:32:27 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B56A45B78A; Thu,  2 Feb 2006 09:31:59 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B103C7F403;
	Thu,  2 Feb 2006 09:31:59 -0800 (PST)
Date: Thu, 2 Feb 2006 09:31:59 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Cc: Vikas Khengare <Vikas_Khengare@symantec.com>
Subject: Re: Sending query to multiple servers and combine all Hits from them
 ?
In-Reply-To: <D17EC75396CC974E85E180CE6F7F045D035D776B@itpxchmb2.enterprise.veritas.com>
Message-ID: <Pine.LNX.4.58.0602020925360.14272@hal.rescomp.berkeley.edu>
References: <D17EC75396CC974E85E180CE6F7F045D035D776B@itpxchmb2.enterprise.veritas.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Please do not cross posting to every java/lucene list you can find.  The
@jakarta lists are no longer used and forward their mail to the equivilent
@lucene lists.  The commits list exists only for people to recieve
notification about changes in the SVN repository, and people should never
send mail directly to it.

Unless you have a specific reason why you want to send mail to java-dev
regarding development of the internals of the lucene code base please send
your questions to java-user -- java-user is the correct place to send
questions about using the lucene code base.  Even if you think your
message may relate to a bug, or a possible change in the code base, do
not cross post to both lists.  Start by mailing java-user, and if people
think you have encountered a bug, or that your topic warrants discussion
about a change in API/Implimentation then the discussion can move to
java-dev.




: Date: Thu, 2 Feb 2006 10:59:42 +0530
: From: Vikas Khengare <Vikas_Khengare@symantec.com>
: Reply-To: java-user@lucene.apache.org
: To: lucene-user@jakarta.apache.org, lucene-dev@jakarta.apache.org,
:      java-dev@lucene.apache.org, java-user@lucene.apache.org,
:      java-commits@lucene.apache.org
: Subject: Sending query to multiple servers and combine all Hits from them


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 20:40:39 2006
Return-Path: <java-user-return-18722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98703 invoked from network); 2 Feb 2006 20:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 20:40:38 -0000
Received: (qmail 81242 invoked by uid 500); 2 Feb 2006 20:40:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81215 invoked by uid 500); 2 Feb 2006 20:40:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81204 invoked by uid 99); 2 Feb 2006 20:40:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 12:40:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 12:40:32 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: index merging
Date: Thu, 2 Feb 2006 15:40:09 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA0255F985@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sending query to multiple servers and combine all Hits from them ?
Thread-Index: AcYoHq8DOgrsspXhSjiTqLW/MLqLcgAGcd0Q
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

 I am trying to index in 2 different indexes with different =
mergefactors. so if one of the indexes is merging than I want to index =
only on the other index.
is there a way to know if an index is merging?.

thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 20:54:22 2006
Return-Path: <java-user-return-18723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5185 invoked from network); 2 Feb 2006 20:54:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 20:54:22 -0000
Received: (qmail 1351 invoked by uid 500); 2 Feb 2006 20:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1184 invoked by uid 500); 2 Feb 2006 20:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1172 invoked by uid 99); 2 Feb 2006 20:54:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 12:54:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 66.249.92.192 as permitted sender)
Received: from [66.249.92.192] (HELO uproxy.gmail.com) (66.249.92.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 12:54:14 -0800
Received: by uproxy.gmail.com with SMTP id e2so35386ugf
        for <java-user@lucene.apache.org>; Thu, 02 Feb 2006 12:53:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sB3F0dn7GMqiXrrQq2HvEzDRlXohVsKpVU8q4lVvyXKLtx24UILnzA+8UQ8Ek9dbh+zOvOuv7yj0Q6L4YKI3esblfOdjLdJn5QPkSckwZpeF46+g7ord+QBwNrJqgenN33Nney4LSMrU4m7nTQlmWO/6S1Qm/zyJwXvkAs5/CzE=
Received: by 10.48.157.2 with SMTP id f2mr267029nfe;
        Thu, 02 Feb 2006 12:53:23 -0800 (PST)
Received: by 10.49.93.1 with HTTP; Thu, 2 Feb 2006 12:53:23 -0800 (PST)
Message-ID: <c68e39170602021253h3a7a1c97pc96aa32acee70227@mail.gmail.com>
Date: Thu, 2 Feb 2006 15:53:23 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index merging
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA0255F985@hermes.corp.cyveillance.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <63434C14F9A6F74CB36B85033E4C30CA0255F985@hermes.corp.cyveillance.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No, there isn't anything in the API to tell you that.
A merge may be triggered on any IndexWriter.add() call.

If you want to avoid merges, you can set the merge factor really high
so that merges will never happen, and set maxBufferedDocs to the size
of the segments you want.

-Yonik

On 2/2/06, Omar Didi <odidi@cyveillance.com> wrote:
> Hi all,
>
>  I am trying to index in 2 different indexes with different mergefactors.=
 so if one of the indexes is merging than I want to index only on the other=
 index.
> is there a way to know if an index is merging?.
>
> thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 21:10:56 2006
Return-Path: <java-user-return-18724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13151 invoked from network); 2 Feb 2006 21:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 21:10:56 -0000
Received: (qmail 27657 invoked by uid 500); 2 Feb 2006 21:10:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27633 invoked by uid 500); 2 Feb 2006 21:10:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27622 invoked by uid 99); 2 Feb 2006 21:10:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 13:10:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 13:10:49 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: index merging
Date: Thu, 2 Feb 2006 16:10:27 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA0255F986@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: index merging
Thread-Index: AcYoOtgHkwCS61hbSduxbbOkSHhKpwAAZ+LQ
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Yonik,
I can't set the merge factor too high because I will end up with the too =
many files open problem.

I have got this method from indexReader.java

  public static boolean isLocked(Directory directory) throws IOException =
{
    return
            directory.makeLock(IndexWriter.WRITE_LOCK_NAME).isLocked() =
||
            directory.makeLock(IndexWriter.COMMIT_LOCK_NAME).isLocked();
  }

if I change this method to only check for =
directory.makeLock(IndexWriter.COMMIT_LOCK_NAME).isLocked(); will this =
tell me that a index is merging?

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]
Sent: Thursday, February 02, 2006 3:53 PM
To: java-user@lucene.apache.org
Subject: Re: index merging


No, there isn't anything in the API to tell you that.
A merge may be triggered on any IndexWriter.add() call.

If you want to avoid merges, you can set the merge factor really high
so that merges will never happen, and set maxBufferedDocs to the size
of the segments you want.

-Yonik

On 2/2/06, Omar Didi <odidi@cyveillance.com> wrote:
> Hi all,
>
>  I am trying to index in 2 different indexes with different =
mergefactors. so if one of the indexes is merging than I want to index =
only on the other index.
> is there a way to know if an index is merging?.
>
> thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 21:25:42 2006
Return-Path: <java-user-return-18725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20234 invoked from network); 2 Feb 2006 21:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 21:25:42 -0000
Received: (qmail 54851 invoked by uid 500); 2 Feb 2006 21:25:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54831 invoked by uid 500); 2 Feb 2006 21:25:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54820 invoked by uid 99); 2 Feb 2006 21:25:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 13:25:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 66.249.92.196 as permitted sender)
Received: from [66.249.92.196] (HELO uproxy.gmail.com) (66.249.92.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 13:25:35 -0800
Received: by uproxy.gmail.com with SMTP id j40so28669ugd
        for <java-user@lucene.apache.org>; Thu, 02 Feb 2006 13:25:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=JdQ+uqDM7tO1jsyryvRJb91JbTioFMCFaJWyrzgYz3H/0Fwg+QXqtFhLjeaG7WjzwpVqdt+8JOPRCI7vjtuKrYSXbNwoU2nc/AIzn8VZtmNpZVtrEakjGigMiE7vikT1WkAzh8opnmG//9NFhaTB699pK4Z5LC0a115Qui7urdk=
Received: by 10.49.36.13 with SMTP id o13mr270732nfj;
        Thu, 02 Feb 2006 13:25:14 -0800 (PST)
Received: by 10.49.93.1 with HTTP; Thu, 2 Feb 2006 13:25:14 -0800 (PST)
Message-ID: <c68e39170602021325o4115232aj67f622cad7350746@mail.gmail.com>
Date: Thu, 2 Feb 2006 16:25:14 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index merging
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA0255F986@hermes.corp.cyveillance.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <63434C14F9A6F74CB36B85033E4C30CA0255F986@hermes.corp.cyveillance.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 2/2/06, Omar Didi <odidi@cyveillance.com> wrote:
> Thanks Yonik,
> I can't set the merge factor too high because I will end up with the too =
many files open problem.

Right.  I meant only for adding a lot of documents.  After a lot of
adds, then you could set the mergefactor back down to a reasonable
level and optimize the index.

> if I change this method to only check for directory.makeLock(IndexWriter.=
COMMIT_LOCK_NAME).isLocked(); will this tell me that a index is merging?

Yes, the commit lock will be locked when merging is going on, but you
will get some false positives because the lock is used for other
purposes.  That may still fit your need though.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 02 23:47:57 2006
Return-Path: <java-user-return-18726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75885 invoked from network); 2 Feb 2006 23:47:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Feb 2006 23:47:57 -0000
Received: (qmail 47356 invoked by uid 500); 2 Feb 2006 23:47:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47321 invoked by uid 500); 2 Feb 2006 23:47:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47310 invoked by uid 99); 2 Feb 2006 23:47:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 15:47:51 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [61.6.32.56] (HELO smtp6.jaring.my) (61.6.32.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 15:47:50 -0800
Received: from webmail3.jaring.my (l4-bkj-p1.jaring.my [61.6.32.100])
	by smtp6.jaring.my (8.13.4/8.13.1) with ESMTP id k12NlR9n081191
	for <java-user@lucene.apache.org>; Fri, 3 Feb 2006 07:47:27 +0800 (MYT)
	(envelope-from azlan95@myjaring.net)
Received: (from www@localhost)
	by webmail3.jaring.my (8.12.9p2/8.12.9/Submit) id k12NlQMS047720
	for java-user@lucene.apache.org; Fri, 3 Feb 2006 07:47:26 +0800 (MYT)
	(envelope-from azlan95@myjaring.net)
Received: from cgl-r5-b5.time.net.my (cgl-r5-b5.time.net.my [211.24.8.5]) 
	by webmail.jaring.my (IMP) with HTTP 
	for <my38184@mbox.jaring.my>; Fri,  3 Feb 2006 07:47:26 +0800
Message-ID: <1138924046.43e29a0e32399@webmail.jaring.my>
Date: Fri,  3 Feb 2006 07:47:26 +0800
From: Azlan Abdul Latiff <azlan95@myjaring.net>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.java
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: JARING Webmail v1.2 (http://www.jaring.my)
X-Originating-IP: 211.24.8.5
X-Virus-Scanned: JARING E-Mail Virus Scanner v2.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Thanks Chris.  Thats exactly the file I was looking for.  I have the
.class files in my download but all the .java files are missing.

----- Original Message -----
From: "Chris Hostetter" <hossman_lucene@fucit.org>
To: <java-user@lucene.apache.org>
Sent: Thursday, February 02, 2006 12:37 PM
Subject: Re: IndexWriter.java


>
> : Does anyone have the file IndexWriter.java?
>
> your question is very perplexing.  are you looking for the class that
> comes with lucene? ...
>
>
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/lucene/index/IndexWriter.java?rev=372350&view=markup
>
> ...or are you looking for some other more high level API that just
happens
> to have the same name?
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
----------------------------------------------------------------
This e-mail has been sent via JARING webmail at http://www.jaring.my

----- End forwarded message -----



----------------------------------------------------------------
This e-mail has been sent via JARING webmail at http://www.jaring.my

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 03 06:14:59 2006
Return-Path: <java-user-return-18727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90698 invoked from network); 3 Feb 2006 06:14:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Feb 2006 06:14:58 -0000
Received: (qmail 89002 invoked by uid 500); 3 Feb 2006 06:14:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87969 invoked by uid 500); 3 Feb 2006 06:14:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87937 invoked by uid 99); 3 Feb 2006 06:14:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 22:14:46 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 143.127.12.110 is neither permitted nor denied by domain of Vikas_Khengare@symantec.com)
Received: from [143.127.12.110] (HELO gold.veritas.com) (143.127.12.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Feb 2006 22:14:46 -0800
Received: from sxchcon1-int.veritas.com (HELO SVLXCHCON1.enterprise.veritas.com) ([10.137.18.171])
  by gold.veritas.com with ESMTP; 02 Feb 2006 22:14:25 -0800
Received: from itpxchmb2.enterprise.veritas.com ([10.216.17.1]) by SVLXCHCON1.enterprise.veritas.com with Microsoft SMTPSVC(6.0.3790.211);
	 Thu, 2 Feb 2006 22:14:24 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: How do I send search query to Multiple search Indexes ?
Date: Fri, 3 Feb 2006 11:44:22 +0530
Message-ID: <D17EC75396CC974E85E180CE6F7F045D035D7C1A@itpxchmb2.enterprise.veritas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How do I send search query to Multiple search Indexes ?
Thread-Index: AcYn+xj7Itei/9/iRAK/Q3dM0O+zRQAjnJLA
From: "Vikas Khengare" <Vikas_Khengare@symantec.com>
To: <java-user@lucene.apache.org>,
	<java-dev@lucene.apache.org>,
	<java-commits@lucene.apache.org>
X-OriginalArrivalTime: 03 Feb 2006 06:14:25.0174 (UTC) FILETIME=[14D48360:01C62889]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20
> Hi Friends
> =20
>     How do I send one search query to multiple search Indexes which=20
> are on remote machines ?
> =20
>     Which Technology will help me (AJAX / simple Servlet) ?
> =20
> Thanks........... in advance
> =20
> I hope I will get result from experts like you........
> =20
> Best Regards
> [ vikas_khengare@symantec.com ]
>
>  =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 03 18:32:19 2006
Return-Path: <java-user-return-18728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64814 invoked from network); 3 Feb 2006 18:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Feb 2006 18:32:19 -0000
Received: (qmail 78422 invoked by uid 500); 3 Feb 2006 18:32:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78399 invoked by uid 500); 3 Feb 2006 18:32:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78388 invoked by uid 99); 3 Feb 2006 18:32:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 10:32:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vsood2@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 10:32:10 -0800
Received: by zproxy.gmail.com with SMTP id i1so800330nzh
        for <java-user@lucene.apache.org>; Fri, 03 Feb 2006 10:31:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=AlVSJC4lBTWi4rztI4O56TkMvt92qv+ds5ECGwS80iKafbfZho/bHC31+oudGRr8rgjwidAXUq+y7iZcmc1q2E5MpQGrMoFswrZorw/1NZJiU2c6b3MlQVFNPBNbSeqef3AenyNVlpBIFu2YvxZKaF4DmJQfRFz1n1/Agxf7TeQ=
Received: by 10.64.203.6 with SMTP id a6mr1102640qbg;
        Fri, 03 Feb 2006 10:31:49 -0800 (PST)
Received: by 10.64.249.20 with HTTP; Fri, 3 Feb 2006 10:31:49 -0800 (PST)
Message-ID: <800d6e9c0602031031t62d0b739kcf6dd7621e342654@mail.gmail.com>
Date: Fri, 3 Feb 2006 13:31:49 -0500
From: varun sood <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Frequency Matrix
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8077_31330924.1138991509914"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8077_31330924.1138991509914
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,
 I am impelementing Lucene to index my website. I would like to know if its
possible to generate a simple frequency matrix?

By frequency matrix I mean, docmuent name on top X-Axis and keywords on lef=
t
Y-Axis. and the cells of the matrix will contain the frequency of the
keyword in a particluar document.

I know its very much possible, but its just time which is limited to dig
more in Lucene.

Thanks in advance.
Varun

------=_Part_8077_31330924.1138991509914--

From java-user-return-18729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 03 18:38:37 2006
Return-Path: <java-user-return-18729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67847 invoked from network); 3 Feb 2006 18:38:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Feb 2006 18:38:36 -0000
Received: (qmail 87212 invoked by uid 500); 3 Feb 2006 18:38:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87194 invoked by uid 500); 3 Feb 2006 18:38:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87183 invoked by uid 99); 3 Feb 2006 18:38:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 10:38:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 10:38:29 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4AD345B81F; Fri,  3 Feb 2006 10:38:02 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 40FC47F403
	for <java-user@lucene.apache.org>; Fri,  3 Feb 2006 10:38:02 -0800 (PST)
Date: Fri, 3 Feb 2006 10:38:02 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Frequency Matrix
In-Reply-To: <800d6e9c0602031031t62d0b739kcf6dd7621e342654@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602031034570.29657@hal.rescomp.berkeley.edu>
References: <800d6e9c0602031031t62d0b739kcf6dd7621e342654@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


take a look at the TermEnum and TermDoc classes. they should give you all
the info you need, using psuedo code something like this...

      foreach Term in TermEnum
         foreach doc in TermDoc
            record Term, TermDoc.doc, TermDoc.freq


: Date: Fri, 3 Feb 2006 13:31:49 -0500
: From: varun sood <vsood2@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Frequency Matrix
:
: Hi,
:  I am impelementing Lucene to index my website. I would like to know if its
: possible to generate a simple frequency matrix?
:
: By frequency matrix I mean, docmuent name on top X-Axis and keywords on left
: Y-Axis. and the cells of the matrix will contain the frequency of the
: keyword in a particluar document.
:
: I know its very much possible, but its just time which is limited to dig
: more in Lucene.
:
: Thanks in advance.
: Varun
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 03 18:56:27 2006
Return-Path: <java-user-return-18730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74771 invoked from network); 3 Feb 2006 18:56:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Feb 2006 18:56:27 -0000
Received: (qmail 11126 invoked by uid 500); 3 Feb 2006 18:56:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11100 invoked by uid 500); 3 Feb 2006 18:56:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11089 invoked by uid 99); 3 Feb 2006 18:56:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 10:56:22 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [168.159.213.200] (HELO mexforward.lss.emc.com) (168.159.213.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 10:56:21 -0800
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13])
	by mexforward.lss.emc.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id k13Itx4r007419
	for <java-user@lucene.apache.org>; Fri, 3 Feb 2006 13:55:59 -0500 (EST)
Received: from MAHO3MSX2.corp.emc.com (maho3msx2.corp.emc.com [128.221.11.32])
	by mailhub.lss.emc.com (Switch-3.1.6/Switch-3.1.7) with ESMTP id k13Itud8013705
	for <java-user@lucene.apache.org>; Fri, 3 Feb 2006 13:55:57 -0500 (EST)
Received: by maho3msx2.corp.emc.com with Internet Mail Service (5.5.2653.19)
	id <D4X2KWSW>; Fri, 3 Feb 2006 13:55:56 -0500
Message-ID: <BED850C725E74F47A0F69CC0EE9AB64D0175AF05@CORPUSMX40B.corp.emc.com>
From: Lee_Gary@emc.com
To: java-user@lucene.apache.org
Subject: number of objects indexed
Date: Fri, 3 Feb 2006 13:55:46 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C628F3.7171B34C"
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.1.0.0, Antispam-Data: 2006.02.03.100607
X-PerlMx-Spam: Gauge=, SPAM=7%, Reasons='EMC_FROM_0+ -0, HTML_70_90 0.1, NO_REAL_NAME 0, __CT 0, __CTYPE_HAS_BOUNDARY 0, __CTYPE_MULTIPART 0, __CTYPE_MULTIPART_ALT 0, __HAS_MSGID 0, __HAS_X_MAILER 0, __IMS_MSGID 0, __IMS_MUA 0, __MIME_HTML 0, __MIME_VERSION 0, __SANE_MSGID 0, __TAG_EXISTS_HTML 0'
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C628F3.7171B34C
Content-Type: text/plain

Hi all,
 
Im just wondering if anyone has done any scalability tests with Lucene. Has
anyone been able to index up to the 10 million mark in terms of number of
objects indexed in a single index? An estimate of how many objects you have
indexed is appreciated.
 
Thanks!!
Gary

------_=_NextPart_001_01C628F3.7171B34C--

From java-user-return-18731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 04 02:19:20 2006
Return-Path: <java-user-return-18731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88875 invoked from network); 4 Feb 2006 02:19:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Feb 2006 02:19:20 -0000
Received: (qmail 76454 invoked by uid 500); 4 Feb 2006 02:19:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76427 invoked by uid 500); 4 Feb 2006 02:19:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76415 invoked by uid 99); 4 Feb 2006 02:19:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 18:19:14 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [61.6.32.59] (HELO smtp9.jaring.my) (61.6.32.59)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 18:19:13 -0800
Received: from webmail2.jaring.my (l4-bkj-p2.jaring.my [61.6.32.8])
	by smtp9.jaring.my (8.13.4/8.13.1) with ESMTP id k142IggI004816
	for <java-user@lucene.apache.org>; Sat, 4 Feb 2006 10:18:47 +0800 (MYT)
	(envelope-from azlan95@myjaring.net)
Received: (from www@localhost)
	by webmail2.jaring.my (8.12.9p2/8.12.9/Submit) id k142Iat7032058
	for java-user@lucene.apache.org; Sat, 4 Feb 2006 10:18:36 +0800 (MYT)
	(envelope-from azlan95@myjaring.net)
Received: from cgl-r5-a17.time.net.my (cgl-r5-a17.time.net.my [211.24.7.17]) 
	by webmail.jaring.my (IMP) with HTTP 
	for <my38184@mbox.jaring.my>; Sat,  4 Feb 2006 10:18:36 +0800
Message-ID: <1139019516.43e40efc81f9d@webmail.jaring.my>
Date: Sat,  4 Feb 2006 10:18:36 +0800
From: Azlan Abdul Latiff <azlan95@myjaring.net>
To: java-user@lucene.apache.org
Subject: disk space
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: JARING Webmail v1.2 (http://www.jaring.my)
X-Originating-IP: 211.24.7.17
X-Virus-Scanned: JARING E-Mail Virus Scanner v2.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

i've emptied my index directory but still not much space being freed.  Is
there another directory whereby the documents might be stored?


----------------------------------------------------------------
This e-mail has been sent via JARING webmail at http://www.jaring.my

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 04 06:10:15 2006
Return-Path: <java-user-return-18732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47704 invoked from network); 4 Feb 2006 06:10:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Feb 2006 06:10:15 -0000
Received: (qmail 83381 invoked by uid 500); 4 Feb 2006 06:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83345 invoked by uid 500); 4 Feb 2006 06:10:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83333 invoked by uid 99); 4 Feb 2006 06:10:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 22:10:06 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 145.97.39.141 is neither permitted nor denied by domain of lithiana@livejournal.com)
Received: from [145.97.39.141] (HELO zedler.knams.wikimedia.org) (145.97.39.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Feb 2006 22:10:05 -0800
Received: from hyacinth.local (cpc3-oxfd1-6-1-cust228.oxfd.cable.ntl.com [82.21.193.228])
	by zedler.knams.wikimedia.org (Postfix) with ESMTP id E3DE9633E
	for <java-user@lucene.apache.org>; Sat,  4 Feb 2006 06:09:41 +0000 (GMT)
Received: from hyacinth.local (localhost [127.0.0.1])
	by hyacinth.local (Postfix) with ESMTP id 6ADCA17CD6
	for <java-user@lucene.apache.org>; Sat,  4 Feb 2006 06:09:40 +0000 (GMT)
Received: (from larne@localhost)
	by hyacinth.local (8.13.5+Sun/8.13.5/Submit) id k1469dh7196228
	for java-user@lucene.apache.org; Sat, 4 Feb 2006 06:09:39 GMT
X-Authentication-Warning: hyacinth.local: larne set sender to lithiana@livejournal.com using -f
From: kate <lithiana@livejournal.com>
Organization: Wikimedia Foundation Inc.
To: java-user@lucene.apache.org
Subject: Terms not being found in query
Date: Sat, 4 Feb 2006 06:09:33 +0000
User-Agent: KMail/1.9
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart1948544.4HzQG5KzpD";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200602040609.39130.lithiana@livejournal.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--nextPart1948544.4HzQG5KzpD
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

hi,

i have an index with documents containing n-grams, in fields such as=20
"3gram", "4gram", etc.  one 5-gram found in the text is "oswax".  using=20
Luke, i can see that a field with this value exists for a particular=20
document.  however, searching for "5gram:oswax" produces no results (either=
=20
using a query constructed by the query parser, or manually).  the n-gram=20
fields are indexed and stored, but not tokenised.

i have tried setting maxFieldLength to Integer.MAX_VALUE with no change.

why do i receive no results?

k.

--nextPart1948544.4HzQG5KzpD
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (SunOS)

iD8DBQBD5EUijtcbuM+X08MRAprEAJ9g03x+VUQv3K9u9ehrkmDMqpnXigCeI7sf
/IUPjYaq7GUSDac9sL5T7X4=
=GZhx
-----END PGP SIGNATURE-----

--nextPart1948544.4HzQG5KzpD--

From java-user-return-18733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 04 11:40:03 2006
Return-Path: <java-user-return-18733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24059 invoked from network); 4 Feb 2006 11:40:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Feb 2006 11:40:03 -0000
Received: (qmail 9276 invoked by uid 500); 4 Feb 2006 11:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8245 invoked by uid 500); 4 Feb 2006 11:39:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8229 invoked by uid 99); 4 Feb 2006 11:39:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 03:39:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 03:39:56 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7895D33D2CD; Sat,  4 Feb 2006 06:39:35 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 6078533D2CC
	for <java-user@lucene.apache.org>; Sat,  4 Feb 2006 06:39:34 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <200602040609.39130.lithiana@livejournal.com>
References: <200602040609.39130.lithiana@livejournal.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EBC99521-B8B6-4C04-B62D-9EEC15EB6F6C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Terms not being found in query
Date: Sat, 4 Feb 2006 06:39:38 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 4, 2006, at 1:09 AM, kate wrote:
> i have an index with documents containing n-grams, in fields such as
> "3gram", "4gram", etc.  one 5-gram found in the text is "oswax".   
> using
> Luke, i can see that a field with this value exists for a particular
> document.  however, searching for "5gram:oswax" produces no results  
> (either
> using a query constructed by the query parser, or manually).  the n- 
> gram
> fields are indexed and stored, but not tokenised.
>
> i have tried setting maxFieldLength to Integer.MAX_VALUE with no  
> change.
>
> why do i receive no results?

It looks like you've got all the troubleshooting bases covered, so  
I'm not sure what to suggest other than for you to post a simple test  
case that demonstrates the issue.  If you see the term in Luke, and  
it is indexed, then it most definitely can be used to find the  
document using a TermQuery (I hope that is what you meant as  
"manually").  If you're using QueryParser "manually", then perhaps  
your analyzer is causing an issue?   What is the .toString of your  
Query?

Setting maxFieldLength isn't the issue, otherwise you wouldn't have  
seen the term in Luke.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 04 16:22:05 2006
Return-Path: <java-user-return-18734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 179 invoked from network); 4 Feb 2006 16:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Feb 2006 16:22:04 -0000
Received: (qmail 44558 invoked by uid 500); 4 Feb 2006 16:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43911 invoked by uid 500); 4 Feb 2006 16:21:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43900 invoked by uid 99); 4 Feb 2006 16:21:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 08:21:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.207 as permitted sender)
Received: from [66.249.82.207] (HELO xproxy.gmail.com) (66.249.82.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 08:21:57 -0800
Received: by xproxy.gmail.com with SMTP id i28so583241wxd
        for <java-user@lucene.apache.org>; Sat, 04 Feb 2006 08:21:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Zq5yXgQSpMSsewK8/EEmdPwBKvxA3PsgGnnI5BvQ3fO1xfX3ZAHAqh58T7j/jOaYsIlVkwJXFpR8TYq0x2XAwr50RLAl5NcEld8ULG3Hbw8Vuw+y5bYdblIXndSZ3luHrLZtouPIEubSYpcBLBxkSTJHbPwRx7kaQMVu9bov0FY=
Received: by 10.70.87.9 with SMTP id k9mr3550635wxb;
        Sat, 04 Feb 2006 08:21:37 -0800 (PST)
Received: by 10.70.11.13 with HTTP; Sat, 4 Feb 2006 08:21:36 -0800 (PST)
Message-ID: <277d4c5d0602040821h186370a4r66814611653a8c59@mail.gmail.com>
Date: Sun, 5 Feb 2006 00:21:36 +0800
From: xing jiang <gingerons@gmail.com>
To: java-user@lucene.apache.org
Subject: Two problems of lucene.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17658_28854640.1139070096872"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17658_28854640.1139070096872
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I got two problems of lucene.

1. How does the lucene calculate each term's weight in the query? Is it a
simple boolean value?

2. Can i change the similarity measure in the lucene? For instance, i only
use the term frequence instead of the tf/idf value to give weight to each
term in the document.



--
Regards

Jiang Xing

------=_Part_17658_28854640.1139070096872--

From java-user-return-18735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 04 17:56:13 2006
Return-Path: <java-user-return-18735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25777 invoked from network); 4 Feb 2006 17:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Feb 2006 17:56:12 -0000
Received: (qmail 6321 invoked by uid 500); 4 Feb 2006 17:56:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6289 invoked by uid 500); 4 Feb 2006 17:56:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6278 invoked by uid 99); 4 Feb 2006 17:56:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 09:56:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vsood2@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO zproxy.gmail.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 09:56:06 -0800
Received: by zproxy.gmail.com with SMTP id i1so981673nzh
        for <java-user@lucene.apache.org>; Sat, 04 Feb 2006 09:55:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bAgzTECUXaapicNKPEeqz4tVySWcJ/Svk0C4JKWeC3un+FfZU1p4QBuMjI7sfm9ZIwozuyUAWuiMPK7TIP9OpG45NtOvLDgqQsiUxUSy0dmmf+cLKIn7KfcDcW9gDDQv4DUuZ7HryrztrQ6uAss12Yvx8cI0zlUEIpuLh6smtpg=
Received: by 10.65.192.11 with SMTP id u11mr37536qbp;
        Sat, 04 Feb 2006 09:55:45 -0800 (PST)
Received: by 10.64.249.20 with HTTP; Sat, 4 Feb 2006 09:55:45 -0800 (PST)
Message-ID: <800d6e9c0602040955w759f3ef8h969b1f7ca52a9c40@mail.gmail.com>
Date: Sat, 4 Feb 2006 12:55:45 -0500
From: varun sood <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Frequency Matrix
In-Reply-To: <Pine.LNX.4.58.0602031034570.29657@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17759_12625557.1139075745558"
References: <800d6e9c0602031031t62d0b739kcf6dd7621e342654@mail.gmail.com>
	 <Pine.LNX.4.58.0602031034570.29657@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17759_12625557.1139075745558
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Chris,
      Thanks a zillion for providing me this quick solution. It worked! It
would not have been possible withiut yur help in such a short time. Is it
your dedicated effort to learn Lucene or some technique?

Thanks,
Varun


On 2/3/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> take a look at the TermEnum and TermDoc classes. they should give you all
> the info you need, using psuedo code something like this...
>
>      foreach Term in TermEnum
>         foreach doc in TermDoc
>            record Term, TermDoc.doc, TermDoc.freq
>
>
> : Date: Fri, 3 Feb 2006 13:31:49 -0500
> : From: varun sood <vsood2@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Frequency Matrix
> :
> : Hi,
> :  I am impelementing Lucene to index my website. I would like to know if
> its
> : possible to generate a simple frequency matrix?
> :
> : By frequency matrix I mean, docmuent name on top X-Axis and keywords on
> left
> : Y-Axis. and the cells of the matrix will contain the frequency of the
> : keyword in a particluar document.
> :
> : I know its very much possible, but its just time which is limited to di=
g
> : more in Lucene.
> :
> : Thanks in advance.
> : Varun
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17759_12625557.1139075745558--

From java-user-return-18736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 05 03:27:44 2006
Return-Path: <java-user-return-18736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90848 invoked from network); 5 Feb 2006 03:27:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Feb 2006 03:27:44 -0000
Received: (qmail 80521 invoked by uid 500); 5 Feb 2006 03:27:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80503 invoked by uid 500); 5 Feb 2006 03:27:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80492 invoked by uid 99); 5 Feb 2006 03:27:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 19:27:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.199 as permitted sender)
Received: from [66.249.82.199] (HELO xproxy.gmail.com) (66.249.82.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 19:27:36 -0800
Received: by xproxy.gmail.com with SMTP id i28so636383wxd
        for <java-user@lucene.apache.org>; Sat, 04 Feb 2006 19:27:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=dgRu61TKMHoRGSyuYzlKMKyvARp0cSSB9VbKZcmaMDbovUajgAIrlNSXPJeRDK2N/EMi6w+fJ1fXXcY7qCt9o7QTorKxMSqFmnSwcJbLSWUFI1TZUqGRZWUUfiYc2VfaPf8Omqce4I0J4LXGQZUw2MNaLg9J+M65pw+RXD0PEzo=
Received: by 10.70.33.3 with SMTP id g3mr4047616wxg;
        Sat, 04 Feb 2006 19:27:15 -0800 (PST)
Received: by 10.70.11.13 with HTTP; Sat, 4 Feb 2006 19:27:15 -0800 (PST)
Message-ID: <277d4c5d0602041927w4a8eca06v3a74ff85dca8f731@mail.gmail.com>
Date: Sun, 5 Feb 2006 11:27:15 +0800
From: xing jiang <gingerons@gmail.com>
To: java-user@lucene.apache.org
Subject: two problems of using the lucene.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20284_6300012.1139110035770"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20284_6300012.1139110035770
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I got two problems of using the lucene and may need your help.

1. For each word, how the lucene calculate its weight. I only know for each
work in the document will be weighed by its tf/idf values.

2. Can I modify the lucene so that i use the term frequency instead of
tf/idf value to calculate the similarity between documents and queries.

--
Regards

Jiang Xing

------=_Part_20284_6300012.1139110035770--

From java-user-return-18737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 05 04:53:47 2006
Return-Path: <java-user-return-18737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71291 invoked from network); 5 Feb 2006 04:53:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Feb 2006 04:53:47 -0000
Received: (qmail 22165 invoked by uid 500); 5 Feb 2006 04:55:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22131 invoked by uid 500); 5 Feb 2006 04:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22120 invoked by uid 99); 5 Feb 2006 04:55:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 20:55:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.155.252.18] (HELO leviathan.cnchost.com) (207.155.252.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Feb 2006 20:55:23 -0800
Received: from eagle (c-24-12-191-129.hsd1.il.comcast.net [24.12.191.129])
	by leviathan.cnchost.com
	id XAA22702; Sat, 4 Feb 2006 23:55:03 -0500 (EST)
	[ConcentricHost SMTP Relay 1.17]
Message-ID: <200602050455.XAA22702@leviathan.cnchost.com>
Errors-To: <xinwu@pathf.com>
From: "Xin Herbert Wu" <xinwu@pathf.com>
To: <java-user@lucene.apache.org>
Subject: Field search problem(only single word query works)
Date: Sat, 4 Feb 2006 22:54:57 -0600
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0019_01C629DE.05640F80"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYqEE9vVS6J32P3SNm+pPdaGz0jaw==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0019_01C629DE.05640F80
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

I have two libraries A and B indexed from database tables where A has about
10 fields and B has about 30 fields(with about a couple of hundred records).
A and B both have a TEXT type field "headline" reading data from the same
database table column. 

 

However the field query - "headline: fire water" works for library A, NOT
for library B(returns 0 results without any error) when the headline field
value is "fire and water". But query "headline:fire headline:water" does
work for library B. 

 

Any possible reason why library B only accepts single word fielded query?

 

I am running Lucene 1.4.3 on Java 5/JBoss4.0.3 in XP/Linux environment. 

 

Thanks.

 

-Xin


------=_NextPart_000_0019_01C629DE.05640F80--



From java-user-return-18738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 05 09:26:01 2006
Return-Path: <java-user-return-18738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49466 invoked from network); 5 Feb 2006 09:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Feb 2006 09:26:01 -0000
Received: (qmail 39184 invoked by uid 500); 5 Feb 2006 09:25:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39161 invoked by uid 500); 5 Feb 2006 09:25:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39150 invoked by uid 99); 5 Feb 2006 09:25:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 01:25:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 01:25:54 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0F28F33D8A3; Sun,  5 Feb 2006 04:25:34 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id D6AB833D33B
	for <java-user@lucene.apache.org>; Sun,  5 Feb 2006 04:25:32 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <200602050455.XAA22702@leviathan.cnchost.com>
References: <200602050455.XAA22702@leviathan.cnchost.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4BE6F40A-3487-4B7F-BA13-1704F7548643@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Field search problem(only single word query works)
Date: Sun, 5 Feb 2006 04:25:31 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I recommend you take a look at your indexes with Luke and see what  
actually is indexed.

	Erik


On Feb 4, 2006, at 11:54 PM, Xin Herbert Wu wrote:

> Hi,
>
> I have two libraries A and B indexed from database tables where A  
> has about
> 10 fields and B has about 30 fields(with about a couple of hundred  
> records).
> A and B both have a TEXT type field "headline" reading data from  
> the same
> database table column.
>
>
>
> However the field query - "headline: fire water" works for library  
> A, NOT
> for library B(returns 0 results without any error) when the  
> headline field
> value is "fire and water". But query "headline:fire headline:water"  
> does
> work for library B.
>
>
>
> Any possible reason why library B only accepts single word fielded  
> query?
>
>
>
> I am running Lucene 1.4.3 on Java 5/JBoss4.0.3 in XP/Linux  
> environment.
>
>
>
> Thanks.
>
>
>
> -Xin
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 05 12:36:45 2006
Return-Path: <java-user-return-18739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6839 invoked from network); 5 Feb 2006 12:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Feb 2006 12:36:45 -0000
Received: (qmail 38218 invoked by uid 500); 5 Feb 2006 12:36:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37878 invoked by uid 500); 5 Feb 2006 12:36:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37842 invoked by uid 99); 5 Feb 2006 12:36:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 04:36:36 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 203.117.3.21 is neither permitted nor denied by domain of echothis@gmail.com)
Received: from [203.117.3.21] (HELO metis.starhub.net.sg) (203.117.3.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 04:36:35 -0800
Received: from eastgate.starhub.net.sg ([203.116.1.189])
  by metis.starhub.net.sg with ESMTP; 05 Feb 2006 20:36:12 +0800
X-SBRS: 4.2
X-HAT: Message received through Sender Group RELAYLIST,Policy $RELAYED applied.
Received: from [192.168.1.20] (cm158.gamma249.maxonline.com.sg [202.156.249.158])
	by eastgate.starhub.net.sg (8.12.5/8.12.5) with ESMTP id k15CaBKs004509
	for <java-user@lucene.apache.org>; Sun, 5 Feb 2006 20:36:12 +0800 (SST)
Message-ID: <43E5F134.309@gmail.com>
Date: Sun, 05 Feb 2006 20:36:04 +0800
From: Eugene Ezekiel <echothis@gmail.com>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Reducing Inflated Similarity Scores
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I'm currently using the Default Similarity with the Boolean Query add 
function to append clauses. The problem I face is this, given a query 
<t1> <t2> <t3> .... <tn>, where <ti> = a term
it returns me a document which that has just ONE term in it say <t1> and 
nothing else. Surprisingly, the hits score for this is 1.0.

Ok, I'm quite new to lucene so I don't really know how the Default 
Similarity works but from what I gather it is a variation of the 
cos-similarity. And the cos-measure penalizes extraneous terms 
therefore, how can the score be 1.0?

Can anyone tell what I can tweak to bring it more to the cos-measure?

Thanks.

Regards,
Eugene

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 05 12:59:12 2006
Return-Path: <java-user-return-18740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15771 invoked from network); 5 Feb 2006 12:59:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Feb 2006 12:59:09 -0000
Received: (qmail 48694 invoked by uid 500); 5 Feb 2006 12:59:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48668 invoked by uid 500); 5 Feb 2006 12:59:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48657 invoked by uid 99); 5 Feb 2006 12:59:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 04:59:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.137.212.28] (HELO basicbox6.server-home.net) (195.137.212.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 04:59:03 -0800
Received: from sleipnir2 (dslb-084-061-010-120.pools.arcor-ip.net [84.61.10.120])
	by basicbox6.server-home.net (Postfix) with ESMTP id F39A471836F
	for <java-user@lucene.apache.org>; Sun,  5 Feb 2006 13:58:38 +0100 (CET)
From: "Klaus" <klaus@vommond.de>
To: <java-user@lucene.apache.org>
Subject: AW: two problems of using the lucene.
Date: Sun, 5 Feb 2006 13:58:31 +0100
Message-ID: <004b01c62a53$de1ad370$6402a8c0@sleipnir2>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
Thread-Index: AcYqBB4byaRS+yYuTrmn2xVzbLZtUAAT5Pfw
In-Reply-To: <277d4c5d0602041927w4a8eca06v3a74ff85dca8f731@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,=20

you have to write your own similarity object and pass it to your =
analyzer.

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarit=
y.h
tml

Cheers,

Klaus
-----Urspr=FCngliche Nachricht-----
Von: xing jiang [mailto:gingerons@gmail.com]=20
Gesendet: Sonntag, 5. Februar 2006 04:27
An: java-user@lucene.apache.org
Betreff: two problems of using the lucene.

Hi,

I got two problems of using the lucene and may need your help.

1. For each word, how the lucene calculate its weight. I only know for =
each
work in the document will be weighed by its tf/idf values.

2. Can I modify the lucene so that i use the term frequency instead of
tf/idf value to calculate the similarity between documents and queries.

--
Regards

Jiang Xing


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 05 19:50:35 2006
Return-Path: <java-user-return-18741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32924 invoked from network); 5 Feb 2006 19:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Feb 2006 19:50:35 -0000
Received: (qmail 20141 invoked by uid 500); 5 Feb 2006 19:50:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20116 invoked by uid 500); 5 Feb 2006 19:50:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20105 invoked by uid 99); 5 Feb 2006 19:50:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 11:50:28 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,MIME_BOUND_NEXTPART,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pradeep@danicorp.com designates 63.134.207.27 as permitted sender)
Received: from [63.134.207.27] (HELO GW6.webcontrolcenter.com) (63.134.207.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 11:50:27 -0800
Received: from mail25.webcontrolcenter.com [216.119.106.22] by GW6.webcontrolcenter.com with SMTP;
   Sun, 5 Feb 2006 12:49:42 -0700
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary=----_SmarterMail_NextPart_6200225426553735
Date: Sun, 5 Feb 2006 12:49:08 -0700
Subject: two applications accessing same index
From: Pradeep Sharma <pradeep@danicorp.com>
Reply-To: pradeep@danicorp.com
To: <java-user@lucene.apache.org>
CC: 
Message-ID: <fb4b0954104f4632a373bd6ea8374939@danicorp.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_SmarterMail_NextPart_6200225426553735
Content-Type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

I have two applications, one which will be generating all the indexes and t=
he second one which will be reading those indexes. I cannot keep them in th=
e same application, because one will run all the times in batches via some =
sort of scheduler to generate the indexes and the application which will re=
ad the indexes is a web service, so it will run within the web server's con=
text.=0D=0A=0D=0ACan I do this or is it not advisable to have two separate =
applications access the same index?=0D=0AIs there some other best practise =
to accomplish this?=0D=0A=0D=0AThanks=0D=0APradeep=0D=0A=0D=0A 

------_SmarterMail_NextPart_6200225426553735--




From java-user-return-18742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 03:56:54 2006
Return-Path: <java-user-return-18742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21437 invoked from network); 6 Feb 2006 03:56:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 03:56:54 -0000
Received: (qmail 33229 invoked by uid 500); 6 Feb 2006 03:56:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32241 invoked by uid 500); 6 Feb 2006 03:56:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32230 invoked by uid 99); 6 Feb 2006 03:56:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 19:56:48 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.136.173.32] (HELO smtp012.mail.yahoo.com) (216.136.173.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 05 Feb 2006 19:56:47 -0800
Received: (qmail 60716 invoked from network); 6 Feb 2006 03:56:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:From:To:Subject:Date:Message-ID:MIME-Version:Content-Type:X-Mailer:X-MimeOLE:thread-index;
  b=g/oj9yZK3aqmVUP5rH4KFSStI8gq9N7Afg75Cg1/KqsYd0HQuL2bTUefsACfIDSg6nrkwmDM/eobkH25sJ5DjSK9yB/cIOyqyjrv32iQ9x0X1iofC95kfhpSE3U79cWPXwgYmOt6wvVm/XrxFGBZGrdv6UcQIwH6R+uqZ3G3LLU=  ;
Received: from unknown (HELO jacob) (jeff?thorne@24.16.96.152 with login)
  by smtp012.mail.yahoo.com with SMTP; 6 Feb 2006 03:56:27 -0000
From: "Jeff Thorne" <jeff_thorne@yahoo.com>
To: <java-user@lucene.apache.org>
Subject: Inappropriate content detection
Date: Sun, 5 Feb 2006 19:56:21 -0800
Message-ID: <004301c62ad1$4b188f30$320fa8c0@jacob>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0044_01C62A8E.3CF54F30"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
thread-index: AcYq0UpobOzk8drgSCu1PLosRPk2ew==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0044_01C62A8E.3CF54F30
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I am trying to figure out whether or not Lucene is an appropriate solution
for a problem that our site faces. Our site

allows users to post their opinions on various topics. Due to various
government legislations around the world our management would like us to
scan each users post against various keywords that would indicate
inappropriate content

in the users posting. We are looking for racial slurs, profanity and attacks
against sexual orientation. Each users posting is

generally not more that a few paragraphs.

 

I would like to analyze each users post for various words and expressions
before publishing their post to the DB. I am reading through the Lucene in
action book and it looks as if I cannot analyze a string without first
indexing it. If this is true will indexing each post be a performance hit to
the site? I was wondering if someone could shed some light on the best way
to tackle this problem with Lucene or another api if doing so makes more
sense?

 

Thanks,

Jeff

 


------=_NextPart_000_0044_01C62A8E.3CF54F30--



From java-user-return-18743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 04:50:50 2006
Return-Path: <java-user-return-18743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36749 invoked from network); 6 Feb 2006 04:50:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 04:50:49 -0000
Received: (qmail 62883 invoked by uid 500); 6 Feb 2006 04:50:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62840 invoked by uid 500); 6 Feb 2006 04:50:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62829 invoked by uid 99); 6 Feb 2006 04:50:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 20:50:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 20:50:43 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 8A613B7BF7
	for <java-user@lucene.apache.org>; Mon,  6 Feb 2006 15:50:20 +1100 (EST)
Message-ID: <43E6D81A.7040106@nuix.com.au>
Date: Mon, 06 Feb 2006 16:01:14 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Inappropriate content detection
References: <004301c62ad1$4b188f30$320fa8c0@jacob>
In-Reply-To: <004301c62ad1$4b188f30$320fa8c0@jacob>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jeff Thorne wrote:
> I am trying to figure out whether or not Lucene is an appropriate solution
> for a problem that our site faces.
<cut>
> I would like to analyze each users post for various words and expressions
> before publishing their post to the DB. I am reading through the Lucene in
> action book and it looks as if I cannot analyze a string without first
> indexing it. If this is true will indexing each post be a performance hit to
> the site? I was wondering if someone could shed some light on the best way
> to tackle this problem with Lucene or another api if doing so makes more
> sense?

You can definitely use Lucene's analyser classes without indexing.  Our 
own application does this when it needs to do things like highlighting 
text on the screen.

The idea would be you'd have a bunch of terms which are considered 
nasty, and then every new document would get analysed, and you would 
look through the terms returned from the analyser for the suspicious ones.

But no, it certainly isn't something that Lucene as a whole is very good 
at solving.  Lucene is fast for executing a single query against 
multiple documents, but what you really need is something fast for 
executing multiple queries against a single document.

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 04:51:40 2006
Return-Path: <java-user-return-18744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37315 invoked from network); 6 Feb 2006 04:51:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 04:51:40 -0000
Received: (qmail 65512 invoked by uid 500); 6 Feb 2006 04:51:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65479 invoked by uid 500); 6 Feb 2006 04:51:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65467 invoked by uid 99); 6 Feb 2006 04:51:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 20:51:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 66.249.92.195 as permitted sender)
Received: from [66.249.92.195] (HELO uproxy.gmail.com) (66.249.92.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 20:51:33 -0800
Received: by uproxy.gmail.com with SMTP id u40so692864ugc
        for <java-user@lucene.apache.org>; Sun, 05 Feb 2006 20:51:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=F2PbRwpHCMamvZ2Dm54g0SnLf9OZGRuoRTbVyyaoKE6gYN9Y/Hm69mkSa8swi6rE5Zh23qLKF0YRHRlCJbbclrz9YZT+VaIG8LLFxBmZfj/QZ3+wMfQp3RTflrD8Vd3vGefZT2XpVP/7l+RY2I2kZDUX0M0+fgvlYOi074HL60U=
Received: by 10.66.221.11 with SMTP id t11mr1980401ugg;
        Sun, 05 Feb 2006 20:51:12 -0800 (PST)
Received: by 10.66.216.20 with HTTP; Sun, 5 Feb 2006 20:51:12 -0800 (PST)
Message-ID: <50f433360602052051q76132b20g20df5fe29db3970@mail.gmail.com>
Date: Sun, 5 Feb 2006 20:51:12 -0800
From: Jeff Rodenburg <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inappropriate content detection
In-Reply-To: <004301c62ad1$4b188f30$320fa8c0@jacob>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17111_24841587.1139201472017"
References: <004301c62ad1$4b188f30$320fa8c0@jacob>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17111_24841587.1139201472017
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You can generate a token stream for a block of text without having to index
it. Take a look at the highlighter code, it does this very thing.



On 2/5/06, Jeff Thorne <jeff_thorne@yahoo.com> wrote:
>
> I am trying to figure out whether or not Lucene is an appropriate solutio=
n
> for a problem that our site faces. Our site
>
> allows users to post their opinions on various topics. Due to various
> government legislations around the world our management would like us to
> scan each users post against various keywords that would indicate
> inappropriate content
>
> in the users posting. We are looking for racial slurs, profanity and
> attacks
> against sexual orientation. Each users posting is
>
> generally not more that a few paragraphs.
>
>
>
> I would like to analyze each users post for various words and expressions
> before publishing their post to the DB. I am reading through the Lucene i=
n
> action book and it looks as if I cannot analyze a string without first
> indexing it. If this is true will indexing each post be a performance hit
> to
> the site? I was wondering if someone could shed some light on the best wa=
y
> to tackle this problem with Lucene or another api if doing so makes more
> sense?
>
>
>
> Thanks,
>
> Jeff
>
>
>
>
>

------=_Part_17111_24841587.1139201472017--

From java-user-return-18745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 05:54:33 2006
Return-Path: <java-user-return-18745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60786 invoked from network); 6 Feb 2006 05:54:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 05:54:33 -0000
Received: (qmail 13911 invoked by uid 500); 6 Feb 2006 05:54:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12901 invoked by uid 500); 6 Feb 2006 05:54:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12890 invoked by uid 99); 6 Feb 2006 05:54:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 21:54:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pranay.jain@columbia.edu designates 128.59.29.5 as permitted sender)
Received: from [128.59.29.5] (HELO jalapeno.cc.columbia.edu) (128.59.29.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 21:54:27 -0800
Received: from Ferrari (dyn-carl-202-55.dyn.columbia.edu [160.39.202.55])
	(user=pj2130 mech=LOGIN bits=0)
	by jalapeno.cc.columbia.edu (8.13.0/8.13.0) with ESMTP id k165s6qJ015568
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NOT)
	for <java-user@lucene.apache.org>; Mon, 6 Feb 2006 00:54:06 -0500 (EST)
Reply-To: <pranay.jain@columbia.edu>
From: "Pranay Jain" <pranay.jain@columbia.edu>
To: <java-user@lucene.apache.org>
Subject: Question.
Date: Mon, 6 Feb 2006 00:53:10 -0500
Message-ID: <005001c62ae1$9c9f94b0$37ca27a0@Ferrari>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0051_01C62AB7.B3C98CB0"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
Thread-Index: AcYq4ZwYqVxaPm+WSIOQUaP+2zTuUg==
X-No-Spam-Score: Local
X-Scanned-By: MIMEDefang 2.48 on 128.59.29.5
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0051_01C62AB7.B3C98CB0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I have earlier used lucene and I must say it has performed bug free for the
limited use I deployed it for. I now want to deploy lucene to do something
more. Once indexed, I want to know, which is the word which occurs maximum
times among all the rest in a document set. Does lucene already provide such
a feature?
 
I would appreciate an answer to my question.
 
Thanks in advance.
Pranay

------=_NextPart_000_0051_01C62AB7.B3C98CB0--


From java-user-return-18746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 06:18:56 2006
Return-Path: <java-user-return-18746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66740 invoked from network); 6 Feb 2006 06:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 06:18:56 -0000
Received: (qmail 27465 invoked by uid 500); 6 Feb 2006 06:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27420 invoked by uid 500); 6 Feb 2006 06:18:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27409 invoked by uid 99); 6 Feb 2006 06:18:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 22:18:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.103.221.48] (HELO mta08-winn.ispmail.ntl.com) (81.103.221.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 22:18:49 -0800
Received: from aamta12-winn.ispmail.ntl.com ([81.103.221.35])
          by mta08-winn.ispmail.ntl.com with ESMTP
          id <20060206061827.USNR8724.mta08-winn.ispmail.ntl.com@aamta12-winn.ispmail.ntl.com>
          for <java-user@lucene.apache.org>; Mon, 6 Feb 2006 06:18:27 +0000
Received: from jhi ([81.98.13.34]) by aamta12-winn.ispmail.ntl.com
          with SMTP
          id <20060206061827.CIWW12811.aamta12-winn.ispmail.ntl.com@jhi>
          for <java-user@lucene.apache.org>; Mon, 6 Feb 2006 06:18:27 +0000
Message-ID: <000c01c62ae5$263f7c50$b900a8c0@jhi>
From: "gekkokid" <me@gekkokid.org.uk>
To: <java-user@lucene.apache.org>
References: <004301c62ad1$4b188f30$320fa8c0@jacob>
Subject: Re: Inappropriate content detection
Date: Mon, 6 Feb 2006 04:39:59 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, what scale is this website? millions of posts or under?

wouldn't it be easiler to use a bayesian algorithm to scan each new post 
before it is posted to detect whether it is acceptable or not? just a quick 
idea of my head



_gk

----- Original Message ----- 
From: "Jeff Thorne" <jeff_thorne@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Monday, February 06, 2006 3:56 AM
Subject: Inappropriate content detection


>I am trying to figure out whether or not Lucene is an appropriate solution
> for a problem that our site faces. Our site
>
> allows users to post their opinions on various topics. Due to various
> government legislations around the world our management would like us to
> scan each users post against various keywords that would indicate
> inappropriate content
>
> in the users posting. We are looking for racial slurs, profanity and 
> attacks
> against sexual orientation. Each users posting is
>
> generally not more that a few paragraphs.
>
>
>
> I would like to analyze each users post for various words and expressions
> before publishing their post to the DB. I am reading through the Lucene in
> action book and it looks as if I cannot analyze a string without first
> indexing it. If this is true will indexing each post be a performance hit 
> to
> the site? I was wondering if someone could shed some light on the best way
> to tackle this problem with Lucene or another api if doing so makes more
> sense?
>
>
>
> Thanks,
>
> Jeff
>
>
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 06:31:36 2006
Return-Path: <java-user-return-18747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69548 invoked from network); 6 Feb 2006 06:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 06:31:36 -0000
Received: (qmail 40366 invoked by uid 500); 6 Feb 2006 06:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40005 invoked by uid 500); 6 Feb 2006 06:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39994 invoked by uid 99); 6 Feb 2006 06:31:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 22:31:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.199 as permitted sender)
Received: from [66.249.82.199] (HELO xproxy.gmail.com) (66.249.82.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 22:31:29 -0800
Received: by xproxy.gmail.com with SMTP id i28so761794wxd
        for <java-user@lucene.apache.org>; Sun, 05 Feb 2006 22:31:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i0+T0wkf59y/66+pD6b0zjw/8kmpJyMfkgvs6V8I81lVWWZvYZWiVUymb+oM1vLfsg82oD43GvqgkxWEcfuLiy/SaD1b/YIL9ujnCpdxwby3f1BZi5Zq5Zx6kpj1nWC+4bRWAUA8oVSxSViqf4RCBpaJq/A/vdgJLnZI1mXnJRw=
Received: by 10.70.133.2 with SMTP id g2mr5483700wxd;
        Sun, 05 Feb 2006 22:31:09 -0800 (PST)
Received: by 10.70.11.13 with HTTP; Sun, 5 Feb 2006 22:31:09 -0800 (PST)
Message-ID: <277d4c5d0602052231i236c0e14i159cd1beea59d679@mail.gmail.com>
Date: Mon, 6 Feb 2006 14:31:09 +0800
From: jason <gingerons@gmail.com>
To: java-user@lucene.apache.org, pranay.jain@columbia.edu
Subject: Re: Question.
In-Reply-To: <005001c62ae1$9c9f94b0$37ca27a0@Ferrari>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5138_25878229.1139207469006"
References: <005001c62ae1$9c9f94b0$37ca27a0@Ferrari>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5138_25878229.1139207469006
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You can get the term frequency matrix first. Then, select the most frequent
terms.

One letter has said how to build the term frequency matrix.

regards
jiang xing


On 2/6/06, Pranay Jain <pranay.jain@columbia.edu> wrote:
>
> I have earlier used lucene and I must say it has performed bug free for
> the
> limited use I deployed it for. I now want to deploy lucene to do somethin=
g
> more. Once indexed, I want to know, which is the word which occurs maximu=
m
> times among all the rest in a document set. Does lucene already provide
> such
> a feature?
>
> I would appreciate an answer to my question.
>
> Thanks in advance.
> Pranay
>
>

------=_Part_5138_25878229.1139207469006--

From java-user-return-18748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 06:37:42 2006
Return-Path: <java-user-return-18748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74473 invoked from network); 6 Feb 2006 06:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 06:37:41 -0000
Received: (qmail 45156 invoked by uid 500); 6 Feb 2006 06:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45124 invoked by uid 500); 6 Feb 2006 06:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45113 invoked by uid 99); 6 Feb 2006 06:37:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 22:37:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.207 as permitted sender)
Received: from [66.249.82.207] (HELO xproxy.gmail.com) (66.249.82.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 22:37:36 -0800
Received: by xproxy.gmail.com with SMTP id s18so724369wxc
        for <java-user@lucene.apache.org>; Sun, 05 Feb 2006 22:37:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VqTyDl/Jj8tlxe0dTbzf92wJ3kqojiVSPuce/VgFKA26hE9Oy/Z9lX6fFPwFKjh2vUZdz5R2EjIFBywwXg7mX3zTQ9I/v3OwWmXiqO4W+bVqzdj1infUbC+f5fYEAHxVdoQvoEVzCwqcyslOjbpsPRdDqaruXORgVInEf4tNN1w=
Received: by 10.70.19.6 with SMTP id 6mr5524582wxs;
        Sun, 05 Feb 2006 22:37:15 -0800 (PST)
Received: by 10.70.11.13 with HTTP; Sun, 5 Feb 2006 22:37:15 -0800 (PST)
Message-ID: <277d4c5d0602052237q1f982d9h1312d8730b5d1ba0@mail.gmail.com>
Date: Mon, 6 Feb 2006 14:37:15 +0800
From: jason <gingerons@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: two problems of using the lucene.
In-Reply-To: <004b01c62a53$de1ad370$6402a8c0@sleipnir2>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5174_25368579.1139207835434"
References: <277d4c5d0602041927w4a8eca06v3a74ff85dca8f731@mail.gmail.com>
	 <004b01c62a53$de1ad370$6402a8c0@sleipnir2>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5174_25368579.1139207835434
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I try to read the source code of the lucene. But i only find in the
TermScorer.java where the tf/idf measure is really implemented. I guess tha=
t
whether the Queryparser class will convert each word into a termquery first=
.
Then, queries such as the the Booleanquery are built.

The source code of the Queryparser.java is hard to read.
....

regards
jiang xing

On 2/5/06, Klaus <klaus@vommond.de> wrote:
>
> Hi,
>
> you have to write your own similarity object and pass it to your analyzer=
.
>
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarit=
y.h
> tml
>
> Cheers,
>
> Klaus
> -----Urspr=FCngliche Nachricht-----
> Von: xing jiang [mailto:gingerons@gmail.com]
> Gesendet: Sonntag, 5. Februar 2006 04:27
> An: java-user@lucene.apache.org
> Betreff: two problems of using the lucene.
>
> Hi,
>
> I got two problems of using the lucene and may need your help.
>
> 1. For each word, how the lucene calculate its weight. I only know for
> each
> work in the document will be weighed by its tf/idf values.
>
> 2. Can I modify the lucene so that i use the term frequency instead of
> tf/idf value to calculate the similarity between documents and queries.
>
> --
> Regards
>
> Jiang Xing
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5174_25368579.1139207835434--

From java-user-return-18749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 07:16:45 2006
Return-Path: <java-user-return-18749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86016 invoked from network); 6 Feb 2006 07:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 07:16:44 -0000
Received: (qmail 75983 invoked by uid 500); 6 Feb 2006 07:16:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75924 invoked by uid 500); 6 Feb 2006 07:16:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75912 invoked by uid 99); 6 Feb 2006 07:16:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 23:16:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.194.158.131] (HELO exchange-mbx.bvdep.com) (193.194.158.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 23:16:36 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: index merging
Date: Mon, 6 Feb 2006 08:16:14 +0100
Message-ID: <3287125F0F0CCE4E8F55435208100CF5AB19A4@exchange-mbx.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: index merging
Thread-Index: AcYoPzkUtuYyH7ywReqMEdoZpnFniACq/4Ng
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry to contradict you Yonik, but I'm pretty sure the commit lock is
*not* locked during a merge, only while the "segments" file is being
updated. =20

The merge process takes a set of 'old' segment files, writes new segment
files and 'registers' them in the "segments" file when they are ready to
be used.  During an optimize, this proces is repeated until there is
only one segment left.

Every process reading or writing the "segments" file grabs the commit
lock, reads the file, opens any other files it needs and releases the
lock.

While an IndexWriter or IndexReader is updating the index, the write
lock will be set though...
If this write lock is kept longer than expected you could assume a merge
is in progress.

A better way might be to check for segments files that are not
'registered' in the "segments" file yet.

Luc

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]=20
Sent: donderdag 2 februari 2006 22:25
To: java-user@lucene.apache.org
Subject: Re: index merging

On 2/2/06, Omar Didi <odidi@cyveillance.com> wrote:
> Thanks Yonik,
> I can't set the merge factor too high because I will end up with the
too many files open problem.

Right.  I meant only for adding a lot of documents.  After a lot of
adds, then you could set the mergefactor back down to a reasonable
level and optimize the index.

> if I change this method to only check for
directory.makeLock(IndexWriter.COMMIT_LOCK_NAME).isLocked(); will this
tell me that a index is merging?

Yes, the commit lock will be locked when merging is going on, but you
will get some false positives because the lock is used for other
purposes.  That may still fit your need though.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 07:37:57 2006
Return-Path: <java-user-return-18750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91457 invoked from network); 6 Feb 2006 07:37:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 07:37:57 -0000
Received: (qmail 97286 invoked by uid 500); 6 Feb 2006 07:37:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97257 invoked by uid 500); 6 Feb 2006 07:37:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97240 invoked by uid 99); 6 Feb 2006 07:37:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 23:37:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.194.158.131] (HELO exchange-mbx.bvdep.com) (193.194.158.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Feb 2006 23:37:51 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: two applications accessing same index
Date: Mon, 6 Feb 2006 08:37:27 +0100
Message-ID: <3287125F0F0CCE4E8F55435208100CF5AB19B9@exchange-mbx.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: two applications accessing same index
Thread-Index: AcYqjW7fKWXQyh9jROixnS+CqaZfFwAYbQFA
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: <java-user@lucene.apache.org>,
	<pradeep@danicorp.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sure, the only danger is you have to make sure that both processes store
their lock files in the same directory (default they are in your home
directory I believe) unless you use a different locking mechanism.

There are supposed to be problems when accessing indices over network
shares, but I use that setup and haven't run into problems yet (not
counting connection problems...)

I have one machine continually updating the index, and two machines
running the searches and it works fine... (Even when completely
rebuilding the index, the searchers can see the contents 'grow' as
segments are written to disk)

Luc


-----Original Message-----
From: Pradeep Sharma [mailto:pradeep@danicorp.com]=20
Sent: zondag 5 februari 2006 20:49
To: java-user@lucene.apache.org
Subject: two applications accessing same index

I have two applications, one which will be generating all the indexes
and the second one which will be reading those indexes. I cannot keep
them in the same application, because one will run all the times in
batches via some sort of scheduler to generate the indexes and the
application which will read the indexes is a web service, so it will run
within the web server's context.

Can I do this or is it not advisable to have two separate applications
access the same index?
Is there some other best practise to accomplish this?

Thanks
Pradeep

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 08:36:27 2006
Return-Path: <java-user-return-18751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18806 invoked from network); 6 Feb 2006 08:36:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 08:36:27 -0000
Received: (qmail 39437 invoked by uid 500); 6 Feb 2006 08:36:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39401 invoked by uid 500); 6 Feb 2006 08:36:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39383 invoked by uid 99); 6 Feb 2006 08:36:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 00:36:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.27.2.202] (HELO mailrelay1.tu-graz.ac.at) (129.27.2.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 00:36:17 -0800
Received: from firewall.know-center.tugraz.at (firewall.know-center.tugraz.at [129.27.219.242])
	by mailrelay1.tu-graz.ac.at (8.13.5/8.13.5) with ESMTP id k168Ztol025837
	for <java-user@lucene.apache.org>; Mon, 6 Feb 2006 09:35:55 +0100 (CET)
Received: from exchange.know-center.at (know.know-center.at [192.168.111.5])
	by firewall.know-center.tugraz.at (8.13.3/8.13.3) with ESMTP id k168Zsvd018800
	for <java-user@lucene.apache.org>; Mon, 6 Feb 2006 09:35:54 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Request for feedback: CBIR for Lucene
Date: Mon, 6 Feb 2006 09:35:54 +0100
Message-ID: <868EA75043E67D47B4A62E7571C90E6FA44FEB@exchange.know.know-center.at>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Request for feedback: CBIR for Lucene
Thread-Index: AcYq+FfiJRbO1NJsTs+oY0h5fBa4XA==
From: "Mathias Lux" <mlux@know-center.at>
To: <java-user@lucene.apache.org>
X-Scanned-By: MIMEDefang 2.52 on 129.27.10.18
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all!

I've put up some classes for storing content based MPEG-7 image
descriptors in a lucene index and querying the stored descriptors to get
"similar" images. In other words: I've put up a simple library for
content based image retrieval powered by lucene.

The performance tests are quite promising as the retrieval is based on a
linear search, but I'm afraid it is not suitable for enterprise
searching. In my opinion searches in ~ 100.000 images should be ok.

I'd appreciate feedback (as I just put it in 2 evenings :-) on:

 * How useful is the API?
 * Does it work well for use cases you imagine?
 * Is it fast enough?
 * Are the returned results useful?

Known issues: One of the three MPEG-7 descriptors (namely EdgeHistogram)
is painfully slow. I also identified the main bottlenecks, but I didn't
get around yet fixing it.

URL: http://www.semanticmetadata.net/lire,
http://freshmeat.net/projects/lirecbir/

hoping for feedback
- mathias



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 09:19:42 2006
Return-Path: <java-user-return-18752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45042 invoked from network); 6 Feb 2006 09:19:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 09:19:42 -0000
Received: (qmail 97396 invoked by uid 500); 6 Feb 2006 09:19:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97366 invoked by uid 500); 6 Feb 2006 09:19:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97355 invoked by uid 99); 6 Feb 2006 09:19:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 01:19:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.203 as permitted sender)
Received: from [66.249.82.203] (HELO xproxy.gmail.com) (66.249.82.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 01:19:36 -0800
Received: by xproxy.gmail.com with SMTP id i28so778155wxd
        for <java-user@lucene.apache.org>; Mon, 06 Feb 2006 01:19:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QyH/DytsJIfIblwKENTXJMVfbtTiPBGY4w8f/15fYc8qLye0AG5LI/AG3jvfb9MumVEXZk21sq4xcM/zDs5XRkr9FIy4Y5Yn1ZupISUDKb7/xEUdWQ8tpA2by9jLgzZHgDKtwLKwYCJNxv9k4QQI/i+cZrg4ivTDLW4iMndnwio=
Received: by 10.70.11.14 with SMTP id 14mr199384wxk;
        Mon, 06 Feb 2006 01:19:15 -0800 (PST)
Received: by 10.70.11.13 with HTTP; Mon, 6 Feb 2006 01:19:15 -0800 (PST)
Message-ID: <277d4c5d0602060119k1b55067chc5d0a3692e7899f3@mail.gmail.com>
Date: Mon, 6 Feb 2006 17:19:15 +0800
From: jason <gingerons@gmail.com>
To: java-user@lucene.apache.org
Subject: understand the queryNorm and the fieldNorm.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5828_21510234.1139217555209"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5828_21510234.1139217555209
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I have a problem of understanding the queryNorm and fieldNorm.

The following is an example. I try to follow what said in the Javadoc
"Computes the normalization value for a query given the sum of the squared
weights of each of the query terms". But the result is different.

ID:0 C:/PDF2Text/SearchEngine/File/SIG/sigkdd/p374-zhang.pdf|initial rank: =
0
0.31900567 =3D sum of:
  0.03968133 =3D weight(contents:associ in 920), product of:
    0.60161763 =3D queryWeight(contents:associ), product of:
      1.326625 =3D idf(docFreq=3D830)
      0.45349488 =3D queryNorm
    0.065957725 =3D fieldWeight(contents:associ in 920), product of:
      4.2426405 =3D tf(termFreq(contents:associ)=3D18)
      1.326625 =3D idf(docFreq=3D830)
      0.01171875 =3D fieldNorm(field=3Dcontents, doc=3D920)
  0.27932435 =3D weight(contents:rule in 920), product of:
    0.7987842 =3D queryWeight(contents:rule), product of:
      1.7613963 =3D idf(docFreq=3D537)
      0.45349488 =3D queryNorm
    0.34968686 =3D fieldWeight(contents:rule in 920), product of:
      16.941074 =3D tf(termFreq(contents:rule)=3D287)
      1.7613963 =3D idf(docFreq=3D537)
      0.01171875 =3D fieldNorm(field=3Dcontents, doc=3D920)

regards
jiang xing

------=_Part_5828_21510234.1139217555209--

From java-user-return-18753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 09:36:29 2006
Return-Path: <java-user-return-18753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51543 invoked from network); 6 Feb 2006 09:36:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 09:36:28 -0000
Received: (qmail 16213 invoked by uid 500); 6 Feb 2006 09:36:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15206 invoked by uid 500); 6 Feb 2006 09:36:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15195 invoked by uid 99); 6 Feb 2006 09:36:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 01:36:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 01:36:22 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A707233D8B5; Mon,  6 Feb 2006 04:36:01 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 78FA933D2E9
	for <java-user@lucene.apache.org>; Mon,  6 Feb 2006 04:35:59 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <277d4c5d0602052237q1f982d9h1312d8730b5d1ba0@mail.gmail.com>
References: <277d4c5d0602041927w4a8eca06v3a74ff85dca8f731@mail.gmail.com> <004b01c62a53$de1ad370$6402a8c0@sleipnir2> <277d4c5d0602052237q1f982d9h1312d8730b5d1ba0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BFADED4F-0BF1-47BE-BDCC-A8DB92D0497B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: two problems of using the lucene.
Date: Mon, 6 Feb 2006 04:35:53 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 6, 2006, at 1:37 AM, jason wrote:
> The source code of the Queryparser.java is hard to read.

Look at QueryParser.jj instead.  QueryParser.java is generated using  
JavaCC and is thus not "source" code at all.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 10:08:22 2006
Return-Path: <java-user-return-18754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63696 invoked from network); 6 Feb 2006 10:08:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 10:08:21 -0000
Received: (qmail 44604 invoked by uid 500); 6 Feb 2006 10:08:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44573 invoked by uid 500); 6 Feb 2006 10:08:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44553 invoked by uid 99); 6 Feb 2006 10:08:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 02:08:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.204 as permitted sender)
Received: from [66.249.82.204] (HELO xproxy.gmail.com) (66.249.82.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 02:08:14 -0800
Received: by xproxy.gmail.com with SMTP id i28so783896wxd
        for <java-user@lucene.apache.org>; Mon, 06 Feb 2006 02:07:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=KZQf3caqvT2fxoTrG/A+wVk2XoggX/qEqmV2EOE3rLLvz53qUoPuNgyJdIwKyeVviDQbxNBc1iuwa71IxgcWYasIvEqZWwuz4VrZ4BoCt7y+TO8Fxf4f8xwmswxmAumzvbsukWr+WQwLGob9dkh8DVX+6koY25TXCi14xTXv36M=
Received: by 10.70.86.8 with SMTP id j8mr5690447wxb;
        Mon, 06 Feb 2006 02:07:53 -0800 (PST)
Received: by 10.70.11.13 with HTTP; Mon, 6 Feb 2006 02:07:53 -0800 (PST)
Message-ID: <277d4c5d0602060207v355545f6xb5a1293adcf30ec7@mail.gmail.com>
Date: Mon, 6 Feb 2006 18:07:53 +0800
From: jason <gingerons@gmail.com>
To: java-user@lucene.apache.org
Subject: To understand the queryNorm and fieldNorm
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6109_11084666.1139220473243"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6109_11084666.1139220473243
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I have a problem of understanding the queryNorm and fieldNorm.

The following is an example. I try to follow what said in the Javadoc
"Computes the normalization value for a query given the sum of the squared
weights of each of the query terms". But the result is different.

ID:0 C:/PDF2Text/SearchEngine/File/SIG/sigkdd/p374-zhang.pdf|initial rank: =
0
0.31900567 =3D sum of:
  0.03968133 =3D weight(contents:associ in 920), product of:
    0.60161763 =3D queryWeight(contents:associ), product of:
      1.326625 =3D idf(docFreq=3D830)
      0.45349488 =3D queryNorm
    0.065957725 =3D fieldWeight(contents:associ in 920), product of:
      4.2426405 =3D tf(termFreq(contents:associ)=3D18)
      1.326625 =3D idf(docFreq=3D830)
      0.01171875 =3D fieldNorm(field=3Dcontents, doc=3D920)
  0.27932435 =3D weight(contents:rule in 920), product of:
    0.7987842 =3D queryWeight(contents:rule), product of:
      1.7613963 =3D idf(docFreq=3D537)
      0.45349488 =3D queryNorm
    0.34968686 =3D fieldWeight(contents:rule in 920), product of:
      16.941074 =3D tf(termFreq(contents:rule)=3D287)
      1.7613963 =3D idf(docFreq=3D537)
      0.01171875 =3D fieldNorm(field=3Dcontents, doc=3D920)

regards
jiang xing

------=_Part_6109_11084666.1139220473243--

From java-user-return-18755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 13:31:03 2006
Return-Path: <java-user-return-18755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75007 invoked from network); 6 Feb 2006 13:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 13:31:02 -0000
Received: (qmail 85737 invoked by uid 500); 6 Feb 2006 13:30:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85396 invoked by uid 500); 6 Feb 2006 13:30:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85308 invoked by uid 99); 6 Feb 2006 13:30:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 05:30:55 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.169.226] (HELO smtp106.mail.sc5.yahoo.com) (66.163.169.226)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Feb 2006 05:30:54 -0800
Received: (qmail 16207 invoked from network); 6 Feb 2006 13:30:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:From:To:Subject:Date:Message-ID:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-MimeOLE:thread-index:In-Reply-To;
  b=P+cJ+0qgKkT56owlFp7cv49iJAiygd0m0f00P2tHtFb/pjDdg0Z1rzn/GCjPf9hJMVTCDeOKt8jWA4JRA+p7+TDHduGe28vaeKGcVvEOx2inMSWaX4q/HvFWUSbnuB80WZT993l9VBxryJ5v/Al5/ABnlFPlyTAQ+B72+crvtS0=  ;
Received: from unknown (HELO jacob) (jeff?thorne@24.16.96.152 with login)
  by smtp106.mail.sc5.yahoo.com with SMTP; 6 Feb 2006 13:30:33 -0000
From: "Jeff Thorne" <jeff_thorne@yahoo.com>
To: <java-user@lucene.apache.org>
Subject: RE: Inappropriate content detection
Date: Mon, 6 Feb 2006 05:30:27 -0800
Message-ID: <008001c62b21$7eb9f8b0$320fa8c0@jacob>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
thread-index: AcYq5ibkqTpdBgw1RUKBJtwVsf6aWwAOzZaA
In-Reply-To: <000c01c62ae5$263f7c50$b900a8c0@jhi>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The site will have million+ posts. I am not familiar with Bayesian
algorithms. Is there an off the shelf API that can provide this type of
capability. As for performance would Bayesian be the way to go over Lucene?

Thanks for the help,
Jeff

-----Original Message-----
From: gekkokid [mailto:me@gekkokid.org.uk] 
Sent: Sunday, February 05, 2006 8:40 PM
To: java-user@lucene.apache.org
Subject: Re: Inappropriate content detection

Hi, what scale is this website? millions of posts or under?

wouldn't it be easiler to use a bayesian algorithm to scan each new post 
before it is posted to detect whether it is acceptable or not? just a quick 
idea of my head



_gk

----- Original Message ----- 
From: "Jeff Thorne" <jeff_thorne@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Monday, February 06, 2006 3:56 AM
Subject: Inappropriate content detection


>I am trying to figure out whether or not Lucene is an appropriate solution
> for a problem that our site faces. Our site
>
> allows users to post their opinions on various topics. Due to various
> government legislations around the world our management would like us to
> scan each users post against various keywords that would indicate
> inappropriate content
>
> in the users posting. We are looking for racial slurs, profanity and 
> attacks
> against sexual orientation. Each users posting is
>
> generally not more that a few paragraphs.
>
>
>
> I would like to analyze each users post for various words and expressions
> before publishing their post to the DB. I am reading through the Lucene in
> action book and it looks as if I cannot analyze a string without first
> indexing it. If this is true will indexing each post be a performance hit 
> to
> the site? I was wondering if someone could shed some light on the best way
> to tackle this problem with Lucene or another api if doing so makes more
> sense?
>
>
>
> Thanks,
>
> Jeff
>
>
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 13:58:56 2006
Return-Path: <java-user-return-18756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90693 invoked from network); 6 Feb 2006 13:58:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 13:58:56 -0000
Received: (qmail 38018 invoked by uid 500); 6 Feb 2006 13:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37911 invoked by uid 500); 6 Feb 2006 13:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37877 invoked by uid 99); 6 Feb 2006 13:58:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 05:58:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.112.4.54] (HELO smtp.nildram.co.uk) (195.112.4.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 05:58:43 -0800
Received: from raven (propel.gotadsl.co.uk [81.6.247.155])
	by smtp.nildram.co.uk (Postfix) with ESMTP id 78161254D0E
	for <java-user@lucene.apache.org>; Mon,  6 Feb 2006 13:58:11 +0000 (GMT)
From: "Gwyn Carwardine" <gwyn@carwardine.net>
To: <java-user@lucene.apache.org>
Subject: RE: Inappropriate content detection
Date: Mon, 6 Feb 2006 13:58:31 -0000
Message-ID: <03ed01c62b25$69c74850$ca03010a@theoldstore.propelsystems.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYq5ibkqTpdBgw1RUKBJtwVsf6aWwAOzZaAAADfZzA=
In-Reply-To: <008001c62b21$7eb9f8b0$320fa8c0@jacob>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The good bit about Bayesian is that it continuously learns.

The downside is that you have to teach it.

Not quite as simple as a list of rude words. 

There's an open source Bayesian mail filter called spambayes
(http://spambayes.sourceforge.net) which may lead you to interesting places.

-Gwyn

-----Original Message-----
From: Jeff Thorne [mailto:jeff_thorne@yahoo.com] 
Sent: 06 February 2006 13:30
To: java-user@lucene.apache.org
Subject: RE: Inappropriate content detection

The site will have million+ posts. I am not familiar with Bayesian
algorithms. Is there an off the shelf API that can provide this type of
capability. As for performance would Bayesian be the way to go over Lucene?

Thanks for the help,
Jeff

-----Original Message-----
From: gekkokid [mailto:me@gekkokid.org.uk] 
Sent: Sunday, February 05, 2006 8:40 PM
To: java-user@lucene.apache.org
Subject: Re: Inappropriate content detection

Hi, what scale is this website? millions of posts or under?

wouldn't it be easiler to use a bayesian algorithm to scan each new post 
before it is posted to detect whether it is acceptable or not? just a quick 
idea of my head



_gk

----- Original Message ----- 
From: "Jeff Thorne" <jeff_thorne@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Monday, February 06, 2006 3:56 AM
Subject: Inappropriate content detection


>I am trying to figure out whether or not Lucene is an appropriate solution
> for a problem that our site faces. Our site
>
> allows users to post their opinions on various topics. Due to various
> government legislations around the world our management would like us to
> scan each users post against various keywords that would indicate
> inappropriate content
>
> in the users posting. We are looking for racial slurs, profanity and 
> attacks
> against sexual orientation. Each users posting is
>
> generally not more that a few paragraphs.
>
>
>
> I would like to analyze each users post for various words and expressions
> before publishing their post to the DB. I am reading through the Lucene in
> action book and it looks as if I cannot analyze a string without first
> indexing it. If this is true will indexing each post be a performance hit 
> to
> the site? I was wondering if someone could shed some light on the best way
> to tackle this problem with Lucene or another api if doing so makes more
> sense?
>
>
>
> Thanks,
>
> Jeff
>
>
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 15:03:51 2006
Return-Path: <java-user-return-18757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29770 invoked from network); 6 Feb 2006 15:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 15:03:51 -0000
Received: (qmail 41655 invoked by uid 500); 6 Feb 2006 15:03:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41631 invoked by uid 500); 6 Feb 2006 15:03:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41620 invoked by uid 99); 6 Feb 2006 15:03:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 07:03:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 66.249.92.200 as permitted sender)
Received: from [66.249.92.200] (HELO uproxy.gmail.com) (66.249.92.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 07:03:44 -0800
Received: by uproxy.gmail.com with SMTP id u40so912148ugc
        for <java-user@lucene.apache.org>; Mon, 06 Feb 2006 07:03:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hx96VJscocVrHsFiYjpB11L4PFusbadY0ZppMRp5iOp+1DY6WzvU48j9yyDf6KYqJCNsUqWo7nNLEUn0kjDT+od3xVOGsvO0mnGC/GINoKACfEf3tFtE9zT/jXiPXRC9+m/N5rMxplRFgY018MnYGJEC5stZDTG3VXJF8xXLMCw=
Received: by 10.48.199.13 with SMTP id w13mr1253717nff;
        Mon, 06 Feb 2006 07:03:22 -0800 (PST)
Received: by 10.49.93.1 with HTTP; Mon, 6 Feb 2006 07:03:22 -0800 (PST)
Message-ID: <c68e39170602060703q410d3218odb0605ad88966364@mail.gmail.com>
Date: Mon, 6 Feb 2006 10:03:22 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index merging
In-Reply-To: <3287125F0F0CCE4E8F55435208100CF5AB19A4@exchange-mbx.be.bvd>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <3287125F0F0CCE4E8F55435208100CF5AB19A4@exchange-mbx.be.bvd>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 2/6/06, Vanlerberghe, Luc <Luc.Vanlerberghe@bvdep.com> wrote:
> Sorry to contradict you Yonik, but I'm pretty sure the commit lock is
> *not* locked during a merge, only while the "segments" file is being
> updated.

Oops, you're right.  Good thing too... if the commit lock was held
during merges, one couldn't even open up a new IndexReader.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 15:24:56 2006
Return-Path: <java-user-return-18758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40577 invoked from network); 6 Feb 2006 15:24:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 15:24:56 -0000
Received: (qmail 75905 invoked by uid 500); 6 Feb 2006 15:24:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75806 invoked by uid 500); 6 Feb 2006 15:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75776 invoked by uid 99); 6 Feb 2006 15:24:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 07:24:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 66.249.92.195 as permitted sender)
Received: from [66.249.92.195] (HELO uproxy.gmail.com) (66.249.92.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 07:24:45 -0800
Received: by uproxy.gmail.com with SMTP id e2so879079ugf
        for <java-user@lucene.apache.org>; Mon, 06 Feb 2006 07:24:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=X3UXUT8f89X99axu1Ck2sm8sD3odw/qMW+NrefegDVwIYiNwXp/oIxXUkwcgupxMO3stU6AjkekTyEEm+lJVZmg8f0t3/7VNJZ1D3iIMX+zMxPH6W2M6Pq9u+yZyssBwclIZUDfnNhHUfV2BgXs4ctO0B8cyw1cmEgFU2CtfuPM=
Received: by 10.49.36.13 with SMTP id o13mr1244765nfj;
        Mon, 06 Feb 2006 07:24:23 -0800 (PST)
Received: by 10.49.93.1 with HTTP; Mon, 6 Feb 2006 07:24:21 -0800 (PST)
Message-ID: <c68e39170602060724s3bb205e5q789572d7ec56817d@mail.gmail.com>
Date: Mon, 6 Feb 2006 10:24:21 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: understand the queryNorm and the fieldNorm.
In-Reply-To: <277d4c5d0602060119k1b55067chc5d0a3692e7899f3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <277d4c5d0602060119k1b55067chc5d0a3692e7899f3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Jason,
I get the same thing for the queryNorm when I calculate it by hand:
1/((1.7613963**2 + 1.326625**2)**.5)  =3D 0.45349488111693986

-Yonik

On 2/6/06, jason <gingerons@gmail.com> wrote:
> Hi,
>
> I have a problem of understanding the queryNorm and fieldNorm.
>
> The following is an example. I try to follow what said in the Javadoc
> "Computes the normalization value for a query given the sum of the square=
d
> weights of each of the query terms". But the result is different.
>
> ID:0 C:/PDF2Text/SearchEngine/File/SIG/sigkdd/p374-zhang.pdf|initial rank=
: 0
> 0.31900567 =3D sum of:
>   0.03968133 =3D weight(contents:associ in 920), product of:
>     0.60161763 =3D queryWeight(contents:associ), product of:
>       1.326625 =3D idf(docFreq=3D830)
>       0.45349488 =3D queryNorm
>     0.065957725 =3D fieldWeight(contents:associ in 920), product of:
>       4.2426405 =3D tf(termFreq(contents:associ)=3D18)
>       1.326625 =3D idf(docFreq=3D830)
>       0.01171875 =3D fieldNorm(field=3Dcontents, doc=3D920)
>   0.27932435 =3D weight(contents:rule in 920), product of:
>     0.7987842 =3D queryWeight(contents:rule), product of:
>       1.7613963 =3D idf(docFreq=3D537)
>       0.45349488 =3D queryNorm
>     0.34968686 =3D fieldWeight(contents:rule in 920), product of:
>       16.941074 =3D tf(termFreq(contents:rule)=3D287)
>       1.7613963 =3D idf(docFreq=3D537)
>       0.01171875 =3D fieldNorm(field=3Dcontents, doc=3D920)
>
> regards
> jiang xing
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 15:43:47 2006
Return-Path: <java-user-return-18759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50908 invoked from network); 6 Feb 2006 15:43:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 15:43:47 -0000
Received: (qmail 10969 invoked by uid 500); 6 Feb 2006 15:43:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10943 invoked by uid 500); 6 Feb 2006 15:43:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10932 invoked by uid 99); 6 Feb 2006 15:43:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 07:43:40 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.50] (HELO web25102.mail.ukl.yahoo.com) (217.12.10.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Feb 2006 07:43:39 -0800
Received: (qmail 94217 invoked by uid 60001); 6 Feb 2006 15:43:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.it;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=b4eQsJoLshT6iGosZS+bTOmYXzCNC1afmW1zZIN/gb8LHgqo7zXgwORHZwgrhfJl9NGXPSPIgO7LJ+wrHFXexCbkuoqtiWOOpKT04IIDvg/ThANpnRBWqcWT7l36TS3WEmqnLIIEyuJp1jSpnXLh4ZB9Lg//xbyqvNX5u+Xopx4=  ;
Message-ID: <20060206154318.94215.qmail@web25102.mail.ukl.yahoo.com>
Received: from [83.176.94.156] by web25102.mail.ukl.yahoo.com via HTTP; Mon, 06 Feb 2006 16:43:18 CET
Date: Mon, 6 Feb 2006 16:43:18 +0100 (CET)
From: Antonio Bruno <ntnbrn80@yahoo.it>
Subject: time of search for an index with the file .FDT much large
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170602060724s3bb205e5q789572d7ec56817d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-534548906-1139240598=:93319"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-534548906-1139240598=:93319
Content-Type: text/plain; charset=iso-8859-1

Hi,
  I have an index with 2,5 million documents. 
A document is formed in this way: 
- 15 fields index 
- 1 field stored but not indexed, whose value is one string of 500 byte. 
A search in average gives back the 3000 document. As 3000 id of documents is given back a lot fastly, the 3000 documents instead demands at least 20sec. for being given back!!! 
  I have tried with a string of 5 byte instead that of 500, and the 3000 documents are given back in only 1sec!
  The question seems had to the size of the file .fdt
  How I can make in order to reduce the time in the first case?




             
   
  Ing. Antonio Bruno
  Software Analyst
  http://xoomer.virgilio.it/lnb
  cell: (+39) 3402347684
  T&S S.r.l - Technologies And Solutions
  email T&S: bruno@tessrl.com
  email Yahoo: ntnbrn80@yahoo.it







		
---------------------------------
Yahoo! Mail: gratis 1GB per i messaggi, antispam, antivirus, POP3
--0-534548906-1139240598=:93319--

From java-user-return-18760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 15:48:23 2006
Return-Path: <java-user-return-18760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53807 invoked from network); 6 Feb 2006 15:48:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 15:48:22 -0000
Received: (qmail 23404 invoked by uid 500); 6 Feb 2006 15:48:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23382 invoked by uid 500); 6 Feb 2006 15:48:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23366 invoked by uid 99); 6 Feb 2006 15:48:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 07:48:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.125.145.37] (HELO hermes.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 07:48:15 -0800
Received: from dev2.mcpps.com ([213.94.211.166] helo=HUGHROSS)
	by hermes.propylon.com with esmtp (Exim 4.50)
	id 1F68al-0003K3-Vt
	for java-user@lucene.apache.org; Mon, 06 Feb 2006 15:47:53 +0000
From: "Hugh Ross" <hugh.ross@propylon.com>
To: <java-user@lucene.apache.org>
Date: Mon, 6 Feb 2006 15:47:42 -0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0016_01C62B34.AACC7E60"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcYrNKp2sSO1kI9uQp6fZlxAPv959A==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
Message-Id: <E1F68al-0003K3-Vt@hermes.propylon.com>
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: hugh.ross@propylon.com
Subject: Hit Highlighting: To store or not to store?
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on hermes.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on hermes.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,HTML_80_90,
	HTML_MESSAGE,MSGID_FROM_MTA_ID autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0016_01C62B34.AACC7E60
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

We have a project with approximately 20,000 documents which require
searching with hit highlighting on the content. The content is of variable
size. My question is which option to take to support hit highlighting:

 

 

1. To store the content as a field in the lucene document and to highlight
hits from there. 

2. To store the path to the document in the lucene document, open up the
document and then run hit highlighting.

 

Is there a "best-practice" for this?

Has anybody tried either of these approaches? 

 

Are there any advantages or drawbacks of either approach?

 

Many thanks,

Hugh


------=_NextPart_000_0016_01C62B34.AACC7E60--



From java-user-return-18761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 16:08:30 2006
Return-Path: <java-user-return-18761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64143 invoked from network); 6 Feb 2006 16:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 16:08:30 -0000
Received: (qmail 51354 invoked by uid 500); 6 Feb 2006 16:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51322 invoked by uid 500); 6 Feb 2006 16:08:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51311 invoked by uid 99); 6 Feb 2006 16:08:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 08:08:22 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.55] (HELO web25107.mail.ukl.yahoo.com) (217.12.10.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Feb 2006 08:08:21 -0800
Received: (qmail 73062 invoked by uid 60001); 6 Feb 2006 16:08:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.it;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=v6a6cSk3KDOwxJckDxxOv+EN/gcX40t2wgsofbbmspviOX5jJAzl5GL/EUFdQtkjAhYBFK27pwJKrJdnGWLhqOr0c23CJaLUhfJIU3XZIAQlJJ27SKh6skhzU8r5iicF/luNxTCaQDSN0pyut8Zds/Jjp+K63yS27PON8u+5pnU=  ;
Message-ID: <20060206160800.73060.qmail@web25107.mail.ukl.yahoo.com>
Received: from [83.176.94.156] by web25107.mail.ukl.yahoo.com via HTTP; Mon, 06 Feb 2006 17:08:00 CET
Date: Mon, 6 Feb 2006 17:08:00 +0100 (CET)
From: Antonio Bruno <ntnbrn80@yahoo.it>
Subject: time of search for an index with the file .FDT much large
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1305468872-1139242080=:71203"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1305468872-1139242080=:71203
Content-Type: text/plain; charset=iso-8859-1

I have an index with 2,5 million documents. 
A document is formed in this way: 
- 15 fields index 
- 1 field stored but not indexed, whose value is one string of 500 byte. 
A search in average gives back the 3000 document. As 3000 id of documents is given back a lot fastly, the 3000 documents instead demands at least 20sec. for being given back!!! 
  I have tried with a string of 5 byte instead that of 500, and the 3000 documents are given back in only 1sec!
  The question seems had to the size of the file .fdt
  How I can make in order to reduce the time in the first case?


             
   
  Ing. Antonio Bruno
  Software Analyst
  http://xoomer.virgilio.it/lnb
  cell: (+39) 3402347684
  T&S S.r.l - Technologies And Solutions
  email T&S: bruno@tessrl.com
  email Yahoo: ntnbrn80@yahoo.it







		
---------------------------------
Yahoo! Mail: gratis 1GB per i messaggi, antispam, antivirus, POP3
--0-1305468872-1139242080=:71203--

From java-user-return-18762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 16:09:41 2006
Return-Path: <java-user-return-18762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64932 invoked from network); 6 Feb 2006 16:09:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 16:09:40 -0000
Received: (qmail 54954 invoked by uid 500); 6 Feb 2006 16:09:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54932 invoked by uid 500); 6 Feb 2006 16:09:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54914 invoked by uid 99); 6 Feb 2006 16:09:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 08:09:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.155.252.4] (HELO rodney.cnchost.com) (207.155.252.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 08:09:33 -0800
Received: from eagle (68-255-223-190.suntimes.com [68.255.223.190] (may be forged))
	by rodney.cnchost.com
	id LAA20299; Mon, 6 Feb 2006 11:09:12 -0500 (EST)
	[ConcentricHost SMTP Relay 1.17]
Message-ID: <200602061609.LAA20299@rodney.cnchost.com>
Errors-To: <xinwu@pathf.com>
From: "Xin Herbert Wu" <xinwu@pathf.com>
To: <java-user@lucene.apache.org>
Subject: RE: Field search problem(only single word query works)
Date: Mon, 6 Feb 2006 10:09:05 -0600
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <4BE6F40A-3487-4B7F-BA13-1704F7548643@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYqNjRCQhDuaN/sQwKlOpKl0DQZpAA/i70g
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The Luke search worked on the index files. But my query client may be not
built correctly. Upon further test, I supplied an UnStored field in library
B with a guaranteed value - white space(previously it sometimes has new
StringBuffer().toString() empty value).  This makes my query client works
for now. But I will further look into my code and figure out the reason.
Thanks a lot!
-Xin

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Sunday, February 05, 2006 3:26 AM
To: java-user@lucene.apache.org
Subject: Re: Field search problem(only single word query works)

I recommend you take a look at your indexes with Luke and see what  
actually is indexed.

	Erik


On Feb 4, 2006, at 11:54 PM, Xin Herbert Wu wrote:

> Hi,
>
> I have two libraries A and B indexed from database tables where A  
> has about
> 10 fields and B has about 30 fields(with about a couple of hundred  
> records).
> A and B both have a TEXT type field "headline" reading data from  
> the same
> database table column.
>
>
>
> However the field query - "headline: fire water" works for library  
> A, NOT
> for library B(returns 0 results without any error) when the  
> headline field
> value is "fire and water". But query "headline:fire headline:water"  
> does
> work for library B.
>
>
>
> Any possible reason why library B only accepts single word fielded  
> query?
>
>
>
> I am running Lucene 1.4.3 on Java 5/JBoss4.0.3 in XP/Linux  
> environment.
>
>
>
> Thanks.
>
>
>
> -Xin
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 16:21:28 2006
Return-Path: <java-user-return-18763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73274 invoked from network); 6 Feb 2006 16:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 16:21:27 -0000
Received: (qmail 80333 invoked by uid 500); 6 Feb 2006 16:21:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80308 invoked by uid 500); 6 Feb 2006 16:21:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80297 invoked by uid 99); 6 Feb 2006 16:21:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 08:21:20 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 66.249.92.195 as permitted sender)
Received: from [66.249.92.195] (HELO uproxy.gmail.com) (66.249.92.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 08:21:18 -0800
Received: by uproxy.gmail.com with SMTP id j3so30425ugf
        for <java-user@lucene.apache.org>; Mon, 06 Feb 2006 08:20:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OdcBpUn5vAn3FsYK2zGc380YXy+tDopp6xhpSyCWO9QHo8UOyn8Clx8lkeLL4TpILiBN/n4J62DMptqF3l5lq/nQU2DPm3aMebUTwmAIOEEXYcDFCwHQ36z5aHIoEoRFUaq/3187OGmMS7Tns9hhKnUruDtO9Opj4mvSk933wbk=
Received: by 10.49.10.14 with SMTP id n14mr1280918nfi;
        Mon, 06 Feb 2006 08:20:53 -0800 (PST)
Received: by 10.49.93.1 with HTTP; Mon, 6 Feb 2006 08:20:53 -0800 (PST)
Message-ID: <c68e39170602060820y5b5c46a4o3cdbbb534fb4ff8c@mail.gmail.com>
Date: Mon, 6 Feb 2006 11:20:53 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: time of search for an index with the file .FDT much large
In-Reply-To: <20060206154318.94215.qmail@web25102.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <c68e39170602060724s3bb205e5q789572d7ec56817d@mail.gmail.com>
	 <20060206154318.94215.qmail@web25102.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

20 seconds does seem like a long time to retrieve the stored fields of
the 3000 documents.  However, you should also step back and determine
if you really need to do that, or if there is another way to narrow
the number of documents that need to be read from disk.

-Yonik


On 2/6/06, Antonio Bruno <ntnbrn80@yahoo.it> wrote:
> Hi,
>   I have an index with 2,5 million documents.
> A document is formed in this way:
> - 15 fields index
> - 1 field stored but not indexed, whose value is one string of 500 byte.
> A search in average gives back the 3000 document. As 3000 id of documents=
 is given back a lot fastly, the 3000 documents instead demands at least 20=
sec. for being given back!!!
>   I have tried with a string of 5 byte instead that of 500, and the 3000 =
documents are given back in only 1sec!
>   The question seems had to the size of the file .fdt
>   How I can make in order to reduce the time in the first case?
>
>
>
>
>
>
>   Ing. Antonio Bruno
>   Software Analyst
>   http://xoomer.virgilio.it/lnb
>   cell: (+39) 3402347684
>   T&S S.r.l - Technologies And Solutions
>   email T&S: bruno@tessrl.com
>   email Yahoo: ntnbrn80@yahoo.it
>
>
>
>
>
>
>
>
> ---------------------------------
> Yahoo! Mail: gratis 1GB per i messaggi, antispam, antivirus, POP3
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 17:16:02 2006
Return-Path: <java-user-return-18764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6866 invoked from network); 6 Feb 2006 17:16:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 17:16:01 -0000
Received: (qmail 71874 invoked by uid 500); 6 Feb 2006 17:15:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71841 invoked by uid 500); 6 Feb 2006 17:15:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71823 invoked by uid 99); 6 Feb 2006 17:15:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 09:15:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 09:15:55 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A60A833D2DB; Mon,  6 Feb 2006 12:15:34 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id DEDA333D2D9
	for <java-user@lucene.apache.org>; Mon,  6 Feb 2006 12:14:51 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <E1F68al-0003K3-Vt@hermes.propylon.com>
References: <E1F68al-0003K3-Vt@hermes.propylon.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <517BED42-7F39-4BC5-8DD5-CCEEBD5BA287@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Hit Highlighting: To store or not to store?
Date: Mon, 6 Feb 2006 12:14:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hugh,

Both approaches are certainly in use in various projects.  I  
typically opt for option #1, but that is because it is feasible  
giving the data I work with, and how it is managed.

However, the decision is really based on the size of the text to be  
highlighted and whether it makes sense to store it or just access it  
on the fly.

	Erik


On Feb 6, 2006, at 10:47 AM, Hugh Ross wrote:

> We have a project with approximately 20,000 documents which require
> searching with hit highlighting on the content. The content is of  
> variable
> size. My question is which option to take to support hit highlighting:
>
>
>
>
>
> 1. To store the content as a field in the lucene document and to  
> highlight
> hits from there.
>
> 2. To store the path to the document in the lucene document, open  
> up the
> document and then run hit highlighting.
>
>
>
> Is there a "best-practice" for this?
>
> Has anybody tried either of these approaches?
>
>
>
> Are there any advantages or drawbacks of either approach?
>
>
>
> Many thanks,
>
> Hugh
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 17:51:06 2006
Return-Path: <java-user-return-18765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21512 invoked from network); 6 Feb 2006 17:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 17:51:06 -0000
Received: (qmail 30015 invoked by uid 500); 6 Feb 2006 17:51:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29984 invoked by uid 500); 6 Feb 2006 17:51:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29952 invoked by uid 99); 6 Feb 2006 17:51:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 09:51:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.203 as permitted sender)
Received: from [66.249.82.203] (HELO xproxy.gmail.com) (66.249.82.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 09:50:59 -0800
Received: by xproxy.gmail.com with SMTP id i28so858289wxd
        for <java-user@lucene.apache.org>; Mon, 06 Feb 2006 09:50:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H5Em64/UaDVKh2WFx8VK4Q9h7s4XZ6aMG0gScaqn5+eutrJqIa1DX6a/mpabIG2tn+lyF0Tj6FEzy8vKA9kDmtzM4aGiCzeCcMr6s6YafS+IR2o8OOxPweHbLF/IS/T6umgI5EdOC4Faci14eLlsP39v9tMM/7Mu9uZwtiIeBJ4=
Received: by 10.70.82.12 with SMTP id f12mr2121893wxb;
        Mon, 06 Feb 2006 09:50:38 -0800 (PST)
Received: by 10.70.11.13 with HTTP; Mon, 6 Feb 2006 09:50:38 -0800 (PST)
Message-ID: <277d4c5d0602060950p2159c7d6g8831f9e2ce8e9550@mail.gmail.com>
Date: Tue, 7 Feb 2006 01:50:38 +0800
From: jason <gingerons@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: understand the queryNorm and the fieldNorm.
In-Reply-To: <c68e39170602060724s3bb205e5q789572d7ec56817d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11155_15617193.1139248238524"
References: <277d4c5d0602060119k1b55067chc5d0a3692e7899f3@mail.gmail.com>
	 <c68e39170602060724s3bb205e5q789572d7ec56817d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_11155_15617193.1139248238524
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

hi, thx.

I think i forget the ^0.5

cheers
Jason


On 2/6/06, Yonik Seeley <yseeley@gmail.com> wrote:
>
> Hi Jason,
> I get the same thing for the queryNorm when I calculate it by hand:
> 1/((1.7613963**2 + 1.326625**2)**.5)  =3D 0.45349488111693986
>
> -Yonik
>
> On 2/6/06, jason <gingerons@gmail.com> wrote:
> > Hi,
> >
> > I have a problem of understanding the queryNorm and fieldNorm.
> >
> > The following is an example. I try to follow what said in the Javadoc
> > "Computes the normalization value for a query given the sum of the
> squared
> > weights of each of the query terms". But the result is different.
> >
> > ID:0 C:/PDF2Text/SearchEngine/File/SIG/sigkdd/p374-zhang.pdf|initialran=
k: 0
> > 0.31900567 =3D sum of:
> >   0.03968133 =3D weight(contents:associ in 920), product of:
> >     0.60161763 =3D queryWeight(contents:associ), product of:
> >       1.326625 =3D idf(docFreq=3D830)
> >       0.45349488 =3D queryNorm
> >     0.065957725 =3D fieldWeight(contents:associ in 920), product of:
> >       4.2426405 =3D tf(termFreq(contents:associ)=3D18)
> >       1.326625 =3D idf(docFreq=3D830)
> >       0.01171875 =3D fieldNorm(field=3Dcontents, doc=3D920)
> >   0.27932435 =3D weight(contents:rule in 920), product of:
> >     0.7987842 =3D queryWeight(contents:rule), product of:
> >       1.7613963 =3D idf(docFreq=3D537)
> >       0.45349488 =3D queryNorm
> >     0.34968686 =3D fieldWeight(contents:rule in 920), product of:
> >       16.941074 =3D tf(termFreq(contents:rule)=3D287)
> >       1.7613963 =3D idf(docFreq=3D537)
> >       0.01171875 =3D fieldNorm(field=3Dcontents, doc=3D920)
> >
> > regards
> > jiang xing
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11155_15617193.1139248238524--

From java-user-return-18766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 18:47:07 2006
Return-Path: <java-user-return-18766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50498 invoked from network); 6 Feb 2006 18:47:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 18:47:07 -0000
Received: (qmail 26269 invoked by uid 500); 6 Feb 2006 18:47:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26224 invoked by uid 500); 6 Feb 2006 18:47:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26209 invoked by uid 99); 6 Feb 2006 18:47:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:47:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [72.36.192.122] (HELO MAIL1.plesklogin.net) (72.36.192.122)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 10:46:59 -0800
Received: from [192.168.0.9] ([81.178.188.62]) by plesklogin.net with MailEnable ESMTP; Mon, 06 Feb 2006 18:46:20 +0000
Message-ID: <43E79977.90905@oskarsson.nu>
Date: Mon, 06 Feb 2006 18:46:15 +0000
From: Johan Oskarsson <johan@oskarsson.nu>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
X-PXPME-Bayesian: 70|56|0.002213|0.000903|0.217218
X-PXPME-VirusCheck: Clean
Subject: Manually create a term freq vector
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi.

I'm trying to speed up my indexing process and
since I already know how many times I want a specific
word to occur in the term frequence vector I'd like to be
able to create the vector myself.

This would speed things up because I wouldn't have to
take the extra step of creating a string with the
word duplicated x times just so that lucene can
break it down into "string y occurs x times" again.

The problem is that I can't seem to figure out how to do this.
Even if I manage to create a term vector there doesn't seem to
be a good place to set it in the field.

/Johan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 19:08:00 2006
Return-Path: <java-user-return-18767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60077 invoked from network); 6 Feb 2006 19:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 19:08:00 -0000
Received: (qmail 53240 invoked by uid 500); 6 Feb 2006 19:07:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53209 invoked by uid 500); 6 Feb 2006 19:07:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53198 invoked by uid 99); 6 Feb 2006 19:07:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:07:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 11:07:54 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14EB91B1@mailer.syr.edu>; Mon, 6 Feb 2006 14:07:32 -0500
Message-ID: <43E79E74.4050002@syr.edu>
Date: Mon, 06 Feb 2006 14:07:32 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Manually create a term freq vector
References: <43E79977.90905@oskarsson.nu>
In-Reply-To: <43E79977.90905@oskarsson.nu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You may find this useful: 
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200511.mbox/%3c4368E375.2070105@syr.edu%3e


Johan Oskarsson wrote:
> Hi.
>
> I'm trying to speed up my indexing process and
> since I already know how many times I want a specific
> word to occur in the term frequence vector I'd like to be
> able to create the vector myself.
>
> This would speed things up because I wouldn't have to
> take the extra step of creating a string with the
> word duplicated x times just so that lucene can
> break it down into "string y occurs x times" again.
>
> The problem is that I can't seem to figure out how to do this.
> Even if I manage to create a term vector there doesn't seem to
> be a good place to set it in the field.
>
> /Johan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 21:11:21 2006
Return-Path: <java-user-return-18768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24989 invoked from network); 6 Feb 2006 21:11:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 21:11:21 -0000
Received: (qmail 27676 invoked by uid 500); 6 Feb 2006 21:11:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27656 invoked by uid 500); 6 Feb 2006 21:11:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27645 invoked by uid 99); 6 Feb 2006 21:11:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 13:11:14 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of canovaj@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 13:11:13 -0800
Received: by wproxy.gmail.com with SMTP id i3so1378679wra
        for <java-user@lucene.apache.org>; Mon, 06 Feb 2006 13:10:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QsRkBtpcUYM6QWWTT5sNyIEM/eNUHyYfXs2CJSurLxt3TTbLa2c6aSee1OZkcckvl/o1Eo+Qpz1HVtOAEWRJOwzp8jNt7xRNCMuqTlXItmpyDABGeqtC2HZe6HNdQSgi9DVxL4zmKzaQIoLsxoSDUhyeVJ30z94A1DudotiYydI=
Received: by 10.65.182.1 with SMTP id j1mr608021qbp;
        Mon, 06 Feb 2006 13:10:52 -0800 (PST)
Received: by 10.64.148.3 with HTTP; Mon, 6 Feb 2006 13:10:52 -0800 (PST)
Message-ID: <70055a110602061310g20d715ds28da604ec7e32d1d@mail.gmail.com>
Date: Mon, 6 Feb 2006 13:10:52 -0800
From: AJ Chen <canovaj@gmail.com>
To: java-user@lucene.apache.org
Subject: use Lucene to index sentences
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22507_31532174.1139260252561"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_22507_31532174.1139260252561
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'll appreciate any advice on whether Lucene is appropriate for index/searc=
h
sentences.  I have millions of documents broken down into millions of
sentences. Each sentence does not exist as a document.  All these sentences
are in a small number of big files. How can I use Lucene to index/search th=
e
sentences? Search will return which sentence matches the query.  If Lucene
does not do it, any better approach besides using mysql database?

Thanks,
AJ

------=_Part_22507_31532174.1139260252561--

From java-user-return-18769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 21:39:55 2006
Return-Path: <java-user-return-18769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37314 invoked from network); 6 Feb 2006 21:39:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 21:39:55 -0000
Received: (qmail 76187 invoked by uid 500); 6 Feb 2006 21:39:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75482 invoked by uid 500); 6 Feb 2006 21:39:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75471 invoked by uid 99); 6 Feb 2006 21:39:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 13:39:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [128.59.29.6] (HELO serrano.cc.columbia.edu) (128.59.29.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 13:39:48 -0800
Received: from [156.145.29.81] ([156.145.29.81])
	(user=mh2371 mech=PLAIN bits=0)
	by serrano.cc.columbia.edu (8.13.0/8.13.0) with ESMTP id k16LdKC2021906
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Mon, 6 Feb 2006 16:39:25 -0500 (EST)
Message-ID: <43E7C209.6070404@animarc.com>
Date: Mon, 06 Feb 2006 16:39:21 -0500
From: Marc Hadfield <marc@animarc.com>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: use Lucene to index sentences
References: <70055a110602061310g20d715ds28da604ec7e32d1d@mail.gmail.com>
In-Reply-To: <70055a110602061310g20d715ds28da604ec7e32d1d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-No-Spam-Score: Local
X-Scanned-By: MIMEDefang 2.48 on 128.59.29.6
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi AJ -

Depending on your need, you could create a lucene document for each 
sentence (in which case searching and returning sentences is trivial), 
or create a lucene document for each of your documents, with embedded 
sentence start/stop markers (as a special symbol).  or, instead of a 
special symbol, you can increase the token count after each 
end-of-sentence so that there is a large gap inbetween sentences -- this 
will give higher scores to intra-sentence matches.

if you insert special sentence marker symbols, then you could use a span 
search to guarantee that a phrase happens inside a sentence.  when a 
match occurs, you can use the document's termpositionvector object to 
re-create the original sentence, or alternatively, use the embedded 
sentence number in lucene (perhaps symbols like "__sentence_start" and 
"__sentence_num_20") to grab the original sentence from a file 
containing the full text with sentence markers (perhaps xml tags: 
"<sentence num=20>").

I use the techniques such as the above for a very large lucene index of 
documents with embedded sentence markers.  There are various trade-offs 
in terms of index size (how much info to keep in index), expected query 
performance, and so on.

---marc hadfield



AJ Chen wrote:

>I'll appreciate any advice on whether Lucene is appropriate for index/search
>sentences.  I have millions of documents broken down into millions of
>sentences. Each sentence does not exist as a document.  All these sentences
>are in a small number of big files. How can I use Lucene to index/search the
>sentences? Search will return which sentence matches the query.  If Lucene
>does not do it, any better approach besides using mysql database?
>
>Thanks,
>AJ
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 21:54:11 2006
Return-Path: <java-user-return-18770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42835 invoked from network); 6 Feb 2006 21:53:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 21:53:58 -0000
Received: (qmail 994 invoked by uid 500); 6 Feb 2006 21:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 967 invoked by uid 500); 6 Feb 2006 21:53:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 67889 invoked by uid 99); 6 Feb 2006 21:31:56 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@tpg.com.au designates 203.12.160.103 as permitted sender)
X-TPG-Antivirus: Passed
Message-ID: <001501c62b64$b23ffde0$3800a8c0@achilles>
From: "Jason Polites" <jason.polites@tpg.com.au>
To: <java-user@lucene.apache.org>
References: <03ed01c62b25$69c74850$ca03010a@theoldstore.propelsystems.com>
Subject: Re: Inappropriate content detection
Date: Tue, 7 Feb 2006 08:31:29 +1100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2670
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There is also an open source java anti spam api which does a baysian scan of
email content (plus other stuff).

You could retro-fit to work with raw text.

www.jasen.org

(get the latest HEAD from CVS as the current release is a bit old... new
version imminent)

----- Original Message ----- 
From: "Gwyn Carwardine" <gwyn@carwardine.net>
To: <java-user@lucene.apache.org>
Sent: Tuesday, February 07, 2006 12:58 AM
Subject: RE: Inappropriate content detection


> The good bit about Bayesian is that it continuously learns.
>
> The downside is that you have to teach it.
>
> Not quite as simple as a list of rude words.
>
> There's an open source Bayesian mail filter called spambayes
> (http://spambayes.sourceforge.net) which may lead you to interesting
> places.
>
> -Gwyn
>
> -----Original Message-----
> From: Jeff Thorne [mailto:jeff_thorne@yahoo.com]
> Sent: 06 February 2006 13:30
> To: java-user@lucene.apache.org
> Subject: RE: Inappropriate content detection
>
> The site will have million+ posts. I am not familiar with Bayesian
> algorithms. Is there an off the shelf API that can provide this type of
> capability. As for performance would Bayesian be the way to go over
> Lucene?
>
> Thanks for the help,
> Jeff
>
> -----Original Message-----
> From: gekkokid [mailto:me@gekkokid.org.uk]
> Sent: Sunday, February 05, 2006 8:40 PM
> To: java-user@lucene.apache.org
> Subject: Re: Inappropriate content detection
>
> Hi, what scale is this website? millions of posts or under?
>
> wouldn't it be easiler to use a bayesian algorithm to scan each new post
> before it is posted to detect whether it is acceptable or not? just a
> quick
> idea of my head
>
>
>
> _gk
>
> ----- Original Message ----- 
> From: "Jeff Thorne" <jeff_thorne@yahoo.com>
> To: <java-user@lucene.apache.org>
> Sent: Monday, February 06, 2006 3:56 AM
> Subject: Inappropriate content detection
>
>
>>I am trying to figure out whether or not Lucene is an appropriate solution
>> for a problem that our site faces. Our site
>>
>> allows users to post their opinions on various topics. Due to various
>> government legislations around the world our management would like us to
>> scan each users post against various keywords that would indicate
>> inappropriate content
>>
>> in the users posting. We are looking for racial slurs, profanity and
>> attacks
>> against sexual orientation. Each users posting is
>>
>> generally not more that a few paragraphs.
>>
>>
>>
>> I would like to analyze each users post for various words and expressions
>> before publishing their post to the DB. I am reading through the Lucene
>> in
>> action book and it looks as if I cannot analyze a string without first
>> indexing it. If this is true will indexing each post be a performance hit
>> to
>> the site? I was wondering if someone could shed some light on the best
>> way
>> to tackle this problem with Lucene or another api if doing so makes more
>> sense?
>>
>>
>>
>> Thanks,
>>
>> Jeff
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 22:35:18 2006
Return-Path: <java-user-return-18771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59657 invoked from network); 6 Feb 2006 22:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 22:34:58 -0000
Received: (qmail 45091 invoked by uid 500); 6 Feb 2006 22:34:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44904 invoked by uid 500); 6 Feb 2006 22:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44893 invoked by uid 99); 6 Feb 2006 22:34:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 14:34:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 14:34:26 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 6 Feb 2006 14:34:05 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C62B6D.6FD04023"
Subject: How to get mapping of query terms to number of their occurrences in a doc?
Date: Mon, 6 Feb 2006 14:34:05 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC1C@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to get mapping of query terms to number of their occurrences in a doc?
Thread-Index: AcYrbW/GmxqXL6o1Qu6pbyzG10NlGQ==
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Feb 2006 22:34:05.0979 (UTC) FILETIME=[7028CEB0:01C62B6D]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62B6D.6FD04023
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Given a query, I want to be able to, for each query term, get the number =
of occurrences of the term.  I have tried what I'm including below and =
it does not seem to provide reliable results.  Seems to work fine with =
exact matching but as soon as stemming kicks in, all bets are off as to =
value of the number of occurrences returned.
=20
Any ideas, anyone?  Can this be written in a simpler and/or more =
efficient way?
Thanks -
=20
      int totalOccurrences =3D 0;
=20
      reader =3D IndexReader.open(getDirectory(indexDirPath));
      HashSet terms =3D new HashSet();
      query.extractTerms(terms);
=20
      TermFreqVector[] tfvs =3D reader.getTermFreqVectors(docId);
      if (tfvs !=3D null) {

        // For each term frequency vector (i.e. for each field)
        for (int i =3D 0; i < tfvs.length; i++) {
          String field =3D tfvs[i].getField();
          String[] strTerms =3D tfvs[i].getTerms();
          int[] tfs =3D tfvs[i].getTermFrequencies();
=20
          if (strTerms !=3D null) {

            // For each term in the query
            for (Iterator iter =3D terms.iterator(); iter.hasNext();) {

              Term term =3D (Term) iter.next();
              // For each term in the vector
              for (int j =3D 0; j < strTerms.length; j++) {

                // If found the query term among the vector terms
                if (field.equals(term.field()) && =
strTerms[j].equals(term.text())) {

                  // Add the term frequency to the total
                  totalOccurrences +=3D tfs[j];

                }
              }
            }
          }
        }
      }

------_=_NextPart_001_01C62B6D.6FD04023--

From java-user-return-18772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 22:51:15 2006
Return-Path: <java-user-return-18772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65314 invoked from network); 6 Feb 2006 22:51:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 22:51:14 -0000
Received: (qmail 66390 invoked by uid 500); 6 Feb 2006 22:51:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66149 invoked by uid 500); 6 Feb 2006 22:51:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66134 invoked by uid 99); 6 Feb 2006 22:51:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 14:51:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of canovaj@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO zproxy.gmail.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 14:51:06 -0800
Received: by zproxy.gmail.com with SMTP id i1so1417377nzh
        for <java-user@lucene.apache.org>; Mon, 06 Feb 2006 14:50:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JfXvyHhM3twcDVYtcWIzMeW9IRkuVCP+0UcoGlNxvVpIDSjLoZfRBa8BhUQ4fVOwc2wmzqV9NB6z/b9p3dpZhaoXorwDGrl326l3jz+MyJA3j9dq3+fzfM6vMzyLZCR0doxzw8F2+34YCnE647OZ4Ila9fFKoCdKO+Nmfa/pvrk=
Received: by 10.65.211.19 with SMTP id n19mr272970qbq;
        Mon, 06 Feb 2006 14:50:46 -0800 (PST)
Received: by 10.64.148.3 with HTTP; Mon, 6 Feb 2006 14:50:46 -0800 (PST)
Message-ID: <70055a110602061450m4c2a7f90yec4273d084528e22@mail.gmail.com>
Date: Mon, 6 Feb 2006 14:50:46 -0800
From: AJ Chen <canovaj@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: use Lucene to index sentences
In-Reply-To: <43E7C209.6070404@animarc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23695_11811722.1139266246124"
References: <70055a110602061310g20d715ds28da604ec7e32d1d@mail.gmail.com>
	 <43E7C209.6070404@animarc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_23695_11811722.1139266246124
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Marc,
Thanks for your suggestions. Marking sentences in documents and using span
query is a good approach.  How do you compare its performance to a database
approach? For example, sentences can be stored in mysql, one sentence per
row, and they can be searched by mysql's full text search feature. Using
database, it will be also easy to tell which document the matched sentence
belongs to.

AJ

On 2/6/06, Marc Hadfield <marc@animarc.com> wrote:
>
> Hi AJ -
>
> Depending on your need, you could create a lucene document for each
> sentence (in which case searching and returning sentences is trivial),
> or create a lucene document for each of your documents, with embedded
> sentence start/stop markers (as a special symbol).  or, instead of a
> special symbol, you can increase the token count after each
> end-of-sentence so that there is a large gap inbetween sentences -- this
> will give higher scores to intra-sentence matches.
>
> if you insert special sentence marker symbols, then you could use a span
> search to guarantee that a phrase happens inside a sentence.  when a
> match occurs, you can use the document's termpositionvector object to
> re-create the original sentence, or alternatively, use the embedded
> sentence number in lucene (perhaps symbols like "__sentence_start" and
> "__sentence_num_20") to grab the original sentence from a file
> containing the full text with sentence markers (perhaps xml tags:
> "<sentence num=3D20>").
>
> I use the techniques such as the above for a very large lucene index of
> documents with embedded sentence markers.  There are various trade-offs
> in terms of index size (how much info to keep in index), expected query
> performance, and so on.
>
> ---marc hadfield
>
>
>
> AJ Chen wrote:
>
> >I'll appreciate any advice on whether Lucene is appropriate for
> index/search
> >sentences.  I have millions of documents broken down into millions of
> >sentences. Each sentence does not exist as a document.  All these
> sentences
> >are in a small number of big files. How can I use Lucene to index/search
> the
> >sentences? Search will return which sentence matches the query.  If
> Lucene
> >does not do it, any better approach besides using mysql database?
> >
> >Thanks,
> >AJ
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23695_11811722.1139266246124--

From java-user-return-18773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 22:54:58 2006
Return-Path: <java-user-return-18773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67147 invoked from network); 6 Feb 2006 22:54:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 22:54:56 -0000
Received: (qmail 73279 invoked by uid 500); 6 Feb 2006 22:54:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73251 invoked by uid 500); 6 Feb 2006 22:54:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73240 invoked by uid 99); 6 Feb 2006 22:54:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 14:54:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 14:54:48 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 06963B7BF7
	for <java-user@lucene.apache.org>; Tue,  7 Feb 2006 09:54:28 +1100 (EST)
Message-ID: <43E7D634.7090006@nuix.com.au>
Date: Tue, 07 Feb 2006 10:05:24 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Inappropriate content detection
References: <03ed01c62b25$69c74850$ca03010a@theoldstore.propelsystems.com> <001501c62b64$b23ffde0$3800a8c0@achilles>
In-Reply-To: <001501c62b64$b23ffde0$3800a8c0@achilles>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jason Polites wrote:
> There is also an open source java anti spam api which does a baysian 
> scan of
> email content (plus other stuff).
> 
> You could retro-fit to work with raw text.

There is also Classifier4J, which is more geared toward pure 
classification (comes with a Bayesian classifier but others can be 
implemented.)  Perhaps it's better than retro-fitting something more 
powerful, perhaps not.

http://classifier4j.sourceforge.net/

Daniel

-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 23:09:54 2006
Return-Path: <java-user-return-18774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72246 invoked from network); 6 Feb 2006 23:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 23:09:54 -0000
Received: (qmail 92987 invoked by uid 500); 6 Feb 2006 23:09:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92739 invoked by uid 500); 6 Feb 2006 23:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92728 invoked by uid 99); 6 Feb 2006 23:09:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 15:09:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [128.59.29.6] (HELO serrano.cc.columbia.edu) (128.59.29.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 15:09:47 -0800
Received: from [156.145.29.81] ([156.145.29.81])
	(user=mh2371 mech=PLAIN bits=0)
	by serrano.cc.columbia.edu (8.13.0/8.13.0) with ESMTP id k16N9Om8012739
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Mon, 6 Feb 2006 18:09:24 -0500 (EST)
Message-ID: <43E7D724.9040704@animarc.com>
Date: Mon, 06 Feb 2006 18:09:24 -0500
From: Marc Hadfield <marc@animarc.com>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: use Lucene to index sentences
References: <70055a110602061310g20d715ds28da604ec7e32d1d@mail.gmail.com>	 <43E7C209.6070404@animarc.com> <70055a110602061450m4c2a7f90yec4273d084528e22@mail.gmail.com>
In-Reply-To: <70055a110602061450m4c2a7f90yec4273d084528e22@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-No-Spam-Score: Local
X-Scanned-By: MIMEDefang 2.48 on 128.59.29.6
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi AJ -
Performance would depend on the kind of queries you are going to perform 
against sentences.  If you are going to be querying for phrases 
(multi-token), want to make use of stemming, or any kind of term 
expansion (wildcare, synonyms, etc), I imagine lucene would be much 
superior, but I don't have experience with mysql full text search.
---marc

AJ Chen wrote:

>Hi Marc,
>Thanks for your suggestions. Marking sentences in documents and using span
>query is a good approach.  How do you compare its performance to a database
>approach? For example, sentences can be stored in mysql, one sentence per
>row, and they can be searched by mysql's full text search feature. Using
>database, it will be also easy to tell which document the matched sentence
>belongs to.
>
>AJ
>
>On 2/6/06, Marc Hadfield <marc@animarc.com> wrote:
>  
>
>>Hi AJ -
>>
>>Depending on your need, you could create a lucene document for each
>>sentence (in which case searching and returning sentences is trivial),
>>or create a lucene document for each of your documents, with embedded
>>sentence start/stop markers (as a special symbol).  or, instead of a
>>special symbol, you can increase the token count after each
>>end-of-sentence so that there is a large gap inbetween sentences -- this
>>will give higher scores to intra-sentence matches.
>>
>>if you insert special sentence marker symbols, then you could use a span
>>search to guarantee that a phrase happens inside a sentence.  when a
>>match occurs, you can use the document's termpositionvector object to
>>re-create the original sentence, or alternatively, use the embedded
>>sentence number in lucene (perhaps symbols like "__sentence_start" and
>>"__sentence_num_20") to grab the original sentence from a file
>>containing the full text with sentence markers (perhaps xml tags:
>>"<sentence num=20>").
>>
>>I use the techniques such as the above for a very large lucene index of
>>documents with embedded sentence markers.  There are various trade-offs
>>in terms of index size (how much info to keep in index), expected query
>>performance, and so on.
>>
>>---marc hadfield
>>
>>
>>
>>AJ Chen wrote:
>>
>>    
>>
>>>I'll appreciate any advice on whether Lucene is appropriate for
>>>      
>>>
>>index/search
>>    
>>
>>>sentences.  I have millions of documents broken down into millions of
>>>sentences. Each sentence does not exist as a document.  All these
>>>      
>>>
>>sentences
>>    
>>
>>>are in a small number of big files. How can I use Lucene to index/search
>>>      
>>>
>>the
>>    
>>
>>>sentences? Search will return which sentence matches the query.  If
>>>      
>>>
>>Lucene
>>    
>>
>>>does not do it, any better approach besides using mysql database?
>>>
>>>Thanks,
>>>AJ
>>>
>>>
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 06 23:35:05 2006
Return-Path: <java-user-return-18775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80262 invoked from network); 6 Feb 2006 23:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Feb 2006 23:34:58 -0000
Received: (qmail 24129 invoked by uid 500); 6 Feb 2006 23:34:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24102 invoked by uid 500); 6 Feb 2006 23:34:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24091 invoked by uid 99); 6 Feb 2006 23:34:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 15:34:39 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.138.151.43] (HELO inergen.sybase.com) (192.138.151.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 15:34:35 -0800
Received: from smtp2.sybase.com (sybgate2 [10.22.97.85])
	by inergen.sybase.com  with ESMTP id k16NYEt01436
	for <java-user@lucene.apache.org>; Mon, 6 Feb 2006 15:34:14 -0800 (PST)
Received: from gwwest.sybase.com (localhost [127.0.0.1])
	by smtp2.sybase.com  with ESMTP id PAA21766
	for <java-user@lucene.apache.org>; Mon, 6 Feb 2006 15:34:13 -0800 (PST)
Subject: Fw: Sorting by Score
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5 September 26, 2003
Message-ID: <OFE6A4CBFC.B19F0652-ON8825710D.008172BE-8525710D.00817820@sybase.com>
From: Daniel.Clark@sybase.com
Date: Mon, 6 Feb 2006 18:34:11 -0500
X-MIMETrack: Serialize by Router on gwwest/SYBASE(Release 6.5.4|March 27, 2005) at 02/06/2006
 03:34:13 PM
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N




~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Daniel Clark, Senior Consultant
Sybase Federal Professional Services
6550 Rock Spring Drive, Suite 800
Bethesda, MD  20817
Office - (301) 896-1103
Office Fax - (301) 896-1604
Mobile - (703) 403-0340
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
----- Forwarded by Daniel Clark/SYBASE on 02/06/2006 06:33 PM -----
                                                                           
             Daniel                                                        
             Clark/SYBASE                                                  
                                                                        To 
             02/06/2006 12:28          java-user@lucene.apache.org         
             PM                                                         cc 
                                                                           
                                                                   Subject 
                                       RE: Sorting by Score(Document link: 
                                       Daniel clark)                       
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           





I am very appreciative of your responses, but I am a bit confused about the
recommended solution and nervous about the potential memory problem.  Could
you please be more detailed about what you are recommending?  Thanks so
much.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Daniel Clark, Senior Consultant
Sybase Federal Professional Services
6550 Rock Spring Drive, Suite 800
Bethesda, MD  20817
Office - (301) 896-1103
Office Fax - (301) 896-1604
Mobile - (703) 403-0340
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 03:31:17 2006
Return-Path: <java-user-return-18776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62584 invoked from network); 7 Feb 2006 03:31:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 03:31:17 -0000
Received: (qmail 20080 invoked by uid 500); 7 Feb 2006 03:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20043 invoked by uid 500); 7 Feb 2006 03:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20032 invoked by uid 99); 7 Feb 2006 03:31:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 19:31:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.128.105.12] (HELO King.Siti.com) (209.128.105.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 19:31:10 -0800
Received: from ravij ([10.2.152.215] unverified) by King.Siti.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 6 Feb 2006 19:16:05 -0800
From: "Ravi" <ravi.jaladanki@siti.com>
To: <java-user@lucene.apache.org>
Subject: Memory Increasing when the optimize is called
Date: Tue, 7 Feb 2006 09:04:07 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001B_01C62BC5.76C60B40"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
thread-index: AcYrl1mz0v0kgeCnTN6I0WAmX3QFzw==
Message-ID: <KING3sJWGYdRGy9tCx1000005b3@King.Siti.com>
X-OriginalArrivalTime: 07 Feb 2006 03:16:06.0250 (UTC) FILETIME=[D56D44A0:01C62B94]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_001B_01C62BC5.76C60B40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi 

 

 

I have index file around 2GB and when I optimize the index file tomcat is
taking more memory than normal and even after completion of optimization
also it is still taking more memory than the normal memory.. is this way it
will happen or do I need to change any thing to  reduce the memory I am
sending the code for optimization .. Please tell me is there any wrong in
the following code.

 

 

 

 

public  static  void optimizeIndexing() {

                         System.out.println("Index Optitmaization
started....");

                         ERMProperties objProperties
=          new ERMProperties();

                                    String strApplicationDataPath
=          objProperties.getProperty("applicationDataPath");

                                    String strIndexPath
=          strApplicationDataPath + "Index";

                                    File objIndexDir
=          new File(strIndexPath);

                                    boolean bNewIndex
=          false;

                                    IndexWriter indexWriter
=          null;

                                    FSDirectory objFSDirectory
=          null;

                                    try{

                                                if
(!objIndexDir.isDirectory()) {

 
objIndexDir.mkdir();

                                                            bNewIndex
=          true;

                                                }

                                                objFSDirectory
=          FSDirectory.getDirectory(new File(strIndexPath), bNewIndex);

                                                indexWriter
=          new IndexWriter(objFSDirectory, new HLAnalyzer(), bNewIndex);

                                                indexWriter.optimize();

                                    }catch(Exception objException){

                                        objException.printStackTrace();

                                    }finally{

                                                try { if (indexWriter !=
null) indexWriter.close(); } catch( Exception exc) { }

                                                try { if (objFSDirectory !=
null) objFSDirectory.close(); } catch( Exception exc) { }

                                    }

                            

                                    System.out.println("Index Optitmaization
Endeded....");

                        }

 

 

Regards,

Ravi Kumar Jaladanki


------=_NextPart_000_001B_01C62BC5.76C60B40--


From java-user-return-18777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 05:59:30 2006
Return-Path: <java-user-return-18777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19021 invoked from network); 7 Feb 2006 05:59:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 05:59:30 -0000
Received: (qmail 54236 invoked by uid 500); 7 Feb 2006 05:59:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53252 invoked by uid 500); 7 Feb 2006 05:59:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53241 invoked by uid 99); 7 Feb 2006 05:59:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 21:59:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Feb 2006 21:59:22 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 760D2B7BF7
	for <java-user@lucene.apache.org>; Tue,  7 Feb 2006 16:58:59 +1100 (EST)
Message-ID: <43E839B5.60300@nuix.com.au>
Date: Tue, 07 Feb 2006 17:09:57 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Queries not derived from the text index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi.

I've got an unusual (if not crazy) question about implementing custom 
queries.

Basically we have a UI where a user can enter a query and then select a 
bunch of filters to be applied to the query.  These filters are 
currently implemented using a fairly simple wrapper around Lucene's own 
Filter class.

Now we have one particular customer who says he wants to AND and OR 
these filters in various combinations.  Now, I know that this is 
possible on the model side, because I've already created AndFilter and 
OrFilter classes to do this sort of thing.  However, the view of the 
user interface would be impossible to keep simple if I were to bulk it 
up to support this kind of filtering.

So we are now wondering if it can be done through the query string.
The real question is:

Is it possible to customise the QueryParser so that it returns Query 
instances that have no relationship to the text index whatsoever?  For 
instance, many of our existing filters build their bitsets exclusively 
using a database, and we would need to keep this as-is because we don't 
want to modify the text index itself.

If we can do that, then I'm sure it will be a lot of work to modify the 
query parser, but it will allow a virtually unlimited amount of power to 
the user, and hopefully we won't get hit by this sort of query for quite 
some time to come.  And of course, I would go and re-implement our 
existing filter boxes using this new query syntax underneath.

Daniel

-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 09:59:05 2006
Return-Path: <java-user-return-18778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29428 invoked from network); 7 Feb 2006 09:58:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 09:58:22 -0000
Received: (qmail 87865 invoked by uid 500); 7 Feb 2006 09:57:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87835 invoked by uid 500); 7 Feb 2006 09:57:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87824 invoked by uid 99); 7 Feb 2006 09:57:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 01:57:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fraschetti@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 01:57:34 -0800
Received: by wproxy.gmail.com with SMTP id i5so1431675wra
        for <java-user@lucene.apache.org>; Tue, 07 Feb 2006 01:57:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=F3uoepk3Z+w3cnYtlVS7r6BKqo6MxVsOBN9eat68lJqD46JaivKIKS7iu5KG1bbtA0EzExfa0TXd/AFyTiQ7iSYXk/4EAocOO/p1tvxPnSu8bG3d6IRAbSliSeaH5a3mLhvYiamQtkxIJdYYY+TWhW/zxG3r1cu8cDxjoG/PGNM=
Received: by 10.65.121.15 with SMTP id y15mr671718qbm;
        Tue, 07 Feb 2006 01:57:13 -0800 (PST)
Received: by 10.65.93.4 with HTTP; Tue, 7 Feb 2006 01:57:13 -0800 (PST)
Message-ID: <cbdebdf80602070157p623c0904i22349d9e2f04ad18@mail.gmail.com>
Date: Tue, 7 Feb 2006 01:57:13 -0800
From: Chris Fraschetti <fraschetti@gmail.com>
To: java-user@lucene.apache.org
Subject: addIndexes causing IndexOutOfBoundsException
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have an index of roughly 2 million docs making up almost 200GB and I
can't seem to merge any additional indexes into it. Here is the error
I continuously get, always with the Index: 85, Size: 13

I couldn't find much in the previous mailing list posts nor on 'ol
faithful Google.

help/ideas?

java.lang.IndexOutOfBoundsException: Index: 85, Size: 13
        at java.util.ArrayList.RangeCheck(ArrayList.java:546)
        at java.util.ArrayList.get(ArrayList.java:321)
        at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155=
)
        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:66)
        at org.apache.lucene.index.SegmentReader.document(SegmentReader.jav=
a:237)
        at org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.=
java:185)
        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:9=
2)
        at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.ja=
va:487)
        at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:36=
6)
        at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:=
399)
--
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 10:48:08 2006
Return-Path: <java-user-return-18779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51957 invoked from network); 7 Feb 2006 10:48:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 10:48:07 -0000
Received: (qmail 39088 invoked by uid 500); 7 Feb 2006 10:47:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38992 invoked by uid 500); 7 Feb 2006 10:47:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38981 invoked by uid 99); 7 Feb 2006 10:47:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 02:47:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.201.138.118] (HELO mail.dealchecker.co.uk) (81.201.138.118)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Feb 2006 02:47:42 -0800
Received: (qmail 3598 invoked by uid 508); 7 Feb 2006 11:03:52 -0000
Received: from 212.36.49.15 by mail.dealchecker.co.uk (envelope-from <simon.porritt@dealchecker.co.uk>, uid 89) with qmail-scanner-1.25 
 (clamdscan: 0.87/1113. spamassassin: 3.0.4.  
 Clear:RC:0(212.36.49.15):SA:0(0.0/5.0):. 
 Processed in 1.220471 secs); 07 Feb 2006 11:03:52 -0000
Received: from unknown (HELO ?127.0.0.1?) (simon.porritt@dealchecker.co.uk@212.36.49.15)
  by 0 with SMTP; 7 Feb 2006 11:03:50 -0000
Message-ID: <43E87AA9.6000305@dealchecker.co.uk>
Date: Tue, 07 Feb 2006 10:47:05 +0000
From: Simon Porritt <simon.porritt@dealchecker.co.uk>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Search on Keyword rather than Text?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.0 required=5.0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

We have a document type for which we wish to create an index that may 
contain spaces, and we don't want the values to be tokenized.  The data 
is a list of cities.  We are currently creating the index using Field.Text:

Field.Text("index", "New York")

...which of course means that the string is tokenized before being 
indexed.  Running this search:

new yo

which translates to

index:new index:yo

returns New York amongst the results, as well as any cities starting 
with 'yo' - not what we want.  For that search we want no results at 
all.  In fact we want that search to translate to

index:"new yo"

where the whole of "new yo" is considered the search term.  Of course in 
that example the presence of the quotes means that Lucene treats the 
term as if it must exist in its entirety, which we also don't want!

It looked like the solution was to use Field.Keyword:

Field.Keyword("index", "New York")

but now we get no results on any search at all!

We use a SimpleAnalyser for creating the index and running the 
searches.  If anyone has an idea that could steer us in the right 
direction we would be most appreciative.

Thanks,

Simon


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 12:36:29 2006
Return-Path: <java-user-return-18780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94234 invoked from network); 7 Feb 2006 12:34:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 12:34:42 -0000
Received: (qmail 66992 invoked by uid 500); 7 Feb 2006 12:33:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66935 invoked by uid 500); 7 Feb 2006 12:33:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66924 invoked by uid 99); 7 Feb 2006 12:33:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 04:33:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.240.6.47] (HELO mail.Mi8.com) (63.240.6.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 04:33:43 -0800
Received: from 172.16.1.110 by mail.Mi8.com with ESMTP (- Welcome to Mi8
 Corporation www.Mi8.com (D1)); Tue, 07 Feb 2006 07:32:53 -0500
X-Server-Uuid: 241911D6-425B-44B9-A073-E3FE0F8FC774
Received: from MI8NYCMAIL07.Mi8.com ([172.16.1.162]) by
 D01SMTP01.Mi8.com with Microsoft SMTPSVC(6.0.3790.1830); Tue, 7 Feb
 2006 07:32:53 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: Search on Keyword rather than Text?
Date: Tue, 7 Feb 2006 07:32:54 -0500
Message-ID: <3AF76382C31760418AF0FBFD84F714030ABA029A@MI8NYCMAIL07.Mi8.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search on Keyword rather than Text?
Thread-Index: AcYr1E5rtPG4PX3BSr+NldEOn8weDgADgVaw
From: "Colin Young" <Colin.Young@tembizi.com>
To: java-user@lucene.apache.org
X-OriginalArrivalTime: 07 Feb 2006 12:32:53.0528 (UTC)
 FILETIME=[9DB75980:01C62BE2]
X-WSS-ID: 6FF64CFF31W1781550-01-01
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I had the same problem (almost exactly, even down to searching city
names) and the way I solved it was to provide my own tokenizer that
doesn't tokenize -- I'm passing in stuff to the analyzer already
tokenized, so in your example I'd pass in "new york" as a single entity
to analyze, and the tokenizer would return the whole thing as a single
token.

Colin=20

-----Original Message-----
=46rom: Simon Porritt [mailto:simon.porritt@dealchecker.co.uk]=20
Sent: 7 February, 2006 05:47
To: java-user@lucene.apache.org
Subject: Search on Keyword rather than Text=3F

Hello,

We have a document type for which we wish to create an index that may
contain spaces, and we don't want the values to be tokenized.  The data
is a list of cities.  We are currently creating the index using
=46ield.Text:

=46ield.Text("index", "New York")

...which of course means that the string is tokenized before being
indexed.  Running this search:

new yo

which translates to

index:new index:yo

returns New York amongst the results, as well as any cities starting
with 'yo' - not what we want.  For that search we want no results at
all.  In fact we want that search to translate to

index:"new yo"

where the whole of "new yo" is considered the search term.  Of course in
that example the presence of the quotes means that Lucene treats the
term as if it must exist in its entirety, which we also don't want!

It looked like the solution was to use Field.Keyword:

=46ield.Keyword("index", "New York")

but now we get no results on any search at all!

We use a SimpleAnalyser for creating the index and running the searches.
If anyone has an idea that could steer us in the right direction we
would be most appreciative.

Thanks,

Simon


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
=46or additional commands, e-mail: java-user-help@lucene.apache.org



Notice: This email message is for the sole use of the intended recipient(s)=
 =
and may contain confidential and privileged information. Any unauthorized =
review, use, disclosure or distribution is prohibited. If you are not the =
intended recipient, please contact the sender by reply email and destroy al=
l=
 copies of the original message.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 13:06:28 2006
Return-Path: <java-user-return-18781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7476 invoked from network); 7 Feb 2006 12:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 12:59:27 -0000
Received: (qmail 8958 invoked by uid 500); 7 Feb 2006 12:58:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8931 invoked by uid 500); 7 Feb 2006 12:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8920 invoked by uid 99); 7 Feb 2006 12:58:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 04:58:42 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_HAS_ULINE_NUMS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.179.229] (HELO web36115.mail.mud.yahoo.com) (66.163.179.229)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Feb 2006 04:58:42 -0800
Received: (qmail 22797 invoked by uid 60001); 7 Feb 2006 12:58:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ZyzJkgMu9kcfWdYpb6C0Q4OLbrL8SzpreQer7WU9MCROit/u4KNMuij/QjgTzKVWsinZPwu6qA/dWHOgP5cr28JbMd6fXBqZUtYfyMCaveoEEbW+BCA0EJqcbunhoknQYhPjhUbZY0E3QWlT59DcYyCnq2EuIGXPPidITcB1Oz4=  ;
Message-ID: <20060207125821.22794.qmail@web36115.mail.mud.yahoo.com>
Received: from [203.197.47.185] by web36115.mail.mud.yahoo.com via HTTP; Tue, 07 Feb 2006 04:58:21 PST
Date: Tue, 7 Feb 2006 04:58:21 -0800 (PST)
From: revati joshi <revati_joshi83@yahoo.com>
Subject: Reindexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-198941209-1139317101=:21173"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-198941209-1139317101=:21173
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello lucene members,
                                     i'm the silent member of this group.last week i had sent some query regarding reindexing,but i dn't received any reply from any one.Still i'm stuck up with the same problem of reindexing.
  i hve completed with the reindexing code using hibernate Lifecycle class but i don't know where and when to call this class for reindexing purpose during updation or new creation of any file in ur system.
  I just want to know the precise procedure or method for this.
  So plz do suggest some solution to this as early as possible.
  Thanks for ur cooperation.
  Byee for now.

			
---------------------------------
 Yahoo! Mail - Helps protect you from nasty viruses.
--0-198941209-1139317101=:21173--

From java-user-return-18782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 13:34:13 2006
Return-Path: <java-user-return-18782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30715 invoked from network); 7 Feb 2006 13:34:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 13:34:13 -0000
Received: (qmail 79688 invoked by uid 500); 7 Feb 2006 13:34:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79568 invoked by uid 500); 7 Feb 2006 13:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79520 invoked by uid 99); 7 Feb 2006 13:34:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 05:34:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 05:34:00 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9035833D8B2; Tue,  7 Feb 2006 08:33:39 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 00EBC33D2EB
	for <java-user@lucene.apache.org>; Tue,  7 Feb 2006 08:32:53 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20060207125821.22794.qmail@web36115.mail.mud.yahoo.com>
References: <20060207125821.22794.qmail@web36115.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2A0329BB-C0D6-4940-8872-116269FD893A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Reindexing
Date: Tue, 7 Feb 2006 08:32:48 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You may likely get better response by posting in the Hibernate list.

	Erik


On Feb 7, 2006, at 7:58 AM, revati joshi wrote:

> Hello lucene members,
>                                      i'm the silent member of this  
> group.last week i had sent some query regarding reindexing,but i  
> dn't received any reply from any one.Still i'm stuck up with the  
> same problem of reindexing.
>   i hve completed with the reindexing code using hibernate  
> Lifecycle class but i don't know where and when to call this class  
> for reindexing purpose during updation or new creation of any file  
> in ur system.
>   I just want to know the precise procedure or method for this.
>   So plz do suggest some solution to this as early as possible.
>   Thanks for ur cooperation.
>   Byee for now.
>
> 			
> ---------------------------------
>  Yahoo! Mail - Helps protect you from nasty viruses.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 14:10:41 2006
Return-Path: <java-user-return-18783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52888 invoked from network); 7 Feb 2006 14:10:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 14:10:40 -0000
Received: (qmail 46985 invoked by uid 500); 7 Feb 2006 14:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46846 invoked by uid 500); 7 Feb 2006 14:10:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46835 invoked by uid 99); 7 Feb 2006 14:10:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 06:10:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.196 as permitted sender)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Feb 2006 06:10:31 -0800
Received: (qmail 10494 invoked from network); 7 Feb 2006 14:10:12 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.21.46.109)
  by ws6-1.us4.outblaze.com with SMTP; 7 Feb 2006 14:10:12 -0000
Message-ID: <43E8AA43.10204@curtin.com>
Date: Tue, 07 Feb 2006 09:10:11 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Queries not derived from the text index
References: <43E839B5.60300@nuix.com.au>
In-Reply-To: <43E839B5.60300@nuix.com.au>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Noll wrote:

> Is it possible to customise the QueryParser so that it returns Query 
> instances that have no relationship to the text index whatsoever?

The syntax that Lucene's QueryParser supports isn't very complicated. 
I'm sure you could write your own parser from scratch, perhaps with some 
syntactic construct that identifies a "normal" Lucene (sub)query and 
passes that part to QueryParser.

The hard part, I wager, will be coming up with a syntax that does all 
you want, is easy to understand, and doesn't conflict with the goal of 
keeping the simple queries simple...

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 14:31:32 2006
Return-Path: <java-user-return-18784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68460 invoked from network); 7 Feb 2006 14:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 14:31:31 -0000
Received: (qmail 84936 invoked by uid 500); 7 Feb 2006 14:31:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84889 invoked by uid 500); 7 Feb 2006 14:31:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84876 invoked by uid 99); 7 Feb 2006 14:31:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 06:31:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.20.56.74] (HELO mail.synechron.com) (69.20.56.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 06:31:24 -0800
Date: Tue,  7 Feb 2006 09:31:03 -0500
Message-Id: <200602070931.AA1455685836@mail.synechron.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
From: "Amol Bhutada" <AmolB@synechron.com>
Reply-To: <AmolB@synechron.com>
X-Sender: <AmolB@synechron.com>
To: <java-user@lucene.apache.org>
Subject: Re: Reindexing
X-Mailer: <IMail v8.15>
X-IMSTrailer: __IMail_7__
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Revati,
If I am not wrong you must be using hibernate intercepter to get the evens on value objects. You will get all lifecycle event in the class so you should handle lucene index addition/updation/deletion there. 

But I had faced locking problem with hibernate as multiple writers get opened for lucene. So better have a seprate background indexing app.
Hey TEAM, please correct me if I am wrong.

thanks
Amol

---------- Original Message ----------------------------------
From: Erik Hatcher <erik@ehatchersolutions.com>
Reply-To: java-user@lucene.apache.org
Date:  Tue, 7 Feb 2006 08:32:48 -0500

>You may likely get better response by posting in the Hibernate list.
>
>	Erik
>
>
>On Feb 7, 2006, at 7:58 AM, revati joshi wrote:
>
>> Hello lucene members,
>>                                      i'm the silent member of this  
>> group.last week i had sent some query regarding reindexing,but i  
>> dn't received any reply from any one.Still i'm stuck up with the  
>> same problem of reindexing.
>>   i hve completed with the reindexing code using hibernate  
>> Lifecycle class but i don't know where and when to call this class  
>> for reindexing purpose during updation or new creation of any file  
>> in ur system.
>>   I just want to know the precise procedure or method for this.
>>   So plz do suggest some solution to this as early as possible.
>>   Thanks for ur cooperation.
>>   Byee for now.
>>
>> 			
>> ---------------------------------
>>  Yahoo! Mail - Helps protect you from nasty viruses.
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
 




________________________________________________________________
Sent via the WebMail system at mail.synechron.com


 
                   


--------------------------------------------------------------------
Mail Disclaimer: This e-mail and any files transmitted with it are confidential and the views expressed in the same are not necessarily the views of Synechron, and its Directors, Management or Employees. This communication represents the originator's personal views and opinions. If you are not the intended recipient or the person responsible for delivering the e-mail to the intended recipient, be advised that you have received this e-mail by error, and that any use, dissemination, forwarding, printing, or copying of this e-mail is strictly prohibited. You shall be under obligation to keep the contents of this e-mail, strictly confidential and shall not disclose, disseminate or divulge the same to any Person, Company, Firm or Entity. Even though Synechron uses up-to-date virus checking software to scan it's emails please ensure you have adequate virus protection before you open or detach any documents from this transmission. Synechron does not accept any liability for viruses 
 or vulnerabilities. The rights to monitor all e-mail communication through our network are reserved with us.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 15:25:56 2006
Return-Path: <java-user-return-18785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97102 invoked from network); 7 Feb 2006 15:25:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 15:25:56 -0000
Received: (qmail 16232 invoked by uid 500); 7 Feb 2006 15:25:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16136 invoked by uid 500); 7 Feb 2006 15:25:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16057 invoked by uid 99); 7 Feb 2006 15:25:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 07:25:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 07:25:45 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DE18733CBDF; Tue,  7 Feb 2006 10:25:24 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 8430833CBDE
	for <java-user@lucene.apache.org>; Tue,  7 Feb 2006 10:25:22 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43E839B5.60300@nuix.com.au>
References: <43E839B5.60300@nuix.com.au>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5ACC7DF3-B9C0-4781-B7BA-20F374ED0B9F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Queries not derived from the text index
Date: Tue, 7 Feb 2006 10:25:18 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 7, 2006, at 1:09 AM, Daniel Noll wrote:
> I've got an unusual (if not crazy) question about implementing  
> custom queries.
>
> Basically we have a UI where a user can enter a query and then  
> select a bunch of filters to be applied to the query.  These  
> filters are currently implemented using a fairly simple wrapper  
> around Lucene's own Filter class.
>
> Now we have one particular customer who says he wants to AND and OR  
> these filters in various combinations.  Now, I know that this is  
> possible on the model side, because I've already created AndFilter  
> and OrFilter classes to do this sort of thing.  However, the view  
> of the user interface would be impossible to keep simple if I were  
> to bulk it up to support this kind of filtering.

One thing that may be of use is the ChainedFilter:

	http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/ 
miscellaneous/src/java/org/apache/lucene/misc/ChainedFilter.java

> Is it possible to customise the QueryParser so that it returns  
> Query instances that have no relationship to the text index  
> whatsoever?  For instance, many of our existing filters build their  
> bitsets exclusively using a database, and we would need to keep  
> this as-is because we don't want to modify the text index itself.

I don't really follow what you're after here.  Could you give a  
concrete example of what you're after with "query" parsing?

It's certainly feasible to build a custom parser (JavaCC or  
otherwise) that does whatever you want, but that can be quite a  
complex endeavor.

	Erik




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 15:56:52 2006
Return-Path: <java-user-return-18786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19606 invoked from network); 7 Feb 2006 15:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 15:56:50 -0000
Received: (qmail 98256 invoked by uid 500); 7 Feb 2006 15:56:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98235 invoked by uid 500); 7 Feb 2006 15:56:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98224 invoked by uid 99); 7 Feb 2006 15:56:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 07:56:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 07:56:43 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 48B3733CBDE; Tue,  7 Feb 2006 10:56:22 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 90D6D33CBDF
	for <java-user@lucene.apache.org>; Tue,  7 Feb 2006 10:56:19 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43E87AA9.6000305@dealchecker.co.uk>
References: <43E87AA9.6000305@dealchecker.co.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <078F5E20-A7BF-424E-A115-808AB28740C7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search on Keyword rather than Text?
Date: Tue, 7 Feb 2006 10:56:14 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 7, 2006, at 5:47 AM, Simon Porritt wrote:
> Field.Text("index", "New York")
>
> ...which of course means that the string is tokenized before being  
> indexed.  Running this search:
>
> new yo
>
> which translates to
>
> index:new index:yo
>
> returns New York amongst the results, as well as any cities  
> starting with 'yo' - not what we want.  For that search we want no  
> results at all.  In fact we want that search to translate to
>
> index:"new yo"
>
> where the whole of "new yo" is considered the search term.  Of  
> course in that example the presence of the quotes means that Lucene  
> treats the term as if it must exist in its entirety, which we also  
> don't want!
>
> It looked like the solution was to use Field.Keyword:
>
> Field.Keyword("index", "New York")
>
> but now we get no results on any search at all!

For one thing, you have to be careful with case-sensitivity here.    
If you indexed "New York" and did a TermQuery for "new york" you  
wouldn't find it.  You'll likely want to lower-case the text that  
gets indexed at least, and also do that on the querying side.

> We use a SimpleAnalyser for creating the index and running the  
> searches.  If anyone has an idea that could steer us in the right  
> direction we would be most appreciative.

Have a look at the PerFieldAnalyzerWrapper and the use of a  
KeywordAnalyzer (found in the latest codebase, and in Lucene in  
Action's free code download).

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 16:40:31 2006
Return-Path: <java-user-return-18787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47482 invoked from network); 7 Feb 2006 16:40:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 16:40:25 -0000
Received: (qmail 91984 invoked by uid 500); 7 Feb 2006 16:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91926 invoked by uid 500); 7 Feb 2006 16:40:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91913 invoked by uid 99); 7 Feb 2006 16:40:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 08:40:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,HTML_SHORT_LENGTH,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of maoyuxin@gmail.com designates 66.249.92.201 as permitted sender)
Received: from [66.249.92.201] (HELO uproxy.gmail.com) (66.249.92.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 08:40:14 -0800
Received: by uproxy.gmail.com with SMTP id j3so76514ugf
        for <java-user@lucene.apache.org>; Tue, 07 Feb 2006 08:39:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=dyWdVbySA8t3UxuleU7AkGwaIhhFbLzz4klTCzjZwtNPzof6qrbETbSvlOSQ8ROCPI8XuGq0wDmuAXLTmc/ZMVRP0RY/WeWrUbP8ACy169b9SKYcKkRoHuaCCuUpOJO1NbEioL/92QPj2SFfWThk5fegUCMEfP93M/CLjWepA+U=
Received: by 10.49.17.1 with SMTP id u1mr1571042nfi;
        Tue, 07 Feb 2006 08:39:53 -0800 (PST)
Received: by 10.48.12.6 with HTTP; Tue, 7 Feb 2006 08:39:53 -0800 (PST)
Message-ID: <6c8f54f70602070839s1f440910k@mail.gmail.com>
Date: Wed, 8 Feb 2006 00:39:53 +0800
From: =?GB2312?B?uMfKwLrAz8A=?= <maoyuxin@gmail.com>
To: java-user@lucene.apache.org
Subject: Does anybody here do some efforts about RSS/Blog search?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9491_25261453.1139330393169"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9491_25261453.1139330393169
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm interested in this topic.
See if we can exchange some ideas.

------=_Part_9491_25261453.1139330393169--

From java-user-return-18788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 18:53:29 2006
Return-Path: <java-user-return-18788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21595 invoked from network); 7 Feb 2006 18:53:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 18:53:27 -0000
Received: (qmail 40957 invoked by uid 500); 7 Feb 2006 18:53:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40907 invoked by uid 500); 7 Feb 2006 18:53:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40896 invoked by uid 99); 7 Feb 2006 18:53:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 10:53:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Lawrence@theladders.com designates 67.151.144.115 as permitted sender)
Received: from [67.151.144.115] (HELO hermes.laddersoffice.com) (67.151.144.115)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 10:53:19 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C62C17.B673FBF1"
Subject: Statisically Improbably Phrases
Date: Tue, 7 Feb 2006 13:52:58 -0500
Message-ID: <B117CDDF09DCE34A992927EE3581CA4C024A09A2@hermes.laddersoffice.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Statisically Improbably Phrases
Thread-Index: AcYsF7hsXqNYd+JwSeO576gD+jsWzw==
From: "Lawrence Ogrodnek" <Lawrence@theladders.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62C17.B673FBF1
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hey all, I was looking around last night and found a thread from last
July on this list concerning SIPs.  I was wondering if any code has been
made available, or if anyone else has had success (and their solutions)
using Lucene for generating these.

=20

thanks,

l

=20

=20


------_=_NextPart_001_01C62C17.B673FBF1--

From java-user-return-18789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 18:59:43 2006
Return-Path: <java-user-return-18789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24126 invoked from network); 7 Feb 2006 18:59:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 18:59:20 -0000
Received: (qmail 54222 invoked by uid 500); 7 Feb 2006 18:58:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54198 invoked by uid 500); 7 Feb 2006 18:58:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54187 invoked by uid 99); 7 Feb 2006 18:58:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 10:58:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 10:58:39 -0800
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id k17IvmqH028946
	for <java-user@lucene.apache.org>; Tue, 7 Feb 2006 13:58:18 -0500 (EST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IUB00A01ZAM8C@lmco.com> for java-user@lucene.apache.org; Tue, 07 Feb 2006 13:56:46 -0500 (EST)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IUB008H3ZAMV8@lmco.com> for java-user@lucene.apache.org; Tue, 07 Feb 2006 13:56:46 -0500 (EST)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Tue,
 07 Feb 2006 13:56:46 -0500
Date: Tue, 07 Feb 2006 13:56:46 -0500
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Does anybody here do some efforts about RSS/Blog search?
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3A93@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=utf-8
Content-transfer-encoding: base64
Thread-Topic: Does anybody here do some efforts about RSS/Blog search?
Thread-index: AcYsBWg9DBws8BxPQ6mgqvIGr5jj8gAEsrOw
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 07 Feb 2006 18:56:46.0602 (UTC) FILETIME=[3E7F86A0:01C62C18]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

VGVjaG5vcmF0aSBpcyBiYXNlZCBvbiBsdWNlbmUgDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0t
LS0tDQpGcm9tOiDnm5bkuJbosarkvqAgW21haWx0bzptYW95dXhpbkBnbWFpbC5jb21dIA0KU2Vu
dDogVHVlc2RheSwgRmVicnVhcnkgMDcsIDIwMDYgMTE6NDAgQU0NClRvOiBqYXZhLXVzZXJAbHVj
ZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IERvZXMgYW55Ym9keSBoZXJlIGRvIHNvbWUgZWZmb3J0
cyBhYm91dCBSU1MvQmxvZyBzZWFyY2g/DQoNCkknbSBpbnRlcmVzdGVkIGluIHRoaXMgdG9waWMu
DQpTZWUgaWYgd2UgY2FuIGV4Y2hhbmdlIHNvbWUgaWRlYXMuDQoNCg0K


From java-user-return-18790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 19:31:41 2006
Return-Path: <java-user-return-18790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45816 invoked from network); 7 Feb 2006 19:31:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 19:31:30 -0000
Received: (qmail 24844 invoked by uid 500); 7 Feb 2006 19:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24618 invoked by uid 500); 7 Feb 2006 19:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24342 invoked by uid 99); 7 Feb 2006 19:31:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 11:31:06 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.79] (HELO web50503.mail.yahoo.com) (206.190.38.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Feb 2006 11:31:05 -0800
Received: (qmail 31908 invoked by uid 60001); 7 Feb 2006 19:30:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Mm4MUdAGQkmVIQP08YxTDnsztfzkg34lvj5e0Z4pvE88tLEpkKqPJX91iEY2FGRnOvjDlbKssli3MEwg2WHvceqduUJ/a9DO9g+Ei+FtQB5+jOcFCDCT/p7VSF2DrSfVqm0VJuKkk6lJugvYCZy6QO8q5lrPJEE1fruW54KLWBw=  ;
Message-ID: <20060207193044.31906.qmail@web50503.mail.yahoo.com>
Received: from [65.98.100.210] by web50503.mail.yahoo.com via HTTP; Tue, 07 Feb 2006 11:30:44 PST
Date: Tue, 7 Feb 2006 11:30:44 -0800 (PST)
From: Byron Miller <byronmhome@yahoo.com>
Subject: RE: Does anybody here do some efforts about RSS/Blog search?
To: java-user@lucene.apache.org
In-Reply-To: <92A278501EF50444AD3EE1FFB51219550BCE3A93@emss10m03.us.lmco.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So is blogdigger and a few others :)

--- "Mordo, Aviran (EXP N-NANNATEK)"
<aviran.mordo@lmco.com> wrote:

> Technorati is based on lucene 
> 
> -----Original Message-----
> From:  [mailto:maoyuxin@gmail.com] 
> Sent: Tuesday, February 07, 2006 11:40 AM
> To: java-user@lucene.apache.org
> Subject: Does anybody here do some efforts about
> RSS/Blog search?
> 
> I'm interested in this topic.
> See if we can exchange some ideas.
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 21:07:21 2006
Return-Path: <java-user-return-18791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9656 invoked from network); 7 Feb 2006 21:07:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 21:07:21 -0000
Received: (qmail 13438 invoked by uid 500); 7 Feb 2006 21:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13404 invoked by uid 500); 7 Feb 2006 21:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13393 invoked by uid 99); 7 Feb 2006 21:07:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 13:07:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.19] (HELO web86507.mail.ukl.yahoo.com) (217.12.13.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Feb 2006 13:07:13 -0800
Received: (qmail 66700 invoked by uid 60001); 7 Feb 2006 21:06:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QNs6uSmHdtCUV2+MeFZ+74ZurXAUeu12Y057MJfDIuZ3aL01uwI4MU4aLuCgwB3e9ehf+D6HoDuYZ7r5xpwt+uFb4uENsQ8Ln8y0aesx1N6f9b0/RhU8gLdTL5hFCDOWUKRxzDJcqRTw6c69HUm/A1WbG+P5Z97EVcXFUKSiEes=  ;
Message-ID: <20060207210651.66698.qmail@web86507.mail.ukl.yahoo.com>
Received: from [86.130.74.85] by web86507.mail.ukl.yahoo.com via HTTP; Tue, 07 Feb 2006 21:06:51 GMT
Date: Tue, 7 Feb 2006 21:06:51 +0000 (GMT)
From: RONALD MANTAY <ronald.mantay@btinternet.com>
Subject: How can you simulate inOrder in boolean queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-402684981-1139346411=:59142"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-402684981-1139346411=:59142
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

    Hi, can any one help, I am new to lucene.
   
  Due to requiring a specific Query syntax, I have created a bespoke query parser to build a boolean query which at any time may comprising a mixture of :
   
  a)  Fuzzy terms with similarity level set according to length of term.text
  b)  Wild Card Querys
  c)  Term Querys
   
  I would like to ability to define if the Query parser terms require to be in Order or not (but when in order to allow gaps in the term positions). 
   
  I can not see see how I can use PhraseQuery or SpanNearQuery directly, can anyone point me in the right direction in how to simulate inOrder to boolean queries.
   
  Any help will be appreciated.

   
   
   



--0-402684981-1139346411=:59142--

From java-user-return-18792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 21:55:57 2006
Return-Path: <java-user-return-18792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36920 invoked from network); 7 Feb 2006 21:55:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 21:55:56 -0000
Received: (qmail 21718 invoked by uid 500); 7 Feb 2006 21:55:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21615 invoked by uid 500); 7 Feb 2006 21:55:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21588 invoked by uid 99); 7 Feb 2006 21:55:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 13:55:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 13:55:43 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.13.3/8.13.3) with ESMTP id k17LtBLC064307
	for <java-user@lucene.apache.org>; Tue, 7 Feb 2006 22:55:15 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: How can you simulate inOrder in boolean queries
Date: Tue, 7 Feb 2006 22:55:10 +0100
User-Agent: KMail/1.8.2
References: <20060207210651.66698.qmail@web86507.mail.ukl.yahoo.com>
In-Reply-To: <20060207210651.66698.qmail@web86507.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602072255.11017.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 07 February 2006 22:06, RONALD MANTAY wrote:
>     Hi, can any one help, I am new to lucene.
>    
>   Due to requiring a specific Query syntax, I have created a bespoke query 
parser to build a boolean query which at any time may comprising a mixture 
of :
>    
>   a)  Fuzzy terms with similarity level set according to length of term.text
>   b)  Wild Card Querys
>   c)  Term Querys
>    
>   I would like to ability to define if the Query parser terms require to be 
in Order or not (but when in order to allow gaps in the term positions). 
>    
>   I can not see see how I can use PhraseQuery or SpanNearQuery directly, can 
anyone point me in the right direction in how to simulate inOrder to boolean 
queries.

You could take a look at the test code for these classes, this contains
examples on their use (see eg. TestPhraseQuery and the spans directory):
http://svn.apache.org/viewcvs.cgi/lucene/java/tags/lucene_1_4_3/src/test/org/apache/lucene/search/

And there is also another query language that has ordered and
unordered queries:
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/surround/

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 22:55:18 2006
Return-Path: <java-user-return-18793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69229 invoked from network); 7 Feb 2006 22:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 22:55:16 -0000
Received: (qmail 11397 invoked by uid 500); 7 Feb 2006 22:55:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11364 invoked by uid 500); 7 Feb 2006 22:55:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11353 invoked by uid 99); 7 Feb 2006 22:55:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 14:55:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.19] (HELO web86507.mail.ukl.yahoo.com) (217.12.13.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Feb 2006 14:55:08 -0800
Received: (qmail 98978 invoked by uid 60001); 7 Feb 2006 22:54:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=uMKVSr2HdGCCeoOMeRzaGOEhps+9KAFkxnPSKYi1KLOd45NMhMqMBbBbInRQi6IFOulJrWaIIth+LVD35Do2sLvBQe1j82ruyPM343Z1M2utLaJVsOYtbvPUOcDJr2tplHMIld1wxsW72izBpJPoDDK4tnpfjXwAkqfLuYU8Gwk=  ;
Message-ID: <20060207225445.98976.qmail@web86507.mail.ukl.yahoo.com>
Received: from [86.142.155.5] by web86507.mail.ukl.yahoo.com via HTTP; Tue, 07 Feb 2006 22:54:45 GMT
Date: Tue, 7 Feb 2006 22:54:45 +0000 (GMT)
From: RONALD MANTAY <ronald.mantay@btinternet.com>
Subject: Setting Performance Thresholds
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1151950757-1139352885=:86350"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1151950757-1139352885=:86350
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

  Hi ,
   
  I am working on a search application using lucene where I would like application to stop searching and return the hits colleted to date and an appropriate exception, when reaching either a threshold of  
   
  a)   xx seconds of processing time.
  or
  b)   on finding xxx documents
   
  Any help is appreciated.




--0-1151950757-1139352885=:86350--

From java-user-return-18794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 22:56:03 2006
Return-Path: <java-user-return-18794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69737 invoked from network); 7 Feb 2006 22:55:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 22:55:53 -0000
Received: (qmail 15117 invoked by uid 500); 7 Feb 2006 22:55:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15081 invoked by uid 500); 7 Feb 2006 22:55:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15066 invoked by uid 99); 7 Feb 2006 22:55:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 14:55:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.15] (HELO web86503.mail.ukl.yahoo.com) (217.12.13.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Feb 2006 14:55:41 -0800
Received: (qmail 69077 invoked by uid 60001); 7 Feb 2006 22:55:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=tEVNZ9w2X8ttWayznEOqIuPB9pKN6NyY7TY2V+Ezq6W2NLiA7k3vmNjV38zFXIv/argyP3DqS+BLcIKtT/s4PBlktux1it/3lqXhEE8UMHsssfEYJZdWHm9vLaTR7VliVWKdX/WE43o4YpzlgCCcACjvNX2YlRZQWQyestUonaE=  ;
Message-ID: <20060207225519.69075.qmail@web86503.mail.ukl.yahoo.com>
Received: from [86.142.155.5] by web86503.mail.ukl.yahoo.com via HTTP; Tue, 07 Feb 2006 22:55:19 GMT
Date: Tue, 7 Feb 2006 22:55:19 +0000 (GMT)
From: RONALD MANTAY <ronald.mantay@btinternet.com>
Subject: Setting Performance Thresholds
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1051438953-1139352919=:50845"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1051438953-1139352919=:50845
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

    Hi ,
   
  I am working on a search application using lucene where I would like application to stop searching and return the hits colleted to date and an appropriate exception, when reaching either a threshold of  
   
  a)   xx seconds of processing time.
  or
  b)   on finding xxx documents
   
  Any help is appreciated.





--0-1051438953-1139352919=:50845--

From java-user-return-18795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 23:07:47 2006
Return-Path: <java-user-return-18795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74338 invoked from network); 7 Feb 2006 23:07:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 23:07:28 -0000
Received: (qmail 22498 invoked by uid 500); 7 Feb 2006 23:07:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22466 invoked by uid 500); 7 Feb 2006 23:07:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22455 invoked by uid 99); 7 Feb 2006 23:07:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 15:07:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 15:07:10 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B627BB7BF7
	for <java-user@lucene.apache.org>; Wed,  8 Feb 2006 10:06:47 +1100 (EST)
Message-ID: <43E92A9B.1020109@nuix.com.au>
Date: Wed, 08 Feb 2006 10:17:47 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Queries not derived from the text index
References: <43E839B5.60300@nuix.com.au> <5ACC7DF3-B9C0-4781-B7BA-20F374ED0B9F@ehatchersolutions.com>
In-Reply-To: <5ACC7DF3-B9C0-4781-B7BA-20F374ED0B9F@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> 
> On Feb 7, 2006, at 1:09 AM, Daniel Noll wrote:
>> I've got an unusual (if not crazy) question about implementing custom 
>> queries.
>>
>> Basically we have a UI where a user can enter a query and then select 
>> a bunch of filters to be applied to the query.  These filters are 
>> currently implemented using a fairly simple wrapper around Lucene's 
>> own Filter class.
>>
>> Now we have one particular customer who says he wants to AND and OR 
>> these filters in various combinations.  Now, I know that this is 
>> possible on the model side, because I've already created AndFilter and 
>> OrFilter classes to do this sort of thing.  However, the view of the 
>> user interface would be impossible to keep simple if I were to bulk it 
>> up to support this kind of filtering.
> 
> One thing that may be of use is the ChainedFilter:
> 
>     http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/miscellaneous/src/java/org/apache/lucene/misc/ChainedFilter.java 

Looks very similar to our own AndFilter/OrFilter/etc, just wrapping 
everything into one class instead of separating it out.  Actually, with 
our stuff we have hidden everything behind a FilterUtils.and() method 
which also handles special cases like not making it AND if there are 0 
or 1 filters in the list.

Either way we have that much working already. :-)

>> Is it possible to customise the QueryParser so that it returns Query 
>> instances that have no relationship to the text index whatsoever?  For 
>> instance, many of our existing filters build their bitsets exclusively 
>> using a database, and we would need to keep this as-is because we 
>> don't want to modify the text index itself.
> 
> I don't really follow what you're after here.  Could you give a concrete 
> example of what you're after with "query" parsing?

Here's an example which is very much like what we need to do.

Take a text index with a few gigs of data in it.  For simplicity, let's 
say it has a single field called "text".  We allow the user to annotate 
the documents in this text index.

We keep the user's annotations outside of the text index because:

   1. Changing the contents of a document in the text index is
      non-trivial, requiring deleting and re-adding the document,
      and if the document contains unstored fields this is extremely
      difficult;

   2. It's helpful to write-protect a text index in order to be more
      certain that nobody has tampered with the text index after it was
      created; and

   3. It allows tricks like multiple users updating the annotations at
      the same time, and seeing each others' changes.

So a user might want to enter something like this:

     text:camel AND tag:zoo

In this case we would want a real FieldQuery object for the text:camel 
portion, and a non-Lucene Query instance for the "tag:zoo" portion which 
actually queries the Tags table in the database instead of the text index.

This is a simple example, the user might want to say:

     text:camel AND (tag:zoo OR tag:desert)

This kind of logic could be done, as mentioned, using an OrFilter. 
However, there is one more case which can't be done using tricks with 
filters:

     (text:camel AND tag:zoo) OR (text:fish AND tag:aquarium)

If we were to make these work as an actual Query, then the user is 
completely free to enter what they want.

> It's certainly feasible to build a custom parser (JavaCC or otherwise) 
> that does whatever you want, but that can be quite a complex endeavor.

Actually, we don't need to change the syntax.  Our plan would be to 
override the getFieldQuery method on QueryParser in order to drop our 
own Query class in on top of where a "real" field query would have been.

Incidentally, we already override QueryParser in order to perform a 
couple of boolean queries which Lucene for some reason doesn't like.

For example:

     NOT text:camel

We change that on the fly to be like "dummy:1 NOT text:camel" where 
"dummy" is just a field which exists on every document and always 
contains "1"... a cheap trick, but it works.  Actually, if it turns out 
we can make Query instances that don't depend on the text index, then we 
can fake this a little better.

Daniel



-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 07 23:58:18 2006
Return-Path: <java-user-return-18796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98876 invoked from network); 7 Feb 2006 23:58:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Feb 2006 23:58:16 -0000
Received: (qmail 1868 invoked by uid 500); 7 Feb 2006 23:58:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1823 invoked by uid 500); 7 Feb 2006 23:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1770 invoked by uid 99); 7 Feb 2006 23:58:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 15:58:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 15:58:06 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 069805B7D7; Tue,  7 Feb 2006 15:57:24 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8CC887F403
	for <java-user@lucene.apache.org>; Tue,  7 Feb 2006 15:57:24 -0800 (PST)
Date: Tue, 7 Feb 2006 15:57:24 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Reducing Inflated Similarity Scores
In-Reply-To: <43E5F134.309@gmail.com>
Message-ID: <Pine.LNX.4.58.0602071553490.9474@hal.rescomp.berkeley.edu>
References: <43E5F134.309@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: Ok, I'm quite new to lucene so I don't really know how the Default
: Similarity works but from what I gather it is a variation of the
: cos-similarity. And the cos-measure penalizes extraneous terms
: therefore, how can the score be 1.0?

If you are using hte Hits API then the score you are seeing is normalized
such that if the highest score in your results is greater then 1, then all
scores are divided by one.  if you want to see the "true" score you should
look at the score from one of the more advanced search methods (that
returns TopDocs).

: Can anyone tell what I can tweak to bring it more to the cos-measure?

I would start by looking at the Searchable.explain() method to really
understand where your score is comming from.  then you can look at what
methods you might need to override to get the behavior you desire (if it's
not already working fine once you see the non-normalized score)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 00:11:04 2006
Return-Path: <java-user-return-18797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5353 invoked from network); 8 Feb 2006 00:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 00:11:01 -0000
Received: (qmail 17108 invoked by uid 500); 8 Feb 2006 00:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17080 invoked by uid 500); 8 Feb 2006 00:10:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17064 invoked by uid 99); 8 Feb 2006 00:10:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 16:10:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 16:10:51 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6572A5B766; Tue,  7 Feb 2006 16:10:28 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 593037F403
	for <java-user@lucene.apache.org>; Tue,  7 Feb 2006 16:10:28 -0800 (PST)
Date: Tue, 7 Feb 2006 16:10:28 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to get mapping of query terms to number of their occurrences
 in a doc?
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC1C@ehost011-3.exch011.intermedia.net>
Message-ID: <Pine.LNX.4.58.0602071604260.9474@hal.rescomp.berkeley.edu>
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC1C@ehost011-3.exch011.intermedia.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


A cursory reading of your code looks ok ... stemming shouldn't be an issue
as long as your measure of success is comparing docs that match your
orriginal query with the counts you get out.

What i mean by that is that any stemming should have already been taken
care of when your query object was constructed (either by you manually, or
by QueryParser).  the direct equals comparisons you are dong should be
fine.

have you tried adding logging of the raw term field/text and the freq
counts you get back to see if that helps you spot the problem?


: Date: Mon, 6 Feb 2006 14:34:05 -0800
: From: Dmitry Goldenberg <dmitry.goldenberg@weblayers.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: How to get mapping of query terms to number of their occurrences
:     in a doc?
:
: Given a query, I want to be able to, for each query term, get the number of occurrences of the term.  I have tried what I'm including below and it does not seem to provide reliable results.  Seems to work fine with exact matching but as soon as stemming kicks in, all bets are off as to value of the number of occurrences returned.
:
: Any ideas, anyone?  Can this be written in a simpler and/or more efficient way?
: Thanks -
:
:       int totalOccurrences = 0;
:
:       reader = IndexReader.open(getDirectory(indexDirPath));
:       HashSet terms = new HashSet();
:       query.extractTerms(terms);
:
:       TermFreqVector[] tfvs = reader.getTermFreqVectors(docId);
:       if (tfvs != null) {
:
:         // For each term frequency vector (i.e. for each field)
:         for (int i = 0; i < tfvs.length; i++) {
:           String field = tfvs[i].getField();
:           String[] strTerms = tfvs[i].getTerms();
:           int[] tfs = tfvs[i].getTermFrequencies();
:
:           if (strTerms != null) {
:
:             // For each term in the query
:             for (Iterator iter = terms.iterator(); iter.hasNext();) {
:
:               Term term = (Term) iter.next();
:               // For each term in the vector
:               for (int j = 0; j < strTerms.length; j++) {
:
:                 // If found the query term among the vector terms
:                 if (field.equals(term.field()) && strTerms[j].equals(term.text())) {
:
:                   // Add the term frequency to the total
:                   totalOccurrences += tfs[j];
:
:                 }
:               }
:             }
:           }
:         }
:       }
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 01:07:32 2006
Return-Path: <java-user-return-18798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33747 invoked from network); 8 Feb 2006 01:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 01:07:31 -0000
Received: (qmail 91525 invoked by uid 500); 8 Feb 2006 01:07:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90542 invoked by uid 500); 8 Feb 2006 01:07:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90531 invoked by uid 99); 8 Feb 2006 01:07:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 17:07:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 17:07:25 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CAE1533D113; Tue,  7 Feb 2006 20:07:04 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id EEE2833CBDE
	for <java-user@lucene.apache.org>; Tue,  7 Feb 2006 20:07:03 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20060207225519.69075.qmail@web86503.mail.ukl.yahoo.com>
References: <20060207225519.69075.qmail@web86503.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E0600237-0B26-4538-8D21-688AE3EE9F97@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Setting Performance Thresholds
Date: Tue, 7 Feb 2006 20:07:02 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This should be possible using a HitCollector with the  
IndexSearcher.search() method, and throwing an exception from the  
HitCollector when the time limit as expired.

	Erik


On Feb 7, 2006, at 5:55 PM, RONALD MANTAY wrote:

>     Hi ,
>
>   I am working on a search application using lucene where I would  
> like application to stop searching and return the hits colleted to  
> date and an appropriate exception, when reaching either a threshold of
>
>   a)   xx seconds of processing time.
>   or
>   b)   on finding xxx documents
>
>   Any help is appreciated.
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 01:18:33 2006
Return-Path: <java-user-return-18799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38624 invoked from network); 8 Feb 2006 01:18:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 01:18:32 -0000
Received: (qmail 12553 invoked by uid 500); 8 Feb 2006 01:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12517 invoked by uid 500); 8 Feb 2006 01:18:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12506 invoked by uid 99); 8 Feb 2006 01:18:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 17:18:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 17:18:25 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9D5DE33D2DA; Tue,  7 Feb 2006 20:18:04 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 2D39C33D2D1
	for <java-user@lucene.apache.org>; Tue,  7 Feb 2006 20:18:03 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20060207210651.66698.qmail@web86507.mail.ukl.yahoo.com>
References: <20060207210651.66698.qmail@web86507.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1487F818-696E-4CA9-9FD9-DEC115E61529@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How can you simulate inOrder in boolean queries
Date: Tue, 7 Feb 2006 20:17:59 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The source code to Lucene in Action (www.lucenebook.com) has an  
example of extending the built-in QueryParser to use SpanNearQuery  
for in-order phrase searching instead of the default unordered  
PhraseQuery behavior.  That example will show how to use  
SpanNearQuery made up of SpanTermQuery's.  The source code to  
QueryParser <http://svn.apache.org/repos/asf/lucene/java/trunk/src/ 
java/org/apache/lucene/queryParser/QueryParser.jj> shows how to use  
PhraseQuery directly, if all you want is an example.

Also as Paul mentioned, the test cases in Lucene's source code make  
great ways to learn how Lucene's API works.

If what you're trying to do is put an in-order wrapper around all of  
the query types you mentioned, you will have a fair bit more work to  
do in order to create a parser that can create a SpanNearQuery with  
SpanRegexQuery's (new in contrib's trunk), and there currently is not  
a SpanQuery version of FuzzyQuery that I'm aware of.

	Erik


On Feb 7, 2006, at 4:06 PM, RONALD MANTAY wrote:

>     Hi, can any one help, I am new to lucene.
>
>   Due to requiring a specific Query syntax, I have created a  
> bespoke query parser to build a boolean query which at any time may  
> comprising a mixture of :
>
>   a)  Fuzzy terms with similarity level set according to length of  
> term.text
>   b)  Wild Card Querys
>   c)  Term Querys
>
>   I would like to ability to define if the Query parser terms  
> require to be in Order or not (but when in order to allow gaps in  
> the term positions).
>
>   I can not see see how I can use PhraseQuery or SpanNearQuery  
> directly, can anyone point me in the right direction in how to  
> simulate inOrder to boolean queries.
>
>   Any help will be appreciated.
>
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 06:19:06 2006
Return-Path: <java-user-return-18800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55588 invoked from network); 8 Feb 2006 06:19:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 06:19:06 -0000
Received: (qmail 95271 invoked by uid 500); 8 Feb 2006 06:19:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95244 invoked by uid 500); 8 Feb 2006 06:19:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95233 invoked by uid 99); 8 Feb 2006 06:18:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 22:18:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 22:18:59 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1F6iey-00016Q-2b
	for java-user@lucene.apache.org; Wed, 08 Feb 2006 07:18:36 +0100
Received: from c-24-20-199-223.hsd1.or.comcast.net ([24.20.199.223])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 08 Feb 2006 07:18:36 +0100
Received: from dobleerre by c-24-20-199-223.hsd1.or.comcast.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 08 Feb 2006 07:18:36 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Raul Raja Martinez <dobleerre@estudiowebs.com>
Subject:  Re: Reindexing
Date:  Tue, 07 Feb 2006 22:18:08 -0800
Lines: 37
Message-ID: <dsc2f2$th5$1@sea.gmane.org>
References:  <20060207125821.22794.qmail@web36115.mail.mud.yahoo.com> <2A0329BB-C0D6-4940-8872-116269FD893A@ehatchersolutions.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: c-24-20-199-223.hsd1.or.comcast.net
User-Agent: Thunderbird 1.5 (Macintosh/20051201)
In-Reply-To: <2A0329BB-C0D6-4940-8872-116269FD893A@ehatchersolutions.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Eric, I'm in the same situation, I wouldn't normally ask something 
related to hibernate here but I posted something similar in the 
hibernate forums on Jan 16th but still haven't got any response.

http://forum.hibernate.org/viewtopic.php?t=954137&highlight=lucene

It is really obvious that if they offer lucene indexing out of the box 
with the hibernate release, people would have to index all their 
persistent objects that were already in the database before.

Any hint is highly appreciated.

Erik Hatcher wrote:
> You may likely get better response by posting in the Hibernate list.
> 
>     Erik
> 
> 
> On Feb 7, 2006, at 7:58 AM, revati joshi wrote:
> 
>> Hello lucene members,
>>                                      i'm the silent member of this 
>> group.last week i had sent some query regarding reindexing,but i dn't 
>> received any reply from any one.Still i'm stuck up with the same 
>> problem of reindexing.
>>   i hve completed with the reindexing code using hibernate Lifecycle 
>> class but i don't know where and when to call this class for 
>> reindexing purpose during updation or new creation of any file in ur 
>> system.
>>   I just want to know the precise procedure or method for this.
>>   So plz do suggest some solution to this as early as possible.
>>   Thanks for ur cooperation.
>>   Byee for now.
>>
>>            
>> ---------------------------------
>>  Yahoo! Mail - Helps protect you from nasty viruses.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 07:05:32 2006
Return-Path: <java-user-return-18801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79125 invoked from network); 8 Feb 2006 07:05:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 07:05:31 -0000
Received: (qmail 36207 invoked by uid 500); 8 Feb 2006 07:05:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36180 invoked by uid 500); 8 Feb 2006 07:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36169 invoked by uid 99); 8 Feb 2006 07:05:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 23:05:25 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Daniel.Pfeifer@tradedoubler.com designates 212.247.9.195 as permitted sender)
Received: from [212.247.9.195] (HELO smtp.tradedoubler.com) (212.247.9.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Feb 2006 23:05:24 -0800
Received: from EXHQ01.root.tradedoubler.com ([192.168.11.57]) by smtp.tradedoubler.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 8 Feb 2006 08:05:02 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Re: JVM Crash in Lucene
Date: Wed, 8 Feb 2006 08:05:01 +0100
Message-ID: <4BA24A13BFC8B24EBD64FCA6525003446BA0F3@EXHQ01.root.tradedoubler.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: JVM Crash in Lucene
Thread-Index: AcYsffr0ac3OeNI/QdG7dSQ8FyqI2g==
From: "Daniel Pfeifer" <Daniel.Pfeifer@tradedoubler.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2006 07:05:02.0323 (UTC) FILETIME=[FB2D6C30:01C62C7D]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Got the same problem. Running 1.5.0_05 on Solaris 10. I've seen that
this issue has been reported on Sun's forum but no answer yet.

Another interesting thing which I noticed. We previously used the
RAMDirectory and we never got JVM-crashes when using RAMDirectory.
However, once we started using FSDirectory the JVM started to crash.

I tested adding -Xcomp parameter and the JVM has not crashed yet. But
then again, the SearchService hasn't been up long enough to be sure that
it solved the problem.

/Daniel

> You also might try -Xbatch or -Xcomp to see if that fixes it (or
> reproduces it faster).
>
> Here's a great list of JVM options:
> http://blogs.sun.com/roller/resources/watt/jvm-options-list.html
>
> -Yonik
>
> On 12/11/05, Yonik Seeley <yseeley@gmail.com> wrote:
> > Sounds like it's a hotspot bug.
> > AFAIK, hotspot doesn't just compile a method once... it can do
> > optimization over time.
> >
> > To work around it, have you tried pre previous version: 1.5_05?
> > It's possible it's a fairly new bug.  We've been running with that
> > version and Lucene 1.4.3 without problems (on Opteron, RHEL4).
> >
> > You could also try the latest Lucene 1.9 to see if that changes
enough
> > to avoid the bug.
> >
> > -Yonik
> >
> > On 12/11/05, Dan Gould <dlg@cs.brown.edu> wrote:
> > > First, thank you Chris, Yonik, and Dan for your ideas as to what
might be
> > > causing this problem.
> > >
> > > I tried moving things around so that the IndexReader is still open
when it
> > > calls
TermFreqVector.getTerms()/TermFreqVector.getTermFrequencies().  It
> > > didn't seem to make any difference.
> > >
> > > I also tried running Java with the flags:
> > > -Xmx2048m -XX:MaxPermSize=3D200m
> > > (the box has 4GB of RAM) and it still crashes.  It's hard to tell,
but the
> > > program does seem to run for a lot longer (maybe 10 hours), but
that could
> > > just be randomness in my tests.
> > >
> > > The JVM always seems to crash with
> > >
> > >   Current CompileTask:
> > >   opto:1836
> > >   org.apache.lucene.index.IndexReader$1.doBody()Ljava/lang/Object;
> > >   (99 bytes)
> > >
> > > which in the Lucene source is:
> > >
> > >    private static IndexReader open(final Directory directory,
final boolean
> > > closeDirectory) throws IOException {
> > >      synchronized (directory) {                   // in- &
inter-process
> > > sync
> > >        return (IndexReader)new Lock.With(
> > >            directory.makeLock(IndexWriter.COMMIT_LOCK_NAME),
> > >            IndexWriter.COMMIT_LOCK_TIMEOUT) {
> > >            public Object doBody() throws IOException {
> > >              SegmentInfos infos =3D new SegmentInfos();
> > >              infos.read(directory);
> > >              if (infos.size() =3D=3D 1) {             // index is
optimized
> > >                return SegmentReader.get(infos, infos.info(0),
> > > closeDirectory);
> > >              }
> > >              IndexReader[] readers =3D new
IndexReader[infos.size()];
> > >              for (int i =3D 0; i < infos.size(); i++)
> > >                readers[i] =3D SegmentReader.get(infos.info(i));
> > >              return new MultiReader(directory, infos,
closeDirectory,
> > > readers);
> > >
> > >            }
> > >          }.run();
> > >      }
> > >    }
> > >
> > > that's definitely a non-trivial bit of code, but I can't imagine
that
> > > there's a problem that I'm seeing that no one else else.
Moreover, that
> > > code gets run hundreds or even thousands of times before it
crashes, so I
> > > don't image it's being HotSpot-compiled for the first time.
> > >
> > > I'm running the 1.4.3 release and the 1.5.0_06-b05 JVM on Centos
Linux on
> > > an Opteron.
> > >
> > > Any further guesses?
> > >
> > > Thank you all very much,
> > > Dan
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 10:02:00 2006
Return-Path: <java-user-return-18802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53965 invoked from network); 8 Feb 2006 10:01:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 10:01:23 -0000
Received: (qmail 22286 invoked by uid 500); 8 Feb 2006 10:01:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22148 invoked by uid 500); 8 Feb 2006 10:01:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22137 invoked by uid 99); 8 Feb 2006 10:01:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 02:01:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.59.116.41] (HELO orbita1.ru) (213.59.116.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 02:01:14 -0800
Received: from orbitsoft.ipt ([192.168.0.150] helo=orbitsoft.orbitscripts)
	by orbita1.ru with esmtpa (Exim 4.42)
	id 1F6m81-0004oM-Tq
	for java-user@lucene.apache.org; Wed, 08 Feb 2006 13:00:49 +0300
Subject: Duplicates recods in index
Date: Wed, 8 Feb 2006 13:00:30 +0300
Message-ID: <41D8E340E5045F4ABA553E4524E3D379294116@orbitsoft.orbitscripts>
X-MS-Has-Attach: 
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C62C96.95043DBC"
X-MS-TNEF-Correlator: 
Thread-Topic: Duplicates recods in index
Thread-Index: AcYsln6eSVC7JxUBR9+yzswmA5TlDQ==
Content-class: urn:content-classes:message
From: "Anton Potehin" <anton@orbita1.ru>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62C96.95043DBC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is it possible to add records into lucene index using following
algorithm:

=20

1) create Document object=20

2) add 5 fields into Document (id, name, field1, field2, field3). All
fields are stored, indexed and tokenized=20

3) check if the document with current id and name was added before=20

4) if yes then set field3 value to 1, else 2=20

5) add Document into indexWriter=20

=20

The 3rd point is difficult for me.

I do it to mark duplicated records with flag


------_=_NextPart_001_01C62C96.95043DBC--

From java-user-return-18803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 10:26:04 2006
Return-Path: <java-user-return-18803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64609 invoked from network); 8 Feb 2006 10:26:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 10:26:02 -0000
Received: (qmail 54451 invoked by uid 500); 8 Feb 2006 10:25:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54344 invoked by uid 500); 8 Feb 2006 10:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54333 invoked by uid 99); 8 Feb 2006 10:25:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 02:25:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 02:25:47 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Search on Keyword rather than Text?
Date: Wed, 8 Feb 2006 10:25:29 -0000
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE5B1A46@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search on Keyword rather than Text?
Thread-Index: AcYr0/C0ZQf4WYYIRdC7O2xpJV8YdwAxZPlQ
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Override QueryParser and intercept queries of specific fields producing
TermQuery instead of letting it be generated from the analyzed value
using the default parser. If you want to look for "New Yo" try also
creating a prefix query from the TermQuery.

Mike

www.ardentia.com the home of NetSearch
-----Original Message-----
From: Simon Porritt [mailto:simon.porritt@dealchecker.co.uk]=20
Sent: 07 February 2006 10:47
To: java-user@lucene.apache.org
Subject: Search on Keyword rather than Text?

Hello,

We have a document type for which we wish to create an index that may=20
contain spaces, and we don't want the values to be tokenized.  The data=20
is a list of cities.  We are currently creating the index using
Field.Text:

Field.Text("index", "New York")

...which of course means that the string is tokenized before being=20
indexed.  Running this search:

new yo

which translates to

index:new index:yo

returns New York amongst the results, as well as any cities starting=20
with 'yo' - not what we want.  For that search we want no results at=20
all.  In fact we want that search to translate to

index:"new yo"

where the whole of "new yo" is considered the search term.  Of course in

that example the presence of the quotes means that Lucene treats the=20
term as if it must exist in its entirety, which we also don't want!

It looked like the solution was to use Field.Keyword:

Field.Keyword("index", "New York")

but now we get no results on any search at all!

We use a SimpleAnalyser for creating the index and running the=20
searches.  If anyone has an idea that could steer us in the right=20
direction we would be most appreciative.

Thanks,

Simon


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 10:35:10 2006
Return-Path: <java-user-return-18804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69430 invoked from network); 8 Feb 2006 10:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 10:35:07 -0000
Received: (qmail 62160 invoked by uid 500); 8 Feb 2006 10:35:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62128 invoked by uid 500); 8 Feb 2006 10:35:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62117 invoked by uid 99); 8 Feb 2006 10:34:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 02:34:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 02:34:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D045233D33B; Wed,  8 Feb 2006 05:34:38 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id A821933D339
	for <java-user@lucene.apache.org>; Wed,  8 Feb 2006 05:34:35 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <dsc2f2$th5$1@sea.gmane.org>
References: <20060207125821.22794.qmail@web36115.mail.mud.yahoo.com> <2A0329BB-C0D6-4940-8872-116269FD893A@ehatchersolutions.com> <dsc2f2$th5$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2FF9479D-9F0A-4F32-81C6-E759BD81C8D1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Reindexing
Date: Wed, 8 Feb 2006 05:34:35 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry, I've no clue as I've never used Hibernate and thus never  
touched its Lucene support.

	Erik


On Feb 8, 2006, at 1:18 AM, Raul Raja Martinez wrote:

> Hi Eric, I'm in the same situation, I wouldn't normally ask  
> something related to hibernate here but I posted something similar  
> in the hibernate forums on Jan 16th but still haven't got any  
> response.
>
> http://forum.hibernate.org/viewtopic.php?t=954137&highlight=lucene
>
> It is really obvious that if they offer lucene indexing out of the  
> box with the hibernate release, people would have to index all  
> their persistent objects that were already in the database before.
>
> Any hint is highly appreciated.
>
> Erik Hatcher wrote:
>> You may likely get better response by posting in the Hibernate list.
>>     Erik
>> On Feb 7, 2006, at 7:58 AM, revati joshi wrote:
>>> Hello lucene members,
>>>                                      i'm the silent member of  
>>> this group.last week i had sent some query regarding  
>>> reindexing,but i dn't received any reply from any one.Still i'm  
>>> stuck up with the same problem of reindexing.
>>>   i hve completed with the reindexing code using hibernate  
>>> Lifecycle class but i don't know where and when to call this  
>>> class for reindexing purpose during updation or new creation of  
>>> any file in ur system.
>>>   I just want to know the precise procedure or method for this.
>>>   So plz do suggest some solution to this as early as possible.
>>>   Thanks for ur cooperation.
>>>   Byee for now.
>>>
>>>            ---------------------------------
>>>  Yahoo! Mail - Helps protect you from nasty viruses.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 12:22:25 2006
Return-Path: <java-user-return-18805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15711 invoked from network); 8 Feb 2006 12:22:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 12:22:24 -0000
Received: (qmail 95630 invoked by uid 500); 8 Feb 2006 12:22:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95595 invoked by uid 500); 8 Feb 2006 12:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95584 invoked by uid 99); 8 Feb 2006 12:22:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 04:22:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.137.212.28] (HELO basicbox6.server-home.net) (195.137.212.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 04:22:16 -0800
Received: from sleipnir2 (dslb-084-061-035-247.pools.arcor-ip.net [84.61.35.247])
	by basicbox6.server-home.net (Postfix) with ESMTP id 5D5A27181BF
	for <java-user@lucene.apache.org>; Wed,  8 Feb 2006 13:21:51 +0100 (CET)
From: "Klaus" <klaus@vommond.de>
To: <java-user@lucene.apache.org>
Subject: AW: Reindexing
Date: Wed, 8 Feb 2006 13:21:52 +0100
Message-ID: <000901c62caa$3e4fd6c0$6402a8c0@sleipnir2>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcYsm2MN54+t4fCnTg+eF6iCoBjvWAADdQ2w
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
In-Reply-To: <2FF9479D-9F0A-4F32-81C6-E759BD81C8D1@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

you have to index all object already contained in the database? Then there
is no other way then fetching all objects from the database and index them. 


On Feb 8, 2006, at 1:18 AM, Raul Raja Martinez wrote:

> Hi Eric, I'm in the same situation, I wouldn't normally ask  
> something related to hibernate here but I posted something similar  
> in the hibernate forums on Jan 16th but still haven't got any  
> response.
>
> http://forum.hibernate.org/viewtopic.php?t=954137&highlight=lucene
>
> It is really obvious that if they offer lucene indexing out of the  
> box with the hibernate release, people would have to index all  
> their persistent objects that were already in the database before.
>
> Any hint is highly appreciated.
>
> Erik Hatcher wrote:
>> You may likely get better response by posting in the Hibernate list.
>>     Erik
>> On Feb 7, 2006, at 7:58 AM, revati joshi wrote:
>>> Hello lucene members,
>>>                                      i'm the silent member of  
>>> this group.last week i had sent some query regarding  
>>> reindexing,but i dn't received any reply from any one.Still i'm  
>>> stuck up with the same problem of reindexing.
>>>   i hve completed with the reindexing code using hibernate  
>>> Lifecycle class but i don't know where and when to call this  
>>> class for reindexing purpose during updation or new creation of  
>>> any file in ur system.
>>>   I just want to know the precise procedure or method for this.
>>>   So plz do suggest some solution to this as early as possible.
>>>   Thanks for ur cooperation.
>>>   Byee for now.
>>>
>>>            ---------------------------------
>>>  Yahoo! Mail - Helps protect you from nasty viruses.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 12:30:49 2006
Return-Path: <java-user-return-18806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21068 invoked from network); 8 Feb 2006 12:30:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 12:30:46 -0000
Received: (qmail 12531 invoked by uid 500); 8 Feb 2006 12:30:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12501 invoked by uid 500); 8 Feb 2006 12:30:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12490 invoked by uid 99); 8 Feb 2006 12:30:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 04:30:39 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Daniel.Pfeifer@tradedoubler.com designates 212.247.9.195 as permitted sender)
Received: from [212.247.9.195] (HELO smtp.tradedoubler.com) (212.247.9.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 04:30:38 -0800
Received: from EXHQ01.root.tradedoubler.com ([192.168.11.57]) by smtp.tradedoubler.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 8 Feb 2006 13:30:16 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: JVM Crash in Lucene
Date: Wed, 8 Feb 2006 13:30:15 +0100
Message-ID: <4BA24A13BFC8B24EBD64FCA6525003446BA0FD@EXHQ01.root.tradedoubler.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: JVM Crash in Lucene
Thread-Index: AcYsffr0ac3OeNI/QdG7dSQ8FyqI2gALUkmA
From: "Daniel Pfeifer" <Daniel.Pfeifer@tradedoubler.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2006 12:30:16.0276 (UTC) FILETIME=[6A665940:01C62CAB]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I resolved this issue for the time-being by adding following parameter
to the command:

-XX:CompileCommand=3Dexclude,org/apache/lucene/index/IndexReader$1,doBody=


/Daniel

-----Original Message-----
From: Daniel Pfeifer [mailto:Daniel.Pfeifer@tradedoubler.com]=20
Sent: den 8 februari 2006 08:05
To: java-user@lucene.apache.org
Subject: Re: JVM Crash in Lucene

Got the same problem. Running 1.5.0_05 on Solaris 10. I've seen that
this issue has been reported on Sun's forum but no answer yet.

Another interesting thing which I noticed. We previously used the
RAMDirectory and we never got JVM-crashes when using RAMDirectory.
However, once we started using FSDirectory the JVM started to crash.

I tested adding -Xcomp parameter and the JVM has not crashed yet. But
then again, the SearchService hasn't been up long enough to be sure that
it solved the problem.

/Daniel

> You also might try -Xbatch or -Xcomp to see if that fixes it (or
> reproduces it faster).
>
> Here's a great list of JVM options:
> http://blogs.sun.com/roller/resources/watt/jvm-options-list.html
>
> -Yonik
>
> On 12/11/05, Yonik Seeley <yseeley@gmail.com> wrote:
> > Sounds like it's a hotspot bug.
> > AFAIK, hotspot doesn't just compile a method once... it can do
> > optimization over time.
> >
> > To work around it, have you tried pre previous version: 1.5_05?
> > It's possible it's a fairly new bug.  We've been running with that
> > version and Lucene 1.4.3 without problems (on Opteron, RHEL4).
> >
> > You could also try the latest Lucene 1.9 to see if that changes
enough
> > to avoid the bug.
> >
> > -Yonik
> >
> > On 12/11/05, Dan Gould <dlg@cs.brown.edu> wrote:
> > > First, thank you Chris, Yonik, and Dan for your ideas as to what
might be
> > > causing this problem.
> > >
> > > I tried moving things around so that the IndexReader is still open
when it
> > > calls
TermFreqVector.getTerms()/TermFreqVector.getTermFrequencies().  It
> > > didn't seem to make any difference.
> > >
> > > I also tried running Java with the flags:
> > > -Xmx2048m -XX:MaxPermSize=3D200m
> > > (the box has 4GB of RAM) and it still crashes.  It's hard to tell,
but the
> > > program does seem to run for a lot longer (maybe 10 hours), but
that could
> > > just be randomness in my tests.
> > >
> > > The JVM always seems to crash with
> > >
> > >   Current CompileTask:
> > >   opto:1836
> > >   org.apache.lucene.index.IndexReader$1.doBody()Ljava/lang/Object;
> > >   (99 bytes)
> > >
> > > which in the Lucene source is:
> > >
> > >    private static IndexReader open(final Directory directory,
final boolean
> > > closeDirectory) throws IOException {
> > >      synchronized (directory) {                   // in- &
inter-process
> > > sync
> > >        return (IndexReader)new Lock.With(
> > >            directory.makeLock(IndexWriter.COMMIT_LOCK_NAME),
> > >            IndexWriter.COMMIT_LOCK_TIMEOUT) {
> > >            public Object doBody() throws IOException {
> > >              SegmentInfos infos =3D new SegmentInfos();
> > >              infos.read(directory);
> > >              if (infos.size() =3D=3D 1) {             // index is
optimized
> > >                return SegmentReader.get(infos, infos.info(0),
> > > closeDirectory);
> > >              }
> > >              IndexReader[] readers =3D new
IndexReader[infos.size()];
> > >              for (int i =3D 0; i < infos.size(); i++)
> > >                readers[i] =3D SegmentReader.get(infos.info(i));
> > >              return new MultiReader(directory, infos,
closeDirectory,
> > > readers);
> > >
> > >            }
> > >          }.run();
> > >      }
> > >    }
> > >
> > > that's definitely a non-trivial bit of code, but I can't imagine
that
> > > there's a problem that I'm seeing that no one else else.
Moreover, that
> > > code gets run hundreds or even thousands of times before it
crashes, so I
> > > don't image it's being HotSpot-compiled for the first time.
> > >
> > > I'm running the 1.4.3 release and the 1.5.0_06-b05 JVM on Centos
Linux on
> > > an Opteron.
> > >
> > > Any further guesses?
> > >
> > > Thank you all very much,
> > > Dan
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 12:50:12 2006
Return-Path: <java-user-return-18807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31838 invoked from network); 8 Feb 2006 12:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 12:50:11 -0000
Received: (qmail 42104 invoked by uid 500); 8 Feb 2006 12:50:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42082 invoked by uid 500); 8 Feb 2006 12:49:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42071 invoked by uid 99); 8 Feb 2006 12:49:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 04:49:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.93.125.162] (HELO cpanel37.gzo.com) (69.93.125.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 04:49:58 -0800
Received: from home-pool7-2.com2com.ru ([195.98.167.2] helo=pb)
	by cpanel37.gzo.com with esmtpa (Exim 4.52)
	id 1F6olL-0003g1-A2
	for java-user@lucene.apache.org; Wed, 08 Feb 2006 06:49:36 -0600
From: "Pasha Bizhan" <lucene-list@lucenedotnet.com>
To: <java-user@lucene.apache.org>
Subject: RE: Duplicates recods in index
Date: Wed, 8 Feb 2006 15:56:41 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
In-Reply-To: <41D8E340E5045F4ABA553E4524E3D379294116@orbitsoft.orbitscripts>
Thread-Index: AcYsln6eSVC7JxUBR9+yzswmA5TlDQAGEZwA
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpanel37.gzo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - lucenedotnet.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060208124959.29EE910FB008@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: Anton Potehin [mailto:anton@orbita1.ru] 
> 1) create Document object 
> 
> 2) add 5 fields into Document (id, name, field1, field2, 
> field3). All fields are stored, indexed and tokenized 
> 
> 3) check if the document with current id and name was added before 

Just perform the search with given id and name values. 
String query = "+id:(" + doc.get("id") + ") +name:(" + doc.get("name") +
")";
 
Pasha Bizhan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 13:20:40 2006
Return-Path: <java-user-return-18808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58726 invoked from network); 8 Feb 2006 13:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 13:20:40 -0000
Received: (qmail 11668 invoked by uid 500); 8 Feb 2006 13:20:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11643 invoked by uid 500); 8 Feb 2006 13:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11632 invoked by uid 99); 8 Feb 2006 13:20:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 05:20:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 05:20:31 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1AB7033D113; Wed,  8 Feb 2006 08:20:11 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id D347633CBDE
	for <java-user@lucene.apache.org>; Wed,  8 Feb 2006 08:19:24 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43E92A9B.1020109@nuix.com.au>
References: <43E839B5.60300@nuix.com.au> <5ACC7DF3-B9C0-4781-B7BA-20F374ED0B9F@ehatchersolutions.com> <43E92A9B.1020109@nuix.com.au>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <56D4B35E-3FC0-44A0-A109-0AEAA72E5230@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Queries not derived from the text index
Date: Wed, 8 Feb 2006 08:19:24 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 7, 2006, at 6:17 PM, Daniel Noll wrote:
> So a user might want to enter something like this:
>
>     text:camel AND tag:zoo
>
> In this case we would want a real FieldQuery object for the  
> text:camel portion, and a non-Lucene Query instance for the  
> "tag:zoo" portion which actually queries the Tags table in the  
> database instead of the text index.
>
> This is a simple example, the user might want to say:
>
>     text:camel AND (tag:zoo OR tag:desert)
>
> This kind of logic could be done, as mentioned, using an OrFilter.  
> However, there is one more case which can't be done using tricks  
> with filters:
>
>     (text:camel AND tag:zoo) OR (text:fish AND tag:aquarium)
>
> If we were to make these work as an actual Query, then the user is  
> completely free to enter what they want.

One interesting option is to subclass QueryParser and override  
getFieldQuery.  When the field is "tag", return a FilteredQuery (see  
trunk codebase, or the nightly 1.9 binaries) using a Filter that  
interfaces with your database.  Caching of the filters would be  
desirable for performance reasons.

>> It's certainly feasible to build a custom parser (JavaCC or  
>> otherwise) that does whatever you want, but that can be quite a  
>> complex endeavor.
>
> Actually, we don't need to change the syntax.  Our plan would be to  
> override the getFieldQuery method on QueryParser in order to drop  
> our own Query class in on top of where a "real" field query would  
> have been.

Instead of a completely custom Query, use a FilteredQuery with a  
custom Filter.

> Incidentally, we already override QueryParser in order to perform a  
> couple of boolean queries which Lucene for some reason doesn't like.
>
> For example:
>
>     NOT text:camel
>
> We change that on the fly to be like "dummy:1 NOT text:camel" where  
> "dummy" is just a field which exists on every document and always  
> contains "1"... a cheap trick, but it works.

In the latest codebase, there is a MatchAllDocsQuery that can be used  
in this case.  I also have implemented this sort of thing with a  
custom query parser for a client.

> Actually, if it turns out we can make Query instances that don't  
> depend on the text index, then we can fake this a little better.

I'm sure it's possible to create a Query that has nothing to do with  
the index, but I think the FilteredQuery is an easier and probably  
sufficient first attempt.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 15:21:22 2006
Return-Path: <java-user-return-18809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27030 invoked from network); 8 Feb 2006 15:21:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 15:21:22 -0000
Received: (qmail 39553 invoked by uid 500); 8 Feb 2006 15:21:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39528 invoked by uid 500); 8 Feb 2006 15:21:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39517 invoked by uid 99); 8 Feb 2006 15:21:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 07:21:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 07:21:14 -0800
Received: from shivani [61.246.2.159] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id ACF12A30082; Wed, 08 Feb 2006 20:53:29 +0530
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: Using Range Queries
Date: Wed, 8 Feb 2006 20:50:18 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0003_01C62CF1.71C64EC0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYswysninXHMQZQTAyTzPHIIg2fXw==
Message-Id: <200602082053890.SM01284@shivani>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0003_01C62CF1.71C64EC0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi,

 

I am trying to search across some documents and have min and max experience,
min and max ctc and email as some of the search fields. I have problem using
the Range Query.

The problem is as follows. If I am trying to search for documents with exp
between 0 to 9, I get 15 hits, assuming that all 15 documents are with exp
between 3 and 8, but if I change my range to 0 to 20, I do not get any
results. Seems odd to me.anything between 0 to 9 is also between 0 to 20.

Now, if I change my range to 0 to 90, I get all 15 records again.

 

I guess is that somehow the code is not taking my range as numerals but is
probably doing string compare.

 

The code snipped is listed below.

 

 

Any help will be much appreciated.

 

Thanks in advance.

 

 

 

BooleanQuery documentSearchQuery = new BooleanQuery();

.

 

if (minExperience >= 0 && maxExperience >= 0)

            {

                queryExperience = new RangeQuery(new
Term(IndexerColumns.experience, String.valueOf(minExperience)), new Term(

                        IndexerColumns.experience,
String.valueOf(maxExperience)), true);

 

                documentSearchQuery.add(queryExperience, true, false);

            }

 

            if (minCtc >= 0 && maxCtc >= 0)

            {

                queryCtc = new RangeQuery(new Term(IndexerColumns.ctc,
String.valueOf(minCtc)), new Term(IndexerColumns.ctc,

                        String.valueOf(maxCtc)), true);

 

                documentSearchQuery.add(queryCtc, true, false);

            }

 

if (emailId != null && !emailId.trim().equals(""))

            {

 

                try

                {

                    queryEmailId =
QueryParser.parse(getQueryString(criteriaForTermFields, emailId),

                            IndexerColumns.emailId, new StandardAnalyzer());

                } catch (ParseException e2)

                {

                    e2.printStackTrace();

                }

 

                documentSearchQuery.add(queryEmailId, true, false);

 

            }

 

 

Hits hits = null;

                try

                {

                    hits = indexsearcher.search(documentSearchQuery);

                } catch (IOException e3)

                {

                    e3.printStackTrace();

                    throw new Error("Exception in search().." +
e3.getMessage());

                }

 

 

 

     

Regards,

Shivani

 

 


------=_NextPart_000_0003_01C62CF1.71C64EC0--



From java-user-return-18810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 15:29:06 2006
Return-Path: <java-user-return-18810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30994 invoked from network); 8 Feb 2006 15:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 15:29:06 -0000
Received: (qmail 63782 invoked by uid 500); 8 Feb 2006 15:28:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63759 invoked by uid 500); 8 Feb 2006 15:28:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63745 invoked by uid 99); 8 Feb 2006 15:28:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 07:28:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 07:28:57 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using Range Queries
Date: Wed, 8 Feb 2006 15:28:34 -0000
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE5B1AFA@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using Range Queries
Thread-Index: AcYswysninXHMQZQTAyTzPHIIg2fXwAAI2VQ
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You need to encode the numbers by padding to the left or another method,
we do this we know what fields are numerics and extend QueryParser to
encode the fields for searching. We also decode the number on display
below is the functions we use, the tricky bit is getting negative
numbers to work correctly and being able to mix decimals with integers.

Hope this helps

Mike

www.ardentia.com the home of NetSearch

	public static String encode(long num) {
		String hex =3D Long.toHexString(num < 0 ? Long.MAX_VALUE -
(0xffffffffffffffffL ^ num) : num);
		hex =3D (num < 0 ? "N" : "P") +
"0000000000000000".substring(0, 16 - hex.length()) + hex;
		return hex;
	}

	public static String encode(double num) {
		double temp =3D Math.floor(num);
		if (temp > Long.MAX_VALUE || temp < Long.MIN_VALUE) {
			return null;
		}
		if (temp =3D=3D num) {
			return encode(new Double(temp).longValue());
		} else if (temp < num) {
			return encode(new Double(temp).longValue()) +
Double.toString(num - temp).substring(1);
		}
		return encode(new Double(temp - 1).longValue()) +
Double.toString(temp - num).substring(1);
	}

	private static long decodeLong(String hex) {
		long num =3D Long.parseLong(hex.substring(1, 17), 16);
		return hex.charAt(0) =3D=3D 'N' ? (Long.MAX_VALUE - num) ^
0xffffffffffffffffL : num;
	}

	public static double decode(String strnum) {
		String[] parts =3D strnum.split("\\.");
		double left =3D new
Long(decodeLong(parts[0])).doubleValue();
		if (parts.length =3D=3D 1) {
			return left;
		}
		double decimal =3D Double.parseDouble("0." + parts[1]);
		return strnum.charAt(0) =3D=3D 'P' ? left + decimal : (left
+ 1) - (1 - decimal);
	}

-----Original Message-----
From: Shivani Sawhney [mailto:shivani@netedgecomputing.com]=20
Sent: 08 February 2006 15:20
To: java-user@lucene.apache.org
Subject: Using Range Queries

Hi,

=20

I am trying to search across some documents and have min and max
experience,
min and max ctc and email as some of the search fields. I have problem
using
the Range Query.

The problem is as follows. If I am trying to search for documents with
exp
between 0 to 9, I get 15 hits, assuming that all 15 documents are with
exp
between 3 and 8, but if I change my range to 0 to 20, I do not get any
results. Seems odd to me.anything between 0 to 9 is also between 0 to
20.

Now, if I change my range to 0 to 90, I get all 15 records again.

=20

I guess is that somehow the code is not taking my range as numerals but
is
probably doing string compare.

=20

The code snipped is listed below.

=20

=20

Any help will be much appreciated.

=20

Thanks in advance.

=20

=20

=20

BooleanQuery documentSearchQuery =3D new BooleanQuery();

.

=20

if (minExperience >=3D 0 && maxExperience >=3D 0)

            {

                queryExperience =3D new RangeQuery(new
Term(IndexerColumns.experience, String.valueOf(minExperience)), new
Term(

                        IndexerColumns.experience,
String.valueOf(maxExperience)), true);

=20

                documentSearchQuery.add(queryExperience, true, false);

            }

=20

            if (minCtc >=3D 0 && maxCtc >=3D 0)

            {

                queryCtc =3D new RangeQuery(new Term(IndexerColumns.ctc,
String.valueOf(minCtc)), new Term(IndexerColumns.ctc,

                        String.valueOf(maxCtc)), true);

=20

                documentSearchQuery.add(queryCtc, true, false);

            }

=20

if (emailId !=3D null && !emailId.trim().equals(""))

            {

=20

                try

                {

                    queryEmailId =3D
QueryParser.parse(getQueryString(criteriaForTermFields, emailId),

                            IndexerColumns.emailId, new
StandardAnalyzer());

                } catch (ParseException e2)

                {

                    e2.printStackTrace();

                }

=20

                documentSearchQuery.add(queryEmailId, true, false);

=20

            }

=20

=20

Hits hits =3D null;

                try

                {

                    hits =3D indexsearcher.search(documentSearchQuery);

                } catch (IOException e3)

                {

                    e3.printStackTrace();

                    throw new Error("Exception in search().." +
e3.getMessage());

                }

=20

=20

=20

    =20

Regards,

Shivani

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 15:30:02 2006
Return-Path: <java-user-return-18811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31395 invoked from network); 8 Feb 2006 15:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 15:30:01 -0000
Received: (qmail 66065 invoked by uid 500); 8 Feb 2006 15:29:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66034 invoked by uid 500); 8 Feb 2006 15:29:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66023 invoked by uid 99); 8 Feb 2006 15:29:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 07:29:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of koji.sekiguchi@m4.dion.ne.jp designates 219.125.112.3 as permitted sender)
Received: from [219.125.112.3] (HELO nm05omta053.dion.ne.jp) (219.125.112.3)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 08 Feb 2006 07:29:54 -0800
Received: from sekiguchi ([59.135.90.18])
	by nm05mta.dion.ne.jp
	id <20060209002932690.MA36.81BDA80@nm05mta.dion.ne.jp>;
	Thu, 9 Feb 2006 00:29:32 +0900
From: "Koji Sekiguchi" <koji.sekiguchi@m4.dion.ne.jp>
To: <java-user@lucene.apache.org>
Subject: RE: Using Range Queries
Date: Thu, 9 Feb 2006 00:29:31 +0900
Message-ID: <PKEIKOCKCHNIIHNECPCCAEICCDAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
In-Reply-To: <200602082053890.SM01284@shivani>
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I guess is that somehow the code is not taking my range as numerals but is
> probably doing string compare.

Right. We should treat fields as strings.
Use "00" to "20" instead of 0 to 20.
When doing this, the term values which are indexed
should be "00", "01", ...

Thanks,

Koji

> -----Original Message-----
> From: Shivani Sawhney [mailto:shivani@netedgecomputing.com]
> Sent: Thursday, February 09, 2006 12:20 AM
> To: java-user@lucene.apache.org
> Subject: Using Range Queries
>
>
> Hi,
>
>
>
> I am trying to search across some documents and have min and max
> experience,
> min and max ctc and email as some of the search fields. I have
> problem using
> the Range Query.
>
> The problem is as follows. If I am trying to search for documents with exp
> between 0 to 9, I get 15 hits, assuming that all 15 documents are with exp
> between 3 and 8, but if I change my range to 0 to 20, I do not get any
> results. Seems odd to me.anything between 0 to 9 is also between 0 to 20.
>
> Now, if I change my range to 0 to 90, I get all 15 records again.
>
>
>
> I guess is that somehow the code is not taking my range as numerals but is
> probably doing string compare.
>
>
>
> The code snipped is listed below.
>
>
>
>
>
> Any help will be much appreciated.
>
>
>
> Thanks in advance.
>
>
>
>
>
>
>
> BooleanQuery documentSearchQuery = new BooleanQuery();
>
> .
>
>
>
> if (minExperience >= 0 && maxExperience >= 0)
>
>             {
>
>                 queryExperience = new RangeQuery(new
> Term(IndexerColumns.experience, String.valueOf(minExperience)), new Term(
>
>                         IndexerColumns.experience,
> String.valueOf(maxExperience)), true);
>
>
>
>                 documentSearchQuery.add(queryExperience, true, false);
>
>             }
>
>
>
>             if (minCtc >= 0 && maxCtc >= 0)
>
>             {
>
>                 queryCtc = new RangeQuery(new Term(IndexerColumns.ctc,
> String.valueOf(minCtc)), new Term(IndexerColumns.ctc,
>
>                         String.valueOf(maxCtc)), true);
>
>
>
>                 documentSearchQuery.add(queryCtc, true, false);
>
>             }
>
>
>
> if (emailId != null && !emailId.trim().equals(""))
>
>             {
>
>
>
>                 try
>
>                 {
>
>                     queryEmailId =
> QueryParser.parse(getQueryString(criteriaForTermFields, emailId),
>
>                             IndexerColumns.emailId, new
> StandardAnalyzer());
>
>                 } catch (ParseException e2)
>
>                 {
>
>                     e2.printStackTrace();
>
>                 }
>
>
>
>                 documentSearchQuery.add(queryEmailId, true, false);
>
>
>
>             }
>
>
>
>
>
> Hits hits = null;
>
>                 try
>
>                 {
>
>                     hits = indexsearcher.search(documentSearchQuery);
>
>                 } catch (IOException e3)
>
>                 {
>
>                     e3.printStackTrace();
>
>                     throw new Error("Exception in search().." +
> e3.getMessage());
>
>                 }
>
>
>
>
>
>
>
>
>
> Regards,
>
> Shivani
>
>
>
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 17:19:33 2006
Return-Path: <java-user-return-18812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97222 invoked from network); 8 Feb 2006 17:19:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 17:19:33 -0000
Received: (qmail 49519 invoked by uid 500); 8 Feb 2006 17:19:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49489 invoked by uid 500); 8 Feb 2006 17:19:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49458 invoked by uid 99); 8 Feb 2006 17:19:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 09:19:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 09:19:24 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 8 Feb 2006 09:19:02 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C62CD3.BC512D55"
Subject: RE: How to get mapping of query terms to number of their occurrences in a doc?
Date: Wed, 8 Feb 2006 09:18:53 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC24@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC24@ehost011-3.exch011.intermedia.net>
Thread-Topic: How to get mapping of query terms to number of their occurrences in a doc?
Thread-Index: AcYsRCeWe1wj43uASBe3NV/dMD2eCAAjgfcA
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC1C@ehost011-3.exch011.intermedia.net> <Pine.LNX.4.58.0602071604260.9474@hal.rescomp.berkeley.edu>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2006 17:19:02.0282 (UTC) FILETIME=[C1810EA0:01C62CD3]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62CD3.BC512D55
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Chris,
=20
That's what I did, for debugging.  The query is "biology", and here's =
what the API tells me for term frequencies:
biolog 15
biologi 31
biologist 4

I actually see 13 occurrences of "biologist" and "biologists", 64 =
occurrences of "biology", 27 occurrences of "biological".

I see "inform 22" but the actual count of the word "information" in the =
document is 33.  But "ioniz 7" is correct.

I don't see much correlation between what the API is telling me and what =
I see in the actual document.  Am I missing something?

Thanks

________________________________

From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: Tue 2/7/2006 4:10 PM
To: java-user@lucene.apache.org
Subject: Re: How to get mapping of query terms to number of their =
occurrences in a doc?




A cursory reading of your code looks ok ... stemming shouldn't be an =
issue
as long as your measure of success is comparing docs that match your
orriginal query with the counts you get out.

What i mean by that is that any stemming should have already been taken
care of when your query object was constructed (either by you manually, =
or
by QueryParser).  the direct equals comparisons you are dong should be
fine.

have you tried adding logging of the raw term field/text and the freq
counts you get back to see if that helps you spot the problem?


: Date: Mon, 6 Feb 2006 14:34:05 -0800
: From: Dmitry Goldenberg <dmitry.goldenberg@weblayers.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: How to get mapping of query terms to number of their =
occurrences
:     in a doc?
:
: Given a query, I want to be able to, for each query term, get the =
number of occurrences of the term.  I have tried what I'm including =
below and it does not seem to provide reliable results.  Seems to work =
fine with exact matching but as soon as stemming kicks in, all bets are =
off as to value of the number of occurrences returned.
:
: Any ideas, anyone?  Can this be written in a simpler and/or more =
efficient way?
: Thanks -
:
:       int totalOccurrences =3D 0;
:
:       reader =3D IndexReader.open(getDirectory(indexDirPath));
:       HashSet terms =3D new HashSet();
:       query.extractTerms(terms);
:
:       TermFreqVector[] tfvs =3D reader.getTermFreqVectors(docId);
:       if (tfvs !=3D null) {
:
:         // For each term frequency vector (i.e. for each field)
:         for (int i =3D 0; i < tfvs.length; i++) {
:           String field =3D tfvs[i].getField();
:           String[] strTerms =3D tfvs[i].getTerms();
:           int[] tfs =3D tfvs[i].getTermFrequencies();
:
:           if (strTerms !=3D null) {
:
:             // For each term in the query
:             for (Iterator iter =3D terms.iterator(); iter.hasNext();) =
{
:
:               Term term =3D (Term) iter.next();
:               // For each term in the vector
:               for (int j =3D 0; j < strTerms.length; j++) {
:
:                 // If found the query term among the vector terms
:                 if (field.equals(term.field()) && =
strTerms[j].equals(term.text())) {
:
:                   // Add the term frequency to the total
:                   totalOccurrences +=3D tfs[j];
:
:                 }
:               }
:             }
:           }
:         }
:       }
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C62CD3.BC512D55
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C62CD3.BC512D55--

From java-user-return-18813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 17:53:36 2006
Return-Path: <java-user-return-18813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14759 invoked from network); 8 Feb 2006 17:53:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 17:53:34 -0000
Received: (qmail 13569 invoked by uid 500); 8 Feb 2006 17:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13517 invoked by uid 500); 8 Feb 2006 17:53:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13492 invoked by uid 99); 8 Feb 2006 17:53:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 09:53:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 09:53:17 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Queries not derived from the text index
Date: Wed, 8 Feb 2006 11:51:49 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B291983B5@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Queries not derived from the text index
Thread-Index: AcYsOxQj0Y/jOSD+RVWUH9yzPN8xwgAnRF9g
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This may be a tangent, but for my filters and searches, I construct the
query with "+" and "-" and what not..   is this not the right way to do
this?    I haven't had to extend or write any special AND or OR classes,
I just write the query and search the once.     Any advantage to writing
Filter subclasses?

-----Original Message-----
From: Daniel Noll [mailto:daniel@nuix.com.au]=20
Sent: Tuesday, February 07, 2006 5:18 PM
To: java-user@lucene.apache.org
Subject: Re: Queries not derived from the text index

Erik Hatcher wrote:
>=20
> On Feb 7, 2006, at 1:09 AM, Daniel Noll wrote:
>> I've got an unusual (if not crazy) question about implementing custom

>> queries.
>>
>> Basically we have a UI where a user can enter a query and then select

>> a bunch of filters to be applied to the query.  These filters are=20
>> currently implemented using a fairly simple wrapper around Lucene's=20
>> own Filter class.
>>
>> Now we have one particular customer who says he wants to AND and OR=20
>> these filters in various combinations.  Now, I know that this is=20
>> possible on the model side, because I've already created AndFilter
and=20
>> OrFilter classes to do this sort of thing.  However, the view of the=20
>> user interface would be impossible to keep simple if I were to bulk
it=20
>> up to support this kind of filtering.
>=20
> One thing that may be of use is the ChainedFilter:
>=20
>
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/miscellaneous/
src/java/org/apache/lucene/misc/ChainedFilter.java=20

Looks very similar to our own AndFilter/OrFilter/etc, just wrapping=20
everything into one class instead of separating it out.  Actually, with=20
our stuff we have hidden everything behind a FilterUtils.and() method=20
which also handles special cases like not making it AND if there are 0=20
or 1 filters in the list.

Either way we have that much working already. :-)

>> Is it possible to customise the QueryParser so that it returns Query=20
>> instances that have no relationship to the text index whatsoever?
For=20
>> instance, many of our existing filters build their bitsets
exclusively=20
>> using a database, and we would need to keep this as-is because we=20
>> don't want to modify the text index itself.
>=20
> I don't really follow what you're after here.  Could you give a
concrete=20
> example of what you're after with "query" parsing?

Here's an example which is very much like what we need to do.

Take a text index with a few gigs of data in it.  For simplicity, let's=20
say it has a single field called "text".  We allow the user to annotate=20
the documents in this text index.

We keep the user's annotations outside of the text index because:

   1. Changing the contents of a document in the text index is
      non-trivial, requiring deleting and re-adding the document,
      and if the document contains unstored fields this is extremely
      difficult;

   2. It's helpful to write-protect a text index in order to be more
      certain that nobody has tampered with the text index after it was
      created; and

   3. It allows tricks like multiple users updating the annotations at
      the same time, and seeing each others' changes.

So a user might want to enter something like this:

     text:camel AND tag:zoo

In this case we would want a real FieldQuery object for the text:camel=20
portion, and a non-Lucene Query instance for the "tag:zoo" portion which

actually queries the Tags table in the database instead of the text
index.

This is a simple example, the user might want to say:

     text:camel AND (tag:zoo OR tag:desert)

This kind of logic could be done, as mentioned, using an OrFilter.=20
However, there is one more case which can't be done using tricks with=20
filters:

     (text:camel AND tag:zoo) OR (text:fish AND tag:aquarium)

If we were to make these work as an actual Query, then the user is=20
completely free to enter what they want.

> It's certainly feasible to build a custom parser (JavaCC or otherwise)

> that does whatever you want, but that can be quite a complex endeavor.

Actually, we don't need to change the syntax.  Our plan would be to=20
override the getFieldQuery method on QueryParser in order to drop our=20
own Query class in on top of where a "real" field query would have been.

Incidentally, we already override QueryParser in order to perform a=20
couple of boolean queries which Lucene for some reason doesn't like.

For example:

     NOT text:camel

We change that on the fly to be like "dummy:1 NOT text:camel" where=20
"dummy" is just a field which exists on every document and always=20
contains "1"... a cheap trick, but it works.  Actually, if it turns out=20
we can make Query instances that don't depend on the text index, then we

can fake this a little better.

Daniel



--=20

Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 18:05:01 2006
Return-Path: <java-user-return-18814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20727 invoked from network); 8 Feb 2006 18:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 18:05:00 -0000
Received: (qmail 38741 invoked by uid 500); 8 Feb 2006 18:04:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38334 invoked by uid 500); 8 Feb 2006 18:04:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38311 invoked by uid 99); 8 Feb 2006 18:04:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 10:04:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 10:04:41 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C53105B76C; Wed,  8 Feb 2006 10:04:20 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BE2A77F403
	for <java-user@lucene.apache.org>; Wed,  8 Feb 2006 10:04:20 -0800 (PST)
Date: Wed, 8 Feb 2006 10:04:20 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: How to get mapping of query terms to number of their occurrences
 in a doc?
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC24@ehost011-3.exch011.intermedia.net>
Message-ID: <Pine.LNX.4.58.0602080952440.17683@hal.rescomp.berkeley.edu>
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC1C@ehost011-3.exch011.intermedia.net>
 <Pine.LNX.4.58.0602071604260.9474@hal.rescomp.berkeley.edu>
 <FAB00A8DC59FAB42B13C2B3B0F687701E7CC24@ehost011-3.exch011.intermedia.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: That's what I did, for debugging.  The query is "biology", and here's
: what the API tells me for term frequencies:
: biolog 15
: biologi 31
: biologist 4
:
: I actually see 13 occurrences of "biologist" and "biologists", 64
: occurrences of "biology", 27 occurrences of "biological".
:
: I see "inform 22" but the actual count of the word "information" in the
: document is 33.  But "ioniz 7" is correct.

I think I missunderstood what you ment when you said the counts don't
match up.  Are you comparing the number you get from that code with the
number of times you personally see the word in the source document before
it has been analyzed?

If so, then there could be a couple of things going on ... i would start
by using a tool like Luke to see the actual lists of Terms for each doc --
there may be something else your analyzer is doing that you don't realize.

It's also possible that you are hitting the maxFieldLength in the
IndexWriter ... when that happens IndexWriter throws away any remaining
tokens, so if your documenst are really large.

Lastly, I would add a *lot* more debugging to your code.  Print out the
contents of "terms", when you loop over "tfvs" print out the field and the
full list of strTerms, in the inner most loop when you incriment the
count, print out the field/text/and count.

that's the best advise i have for spotting what's wrong.



: ________________________________
:
: From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
: Sent: Tue 2/7/2006 4:10 PM
: To: java-user@lucene.apache.org
: Subject: Re: How to get mapping of query terms to number of their occurrences in a doc?
:
:
:
:
: A cursory reading of your code looks ok ... stemming shouldn't be an issue
: as long as your measure of success is comparing docs that match your
: orriginal query with the counts you get out.
:
: What i mean by that is that any stemming should have already been taken
: care of when your query object was constructed (either by you manually, or
: by QueryParser).  the direct equals comparisons you are dong should be
: fine.
:
: have you tried adding logging of the raw term field/text and the freq
: counts you get back to see if that helps you spot the problem?
:
:
: : Date: Mon, 6 Feb 2006 14:34:05 -0800
: : From: Dmitry Goldenberg <dmitry.goldenberg@weblayers.com>
: : Reply-To: java-user@lucene.apache.org
: : To: java-user@lucene.apache.org
: : Subject: How to get mapping of query terms to number of their occurrences
: :     in a doc?
: :
: : Given a query, I want to be able to, for each query term, get the number of occurrences of the term.  I have tried what I'm including below and it does not seem to provide reliable results.  Seems to work fine with exact matching but as soon as stemming kicks in, all bets are off as to value of the number of occurrences returned.
: :
: : Any ideas, anyone?  Can this be written in a simpler and/or more efficient way?
: : Thanks -
: :
: :       int totalOccurrences = 0;
: :
: :       reader = IndexReader.open(getDirectory(indexDirPath));
: :       HashSet terms = new HashSet();
: :       query.extractTerms(terms);
: :
: :       TermFreqVector[] tfvs = reader.getTermFreqVectors(docId);
: :       if (tfvs != null) {
: :
: :         // For each term frequency vector (i.e. for each field)
: :         for (int i = 0; i < tfvs.length; i++) {
: :           String field = tfvs[i].getField();
: :           String[] strTerms = tfvs[i].getTerms();
: :           int[] tfs = tfvs[i].getTermFrequencies();
: :
: :           if (strTerms != null) {
: :
: :             // For each term in the query
: :             for (Iterator iter = terms.iterator(); iter.hasNext();) {
: :
: :               Term term = (Term) iter.next();
: :               // For each term in the vector
: :               for (int j = 0; j < strTerms.length; j++) {
: :
: :                 // If found the query term among the vector terms
: :                 if (field.equals(term.field()) && strTerms[j].equals(term.text())) {
: :
: :                   // Add the term frequency to the total
: :                   totalOccurrences += tfs[j];
: :
: :                 }
: :               }
: :             }
: :           }
: :         }
: :       }
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
:
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 19:19:47 2006
Return-Path: <java-user-return-18815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59522 invoked from network); 8 Feb 2006 19:19:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 19:19:46 -0000
Received: (qmail 85222 invoked by uid 500); 8 Feb 2006 19:19:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85193 invoked by uid 500); 8 Feb 2006 19:19:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85182 invoked by uid 99); 8 Feb 2006 19:19:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 11:19:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 11:19:38 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 8 Feb 2006 11:19:17 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C62CE4.8C20A64E"
Subject: RE: How to get mapping of query terms to number of their occurrences in a doc?
Date: Wed, 8 Feb 2006 11:17:11 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC25@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC25@ehost011-3.exch011.intermedia.net>
Thread-Topic: How to get mapping of query terms to number of their occurrences in a doc?
Thread-Index: AcYs2ioIzqH0yEM6Q/qM0BDOPFa67QAChjlF
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC1C@ehost011-3.exch011.intermedia.net> <Pine.LNX.4.58.0602071604260.9474@hal.rescomp.berkeley.edu> <FAB00A8DC59FAB42B13C2B3B0F687701E7CC24@ehost011-3.exch011.intermedia.net> <Pine.LNX.4.58.0602080952440.17683@hal.rescomp.berkeley.edu>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2006 19:19:17.0688 (UTC) FILETIME=[8E38A380:01C62CE4]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62CE4.8C20A64E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Duh! Bingo! Mistery solved. I should have thought of this :)
The discrepancies come in with larger documents, definitely > 10K terms =
which is Lucene's default maxFieldLength.
=20
Thanks for your help, Chris
=20
- Dmitry

________________________________

From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: Wed 2/8/2006 10:04 AM
To: java-user@lucene.apache.org
Subject: RE: How to get mapping of query terms to number of their =
occurrences in a doc?




: That's what I did, for debugging.  The query is "biology", and here's
: what the API tells me for term frequencies:
: biolog 15
: biologi 31
: biologist 4
:
: I actually see 13 occurrences of "biologist" and "biologists", 64
: occurrences of "biology", 27 occurrences of "biological".
:
: I see "inform 22" but the actual count of the word "information" in =
the
: document is 33.  But "ioniz 7" is correct.

I think I missunderstood what you ment when you said the counts don't
match up.  Are you comparing the number you get from that code with the
number of times you personally see the word in the source document =
before
it has been analyzed?

If so, then there could be a couple of things going on ... i would start
by using a tool like Luke to see the actual lists of Terms for each doc =
--
there may be something else your analyzer is doing that you don't =
realize.

It's also possible that you are hitting the maxFieldLength in the
IndexWriter ... when that happens IndexWriter throws away any remaining
tokens, so if your documenst are really large.

Lastly, I would add a *lot* more debugging to your code.  Print out the
contents of "terms", when you loop over "tfvs" print out the field and =
the
full list of strTerms, in the inner most loop when you incriment the
count, print out the field/text/and count.

that's the best advise i have for spotting what's wrong.



: ________________________________
:
: From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
: Sent: Tue 2/7/2006 4:10 PM
: To: java-user@lucene.apache.org
: Subject: Re: How to get mapping of query terms to number of their =
occurrences in a doc?
:
:
:
:
: A cursory reading of your code looks ok ... stemming shouldn't be an =
issue
: as long as your measure of success is comparing docs that match your
: orriginal query with the counts you get out.
:
: What i mean by that is that any stemming should have already been =
taken
: care of when your query object was constructed (either by you =
manually, or
: by QueryParser).  the direct equals comparisons you are dong should be
: fine.
:
: have you tried adding logging of the raw term field/text and the freq
: counts you get back to see if that helps you spot the problem?
:
:
: : Date: Mon, 6 Feb 2006 14:34:05 -0800
: : From: Dmitry Goldenberg <dmitry.goldenberg@weblayers.com>
: : Reply-To: java-user@lucene.apache.org
: : To: java-user@lucene.apache.org
: : Subject: How to get mapping of query terms to number of their =
occurrences
: :     in a doc?
: :
: : Given a query, I want to be able to, for each query term, get the =
number of occurrences of the term.  I have tried what I'm including =
below and it does not seem to provide reliable results.  Seems to work =
fine with exact matching but as soon as stemming kicks in, all bets are =
off as to value of the number of occurrences returned.
: :
: : Any ideas, anyone?  Can this be written in a simpler and/or more =
efficient way?
: : Thanks -
: :
: :       int totalOccurrences =3D 0;
: :
: :       reader =3D IndexReader.open(getDirectory(indexDirPath));
: :       HashSet terms =3D new HashSet();
: :       query.extractTerms(terms);
: :
: :       TermFreqVector[] tfvs =3D reader.getTermFreqVectors(docId);
: :       if (tfvs !=3D null) {
: :
: :         // For each term frequency vector (i.e. for each field)
: :         for (int i =3D 0; i < tfvs.length; i++) {
: :           String field =3D tfvs[i].getField();
: :           String[] strTerms =3D tfvs[i].getTerms();
: :           int[] tfs =3D tfvs[i].getTermFrequencies();
: :
: :           if (strTerms !=3D null) {
: :
: :             // For each term in the query
: :             for (Iterator iter =3D terms.iterator(); =
iter.hasNext();) {
: :
: :               Term term =3D (Term) iter.next();
: :               // For each term in the vector
: :               for (int j =3D 0; j < strTerms.length; j++) {
: :
: :                 // If found the query term among the vector terms
: :                 if (field.equals(term.field()) && =
strTerms[j].equals(term.text())) {
: :
: :                   // Add the term frequency to the total
: :                   totalOccurrences +=3D tfs[j];
: :
: :                 }
: :               }
: :             }
: :           }
: :         }
: :       }
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
:
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C62CE4.8C20A64E
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C62CE4.8C20A64E--

From java-user-return-18816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 21:11:19 2006
Return-Path: <java-user-return-18816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12793 invoked from network); 8 Feb 2006 21:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 21:10:46 -0000
Received: (qmail 51776 invoked by uid 500); 8 Feb 2006 21:10:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51678 invoked by uid 500); 8 Feb 2006 21:10:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51667 invoked by uid 99); 8 Feb 2006 21:10:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 13:10:39 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vgtaluskie@gmail.com designates 66.249.92.207 as permitted sender)
Received: from [66.249.92.207] (HELO uproxy.gmail.com) (66.249.92.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 13:10:39 -0800
Received: by uproxy.gmail.com with SMTP id m2so7322uge
        for <java-user@lucene.apache.org>; Wed, 08 Feb 2006 13:10:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=hYY1HtK1G1MV2hkmSIZUHEOv4UhslLUpH9rr8EiGdpGTajOyn2ndmEMS8/BGQWCvkD12G1qWq0dn9NcZHPiWFLEMf+2vLZmBnL3d8v6GBnoLmnrvxIn5/3VsfkAC9dKU+JBAFsXJUPPc6x0imI+8hoOHhkrPNPorCQyl0L41v3Y=
Received: by 10.49.95.19 with SMTP id x19mr643271nfl;
        Wed, 08 Feb 2006 13:10:17 -0800 (PST)
Received: by 10.49.23.1 with HTTP; Wed, 8 Feb 2006 13:10:17 -0800 (PST)
Message-ID: <2822350c0602081310p87b4e4cw77a6a6f98b04d320@mail.gmail.com>
Date: Wed, 8 Feb 2006 14:10:17 -0700
From: Vince Taluskie <vgtaluskie@gmail.com>
Reply-To: vgtaluskie@gmail.com
To: java-user@lucene.apache.org
Subject: scalability recommendations for large performance-intensive indexes
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5776_28463032.1139433017093"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5776_28463032.1139433017093
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

hello All,

I'm looking for some advice on how to improve scalability - we have a fairl=
y
large lucene index of 35M documents, max 1k document size (most much
smaller) and 14 fields.   We combine descriptive text together into a
"contents" field and search on that and have been very pleased with handlin=
g
almost 100 queries/sec at about 8-12ms for the average search.

Prior to that we had a common attribute for which about 50% of the docs had
one value and the rest had the other value and the boolean query slowed
response times very significantly.  We handled this by breaking up our
indexes so that the index only contained one attribute or the other and
eliminated the need for the boolean - this was a 7-8x improvement.

Now we're back to wanting to add another attribute to the documents for
which most of the docs will have one value and much fewer will have the
other and although it sounds so simple - my limited testing with an 85/15
ratio is showing another big hit on performance with the boolean.    A two
term boolean search without the attribute is about 7-8ms, adding the
attribute to the boolean search increases the elapsed time to 4x and 2x of
original for the 85% and 15% frequencies respective.

I had some hope that a QueryFilter would really help out but it turns out t=
o
be much much slower:  the 85% term ends up taking a whopping 336ms and the
15% term ends up around 65ms which is 40x and 8x slower than the original
8ms query speed without the additional attribute.

I have to ask if there's not a better way to handle the addition of an
common attribute with a few possible values across the index.  Any other
recommended approaches?

Thanks in advance,

Vince

------=_Part_5776_28463032.1139433017093--

From java-user-return-18817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 22:04:28 2006
Return-Path: <java-user-return-18817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45320 invoked from network); 8 Feb 2006 22:04:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 22:04:28 -0000
Received: (qmail 48107 invoked by uid 500); 8 Feb 2006 22:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48083 invoked by uid 500); 8 Feb 2006 22:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48071 invoked by uid 99); 8 Feb 2006 22:04:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 14:04:22 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.33] (HELO smtp002.mail.ukl.yahoo.com) (217.12.11.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 08 Feb 2006 14:04:20 -0800
Received: (qmail 11598 invoked from network); 8 Feb 2006 22:03:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=HdoC09BYBE0pXscqqZPoMY2LgYRwg0rquRCbj0Z6Xnrk4lAWvQ38CQzNpM1doOw1Vn4zUMRB1dBPkQhuvCOkcuc06X/+PEcRMJ0IuxyLVcmwlJQ7Hgl2kYgv2BOrk4IHVCwY5+dU+VFSKQDnJAtTGuO/5uQu33nS8OonBScgeBM=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp002.mail.ukl.yahoo.com with SMTP; 8 Feb 2006 22:03:58 -0000
Message-ID: <43EA6AD0.90005@yahoo.co.uk>
Date: Wed, 08 Feb 2006 22:04:00 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: scalability recommendations for large performance-intensive indexes
References: <2822350c0602081310p87b4e4cw77a6a6f98b04d320@mail.gmail.com>
In-Reply-To: <2822350c0602081310p87b4e4cw77a6a6f98b04d320@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Vince, sounds like the same issue I highlighted recently on the 
java-dev list.

See here:
http://www.nabble.com/Preventing-%22killer%22-queries-t1077895.html

The problem lies in the underlying cost of reading TermDocs for very 
common terms (a problem for  both queries and filters)

For your issue, given the  problem field only has 2 values you can 
comfortably cache 2 Bitsets and use them as filters.
This would only require roughly (35m/8)*2 bytes or about 9 meg of RAM.

Cheers
Mark



Vince Taluskie wrote:

>hello All,
>
>I'm looking for some advice on how to improve scalability - we have a fairly
>large lucene index of 35M documents, max 1k document size (most much
>smaller) and 14 fields.   We combine descriptive text together into a
>"contents" field and search on that and have been very pleased with handling
>almost 100 queries/sec at about 8-12ms for the average search.
>
>Prior to that we had a common attribute for which about 50% of the docs had
>one value and the rest had the other value and the boolean query slowed
>response times very significantly.  We handled this by breaking up our
>indexes so that the index only contained one attribute or the other and
>eliminated the need for the boolean - this was a 7-8x improvement.
>
>Now we're back to wanting to add another attribute to the documents for
>which most of the docs will have one value and much fewer will have the
>other and although it sounds so simple - my limited testing with an 85/15
>ratio is showing another big hit on performance with the boolean.    A two
>term boolean search without the attribute is about 7-8ms, adding the
>attribute to the boolean search increases the elapsed time to 4x and 2x of
>original for the 85% and 15% frequencies respective.
>
>I had some hope that a QueryFilter would really help out but it turns out to
>be much much slower:  the 85% term ends up taking a whopping 336ms and the
>15% term ends up around 65ms which is 40x and 8x slower than the original
>8ms query speed without the additional attribute.
>
>I have to ask if there's not a better way to handle the addition of an
>common attribute with a few possible values across the index.  Any other
>recommended approaches?
>
>Thanks in advance,
>
>Vince
>
>  
>



		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 23:09:33 2006
Return-Path: <java-user-return-18818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75969 invoked from network); 8 Feb 2006 23:09:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 23:09:28 -0000
Received: (qmail 56723 invoked by uid 500); 8 Feb 2006 23:09:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56700 invoked by uid 500); 8 Feb 2006 23:09:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56688 invoked by uid 99); 8 Feb 2006 23:09:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 15:09:20 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DATE_IN_PAST_06_12,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 15:09:20 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: 1.9 lucene version
Date: Wed, 8 Feb 2006 11:50:16 -0500
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D131050E7F95@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 1.9 lucene version
Thread-Index: AcYsxP2kogGU55tQQwyGem0SGkDTOQAArwGA
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello all,
	I have a couple of questions for the community about the 1.9
Lucene version.  As I understand it, this has not been released and I
can't find an approximate date for release (I know you can download the
development version and compile it).  I see a nightly build going on
(http://lucene.apache.org/java/docs/index.html), but I can't seem to
find a release date.

	So,
		1) Anyone know a release date for 1.9?
		2) Also, if this is not a soon time, is anyone actually
using 1.9 in production?
		3) General question on improvement: memory - has there
been any memory improvements as well in 1.9

Thanks all!
Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 23:33:25 2006
Return-Path: <java-user-return-18819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84919 invoked from network); 8 Feb 2006 23:33:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 23:33:25 -0000
Received: (qmail 88045 invoked by uid 500); 8 Feb 2006 23:33:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88003 invoked by uid 500); 8 Feb 2006 23:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87980 invoked by uid 99); 8 Feb 2006 23:33:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 15:33:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 15:33:07 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 965D7B7BF7
	for <java-user@lucene.apache.org>; Thu,  9 Feb 2006 10:32:44 +1100 (EST)
Message-ID: <43EA7F5E.5080305@nuix.com.au>
Date: Thu, 09 Feb 2006 10:31:42 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Queries not derived from the text index
References: <F9E303076B72074AB76B2C8F78952B291983B5@bettylou.configureone.net>
In-Reply-To: <F9E303076B72074AB76B2C8F78952B291983B5@bettylou.configureone.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John Powers wrote:
> This may be a tangent, but for my filters and searches, I construct the
> query with "+" and "-" and what not..   is this not the right way to do
> this?    I haven't had to extend or write any special AND or OR classes,
> I just write the query and search the once.     Any advantage to writing
> Filter subclasses?

In our particular case, most of our filters have absolutely nothing to 
do with the contents of the text index, so they can't be done as queries 
(yet.)

For instance, we can filter the search results based on the result of a 
query to a database.  Lucene doesn't allow us to modify a Document after 
it's created, so we use a database as a workaround for this limitation. 
  Historically we used to support user annotations by deleting and 
re-adding the document, but this process is too slow if the user wants 
to annotate multiple documents in a single pass.

The only other benefit to using a Filter instead of a Query (for example 
using QueryFilter) is the ability to cache the results of something 
you're going to use a lot.  For instance, you might have a UI which 
allows the user to filter by dates.  The user might enter multiple 
queries in a single given date range, and using a filter here avoids 
performing the range query multiple times.

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 23:48:09 2006
Return-Path: <java-user-return-18820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90047 invoked from network); 8 Feb 2006 23:48:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 23:48:08 -0000
Received: (qmail 10262 invoked by uid 500); 8 Feb 2006 23:48:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10235 invoked by uid 500); 8 Feb 2006 23:48:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10224 invoked by uid 99); 8 Feb 2006 23:48:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 15:48:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 15:48:01 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id D3965B7BF7
	for <java-user@lucene.apache.org>; Thu,  9 Feb 2006 10:47:40 +1100 (EST)
Message-ID: <43EA82DE.3080905@nuix.com.au>
Date: Thu, 09 Feb 2006 10:46:38 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Queries not derived from the text index
References: <43E839B5.60300@nuix.com.au> <5ACC7DF3-B9C0-4781-B7BA-20F374ED0B9F@ehatchersolutions.com> <43E92A9B.1020109@nuix.com.au> <56D4B35E-3FC0-44A0-A109-0AEAA72E5230@ehatchersolutions.com>
In-Reply-To: <56D4B35E-3FC0-44A0-A109-0AEAA72E5230@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> One interesting option is to subclass QueryParser and override 
> getFieldQuery.  When the field is "tag", return a FilteredQuery (see 
> trunk codebase, or the nightly 1.9 binaries) using a Filter that 
> interfaces with your database.  Caching of the filters would be 
> desirable for performance reasons.

Aha.  That does sound like it could work, although it will be an 
interesting exercise in trickery.

I'm not sure it would entirely work at the getFieldQuery level, perhaps 
at the getBooleanQuery level.  The reasoning is this...

   text:camel AND tag:zoo

     This needs to become a single FilteredQuery with a TermQuery
     (text:camel) and a TagFilter (tag:zoo).

   text:camel OR tag:zoo

     This needs to become a BooleanQuery.  The TermQuery (text:camel)
     would optional, and the other query would be a FilteredQuery which
     filters an MatchAllDocsQuery with a TagFilter (tag:zoo).

   text:camel NOT tag:zoo

     This would be a FilteredQuery with a TermQuery (text:camel) and
     a NotFilter over a TagFilter(tag:zoo).

It's complicated, but it seems like it would work.  The only cases which 
become really hard are cases where there are multiple non-text-index 
queries in there.  Then I might have to use an AndFilter or similar. 
And in cases where there are only non-text-index queries in there I 
would have to automatically insert a MatchAllDocsQuery.

> In the latest codebase, there is a MatchAllDocsQuery that can be used in 
> this case.  I also have implemented this sort of thing with a custom 
> query parser for a client.

This sounds interesting in itself.  I was trying to write one of these 
myself, not realising that it had been added into source control 
recently.  My plan was to get the query returning all docs and then 
figure out how to abstract it so that it could filter the returned docs 
down on the fly.

I may yet be able to use MatchAllDocsQuery as a means for doing this, as 
it will contain a lot of the framework code which I was finding it hard 
to write myself (having to write a Query, Weight and Scorer class is 
something I wanted to try and abstract away from our own custom ones.)

My main motivation for wanting to use a "real" query as opposed to a 
FilteredQuery is that filters cost more up-front, and if you cache them 
then they start costing in memory (our indexes are huge, therefore they 
cost a LOT of memory.)  Real queries are more or less a BitSet 
implemented as an iterator, which is far preferable for us.

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 08 23:52:35 2006
Return-Path: <java-user-return-18821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91652 invoked from network); 8 Feb 2006 23:52:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Feb 2006 23:52:32 -0000
Received: (qmail 18044 invoked by uid 500); 8 Feb 2006 23:52:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17997 invoked by uid 500); 8 Feb 2006 23:52:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17975 invoked by uid 99); 8 Feb 2006 23:52:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 15:52:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 15:52:18 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 34165B7BF7
	for <java-user@lucene.apache.org>; Thu,  9 Feb 2006 10:51:58 +1100 (EST)
Message-ID: <43EA83DF.5040305@nuix.com.au>
Date: Thu, 09 Feb 2006 10:50:55 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Duplicates recods in index
References: <20060208124959.29EE910FB008@asf.osuosl.org>
In-Reply-To: <20060208124959.29EE910FB008@asf.osuosl.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Pasha Bizhan wrote:
> Hi, 
> 
>> From: Anton Potehin [mailto:anton@orbita1.ru] 
>> 1) create Document object 
>>
>> 2) add 5 fields into Document (id, name, field1, field2, 
>> field3). All fields are stored, indexed and tokenized 
>>
>> 3) check if the document with current id and name was added before 
> 
> Just perform the search with given id and name values. 
> String query = "+id:(" + doc.get("id") + ") +name:(" + doc.get("name") +
> ")";

I don't know how this will be for efficiency.  If you did it that way, 
you would have to re-open the index for every single document you add, 
otherwise you might miss a duplicate which was added recently.

Really it depends when you need to know that it's a duplicate.  If you 
don't need to know right away, then you might as well use a query.  If 
you need to know right away, then you're better off keeping some other 
store of which IDs and names have been added, like an SQL database.

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 00:25:49 2006
Return-Path: <java-user-return-18822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2481 invoked from network); 9 Feb 2006 00:25:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 00:25:48 -0000
Received: (qmail 53185 invoked by uid 500); 9 Feb 2006 00:25:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53162 invoked by uid 500); 9 Feb 2006 00:25:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53151 invoked by uid 99); 9 Feb 2006 00:25:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 16:25:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 16:25:39 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BD09633D896; Wed,  8 Feb 2006 19:25:18 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 373A733D2ED
	for <java-user@lucene.apache.org>; Wed,  8 Feb 2006 19:25:17 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43EA82DE.3080905@nuix.com.au>
References: <43E839B5.60300@nuix.com.au> <5ACC7DF3-B9C0-4781-B7BA-20F374ED0B9F@ehatchersolutions.com> <43E92A9B.1020109@nuix.com.au> <56D4B35E-3FC0-44A0-A109-0AEAA72E5230@ehatchersolutions.com> <43EA82DE.3080905@nuix.com.au>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E24804F7-7A73-494F-BFC5-774AB6871211@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Queries not derived from the text index
Date: Wed, 8 Feb 2006 19:25:15 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 8, 2006, at 6:46 PM, Daniel Noll wrote:

> Erik Hatcher wrote:
>> One interesting option is to subclass QueryParser and override  
>> getFieldQuery.  When the field is "tag", return a FilteredQuery  
>> (see trunk codebase, or the nightly 1.9 binaries) using a Filter  
>> that interfaces with your database.  Caching of the filters would  
>> be desirable for performance reasons.
>
> Aha.  That does sound like it could work, although it will be an  
> interesting exercise in trickery.
>
> I'm not sure it would entirely work at the getFieldQuery level,  
> perhaps at the getBooleanQuery level.  The reasoning is this...
>
>   text:camel AND tag:zoo
>
>     This needs to become a single FilteredQuery with a TermQuery
>     (text:camel) and a TagFilter (tag:zoo).

Actually I'm pretty certain that it'll work with just getFieldQuery  
overriding.  You can AND or OR a FilteredQuery with any other Query  
inside a BooleanQuery.  I'd be surprised if it didn't work.  Scoring  
is the one tricky caveat to this sort of thing, and perhaps the new  
"function" capability would be the ticket to adjusting scores for  
your non-Lucene "search".

>   text:camel NOT tag:zoo
>
>     This would be a FilteredQuery with a TermQuery (text:camel) and
>     a NotFilter over a TagFilter(tag:zoo).
>
> It's complicated, but it seems like it would work.  The only cases  
> which become really hard are cases where there are multiple non- 
> text-index queries in there.  Then I might have to use an AndFilter  
> or similar. And in cases where there are only non-text-index  
> queries in there I would have to automatically insert a  
> MatchAllDocsQuery.

Maybe I haven't thought this through enough given your (quite  
detailed and clear) descriptions of the scenario, but I still think  
just letting getFieldQuery produce a FilteredQuery appropriately that  
AND/OR/NOT will be handled the rest of the way as desired.  Well  
worth a try.  Certainly a pure NOT query is the one case that  
QueryParser and BooleanQuery don't currently like, but that is an  
easy hack (and perhaps should be part of QueryParser anyway) to use  
the MatchAllDocsQuery instead.

> My main motivation for wanting to use a "real" query as opposed to  
> a FilteredQuery is that filters cost more up-front, and if you  
> cache them then they start costing in memory (our indexes are huge,  
> therefore they cost a LOT of memory.)  Real queries are more or  
> less a BitSet implemented as an iterator, which is far preferable  
> for us.

I'm pulling of the same sort of stunts with the faceted search system  
I've developed.  The data has not currently reached the "huge" level  
yet, but it is growing and memory will become more of a concern.   
There is a memory saving alternative BitSet-like implementation  
available in JIRA somewhere (sorry, no reference handy, but it's  
there and probably finable by a "BitSet" search).  Perhaps that is  
worth consideration in your case.  There is also discussion about  
changing how Filters work to not use a BitSet directly but rather an  
enumeration-like interface such at TermEnum, etc.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 00:25:57 2006
Return-Path: <java-user-return-18823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2543 invoked from network); 9 Feb 2006 00:25:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 00:25:57 -0000
Received: (qmail 54312 invoked by uid 500); 9 Feb 2006 00:25:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54298 invoked by uid 500); 9 Feb 2006 00:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 19955 invoked by uid 99); 8 Feb 2006 23:52:45 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kdutcher@gmail.com designates 64.233.184.206 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TG9ldUhjbj8Xcku9PG1z4q/o5dwaeQypPs7HzGgYKWVZ6ykOjMOwOoiYpxU55zgdFjahPQf+Eo5zbZYGCnmnD8EOFQPkz9/dWJLK8+E8dY1rbgpmAKxt7MgcNLDhovztyGvWaHZm1wdeSFtxbYfWk7DzdV4/oPJK/M4n1p7H/0s=
Message-ID: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com>
Date: Wed, 8 Feb 2006 18:52:22 -0500
From: Kevin Dutcher <kdutcher@gmail.com>
To: java-user@lucene.apache.org
Subject: Too many required clauses for a BooleanQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5336_5939066.1139442742352"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5336_5939066.1139442742352
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hey Everyone,

I'm running into the "More than 32 required/prohibited clauses in query"
exception when running a query. I thought I understood the problem but the
following two scenarios confuse me.

1st - No Error
33 required clauses plus additional clauses that are left off b/c they
are the same as the second scenario
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
(categorization:10102617 AND categorization:10102621 AND
categorization:10102625 AND categorization:10102629 AND
categorization:10102633 AND categorization:10102637 AND
categorization:10102641 AND categorization:10102645 AND
categorization:10102649 AND categorization:10102653 AND
categorization:10102657 AND categorization:10102661 AND
categorization:10102665 AND categorization:10102669 AND
categorization:10102673 AND categorization:10102677 AND
categorization:10102681 AND categorization:10102685 AND
categorization:10102689 AND categorization:10102693 AND
categorization:10102697 AND categorization:10102701 AND
categorization:10102705 AND categorization:10102709 AND
categorization:10102713 AND categorization:10102717 AND
categorization:10102721 AND categorization:10102725 AND
categorization:10102729 AND categorization:10102733 AND
categorization:10102737 AND categorization:10102741 AND
categorization:10102745) AND ...

2nd - Error
The 33 required clauses above with the addition of a required
clause that is 3 OR'd clauses
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
((categorization:10102405 OR categorization:10102409 OR
categorization:10102413) AND categorization:10102617 AND
categorization:10102621 AND categorization:10102625 AND
categorization:10102629 AND categorization:10102633 AND
categorization:10102637 AND categorization:10102641 AND
categorization:10102645 AND categorization:10102649 AND
categorization:10102653 AND categorization:10102657 AND
categorization:10102661 AND categorization:10102665 AND
categorization:10102669 AND categorization:10102673 AND
categorization:10102677 AND categorization:10102681 AND
categorization:10102685 AND categorization:10102689 AND
categorization:10102693 AND categorization:10102697 AND
categorization:10102701 AND categorization:10102705 AND
categorization:10102709 AND categorization:10102713 AND
categorization:10102717 AND categorization:10102721 AND
categorization:10102725 AND categorization:10102729 AND
categorization:10102733 AND categorization:10102737 AND
categorization:10102741 AND categorization:10102745) AND ...

I can add additional required clauses to the 1st scenario without any
problems. So why am I seeing the error in the second scenario and not the
first? After discovering the error, I expected to see it in the first
scenario also. Is there anyway around this error?

As a side note, it is very unlikely that this will be encountered in the
real world, but b/c we are dealing with content categorization it is still
possible.

Thanks in advance,

Kevin

------=_Part_5336_5939066.1139442742352--

From java-user-return-18824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 00:43:37 2006
Return-Path: <java-user-return-18824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13043 invoked from network); 9 Feb 2006 00:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 00:43:37 -0000
Received: (qmail 88349 invoked by uid 500); 9 Feb 2006 00:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88318 invoked by uid 500); 9 Feb 2006 00:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88307 invoked by uid 99); 9 Feb 2006 00:43:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 16:43:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 16:43:30 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id C3388B7BF7
	for <java-user@lucene.apache.org>; Thu,  9 Feb 2006 11:43:08 +1100 (EST)
Message-ID: <43EA8FDE.9080207@nuix.com.au>
Date: Thu, 09 Feb 2006 11:42:06 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Queries not derived from the text index
References: <43E839B5.60300@nuix.com.au> <5ACC7DF3-B9C0-4781-B7BA-20F374ED0B9F@ehatchersolutions.com> <43E92A9B.1020109@nuix.com.au> <56D4B35E-3FC0-44A0-A109-0AEAA72E5230@ehatchersolutions.com> <43EA82DE.3080905@nuix.com.au> <E24804F7-7A73-494F-BFC5-774AB6871211@ehatchersolutions.com>
In-Reply-To: <E24804F7-7A73-494F-BFC5-774AB6871211@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> Actually I'm pretty certain that it'll work with just getFieldQuery 
> overriding.  You can AND or OR a FilteredQuery with any other Query 
> inside a BooleanQuery.  I'd be surprised if it didn't work.  Scoring is 
> the one tricky caveat to this sort of thing, and perhaps the new 
> "function" capability would be the ticket to adjusting scores for your 
> non-Lucene "search".

Scoring is mostly irrelevant in our system, luckily.  We only care that 
all the results are returned, not so much that they're in the right order.

I think that overriding getFieldQuery would work, yeah... you're right. 
   It's just a matter of comparing efficienty of this:

     BooleanQuery of (TermQuery, FilteredQuery of (AllDocsQuery, Filter))

to the efficiency of this:

     FilteredQuery of (TermQuery, Filter)

But perhaps removing the redundant boolean queries is something I could 
do in a final pass of the Query object that gets spat out of the parser.

> I'm pulling of the same sort of stunts with the faceted search system 
> I've developed.  The data has not currently reached the "huge" level 
> yet, but it is growing and memory will become more of a concern.  There 
> is a memory saving alternative BitSet-like implementation available in 
> JIRA somewhere (sorry, no reference handy, but it's there and probably 
> finable by a "BitSet" search).  Perhaps that is worth consideration in 
> your case.  There is also discussion about changing how Filters work to 
> not use a BitSet directly but rather an enumeration-like interface such 
> at TermEnum, etc.

That would be interesting, I might go looking for that.  Memory usage is 
really our only concern with using filters for all of this, but if 
filters were reworked to use the same kind of mechanism as queries use 
internally, then there is certainly no point in me going and trying to 
make custom Query subclasses.

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 02:52:31 2006
Return-Path: <java-user-return-18825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69197 invoked from network); 9 Feb 2006 02:52:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 02:52:31 -0000
Received: (qmail 3815 invoked by uid 500); 9 Feb 2006 02:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3762 invoked by uid 500); 9 Feb 2006 02:52:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3751 invoked by uid 99); 9 Feb 2006 02:52:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 18:52:26 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.22.58.18] (HELO mail.dicarta.com) (12.22.58.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 18:52:24 -0800
Received: from corpx.corp.dicarta.com (corpx.dicarta.com [10.1.8.35])
	by mail.dicarta.com  with ESMTP id k192pxs03914
	for <java-user@lucene.apache.org>; Wed, 8 Feb 2006 18:51:59 -0800 (PST)
From: jwang@dicarta.com
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C62D23.CE333946"
Subject: Build vs. Buy?
Date: Wed, 8 Feb 2006 18:52:03 -0800
Message-ID: <9778DA4F3D53D04B9AE80AC64AC073A305745B13@corpx.dicarta.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Build vs. Buy?
Thread-Index: AcYtI84zmEeRKjm7RYC3RJgozs+TJg==
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62D23.CE333946
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm trying to upgrade our search functionality (currently, RTF/text
only, and exact phrase match only) at my company, and have run into some
concerns.  Our 4 main formats are:

=20

RTF - javax.swing looks fine, we use those classes already.

=20

MS Word - I know that POI exists, but development on the Word portion
seems to have stopped, and there are a lot of nasty looking bugs in
their DB.  Since we're involved in dealing with contracts, many of our
Word files are large and complicated.  How has everyone's experience
with POI's Word parsing been?

=20

PDF - Looks like PDFBox has memory issues.  Frankly, this is not a
problem in anything other than indexing.  Minor, but still a concern.

=20

Word Perfect - There doesn't seem to be any converters for this format?

=20

I would hate to have to recommend to my boss to shell out $10k to $25k
(or more!) in licensing fees for a commercial search engine just because
I can't parse the files and the commercial ones can, but that is still
cheaper than dedicating two engineers for 6 months if we have to write
parsers for Word, PDF and Word Perfect if we go with Lucene (frankly,
there's less risk too, considering how complicated parsing would be.)  I
know that Lucene doesn't deal with file formats, but the basic fact is,
to use Lucene, you have to present it text strings, and there's no way
to get that without dealing with file formats. =20

=20

What is the experience of people on the list with implementing parsers
for anything more than text, html and xml?

=20

Thanks for any insights,

Jeff Wang

diCarta, Inc.


------_=_NextPart_001_01C62D23.CE333946--

From java-user-return-18826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 06:56:13 2006
Return-Path: <java-user-return-18826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59309 invoked from network); 9 Feb 2006 06:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 06:56:12 -0000
Received: (qmail 77679 invoked by uid 500); 9 Feb 2006 06:56:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77628 invoked by uid 500); 9 Feb 2006 06:56:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77617 invoked by uid 99); 9 Feb 2006 06:56:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 22:56:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 22:56:05 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 12B885B78B; Wed,  8 Feb 2006 22:55:31 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BA7D87F403
	for <java-user@lucene.apache.org>; Wed,  8 Feb 2006 22:55:31 -0800 (PST)
Date: Wed, 8 Feb 2006 22:55:31 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Too many required clauses for a BooleanQuery
In-Reply-To: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602082249510.20913@hal.rescomp.berkeley.edu>
References: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I don't know a lot about the error your encountering (or not encountering
as the case may be) but please for hte love of all that is sane use a
Filter instead of putting all those categories in your Query.

Your search performance and your scores will thank you.

: Date: Wed, 8 Feb 2006 18:52:22 -0500
: From: Kevin Dutcher <kdutcher@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Too many required clauses for a BooleanQuery
:
: Hey Everyone,
:
: I'm running into the "More than 32 required/prohibited clauses in query"
: exception when running a query. I thought I understood the problem but the
: following two scenarios confuse me.
:
: 1st - No Error
: 33 required clauses plus additional clauses that are left off b/c they
: are the same as the second scenario
: =============================================
: (categorization:10102617 AND categorization:10102621 AND
: categorization:10102625 AND categorization:10102629 AND
: categorization:10102633 AND categorization:10102637 AND
: categorization:10102641 AND categorization:10102645 AND
: categorization:10102649 AND categorization:10102653 AND
: categorization:10102657 AND categorization:10102661 AND
: categorization:10102665 AND categorization:10102669 AND
: categorization:10102673 AND categorization:10102677 AND
: categorization:10102681 AND categorization:10102685 AND
: categorization:10102689 AND categorization:10102693 AND
: categorization:10102697 AND categorization:10102701 AND
: categorization:10102705 AND categorization:10102709 AND
: categorization:10102713 AND categorization:10102717 AND
: categorization:10102721 AND categorization:10102725 AND
: categorization:10102729 AND categorization:10102733 AND
: categorization:10102737 AND categorization:10102741 AND
: categorization:10102745) AND ...
:
: 2nd - Error
: The 33 required clauses above with the addition of a required
: clause that is 3 OR'd clauses
: ============================================
: ((categorization:10102405 OR categorization:10102409 OR
: categorization:10102413) AND categorization:10102617 AND
: categorization:10102621 AND categorization:10102625 AND
: categorization:10102629 AND categorization:10102633 AND
: categorization:10102637 AND categorization:10102641 AND
: categorization:10102645 AND categorization:10102649 AND
: categorization:10102653 AND categorization:10102657 AND
: categorization:10102661 AND categorization:10102665 AND
: categorization:10102669 AND categorization:10102673 AND
: categorization:10102677 AND categorization:10102681 AND
: categorization:10102685 AND categorization:10102689 AND
: categorization:10102693 AND categorization:10102697 AND
: categorization:10102701 AND categorization:10102705 AND
: categorization:10102709 AND categorization:10102713 AND
: categorization:10102717 AND categorization:10102721 AND
: categorization:10102725 AND categorization:10102729 AND
: categorization:10102733 AND categorization:10102737 AND
: categorization:10102741 AND categorization:10102745) AND ...
:
: I can add additional required clauses to the 1st scenario without any
: problems. So why am I seeing the error in the second scenario and not the
: first? After discovering the error, I expected to see it in the first
: scenario also. Is there anyway around this error?
:
: As a side note, it is very unlikely that this will be encountered in the
: real world, but b/c we are dealing with content categorization it is still
: possible.
:
: Thanks in advance,
:
: Kevin
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 07:07:24 2006
Return-Path: <java-user-return-18827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63203 invoked from network); 9 Feb 2006 07:07:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 07:07:24 -0000
Received: (qmail 85270 invoked by uid 500); 9 Feb 2006 07:07:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85246 invoked by uid 500); 9 Feb 2006 07:07:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85235 invoked by uid 99); 9 Feb 2006 07:07:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 23:07:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Feb 2006 23:07:16 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 88ED65B789; Wed,  8 Feb 2006 23:06:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7E5BA7F403
	for <java-user@lucene.apache.org>; Wed,  8 Feb 2006 23:06:55 -0800 (PST)
Date: Wed, 8 Feb 2006 23:06:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Queries not derived from the text index
In-Reply-To: <43EA8FDE.9080207@nuix.com.au>
Message-ID: <Pine.LNX.4.58.0602082259570.20913@hal.rescomp.berkeley.edu>
References: <43E839B5.60300@nuix.com.au> <5ACC7DF3-B9C0-4781-B7BA-20F374ED0B9F@ehatchersolutions.com>
 <43E92A9B.1020109@nuix.com.au> <56D4B35E-3FC0-44A0-A109-0AEAA72E5230@ehatchersolutions.com>
 <43EA82DE.3080905@nuix.com.au> <E24804F7-7A73-494F-BFC5-774AB6871211@ehatchersolutions.com>
 <43EA8FDE.9080207@nuix.com.au>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I think that overriding getFieldQuery would work, yeah... you're right.
:    It's just a matter of comparing efficienty of this:
:
:      BooleanQuery of (TermQuery, FilteredQuery of (AllDocsQuery, Filter))
:
: to the efficiency of this:
:
:      FilteredQuery of (TermQuery, Filter)

the third option is as easy to impliment as the first, and probably close
to being as efficient as the second...

       BooleanQuery of (TermQuery, ConstantScoreQuery(Filter))



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 08:07:43 2006
Return-Path: <java-user-return-18828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83961 invoked from network); 9 Feb 2006 08:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 08:07:42 -0000
Received: (qmail 25273 invoked by uid 500); 9 Feb 2006 08:07:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25224 invoked by uid 500); 9 Feb 2006 08:07:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25204 invoked by uid 99); 9 Feb 2006 08:07:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 00:07:37 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.215] (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Feb 2006 00:07:36 -0800
Received: (qmail 41649 invoked by uid 60001); 9 Feb 2006 08:07:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=5b2oOGWLP+T3rY8tZu9uQqRSIlNc82sJCFNqmlJ6G3omc83PSLPXfDdOGXTJDD+pei2SvSPqt3lhoKfo6nvVcv8XHiTxu4hM+vm43yWDXOxrYVr8gk9la9W6gyrVQtws8f0RipxU7gTEWxIobsRnoEwcdgO2efjhLgjJw6EfHyA=  ;
Message-ID: <20060209080713.41647.qmail@web26004.mail.ukl.yahoo.com>
Received: from [194.106.34.5] by web26004.mail.ukl.yahoo.com via HTTP; Thu, 09 Feb 2006 08:07:13 GMT
Date: Thu, 9 Feb 2006 08:07:13 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Too many required clauses for a BooleanQuery
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0602082249510.20913@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>for hte love of all
> that is sane use a
> Filter instead of putting all those categories in
> your Query.

Try this one:




package org.apache.lucene.search;

import java.io.IOException;
import java.util.ArrayList;
import java.util.BitSet;
import java.util.Iterator;

import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermDocs;

/**
 * Constructs a filter for docs matching any of the
terms added to this class
 * @author maharwood
 */
public class TermsFilter extends Filter
{
	ArrayList termsList=new ArrayList();
	
	public void addTerm(Term term)
	{
		termsList.add(term);
	}

	/* (non-Javadoc)
	 * @see
org.apache.lucene.search.Filter#bits(org.apache.lucene.index.IndexReader)
	 */
	public BitSet bits(IndexReader reader) throws
IOException
	{
		BitSet result=new BitSet(reader.maxDoc());
		for (Iterator iter = termsList.iterator();
iter.hasNext();)
		{
			Term term = (Term) iter.next();
			TermDocs td=reader.termDocs(term);
	        while (td.next())
	        {
	            result.set(td.doc());
	        }						
		}
		return result;
	}
}





		
___________________________________________________________ 
NEW Yahoo! Cars - sell your car and browse thousands of new and used cars online! http://uk.cars.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 09:11:23 2006
Return-Path: <java-user-return-18829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17572 invoked from network); 9 Feb 2006 09:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 09:11:23 -0000
Received: (qmail 84529 invoked by uid 500); 9 Feb 2006 09:11:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84499 invoked by uid 500); 9 Feb 2006 09:11:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84488 invoked by uid 99); 9 Feb 2006 09:11:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 01:11:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 01:11:15 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5F87533C044; Thu,  9 Feb 2006 04:10:55 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 3970D33C043
	for <java-user@lucene.apache.org>; Thu,  9 Feb 2006 04:10:48 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC25@ehost011-3.exch011.intermedia.net>
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC1C@ehost011-3.exch011.intermedia.net> <Pine.LNX.4.58.0602071604260.9474@hal.rescomp.berkeley.edu> <FAB00A8DC59FAB42B13C2B3B0F687701E7CC24@ehost011-3.exch011.intermedia.net> <Pine.LNX.4.58.0602080952440.17683@hal.rescomp.berkeley.edu> <FAB00A8DC59FAB42B13C2B3B0F687701E7CC25@ehost011-3.exch011.intermedia.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7337EC0B-16CB-47CD-99CB-A4D00B70F71D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to get mapping of query terms to number of their occurrences in a doc?
Date: Thu, 9 Feb 2006 04:10:40 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is a real gotcha with Lucene in it's out of the box  
configuration.  In the several applications I've built to index  
documents I've always hit this and had to set the maxFieldLength to  
its maximum possible value.  Is there still an argument to be made to  
keep the default at 10K or would it be reasonable to bump this up  
even if there are, the few, cases where setting it lower is  
desirable?   We made the compound file index be the default to  
prevent file handle limitations at the expense of some (generally  
irrelevant) performance, so maybe we could also make this more common  
setting the default also?

	Erik

On Feb 8, 2006, at 2:17 PM, Dmitry Goldenberg wrote:

> Duh! Bingo! Mistery solved. I should have thought of this :)
> The discrepancies come in with larger documents, definitely > 10K  
> terms which is Lucene's default maxFieldLength.
>
> Thanks for your help, Chris
>
> - Dmitry
>
> ________________________________
>
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: Wed 2/8/2006 10:04 AM
> To: java-user@lucene.apache.org
> Subject: RE: How to get mapping of query terms to number of their  
> occurrences in a doc?
>
>
>
>
> : That's what I did, for debugging.  The query is "biology", and  
> here's
> : what the API tells me for term frequencies:
> : biolog 15
> : biologi 31
> : biologist 4
> :
> : I actually see 13 occurrences of "biologist" and "biologists", 64
> : occurrences of "biology", 27 occurrences of "biological".
> :
> : I see "inform 22" but the actual count of the word "information"  
> in the
> : document is 33.  But "ioniz 7" is correct.
>
> I think I missunderstood what you ment when you said the counts don't
> match up.  Are you comparing the number you get from that code with  
> the
> number of times you personally see the word in the source document  
> before
> it has been analyzed?
>
> If so, then there could be a couple of things going on ... i would  
> start
> by using a tool like Luke to see the actual lists of Terms for each  
> doc --
> there may be something else your analyzer is doing that you don't  
> realize.
>
> It's also possible that you are hitting the maxFieldLength in the
> IndexWriter ... when that happens IndexWriter throws away any  
> remaining
> tokens, so if your documenst are really large.
>
> Lastly, I would add a *lot* more debugging to your code.  Print out  
> the
> contents of "terms", when you loop over "tfvs" print out the field  
> and the
> full list of strTerms, in the inner most loop when you incriment the
> count, print out the field/text/and count.
>
> that's the best advise i have for spotting what's wrong.
>
>
>
> : ________________________________
> :
> : From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> : Sent: Tue 2/7/2006 4:10 PM
> : To: java-user@lucene.apache.org
> : Subject: Re: How to get mapping of query terms to number of their  
> occurrences in a doc?
> :
> :
> :
> :
> : A cursory reading of your code looks ok ... stemming shouldn't be  
> an issue
> : as long as your measure of success is comparing docs that match your
> : orriginal query with the counts you get out.
> :
> : What i mean by that is that any stemming should have already been  
> taken
> : care of when your query object was constructed (either by you  
> manually, or
> : by QueryParser).  the direct equals comparisons you are dong  
> should be
> : fine.
> :
> : have you tried adding logging of the raw term field/text and the  
> freq
> : counts you get back to see if that helps you spot the problem?
> :
> :
> : : Date: Mon, 6 Feb 2006 14:34:05 -0800
> : : From: Dmitry Goldenberg <dmitry.goldenberg@weblayers.com>
> : : Reply-To: java-user@lucene.apache.org
> : : To: java-user@lucene.apache.org
> : : Subject: How to get mapping of query terms to number of their  
> occurrences
> : :     in a doc?
> : :
> : : Given a query, I want to be able to, for each query term, get  
> the number of occurrences of the term.  I have tried what I'm  
> including below and it does not seem to provide reliable results.   
> Seems to work fine with exact matching but as soon as stemming  
> kicks in, all bets are off as to value of the number of occurrences  
> returned.
> : :
> : : Any ideas, anyone?  Can this be written in a simpler and/or  
> more efficient way?
> : : Thanks -
> : :
> : :       int totalOccurrences = 0;
> : :
> : :       reader = IndexReader.open(getDirectory(indexDirPath));
> : :       HashSet terms = new HashSet();
> : :       query.extractTerms(terms);
> : :
> : :       TermFreqVector[] tfvs = reader.getTermFreqVectors(docId);
> : :       if (tfvs != null) {
> : :
> : :         // For each term frequency vector (i.e. for each field)
> : :         for (int i = 0; i < tfvs.length; i++) {
> : :           String field = tfvs[i].getField();
> : :           String[] strTerms = tfvs[i].getTerms();
> : :           int[] tfs = tfvs[i].getTermFrequencies();
> : :
> : :           if (strTerms != null) {
> : :
> : :             // For each term in the query
> : :             for (Iterator iter = terms.iterator(); iter.hasNext 
> ();) {
> : :
> : :               Term term = (Term) iter.next();
> : :               // For each term in the vector
> : :               for (int j = 0; j < strTerms.length; j++) {
> : :
> : :                 // If found the query term among the vector terms
> : :                 if (field.equals(term.field()) && strTerms 
> [j].equals(term.text())) {
> : :
> : :                   // Add the term frequency to the total
> : :                   totalOccurrences += tfs[j];
> : :
> : :                 }
> : :               }
> : :             }
> : :           }
> : :         }
> : :       }
> : :
> :
> :
> :
> : -Hoss
> :
> :
> :  
> ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> :
> :
> :
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 09:17:12 2006
Return-Path: <java-user-return-18830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19637 invoked from network); 9 Feb 2006 09:17:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 09:17:11 -0000
Received: (qmail 89825 invoked by uid 500); 9 Feb 2006 09:17:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89796 invoked by uid 500); 9 Feb 2006 09:17:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89785 invoked by uid 99); 9 Feb 2006 09:17:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 01:17:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.93.125.162] (HELO cpanel37.gzo.com) (69.93.125.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 01:17:03 -0800
Received: from home-pool7-2.com2com.ru ([195.98.167.2] helo=pb)
	by cpanel37.gzo.com with esmtpa (Exim 4.52)
	id 1F77ur-0003ig-Le
	for java-user@lucene.apache.org; Thu, 09 Feb 2006 03:16:42 -0600
From: "Pasha Bizhan" <lucene-list@lucenedotnet.com>
To: <java-user@lucene.apache.org>
Subject: RE: Duplicates recods in index
Date: Thu, 9 Feb 2006 12:23:40 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <43EA83DF.5040305@nuix.com.au>
x-mimeole: Produced By Microsoft MimeOLE V6.00.2800.1506
Thread-Index: AcYtCrLXY0GJAZoUQie9GxiidRI62QATxczw
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpanel37.gzo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - lucenedotnet.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060209091705.0732510FB004@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: Daniel Noll [mailto:daniel@nuix.com.au] 

> I don't know how this will be for efficiency.  If you did it 
> that way, you would have to re-open the index for every 
> single document you add, otherwise you might miss a duplicate 
> which was added recently.

You do not need to reopen index for every single document if the new 
data doesn't contain dupes.

In any case, we use the following algorithm:
- remove dupes from new data (it's possible)
- open writer, open reader/searcher
- use reader/searcher to check for dupes
- use writer to add new documents
- close all
 
Pasha Bizhan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 10:34:58 2006
Return-Path: <java-user-return-18831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52384 invoked from network); 9 Feb 2006 10:34:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 10:34:57 -0000
Received: (qmail 69705 invoked by uid 500); 9 Feb 2006 10:34:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68794 invoked by uid 500); 9 Feb 2006 10:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68783 invoked by uid 99); 9 Feb 2006 10:34:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 02:34:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.112.4.54] (HELO smtp.nildram.co.uk) (195.112.4.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 02:34:47 -0800
Received: from raven (propel.gotadsl.co.uk [81.6.247.155])
	by smtp.nildram.co.uk (Postfix) with ESMTP id 4D1D8258A63
	for <java-user@lucene.apache.org>; Thu,  9 Feb 2006 10:34:23 +0000 (GMT)
From: "Gwyn Carwardine" <gwyn@carwardine.net>
To: <java-user@lucene.apache.org>
Subject: RE: Build vs. Buy?
Date: Thu, 9 Feb 2006 10:34:20 -0000
Message-ID: <03da01c62d64$63305810$ca03010a@theoldstore.propelsystems.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <9778DA4F3D53D04B9AE80AC64AC073A305745B13@corpx.dicarta.com>
Thread-Index: AcYtI84zmEeRKjm7RYC3RJgozs+TJgAQFfKg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have you considered running the .net version (dotLucene)? The converters for
Office and PDF are freely available and there is a cheap commercial IFilter
available for wordperfect files (and many others).

-Gwyn

-----Original Message-----
From: jwang@dicarta.com [mailto:jwang@dicarta.com] 
Sent: 09 February 2006 02:52
To: java-user@lucene.apache.org
Subject: Build vs. Buy?

I'm trying to upgrade our search functionality (currently, RTF/text
only, and exact phrase match only) at my company, and have run into some
concerns.  Our 4 main formats are:

 

RTF - javax.swing looks fine, we use those classes already.

 

MS Word - I know that POI exists, but development on the Word portion
seems to have stopped, and there are a lot of nasty looking bugs in
their DB.  Since we're involved in dealing with contracts, many of our
Word files are large and complicated.  How has everyone's experience
with POI's Word parsing been?

 

PDF - Looks like PDFBox has memory issues.  Frankly, this is not a
problem in anything other than indexing.  Minor, but still a concern.

 

Word Perfect - There doesn't seem to be any converters for this format?

 

I would hate to have to recommend to my boss to shell out $10k to $25k
(or more!) in licensing fees for a commercial search engine just because
I can't parse the files and the commercial ones can, but that is still
cheaper than dedicating two engineers for 6 months if we have to write
parsers for Word, PDF and Word Perfect if we go with Lucene (frankly,
there's less risk too, considering how complicated parsing would be.)  I
know that Lucene doesn't deal with file formats, but the basic fact is,
to use Lucene, you have to present it text strings, and there's no way
to get that without dealing with file formats.  

 

What is the experience of people on the list with implementing parsers
for anything more than text, html and xml?

 

Thanks for any insights,

Jeff Wang

diCarta, Inc.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 10:46:06 2006
Return-Path: <java-user-return-18832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56640 invoked from network); 9 Feb 2006 10:46:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 10:46:06 -0000
Received: (qmail 79670 invoked by uid 500); 9 Feb 2006 10:46:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79655 invoked by uid 500); 9 Feb 2006 10:46:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 12350 invoked by uid 99); 9 Feb 2006 09:37:11 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DATE_IN_FUTURE_06_12,HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
From: <arnaudbuffet@free.fr>
To: <java-user@lucene.apache.org>
Subject: Word files
Date: Thu, 9 Feb 2006 10:36:47 -0800
Message-ID: <000001c62da7$c9d7a8a0$1e00a8c0@platoon>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0001_01C62D64.BBB468A0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
x-mimeole: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0001_01C62D64.BBB468A0
Content-Type: text/plain;
	charset="iso-8859-9"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
I use the Poi Api to parse MSword files in order to index the content to
enable lucene search.
=20
For that I download the last jars from Poi (including the scratchdpad
one) and use the parser from lucenebook called POIWordDocHandler.=20
It works quiet good, but for some files the parser does not return the
all content but just a piece, for example just the 2 first lines. Does
anyone know the reason and can help me?=20
=20
- Here is the parser java code:
=20
  public String getDocument(InputStream is) throws
DocumentHandlerException {
=20
    String bodyText =3D null;
    try {
      WordDocument wd =3D new WordDocument(is);
      StringWriter docTextWriter =3D new StringWriter();     =20
      wd.writeAllText(new PrintWriter(docTextWriter));
      docTextWriter.close();
      bodyText =3D docTextWriter.toString();
       }
       .
  return bodyText;
=20
- Here is an example of text from word doc file for witch the bodyText
variable return from the parser just return the first 14 words
'y=FDl=FDndan' (the text is in Turkish):
=20
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan =
y=FDl=FDndan y=FDl=FDndan y=FDl=FDndan
y=FDl=FDndan
=20
Thanks for your help, best regards
=20
A.
=20

------=_NextPart_000_0001_01C62D64.BBB468A0--


From java-user-return-18833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 12:11:05 2006
Return-Path: <java-user-return-18833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93985 invoked from network); 9 Feb 2006 12:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 12:11:05 -0000
Received: (qmail 79542 invoked by uid 500); 9 Feb 2006 12:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79343 invoked by uid 500); 9 Feb 2006 12:10:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79332 invoked by uid 99); 9 Feb 2006 12:10:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 04:10:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=BIZ_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.98.176.99] (HELO mail.aduna.biz) (66.98.176.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 04:10:57 -0800
Received: (qmail 2476 invoked from network); 9 Feb 2006 06:06:56 -0600
Received: from home.aduna.biz (HELO ?10.1.0.11?) (213.84.59.34)
  by www4.aduna.biz with (DHE-RSA-AES256-SHA encrypted) SMTP; 9 Feb 2006 06:06:56 -0600
Message-ID: <43EB3115.4060303@aduna.biz>
Date: Thu, 09 Feb 2006 13:09:57 +0100
From: Christiaan Fluit <christiaan.fluit@aduna.biz>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Word files & Build vs. Buy?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

I'm replying to two threads at once as what I have to say relates to both.

My company recently started an open source project called Aperture 
(http://sourceforge.net/projects/aperture), together with the German 
DFKI institute. The project is still very much in alpha stage, but I do 
believe we already have some code parts that could help people here.

Basically, it's a framework for crawling information sources (file 
systems, mail folders, websites, ...) and extracting as much information 
from it as possible. Besides full-text extraction, we also put a lot of 
effort in extraction and modeling of the metadata occurring in these 
sources and document formats. Both parties have some proprietary code 
lying on the shelf that is being open sourced and ported to the Aperture 
architecture.

Now on to the raised questions:

arnaudbuffet@free.fr wrote:
> WordDocument wd = new WordDocument(is);

jwang@dicarta.com wrote:
> MS Word - I know that POI exists, but development on the Word portion
> seems to have stopped, and there are a lot of nasty looking bugs in
> their DB.  Since we're involved in dealing with contracts, many of our
> Word files are large and complicated.  How has everyone's experience
> with POI's Word parsing been?

My experience is that the WordDocument class crashes on about 25% of the 
documents, i.e. it throws some sort of Exception. I've tested POI 
2.5.1-final as well as the current code in CVS, but both produce this 
result. I even suspect the output to be 100% the same, but I haven't 
verified this.

Another reason I don't like this class is that it operates on an 
InputStream and internally creates a POIFSFileSystem which you cannot 
access, so that it becomes hard to extract document metadata as well 
(for which you need the PFSFS) without buffering the entire InputStream. 
The same applies to TextMining's WordExtractor, which also operates on 
top of lower level POI components.

I've recently committed a WordExtractor to Aperture that uses its own 
code operating on these lower level POI datastructures, which works a 
lot better, failing only 5% of my 300 test docs. I don't pretend to 
understand all the internals of the POI APIs, but it Works For Me.

When POI throws an exception, the WordExtractor will revert to applying 
a heuristic string extraction algorithm to extract as much 
human-readable text as possible from the binary stream, which works 
quite well on MS Office files, i.e. the output is reasonably well for 
indexing purposes.

Be sure to checkout Aperture from CVS as this code isn't part of the 
alpha 1 release. A next official release is expected in a month.

jwang@dicarta.com wrote:
> RTF - javax.swing looks fine, we use those classes already.

Swing's RTFEditorKit does indeed work surpringly well. "Surprisingly" 
because in the past I had many issues with it, typically throwing 
exceptions on 25-50% of my test documents. Recently I haven't seen a 
single one (using Java 1.5.0), so either I am now feeding it a more 
optimal document set or the Swing people have worked on the 
implementation. In that case people using Java 1.4.x may see different 
results.

> Word Perfect - There doesn't seem to be any converters for this format?

I'm actively working on this :) We have some proprietary code that will 
become part of Aperture. Right now I cannot say how well it performs in 
practice though, although we've never had complaints with our 
proprietary apps.

The code uses a heuristic string extraction algorithm tuned for 
WordPerfect documents. This may be an issue, e.g. when you also want to 
display the extraction results to end users.

If you're interested: one way you can help me get the most out of it is 
by sending me some example WordPerfect documents because I hardly have 
those on my hard drive. Fake documents made with very new or old 
WordPerfect versions are also most welcome.


Regards,

Chris
http://aduna.biz
--

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 12:29:29 2006
Return-Path: <java-user-return-18834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1790 invoked from network); 9 Feb 2006 12:29:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 12:29:29 -0000
Received: (qmail 3380 invoked by uid 500); 9 Feb 2006 12:29:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3169 invoked by uid 500); 9 Feb 2006 12:29:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3158 invoked by uid 99); 9 Feb 2006 12:29:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 04:29:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 04:29:22 -0800
Received: from grenache.internal.torchbox.com ([192.168.1.81])
	by fluffy.torchbox.com with esmtp (Exim 4.50)
	id 1F7Auy-0001VT-AY
	for java-user@lucene.apache.org; Thu, 09 Feb 2006 12:29:00 +0000
Date: Thu, 9 Feb 2006 12:29:00 +0000 (GMT)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@localhost.localdomain
To: java-user@lucene.apache.org
Subject: Re: Word files & Build vs. Buy?
In-Reply-To: <43EB3115.4060303@aduna.biz>
Message-ID: <Pine.LNX.4.64.0602091224310.3533@localhost.localdomain>
References: <43EB3115.4060303@aduna.biz>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam-Score: -105.9 (---------------------------------------------------)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 9 Feb 2006, Christiaan Fluit wrote:
> My experience is that the WordDocument class crashes on about 25% of the 
> documents, i.e. it throws some sort of Exception. I've tested POI 
> 2.5.1-final as well as the current code in CVS, but both produce this 
> result. I even suspect the output to be 100% the same, but I haven't 
> verified this.

You could try using org.apache.poi.hwpf.HWPFDocument, and getting the 
range, then the paragraphs, and grab the text from each paragraph. If 
there's interest, I could probably commit an extractor that does this to 
poi.

(WordDocument is from the hdf package, which is older and less reliable 
than the current hwpf stuff)

> Another reason I don't like this class is that it operates on an 
> InputStream and internally creates a POIFSFileSystem which you cannot 
> access, so that it becomes hard to extract document metadata as well 
> (for which you need the PFSFS) without buffering the entire InputStream.

If you're using HWPFDocument from cvs, then you can create that from a 
POIFSFileSystem.

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 13:13:15 2006
Return-Path: <java-user-return-18835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27273 invoked from network); 9 Feb 2006 13:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 13:13:14 -0000
Received: (qmail 46546 invoked by uid 500); 9 Feb 2006 13:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46502 invoked by uid 500); 9 Feb 2006 13:13:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46491 invoked by uid 99); 9 Feb 2006 13:13:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 05:13:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.98.176.99] (HELO mail.aduna.biz) (66.98.176.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 05:13:06 -0800
Received: (qmail 3072 invoked from network); 9 Feb 2006 07:09:06 -0600
Received: from home.aduna.biz (HELO ?10.1.0.11?) (213.84.59.34)
  by www4.aduna.biz with (DHE-RSA-AES256-SHA encrypted) SMTP; 9 Feb 2006 07:09:06 -0600
Message-ID: <43EB3FA7.8060208@aduna.biz>
Date: Thu, 09 Feb 2006 14:12:07 +0100
From: Christiaan Fluit <christiaan.fluit@aduna.biz>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Word files & Build vs. Buy?
References: <43EB3115.4060303@aduna.biz> <Pine.LNX.4.64.0602091224310.3533@localhost.localdomain>
In-Reply-To: <Pine.LNX.4.64.0602091224310.3533@localhost.localdomain>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nick Burch wrote:
> You could try using org.apache.poi.hwpf.HWPFDocument, and getting the 
> range, then the paragraphs, and grab the text from each paragraph. If 
> there's interest, I could probably commit an extractor that does this to 
> poi.

Yes, that's exactly what I'm doing. Having this in POI would benefit me 
a lot though, as I hardly understand the POI basics to be honest (my 
fault, not POI's).

This is my current code (adapted from Aperture code in CVS):

HWPFDocument doc = new HWPFDocument(poiFileSystem);
StringBuffer buffer = new StringBuffer(4096);

Iterator textPieces = doc.getTextTable().getTextPieces().iterator();
while (textPieces.hasNext()) {
	TextPiece piece = (TextPiece) textPieces.next();

	// the following is derived from
	// http://article.gmane.org/gmane.comp.jakarta.poi.devel/7406
	String encoding = "Cp1252";
	if (piece.usesUnicode()) {
		encoding = "UTF-16LE";
	}

	buffer.append(new String(piece.getRawBytes(), encoding));
}

// normalize end-of-line characters and remove any lines
// containing macros
BufferedReader reader = new BufferedReader(new
     StringReader(buffer.toString()));
buffer.setLength(0);

String line;
while ((line = reader.readLine()) != null) {
	if (line.indexOf("DOCPROPERTY") == -1) {
		buffer.append(line);
		buffer.append(END_OF_LINE);
	}
}

// fetch the extracted full-text
String text = buffer.toString();


Regards,

Chris
--

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 14:25:59 2006
Return-Path: <java-user-return-18836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60801 invoked from network); 9 Feb 2006 14:25:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 14:25:54 -0000
Received: (qmail 44506 invoked by uid 500); 9 Feb 2006 14:25:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44475 invoked by uid 500); 9 Feb 2006 14:25:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44464 invoked by uid 99); 9 Feb 2006 14:25:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 06:25:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kdutcher@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 06:25:43 -0800
Received: by wproxy.gmail.com with SMTP id 71so130023wri
        for <java-user@lucene.apache.org>; Thu, 09 Feb 2006 06:25:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=X0OBzCiGUcRAMyAtKE/cvWWswGj5suGDcxa1NfLcTDYtcJYSLKZzsiVTfr4bH1d0fn79lF1qIiB8srwCOHE/mF617lPnRQ7p2KgCMcqmESJ85spoKSJmnkmJ9P3iJgYtuM2bANmvPcoS7vDAjAO1YguuYyHiDdCKFzzqO10TIN8=
Received: by 10.54.144.2 with SMTP id r2mr10477522wrd;
        Thu, 09 Feb 2006 06:25:22 -0800 (PST)
Received: by 10.54.67.12 with HTTP; Thu, 9 Feb 2006 06:25:22 -0800 (PST)
Message-ID: <c88eeafb0602090625x23400777y1d50f758c26b25a@mail.gmail.com>
Date: Thu, 9 Feb 2006 09:25:22 -0500
From: Kevin Dutcher <kdutcher@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Too many required clauses for a BooleanQuery
In-Reply-To: <Pine.LNX.4.58.0602082249510.20913@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8560_6400347.1139495122484"
References: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com>
	 <Pine.LNX.4.58.0602082249510.20913@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8560_6400347.1139495122484
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

> I don't know a lot about the error your encountering (or not encountering
> as the case may be) but please for hte love of all that is sane use a
> Filter instead of putting all those categories in your Query.
>
> Your search performance and your scores will thank you.


I need all the documents returned from the search and am manipulating the
results with a custom HitCollector, therefore I can't use filters.

Kevin

------=_Part_8560_6400347.1139495122484--

From java-user-return-18837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 15:59:52 2006
Return-Path: <java-user-return-18837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23422 invoked from network); 9 Feb 2006 15:59:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 15:59:50 -0000
Received: (qmail 6014 invoked by uid 500); 9 Feb 2006 15:59:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5972 invoked by uid 500); 9 Feb 2006 15:59:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5961 invoked by uid 99); 9 Feb 2006 15:59:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 07:59:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paulo.silveira@gmail.com designates 66.249.92.204 as permitted sender)
Received: from [66.249.92.204] (HELO uproxy.gmail.com) (66.249.92.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 07:59:40 -0800
Received: by uproxy.gmail.com with SMTP id m2so173430uge
        for <java-user@lucene.apache.org>; Thu, 09 Feb 2006 07:59:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=OXbIpT/yGsSuvvQsdbPfkScYT3r5N2FPCM+0rHpEM+OkaeOdhGYRYraSL+NkcYqhoBOAJ04jd53vRuFTkEPghVK/Gzas3bAxZvZeWPYl4zoN9N8E2rZ93mjQaKjRMfVzmF4PFSzzvJpRnVnEtDQ4WIhjPklxDd/aaYi4O2syivQ=
Received: by 10.49.36.13 with SMTP id o13mr2406333nfj;
        Thu, 09 Feb 2006 07:59:18 -0800 (PST)
Received: by 10.48.220.20 with HTTP; Thu, 9 Feb 2006 07:59:17 -0800 (PST)
Message-ID: <6026e8b0602090759u1fcb6938pe8c10fe881be31d8@mail.gmail.com>
Date: Thu, 9 Feb 2006 13:59:17 -0200
From: Paulo Silveira <paulo@paulo.com.br>
Sender: paulo.silveira@gmail.com
To: java-user@lucene.apache.org
Subject: opening index readers and writers to keep indexes updated
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello everybody.

I have a big index that will be stored in the FS. I have lots of
updates, insertions and deletions in the index, and I would like to
minimize the number of "phatom reads".

I ve seen in the wiki this link:

http://wiki.apache.org/jakarta-lucene/UpdatingAnIndex

So, what about my idea:

- A singleton SearchEngine
- SearchEngine has a IndexReader attribute, and _no_ index writer.
- When inserting a new Document, open a writer, writes, close and the
replace the old reader for a new one.
- When deleting, open a reader, delete, replace the older reader for
this opened reader.
- The update method deletes than inserts.
- When searching, use the attribute IndexReader

Now some questions:

Is it too bad to open/close a writer every time I write on the index?

What about opening a new IndexReader for each new search, instead of
keeping the IndexReader attribute?

Would it be a lot better to batch updates? I could have a stack of
documents to be updated, and I would only write to the indexes when
the documentsToBeUpdated.size() reaches a certain number.

thanks a lot.
--
Paulo Silveira
http://www.paulo.com.br/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 16:10:43 2006
Return-Path: <java-user-return-18838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30021 invoked from network); 9 Feb 2006 16:10:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 16:10:43 -0000
Received: (qmail 35937 invoked by uid 500); 9 Feb 2006 16:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35278 invoked by uid 500); 9 Feb 2006 16:10:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35230 invoked by uid 99); 9 Feb 2006 16:10:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 08:10:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=BIZ_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 08:10:22 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 9 Feb 2006 08:10:02 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C62D93.47C59726"
Subject: RE: Word files & Build vs. Buy?
Date: Thu, 9 Feb 2006 08:06:27 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC27@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC27@ehost011-3.exch011.intermedia.net>
Thread-Topic: Word files & Build vs. Buy?
Thread-Index: AcYtceQlQpcB4RWeR12QYP17GvFrbAAIOPrB
References: <43EB3115.4060303@aduna.biz>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2006 16:10:02.0404 (UTC) FILETIME=[485B8E40:01C62D93]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62D93.47C59726
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Chris,
=20
Awesome stuff. A few questions: is your Excel extractor somehow better =
than POI's? and, what do you see as the timeframe for adding WordPerfect =
support? Are you considering supporting any other sources such as MS =
Project, Framemaker, etc?
=20
Thanx,
- Dmitry

________________________________

From: Christiaan Fluit [mailto:christiaan.fluit@aduna.biz]
Sent: Thu 2/9/2006 4:09 AM
To: java-user@lucene.apache.org
Subject: Re: Word files & Build vs. Buy?



Hello all,

I'm replying to two threads at once as what I have to say relates to =
both.

My company recently started an open source project called Aperture
(http://sourceforge.net/projects/aperture), together with the German
DFKI institute. The project is still very much in alpha stage, but I do
believe we already have some code parts that could help people here.

Basically, it's a framework for crawling information sources (file
systems, mail folders, websites, ...) and extracting as much information
from it as possible. Besides full-text extraction, we also put a lot of
effort in extraction and modeling of the metadata occurring in these
sources and document formats. Both parties have some proprietary code
lying on the shelf that is being open sourced and ported to the Aperture
architecture.

Now on to the raised questions:

arnaudbuffet@free.fr wrote:
> WordDocument wd =3D new WordDocument(is);

jwang@dicarta.com wrote:
> MS Word - I know that POI exists, but development on the Word portion
> seems to have stopped, and there are a lot of nasty looking bugs in
> their DB.  Since we're involved in dealing with contracts, many of our
> Word files are large and complicated.  How has everyone's experience
> with POI's Word parsing been?

My experience is that the WordDocument class crashes on about 25% of the
documents, i.e. it throws some sort of Exception. I've tested POI
2.5.1-final as well as the current code in CVS, but both produce this
result. I even suspect the output to be 100% the same, but I haven't
verified this.

Another reason I don't like this class is that it operates on an
InputStream and internally creates a POIFSFileSystem which you cannot
access, so that it becomes hard to extract document metadata as well
(for which you need the PFSFS) without buffering the entire InputStream.
The same applies to TextMining's WordExtractor, which also operates on
top of lower level POI components.

I've recently committed a WordExtractor to Aperture that uses its own
code operating on these lower level POI datastructures, which works a
lot better, failing only 5% of my 300 test docs. I don't pretend to
understand all the internals of the POI APIs, but it Works For Me.

When POI throws an exception, the WordExtractor will revert to applying
a heuristic string extraction algorithm to extract as much
human-readable text as possible from the binary stream, which works
quite well on MS Office files, i.e. the output is reasonably well for
indexing purposes.

Be sure to checkout Aperture from CVS as this code isn't part of the
alpha 1 release. A next official release is expected in a month.

jwang@dicarta.com wrote:
> RTF - javax.swing looks fine, we use those classes already.

Swing's RTFEditorKit does indeed work surpringly well. "Surprisingly"
because in the past I had many issues with it, typically throwing
exceptions on 25-50% of my test documents. Recently I haven't seen a
single one (using Java 1.5.0), so either I am now feeding it a more
optimal document set or the Swing people have worked on the
implementation. In that case people using Java 1.4.x may see different
results.

> Word Perfect - There doesn't seem to be any converters for this =
format?

I'm actively working on this :) We have some proprietary code that will
become part of Aperture. Right now I cannot say how well it performs in
practice though, although we've never had complaints with our
proprietary apps.

The code uses a heuristic string extraction algorithm tuned for
WordPerfect documents. This may be an issue, e.g. when you also want to
display the extraction results to end users.

If you're interested: one way you can help me get the most out of it is
by sending me some example WordPerfect documents because I hardly have
those on my hard drive. Fake documents made with very new or old
WordPerfect versions are also most welcome.


Regards,

Chris
http://aduna.biz
--

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C62D93.47C59726
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C62D93.47C59726--

From java-user-return-18839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 16:13:41 2006
Return-Path: <java-user-return-18839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31878 invoked from network); 9 Feb 2006 16:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 16:13:39 -0000
Received: (qmail 40154 invoked by uid 500); 9 Feb 2006 16:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40121 invoked by uid 500); 9 Feb 2006 16:13:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40109 invoked by uid 99); 9 Feb 2006 16:13:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 08:13:33 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_WHOIS,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sackley@cfl.rr.com designates 65.32.5.131 as permitted sender)
Received: from [65.32.5.131] (HELO ms-smtp-01.tampabay.rr.com) (65.32.5.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 08:13:32 -0800
Received: from ms-mss-05 (ms-mss-05-smtp [10.10.4.16])
	by ms-smtp-01.tampabay.rr.com (8.13.4/8.13.4) with ESMTP id k19GDAPi013894
	for <java-user@lucene.apache.org>; Thu, 9 Feb 2006 11:13:11 -0500 (EST)
Received: from tampabay.rr.com (localhost [127.0.0.1])
 by ms-mss-05.tampabay.rr.com
 (iPlanet Messaging Server 5.2 HotFix 2.10 (built Dec 26 2005))
 with ESMTP id <0IUF00HR2H1YIA@ms-mss-05.tampabay.rr.com> for
 java-user@lucene.apache.org; Thu, 09 Feb 2006 11:13:10 -0500 (EST)
Received: from [10.10.6.21] (Forwarded-For: [67.168.63.52])
 by ms-mss-05.tampabay.rr.com (mshttpd); Thu, 09 Feb 2006 08:13:10 -0800
Date: Thu, 09 Feb 2006 08:13:10 -0800
From: sackley@cfl.rr.com
Subject: anyone interested in taking over textmining.org?
To: java-user@lucene.apache.org
Reply-to: sackley@apache.org
Message-id: <fe93b8057e9.7e9fe93b805@tampabay.rr.com>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 2.10 (built Dec 26 2005)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The TextMining.org website keeps getting hacked and I don't have the 
time to upgrade postnuke to a more secure version. Also, because of 
legal reasons I can't maintain the software. I am more than willing 
to "hand-off" the project to lucene or someone else. It's an apache 2 
license so anyone can branch at anytime and use any license they want. 
However, if someone wants to take over and gets my seal of approval, I 
will make the textmining.org home page redirect to your site. 

It extracts text from Word documents pretty solidly. If there are 
problems, they are caused by fast-saved files or files saved with the 
doc extensions that aren't actually Word documents (rtf, html). Unlike 
POI, it supports Word 6.0/95 documents. There are many ways it can be 
improved but they are trivial changes in my opinion. The core logic is 
solid and is used in commercial/gov't applications. 

Send me an email directly if you are interested. 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 18:18:20 2006
Return-Path: <java-user-return-18840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97782 invoked from network); 9 Feb 2006 18:18:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 18:18:05 -0000
Received: (qmail 96917 invoked by uid 500); 9 Feb 2006 18:17:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96880 invoked by uid 500); 9 Feb 2006 18:17:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96869 invoked by uid 99); 9 Feb 2006 18:17:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 10:17:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.217.128.51] (HELO unimail.uni-dortmund.de) (129.217.128.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 10:17:54 -0800
Received: from ls10pc13.cs.uni-dortmund.de (ls10pc13.cs.uni-dortmund.de [129.217.40.203])
	(authenticated bits=0)
	by unimail.uni-dortmund.de (8.13.5/8.13.5) with ESMTP id k19IHNCV004458
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NOT)
	for <java-user@lucene.apache.org>; Thu, 9 Feb 2006 19:17:28 +0100 (CET)
Subject: Boosting
From: Sebastian Menge <sebastian.menge@uni-dortmund.de>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Thu, 09 Feb 2006 19:17:17 +0100
Message-Id: <1139509037.4193.20.camel@ls10pc13.cs.uni-dortmund.de>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.3 
Content-Transfer-Encoding: 7bit
X-MailScanner-Information: UniDo-UniMail
X-MailScanner: Found to be clean
X-MailScanner-SpamCheck: not spam, SpamAssassin (Wertung=-4.205, benoetigt 5,
	autolearn=not spam, ALL_TRUSTED, AWL, BAYES_00)
X-MailScanner-From: sebastian.menge@uni-dortmund.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I dont know much about lucene's scoring, but my intuition tells me that
a boost of "2" tells lucene to regard that field/document as
"double-important", while a boost of "0.5" tells lucene to regard the
field/document as "half-important". Thus the boost is exponential, is
that right !?

If not, at what other scale does the boosting occur !?

Or, to put it more simple, what does a boost of "2" or "10" _mean_ in
contrast to a boost of "0.5" or "0.1" !?

TIA,

Sebastian.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 18:31:50 2006
Return-Path: <java-user-return-18841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5555 invoked from network); 9 Feb 2006 18:31:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 18:31:49 -0000
Received: (qmail 27746 invoked by uid 500); 9 Feb 2006 18:31:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27702 invoked by uid 500); 9 Feb 2006 18:31:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27668 invoked by uid 99); 9 Feb 2006 18:31:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 10:31:41 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Feb 2006 10:31:39 -0800
Received: (qmail 9670 invoked by uid 60001); 9 Feb 2006 18:31:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=EKxGycCtO6nRoHIkLxr/B9kpPZGOjb0AzC3BHMglWo7c7Hp3b5dy6lhC8LT8jlZojIWkhKJktCjOAwYUauJ4nMWfp+JXwpbiWwTOjel+dpyD3ibvAgHFUJ7WMqQl6E+oYmPpdVa6eqESs44LEqn91mCGq5oS7tuKTEoU8RHa1a4=  ;
Message-ID: <20060209183118.9668.qmail@web50307.mail.yahoo.com>
Date: Thu, 9 Feb 2006 10:31:18 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Word files
To: java-user@lucene.apache.org
In-Reply-To: <000001c62da7$c9d7a8a0$1e00a8c0@platoon>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm not sure if it will work better than what you've got, but you can try t=
he code from section 7.5 in Lucene in Action: http://www.lucenebook.com/sea=
rch?query=3Dword+document+microsoft

The code is free, even if you don't have the book.

Otis

----- Original Message ----
From: arnaudbuffet@free.fr
To: java-user@lucene.apache.org
Sent: Thu 09 Feb 2006 01:36:47 PM EST
Subject: Word files

Hello,
=20
I use the Poi Api to parse MSword files in order to index the content to
enable lucene search.
=20
For that I download the last jars from Poi (including the scratchdpad
one) and use the parser from lucenebook called POIWordDocHandler.=20
It works quiet good, but for some files the parser does not return the
all content but just a piece, for example just the 2 first lines. Does
anyone know the reason and can help me?=20
=20
- Here is the parser java code:
=20
  public String getDocument(InputStream is) throws
DocumentHandlerException {
=20
    String bodyText =3D null;
    try {
      WordDocument wd =3D new WordDocument(is);
      StringWriter docTextWriter =3D new StringWriter();     =20
      wd.writeAllText(new PrintWriter(docTextWriter));
      docTextWriter.close();
      bodyText =3D docTextWriter.toString();
       }
       .
  return bodyText;
=20
- Here is an example of text from word doc file for witch the bodyText
variable return from the parser just return the first 14 words
'y=C4=B1l=C4=B1ndan' (the text is in Turkish):
=20
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan=
 y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1ndan y=C4=B1l=C4=B1nda=
n
y=C4=B1l=C4=B1ndan
=20
Thanks for your help, best regards
=20
A.
=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 18:37:41 2006
Return-Path: <java-user-return-18842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7936 invoked from network); 9 Feb 2006 18:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 18:37:40 -0000
Received: (qmail 40559 invoked by uid 500); 9 Feb 2006 18:37:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40535 invoked by uid 500); 9 Feb 2006 18:37:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40516 invoked by uid 99); 9 Feb 2006 18:37:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 10:37:33 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Feb 2006 10:37:33 -0800
Received: (qmail 11405 invoked by uid 60001); 9 Feb 2006 18:37:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=xG5gAtFEOWzKk/BbvLeiKUprHtRdqaaMjfmqj8/PalvKwS1dG6z8iDgWgDzjqCLfgJVc2n0Nu9nDacaQoQfbuE8e5hevQ3hbMZn4QfB9CbkQ9h/nwsqamKFQY1d7aj6DNe3NNf07xLu917QZSdNg1yfa8YDcvDO1k8wu00WcqrY=  ;
Message-ID: <20060209183712.11403.qmail@web50308.mail.yahoo.com>
Date: Thu, 9 Feb 2006 10:37:12 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: opening index readers and writers to keep indexes updated
To: java-user@lucene.apache.org
In-Reply-To: <6026e8b0602090759u1fcb6938pe8c10fe881be31d8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Definitely batch your adds/updates/deletes, and reuse the IndexReader as you described instead of opening a new one for every search.  I _believe_ you can keep the same IndexWriter for adds, as long as you don't overlap it with an IndexReader that does deletes.  If you have Lucene in Action, check out Concurrency Rules, section 2.9.1: http://www.lucenebook.com/search?query=concurrency+rules

Otis


----- Original Message ----
From: Paulo Silveira <paulo@paulo.com.br>
To: java-user@lucene.apache.org
Sent: Thu 09 Feb 2006 10:59:17 AM EST
Subject: opening index readers and writers to keep indexes updated

Hello everybody.

I have a big index that will be stored in the FS. I have lots of
updates, insertions and deletions in the index, and I would like to
minimize the number of "phatom reads".

I ve seen in the wiki this link:

http://wiki.apache.org/jakarta-lucene/UpdatingAnIndex

So, what about my idea:

- A singleton SearchEngine
- SearchEngine has a IndexReader attribute, and _no_ index writer.
- When inserting a new Document, open a writer, writes, close and the
replace the old reader for a new one.
- When deleting, open a reader, delete, replace the older reader for
this opened reader.
- The update method deletes than inserts.
- When searching, use the attribute IndexReader

Now some questions:

Is it too bad to open/close a writer every time I write on the index?

What about opening a new IndexReader for each new search, instead of
keeping the IndexReader attribute?

Would it be a lot better to batch updates? I could have a stack of
documents to be updated, and I would only write to the indexes when
the documentsToBeUpdated.size() reaches a certain number.

thanks a lot.
--
Paulo Silveira
http://www.paulo.com.br/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 18:51:20 2006
Return-Path: <java-user-return-18843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15491 invoked from network); 9 Feb 2006 18:51:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 18:51:20 -0000
Received: (qmail 67053 invoked by uid 500); 9 Feb 2006 18:51:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67031 invoked by uid 500); 9 Feb 2006 18:51:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67020 invoked by uid 99); 9 Feb 2006 18:51:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 10:51:13 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Feb 2006 10:51:11 -0800
Received: (qmail 44473 invoked by uid 60001); 9 Feb 2006 18:50:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=jxcoKE0wbktTzTfdxUNkq6YATaTEleMEOr31Pzu7bN0z3iZB4Xjz9l0csIdV9OuJj+6vBD7ldUNjD42ZdSgbzRunw/80EwIWYewMMPrmiNa+80S1YnLtWUzpZPZxm/byfOZnUtAu4OOY2FDtkcT+LYDhghnoriBb3jLuC6J8TKc=  ;
Message-ID: <20060209185049.44470.qmail@web50310.mail.yahoo.com>
Date: Thu, 9 Feb 2006 10:50:49 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Queries not derived from the text index
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0602082259570.20913@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel,
If you end up trying all 3 options here, please report your findings (speed/memory).  I'm about to rework some of the Lucene stuff behind Simpy.com, and am looking at Filters used this way (+ sort by date or some int) more and more.

Thanks,
Otis


----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Thu 09 Feb 2006 02:06:55 AM EST
Subject: Re: Queries not derived from the text index


: I think that overriding getFieldQuery would work, yeah... you're right.
:    It's just a matter of comparing efficienty of this:
:
:      BooleanQuery of (TermQuery, FilteredQuery of (AllDocsQuery, Filter))
:
: to the efficiency of this:
:
:      FilteredQuery of (TermQuery, Filter)

the third option is as easy to impliment as the first, and probably close
to being as efficient as the second...

       BooleanQuery of (TermQuery, ConstantScoreQuery(Filter))



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 19:03:08 2006
Return-Path: <java-user-return-18844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21944 invoked from network); 9 Feb 2006 19:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 19:03:07 -0000
Received: (qmail 89332 invoked by uid 500); 9 Feb 2006 19:03:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89064 invoked by uid 500); 9 Feb 2006 19:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89053 invoked by uid 99); 9 Feb 2006 19:03:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 11:03:01 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Feb 2006 11:03:00 -0800
Received: (qmail 26636 invoked by uid 60001); 9 Feb 2006 19:02:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=BZQAizLESvMCqlFCJBAaCz7dXUAB98Pe4s/AUOdKEllai0a0lqF/Jc+m85N2qyrrBMiRU7M0Bd2l3M8/0/fC7fgB5y8W3R3czkqF++QxpcugV1ozMWT8BXRwnicpRF0fb8opWe9YhAj4cUKQWriS/77MPx59npcB9qRsqXpV9tE=  ;
Message-ID: <20060209190239.26634.qmail@web50313.mail.yahoo.com>
Date: Thu, 9 Feb 2006 11:02:39 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: 1.9 lucene version
To: java-user@lucene.apache.org
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D131050E7F95@MAIL01.wescodist.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Antworten:
1) No date set yet
2) I've been happily using 1.9 in production - see http://www.simpy.com/
3) Yes, there have been some memory improvements - see CHANGES.txt file in Subversion

Otis

Hello all,
    I have a couple of questions for the community about the 1.9
Lucene version.  As I understand it, this has not been released and I
can't find an approximate date for release (I know you can download the
development version and compile it).  I see a nightly build going on
(http://lucene.apache.org/java/docs/index.html), but I can't seem to
find a release date.

    So,
        1) Anyone know a release date for 1.9?
        2) Also, if this is not a soon time, is anyone actually
using 1.9 in production?
        3) General question on improvement: memory - has there
been any memory improvements as well in 1.9

Thanks all!
Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 19:05:48 2006
Return-Path: <java-user-return-18845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22768 invoked from network); 9 Feb 2006 19:05:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 19:05:48 -0000
Received: (qmail 96285 invoked by uid 500); 9 Feb 2006 19:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96261 invoked by uid 500); 9 Feb 2006 19:05:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96250 invoked by uid 99); 9 Feb 2006 19:05:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 11:05:42 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Feb 2006 11:05:41 -0800
Received: (qmail 64206 invoked by uid 60001); 9 Feb 2006 19:05:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=2FIdcyPdIw4nm6o7hSKByxOnLcaGXHBAGCzdC3FbtQAVpDN3XyfwjM/J3FW/bpz4gW4zR8K9UWbVWZfe4SICKs+XtEf26eXxh1roojGry05m93WQGHLTXgcTXCwa+MmkBNdmoKGwXpiMgLUCIdItG2mhhDLoGqGW7kwAOptT/xg=  ;
Message-ID: <20060209190520.64204.qmail@web50302.mail.yahoo.com>
Date: Thu, 9 Feb 2006 11:05:20 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to get mapping of query terms to number of their occurrences in a doc?
To: java-user@lucene.apache.org
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC1C@ehost011-3.exch011.intermedia.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There is a HighFreqTerms class in contib/misc..... that may be interesting to you.  I just modified it slightly locally last night to limit things to a specific field, and will commit it later.

Otis

----- Original Message ----
From: Dmitry Goldenberg <dmitry.goldenberg@weblayers.com>
To: java-user@lucene.apache.org
Sent: Mon 06 Feb 2006 05:34:05 PM EST
Subject: How to get mapping of query terms to number of their occurrences in a doc?

Given a query, I want to be able to, for each query term, get the number of occurrences of the term.  I have tried what I'm including below and it does not seem to provide reliable results.  Seems to work fine with exact matching but as soon as stemming kicks in, all bets are off as to value of the number of occurrences returned.
 
Any ideas, anyone?  Can this be written in a simpler and/or more efficient way?
Thanks -
 
      int totalOccurrences = 0;
 
      reader = IndexReader.open(getDirectory(indexDirPath));
      HashSet terms = new HashSet();
      query.extractTerms(terms);
 
      TermFreqVector[] tfvs = reader.getTermFreqVectors(docId);
      if (tfvs != null) {

        // For each term frequency vector (i.e. for each field)
        for (int i = 0; i < tfvs.length; i++) {
          String field = tfvs[i].getField();
          String[] strTerms = tfvs[i].getTerms();
          int[] tfs = tfvs[i].getTermFrequencies();
 
          if (strTerms != null) {

            // For each term in the query
            for (Iterator iter = terms.iterator(); iter.hasNext();) {

              Term term = (Term) iter.next();
              // For each term in the vector
              for (int j = 0; j < strTerms.length; j++) {

                // If found the query term among the vector terms
                if (field.equals(term.field()) && strTerms[j].equals(term.text())) {

                  // Add the term frequency to the total
                  totalOccurrences += tfs[j];

                }
              }
            }
          }
        }
      }




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 20:09:06 2006
Return-Path: <java-user-return-18846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53243 invoked from network); 9 Feb 2006 20:09:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 20:09:06 -0000
Received: (qmail 73860 invoked by uid 500); 9 Feb 2006 20:08:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73779 invoked by uid 500); 9 Feb 2006 20:08:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73760 invoked by uid 99); 9 Feb 2006 20:08:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 12:08:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 12:08:57 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.3/8.13.3) with ESMTP id k19K8ZcI044541
	for <java-user@lucene.apache.org>; Thu, 9 Feb 2006 21:08:35 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Too many required clauses for a BooleanQuery
Date: Thu, 9 Feb 2006 21:08:34 +0100
User-Agent: KMail/1.8.2
References: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com> <Pine.LNX.4.58.0602082249510.20913@hal.rescomp.berkeley.edu> <c88eeafb0602090625x23400777y1d50f758c26b25a@mail.gmail.com>
In-Reply-To: <c88eeafb0602090625x23400777y1d50f758c26b25a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602092108.34738.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 09 February 2006 15:25, Kevin Dutcher wrote:
> > I don't know a lot about the error your encountering (or not encountering
> > as the case may be) but please for hte love of all that is sane use a
> > Filter instead of putting all those categories in your Query.
> >
> > Your search performance and your scores will thank you.
> 
> 
> I need all the documents returned from the search and am manipulating the
> results with a custom HitCollector, therefore I can't use filters.

The development version does not have have the "More than 32
required/prohibited clauses in query" exception. You might give it a try.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 20:24:12 2006
Return-Path: <java-user-return-18847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60445 invoked from network); 9 Feb 2006 20:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 20:24:11 -0000
Received: (qmail 92319 invoked by uid 500); 9 Feb 2006 20:24:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92285 invoked by uid 500); 9 Feb 2006 20:24:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92274 invoked by uid 99); 9 Feb 2006 20:24:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 12:24:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 12:24:04 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.13.3/8.13.3) with ESMTP id k19KNgF1030821
	for <java-user@lucene.apache.org>; Thu, 9 Feb 2006 21:23:42 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Too many required clauses for a BooleanQuery
Date: Thu, 9 Feb 2006 21:23:41 +0100
User-Agent: KMail/1.8.2
References: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com>
In-Reply-To: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602092123.41789.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 09 February 2006 00:52, Kevin Dutcher wrote:
> Hey Everyone,
> 
> I'm running into the "More than 32 required/prohibited clauses in query"
> exception when running a query. I thought I understood the problem but the
> following two scenarios confuse me.
> 
> 1st - No Error
> 33 required clauses plus additional clauses that are left off b/c they
> are the same as the second scenario
> =============================================
> (categorization:10102617 AND categorization:10102621 AND
> categorization:10102625 AND categorization:10102629 AND
> categorization:10102633 AND categorization:10102637 AND
> categorization:10102641 AND categorization:10102645 AND
> categorization:10102649 AND categorization:10102653 AND
> categorization:10102657 AND categorization:10102661 AND
> categorization:10102665 AND categorization:10102669 AND
> categorization:10102673 AND categorization:10102677 AND
> categorization:10102681 AND categorization:10102685 AND
> categorization:10102689 AND categorization:10102693 AND
> categorization:10102697 AND categorization:10102701 AND
> categorization:10102705 AND categorization:10102709 AND
> categorization:10102713 AND categorization:10102717 AND
> categorization:10102721 AND categorization:10102725 AND
> categorization:10102729 AND categorization:10102733 AND
> categorization:10102737 AND categorization:10102741 AND
> categorization:10102745) AND ...
> 
> 2nd - Error
> The 33 required clauses above with the addition of a required
> clause that is 3 OR'd clauses
> ============================================
> ((categorization:10102405 OR categorization:10102409 OR
> categorization:10102413) AND categorization:10102617 AND
> categorization:10102621 AND categorization:10102625 AND
> categorization:10102629 AND categorization:10102633 AND
> categorization:10102637 AND categorization:10102641 AND
> categorization:10102645 AND categorization:10102649 AND
> categorization:10102653 AND categorization:10102657 AND
> categorization:10102661 AND categorization:10102665 AND
> categorization:10102669 AND categorization:10102673 AND
> categorization:10102677 AND categorization:10102681 AND
> categorization:10102685 AND categorization:10102689 AND
> categorization:10102693 AND categorization:10102697 AND
> categorization:10102701 AND categorization:10102705 AND
> categorization:10102709 AND categorization:10102713 AND
> categorization:10102717 AND categorization:10102721 AND
> categorization:10102725 AND categorization:10102729 AND
> categorization:10102733 AND categorization:10102737 AND
> categorization:10102741 AND categorization:10102745) AND ...
> 
> I can add additional required clauses to the 1st scenario without any
> problems. So why am I seeing the error in the second scenario and not the
> first? After discovering the error, I expected to see it in the first
> scenario also. Is there anyway around this error?
> 
> As a side note, it is very unlikely that this will be encountered in the
> real world, but b/c we are dealing with content categorization it is still
> possible.

One more thing: in case these queries are generated, you might
consider building the corresponding (nested) BooleanQuery yourself
instead of using the QueryParser.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 20:43:06 2006
Return-Path: <java-user-return-18848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73797 invoked from network); 9 Feb 2006 20:43:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 20:43:06 -0000
Received: (qmail 12479 invoked by uid 500); 9 Feb 2006 20:42:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12457 invoked by uid 500); 9 Feb 2006 20:42:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12445 invoked by uid 99); 9 Feb 2006 20:42:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 12:42:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kdutcher@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 12:42:58 -0800
Received: by wproxy.gmail.com with SMTP id i31so168920wra
        for <java-user@lucene.apache.org>; Thu, 09 Feb 2006 12:42:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lhb39e3kaklQLfMDgO/1/FRA7sx+SkfQtE0qahe0NRyTYlwPjjnJ6pAcol9DeSRZ6/buObfeh5egGKYQesUxhTliahR2RDRCySzy9GT8ZxDNI87TiO7Zktk6gTNgpvIUdX3W8SNjjIcUrGH85ivD3XZ+S+LHDdiLLhqQJ2NjbAM=
Received: by 10.54.122.20 with SMTP id u20mr9231209wrc;
        Thu, 09 Feb 2006 12:42:30 -0800 (PST)
Received: by 10.54.67.12 with HTTP; Thu, 9 Feb 2006 12:42:29 -0800 (PST)
Message-ID: <c88eeafb0602091242u5ddfec77o9bc6311dac42b583@mail.gmail.com>
Date: Thu, 9 Feb 2006 15:42:29 -0500
From: Kevin Dutcher <kdutcher@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Too many required clauses for a BooleanQuery
In-Reply-To: <200602092123.41789.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10856_22819923.1139517749465"
References: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com>
	 <200602092123.41789.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10856_22819923.1139517749465
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

>
> One more thing: in case these queries are generated, you might
> consider building the corresponding (nested) BooleanQuery yourself
> instead of using the QueryParser.
>
> Regards,
> Paul Elschot



I'll give that a try.  Thanks Paul.

------=_Part_10856_22819923.1139517749465--

From java-user-return-18849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 21:15:35 2006
Return-Path: <java-user-return-18849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86453 invoked from network); 9 Feb 2006 21:15:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 21:15:34 -0000
Received: (qmail 60503 invoked by uid 500); 9 Feb 2006 21:15:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60465 invoked by uid 500); 9 Feb 2006 21:15:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60453 invoked by uid 99); 9 Feb 2006 21:15:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 13:15:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 13:15:24 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C91FB5B772; Thu,  9 Feb 2006 13:14:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BB9A97F403
	for <java-user@lucene.apache.org>; Thu,  9 Feb 2006 13:14:55 -0800 (PST)
Date: Thu, 9 Feb 2006 13:14:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Too many required clauses for a BooleanQuery
In-Reply-To: <c88eeafb0602090625x23400777y1d50f758c26b25a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602091311490.18456@hal.rescomp.berkeley.edu>
References: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com> 
 <Pine.LNX.4.58.0602082249510.20913@hal.rescomp.berkeley.edu>
 <c88eeafb0602090625x23400777y1d50f758c26b25a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I need all the documents returned from the search and am manipulating the
: results with a custom HitCollector, therefore I can't use filters.

I don't understand this comment.  There are certianly methods in the
Searchble interface that allow you to use both a Filter and a HitCollector
together -- as for "need all the documents returned from the search" ...
I'm not suggesting you filter out any docs your query doesn't allready
restrict out because of hte required clauses.  I'm just saying that
instead of a few dozen required clauses, you use a Filter like the one
previously posted in this thread.  if you need to combine those "required"
filters with other optional condition,s you cna do that using a
ChainedFilter (or writting your own custom Filter that unions the BitSets
yourself)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 21:47:06 2006
Return-Path: <java-user-return-18850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 699 invoked from network); 9 Feb 2006 21:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 21:47:03 -0000
Received: (qmail 5399 invoked by uid 500); 9 Feb 2006 21:46:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5375 invoked by uid 500); 9 Feb 2006 21:46:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5357 invoked by uid 99); 9 Feb 2006 21:46:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 13:46:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kdutcher@gmail.com designates 64.233.184.203 as permitted sender)
Received: from [64.233.184.203] (HELO wproxy.gmail.com) (64.233.184.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 13:46:53 -0800
Received: by wproxy.gmail.com with SMTP id 71so232336wri
        for <java-user@lucene.apache.org>; Thu, 09 Feb 2006 13:46:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DDExqgHy220xzkmaOdbK8TBcjaP4HMV21InJwtTKEG7vzGzuaCZFZLAmUQusqlqRTt1hfG3UlTNxWjreDFPZXPjFiOSvYcoIRc9n52orxPfPCBgBmR8/EUO8HhiTkeqteffFdoPOK6Y8SycOOKRLBbXtItEjXox1YGk7nYpu0pM=
Received: by 10.54.152.14 with SMTP id z14mr6759081wrd;
        Thu, 09 Feb 2006 13:46:32 -0800 (PST)
Received: by 10.54.67.12 with HTTP; Thu, 9 Feb 2006 13:46:32 -0800 (PST)
Message-ID: <c88eeafb0602091346q61fffd56t1f19018accc9ec9a@mail.gmail.com>
Date: Thu, 9 Feb 2006 16:46:32 -0500
From: Kevin Dutcher <kdutcher@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Too many required clauses for a BooleanQuery
In-Reply-To: <Pine.LNX.4.58.0602091311490.18456@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11132_5617240.1139521592053"
References: <c88eeafb0602081552g1ede5228l1ff5bd96f569ed9@mail.gmail.com>
	 <Pine.LNX.4.58.0602082249510.20913@hal.rescomp.berkeley.edu>
	 <c88eeafb0602090625x23400777y1d50f758c26b25a@mail.gmail.com>
	 <Pine.LNX.4.58.0602091311490.18456@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_11132_5617240.1139521592053
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks Hoss... You're absolutely right!

Kevin


On 2/9/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I need all the documents returned from the search and am manipulating
> the
> : results with a custom HitCollector, therefore I can't use filters.
>
> I don't understand this comment.  There are certianly methods in the
> Searchble interface that allow you to use both a Filter and a HitCollecto=
r
> together -- as for "need all the documents returned from the search" ...
> I'm not suggesting you filter out any docs your query doesn't allready
> restrict out because of hte required clauses.  I'm just saying that
> instead of a few dozen required clauses, you use a Filter like the one
> previously posted in this thread.  if you need to combine those "required=
"
> filters with other optional condition,s you cna do that using a
> ChainedFilter (or writting your own custom Filter that unions the BitSets
> yourself)
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11132_5617240.1139521592053--

From java-user-return-18851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 22:30:44 2006
Return-Path: <java-user-return-18851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23626 invoked from network); 9 Feb 2006 22:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 22:30:43 -0000
Received: (qmail 96898 invoked by uid 500); 9 Feb 2006 22:30:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96606 invoked by uid 500); 9 Feb 2006 22:30:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96595 invoked by uid 99); 9 Feb 2006 22:30:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 14:30:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 14:30:35 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 9 Feb 2006 14:30:14 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C62DC8.6489FE46"
Subject: RE: How to get mapping of query terms to number of their occurrences in a doc?
Date: Thu, 9 Feb 2006 14:27:16 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC2B@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC2B@ehost011-3.exch011.intermedia.net>
Thread-Topic: How to get mapping of query terms to number of their occurrences in a doc?
Thread-Index: AcYtWMsOdz+GhCIhRDSDR45Umk4OXAAbzAMs
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC1C@ehost011-3.exch011.intermedia.net> <Pine.LNX.4.58.0602071604260.9474@hal.rescomp.berkeley.edu> <FAB00A8DC59FAB42B13C2B3B0F687701E7CC24@ehost011-3.exch011.intermedia.net> <Pine.LNX.4.58.0602080952440.17683@hal.rescomp.berkeley.edu> <FAB00A8DC59FAB42B13C2B3B0F687701E7CC25@ehost011-3.exch011.intermedia.net> <7337EC0B-16CB-47CD-99CB-A4D00B70F71D@ehatchersolutions.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2006 22:30:14.0232 (UTC) FILETIME=[65444580:01C62DC8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62DC8.6489FE46
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

It seems, from the javadoc, that the 10K default is enforced to avoid a =
possible OutOfMemoryError.  I wonder how safe/unsafe it is to set the =
value to maximum possible, if we don't impose any limit on customers' =
document sizes.  Perhaps, the best solution is to expose the value as =
configurable by the customer, rather than impose the 10K limit or run =
the risk of an out-of-memory condition...

________________________________

From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Thu 2/9/2006 1:10 AM
To: java-user@lucene.apache.org
Subject: Re: How to get mapping of query terms to number of their =
occurrences in a doc?



This is a real gotcha with Lucene in it's out of the box=20
configuration.  In the several applications I've built to index=20
documents I've always hit this and had to set the maxFieldLength to=20
its maximum possible value.  Is there still an argument to be made to=20
keep the default at 10K or would it be reasonable to bump this up=20
even if there are, the few, cases where setting it lower is=20
desirable?   We made the compound file index be the default to=20
prevent file handle limitations at the expense of some (generally=20
irrelevant) performance, so maybe we could also make this more common=20
setting the default also?

        Erik

On Feb 8, 2006, at 2:17 PM, Dmitry Goldenberg wrote:

> Duh! Bingo! Mistery solved. I should have thought of this :)
> The discrepancies come in with larger documents, definitely > 10K=20
> terms which is Lucene's default maxFieldLength.
>
> Thanks for your help, Chris
>
> - Dmitry
>
> ________________________________
>
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: Wed 2/8/2006 10:04 AM
> To: java-user@lucene.apache.org
> Subject: RE: How to get mapping of query terms to number of their=20
> occurrences in a doc?
>
>
>
>
> : That's what I did, for debugging.  The query is "biology", and=20
> here's
> : what the API tells me for term frequencies:
> : biolog 15
> : biologi 31
> : biologist 4
> :
> : I actually see 13 occurrences of "biologist" and "biologists", 64
> : occurrences of "biology", 27 occurrences of "biological".
> :
> : I see "inform 22" but the actual count of the word "information"=20
> in the
> : document is 33.  But "ioniz 7" is correct.
>
> I think I missunderstood what you ment when you said the counts don't
> match up.  Are you comparing the number you get from that code with=20
> the
> number of times you personally see the word in the source document=20
> before
> it has been analyzed?
>
> If so, then there could be a couple of things going on ... i would=20
> start
> by using a tool like Luke to see the actual lists of Terms for each=20
> doc --
> there may be something else your analyzer is doing that you don't=20
> realize.
>
> It's also possible that you are hitting the maxFieldLength in the
> IndexWriter ... when that happens IndexWriter throws away any=20
> remaining
> tokens, so if your documenst are really large.
>
> Lastly, I would add a *lot* more debugging to your code.  Print out=20
> the
> contents of "terms", when you loop over "tfvs" print out the field=20
> and the
> full list of strTerms, in the inner most loop when you incriment the
> count, print out the field/text/and count.
>
> that's the best advise i have for spotting what's wrong.
>
>
>
> : ________________________________
> :
> : From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> : Sent: Tue 2/7/2006 4:10 PM
> : To: java-user@lucene.apache.org
> : Subject: Re: How to get mapping of query terms to number of their=20
> occurrences in a doc?
> :
> :
> :
> :
> : A cursory reading of your code looks ok ... stemming shouldn't be=20
> an issue
> : as long as your measure of success is comparing docs that match your
> : orriginal query with the counts you get out.
> :
> : What i mean by that is that any stemming should have already been=20
> taken
> : care of when your query object was constructed (either by you=20
> manually, or
> : by QueryParser).  the direct equals comparisons you are dong=20
> should be
> : fine.
> :
> : have you tried adding logging of the raw term field/text and the=20
> freq
> : counts you get back to see if that helps you spot the problem?
> :
> :
> : : Date: Mon, 6 Feb 2006 14:34:05 -0800
> : : From: Dmitry Goldenberg <dmitry.goldenberg@weblayers.com>
> : : Reply-To: java-user@lucene.apache.org
> : : To: java-user@lucene.apache.org
> : : Subject: How to get mapping of query terms to number of their=20
> occurrences
> : :     in a doc?
> : :
> : : Given a query, I want to be able to, for each query term, get=20
> the number of occurrences of the term.  I have tried what I'm=20
> including below and it does not seem to provide reliable results. =20
> Seems to work fine with exact matching but as soon as stemming=20
> kicks in, all bets are off as to value of the number of occurrences=20
> returned.
> : :
> : : Any ideas, anyone?  Can this be written in a simpler and/or=20
> more efficient way?
> : : Thanks -
> : :
> : :       int totalOccurrences =3D 0;
> : :
> : :       reader =3D IndexReader.open(getDirectory(indexDirPath));
> : :       HashSet terms =3D new HashSet();
> : :       query.extractTerms(terms);
> : :
> : :       TermFreqVector[] tfvs =3D reader.getTermFreqVectors(docId);
> : :       if (tfvs !=3D null) {
> : :
> : :         // For each term frequency vector (i.e. for each field)
> : :         for (int i =3D 0; i < tfvs.length; i++) {
> : :           String field =3D tfvs[i].getField();
> : :           String[] strTerms =3D tfvs[i].getTerms();
> : :           int[] tfs =3D tfvs[i].getTermFrequencies();
> : :
> : :           if (strTerms !=3D null) {
> : :
> : :             // For each term in the query
> : :             for (Iterator iter =3D terms.iterator(); iter.hasNext
> ();) {
> : :
> : :               Term term =3D (Term) iter.next();
> : :               // For each term in the vector
> : :               for (int j =3D 0; j < strTerms.length; j++) {
> : :
> : :                 // If found the query term among the vector terms
> : :                 if (field.equals(term.field()) && strTerms
> [j].equals(term.text())) {
> : :
> : :                   // Add the term frequency to the total
> : :                   totalOccurrences +=3D tfs[j];
> : :
> : :                 }
> : :               }
> : :             }
> : :           }
> : :         }
> : :       }
> : :
> :
> :
> :
> : -Hoss
> :
> :
> :=20
> ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> :
> :
> :
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C62DC8.6489FE46
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C62DC8.6489FE46--

From java-user-return-18852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 23:03:21 2006
Return-Path: <java-user-return-18852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39265 invoked from network); 9 Feb 2006 23:03:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 23:03:21 -0000
Received: (qmail 65067 invoked by uid 500); 9 Feb 2006 23:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65035 invoked by uid 500); 9 Feb 2006 23:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65017 invoked by uid 99); 9 Feb 2006 23:03:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:03:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ajassal@gmail.com designates 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO zproxy.gmail.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:03:11 -0800
Received: by zproxy.gmail.com with SMTP id k1so287883nzf
        for <java-user@lucene.apache.org>; Thu, 09 Feb 2006 15:02:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Tz5T9zKIVOXHr4CqDvpJ+FshMa8N1bq1fZeYGsZyiP1OREz5jf9apIp8MEdWQdeSM6uo8OuqPkeb5bS6r/iyL8gQuHVueKXrqIsPI0426kbyidRbFFb6Av0ay7lwbUk6Hmjt2+LADSHnQCzzDBciyhES/Wra3BVSHLEryhxmHeQ=
Received: by 10.36.224.25 with SMTP id w25mr1458004nzg;
        Thu, 09 Feb 2006 15:02:50 -0800 (PST)
Received: by 10.36.39.10 with HTTP; Thu, 9 Feb 2006 15:02:50 -0800 (PST)
Message-ID: <12657e140602091502t33802d3aseabd017648cbd402@mail.gmail.com>
Date: Thu, 9 Feb 2006 15:02:50 -0800
From: Amrit Jassal <ajassal@gmail.com>
To: java-user@lucene.apache.org
Subject: Custom filters and booleanquery (MUST_NOT)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18622_3857417.1139526170342"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_18622_3857417.1139526170342
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I am experimenting with using a custom filter with QueryParser and ran into
some unanticipated issues with using NOT terms. I narrowed down the issue
into the following test case. I am expecting a MUST_NOT booleanclause withi=
n
a booleanquery to return a resultset that is the complement of a MUST
clause. Can filters not be used for negative queries (such as "-term:xxx")
like this?

BTW I have checked with the latest SVN codebase as well.

Thanks for any hints...

=3D=3D=3D=3D=3D

import java.io.IOException;
import java.util.BitSet;
import java.util.Iterator;

import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.Filter;
import org.apache.lucene.search.FilteredQuery;
import org.apache.lucene.search.Hit;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.MatchAllDocsQuery;
import org.apache.lucene.store.RAMDirectory;

import junit.framework.TestCase;

public class FilteredQueryTest extends TestCase {
    private class MyFilter extends Filter {
        MyFilter(BitSet bits) {
            this.bits=3D bits;
        }
        @Override
        public BitSet bits(IndexReader arg0) throws IOException {
            return this.bits;
        }
        private BitSet bits;
    }
    public void setUp() throws Exception {
        RAMDirectory indexStore =3D new RAMDirectory ();
        IndexWriter writer =3D new IndexWriter (indexStore, new
SimpleAnalyzer(), true);
        Document doc =3D new Document();
        doc.add(new Field("tag", "t1", Field.Store.YES,
Field.Index.UN_TOKENIZED));
        writer.addDocument(doc);
        doc =3D new Document();
        doc.add(new Field("tag", "t2", Field.Store.YES,
Field.Index.UN_TOKENIZED));
        writer.addDocument(doc);
        writer.optimize ();
        writer.close();
        this.searcher =3D new IndexSearcher (indexStore);
    }

    public void testFilter() {
        try {
            BitSet bits =3D new BitSet(this.searcher.maxDoc());
            bits.set(1);
            FilteredQuery fq =3D new FilteredQuery(new MatchAllDocsQuery(),
new MyFilter(bits));
            BooleanQuery bquery =3D new BooleanQuery();
            bquery.add(new BooleanClause(fq, BooleanClause.Occur.MUST));
            Hits hits =3D this.searcher.search(bquery);
            assertTrue(hits.length() =3D=3D 1);
            for (Iterator h =3D hits.iterator(); h.hasNext(); ) {
                assertTrue(((Hit)h.next()).getId() =3D=3D 1);
            }
            bquery =3D new BooleanQuery();
            bquery.add(new BooleanClause(fq, BooleanClause.Occur.MUST_NOT))=
;
            hits =3D this.searcher.search(bquery);
            assertTrue(hits.length() =3D=3D 1);       // <<<<<<<<< returns =
0,
expecting doc #2 (t2) to return...
            for (Iterator h =3D hits.iterator(); h.hasNext(); ) {
                assertTrue(((Hit)h.next()).getId() =3D=3D 2);
            }
        } catch (Exception e) {
            e.printStackTrace();
            fail();
        }
    }

    private IndexSearcher searcher;
}

------=_Part_18622_3857417.1139526170342--

From java-user-return-18853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 09 23:15:31 2006
Return-Path: <java-user-return-18853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45159 invoked from network); 9 Feb 2006 23:15:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Feb 2006 23:15:30 -0000
Received: (qmail 92640 invoked by uid 500); 9 Feb 2006 23:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92607 invoked by uid 500); 9 Feb 2006 23:15:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92590 invoked by uid 99); 9 Feb 2006 23:15:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:15:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 15:15:21 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 92C905B772; Thu,  9 Feb 2006 15:14:58 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 80CF57F403
	for <java-user@lucene.apache.org>; Thu,  9 Feb 2006 15:14:58 -0800 (PST)
Date: Thu, 9 Feb 2006 15:14:58 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Custom filters and booleanquery (MUST_NOT)
In-Reply-To: <12657e140602091502t33802d3aseabd017648cbd402@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602091507360.25822@hal.rescomp.berkeley.edu>
References: <12657e140602091502t33802d3aseabd017648cbd402@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I am experimenting with using a custom filter with QueryParser and ran into
: some unanticipated issues with using NOT terms. I narrowed down the issue

    ...

:             bquery = new BooleanQuery();
:             bquery.add(new BooleanClause(fq, BooleanClause.Occur.MUST_NOT));
:             hits = this.searcher.search(bquery);
:             assertTrue(hits.length() == 1);       // <<<<<<<<< returns 0, expecting doc #2 (t2) to return...

...this isn't really a Filter issue at all, you're trying to execute a
query that only contains prohibited (ie: MUST_NOT) clauses.  Thus you are
not positively selecting anything -- this is one of hte main use for
MatchAllDocsQuery, try...


          bquery = new BooleanQuery();
          bquery.add(new BooleanClause(fq, BooleanClause.Occur.MUST_NOT));
          bquery.add(new BooleanClause(new MatchAllDocsQuery(),
                     BooleanClause.Occur.MUST));
          hits = this.searcher.search(bquery);
          assertTrue(hits.length() == 1);

...incidently, if you are constructing a FilteredQuery arround a
MatchAllDocsQuery, you might as well use a ConstantScoreQuery instead.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 00:16:05 2006
Return-Path: <java-user-return-18854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73040 invoked from network); 10 Feb 2006 00:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 00:15:55 -0000
Received: (qmail 74575 invoked by uid 500); 10 Feb 2006 00:15:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74548 invoked by uid 500); 10 Feb 2006 00:15:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74531 invoked by uid 99); 10 Feb 2006 00:15:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:15:46 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alexander.salamanca@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 16:15:46 -0800
Received: by wproxy.gmail.com with SMTP id 68so237106wri
        for <java-user@lucene.apache.org>; Thu, 09 Feb 2006 16:15:25 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DGvFlh+OceajNSWqkeNtGpgDYiGs2KoEF9X3vEmdnpeha1pvPIL/zvMtHp7WHDCZHwb0SAbDZHUw+H4PpIcVRUqHEM+Sdmg4mJQi3jz2K2ErvZHHb92BH1ZtWL70vVzJD/+SSZCuZ7WmEQWOMsYIDfByR/f9WcUSj+eOtEUoCAM=
Received: by 10.65.181.17 with SMTP id i17mr2311809qbp;
        Thu, 09 Feb 2006 16:15:25 -0800 (PST)
Received: by 10.65.218.15 with HTTP; Thu, 9 Feb 2006 16:15:25 -0800 (PST)
Message-ID: <32af47fe0602091615n7b14c7ebu9d6ded82868287ed@mail.gmail.com>
Date: Thu, 9 Feb 2006 19:15:25 -0500
From: "P. Alex. Salamanca R." <alexander.salamanca@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Build vs. Buy?
In-Reply-To: <03da01c62d64$63305810$ca03010a@theoldstore.propelsystems.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19237_15452386.1139530525486"
References: <9778DA4F3D53D04B9AE80AC64AC073A305745B13@corpx.dicarta.com>
	 <03da01c62d64$63305810$ca03010a@theoldstore.propelsystems.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19237_15452386.1139530525486
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On the other hand, if you want be the most cheapest, why don't give a chanc=
e
to google search appliance?

------=_Part_19237_15452386.1139530525486--

From java-user-return-18855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 01:53:36 2006
Return-Path: <java-user-return-18855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7143 invoked from network); 10 Feb 2006 01:53:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 01:53:35 -0000
Received: (qmail 66829 invoked by uid 500); 10 Feb 2006 01:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66771 invoked by uid 500); 10 Feb 2006 01:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66759 invoked by uid 99); 10 Feb 2006 01:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 17:53:29 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.230] (HELO web60822.mail.yahoo.com) (209.73.178.230)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Feb 2006 17:53:28 -0800
Received: (qmail 49154 invoked by uid 60001); 10 Feb 2006 01:53:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ewK+bIicFd0a/c5S38Ntb47BbeD+fRSAu76DR6c689BpfBy9HhmFBX+ZT4Pio/xS6bpjUz0IL6nbnyFdH5pjcEr4AZS5rL+Yq8uFqyWEn+G87Nd/AlfORkbD8G51k2qrSZMCKtOMuDqWg8zApnr8qzcb/4pKz37+xDB//3DJOsg=  ;
Message-ID: <20060210015307.49152.qmail@web60822.mail.yahoo.com>
Received: from [212.199.22.32] by web60822.mail.yahoo.com via HTTP; Thu, 09 Feb 2006 17:53:07 PST
Date: Thu, 9 Feb 2006 17:53:07 -0800 (PST)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: lucene & ejbs
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-730140818-1139536387=:47228"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-730140818-1139536387=:47228
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

i am currently implementing lucene using multiple rmi servers as index searchers,
   
  has anyone done this using ejbs? (any tips?)
   
  if so, are there any performance hits?
   
  thanks in advance,

		
---------------------------------
Relax. Yahoo! Mail virus scanning helps detect nasty viruses!
--0-730140818-1139536387=:47228--

From java-user-return-18856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 02:11:08 2006
Return-Path: <java-user-return-18856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12160 invoked from network); 10 Feb 2006 02:11:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 02:11:07 -0000
Received: (qmail 81778 invoked by uid 500); 10 Feb 2006 02:11:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80830 invoked by uid 500); 10 Feb 2006 02:11:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80818 invoked by uid 99); 10 Feb 2006 02:11:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 18:11:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 18:11:01 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 7E1ACB7BF7
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 13:10:37 +1100 (EST)
Message-ID: <43EBF5E2.8050507@nuix.com.au>
Date: Fri, 10 Feb 2006 13:09:38 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Queries not derived from the text index
References: <43E839B5.60300@nuix.com.au> <5ACC7DF3-B9C0-4781-B7BA-20F374ED0B9F@ehatchersolutions.com> <43E92A9B.1020109@nuix.com.au> <56D4B35E-3FC0-44A0-A109-0AEAA72E5230@ehatchersolutions.com> <43EA82DE.3080905@nuix.com.au> <E24804F7-7A73-494F-BFC5-774AB6871211@ehatchersolutions.com> <43EA8FDE.9080207@nuix.com.au> <Pine.LNX.4.58.0602082259570.20913@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0602082259570.20913@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:
> : I think that overriding getFieldQuery would work, yeah... you're right.
> :    It's just a matter of comparing efficienty of this:
> :
> :      BooleanQuery of (TermQuery, FilteredQuery of (AllDocsQuery, Filter))
> :
> : to the efficiency of this:
> :
> :      FilteredQuery of (TermQuery, Filter)
> 
> the third option is as easy to impliment as the first, and probably close
> to being as efficient as the second...
> 
>        BooleanQuery of (TermQuery, ConstantScoreQuery(Filter))

Ooo... that's even better.  Hopefully I can backport ConstantScoreQuery 
to the version we're using without too much trouble (MatchAllDocsQuery 
didn't cause any trouble.)

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 02:15:04 2006
Return-Path: <java-user-return-18857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13873 invoked from network); 10 Feb 2006 02:15:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 02:15:03 -0000
Received: (qmail 86831 invoked by uid 500); 10 Feb 2006 02:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86803 invoked by uid 500); 10 Feb 2006 02:14:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86792 invoked by uid 99); 10 Feb 2006 02:14:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 18:14:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 18:14:57 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 91E60B7BF7
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 13:14:36 +1100 (EST)
Message-ID: <43EBF6D1.6020909@nuix.com.au>
Date: Fri, 10 Feb 2006 13:13:37 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Duplicates recods in index
References: <20060209091705.0732510FB004@asf.osuosl.org>
In-Reply-To: <20060209091705.0732510FB004@asf.osuosl.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Pasha Bizhan wrote:
> Hi, 
> 
>> From: Daniel Noll [mailto:daniel@nuix.com.au] 
> 
>> I don't know how this will be for efficiency.  If you did it 
>> that way, you would have to re-open the index for every 
>> single document you add, otherwise you might miss a duplicate 
>> which was added recently.
> 
> You do not need to reopen index for every single document if the new 
> data doesn't contain dupes.

True, I didn't think about that.  Our new data always contains dupes as 
the data comes in enormous quantities.  And because it comes in enormous 
quantities, we can't just resolve the duplicates of all the new data on 
the fly, so we store off all the hashes for later.

Another way to do it would be to open a reader on the text index but 
also keep a local copy of the most recently added hashes.  Every 1000 or 
however many documents you could reopen the index and clear your local 
hashset (I've been thinking about this a little lately as hitting the 
text index to find a match is quicker than hitting the database, but in 
all honesty creating the hash takes a lot longer for us.)

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 02:31:40 2006
Return-Path: <java-user-return-18858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25009 invoked from network); 10 Feb 2006 02:31:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 02:31:39 -0000
Received: (qmail 96159 invoked by uid 500); 10 Feb 2006 02:31:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96126 invoked by uid 500); 10 Feb 2006 02:31:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96115 invoked by uid 99); 10 Feb 2006 02:31:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 18:31:33 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paulo.silveira@gmail.com designates 66.249.92.205 as permitted sender)
Received: from [66.249.92.205] (HELO uproxy.gmail.com) (66.249.92.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 18:31:33 -0800
Received: by uproxy.gmail.com with SMTP id j40so129607ugd
        for <java-user@lucene.apache.org>; Thu, 09 Feb 2006 18:31:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=SPT32DBddRquhXRVIR4h+mm7ouyFRybDBtdMpD5uL/8yKJauw+B8VBhnLh5/I2RmWbW3x3IXoNu8UcC6SAFPtfHp88XPnerqX0w6hbD9ALSU+TdETMq5cmjn0GFJxT2/GR89iUXeQEqHvEPMfKPg8ETsgW0TLUpx4+A7YcCVPrE=
Received: by 10.48.108.11 with SMTP id g11mr2666482nfc;
        Thu, 09 Feb 2006 18:31:11 -0800 (PST)
Received: by 10.48.220.20 with HTTP; Thu, 9 Feb 2006 18:31:11 -0800 (PST)
Message-ID: <6026e8b0602091831g2b32458ck187327c8f25f2b24@mail.gmail.com>
Date: Fri, 10 Feb 2006 00:31:11 -0200
From: Paulo Silveira <paulo@paulo.com.br>
Sender: paulo.silveira@gmail.com
To: java-user@lucene.apache.org
Subject: retrieving a documentNumber from a document
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hello

IndexReader.delete receives a docNum

How do I know a docNum given a document? I will always need to get
this number (sometimes called id in the javadocs) from the Hits.id?

thanks

--
Paulo Silveira
http://www.paulo.com.br/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 06:55:02 2006
Return-Path: <java-user-return-18859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28200 invoked from network); 10 Feb 2006 06:55:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 06:55:02 -0000
Received: (qmail 79998 invoked by uid 500); 10 Feb 2006 06:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79970 invoked by uid 500); 10 Feb 2006 06:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79959 invoked by uid 99); 10 Feb 2006 06:54:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 22:54:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ajassal@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO zproxy.gmail.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 22:54:54 -0800
Received: by zproxy.gmail.com with SMTP id k1so355450nzf
        for <java-user@lucene.apache.org>; Thu, 09 Feb 2006 22:54:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QcwON5fiRZ9ERqxOJXpVVzObieLuxO+c+AFfTcAhv1LCmAvODTzJT7Aoz/anda2n+Ft8F1ljl5UTRT9Ild9Y5b/OJZ3gcnZ19QzWMdb2Hv8laYYSsd+0cPYLamD2N+ExfsOL2Y00MHPfBYGNQm9TwWEfdv1Kv7wupW1khn9JAbM=
Received: by 10.36.115.3 with SMTP id n3mr6423817nzc;
        Thu, 09 Feb 2006 22:54:33 -0800 (PST)
Received: by 10.36.39.10 with HTTP; Thu, 9 Feb 2006 22:54:33 -0800 (PST)
Message-ID: <12657e140602092254w47b75830pebb4e295ffa4b3ae@mail.gmail.com>
Date: Thu, 9 Feb 2006 22:54:33 -0800
From: Amrit Jassal <ajassal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Custom filters and booleanquery (MUST_NOT)
In-Reply-To: <Pine.LNX.4.58.0602091507360.25822@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_429_27943296.1139554473348"
References: <12657e140602091502t33802d3aseabd017648cbd402@mail.gmail.com>
	 <Pine.LNX.4.58.0602091507360.25822@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_429_27943296.1139554473348
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Chris

Thanks. Appreciate your comment about using ConstantScoreQuery as well.

Amrit

On 2/9/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I am experimenting with using a custom filter with QueryParser and ran
> into
> : some unanticipated issues with using NOT terms. I narrowed down the
> issue
>
>     ...
>
> :             bquery =3D new BooleanQuery();
> :             bquery.add(new BooleanClause(fq,
> BooleanClause.Occur.MUST_NOT));
> :             hits =3D this.searcher.search(bquery);
> :             assertTrue(hits.length() =3D=3D 1);       // <<<<<<<<< retu=
rns
> 0, expecting doc #2 (t2) to return...
>
> ...this isn't really a Filter issue at all, you're trying to execute a
> query that only contains prohibited (ie: MUST_NOT) clauses.  Thus you are
> not positively selecting anything -- this is one of hte main use for
> MatchAllDocsQuery, try...
>
>
>           bquery =3D new BooleanQuery();
>           bquery.add(new BooleanClause(fq, BooleanClause.Occur.MUST_NOT))=
;
>           bquery.add(new BooleanClause(new MatchAllDocsQuery(),
>                      BooleanClause.Occur.MUST));
>           hits =3D this.searcher.search(bquery);
>           assertTrue(hits.length() =3D=3D 1);
>
> ...incidently, if you are constructing a FilteredQuery arround a
> MatchAllDocsQuery, you might as well use a ConstantScoreQuery instead.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_429_27943296.1139554473348--

From java-user-return-18860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 07:26:18 2006
Return-Path: <java-user-return-18860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36119 invoked from network); 10 Feb 2006 07:26:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 07:26:17 -0000
Received: (qmail 96532 invoked by uid 500); 10 Feb 2006 07:26:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96505 invoked by uid 500); 10 Feb 2006 07:26:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96494 invoked by uid 99); 10 Feb 2006 07:26:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 23:26:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cwho.work@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO zproxy.gmail.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 23:26:11 -0800
Received: by zproxy.gmail.com with SMTP id k1so359828nzf
        for <java-user@lucene.apache.org>; Thu, 09 Feb 2006 23:25:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=nS/1QaQr6L6MhIu9bAtYRJNjVGL7JB/deoeL8FOYIyUCnLEbQsbHXL6joDUgv/YrkJSxYswe5u0yTVx3BYdr0fEKj9LlqcN6E6LnORPb/m3QCsLCnBjIyyRSdzT8hML1fNDnogTfEfL/bd8+SKYkCj1CiDVm7bsNqY5oZHNggzY=
Received: by 10.36.96.18 with SMTP id t18mr3096072nzb;
        Thu, 09 Feb 2006 23:25:50 -0800 (PST)
Received: by 10.36.39.12 with HTTP; Thu, 9 Feb 2006 23:25:49 -0800 (PST)
Message-ID: <6c33f9950602092325m2b2d54e6vaaa0a8b625280f1@mail.gmail.com>
Date: Fri, 10 Feb 2006 15:25:49 +0800
From: Chun Wei Ho <cwho.work@gmail.com>
To: java-user@lucene.apache.org
Subject: Help: tweaking search - reducing IDF skew and implementing score cutoff
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am running a search for something akin to a news site, when each
news document has a date, title, keywords/bylines, summary fields and
then the actual content. Using Lucene for this database of documents,
it seems that:

1. The relevancy score is skewed drastically by the actual number of
news document per day. For example if I RangedQuery on this week, and
there were 100 news on Monday and two news on Sunday, the two on
Sunday gets ranked highly due to idf. How do I reduce this skewness
due to the date-posted field? I saw a reference earlier to
ConstantScoreRangeQuery on JIRA - is it the solution?

2. If I choose to sort the results by date, then recent documents with
very very low relevancy (say the words searched appears only in
content, and not in title/bylines/summary fields that are boosted
higher) are still shown relatively high in the list, and I wish to
omit them in general. What is the best way to implement some sort of a
relevancy filter (include only documents with an normalized score of
0.2 or more....)? Or is there a better way around it?

Thanks :)

Best Regards,
CW

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 07:57:00 2006
Return-Path: <java-user-return-18861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47891 invoked from network); 10 Feb 2006 07:57:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 07:57:00 -0000
Received: (qmail 29544 invoked by uid 500); 10 Feb 2006 07:56:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29514 invoked by uid 500); 10 Feb 2006 07:56:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29503 invoked by uid 99); 10 Feb 2006 07:56:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 23:56:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Feb 2006 23:56:52 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5A90F5B783; Thu,  9 Feb 2006 23:56:21 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5675D7F403
	for <java-user@lucene.apache.org>; Thu,  9 Feb 2006 23:56:21 -0800 (PST)
Date: Thu, 9 Feb 2006 23:56:21 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Help: tweaking search - reducing IDF skew and implementing score
 cutoff
In-Reply-To: <6c33f9950602092325m2b2d54e6vaaa0a8b625280f1@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602092348310.9753@hal.rescomp.berkeley.edu>
References: <6c33f9950602092325m2b2d54e6vaaa0a8b625280f1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: Sunday gets ranked highly due to idf. How do I reduce this skewness
: due to the date-posted field? I saw a reference earlier to
: ConstantScoreRangeQuery on JIRA - is it the solution?

Yes.  RangeQuery expands to a BooleanQuery containing all of the terms in
the.  The number of terms (and the frequency of thsoe terms in the index)
will allways affect those scores.  This is why i constantly argue that
when using dates or numbers a RangeQuery never makes sense -- allways use
a RangeFilter, and if you must have a "Query" object, use
ConstantScoreRangeQuery.

: 2. If I choose to sort the results by date, then recent documents with
: very very low relevancy (say the words searched appears only in
: content, and not in title/bylines/summary fields that are boosted
: higher) are still shown relatively high in the list, and I wish to
: omit them in general. What is the best way to implement some sort of a
: relevancy filter (include only documents with an normalized score of
: 0.2 or more....)? Or is there a better way around it?

there is no safe way to filter by score, this is mentioned in the FAQ...

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03

An alternate approach is to sort by score, but use something like a
FunctionQuery to inflate the scores of more recent documents...

https://issues.apache.org/jira/browse/LUCENE-446




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 08:09:03 2006
Return-Path: <java-user-return-18862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52936 invoked from network); 10 Feb 2006 08:09:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 08:09:03 -0000
Received: (qmail 42983 invoked by uid 500); 10 Feb 2006 08:08:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42367 invoked by uid 500); 10 Feb 2006 08:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42356 invoked by uid 99); 10 Feb 2006 08:08:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 00:08:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 66.249.92.200 as permitted sender)
Received: from [66.249.92.200] (HELO uproxy.gmail.com) (66.249.92.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 00:08:56 -0800
Received: by uproxy.gmail.com with SMTP id e2so182719ugf
        for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 00:08:35 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=EBeJpl3i+Y4frJMvqp0MwOkH9h49i0CPNV8IH3O8Tf2HflQpJf0d9g7/cL3cGW31O2pgSlCEkoPvG462oLcUmIzUitJRn0hbnZPXjuvcCkLA16FvpCCMKEMZvlqFcY+FzN5hkvnUGYxW/HHenSSq5vp58rasqcUgORPlaWwrZYo=
Received: by 10.48.42.20 with SMTP id p20mr2730478nfp;
        Fri, 10 Feb 2006 00:08:33 -0800 (PST)
Received: by 10.49.54.12 with HTTP; Fri, 10 Feb 2006 00:08:33 -0800 (PST)
Message-ID: <88c6a6720602100008x55a8f0fat39ad05412fc8ddb3@mail.gmail.com>
Date: Fri, 10 Feb 2006 02:08:33 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help: tweaking search - reducing IDF skew and implementing score cutoff
In-Reply-To: <6c33f9950602092325m2b2d54e6vaaa0a8b625280f1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6c33f9950602092325m2b2d54e6vaaa0a8b625280f1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> 2. If I choose to sort the results by date, then recent documents with
> very very low relevancy (say the words searched appears only in
> content, and not in title/bylines/summary fields that are boosted
> higher) are still shown relatively high in the list, and I wish to
> omit them in general. What is the best way to implement some sort of a
> relevancy filter (include only documents with an normalized score of
> 0.2 or more....)? Or is there a better way around it?

As Chris pointed out, there isn't always an easy way to do this.  Your
suggestion of filtering below normalized scores of 0.2 might work,
assuming the most relevant document is 1.0.  You'll have to tune this
cutoff point and see how well it works.  One thing to watch out for is
that if the raw (non-normalized) score is less than 1.0, it is not
"normalized", so your most relevant document can have a score of less
than 1.0.  This may or may not be what you want, just something to
consider.  Lucene's Hits.java is where the normalization happens.

-chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 10:00:37 2006
Return-Path: <java-user-return-18863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5602 invoked from network); 10 Feb 2006 10:00:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 10:00:37 -0000
Received: (qmail 45686 invoked by uid 500); 10 Feb 2006 10:00:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45656 invoked by uid 500); 10 Feb 2006 10:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45645 invoked by uid 99); 10 Feb 2006 10:00:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 02:00:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 02:00:30 -0800
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id k1AA02Gb017395
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 11:00:06 +0100 (CET)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200602101000.k1AA02Gb017395@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: lucene & ejbs
Date: Fri, 10 Feb 2006 10:59:57 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcYt5NGpS0pGzOs+Shew3E3ysa3irAAQ4SMg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <20060210015307.49152.qmail@web60822.mail.yahoo.com>
X-Scanned-By: MIMEDefang 2.52 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

HI,
I am doing the same.

My design contains.
Index Repository: is responsible for keep up to index.:)Index-configurator.
Index-manager: Real CRUD indexing..
And ofcourse index-searcher: I want results ..:)

U know very well->Searcher and Indexer are both separate functionalities..
So the reason why two components.

Regards,
Jelda

-----Original Message-----
From: zzzzz shalev [mailto:zzzzz_shalev@yahoo.com] 
Sent: Friday, February 10, 2006 2:53 AM
To: java-user@lucene.apache.org
Subject: lucene & ejbs

i am currently implementing lucene using multiple rmi servers as index
searchers,
   
  has anyone done this using ejbs? (any tips?)
   
  if so, are there any performance hits?
   
  thanks in advance,

		
---------------------------------
Relax. Yahoo! Mail virus scanning helps detect nasty viruses!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 11:38:21 2006
Return-Path: <java-user-return-18864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54347 invoked from network); 10 Feb 2006 11:38:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 11:38:20 -0000
Received: (qmail 55958 invoked by uid 500); 10 Feb 2006 11:38:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55773 invoked by uid 500); 10 Feb 2006 11:38:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55762 invoked by uid 99); 10 Feb 2006 11:38:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 03:38:13 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.212.68.130] (HELO uksmtp03.informa.com) (213.212.68.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 03:38:12 -0800
Received: from ukexfe02.UK.CorpLAN.net (ukexfe02.uk.corplan.net [192.168.45.52])
	by uksmtp03.informa.com (8.13.4/8.13.4) with ESMTP id k1ABbXWN010750
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 11:37:33 GMT
Received: from UKEXBE01.UK.CorpLAN.net ([10.10.4.121]) by ukexfe02.UK.CorpLAN.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 10 Feb 2006 11:37:50 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Changing default QueryParser operator from OR to AND
Date: Fri, 10 Feb 2006 11:37:49 -0000
Message-ID: <9239D85FA271BB4FBC6AE3D2AE8D685A06E8F300@UKEXBE01.UK.CorpLAN.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Changing default QueryParser operator from OR to AND
Thread-Index: AcYuNmuNGZ2gVqziSwyN4u272AWJ6g==
From: <Tim.Wright@informa.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Feb 2006 11:37:50.0337 (UTC) FILETIME=[6C19A710:01C62E36]
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 mlx=0 adultscore=0 adjust=0 reason=mlx engine=3.1.0-06011904 definitions=3.0.0-06020908
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi guys,=20

IF QueryParser gets a phrase with a number of words (ie: "here are
words") it uses the implicit operator OR - "here OR are OR words". LIA
on p94 says the operator "by default is OR", implying that there may be
some way to change this.=20

We'd really like the default to be AND. Is that possible?

Cheers,

Tim.
---------------------------------------------------------------------------=
-----------------------------------------------------------------
The information contained in this email message may be confidential. If you=
 are not the intended recipient, any use, interference with, disclosure or =
copying of this material is unauthorised and prohibited. Although this mess=
age and any attachments are believed to be free of viruses, no responsibili=
ty is accepted by Informa for any loss or damage arising in any way from re=
ceipt or use thereof.  Messages to and from the company are monitored for o=
perational reasons and in accordance with lawful business practices.=20
If you have received this message in error, please notify us by return and =
delete the message and any attachments.  Further enquiries/returns can be s=
ent to postmaster@informa.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 11:58:37 2006
Return-Path: <java-user-return-18865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62305 invoked from network); 10 Feb 2006 11:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 11:58:36 -0000
Received: (qmail 72231 invoked by uid 500); 10 Feb 2006 11:58:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72195 invoked by uid 500); 10 Feb 2006 11:58:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72182 invoked by uid 99); 10 Feb 2006 11:58:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 03:58:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 03:58:30 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Changing default QueryParser operator from OR to AND
Date: Fri, 10 Feb 2006 11:58:08 -0000
Message-ID: <044EFEA2A2E19F4D8B72E285C0B38BFD0254F0@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Changing default QueryParser operator from OR to AND
Thread-Index: AcYuNmuNGZ2gVqziSwyN4u272AWJ6gAAp6lw
From: "Iain Willis" <iain.willis@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Instead of using the static parse() method of QueryParser, you will need
to create a new instance, and the call
setOperator(DEFAULT_OPERATOR_AND);

Iain

www.ardentia.com the home of NetSearch



-----Original Message-----
From: Tim.Wright@informa.com [mailto:Tim.Wright@informa.com]=20
Sent: 10 February 2006 11:38
To: java-user@lucene.apache.org
Subject: Changing default QueryParser operator from OR to AND

Hi guys,=20

IF QueryParser gets a phrase with a number of words (ie: "here are
words") it uses the implicit operator OR - "here OR are OR words". LIA
on p94 says the operator "by default is OR", implying that there may be
some way to change this.=20

We'd really like the default to be AND. Is that possible?

Cheers,

Tim.
------------------------------------------------------------------------
--------------------------------------------------------------------
The information contained in this email message may be confidential. If
you are not the intended recipient, any use, interference with,
disclosure or copying of this material is unauthorised and prohibited.
Although this message and any attachments are believed to be free of
viruses, no responsibility is accepted by Informa for any loss or damage
arising in any way from receipt or use thereof.  Messages to and from
the company are monitored for operational reasons and in accordance with
lawful business practices.=20
If you have received this message in error, please notify us by return
and delete the message and any attachments.  Further enquiries/returns
can be sent to postmaster@informa.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 13:14:12 2006
Return-Path: <java-user-return-18866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3017 invoked from network); 10 Feb 2006 13:14:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 13:14:12 -0000
Received: (qmail 70995 invoked by uid 500); 10 Feb 2006 13:14:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70906 invoked by uid 500); 10 Feb 2006 13:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70895 invoked by uid 99); 10 Feb 2006 13:14:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 05:14:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 05:14:05 -0800
Received: from [143.205.118.106] ([143.205.118.106]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 10 Feb 2006 14:13:42 +0100
Message-ID: <43EC9184.1050706@ifit.uni-klu.ac.at>
Date: Fri, 10 Feb 2006 14:13:40 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: QueryParser behaviour ..
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC04@ehost011-3.exch011.intermedia.net>
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC04@ehost011-3.exch011.intermedia.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 10 Feb 2006 13:13:42.0478 (UTC) FILETIME=[D0A4B6E0:01C62E43]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

  Hi all,

 I built a wrong query string "word1,word2,word3" instead of "word1 
word2 word3"
therefore I got a wrong query:  field:"word1 word2 word3" instead of  
field:word1 field:word2  field:word3.

 Is this an espected behaviour?
 I used Standard analyzer, probably therefore, the comas were replaced 
with spaces.
Indeded was no space between the words, just comas.

 Is this a bug? Does it make sense to indicate this situation through a 
Parse Exception?

 Best,

  Sergiu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 13:42:06 2006
Return-Path: <java-user-return-18867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16002 invoked from network); 10 Feb 2006 13:42:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 13:42:04 -0000
Received: (qmail 12783 invoked by uid 500); 10 Feb 2006 13:41:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12753 invoked by uid 500); 10 Feb 2006 13:41:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12742 invoked by uid 99); 10 Feb 2006 13:41:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 05:41:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 05:41:57 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AA24633C022; Fri, 10 Feb 2006 08:41:36 -0500 (EST)
Received: from [192.168.0.30] (wsip-70-184-77-36.tc.ph.cox.net [70.184.77.36])
	by ehatchersolutions.com (Postfix) with ESMTP id 59E4733C01C
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 08:41:34 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <9239D85FA271BB4FBC6AE3D2AE8D685A06E8F300@UKEXBE01.UK.CorpLAN.net>
References: <9239D85FA271BB4FBC6AE3D2AE8D685A06E8F300@UKEXBE01.UK.CorpLAN.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1FA65EAB-AF1E-4C05-895C-D4E1762C721D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Changing default QueryParser operator from OR to AND
Date: Fri, 10 Feb 2006 06:41:37 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 10, 2006, at 4:37 AM, <Tim.Wright@informa.com>  
<Tim.Wright@informa.com> wrote:
> IF QueryParser gets a phrase with a number of words (ie: "here are
> words") it uses the implicit operator OR - "here OR are OR words". LIA
> on p94 says the operator "by default is OR", implying that there  
> may be
> some way to change this.
>
> We'd really like the default to be AND. Is that possible?

Are you feeling lucky?!  :)

	<http://www.lucenebook.com/search?query=QueryParser+default+operator>

Hit #1, answer pretty distillable even from the brief snippet.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 14:26:01 2006
Return-Path: <java-user-return-18868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51113 invoked from network); 10 Feb 2006 14:26:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 14:26:00 -0000
Received: (qmail 5661 invoked by uid 500); 10 Feb 2006 14:25:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5527 invoked by uid 500); 10 Feb 2006 14:25:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5495 invoked by uid 99); 10 Feb 2006 14:25:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 06:25:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail02.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 06:25:45 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: 1.9 lucene version
Date: Fri, 10 Feb 2006 09:25:14 -0500
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D131051ED4CB@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 1.9 lucene version
thread-index: AcYsxP2kogGU55tQQwyGem0SGkDTOQAArwGAAGGAZTA=
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Anyone have a comment on the below message? =20

-----Original Message-----
From: Aigner, Thomas=20
Sent: Wednesday, February 08, 2006 11:50 AM
To: java-user@lucene.apache.org
Subject: 1.9 lucene version


Hello all,
	I have a couple of questions for the community about the 1.9
Lucene version.  As I understand it, this has not been released and I
can't find an approximate date for release (I know you can download the
development version and compile it).  I see a nightly build going on
(http://lucene.apache.org/java/docs/index.html), but I can't seem to
find a release date.

	So,
		1) Anyone know a release date for 1.9?
		2) Also, if this is not a soon time, is anyone actually
using 1.9 in production?
		3) General question on improvement: memory - has there
been any memory improvements as well in 1.9

Thanks all!
Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 15:05:54 2006
Return-Path: <java-user-return-18869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75202 invoked from network); 10 Feb 2006 15:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 15:05:54 -0000
Received: (qmail 16169 invoked by uid 500); 10 Feb 2006 15:05:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16011 invoked by uid 500); 10 Feb 2006 15:05:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16000 invoked by uid 99); 10 Feb 2006 15:05:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 07:05:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.98.176.99] (HELO mail.aduna.biz) (66.98.176.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 07:05:46 -0800
Received: (qmail 20517 invoked from network); 10 Feb 2006 09:01:45 -0600
Received: from home.aduna.biz (HELO ?10.1.0.11?) (213.84.59.34)
  by www4.aduna.biz with (DHE-RSA-AES256-SHA encrypted) SMTP; 10 Feb 2006 09:01:45 -0600
Message-ID: <43ECAB8F.6080309@aduna.biz>
Date: Fri, 10 Feb 2006 16:04:47 +0100
From: Christiaan Fluit <christiaan.fluit@aduna.biz>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Word files & Build vs. Buy?
References: <43EB3115.4060303@aduna.biz> <FAB00A8DC59FAB42B13C2B3B0F687701E7CC27@ehost011-3.exch011.intermedia.net>
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC27@ehost011-3.exch011.intermedia.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dmitry Goldenberg wrote:
> Awesome stuff. A few questions: is your Excel extractor somehow
> better than POI's? and, what do you see as the timeframe for adding
> WordPerfect support? Are you considering supporting any other sources
> such as MS Project, Framemaker, etc?

I just committed a WordPerfectExtractor ;)

It's based on code developed in-house at Aduna and it seems to work 
quite well on my test collection of WordPerfect documents. Only 
sometimes words are split in the middle, I'm still looking into that.

The test set has a bias for older WordPerfect documents though, I'm 
trying to get my hands on a recent copy of WordPerfect to see if the 
latest format is also supported and to create unit tests for it.

To interactively test the extractor(s) yourselves:

- checkout Aperture from CVS (see 
http://sourceforge.net/cvs/?group_id=150969)
- do "ant release"
- go to build\release\bin and execute fileinspector.bat
- drag any file (WordPerfect or any other format) to see what MIME type 
Aperture thinks it is and to execute the corresponding Extractor, if 
available. The two tabs show the extracted full-text and an RDF dump of 
the metadata. For WordPerfect, only full-text extraction is currently 
supported.

Our ExcelExtractor is basically nothing more than glue code between POI 
and the rest of our framework, meaning that an application using the 
framework can request an Extractor implementation for 
"application/vnd.ms-excel", feed it an InputStream and get the text and 
metadata back.

The only advantage of our ExcelExtractor over direct use of POI is that, 
when POI throws an Exception on a particular document, it reverts to a 
heuristic string extraction algorithm which is often able to extract 
full-text from a document with reasonable quality, i.e. suited for indexing.

We are surely considering supporting more formats. Which ones we will 
work on depends on a number of factors, e.g. availability of open source 
libs for that format, complexity of the file format (we did WordPerfect 
by ourselves), customer demand, code contributions from others, etc. In 
any case, if you need support for format XYZ, you can always send me 
some example files and I'll take a look at how hard it is to add support 
for it.


Chris
--

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 16:32:03 2006
Return-Path: <java-user-return-18870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26269 invoked from network); 10 Feb 2006 16:32:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 16:32:03 -0000
Received: (qmail 29145 invoked by uid 500); 10 Feb 2006 16:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29110 invoked by uid 500); 10 Feb 2006 16:31:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29098 invoked by uid 99); 10 Feb 2006 16:31:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 08:31:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.184.201 as permitted sender)
Received: from [64.233.184.201] (HELO wproxy.gmail.com) (64.233.184.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 08:31:53 -0800
Received: by wproxy.gmail.com with SMTP id 71so416576wri
        for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 08:31:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=JaNSoCewVel/LMuLPkOzWhCWD9ZULHZTVtp9wdDHVgCM8haBOmaEcy/AcY+ANgGGl0vUirbx5os6QgvjjawZB8Ef+aS7jy9P82KVeepPy1DkVcr3D8eS9e1SIrq19mJ8o5We+KgUiLpBla/yp6rHOGcfvaYV+q7l0DTXwqh4Wnk=
Received: by 10.65.176.20 with SMTP id d20mr616117qbp;
        Fri, 10 Feb 2006 08:31:29 -0800 (PST)
Received: by 10.65.244.16 with HTTP; Fri, 10 Feb 2006 08:31:29 -0800 (PST)
Message-ID: <abe188f20602100831w383e78eay377407aa5b09ebb3@mail.gmail.com>
Date: Fri, 10 Feb 2006 10:31:29 -0600
From: Rajesh Munavalli <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: query formulation
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_629_29044026.1139589089937"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_629_29044026.1139589089937
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Does anyone have a good way to formulate the query in terms of performance
as well as ordering of retrieved documents for the following query?

Query: "field1:t1 t2 t3 t4 AND field2:t5 t6 t7"

I want to achieve the following
* The document which matches the query exactly in both the fields gets rank
1
* The documents with different orders of the query terms get the subsequent
ranks depending on their edit distance

This can be achieved by phrase queries ANDed together.
Modified Query: BooleanQuery(PhraseQuery("field1", "t1 t2 t3 t4" SLOPE:m)
AND PhraseQuery("field2", "t5 t6 t7", SLOPE:n))

However I also want to retrieve those documents (in order) where one or mor=
e
of the terms is missing from either of the fields. i.e,

Rank 1: All terms exist in both fields with certain slope factor

Rank 2: One term missing from one of the field
            field1:t1 t2 t3 t4 AND field2:t5 t6
            field2:t1 t2 t3 t4 AND field2:t6 t7
            field2:t1 t2 t3 t4 AND field2:t5 t7
           ...
           ...

Rank 3: Two terms missing from either of the field

...


Rank n: Only one term exists in both field1 and field 2

Thanks,

Rajesh Munavalli

------=_Part_629_29044026.1139589089937--

From java-user-return-18871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 17:07:31 2006
Return-Path: <java-user-return-18871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45773 invoked from network); 10 Feb 2006 17:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 17:07:31 -0000
Received: (qmail 26481 invoked by uid 500); 10 Feb 2006 17:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26460 invoked by uid 500); 10 Feb 2006 17:07:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26449 invoked by uid 99); 10 Feb 2006 17:07:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 09:07:24 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 66.249.92.197 as permitted sender)
Received: from [66.249.92.197] (HELO uproxy.gmail.com) (66.249.92.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 09:07:22 -0800
Received: by uproxy.gmail.com with SMTP id m3so311100ugc
        for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 09:07:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OPYq/UQx2Fo/0QD55b4zdJM8djcdSMXAcyQDamxt2UudASUQ5eTjH5sYL4SCf9OyFxHJ3PeBQSGovskYCcwcmE9+Z34g4txIPU+sBJWG4FpqzT0gSmaZ9L++dLoXSnbqOcgUAHixN1wQghQBhS5lU2mxf1MxSQfrt9prcdRccLI=
Received: by 10.48.199.13 with SMTP id w13mr2938156nff;
        Fri, 10 Feb 2006 09:06:56 -0800 (PST)
Received: by 10.49.75.14 with HTTP; Fri, 10 Feb 2006 09:06:56 -0800 (PST)
Message-ID: <c68e39170602100906j4261f3f2rc6e284d386288590@mail.gmail.com>
Date: Fri, 10 Feb 2006 12:06:56 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query formulation
In-Reply-To: <abe188f20602100831w383e78eay377407aa5b09ebb3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <abe188f20602100831w383e78eay377407aa5b09ebb3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 2/10/06, Rajesh Munavalli <findmath@gmail.com> wrote:
> However I also want to retrieve those documents (in order) where one or m=
ore
> of the terms is missing from either of the fields. i.e,

BooleanQuery.setMinimumNumberShouldMatch() in the development version
(1.9) of Lucene may help out in that respect.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 18:44:48 2006
Return-Path: <java-user-return-18872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98526 invoked from network); 10 Feb 2006 18:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 18:44:48 -0000
Received: (qmail 49458 invoked by uid 500); 10 Feb 2006 18:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49432 invoked by uid 500); 10 Feb 2006 18:44:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49421 invoked by uid 99); 10 Feb 2006 18:44:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 10:44:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.124] (HELO exprod6og4.obsmtp.com) (64.18.1.124)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Feb 2006 10:44:39 -0800
Received: from source ([139.56.4.13]) by exprod6ob4.obsmtp.com ([64.18.5.12]) with SMTP;
	Fri, 10 Feb 2006 10:44:18 PST
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.102.101])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id k1AIiHO18885
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 10:44:17 -0800 (PST)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id KAA06462
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 10:46:47 -0800 (PST)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <1NYXTN92>; Fri, 10 Feb 2006 10:45:57 -0800
Message-ID: <8220B8D6B56A9A4E8480489F38E425298E4910@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Can PDFBox or POI handle multi-byte characters with different enc
	odings?
Date: Fri, 10 Feb 2006 10:45:57 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Currently we are using PDFBox to process PDF files and
POI to process DOC/XLS files, before send strings to lucene
for indexing,

Does any one know if PDFBox or POI can process multi-
byte characters like Japanese with various encodings (whatever
specified in PDF or DOC)?

Thanks very much for helps, Lisheng 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 18:55:34 2006
Return-Path: <java-user-return-18873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4128 invoked from network); 10 Feb 2006 18:55:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 18:55:32 -0000
Received: (qmail 70104 invoked by uid 500); 10 Feb 2006 18:55:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69981 invoked by uid 500); 10 Feb 2006 18:55:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69748 invoked by uid 99); 10 Feb 2006 18:55:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 10:55:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 10:55:18 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A1BA35B783; Fri, 10 Feb 2006 10:54:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 95F537F403
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 10:54:50 -0800 (PST)
Date: Fri, 10 Feb 2006 10:54:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: QueryParser behaviour ..
In-Reply-To: <43EC9184.1050706@ifit.uni-klu.ac.at>
Message-ID: <Pine.LNX.4.58.0602101049001.2025@hal.rescomp.berkeley.edu>
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC04@ehost011-3.exch011.intermedia.net>
 <43EC9184.1050706@ifit.uni-klu.ac.at>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


:  I built a wrong query string "word1,word2,word3" instead of "word1
: word2 word3"
: therefore I got a wrong query:  field:"word1 word2 word3" instead of
: field:word1 field:word2  field:word3.
:
:  Is this an espected behaviour?
:  I used Standard analyzer, probably therefore, the comas were replaced
: with spaces.

the commas weren't replaced ... your analyzer split on them and threw
them away.

they key to understanding why that resulted in a phrase query instead of
three term queries is that QueryParser doesn't treat comma as a special
character, so it saw the string word1,word2,word3 and gave it to your
analyzer.  Since your analyzer gave back several tokens QueryParser built
a phrase query out of it.

likewise, in the case of "word1 word2 word3" the quotes *are* a special
character to QueryParser which tells it it should *not* split on the
spaces betwen the quotes, and hand the individual words to the analyzer.
instead it hands the whole thing to the analyzer as one big string again.


:  Is this a bug? Does it make sense to indicate this situation through a
: Parse Exception?

a parse error should really onl come up when the query parser sees a
character that it does consider special, but sees it in a place that
doesn't make sense (or doesn't see one in a plkace it needs one).  in this
case QP is perfectly happy to let you query for a word that contains a
comma -- it's your analyzer that's putting it's foot down and saying that
can't be in a word.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 19:09:58 2006
Return-Path: <java-user-return-18874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10526 invoked from network); 10 Feb 2006 19:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 19:09:58 -0000
Received: (qmail 92128 invoked by uid 500); 10 Feb 2006 19:09:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91185 invoked by uid 500); 10 Feb 2006 19:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91174 invoked by uid 99); 10 Feb 2006 19:09:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 11:09:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 11:09:51 -0800
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP id 1C7EFFCC
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 14:09:20 -0500 (EST)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id C5DC3158D; Fri, 10 Feb 2006 14:09:19 -0500 (EST)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP id 9E26C158C
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 14:09:19 -0500 (EST)
Date: Fri, 10 Feb 2006 14:09:19 -0500 (EST)
From: Ben Litchfield <ben@csh.rit.edu>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Re: Can PDFBox or POI handle multi-byte characters with different
 enc odings?
In-Reply-To: <8220B8D6B56A9A4E8480489F38E425298E4910@rw-msg-02.broadvision.com>
Message-ID: <Pine.GSO.4.53.0602101407540.9870@fury.csh.rit.edu>
References: <8220B8D6B56A9A4E8480489F38E425298E4910@rw-msg-02.broadvision.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


PDFBox can handle multi-byte encodings.  There are a couple recent fixes
for CJK languages that are not part of 0.7.2 but are part of the nightly
build.

Ben



On Fri, 10 Feb 2006, Zhang, Lisheng wrote:

> Hi,
>
> Currently we are using PDFBox to process PDF files and
> POI to process DOC/XLS files, before send strings to lucene
> for indexing,
>
> Does any one know if PDFBox or POI can process multi-
> byte characters like Japanese with various encodings (whatever
> specified in PDF or DOC)?
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 21:23:48 2006
Return-Path: <java-user-return-18875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87140 invoked from network); 10 Feb 2006 21:23:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 21:23:48 -0000
Received: (qmail 1128 invoked by uid 500); 10 Feb 2006 21:18:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1059 invoked by uid 500); 10 Feb 2006 21:18:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1045 invoked by uid 99); 10 Feb 2006 21:18:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 13:18:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 13:18:54 -0800
Received: by wproxy.gmail.com with SMTP id 69so19961wri
        for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 13:18:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PXxhzpMjMs/f48AoHKj+YT7bgubt2z+EW54/RBe/j2ufEoHRkiJwH/pR9oU0WRrwYQCrunxplNBEaH+g5FBfUYHg4ueGEC0Nf56D1HxebSUHaf8IPaZ29XDr68X+b/0Rh/dboVHAprKEy3OMHtonYgN6trNdqXF2S2j/7h7fnZI=
Received: by 10.54.89.3 with SMTP id m3mr96930wrb;
        Fri, 10 Feb 2006 13:18:31 -0800 (PST)
Received: by 10.54.159.20 with HTTP; Fri, 10 Feb 2006 13:18:30 -0800 (PST)
Message-ID: <7ca123910602101318u119d44e5y221df77c2f3817a4@mail.gmail.com>
Date: Fri, 10 Feb 2006 13:18:30 -0800
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Build vs. Buy?
In-Reply-To: <32af47fe0602091615n7b14c7ebu9d6ded82868287ed@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1049_7794612.1139606310835"
References: <9778DA4F3D53D04B9AE80AC64AC073A305745B13@corpx.dicarta.com>
	 <03da01c62d64$63305810$ca03010a@theoldstore.propelsystems.com>
	 <32af47fe0602091615n7b14c7ebu9d6ded82868287ed@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1049_7794612.1139606310835
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

For reading word document as text, you can try AntiWord.

I have written a simplified Lucene that does Max words match.

For example, if you are searching for aa, bb, cc, then, the document that
contains all words (aa, bb, cc) will be definitely ranked higher than
documents containing either aa, bb or aa, cc or bb, cc.

I am going to put up the code as open source. If you are interested, you ca=
n
email me directly.

Jian


On 2/9/06, P. Alex. Salamanca R. <alexander.salamanca@gmail.com> wrote:
>
> On the other hand, if you want be the most cheapest, why don't give a
> chance
> to google search appliance?
>
>

------=_Part_1049_7794612.1139606310835--

From java-user-return-18876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 21:55:37 2006
Return-Path: <java-user-return-18876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3363 invoked from network); 10 Feb 2006 21:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 21:55:37 -0000
Received: (qmail 5196 invoked by uid 500); 10 Feb 2006 21:55:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5127 invoked by uid 500); 10 Feb 2006 21:55:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5084 invoked by uid 99); 10 Feb 2006 21:55:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 13:55:30 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Feb 2006 13:55:29 -0800
Received: (qmail 5615 invoked by uid 60001); 10 Feb 2006 21:55:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=3KtsPzyZqi/R1cmR2J9hiYsws2frqcwzncICpxyAHXcvuHdWBIf/g5EydvCr/zZ3K6g4BetCMpQwmo0oUl+hcTnw2Q1Y0xiciMqGj+U/4j1djoJYOrCq7ljJUfsl4PioZNCdoJFiwwbs7Lc6L3fbchoke7A4lGImWxq70I1l79E=  ;
Message-ID: <20060210215508.5613.qmail@web50313.mail.yahoo.com>
Date: Fri, 10 Feb 2006 13:55:08 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Performance and FS block size
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm wondering if anyone has tested Lucene indexing/search performance with different file system block sizes?

I just realized one of the servers where I run a lot of Lucene indexing and searching has an FS with blocks of only 1K in size (typically they are 4k or 8k, I believe), so I started wondering what's better for Lucene - smaller or larger blocks?  I have a feeling 1K is too small, although I don't know enough to back up this feeling. :(

Thanks,
Otis




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 22:04:06 2006
Return-Path: <java-user-return-18877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6953 invoked from network); 10 Feb 2006 22:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 22:04:06 -0000
Received: (qmail 25579 invoked by uid 500); 10 Feb 2006 22:04:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25408 invoked by uid 500); 10 Feb 2006 22:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25379 invoked by uid 99); 10 Feb 2006 22:04:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 14:04:00 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Feb 2006 14:03:59 -0800
Received: (qmail 83454 invoked by uid 60001); 10 Feb 2006 22:03:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=BEBBTJkeWUdVUCigfZ+SrPJbuMWYMJXZs7Ro0eVf62bwWXIrOHpy5/IsKZd4Q9KuCFj4SII2ZakJaUDElreK4c9SU603eW5A2lLrQ8vjDwja8cGB317EInBqF7E05SdOnbILkxkQPSyZRM0/hmO5TYjUU+0ZxYPDJ7V1gTCBeqg=  ;
Message-ID: <20060210220338.83452.qmail@web50306.mail.yahoo.com>
Date: Fri, 10 Feb 2006 14:03:38 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: 1.9 lucene version
To: java-user@lucene.apache.org
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D131051ED4CB@MAIL01.wescodist.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I answered it yesterday, please check the archives...

Otis

----- Original Message ----
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: java-user@lucene.apache.org
Sent: Fri 10 Feb 2006 09:25:14 AM EST
Subject: RE: 1.9 lucene version


Anyone have a comment on the below message?  

-----Original Message-----
From: Aigner, Thomas 
Sent: Wednesday, February 08, 2006 11:50 AM
To: java-user@lucene.apache.org
Subject: 1.9 lucene version


Hello all,
    I have a couple of questions for the community about the 1.9
Lucene version.  As I understand it, this has not been released and I
can't find an approximate date for release (I know you can download the
development version and compile it).  I see a nightly build going on
(http://lucene.apache.org/java/docs/index.html), but I can't seem to
find a release date.

    So,
        1) Anyone know a release date for 1.9?
        2) Also, if this is not a soon time, is anyone actually
using 1.9 in production?
        3) General question on improvement: memory - has there
been any memory improvements as well in 1.9

Thanks all!
Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 22:05:43 2006
Return-Path: <java-user-return-18878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7696 invoked from network); 10 Feb 2006 22:05:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 22:05:43 -0000
Received: (qmail 31040 invoked by uid 500); 10 Feb 2006 22:05:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31005 invoked by uid 500); 10 Feb 2006 22:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30993 invoked by uid 99); 10 Feb 2006 22:05:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 14:05:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.107 as permitted sender)
Received: from [205.158.62.107] (HELO ws6-4.us4.outblaze.com) (205.158.62.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Feb 2006 14:05:36 -0800
Received: (qmail 1103 invoked from network); 10 Feb 2006 22:05:07 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-4.us4.outblaze.com with SMTP; 10 Feb 2006 22:05:07 -0000
Message-ID: <43ED0E13.8000303@curtin.com>
Date: Fri, 10 Feb 2006 17:05:07 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performance and FS block size
References: <20060210215508.5613.qmail@web50313.mail.yahoo.com>
In-Reply-To: <20060210215508.5613.qmail@web50313.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

> Hi,
> 
> I'm wondering if anyone has tested Lucene indexing/search performance with different file system block sizes?
> 
> I just realized one of the servers where I run a lot of Lucene indexing and searching has an FS with blocks of only 1K in size (typically they are 4k or 8k, I believe), so I started wondering what's better for Lucene - smaller or larger blocks?  I have a feeling 1K is too small, although I don't know enough to back up this feeling. :(

On my system (dual Xeon with a couple 120GB S-ATA drives (not RAIDed), running 
Fedora Core 3) I changed BUFFER_SIZE in storage/OutputStream.java to 4096, 
achieving about 30% better performance in indexing.  The search improvement 
was smaller, enough smaller that it was on order what I thought my measurement 
error was.  I tried values up to 64K, but there wasn't much change on my 
system after 4K.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 22:12:57 2006
Return-Path: <java-user-return-18879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10389 invoked from network); 10 Feb 2006 22:12:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 22:12:56 -0000
Received: (qmail 44362 invoked by uid 500); 10 Feb 2006 22:12:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44331 invoked by uid 500); 10 Feb 2006 22:12:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44320 invoked by uid 99); 10 Feb 2006 22:12:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 14:12:50 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Feb 2006 14:12:50 -0800
Received: (qmail 32461 invoked by uid 60001); 10 Feb 2006 22:12:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=CGi0vrxKq7YXm+GNkg3VtvdBDMDc9DbyOk1AohLiTsamUdtoEDHyPrKhqSYQKr7nkqPz6dbHFfylqC+kYJzfIlFAW6+ohMJlOH6tWB40ekyJ+vQlSwDN7UovOPbV71zWibPjexCveR4rAVLDCGkdq3Y2T9ns7IUURHJvGdc4Yr4=  ;
Message-ID: <20060210221229.32459.qmail@web50307.mail.yahoo.com>
Date: Fri, 10 Feb 2006 14:12:29 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performance and FS block size
To: java-user@lucene.apache.org
In-Reply-To: <43ED0E13.8000303@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thanks for the speedy answer, this is good to know.
However, i was wondering about the FS block size.... consider a Linux box:

$ dumpe2fs  /dev/sda1 | grep "Block size"
dumpe2fs 1.36 (05-Feb-2005)
Block size:               1024

That shows /dev/sda1 has blocks 1k in size.  I don't think these can be changed "on-the-fly", and can be changed only by re-creating the FS (e.g. mkfs.ext3 .... under Linux).  Thus, I can't test different block sizes easily, and am wondering if anyone has already done this, or simply knows what block size, theoretically at least, should perform better.

Thanks,
Otis

----- Original Message ----
From: Michael D. Curtin <mike@curtin.com>
To: java-user@lucene.apache.org
Sent: Fri 10 Feb 2006 05:05:07 PM EST
Subject: Re: Performance and FS block size

Otis Gospodnetic wrote:

> Hi,
> 
> I'm wondering if anyone has tested Lucene indexing/search performance with different file system block sizes?
> 
> I just realized one of the servers where I run a lot of Lucene indexing and searching has an FS with blocks of only 1K in size (typically they are 4k or 8k, I believe), so I started wondering what's better for Lucene - smaller or larger blocks?  I have a feeling 1K is too small, although I don't know enough to back up this feeling. :(

On my system (dual Xeon with a couple 120GB S-ATA drives (not RAIDed), running 
Fedora Core 3) I changed BUFFER_SIZE in storage/OutputStream.java to 4096, 
achieving about 30% better performance in indexing.  The search improvement 
was smaller, enough smaller that it was on order what I thought my measurement 
error was.  I tried values up to 64K, but there wasn't much change on my 
system after 4K.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 22:18:28 2006
Return-Path: <java-user-return-18880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15188 invoked from network); 10 Feb 2006 22:18:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 22:18:27 -0000
Received: (qmail 55968 invoked by uid 500); 10 Feb 2006 22:18:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55916 invoked by uid 500); 10 Feb 2006 22:18:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55857 invoked by uid 99); 10 Feb 2006 22:18:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 14:18:20 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.227] (HELO web50314.mail.yahoo.com) (206.190.39.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Feb 2006 14:18:19 -0800
Received: (qmail 95970 invoked by uid 60001); 10 Feb 2006 22:17:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=6YPBPflvMQ0KWJ0XafNVa2uuoWONjJLuir1kBEmd6kPAA3HyD7aNzrWZOoIlBv/22s8oilbUV08fj/1eDXeOmZpHygnfmQ+8iHHO65LPmjCi5O3qXhdQQzqm1ilmpJ2JLNpldqv7jZEeGTMet7RwCHQ4TtW/zrhHPH6WTsJGCu4=  ;
Message-ID: <20060210221758.95968.qmail@web50314.mail.yahoo.com>
Date: Fri, 10 Feb 2006 14:17:58 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performance and FS block size
To: java-user@lucene.apache.org
In-Reply-To: <43ED0E13.8000303@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael,

Actually, one more thing - you said you changed the store/BufferedIndexOutput.BUFFER_SIZE from 1024 to 4096 and that turned out to yield the fastest indexing.  Does your FS block size also happen to be 4k (dumpe2fs output) on that FC3 box?  If so, I wonder if this is more than just a coincidence...

Thanks,
Otis


----- Original Message ----
From: Michael D. Curtin <mike@curtin.com>
To: java-user@lucene.apache.org
Sent: Fri 10 Feb 2006 05:05:07 PM EST
Subject: Re: Performance and FS block size

Otis Gospodnetic wrote:

> Hi,
> 
> I'm wondering if anyone has tested Lucene indexing/search performance with different file system block sizes?
> 
> I just realized one of the servers where I run a lot of Lucene indexing and searching has an FS with blocks of only 1K in size (typically they are 4k or 8k, I believe), so I started wondering what's better for Lucene - smaller or larger blocks?  I have a feeling 1K is too small, although I don't know enough to back up this feeling. :(

On my system (dual Xeon with a couple 120GB S-ATA drives (not RAIDed), running 
Fedora Core 3) I changed BUFFER_SIZE in storage/OutputStream.java to 4096, 
achieving about 30% better performance in indexing.  The search improvement 
was smaller, enough smaller that it was on order what I thought my measurement 
error was.  I tried values up to 64K, but there wasn't much change on my 
system after 4K.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 10 22:30:53 2006
Return-Path: <java-user-return-18881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19407 invoked from network); 10 Feb 2006 22:30:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Feb 2006 22:30:52 -0000
Received: (qmail 73663 invoked by uid 500); 10 Feb 2006 22:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73643 invoked by uid 500); 10 Feb 2006 22:30:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73632 invoked by uid 99); 10 Feb 2006 22:30:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 14:30:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.199 as permitted sender)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Feb 2006 14:30:46 -0800
Received: (qmail 32699 invoked from network); 10 Feb 2006 22:30:24 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-3.us4.outblaze.com with SMTP; 10 Feb 2006 22:30:24 -0000
Message-ID: <43ED1402.5010008@curtin.com>
Date: Fri, 10 Feb 2006 17:30:26 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performance and FS block size
References: <20060210221758.95968.qmail@web50314.mail.yahoo.com>
In-Reply-To: <20060210221758.95968.qmail@web50314.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

> Michael,
> 
> Actually, one more thing - you said you changed the store/BufferedIndexOutput.BUFFER_SIZE from 1024 to 4096 and that turned out to yield the fastest indexing.  Does your FS block size also happen to be 4k (dumpe2fs output) on that FC3 box?  If so, I wonder if this is more than just a coincidence...

I should have mentioned that I'm on Lucene 1.4.3.  I changed 
storage/OutputStream.BUFFER_SIZE to 4K.

dumpe2fs gives a block size of 4096.  Pretty strong coincidence, I agree!  :-)

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 11 00:49:55 2006
Return-Path: <java-user-return-18882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89850 invoked from network); 11 Feb 2006 00:49:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Feb 2006 00:49:54 -0000
Received: (qmail 27022 invoked by uid 500); 11 Feb 2006 00:49:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26135 invoked by uid 500); 11 Feb 2006 00:49:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26124 invoked by uid 99); 11 Feb 2006 00:49:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 16:49:49 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.22.58.18] (HELO mail.dicarta.com) (12.22.58.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 16:49:47 -0800
Received: from corpx.corp.dicarta.com (corpx.dicarta.com [10.1.8.35])
	by mail.dicarta.com  with ESMTP id k1B0nMs25204
	for <java-user@lucene.apache.org>; Fri, 10 Feb 2006 16:49:22 -0800 (PST)
From: jwang@dicarta.com
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C62EA5.01B74853"
Subject: Re: Build vs. Buy? 
Date: Fri, 10 Feb 2006 16:49:25 -0800
Message-ID: <9778DA4F3D53D04B9AE80AC64AC073A305745B16@corpx.dicarta.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <9778DA4F3D53D04B9AE80AC64AC073A305745B16@corpx.dicarta.com>
Thread-Topic: [NEW] - Re: Build vs. Buy? - Message is from an unknown sender
Thread-Index: AcYt1yhlTt3b9xPvQ8eT2Ppz8o0k0QAzRmU7
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C62EA5.01B74853
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


The reason we don't use Google appliance is that our company doesn't =
give recommendations on OSs or Hardwares to run, it would looke a little =
wierd if we say, oh, you have to buy this hardware for our search =
engine, but for our core technology, feel free to deploy it anywhere you =
want.  It just doesn't make sense.

Thanks everyone for their comments on this topic and the Word document =
topic.  I've looked at the extractors for Aperture (thanks again!) and =
have renewed confidence now.  I'll definitely be pushing for Lucene with =
the decision makers.

Jeff Wang

-----Original Message-----
From:	P. Alex. Salamanca R. [mailto:alexander.salamanca@gmail.com]
Sent:	Thu 2/9/2006 4:15 PM
To:	java-user@lucene.apache.org
Cc:=09
Subject:	[NEW] - Re: Build vs. Buy? - Message is from an unknown sender
On the other hand, if you want be the most cheapest, why don't give a =
chance
to google search appliance?





------_=_NextPart_001_01C62EA5.01B74853
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C62EA5.01B74853--

From java-user-return-18883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 11 03:03:03 2006
Return-Path: <java-user-return-18883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32433 invoked from network); 11 Feb 2006 03:03:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Feb 2006 03:03:03 -0000
Received: (qmail 34805 invoked by uid 500); 11 Feb 2006 03:02:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34777 invoked by uid 500); 11 Feb 2006 03:02:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34766 invoked by uid 99); 11 Feb 2006 03:02:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Feb 2006 19:02:57 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.84] (HELO web50508.mail.yahoo.com) (206.190.38.84)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Feb 2006 19:02:57 -0800
Received: (qmail 67986 invoked by uid 60001); 11 Feb 2006 03:02:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=y1nSNp8y+Zlpo+H6DiaTL+6/uzC5d3cOZFHKiaeH+5N5zzzoT3swTnrtnY6gtyC+RCkalr1TJeG9ayYWWwdy3+lcSBZdclgyBgviUsMzZDYyL2GIEwfeDEPKoGyB96U55pDk2xgmfDprhoYHN7yHjR+K/DJnraGj3e4XMVNmuHY=  ;
Message-ID: <20060211030236.67984.qmail@web50508.mail.yahoo.com>
Received: from [69.253.117.221] by web50508.mail.yahoo.com via HTTP; Fri, 10 Feb 2006 19:02:35 PST
Date: Fri, 10 Feb 2006 19:02:35 -0800 (PST)
From: Byron Miller <byronmhome@yahoo.com>
Subject: Re: Performance and FS block size
To: java-user@lucene.apache.org
In-Reply-To: <20060210221229.32459.qmail@web50307.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis,

If i'm not mistaken block size especially on ext3
becomes an issue when you hit a peak amount of total
blocks and lose performance on inode lookup vs that of
of Reiserfs.. for example you may gain performance by
going to 4k vs 1k on ext3 however Reiserfs at that
block level size should be xx times faster in many
scenerios..

HOWEVER that only considers if your data is fitting in
that block size. If you have hundreds of thousands of
1-4k files Reiserfs at 1k block size would be best
(least wastefull and faster access because of it's
b-tree lookup) but if your dealing with lots of large
files there won't be much difference unless you switch
altogether to XFS which has fairly aggressive caching
and performance in mind. (it simply doesn't wait and
keeps on trucking, heavy utilization of memory to
buffer throughput)

What does your hdparm speeds look like?

eg:

booger@svr1 [/home/mozdex/segments]# dumpe2fs
/dev/sdb1 | grep "Block size"
dumpe2fs 1.32 (09-Nov-2002)
Block size:               4096
booger@svr1 [/home/mozdex/segments]# hdparm -tT
/dev/sdb1

/dev/sdb1:
 Timing buffer-cache reads:   3372 MB in  2.00 seconds
= 1685.89 MB/sec
 Timing buffered disk reads:  110 MB in  3.00 seconds
=  36.62 MB/sec
booger@svr1 [/home/mozdex/segments]#

My server is under load at these test however they
came out pretty good considering :)

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Hi,
> 
> Thanks for the speedy answer, this is good to know.
> However, i was wondering about the FS block size....
> consider a Linux box:
> 
> $ dumpe2fs  /dev/sda1 | grep "Block size"
> dumpe2fs 1.36 (05-Feb-2005)
> Block size:               1024
> 
> That shows /dev/sda1 has blocks 1k in size.  I don't
> think these can be changed "on-the-fly", and can be
> changed only by re-creating the FS (e.g. mkfs.ext3
> .... under Linux).  Thus, I can't test different
> block sizes easily, and am wondering if anyone has
> already done this, or simply knows what block size,
> theoretically at least, should perform better.
> 
> Thanks,
> Otis
> 
> ----- Original Message ----
> From: Michael D. Curtin <mike@curtin.com>
> To: java-user@lucene.apache.org
> Sent: Fri 10 Feb 2006 05:05:07 PM EST
> Subject: Re: Performance and FS block size
> 
> Otis Gospodnetic wrote:
> 
> > Hi,
> > 
> > I'm wondering if anyone has tested Lucene
> indexing/search performance with different file
> system block sizes?
> > 
> > I just realized one of the servers where I run a
> lot of Lucene indexing and searching has an FS with
> blocks of only 1K in size (typically they are 4k or
> 8k, I believe), so I started wondering what's better
> for Lucene - smaller or larger blocks?  I have a
> feeling 1K is too small, although I don't know
> enough to back up this feeling. :(
> 
> On my system (dual Xeon with a couple 120GB S-ATA
> drives (not RAIDed), running 
> Fedora Core 3) I changed BUFFER_SIZE in
> storage/OutputStream.java to 4096, 
> achieving about 30% better performance in indexing. 
> The search improvement 
> was smaller, enough smaller that it was on order
> what I thought my measurement 
> error was.  I tried values up to 64K, but there
> wasn't much change on my 
> system after 4K.
> 
> --MDC
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 11 09:47:49 2006
Return-Path: <java-user-return-18884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31717 invoked from network); 11 Feb 2006 09:47:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Feb 2006 09:47:48 -0000
Received: (qmail 92863 invoked by uid 500); 11 Feb 2006 09:47:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92820 invoked by uid 500); 11 Feb 2006 09:47:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92806 invoked by uid 99); 11 Feb 2006 09:47:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Feb 2006 01:47:43 -0800
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=FROM_LOCAL_NOVOWEL,HTML_10_20,HTML_MESSAGE,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrshwrk@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO zproxy.gmail.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Feb 2006 01:47:42 -0800
Received: by zproxy.gmail.com with SMTP id 40so593016nzk
        for <java-user@lucene.apache.org>; Sat, 11 Feb 2006 01:47:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tIBDBD1UIJrqOWG5ajPubWXyTlDBSEsaOPWq+rfuiTsbABuOiVO9lPmZXDOJWfQJ2y+YftdUyLvCgaBe2jAD5gZ8fQ83+eeR2Tlfit+H6fj8tb8QHfjtNb5SX2JvFrcQm7isYfthRU17JTnSH1PYgNTjLFDPdtVa/FI2tfjKTpk=
Received: by 10.64.156.14 with SMTP id d14mr144850qbe;
        Sat, 11 Feb 2006 01:47:21 -0800 (PST)
Received: by 10.65.73.9 with HTTP; Sat, 11 Feb 2006 01:47:21 -0800 (PST)
Message-ID: <bf155c6c0602110147x7bbbaddbnb87ae59632019bf6@mail.gmail.com>
Date: Sat, 11 Feb 2006 15:17:21 +0530
From:  <rrshwrk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with indexing and query strategy
In-Reply-To: <abe188f20601301015r6b257352u97f88724f5e92fdd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6925_5254966.1139651241588"
References: <3AF76382C31760418AF0FBFD84F714030A4476CA@MI8NYCMAIL07.Mi8.com>
	 <abe188f20601301015r6b257352u97f88724f5e92fdd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6925_5254966.1139651241588
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi all

I have a small problem and unable to figure out how to do to it.

I am unable to figure out how do i compute similarity ( similar to the scor=
e
given by lucene) for a particular doucment indexed by lucene
and  a given query string. i know that there is a function called search
which comptues the similarity and returns the results but i do not want
that. i just need the similarity score. please help me how i can do it. i
searched the lucene api but cudnt figure it out.

thanks
~rsh

------=_Part_6925_5254966.1139651241588--

From java-user-return-18885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 11 14:15:48 2006
Return-Path: <java-user-return-18885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1670 invoked from network); 11 Feb 2006 14:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Feb 2006 14:15:48 -0000
Received: (qmail 40012 invoked by uid 500); 11 Feb 2006 14:15:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39921 invoked by uid 500); 11 Feb 2006 14:15:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 44998 invoked by uid 99); 10 Feb 2006 21:05:06 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=yNnPAQI+nuf4h3hojIpeVBDJuedd3eozpML+yRJXl3cGCgS5G3CaEn3DAvIOYhw98xcHyE4xQJW3CIUvTnuibb+11Fkdc9mZVHG7SqadSYj4So0Wr7pTeONl0jiEh2jvgjNIBuvNdHBFDbukOy7rEDKGlhEvVbAC/pXDMgNjxj4=  ;
Message-ID: <20060210210441.31654.qmail@web30214.mail.mud.yahoo.com>
Date: Fri, 10 Feb 2006 13:04:40 -0800 (PST)
From: Joe Amstadt <tekkacon@yahoo.com>
Subject: Lucene PhraseQuery Problem No Hits
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-917991680-1139605480=:23343"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-917991680-1139605480=:23343
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Problem.
I can add one or multiple TermQuery's to the BooleanQuery for searching and I am getting Hits when i preform the search on various indexes.  If i add a PhraseQuery to the BooleanQuery on a search i get zero hits.

         Some Background Information:

Indexing using standard anaylzer.
Indexing text documents into various indexes based on their year created.
Using Lucene 1.4.3.
Lucene Document fields used are Keyword and Text.
Searching using BooleanQuery and adding TermQuery and PhraseQuery to the BooleanQuery to preform a search on the various indexes.

Example 1:
PhraseQuery pq_query = new PhraseQuery();
pq_query.add( new Term( "body", "\"circus parade\"" ) );
<BooleanQuery>.add( pq_query, true, false);

I get zero Hits on the search.  In the document there is a phrase that goes "circus parade downtown"

Also i have tried this code as well and nothing.  Also i have messed with the <PhraseQuery>.setSlop() and still zero hits.

try{

     bq_query.add((PhraseQuery)QueryParser.parse( "\"circus parade\"", "body", new  StandardAnalyzer() ), true, false) ;
}catch(ParseException pe){

    pe.printStackTrace();
}

Example2: 
<BooleanQuery>.add( new TermQuery ( new Term  ( "body", "circus" ) ) , true, false );

I get Hits from the search

Example 3:
<BooleanQuery>.add( new TermQuery ( new Term  ( "body", "circus" ) ) , true, false );
<BooleanQuery>.add( new TermQuery ( new Term  ( "body", "parade" ) ) , true, false );
<BooleanQuery>.add( new TermQuery ( new Term  ( "body", "downtown" ) ) , true, false );

I get Hits from the search



Any help on this matter would be great!


		
---------------------------------
 Yahoo! Mail
 Use Photomail to share photos without annoying attachments.
--0-917991680-1139605480=:23343--

From java-user-return-18886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 11 18:28:06 2006
Return-Path: <java-user-return-18886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76155 invoked from network); 11 Feb 2006 18:28:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Feb 2006 18:28:06 -0000
Received: (qmail 60558 invoked by uid 500); 11 Feb 2006 18:28:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60525 invoked by uid 500); 11 Feb 2006 18:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60514 invoked by uid 99); 11 Feb 2006 18:28:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Feb 2006 10:28:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Feb 2006 10:27:58 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 152D55B763; Sat, 11 Feb 2006 10:27:28 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 008757F403
	for <java-user@lucene.apache.org>; Sat, 11 Feb 2006 10:27:28 -0800 (PST)
Date: Sat, 11 Feb 2006 10:27:28 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene PhraseQuery Problem No Hits
In-Reply-To: <20060210210441.31654.qmail@web30214.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0602111021560.17546@hal.rescomp.berkeley.edu>
References: <20060210210441.31654.qmail@web30214.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: PhraseQuery pq_query = new PhraseQuery();
: pq_query.add( new Term( "body", "\"circus parade\"" ) );
: <BooleanQuery>.add( pq_query, true, false);

the terms you add to a phrase query need to be exactly equal to the
individual terms that your analyzer would have generated when indexingthe
documents you now want to match.  in your case, it looks like you are
using StandardAnalyzer -- which never generates a term with a space in it.

try this....

    PhraseQuery pq_query = new PhraseQuery();
    pq_query.add(new Term("body", "circus"));
    pq_query.add(new Term("body", "parade"));


:      bq_query.add((PhraseQuery)QueryParser.parse( "\"circus parade\"", "body", new  StandardAnalyzer() ), true, false) ;

...off the top of my head, that seems like it should work.  have you
looked at the toString on the resulting query object to see what it's
structure is?  Compare it with the toString of a query built hte way i
describe above and see if anything is different.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 12 00:31:04 2006
Return-Path: <java-user-return-18887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81623 invoked from network); 12 Feb 2006 00:31:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Feb 2006 00:31:03 -0000
Received: (qmail 36530 invoked by uid 500); 12 Feb 2006 00:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36501 invoked by uid 500); 12 Feb 2006 00:30:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36490 invoked by uid 99); 12 Feb 2006 00:30:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Feb 2006 16:30:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [203.194.209.160] (HELO vulcan.rootr.net) (203.194.209.160)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Feb 2006 16:30:57 -0800
Received: from [192.168.42.14] (meatloaf.fotap.org [63.211.45.38])
	(using TLSv1 with cipher RC4-SHA (128/128 bits))
	(No client certificate requested)
	by vulcan.rootr.net (Postfix) with ESMTP id 064103C13
	for <java-user@lucene.apache.org>; Sun, 12 Feb 2006 00:26:47 +0000 (UTC)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20060210215508.5613.qmail@web50313.mail.yahoo.com>
References: <20060210215508.5613.qmail@web50313.mail.yahoo.com>
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-108-335754452; protocol="application/pkcs7-signature"
Message-Id: <12E33DC0-1828-43E8-B77F-852D592BDC6F@apache.org>
X-Image-Url: http://fotap.org/~osi/mail/peter.royal@pobox.com
From: peter royal <proyal@apache.org>
Subject: Re: Performance and FS block size
Date: Sat, 11 Feb 2006 19:30:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-108-335754452
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

On Feb 10, 2006, at 4:55 PM, Otis Gospodnetic wrote:
> I'm wondering if anyone has tested Lucene indexing/search  
> performance with different file system block sizes?
>
> I just realized one of the servers where I run a lot of Lucene  
> indexing and searching has an FS with blocks of only 1K in size  
> (typically they are 4k or 8k, I believe), so I started wondering  
> what's better for Lucene - smaller or larger blocks?  I have a  
> feeling 1K is too small, although I don't know enough to back up  
> this feeling. :(

If you want to boost performance, changing the readahead size on the  
device will probably help, if not tuned. Use the 'blockdev' command  
on linux to tweak this.
-pete

-- 
proyal@apache.org - http://fotap.org/~osi



--Apple-Mail-108-335754452
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGMzCCAuww
ggJVoAMCAQICAw8s0zANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0EwHhcNMDUwNzIxMTIxMjAwWhcNMDYwNzIxMTIxMjAwWjBgMRIwEAYDVQQE
EwlSb3lhbCwgSlIxDjAMBgNVBCoTBVBldGVyMRgwFgYDVQQDEw9QZXRlciBSb3lhbCwgSlIxIDAe
BgkqhkiG9w0BCQEWEXByb3lhbEBhcGFjaGUub3JnMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB
CgKCAQEAvi2PYc/UWrOc5nqiMfFA1z6kIxpy2Q0UJSsrYkp6Fdo4buZflNSjWSTezrLLq2OrWAQh
1fNCNMQTHDt5gFWgMYqvW1u1PcbUtj5GW9egVM6dFJJY5eeNw65JlCAJ2AVTppmFwilz6uY+SyvN
aH3umQQtT6UBbYGrjWBNlr1WxHt2RMfUTocHaWt4t2FKuVXDuiV2HzIE+YwwfhhCK5hzigOJXz1o
JOX7LR8bCk0NpdQGgHg9vVtPv3m2IXkO68FmeF0ELhsFpyMaTRKO8VAWtYA2oiUsFtDz6BLhZtN1
VkHs45V8YUaO5fRfS0paJpuX4JBAsgOoQ6jNwViXh3TiOQIDAQABoy4wLDAcBgNVHREEFTATgRFw
cm95YWxAYXBhY2hlLm9yZzAMBgNVHRMBAf8EAjAAMA0GCSqGSIb3DQEBBAUAA4GBAC0E8SPXQgTx
7/q2ofLmZsynPAS3I7sI/ch6oU9s9pox6aEZnFpcYnH5E2p7zd2ECpZu39v+YQX5W4tQ8Mx8jBTK
YZAWdcq1BpU2U5llfoMKMOTz31W4sVt/4kcysYB4jDzWAqDsqOhEwQEhv8Yq0cNkKu54FY61RPCB
EX8yAexoMIIDPzCCAqigAwIBAgIBDTANBgkqhkiG9w0BAQUFADCB0TELMAkGA1UEBhMCWkExFTAT
BgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2FwZSBUb3duMRowGAYDVQQKExFUaGF3dGUg
Q29uc3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcyBEaXZpc2lvbjEkMCIG
A1UEAxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENBMSswKQYJKoZIhvcNAQkBFhxwZXJzb25h
bC1mcmVlbWFpbEB0aGF3dGUuY29tMB4XDTAzMDcxNzAwMDAwMFoXDTEzMDcxNjIzNTk1OVowYjEL
MAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNV
BAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMIGfMA0GCSqGSIb3DQEBAQUA
A4GNADCBiQKBgQDEpjxVc1X7TrnKmVoeaMB1BHCd3+n/ox7svc31W/Iadr1/DDph8r9RzgHU5VAK
MNcCY1osiRVwjt3J8CuFWqo/cVbLrzwLB+fxH5E2JCoTzyvV84J3PQO+K/67GD4Hv0CAAmTXp6a7
n2XRxSpUhQ9IBH+nttE8YQRAHmQZcmC3+wIDAQABo4GUMIGRMBIGA1UdEwEB/wQIMAYBAf8CAQAw
QwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybC50aGF3dGUuY29tL1RoYXd0ZVBlcnNvbmFsRnJl
ZW1haWxDQS5jcmwwCwYDVR0PBAQDAgEGMCkGA1UdEQQiMCCkHjAcMRowGAYDVQQDExFQcml2YXRl
TGFiZWwyLTEzODANBgkqhkiG9w0BAQUFAAOBgQBIjNFQg+oLLswNo2asZw9/r6y+whehQ5aUnX9M
Ibj4Nh+qLZ82L8D0HFAgk3A8/a3hYWLD2ToZfoSxmRsAxRoLgnSeJVCUYsfbJ3FXJY3dqZw5jowg
T2Vfldr394fWxghOrvbqNOUQGls1TXfjViF4gtwhGTXeJLHTHUb/XV9lTzGCAucwggLjAgEBMGkw
YjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAq
BgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMPLNMwCQYFKw4DAhoF
AKCCAVMwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMDYwMjEyMDAz
MDI4WjAjBgkqhkiG9w0BCQQxFgQUCojZwn8z5iLUFl8NUOiABP0ZGRYweAYJKwYBBAGCNxAEMWsw
aTBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEs
MCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECAw8s0zB6BgsqhkiG
9w0BCRACCzFroGkwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQ
dHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMP
LNMwDQYJKoZIhvcNAQEBBQAEggEAUj7xahprweGn+NNtByodxbbASAing+xLf3k7QulPTUfFw730
enacQvITKck7ZkWy8NjA9jvYQT2SGnPpC3jZaZ8G80rKpzVfnBJ2up7BTS9fkEBCASQTEAeAfwr9
bQGOc1d9+bZK5SktTDR7PzLYtbohXW6Tl8KhqFFtLS231tZUl4gTq6bM56c6sZxqkhbxs6iq3/lg
e7emvuybGJv0JT6jyK25vn4J4lJUx+jxrReyxGgfpOLhhVs8Bo8u/T0eW4KinT/jZPqb/5M3vhlv
GIAoEBikq28890lZbEpUHvnmnaLbIxOWMhexzP5t8pEYSMfnJ9CyuGoiuIDD4pfhmAAAAAAAAA==

--Apple-Mail-108-335754452--

From java-user-return-18888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 12 20:24:10 2006
Return-Path: <java-user-return-18888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97366 invoked from network); 12 Feb 2006 20:24:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Feb 2006 20:24:10 -0000
Received: (qmail 52898 invoked by uid 500); 12 Feb 2006 20:24:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51910 invoked by uid 500); 12 Feb 2006 20:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51898 invoked by uid 99); 12 Feb 2006 20:24:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 12:24:04 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Feb 2006 12:24:03 -0800
Received: (qmail 14717 invoked by uid 60001); 12 Feb 2006 20:23:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=R4dyGGVhf8EqDq6I5xbDuCRgyvWvGIvBC+GKTF2gJbx2exrLOByEZo0DNZKfoR95yxGHocnVvzRRDfksjydfqLaNlAWaiZrpfT710J8fbpCYwSr/p46cYg7iwKGvmHzbfd3KohVg9tcR6h5McSqj4CX2HTgVqvm0550bNfy3vSA=  ;
Message-ID: <20060212202338.14715.qmail@web50308.mail.yahoo.com>
Date: Sun, 12 Feb 2006 12:23:38 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performance and FS block size
To: java-user@lucene.apache.org
In-Reply-To: <20060211030236.67984.qmail@web50508.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm somewhat familiar with ext3 vs. ReiserFS stuff, but that's not really what I'm after (finding a better/faster FS).  What I'm wondering is about different block sizes on a single (ext3) FS.
If I understand block sizes correctly, they represent a chunk of data that the FS will read in a single read.
- If the block size is 1K, and Lucene needs to read 4K of data, then the disk will have to do 4 reads, and will read in a total of 4K.
- If the block size is 4K, and Lucene needs to read 3K of data, then the disk will have to do 1 read, and will read a total of 3K, although that will actually consume 4K, because that's the size of a block.

If the above is correct, then I think the Lucene performance will depend on the block size, types of searches, and the order of data on disk.
For instance, if queries are completely random, require small reads (e.g. small post lists), and hit data that is scattered around the index/disk, then a smaller block size will not hurt as much.
On the other hand, if queries are not random (i.e. they hit the same part of index), or if the data on disk is sorted in a chronological order and queries use chronological order sorting, and read larger chunks of data (e.g. if you have large pieces of text stored and you read them off of disk), then larger blocks will work better, because they will require the disk to perform fewer reads.

Does any of this sound right?
I recall Paul Elschot talking about disk reads and disk arm movement, and Robert Engels talking about Nio and block sizes, so they might know more about this stuff.

Thanks,
Otis



----- Original Message ----
From: Byron Miller <byronmhome@yahoo.com>
To: java-user@lucene.apache.org
Sent: Fri 10 Feb 2006 10:02:35 PM EST
Subject: Re: Performance and FS block size

Otis,

If i'm not mistaken block size especially on ext3
becomes an issue when you hit a peak amount of total
blocks and lose performance on inode lookup vs that of
of Reiserfs.. for example you may gain performance by
going to 4k vs 1k on ext3 however Reiserfs at that
block level size should be xx times faster in many
scenerios..

HOWEVER that only considers if your data is fitting in
that block size. If you have hundreds of thousands of
1-4k files Reiserfs at 1k block size would be best
(least wastefull and faster access because of it's
b-tree lookup) but if your dealing with lots of large
files there won't be much difference unless you switch
altogether to XFS which has fairly aggressive caching
and performance in mind. (it simply doesn't wait and
keeps on trucking, heavy utilization of memory to
buffer throughput)

What does your hdparm speeds look like?

eg:

booger@svr1 [/home/mozdex/segments]# dumpe2fs
/dev/sdb1 | grep "Block size"
dumpe2fs 1.32 (09-Nov-2002)
Block size:               4096
booger@svr1 [/home/mozdex/segments]# hdparm -tT
/dev/sdb1

/dev/sdb1:
 Timing buffer-cache reads:   3372 MB in  2.00 seconds
= 1685.89 MB/sec
 Timing buffered disk reads:  110 MB in  3.00 seconds
=  36.62 MB/sec
booger@svr1 [/home/mozdex/segments]#

My server is under load at these test however they
came out pretty good considering :)

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Hi,
> 
> Thanks for the speedy answer, this is good to know.
> However, i was wondering about the FS block size....
> consider a Linux box:
> 
> $ dumpe2fs  /dev/sda1 | grep "Block size"
> dumpe2fs 1.36 (05-Feb-2005)
> Block size:               1024
> 
> That shows /dev/sda1 has blocks 1k in size.  I don't
> think these can be changed "on-the-fly", and can be
> changed only by re-creating the FS (e.g. mkfs.ext3
> .... under Linux).  Thus, I can't test different
> block sizes easily, and am wondering if anyone has
> already done this, or simply knows what block size,
> theoretically at least, should perform better.
> 
> Thanks,
> Otis
> 
> ----- Original Message ----
> From: Michael D. Curtin <mike@curtin.com>
> To: java-user@lucene.apache.org
> Sent: Fri 10 Feb 2006 05:05:07 PM EST
> Subject: Re: Performance and FS block size
> 
> Otis Gospodnetic wrote:
> 
> > Hi,
> > 
> > I'm wondering if anyone has tested Lucene
> indexing/search performance with different file
> system block sizes?
> > 
> > I just realized one of the servers where I run a
> lot of Lucene indexing and searching has an FS with
> blocks of only 1K in size (typically they are 4k or
> 8k, I believe), so I started wondering what's better
> for Lucene - smaller or larger blocks?  I have a
> feeling 1K is too small, although I don't know
> enough to back up this feeling. :(
> 
> On my system (dual Xeon with a couple 120GB S-ATA
> drives (not RAIDed), running 
> Fedora Core 3) I changed BUFFER_SIZE in
> storage/OutputStream.java to 4096, 
> achieving about 30% better performance in indexing. 
> The search improvement 
> was smaller, enough smaller that it was on order
> what I thought my measurement 
> error was.  I tried values up to 64K, but there
> wasn't much change on my 
> system after 4K.
> 
> --MDC
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 12 21:35:33 2006
Return-Path: <java-user-return-18889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14751 invoked from network); 12 Feb 2006 21:35:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Feb 2006 21:35:33 -0000
Received: (qmail 21992 invoked by uid 500); 12 Feb 2006 21:35:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21933 invoked by uid 500); 12 Feb 2006 21:35:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21922 invoked by uid 99); 12 Feb 2006 21:35:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 13:35:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.203 as permitted sender)
Received: from [64.233.182.203] (HELO nproxy.gmail.com) (64.233.182.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 13:35:19 -0800
Received: by nproxy.gmail.com with SMTP id l35so149643nfa
        for <java-user@lucene.apache.org>; Sun, 12 Feb 2006 13:34:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ac4yWg1gNfjRioDeTo/t2/LtLkPtJtxCj8aFX33y3ulfiAHWS+7BfVkluJAt1qwggNv4rjpgyjLqarxy+c7EZ/nv2igxXhq04tSzmlGeJwawr4s31RVCkQqcggbHLxs17Q4VgYgfnk6ylxGzHfxgJsVB5nQh1q8hvJcsmzKO/Hw=
Received: by 10.48.108.7 with SMTP id g7mr543772nfc;
        Sun, 12 Feb 2006 13:34:51 -0800 (PST)
Received: by 10.49.75.14 with HTTP; Sun, 12 Feb 2006 13:34:51 -0800 (PST)
Message-ID: <c68e39170602121334s2a2e014tb01aec43d1e35d10@mail.gmail.com>
Date: Sun, 12 Feb 2006 16:34:51 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performance and FS block size
In-Reply-To: <20060212202338.14715.qmail@web50308.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20060211030236.67984.qmail@web50508.mail.yahoo.com>
	 <20060212202338.14715.qmail@web50308.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 2/12/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> If I understand block sizes correctly, they represent a chunk of data tha=
t the FS will read in a single read.

The filesystem block size is just the logical size of allocation units
for the FS, and does not put any cap on the amount of data that can be
read or written to the low level device at one time (IDE drives have
logical sector sizes of 512 bytes anyway).

ext2fs and ext3fs try hard to keep files contiguous, this realizing
most of the benefits of large blocks.

A 4K block size will probably still be a little more efficient than a
1K block size for large files, but don't expect anything too dramatic.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 12 21:49:46 2006
Return-Path: <java-user-return-18890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18501 invoked from network); 12 Feb 2006 21:49:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Feb 2006 21:49:46 -0000
Received: (qmail 42628 invoked by uid 500); 12 Feb 2006 21:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41977 invoked by uid 500); 12 Feb 2006 21:49:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41912 invoked by uid 99); 12 Feb 2006 21:49:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 13:49:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 13:49:32 -0800
Received: from snorlax.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by snorlax.uk.scalix.com (8.12.11/8.12.11) with ESMTP id k1CLn5An010945
	for <java-user@lucene.apache.org>; Sun, 12 Feb 2006 21:49:05 GMT
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11/8.12.11/Submit) with ESMTP id k1CLn4Mp010943
	for <java-user@lucene.apache.org>; Sun, 12 Feb 2006 21:49:05 GMT
Received: from [192.168.0.22] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 10.0.0.175)
    via ESMTP; Sun, 12 Feb 2006 21:49:04 +0000 (GMT)
Date: Sun, 12 Feb 2006 21:48:57 +0000
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <43EFAD49.50302@scalix.com>
In-Reply-To: <20060212202338.14715.qmail@web50308.mail.yahoo.com>
References: <20060212202338.14715.qmail@web50308.mail.yahoo.com>
Subject: Re: Performance and FS block size
x-scalix-Hops: 1
User-Agent: Mozilla Thunderbird 1.0.7-1.4.1 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

>I'm somewhat familiar with ext3 vs. ReiserFS stuff, but that's not really what I'm after (finding a better/faster FS).  What I'm wondering is about different block sizes on a single (ext3) FS.
>If I understand block sizes correctly, they represent a chunk of data that the FS will read in a single read.
>- If the block size is 1K, and Lucene needs to read 4K of data, then the disk will have to do 4 reads, and will read in a total of 4K.
>- If the block size is 4K, and Lucene needs to read 3K of data, then the disk will have to do 1 read, and will read a total of 3K, although that will actually consume 4K, because that's the size of a block.
>  
>
That's correct Otis.   Applications generally to get best performance 
when they read data in the file system block size (or small multiples 
thereof) which for ext2 and ext3 is almost always 4k.  It might be 
interesting to try making file systems with different block sizes and 
see what the effect on performance is and also, perhaps trying larger 
block sizes in Lucene, but always keeping Lucene's block size a multiple 
of the file system block size.   For an educated guess, I'd say that 
4k/4k gives better performance than smaller file system block sizes and 
8k/4k is not likely to have much of an effect either way.

>Does any of this sound right?
>I recall Paul Elschot talking about disk reads and disk arm movement, and Robert Engels talking about Nio and block sizes, so they might know more about this stuff.
>  
>
It depends very much on the type of disk: 15,000 rpm ultra-scsi 320 
disks on a 64 bit PCI card will probably be faster than a 4200rpm disk 
in a laptop :-)   Seriously, disk configuration makes a lot of 
difference: striped RAID arrays will give the best I/O performance 
(given a  controller and whatnot that can exploit that).   Once you get 
into huge amount of I/O there are other, more complex issues that affect 
performance.

java.nio has the right features to exploit the I/O subsystem of the OS 
to good advantage.   We haven't done the performance measurements yet, 
but memory mappied I/O should yield the best performance (as well as 
freeing you from worrying about what block size is best).    It will 
also be interesting to try the different I/O schedulers under Linux: cfq 
is the default for the 2.6 kernel that Red Hat ships, but I can imagine 
the deadline scheduler may give interesting results.   As I say, at some 
stage over the next few months we're likely to be looking at this in 
more detail.

The one thing that makes more difference than anything else though is 
locality of reference; this seems to well understood by the Lucene index 
format and is probably why the performance is generall good!

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 12 22:20:32 2006
Return-Path: <java-user-return-18891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27573 invoked from network); 12 Feb 2006 22:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Feb 2006 22:20:32 -0000
Received: (qmail 74483 invoked by uid 500); 12 Feb 2006 22:20:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74447 invoked by uid 500); 12 Feb 2006 22:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74436 invoked by uid 99); 12 Feb 2006 22:20:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 14:20:27 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.113] (HELO web50515.mail.yahoo.com) (206.190.39.113)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Feb 2006 14:20:17 -0800
Received: (qmail 79096 invoked by uid 60001); 12 Feb 2006 22:19:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=3G4uLsknHZzbMZEd+AbWw+3lPjzYMrx7PUS+6RqTkDlbLh2/EiYeNO8FaZwXtVlfdCujVYLb/P06pMPep+q9rNC04qt8pKgSdgifgmL/lGsDfsCALJzLB1XtBRhp99H/cZz336or/QebXFYykC0aARu6xOHjCT0jXLzkwg6gCHU=  ;
Message-ID: <20060212221907.79094.qmail@web50515.mail.yahoo.com>
Received: from [69.253.117.221] by web50515.mail.yahoo.com via HTTP; Sun, 12 Feb 2006 14:19:07 PST
Date: Sun, 12 Feb 2006 14:19:07 -0800 (PST)
From: Byron Miller <byronmhome@yahoo.com>
Subject: Re: Performance and FS block size
To: java-user@lucene.apache.org
In-Reply-To: <20060212202338.14715.qmail@web50308.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I just through in the reiserfs suggestion since it's
usually nott a 1k vs 4k blocksize issue as much as it
is how many contiguous files consume those blocksizes.
If they're small and random reiserfs will smoke ext3,
if they're large ext3 will be lighter weight and if
they're really large and somewhat sequential XFS will
annihalite them all.

Were you able to see how much peak transfer your
drives get?

You have to remember on linux that unless you bypass
the kernel cache (fs buffer) and have java optimized
to cache or read its blocks then your really just
testing the performance of the linux schedular and
caching mechanism more than your 1k vs 4k blocksize.

Modern databases don't even reflect the need for
blocksize to match your db block size anymore as most
of the IO is done through enhanced kernel io
procedures and optimized to bypass the linux kernel
caching of which i'm not sure if java is capable of
doing. (haven't done any research) I'm also pretty
positive the bypassing of block buffering through the
new io libs is primarily redhat releated with other
vendors having there own version.

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Hi,
> 
> I'm somewhat familiar with ext3 vs. ReiserFS stuff,
> but that's not really what I'm after (finding a
> better/faster FS).  What I'm wondering is about
> different block sizes on a single (ext3) FS.
> If I understand block sizes correctly, they
> represent a chunk of data that the FS will read in a
> single read.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 12 22:44:28 2006
Return-Path: <java-user-return-18892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35641 invoked from network); 12 Feb 2006 22:44:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Feb 2006 22:44:27 -0000
Received: (qmail 97275 invoked by uid 500); 12 Feb 2006 22:44:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97250 invoked by uid 500); 12 Feb 2006 22:44:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97239 invoked by uid 99); 12 Feb 2006 22:44:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 14:44:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 14:44:20 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.3/8.13.3) with ESMTP id k1CMhw5C086241
	for <java-user@lucene.apache.org>; Sun, 12 Feb 2006 23:43:58 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Performance and FS block size
Date: Sun, 12 Feb 2006 23:43:58 +0100
User-Agent: KMail/1.8.2
References: <20060212202338.14715.qmail@web50308.mail.yahoo.com> <43EFAD49.50302@scalix.com>
In-Reply-To: <43EFAD49.50302@scalix.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602122343.58352.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sunday 12 February 2006 22:48, John Haxby wrote:
> Otis Gospodnetic wrote:
> 
> >I'm somewhat familiar with ext3 vs. ReiserFS stuff, but that's not really 
what I'm after (finding a better/faster FS).  What I'm wondering is about 
different block sizes on a single (ext3) FS.
> >If I understand block sizes correctly, they represent a chunk of data that 
the FS will read in a single read.
> >- If the block size is 1K, and Lucene needs to read 4K of data, then the 
disk will have to do 4 reads, and will read in a total of 4K.
> >- If the block size is 4K, and Lucene needs to read 3K of data, then the 
disk will have to do 1 read, and will read a total of 3K, although that will 
actually consume 4K, because that's the size of a block.
> >  
> >
> That's correct Otis.   Applications generally to get best performance 
> when they read data in the file system block size (or small multiples 
> thereof) which for ext2 and ext3 is almost always 4k.  It might be 
> interesting to try making file systems with different block sizes and 
> see what the effect on performance is and also, perhaps trying larger 
> block sizes in Lucene, but always keeping Lucene's block size a multiple 
> of the file system block size.   For an educated guess, I'd say that 
> 4k/4k gives better performance than smaller file system block sizes and 
> 8k/4k is not likely to have much of an effect either way.
> 
> >Does any of this sound right?
> >I recall Paul Elschot talking about disk reads and disk arm movement, and 
Robert Engels talking about Nio and block sizes, so they might know more 
about this stuff.
> >  
> >
> It depends very much on the type of disk: 15,000 rpm ultra-scsi 320 
> disks on a 64 bit PCI card will probably be faster than a 4200rpm disk 
> in a laptop :-)   Seriously, disk configuration makes a lot of 
> difference: striped RAID arrays will give the best I/O performance 
> (given a  controller and whatnot that can exploit that).   Once you get 
> into huge amount of I/O there are other, more complex issues that affect 
> performance.
> 
> java.nio has the right features to exploit the I/O subsystem of the OS 
> to good advantage.   We haven't done the performance measurements yet, 
> but memory mappied I/O should yield the best performance (as well as 
> freeing you from worrying about what block size is best).    It will 
> also be interesting to try the different I/O schedulers under Linux: cfq 
> is the default for the 2.6 kernel that Red Hat ships, but I can imagine 
> the deadline scheduler may give interesting results.   As I say, at some 
> stage over the next few months we're likely to be looking at this in 
> more detail.
> 
> The one thing that makes more difference than anything else though is 
> locality of reference; this seems to well understood by the Lucene index 
> format and is probably why the performance is generall good!

IndexReader.doc(docId) for more than 2 docs is normally best done with
increasing docId. This reduces disk head movement, since the stored docs
are in that order.
When Hits() its used, it is tempting to retrieve docs in scoring order via 
the Hits.doc() method, but that is probably not the best order for retrieval
speed.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 06:43:48 2006
Return-Path: <java-user-return-18893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75502 invoked from network); 13 Feb 2006 06:43:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 06:43:48 -0000
Received: (qmail 79205 invoked by uid 500); 13 Feb 2006 06:43:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79172 invoked by uid 500); 13 Feb 2006 06:43:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79161 invoked by uid 99); 13 Feb 2006 06:43:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 22:43:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Feb 2006 22:43:40 -0800
Received: from page.mel.office.aconex.com (page.mel.office.aconex.com [192.168.0.210])
	by mail.app.aconex.com (Postfix) with ESMTP id 873FE5B807A
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 17:43:18 +1100 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 7018C53403A
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 17:43:18 +1100 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 32596-01-33 for <java-user@lucene.apache.org>;
 Mon, 13 Feb 2006 17:43:16 +1100 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 88D66534039
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 17:43:16 +1100 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
To: java-user@lucene.apache.org
Message-Id: <62A09DD2-ED2F-4358-81F7-A863D9876C5D@aconex.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-15-444522142
From: Paul Smith <psmith@aconex.com>
Subject: CompoundFileReader question/'leaking' file descriptors ?
Date: Mon, 13 Feb 2006 17:43:15 +1100
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-15-444522142
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


I've been hunting an insidious problem whereby during heavy  
incremental indexing operations in production on redhat el3 machine I  
notice that the java process has a lot of open files which appear to  
be deleted.

Now, before anyone jumps in, yes I know the # open file limit needs  
to be incremented, i've done that (it's at a hideous 16000 at the  
moment..).  Things I've verified include Writers/readers/searchers  
get closed when they should (finally blocks etc).

Using the 'lsof' command to track the open files, we see tonnes of  
these entries:

[root@index1 logs]# lsof -p `ps -efww | grep '[m]el.xml' | awk  
'{print $2}'` | grep deleted | head
java    23749 root  120r   REG       8,3     17507  61079633 /aconex/ 
index/current/project/39/56/0000025639/corr/000001/_dga.cfs (deleted)
java    23749 root  121r   REG       8,3     21775  61079684 /aconex/ 
index/current/project/39/56/0000025639/corr/000001/_dlc.cfs (deleted)
java    23749 root  123r   REG       8,3     17507  61079728 /aconex/ 
index/current/project/39/56/0000025639/corr/000001/_dq4.cfs (deleted)
......

What is REALLY weird is that they eventually do get released.  And  
scarily enough, it seems to track with when the garbage collector  
does a major collection (we managed to figure this out using Yourkit  
profiler and hitting the force GC), and lo, they disappear...  We  
have many indexes (2000, one for each project-entity), and not an  
UberIndex, and hence having indexes leak file handles is much more  
noticeable.

We're using Lucene 1.4.3, and after hunting around in the source code  
just to see what I might be missing, I came across this, and I'd just  
like some comments.

CompoundFileReader has an inner-class CSInputStream which is used to  
read the stream (and we're using the Compound format, so this is  
relevant here).

However it overrides InputStream.close(), but does not call  
super.close().  After tracing around where this is all used I believe  
that this method REALLY SHOULD be calling super.close() (or not  
overriding) it,because CompoundFileReader will be given an  
InputStream to wrap, eventually coming down to FSInputStream which  
apparently then calss Descriptor.close().

Scarily enough this ends up calling RandomAccessFile.close, which  
goes into native library calls and, assumably, close the file.

The guard here is that the finalizer method in FSInputStream does  
call close() so that would well explain the releasing of file handles  
at garbage collection intervals.

Why would CompoundFileReader not need to call .close()?

Am I going mad here and just seeing ghosts? Comments appreciated.

Paul Smith


--Apple-Mail-15-444522142--

From java-user-return-18894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 08:04:13 2006
Return-Path: <java-user-return-18894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99439 invoked from network); 13 Feb 2006 08:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 08:04:12 -0000
Received: (qmail 32622 invoked by uid 500); 13 Feb 2006 08:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32300 invoked by uid 500); 13 Feb 2006 08:04:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32289 invoked by uid 99); 13 Feb 2006 08:04:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 00:04:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 00:04:03 -0800
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k1D83gB09831
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 02:03:43 -0600
Message-ID: <43F03D5B.6010307@getopt.org>
Date: Mon, 13 Feb 2006 09:03:39 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance and FS block size
References: <20060212221907.79094.qmail@web50515.mail.yahoo.com>
In-Reply-To: <20060212221907.79094.qmail@web50515.mail.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

None of you mentioned yet the aspect that 4k is the memory page size on 
IA32 hardware. This in itself would favor any operations using multiple 
of this size, and penalize operations using amounts below this size.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 08:53:08 2006
Return-Path: <java-user-return-18895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26057 invoked from network); 13 Feb 2006 08:53:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 08:53:08 -0000
Received: (qmail 91042 invoked by uid 500); 13 Feb 2006 08:53:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91006 invoked by uid 500); 13 Feb 2006 08:53:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90995 invoked by uid 99); 13 Feb 2006 08:53:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 00:53:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 00:52:59 -0800
Received: from snorlax.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by snorlax.uk.scalix.com (8.12.11/8.12.11) with ESMTP id k1D8qbXW028815
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 08:52:38 GMT
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11/8.12.11/Submit) with ESMTP id k1D8qbkO028813
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 08:52:37 GMT
Received: from [192.168.0.22] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 10.0.0.175)
    via ESMTP; Mon, 13 Feb 2006 08:52:37 +0000 (GMT)
Date: Mon, 13 Feb 2006 08:52:31 +0000
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <43F048CF.5020001@scalix.com>
In-Reply-To: <43F03D5B.6010307@getopt.org>
References: <20060212221907.79094.qmail@web50515.mail.yahoo.com>
References: <43F03D5B.6010307@getopt.org>
Subject: Re: Performance and FS block size
x-scalix-Hops: 1
User-Agent: Mozilla Thunderbird 1.0.7-1.4.1 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:

> None of you mentioned yet the aspect that 4k is the memory page size 
> on IA32 hardware. This in itself would favor any operations using 
> multiple of this size, and penalize operations using amounts below 
> this size.

For normal I/O it will rarely make any difference at all: the return 
results from read(2) are copied from kernel space to user space.   Under 
some rare conditions it can make a difference if the copy causes a page 
fault for user-space memory, but that can happen with any buffer size.   
Memory-mapped I/O does take into account the VM page size, but that's 
entirely in the kernel's domain.   I believe (though I haven't checked 
lately) that memory mapping does avoid the final copy, and it certainly 
does avoid system calls so it has the potential to be as fast as the 
undelying I/O subsystem allows it to be.   However, there are a few 
pathological cases where memory-mapped I/O is slower and you have to be 
very careful about the size of the file you're dealing with (unless 
you're running in a 64 bit process).

As Paul Elschot mentioned, the design of Lucene is the most important 
thing: it knows about locality of reference and does the right thing.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 09:35:48 2006
Return-Path: <java-user-return-18896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46743 invoked from network); 13 Feb 2006 09:35:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 09:35:46 -0000
Received: (qmail 44973 invoked by uid 500); 13 Feb 2006 09:35:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44947 invoked by uid 500); 13 Feb 2006 09:35:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44936 invoked by uid 99); 13 Feb 2006 09:35:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 01:35:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cwho.work@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO zproxy.gmail.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 01:35:19 -0800
Received: by zproxy.gmail.com with SMTP id m7so1092522nzf
        for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 01:34:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Rxt8CoXaUf8bJdVtI2P1yNG8nwDRqHQHDzQ+BFRQMiFVlDcYEw29Lt7330JyzmsRcY0Nm+wMz+PbgISv2eYGqMwjfv/eFa5Zrp4iVx8P173r5fr3md4fr+cSEz0ZogGtyO9C0d/5ScP3Av4/2H23RWAvhPTT27jQ27OT8cgYQvs=
Received: by 10.36.39.15 with SMTP id m15mr281465nzm;
        Mon, 13 Feb 2006 01:34:58 -0800 (PST)
Received: by 10.36.36.1 with HTTP; Mon, 13 Feb 2006 01:34:58 -0800 (PST)
Message-ID: <6c33f9950602130134p57817946s1f32d98587dac7a9@mail.gmail.com>
Date: Mon, 13 Feb 2006 17:34:58 +0800
From: Chun Wei Ho <cwho.work@gmail.com>
To: java-user@lucene.apache.org
Subject: Suggesting refine searches with Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am trying to suggest refine searches for my Lucene search. For
example, if a search turned out too many searches, it would list a
number of document title subsequences that occurred frequently in the
results of the previous search, as possible candidates for refining
the search.

Does anyone know the right/any approach to implementing this in a
Lucene-based search app?

Thanks.

CW

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 09:48:18 2006
Return-Path: <java-user-return-18897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52586 invoked from network); 13 Feb 2006 09:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 09:48:17 -0000
Received: (qmail 63571 invoked by uid 500); 13 Feb 2006 09:48:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63547 invoked by uid 500); 13 Feb 2006 09:48:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63536 invoked by uid 99); 13 Feb 2006 09:48:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 01:48:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.137.212.28] (HELO basicbox6.server-home.net) (195.137.212.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 01:48:10 -0800
Received: from sleipnir2 (dslb-084-061-052-122.pools.arcor-ip.net [84.61.52.122])
	by basicbox6.server-home.net (Postfix) with ESMTP id 144547189F7
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 10:47:46 +0100 (CET)
From: "Klaus" <klaus@vommond.de>
To: <java-user@lucene.apache.org>
Subject: AW: Suggesting refine searches with Lucene
Date: Mon, 13 Feb 2006 10:47:43 +0100
Message-ID: <000101c63082$898b3040$6402a8c0@sleipnir2>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <6c33f9950602130134p57817946s1f32d98587dac7a9@mail.gmail.com>
Thread-Index: AcYwgMjVwZeuPGvbQ4mqSH8jRyH+OQAAYhxQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A simple approach is to count the most common words in the result set =
and
present them in combination with the original query. If you have any =
meta
information you could use them the refine the query.

-----Urspr=FCngliche Nachricht-----
Von: Chun Wei Ho [mailto:cwho.work@gmail.com]=20
Gesendet: Montag, 13. Februar 2006 10:35
An: java-user@lucene.apache.org
Betreff: Suggesting refine searches with Lucene

Hi,

I am trying to suggest refine searches for my Lucene search. For
example, if a search turned out too many searches, it would list a
number of document title subsequences that occurred frequently in the
results of the previous search, as possible candidates for refining
the search.

Does anyone know the right/any approach to implementing this in a
Lucene-based search app?

Thanks.

CW

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 09:50:04 2006
Return-Path: <java-user-return-18898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53031 invoked from network); 13 Feb 2006 09:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 09:50:04 -0000
Received: (qmail 67775 invoked by uid 500); 13 Feb 2006 09:49:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67750 invoked by uid 500); 13 Feb 2006 09:49:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67739 invoked by uid 99); 13 Feb 2006 09:49:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 01:49:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.128.105.12] (HELO King.Siti.com) (209.128.105.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 01:49:56 -0800
Received: from ravij ([10.2.152.215] unverified) by King.Siti.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 13 Feb 2006 01:34:37 -0800
From: "Ravi" <ravi.jaladanki@siti.com>
To: <java-user@lucene.apache.org>
Subject: RE: Suggesting refine searches with Lucene
Date: Mon, 13 Feb 2006 15:22:48 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYwfrxPGC1SdqMtS5yQygW7maqSDQAA4FQg
In-Reply-To: <6c33f9950602130134p57817946s1f32d98587dac7a9@mail.gmail.com>
Message-ID: <KING6e1W62vyrgCoH0b000001f9@King.Siti.com>
X-OriginalArrivalTime: 13 Feb 2006 09:34:39.0031 (UTC) FILETIME=[B5C71C70:01C63080]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi ,


I have implemented by using query "mergeBooleanQueries" method... in this
approach I have created one POJO class of RefineQuery which contains one
variable called Query and I will set whenever I get a search..
And next time if it is a refined search I will merge current query with  the
refinedquery object and get new query and pass to lucene and set the new
query to refined search object .... this is working fine.. let me know if
have any further ideas or any new technique to implement refined search



if(objSearchParameters.isBSearchInSearch()){
     	Query q2		=
Query.mergeBooleanQueries(new Query[]{ 	objRefineQuery.getQuery(),
booleanQuery });
          	objRefineQuery.setQuery(q2);
    	hits 	= 	 searcher.search(q2);
            }else{
          	objRefineQuery.setQuery(booleanQuery);
	hits	= searcher.search(booleanQuery); 
            }







public class RefineQuery {

	private Query   query = null;

	
	public Query getQuery() {
		return query;
	}


	public void setQuery(Query query) {
		this.query = query;
	}


	public String toString(){
	  return query.toString();	
	}
	
}




Regards,
Ravi Kumar Jaladanki

-----Original Message-----
From: Chun Wei Ho [mailto:cwho.work@gmail.com] 
Sent: Monday, February 13, 2006 3:05 PM
To: java-user@lucene.apache.org
Subject: Suggesting refine searches with Lucene

Hi,

I am trying to suggest refine searches for my Lucene search. For
example, if a search turned out too many searches, it would list a
number of document title subsequences that occurred frequently in the
results of the previous search, as possible candidates for refining
the search.

Does anyone know the right/any approach to implementing this in a
Lucene-based search app?

Thanks.

CW

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 10:35:48 2006
Return-Path: <java-user-return-18899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75230 invoked from network); 13 Feb 2006 10:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 10:35:48 -0000
Received: (qmail 27400 invoked by uid 500); 13 Feb 2006 10:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26944 invoked by uid 500); 13 Feb 2006 10:35:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26933 invoked by uid 99); 13 Feb 2006 10:35:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 02:35:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.137.212.28] (HELO basicbox6.server-home.net) (195.137.212.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 02:35:39 -0800
Received: from sleipnir2 (dslb-084-061-052-122.pools.arcor-ip.net [84.61.52.122])
	by basicbox6.server-home.net (Postfix) with ESMTP id 302167187EA
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 11:35:16 +0100 (CET)
From: "Klaus" <klaus@vommond.de>
To: <java-user@lucene.apache.org>
Subject: AW: Suggesting refine searches with Lucene
Date: Mon, 13 Feb 2006 11:35:13 +0100
Message-ID: <000801c63089$2c3d3760$6402a8c0@sleipnir2>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcYwfrxPGC1SdqMtS5yQygW7maqSDQAA4FQgAAGs1rA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
In-Reply-To: <KING6e1W62vyrgCoH0b000001f9@King.Siti.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>And next time if it is a refined search I will merge current query with  

How do you recognize a refined query? And how are you the queries refined?

Cheers,

klaus


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 10:41:40 2006
Return-Path: <java-user-return-18900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78049 invoked from network); 13 Feb 2006 10:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 10:41:39 -0000
Received: (qmail 37138 invoked by uid 500); 13 Feb 2006 10:41:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36868 invoked by uid 500); 13 Feb 2006 10:41:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36857 invoked by uid 99); 13 Feb 2006 10:41:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 02:41:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cwho.work@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 02:41:32 -0800
Received: by zproxy.gmail.com with SMTP id 9so964288nzo
        for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 02:41:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hjx3YJFHZChGKKu1gNefGcY95WeOAlVWmu5hrlpuv2Nd0OfQsWNRdWQ+X9TZGWrGv2tWefvQDtz21FeNhWlOWpbUCZLH+M/k13quTn8BP0vxxBnD6HAA5hH8GB6cbznlrZ8uoZBtzATvp1uuZH02nAxG5FHEcb4cvTjIfaYQUW8=
Received: by 10.36.119.1 with SMTP id r1mr2853727nzc;
        Mon, 13 Feb 2006 02:41:11 -0800 (PST)
Received: by 10.36.36.1 with HTTP; Mon, 13 Feb 2006 02:41:11 -0800 (PST)
Message-ID: <6c33f9950602130241u699cfb12udd2cbbc4fb53c308@mail.gmail.com>
Date: Mon, 13 Feb 2006 18:41:11 +0800
From: Chun Wei Ho <cwho.work@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suggesting refine searches with Lucene
In-Reply-To: <KING6e1W62vyrgCoH0b000001f9@King.Siti.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6c33f9950602130134p57817946s1f32d98587dac7a9@mail.gmail.com>
	 <KING6e1W62vyrgCoH0b000001f9@King.Siti.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks. But I am actually looking for approaches/libraries which will
help me to come up with the suggested "refine searches".

For example I might search for "accident" on the headlines at a news
site, which would come back with lots of hits. I am looking for
something that would analyze the headlines (or some other specified
text field) of all those hits and come up with a list of refined
searches that would return a specific/considerable subset of the
results, e.g. "Traffic", "plane", "boating", etc, being frequent
occurrences of headline text in news that include "accident" in the
headlines.

I guess its a matter of finding frequently occurring subsequences with
some intelligent guessing but I was hoping that someone else better
would have already done it in a library that I could adapt.

Regards,
CW


On 2/13/06, Ravi <ravi.jaladanki@siti.com> wrote:
> Hi ,
>
>
> I have implemented by using query "mergeBooleanQueries" method... in this
> approach I have created one POJO class of RefineQuery which contains one
> variable called Query and I will set whenever I get a search..
> And next time if it is a refined search I will merge current query with  =
the
> refinedquery object and get new query and pass to lucene and set the new
> query to refined search object .... this is working fine.. let me know if
> have any further ideas or any new technique to implement refined search
>
>
>
> if(objSearchParameters.isBSearchInSearch()){
>         Query q2                =3D
> Query.mergeBooleanQueries(new Query[]{  objRefineQuery.getQuery(),
> booleanQuery });
>                 objRefineQuery.setQuery(q2);
>         hits    =3D        searcher.search(q2);
>             }else{
>                 objRefineQuery.setQuery(booleanQuery);
>         hits    =3D searcher.search(booleanQuery);
>             }
>
>
>
>
>
>
>
> public class RefineQuery {
>
>         private Query   query =3D null;
>
>
>         public Query getQuery() {
>                 return query;
>         }
>
>
>         public void setQuery(Query query) {
>                 this.query =3D query;
>         }
>
>
>         public String toString(){
>           return query.toString();
>         }
>
> }
>
>
>
>
> Regards,
> Ravi Kumar Jaladanki
>
> -----Original Message-----
> From: Chun Wei Ho [mailto:cwho.work@gmail.com]
> Sent: Monday, February 13, 2006 3:05 PM
> To: java-user@lucene.apache.org
> Subject: Suggesting refine searches with Lucene
>
> Hi,
>
> I am trying to suggest refine searches for my Lucene search. For
> example, if a search turned out too many searches, it would list a
> number of document title subsequences that occurred frequently in the
> results of the previous search, as possible candidates for refining
> the search.
>
> Does anyone know the right/any approach to implementing this in a
> Lucene-based search app?
>
> Thanks.
>
> CW
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 14:27:06 2006
Return-Path: <java-user-return-18901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6941 invoked from network); 13 Feb 2006 14:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 14:27:06 -0000
Received: (qmail 16261 invoked by uid 500); 13 Feb 2006 14:27:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15972 invoked by uid 500); 13 Feb 2006 14:26:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15959 invoked by uid 99); 13 Feb 2006 14:26:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 06:26:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of zhousen.zju@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 06:26:59 -0800
Received: by zproxy.gmail.com with SMTP id m22so1029705nzf
        for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 06:26:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:x-mimeole;
        b=bjhjAhAXgIyqxH3ZeXMsUCRU3a81dRBgAoRUp7PR/8Q7kI7XJS2tqsv8bgqi4cufAvVh37lTK6naqUJUdXloE3WUgZfhzh83pIpQ4uOBuPEvrTIimCliu52IqjOyNFhZDCw1G1g3IYoF3kmfHsfIGHKlohvsjk8drZY+kprGGYc=
Received: by 10.36.71.7 with SMTP id t7mr3199369nza;
        Mon, 13 Feb 2006 06:26:38 -0800 (PST)
Received: from zhousen ( [60.191.58.178])
        by mx.gmail.com with ESMTP id 36sm3622575nza.2006.02.13.06.26.35;
        Mon, 13 Feb 2006 06:26:38 -0800 (PST)
From: "Sen Zhou" <zhousen.zju@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Can the score be changed dynamically?
Date: Mon, 13 Feb 2006 22:26:34 +0800
Message-ID: <000901c630a9$7fbf7d60$7d00a8c0@zhousen>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcYwqX1KTOz0hD4PT22twX1LVa6sqw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,all
  We have a requirement that the clicked-number of the document will be a
factor in the score's calculation. For example, a search operation returns
10 documents ordered by score. But the 2nd document are more frequently
choosen and clicked by users than the 1st one. Of course, I will record the
click number. I want the 2nd document to bubble up and become the first one.
How can I integrate the function to Lucene.
Any suggestion? 

Best wishes,
Sen Zhou
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 14:47:36 2006
Return-Path: <java-user-return-18902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17119 invoked from network); 13 Feb 2006 14:47:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 14:47:35 -0000
Received: (qmail 55780 invoked by uid 500); 13 Feb 2006 14:47:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55755 invoked by uid 500); 13 Feb 2006 14:47:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55741 invoked by uid 99); 13 Feb 2006 14:47:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 06:47:27 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.227] (HELO web51709.mail.yahoo.com) (206.190.38.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 06:47:26 -0800
Received: (qmail 95680 invoked by uid 60001); 13 Feb 2006 14:47:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=N7M2YT3KU1og2flYeSTZfcQSy/CQfYqfyP41GONygi8yXS2xFpbzcs2TemG6ECGdwrptb9LNSn4lcnvBYh4xzGDmWiGVLIeCvmcXt0Xzh9UKm7EAlaNH5q/GT2Thm/wBRgbPgBFs+qEZ+ujETD0MFTzG232+xYeTPJnHoWLeRB8=  ;
Message-ID: <20060213144704.95678.qmail@web51709.mail.yahoo.com>
Received: from [69.251.48.204] by web51709.mail.yahoo.com via HTTP; Mon, 13 Feb 2006 06:47:04 PST
Date: Mon, 13 Feb 2006 06:47:04 -0800 (PST)
From: Greg Gershman <greggersh@yahoo.com>
Subject: Help with mass delete from large index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm trying to delete a large number of documents
(~15million) from a a large index (30+ million
documents).  I've started with an optimized index, and
a list of docIds (our own unique identifier for a
document, not a Lucene doc number) to pass to the
IndexReader.delete(Term t) method.  I've had a few
different problems.

The following code is inside the loop that iterates
through the document IDs:

                  try {
                    Term t = new Term("docID",
String.valueOf(docID));
                   
deletedCount+=indexReader.delete(t);
                    }
                   catch (Exception e)
                   {
                       System.out.println("Error while
deleting docID#" + docID);
                       e.printStackTrace();
                   }

In order to commit the deletions, I also close and
reopen the IndexReader periodically.

At first I was reopening the IndexReader after every
500K documents deleted.  The problem was that after
~60-75K deletions, the delete call began to throw a
NullPointerException:

Error while deleting docID#27136356
java.lang.NullPointerException
        at java.lang.String.compareTo(String.java:402)
        at
org.apache.lucene.index.Term.compareTo(Term.java:76)
        at
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143)
        at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:132)
        at
org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:51)
        at
org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:364)
        at
org.apache.lucene.index.IndexReader.delete(IndexReader.java:449)
        at IndexEraser.main(IndexEraser.java:32)

After a little fiddling around, I tried reducing the
interval between reopens to 5000, and most of the
NullPointerExceptions went away.

A test search of the resulting, unoptimized index
worked fine.

I then optimized the index to reduce the size of the
index.  Now, instead of getting data back for many of
the results, I get a null value.

Any ideas?  I'm really confused, and the only other
option I can think of is to reindex the documents I
need, which would take much longer than deleting the
ones I dont.

Thanks!

Greg Gershman

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 14:53:15 2006
Return-Path: <java-user-return-18903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19628 invoked from network); 13 Feb 2006 14:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 14:53:15 -0000
Received: (qmail 65590 invoked by uid 500); 13 Feb 2006 14:53:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65567 invoked by uid 500); 13 Feb 2006 14:53:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65556 invoked by uid 99); 13 Feb 2006 14:53:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 06:53:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.196 as permitted sender)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 06:53:08 -0800
Received: (qmail 2988 invoked from network); 13 Feb 2006 14:52:46 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-1.us4.outblaze.com with SMTP; 13 Feb 2006 14:52:45 -0000
Message-ID: <43F09D3D.3070509@curtin.com>
Date: Mon, 13 Feb 2006 09:52:45 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Help with mass delete from large index
References: <20060213144704.95678.qmail@web51709.mail.yahoo.com>
In-Reply-To: <20060213144704.95678.qmail@web51709.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Greg Gershman wrote:

> I'm trying to delete a large number of documents
> (~15million) from a a large index (30+ million
> documents).  I've started with an optimized index, and
> a list of docIds (our own unique identifier for a
> document, not a Lucene doc number) to pass to the
> IndexReader.delete(Term t) method.  I've had a few
> different problems.
> ...
> Any ideas?  I'm really confused, and the only other
> option I can think of is to reindex the documents I
> need, which would take much longer than deleting the
> ones I dont.

Maybe it would be useful to take a step back up the tree of abstractions here 
and reexamine why you're deleting such a large fraction of your index, 
particularly if you're doing it on a regular basis.  For example, is there a 
chronological or other "natural" break in the data such that you could make 2 
indexes with ~15M docs each in the first place, then just delete a few index 
*files* instead of 15M documents, one at a time?

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 15:24:48 2006
Return-Path: <java-user-return-18904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38184 invoked from network); 13 Feb 2006 15:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 15:24:44 -0000
Received: (qmail 52607 invoked by uid 500); 13 Feb 2006 15:24:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52581 invoked by uid 500); 13 Feb 2006 15:24:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52570 invoked by uid 99); 13 Feb 2006 15:24:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 07:24:36 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.134] (HELO web51715.mail.yahoo.com) (206.190.39.134)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 07:24:36 -0800
Received: (qmail 1835 invoked by uid 60001); 13 Feb 2006 15:24:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=TmjyPBiMxoKWezNNiGGA8IWJx6t5Ovg+Fqx/8Ci9uy5/aGm93buLg73BuAVeKIO/WHUWJisBzQ8McbCZuN2/zFGzGYBV06SUnLvu0vF60bXtUmOautMFvOMmRknC68BGL4gIHFX7lifFa5VyexCrmjgRCrEz5ynBEsVB35Lb/aU=  ;
Message-ID: <20060213152414.1833.qmail@web51715.mail.yahoo.com>
Received: from [69.251.48.204] by web51715.mail.yahoo.com via HTTP; Mon, 13 Feb 2006 07:24:14 PST
Date: Mon, 13 Feb 2006 07:24:14 -0800 (PST)
From: Greg Gershman <greggersh@yahoo.com>
Subject: Re: Help with mass delete from large index
To: java-user@lucene.apache.org
In-Reply-To: <43F09D3D.3070509@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No problem; this is not meant to be a regular
operation, rather it's a (hopefully) one-time thing
till the index can be restructured.

The data is chronological in nature, deleting
everything before a specific point in time.  The index
is optimized, so is it possible to remove specific
files?  I'm open to other suggestions as to how to
approach this.

Also, I neglected to mention I'm using version 1.4.3.

Greg 


--- "Michael D. Curtin" <mike@curtin.com> wrote:

> Greg Gershman wrote:
> 
> > I'm trying to delete a large number of documents
> > (~15million) from a a large index (30+ million
> > documents).  I've started with an optimized index,
> and
> > a list of docIds (our own unique identifier for a
> > document, not a Lucene doc number) to pass to the
> > IndexReader.delete(Term t) method.  I've had a few
> > different problems.
> > ...
> > Any ideas?  I'm really confused, and the only
> other
> > option I can think of is to reindex the documents
> I
> > need, which would take much longer than deleting
> the
> > ones I dont.
> 
> Maybe it would be useful to take a step back up the
> tree of abstractions here 
> and reexamine why you're deleting such a large
> fraction of your index, 
> particularly if you're doing it on a regular basis. 
> For example, is there a 
> chronological or other "natural" break in the data
> such that you could make 2 
> indexes with ~15M docs each in the first place, then
> just delete a few index 
> *files* instead of 15M documents, one at a time?
> 
> --MDC
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 17:27:11 2006
Return-Path: <java-user-return-18905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8321 invoked from network); 13 Feb 2006 17:27:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 17:27:10 -0000
Received: (qmail 60152 invoked by uid 500); 13 Feb 2006 17:27:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59820 invoked by uid 500); 13 Feb 2006 17:27:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59809 invoked by uid 99); 13 Feb 2006 17:27:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 09:27:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO zproxy.gmail.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 09:27:02 -0800
Received: by zproxy.gmail.com with SMTP id s18so1077823nze
        for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 09:26:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=LbdiOOVTzlKQerOGzKS2Y1VET7pYemRF5DSMIJgMU9I739yvLH+fn0/jC5tuL3dbUk1YENYHWs+UD0n7t2hn3DTwVaTvJVHTygDL2Z1oMZ43z2vv8FTRUYJgNoP3joqnNdHww5IQPoXOBrY6ayGdLWCenQZCEO0NRjEom96o/6o=
Received: by 10.37.2.72 with SMTP id e72mr3383255nzi;
        Mon, 13 Feb 2006 09:26:41 -0800 (PST)
Received: from ?172.22.19.82? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id 38sm4847527nzk.2006.02.13.09.26.41;
        Mon, 13 Feb 2006 09:26:41 -0800 (PST)
Message-ID: <43F0C151.3040700@gmail.com>
Date: Mon, 13 Feb 2006 11:26:41 -0600
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: When do files in 'deleteable' get deleted?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If I am using lucene (daily build from ~ a month ago or so) on windows - 
and when I merge two indexes together, I get a number of .cfs files 
noted in my 'deleteable' file - but they never seem to actually be 
deleted by lucene.

When does lucene try to delete these files - does it ever work on 
windows?  As far as I can tell, nothing should be holding a lock on 
those files.  Yet, even when I shut down the only jvm that is using 
these indexes, and then open a new one, and perform a search, they don't 
go away.

Thanks,

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 17:42:19 2006
Return-Path: <java-user-return-18906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15470 invoked from network); 13 Feb 2006 17:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 17:42:18 -0000
Received: (qmail 98585 invoked by uid 500); 13 Feb 2006 17:42:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97668 invoked by uid 500); 13 Feb 2006 17:42:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97657 invoked by uid 99); 13 Feb 2006 17:42:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 09:42:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 09:42:07 -0800
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: When do files in 'deleteable' get deleted?
Date: Mon, 13 Feb 2006 12:41:45 -0500
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D131051EDA81@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: When do files in 'deleteable' get deleted?
Thread-Index: AcYwwvJ5sEWfmpOwRZ+cUuj6Yhpy1gAAcVXA
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I believe that the files are actually deleted from lucene when the
optimize is run.

-----Original Message-----
From: Dan Armbrust [mailto:daniel.armbrust.list@gmail.com]=20
Sent: Monday, February 13, 2006 12:27 PM
To: java-user@lucene.apache.org
Subject: When do files in 'deleteable' get deleted?

If I am using lucene (daily build from ~ a month ago or so) on windows -

and when I merge two indexes together, I get a number of .cfs files=20
noted in my 'deleteable' file - but they never seem to actually be=20
deleted by lucene.

When does lucene try to delete these files - does it ever work on=20
windows?  As far as I can tell, nothing should be holding a lock on=20
those files.  Yet, even when I shut down the only jvm that is using=20
these indexes, and then open a new one, and perform a search, they don't

go away.

Thanks,

Dan

--=20
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 18:38:47 2006
Return-Path: <java-user-return-18907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41995 invoked from network); 13 Feb 2006 18:38:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 18:38:46 -0000
Received: (qmail 84436 invoked by uid 500); 13 Feb 2006 18:38:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84348 invoked by uid 500); 13 Feb 2006 18:38:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84324 invoked by uid 99); 13 Feb 2006 18:38:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 10:38:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.196 as permitted sender)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 10:38:32 -0800
Received: (qmail 15867 invoked from network); 13 Feb 2006 18:38:03 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-1.us4.outblaze.com with SMTP; 13 Feb 2006 18:38:03 -0000
Message-ID: <43F0D20D.3050204@curtin.com>
Date: Mon, 13 Feb 2006 13:38:05 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Help with mass delete from large index
References: <20060213152414.1833.qmail@web51715.mail.yahoo.com>
In-Reply-To: <20060213152414.1833.qmail@web51715.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Greg Gershman wrote:

> No problem; this is not meant to be a regular
> operation, rather it's a (hopefully) one-time thing
> till the index can be restructured.
> 
> The data is chronological in nature, deleting
> everything before a specific point in time.  The index
> is optimized, so is it possible to remove specific
> files?  I'm open to other suggestions as to how to
> approach this.

Now that it's already in 1 index, I'm afraid you can't just delete a few 
files.  On the other hand, if it's only a one-time thing, reindexing with only 
the docs you want shouldn't be too bad.  If you think you might ever need to 
perform such a cull again, you might make several distinct indexes (one per 
day, per week, per whatever) during that reindexing so the next time will be 
much easier.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 18:41:48 2006
Return-Path: <java-user-return-18908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43489 invoked from network); 13 Feb 2006 18:41:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 18:41:48 -0000
Received: (qmail 91133 invoked by uid 500); 13 Feb 2006 18:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91106 invoked by uid 500); 13 Feb 2006 18:41:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91095 invoked by uid 99); 13 Feb 2006 18:41:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 10:41:42 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.251.225.197] (HELO navioml001.navisite.net) (216.251.225.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 10:41:41 -0800
Received: from navexc.corp.int.com (navexc01.min.navisite-int.com [10.208.9.167])
	by navioml001.navisite.net (Postfix) with ESMTP id 20EE3B0E4A
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 13:41:20 -0500 (EST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Stemmer algorithms
Date: Mon, 13 Feb 2006 13:41:52 -0500
Message-ID: <37E2AB54ECE58E40A4E56916CD324DD46D4200@NAVEXC.corp.int.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Stemmer algorithms
Thread-Index: AcYwwvJ5sEWfmpOwRZ+cUuj6Yhpy1gAAcVXAAAGywLA=
From: "Yilmazel, Sibel" <syilmazel@navisite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

We have done some preliminary research on Porter2 and K-stem algorithms
and have some questions.

Porter2 was found to be a 'strong' stemming algorithm where it strips
off both inflectional suffixes (-s, -es, -ed) and derivational suffixes
(-able, -aciousness, -ability). K-Stem seemed to be a weak stemming
algorithm as it strips off only the inflectional suffixes (-s, -es,
-ed).

In IR, it is usually recommended using a "weak" stemmer, as the "weak"
stemmer seldom hurts performance, but it usually provides significant
improvement with precision.

However, Porter2 is the most widely used stemming algorithm AND it is a
'strong' stemmer which is contrary to what is said above.=20

Can you share your ideas, experiences with stemmer algorithms? Thanks in
advance.

Sibel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 18:43:18 2006
Return-Path: <java-user-return-18909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44860 invoked from network); 13 Feb 2006 18:43:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 18:43:14 -0000
Received: (qmail 93517 invoked by uid 500); 13 Feb 2006 18:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93486 invoked by uid 500); 13 Feb 2006 18:43:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93472 invoked by uid 99); 13 Feb 2006 18:43:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 10:43:00 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.222] (HELO web51704.mail.yahoo.com) (206.190.38.222)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 10:42:59 -0800
Received: (qmail 46989 invoked by uid 60001); 13 Feb 2006 18:42:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=TCDyIlZZdqI74P9bPHHDxx3JmSBvb1NVJyUMd9y3SL1EEeyfFAh+JxoKqGAOSKyAzBstvfqKurkK0M1icHnOoD43u023ZtklYUy4p4mVsISr4i7fu9MzggLd3YjyZ80gSSVMjdf6LcTdddmZafBk4Teo3t0bjkWYgoXBTV7QHSU=  ;
Message-ID: <20060213184238.46987.qmail@web51704.mail.yahoo.com>
Received: from [69.251.48.204] by web51704.mail.yahoo.com via HTTP; Mon, 13 Feb 2006 10:42:38 PST
Date: Mon, 13 Feb 2006 10:42:38 -0800 (PST)
From: Greg Gershman <greggersh@yahoo.com>
Subject: Re: Help with mass delete from large index
To: java-user@lucene.apache.org
In-Reply-To: <43F0D20D.3050204@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, that is the way things will be done in the
future.

I'm still wondering if anyone has any thoughts on the
NullPointerException and/or the delete/optimize
problems I'm having.  They seem to be very real
issues.

Greg

--- "Michael D. Curtin" <mike@curtin.com> wrote:

> Greg Gershman wrote:
> 
> > No problem; this is not meant to be a regular
> > operation, rather it's a (hopefully) one-time
> thing
> > till the index can be restructured.
> > 
> > The data is chronological in nature, deleting
> > everything before a specific point in time.  The
> index
> > is optimized, so is it possible to remove specific
> > files?  I'm open to other suggestions as to how to
> > approach this.
> 
> Now that it's already in 1 index, I'm afraid you
> can't just delete a few 
> files.  On the other hand, if it's only a one-time
> thing, reindexing with only 
> the docs you want shouldn't be too bad.  If you
> think you might ever need to 
> perform such a cull again, you might make several
> distinct indexes (one per 
> day, per week, per whatever) during that reindexing
> so the next time will be 
> much easier.
> 
> Good luck!
> 
> --MDC
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 19:14:45 2006
Return-Path: <java-user-return-18910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73525 invoked from network); 13 Feb 2006 19:14:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 19:14:45 -0000
Received: (qmail 88093 invoked by uid 500); 13 Feb 2006 19:14:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88063 invoked by uid 500); 13 Feb 2006 19:14:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88052 invoked by uid 99); 13 Feb 2006 19:14:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:14:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO zproxy.gmail.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 11:14:37 -0800
Received: by zproxy.gmail.com with SMTP id i11so1094696nzi
        for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 11:14:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=E921LNEIqfgHV5qc3MhvgPbIZhvxxzuEly52bSRK4W6smKjP/JoE/ZnBICPvfkmXm/SlVD3O8rRpZQnCMlOpN5T+T0UhtGW527IFsXy5tv5r8xqC/1ZNt7CuoJnnq7ipxiHzLeoywEVgN63qPVqMTlTEmolXuMijo+TYy6kSAHs=
Received: by 10.36.160.11 with SMTP id i11mr3465535nze;
        Mon, 13 Feb 2006 11:14:16 -0800 (PST)
Received: from ?172.22.19.82? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id c1sm3788720nzd.2006.02.13.11.14.16;
        Mon, 13 Feb 2006 11:14:16 -0800 (PST)
Message-ID: <43F0DA87.90400@gmail.com>
Date: Mon, 13 Feb 2006 13:14:15 -0600
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: When do files in 'deleteable' get deleted?
References: <14FBF41EF1411B45B2EC4ADEAC53D131051EDA81@MAIL01.wescodist.com>
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D131051EDA81@MAIL01.wescodist.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Aigner, Thomas wrote:
> I believe that the files are actually deleted from lucene when the 
> optimize is run.
> 


That gets things into the 'deleteable' file - but its never actually
deleting all of the files from the deleteable file.  I'm almost always
ending up with at least 1 duplicate copy of my index.

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 20:43:42 2006
Return-Path: <java-user-return-18911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24514 invoked from network); 13 Feb 2006 20:43:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 20:43:41 -0000
Received: (qmail 61264 invoked by uid 500); 13 Feb 2006 20:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61232 invoked by uid 500); 13 Feb 2006 20:43:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61190 invoked by uid 99); 13 Feb 2006 20:43:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 12:43:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 12:43:33 -0800
Received: (qmail 26010 invoked from network); 13 Feb 2006 20:43:11 -0000
Received: from unknown (HELO p5496f058.dip.t-dialin.net) ([pbs]695637@[84.150.240.88])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 13 Feb 2006 20:43:11 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Help with mass delete from large index
Date: Mon, 13 Feb 2006 21:43:28 +0100
User-Agent: KMail/1.8.2
References: <20060213184238.46987.qmail@web51704.mail.yahoo.com>
In-Reply-To: <20060213184238.46987.qmail@web51704.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200602132143.28785@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Montag 13 Februar 2006 19:42, Greg Gershman wrote:

> I'm still wondering if anyone has any thoughts on the
> NullPointerException and/or the delete/optimize
> problems I'm having. =C2=A0They seem to be very real
> issues.

I haven't seen this before (and don't remember anyone on the list=20
mentioning it), but if you could create a test case that reproduces it (on=
=20
an artificial test index), it can probably be debugged by someone. Also,=20
did you try the same with Lucene 1.9?

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 20:44:10 2006
Return-Path: <java-user-return-18912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24664 invoked from network); 13 Feb 2006 20:44:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 20:44:10 -0000
Received: (qmail 62529 invoked by uid 500); 13 Feb 2006 20:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62505 invoked by uid 500); 13 Feb 2006 20:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62494 invoked by uid 99); 13 Feb 2006 20:44:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 12:44:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 12:44:03 -0800
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net [207.115.4.21])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k1DKhha5002215
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 15:43:43 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net [69.228.231.148])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id k1DKhfF0171250;
	Mon, 13 Feb 2006 15:43:42 -0500
Message-ID: <43F0EF99.2030808@apache.org>
Date: Mon, 13 Feb 2006 12:44:09 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: CompoundFileReader question/'leaking' file descriptors ?
References: <62A09DD2-ED2F-4358-81F7-A863D9876C5D@aconex.com>
In-Reply-To: <62A09DD2-ED2F-4358-81F7-A863D9876C5D@aconex.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Smith wrote:
> We're using Lucene 1.4.3, and after hunting around in the source code  
> just to see what I might be missing, I came across this, and I'd just  
> like some comments.

Please try using a 1.9 build to see if this is something that's perhaps 
already been fixed.

> CompoundFileReader has an inner-class CSInputStream which is used to  
> read the stream (and we're using the Compound format, so this is  
> relevant here).
> 
> However it overrides InputStream.close(), but does not call  
> super.close().  After tracing around where this is all used I believe  
> that this method REALLY SHOULD be calling super.close() (or not  
> overriding) it,because CompoundFileReader will be given an  InputStream 
> to wrap, eventually coming down to FSInputStream which  apparently then 
> calss Descriptor.close().

No, all CSInputStream's share a single FSInputStream, so the 
FSInputStream shouldn't be closed until all of the CSInputStream's, have 
been closed.  This is done by CompoundFileReader.close().  It sounds 
like that's what's not getting called.  As you update indexes, how do 
you close stale readers?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 20:48:50 2006
Return-Path: <java-user-return-18913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26498 invoked from network); 13 Feb 2006 20:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 20:48:49 -0000
Received: (qmail 69150 invoked by uid 500); 13 Feb 2006 20:48:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69127 invoked by uid 500); 13 Feb 2006 20:48:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69116 invoked by uid 99); 13 Feb 2006 20:48:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 12:48:44 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 12:48:42 -0800
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net [207.115.4.22])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k1DKmLVT010612
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 15:48:21 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net [69.228.231.148])
	by pimout6-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id k1DKm8WO219104;
	Mon, 13 Feb 2006 15:48:13 -0500
Message-ID: <43F0F0A4.60504@apache.org>
Date: Mon, 13 Feb 2006 12:48:36 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boosting
References: <1139509037.4193.20.camel@ls10pc13.cs.uni-dortmund.de>
In-Reply-To: <1139509037.4193.20.camel@ls10pc13.cs.uni-dortmund.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sebastian Menge wrote:
> Or, to put it more simple, what does a boost of "2" or "10" _mean_ in
> contrast to a boost of "0.5" or "0.1" !?

Boosts are simply multiplied into scores.  So they only mean something 
in the context of the rest of the scoring mechanism.

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 20:58:49 2006
Return-Path: <java-user-return-18914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30646 invoked from network); 13 Feb 2006 20:58:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 20:58:48 -0000
Received: (qmail 93831 invoked by uid 500); 13 Feb 2006 20:58:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93572 invoked by uid 500); 13 Feb 2006 20:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93557 invoked by uid 99); 13 Feb 2006 20:58:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 12:58:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 12:58:39 -0800
Received: from page.mel.office.aconex.com (page.mel.office.aconex.com [192.168.0.210])
	by mail.app.aconex.com (Postfix) with ESMTP id 8E7005B803A
	for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 07:58:17 +1100 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 7711653403A
	for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 07:58:17 +1100 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 25310-02-7 for <java-user@lucene.apache.org>;
 Tue, 14 Feb 2006 07:58:16 +1100 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 59CB7534039
	for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 07:58:16 +1100 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43F0EF99.2030808@apache.org>
References: <62A09DD2-ED2F-4358-81F7-A863D9876C5D@aconex.com> <43F0EF99.2030808@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B02330AC-ABC3-45AA-B11F-83AA2094C901@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: CompoundFileReader question/'leaking' file descriptors ?
Date: Tue, 14 Feb 2006 07:58:14 +1100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On 14/02/2006, at 7:44 AM, Doug Cutting wrote:

> Paul Smith wrote:
>> We're using Lucene 1.4.3, and after hunting around in the source  
>> code  just to see what I might be missing, I came across this, and  
>> I'd just  like some comments.
>
> Please try using a 1.9 build to see if this is something that's  
> perhaps already been fixed.
>
is 1.9 binary backward compatible? (both source code and index format).

>> CompoundFileReader has an inner-class CSInputStream which is used  
>> to  read the stream (and we're using the Compound format, so this  
>> is  relevant here).
>> However it overrides InputStream.close(), but does not call   
>> super.close().  After tracing around where this is all used I  
>> believe  that this method REALLY SHOULD be calling super.close()  
>> (or not  overriding) it,because CompoundFileReader will be given  
>> an  InputStream to wrap, eventually coming down to FSInputStream  
>> which  apparently then calss Descriptor.close().
>
> No, all CSInputStream's share a single FSInputStream, so the  
> FSInputStream shouldn't be closed until all of the CSInputStream's,  
> have been closed.  This is done by CompoundFileReader.close().  It  
> sounds like that's what's not getting called.  As you update  
> indexes, how do you close stale readers?

Yes, after looking at the code again I see that it extends from a  
Lucene class called InputStream, and I had assumed it was  
java.io.InputStream.

I'm going to take yet-another look at our code, but nothing is  
obvious.  Our current production environment is running in a side-by- 
side mode. There are no searches being performed, only indexing as we  
test out our indexing support/monitoring, and fail-over techniques.

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 22:31:51 2006
Return-Path: <java-user-return-18915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85138 invoked from network); 13 Feb 2006 22:31:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 22:31:51 -0000
Received: (qmail 74292 invoked by uid 500); 13 Feb 2006 22:31:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74249 invoked by uid 500); 13 Feb 2006 22:31:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74238 invoked by uid 99); 13 Feb 2006 22:31:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 14:31:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 14:31:44 -0800
Received: from page.mel.office.aconex.com (page.mel.office.aconex.com [192.168.0.210])
	by mail.app.aconex.com (Postfix) with ESMTP id CC2E95B803A
	for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 09:31:22 +1100 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id A8EDA53403A
	for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 09:31:22 +1100 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 06015-01-22 for <java-user@lucene.apache.org>;
 Tue, 14 Feb 2006 09:31:21 +1100 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 14DCD534039
	for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 09:31:21 +1100 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43F0EF99.2030808@apache.org>
References: <62A09DD2-ED2F-4358-81F7-A863D9876C5D@aconex.com> <43F0EF99.2030808@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FBAE1B3F-E81D-471E-AE2C-7B7E1030B940@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: CompoundFileReader question/'leaking' file descriptors ?
Date: Tue, 14 Feb 2006 09:31:19 +1100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>
> No, all CSInputStream's share a single FSInputStream, so the  
> FSInputStream shouldn't be closed until all of the CSInputStream's,  
> have been closed.  This is done by CompoundFileReader.close().  It  
> sounds like that's what's not getting called.  As you update  
> indexes, how do you close stale readers?

Total false alarm (as even I expected this would be).  AFter digging  
further and further around our code I have discovered that the  
Incremental Indexer does a search of the index to find related  
records to delete (when preparing for an update of an item, it needs  
to know what child items to also delete, in our case which  
Distributions to a mail to be removed on a mail update).

This search ends up creating an IndexSearcher which is held open for  
a short time.  A cache of IndexSearchers is used to smooth out lots  
of change, and is held open for at least 15 seconds to ensure any  
existing queries get a chance to complete (the index searcher going  
into 'wait' queue to be closed).

This search of course is what is holding the files open.  The search  
is done just prior to the delete, and hence why the segment is marked  
for deletion.  Waiting the amount of time for the IndexSearcher to  
close sees the file descriptor released.

Sorry for the intrusion.

cheers,

Paul Smith

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 23:04:15 2006
Return-Path: <java-user-return-18916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99654 invoked from network); 13 Feb 2006 23:04:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 23:04:07 -0000
Received: (qmail 29771 invoked by uid 500); 13 Feb 2006 23:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29750 invoked by uid 500); 13 Feb 2006 23:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29739 invoked by uid 99); 13 Feb 2006 23:03:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 15:03:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 15:03:52 -0800
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net [207.115.4.21])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k1DN3Va5007216
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 18:03:32 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net [69.228.231.148])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id k1DN3QNP033892;
	Mon, 13 Feb 2006 18:03:28 -0500
Message-ID: <43F1105C.6030008@apache.org>
Date: Mon, 13 Feb 2006 15:03:56 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: CompoundFileReader question/'leaking' file descriptors ?
References: <62A09DD2-ED2F-4358-81F7-A863D9876C5D@aconex.com> <43F0EF99.2030808@apache.org> <B02330AC-ABC3-45AA-B11F-83AA2094C901@aconex.com>
In-Reply-To: <B02330AC-ABC3-45AA-B11F-83AA2094C901@aconex.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Smith wrote:
> is 1.9 binary backward compatible? (both source code and index format).

That is the intent.  Try a nightly build:

http://cvs.apache.org/dist/lucene/java/nightly/

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 23:10:05 2006
Return-Path: <java-user-return-18917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2535 invoked from network); 13 Feb 2006 23:10:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 23:10:04 -0000
Received: (qmail 37914 invoked by uid 500); 13 Feb 2006 23:09:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37713 invoked by uid 500); 13 Feb 2006 23:09:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37702 invoked by uid 99); 13 Feb 2006 23:09:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 15:09:58 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.220] (HELO web51702.mail.yahoo.com) (206.190.38.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 15:09:57 -0800
Received: (qmail 4107 invoked by uid 60001); 13 Feb 2006 23:09:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DFD5+GZWYJSitMCdlp+WJxODZ1F9qXaBv0+MCnESlSPvGgy8Ki4tAMCsLYcMTzhK9Do9AwCCinkeNInnmQM1DPKeclBes2e+aQiidd3j+bXp0JVEMZSV8qqYwDs4O7u4GdFmczZglYt7onyoPmeb7ceWop/zyMcOqEh+ogaof+Y=  ;
Message-ID: <20060213230936.4105.qmail@web51702.mail.yahoo.com>
Received: from [69.251.48.204] by web51702.mail.yahoo.com via HTTP; Mon, 13 Feb 2006 15:09:36 PST
Date: Mon, 13 Feb 2006 15:09:36 -0800 (PST)
From: Greg Gershman <greggersh@yahoo.com>
Subject: Re: Help with mass delete from large index
To: java-user@lucene.apache.org
In-Reply-To: <200602132143.28785@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I can create a test case; should I include an index
along with it (it could be rather large)?

I'm running the deletion process again with the latest
nightly build.  So far I haven't seen any of the
previous problems, so perhaps there is already a fix
in place.

Thanks!

Greg

--- Daniel Naber <lucenelist2005@danielnaber.de>
wrote:

> On Montag 13 Februar 2006 19:42, Greg Gershman
> wrote:
> 
> > I'm still wondering if anyone has any thoughts on
> the
> > NullPointerException and/or the delete/optimize
> > problems I'm having.  They seem to be very real
> > issues.
> 
> I haven't seen this before (and don't remember
> anyone on the list 
> mentioning it), but if you could create a test case
> that reproduces it (on 
> an artificial test index), it can probably be
> debugged by someone. Also, 
> did you try the same with Lucene 1.9?
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 13 23:19:03 2006
Return-Path: <java-user-return-18918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6007 invoked from network); 13 Feb 2006 23:18:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Feb 2006 23:18:57 -0000
Received: (qmail 46413 invoked by uid 500); 13 Feb 2006 23:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46123 invoked by uid 500); 13 Feb 2006 23:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46095 invoked by uid 99); 13 Feb 2006 23:18:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 15:18:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of newreaders@gmail.com designates 64.233.182.197 as permitted sender)
Received: from [64.233.182.197] (HELO nproxy.gmail.com) (64.233.182.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 15:18:37 -0800
Received: by nproxy.gmail.com with SMTP id q29so335619nfc
        for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 15:18:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b8pZgt3w2I0wTCPk4tFWs0aj+8s2JOZv0XUkXa1ShTs3a3oftRtujQ5B8NeCEQJyOyIGCHHvmrX1FmOl0UuRF6on/gqxbywD57lMZAcJQ0IvUNIvN8SdWidQcyYdqSQUbgCOeHXLXzyEUUePEiUpwx/7jVlf4NGomMu3JaWkMu4=
Received: by 10.48.247.2 with SMTP id u2mr1011502nfh;
        Mon, 13 Feb 2006 15:18:15 -0800 (PST)
Received: by 10.49.49.12 with HTTP; Mon, 13 Feb 2006 15:18:15 -0800 (PST)
Message-ID: <5f4a64610602131518od6df018xba1906312d93a107@mail.gmail.com>
Date: Tue, 14 Feb 2006 10:18:15 +1100
From: Ben <newreaders@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suggesting refine searches with Lucene
In-Reply-To: <6c33f9950602130241u699cfb12udd2cbbc4fb53c308@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14017_16617717.1139872695191"
References: <6c33f9950602130134p57817946s1f32d98587dac7a9@mail.gmail.com>
	 <KING6e1W62vyrgCoH0b000001f9@King.Siti.com>
	 <6c33f9950602130241u699cfb12udd2cbbc4fb53c308@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14017_16617717.1139872695191
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I may be wrong but isn't this what Carrot2 does?

-Ben

On 2/13/06, Chun Wei Ho <cwho.work@gmail.com> wrote:
>
> Thanks. But I am actually looking for approaches/libraries which will
> help me to come up with the suggested "refine searches".
>
> For example I might search for "accident" on the headlines at a news
> site, which would come back with lots of hits. I am looking for
> something that would analyze the headlines (or some other specified
> text field) of all those hits and come up with a list of refined
> searches that would return a specific/considerable subset of the
> results, e.g. "Traffic", "plane", "boating", etc, being frequent
> occurrences of headline text in news that include "accident" in the
> headlines.
>
> I guess its a matter of finding frequently occurring subsequences with
> some intelligent guessing but I was hoping that someone else better
> would have already done it in a library that I could adapt.
>
> Regards,
> CW
>
>
> On 2/13/06, Ravi <ravi.jaladanki@siti.com> wrote:
> > Hi ,
> >
> >
> > I have implemented by using query "mergeBooleanQueries" method... in
> this
> > approach I have created one POJO class of RefineQuery which contains on=
e
> > variable called Query and I will set whenever I get a search..
> > And next time if it is a refined search I will merge current query
> with  the
> > refinedquery object and get new query and pass to lucene and set the ne=
w
> > query to refined search object .... this is working fine.. let me know
> if
> > have any further ideas or any new technique to implement refined search
> >
> >
> >
> > if(objSearchParameters.isBSearchInSearch()){
> >         Query q2                =3D
> > Query.mergeBooleanQueries(new Query[]{  objRefineQuery.getQuery(),
> > booleanQuery });
> >                 objRefineQuery.setQuery(q2);
> >         hits    =3D        searcher.search(q2);
> >             }else{
> >                 objRefineQuery.setQuery(booleanQuery);
> >         hits    =3D searcher.search(booleanQuery);
> >             }
> >
> >
> >
> >
> >
> >
> >
> > public class RefineQuery {
> >
> >         private Query   query =3D null;
> >
> >
> >         public Query getQuery() {
> >                 return query;
> >         }
> >
> >
> >         public void setQuery(Query query) {
> >                 this.query =3D query;
> >         }
> >
> >
> >         public String toString(){
> >           return query.toString();
> >         }
> >
> > }
> >
> >
> >
> >
> > Regards,
> > Ravi Kumar Jaladanki
> >
> > -----Original Message-----
> > From: Chun Wei Ho [mailto:cwho.work@gmail.com]
> > Sent: Monday, February 13, 2006 3:05 PM
> > To: java-user@lucene.apache.org
> > Subject: Suggesting refine searches with Lucene
> >
> > Hi,
> >
> > I am trying to suggest refine searches for my Lucene search. For
> > example, if a search turned out too many searches, it would list a
> > number of document title subsequences that occurred frequently in the
> > results of the previous search, as possible candidates for refining
> > the search.
> >
> > Does anyone know the right/any approach to implementing this in a
> > Lucene-based search app?
> >
> > Thanks.
> >
> > CW
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14017_16617717.1139872695191--

From java-user-return-18919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 01:08:56 2006
Return-Path: <java-user-return-18919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46520 invoked from network); 14 Feb 2006 01:08:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 01:08:56 -0000
Received: (qmail 44888 invoked by uid 500); 14 Feb 2006 01:08:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44827 invoked by uid 500); 14 Feb 2006 01:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44816 invoked by uid 99); 14 Feb 2006 01:08:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 17:08:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 17:08:49 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7BDFB5B779; Mon, 13 Feb 2006 17:08:20 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6AB037F403
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 17:08:20 -0800 (PST)
Date: Mon, 13 Feb 2006 17:08:20 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Suggesting refine searches with Lucene
In-Reply-To: <6c33f9950602130134p57817946s1f32d98587dac7a9@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602131653090.8591@hal.rescomp.berkeley.edu>
References: <6c33f9950602130134p57817946s1f32d98587dac7a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Take a look at the HighFreqTerms sample class in contrib...

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/miscellaneous/src/java/org/apache/lucene/misc/HighFreqTerms.java?rev=376393&view=log

...it doesn't meet your goal, because it returns a list of terms that
appear frequently in the whol index, not just in the results of a query.

But if you use a HitCollector (or a Filter) to generate a BitSet of all
your results, and if you modified HighFreqTerms to only count Terms where
the TermDocs contains a result in your BitSet ... then you'll be really
close to what you want.

(I say really close because it's only going to suggest individual Terms,
not "phrases" in the sense of something that would match a PhraseQuery
containing multiple Terms ... but you could allways index word ngrams of
various sizes so they would count as individual Terms)

Depending on the number of Terms in your idnex, and the number of results
in a typical search, you may be better of storing the term vectors for
each doc, iterating over the matches and using the
TermFreqVector.getTerms(), Acctually, that's probably faster in all cases.


: Date: Mon, 13 Feb 2006 17:34:58 +0800
: From: Chun Wei Ho <cwho.work@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Suggesting refine searches with Lucene
:
: Hi,
:
: I am trying to suggest refine searches for my Lucene search. For
: example, if a search turned out too many searches, it would list a
: number of document title subsequences that occurred frequently in the
: results of the previous search, as possible candidates for refining
: the search.
:
: Does anyone know the right/any approach to implementing this in a
: Lucene-based search app?
:
: Thanks.
:
: CW
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 01:10:12 2006
Return-Path: <java-user-return-18920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46852 invoked from network); 14 Feb 2006 01:10:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 01:10:12 -0000
Received: (qmail 46204 invoked by uid 500); 14 Feb 2006 01:10:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46177 invoked by uid 500); 14 Feb 2006 01:10:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46165 invoked by uid 99); 14 Feb 2006 01:10:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 17:10:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 17:10:04 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0FD0F5B779; Mon, 13 Feb 2006 17:09:44 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0A41E7F403
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 17:09:44 -0800 (PST)
Date: Mon, 13 Feb 2006 17:09:44 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Can the score be changed dynamically?
In-Reply-To: <000901c630a9$7fbf7d60$7d00a8c0@zhousen>
Message-ID: <Pine.LNX.4.58.0602131708460.8591@hal.rescomp.berkeley.edu>
References: <000901c630a9$7fbf7d60$7d00a8c0@zhousen>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: 10 documents ordered by score. But the 2nd document are more frequently
: choosen and clicked by users than the 1st one. Of course, I will record the
: click number. I want the 2nd document to bubble up and become the first one.
: How can I integrate the function to Lucene.
: Any suggestion?

Take a look at Document.setBoost, or for more complicated stuff, search
JIRA for FunctionQuery.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 01:21:54 2006
Return-Path: <java-user-return-18921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51133 invoked from network); 14 Feb 2006 01:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 01:21:54 -0000
Received: (qmail 57185 invoked by uid 500); 14 Feb 2006 01:21:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57141 invoked by uid 500); 14 Feb 2006 01:21:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57129 invoked by uid 99); 14 Feb 2006 01:21:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 17:21:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 17:21:48 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D81C25B779; Mon, 13 Feb 2006 17:21:27 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D500E7F403
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 17:21:27 -0800 (PST)
Date: Mon, 13 Feb 2006 17:21:27 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Help with mass delete from large index
In-Reply-To: <20060213230936.4105.qmail@web51702.mail.yahoo.com>
Message-ID: <Pine.LNX.4.58.0602131716210.8591@hal.rescomp.berkeley.edu>
References: <20060213230936.4105.qmail@web51702.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I can create a test case; should I include an index
: along with it (it could be rather large)?

the ideal test case creates the index in it's constructor or setUp method.
since the index is going to be totally artificial, the data doesn't
matter, just theterm you want to delete on (and they can probably be
sequenial based on your description of the problem)

take a look at BaseTestRangeFilter for an example of what i mean...

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/test/org/apache/lucene/search/BaseTestRangeFilter.java?rev=150661&view=markup

(too bad i declared the index in that class to be of type RAMDirectory,
otherwise you could just subclass it)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 01:45:11 2006
Return-Path: <java-user-return-18922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59633 invoked from network); 14 Feb 2006 01:45:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 01:45:11 -0000
Received: (qmail 72868 invoked by uid 500); 14 Feb 2006 01:45:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72270 invoked by uid 500); 14 Feb 2006 01:45:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72259 invoked by uid 99); 14 Feb 2006 01:45:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 17:45:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 17:45:03 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B231F5B779; Mon, 13 Feb 2006 17:44:40 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A7BC67F403
	for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 17:44:40 -0800 (PST)
Date: Mon, 13 Feb 2006 17:44:40 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: When do files in 'deleteable' get deleted?
In-Reply-To: <43F0DA87.90400@gmail.com>
Message-ID: <Pine.LNX.4.58.0602131738470.8591@hal.rescomp.berkeley.edu>
References: <14FBF41EF1411B45B2EC4ADEAC53D131051EDA81@MAIL01.wescodist.com>
 <43F0DA87.90400@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: That gets things into the 'deleteable' file - but its never actually
: deleting all of the files from the deleteable file.  I'm almost always
: ending up with at least 1 duplicate copy of my index.

I think it only tries to delete the files listed in deletable prior to
trying to delete any other fields it needs to delete.  It might make sense
for there to be an optional way to "suggest" that now would be a good time
to try. ... you could submit a patch that adds a public method for doing
this to IndexWriter, i think it just needs to look like this...

    public void suggestDeleteDeletable() {
      Vector deletable = new Vector();
      deleteFiles(readDeleteableFiles(), deletable);
      writeDeleteableFiles(deletable);
    }


I *think* if you call IndexWriter.addIndexes(new IndexReader[] { }) it
will force this behavior without needing a patch ... but that is
definitely a hack.

(I haven't tried any ofthis, I'm just guessing based on a quick code skim)





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 01:50:52 2006
Return-Path: <java-user-return-18923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61741 invoked from network); 14 Feb 2006 01:50:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 01:50:52 -0000
Received: (qmail 78503 invoked by uid 500); 14 Feb 2006 01:50:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78465 invoked by uid 500); 14 Feb 2006 01:50:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78454 invoked by uid 99); 14 Feb 2006 01:50:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 17:50:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of koji.sekiguchi@m4.dion.ne.jp designates 219.125.112.7 as permitted sender)
Received: from [219.125.112.7] (HELO nm05omta057.dion.ne.jp) (219.125.112.7)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 17:50:45 -0800
Received: from sekiguchi ([59.135.70.232])
	by nm05mta.dion.ne.jp
	id <20060214105023398.MA71.83C6E10@nm05mta.dion.ne.jp>;
	Tue, 14 Feb 2006 10:50:23 +0900
From: "Koji Sekiguchi" <koji.sekiguchi@m4.dion.ne.jp>
To: <java-user@lucene.apache.org>
Subject: RE: Suggesting refine searches with Lucene
Date: Tue, 14 Feb 2006 10:50:21 +0900
Message-ID: <PKEIKOCKCHNIIHNECPCCCEKGCDAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <6c33f9950602130134p57817946s1f32d98587dac7a9@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I may misunderstand your needs, but isn't it relevance feedback?
Please check Grant Ingersoll's presentation at ApacheCon 2005.
He put out great demo programs for the relevance feedback using Lucene.

Thank you,

Koji

> -----Original Message-----
> From: Chun Wei Ho [mailto:cwho.work@gmail.com]
> Sent: Monday, February 13, 2006 6:35 PM
> To: java-user@lucene.apache.org
> Subject: Suggesting refine searches with Lucene
> 
> 
> Hi,
> 
> I am trying to suggest refine searches for my Lucene search. For
> example, if a search turned out too many searches, it would list a
> number of document title subsequences that occurred frequently in the
> results of the previous search, as possible candidates for refining
> the search.
> 
> Does anyone know the right/any approach to implementing this in a
> Lucene-based search app?
> 
> Thanks.
> 
> CW
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 05:02:46 2006
Return-Path: <java-user-return-18924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34503 invoked from network); 14 Feb 2006 05:02:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 05:02:45 -0000
Received: (qmail 38884 invoked by uid 500); 14 Feb 2006 05:02:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38804 invoked by uid 500); 14 Feb 2006 05:02:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38792 invoked by uid 99); 14 Feb 2006 05:02:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 21:02:40 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 21:02:39 -0800
Received: (qmail 39302 invoked by uid 60001); 14 Feb 2006 05:02:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=htewv7P7siWCuUYqqPyAWj7V+CwshNZXHn+D17evJZQsrGS4jKIE+NIcESInKv9MW6NJAGuw9hc9V2WD/M0ybn5x9ZAVZWGeQVJO784tzKk1weHpDEuLe/OH5fabQW84qHYSAjhWWd4GZB9iFFr2nrS29sbi8iA4Req1D3j9EVM=  ;
Message-ID: <20060214050218.39300.qmail@web50309.mail.yahoo.com>
Date: Mon, 13 Feb 2006 21:02:18 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performance and FS block size
To: java-user@lucene.apache.org
In-Reply-To: <200602122343.58352.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 Hi Paul, 
 
  Yes, that is exactly what I was trying to say in my earlier example of acessing documents in a chronologically sorted order (which might be the same as index insert order).  Thanks for confirming it.

Otis

----- Original Message ----  
From: Paul Elschot   
 
IndexReader.doc(docId) for more than 2 docs is normally best done with  
increasing docId. This reduces disk head movement, since the stored docs  
are in that order.  
When Hits() its used, it is tempting to retrieve docs in scoring order via   
the Hits.doc() method, but that is probably not the best order for retrieval  
speed.  
  
Regards,  
Paul Elschot  
  
 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 05:09:45 2006
Return-Path: <java-user-return-18925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35916 invoked from network); 14 Feb 2006 05:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 05:09:45 -0000
Received: (qmail 44000 invoked by uid 500); 14 Feb 2006 05:09:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43967 invoked by uid 500); 14 Feb 2006 05:09:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43956 invoked by uid 99); 14 Feb 2006 05:09:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 21:09:39 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 21:09:38 -0800
Received: (qmail 38534 invoked by uid 60001); 14 Feb 2006 05:09:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=V03TEhbYReugXISAdFJfkOhQTGS9AxBK8z+WO3N0vcydrHGntiI6t5xrNATV12RJuHroEfNsxmfjpmS3hecWMEuR2fv4XO1mn4q/7Xzh7s+Q6gDlwxWm1qz1YaU6dR+eY5GQSlXmbd9tvwCi07la2WIdpEyVmYJO9dMY9UEEiAo=  ;
Message-ID: <20060214050917.38532.qmail@web50308.mail.yahoo.com>
Date: Mon, 13 Feb 2006 21:09:17 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Stemmer algorithms
To: java-user@lucene.apache.org
In-Reply-To: <37E2AB54ECE58E40A4E56916CD324DD46D4200@NAVEXC.corp.int.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I can't share any experiences with K-Stem, but I can share that I do remember K-stem people contributing a piece of code that integrated their K-Stem work with Lucene a few (2?) years ago.  Their code had some funky license attached, so it never made it into Lucene, but it was available for download, so you should be able to try both K-stem and Porter and compare.

Otis

----- Original Message ----
From: "Yilmazel, Sibel" <syilmazel@navisite.com>
To: java-user@lucene.apache.org
Sent: Mon 13 Feb 2006 01:41:52 PM EST
Subject: Stemmer algorithms

Hello all,

We have done some preliminary research on Porter2 and K-stem algorithms
and have some questions.

Porter2 was found to be a 'strong' stemming algorithm where it strips
off both inflectional suffixes (-s, -es, -ed) and derivational suffixes
(-able, -aciousness, -ability). K-Stem seemed to be a weak stemming
algorithm as it strips off only the inflectional suffixes (-s, -es,
-ed).

In IR, it is usually recommended using a "weak" stemmer, as the "weak"
stemmer seldom hurts performance, but it usually provides significant
improvement with precision.

However, Porter2 is the most widely used stemming algorithm AND it is a
'strong' stemmer which is contrary to what is said above. 

Can you share your ideas, experiences with stemmer algorithms? Thanks in
advance.

Sibel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 05:14:01 2006
Return-Path: <java-user-return-18926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36978 invoked from network); 14 Feb 2006 05:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 05:14:00 -0000
Received: (qmail 47659 invoked by uid 500); 14 Feb 2006 05:13:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47623 invoked by uid 500); 14 Feb 2006 05:13:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47611 invoked by uid 99); 14 Feb 2006 05:13:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 21:13:55 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Feb 2006 21:13:54 -0800
Received: (qmail 64144 invoked by uid 60001); 14 Feb 2006 05:13:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=rg+9TEttK+f4JBAJuO1iNTaBAmybBbak9Me5OgRFxu6kWNTJyLnJD7fybbExXZBOT4T0o+ijavWodNnx243pMS2BPmnaC9qpgGxEdfY1CqPl/3DdFvhxVrlsKbj7vyx4PbLf6qTJryRkCiPyBPJG4IOVIr+PUEaC55GrbIKGrXE=  ;
Message-ID: <20060214051333.64142.qmail@web50307.mail.yahoo.com>
Date: Mon, 13 Feb 2006 21:13:33 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Help with mass delete from large index
To: java-user@lucene.apache.org
In-Reply-To: <20060213144704.95678.qmail@web51709.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have seen this error in my Simpy logs before.... at least the NPE in compareTo (I don't recall the rest of the stack).
Have you tried debugging this?  I suppose the Term field or value is null somehow... not sure why.

Otis
P.S.
Deleting files - don't :)

----- Original Message ----
From: Greg Gershman <greggersh@yahoo.com>
To: java-user@lucene.apache.org
Sent: Mon 13 Feb 2006 09:47:04 AM EST
Subject: Help with mass delete from large index

I'm trying to delete a large number of documents
(~15million) from a a large index (30+ million
documents).  I've started with an optimized index, and
a list of docIds (our own unique identifier for a
document, not a Lucene doc number) to pass to the
IndexReader.delete(Term t) method.  I've had a few
different problems.

The following code is inside the loop that iterates
through the document IDs:

                  try {
                    Term t = new Term("docID",
String.valueOf(docID));
                   
deletedCount+=indexReader.delete(t);
                    }
                   catch (Exception e)
                   {
                       System.out.println("Error while
deleting docID#" + docID);
                       e.printStackTrace();
                   }

In order to commit the deletions, I also close and
reopen the IndexReader periodically.

At first I was reopening the IndexReader after every
500K documents deleted.  The problem was that after
~60-75K deletions, the delete call began to throw a
NullPointerException:

Error while deleting docID#27136356
java.lang.NullPointerException
        at java.lang.String.compareTo(String.java:402)
        at
org.apache.lucene.index.Term.compareTo(Term.java:76)
        at
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143)
        at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:132)
        at
org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:51)
        at
org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:364)
        at
org.apache.lucene.index.IndexReader.delete(IndexReader.java:449)
        at IndexEraser.main(IndexEraser.java:32)

After a little fiddling around, I tried reducing the
interval between reopens to 5000, and most of the
NullPointerExceptions went away.

A test search of the resulting, unoptimized index
worked fine.

I then optimized the index to reduce the size of the
index.  Now, instead of getting data back for many of
the results, I get a null value.

Any ideas?  I'm really confused, and the only other
option I can think of is to reindex the documents I
need, which would take much longer than deleting the
ones I dont.

Thanks!

Greg Gershman

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 07:48:01 2006
Return-Path: <java-user-return-18927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6726 invoked from network); 14 Feb 2006 07:48:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 07:48:01 -0000
Received: (qmail 78921 invoked by uid 500); 14 Feb 2006 07:47:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78812 invoked by uid 500); 14 Feb 2006 07:47:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78775 invoked by uid 99); 14 Feb 2006 07:47:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 23:47:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.197 as permitted sender)
Received: from [66.249.82.197] (HELO xproxy.gmail.com) (66.249.82.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Feb 2006 23:47:39 -0800
Received: by xproxy.gmail.com with SMTP id t10so822903wxc
        for <java-user@lucene.apache.org>; Mon, 13 Feb 2006 23:47:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gP8kUpYwD5yOkWAQzg7X8nhDMU80tkE7pbg5j8+GTdi0kJLNp+armDzZ0t3nyWq89U+Cf9mhK2MgsVKemIXTAIxZNAtFd3qSIRi2bSqyr03Huz5Rzcxiara8bRRQmNuZZF271UjT8SksnUVhSRe6rADXIM9p7pBQFi/XjVb47TM=
Received: by 10.70.34.15 with SMTP id h15mr3402034wxh;
        Mon, 13 Feb 2006 23:47:18 -0800 (PST)
Received: by 10.70.12.4 with HTTP; Mon, 13 Feb 2006 23:47:18 -0800 (PST)
Message-ID: <277d4c5d0602132347s314bc0c7wabb645e0805f552@mail.gmail.com>
Date: Tue, 14 Feb 2006 15:47:18 +0800
From: jason <gingerons@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Stemmer algorithms
In-Reply-To: <37E2AB54ECE58E40A4E56916CD324DD46D4200@NAVEXC.corp.int.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10546_5102454.1139903238933"
References: <37E2AB54ECE58E40A4E56916CD324DD46D4200@NAVEXC.corp.int.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10546_5102454.1139903238933
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I have test some stemmer algorithms in my application. However, i think we'=
d
better writer a weaker algorithm. I mean, the Porter and some other
algorithms are too strong. maybe an algorithm which can convert plural to
single noun is enough.

On 2/14/06, Yilmazel, Sibel <syilmazel@navisite.com> wrote:
>
> Hello all,
>
> We have done some preliminary research on Porter2 and K-stem algorithms
> and have some questions.
>
> Porter2 was found to be a 'strong' stemming algorithm where it strips
> off both inflectional suffixes (-s, -es, -ed) and derivational suffixes
> (-able, -aciousness, -ability). K-Stem seemed to be a weak stemming
> algorithm as it strips off only the inflectional suffixes (-s, -es,
> -ed).
>
> In IR, it is usually recommended using a "weak" stemmer, as the "weak"
> stemmer seldom hurts performance, but it usually provides significant
> improvement with precision.
>
> However, Porter2 is the most widely used stemming algorithm AND it is a
> 'strong' stemmer which is contrary to what is said above.
>
> Can you share your ideas, experiences with stemmer algorithms? Thanks in
> advance.
>
> Sibel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10546_5102454.1139903238933--

From java-user-return-18928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 08:45:41 2006
Return-Path: <java-user-return-18928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33038 invoked from network); 14 Feb 2006 08:45:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 08:45:41 -0000
Received: (qmail 23906 invoked by uid 500); 14 Feb 2006 08:45:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22944 invoked by uid 500); 14 Feb 2006 08:45:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22933 invoked by uid 99); 14 Feb 2006 08:45:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 00:45:35 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of joerge@gmail.com designates 64.233.184.202 as permitted sender)
Received: from [64.233.184.202] (HELO wproxy.gmail.com) (64.233.184.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 00:45:34 -0800
Received: by wproxy.gmail.com with SMTP id 37so1205513wra
        for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 00:45:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TQI3hE14Fh+LWIZhgkwDeeviF0QJ8NdrAdHmQNpCwpzWJTCLEPT7iQ7JUSbMZNbeOSP74snkum8a6mRY0Gr0Cryk9WSSlLcm4agvZJlU8AyPvPvtEzm155MxwDo2W1J181a+CX0feoNLeknNZj/9fKCaDNHRYzEefpF9lBEzAaE=
Received: by 10.54.109.12 with SMTP id h12mr2243661wrc;
        Tue, 14 Feb 2006 00:45:13 -0800 (PST)
Received: by 10.54.136.10 with HTTP; Tue, 14 Feb 2006 00:45:13 -0800 (PST)
Message-ID: <3f4d1f010602140045y14e63f5fs@mail.gmail.com>
Date: Tue, 14 Feb 2006 09:45:13 +0100
From: Joerg Erdmenger <joerge@gmail.com>
To: java-user@lucene.apache.org
Subject: unwanted processing of keyword searches
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9106_2490332.1139906713916"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9106_2490332.1139906713916
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I have a little problem I'm not sure is with Lucene or with me not
understanding correctly. I have built a search tool. I use a custom analyze=
r
that is very simple and just chains some of the standard filters like this

TokenStream result =3D new StandardTokenizer(reader);
result =3D new StandardFilter(result);
result =3D new LowerCaseFilter(result);
result =3D new StopFilter(result, stopSet);
result =3D new PorterStemFilter(result);
return result;

now I store an ISBN number in my index (that gets created by an IndexWriter
using the above mentioned analyzer) like this
Field.Keyword("isbn", "my isbn no");

now if I look at the index with Luke the ISBN no gets stored exactly as I
would expect - unmodified, which is especially important as ISBN numbers ca=
n
contain a capital 'x.'

Anyway the problem occurs when I now do a search for an ISBN using a query
like this

isbn:012345678X

using a QueryParser that uses above mentioned analyzer again. For some
reason the query ends up as isbn:012345678x which doesn't return anything.
Now am I missing something here? Should the query parser not do its
modifications depending on the Fieldtype searched and therfore not run my
query through the analyzer if it is a Keyword field (i.e. no tokenization)?
Or do I need to do something special.

Slightly confused

J=F6rg

------=_Part_9106_2490332.1139906713916--

From java-user-return-18929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 08:51:16 2006
Return-Path: <java-user-return-18929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37559 invoked from network); 14 Feb 2006 08:51:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 08:51:05 -0000
Received: (qmail 34880 invoked by uid 500); 14 Feb 2006 08:50:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34858 invoked by uid 500); 14 Feb 2006 08:50:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34847 invoked by uid 99); 14 Feb 2006 08:50:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 00:50:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of joerge@gmail.com designates 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 00:50:37 -0800
Received: by wproxy.gmail.com with SMTP id 67so1197169wri
        for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 00:50:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=BeM0bCPgkuOibomNP1iART0Lt+JXR+GcnshY3GmxdzMrNBW71AVa4i9kJfS6pvbl+sx0lurGHQso41YF31P0OC1RmsdDI/mYatqWQDCYmtEx67753gByVxIrOvOsreptY1SiaTsGUTKVPDiM1/z+qGhPmNvNu9GoMlkhpMleqjI=
Received: by 10.54.133.1 with SMTP id g1mr2324982wrd;
        Tue, 14 Feb 2006 00:50:16 -0800 (PST)
Received: by 10.54.136.10 with HTTP; Tue, 14 Feb 2006 00:50:16 -0800 (PST)
Message-ID: <3f4d1f010602140050m4bc9d085t@mail.gmail.com>
Date: Tue, 14 Feb 2006 09:50:16 +0100
From: Joerg Erdmenger <joerge@gmail.com>
To: java-user@lucene.apache.org
Subject: re: unwanted processing of keyword searches
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9170_11270654.1139907016962"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9170_11270654.1139907016962
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Ok just reread the overview of query language (
http://lucene.apache.org/java/docs/queryparsersyntax.html) and I guess ther=
e
it states exactly were I misunderstood things. Sorry for the noise.

J=F6rg

------=_Part_9170_11270654.1139907016962--

From java-user-return-18930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 09:21:20 2006
Return-Path: <java-user-return-18930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55631 invoked from network); 14 Feb 2006 09:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 09:21:19 -0000
Received: (qmail 86507 invoked by uid 500); 14 Feb 2006 09:21:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86236 invoked by uid 500); 14 Feb 2006 09:21:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86218 invoked by uid 99); 14 Feb 2006 09:21:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 01:21:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.20.168.25] (HELO uar.i-hypergrid.com) (217.20.168.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 01:21:10 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id D674D938B2
	for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 11:20:45 +0200 (EET)
Message-ID: <43F1A0ED.1000800@i-hypergrid.com>
Date: Tue, 14 Feb 2006 11:20:45 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: When do files in 'deleteable' get deleted?
References: <43F0C151.3040700@gmail.com>
In-Reply-To: <43F0C151.3040700@gmail.com>
Content-Type: multipart/alternative;
 boundary="------------000805020207080506010302"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------000805020207080506010302
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Lucene tries to delete 'deletable' files every time index is modified. 
The reason files can't be deleted is that those files are is use (thay 
are open). (This is applicable mainly to Windows, as far as Linux allows 
to delete files that are in use...)

If your files 'deletable' don't get deleted you should check if your 
IndexReader/IndexSearcher are properly closed.

For Windows I suggest Utility 'ProcesExplorer' from Sysinternals. It can 
show you what files are open by selected process and find out what 
processes keep selected file open.

Dan Armbrust wrote:
> If I am using lucene (daily build from ~ a month ago or so) on windows 
> - and when I merge two indexes together, I get a number of .cfs files 
> noted in my 'deleteable' file - but they never seem to actually be 
> deleted by lucene.
>
> When does lucene try to delete these files - does it ever work on 
> windows?  As far as I can tell, nothing should be holding a lock on 
> those files.  Yet, even when I shut down the only jvm that is using 
> these indexes, and then open a new one, and perform a search, they 
> don't go away.
>
> Thanks,
>
> Dan
>

-- 
regards,
Volodymyr Bychkoviak


--------------000805020207080506010302--

From java-user-return-18931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 10:54:10 2006
Return-Path: <java-user-return-18931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2430 invoked from network); 14 Feb 2006 10:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 10:54:10 -0000
Received: (qmail 8937 invoked by uid 500); 14 Feb 2006 10:54:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8676 invoked by uid 500); 14 Feb 2006 10:54:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8665 invoked by uid 99); 14 Feb 2006 10:54:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 02:54:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 02:54:01 -0800
Received: from [143.205.118.106] ([143.205.118.106]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 14 Feb 2006 11:53:32 +0100
Message-ID: <43F1B6AB.7030603@ifit.uni-klu.ac.at>
Date: Tue, 14 Feb 2006 11:53:31 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser behaviour ..
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC04@ehost011-3.exch011.intermedia.net> <43EC9184.1050706@ifit.uni-klu.ac.at> <Pine.LNX.4.58.0602101049001.2025@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0602101049001.2025@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 14 Feb 2006 10:53:32.0122 (UTC) FILETIME=[E5553BA0:01C63154]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:

>:  I built a wrong query string "word1,word2,word3" instead of "word1
>: word2 word3"
>: therefore I got a wrong query:  field:"word1 word2 word3" instead of
>: field:word1 field:word2  field:word3.
>:
>:  Is this an espected behaviour?
>:  I used Standard analyzer, probably therefore, the comas were replaced
>: with spaces.
>
>the commas weren't replaced ... your analyzer split on them and threw
>them away.
>
>they key to understanding why that resulted in a phrase query instead of
>three term queries is that QueryParser doesn't treat comma as a special
>character, so it saw the string word1,word2,word3 and gave it to your
>analyzer.  Since your analyzer gave back several tokens QueryParser built
>a phrase query out of it.
>  
>
Exactly this is my question, why the QueryParser creates a Phrase query 
when he gets several tokens from analyzer
and not a BooleanQuery?

>likewise, in the case of "word1 word2 word3" the quotes *are* a special
>character to QueryParser which tells it it should *not* split on the
>spaces betwen the quotes, and hand the individual words to the analyzer.
>instead it hands the whole thing to the analyzer as one big string again.
>
>  
>
It was not this situation, the string was without quotes.... (String 
searchString =  "word1,word2,word3"; )
I just preserved java quotes to delimit the string.

>:  Is this a bug? Does it make sense to indicate this situation through a
>: Parse Exception?
>
>a parse error should really onl come up when the query parser sees a
>character that it does consider special, but sees it in a place that
>doesn't make sense (or doesn't see one in a plkace it needs one).  in this
>case QP is perfectly happy to let you query for a word that contains a
>comma -- it's your analyzer that's putting it's foot down and saying that
>can't be in a word.
>  
>
Ok .. it is not the case of ParseException, should situations like this 
(change from TermQuery to PhraseQuery)
indicated in log files? I mean, this will help developers to debug their 
code easier.

 Best,

 Sergiu

>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 11:03:56 2006
Return-Path: <java-user-return-18932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6503 invoked from network); 14 Feb 2006 11:03:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 11:03:56 -0000
Received: (qmail 23056 invoked by uid 500); 14 Feb 2006 11:03:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23028 invoked by uid 500); 14 Feb 2006 11:03:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23017 invoked by uid 99); 14 Feb 2006 11:03:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 03:03:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 03:03:45 -0800
Received: from grenache.internal.torchbox.com ([192.168.1.81])
	by fluffy.torchbox.com with esmtp (Exim 4.50)
	id 1F8xxi-0004F1-Vi
	for java-user@lucene.apache.org; Tue, 14 Feb 2006 11:03:15 +0000
Date: Tue, 14 Feb 2006 11:03:14 +0000 (GMT)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@localhost.localdomain
To: java-user@lucene.apache.org
Subject: Re: Word files & Build vs. Buy?
In-Reply-To: <43EB3FA7.8060208@aduna.biz>
Message-ID: <Pine.LNX.4.64.0602141059300.3533@localhost.localdomain>
References: <43EB3115.4060303@aduna.biz> <Pine.LNX.4.64.0602091224310.3533@localhost.localdomain>
 <43EB3FA7.8060208@aduna.biz>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam-Score: -105.9 (---------------------------------------------------)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 9 Feb 2006, Christiaan Fluit wrote:
> Yes, that's exactly what I'm doing. Having this in POI would benefit me 
> a lot though, as I hardly understand the POI basics to be honest (my 
> fault, not POI's).

OK, that's now in POI (you'll need a scratchpad build from late yesterday 
or today, see http://encore.torchbox.com/poi-cvs-build/ for jars)

The code is in org.apache.poi.hwpf.extractor.WordExtractor, and it 
supports grabbing all the text, or grabbing an array of the text in each 
paragraph

If you have any problems/queries/comments on it, then you'll probably get 
a better response on poi-user than here!

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 16:44:08 2006
Return-Path: <java-user-return-18933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7093 invoked from network); 14 Feb 2006 16:44:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 16:44:07 -0000
Received: (qmail 10990 invoked by uid 500); 14 Feb 2006 16:44:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10945 invoked by uid 500); 14 Feb 2006 16:44:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10934 invoked by uid 99); 14 Feb 2006 16:44:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 08:44:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.58.180.53] (HELO vps.elderlycare-help.co.uk) (207.58.180.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 08:43:59 -0800
Received: from cpc1-flee1-0-0-cust801.glfd.cable.ntl.com ([86.4.143.34] helo=leondell)
	by vps.elderlycare-help.co.uk with esmtpa (Exim 4.52)
	id 1F93H6-0000vm-48
	for java-user@lucene.apache.org; Tue, 14 Feb 2006 16:43:36 +0000
Message-ID: <012201c63185$cc9a1820$6500a8c0@leondell>
From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
To: <java-user@lucene.apache.org>
References: <6c33f9950602130134p57817946s1f32d98587dac7a9@mail.gmail.com> <KING6e1W62vyrgCoH0b000001f9@King.Siti.com> <6c33f9950602130241u699cfb12udd2cbbc4fb53c308@mail.gmail.com>
Subject: Size + memory restrictions
Date: Tue, 14 Feb 2006 16:43:29 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps.elderlycare-help.co.uk
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - macranet.co.uk
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
we are having tremendous problems building a large lucene index and querying 
it.

The programmers are telling me that when the index file reaches 3.5 gb or 5 
million docs the index file can no longer grow any larger.

To rectify this they have built index files in multiple directories. Now 
apparently my 4gb memory is not enough to query.

Does this seem right to people or does anyone have any experience on largish 
scale projects.

I am completely tearing my hair out here and dont know what to do.

Thanks

Leon
----- Original Message ----- 
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, February 13, 2006 10:41 AM
Subject: Re: Suggesting refine searches with Lucene


Thanks. But I am actually looking for approaches/libraries which will
help me to come up with the suggested "refine searches".

For example I might search for "accident" on the headlines at a news
site, which would come back with lots of hits. I am looking for
something that would analyze the headlines (or some other specified
text field) of all those hits and come up with a list of refined
searches that would return a specific/considerable subset of the
results, e.g. "Traffic", "plane", "boating", etc, being frequent
occurrences of headline text in news that include "accident" in the
headlines.

I guess its a matter of finding frequently occurring subsequences with
some intelligent guessing but I was hoping that someone else better
would have already done it in a library that I could adapt.

Regards,
CW


On 2/13/06, Ravi <ravi.jaladanki@siti.com> wrote:
> Hi ,
>
>
> I have implemented by using query "mergeBooleanQueries" method... in this
> approach I have created one POJO class of RefineQuery which contains one
> variable called Query and I will set whenever I get a search..
> And next time if it is a refined search I will merge current query with 
> the
> refinedquery object and get new query and pass to lucene and set the new
> query to refined search object .... this is working fine.. let me know if
> have any further ideas or any new technique to implement refined search
>
>
>
> if(objSearchParameters.isBSearchInSearch()){
>         Query q2                =
> Query.mergeBooleanQueries(new Query[]{  objRefineQuery.getQuery(),
> booleanQuery });
>                 objRefineQuery.setQuery(q2);
>         hits    =        searcher.search(q2);
>             }else{
>                 objRefineQuery.setQuery(booleanQuery);
>         hits    = searcher.search(booleanQuery);
>             }
>
>
>
>
>
>
>
> public class RefineQuery {
>
>         private Query   query = null;
>
>
>         public Query getQuery() {
>                 return query;
>         }
>
>
>         public void setQuery(Query query) {
>                 this.query = query;
>         }
>
>
>         public String toString(){
>           return query.toString();
>         }
>
> }
>
>
>
>
> Regards,
> Ravi Kumar Jaladanki
>
> -----Original Message-----
> From: Chun Wei Ho [mailto:cwho.work@gmail.com]
> Sent: Monday, February 13, 2006 3:05 PM
> To: java-user@lucene.apache.org
> Subject: Suggesting refine searches with Lucene
>
> Hi,
>
> I am trying to suggest refine searches for my Lucene search. For
> example, if a search turned out too many searches, it would list a
> number of document title subsequences that occurred frequently in the
> results of the previous search, as possible candidates for refining
> the search.
>
> Does anyone know the right/any approach to implementing this in a
> Lucene-based search app?
>
> Thanks.
>
> CW
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





-- 
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date: 01/02/2006



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 18:36:22 2006
Return-Path: <java-user-return-18934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68309 invoked from network); 14 Feb 2006 18:36:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 18:36:22 -0000
Received: (qmail 30171 invoked by uid 500); 14 Feb 2006 18:36:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30132 invoked by uid 500); 14 Feb 2006 18:36:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30121 invoked by uid 99); 14 Feb 2006 18:36:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 10:36:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.172.74.40] (HELO kazeon.com) (209.172.74.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 10:36:14 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Size + memory restrictions
Date: Tue, 14 Feb 2006 10:38:31 -0800
Message-ID: <4E022DDAB8F45741914ACD6EDFE2309B02012909@BIGFOOT.kazeon.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Size + memory restrictions
thread-index: AcYxhb9NP07CHTOrRrqbJ0OG4HFbgQAD+D4g
From: "Eugene Tuan" <eugene@kazeon.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Yes. We have the same problem. It is mainly because TermInforReader.java
that takes memory space to keep *.tii.

Eugene=20


-----Original Message-----
From: Leon Chaddock [mailto:leonchaddock@macranet.co.uk]=20
Sent: Tuesday, February 14, 2006 8:43 AM
To: java-user@lucene.apache.org
Subject: Size + memory restrictions

Hi,
we are having tremendous problems building a large lucene index and
querying=20
it.

The programmers are telling me that when the index file reaches 3.5 gb
or 5=20
million docs the index file can no longer grow any larger.

To rectify this they have built index files in multiple directories. Now

apparently my 4gb memory is not enough to query.

Does this seem right to people or does anyone have any experience on
largish=20
scale projects.

I am completely tearing my hair out here and dont know what to do.

Thanks

Leon
----- Original Message -----=20
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, February 13, 2006 10:41 AM
Subject: Re: Suggesting refine searches with Lucene


Thanks. But I am actually looking for approaches/libraries which will
help me to come up with the suggested "refine searches".

For example I might search for "accident" on the headlines at a news
site, which would come back with lots of hits. I am looking for
something that would analyze the headlines (or some other specified
text field) of all those hits and come up with a list of refined
searches that would return a specific/considerable subset of the
results, e.g. "Traffic", "plane", "boating", etc, being frequent
occurrences of headline text in news that include "accident" in the
headlines.

I guess its a matter of finding frequently occurring subsequences with
some intelligent guessing but I was hoping that someone else better
would have already done it in a library that I could adapt.

Regards,
CW


On 2/13/06, Ravi <ravi.jaladanki@siti.com> wrote:
> Hi ,
>
>
> I have implemented by using query "mergeBooleanQueries" method... in
this
> approach I have created one POJO class of RefineQuery which contains
one
> variable called Query and I will set whenever I get a search..
> And next time if it is a refined search I will merge current query
with=20
> the
> refinedquery object and get new query and pass to lucene and set the
new
> query to refined search object .... this is working fine.. let me know
if
> have any further ideas or any new technique to implement refined
search
>
>
>
> if(objSearchParameters.isBSearchInSearch()){
>         Query q2                =3D
> Query.mergeBooleanQueries(new Query[]{  objRefineQuery.getQuery(),
> booleanQuery });
>                 objRefineQuery.setQuery(q2);
>         hits    =3D        searcher.search(q2);
>             }else{
>                 objRefineQuery.setQuery(booleanQuery);
>         hits    =3D searcher.search(booleanQuery);
>             }
>
>
>
>
>
>
>
> public class RefineQuery {
>
>         private Query   query =3D null;
>
>
>         public Query getQuery() {
>                 return query;
>         }
>
>
>         public void setQuery(Query query) {
>                 this.query =3D query;
>         }
>
>
>         public String toString(){
>           return query.toString();
>         }
>
> }
>
>
>
>
> Regards,
> Ravi Kumar Jaladanki
>
> -----Original Message-----
> From: Chun Wei Ho [mailto:cwho.work@gmail.com]
> Sent: Monday, February 13, 2006 3:05 PM
> To: java-user@lucene.apache.org
> Subject: Suggesting refine searches with Lucene
>
> Hi,
>
> I am trying to suggest refine searches for my Lucene search. For
> example, if a search turned out too many searches, it would list a
> number of document title subsequences that occurred frequently in the
> results of the previous search, as possible candidates for refining
> the search.
>
> Does anyone know the right/any approach to implementing this in a
> Lucene-based search app?
>
> Thanks.
>
> CW
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





--=20
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date:
01/02/2006



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 18:50:20 2006
Return-Path: <java-user-return-18935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75973 invoked from network); 14 Feb 2006 18:50:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 18:50:20 -0000
Received: (qmail 61775 invoked by uid 500); 14 Feb 2006 18:50:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61742 invoked by uid 500); 14 Feb 2006 18:50:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61729 invoked by uid 99); 14 Feb 2006 18:50:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 10:50:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.58.180.53] (HELO vps.elderlycare-help.co.uk) (207.58.180.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 10:50:14 -0800
Received: from cpc1-flee1-0-0-cust801.glfd.cable.ntl.com ([86.4.143.34] helo=leondell)
	by vps.elderlycare-help.co.uk with esmtpa (Exim 4.52)
	id 1F95FH-0001hp-F3
	for java-user@lucene.apache.org; Tue, 14 Feb 2006 18:49:51 +0000
Message-ID: <013d01c63197$6fd9df50$6500a8c0@leondell>
From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
To: <java-user@lucene.apache.org>
References: <4E022DDAB8F45741914ACD6EDFE2309B02012909@BIGFOOT.kazeon.local>
Subject: Re: Size + memory restrictions
Date: Tue, 14 Feb 2006 18:49:45 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps.elderlycare-help.co.uk
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - macranet.co.uk
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eugene or anyone else,
Do you know of any solutions?

At the moment we have 4gb assigned to jvm but we only query on 4 of our 4gb 
segments, if we try and query against more we get memory problems.

Thanks

Leon

----- Original Message ----- 
From: "Eugene Tuan" <eugene@kazeon.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, February 14, 2006 6:38 PM
Subject: RE: Size + memory restrictions



Yes. We have the same problem. It is mainly because TermInforReader.java
that takes memory space to keep *.tii.

Eugene


-----Original Message-----
From: Leon Chaddock [mailto:leonchaddock@macranet.co.uk]
Sent: Tuesday, February 14, 2006 8:43 AM
To: java-user@lucene.apache.org
Subject: Size + memory restrictions

Hi,
we are having tremendous problems building a large lucene index and
querying
it.

The programmers are telling me that when the index file reaches 3.5 gb
or 5
million docs the index file can no longer grow any larger.

To rectify this they have built index files in multiple directories. Now

apparently my 4gb memory is not enough to query.

Does this seem right to people or does anyone have any experience on
largish
scale projects.

I am completely tearing my hair out here and dont know what to do.

Thanks

Leon
----- Original Message ----- 
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, February 13, 2006 10:41 AM
Subject: Re: Suggesting refine searches with Lucene


Thanks. But I am actually looking for approaches/libraries which will
help me to come up with the suggested "refine searches".

For example I might search for "accident" on the headlines at a news
site, which would come back with lots of hits. I am looking for
something that would analyze the headlines (or some other specified
text field) of all those hits and come up with a list of refined
searches that would return a specific/considerable subset of the
results, e.g. "Traffic", "plane", "boating", etc, being frequent
occurrences of headline text in news that include "accident" in the
headlines.

I guess its a matter of finding frequently occurring subsequences with
some intelligent guessing but I was hoping that someone else better
would have already done it in a library that I could adapt.

Regards,
CW


On 2/13/06, Ravi <ravi.jaladanki@siti.com> wrote:
> Hi ,
>
>
> I have implemented by using query "mergeBooleanQueries" method... in
this
> approach I have created one POJO class of RefineQuery which contains
one
> variable called Query and I will set whenever I get a search..
> And next time if it is a refined search I will merge current query
with
> the
> refinedquery object and get new query and pass to lucene and set the
new
> query to refined search object .... this is working fine.. let me know
if
> have any further ideas or any new technique to implement refined
search
>
>
>
> if(objSearchParameters.isBSearchInSearch()){
>         Query q2                =
> Query.mergeBooleanQueries(new Query[]{  objRefineQuery.getQuery(),
> booleanQuery });
>                 objRefineQuery.setQuery(q2);
>         hits    =        searcher.search(q2);
>             }else{
>                 objRefineQuery.setQuery(booleanQuery);
>         hits    = searcher.search(booleanQuery);
>             }
>
>
>
>
>
>
>
> public class RefineQuery {
>
>         private Query   query = null;
>
>
>         public Query getQuery() {
>                 return query;
>         }
>
>
>         public void setQuery(Query query) {
>                 this.query = query;
>         }
>
>
>         public String toString(){
>           return query.toString();
>         }
>
> }
>
>
>
>
> Regards,
> Ravi Kumar Jaladanki
>
> -----Original Message-----
> From: Chun Wei Ho [mailto:cwho.work@gmail.com]
> Sent: Monday, February 13, 2006 3:05 PM
> To: java-user@lucene.apache.org
> Subject: Suggesting refine searches with Lucene
>
> Hi,
>
> I am trying to suggest refine searches for my Lucene search. For
> example, if a search turned out too many searches, it would list a
> number of document title subsequences that occurred frequently in the
> results of the previous search, as possible candidates for refining
> the search.
>
> Does anyone know the right/any approach to implementing this in a
> Lucene-based search app?
>
> Thanks.
>
> CW
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





-- 
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date:
01/02/2006



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





-- 
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date: 01/02/2006



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 19:38:54 2006
Return-Path: <java-user-return-18936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4186 invoked from network); 14 Feb 2006 19:38:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 19:38:53 -0000
Received: (qmail 42918 invoked by uid 500); 14 Feb 2006 19:38:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42890 invoked by uid 500); 14 Feb 2006 19:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42878 invoked by uid 99); 14 Feb 2006 19:38:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 11:38:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 11:38:45 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8E02C5B76C; Tue, 14 Feb 2006 11:38:18 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 84B317F403
	for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 11:38:18 -0800 (PST)
Date: Tue, 14 Feb 2006 11:38:18 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: QueryParser behaviour ..
In-Reply-To: <43F1B6AB.7030603@ifit.uni-klu.ac.at>
Message-ID: <Pine.LNX.4.58.0602141131530.26553@hal.rescomp.berkeley.edu>
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC04@ehost011-3.exch011.intermedia.net>
 <43EC9184.1050706@ifit.uni-klu.ac.at> <Pine.LNX.4.58.0602101049001.2025@hal.rescomp.berkeley.edu>
 <43F1B6AB.7030603@ifit.uni-klu.ac.at>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: >they key to understanding why that resulted in a phrase query instead of
: >three term queries is that QueryParser doesn't treat comma as a special
: >character, so it saw the string word1,word2,word3 and gave it to your
: >analyzer.  Since your analyzer gave back several tokens QueryParser built
: >a phrase query out of it.
: >
: Exactly this is my question, why the QueryParser creates a Phrase query
: when he gets several tokens from analyzer
: and not a BooleanQuery?

Because if it did that, there would be no way to write phrase queries :)

QueryParser only returns a BooleanQuery when *it* can tell you have
several clauses.  For each "chunk" of text that it thinks of as one
continuous piece of text (either because it doesn't contain whitespaces or
because it has quotes around it) it gives it to the analyzer, if the
analyzer says there are multiple Terms there then QueryParser makes a
PhraseQuery out of it.   or in a nutshell:
   1) if the Parser detects multiple terms, it makes a boolean query
   2) if the Analyzer detects multiple terms, it makes a phrase query

if you don't like this behavior, it can all be circumvented by overriding
getFieldQuery().  you don't even have to teal with the analyzer if you
don't want to.  just call super.getFieldQuery() and if you get back a
PhraseQuery take it apart and build TermQueries wrapped in a boolean
query.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 14 20:01:11 2006
Return-Path: <java-user-return-18937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15571 invoked from network); 14 Feb 2006 20:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Feb 2006 20:01:10 -0000
Received: (qmail 76576 invoked by uid 500); 14 Feb 2006 20:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76509 invoked by uid 500); 14 Feb 2006 20:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76288 invoked by uid 99); 14 Feb 2006 20:01:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 12:01:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 12:01:01 -0800
Received: (qmail 31247 invoked from network); 14 Feb 2006 20:00:38 -0000
Received: from unknown (HELO p5496d637.dip.t-dialin.net) ([pbs]695637@[84.150.214.55])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 14 Feb 2006 20:00:38 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Size + memory restrictions
Date: Tue, 14 Feb 2006 21:01:01 +0100
User-Agent: KMail/1.8.2
References: <4E022DDAB8F45741914ACD6EDFE2309B02012909@BIGFOOT.kazeon.local>
In-Reply-To: <4E022DDAB8F45741914ACD6EDFE2309B02012909@BIGFOOT.kazeon.local>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602142101.01207@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Dienstag 14 Februar 2006 19:38, Eugene Tuan wrote:

> Yes. We have the same problem. It is mainly because TermInforReader.java
> that takes memory space to keep *.tii.

In Lucene 1.9 you can change that using IndexWriter.setTermIndexInterval().

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 00:42:02 2006
Return-Path: <java-user-return-18938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91333 invoked from network); 15 Feb 2006 00:42:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 00:42:02 -0000
Received: (qmail 92785 invoked by uid 500); 15 Feb 2006 00:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92717 invoked by uid 500); 15 Feb 2006 00:41:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92700 invoked by uid 99); 15 Feb 2006 00:41:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 16:41:55 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.219] (HELO web51701.mail.yahoo.com) (206.190.38.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Feb 2006 16:41:54 -0800
Received: (qmail 33539 invoked by uid 60001); 15 Feb 2006 00:41:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DvUTSx5mLVhqMQQA6615pQjCUfYJxBeQrsKdu7BmtRu3Mq6m0BVqqQcIUtQrUY5BuS5xyFUCaABlf/ewKQ78Zf1XbJEqn3GSUsKvbUqFRVruIPVxZ0e0G1iTGHbC4TzhZ/+DuGc/9YX+NJDc5pRqna5FOVFpMeMbp+wWv/gofXg=  ;
Message-ID: <20060215004133.33537.qmail@web51701.mail.yahoo.com>
Received: from [69.251.48.204] by web51701.mail.yahoo.com via HTTP; Tue, 14 Feb 2006 16:41:32 PST
Date: Tue, 14 Feb 2006 16:41:32 -0800 (PST)
From: Greg Gershman <greggersh@yahoo.com>
Subject: Re: Size + memory restrictions
To: java-user@lucene.apache.org
In-Reply-To: <012201c63185$cc9a1820$6500a8c0@leondell>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You may consider incrementally adding documents to
your index; I'm not sure why there would be problems
adding to an existing index, but you can always add
additional documents.  You can optimize later to get
everything back into a single segment.

Querying is a different story; if you are using the
Sort API, you will need enough memory to store a full
sorting of your documents in memory.  If you're trying
to sort on a string or anything other than an int or
float, this could require a lot of memory.

I've used indices much bigger than 5 mil. docs/3.5 gb
with less than 4GB of RAM and had no problems.

Greg


--- Leon Chaddock <leonchaddock@macranet.co.uk> wrote:

> Hi,
> we are having tremendous problems building a large
> lucene index and querying 
> it.
> 
> The programmers are telling me that when the index
> file reaches 3.5 gb or 5 
> million docs the index file can no longer grow any
> larger.
> 
> To rectify this they have built index files in
> multiple directories. Now 
> apparently my 4gb memory is not enough to query.
> 
> Does this seem right to people or does anyone have
> any experience on largish 
> scale projects.
> 
> I am completely tearing my hair out here and dont
> know what to do.
> 
> Thanks
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 00:45:36 2006
Return-Path: <java-user-return-18939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92479 invoked from network); 15 Feb 2006 00:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 00:45:36 -0000
Received: (qmail 97890 invoked by uid 500); 15 Feb 2006 00:45:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97851 invoked by uid 500); 15 Feb 2006 00:45:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97839 invoked by uid 99); 15 Feb 2006 00:45:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 16:45:30 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.132] (HELO web51713.mail.yahoo.com) (206.190.39.132)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Feb 2006 16:45:29 -0800
Received: (qmail 75970 invoked by uid 60001); 15 Feb 2006 00:45:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QPflEZ+ZSint1PohkzdBgeIUGYitMgIDMkmEKWYju6DnXRmG8mr+XfK+v0Si5buUi8VzgE238uwsU1Mm8Ujb+cX3Kn/DY2kKcIQ8w0mBsZT6o+KOFLMHWzCJRNn9Y953i9IRINsnxx4WR/CfFWxPhXhQDMDzZM025k/MpCGGao8=  ;
Message-ID: <20060215004508.75968.qmail@web51713.mail.yahoo.com>
Received: from [69.251.48.204] by web51713.mail.yahoo.com via HTTP; Tue, 14 Feb 2006 16:45:08 PST
Date: Tue, 14 Feb 2006 16:45:08 -0800 (PST)
From: Greg Gershman <greggersh@yahoo.com>
Subject: Re: Help with mass delete from large index
To: java-user@lucene.apache.org, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
In-Reply-To: <20060214051333.64142.qmail@web50307.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I tried the same operation with the nightly 1.9 build
and it worked fine, no NPEs during the deletes, and
after optimization, search worked fine.

I did a little bit of debugging, a call to getField
returned null, so I think it was more than just the
Term value that was missing.  As the error only
occured after optimization, it must have something to
do with the document numbers...

Is it still worth creating a test case, or since it's
fixed in 1.9, just moving on?

Greg

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> I have seen this error in my Simpy logs before....
> at least the NPE in compareTo (I don't recall the
> rest of the stack).
> Have you tried debugging this?  I suppose the Term
> field or value is null somehow... not sure why.
> 
> Otis
> P.S.
> Deleting files - don't :)
> 
> ----- Original Message ----
> From: Greg Gershman <greggersh@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Mon 13 Feb 2006 09:47:04 AM EST
> Subject: Help with mass delete from large index
> 
> I'm trying to delete a large number of documents
> (~15million) from a a large index (30+ million
> documents).  I've started with an optimized index,
> and
> a list of docIds (our own unique identifier for a
> document, not a Lucene doc number) to pass to the
> IndexReader.delete(Term t) method.  I've had a few
> different problems.
> 
> The following code is inside the loop that iterates
> through the document IDs:
> 
>                   try {
>                     Term t = new Term("docID",
> String.valueOf(docID));
>                    
> deletedCount+=indexReader.delete(t);
>                     }
>                    catch (Exception e)
>                    {
>                        System.out.println("Error
> while
> deleting docID#" + docID);
>                        e.printStackTrace();
>                    }
> 
> In order to commit the deletions, I also close and
> reopen the IndexReader periodically.
> 
> At first I was reopening the IndexReader after every
> 500K documents deleted.  The problem was that after
> ~60-75K deletions, the delete call began to throw a
> NullPointerException:
> 
> Error while deleting docID#27136356
> java.lang.NullPointerException
>         at
> java.lang.String.compareTo(String.java:402)
>         at
> org.apache.lucene.index.Term.compareTo(Term.java:76)
>         at
>
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143)
>         at
>
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:132)
>         at
>
org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:51)
>         at
>
org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:364)
>         at
>
org.apache.lucene.index.IndexReader.delete(IndexReader.java:449)
>         at IndexEraser.main(IndexEraser.java:32)
> 
> After a little fiddling around, I tried reducing the
> interval between reopens to 5000, and most of the
> NullPointerExceptions went away.
> 
> A test search of the resulting, unoptimized index
> worked fine.
> 
> I then optimized the index to reduce the size of the
> index.  Now, instead of getting data back for many
> of
> the results, I get a null value.
> 
> Any ideas?  I'm really confused, and the only other
> option I can think of is to reindex the documents I
> need, which would take much longer than deleting the
> ones I dont.
> 
> Thanks!
> 
> Greg Gershman
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> http://mail.yahoo.com 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 06:36:40 2006
Return-Path: <java-user-return-18940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11903 invoked from network); 15 Feb 2006 06:36:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 06:36:40 -0000
Received: (qmail 96819 invoked by uid 500); 15 Feb 2006 06:36:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96753 invoked by uid 500); 15 Feb 2006 06:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96742 invoked by uid 99); 15 Feb 2006 06:36:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 22:36:30 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vsood2@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO zproxy.gmail.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 22:36:30 -0800
Received: by zproxy.gmail.com with SMTP id z31so1477351nzd
        for <java-user@lucene.apache.org>; Tue, 14 Feb 2006 22:36:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=CUXLWlf7/DfFVNILiO7HtyoMKpQjNWUCgs2h2gOfKkcvkGoSC6LgQbacmBdiA8xCYbuMQXW7of5AgfbY21vk/o2rr4IHducFsUkHeVB29jEhW0+4mGakl8FN7IZAR/7uW3vU2VKVUlSsLC6bEvunvDQHGy3qEsnXjatOH5JgvG8=
Received: by 10.65.73.5 with SMTP id a5mr2315475qbl;
        Tue, 14 Feb 2006 22:36:09 -0800 (PST)
Received: by 10.64.249.2 with HTTP; Tue, 14 Feb 2006 22:36:09 -0800 (PST)
Message-ID: <800d6e9c0602142236q4159e8afqb27e7fe5fc75a0d6@mail.gmail.com>
Date: Wed, 15 Feb 2006 01:36:09 -0500
From: varun sood <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Relevance Feedback Lucene+Algorithms
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4578_8627262.1139985369438"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4578_8627262.1139985369438
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,
  Can anyone share the experience of how to implement Relevance Feedback in
Lucene?

Can someone suggest me some algorithms and papers which can help me in
building an effective Relevance Feedback system?

Thanks in advance.

Dexter.

------=_Part_4578_8627262.1139985369438--

From java-user-return-18941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 06:45:14 2006
Return-Path: <java-user-return-18941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18106 invoked from network); 15 Feb 2006 06:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 06:45:13 -0000
Received: (qmail 7294 invoked by uid 500); 15 Feb 2006 06:45:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7258 invoked by uid 500); 15 Feb 2006 06:45:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7245 invoked by uid 99); 15 Feb 2006 06:45:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Feb 2006 22:45:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of koji.sekiguchi@m4.dion.ne.jp designates 219.125.112.5 as permitted sender)
Received: from [219.125.112.5] (HELO nm05omta055.dion.ne.jp) (219.125.112.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Feb 2006 22:45:07 -0800
Received: from sekiguchi ([59.135.72.64])
	by nm05mta.dion.ne.jp
	id <20060215154445479.MA59.83A5830@nm05mta.dion.ne.jp>;
	Wed, 15 Feb 2006 15:44:45 +0900
From: "Koji Sekiguchi" <koji.sekiguchi@m4.dion.ne.jp>
To: <java-user@lucene.apache.org>
Subject: RE: Relevance Feedback Lucene+Algorithms
Date: Wed, 15 Feb 2006 15:44:44 +0900
Message-ID: <PKEIKOCKCHNIIHNECPCCIELCCDAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
In-Reply-To: <800d6e9c0602142236q4159e8afqb27e7fe5fc75a0d6@mail.gmail.com>
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please check Grant Ingersoll's presentation at ApacheCon 2005.
He put out great demo programs for the relevance feedback using Lucene.

Thank you,

Koji

> -----Original Message-----
> From: varun sood [mailto:vsood2@gmail.com]
> Sent: Wednesday, February 15, 2006 3:36 PM
> To: java-user@lucene.apache.org
> Subject: Relevance Feedback Lucene+Algorithms
> 
> 
> Hi,
>   Can anyone share the experience of how to implement Relevance 
> Feedback in
> Lucene?
> 
> Can someone suggest me some algorithms and papers which can help me in
> building an effective Relevance Feedback system?
> 
> Thanks in advance.
> 
> Dexter.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 09:29:00 2006
Return-Path: <java-user-return-18942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94697 invoked from network); 15 Feb 2006 09:28:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 09:28:59 -0000
Received: (qmail 4902 invoked by uid 500); 15 Feb 2006 09:28:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4791 invoked by uid 500); 15 Feb 2006 09:28:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4739 invoked by uid 99); 15 Feb 2006 09:28:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 01:28:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.58.180.53] (HELO vps.elderlycare-help.co.uk) (207.58.180.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 01:28:42 -0800
Received: from cpc1-flee1-0-0-cust801.glfd.cable.ntl.com ([86.4.143.34] helo=leondell)
	by vps.elderlycare-help.co.uk with esmtpa (Exim 4.52)
	id 1F9IxI-00049m-3W
	for java-user@lucene.apache.org; Wed, 15 Feb 2006 09:28:12 +0000
Message-ID: <000601c63212$233788c0$6500a8c0@leondell>
From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
To: <java-user@lucene.apache.org>
References: <20060215004133.33537.qmail@web51701.mail.yahoo.com>
Subject: Re: Size + memory restrictions
Date: Wed, 15 Feb 2006 09:28:00 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps.elderlycare-help.co.uk
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - macranet.co.uk
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Greg,
Thanks. We are actually running against 4 segments of 4gb so about 20 
million docs. We cant merge the segments as their seems to be problems with 
out linux box , with having files over about 4gb. Not sure why that is.

If I was to upgrade to 8gb of ram does it seem likely this will double the 
amount of docs we can handle, or would this provide an exponential increase?

Thanks

Leon
----- Original Message ----- 
From: "Greg Gershman" <greggersh@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 15, 2006 12:41 AM
Subject: Re: Size + memory restrictions


> You may consider incrementally adding documents to
> your index; I'm not sure why there would be problems
> adding to an existing index, but you can always add
> additional documents.  You can optimize later to get
> everything back into a single segment.
>
> Querying is a different story; if you are using the
> Sort API, you will need enough memory to store a full
> sorting of your documents in memory.  If you're trying
> to sort on a string or anything other than an int or
> float, this could require a lot of memory.
>
> I've used indices much bigger than 5 mil. docs/3.5 gb
> with less than 4GB of RAM and had no problems.
>
> Greg
>
>
> --- Leon Chaddock <leonchaddock@macranet.co.uk> wrote:
>
>> Hi,
>> we are having tremendous problems building a large
>> lucene index and querying
>> it.
>>
>> The programmers are telling me that when the index
>> file reaches 3.5 gb or 5
>> million docs the index file can no longer grow any
>> larger.
>>
>> To rectify this they have built index files in
>> multiple directories. Now
>> apparently my 4gb memory is not enough to query.
>>
>> Does this seem right to people or does anyone have
>> any experience on largish
>> scale projects.
>>
>> I am completely tearing my hair out here and dont
>> know what to do.
>>
>> Thanks
>>
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> -- 
> Internal Virus Database is out-of-date.
> Checked by AVG Free Edition.
> Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date: 01/02/2006
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 10:10:54 2006
Return-Path: <java-user-return-18943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12667 invoked from network); 15 Feb 2006 10:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 10:10:54 -0000
Received: (qmail 55794 invoked by uid 500); 15 Feb 2006 10:10:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55768 invoked by uid 500); 15 Feb 2006 10:10:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55756 invoked by uid 99); 15 Feb 2006 10:10:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 02:10:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 02:10:47 -0800
Received: by wproxy.gmail.com with SMTP id 55so75619wri
        for <java-user@lucene.apache.org>; Wed, 15 Feb 2006 02:10:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DntMLKkgnRrSb6VWBgziv8X5gfZsMNDGCJwFoJ8+0U8PijiCt99zmbHl+eafALVC5UXpQ+85X+WCEbEQJAabJU5BhkcqfcAyZLgoqI6cBpLgqocOa9IMWn0RPMchrv7efjUCPM5O8gAB0WgPfXtaM1t6hoDOAGKUMynMamVyphE=
Received: by 10.54.147.11 with SMTP id u11mr353063wrd;
        Wed, 15 Feb 2006 02:10:26 -0800 (PST)
Received: by 10.54.129.15 with HTTP; Wed, 15 Feb 2006 02:10:26 -0800 (PST)
Message-ID: <901c03930602150210x14e4cba6y256201ac2578210f@mail.gmail.com>
Date: Wed, 15 Feb 2006 18:10:26 +0800
From: Dave Kor <davekor@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Relevance Feedback Lucene+Algorithms
In-Reply-To: <PKEIKOCKCHNIIHNECPCCIELCCDAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <800d6e9c0602142236q4159e8afqb27e7fe5fc75a0d6@mail.gmail.com>
	 <PKEIKOCKCHNIIHNECPCCIELCCDAA.koji.sekiguchi@m4.dion.ne.jp>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You might also want to look at that the LucQE project
(http://sourceforge.net/projects/lucene-qe/), which implement a couple
of automated relevance feedback methods including Rocchio's formula.

On 2/15/06, Koji Sekiguchi <koji.sekiguchi@m4.dion.ne.jp> wrote:
> Please check Grant Ingersoll's presentation at ApacheCon 2005.
> He put out great demo programs for the relevance feedback using Lucene.
>
> Thank you,
>
> Koji
>
> > -----Original Message-----
> > From: varun sood [mailto:vsood2@gmail.com]
> > Sent: Wednesday, February 15, 2006 3:36 PM
> > To: java-user@lucene.apache.org
> > Subject: Relevance Feedback Lucene+Algorithms
> >
> >
> > Hi,
> >   Can anyone share the experience of how to implement Relevance
> > Feedback in
> > Lucene?
> >
> > Can someone suggest me some algorithms and papers which can help me in
> > building an effective Relevance Feedback system?
> >
> > Thanks in advance.
> >
> > Dexter.
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Dave Kor, Research Assistant
Center for Information Mining and Extraction
School of Computing
National University of Singapore.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 12:24:48 2006
Return-Path: <java-user-return-18944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78218 invoked from network); 15 Feb 2006 12:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 12:24:47 -0000
Received: (qmail 45193 invoked by uid 500); 15 Feb 2006 12:24:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45165 invoked by uid 500); 15 Feb 2006 12:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45154 invoked by uid 99); 15 Feb 2006 12:24:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 04:24:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 04:24:40 -0800
Received: from [143.205.118.106] ([143.205.118.106]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 15 Feb 2006 13:24:09 +0100
Message-ID: <43F31D69.3040208@ifit.uni-klu.ac.at>
Date: Wed, 15 Feb 2006 13:24:09 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser behaviour ..
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC04@ehost011-3.exch011.intermedia.net> <43EC9184.1050706@ifit.uni-klu.ac.at> <Pine.LNX.4.58.0602101049001.2025@hal.rescomp.berkeley.edu> <43F1B6AB.7030603@ifit.uni-klu.ac.at> <Pine.LNX.4.58.0602141131530.26553@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0602141131530.26553@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Feb 2006 12:24:09.0906 (UTC) FILETIME=[B8EAF920:01C6322A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:

>: Exactly this is my question, why the QueryParser creates a Phrase query
>: when he gets several tokens from analyzer
>: and not a BooleanQuery?
>
>Because if it did that, there would be no way to write phrase queries :)
>  
>
I'm not very sure about this ...

>QueryParser only returns a BooleanQuery when *it* can tell you have
>several clauses.  For each "chunk" of text that it thinks of as one
>continuous piece of text (either because it doesn't contain whitespaces or
>  
>
wouldn't be better to let the analyzer decide if there is a continuous 
piece of text?
and to build PhraseQueries only when the quote sign is found?

>because it has quotes around it) it gives it to the analyzer, if the
>analyzer says there are multiple Terms there then QueryParser makes a
>PhraseQuery out of it.   or in a nutshell:
>   1) if the Parser detects multiple terms, it makes a boolean query
>   2) if the Analyzer detects multiple terms, it makes a phrase query
>  
>
this is related with my comment above. From the user's point of view I 
think it will make sense to
build a phrase query only when the quotes are found in the search string.

I think there are pro and con arguments, for "unifying" the behaviour.
I would be happy if the QueryParser wouldn't create phrase queries if i 
didn't explicitly  asked to do it.

Does someone have a different opinion?

>if you don't like this behavior, it can all be circumvented by overriding
>getFieldQuery().  you don't even have to teal with the analyzer if you
>don't want to.  just call super.getFieldQuery() and if you get back a
>PhraseQuery take it apart and build TermQueries wrapped in a boolean
>query.
>  
>
Well,  there is  all  the time  a work around.  It is obvious that 
searching for word1,word2,word3 was a
silly mistake, but I needed one hour to find why a PhraseQuery is 
created when no quotes existed in the query string.

So ... my opinion is that what I suggest will improve the usability of 
lucene, I hope that  the  lucene developers  share 
my opinion.

 Best,

 Sergiu

>
>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 13:48:27 2006
Return-Path: <java-user-return-18945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26957 invoked from network); 15 Feb 2006 13:48:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 13:48:26 -0000
Received: (qmail 12556 invoked by uid 500); 15 Feb 2006 13:48:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12528 invoked by uid 500); 15 Feb 2006 13:48:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12509 invoked by uid 99); 15 Feb 2006 13:48:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 05:48:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 05:48:19 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14F2503E@mailer.syr.edu>; Wed, 15 Feb 2006 8:47:58 -0500
Message-ID: <43F3310E.7030207@syr.edu>
Date: Wed, 15 Feb 2006 08:47:58 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Relevance Feedback Lucene+Algorithms
References: <PKEIKOCKCHNIIHNECPCCIELCCDAA.koji.sekiguchi@m4.dion.ne.jp>
In-Reply-To: <PKEIKOCKCHNIIHNECPCCIELCCDAA.koji.sekiguchi@m4.dion.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

URL is http://www.cnlp.org/apachecon2005/

Koji Sekiguchi wrote:
> Please check Grant Ingersoll's presentation at ApacheCon 2005.
> He put out great demo programs for the relevance feedback using Lucene.
>
> Thank you,
>
> Koji
>
>   
>> -----Original Message-----
>> From: varun sood [mailto:vsood2@gmail.com]
>> Sent: Wednesday, February 15, 2006 3:36 PM
>> To: java-user@lucene.apache.org
>> Subject: Relevance Feedback Lucene+Algorithms
>>
>>
>> Hi,
>>   Can anyone share the experience of how to implement Relevance 
>> Feedback in
>> Lucene?
>>
>> Can someone suggest me some algorithms and papers which can help me in
>> building an effective Relevance Feedback system?
>>
>> Thanks in advance.
>>
>> Dexter.
>>
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 14:54:18 2006
Return-Path: <java-user-return-18946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80344 invoked from network); 15 Feb 2006 14:54:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 14:54:17 -0000
Received: (qmail 50195 invoked by uid 500); 15 Feb 2006 14:54:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50133 invoked by uid 500); 15 Feb 2006 14:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50115 invoked by uid 99); 15 Feb 2006 14:54:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 06:54:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.205 as permitted sender)
Received: from [64.233.182.205] (HELO nproxy.gmail.com) (64.233.182.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 06:54:09 -0800
Received: by nproxy.gmail.com with SMTP id a4so612612nfc
        for <java-user@lucene.apache.org>; Wed, 15 Feb 2006 06:53:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WjSy3uyfXxssAiyrd/pT8XnObpksYVSUMDuFKP06u1pxzCQDobwL8HK0+k/I6X9DkXmj6SrtKdTfvDvDq9XIGY2ukCgmp/43wEdm4C3vN9cDEmCi5pYcDI/mZwBaqUhYCRsv949JyASkQ4nrZ4lhcBOABgBQn7fOEc850+Zz5Kw=
Received: by 10.49.68.5 with SMTP id v5mr46743nfk;
        Wed, 15 Feb 2006 06:53:48 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Wed, 15 Feb 2006 06:53:48 -0800 (PST)
Message-ID: <c68e39170602150653o22f3c8d4s9e717de110b11eb1@mail.gmail.com>
Date: Wed, 15 Feb 2006 09:53:48 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser behaviour ..
In-Reply-To: <43F31D69.3040208@ifit.uni-klu.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC04@ehost011-3.exch011.intermedia.net>
	 <43EC9184.1050706@ifit.uni-klu.ac.at>
	 <Pine.LNX.4.58.0602101049001.2025@hal.rescomp.berkeley.edu>
	 <43F1B6AB.7030603@ifit.uni-klu.ac.at>
	 <Pine.LNX.4.58.0602141131530.26553@hal.rescomp.berkeley.edu>
	 <43F31D69.3040208@ifit.uni-klu.ac.at>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> From the user's point of view I think it will make sense to
> build a phrase query only when the quotes are found in the search string.

You make an interesting point Sergiu.  Your proposal would increase
the expressive power of the QueryParser by allowing the construction
of either phrase queries or boolean queries when multiple tokens are
produced by analysis.

The main downside is that it's not backward compatible, and without
quotes (and hence phrase queries) many older queries will produce
worse results.  I also think that a majority of the time, when
multiple tokens are produced, you do want a phrase search (or at least
a sloppy one).

Of course, the backward compatible thing can be fixed via a flag on
the query parser that defaults to the old behavior.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 14:57:24 2006
Return-Path: <java-user-return-18947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82814 invoked from network); 15 Feb 2006 14:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 14:57:24 -0000
Received: (qmail 55338 invoked by uid 500); 15 Feb 2006 14:57:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55304 invoked by uid 500); 15 Feb 2006 14:57:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55293 invoked by uid 99); 15 Feb 2006 14:57:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 06:57:18 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.78] (HELO web60015.mail.yahoo.com) (209.73.178.78)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Feb 2006 06:57:17 -0800
Received: (qmail 87609 invoked by uid 60001); 15 Feb 2006 14:56:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=D4YsZ8kHnzE5gNAj0dLYjykskgVefctv8Mg4XWpo7deUnomL3iG5gMRzF53IP+RUbF1k1aEQI+RcwsTXatEdAh9lU+c9CGUWe1NV/BnLy68ObNHXhNA9WHEREk4ywmaL9vDA+aPfqP+ORYeg198q5JU024JbNwVbxVsqDIs9/bI=  ;
Message-ID: <20060215145656.87607.qmail@web60015.mail.yahoo.com>
Received: from [70.162.176.95] by web60015.mail.yahoo.com via HTTP; Wed, 15 Feb 2006 06:56:56 PST
Date: Wed, 15 Feb 2006 06:56:56 -0800 (PST)
From: Chandramohan <clingam_nattamai@yahoo.com>
Subject: Re: Help with mass delete from large index
To: java-user@lucene.apache.org
In-Reply-To: <43F0D20D.3050204@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> perform such a cull again, you might make several
> distinct indexes (one per 
> day, per week, per whatever) during that reindexing
> so the next time will be 
> much easier.

How would you search and consolidate the results
across multiple indexes?  Hits from each index will
have independent scoring.

CL

--- "Michael D. Curtin" <mike@curtin.com> wrote:

> Now that it's already in 1 index, I'm afraid you
> can't just delete a few 
> files.  On the other hand, if it's only a one-time
> thing, reindexing with only 
> the docs you want shouldn't be too bad.  If you
> think you might ever need to 
> perform such a cull again, you might make several
> distinct indexes (one per 
> day, per week, per whatever) during that reindexing
> so the next time will be 
> much easier.
> 
> Good luck!
> 
> --MDC
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 15:02:27 2006
Return-Path: <java-user-return-18948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85820 invoked from network); 15 Feb 2006 15:02:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 15:02:27 -0000
Received: (qmail 65126 invoked by uid 500); 15 Feb 2006 15:02:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65100 invoked by uid 500); 15 Feb 2006 15:02:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65089 invoked by uid 99); 15 Feb 2006 15:02:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 07:02:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.58.180.53] (HELO vps.elderlycare-help.co.uk) (207.58.180.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 07:02:19 -0800
Received: from cpc1-flee1-0-0-cust801.glfd.cable.ntl.com ([86.4.143.34] helo=leondell)
	by vps.elderlycare-help.co.uk with esmtpa (Exim 4.52)
	id 1F9OAG-0002Jd-Tw
	for java-user@lucene.apache.org; Wed, 15 Feb 2006 15:01:57 +0000
Message-ID: <00f601c63240$c2d061d0$6500a8c0@leondell>
From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
To: <java-user@lucene.apache.org>
References: <20060215004133.33537.qmail@web51701.mail.yahoo.com> <000601c63212$233788c0$6500a8c0@leondell>
Subject: Re: Size + memory restrictions
Date: Wed, 15 Feb 2006 15:01:44 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps.elderlycare-help.co.uk
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - macranet.co.uk
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 Looking into the memory problems further I read

"Every time you open an IndexSearcher/IndexReader resources are used which
take up memory.  for an application pointed at a static index, you only
ever need one IndexReader/IndexSearcher that can be shared among multiple
threads issuing queries.  if your index is being incrimentally updated,
you should never need more then two searcher/reader pairs open at a time"

We may have many different segments of our index, and it seems below we are 
using one
IndexSearcher per segment. Could this explain why we run out of memory when 
using more than 2/3 segments?
Anyone else have any comments on the below?

Many thanks

Leon
ps. At the moment I think it is set to only look at 2 segements

private Searcher getSearcher() throws IOException {
  if (mSearcher == null) {
   synchronized (Monitor) {
    Searcher[] srs = new IndexSearcher[SearchersDir.size()];
    int maxI = 2;
   // Searcher[] srs = new IndexSearcher[maxI];
    int i = 0;
    for (Iterator iter = SearchersDir.iterator(); iter.hasNext() && i<maxI; 
i++) {
     String dir = (String) iter.next();
     try {
      srs[i] = new IndexSearcher(IndexDir+dir);
     } catch (IOException e) {
      log.error(ClassTool.getClassNameOnly(e) + ": " + e.getMessage(), e);
     }
    }
    mSearcher = new MultiSearcher(srs);
    changeTime = System.currentTimeMillis();
   }
  }
  return mSearcher;
 }
----- Original Message ----- 
From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 15, 2006 9:28 AM
Subject: Re: Size + memory restrictions


> Hi Greg,
> Thanks. We are actually running against 4 segments of 4gb so about 20 
> million docs. We cant merge the segments as their seems to be problems 
> with out linux box , with having files over about 4gb. Not sure why that 
> is.
>
> If I was to upgrade to 8gb of ram does it seem likely this will double the 
> amount of docs we can handle, or would this provide an exponential 
> increase?
>
> Thanks
>
> Leon
> ----- Original Message ----- 
> From: "Greg Gershman" <greggersh@yahoo.com>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, February 15, 2006 12:41 AM
> Subject: Re: Size + memory restrictions
>
>
>> You may consider incrementally adding documents to
>> your index; I'm not sure why there would be problems
>> adding to an existing index, but you can always add
>> additional documents.  You can optimize later to get
>> everything back into a single segment.
>>
>> Querying is a different story; if you are using the
>> Sort API, you will need enough memory to store a full
>> sorting of your documents in memory.  If you're trying
>> to sort on a string or anything other than an int or
>> float, this could require a lot of memory.
>>
>> I've used indices much bigger than 5 mil. docs/3.5 gb
>> with less than 4GB of RAM and had no problems.
>>
>> Greg
>>
>>
>> --- Leon Chaddock <leonchaddock@macranet.co.uk> wrote:
>>
>>> Hi,
>>> we are having tremendous problems building a large
>>> lucene index and querying
>>> it.
>>>
>>> The programmers are telling me that when the index
>>> file reaches 3.5 gb or 5
>>> million docs the index file can no longer grow any
>>> larger.
>>>
>>> To rectify this they have built index files in
>>> multiple directories. Now
>>> apparently my 4gb memory is not enough to query.
>>>
>>> Does this seem right to people or does anyone have
>>> any experience on largish
>>> scale projects.
>>>
>>> I am completely tearing my hair out here and dont
>>> know what to do.
>>>
>>> Thanks
>>>
>>
>>
>> __________________________________________________
>> Do You Yahoo!?
>> Tired of spam?  Yahoo! Mail has the best spam protection around
>> http://mail.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> -- 
>> Internal Virus Database is out-of-date.
>> Checked by AVG Free Edition.
>> Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date: 
>> 01/02/2006
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> -- 
> Internal Virus Database is out-of-date.
> Checked by AVG Free Edition.
> Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date: 01/02/2006
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 15:38:07 2006
Return-Path: <java-user-return-18949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9180 invoked from network); 15 Feb 2006 15:38:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 15:38:06 -0000
Received: (qmail 60805 invoked by uid 500); 15 Feb 2006 15:38:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60779 invoked by uid 500); 15 Feb 2006 15:37:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60767 invoked by uid 99); 15 Feb 2006 15:37:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 07:37:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.64 as permitted sender)
Received: from [205.158.62.64] (HELO ws6-6.us4.outblaze.com) (205.158.62.64)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Feb 2006 07:37:57 -0800
Received: (qmail 7833 invoked from network); 15 Feb 2006 15:24:38 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-6.us4.outblaze.com with SMTP; 15 Feb 2006 15:24:38 -0000
Message-ID: <43F34746.5040905@curtin.com>
Date: Wed, 15 Feb 2006 10:22:46 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Help with mass delete from large index
References: <20060215145656.87607.qmail@web60015.mail.yahoo.com>
In-Reply-To: <20060215145656.87607.qmail@web60015.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chandramohan wrote:

>>perform such a cull again, you might make several
>>distinct indexes (one per 
>>day, per week, per whatever) during that reindexing
>>so the next time will be 
>>much easier.
> 
> How would you search and consolidate the results
> across multiple indexes?  Hits from each index will
> have independent scoring.

Frankly, I ignore the scores in my application.  The data itself isn't English 
prose, so the TF/IDF calcuations are stretched at best, as a measure of 
relevance.  I presort the documents to be in "relevance" order (a popularity 
metric), then specify index ordering for the results.

If that wouldn't work for your application, it seems to me that large-enough 
sub-sections *would* produce equivalent scores.  That is, if the sub-indexes 
were big enough, one could directly compare scores, so a simple merge would 
work.  If the total document corpus is small, then the need for sub-indexes 
isn't there anyhow.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 16:10:43 2006
Return-Path: <java-user-return-18950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35427 invoked from network); 15 Feb 2006 16:10:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 16:10:41 -0000
Received: (qmail 61298 invoked by uid 500); 15 Feb 2006 16:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61265 invoked by uid 500); 15 Feb 2006 16:10:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61247 invoked by uid 99); 15 Feb 2006 16:10:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 08:10:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [170.140.8.220] (HELO nemausa.cc.emory.edu) (170.140.8.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 08:10:31 -0800
Received: from localhost (localhost [127.0.0.1])
	by nemausa.cc.emory.edu (8.13.4/8.13.4) with ESMTP id k1FGA7Md010478
	for <java-user@lucene.apache.org>; Wed, 15 Feb 2006 11:10:07 -0500 (EST)
Received: from metascholar3.library.emory.edu(metascholar3.library.emory.edu
	 [170.140.210.99]) bywebmail.service.emory.edu (Horde MIME library) with 
	HTTP; Wed, 15 Feb 200611:10:07 -0500
Message-ID: <20060215111007.9xjjp801kwsoskwg@webmail.service.emory.edu>
Date: Wed, 15 Feb 2006 11:10:07 -0500
From: Urvashi Gadi <ugadi@emory.edu>
To: java-user@lucene.apache.org
Subject: Performance Issues
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.0.4)
X-imss-version: 2.037
X-imss-result: Passed
X-imss-approveListMatch: *@emory.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

My system requires traversing Hits (search result) and extracting some 
data from it. If the result set is very large my system becomes very 
slow.

Is there a way to increase performance? Is there a way i can limit the 
number of most relevant documents returned?

Best regards,
Urvashi




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 17:59:43 2006
Return-Path: <java-user-return-18951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5801 invoked from network); 15 Feb 2006 17:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 17:59:41 -0000
Received: (qmail 12999 invoked by uid 500); 15 Feb 2006 17:59:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12976 invoked by uid 500); 15 Feb 2006 17:59:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12964 invoked by uid 99); 15 Feb 2006 17:59:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 09:59:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 09:59:32 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: index merging
Date: Wed, 15 Feb 2006 12:59:10 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA0255F9A5@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: index merging
Thread-Index: AcYrLoqv7WufyjeDSpmBcUdP9F8qYwHKiW4A
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have tried to use the isCurrent() method IndexReader to figure out if  =
an index is merging. but since I have to do this evrytime I need to add =
a document, the performance got soooo slow.

here is what I am doing, I create 4 indexs and I am running with 4 =
threads. I do a round robbin on the indexes when ever I process a new =
document. before adding a document I need to check if the index is =
merging, if it's the case then send this document to an index that is =
not merging.


is there a better to index with multi threads? or what is the fastet way =
to check that a index is not merging?

thanks for any hints,

- Omar

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]
Sent: Monday, February 06, 2006 10:03 AM
To: java-user@lucene.apache.org
Subject: Re: index merging


On 2/6/06, Vanlerberghe, Luc <Luc.Vanlerberghe@bvdep.com> wrote:
> Sorry to contradict you Yonik, but I'm pretty sure the commit lock is
> *not* locked during a merge, only while the "segments" file is being
> updated.

Oops, you're right.  Good thing too... if the commit lock was held
during merges, one couldn't even open up a new IndexReader.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 17:59:51 2006
Return-Path: <java-user-return-18952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5894 invoked from network); 15 Feb 2006 17:59:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 17:59:50 -0000
Received: (qmail 14154 invoked by uid 500); 15 Feb 2006 17:59:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14129 invoked by uid 500); 15 Feb 2006 17:59:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14118 invoked by uid 500); 15 Feb 2006 17:59:44 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 14115 invoked by uid 99); 15 Feb 2006 17:59:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 09:59:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 09:59:43 -0800
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id 92E781BB66
	for <lucene-user@jakarta.apache.org>; Wed, 15 Feb 2006 18:59:17 +0100 (CET)
Message-ID: <43F36BF5.60501@fib.upc.edu>
Date: Wed, 15 Feb 2006 18:59:17 +0100
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: Iterating hits
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi lucene users I have a strange error and I don't know to do?
My logs say this:
java.lang.ArrayIndexOutOfBoundsException: 100 >= 100
        at java.util.Vector.elementAt(Vector.java:431)
        at org.apache.lucene.search.Hits.hitDoc(Hits.java:127)
        at org.apache.lucene.search.Hits.doc(Hits.java:89)

my code is this
                PrefixQuery p = new PrefixQuery(new 
Term("TOOL_REF_ID",getINITIAL(tool)));
                Hits h = sr.search(p);
                for (int i=0;i<h.length(); i++){
                    log.debug(h.doc(i).getField("TYPE") + " 
"+h.doc(i).getField("TOOL_REF_ID"));
                    reader.delete(h.id(i));
                }           

Why? How can I do to delete all the documents that the tool_ref_if 
begins with for example "AK"?


Searching about it I find this :
http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200306.mbox/%3C20030630124930.1324.qmail@nagoya.betaversion.org%3E

thks for any reply.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 18:23:58 2006
Return-Path: <java-user-return-18953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17877 invoked from network); 15 Feb 2006 18:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 18:23:58 -0000
Received: (qmail 55591 invoked by uid 500); 15 Feb 2006 18:23:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55547 invoked by uid 500); 15 Feb 2006 18:23:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55529 invoked by uid 99); 15 Feb 2006 18:23:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 10:23:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.198 as permitted sender)
Received: from [64.233.182.198] (HELO nproxy.gmail.com) (64.233.182.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 10:23:51 -0800
Received: by nproxy.gmail.com with SMTP id o60so655121nfa
        for <java-user@lucene.apache.org>; Wed, 15 Feb 2006 10:23:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=McMqlVTIKUzW/nvdfGCj27UVmaXyTdecB2wxRyewhBBbBpOla/HVd8b+jNh8HnZBUaAWEdp6SGcVsajBN5Jl+4avt6ZGgZN6ji+N1/8a4BC2kpm1Qqjk0I2wCEP/cDf6wptwl1mc9HMriJsYNMOfP/Lc+IDaG5gOWUaXK6Fh3ms=
Received: by 10.48.49.13 with SMTP id w13mr105398nfw;
        Wed, 15 Feb 2006 10:23:29 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Wed, 15 Feb 2006 10:23:29 -0800 (PST)
Message-ID: <c68e39170602151023l50d56p6a8ae17c2cba6194@mail.gmail.com>
Date: Wed, 15 Feb 2006 13:23:29 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Iterating hits
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <43F36BF5.60501@fib.upc.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <43F36BF5.60501@fib.upc.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Try using a different reader to delete the documents.
Hits can re-execute a query, and if the searcher you are using is
sharing the reader you are deleting with, it's like changing a list
you are iterating over (fewer hits will be found the next time the
query is executed).

-Yonik

On 2/15/06, Daniel Cortes <dcortes@fib.upc.edu> wrote:
> Hi lucene users I have a strange error and I don't know to do?
> My logs say this:
> java.lang.ArrayIndexOutOfBoundsException: 100 >=3D 100
>         at java.util.Vector.elementAt(Vector.java:431)
>         at org.apache.lucene.search.Hits.hitDoc(Hits.java:127)
>         at org.apache.lucene.search.Hits.doc(Hits.java:89)
>
> my code is this
>                 PrefixQuery p =3D new PrefixQuery(new
> Term("TOOL_REF_ID",getINITIAL(tool)));
>                 Hits h =3D sr.search(p);
>                 for (int i=3D0;i<h.length(); i++){
>                     log.debug(h.doc(i).getField("TYPE") + "
> "+h.doc(i).getField("TOOL_REF_ID"));
>                     reader.delete(h.id(i));
>                 }
>
> Why? How can I do to delete all the documents that the tool_ref_if
> begins with for example "AK"?
>
>
> Searching about it I find this :
> http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200306.mbox/%3C2=
0030630124930.1324.qmail@nagoya.betaversion.org%3E
>
> thks for any reply.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 18:24:05 2006
Return-Path: <java-user-return-18954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17943 invoked from network); 15 Feb 2006 18:24:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 18:24:05 -0000
Received: (qmail 55783 invoked by uid 500); 15 Feb 2006 18:23:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55570 invoked by uid 500); 15 Feb 2006 18:23:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55550 invoked by uid 500); 15 Feb 2006 18:23:52 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 55531 invoked by uid 99); 15 Feb 2006 18:23:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 10:23:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.207 as permitted sender)
Received: from [64.233.182.207] (HELO nproxy.gmail.com) (64.233.182.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 10:23:51 -0800
Received: by nproxy.gmail.com with SMTP id n15so638492nfc
        for <lucene-user@jakarta.apache.org>; Wed, 15 Feb 2006 10:23:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=McMqlVTIKUzW/nvdfGCj27UVmaXyTdecB2wxRyewhBBbBpOla/HVd8b+jNh8HnZBUaAWEdp6SGcVsajBN5Jl+4avt6ZGgZN6ji+N1/8a4BC2kpm1Qqjk0I2wCEP/cDf6wptwl1mc9HMriJsYNMOfP/Lc+IDaG5gOWUaXK6Fh3ms=
Received: by 10.48.49.13 with SMTP id w13mr105398nfw;
        Wed, 15 Feb 2006 10:23:29 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Wed, 15 Feb 2006 10:23:29 -0800 (PST)
Message-ID: <c68e39170602151023l50d56p6a8ae17c2cba6194@mail.gmail.com>
Date: Wed, 15 Feb 2006 13:23:29 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Iterating hits
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <43F36BF5.60501@fib.upc.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <43F36BF5.60501@fib.upc.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Try using a different reader to delete the documents.
Hits can re-execute a query, and if the searcher you are using is
sharing the reader you are deleting with, it's like changing a list
you are iterating over (fewer hits will be found the next time the
query is executed).

-Yonik

On 2/15/06, Daniel Cortes <dcortes@fib.upc.edu> wrote:
> Hi lucene users I have a strange error and I don't know to do?
> My logs say this:
> java.lang.ArrayIndexOutOfBoundsException: 100 >=3D 100
>         at java.util.Vector.elementAt(Vector.java:431)
>         at org.apache.lucene.search.Hits.hitDoc(Hits.java:127)
>         at org.apache.lucene.search.Hits.doc(Hits.java:89)
>
> my code is this
>                 PrefixQuery p =3D new PrefixQuery(new
> Term("TOOL_REF_ID",getINITIAL(tool)));
>                 Hits h =3D sr.search(p);
>                 for (int i=3D0;i<h.length(); i++){
>                     log.debug(h.doc(i).getField("TYPE") + "
> "+h.doc(i).getField("TOOL_REF_ID"));
>                     reader.delete(h.id(i));
>                 }
>
> Why? How can I do to delete all the documents that the tool_ref_if
> begins with for example "AK"?
>
>
> Searching about it I find this :
> http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200306.mbox/%3C2=
0030630124930.1324.qmail@nagoya.betaversion.org%3E
>
> thks for any reply.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 18:40:36 2006
Return-Path: <java-user-return-18955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27720 invoked from network); 15 Feb 2006 18:40:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 18:40:36 -0000
Received: (qmail 8063 invoked by uid 500); 15 Feb 2006 18:40:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8030 invoked by uid 500); 15 Feb 2006 18:40:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8019 invoked by uid 99); 15 Feb 2006 18:40:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 10:40:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 10:40:29 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C8FB65B76C; Wed, 15 Feb 2006 10:40:01 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B649F7F403
	for <java-user@lucene.apache.org>; Wed, 15 Feb 2006 10:40:01 -0800 (PST)
Date: Wed, 15 Feb 2006 10:40:01 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Size + memory restrictions
In-Reply-To: <00f601c63240$c2d061d0$6500a8c0@leondell>
Message-ID: <Pine.LNX.4.58.0602151035140.8792@hal.rescomp.berkeley.edu>
References: <20060215004133.33537.qmail@web51701.mail.yahoo.com>
 <000601c63212$233788c0$6500a8c0@leondell> <00f601c63240$c2d061d0$6500a8c0@leondell>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: We may have many different segments of our index, and it seems below we are
: using one
: IndexSearcher per segment. Could this explain why we run out of memory when
: using more than 2/3 segments?
: Anyone else have any comments on the below?

terminology is a big issue hwere .. when you use the word "segment" it
seems like you are talking about a segment of your data, which is in a
self contained index in it's own right.  My point in in the comment you
quoted was that for a given index, you don't need more then one active
IndexSearcher open at a time, any more then that can waste resources.

I don't know what kind of memory overhead there is in a MultiSearcher, but
besides that you should also be looking at the other issues in the message
you quoted from:   who/when is calling your getSearcher() method? ... is
it getting called more often then the underlying indexes change?  who is
closing the old searchers when you open new ones?

:
: Many thanks
:
: Leon
: ps. At the moment I think it is set to only look at 2 segements
:
: private Searcher getSearcher() throws IOException {
:   if (mSearcher == null) {
:    synchronized (Monitor) {
:     Searcher[] srs = new IndexSearcher[SearchersDir.size()];
:     int maxI = 2;
:    // Searcher[] srs = new IndexSearcher[maxI];
:     int i = 0;
:     for (Iterator iter = SearchersDir.iterator(); iter.hasNext() && i<maxI;
: i++) {
:      String dir = (String) iter.next();
:      try {
:       srs[i] = new IndexSearcher(IndexDir+dir);
:      } catch (IOException e) {
:       log.error(ClassTool.getClassNameOnly(e) + ": " + e.getMessage(), e);
:      }
:     }
:     mSearcher = new MultiSearcher(srs);
:     changeTime = System.currentTimeMillis();
:    }
:   }
:   return mSearcher;
:  }
: ----- Original Message -----
: From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
: To: <java-user@lucene.apache.org>
: Sent: Wednesday, February 15, 2006 9:28 AM
: Subject: Re: Size + memory restrictions
:
:
: > Hi Greg,
: > Thanks. We are actually running against 4 segments of 4gb so about 20
: > million docs. We cant merge the segments as their seems to be problems
: > with out linux box , with having files over about 4gb. Not sure why that
: > is.
: >
: > If I was to upgrade to 8gb of ram does it seem likely this will double the
: > amount of docs we can handle, or would this provide an exponential
: > increase?
: >
: > Thanks
: >
: > Leon
: > ----- Original Message -----
: > From: "Greg Gershman" <greggersh@yahoo.com>
: > To: <java-user@lucene.apache.org>
: > Sent: Wednesday, February 15, 2006 12:41 AM
: > Subject: Re: Size + memory restrictions
: >
: >
: >> You may consider incrementally adding documents to
: >> your index; I'm not sure why there would be problems
: >> adding to an existing index, but you can always add
: >> additional documents.  You can optimize later to get
: >> everything back into a single segment.
: >>
: >> Querying is a different story; if you are using the
: >> Sort API, you will need enough memory to store a full
: >> sorting of your documents in memory.  If you're trying
: >> to sort on a string or anything other than an int or
: >> float, this could require a lot of memory.
: >>
: >> I've used indices much bigger than 5 mil. docs/3.5 gb
: >> with less than 4GB of RAM and had no problems.
: >>
: >> Greg
: >>
: >>
: >> --- Leon Chaddock <leonchaddock@macranet.co.uk> wrote:
: >>
: >>> Hi,
: >>> we are having tremendous problems building a large
: >>> lucene index and querying
: >>> it.
: >>>
: >>> The programmers are telling me that when the index
: >>> file reaches 3.5 gb or 5
: >>> million docs the index file can no longer grow any
: >>> larger.
: >>>
: >>> To rectify this they have built index files in
: >>> multiple directories. Now
: >>> apparently my 4gb memory is not enough to query.
: >>>
: >>> Does this seem right to people or does anyone have
: >>> any experience on largish
: >>> scale projects.
: >>>
: >>> I am completely tearing my hair out here and dont
: >>> know what to do.
: >>>
: >>> Thanks
: >>>
: >>
: >>
: >> __________________________________________________
: >> Do You Yahoo!?
: >> Tired of spam?  Yahoo! Mail has the best spam protection around
: >> http://mail.yahoo.com
: >>
: >> ---------------------------------------------------------------------
: >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: >> For additional commands, e-mail: java-user-help@lucene.apache.org
: >>
: >>
: >>
: >>
: >>
: >> --
: >> Internal Virus Database is out-of-date.
: >> Checked by AVG Free Edition.
: >> Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date:
: >> 01/02/2006
: >>
: >>
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: >
: >
: >
: > --
: > Internal Virus Database is out-of-date.
: > Checked by AVG Free Edition.
: > Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date: 01/02/2006
: >
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 18:46:26 2006
Return-Path: <java-user-return-18956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30426 invoked from network); 15 Feb 2006 18:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 18:46:25 -0000
Received: (qmail 21993 invoked by uid 500); 15 Feb 2006 18:46:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21956 invoked by uid 500); 15 Feb 2006 18:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21924 invoked by uid 99); 15 Feb 2006 18:46:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 10:46:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.58.180.53] (HELO vps.elderlycare-help.co.uk) (207.58.180.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 10:46:11 -0800
Received: from cpc1-flee1-0-0-cust801.glfd.cable.ntl.com ([86.4.143.34] helo=leondell)
	by vps.elderlycare-help.co.uk with esmtpa (Exim 4.52)
	id 1F9Reu-00010p-T7
	for java-user@lucene.apache.org; Wed, 15 Feb 2006 18:45:49 +0000
Message-ID: <013101c63260$08c9f420$6500a8c0@leondell>
From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
To: <java-user@lucene.apache.org>
References: <20060215004133.33537.qmail@web51701.mail.yahoo.com> <000601c63212$233788c0$6500a8c0@leondell> <00f601c63240$c2d061d0$6500a8c0@leondell> <Pine.LNX.4.58.0602151035140.8792@hal.rescomp.berkeley.edu>
Subject: Re: Size + memory restrictions
Date: Wed, 15 Feb 2006 18:45:40 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps.elderlycare-help.co.uk
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - macranet.co.uk
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Chris,
Thanks, when I quoted segment I meant index file.
So if we have 10 seperate index files are you saying we should have one 
indexSearcher for the index collectively, or one per index file

Thanks

Leon


----- Original Message ----- 
From: "Chris Hostetter" <hossman_lucene@fucit.org>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 15, 2006 6:40 PM
Subject: Re: Size + memory restrictions


>: We may have many different segments of our index, and it seems below we 
>are
> : using one
> : IndexSearcher per segment. Could this explain why we run out of memory 
> when
> : using more than 2/3 segments?
> : Anyone else have any comments on the below?
>
> terminology is a big issue hwere .. when you use the word "segment" it
> seems like you are talking about a segment of your data, which is in a
> self contained index in it's own right.  My point in in the comment you
> quoted was that for a given index, you don't need more then one active
> IndexSearcher open at a time, any more then that can waste resources.
>
> I don't know what kind of memory overhead there is in a MultiSearcher, but
> besides that you should also be looking at the other issues in the message
> you quoted from:   who/when is calling your getSearcher() method? ... is
> it getting called more often then the underlying indexes change?  who is
> closing the old searchers when you open new ones?
>
> :
> : Many thanks
> :
> : Leon
> : ps. At the moment I think it is set to only look at 2 segements
> :
> : private Searcher getSearcher() throws IOException {
> :   if (mSearcher == null) {
> :    synchronized (Monitor) {
> :     Searcher[] srs = new IndexSearcher[SearchersDir.size()];
> :     int maxI = 2;
> :    // Searcher[] srs = new IndexSearcher[maxI];
> :     int i = 0;
> :     for (Iterator iter = SearchersDir.iterator(); iter.hasNext() && 
> i<maxI;
> : i++) {
> :      String dir = (String) iter.next();
> :      try {
> :       srs[i] = new IndexSearcher(IndexDir+dir);
> :      } catch (IOException e) {
> :       log.error(ClassTool.getClassNameOnly(e) + ": " + e.getMessage(), 
> e);
> :      }
> :     }
> :     mSearcher = new MultiSearcher(srs);
> :     changeTime = System.currentTimeMillis();
> :    }
> :   }
> :   return mSearcher;
> :  }
> : ----- Original Message -----
> : From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
> : To: <java-user@lucene.apache.org>
> : Sent: Wednesday, February 15, 2006 9:28 AM
> : Subject: Re: Size + memory restrictions
> :
> :
> : > Hi Greg,
> : > Thanks. We are actually running against 4 segments of 4gb so about 20
> : > million docs. We cant merge the segments as their seems to be problems
> : > with out linux box , with having files over about 4gb. Not sure why 
> that
> : > is.
> : >
> : > If I was to upgrade to 8gb of ram does it seem likely this will double 
> the
> : > amount of docs we can handle, or would this provide an exponential
> : > increase?
> : >
> : > Thanks
> : >
> : > Leon
> : > ----- Original Message -----
> : > From: "Greg Gershman" <greggersh@yahoo.com>
> : > To: <java-user@lucene.apache.org>
> : > Sent: Wednesday, February 15, 2006 12:41 AM
> : > Subject: Re: Size + memory restrictions
> : >
> : >
> : >> You may consider incrementally adding documents to
> : >> your index; I'm not sure why there would be problems
> : >> adding to an existing index, but you can always add
> : >> additional documents.  You can optimize later to get
> : >> everything back into a single segment.
> : >>
> : >> Querying is a different story; if you are using the
> : >> Sort API, you will need enough memory to store a full
> : >> sorting of your documents in memory.  If you're trying
> : >> to sort on a string or anything other than an int or
> : >> float, this could require a lot of memory.
> : >>
> : >> I've used indices much bigger than 5 mil. docs/3.5 gb
> : >> with less than 4GB of RAM and had no problems.
> : >>
> : >> Greg
> : >>
> : >>
> : >> --- Leon Chaddock <leonchaddock@macranet.co.uk> wrote:
> : >>
> : >>> Hi,
> : >>> we are having tremendous problems building a large
> : >>> lucene index and querying
> : >>> it.
> : >>>
> : >>> The programmers are telling me that when the index
> : >>> file reaches 3.5 gb or 5
> : >>> million docs the index file can no longer grow any
> : >>> larger.
> : >>>
> : >>> To rectify this they have built index files in
> : >>> multiple directories. Now
> : >>> apparently my 4gb memory is not enough to query.
> : >>>
> : >>> Does this seem right to people or does anyone have
> : >>> any experience on largish
> : >>> scale projects.
> : >>>
> : >>> I am completely tearing my hair out here and dont
> : >>> know what to do.
> : >>>
> : >>> Thanks
> : >>>
> : >>
> : >>
> : >> __________________________________________________
> : >> Do You Yahoo!?
> : >> Tired of spam?  Yahoo! Mail has the best spam protection around
> : >> http://mail.yahoo.com
> : >>
> : >> ---------------------------------------------------------------------
> : >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : >> For additional commands, e-mail: java-user-help@lucene.apache.org
> : >>
> : >>
> : >>
> : >>
> : >>
> : >> --
> : >> Internal Virus Database is out-of-date.
> : >> Checked by AVG Free Edition.
> : >> Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date:
> : >> 01/02/2006
> : >>
> : >>
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> : >
> : >
> : >
> : >
> : > --
> : > Internal Virus Database is out-of-date.
> : > Checked by AVG Free Edition.
> : > Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date: 
> 01/02/2006
> : >
> : >
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> -- 
> Internal Virus Database is out-of-date.
> Checked by AVG Free Edition.
> Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date: 01/02/2006
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 20:55:08 2006
Return-Path: <java-user-return-18957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15937 invoked from network); 15 Feb 2006 20:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 20:55:08 -0000
Received: (qmail 30611 invoked by uid 500); 15 Feb 2006 20:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30582 invoked by uid 500); 15 Feb 2006 20:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30571 invoked by uid 99); 15 Feb 2006 20:55:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 12:55:01 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Feb 2006 12:54:59 -0800
Received: (qmail 42248 invoked by uid 60001); 15 Feb 2006 20:54:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=YEI1HvDrkY1RxG0Hn+wep2BEvv06x3fo/ZHxK7HHGXjPNcbgll8eqB2T55urIQ3ro3BYcuLzXeY7wJEs9e3aLcPbJeRcBReN6Mn5iMl+QEzWKcyF+KdQVzl7PwqMfCF8NorzprI3fxeNDZBWQWQAQvpoB4kOJlLrR962nGmsm9Q=  ;
Message-ID: <20060215205438.42246.qmail@web50301.mail.yahoo.com>
Date: Wed, 15 Feb 2006 12:54:38 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Size + memory restrictions
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0602151035140.8792@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Leon,

Index is typically a directory on disk with files (commonly called "index files") in it.
Each index can have 1 or more segments.
Each segment is comprised of several index files.

If you are using the compound index format, then the situation is a bit different (less index files).

Otis
P.S.
You asked about Lucene in Action... :)

----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Wednesday, February 15, 2006 1:40:01 PM
Subject: Re: Size + memory restrictions

: We may have many different segments of our index, and it seems below we are
: using one
: IndexSearcher per segment. Could this explain why we run out of memory when
: using more than 2/3 segments?
: Anyone else have any comments on the below?

terminology is a big issue hwere .. when you use the word "segment" it
seems like you are talking about a segment of your data, which is in a
self contained index in it's own right.  My point in in the comment you
quoted was that for a given index, you don't need more then one active
IndexSearcher open at a time, any more then that can waste resources.

I don't know what kind of memory overhead there is in a MultiSearcher, but
besides that you should also be looking at the other issues in the message
you quoted from:   who/when is calling your getSearcher() method? ... is
it getting called more often then the underlying indexes change?  who is
closing the old searchers when you open new ones?

:
: Many thanks
:
: Leon
: ps. At the moment I think it is set to only look at 2 segements
:
: private Searcher getSearcher() throws IOException {
:   if (mSearcher == null) {
:    synchronized (Monitor) {
:     Searcher[] srs = new IndexSearcher[SearchersDir.size()];
:     int maxI = 2;
:    // Searcher[] srs = new IndexSearcher[maxI];
:     int i = 0;
:     for (Iterator iter = SearchersDir.iterator(); iter.hasNext() && i<maxI;
: i++) {
:      String dir = (String) iter.next();
:      try {
:       srs[i] = new IndexSearcher(IndexDir+dir);
:      } catch (IOException e) {
:       log.error(ClassTool.getClassNameOnly(e) + ": " + e.getMessage(), e);
:      }
:     }
:     mSearcher = new MultiSearcher(srs);
:     changeTime = System.currentTimeMillis();
:    }
:   }
:   return mSearcher;
:  }
: ----- Original Message -----
: From: "Leon Chaddock" <leonchaddock@macranet.co.uk>
: To: <java-user@lucene.apache.org>
: Sent: Wednesday, February 15, 2006 9:28 AM
: Subject: Re: Size + memory restrictions
:
:
: > Hi Greg,
: > Thanks. We are actually running against 4 segments of 4gb so about 20
: > million docs. We cant merge the segments as their seems to be problems
: > with out linux box , with having files over about 4gb. Not sure why that
: > is.
: >
: > If I was to upgrade to 8gb of ram does it seem likely this will double the
: > amount of docs we can handle, or would this provide an exponential
: > increase?
: >
: > Thanks
: >
: > Leon
: > ----- Original Message -----
: > From: "Greg Gershman" <greggersh@yahoo.com>
: > To: <java-user@lucene.apache.org>
: > Sent: Wednesday, February 15, 2006 12:41 AM
: > Subject: Re: Size + memory restrictions
: >
: >
: >> You may consider incrementally adding documents to
: >> your index; I'm not sure why there would be problems
: >> adding to an existing index, but you can always add
: >> additional documents.  You can optimize later to get
: >> everything back into a single segment.
: >>
: >> Querying is a different story; if you are using the
: >> Sort API, you will need enough memory to store a full
: >> sorting of your documents in memory.  If you're trying
: >> to sort on a string or anything other than an int or
: >> float, this could require a lot of memory.
: >>
: >> I've used indices much bigger than 5 mil. docs/3.5 gb
: >> with less than 4GB of RAM and had no problems.
: >>
: >> Greg
: >>
: >>
: >> --- Leon Chaddock <leonchaddock@macranet.co.uk> wrote:
: >>
: >>> Hi,
: >>> we are having tremendous problems building a large
: >>> lucene index and querying
: >>> it.
: >>>
: >>> The programmers are telling me that when the index
: >>> file reaches 3.5 gb or 5
: >>> million docs the index file can no longer grow any
: >>> larger.
: >>>
: >>> To rectify this they have built index files in
: >>> multiple directories. Now
: >>> apparently my 4gb memory is not enough to query.
: >>>
: >>> Does this seem right to people or does anyone have
: >>> any experience on largish
: >>> scale projects.
: >>>
: >>> I am completely tearing my hair out here and dont
: >>> know what to do.
: >>>
: >>> Thanks
: >>>
: >>
: >>
: >> __________________________________________________
: >> Do You Yahoo!?
: >> Tired of spam?  Yahoo! Mail has the best spam protection around
: >> http://mail.yahoo.com
: >>
: >> ---------------------------------------------------------------------
: >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: >> For additional commands, e-mail: java-user-help@lucene.apache.org
: >>
: >>
: >>
: >>
: >>
: >> --
: >> Internal Virus Database is out-of-date.
: >> Checked by AVG Free Edition.
: >> Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date:
: >> 01/02/2006
: >>
: >>
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: >
: >
: >
: > --
: > Internal Virus Database is out-of-date.
: > Checked by AVG Free Edition.
: > Version: 7.1.375 / Virus Database: 267.15.0/248 - Release Date: 01/02/2006
: >
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 22:08:16 2006
Return-Path: <java-user-return-18958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66861 invoked from network); 15 Feb 2006 22:08:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 22:08:16 -0000
Received: (qmail 6611 invoked by uid 500); 15 Feb 2006 22:08:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6557 invoked by uid 500); 15 Feb 2006 22:08:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6535 invoked by uid 99); 15 Feb 2006 22:08:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 14:08:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vsood2@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 14:08:08 -0800
Received: by wproxy.gmail.com with SMTP id 70so28521wra
        for <java-user@lucene.apache.org>; Wed, 15 Feb 2006 14:07:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cGGv+PGjhXhCQIeO1OKUwbKQgC68UbzU5wuwpu2EMNveStxMrK1Ve0cGBcCOmXT0K24UKx3ldwwC+ivIUCuZbUENMURQacawzfx3coZyNJaN7oHdhXtLFJ8oL/W1AcpIUU91W9vg/IT8x3ehwN7K+tErVArxX4vRClWSa1ZVNM0=
Received: by 10.65.11.19 with SMTP id o19mr174115qbi;
        Wed, 15 Feb 2006 14:07:47 -0800 (PST)
Received: by 10.64.249.2 with HTTP; Wed, 15 Feb 2006 14:07:47 -0800 (PST)
Message-ID: <800d6e9c0602151407o6cfd65bbvca09e01c514a3bd7@mail.gmail.com>
Date: Wed, 15 Feb 2006 17:07:47 -0500
From: varun sood <vsood2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Relevance Feedback Lucene+Algorithms
In-Reply-To: <43F3310E.7030207@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2015_31841931.1140041267485"
References: <PKEIKOCKCHNIIHNECPCCIELCCDAA.koji.sekiguchi@m4.dion.ne.jp>
	 <43F3310E.7030207@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2015_31841931.1140041267485
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi
Thanks for replying.

I read your ppt. It is good. But the code or the basic relevance feedback i=
s
not explained there. Actually I am not familiar with JSP, JUnit, Maven, etc=
.
I guess It will take me lot of time to actually discover how the things wor=
k
in demo program because I have to learn all those technologies first.
Is there any documentation or some brief notes on how Relevance Feedback ha=
s
been or could be done? I am looking on manual Relevance Feedback system.


Thanks,
Dexter


On 2/15/06, Grant Ingersoll <gsingers@syr.edu> wrote:
>
> URL is http://www.cnlp.org/apachecon2005/
>
> Koji Sekiguchi wrote:
> > Please check Grant Ingersoll's presentation at ApacheCon 2005.
> > He put out great demo programs for the relevance feedback using Lucene.
> >
> > Thank you,
> >
> > Koji
> >
> >
> >> -----Original Message-----
> >> From: varun sood [mailto:vsood2@gmail.com]
> >> Sent: Wednesday, February 15, 2006 3:36 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Relevance Feedback Lucene+Algorithms
> >>
> >>
> >> Hi,
> >>   Can anyone share the experience of how to implement Relevance
> >> Feedback in
> >> Lucene?
> >>
> >> Can someone suggest me some algorithms and papers which can help me in
> >> building an effective Relevance Feedback system?
> >>
> >> Thanks in advance.
> >>
> >> Dexter.
> >>
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> -------------------------------------------------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> School of Information Studies
> 335 Hinds Hall
> Syracuse, NY 13244
>
> http://www.cnlp.org
> Voice:  315-443-5484
> Fax: 315-443-6886
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2015_31841931.1140041267485--

From java-user-return-18959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 22:38:19 2006
Return-Path: <java-user-return-18959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86008 invoked from network); 15 Feb 2006 22:38:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 22:38:16 -0000
Received: (qmail 57699 invoked by uid 500); 15 Feb 2006 22:38:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57647 invoked by uid 500); 15 Feb 2006 22:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57614 invoked by uid 99); 15 Feb 2006 22:38:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 14:38:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 14:38:05 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 0A443B735C
	for <java-user@lucene.apache.org>; Thu, 16 Feb 2006 09:37:41 +1100 (EST)
Message-ID: <43F3AD0E.6040003@nuix.com.au>
Date: Thu, 16 Feb 2006 09:37:02 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: index merging
References: <63434C14F9A6F74CB36B85033E4C30CA0255F9A5@hermes.corp.cyveillance.com>
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA0255F9A5@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Omar Didi wrote:
> I have tried to use the isCurrent() method IndexReader to figure out
> if  an index is merging. but since I have to do this evrytime I need
> to add a document, the performance got soooo slow.
> 
> here is what I am doing, I create 4 indexs and I am running with 4
> threads. I do a round robbin on the indexes when ever I process a new
> document. before adding a document I need to check if the index is
> merging, if it's the case then send this document to an index that is
> not merging.
> 
> is there a better to index with multi threads? or what is the fastet
> way to check that a index is not merging?

I've done this before by having a single work queue of documents which 
need adding.  Each of the four indexing threads refer to that queue and 
can pull documents off that queue.

The concurrency utility classes in java.util.concurrent may help with 
this approach.

Daniel

-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 15 22:39:16 2006
Return-Path: <java-user-return-18960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87315 invoked from network); 15 Feb 2006 22:39:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Feb 2006 22:39:16 -0000
Received: (qmail 61726 invoked by uid 500); 15 Feb 2006 22:39:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61696 invoked by uid 500); 15 Feb 2006 22:39:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61685 invoked by uid 99); 15 Feb 2006 22:39:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 14:39:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 14:39:09 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14F2C205@mailer.syr.edu>; Wed, 15 Feb 2006 17:38:48 -0500
Message-ID: <43F3AD79.9010901@syr.edu>
Date: Wed, 15 Feb 2006 17:38:49 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Relevance Feedback Lucene+Algorithms
References: <PKEIKOCKCHNIIHNECPCCIELCCDAA.koji.sekiguchi@m4.dion.ne.jp>	 <43F3310E.7030207@syr.edu> <800d6e9c0602151407o6cfd65bbvca09e01c514a3bd7@mail.gmail.com>
In-Reply-To: <800d6e9c0602151407o6cfd65bbvca09e01c514a3bd7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In the example code, take a look at the SearchServlet.java code and the 
performFeedback and getTopTerms() methods, which demonstrate the use of 
the term vectors.  It is fairly well commented.  You don't need maven, 
JSP or JUnit for this.  On the indexing side, look at the TVHTMLDocument 
for how to construct the term vectors.

As for how to do Rel. Feedback, you can search the mailing list archive, 
there have been many discussions in the past that will offer insights 
into RF in Lucene.  I also like the book "Modern Information Retrieval" 
by Baeza-Yates, et.al as a text for the theory behind RF.  You may also 
find the MoreLikeThis implementation (again, search this mailing list 
and look in the Lucene contrib section) satisfies your needs.

Hope this helps,
Grant

varun sood wrote:
> Hi
> Thanks for replying.
>
> I read your ppt. It is good. But the code or the basic relevance feedback is
> not explained there. Actually I am not familiar with JSP, JUnit, Maven, etc.
> I guess It will take me lot of time to actually discover how the things work
> in demo program because I have to learn all those technologies first.
> Is there any documentation or some brief notes on how Relevance Feedback has
> been or could be done? I am looking on manual Relevance Feedback system.
>
>
> Thanks,
> Dexter
>
>
> On 2/15/06, Grant Ingersoll <gsingers@syr.edu> wrote:
>   
>> URL is http://www.cnlp.org/apachecon2005/
>>
>> Koji Sekiguchi wrote:
>>     
>>> Please check Grant Ingersoll's presentation at ApacheCon 2005.
>>> He put out great demo programs for the relevance feedback using Lucene.
>>>
>>> Thank you,
>>>
>>> Koji
>>>
>>>
>>>       
>>>> -----Original Message-----
>>>> From: varun sood [mailto:vsood2@gmail.com]
>>>> Sent: Wednesday, February 15, 2006 3:36 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Relevance Feedback Lucene+Algorithms
>>>>
>>>>
>>>> Hi,
>>>>   Can anyone share the experience of how to implement Relevance
>>>> Feedback in
>>>> Lucene?
>>>>
>>>> Can someone suggest me some algorithms and papers which can help me in
>>>> building an effective Relevance Feedback system?
>>>>
>>>> Thanks in advance.
>>>>
>>>> Dexter.
>>>>
>>>>
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>       
>> --
>> -------------------------------------------------------------------
>> Grant Ingersoll
>> Sr. Software Engineer
>> Center for Natural Language Processing
>> Syracuse University
>> School of Information Studies
>> 335 Hinds Hall
>> Syracuse, NY 13244
>>
>> http://www.cnlp.org
>> Voice:  315-443-5484
>> Fax: 315-443-6886
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 04:28:17 2006
Return-Path: <java-user-return-18961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52321 invoked from network); 16 Feb 2006 04:28:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 04:28:16 -0000
Received: (qmail 60877 invoked by uid 500); 16 Feb 2006 04:28:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60838 invoked by uid 500); 16 Feb 2006 04:28:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60825 invoked by uid 99); 16 Feb 2006 04:28:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 20:28:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 20:28:08 -0800
Received: from shivani [61.246.2.159] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id A0552D40056; Thu, 16 Feb 2006 10:02:21 +0530
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: ArrayIndexOutOfBoundsException while closing the index writer
Date: Thu, 16 Feb 2006 10:01:12 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0061_01C632DF.EC10FD30"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYysdESFljZW5X7RtajBgNqI+ABTw==
Message-Id: <20060216100231.SM00940@shivani>
X-IMAIL-SPAM-VALHELO: (005102d40056ec07)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0061_01C632DF.EC10FD30
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

I have used Lucene in my application and am just indexing and searching on
some documents. The code that indexes the documents was working fine till
yesterday and suddenly stopped working.

I get an error when I am trying to close the index writer. The code is as
follows:

 

 

.

            IndexWriter indexwriter = new IndexWriter(indexDirFile, new
StandardAnalyzer(), flag);

            indexFile(indexwriter, resumeFile);

            indexwriter.close(); //causing errors

        } catch (IOException e)

        {   

            e.printStackTrace();

            throw new Error(e);

        }

.

 

And the error log is as follows:

 

2006-02-15 18:47:48,748 WARN  [org.apache.struts.action.RequestProcessor]
Unhandled Exception thrown: class java.lang.ArrayIndexOutOfBoundsException

2006-02-15 18:47:48,748 ERROR [org.jboss.web.localhost.Engine]
StandardWrapperValve[action]: Servlet.service() for servlet action threw
exception

java.lang.ArrayIndexOutOfBoundsException: 105 >= 25

            at java.util.Vector.elementAt(Vector.java:432)

            at
org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

            at
org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:103)

            at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:237)

            at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:169)

            at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)

            at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:425)

            at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:373)

            at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:193)

            at rd.admin.NewIndexer.indexTextFile(NewIndexer.java:108)

            at rd.admin.AddResume.indexOneRow(AddResume.java:38)

            at
rd.admin.LuceneGateway.buildMapAndIndex(LuceneGateway.java:46)

            at rd.admin.LuceneGateway.indexResume(LuceneGateway.java:30)

            at
rd.admin.UploadResumeAgainstRequisition.npExecute(UploadResumeAgainstRequisi
tion.java:106)

            at np.core.BaseNPAction.execute(BaseNPAction.java:116)

            at
org.apache.struts.action.RequestProcessor.processActionPerform(RequestProces
sor.java:421)

            at
org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)

            at
org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)

            at
org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:415)

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)

            at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application
FilterChain.java:237)

            at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh
ain.java:157)

            at
org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.ja
va:75)

            at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application
FilterChain.java:186)

            at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh
ain.java:157)

            at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.ja
va:214)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContext
Valve.java:198)

            at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.ja
va:152)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalVal
ve.java:66)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssoci
ationValve.java:153)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase
.java:540)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:
54)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137
)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118
)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java
:109)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)

            at
org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)

            at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)

            at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConne
ction(Http11Protocol.java:705)

            at
org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)

            at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.jav
a:683)

            at java.lang.Thread.run(Thread.java:595)

 

 

 

Can someone please suggest a solution or even the cause of the problem?

 

Thanks in advance.

 

Regards,

Shivani

 


------=_NextPart_000_0061_01C632DF.EC10FD30--



From java-user-return-18962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 04:31:36 2006
Return-Path: <java-user-return-18962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53494 invoked from network); 16 Feb 2006 04:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 04:31:36 -0000
Received: (qmail 64836 invoked by uid 500); 16 Feb 2006 04:31:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64042 invoked by uid 500); 16 Feb 2006 04:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64031 invoked by uid 99); 16 Feb 2006 04:31:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 20:31:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cwho.work@gmail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO zproxy.gmail.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 20:31:29 -0800
Received: by zproxy.gmail.com with SMTP id 9so89462nzo
        for <java-user@lucene.apache.org>; Wed, 15 Feb 2006 20:31:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=HCvgJKXj3HY1pRHFNZ+mKMgnVBzBAoU8uHVG8lTcLVQVudVZuLKqh6OCF7XP+23OeBORS1ORUcvKaGZS35asacM6m4pxAZWlPOgL4KK5nFaVEBBpXKi6Vfd4ZdfmH2QzP+FMoufDdPdsPe2O2huEjqAoNmC5p2bG0HG0EO/xKdw=
Received: by 10.37.14.18 with SMTP id r18mr506439nzi;
        Wed, 15 Feb 2006 20:31:08 -0800 (PST)
Received: by 10.36.36.1 with HTTP; Wed, 15 Feb 2006 20:31:08 -0800 (PST)
Message-ID: <6c33f9950602152031x1024b5e8q723a04fa95840e03@mail.gmail.com>
Date: Thu, 16 Feb 2006 12:31:08 +0800
From: Chun Wei Ho <cwho.work@gmail.com>
To: java-user@lucene.apache.org
Subject: Hardware Requirements for a large index?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am in the process of deciding specs for a crawling machine and a
searching machine (two machines), which will support merging/indexing
and searching operations on a single Lucene index that may scale to
about several million pages (at which it would be about 2-10 GB,
assuming linear growth with pages).

What is the range of hardware that I should be looking at? Could
anyone share their deployment/hardware specs for a large index size?
I'm looking for RAM and CPU considerations.

Also what is the preferred platform - Java has a max memory allocation
of 4GB on Solaris and 2GB on linux? -> Does it make sense to get more
RAM than this?

Thanks!

CW

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 04:33:38 2006
Return-Path: <java-user-return-18963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54095 invoked from network); 16 Feb 2006 04:33:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 04:33:37 -0000
Received: (qmail 66642 invoked by uid 500); 16 Feb 2006 04:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66605 invoked by uid 500); 16 Feb 2006 04:33:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66594 invoked by uid 99); 16 Feb 2006 04:33:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 20:33:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 20:33:31 -0800
Received: from shivani [61.246.2.159] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id A1992F20056; Thu, 16 Feb 2006 10:07:45 +0530
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: How to index numeric fields
Date: Thu, 16 Feb 2006 10:06:37 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0072_01C632E0.AD97FD00"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYyspKzC48hqolhRPC5VdJnjfwRXg==
Message-Id: <20060216100778.SM00940@shivani>
X-IMAIL-SPAM-VALHELO: (019502f20056ec2a)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0072_01C632E0.AD97FD00
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

What is the best way to index numeric decimal fields, like experience, when
I want to use a range search on this field?

 

Thanks in advance.

 

Regards,

Shivani

 

 


------=_NextPart_000_0072_01C632E0.AD97FD00--



From java-user-return-18964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 04:45:16 2006
Return-Path: <java-user-return-18964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57708 invoked from network); 16 Feb 2006 04:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 04:45:14 -0000
Received: (qmail 76295 invoked by uid 500); 16 Feb 2006 04:45:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76255 invoked by uid 500); 16 Feb 2006 04:45:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76219 invoked by uid 99); 16 Feb 2006 04:45:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 20:45:04 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Feb 2006 20:45:03 -0800
Received: (qmail 78299 invoked by uid 60001); 16 Feb 2006 04:44:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=yv+C9bhgFkjaAyCt3fM1qNF+1a8kHRrRiw0x4lbR6RwGVJC5rWmhMxM55TjCsEm4C7z9TlvdJCqMh0BLyVTYthLmh5oCED5tIxX04YTJOtXOfdidNGYJvtbFds9AS9ubA8BMtHopyjwRnIH9kftkT8LqwHLdrQ5BFBH28I9dBEw=  ;
Message-ID: <20060216044442.78297.qmail@web50315.mail.yahoo.com>
Date: Wed, 15 Feb 2006 20:44:42 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to index numeric fields
To: java-user@lucene.apache.org
In-Reply-To: <20060216100778.SM00940@shivani>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Here are a few bits:
http://www.lucenebook.com/search?query=indexing+numbers
The Wiki and the FAQ also have some information about indexing numbers/dates.
Basically, you want them small (ints, faster sorting, if you need sorting), and you don't want them too fine, if you'll be expanding them into Boolean OR query.

Otis


----- Original Message ----
From: Shivani Sawhney <shivani@netedgecomputing.com>
To: java-user@lucene.apache.org
Sent: Wednesday, February 15, 2006 11:36:37 PM
Subject: How to index numeric fields

Hi,

What is the best way to index numeric decimal fields, like experience, when
I want to use a range search on this field?

 

Thanks in advance.

 

Regards,

Shivani

 

 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 04:46:10 2006
Return-Path: <java-user-return-18965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58237 invoked from network); 16 Feb 2006 04:46:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 04:46:10 -0000
Received: (qmail 78187 invoked by uid 500); 16 Feb 2006 04:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77986 invoked by uid 500); 16 Feb 2006 04:46:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77970 invoked by uid 99); 16 Feb 2006 04:46:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 20:46:04 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Feb 2006 20:46:03 -0800
Received: (qmail 54287 invoked by uid 60001); 16 Feb 2006 04:45:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=vYtJ9VaMFZVGTb8PF6xJR05Q51YMoq98eLaWVOF0+P7USETCmQhbjnBD8C//55RdFtRX7Cc8PiXbEtQhL3hEckxCzoC1iBGAx4nRAuuKxfka5I6JE18rXgDfbZp539suM9d8j6V6AzKCyjFMO517vC89kYqJsSQGhq59cL0eUQs=  ;
Message-ID: <20060216044542.54285.qmail@web50306.mail.yahoo.com>
Date: Wed, 15 Feb 2006 20:45:42 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: ArrayIndexOutOfBoundsException while closing the index writer
To: java-user@lucene.apache.org
In-Reply-To: <20060216100231.SM00940@shivani>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Who knows what else the app is doing.
However, I can quickly suggest that you add a finally block and close your writer in there if writer != null.

Otis

----- Original Message ----
From: Shivani Sawhney <shivani@netedgecomputing.com>
To: java-user@lucene.apache.org
Sent: Wednesday, February 15, 2006 11:31:12 PM
Subject: ArrayIndexOutOfBoundsException while closing the index writer

Hi,

I have used Lucene in my application and am just indexing and searching on
some documents. The code that indexes the documents was working fine till
yesterday and suddenly stopped working.

I get an error when I am trying to close the index writer. The code is as
follows:

 

 

.

            IndexWriter indexwriter = new IndexWriter(indexDirFile, new
StandardAnalyzer(), flag);

            indexFile(indexwriter, resumeFile);

            indexwriter.close(); //causing errors

        } catch (IOException e)

        {   

            e.printStackTrace();

            throw new Error(e);

        }

.

 

And the error log is as follows:

 

2006-02-15 18:47:48,748 WARN  [org.apache.struts.action.RequestProcessor]
Unhandled Exception thrown: class java.lang.ArrayIndexOutOfBoundsException

2006-02-15 18:47:48,748 ERROR [org.jboss.web.localhost.Engine]
StandardWrapperValve[action]: Servlet.service() for servlet action threw
exception

java.lang.ArrayIndexOutOfBoundsException: 105 >= 25

            at java.util.Vector.elementAt(Vector.java:432)

            at
org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

            at
org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:103)

            at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:237)

            at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:169)

            at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)

            at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:425)

            at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:373)

            at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:193)

            at rd.admin.NewIndexer.indexTextFile(NewIndexer.java:108)

            at rd.admin.AddResume.indexOneRow(AddResume.java:38)

            at
rd.admin.LuceneGateway.buildMapAndIndex(LuceneGateway.java:46)

            at rd.admin.LuceneGateway.indexResume(LuceneGateway.java:30)

            at
rd.admin.UploadResumeAgainstRequisition.npExecute(UploadResumeAgainstRequisi
tion.java:106)

            at np.core.BaseNPAction.execute(BaseNPAction.java:116)

            at
org.apache.struts.action.RequestProcessor.processActionPerform(RequestProces
sor.java:421)

            at
org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)

            at
org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)

            at
org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:415)

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)

            at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application
FilterChain.java:237)

            at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh
ain.java:157)

            at
org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.ja
va:75)

            at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application
FilterChain.java:186)

            at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh
ain.java:157)

            at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.ja
va:214)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContext
Valve.java:198)

            at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.ja
va:152)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalVal
ve.java:66)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssoci
ationValve.java:153)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase
.java:540)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:
54)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137
)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118
)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java
:109)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)

            at
org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)

            at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)

            at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConne
ction(Http11Protocol.java:705)

            at
org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)

            at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.jav
a:683)

            at java.lang.Thread.run(Thread.java:595)

 

 

 

Can someone please suggest a solution or even the cause of the problem?

 

Thanks in advance.

 

Regards,

Shivani

 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 05:29:42 2006
Return-Path: <java-user-return-18966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72083 invoked from network); 16 Feb 2006 05:29:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 05:29:42 -0000
Received: (qmail 6526 invoked by uid 500); 16 Feb 2006 05:29:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6496 invoked by uid 500); 16 Feb 2006 05:29:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6485 invoked by uid 99); 16 Feb 2006 05:29:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 21:29:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Feb 2006 21:29:35 -0800
Received: from shivani [61.246.2.159] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id AEBDD84007E; Thu, 16 Feb 2006 11:03:49 +0530
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: RE: ArrayIndexOutOfBoundsException while closing the index writer
Date: Thu, 16 Feb 2006 11:02:40 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <20060216044542.54285.qmail@web50306.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYytI0itOLgvjBBQGuqP8H2RamV6gAAUdvg
Message-Id: <200602161103812.SM00940@shivani>
X-IMAIL-SPAM-VALHELO: (0eb90d84007eed66)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Otis,

Thanks for such a quick reply. I tried using finally, but it didn't help.

I guess if I explain the integration of lucene with my app in little detail
then you probably can help me better.

I allow users to upload documents, which are then indexed, and search on
them. Now I am getting this error when I am trying to index the document and
particularly while closing the index writer.
If we look closely at the error log, it's giving an error at 

org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

i.e., when lucene tries to get something by the field name, 

return (FieldInfo) byName.get(fieldName);

, now what beats me is that, indexing on fields has already been done by the
time we want to close the index writer, so how come I don't get an error
while indexing, what goes wrong when I am trying to close the index writer.


Please see if you can help me with this....

Thanks in advance.

The code used for indexing is as follows:

    public void indexFile(IndexWriter indexwriter, File resumeFile)
    {
        Document document = new Document();       
        try
        {            
            File afile[] = indexDirFile.listFiles();
            boolean flag = false;

            if (afile.length <= 0)
                flag = true;
            
            indexwriter = new IndexWriter(indexDirFile, new
StandardAnalyzer(), flag);

            try
            {                
                document.add(Field.Text(IndexerColumns.contents, new
FileReader(resumeFile)));
            } catch (FileNotFoundException e)
            {
                e.printStackTrace();
                throw new MyRuntimeException(e.getMessage(), e);
            }
        
        document.add(Field.Keyword( IndexerColumns.id,
String.valueOf(mapLuceneParams.get(IndexerColumns.id)) ));

        for (int i = 0; i < this.columnInfos.length; i++)
        {
            ColumnInfo columnInfo = columnInfos[i];
            String value =
String.valueOf(mapLuceneParams.get(columnInfo.columnName));

            if (value != null)
            {
                value = value.trim();
                if (value.length() != 0)
                {
                	if (columnInfo.istokenized)
                    {                    	
                        document.add(Field.Text(columnInfo.columnName,
value));                        
                    } else
                    {
                        document.add(Field.Keyword(columnInfo.columnName,
value));
                    }
                }
            }
        }
        document.add(Field.Keyword(IndexerColumns.filePath,
String.valueOf(mapLuceneParams.get(IndexerColumns.filePath))));

        try
        {
            indexwriter.addDocument(document); 
        } catch (IOException e)
        {
            e.printStackTrace();
            throw new MyRuntimeException(e.getMessage(), e);
        } 
    
          indexwriter.close();
        } catch (IOException e)
        {   
            e.printStackTrace();
            throw new Error(e);
        }finally
        {
            if(indexwriter != null)
            {
                indexwriter.close();
            }
        }



Regards,
Shivani




-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: 16 February, 2006 10:16 AM
To: java-user@lucene.apache.org
Subject: Re: ArrayIndexOutOfBoundsException while closing the index writer

Who knows what else the app is doing.
However, I can quickly suggest that you add a finally block and close your
writer in there if writer != null.

Otis

----- Original Message ----
From: Shivani Sawhney <shivani@netedgecomputing.com>
To: java-user@lucene.apache.org
Sent: Wednesday, February 15, 2006 11:31:12 PM
Subject: ArrayIndexOutOfBoundsException while closing the index writer

Hi,

I have used Lucene in my application and am just indexing and searching on
some documents. The code that indexes the documents was working fine till
yesterday and suddenly stopped working.

I get an error when I am trying to close the index writer. The code is as
follows:

 

 

.

            IndexWriter indexwriter = new IndexWriter(indexDirFile, new
StandardAnalyzer(), flag);

            indexFile(indexwriter, resumeFile);

            indexwriter.close(); //causing errors

        } catch (IOException e)

        {   

            e.printStackTrace();

            throw new Error(e);

        }

.

 

And the error log is as follows:

 

2006-02-15 18:47:48,748 WARN  [org.apache.struts.action.RequestProcessor]
Unhandled Exception thrown: class java.lang.ArrayIndexOutOfBoundsException

2006-02-15 18:47:48,748 ERROR [org.jboss.web.localhost.Engine]
StandardWrapperValve[action]: Servlet.service() for servlet action threw
exception

java.lang.ArrayIndexOutOfBoundsException: 105 >= 25

            at java.util.Vector.elementAt(Vector.java:432)

            at
org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

            at
org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:103)

            at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:237)

            at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:169)

            at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)

            at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:425)

            at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:373)

            at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:193)

            at rd.admin.NewIndexer.indexTextFile(NewIndexer.java:108)

            at rd.admin.AddResume.indexOneRow(AddResume.java:38)

            at
rd.admin.LuceneGateway.buildMapAndIndex(LuceneGateway.java:46)

            at rd.admin.LuceneGateway.indexResume(LuceneGateway.java:30)

            at
rd.admin.UploadResumeAgainstRequisition.npExecute(UploadResumeAgainstRequisi
tion.java:106)

            at np.core.BaseNPAction.execute(BaseNPAction.java:116)

            at
org.apache.struts.action.RequestProcessor.processActionPerform(RequestProces
sor.java:421)

            at
org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)

            at
org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)

            at
org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:415)

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)

            at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application
FilterChain.java:237)

            at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh
ain.java:157)

            at
org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.ja
va:75)

            at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application
FilterChain.java:186)

            at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh
ain.java:157)

            at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.ja
va:214)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContext
Valve.java:198)

            at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.ja
va:152)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalVal
ve.java:66)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssoci
ationValve.java:153)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase
.java:540)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:
54)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137
)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118
)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java
:109)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)

            at
org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)

            at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)

            at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConne
ction(Http11Protocol.java:705)

            at
org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)

            at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.jav
a:683)

            at java.lang.Thread.run(Thread.java:595)

 

 

 

Can someone please suggest a solution or even the cause of the problem?

 

Thanks in advance.

 

Regards,

Shivani

 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 08:57:54 2006
Return-Path: <java-user-return-18967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54310 invoked from network); 16 Feb 2006 08:57:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 08:57:54 -0000
Received: (qmail 90322 invoked by uid 500); 16 Feb 2006 08:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90294 invoked by uid 500); 16 Feb 2006 08:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90283 invoked by uid 99); 16 Feb 2006 08:57:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 00:57:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 00:57:43 -0800
Received: from shivani [61.246.2.159] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id AF7814D00AA; Thu, 16 Feb 2006 14:31:44 +0530
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: NullPointerException while closing the index writer
Date: Thu, 16 Feb 2006 14:30:28 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00BB_01C63305.89B5E490"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYytI0itOLgvjBBQGuqP8H2RamV6gAAUdvgAAg02XA=
Message-Id: <200602161431750.SM00940@shivani>
X-IMAIL-SPAM-VALHELO: (3f73014d00aaf2e9)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00BB_01C63305.89B5E490
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

I couldn't fix the problem while creating an index, so I decided to clean
all the indexes from the server and try to re-index all my documents.

 

I am getting a NullPointerException, again while closing the index writer. I
don't know what I can be doing wrong while simply creating a fresh index.

 

The error log is as follows:

 

 

2006-02-16 14:19:05,368 INFO  [STDOUT] after adding document...indexwriter
is org.apache.lucene.index.IndexWriter@157566d

2006-02-16 14:19:05,368 INFO  [STDOUT] Index written...

2006-02-16 14:19:05,368 INFO  [STDOUT] before closing, index writer is
org.apache.lucene.index.IndexWriter@157566d

2006-02-16 14:19:05,368 INFO  [STDOUT] going to close index writer

2006-02-16 14:19:05,806 WARN  [org.apache.struts.action.RequestProcessor]
Unhandled Exception thrown: class java.lang.NullPointerException

2006-02-16 14:19:05,806 ERROR [org.jboss.web.localhost.Engine]
StandardWrapperValve[action]: Servlet.service() for servlet action threw
exception

java.lang.NullPointerException

      at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:195)

      at rd.admin.NewIndexer.indexTextFile(NewIndexer.java:126)

      at rd.admin.AddResume.indexOneRow(AddResume.java:38)

      at rd.admin.LuceneGateway.buildMapAndIndex(LuceneGateway.java:46)

      at
rd.admin.CreateIndexesFromCandidateTableAction.npExecute(CreateIndexesFromCa
ndidateTableAction.java:152)

      at np.core.BaseNPAction.execute(BaseNPAction.java:116)

      at
org.apache.struts.action.RequestProcessor.processActionPerform(RequestProces
sor.java:421)

      at
org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)

      at
org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)

 

 

 

Any help will be much appreciated.

Regards,

Shivani

 

 

 

-----Original Message-----
From: Shivani Sawhney [mailto:shivani@netedgecomputing.com] 
Sent: 16 February, 2006 11:03 AM
To: java-user@lucene.apache.org
Subject: RE: ArrayIndexOutOfBoundsException while closing the index writer

 

Hi Otis,

 

Thanks for such a quick reply. I tried using finally, but it didn't help.

 

I guess if I explain the integration of lucene with my app in little detail

then you probably can help me better.

 

I allow users to upload documents, which are then indexed, and search on

them. Now I am getting this error when I am trying to index the document and

particularly while closing the index writer.

If we look closely at the error log, it's giving an error at 

 

org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

 

i.e., when lucene tries to get something by the field name, 

 

return (FieldInfo) byName.get(fieldName);

 

, now what beats me is that, indexing on fields has already been done by the

time we want to close the index writer, so how come I don't get an error

while indexing, what goes wrong when I am trying to close the index writer.

 

 

Please see if you can help me with this....

 

Thanks in advance.

 

The code used for indexing is as follows:

 

    public void indexFile(IndexWriter indexwriter, File resumeFile)

    {

        Document document = new Document();       

        try

        {            

            File afile[] = indexDirFile.listFiles();

            boolean flag = false;

 

            if (afile.length <= 0)

                flag = true;

            

            indexwriter = new IndexWriter(indexDirFile, new

StandardAnalyzer(), flag);

 

            try

            {                

                document.add(Field.Text(IndexerColumns.contents, new

FileReader(resumeFile)));

            } catch (FileNotFoundException e)

            {

                e.printStackTrace();

                throw new MyRuntimeException(e.getMessage(), e);

            }

        

        document.add(Field.Keyword( IndexerColumns.id,

String.valueOf(mapLuceneParams.get(IndexerColumns.id)) ));

 

        for (int i = 0; i < this.columnInfos.length; i++)

        {

            ColumnInfo columnInfo = columnInfos[i];

            String value =

String.valueOf(mapLuceneParams.get(columnInfo.columnName));

 

            if (value != null)

            {

                value = value.trim();

                if (value.length() != 0)

                {

                  if (columnInfo.istokenized)

                    {                    

                        document.add(Field.Text(columnInfo.columnName,

value));                        

                    } else

                    {

                        document.add(Field.Keyword(columnInfo.columnName,

value));

                    }

                }

            }

        }

        document.add(Field.Keyword(IndexerColumns.filePath,

String.valueOf(mapLuceneParams.get(IndexerColumns.filePath))));

 

        try

        {

            indexwriter.addDocument(document); 

        } catch (IOException e)

        {

            e.printStackTrace();

            throw new MyRuntimeException(e.getMessage(), e);

        } 

    

          indexwriter.close();

        } catch (IOException e)

        {   

            e.printStackTrace();

            throw new Error(e);

        }finally

        {

            if(indexwriter != null)

            {

                indexwriter.close();

            }

        }

 

 

 

Regards,

Shivani

 

 

 

 

-----Original Message-----

From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 

Sent: 16 February, 2006 10:16 AM

To: java-user@lucene.apache.org

Subject: Re: ArrayIndexOutOfBoundsException while closing the index writer

 

Who knows what else the app is doing.

However, I can quickly suggest that you add a finally block and close your

writer in there if writer != null.

 

Otis

 

----- Original Message ----

From: Shivani Sawhney <shivani@netedgecomputing.com>

To: java-user@lucene.apache.org

Sent: Wednesday, February 15, 2006 11:31:12 PM

Subject: ArrayIndexOutOfBoundsException while closing the index writer

 

Hi,

 

I have used Lucene in my application and am just indexing and searching on

some documents. The code that indexes the documents was working fine till

yesterday and suddenly stopped working.

 

I get an error when I am trying to close the index writer. The code is as

follows:

 

 

 

 

 

.

 

            IndexWriter indexwriter = new IndexWriter(indexDirFile, new

StandardAnalyzer(), flag);

 

            indexFile(indexwriter, resumeFile);

 

            indexwriter.close(); //causing errors

 

        } catch (IOException e)

 

        {   

 

            e.printStackTrace();

 

            throw new Error(e);

 

        }

 

.

 

 

 

And the error log is as follows:

 

 

 

2006-02-15 18:47:48,748 WARN  [org.apache.struts.action.RequestProcessor]

Unhandled Exception thrown: class java.lang.ArrayIndexOutOfBoundsException

 

2006-02-15 18:47:48,748 ERROR [org.jboss.web.localhost.Engine]

StandardWrapperValve[action]: Servlet.service() for servlet action threw

exception

 

java.lang.ArrayIndexOutOfBoundsException: 105 >= 25

 

            at java.util.Vector.elementAt(Vector.java:432)

 

            at

org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

 

            at

org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:103)

 

            at

org.apache.lucene.index.SegmentReader.document(SegmentReader.java:237)

 

            at

org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:169)

 

            at

org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)

 

            at

org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:425)

 

            at

org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:373)

 

            at

org.apache.lucene.index.IndexWriter.close(IndexWriter.java:193)

 

            at rd.admin.NewIndexer.indexTextFile(NewIndexer.java:108)

 

            at rd.admin.AddResume.indexOneRow(AddResume.java:38)

 

            at

rd.admin.LuceneGateway.buildMapAndIndex(LuceneGateway.java:46)

 

            at rd.admin.LuceneGateway.indexResume(LuceneGateway.java:30)

 

            at

rd.admin.UploadResumeAgainstRequisition.npExecute(UploadResumeAgainstRequisi

tion.java:106)

 

            at np.core.BaseNPAction.execute(BaseNPAction.java:116)

 

            at

org.apache.struts.action.RequestProcessor.processActionPerform(RequestProces

sor.java:421)

 

            at

org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)

 

            at

org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)

 

            at

org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:415)

 

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

 

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)

 

            at

org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application

FilterChain.java:237)

 

            at

org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh

ain.java:157)

 

            at

org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.ja

va:75)

 

            at

org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application

FilterChain.java:186)

 

            at

org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh

ain.java:157)

 

            at

org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.ja

va:214)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:104)

 

            at

org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

 

            at

org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContext

Valve.java:198)

 

            at

org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.ja

va:152)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:104)

 

            at

org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalVal

ve.java:66)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssoci

ationValve.java:153)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase

.java:540)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:

54)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

 

            at

org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137

)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:104)

 

            at

org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118

)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

 

            at

org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java

:109)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:104)

 

            at

org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

 

            at

org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)

 

            at

org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)

 

            at

org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)

 

            at

org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConne

ction(Http11Protocol.java:705)

 

            at

org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)

 

            at

org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.jav

a:683)

 

            at java.lang.Thread.run(Thread.java:595)

 

 

 

 

 

 

 

Can someone please suggest a solution or even the cause of the problem?

 

 

 

Thanks in advance.

 

 

 

Regards,

 

Shivani

 

 

 

 

 

 

 

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org

 

 

 

 

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org

 


------=_NextPart_000_00BB_01C63305.89B5E490--



From java-user-return-18968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 09:02:58 2006
Return-Path: <java-user-return-18968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57058 invoked from network); 16 Feb 2006 09:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 09:02:57 -0000
Received: (qmail 98812 invoked by uid 500); 16 Feb 2006 09:02:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98790 invoked by uid 500); 16 Feb 2006 09:02:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98779 invoked by uid 99); 16 Feb 2006 09:02:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 01:02:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 01:02:49 -0800
Received: from shivani [61.246.2.159] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id A0B828B008E; Thu, 16 Feb 2006 14:37:04 +0530
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: RE: It worked---NullPointerException while closing the index writer
Date: Thu, 16 Feb 2006 14:35:47 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <200602161431750.SM00940@shivani>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcYytI0itOLgvjBBQGuqP8H2RamV6gAAUdvgAAg02XAAAE+XMA==
Message-Id: <200602161437515.SM00940@shivani>
X-IMAIL-SPAM-VALHELO: (40b3028b008ef308)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

At least the re-indexing part worked....

I just removed the finally block and the NullPointerException was solved.:
          

 if (indexwriter != null)
            {
                System.out.println("going to close index writer");
                indexwriter.close();
            }
        } catch (IOException e)
        {
            e.printStackTrace();
            throw new Error(e);
        } finally
        {
            if (indexwriter != null)
            {
                indexwriter.close();
            }
        }
    }



-----Original Message-----
From: Shivani Sawhney [mailto:shivani@netedgecomputing.com] 
Sent: 16 February, 2006 2:30 PM
To: java-user@lucene.apache.org
Subject: NullPointerException while closing the index writer

Hi,

 

I couldn't fix the problem while creating an index, so I decided to clean
all the indexes from the server and try to re-index all my documents.

 

I am getting a NullPointerException, again while closing the index writer. I
don't know what I can be doing wrong while simply creating a fresh index.

 

The error log is as follows:

 

 

2006-02-16 14:19:05,368 INFO  [STDOUT] after adding document...indexwriter
is org.apache.lucene.index.IndexWriter@157566d

2006-02-16 14:19:05,368 INFO  [STDOUT] Index written...

2006-02-16 14:19:05,368 INFO  [STDOUT] before closing, index writer is
org.apache.lucene.index.IndexWriter@157566d

2006-02-16 14:19:05,368 INFO  [STDOUT] going to close index writer

2006-02-16 14:19:05,806 WARN  [org.apache.struts.action.RequestProcessor]
Unhandled Exception thrown: class java.lang.NullPointerException

2006-02-16 14:19:05,806 ERROR [org.jboss.web.localhost.Engine]
StandardWrapperValve[action]: Servlet.service() for servlet action threw
exception

java.lang.NullPointerException

      at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:195)

      at rd.admin.NewIndexer.indexTextFile(NewIndexer.java:126)

      at rd.admin.AddResume.indexOneRow(AddResume.java:38)

      at rd.admin.LuceneGateway.buildMapAndIndex(LuceneGateway.java:46)

      at
rd.admin.CreateIndexesFromCandidateTableAction.npExecute(CreateIndexesFromCa
ndidateTableAction.java:152)

      at np.core.BaseNPAction.execute(BaseNPAction.java:116)

      at
org.apache.struts.action.RequestProcessor.processActionPerform(RequestProces
sor.java:421)

      at
org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)

      at
org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)

 

 

 

Any help will be much appreciated.

Regards,

Shivani

 

 

 

-----Original Message-----
From: Shivani Sawhney [mailto:shivani@netedgecomputing.com] 
Sent: 16 February, 2006 11:03 AM
To: java-user@lucene.apache.org
Subject: RE: ArrayIndexOutOfBoundsException while closing the index writer

 

Hi Otis,

 

Thanks for such a quick reply. I tried using finally, but it didn't help.

 

I guess if I explain the integration of lucene with my app in little detail

then you probably can help me better.

 

I allow users to upload documents, which are then indexed, and search on

them. Now I am getting this error when I am trying to index the document and

particularly while closing the index writer.

If we look closely at the error log, it's giving an error at 

 

org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

 

i.e., when lucene tries to get something by the field name, 

 

return (FieldInfo) byName.get(fieldName);

 

, now what beats me is that, indexing on fields has already been done by the

time we want to close the index writer, so how come I don't get an error

while indexing, what goes wrong when I am trying to close the index writer.

 

 

Please see if you can help me with this....

 

Thanks in advance.

 

The code used for indexing is as follows:

 

    public void indexFile(IndexWriter indexwriter, File resumeFile)

    {

        Document document = new Document();       

        try

        {            

            File afile[] = indexDirFile.listFiles();

            boolean flag = false;

 

            if (afile.length <= 0)

                flag = true;

            

            indexwriter = new IndexWriter(indexDirFile, new

StandardAnalyzer(), flag);

 

            try

            {                

                document.add(Field.Text(IndexerColumns.contents, new

FileReader(resumeFile)));

            } catch (FileNotFoundException e)

            {

                e.printStackTrace();

                throw new MyRuntimeException(e.getMessage(), e);

            }

        

        document.add(Field.Keyword( IndexerColumns.id,

String.valueOf(mapLuceneParams.get(IndexerColumns.id)) ));

 

        for (int i = 0; i < this.columnInfos.length; i++)

        {

            ColumnInfo columnInfo = columnInfos[i];

            String value =

String.valueOf(mapLuceneParams.get(columnInfo.columnName));

 

            if (value != null)

            {

                value = value.trim();

                if (value.length() != 0)

                {

                  if (columnInfo.istokenized)

                    {                    

                        document.add(Field.Text(columnInfo.columnName,

value));                        

                    } else

                    {

                        document.add(Field.Keyword(columnInfo.columnName,

value));

                    }

                }

            }

        }

        document.add(Field.Keyword(IndexerColumns.filePath,

String.valueOf(mapLuceneParams.get(IndexerColumns.filePath))));

 

        try

        {

            indexwriter.addDocument(document); 

        } catch (IOException e)

        {

            e.printStackTrace();

            throw new MyRuntimeException(e.getMessage(), e);

        } 

    

          indexwriter.close();

        } catch (IOException e)

        {   

            e.printStackTrace();

            throw new Error(e);

        }finally

        {

            if(indexwriter != null)

            {

                indexwriter.close();

            }

        }

 

 

 

Regards,

Shivani

 

 

 

 

-----Original Message-----

From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 

Sent: 16 February, 2006 10:16 AM

To: java-user@lucene.apache.org

Subject: Re: ArrayIndexOutOfBoundsException while closing the index writer

 

Who knows what else the app is doing.

However, I can quickly suggest that you add a finally block and close your

writer in there if writer != null.

 

Otis

 

----- Original Message ----

From: Shivani Sawhney <shivani@netedgecomputing.com>

To: java-user@lucene.apache.org

Sent: Wednesday, February 15, 2006 11:31:12 PM

Subject: ArrayIndexOutOfBoundsException while closing the index writer

 

Hi,

 

I have used Lucene in my application and am just indexing and searching on

some documents. The code that indexes the documents was working fine till

yesterday and suddenly stopped working.

 

I get an error when I am trying to close the index writer. The code is as

follows:

 

 

 

 

 

.

 

            IndexWriter indexwriter = new IndexWriter(indexDirFile, new

StandardAnalyzer(), flag);

 

            indexFile(indexwriter, resumeFile);

 

            indexwriter.close(); //causing errors

 

        } catch (IOException e)

 

        {   

 

            e.printStackTrace();

 

            throw new Error(e);

 

        }

 

.

 

 

 

And the error log is as follows:

 

 

 

2006-02-15 18:47:48,748 WARN  [org.apache.struts.action.RequestProcessor]

Unhandled Exception thrown: class java.lang.ArrayIndexOutOfBoundsException

 

2006-02-15 18:47:48,748 ERROR [org.jboss.web.localhost.Engine]

StandardWrapperValve[action]: Servlet.service() for servlet action threw

exception

 

java.lang.ArrayIndexOutOfBoundsException: 105 >= 25

 

            at java.util.Vector.elementAt(Vector.java:432)

 

            at

org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

 

            at

org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:103)

 

            at

org.apache.lucene.index.SegmentReader.document(SegmentReader.java:237)

 

            at

org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:169)

 

            at

org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)

 

            at

org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:425)

 

            at

org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:373)

 

            at

org.apache.lucene.index.IndexWriter.close(IndexWriter.java:193)

 

            at rd.admin.NewIndexer.indexTextFile(NewIndexer.java:108)

 

            at rd.admin.AddResume.indexOneRow(AddResume.java:38)

 

            at

rd.admin.LuceneGateway.buildMapAndIndex(LuceneGateway.java:46)

 

            at rd.admin.LuceneGateway.indexResume(LuceneGateway.java:30)

 

            at

rd.admin.UploadResumeAgainstRequisition.npExecute(UploadResumeAgainstRequisi

tion.java:106)

 

            at np.core.BaseNPAction.execute(BaseNPAction.java:116)

 

            at

org.apache.struts.action.RequestProcessor.processActionPerform(RequestProces

sor.java:421)

 

            at

org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)

 

            at

org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)

 

            at

org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:415)

 

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

 

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)

 

            at

org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application

FilterChain.java:237)

 

            at

org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh

ain.java:157)

 

            at

org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.ja

va:75)

 

            at

org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application

FilterChain.java:186)

 

            at

org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh

ain.java:157)

 

            at

org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.ja

va:214)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:104)

 

            at

org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

 

            at

org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContext

Valve.java:198)

 

            at

org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.ja

va:152)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:104)

 

            at

org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalVal

ve.java:66)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssoci

ationValve.java:153)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase

.java:540)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:

54)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

 

            at

org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137

)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:104)

 

            at

org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118

)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:102)

 

            at

org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

 

            at

org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java

:109)

 

            at

org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex

t.java:104)

 

            at

org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

 

            at

org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)

 

            at

org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)

 

            at

org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)

 

            at

org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConne

ction(Http11Protocol.java:705)

 

            at

org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)

 

            at

org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.jav

a:683)

 

            at java.lang.Thread.run(Thread.java:595)

 

 

 

 

 

 

 

Can someone please suggest a solution or even the cause of the problem?

 

 

 

Thanks in advance.

 

 

 

Regards,

 

Shivani

 

 

 

 

 

 

 

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org

 

 

 

 

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org

 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 09:41:11 2006
Return-Path: <java-user-return-18969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74029 invoked from network); 16 Feb 2006 09:41:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 09:41:10 -0000
Received: (qmail 39745 invoked by uid 500); 16 Feb 2006 09:41:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39722 invoked by uid 500); 16 Feb 2006 09:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39709 invoked by uid 99); 16 Feb 2006 09:41:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 01:41:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.194.158.131] (HELO exchange-mbx.bvdep.com) (193.194.158.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 01:41:03 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Iterating hits
Date: Thu, 16 Feb 2006 10:40:41 +0100
Message-ID: <3287125F0F0CCE4E8F55435208100CF5BDB937@exchange-mbx.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Iterating hits
Thread-Index: AcYyWZ4do/uV7L7HQsqvEgdDTe0ryQAgvSGQ
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My guess is you are using the same reader both for searching and
deleting.

The Hits class buffers the first 100 hits, and when you go beyond that,
it reruns the query to get more hits.
If you use the same reader, the searcher probably doesn't return the
same results the second time.

If different readers are used, the one for searching won't 'see' the
changes the other makes until it is closed and reopened...

Hope this helps,

Luc

-----Original Message-----
From: Daniel Cortes [mailto:dcortes@fib.upc.edu]=20
Sent: woensdag 15 februari 2006 18:59
To: 'Lucene Users List'
Subject: Iterating hits

Hi lucene users I have a strange error and I don't know to do?
My logs say this:
java.lang.ArrayIndexOutOfBoundsException: 100 >=3D 100
        at java.util.Vector.elementAt(Vector.java:431)
        at org.apache.lucene.search.Hits.hitDoc(Hits.java:127)
        at org.apache.lucene.search.Hits.doc(Hits.java:89)

my code is this
                PrefixQuery p =3D new PrefixQuery(new=20
Term("TOOL_REF_ID",getINITIAL(tool)));
                Hits h =3D sr.search(p);
                for (int i=3D0;i<h.length(); i++){
                    log.debug(h.doc(i).getField("TYPE") + "=20
"+h.doc(i).getField("TOOL_REF_ID"));
                    reader.delete(h.id(i));
                }          =20

Why? How can I do to delete all the documents that the tool_ref_if=20
begins with for example "AK"?


Searching about it I find this :
http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200306.mbox/%3C
20030630124930.1324.qmail@nagoya.betaversion.org%3E

thks for any reply.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 10:41:12 2006
Return-Path: <java-user-return-18970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97893 invoked from network); 16 Feb 2006 10:41:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 10:41:11 -0000
Received: (qmail 970 invoked by uid 500); 16 Feb 2006 10:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 894 invoked by uid 500); 16 Feb 2006 10:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 872 invoked by uid 99); 16 Feb 2006 10:41:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 02:41:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.89.10.11] (HELO denhaag.ewi.utwente.nl) (130.89.10.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 02:41:03 -0800
Received: from ewiex01.ewi.utwente.nl (ewiex02.ewi.utwente.nl [130.89.10.121])
	by denhaag.ewi.utwente.nl (8.13.1/8.13.1) with ESMTP id k1GAedIL012353
	for <java-user@lucene.apache.org>; Thu, 16 Feb 2006 11:40:40 +0100 (MET)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: BM25 Similarity implementation
Date: Thu, 16 Feb 2006 11:40:41 +0100
Message-ID: <5DD2165A95E801438DAA9C1E0957EB5E7586A9@ewiex02.dynamic.ewi.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BM25 Similarity implementation
Thread-Index: AcYy5W6itC+MHW1pSYGGLB7iWS/QFw==
From: "Trieschnigg, R.B. \(Dolf\)" <r.b.trieschnigg@ewi.utwente.nl>
To: <java-user@lucene.apache.org>
X-Spam-Score: -5.802 () ALL_TRUSTED,AWL,BAYES_00
X-Scanned-By: MIMEDefang 2.52 on 130.89.10.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0b5 (denhaag.ewi.utwente.nl [130.89.10.11]); Thu, 16 Feb 2006 11:40:40 +0100 (MET)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I would like to implement the Okapi BM25 weighting function using my own =
Similarity implementation. Unfortunately BM25 requires the document =
length in the score calculation, which is not provided by the Scorer.

Does anyone know a solution to this problem?

I've tried to find other Similarity implementations than the default one =
used by Lucene, but I could not find any... Any suggestions?

Thanks.
Dolf

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 12:21:24 2006
Return-Path: <java-user-return-18971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40023 invoked from network); 16 Feb 2006 12:21:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 12:21:24 -0000
Received: (qmail 37549 invoked by uid 500); 16 Feb 2006 12:21:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37408 invoked by uid 500); 16 Feb 2006 12:21:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37359 invoked by uid 99); 16 Feb 2006 12:21:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 04:21:16 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of david.trattnig@gmail.com designates 66.249.92.201 as permitted sender)
Received: from [66.249.92.201] (HELO uproxy.gmail.com) (66.249.92.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 04:21:13 -0800
Received: by uproxy.gmail.com with SMTP id u2so114202uge
        for <java-user@lucene.apache.org>; Thu, 16 Feb 2006 04:20:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZecK61hXXFryx4J3F5HSpaHM9RXl2j6vhM8qqGLi6xS4vvzoH+rYDk1lY0nPd6bCvf1QYdjeNlccc525F7LAn0AitfBa1P2tPk9aNNrsYxQZv2crBq6q3rT/gMFWyUpdHR3obhFy+DJSD2sgclbJTY/1o/wUD+zhmJ+ky5pfCFQ=
Received: by 10.66.252.13 with SMTP id z13mr632362ugh;
        Thu, 16 Feb 2006 04:20:51 -0800 (PST)
Received: by 10.66.237.3 with HTTP; Thu, 16 Feb 2006 04:20:51 -0800 (PST)
Message-ID: <f4f104340602160420ic84f07br9552638dcc3b2d7d@mail.gmail.com>
Date: Thu, 16 Feb 2006 13:20:51 +0100
From: David Trattnig <david.trattnig@gmail.com>
To: java-user@lucene.apache.org
Subject: Search environment: the best choice
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18026_4436861.1140092451551"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_18026_4436861.1140092451551
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I've following constellation (planned architecture):

[Webserver - APACHE]
which serves the content

[unspecified other servers]

[CMS Server / SearchEngine - TOMCAT]
handles the content creation and publishing to the webserver
indexing of content stored at the apache-machine


The tomcat-machine should index the APACHE and maybe some other servers by
cronjob. search requests from the webserver are forwarded to the search
engine at the tomcat-machine.

Indexing HTML-files have priority - PDF, Word and stuff like that would be
very nice.


1.) Which search engine (means lucene implementation) would be the best
choice for such a situation? In other words: what's the difference?
          - Lucene
          - Nutch

2.) Are there other search engines which are better for solving this issue?
3.) Do I have to write my own indexer (which is parsing html, pdf...) or ar=
e
there usefull templates/indexers available?
4.) Does anybody know a free alternative (for commercial use) to Zilverline
(http://www.zilverline.org/)?

TIA,
david

------=_Part_18026_4436861.1140092451551--

From java-user-return-18972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 17:26:32 2006
Return-Path: <java-user-return-18972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40476 invoked from network); 16 Feb 2006 17:26:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 17:26:28 -0000
Received: (qmail 39486 invoked by uid 500); 16 Feb 2006 17:26:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39173 invoked by uid 500); 16 Feb 2006 17:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39162 invoked by uid 99); 16 Feb 2006 17:26:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 09:26:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 09:26:16 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Thu, 16 Feb 2006 10:25:53 -0700
Message-ID: <43F4B549.3050409@allegromedical.com>
Date: Thu, 16 Feb 2006 10:24:25 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene Query ... understanding
References: <f4f104340602160420ic84f07br9552638dcc3b2d7d@mail.gmail.com>
In-Reply-To: <f4f104340602160420ic84f07br9552638dcc3b2d7d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Am just trying to see if i understand the lucene query below correctly.

+(+contentNew:radio +contentNew:mp3) +entity:product +(name:radio 
mp3^4.0 (contentNew:radio contentNew:mp3) contentNew:radio mp3^2.0)

Let me see if can understand the above query correctly:

1. the contentNew field has the word "radio" AND the word "mp3"
AND
2. the entity field has the word "product"
AND
3. the phrase "radio mp3" is in field name boosted by 4 OR the word 
"radio" is in the field contentNew OR the word "mp3 is in the field 
contentNew OR the phrase "radio mp3" is in the field contentNew boosted by 2

(I am trying to understand the above query in terms of ANDs, ORs, 
Groupings and boosting as opposed to prohibited and required)

Am I correct in my understanding?

Thanks,





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 18:04:33 2006
Return-Path: <java-user-return-18973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68325 invoked from network); 16 Feb 2006 18:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 18:04:33 -0000
Received: (qmail 22785 invoked by uid 500); 16 Feb 2006 18:04:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22754 invoked by uid 500); 16 Feb 2006 18:04:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22742 invoked by uid 99); 16 Feb 2006 18:04:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 10:04:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 10:04:25 -0800
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net [207.115.4.22])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k1GI44VT021674
	for <java-user@lucene.apache.org>; Thu, 16 Feb 2006 13:04:04 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net [69.228.231.148])
	by pimout6-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id k1GI43Qo072190;
	Thu, 16 Feb 2006 13:04:03 -0500
Message-ID: <43F4BE92.9000506@apache.org>
Date: Thu, 16 Feb 2006 10:04:02 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: BM25 Similarity implementation
References: <5DD2165A95E801438DAA9C1E0957EB5E7586A9@ewiex02.dynamic.ewi.utwente.nl>
In-Reply-To: <5DD2165A95E801438DAA9C1E0957EB5E7586A9@ewiex02.dynamic.ewi.utwente.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Trieschnigg, R.B. (Dolf) wrote:
> I would like to implement the Okapi BM25 weighting function using my own Similarity implementation. Unfortunately BM25 requires the document length in the score calculation, which is not provided by the Scorer.

How do you want to measure document length?  If the number of tokens is 
an acceptable measure, then the norm contains sqrt(numTokens) by 
default.  You can modify your Similarity.lengthNorm() implementation to 
not perform the sqrt, or square the norm.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 18:29:47 2006
Return-Path: <java-user-return-18974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90973 invoked from network); 16 Feb 2006 18:29:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 18:29:46 -0000
Received: (qmail 73023 invoked by uid 500); 16 Feb 2006 18:29:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72855 invoked by uid 500); 16 Feb 2006 18:29:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72760 invoked by uid 99); 16 Feb 2006 18:29:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 10:29:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Feb 2006 10:29:21 -0800
Received: (qmail 16619 invoked by uid 0); 16 Feb 2006 18:28:59 -0000
Received: from 193.63.235.44 by www083.gmx.net with HTTP;
	Thu, 16 Feb 2006 19:28:59 +0100 (MET)
Date: Thu, 16 Feb 2006 19:28:59 +0100 (MET)
From: "Karl Koch" <TheRanger@gmx.net>
To: "User " <java-user@lucene.apache.org>,
 "Developer " <lucene-dev@jakarta.apache.org>
MIME-Version: 1.0
Subject: Vector Space Model <-> Probabilistic Model
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <22755.1140114539@www083.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am looking for a comparison between the theoretical Vector Space Model and
the theoretical Probabilistic Model in Information Retrieval. I know that
comcrete implementations do differ from that. However, I am looking for
papers that compare the performance of both in particular applications.

Does anybody know about good books that focus on this matter?

Karl

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 18:31:18 2006
Return-Path: <java-user-return-18975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92697 invoked from network); 16 Feb 2006 18:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 18:31:18 -0000
Received: (qmail 79313 invoked by uid 500); 16 Feb 2006 18:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79287 invoked by uid 500); 16 Feb 2006 18:31:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79276 invoked by uid 99); 16 Feb 2006 18:31:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 10:31:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 10:31:10 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E04095B764; Thu, 16 Feb 2006 10:30:42 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D522D7F403
	for <java-user@lucene.apache.org>; Thu, 16 Feb 2006 10:30:42 -0800 (PST)
Date: Thu, 16 Feb 2006 10:30:42 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Query ... understanding
In-Reply-To: <43F4B549.3050409@allegromedical.com>
Message-ID: <Pine.LNX.4.58.0602161007560.32525@hal.rescomp.berkeley.edu>
References: <f4f104340602160420ic84f07br9552638dcc3b2d7d@mail.gmail.com>
 <43F4B549.3050409@allegromedical.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Am just trying to see if i understand the lucene query below correctly.
:
: +(+contentNew:radio +contentNew:mp3) +entity:product +(name:radio
: mp3^4.0 (contentNew:radio contentNew:mp3) contentNew:radio mp3^2.0)
:
: Let me see if can understand the above query correctly:

your interpretation isn't quite right -- you are assuming
phrases in cases where there aren't any.  just because there is no field
name in front of a word, doesn't mean that word is a continuation of a
phrase from the previously mentioned field -- it is a term query on
whatever the default field for the index is.

think of your query as expressing...

  REQUIRED:
     REQUIRED: contentNew:radio    w/score boost of 1.0
     REQUIRED: contentNew:mp3      w/score boost of 1.0
  REQUIRED: entitiy:product        w/score boost of 1.0
  REQUIRED:
     SHOULD: name:radio            w/score boost of 1.0
     SHOULD: defaultField:mp3      w/score boost of 4.0
     SHOULD:
        SHOULD: contentNew:radio   w/score boost of 1.0
        SHOULD: contentNew:mp3     w/score boost of 1.0
     SHOULD: contentNew:radio      w/score boost of 1.0
     SHOULD: defaultField:mp3      w/score boost of 2.0

if you want to ignore the scores, and just talk about what documents will
match, then it's simplified representation is ...

   contentNew:radio AND contentNew:mp3 AND entitiy:product AND
   (name:radio OR defaultField:mp3)

: (I am trying to understand the above query in terms of ANDs, ORs,
: Groupings and boosting as opposed to prohibited and required)

I would strongely recommend you embrace the idea of
prohibited/required/optional, it's a much more general way to think
about queries.  Any query can be expressed in terms of nested
groupings of require, prohibited, and optional clauses -- But it's not
always possible to take a query and express it in simple AND/OR/NOT
boolean logic (which is one of the reasons why i had the fact that the
class is called "BooleanQuery")

Consider this query:      foo:cat +bar:dog

...the closest boolean logic representation of this query that exists is:

	bar:dog

ie, the only documents that contain the term bar:dog match -- but that
doesn't allow you to express the impacts of the foo:cat clause will have
on the scores of the documents.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 18:40:38 2006
Return-Path: <java-user-return-18976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1320 invoked from network); 16 Feb 2006 18:40:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 18:40:36 -0000
Received: (qmail 2474 invoked by uid 500); 16 Feb 2006 18:40:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2423 invoked by uid 500); 16 Feb 2006 18:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2398 invoked by uid 99); 16 Feb 2006 18:40:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 10:40:24 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.179.220] (HELO web36106.mail.mud.yahoo.com) (66.163.179.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Feb 2006 10:40:23 -0800
Received: (qmail 75398 invoked by uid 60001); 16 Feb 2006 18:40:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=p17dWHlbKUXBvqTpSBSHZspNTutoWU8eVTN3ASd5d3rDddgrjUHja1WUIBFwj0D4+Yx3jXN4P5zsUuRZuHbZ9/A8PWuP568qP8YPq7Bbd+bDZBWv1LTrdqjjaFzfX4cBIT6MCMWu0CxWkTF/j5RtXbJDjzqfLztW+c7HcCfE0/0=  ;
Message-ID: <20060216184003.75396.qmail@web36106.mail.mud.yahoo.com>
Received: from [210.214.70.116] by web36106.mail.mud.yahoo.com via HTTP; Thu, 16 Feb 2006 10:40:03 PST
Date: Thu, 16 Feb 2006 10:40:03 -0800 (PST)
From: revati joshi <revati_joshi83@yahoo.com>
Subject: updating index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1083735714-1140115203=:69784"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1083735714-1140115203=:69784
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
       i hve tried updating lucene index using Hibernate lifecycle class but not able to get the implementation of this class.
  www.hibernate.org - Using Lifecycles and Interceptors to update Lucene searches.htm
  The onSave(),onUpdate() method has got the Session parameter which is to passed while invoking it.
  i'm not able to get idea about Session parameter.How do i pass Session parameter to it.Since i hve created GUI using java swing n awt components,so how n where do i invoke these methods n Session parameter.
  Is it proper if i do with Multithreading concept which will continuously do indexing in the background in order to make updation in indexing.
  Plz suggest some solution to this problem as soon as possible.
  Thnks for ur cooperation in advance.
                                                 with regards,
                                                  Revati.
   

			
---------------------------------
 Yahoo! Mail
 Use Photomail to share photos without annoying attachments.
--0-1083735714-1140115203=:69784--

From java-user-return-18977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 19:19:36 2006
Return-Path: <java-user-return-18977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24981 invoked from network); 16 Feb 2006 19:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 19:19:34 -0000
Received: (qmail 81870 invoked by uid 500); 16 Feb 2006 19:19:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81759 invoked by uid 500); 16 Feb 2006 19:19:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81698 invoked by uid 99); 16 Feb 2006 19:19:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:19:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:19:22 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14F382B8@mailer.syr.edu>; Thu, 16 Feb 2006 14:19:01 -0500
Message-ID: <43F4D026.6010203@syr.edu>
Date: Thu, 16 Feb 2006 14:19:02 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Vector Space Model <-> Probabilistic Model
References: <22755.1140114539@www083.gmx.net>
In-Reply-To: <22755.1140114539@www083.gmx.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You may find some useful reading at:
http://wiki.apache.org/jakarta-lucene/InformationRetrieval

Karl Koch wrote:
> I am looking for a comparison between the theoretical Vector Space Model and
> the theoretical Probabilistic Model in Information Retrieval. I know that
> comcrete implementations do differ from that. However, I am looking for
> papers that compare the performance of both in particular applications.
>
> Does anybody know about good books that focus on this matter?
>
> Karl
>
>   

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 19:23:38 2006
Return-Path: <java-user-return-18978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27373 invoked from network); 16 Feb 2006 19:23:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 19:23:37 -0000
Received: (qmail 89360 invoked by uid 500); 16 Feb 2006 19:23:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89313 invoked by uid 500); 16 Feb 2006 19:23:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89282 invoked by uid 99); 16 Feb 2006 19:23:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:23:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:23:21 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14F38389@mailer.syr.edu>; Thu, 16 Feb 2006 14:23:00 -0500
Message-ID: <43F4D114.7020301@syr.edu>
Date: Thu, 16 Feb 2006 14:23:00 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: updating index
References: <20060216184003.75396.qmail@web36106.mail.mud.yahoo.com>
In-Reply-To: <20060216184003.75396.qmail@web36106.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Revati,

This sounds like a Hibernate problem, I suggest you refer to their 
documentation and forum.

-Grant

revati joshi wrote:
> Hi,
>        i hve tried updating lucene index using Hibernate lifecycle class but not able to get the implementation of this class.
>   www.hibernate.org - Using Lifecycles and Interceptors to update Lucene searches.htm
>   The onSave(),onUpdate() method has got the Session parameter which is to passed while invoking it.
>   i'm not able to get idea about Session parameter.How do i pass Session parameter to it.Since i hve created GUI using java swing n awt components,so how n where do i invoke these methods n Session parameter.
>   Is it proper if i do with Multithreading concept which will continuously do indexing in the background in order to make updation in indexing.
>   Plz suggest some solution to this problem as soon as possible.
>   Thnks for ur cooperation in advance.
>                                                  with regards,
>                                                   Revati.
>    
>
> 			
> ---------------------------------
>  Yahoo! Mail
>  Use Photomail to share photos without annoying attachments.
>   

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 19:43:45 2006
Return-Path: <java-user-return-18979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44821 invoked from network); 16 Feb 2006 19:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 19:43:45 -0000
Received: (qmail 29563 invoked by uid 500); 16 Feb 2006 19:43:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29539 invoked by uid 500); 16 Feb 2006 19:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29528 invoked by uid 99); 16 Feb 2006 19:43:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:43:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:43:35 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Thu, 16 Feb 2006 12:43:10 -0700
Message-ID: <43F4D575.7030804@allegromedical.com>
Date: Thu, 16 Feb 2006 12:41:41 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Strange Problem ... Luke returns results Lucene api does not.
References: <f4f104340602160420ic84f07br9552638dcc3b2d7d@mail.gmail.com> <43F4B549.3050409@allegromedical.com> <Pine.LNX.4.58.0602161007560.32525@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0602161007560.32525@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a query that gets hits via luke. I can see the documents it 
finds. But when I run the same query via my java code it returns 0 hits.

Note:
1. I am using standard analyzer while indexing and searching.
2. I have made sure that I am querying the same index via luke or 
through my java program.

This is the call I make in my java code.
        BooleanQuery finalQuery = new BooleanQuery();
        .....
        .....
        log.debug(finalQuery.toString());

        hits = 
IndexSearcherManager.getIndexSearcher(indexPath).search(finalQuery);    
       

        log.debug("Hits length = " + hits.length());

The output of the first log statement above is:

+(+contentNew:Wireless +contentNew:fm +contentNew:car 
+contentNew:transmitter) +entity:category +(name:Wireless fm car 
transmitter^40.0 ((name:Wireless name:fm name:car 
name:transmitter)^10.0) contentNew:Wireless fm car transmitter^20.0 
(contentNew:Wireless contentNew:fm contentNew:car contentNew:transmitter))

The output of the second log statement above is:

Hits length = 0

I run the above query against the same index via Luke and I get search 
results that I expected.

Any ideas as to why my java call does not return any hits? how i might 
be able to debug this?

Thanks,


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 19:46:58 2006
Return-Path: <java-user-return-18980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47218 invoked from network); 16 Feb 2006 19:46:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 19:46:58 -0000
Received: (qmail 37398 invoked by uid 500); 16 Feb 2006 19:46:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37376 invoked by uid 500); 16 Feb 2006 19:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37364 invoked by uid 99); 16 Feb 2006 19:46:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:46:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:46:51 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D7F5433D229; Thu, 16 Feb 2006 14:46:30 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E330033D201
	for <java-user@lucene.apache.org>; Thu, 16 Feb 2006 14:46:27 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43F4D575.7030804@allegromedical.com>
References: <f4f104340602160420ic84f07br9552638dcc3b2d7d@mail.gmail.com> <43F4B549.3050409@allegromedical.com> <Pine.LNX.4.58.0602161007560.32525@hal.rescomp.berkeley.edu> <43F4D575.7030804@allegromedical.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5B11C498-3B98-4523-BCDD-E4EDDC88E9ED@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Strange Problem ... Luke returns results Lucene api does not.
Date: Thu, 16 Feb 2006 14:46:22 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How are you constructing your BooleanQuery and what Analyzer are you  
using with Luke?   You have some capitalized words in your query, and  
most analyzers would lowercase those, which may be the issue (perhaps  
you indexed the capitalized words?).

	Erik

On Feb 16, 2006, at 2:41 PM, Mufaddal Khumri wrote:

> Hi,
>
> I have a query that gets hits via luke. I can see the documents it  
> finds. But when I run the same query via my java code it returns 0  
> hits.
>
> Note:
> 1. I am using standard analyzer while indexing and searching.
> 2. I have made sure that I am querying the same index via luke or  
> through my java program.
>
> This is the call I make in my java code.
>        BooleanQuery finalQuery = new BooleanQuery();
>        .....
>        .....
>        log.debug(finalQuery.toString());
>
>        hits = IndexSearcherManager.getIndexSearcher 
> (indexPath).search(finalQuery);
>        log.debug("Hits length = " + hits.length());
>
> The output of the first log statement above is:
>
> +(+contentNew:Wireless +contentNew:fm +contentNew:car  
> +contentNew:transmitter) +entity:category +(name:Wireless fm car  
> transmitter^40.0 ((name:Wireless name:fm name:car name:transmitter) 
> ^10.0) contentNew:Wireless fm car transmitter^20.0  
> (contentNew:Wireless contentNew:fm contentNew:car  
> contentNew:transmitter))
>
> The output of the second log statement above is:
>
> Hits length = 0
>
> I run the above query against the same index via Luke and I get  
> search results that I expected.
>
> Any ideas as to why my java call does not return any hits? how i  
> might be able to debug this?
>
> Thanks,
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 19:54:14 2006
Return-Path: <java-user-return-18981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51291 invoked from network); 16 Feb 2006 19:54:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 19:54:13 -0000
Received: (qmail 50686 invoked by uid 500); 16 Feb 2006 19:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50661 invoked by uid 500); 16 Feb 2006 19:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50650 invoked by uid 99); 16 Feb 2006 19:54:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:54:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:54:06 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Thu, 16 Feb 2006 12:53:45 -0700
Message-ID: <43F4D7F0.2010803@allegromedical.com>
Date: Thu, 16 Feb 2006 12:52:16 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Strange Problem ... Luke returns results Lucene api does not.
References: <f4f104340602160420ic84f07br9552638dcc3b2d7d@mail.gmail.com> <43F4B549.3050409@allegromedical.com> <Pine.LNX.4.58.0602161007560.32525@hal.rescomp.berkeley.edu> <43F4D575.7030804@allegromedical.com> <5B11C498-3B98-4523-BCDD-E4EDDC88E9ED@ehatchersolutions.com>
In-Reply-To: <5B11C498-3B98-4523-BCDD-E4EDDC88E9ED@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am using the standard analyzer with luke.

Standard analyzer lower cases while indexing and searching.

The BooleanQuery, finalQuery.toString() in my case below is:

+(+contentNew:wireless +contentNew:fm +contentNew:car 
+contentNew:transmitter) +entity:product +(name:wireless fm car 
transmitter^40.0 ((name:wireless name:fm name:car 
name:transmitter)^10.0) contentNew:wireless fm car transmitter^20.0 
(contentNew:wireless contentNew:fm contentNew:car contentNew:transmitter))

OR

+(+contentNew:Wireless +contentNew:fm +contentNew:car  
+contentNew:transmitter) +entity:category +(name:Wireless fm car  
transmitter^40.0 ((name:Wireless name:fm name:car name:transmitter) 
^10.0) contentNew:Wireless fm car transmitter^20.0  (contentNew:Wireless 
contentNew:fm contentNew:car  contentNew:transmitter))

work in Luke just fine. I am using the StandardAnalyzer in Luke.

But when i try to execute the above boolean query via a call to 
IndexSearcher.search(finalQuery) it returns no hits.

Erik Hatcher wrote:

> How are you constructing your BooleanQuery and what Analyzer are you  
> using with Luke?   You have some capitalized words in your query, and  
> most analyzers would lowercase those, which may be the issue (perhaps  
> you indexed the capitalized words?).
>
>     Erik
>
> On Feb 16, 2006, at 2:41 PM, Mufaddal Khumri wrote:
>
>> Hi,
>>
>> I have a query that gets hits via luke. I can see the documents it  
>> finds. But when I run the same query via my java code it returns 0  
>> hits.
>>
>> Note:
>> 1. I am using standard analyzer while indexing and searching.
>> 2. I have made sure that I am querying the same index via luke or  
>> through my java program.
>>
>> This is the call I make in my java code.
>>        BooleanQuery finalQuery = new BooleanQuery();
>>        .....
>>        .....
>>        log.debug(finalQuery.toString());
>>
>>        hits = IndexSearcherManager.getIndexSearcher 
>> (indexPath).search(finalQuery);
>>        log.debug("Hits length = " + hits.length());
>>
>> The output of the first log statement above is:
>>
>> +(+contentNew:Wireless +contentNew:fm +contentNew:car  
>> +contentNew:transmitter) +entity:category +(name:Wireless fm car  
>> transmitter^40.0 ((name:Wireless name:fm name:car name:transmitter) 
>> ^10.0) contentNew:Wireless fm car transmitter^20.0  
>> (contentNew:Wireless contentNew:fm contentNew:car  
>> contentNew:transmitter))
>>
>> The output of the second log statement above is:
>>
>> Hits length = 0
>>
>> I run the above query against the same index via Luke and I get  
>> search results that I expected.
>>
>> Any ideas as to why my java call does not return any hits? how i  
>> might be able to debug this?
>>
>> Thanks,
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 19:59:25 2006
Return-Path: <java-user-return-18982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55342 invoked from network); 16 Feb 2006 19:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 19:59:24 -0000
Received: (qmail 59185 invoked by uid 500); 16 Feb 2006 19:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59052 invoked by uid 500); 16 Feb 2006 19:59:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59041 invoked by uid 99); 16 Feb 2006 19:59:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:59:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 11:59:17 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3DE305B764; Thu, 16 Feb 2006 11:58:57 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3A6CC7F403
	for <java-user@lucene.apache.org>; Thu, 16 Feb 2006 11:58:57 -0800 (PST)
Date: Thu, 16 Feb 2006 11:58:57 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Strange Problem ... Luke returns results Lucene api does not.
In-Reply-To: <43F4D7F0.2010803@allegromedical.com>
Message-ID: <Pine.LNX.4.58.0602161156040.5126@hal.rescomp.berkeley.edu>
References: <f4f104340602160420ic84f07br9552638dcc3b2d7d@mail.gmail.com>
 <43F4B549.3050409@allegromedical.com> <Pine.LNX.4.58.0602161007560.32525@hal.rescomp.berkeley.edu>
 <43F4D575.7030804@allegromedical.com> <5B11C498-3B98-4523-BCDD-E4EDDC88E9ED@ehatchersolutions.com>
 <43F4D7F0.2010803@allegromedical.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Standard analyzer lower cases while indexing and searching.

Correct, but since the toString() of your query still has capital words in
it (like "contentNew:Wireless") you obviously didn't build this query
using the StandardAnalyzer -- IndexSearcher doesn't apply any Analyzers
for you when you search -- it's the responsability of whatever is
constructing your query (be that custom code you've written, or
QueryParser) to run the input thoguh the appropraite Analyzer.

when you paste that query into Luke, it *does* run it through the
QueryParser for you -- so the text gets analyzed and lower cased.



:
: The BooleanQuery, finalQuery.toString() in my case below is:
:
: +(+contentNew:wireless +contentNew:fm +contentNew:car
: +contentNew:transmitter) +entity:product +(name:wireless fm car
: transmitter^40.0 ((name:wireless name:fm name:car
: name:transmitter)^10.0) contentNew:wireless fm car transmitter^20.0
: (contentNew:wireless contentNew:fm contentNew:car contentNew:transmitter))
:
: OR
:
: +(+contentNew:Wireless +contentNew:fm +contentNew:car
: +contentNew:transmitter) +entity:category +(name:Wireless fm car
: transmitter^40.0 ((name:Wireless name:fm name:car name:transmitter)
: ^10.0) contentNew:Wireless fm car transmitter^20.0  (contentNew:Wireless
: contentNew:fm contentNew:car  contentNew:transmitter))
:
: work in Luke just fine. I am using the StandardAnalyzer in Luke.
:
: But when i try to execute the above boolean query via a call to
: IndexSearcher.search(finalQuery) it returns no hits.
:
: Erik Hatcher wrote:
:
: > How are you constructing your BooleanQuery and what Analyzer are you
: > using with Luke?   You have some capitalized words in your query, and
: > most analyzers would lowercase those, which may be the issue (perhaps
: > you indexed the capitalized words?).
: >
: >     Erik
: >
: > On Feb 16, 2006, at 2:41 PM, Mufaddal Khumri wrote:
: >
: >> Hi,
: >>
: >> I have a query that gets hits via luke. I can see the documents it
: >> finds. But when I run the same query via my java code it returns 0
: >> hits.
: >>
: >> Note:
: >> 1. I am using standard analyzer while indexing and searching.
: >> 2. I have made sure that I am querying the same index via luke or
: >> through my java program.
: >>
: >> This is the call I make in my java code.
: >>        BooleanQuery finalQuery = new BooleanQuery();
: >>        .....
: >>        .....
: >>        log.debug(finalQuery.toString());
: >>
: >>        hits = IndexSearcherManager.getIndexSearcher
: >> (indexPath).search(finalQuery);
: >>        log.debug("Hits length = " + hits.length());
: >>
: >> The output of the first log statement above is:
: >>
: >> +(+contentNew:Wireless +contentNew:fm +contentNew:car
: >> +contentNew:transmitter) +entity:category +(name:Wireless fm car
: >> transmitter^40.0 ((name:Wireless name:fm name:car name:transmitter)
: >> ^10.0) contentNew:Wireless fm car transmitter^20.0
: >> (contentNew:Wireless contentNew:fm contentNew:car
: >> contentNew:transmitter))
: >>
: >> The output of the second log statement above is:
: >>
: >> Hits length = 0
: >>
: >> I run the above query against the same index via Luke and I get
: >> search results that I expected.
: >>
: >> Any ideas as to why my java call does not return any hits? how i
: >> might be able to debug this?
: >>
: >> Thanks,
: >>
: >>
: >> ---------------------------------------------------------------------
: >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: >> For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 20:02:46 2006
Return-Path: <java-user-return-18983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57547 invoked from network); 16 Feb 2006 20:02:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 20:02:46 -0000
Received: (qmail 63063 invoked by uid 500); 16 Feb 2006 20:02:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63036 invoked by uid 500); 16 Feb 2006 20:02:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63022 invoked by uid 99); 16 Feb 2006 20:02:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 12:02:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 12:02:39 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Thu, 16 Feb 2006 13:02:16 -0700
Message-ID: <43F4D9EF.8040809@allegromedical.com>
Date: Thu, 16 Feb 2006 13:00:47 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Strange Problem ... Luke returns results Lucene api does not.
References: <f4f104340602160420ic84f07br9552638dcc3b2d7d@mail.gmail.com> <43F4B549.3050409@allegromedical.com> <Pine.LNX.4.58.0602161007560.32525@hal.rescomp.berkeley.edu> <43F4D575.7030804@allegromedical.com> <5B11C498-3B98-4523-BCDD-E4EDDC88E9ED@ehatchersolutions.com> <43F4D7F0.2010803@allegromedical.com> <Pine.LNX.4.58.0602161156040.5126@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0602161156040.5126@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes. thats exactly the problem. I just found out that analyzer was not 
being set correctly.

Thanks,

Chris Hostetter wrote:

>: Standard analyzer lower cases while indexing and searching.
>
>Correct, but since the toString() of your query still has capital words in
>it (like "contentNew:Wireless") you obviously didn't build this query
>using the StandardAnalyzer -- IndexSearcher doesn't apply any Analyzers
>for you when you search -- it's the responsability of whatever is
>constructing your query (be that custom code you've written, or
>QueryParser) to run the input thoguh the appropraite Analyzer.
>
>when you paste that query into Luke, it *does* run it through the
>QueryParser for you -- so the text gets analyzed and lower cased.
>
>
>
>:
>: The BooleanQuery, finalQuery.toString() in my case below is:
>:
>: +(+contentNew:wireless +contentNew:fm +contentNew:car
>: +contentNew:transmitter) +entity:product +(name:wireless fm car
>: transmitter^40.0 ((name:wireless name:fm name:car
>: name:transmitter)^10.0) contentNew:wireless fm car transmitter^20.0
>: (contentNew:wireless contentNew:fm contentNew:car contentNew:transmitter))
>:
>: OR
>:
>: +(+contentNew:Wireless +contentNew:fm +contentNew:car
>: +contentNew:transmitter) +entity:category +(name:Wireless fm car
>: transmitter^40.0 ((name:Wireless name:fm name:car name:transmitter)
>: ^10.0) contentNew:Wireless fm car transmitter^20.0  (contentNew:Wireless
>: contentNew:fm contentNew:car  contentNew:transmitter))
>:
>: work in Luke just fine. I am using the StandardAnalyzer in Luke.
>:
>: But when i try to execute the above boolean query via a call to
>: IndexSearcher.search(finalQuery) it returns no hits.
>:
>: Erik Hatcher wrote:
>:
>: > How are you constructing your BooleanQuery and what Analyzer are you
>: > using with Luke?   You have some capitalized words in your query, and
>: > most analyzers would lowercase those, which may be the issue (perhaps
>: > you indexed the capitalized words?).
>: >
>: >     Erik
>: >
>: > On Feb 16, 2006, at 2:41 PM, Mufaddal Khumri wrote:
>: >
>: >> Hi,
>: >>
>: >> I have a query that gets hits via luke. I can see the documents it
>: >> finds. But when I run the same query via my java code it returns 0
>: >> hits.
>: >>
>: >> Note:
>: >> 1. I am using standard analyzer while indexing and searching.
>: >> 2. I have made sure that I am querying the same index via luke or
>: >> through my java program.
>: >>
>: >> This is the call I make in my java code.
>: >>        BooleanQuery finalQuery = new BooleanQuery();
>: >>        .....
>: >>        .....
>: >>        log.debug(finalQuery.toString());
>: >>
>: >>        hits = IndexSearcherManager.getIndexSearcher
>: >> (indexPath).search(finalQuery);
>: >>        log.debug("Hits length = " + hits.length());
>: >>
>: >> The output of the first log statement above is:
>: >>
>: >> +(+contentNew:Wireless +contentNew:fm +contentNew:car
>: >> +contentNew:transmitter) +entity:category +(name:Wireless fm car
>: >> transmitter^40.0 ((name:Wireless name:fm name:car name:transmitter)
>: >> ^10.0) contentNew:Wireless fm car transmitter^20.0
>: >> (contentNew:Wireless contentNew:fm contentNew:car
>: >> contentNew:transmitter))
>: >>
>: >> The output of the second log statement above is:
>: >>
>: >> Hits length = 0
>: >>
>: >> I run the above query against the same index via Luke and I get
>: >> search results that I expected.
>: >>
>: >> Any ideas as to why my java call does not return any hits? how i
>: >> might be able to debug this?
>: >>
>: >> Thanks,
>: >>
>: >>
>: >> ---------------------------------------------------------------------
>: >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>: >> For additional commands, e-mail: java-user-help@lucene.apache.org
>: >
>: >
>: >
>: > ---------------------------------------------------------------------
>: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>: > For additional commands, e-mail: java-user-help@lucene.apache.org
>: >
>:
>:
>: ---------------------------------------------------------------------
>: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>: For additional commands, e-mail: java-user-help@lucene.apache.org
>:
>
>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 16 23:59:39 2006
Return-Path: <java-user-return-18984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96215 invoked from network); 16 Feb 2006 23:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Feb 2006 23:59:39 -0000
Received: (qmail 70110 invoked by uid 500); 16 Feb 2006 23:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70084 invoked by uid 500); 16 Feb 2006 23:59:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70073 invoked by uid 99); 16 Feb 2006 23:59:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 15:59:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 15:59:29 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A2AC95B764; Thu, 16 Feb 2006 15:59:00 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 87E0A7F403
	for <java-user@lucene.apache.org>; Thu, 16 Feb 2006 15:59:00 -0800 (PST)
Date: Thu, 16 Feb 2006 15:59:00 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Similarity Usage: tf(int) vs tf(float)
Message-ID: <Pine.LNX.4.58.0602161534080.15192@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I've been working on my own custom similarity lately, to take advantage of
some content domain knowledge.

One of the things that never really made sense to me before about the
Similarity class was the existence of the two tf methods...

   public abstract float tf(float freq);
   public float tf(int freq) { return tf((float)freq); }

...but today it finally hit me, someone pelase correct me If I'm wrong...

* tf(int) is what Scorers should use when looking at the frequencies of
  "stuff" in whole numebrs -- ie: in TermQuery where the question is "how
  many times does this term appear in the field?"

* tf(float) is what Scorers should use when looking at the frequencies
  of of "stuff" which can exist in partial states, and thus be represented
  as a fraction -- ie: in a sloppy PhraseQuery where the question is "how
  often does something aproximating this phrase appear?"

While Scorers of "sloppy" queries should use Similarty.slopyFreq(int) to
determine the (float)freq value to be used for each instance of a sloppy
match (based on the edit distance of that match), those Scorers should
pass the *sum* of the sloppyFreq for each match to tf(float).

Which means when writting your own Similarity you have to be careful to
consider what tf(float) returns not just on input between 0.0 and 1.0, but
also above 1.0 (because multiple exact or partial matches could reqult in
a sum(phraseFreq) > 1.0

But both tf(int) and tf(float) should return 0.0 when their input is 0,
otherwise non-matching results will get a positive score.


	Have I (over|under|mis)stated anything?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 04:17:58 2006
Return-Path: <java-user-return-18985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46889 invoked from network); 17 Feb 2006 04:17:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 04:17:58 -0000
Received: (qmail 86708 invoked by uid 500); 17 Feb 2006 04:17:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86616 invoked by uid 500); 17 Feb 2006 04:17:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86582 invoked by uid 99); 17 Feb 2006 04:17:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 20:17:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 20:17:44 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 877FEB735C
	for <java-user@lucene.apache.org>; Fri, 17 Feb 2006 15:17:21 +1100 (EST)
Message-ID: <43F54E2E.7030106@nuix.com.au>
Date: Fri, 17 Feb 2006 15:16:46 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Highlighting text for queries with huge numbers of terms
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all.

I've just implemented some magic query syntax which expands simple 
queries to queries containing a whole lists of words.

I've implemented the queries themselves using a slight modification on 
the theme of QueryFilter (MultiQueryFilter, runs all queries to mark a 
single bitset, much faster than applying a logical OR to many 
QueryFilter bitsets and much lower memory than using a single 
QueryFilter wrapped around an enormous BooleanQuery.)

The queries are nice and fast, but now it occurs to me that I probably 
should highlight the text resulting from the wordlist.

Unfortunately, the contrib/highlighter code in source control fails to 
meet our needs in two ways:

   1. We don't just want fragments, we want *all* of the text, with
      highlights in the appropriate places (although we do offer a means
      to display just the fragments as well), and

   2. We don't deal with HTML, just plain text on a Swing text component.
      In other words we don't have to "format" or modify the text at all,
      just tell the Swing component which bits need to be highlighted.

The existing highlighting code we wrote basically works like this...

   1. Get the text out of the Swing component.

   2. Break the text into tokens using the appropriate Analyzer.

   3. For each term:
       3.1. Break the term into tokens using the same Analyzer.
       3.2. Iterate through the list of text tokens looking for the list
            of term tokens (basically find a sublist in a list.)

This has served us well so far, but for enormous numbers of terms it 
starts to get quite slow.

Is there a better approach for highlighting for a large number of terms? 
  For instance, it might be good to skip some terms if I can figure out 
that they're not in the document without spending too much time, and it 
might also be good to do all the token searches in a single pass, but 
I'm not entirely sure how to go about that.

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 04:51:23 2006
Return-Path: <java-user-return-18986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56347 invoked from network); 17 Feb 2006 04:51:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 04:51:23 -0000
Received: (qmail 8723 invoked by uid 500); 17 Feb 2006 04:51:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8683 invoked by uid 500); 17 Feb 2006 04:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8671 invoked by uid 99); 17 Feb 2006 04:51:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 20:51:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 20:51:16 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CFCDA5B763; Thu, 16 Feb 2006 20:50:44 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C6A267F403
	for <java-user@lucene.apache.org>; Thu, 16 Feb 2006 20:50:44 -0800 (PST)
Date: Thu, 16 Feb 2006 20:50:44 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Re: Highlighting text for queries with huge numbers of terms
In-Reply-To: <43F54E2E.7030106@nuix.com.au>
Message-ID: <Pine.LNX.4.58.0602162027170.23473@hal.rescomp.berkeley.edu>
References: <43F54E2E.7030106@nuix.com.au>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: The existing highlighting code we wrote basically works like this...
:    1. Get the text out of the Swing component.
:    2. Break the text into tokens using the appropriate Analyzer.
:    3. For each term:
:        3.1. Break the term into tokens using the same Analyzer.
:        3.2. Iterate through the list of text tokens looking for the list
:             of term tokens (basically find a sublist in a list.)
:
: This has served us well so far, but for enormous numbers of terms it
: starts to get quite slow.

I don't know squat about highlighting, but this doesn't seem like a
highlighting question, it seems like a parallel substring (or sublist)
matching question.

You have a large chunk of text, which can be broken down into a long list
of tokens.  And you have a Big collection of queries, and each query has
assocaited with it a list of tokens, and you want to know if/where each
query's list of tokens is a substring of the main text's list.

if you build a map whose keys are tokens which begin token lists for
queries, each of which is is mapped to a value which is a list of lists of
tokens, then you can make one pass over the tokens from the main text, and
"lookup" wether or not this is the potential start of something to
highlight, and if it is then check the rest of the tokens.

that proabbly didn't make a lot of sense did it?

imagine these are your queries, and their token lists after analysis...

   q1: "the quick brown fox"    ... QUICK BROWN FOX
   q2: "turnip"                 ... TURNIP
   q3: "the quick and the dead" ... QUICK DEAD
   q4: "the turnip eaters"      ... TURNIP EATERS
   ...

then you build a Map like so...

   QUICK => ( QUICK BROWN FOX , QUICK DEAD )
   TURNIP => ( TURNIP , TURNIP EATERS )

as you walk your source text, you lookup each token you encounter, if it's
a key in your map then check the lists it points to and see if they are a
match.

priority to longer or shorter matches *with the same start token* can be
done by carefully ordering the lists when you put them in the map ... but
if you don't want overlapping highlighting, and you want to give priority
to longer/shorter matches (instead of just the "first" match) then i think
you really have to do at least two passes ... in the first pass you
anotate each token with it's highlight phrase, and alow tokens to be in
multiple phrase; in the second pass you look for highlighted phrases
containing tokens which are in other highlighted phrases you that are
"better" and undo that highlighting.


If you *really* have a lot of queries, you can even save some redundency
in the sublist checks, by making the Map contain other Maps, as deep as
they need to be to allways contain one level per token. As you iterate
over the tokens, if you find one in your Map, keep looking up the
succisive tokens in the subMap untill you either get a match or not...

   "QUICK" => (
      "BROWN" => (
         "FOX" => "QUICK BROWN FOX"
      ),
      "DEAD" => "QUICK DEAD"
   ),
   "TURNIP" => (
      "_" => "TURNIP",
      "EATERS" => "TURNIP EATERS"
   )


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 05:12:53 2006
Return-Path: <java-user-return-18987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62626 invoked from network); 17 Feb 2006 05:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 05:12:52 -0000
Received: (qmail 26056 invoked by uid 500); 17 Feb 2006 05:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26028 invoked by uid 500); 17 Feb 2006 05:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26017 invoked by uid 99); 17 Feb 2006 05:12:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 21:12:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Feb 2006 21:12:45 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id CACB7B735C
	for <java-user@lucene.apache.org>; Fri, 17 Feb 2006 16:12:22 +1100 (EST)
Message-ID: <43F55B14.1080303@nuix.com.au>
Date: Fri, 17 Feb 2006 16:11:48 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting text for queries with huge numbers of terms
References: <43F54E2E.7030106@nuix.com.au> <Pine.LNX.4.58.0602162027170.23473@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0602162027170.23473@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:
> if you build a map whose keys are tokens which begin token lists for
> queries, each of which is is mapped to a value which is a list of lists of
> tokens, then you can make one pass over the tokens from the main text, and
> "lookup" wether or not this is the potential start of something to
> highlight, and if it is then check the rest of the tokens.
> 
> that proabbly didn't make a lot of sense did it?

Actually, that (and the following examples and pseudocode) puts into 
words roughly what I've been churning over in my mind for a while now.

Ignoring the tokenisation which can largely be done outside of the 
search algorithm, what I seem to have here is the need to for a list 
utility method which would look something like...

     <T> Iterable<Location> findAll(List<T> bigList,
                                    List<List<T>> smallLists)

> priority to longer or shorter matches *with the same start token* can be
> done by carefully ordering the lists when you put them in the map ... but
> if you don't want overlapping highlighting, and you want to give priority
> to longer/shorter matches (instead of just the "first" match) then i think
> you really have to do at least two passes ... in the first pass you
> anotate each token with it's highlight phrase, and alow tokens to be in
> multiple phrase; in the second pass you look for highlighted phrases
> containing tokens which are in other highlighted phrases you that are
> "better" and undo that highlighting.

Yeah.  Actually, collisions like this are already a minor issue with our 
existing routine.  The interesting thing is that if I do highlight 
something twice using the Swing APIs, it doesn't do anything terrible to 
the display so I don't have to worry so much about it.

With HTML, of course, yes... I'd definitely need to filter to avoid 
overlapping tags.

I will probably go with the simple HashMap<String,List<Token>> approach 
first and see where that leaves me performance-wise.  I think that 
multiple multi-phrase queries should be relatively uncommon, so perhaps 
the multi-level approach won't even be necessary.

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 08:03:46 2006
Return-Path: <java-user-return-18988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18401 invoked from network); 17 Feb 2006 08:03:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 08:03:46 -0000
Received: (qmail 67908 invoked by uid 500); 17 Feb 2006 08:03:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67886 invoked by uid 500); 17 Feb 2006 08:03:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67875 invoked by uid 99); 17 Feb 2006 08:03:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 00:03:38 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.62] (HELO smtp008.mail.ukl.yahoo.com) (217.12.11.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Feb 2006 00:03:38 -0800
Received: (qmail 44850 invoked from network); 17 Feb 2006 08:03:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=meRjEjOjbbBHYiexCYKGqGBLP1lfDSlkOR/oCkQs6d2EMPloGqwKcAefI/A7cQG+inwujmTxDWMcr8y0TZ3u5Os+t6jkvsl2C1GdMtRrLk5twRhI8X1caduTyAE5d4KkfkIkTcecLJddFStQhyWaclyVh/wwXFGwgOqhzR8GYsc=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp008.mail.ukl.yahoo.com with SMTP; 17 Feb 2006 08:03:16 -0000
Message-ID: <43F58340.9070403@yahoo.co.uk>
Date: Fri, 17 Feb 2006 08:03:12 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighting text for queries with huge numbers of terms
References: <43F54E2E.7030106@nuix.com.au>
In-Reply-To: <43F54E2E.7030106@nuix.com.au>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Daniel/Chris,

> Unfortunately, the contrib/highlighter code in source control fails to 
> meet our needs in two ways:
>
>   1. We don't just want fragments, we want *all* of the text, with
>      highlights in the appropriate places (although we do offer a means
>      to display just the fragments as well), and

Pass a "NullFragmenter" to the highlighter constructor to turn off 
fragmentation.

>
>   2. We don't deal with HTML, just plain text on a Swing text component.
>      In other words we don't have to "format" or modify the text at all,
>      just tell the Swing component which bits need to be highlighted.


Swing supports HTML and will do the highlight for you.
SwingText="<html>"+highlighter.getBestFragment(tokenStream,text)+"</html>";

If you don't like that approach and really do just want to just know the 
positions, plug in your own "Formatter" class which, instead of marking 
up the text, silently records the hit position information provided to 
it in the "TokenGroup" class and then return the original string without 
adding any markup. TokenGroup handles the issue of identifying runs of 
overlapping tokens for you.


Hoss, your psuedo code looked like a solution for identifying phrase 
queries.  Lack of proper support for phrase queries is a known issue 
with the current highlighter but I thought the primary issue in question 
here was speed? The approach taken by the current highlighter is to 
maintain a HashSet of all unique query terms and check each token in the 
text's token stream for a hit on this set. As your code suggests, this 
could be made faster if there were multiple queries all of which were 
PhraseQueries (with no slop factor!) because you would only need to 
check each phrase's "first terms"  initially. Not sure this helps for 
non-phrase queries. Also, I don't think hitting the index to work out 
what terms were a hit for the doc in question in order to shorten the 
list of terms to highlight  is likely to speed up things. If anything, 
the extra disk IO is likely to slow it down.
With regards to the quesiton of overlapping tokens - the highlighter is 
robust in the face of marking these up.

Cheers
Mark




	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 09:54:47 2006
Return-Path: <java-user-return-18989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79555 invoked from network); 17 Feb 2006 09:54:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 09:54:42 -0000
Received: (qmail 81986 invoked by uid 500); 17 Feb 2006 09:54:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81953 invoked by uid 500); 17 Feb 2006 09:54:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81942 invoked by uid 99); 17 Feb 2006 09:54:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 01:54:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.89.10.11] (HELO denhaag.ewi.utwente.nl) (130.89.10.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 01:54:25 -0800
Received: from ewiex01.ewi.utwente.nl (ewiex02.ewi.utwente.nl [130.89.10.121])
	by denhaag.ewi.utwente.nl (8.13.1/8.13.1) with ESMTP id k1H9s1DW014815
	for <java-user@lucene.apache.org>; Fri, 17 Feb 2006 10:54:01 +0100 (MET)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C633A8.158C71CC"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: BM25 Similarity implementation
Date: Fri, 17 Feb 2006 10:54:02 +0100
Message-ID: <5DD2165A95E801438DAA9C1E0957EB5ED3EFFE@ewiex02.dynamic.ewi.utwente.nl>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: BM25 Similarity implementation
Thread-Index: AcYzI3JTAZExsJoFSO2NGBsvAnMEkQAgP9DQ
From: "Trieschnigg, R.B. \(Dolf\)" <r.b.trieschnigg@ewi.utwente.nl>
To: <java-user@lucene.apache.org>
X-Spam-Score: -5.789 () ALL_TRUSTED,AWL,BAYES_00
X-Scanned-By: MIMEDefang 2.52 on 130.89.10.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0b5 (denhaag.ewi.utwente.nl [130.89.10.11]); Fri, 17 Feb 2006 10:54:02 +0100 (MET)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C633A8.158C71CC
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

> > I would like to implement the Okapi BM25 weighting function=20
> > using my own Similarity implementation. Unfortunately BM25=20
> > requires the document length in the score calculation, which=20
> > is not provided by the Scorer.
>=20
> How do you want to measure document length?  If the number of=20
> tokens is an acceptable measure, then the norm contains=20
> sqrt(numTokens) by default.  You can modify your=20
> Similarity.lengthNorm() implementation to not perform the=20
> sqrt, or square the norm.

I assume the number of tokens will be a good estimate.

I've included an image with the algorithm (my ASCII art isn't that =
good).
Legend of the figure:
- k1, k3 and b are constants
- tf is the within document term frequency
- df is the document frequency
- N is the collection size
- r is the number of relevant documents containing a particular term =
(without relevance information assumed to be 0)
- R is the number of items known to be relevant to a specific topic =
(without relevance information assumed to be 0)

As far is I understand Lucene multiplies the squared weight with the =
result of Similarity.lengthNorm(), but BM25 requires the document length =
for the calculation of the document term weighting (as far as I know =
it's not possible to extract the influence of the normalization as a =
constant multiplier).

Am I missing something here?

Dolf




------_=_NextPart_001_01C633A8.158C71CC
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C633A8.158C71CC--

From java-user-return-18990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 09:55:32 2006
Return-Path: <java-user-return-18990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79846 invoked from network); 17 Feb 2006 09:55:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 09:55:25 -0000
Received: (qmail 84676 invoked by uid 500); 17 Feb 2006 09:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84655 invoked by uid 500); 17 Feb 2006 09:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84644 invoked by uid 99); 17 Feb 2006 09:55:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 01:55:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 01:55:00 -0800
Received: from [143.205.118.106] ([143.205.118.106]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 17 Feb 2006 10:54:26 +0100
Message-ID: <43F59D51.8050602@ifit.uni-klu.ac.at>
Date: Fri, 17 Feb 2006 10:54:25 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser behaviour ..
References: <FAB00A8DC59FAB42B13C2B3B0F687701E7CC04@ehost011-3.exch011.intermedia.net>	 <43EC9184.1050706@ifit.uni-klu.ac.at>	 <Pine.LNX.4.58.0602101049001.2025@hal.rescomp.berkeley.edu>	 <43F1B6AB.7030603@ifit.uni-klu.ac.at>	 <Pine.LNX.4.58.0602141131530.26553@hal.rescomp.berkeley.edu>	 <43F31D69.3040208@ifit.uni-klu.ac.at> <c68e39170602150653o22f3c8d4s9e717de110b11eb1@mail.gmail.com>
In-Reply-To: <c68e39170602150653o22f3c8d4s9e717de110b11eb1@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------070303030401010204060506"
X-OriginalArrivalTime: 17 Feb 2006 09:54:26.0428 (UTC) FILETIME=[232C83C0:01C633A8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------070303030401010204060506
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Yonik Seeley wrote:

>>>From the user's point of view I think it will make sense to
>>build a phrase query only when the quotes are found in the search string.
>>    
>>
>
>You make an interesting point Sergiu.  Your proposal would increase
>the expressive power of the QueryParser by allowing the construction
>of either phrase queries or boolean queries when multiple tokens are
>produced by analysis.
>
>The main downside is that it's not backward compatible, and without
>quotes (and hence phrase queries) many older queries will produce
>worse results.  I also think that a majority of the time, when
>multiple tokens are produced, you do want a phrase search (or at least
>a sloppy one).
>
>Of course, the backward compatible thing can be fixed via a flag on
>the query parser that defaults to the old behavior.
>  
>
you are right, it can be a property of QueryParser similar to the AND/OR 
behaviour.
This will solve also backward compatibility ... and will implement the 
behaiour I espect also.

 Best,

 Sergiu

>-Yonik
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


--------------070303030401010204060506--

From java-user-return-18991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 10:52:34 2006
Return-Path: <java-user-return-18991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99302 invoked from network); 17 Feb 2006 10:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 10:52:33 -0000
Received: (qmail 18532 invoked by uid 500); 17 Feb 2006 10:51:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13778 invoked by uid 500); 17 Feb 2006 10:51:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13083 invoked by uid 99); 17 Feb 2006 10:51:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 02:51:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.89.10.11] (HELO denhaag.ewi.utwente.nl) (130.89.10.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 02:25:14 -0800
Received: from ewiex01.ewi.utwente.nl (ewiex02.ewi.utwente.nl [130.89.10.121])
	by denhaag.ewi.utwente.nl (8.13.1/8.13.1) with ESMTP id k1HAOnZv016971
	for <java-user@lucene.apache.org>; Fri, 17 Feb 2006 11:24:49 +0100 (MET)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: BM25 Similarity implementation
Date: Fri, 17 Feb 2006 11:24:50 +0100
Message-ID: <5DD2165A95E801438DAA9C1E0957EB5ED3F013@ewiex02.dynamic.ewi.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BM25 Similarity implementation
Thread-Index: AcYzI3JTAZExsJoFSO2NGBsvAnMEkQAgP9DQAAH0INA=
From: "Trieschnigg, R.B. \(Dolf\)" <r.b.trieschnigg@ewi.utwente.nl>
To: <java-user@lucene.apache.org>
X-Spam-Score: -5.776 () ALL_TRUSTED,AWL,BAYES_00
X-Scanned-By: MIMEDefang 2.52 on 130.89.10.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0b5 (denhaag.ewi.utwente.nl [130.89.10.11]); Fri, 17 Feb 2006 11:24:51 +0100 (MET)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry, the image wasn't sent:
http://wwwhome.cs.utwente.nl/~trieschn/bm25.PNG=20

> -----Original Message-----
> From: Trieschnigg, R.B. (Dolf)=20
> [mailto:r.b.trieschnigg@ewi.utwente.nl]=20
> Sent: vrijdag 17 februari 2006 10:54
> To: java-user@lucene.apache.org
> Subject: RE: BM25 Similarity implementation
>=20
> > > I would like to implement the Okapi BM25 weighting=20
> function using my=20
> > > own Similarity implementation. Unfortunately BM25 requires the=20
> > > document length in the score calculation, which is not=20
> provided by=20
> > > the Scorer.
> >=20
> > How do you want to measure document length?  If the number=20
> of tokens=20
> > is an acceptable measure, then the norm contains
> > sqrt(numTokens) by default.  You can modify your
> > Similarity.lengthNorm() implementation to not perform the sqrt, or=20
> > square the norm.
>=20
> I assume the number of tokens will be a good estimate.
>=20
> I've included an image with the algorithm (my ASCII art isn't=20
> that good).
> Legend of the figure:
> - k1, k3 and b are constants
> - tf is the within document term frequency
> - df is the document frequency
> - N is the collection size
> - r is the number of relevant documents containing a=20
> particular term (without relevance information assumed to be 0)
> - R is the number of items known to be relevant to a specific=20
> topic (without relevance information assumed to be 0)
>=20
> As far is I understand Lucene multiplies the squared weight=20
> with the result of Similarity.lengthNorm(), but BM25 requires=20
> the document length for the calculation of the document term=20
> weighting (as far as I know it's not possible to extract the=20
> influence of the normalization as a constant multiplier).
>=20
> Am I missing something here?
>=20
> Dolf

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 10:53:10 2006
Return-Path: <java-user-return-18992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 291 invoked from network); 17 Feb 2006 10:53:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 10:53:09 -0000
Received: (qmail 18141 invoked by uid 500); 17 Feb 2006 10:51:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14378 invoked by uid 500); 17 Feb 2006 10:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12827 invoked by uid 99); 17 Feb 2006 10:51:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 02:51:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jprogramista@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 02:18:12 -0800
Received: by pproxy.gmail.com with SMTP id w49so440783pyg
        for <java-user@lucene.apache.org>; Fri, 17 Feb 2006 02:17:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=OZJ/dzvnV35YVNCMhtxX2j5Gj5SsUsAwW0uTm2WCCQYOV3DvawFmOCQAF1OqRR/3M2E7U9MQcte/4osS2JH/a3KlEWL8S/d9DV0Rn140qLItIBKdlzPz20pPH1iySuo0G5fy2MlNEhMc26IQOQuO+t9SEoappiUE5AOAkvhlQrg=
Received: by 10.35.121.2 with SMTP id y2mr298109pym;
        Fri, 17 Feb 2006 02:17:51 -0800 (PST)
Received: by 10.35.18.11 with HTTP; Fri, 17 Feb 2006 02:17:51 -0800 (PST)
Message-ID: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>
Date: Fri, 17 Feb 2006 11:17:51 +0100
From: Java Programmer <jprogramista@gmail.com>
To: java-user@lucene.apache.org
Subject: Speedup indexing process
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19169_19150828.1140171471243"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19169_19150828.1140171471243
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,
Maybe this question is trivial but I need to ask it. I've some problem with
indexing large number of documents, and I seek for better solution.
Task is to index about 33GB text data CSV (each record about 30kB), it
possible of course to index these data but I'm not very happy with timings
(about 26 hours), so I want to know how can i speed up this process. First =
I
think about splitting CVS file into smaller ones, eg 5GB and index them on =
6
indexing computers, but now is my question - can I join such parts into one
index after indexing jobs on each computer is finished? I saw example wit
RAMDirectory which could be merged with
FSDirectory, but this example was about same IndexWriter, in my case I need
some separate IndexWriters on few computers. So does it possible with
Lucene?

Thx in advance for hints,
Adrian

------=_Part_19169_19150828.1140171471243--

From java-user-return-18993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 13:22:53 2006
Return-Path: <java-user-return-18993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76794 invoked from network); 17 Feb 2006 13:22:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 13:22:52 -0000
Received: (qmail 69442 invoked by uid 500); 17 Feb 2006 13:22:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69412 invoked by uid 500); 17 Feb 2006 13:22:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69401 invoked by uid 99); 17 Feb 2006 13:22:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 05:22:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Feb 2006 05:22:44 -0800
Received: (qmail 10392 invoked by uid 0); 17 Feb 2006 13:22:22 -0000
Received: from 193.63.235.44 by www026.gmx.net with HTTP;
	Fri, 17 Feb 2006 14:22:22 +0100 (MET)
Date: Fri, 17 Feb 2006 14:22:22 +0100 (MET)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <43F4D026.6010203@syr.edu>
Subject: Re: Vector Space Model <-> Probabilistic Model
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <1162.1140182542@www026.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does anybody here know a paper/book chapter that particularily writes about
the individual advantages/disadvantages of each ot the two models? I had a
look at [Grossman/Frieder 1998] ("Information Retrieval - Algorithms and
Heuristics") in which is was stated that the question which model works best
is still an open debate. However, there should be at least paper that at
least argue for the one or the the other model in order to get a better
understanding. Perhaps anybody has some references?

Karl

> --- Ursprngliche Nachricht ---
> Von: Grant Ingersoll <gsingers@syr.edu>
> An: java-user@lucene.apache.org
> Betreff: Re: Vector Space Model <-> Probabilistic Model
> Datum: Thu, 16 Feb 2006 14:19:02 -0500
> 
> You may find some useful reading at:
> http://wiki.apache.org/jakarta-lucene/InformationRetrieval
> 
> Karl Koch wrote:
> > I am looking for a comparison between the theoretical Vector Space Model
> and
> > the theoretical Probabilistic Model in Information Retrieval. I know
> that
> > comcrete implementations do differ from that. However, I am looking for
> > papers that compare the performance of both in particular applications.
> >
> > Does anybody know about good books that focus on this matter?
> >
> > Karl
> >
> >   
> 
> -- 
> ------------------------------------------------------------------- 
> Grant Ingersoll 
> Sr. Software Engineer 
> Center for Natural Language Processing 
> Syracuse University 
> School of Information Studies 
> 335 Hinds Hall 
> Syracuse, NY 13244 
> 
> http://www.cnlp.org 
> Voice:  315-443-5484 
> Fax: 315-443-6886 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
10 GB Mailbox, 100 FreeSMS/Monat http://www.gmx.net/de/go/topmail
+++ GMX - die erste Adresse fr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 14:47:30 2006
Return-Path: <java-user-return-18994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27306 invoked from network); 17 Feb 2006 14:47:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 14:47:30 -0000
Received: (qmail 33285 invoked by uid 500); 17 Feb 2006 14:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33263 invoked by uid 500); 17 Feb 2006 14:47:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33251 invoked by uid 99); 17 Feb 2006 14:47:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 06:47:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.203] (HELO smtp813.mail.ukl.yahoo.com) (217.12.12.203)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Feb 2006 06:47:22 -0800
Received: (qmail 1037 invoked from network); 17 Feb 2006 14:47:00 -0000
Received: from unknown (HELO laptop) (malcyclark@btinternet.com@86.132.235.114 with login)
  by smtp813.mail.ukl.yahoo.com with SMTP; 17 Feb 2006 14:47:00 -0000
Message-ID: <000501c633d1$02f30420$0301a8c0@laptop>
From: "Malcolm" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References: <43F4D026.6010203@syr.edu> <1162.1140182542@www026.gmx.net>
Subject: Re: Vector Space Model <-> Probabilistic Model
Date: Fri, 17 Feb 2006 14:47:00 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2670
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I know of one I used for my Thesis. The REF is:
Fuhr, N. 2001, "Models in information retrieval", , pp. 21-50.

http://portal.acm.org/citation.cfm?id=567294

I may have a electronic version. If you need it give me an email address as 
this service doesn't allow attachments.

Hope this helps,

Malcolm Clark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 15:39:35 2006
Return-Path: <java-user-return-18995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58774 invoked from network); 17 Feb 2006 15:39:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 15:39:34 -0000
Received: (qmail 45106 invoked by uid 500); 17 Feb 2006 15:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45081 invoked by uid 500); 17 Feb 2006 15:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45067 invoked by uid 99); 17 Feb 2006 15:39:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 07:39:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.196 as permitted sender)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Feb 2006 07:39:26 -0800
Received: (qmail 21660 invoked from network); 17 Feb 2006 15:39:05 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-1.us4.outblaze.com with SMTP; 17 Feb 2006 15:39:04 -0000
Message-ID: <43F5EE18.6050900@curtin.com>
Date: Fri, 17 Feb 2006 10:39:04 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Speedup indexing process
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>
In-Reply-To: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Java Programmer wrote:

> Hi,
> Maybe this question is trivial but I need to ask it. I've some problem with
> indexing large number of documents, and I seek for better solution.
> Task is to index about 33GB text data CSV (each record about 30kB), it
> possible of course to index these data but I'm not very happy with timings
> (about 26 hours), so I want to know how can i speed up this process. First I
> think about splitting CVS file into smaller ones, eg 5GB and index them on 6
> indexing computers, but now is my question - can I join such parts into one
> index after indexing jobs on each computer is finished? I saw example wit
> RAMDirectory which could be merged with
> FSDirectory, but this example was about same IndexWriter, in my case I need
> some separate IndexWriters on few computers. So does it possible with
> Lucene?

Here are some things you can try.  First, look at IndexWriter.mergeFactor and 
IndexWriter.minMergeDocs.  These two attributes control how often IndexWriter 
actually writes a batch of indexed documents to disk (and therefore how big 
each disk piece is), and how many disk pieces get merged together.  Since each 
merge is essentially a big read and re-write of indexed documents, the fewer 
times you do it, the shorter your indexing time.  On the other hand, merging 
less often takes more RAM.  In other words, it's another incarnation of the 
classic tradeoff between space and time.  As one data point, one of my 
applications has documents about 10% the size of yours (about 3K each). 
Changing minMergeDocs to 70000 and mergeFactor to 70 cut its indexing time by 
more than half.

Another approach is along the lines of what you mentioned.  Index subsets of 
the data on several machines, then merge them all together at the end (that 
part has to be done on 1 machine).  See IndexWriter.addIndexes().

Of course, it's also possible that parsing the documents themselves is a big 
chunk of your time.  If you're using your own Analyzer, or your data is 
unusual in some way, you might look at that too.

Note that these approaches are not mutually exclusive, i.e. you can combine 
them.  Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 18:28:35 2006
Return-Path: <java-user-return-18996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63176 invoked from network); 17 Feb 2006 18:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 18:28:35 -0000
Received: (qmail 77191 invoked by uid 500); 17 Feb 2006 18:28:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76918 invoked by uid 500); 17 Feb 2006 18:28:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76659 invoked by uid 99); 17 Feb 2006 18:28:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 10:28:14 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.87.65] (HELO web37412.mail.mud.yahoo.com) (209.191.87.65)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Feb 2006 10:28:13 -0800
Received: (qmail 33344 invoked by uid 60001); 17 Feb 2006 18:27:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=EiqUJ0XxZ8p/fvSmaUUgwqHznL9iWNzQ+A7q2uBSJPKfxhC09Sw+GH+apiuQaxl71aB0iZSlJDZCw6+TPXFAyVdpoyR+GjaTlPCXvXduXnQlP9dw/vr62trT1o0OJjDKPwoZPbvvcEVjnPVHGOoajnxANiKmU0owWSCsu9GINh4=  ;
Message-ID: <20060217182752.33342.qmail@web37412.mail.mud.yahoo.com>
Received: from [58.65.140.3] by web37412.mail.mud.yahoo.com via HTTP; Fri, 17 Feb 2006 18:27:52 GMT
Date: Fri, 17 Feb 2006 18:27:52 +0000 (GMT)
From: SOME ONE <sumvon@yahoo.com>
Subject: Custom Sorting
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am using MultiFieldQueryParser (Lucene 1.9) to
search title and body fields in the documents. The
requirement is that documents with title match should
be returned before the documents with body match.
Using the default scoring, title matches do come
before the body matches. But, I also need the
documents with title matches sorted by date, and
documents with body matches sorted by date. i.e there
will be two groups of docs in the results, one with
title match and the other with just body match, the
first group of docs should come before the second
group, and each group should be sorted by date.

I am not concerned with the Lucene scoring as the
documents are very short. So, I think, just two scores
as described above for the two groups of docs are
sufficient. I am new to Lucene and have been looking
into its code trying to figure out how to achieve the
desired behaviour but can't seem to.

Any help in this regard will be greatly appreciated.

Thanks and Regards
Wiseman

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 18:39:29 2006
Return-Path: <java-user-return-18997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70651 invoked from network); 17 Feb 2006 18:39:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 18:39:29 -0000
Received: (qmail 94314 invoked by uid 500); 17 Feb 2006 18:39:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94290 invoked by uid 500); 17 Feb 2006 18:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94279 invoked by uid 99); 17 Feb 2006 18:39:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 10:39:22 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Feb 2006 10:39:19 -0800
Received: (qmail 23660 invoked by uid 60001); 17 Feb 2006 18:38:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=IuRyH2EPk+y3dW78PomBPI+NDQqFwUkXxATHfbe23k4JKsNRNGTp3dj1mOCex467dpmGpNIus56F3TzfIiPeDIsUjMQo1rDuGjd2poSXLx1Jd/icRrRrG6GM0VuLtHw+rBdOpip6IshpmCGFknGTaz1IypEbrZ2uqWHIhDI8kAQ=  ;
Message-ID: <20060217183858.23658.qmail@web50312.mail.yahoo.com>
Date: Fri, 17 Feb 2006 10:38:58 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: ArrayIndexOutOfBoundsException while closing the index writer
To: java-user@lucene.apache.org
In-Reply-To: <200602161103812.SM00940@shivani>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Sorry if I sounded like adding the finally block will solve your problem.  It will not.
>From the cursory look at your code, I don't see why you are passing IndexWriter INTO indexFile(....) method.  I think you should change that.
Then, your code should look like this:

IndexWriter writer = null;
try {
   writer = new IndexWriter(.......)
   ... all your field/document adding logic
}
catch (IOException) {
  ... however you want to handle this
}
finally {
  if (writer != null) {
  try {
    writer.close();
  } catch (IOException e) {
    .. nothing you can do about it other than log it
  }
}


Eventually you will likely end up changing this code, because you don't want to open and close IndexWriter for _every_ File.  You probably want to open new IndexWriter _outside_ that method... and then pass it into the method, and close it in the finally block outside the method.

Why not just grab the Lucene in Action code?  It has the file indexer, various parsers (RTF, MS Word, XML, HTML, PDF) and tt's free - http://lucenebook.com/ .

Otis

----- Original Message ----
From: Shivani Sawhney <shivani@netedgecomputing.com>
To: java-user@lucene.apache.org
Sent: Thursday, February 16, 2006 12:32:40 AM
Subject: RE: ArrayIndexOutOfBoundsException while closing the index writer

Hi Otis,

Thanks for such a quick reply. I tried using finally, but it didn't help.

I guess if I explain the integration of lucene with my app in little detail
then you probably can help me better.

I allow users to upload documents, which are then indexed, and search on
them. Now I am getting this error when I am trying to index the document and
particularly while closing the index writer.
If we look closely at the error log, it's giving an error at 

org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

i.e., when lucene tries to get something by the field name, 

return (FieldInfo) byName.get(fieldName);

, now what beats me is that, indexing on fields has already been done by the
time we want to close the index writer, so how come I don't get an error
while indexing, what goes wrong when I am trying to close the index writer.


Please see if you can help me with this....

Thanks in advance.

The code used for indexing is as follows:

    public void indexFile(IndexWriter indexwriter, File resumeFile)
    {
        Document document = new Document();       
        try
        {            
            File afile[] = indexDirFile.listFiles();
            boolean flag = false;

            if (afile.length <= 0)
                flag = true;
            
            indexwriter = new IndexWriter(indexDirFile, new
StandardAnalyzer(), flag);

            try
            {                
                document.add(Field.Text(IndexerColumns.contents, new
FileReader(resumeFile)));
            } catch (FileNotFoundException e)
            {
                e.printStackTrace();
                throw new MyRuntimeException(e.getMessage(), e);
            }
        
        document.add(Field.Keyword( IndexerColumns.id,
String.valueOf(mapLuceneParams.get(IndexerColumns.id)) ));

        for (int i = 0; i < this.columnInfos.length; i++)
        {
            ColumnInfo columnInfo = columnInfos[i];
            String value =
String.valueOf(mapLuceneParams.get(columnInfo.columnName));

            if (value != null)
            {
                value = value.trim();
                if (value.length() != 0)
                {
                    if (columnInfo.istokenized)
                    {                        
                        document.add(Field.Text(columnInfo.columnName,
value));                        
                    } else
                    {
                        document.add(Field.Keyword(columnInfo.columnName,
value));
                    }
                }
            }
        }
        document.add(Field.Keyword(IndexerColumns.filePath,
String.valueOf(mapLuceneParams.get(IndexerColumns.filePath))));

        try
        {
            indexwriter.addDocument(document); 
        } catch (IOException e)
        {
            e.printStackTrace();
            throw new MyRuntimeException(e.getMessage(), e);
        } 
    
          indexwriter.close();
        } catch (IOException e)
        {   
            e.printStackTrace();
            throw new Error(e);
        }finally
        {
            if(indexwriter != null)
            {
                indexwriter.close();
            }
        }



Regards,
Shivani




-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: 16 February, 2006 10:16 AM
To: java-user@lucene.apache.org
Subject: Re: ArrayIndexOutOfBoundsException while closing the index writer

Who knows what else the app is doing.
However, I can quickly suggest that you add a finally block and close your
writer in there if writer != null.

Otis

----- Original Message ----
From: Shivani Sawhney <shivani@netedgecomputing.com>
To: java-user@lucene.apache.org
Sent: Wednesday, February 15, 2006 11:31:12 PM
Subject: ArrayIndexOutOfBoundsException while closing the index writer

Hi,

I have used Lucene in my application and am just indexing and searching on
some documents. The code that indexes the documents was working fine till
yesterday and suddenly stopped working.

I get an error when I am trying to close the index writer. The code is as
follows:

 

 

.

            IndexWriter indexwriter = new IndexWriter(indexDirFile, new
StandardAnalyzer(), flag);

            indexFile(indexwriter, resumeFile);

            indexwriter.close(); //causing errors

        } catch (IOException e)

        {   

            e.printStackTrace();

            throw new Error(e);

        }

.

 

And the error log is as follows:

 

2006-02-15 18:47:48,748 WARN  [org.apache.struts.action.RequestProcessor]
Unhandled Exception thrown: class java.lang.ArrayIndexOutOfBoundsException

2006-02-15 18:47:48,748 ERROR [org.jboss.web.localhost.Engine]
StandardWrapperValve[action]: Servlet.service() for servlet action threw
exception

java.lang.ArrayIndexOutOfBoundsException: 105 >= 25

            at java.util.Vector.elementAt(Vector.java:432)

            at
org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

            at
org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:103)

            at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:237)

            at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:169)

            at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)

            at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:425)

            at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:373)

            at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:193)

            at rd.admin.NewIndexer.indexTextFile(NewIndexer.java:108)

            at rd.admin.AddResume.indexOneRow(AddResume.java:38)

            at
rd.admin.LuceneGateway.buildMapAndIndex(LuceneGateway.java:46)

            at rd.admin.LuceneGateway.indexResume(LuceneGateway.java:30)

            at
rd.admin.UploadResumeAgainstRequisition.npExecute(UploadResumeAgainstRequisi
tion.java:106)

            at np.core.BaseNPAction.execute(BaseNPAction.java:116)

            at
org.apache.struts.action.RequestProcessor.processActionPerform(RequestProces
sor.java:421)

            at
org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)

            at
org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)

            at
org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:415)

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

            at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)

            at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application
FilterChain.java:237)

            at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh
ain.java:157)

            at
org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.ja
va:75)

            at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application
FilterChain.java:186)

            at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh
ain.java:157)

            at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.ja
va:214)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContext
Valve.java:198)

            at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.ja
va:152)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalVal
ve.java:66)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssoci
ationValve.java:153)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase
.java:540)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:
54)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137
)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118
)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:102)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java
:109)

            at
org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContex
t.java:104)

            at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)

            at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)

            at
org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)

            at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)

            at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConne
ction(Http11Protocol.java:705)

            at
org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)

            at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.jav
a:683)

            at java.lang.Thread.run(Thread.java:595)

 

 

 

Can someone please suggest a solution or even the cause of the problem?

 

Thanks in advance.

 

Regards,

Shivani

 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 18:43:21 2006
Return-Path: <java-user-return-18998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72271 invoked from network); 17 Feb 2006 18:43:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 18:43:20 -0000
Received: (qmail 5562 invoked by uid 500); 17 Feb 2006 18:43:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5532 invoked by uid 500); 17 Feb 2006 18:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5520 invoked by uid 99); 17 Feb 2006 18:43:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 10:43:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.64 as permitted sender)
Received: from [205.158.62.64] (HELO ws6-6.us4.outblaze.com) (205.158.62.64)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Feb 2006 10:43:13 -0800
Received: (qmail 23463 invoked from network); 17 Feb 2006 18:34:31 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-6.us4.outblaze.com with SMTP; 17 Feb 2006 18:34:31 -0000
Message-ID: <43F6165C.7080003@curtin.com>
Date: Fri, 17 Feb 2006 13:30:52 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Custom Sorting
References: <20060217182752.33342.qmail@web37412.mail.mud.yahoo.com>
In-Reply-To: <20060217182752.33342.qmail@web37412.mail.mud.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SOME ONE wrote:

> Hi,
> 
> I am using MultiFieldQueryParser (Lucene 1.9) to
> search title and body fields in the documents. The
> requirement is that documents with title match should
> be returned before the documents with body match.
> Using the default scoring, title matches do come
> before the body matches. But, I also need the
> documents with title matches sorted by date, and
> documents with body matches sorted by date. i.e there
> will be two groups of docs in the results, one with
> title match and the other with just body match, the
> first group of docs should come before the second
> group, and each group should be sorted by date.

Would it work to run 2 searches, one with only the title criteria and then 
another with only the body criteria?

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 19:33:44 2006
Return-Path: <java-user-return-18999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99968 invoked from network); 17 Feb 2006 19:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 19:33:44 -0000
Received: (qmail 23751 invoked by uid 500); 17 Feb 2006 19:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23692 invoked by uid 500); 17 Feb 2006 19:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23641 invoked by uid 99); 17 Feb 2006 19:33:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 11:33:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 11:33:34 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Fri, 17 Feb 2006 12:33:13 -0700
Message-ID: <43F6249B.8070505@allegromedical.com>
Date: Fri, 17 Feb 2006 12:31:39 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: StandardAnalyzer .. stemming
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com> <43F5EE18.6050900@curtin.com>
In-Reply-To: <43F5EE18.6050900@curtin.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The SnowBallAnalyzer seems to offer stemming. The StandardAnalyzer on 
the other hand has a bunch of other niceness. What is the best practice 
of leveraging both these analyzers while indexing and searching? Do I 
chain these up somehow and if so what apis do i look at for doing so? Do 
i implement my own analyzer and use both these two process the tokens?

Thanks,


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 19:47:40 2006
Return-Path: <java-user-return-19000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6169 invoked from network); 17 Feb 2006 19:47:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 19:47:40 -0000
Received: (qmail 48049 invoked by uid 500); 17 Feb 2006 19:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48021 invoked by uid 500); 17 Feb 2006 19:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48010 invoked by uid 99); 17 Feb 2006 19:47:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 11:47:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 11:47:33 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 720695B763; Fri, 17 Feb 2006 11:47:04 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5FBA07F403
	for <java-user@lucene.apache.org>; Fri, 17 Feb 2006 11:47:04 -0800 (PST)
Date: Fri, 17 Feb 2006 11:47:04 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer .. stemming
In-Reply-To: <43F6249B.8070505@allegromedical.com>
Message-ID: <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>
 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: The SnowBallAnalyzer seems to offer stemming. The StandardAnalyzer on
: the other hand has a bunch of other niceness. What is the best practice
: of leveraging both these analyzers while indexing and searching? Do I
: chain these up somehow and if so what apis do i look at for doing so? Do
: i implement my own analyzer and use both these two process the tokens?

the Analyzer class is already designed to making chaining very easy -- but
not Analyzer chaining, TokenFilter chaining.

if you take a look at the source for StandardAnalyzer and SnowBallAnalyzer
it should (hopefully) be very obvious how to write your own (10 line or
less) Analyzer that gives youall the goodness you want from both...

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/lucene/analysis/standard/StandardAnalyzer.java?rev=219090&view=markup
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/snowball/src/java/org/apache/lucene/analysis/snowball/SnowballAnalyzer.java?rev=151459&view=markup

...if you literaly just want to add snowball stemming to
the end of StandardAnalyzer, then i *think* something like this would
work...

   Analyzer a = new StandardAnalyzer(stoplist) {
     public TokenStream tokenStream(String fieldName, Reader reader) {
       return new SnowballFilter(super.tokenStream(fieldName,reader),
                                 "yourChoiceOfStemmerName");
     }
   }


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 20:10:14 2006
Return-Path: <java-user-return-19001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15872 invoked from network); 17 Feb 2006 20:10:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 20:10:14 -0000
Received: (qmail 83255 invoked by uid 500); 17 Feb 2006 20:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83223 invoked by uid 500); 17 Feb 2006 20:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83212 invoked by uid 99); 17 Feb 2006 20:10:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 12:10:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 12:10:06 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Fri, 17 Feb 2006 13:09:45 -0700
Message-ID: <43F62D2B.2060308@allegromedical.com>
Date: Fri, 17 Feb 2006 13:08:11 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StandardAnalyzer .. stemming
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com> <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com> <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you. I think in my case i can just do the last approach you suggested.

One more question, what jar is SnowballFilter part of?

Chris Hostetter wrote:

>: The SnowBallAnalyzer seems to offer stemming. The StandardAnalyzer on
>: the other hand has a bunch of other niceness. What is the best practice
>: of leveraging both these analyzers while indexing and searching? Do I
>: chain these up somehow and if so what apis do i look at for doing so? Do
>: i implement my own analyzer and use both these two process the tokens?
>
>the Analyzer class is already designed to making chaining very easy -- but
>not Analyzer chaining, TokenFilter chaining.
>
>if you take a look at the source for StandardAnalyzer and SnowBallAnalyzer
>it should (hopefully) be very obvious how to write your own (10 line or
>less) Analyzer that gives youall the goodness you want from both...
>
>http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/lucene/analysis/standard/StandardAnalyzer.java?rev=219090&view=markup
>http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/snowball/src/java/org/apache/lucene/analysis/snowball/SnowballAnalyzer.java?rev=151459&view=markup
>
>...if you literaly just want to add snowball stemming to
>the end of StandardAnalyzer, then i *think* something like this would
>work...
>
>   Analyzer a = new StandardAnalyzer(stoplist) {
>     public TokenStream tokenStream(String fieldName, Reader reader) {
>       return new SnowballFilter(super.tokenStream(fieldName,reader),
>                                 "yourChoiceOfStemmerName");
>     }
>   }
>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 21:20:42 2006
Return-Path: <java-user-return-19002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59867 invoked from network); 17 Feb 2006 21:20:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 21:20:42 -0000
Received: (qmail 14957 invoked by uid 500); 17 Feb 2006 21:20:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14842 invoked by uid 500); 17 Feb 2006 21:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14804 invoked by uid 99); 17 Feb 2006 21:20:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 13:20:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [68.142.229.95] (HELO smtp110.sbc.mail.re2.yahoo.com) (68.142.229.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Feb 2006 13:20:24 -0800
Received: (qmail 29875 invoked from network); 17 Feb 2006 21:20:02 -0000
Received: from unknown (HELO EAGLE) (rui-zhang@sbcglobal.net@69.208.101.115 with login)
  by smtp110.sbc.mail.re2.yahoo.com with SMTP; 17 Feb 2006 21:20:02 -0000
From: "Xin Herbert Wu" <xinwu@pathf.com>
To: <java-user@lucene.apache.org>
Subject: wildcard search constraints?
Date: Fri, 17 Feb 2006 15:19:58 -0600
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000C_01C633D5.9D36E930"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcY0B+eHEjTDdOBmTVCDb7/zcUU0Gw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060217212024.B090F10FB00E@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000C_01C633D5.9D36E930
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi, 

I have a lucene index library field "slug" which has a string value
"abc-nws-hurr29". 

When using these settings:

-  Use QueryParser 

-  StandardAnalyzer

 

I have some strange behaviors:

(1) The field query slug:abc*hurr2* works only if the field type is
"Keyword". The query fails if the type is "Text".

(2) On the other hand, query slug:abc-nws-hurr29 only works if the field
type is "Text" and fails if the type is "Keyword"

 

I prefer to use StandardAnalyzer for all the basic searches so that I can
construct complex field query involved many different types of fields, but
it seems it has some limitations on wildcard searches. 

Do I have to use other Analyzer in order to have a correct wildcard search
on different types of fields?

 

I use lucene1.4.3 on java 5 and the behavior is verified by luke-0.6 tool. 

 

Any help is greatly appreciated!

 

-Xin


------=_NextPart_000_000C_01C633D5.9D36E930--



From java-user-return-19003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 17 21:39:48 2006
Return-Path: <java-user-return-19003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67287 invoked from network); 17 Feb 2006 21:39:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Feb 2006 21:39:48 -0000
Received: (qmail 45206 invoked by uid 500); 17 Feb 2006 21:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44793 invoked by uid 500); 17 Feb 2006 21:39:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44762 invoked by uid 99); 17 Feb 2006 21:39:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 13:39:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Feb 2006 13:39:41 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C086B5B763; Fri, 17 Feb 2006 13:39:18 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id ADC7C7F403
	for <java-user@lucene.apache.org>; Fri, 17 Feb 2006 13:39:18 -0800 (PST)
Date: Fri, 17 Feb 2006 13:39:18 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: wildcard search constraints?
In-Reply-To: <20060217212024.B090F10FB00E@asf.osuosl.org>
Message-ID: <Pine.LNX.4.58.0602171332490.30493@hal.rescomp.berkeley.edu>
References: <20060217212024.B090F10FB00E@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I have some strange behaviors:
:
: (1) The field query slug:abc*hurr2* works only if the field type is
: "Keyword". The query fails if the type is "Text".
:
: (2) On the other hand, query slug:abc-nws-hurr29 only works if the field
: type is "Text" and fails if the type is "Keyword"

I think the problems you are seeing can be explain thusly:

  1) field type Text results in your analyzer (in this case
StandardAnalyzer) splitting the text on hyphens, or maybe it's just
pulling the numbers off, i don't acctually remember exactly what
StandardAnalyzer does, but when looking at your terms in luke you probaly
won't see "abc-nws-hurr29"

  2) regardless of how you index yourfield, QueryParser is going to pass
any text you give it to the analyzer (i'm guessing that again you are
using StanardAnalyzer in your QueryParser) which will again split on
hyphens (or maybe numbers) and this won't match your Keyword field (which
contains the literal value "abc-nws-hurr29"

: Do I have to use other Analyzer in order to have a correct wildcard search
: on different types of fields?

The tricky thing about wildcard searches in QueryParser is that QP can't
analyze your search input because of the wildcard tokens, so you have to
be very carefull in picking which analyzer you use for the fields you want
to do wildcard searching on.

Make sure you take a look at the PerFieldAnalyzerWrapper ... it will let
you use different analyzers for different fields.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 08:39:35 2006
Return-Path: <java-user-return-19004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68276 invoked from network); 18 Feb 2006 08:39:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 08:39:34 -0000
Received: (qmail 86994 invoked by uid 500); 18 Feb 2006 08:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86958 invoked by uid 500); 18 Feb 2006 08:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86947 invoked by uid 99); 18 Feb 2006 08:39:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 00:39:29 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.87.59] (HELO web37406.mail.mud.yahoo.com) (209.191.87.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 18 Feb 2006 00:39:28 -0800
Received: (qmail 35027 invoked by uid 60001); 18 Feb 2006 08:39:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=a3sy2Pwa0J9za8yz0TQcYBekinBlD/1K2q3Zd7kMw7KAMFGGncvjTttHnBwzApO04EgPzAicjbAwopiY6xzS0lPIS75XkTAmOXuO4l3MERASrh0BHoV9jbqQ9EoCIYu2gXCXjyT+ddFCsZzc5OXuHOUlFz0vOdIeR57DKWZ3LsQ=  ;
Message-ID: <20060218083907.35025.qmail@web37406.mail.mud.yahoo.com>
Received: from [58.65.140.3] by web37406.mail.mud.yahoo.com via HTTP; Sat, 18 Feb 2006 08:39:07 GMT
Date: Sat, 18 Feb 2006 08:39:07 +0000 (GMT)
From: SOME ONE <sumvon@yahoo.com>
Subject: Re: Custom Sorting
To: java-user@lucene.apache.org
In-Reply-To: <43F6165C.7080003@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Yes, I could run two searches, but that means running
two searches for each request from user and that I
think doubles the job taking double time. Any
suggestions to do it more efficiently please ?

Thanks and Regards
Wiseman


--- "Michael D. Curtin" <mike@curtin.com> wrote:

> SOME ONE wrote:
> 
> > Hi,
> > 
> > I am using MultiFieldQueryParser (Lucene 1.9) to
> > search title and body fields in the documents. The
> > requirement is that documents with title match
> should
> > be returned before the documents with body match.
> > Using the default scoring, title matches do come
> > before the body matches. But, I also need the
> > documents with title matches sorted by date, and
> > documents with body matches sorted by date. i.e
> there
> > will be two groups of docs in the results, one
> with
> > title match and the other with just body match,
> the
> > first group of docs should come before the second
> > group, and each group should be sorted by date.
> 
> > I am not concerned with the Lucene scoring as the
> > documents are very short. So, I think, just two
> scores
> > as described above for the two groups of docs are
> > sufficient. I am new to Lucene and have been
looking
> > into its code trying to figure out how to achieve
> the
> > desired behaviour but can't seem to.
> 
> > Any help in this regard will be greatly
appreciated.


>
> Would it work to run 2 searches, one with only the
> title criteria and then 
> another with only the body criteria?
> 
> --MDC
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 11:11:28 2006
Return-Path: <java-user-return-19005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98698 invoked from network); 18 Feb 2006 11:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 11:11:28 -0000
Received: (qmail 50661 invoked by uid 500); 18 Feb 2006 11:11:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50613 invoked by uid 500); 18 Feb 2006 11:11:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50602 invoked by uid 99); 18 Feb 2006 11:11:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 03:11:23 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.179.217] (HELO web36103.mail.mud.yahoo.com) (66.163.179.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 18 Feb 2006 03:11:21 -0800
Received: (qmail 68803 invoked by uid 60001); 18 Feb 2006 11:11:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=CvephrCUniaXkGjRLzL5+Tx9FK6ouUheUISUo/QZIw/DbotPj3mZhH6XtJ3ulIxXzYDhsN0Dbr93TlztQNytMy5gq7Vv4VpqqIkKe1ViJZZ+3R8YjHP6+YakrMtFdc3uh7IRXYKeww0MU7uQh4lGT4rXDJX3P4q6jJHMmpV3W0A=  ;
Message-ID: <20060218111100.68801.qmail@web36103.mail.mud.yahoo.com>
Received: from [203.197.47.185] by web36103.mail.mud.yahoo.com via HTTP; Sat, 18 Feb 2006 03:11:00 PST
Date: Sat, 18 Feb 2006 03:11:00 -0800 (PST)
From: revati joshi <revati_joshi83@yahoo.com>
Subject: Indexing problem
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2037324151-1140261060=:65499"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-2037324151-1140261060=:65499
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
       i'm facing problem while indexing the files .There r some files which r not in normal ASCII format having ASCII characters but r in some arabic,french format which i don't want to index those files.
  Because of these files my indexing process gets halted in between.so is there any class in Lucene to ignore such files.
  plz suggest some solution to this.
  Thnkx for ur cooperation in advance.
                                                         regards,
                                                          Revati.

		
---------------------------------
 
 What are the most popular cars? Find out at Yahoo! Autos 
--0-2037324151-1140261060=:65499--

From java-user-return-19006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 12:12:55 2006
Return-Path: <java-user-return-19006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11043 invoked from network); 18 Feb 2006 12:12:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 12:12:55 -0000
Received: (qmail 81608 invoked by uid 500); 18 Feb 2006 12:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81578 invoked by uid 500); 18 Feb 2006 12:12:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81567 invoked by uid 99); 18 Feb 2006 12:12:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 04:12:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 04:12:45 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9161A33D2DB; Sat, 18 Feb 2006 07:12:24 -0500 (EST)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 8433C33D2DA
	for <java-user@lucene.apache.org>; Sat, 18 Feb 2006 07:12:21 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20060218111100.68801.qmail@web36103.mail.mud.yahoo.com>
References: <20060218111100.68801.qmail@web36103.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7E730E0C-017D-4321-B944-A12CE519BAF2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing problem
Date: Sat, 18 Feb 2006 07:12:22 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 18, 2006, at 6:11 AM, revati joshi wrote:
>        i'm facing problem while indexing the files .There r some  
> files which r not in normal ASCII format having ASCII characters  
> but r in some arabic,french format which i don't want to index  
> those files.
>   Because of these files my indexing process gets halted in  
> between.so is there any class in Lucene to ignore such files.
>   plz suggest some solution to this.

No, there is nothing in Lucene to help you here.  Lucene does not  
deal with files, only text.  It is your application that needs to  
deal with files appropriately.  Perhaps you could simply catch and  
ignore exceptions to deal with this situation?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 12:55:05 2006
Return-Path: <java-user-return-19007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21345 invoked from network); 18 Feb 2006 12:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 12:55:05 -0000
Received: (qmail 2165 invoked by uid 500); 18 Feb 2006 12:55:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2128 invoked by uid 500); 18 Feb 2006 12:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2117 invoked by uid 99); 18 Feb 2006 12:54:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 04:54:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.197 as permitted sender)
Received: from [205.158.62.197] (HELO ws6-2.us4.outblaze.com) (205.158.62.197)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 18 Feb 2006 04:54:58 -0800
Received: (qmail 12365 invoked from network); 18 Feb 2006 12:54:38 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-2.us4.outblaze.com with SMTP; 18 Feb 2006 12:54:38 -0000
Message-ID: <43F7190C.1030901@curtin.com>
Date: Sat, 18 Feb 2006 07:54:36 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Custom Sorting
References: <20060218083907.35025.qmail@web37406.mail.mud.yahoo.com>
In-Reply-To: <20060218083907.35025.qmail@web37406.mail.mud.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SOME ONE wrote:

> Yes, I could run two searches, but that means running
> two searches for each request from user and that I
> think doubles the job taking double time. Any
> suggestions to do it more efficiently please ?

I think it would only take double time if the sets of hit documents have 
substantial overlap, i.e. most of the documents meet both sets of criteria. 
If the sets of documents are mainly disjoint, the time wouldn't matter much 
(since the same index data structures have to be traversed either way).

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 15:18:30 2006
Return-Path: <java-user-return-19008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60069 invoked from network); 18 Feb 2006 15:18:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 15:18:29 -0000
Received: (qmail 63360 invoked by uid 500); 18 Feb 2006 15:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63321 invoked by uid 500); 18 Feb 2006 15:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63310 invoked by uid 99); 18 Feb 2006 15:18:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 07:18:24 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.87.54] (HELO web37401.mail.mud.yahoo.com) (209.191.87.54)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 18 Feb 2006 07:18:23 -0800
Received: (qmail 17935 invoked by uid 60001); 18 Feb 2006 15:18:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zGq/Vioqv/YSi3PTG6KhVOePDlrdbswwtcmRpiyF8GoQwjj6TwwdpnsJb9J+/jc+sN8vPAwvJUX/1TIL+9qb3SfIK7eHZmXX0O/AFnwRXqGbC3xnUk/Nkpl7iD1U3vF6FjKPsEQU/G9OiV1dmzhf+tI7qtN2NuiuoM2HpSSNoAY=  ;
Message-ID: <20060218151802.17933.qmail@web37401.mail.mud.yahoo.com>
Received: from [58.65.140.3] by web37401.mail.mud.yahoo.com via HTTP; Sat, 18 Feb 2006 15:18:02 GMT
Date: Sat, 18 Feb 2006 15:18:02 +0000 (GMT)
From: SOME ONE <sumvon@yahoo.com>
Subject: Re: Custom Sorting
To: java-user@lucene.apache.org
In-Reply-To: <43F7190C.1030901@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Well, I gave more thought to your suggestion and came
to the conclusion that I can not even run 2 searches.
The reason being, as I mentioned in my first message,
I am using MultiFieldQueryParser to search title and
body fields. Search terms can be found anywhere,
either in title or body or both, so I can not just run
2 searches, one with only the title criteria and then
another with only the body criteria.
By a "title match" I actually meant "at least one
search term finds a match in title", the rest of the
terms must also be found somewhere (I use AND operator
by default), and by a "body match" I meant "no term
got a match in title", so all the terms are found in
body only. I think I better re-explain my question:

I am using MultiFieldQueryParser (Lucene 1.9) to
search title and body fields in the documents. The
requirement is that documents with title match (at
least one search term finds a match in title) should
be returned before the documents with just body match
(no term got a match in title, all found in body
only). I use AND operator by default, so all the terms
must be found somewhere.

Using the default scoring, title matches do come
before the just body matches. But, I also need the
documents with title matches sorted by date, and
documents with just body matches sorted by date. i.e
there will be two groups of docs in the results, one
with title match and the other with just body match,
the first group of docs should come before the second
group, and each group should be sorted by date.

I am not concerned with the Lucene scoring as the
documents are very short. So, I think, just two scores
as described above for the two groups of docs would be
sufficient?

BTW, all the terms present in title are always present
in body as well.

Really appreciate your interest and help, any more
suggestions how to achieve the desired behaviour
please?

Thanks and Regards
Wiseman


--- "Michael D. Curtin" <mike@curtin.com> wrote:

> SOME ONE wrote:
> 
> > Yes, I could run two searches, but that means
> running
> > two searches for each request from user and that I
> > think doubles the job taking double time. Any
> > suggestions to do it more efficiently please ?
> 
> I think it would only take double time if the sets
> of hit documents have 
> substantial overlap, i.e. most of the documents meet
> both sets of criteria. 
> If the sets of documents are mainly disjoint, the
> time wouldn't matter much 
> (since the same index data structures have to be
> traversed either way).
> 
> --MDC
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 15:29:53 2006
Return-Path: <java-user-return-19009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62717 invoked from network); 18 Feb 2006 15:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 15:29:53 -0000
Received: (qmail 68623 invoked by uid 500); 18 Feb 2006 15:29:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68599 invoked by uid 500); 18 Feb 2006 15:29:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68588 invoked by uid 99); 18 Feb 2006 15:29:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 07:29:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 07:29:46 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1IFT567030505
	for <java-user@lucene.apache.org>; Sat, 18 Feb 2006 16:29:05 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [267.15.11/264]); Sat, 18 Feb 2006 16:28:54 +0100
Message-ID: <43F73D36.9010800@isb-sib.ch>
Date: Sat, 18 Feb 2006 16:28:54 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: QueryPrinter?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I need to parse a query string, modify it a bit, and then output the 
modified query string. This works quite well with query.toString(), except 
that when I parse the query I set DEFAULT_OPERATOR_AND, and the output of 
BooleanQuery.toString() assumes DEFAULT_OPERATOR_OR... Would be great if 
this behavior could be changed through a static field, or perhaps someone 
has already written some kind of QueryPrinter that is a bit more flexible?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 16:15:59 2006
Return-Path: <java-user-return-19010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72832 invoked from network); 18 Feb 2006 16:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 16:15:59 -0000
Received: (qmail 92613 invoked by uid 500); 18 Feb 2006 16:15:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92545 invoked by uid 500); 18 Feb 2006 16:15:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92534 invoked by uid 99); 18 Feb 2006 16:15:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 08:15:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.152 as permitted sender)
Received: from [205.158.62.152] (HELO ws6-5.us4.outblaze.com) (205.158.62.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 18 Feb 2006 08:15:52 -0800
Received: (qmail 24215 invoked from network); 18 Feb 2006 16:15:31 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-5.us4.outblaze.com with SMTP; 18 Feb 2006 16:15:31 -0000
Message-ID: <43F74823.2080009@curtin.com>
Date: Sat, 18 Feb 2006 11:15:31 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Custom Sorting
References: <20060218151802.17933.qmail@web37401.mail.mud.yahoo.com>
In-Reply-To: <20060218151802.17933.qmail@web37401.mail.mud.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm not sure you can do what you want in a single search.  But, I'm not sure I 
actually understand what your queries look like, either.  I *think* you want 
to search like

(title:a OR body:a) AND (title:b OR body:b) AND (title:c OR body:c)

not something like

(title:a OR title:b OR title:c) AND (body:a OR body:b OR body:c)

or maybe something else altogether.  If it's the former, and your data really 
has the title's text duplicated in the body, then I think you should run 2 
searches, like this:

#1	body:a AND body:b AND body:c
#2	title:a OR title:b OR title:c

#1 tells you whether you get a hit at all, and #2 tells you whether the title 
field was involved.  Putting the same criterion on title as on body in a given 
query is redundant, because there's nothing in title that isn't also in body. 
  You might even be able to do something like running #1, then using its 
results as a Filter for #2.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 20:38:43 2006
Return-Path: <java-user-return-19011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53390 invoked from network); 18 Feb 2006 20:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 20:38:43 -0000
Received: (qmail 10943 invoked by uid 500); 18 Feb 2006 20:38:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10898 invoked by uid 500); 18 Feb 2006 20:38:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10887 invoked by uid 99); 18 Feb 2006 20:38:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 12:38:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of aseldawy@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO xproxy.gmail.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 12:38:37 -0800
Received: by xproxy.gmail.com with SMTP id s12so506759wxc
        for <java-user@lucene.apache.org>; Sat, 18 Feb 2006 12:38:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=AdU5W4sxKglR26cUsnWghh1tSOZTJTb+kBD5jR61YXEb10L6DDNnummD1gmzQHE8k7ckwiI/098awAAkPy0pdQ96UUMerXT+Tt5l80Qubszlr4lzFy/muY5yUEEZnb6WC4iTYCnjLNJyTN00tQvYB7UHuSUXxm1myo934ONHk54=
Received: by 10.70.15.7 with SMTP id 7mr2394382wxo;
        Sat, 18 Feb 2006 12:38:16 -0800 (PST)
Received: by 10.70.23.13 with HTTP; Sat, 18 Feb 2006 12:38:16 -0800 (PST)
Message-ID: <e5de07e90602181238i103ff532r71ef3eab776698ac@mail.gmail.com>
Date: Sat, 18 Feb 2006 22:38:16 +0200
From: "Ahmed El-dawy" <aseldawy@gmail.com>
Reply-To: aseldawy@yahoo.com
To: java-user@lucene.apache.org
Subject: Accessing Lucene Index stored in a jar file
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
  Is there a way to access a Lucene Index which is stored inside a
.zip or .jar file?
This is important because my indexes are very large (> 200 M.B.) and I
need to compress them. I tried to store documents using
Store.COMPRESSED, but the compression ratio wasn't satisfying.
  I need to add the index to a jar file and access it (for read-only)
without extracting the zip file.

Thanks in advance
--
regards,
Ahmed Saad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 22:55:44 2006
Return-Path: <java-user-return-19012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92711 invoked from network); 18 Feb 2006 22:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 22:55:43 -0000
Received: (qmail 91139 invoked by uid 500); 18 Feb 2006 22:55:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91111 invoked by uid 500); 18 Feb 2006 22:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91100 invoked by uid 99); 18 Feb 2006 22:55:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 14:55:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.103.221.48] (HELO mta08-winn.ispmail.ntl.com) (81.103.221.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 14:55:36 -0800
Received: from aamta12-winn.ispmail.ntl.com ([81.103.221.35])
          by mta08-winn.ispmail.ntl.com with ESMTP
          id <20060218225513.NMGV29066.mta08-winn.ispmail.ntl.com@aamta12-winn.ispmail.ntl.com>;
          Sat, 18 Feb 2006 22:55:13 +0000
Received: from jhi ([81.98.13.34]) by aamta12-winn.ispmail.ntl.com
          with SMTP
          id <20060218225513.KUMV20737.aamta12-winn.ispmail.ntl.com@jhi>;
          Sat, 18 Feb 2006 22:55:13 +0000
Message-ID: <001701c634de$65cfa950$b900a8c0@jhi>
From: "gekkokid" <me@gekkokid.org.uk>
To: <java-user@lucene.apache.org>,
	<aseldawy@yahoo.com>
References: <e5de07e90602181238i103ff532r71ef3eab776698ac@mail.gmail.com>
Subject: Re: Accessing Lucene Index stored in a jar file
Date: Sat, 18 Feb 2006 22:55:19 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

couldnt you use the java zip library 
(http://java.sun.com/j2se/1.5.0/docs/api/java/util/zip/package-summary.html)
and compress and uncompress it separately? just an idea

----- Original Message ----- 
From: "Ahmed El-dawy" <aseldawy@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Saturday, February 18, 2006 8:38 PM
Subject: Accessing Lucene Index stored in a jar file


Hello,
  Is there a way to access a Lucene Index which is stored inside a
.zip or .jar file?
This is important because my indexes are very large (> 200 M.B.) and I
need to compress them. I tried to store documents using
Store.COMPRESSED, but the compression ratio wasn't satisfying.
  I need to add the index to a jar file and access it (for read-only)
without extracting the zip file.

Thanks in advance
--
regards,
Ahmed Saad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 18 23:33:14 2006
Return-Path: <java-user-return-19013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3432 invoked from network); 18 Feb 2006 23:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Feb 2006 23:33:14 -0000
Received: (qmail 11095 invoked by uid 500); 18 Feb 2006 23:33:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11061 invoked by uid 500); 18 Feb 2006 23:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11032 invoked by uid 99); 18 Feb 2006 23:33:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 15:33:09 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.85] (HELO smtpout.mac.com) (17.250.248.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 15:33:08 -0800
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id k1INWlId002668
	for <java-user@lucene.apache.org>; Sat, 18 Feb 2006 15:32:48 -0800 (PST)
Received: from [131.111.248.102] (md403.quns.cam.ac.uk [131.111.248.102])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id k1INWiZt013846
	for <java-user@lucene.apache.org>; Sat, 18 Feb 2006 15:32:47 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v746.2)
Content-Transfer-Encoding: 7bit
Message-Id: <472A62DD-B7F7-4B72-8F09-D00F86D70FE0@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: Lucene Mailing List <java-user@lucene.apache.org>
From: Michael Dodson <mgdodson@mac.com>
Subject: Rebuilding after modifying JSP's
Date: Sat, 18 Feb 2006 23:32:43 +0000
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've been trying to use ant to rebuild lucene after toying with the  
source.  I am getting an error message I don't understand (though I  
am admittedly new to ant).  The error is below.  Any help is greatly  
appreciated.  Thank you.

Buildfile: build.xml

BUILD FAILED
/Users/michaeldodson/lucene-1.4.3/build.xml:2: Unexpected element "{} 
HTML" {antlib:org.apache.tools.ant}HTML

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 01:09:35 2006
Return-Path: <java-user-return-19014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28292 invoked from network); 19 Feb 2006 01:09:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 01:09:35 -0000
Received: (qmail 52087 invoked by uid 500); 19 Feb 2006 01:09:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52044 invoked by uid 500); 19 Feb 2006 01:09:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52033 invoked by uid 99); 19 Feb 2006 01:09:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 17:09:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 17:09:26 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EC2CD33CF20; Sat, 18 Feb 2006 20:09:05 -0500 (EST)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 22DCE33CF1F
	for <java-user@lucene.apache.org>; Sat, 18 Feb 2006 20:09:03 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <472A62DD-B7F7-4B72-8F09-D00F86D70FE0@mac.com>
References: <472A62DD-B7F7-4B72-8F09-D00F86D70FE0@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <98CB672A-5660-4763-B56B-E3025151A056@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Rebuilding after modifying JSP's
Date: Sat, 18 Feb 2006 20:09:02 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What version of Ant?   Did you modify build.xml?

	Erik


On Feb 18, 2006, at 6:32 PM, Michael Dodson wrote:

> I've been trying to use ant to rebuild lucene after toying with the  
> source.  I am getting an error message I don't understand (though I  
> am admittedly new to ant).  The error is below.  Any help is  
> greatly appreciated.  Thank you.
>
> Buildfile: build.xml
>
> BUILD FAILED
> /Users/michaeldodson/lucene-1.4.3/build.xml:2: Unexpected element  
> "{}HTML" {antlib:org.apache.tools.ant}HTML
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 07:05:59 2006
Return-Path: <java-user-return-19015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4341 invoked from network); 19 Feb 2006 07:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 07:05:59 -0000
Received: (qmail 26029 invoked by uid 500); 19 Feb 2006 07:05:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26007 invoked by uid 500); 19 Feb 2006 07:05:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25996 invoked by uid 99); 19 Feb 2006 07:05:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 23:05:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of aseldawy@gmail.com designates 66.249.82.203 as permitted sender)
Received: from [66.249.82.203] (HELO xproxy.gmail.com) (66.249.82.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 23:05:53 -0800
Received: by xproxy.gmail.com with SMTP id t4so547822wxc
        for <java-user@lucene.apache.org>; Sat, 18 Feb 2006 23:05:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=R9PbmLNaCARU9EJIW6ultm26B52XpGii/qlbfYDOiDeQxrzs/WJscWEmyhunZ0NVetVau/KhP8gnhUIrRyr8+wkxO6nSMcvy8hVNiWmaes4kDnxsK/ULTisaB2mLlrdUGw1UOum5S5n2wzj8MwK9nYaIOuvmuDd3BYJJTRKlDgA=
Received: by 10.70.84.10 with SMTP id h10mr2668660wxb;
        Sat, 18 Feb 2006 23:05:32 -0800 (PST)
Received: by 10.70.23.13 with HTTP; Sat, 18 Feb 2006 23:05:32 -0800 (PST)
Message-ID: <e5de07e90602182305s189486eka6b159c90e2f9354@mail.gmail.com>
Date: Sun, 19 Feb 2006 09:05:32 +0200
From: "Ahmed El-dawy" <aseldawy@gmail.com>
Reply-To: aseldawy@yahoo.com
To: java-user@lucene.apache.org
Subject: Re: Accessing Lucene Index stored in a jar file
In-Reply-To: <001701c634de$65cfa950$b900a8c0@jhi>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <e5de07e90602181238i103ff532r71ef3eab776698ac@mail.gmail.com>
	 <001701c634de$65cfa950$b900a8c0@jhi>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I need to access it as it is in the zip file. IndexSearcher cannot be
constructed using a zip file or a stream to a file. It can be
constructed to either FSDirectory or RAMDirectory. Both are not useful
in my case.

On 2/19/06, gekkokid <me@gekkokid.org.uk> wrote:
> couldnt you use the java zip library
> (http://java.sun.com/j2se/1.5.0/docs/api/java/util/zip/package-summary.ht=
ml)
> and compress and uncompress it separately? just an idea
>
> ----- Original Message -----
> From: "Ahmed El-dawy" <aseldawy@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Saturday, February 18, 2006 8:38 PM
> Subject: Accessing Lucene Index stored in a jar file
>
>
> Hello,
>   Is there a way to access a Lucene Index which is stored inside a
> .zip or .jar file?
> This is important because my indexes are very large (> 200 M.B.) and I
> need to compress them. I tried to store documents using
> Store.COMPRESSED, but the compression ratio wasn't satisfying.
>   I need to add the index to a jar file and access it (for read-only)
> without extracting the zip file.
>
> Thanks in advance
> --
> regards,
> Ahmed Saad
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
regards,
Ahmed Saad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 07:56:57 2006
Return-Path: <java-user-return-19016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12935 invoked from network); 19 Feb 2006 07:56:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 07:56:56 -0000
Received: (qmail 43523 invoked by uid 500); 19 Feb 2006 07:56:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43499 invoked by uid 500); 19 Feb 2006 07:56:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43488 invoked by uid 99); 19 Feb 2006 07:56:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 23:56:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [196.204.163.100] (HELO SEXGW3K-H2010.local.bibalex.dom) (196.204.163.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Feb 2006 23:56:50 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: Accessing Lucene Index stored in a jar file
Date: Sun, 19 Feb 2006 09:56:25 +0200
Message-ID: <AAA84820D5874F46B68C394C41FBBB221D9AC6@SEXGW3K-H2010.local.bibalex.dom>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Accessing Lucene Index stored in a jar file
thread-index: AcY1IvJxsk8/xLKlRAexujZXS1YxeAABH0bw
From: "Waleed Tayea" <Waleed.Tayea@bibalex.org>
To: <java-user@lucene.apache.org>,
	<aseldawy@yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I think you should extend the Directory class to provide a direct access
to the zip file in which the index is stored, and then use that
implementation with IndexWriter and IndexSearcher.

----------------------------------------------------
Waleed Tayea

-----Original Message-----
From: Ahmed El-dawy [mailto:aseldawy@gmail.com]=20
Sent: Sunday, February 19, 2006 9:06 AM
To: java-user@lucene.apache.org
Subject: Re: Accessing Lucene Index stored in a jar file

I need to access it as it is in the zip file. IndexSearcher cannot be
constructed using a zip file or a stream to a file. It can be
constructed to either FSDirectory or RAMDirectory. Both are not useful
in my case.

On 2/19/06, gekkokid <me@gekkokid.org.uk> wrote:
> couldnt you use the java zip library
>
(http://java.sun.com/j2se/1.5.0/docs/api/java/util/zip/package-summary.h
tml)
> and compress and uncompress it separately? just an idea
>
> ----- Original Message -----
> From: "Ahmed El-dawy" <aseldawy@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Saturday, February 18, 2006 8:38 PM
> Subject: Accessing Lucene Index stored in a jar file
>
>
> Hello,
>   Is there a way to access a Lucene Index which is stored inside a
> .zip or .jar file?
> This is important because my indexes are very large (> 200 M.B.) and I
> need to compress them. I tried to store documents using
> Store.COMPRESSED, but the compression ratio wasn't satisfying.
>   I need to add the index to a jar file and access it (for read-only)
> without extracting the zip file.
>
> Thanks in advance
> --
> regards,
> Ahmed Saad
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
regards,
Ahmed Saad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 08:22:28 2006
Return-Path: <java-user-return-19017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22804 invoked from network); 19 Feb 2006 08:22:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 08:22:28 -0000
Received: (qmail 51692 invoked by uid 500); 19 Feb 2006 08:22:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51660 invoked by uid 500); 19 Feb 2006 08:22:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51645 invoked by uid 99); 19 Feb 2006 08:22:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 00:22:22 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 19 Feb 2006 00:22:21 -0800
Received: (qmail 50362 invoked by uid 60001); 19 Feb 2006 08:22:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=enDwCVECcX5jic0MpPsWDz2NXPqv5Y7EXFT0f8SUC3kD5DGalMu5cgnVHda+hTzvzToFh3fX0VNb8ydaLsHIYbW5Zjanl8TiZo+4j4OjQ4IoTIUtd9zlWVyQYqUEKVGRPNwHK2hGaINgKmzzcI0ePem0OlOA5J/obevMqfVq7pI=  ;
Message-ID: <20060219082200.50360.qmail@web50301.mail.yahoo.com>
Date: Sun, 19 Feb 2006 00:22:00 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Accessing Lucene Index stored in a jar file
To: java-user@lucene.apache.org
In-Reply-To: <e5de07e90602181238i103ff532r71ef3eab776698ac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Try talking to these people: http://www.google.com/search?ie=UTF-8&oe=UTF-8&q=jardirectory%20lucene

----- Original Message ----
From: Ahmed El-dawy <aseldawy@gmail.com>
To: java-user@lucene.apache.org
Sent: Saturday, February 18, 2006 3:38:16 PM
Subject: Accessing Lucene Index stored in a jar file

Hello,
  Is there a way to access a Lucene Index which is stored inside a
.zip or .jar file?
This is important because my indexes are very large (> 200 M.B.) and I
need to compress them. I tried to store documents using
Store.COMPRESSED, but the compression ratio wasn't satisfying.
  I need to add the index to a jar file and access it (for read-only)
without extracting the zip file.

Thanks in advance
--
regards,
Ahmed Saad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 13:34:22 2006
Return-Path: <java-user-return-19018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94976 invoked from network); 19 Feb 2006 13:34:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 13:34:22 -0000
Received: (qmail 4315 invoked by uid 500); 19 Feb 2006 13:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4283 invoked by uid 500); 19 Feb 2006 13:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4272 invoked by uid 99); 19 Feb 2006 13:34:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 05:34:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of aseldawy@gmail.com designates 66.249.82.205 as permitted sender)
Received: from [66.249.82.205] (HELO xproxy.gmail.com) (66.249.82.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 05:34:14 -0800
Received: by xproxy.gmail.com with SMTP id s12so563263wxc
        for <java-user@lucene.apache.org>; Sun, 19 Feb 2006 05:33:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UabGFyogU9v6eODfqIvDlXWJGc8eoilMA0T/Ij+/KZaBwrklIrpXPU4PddiQm8SQXTTXJxvnIPVSyZuBr+s9LFYCz8WD6z9hsYXTBeEXb0Wi9eG+mZ9ebc5WaidiTrQ7n8klVYcOFsZt2z6K995J7MQdlzgOpYtXSNMNY49tM0k=
Received: by 10.70.34.12 with SMTP id h12mr2741056wxh;
        Sun, 19 Feb 2006 05:33:53 -0800 (PST)
Received: by 10.70.23.13 with HTTP; Sun, 19 Feb 2006 05:33:53 -0800 (PST)
Message-ID: <e5de07e90602190533k3c63c461sc2da5292b272a11c@mail.gmail.com>
Date: Sun, 19 Feb 2006 15:33:53 +0200
From: "Ahmed El-dawy" <aseldawy@gmail.com>
Reply-To: aseldawy@yahoo.com
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Accessing Lucene Index stored in a jar file
In-Reply-To: <20060219082200.50360.qmail@web50301.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <e5de07e90602181238i103ff532r71ef3eab776698ac@mail.gmail.com>
	 <20060219082200.50360.qmail@web50301.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for your response.
You are both right.
As I didn't find an already made implementation for this, I am now
working in ZipDirectory class and I will send it to you as I finish
it.

Thanks alot
Ahmed Saad

On 2/19/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Try talking to these people: http://www.google.com/search?ie=3DUTF-8&oe=
=3DUTF-8&q=3Djardirectory%20lucene
>
> ----- Original Message ----
> From: Ahmed El-dawy <aseldawy@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, February 18, 2006 3:38:16 PM
> Subject: Accessing Lucene Index stored in a jar file
>
> Hello,
>   Is there a way to access a Lucene Index which is stored inside a
> .zip or .jar file?
> This is important because my indexes are very large (> 200 M.B.) and I
> need to compress them. I tried to store documents using
> Store.COMPRESSED, but the compression ratio wasn't satisfying.
>   I need to add the index to a jar file and access it (for read-only)
> without extracting the zip file.
>
> Thanks in advance
> --
> regards,
> Ahmed Saad
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
regards,
Ahmed Saad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 15:42:16 2006
Return-Path: <java-user-return-19019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33902 invoked from network); 19 Feb 2006 15:42:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 15:42:16 -0000
Received: (qmail 57028 invoked by uid 500); 19 Feb 2006 15:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56967 invoked by uid 500); 19 Feb 2006 15:42:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56955 invoked by uid 99); 19 Feb 2006 15:42:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 07:42:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of aseldawy@gmail.com designates 66.249.82.199 as permitted sender)
Received: from [66.249.82.199] (HELO xproxy.gmail.com) (66.249.82.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 07:42:10 -0800
Received: by xproxy.gmail.com with SMTP id s8so578738wxc
        for <java-user@lucene.apache.org>; Sun, 19 Feb 2006 07:41:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dVCnqUFbvF/1Jrzjly5kz52rd0tFmwZM8Jd+NWhlrpmT1T6wWJEF2WHevDWX9BjSPIxQYd/Xp+dJhiKBcTcgZK0rNKkcY5ZwDbGwqu+DERGqiPrKy9pgNzew0Ckgkot2IDyChK1wk1ZL8JTYbM2JGw+ahLGz+xsj+0pb8hDmRLs=
Received: by 10.70.15.7 with SMTP id 7mr2904384wxo;
        Sun, 19 Feb 2006 07:41:49 -0800 (PST)
Received: by 10.70.23.13 with HTTP; Sun, 19 Feb 2006 07:41:49 -0800 (PST)
Message-ID: <e5de07e90602190741n7b6ea08ekc73c7bf2df051c1a@mail.gmail.com>
Date: Sun, 19 Feb 2006 17:41:49 +0200
From: "Ahmed El-dawy" <aseldawy@gmail.com>
Reply-To: aseldawy@yahoo.com
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Accessing Lucene Index stored in a jar file
In-Reply-To: <e5de07e90602190533k3c63c461sc2da5292b272a11c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <e5de07e90602181238i103ff532r71ef3eab776698ac@mail.gmail.com>
	 <20060219082200.50360.qmail@web50301.mail.yahoo.com>
	 <e5de07e90602190533k3c63c461sc2da5292b272a11c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think it is not an easy task!!!
java.util.zip does not support random access to files inside an archive.
Lucene Directory requires files inside the directory to be accessed randome=
ly.
Does anyone know a library to load archive files and gives a random
access to archived files?


On 2/19/06, Ahmed El-dawy <aseldawy@gmail.com> wrote:
> Thanks for your response.
> You are both right.
> As I didn't find an already made implementation for this, I am now
> working in ZipDirectory class and I will send it to you as I finish
> it.
>
> Thanks alot
> Ahmed Saad
>
> On 2/19/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > Try talking to these people: http://www.google.com/search?ie=3DUTF-8&oe=
=3DUTF-8&q=3Djardirectory%20lucene
> >
> > ----- Original Message ----
> > From: Ahmed El-dawy <aseldawy@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Saturday, February 18, 2006 3:38:16 PM
> > Subject: Accessing Lucene Index stored in a jar file
> >
> > Hello,
> >   Is there a way to access a Lucene Index which is stored inside a
> > .zip or .jar file?
> > This is important because my indexes are very large (> 200 M.B.) and I
> > need to compress them. I tried to store documents using
> > Store.COMPRESSED, but the compression ratio wasn't satisfying.
> >   I need to add the index to a jar file and access it (for read-only)
> > without extracting the zip file.
> >
> > Thanks in advance
> > --
> > regards,
> > Ahmed Saad
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> regards,
> Ahmed Saad
>


--
regards,
Ahmed Saad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 16:23:25 2006
Return-Path: <java-user-return-19020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46758 invoked from network); 19 Feb 2006 16:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 16:23:25 -0000
Received: (qmail 75701 invoked by uid 500); 19 Feb 2006 16:23:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75668 invoked by uid 500); 19 Feb 2006 16:23:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75657 invoked by uid 99); 19 Feb 2006 16:23:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 08:23:21 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.46] (HELO smtpout.mac.com) (17.250.248.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 08:23:20 -0800
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout10/MantshX 4.0) with ESMTP id k1JGMxng010027
	for <java-user@lucene.apache.org>; Sun, 19 Feb 2006 08:22:59 -0800 (PST)
Received: from [131.111.248.102] (md403.quns.cam.ac.uk [131.111.248.102])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id k1JGMv4s018863
	for <java-user@lucene.apache.org>; Sun, 19 Feb 2006 08:22:59 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <98CB672A-5660-4763-B56B-E3025151A056@ehatchersolutions.com>
References: <472A62DD-B7F7-4B72-8F09-D00F86D70FE0@mac.com> <98CB672A-5660-4763-B56B-E3025151A056@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <98A08840-8EBF-4EA9-9D6F-D8724E967044@mac.com>
Content-Transfer-Encoding: 7bit
From: Michael Dodson <mgdodson@mac.com>
Subject: Re: Rebuilding after modifying JSP's
Date: Sun, 19 Feb 2006 16:22:58 +0000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ant 1.6.5

No, I didn't make any modifications to the build file.

Mike


On Feb 19, 2006, at 1:09 AM, Erik Hatcher wrote:

> What version of Ant?   Did you modify build.xml?
>
> 	Erik
>
>
> On Feb 18, 2006, at 6:32 PM, Michael Dodson wrote:
>
>> I've been trying to use ant to rebuild lucene after toying with  
>> the source.  I am getting an error message I don't understand  
>> (though I am admittedly new to ant).  The error is below.  Any  
>> help is greatly appreciated.  Thank you.
>>
>> Buildfile: build.xml
>>
>> BUILD FAILED
>> /Users/michaeldodson/lucene-1.4.3/build.xml:2: Unexpected element  
>> "{}HTML" {antlib:org.apache.tools.ant}HTML
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 22:07:15 2006
Return-Path: <java-user-return-19021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45585 invoked from network); 19 Feb 2006 22:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 22:07:15 -0000
Received: (qmail 44418 invoked by uid 500); 19 Feb 2006 22:07:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43932 invoked by uid 500); 19 Feb 2006 22:07:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43921 invoked by uid 99); 19 Feb 2006 22:07:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 14:07:10 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [196.7.150.227] (HELO www.loot.co.za) (196.7.150.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 19 Feb 2006 14:07:09 -0800
Received: (qmail 8554 invoked from network); 19 Feb 2006 22:06:45 -0000
Received: from unknown (HELO sun.loot.co.za) (10.1.0.2)
  by 0 with SMTP; 19 Feb 2006 22:06:45 -0000
Received: (qmail 14706 invoked by uid 7791); 19 Feb 2006 22:06:42 -0000
Received: from unknown (HELO mars) (192.168.2.1)
  by 0 with SMTP; 19 Feb 2006 22:06:42 -0000
Message-ID: <013101c635a0$c40306d0$0102a8c0@loot.co.za>
From: "Michael van Rooyen" <mvanr@bigfoot.com>
To: <java-user@lucene.apache.org>
Subject: Index missing documents
Date: Mon, 20 Feb 2006 00:06:42 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Spam-Checker-Version: SpamAssassin 3.0.2 (2004-11-16) on sun.loot.co.za
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.8 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.2
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

While building a large index, we had a power outage.  Over 2 million 
documents had been added, each document with up to about 20 fields.  The 
size of the index on disk is ~500MB.  When I started the process up again, I 
noticed that documents that should have been in the index were missing.  In 
retrospect, I think that Lucene was seeing the index as being completely 
empty (it now says there are 385 docs in the index, but all of those have 
been added since the power outage).  The size on disk is still ~500MB.  Does 
anyone have an idea what might cause the documents to dissappear, and what 
can be done to get them back?  Rebuilding takes a while at 100ms per 
document, but it's a bit more concerning if such a outage or crash could 
cause documents to mysteriously dissapear from the index...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 23:26:59 2006
Return-Path: <java-user-return-19022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66556 invoked from network); 19 Feb 2006 23:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 23:26:58 -0000
Received: (qmail 11758 invoked by uid 500); 19 Feb 2006 23:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11617 invoked by uid 500); 19 Feb 2006 23:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11566 invoked by uid 99); 19 Feb 2006 23:26:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 15:26:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [24.222.0.30] (HELO smtpout.eastlink.ca) (24.222.0.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 15:26:40 -0800
Received: from ip01.eastlink.ca ([24.222.10.5])
 by mta01.eastlink.ca (Sun Java System Messaging Server 6.2-4.03 (built Sep 22
 2005)) with ESMTP id <0IUY0090TJQAJOX0@mta01.eastlink.ca> for
 java-user@lucene.apache.org; Sun, 19 Feb 2006 19:25:22 -0400 (AST)
Received: from blk-224-233-28.eastlink.ca (HELO [192.168.0.2])
 ([24.224.233.28]) by ip01.eastlink.ca with ESMTP; Sun,
 19 Feb 2006 19:26:14 -0400
Date: Sun, 19 Feb 2006 19:26:12 -0400
From: Chris Brown <chris_b@orangepics.com>
Subject: Re: Accessing Lucene Index stored in a jar file
In-reply-to: <e5de07e90602190741n7b6ea08ekc73c7bf2df051c1a@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <43F8FE94.404@orangepics.com>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
References: <e5de07e90602181238i103ff532r71ef3eab776698ac@mail.gmail.com>
 <20060219082200.50360.qmail@web50301.mail.yahoo.com>
 <e5de07e90602190533k3c63c461sc2da5292b272a11c@mail.gmail.com>
 <e5de07e90602190741n7b6ea08ekc73c7bf2df051c1a@mail.gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't know anything about it, but there's a library called TrueZip 
(https://truezip.dev.java.net/) that apparently is "a drop-in 
replacement for the File I/O classes in the J2SE API". Maybe it will 
allow random access. I heard about on the Java Posse Pod Cast 
(http://javaposse.com/)


Ahmed El-dawy wrote:
> I think it is not an easy task!!!
> java.util.zip does not support random access to files inside an archive.
> Lucene Directory requires files inside the directory to be accessed randomely.
> Does anyone know a library to load archive files and gives a random
> access to archived files?
> 
> 
> On 2/19/06, Ahmed El-dawy <aseldawy@gmail.com> wrote:
>> Thanks for your response.
>> You are both right.
>> As I didn't find an already made implementation for this, I am now
>> working in ZipDirectory class and I will send it to you as I finish
>> it.
>>
>> Thanks alot
>> Ahmed Saad
>>
>> On 2/19/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>>> Try talking to these people: http://www.google.com/search?ie=UTF-8&oe=UTF-8&q=jardirectory%20lucene
>>>
>>> ----- Original Message ----
>>> From: Ahmed El-dawy <aseldawy@gmail.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Saturday, February 18, 2006 3:38:16 PM
>>> Subject: Accessing Lucene Index stored in a jar file
>>>
>>> Hello,
>>>   Is there a way to access a Lucene Index which is stored inside a
>>> .zip or .jar file?
>>> This is important because my indexes are very large (> 200 M.B.) and I
>>> need to compress them. I tried to store documents using
>>> Store.COMPRESSED, but the compression ratio wasn't satisfying.
>>>   I need to add the index to a jar file and access it (for read-only)
>>> without extracting the zip file.
>>>
>>> Thanks in advance
>>> --
>>> regards,
>>> Ahmed Saad
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> --
>> regards,
>> Ahmed Saad
>>
> 
> 
> --
> regards,
> Ahmed Saad
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

-- 
Chris Brown
http://www.orangepics.com/
Simple, Safe, Photo Sharing

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 23:32:00 2006
Return-Path: <java-user-return-19023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67977 invoked from network); 19 Feb 2006 23:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 23:31:59 -0000
Received: (qmail 21840 invoked by uid 500); 19 Feb 2006 23:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21809 invoked by uid 500); 19 Feb 2006 23:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21798 invoked by uid 99); 19 Feb 2006 23:31:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 15:31:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 15:31:54 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 2A2EBB735C
	for <java-user@lucene.apache.org>; Mon, 20 Feb 2006 10:31:28 +1100 (EST)
Message-ID: <43F8FFB6.7080704@nuix.com.au>
Date: Mon, 20 Feb 2006 10:31:02 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting text for queries with huge numbers of terms
References: <43F54E2E.7030106@nuix.com.au> <43F58340.9070403@yahoo.co.uk>
In-Reply-To: <43F58340.9070403@yahoo.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

markharw00d wrote:
> Swing supports HTML and will do the highlight for you.
> SwingText="<html>"+highlighter.getBestFragment(tokenStream,text)+"</html>";
> 
> If you don't like that approach and really do just want to just know the 
> positions, plug in your own "Formatter" class which, instead of marking 
> up the text, silently records the hit position information provided to 
> it in the "TokenGroup" class and then return the original string without 
> adding any markup. TokenGroup handles the issue of identifying runs of 
> overlapping tokens for you.

Swing's HTML renderer is unfortunately too slow for our use (it took 
something like 10 seconds to load and display a 100kB document with 
highlights.)  It's pretty ugly, too.  Maybe that will change in version 
6.0, though.

The text renderer has a distinct advantage of being relatively fast for 
that size, but also the highlighting can be done after the text is 
displayed and even in the background, which is a huge benefit.

The way I would be able to use the existing highlighter would probably 
be to make a custom Formatter which takes a Swing Highlighter object and 
does the highlighting from there, and then run the highlighter in a new 
thread after the text is already displayed.

But...

> Hoss, your psuedo code looked like a solution for identifying phrase 
> queries.  Lack of proper support for phrase queries is a known issue 
> with the current highlighter but I thought the primary issue in question 
> here was speed?

Actually, we do need support for phrase queries (which pretty much rules 
out the existing highlighter code) but slop isn't as important.

> Not sure this helps for non-phrase queries.

Indeed, the speed will be roughly identical for non-phrase queries since 
lookups in a HashMap versus a HashSet would be pretty much identical.

> Also, I don't think hitting the index to work out 
> what terms were a hit for the doc in question in order to shorten the 
> list of terms to highlight  is likely to speed up things. If anything, 
> the extra disk IO is likely to slow it down.

That's a good point, particularly in the case of small documents.

We actually limit ourselves to 100k display at the moment because even 
JTextArea gets pretty inefficient once you get up to 1MB text sizes. 
The nasty part is that it can't load the text itself in the background 
-- the text component remains completely white until the entire text is 
present.  A custom Document implementation may be able to work around 
some of that, but the last time I tried it, there was some flicker each 
time more text was appended.  A completely custom component is probably 
the way to go. :-)

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 19 23:47:47 2006
Return-Path: <java-user-return-19024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73202 invoked from network); 19 Feb 2006 23:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Feb 2006 23:47:47 -0000
Received: (qmail 34382 invoked by uid 500); 19 Feb 2006 23:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34359 invoked by uid 500); 19 Feb 2006 23:47:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34348 invoked by uid 99); 19 Feb 2006 23:47:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 15:47:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 15:47:39 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7045B33CF2A; Sun, 19 Feb 2006 18:47:18 -0500 (EST)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 429A133CF28
	for <java-user@lucene.apache.org>; Sun, 19 Feb 2006 18:47:17 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <98A08840-8EBF-4EA9-9D6F-D8724E967044@mac.com>
References: <472A62DD-B7F7-4B72-8F09-D00F86D70FE0@mac.com> <98CB672A-5660-4763-B56B-E3025151A056@ehatchersolutions.com> <98A08840-8EBF-4EA9-9D6F-D8724E967044@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9174E679-3B84-4DA3-8F5D-1885D4193686@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Rebuilding after modifying JSP's
Date: Sun, 19 Feb 2006 18:47:14 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Feb 19, 2006, at 11:22 AM, Michael Dodson wrote:
> Ant 1.6.5
>
> No, I didn't make any modifications to the build file.

Something must be fishy with your Ant installation if you've not  
modified build.xml or any build related files.

Is it possible you have another version of Ant mixed in to your PATH  
or environment somehow?

	Erik


>
> Mike
>
>
> On Feb 19, 2006, at 1:09 AM, Erik Hatcher wrote:
>
>> What version of Ant?   Did you modify build.xml?
>>
>> 	Erik
>>
>>
>> On Feb 18, 2006, at 6:32 PM, Michael Dodson wrote:
>>
>>> I've been trying to use ant to rebuild lucene after toying with  
>>> the source.  I am getting an error message I don't understand  
>>> (though I am admittedly new to ant).  The error is below.  Any  
>>> help is greatly appreciated.  Thank you.
>>>
>>> Buildfile: build.xml
>>>
>>> BUILD FAILED
>>> /Users/michaeldodson/lucene-1.4.3/build.xml:2: Unexpected element  
>>> "{}HTML" {antlib:org.apache.tools.ant}HTML
>>>
>>> Mike
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 00:12:21 2006
Return-Path: <java-user-return-19025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77929 invoked from network); 20 Feb 2006 00:12:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 00:12:21 -0000
Received: (qmail 50826 invoked by uid 500); 20 Feb 2006 00:12:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50786 invoked by uid 500); 20 Feb 2006 00:12:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50775 invoked by uid 99); 20 Feb 2006 00:12:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 16:12:16 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.70] (HELO smtpout.mac.com) (17.250.248.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 16:12:15 -0800
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/8.12.11/smtpout13/MantshX 4.0) with ESMTP id k1K0Bst0026157
	for <java-user@lucene.apache.org>; Sun, 19 Feb 2006 16:11:55 -0800 (PST)
Received: from [131.111.248.102] (md403.quns.cam.ac.uk [131.111.248.102])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id k1K0BrL7023680
	for <java-user@lucene.apache.org>; Sun, 19 Feb 2006 16:11:54 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <9174E679-3B84-4DA3-8F5D-1885D4193686@ehatchersolutions.com>
References: <472A62DD-B7F7-4B72-8F09-D00F86D70FE0@mac.com> <98CB672A-5660-4763-B56B-E3025151A056@ehatchersolutions.com> <98A08840-8EBF-4EA9-9D6F-D8724E967044@mac.com> <9174E679-3B84-4DA3-8F5D-1885D4193686@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <243881DE-1A64-4B25-9360-0AF2EEDBD70F@mac.com>
Content-Transfer-Encoding: 7bit
From: Michael Dodson <mgdodson@mac.com>
Subject: Re: Rebuilding after modifying JSP's
Date: Mon, 20 Feb 2006 00:11:51 +0000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Well, Ant 1.6.5 is the only one I've ever had.  I just deleted the  
whole thing and reloaded it without any luck.

The path looks like this:

/usr/local/ant/bin

"ant" above is a soft link to apache-ant-1.6.5 (set up as instructed  
in the ant install docs).

Turns out this isn't a lucene isolated problem.  I'm getting the same  
error no matter what I try to build.  I suppose I should be asking  
the ant mailing list...

Thanks for the help.

Mike



On Feb 19, 2006, at 11:47 PM, Erik Hatcher wrote:

> On Feb 19, 2006, at 11:22 AM, Michael Dodson wrote:
>> Ant 1.6.5
>>
>> No, I didn't make any modifications to the build file.
>
> Something must be fishy with your Ant installation if you've not  
> modified build.xml or any build related files.
>
> Is it possible you have another version of Ant mixed in to your  
> PATH or environment somehow?
>
> 	Erik
>
>
>>
>> Mike
>>
>>
>> On Feb 19, 2006, at 1:09 AM, Erik Hatcher wrote:
>>
>>> What version of Ant?   Did you modify build.xml?
>>>
>>> 	Erik
>>>
>>>
>>> On Feb 18, 2006, at 6:32 PM, Michael Dodson wrote:
>>>
>>>> I've been trying to use ant to rebuild lucene after toying with  
>>>> the source.  I am getting an error message I don't understand  
>>>> (though I am admittedly new to ant).  The error is below.  Any  
>>>> help is greatly appreciated.  Thank you.
>>>>
>>>> Buildfile: build.xml
>>>>
>>>> BUILD FAILED
>>>> /Users/michaeldodson/lucene-1.4.3/build.xml:2: Unexpected  
>>>> element "{}HTML" {antlib:org.apache.tools.ant}HTML
>>>>
>>>> Mike
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 01:55:39 2006
Return-Path: <java-user-return-19026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7995 invoked from network); 20 Feb 2006 01:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 01:55:39 -0000
Received: (qmail 9435 invoked by uid 500); 20 Feb 2006 01:55:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9394 invoked by uid 500); 20 Feb 2006 01:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9383 invoked by uid 99); 20 Feb 2006 01:55:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 17:55:34 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.127.200.84] (HELO sccrmhc14.comcast.net) (204.127.200.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 17:55:33 -0800
Received: from ximpleware (c-24-6-90-145.hsd1.ca.comcast.net[24.6.90.145])
          by comcast.net (sccrmhc14) with SMTP
          id <2006022001551201400e2n3te>; Mon, 20 Feb 2006 01:55:12 +0000
Message-ID: <005101c635c0$aee39060$0d02a8c0@ximpleware>
From: "Jimmy Zhang" <crackeur@comcast.net>
To: <java-user@lucene.apache.org>
Subject: [ANN] VTD-XML Version 1.5 Released
Date: Sun, 19 Feb 2006 17:55:06 -0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_004C_01C6357D.9E3C8BB0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_004C_01C6357D.9E3C8BB0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Eight years after the invention of XML, DOM and SAX,=20
despite their respective issues, are still the mainstays=20
of application developers. =20
=20
So is it the end of road for XML parsing innovation?=20
=20
The VTD-XML project team think not. We are proud to=20
announce the availability of both C and Java version=20
1.5 of VTD-XML, the next generation open-source XML=20
parser that goes beyond DOM and SAX in terms of=20
performance, memory usage and ease of use.=20
=20
The technical highlights of VTD-XML are:=20

* Performance: the world's fastest XML parser,
  between 5x~10x faster than DOM
* Memory Usage: 3x to 5x less than DOM, 1.3x~1.5x
  XML document size
* Random access with built-in XPath support
* A simple and intuitive API=20

Other advanced features include:
* Buffer reuse
* Large document support (2GByte)
* Incremental update
* Hardware acceleration
* Native XML indexing.

For demos, latest benchmarks, related articles and software=20
downloads, please visit http://vtd-xml.sf.net. Also let us=20
know your thoughts and suggestions and help us improve=20
VTD-XML.


------=_NextPart_000_004C_01C6357D.9E3C8BB0--



From java-user-return-19027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 03:40:29 2006
Return-Path: <java-user-return-19027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40484 invoked from network); 20 Feb 2006 03:40:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 03:40:28 -0000
Received: (qmail 74306 invoked by uid 500); 20 Feb 2006 03:40:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74243 invoked by uid 500); 20 Feb 2006 03:40:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74229 invoked by uid 99); 20 Feb 2006 03:40:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Feb 2006 19:40:21 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 19 Feb 2006 19:40:20 -0800
Received: (qmail 38422 invoked by uid 60001); 20 Feb 2006 03:39:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=HIqgqiwp3NVkjP1cjyQllwH3X00JV3lddgTNqmYORYZWuhNVlzscKusajqc23d1sdu8K55/6R/U9OkmK+MrpFNWN1e/P9BFHktGXOnTN+cQqun39p56SwLONFrfPm/u1r+oPMXoSDrZwilwNljELqZKICdBtsY9AdTzegOyJ/u8=  ;
Message-ID: <20060220033956.38420.qmail@web50313.mail.yahoo.com>
Date: Sun, 19 Feb 2006 19:39:56 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index missing documents
To: java-user@lucene.apache.org
In-Reply-To: <013101c635a0$c40306d0$0102a8c0@loot.co.za>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is possible that your Documents were added to various index files, but those were not yet "registered" in the "segments" file.  Lucene knows only about index segments that are listed in segments file.  Any other files in the index directories are ignored.

Also, some Documents are kept in memory while indexing (see maxBufferedDocs in IndexWriter), so if a power outage happened before they were written to disk, they would be lost, too.

Otis

----- Original Message ----
From: Michael van Rooyen <mvanr@bigfoot.com>
To: java-user@lucene.apache.org
Sent: Sunday, February 19, 2006 5:06:42 PM
Subject: Index missing documents

While building a large index, we had a power outage.  Over 2 million 
documents had been added, each document with up to about 20 fields.  The 
size of the index on disk is ~500MB.  When I started the process up again, I 
noticed that documents that should have been in the index were missing.  In 
retrospect, I think that Lucene was seeing the index as being completely 
empty (it now says there are 385 docs in the index, but all of those have 
been added since the power outage).  The size on disk is still ~500MB.  Does 
anyone have an idea what might cause the documents to dissappear, and what 
can be done to get them back?  Rebuilding takes a while at 100ms per 
document, but it's a bit more concerning if such a outage or crash could 
cause documents to mysteriously dissapear from the index...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 08:20:59 2006
Return-Path: <java-user-return-19028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42603 invoked from network); 20 Feb 2006 08:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 08:20:58 -0000
Received: (qmail 83293 invoked by uid 500); 20 Feb 2006 08:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82282 invoked by uid 500); 20 Feb 2006 08:20:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82263 invoked by uid 99); 20 Feb 2006 08:20:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 00:20:52 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [196.7.150.227] (HELO www.loot.co.za) (196.7.150.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 00:20:51 -0800
Received: (qmail 14897 invoked from network); 20 Feb 2006 08:20:26 -0000
Received: from unknown (HELO sun.loot.co.za) (10.1.0.2)
  by 0 with SMTP; 20 Feb 2006 08:20:26 -0000
Received: (qmail 6762 invoked by uid 7791); 20 Feb 2006 08:20:22 -0000
Received: from unknown (HELO saturn) (192.168.0.2)
  by 0 with SMTP; 20 Feb 2006 08:20:22 -0000
Message-ID: <002b01c635f6$7e80e040$0200a8c0@saturn>
From: "Michael van Rooyen" <mvanr@bigfoot.com>
To: <java-user@lucene.apache.org>,
	"Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
References: <20060220033956.38420.qmail@web50313.mail.yahoo.com>
Subject: Re: Index missing documents
Date: Mon, 20 Feb 2006 10:20:22 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Spam-Checker-Version: SpamAssassin 3.0.2 (2004-11-16) on sun.loot.co.za
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.2
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Otis.  All the documents were written in a using the same 
IndexWriter, without ever closing it.  Is this what could be responsible for 
the documents not being in the segmens file, or is this bad practice?  Maybe 
I should use a writer for a batch of documents (1000 or so maybe?), and then 
discard it and start with a fresh one.  Would this help?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 10:44:19 2006
Return-Path: <java-user-return-19029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4467 invoked from network); 20 Feb 2006 10:44:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 10:44:19 -0000
Received: (qmail 68305 invoked by uid 500); 20 Feb 2006 10:44:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67452 invoked by uid 500); 20 Feb 2006 10:44:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67441 invoked by uid 99); 20 Feb 2006 10:44:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 02:44:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [206.190.52.175] (HELO smtp106.biz.mail.re2.yahoo.com) (206.190.52.175)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 02:44:13 -0800
Received: (qmail 6091 invoked from network); 20 Feb 2006 10:43:51 -0000
Received: from unknown (HELO ?151.82.7.192?) (pberto@jupiter-jazz.com@151.82.7.192 with plain)
  by smtp106.biz.mail.re2.yahoo.com with SMTP; 20 Feb 2006 10:43:50 -0000
Mime-Version: 1.0 (Apple Message framework v746.2)
Content-Transfer-Encoding: 7bit
Message-Id: <38B335D1-E571-4B75-A20F-67E117AD04D4@jupiter-jazz.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: paolo berto <pberto@jupiter-jazz.com>
Subject: webserverless search with lucene on offline HTML doc
Date: Mon, 20 Feb 2006 11:43:44 +0100
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I would like to figure out if it is possible to write a java applet  
able to search with lucene through an HTML documentation WITHOUT  
having a webserver installed on the system and on multiple platforms.

So I have a set of static offline HTML files forming a software  
documentation, would like to index it and search through it from a  
browser without having to install a web server and on various  
platforms (osx/win32/linux) Is that possible at all?

Thanks and sorry for the basic question,

paolo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 11:11:47 2006
Return-Path: <java-user-return-19030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15901 invoked from network); 20 Feb 2006 11:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 11:11:44 -0000
Received: (qmail 97275 invoked by uid 500); 20 Feb 2006 11:11:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97168 invoked by uid 500); 20 Feb 2006 11:11:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97157 invoked by uid 99); 20 Feb 2006 11:11:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 03:11:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.89.10.11] (HELO denhaag.ewi.utwente.nl) (130.89.10.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 03:11:28 -0800
Received: from ewiex01.ewi.utwente.nl (ewiex02.ewi.utwente.nl [130.89.10.121])
	by denhaag.ewi.utwente.nl (8.13.1/8.13.1) with ESMTP id k1KBB04j010743
	for <java-user@lucene.apache.org>; Mon, 20 Feb 2006 12:11:00 +0100 (MET)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: webserverless search with lucene on offline HTML doc
Date: Mon, 20 Feb 2006 12:11:01 +0100
Message-ID: <5DD2165A95E801438DAA9C1E0957EB5ED3F342@ewiex02.dynamic.ewi.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: webserverless search with lucene on offline HTML doc
Thread-Index: AcY2CqHzn5gCv97mTDaxeR3kCAwhXgAAOIig
From: "Trieschnigg, R.B. \(Dolf\)" <r.b.trieschnigg@ewi.utwente.nl>
To: <java-user@lucene.apache.org>
X-Spam-Score: -5.775 () ALL_TRUSTED,AWL,BAYES_00
X-Scanned-By: MIMEDefang 2.52 on 130.89.10.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0b5 (denhaag.ewi.utwente.nl [130.89.10.11]); Mon, 20 Feb 2006 12:11:05 +0100 (MET)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Paulo,

The main problem is that Lucene needs to store its index on a disk which =
under normal circumstances an applet may not read. The applet operates =
in a sandbox, which only allows "safe" operations. Reading and writing =
to disk is not allowed. An applet can only get resources from the host =
it came from.
As Lucene does not allow an IndexReader to be created for a URL, I guess =
it's not possible in a normal applet environment. Or you should dive =
into the IndexReader code an write your own IndexReader for remote =
indices.

What you can also do is sign your applet; if a user accepts your applet =
as safe you can run it as any other Java application (download the index =
from a webserver to a temporary location and query it for example).=20
But I am usually quite sceptic with accepting signed applets from unkown =
distributors; as it is like leaving your door open for complete =
strangers ("of course you may delete all my files on disk").

Are you going to put your applet on a website, or do you want to =
distribute it on e.g. a cd? If I would buy some software from you on a =
cd, I would more likely accept a signed applet than if I would visit =
some obscure homepage.

Regards,
Dolf





> -----Original Message-----
> From: paolo berto [mailto:pberto@jupiter-jazz.com]=20
> Sent: maandag 20 februari 2006 11:44
> To: java-user@lucene.apache.org
> Subject: webserverless search with lucene on offline HTML doc
>=20
> Hello,
>=20
> I would like to figure out if it is possible to write a java=20
> applet able to search with lucene through an HTML=20
> documentation WITHOUT having a webserver installed on the=20
> system and on multiple platforms.
>=20
> So I have a set of static offline HTML files forming a=20
> software documentation, would like to index it and search=20
> through it from a browser without having to install a web=20
> server and on various platforms (osx/win32/linux) Is that=20
> possible at all?
>=20
> Thanks and sorry for the basic question,
>=20
> paolo
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 11:43:00 2006
Return-Path: <java-user-return-19031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32131 invoked from network); 20 Feb 2006 11:42:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 11:42:58 -0000
Received: (qmail 51159 invoked by uid 500); 20 Feb 2006 11:42:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51136 invoked by uid 500); 20 Feb 2006 11:42:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51121 invoked by uid 99); 20 Feb 2006 11:42:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 03:42:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of finsaccanebbia@gmail.com designates 64.233.182.198 as permitted sender)
Received: from [64.233.182.198] (HELO nproxy.gmail.com) (64.233.182.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 03:42:48 -0800
Received: by nproxy.gmail.com with SMTP id d4so561048nfe
        for <java-user@lucene.apache.org>; Mon, 20 Feb 2006 03:42:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lxOuZd9edVSG6FMpQN+TqQe1Z7J3qYd6ODhEpdnLmt4xhHLzhy8cjDVk1r13jC9SUHO39FAVi2gn5hC9+x0pYEIGOW1H3J/c5JGdBGHXOZHi+MOeLLO0kK0pYapoq+te+lfQDrBR2j/YyALg4ET52g0zZ/jP1Rjr6MTj62GaXjU=
Received: by 10.48.203.19 with SMTP id a19mr1199301nfg;
        Mon, 20 Feb 2006 03:42:27 -0800 (PST)
Received: by 10.49.61.20 with HTTP; Mon, 20 Feb 2006 03:42:27 -0800 (PST)
Message-ID: <a02a04880602200342x1228124ducba5378b1f110be9@mail.gmail.com>
Date: Mon, 20 Feb 2006 12:42:27 +0100
From: "Fabio Insaccanebbia" <finsaccanebbia@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: webserverless search with lucene on offline HTML doc
In-Reply-To: <5DD2165A95E801438DAA9C1E0957EB5ED3F342@ewiex02.dynamic.ewi.utwente.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5DD2165A95E801438DAA9C1E0957EB5ED3F342@ewiex02.dynamic.ewi.utwente.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wouldn't this be a good case for the JarDirectory implementation
somebody asked for?
The index could then be statically written in a jar file downloaded
with the applet (the original mail refers to static offline HTML
files).

It could even be a great idea for improving the Maven site-plugin :-)
[I mean: when you create the Maven generated site a Lucene based
plugin could index it, create the jar index and then add the "applet"
to the Maven pages]

On 2/20/06, Trieschnigg, R.B. (Dolf) <r.b.trieschnigg@ewi.utwente.nl> wrote=
:
> Hi Paulo,
>
> The main problem is that Lucene needs to store its index on a disk which =
under normal circumstances an applet may not read. The applet operates in a=
 sandbox, which only allows "safe" operations. Reading and writing to disk =
is not allowed. An applet can only get resources from the host it came from=
.
> As Lucene does not allow an IndexReader to be created for a URL, I guess =
it's not possible in a normal applet environment. Or you should dive into t=
he IndexReader code an write your own IndexReader for remote indices.
>
> What you can also do is sign your applet; if a user accepts your applet a=
s safe you can run it as any other Java application (download the index fro=
m a webserver to a temporary location and query it for example).
> But I am usually quite sceptic with accepting signed applets from unkown =
distributors; as it is like leaving your door open for complete strangers (=
"of course you may delete all my files on disk").
>
> Are you going to put your applet on a website, or do you want to distribu=
te it on e.g. a cd? If I would buy some software from you on a cd, I would =
more likely accept a signed applet than if I would visit some obscure homep=
age.
>
> Regards,
> Dolf
>
>
>
>
>
> > -----Original Message-----
> > From: paolo berto [mailto:pberto@jupiter-jazz.com]
> > Sent: maandag 20 februari 2006 11:44
> > To: java-user@lucene.apache.org
> > Subject: webserverless search with lucene on offline HTML doc
> >
> > Hello,
> >
> > I would like to figure out if it is possible to write a java
> > applet able to search with lucene through an HTML
> > documentation WITHOUT having a webserver installed on the
> > system and on multiple platforms.
> >
> > So I have a set of static offline HTML files forming a
> > software documentation, would like to index it and search
> > through it from a browser without having to install a web
> > server and on various platforms (osx/win32/linux) Is that
> > possible at all?
> >
> > Thanks and sorry for the basic question,
> >
> > paolo
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 11:46:25 2006
Return-Path: <java-user-return-19032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34129 invoked from network); 20 Feb 2006 11:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 11:46:24 -0000
Received: (qmail 58214 invoked by uid 500); 20 Feb 2006 11:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58183 invoked by uid 500); 20 Feb 2006 11:46:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58172 invoked by uid 99); 20 Feb 2006 11:46:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 03:46:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [206.190.52.173] (HELO smtp104.biz.mail.re2.yahoo.com) (206.190.52.173)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 03:46:08 -0800
Received: (qmail 56117 invoked from network); 20 Feb 2006 11:45:46 -0000
Received: from unknown (HELO ?151.82.6.20?) (pberto@jupiter-jazz.com@151.82.6.20 with plain)
  by smtp104.biz.mail.re2.yahoo.com with SMTP; 20 Feb 2006 11:45:43 -0000
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <5DD2165A95E801438DAA9C1E0957EB5ED3F342@ewiex02.dynamic.ewi.utwente.nl>
References: <5DD2165A95E801438DAA9C1E0957EB5ED3F342@ewiex02.dynamic.ewi.utwente.nl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <44B0ABD2-3E1E-465D-8F25-D8689D183FE7@jupiter-jazz.com>
Content-Transfer-Encoding: 7bit
From: paolo berto <pberto@jupiter-jazz.com>
Subject: Re: webserverless search with lucene on offline HTML doc
Date: Mon, 20 Feb 2006 12:45:37 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Dolf.

On Feb 20, 2006, at 12:11 PM, Trieschnigg, R.B. ((Dolf)) wrote:

> Hi Paulo,
>
> The main problem is that Lucene needs to store its index on a disk  
> which under normal circumstances an applet may not read. The applet  
> operates in a sandbox, which only allows "safe" operations. Reading  
> and writing to disk is not allowed. An applet can only get  
> resources from the host it came from.
> As Lucene does not allow an IndexReader to be created for a URL, I  
> guess it's not possible in a normal applet environment. Or you  
> should dive into the IndexReader code an write your own IndexReader  
> for remote indices.
>
> What you can also do is sign your applet; if a user accepts your  
> applet as safe you can run it as any other Java application  
> (download the index from a webserver to a temporary location and  
> query it for example).
> But I am usually quite sceptic with accepting signed applets from  
> unkown distributors; as it is like leaving your door open for  
> complete strangers ("of course you may delete all my files on disk").
>
> Are you going to put your applet on a website, or do you want to  
> distribute it on e.g. a cd? If I would buy some software from you  
> on a cd, I would more likely accept a signed applet than if I would  
> visit some obscure homepage.

Not on a website, I want to distribute it on a cd only. It will be  
part of the local installation of the software.

Paolo

>
> Regards,
> Dolf
>
>
>
>
>
>> -----Original Message-----
>> From: paolo berto [mailto:pberto@jupiter-jazz.com]
>> Sent: maandag 20 februari 2006 11:44
>> To: java-user@lucene.apache.org
>> Subject: webserverless search with lucene on offline HTML doc
>>
>> Hello,
>>
>> I would like to figure out if it is possible to write a java
>> applet able to search with lucene through an HTML
>> documentation WITHOUT having a webserver installed on the
>> system and on multiple platforms.
>>
>> So I have a set of static offline HTML files forming a
>> software documentation, would like to index it and search
>> through it from a browser without having to install a web
>> server and on various platforms (osx/win32/linux) Is that
>> possible at all?
>>
>> Thanks and sorry for the basic question,
>>
>> paolo
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 11:54:44 2006
Return-Path: <java-user-return-19033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41386 invoked from network); 20 Feb 2006 11:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 11:54:44 -0000
Received: (qmail 76987 invoked by uid 500); 20 Feb 2006 11:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76956 invoked by uid 500); 20 Feb 2006 11:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76945 invoked by uid 99); 20 Feb 2006 11:54:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 03:54:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.59.116.41] (HELO orbita1.ru) (213.59.116.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 03:54:37 -0800
Received: from orbitsoft.ipt ([192.168.0.150] helo=orbitsoft.orbitscripts)
	by orbita1.ru with esmtpa (Exim 4.42)
	id 1FB9cJ-0007mq-VR
	for java-user@lucene.apache.org; Mon, 20 Feb 2006 14:54:11 +0300
Subject: Problem with TermDocs
Date: Mon, 20 Feb 2006 14:54:16 +0300
Message-ID: <41D8E340E5045F4ABA553E4524E3D379294547@orbitsoft.orbitscripts>
X-MS-Has-Attach: 
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C63614.6AB8BAD8"
X-MS-TNEF-Correlator: 
Thread-Topic: Problem with TermDocs
Thread-Index: AcY2FF/c645Qs97WS/2GH73NCTRfOA==
Content-class: urn:content-classes:message
From: "Anton Potehin" <anton@orbita1.ru>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C63614.6AB8BAD8
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Ir is IndexReader.

termIdent is Term

=20

int freq =3D ir.docFreq(termIdent);

if (freq > 1) {

            TermDocs termDocs =3D ir.termDocs(termIdent);

            int[] docsArr =3D new int[freq];

int[] freqArr =3D new int[freq];

int number =3D termDocs.read(docsArr,freqArr);

System.out.println(number);

}

=20

=20

Why number always is not equal freq (in the most of the cases number is
equal 1)?

=20


------_=_NextPart_001_01C63614.6AB8BAD8--

From java-user-return-19034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 12:49:27 2006
Return-Path: <java-user-return-19034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70540 invoked from network); 20 Feb 2006 12:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 12:49:27 -0000
Received: (qmail 58801 invoked by uid 500); 20 Feb 2006 12:49:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58497 invoked by uid 500); 20 Feb 2006 12:49:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58486 invoked by uid 99); 20 Feb 2006 12:49:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 04:49:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [68.142.229.217] (HELO smtp103.biz.mail.re2.yahoo.com) (68.142.229.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 04:49:19 -0800
Received: (qmail 95054 invoked from network); 20 Feb 2006 12:48:58 -0000
Received: from unknown (HELO ?151.82.6.20?) (pberto@jupiter-jazz.com@151.82.6.20 with plain)
  by smtp103.biz.mail.re2.yahoo.com with SMTP; 20 Feb 2006 12:48:54 -0000
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <a02a04880602200342x1228124ducba5378b1f110be9@mail.gmail.com>
References: <5DD2165A95E801438DAA9C1E0957EB5ED3F342@ewiex02.dynamic.ewi.utwente.nl> <a02a04880602200342x1228124ducba5378b1f110be9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <556D1D57-79B7-4380-98EC-E644A1BDD204@jupiter-jazz.com>
Content-Transfer-Encoding: 7bit
From: paolo berto <pberto@jupiter-jazz.com>
Subject: Re: webserverless search with lucene on offline HTML doc
Date: Mon, 20 Feb 2006 13:48:48 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Feb 20, 2006, at 12:42 PM, Fabio Insaccanebbia wrote:

> Wouldn't this be a good case for the JarDirectory implementation
> somebody asked for?
> The index could then be statically written in a jar file downloaded
> with the applet (the original mail refers to static offline HTML
> files).
>
> It could even be a great idea for improving the Maven site-plugin :-)
> [I mean: when you create the Maven generated site a Lucene based
> plugin could index it, create the jar index and then add the "applet"
> to the Maven pages]

I have no idea what was asked since I just registered to this mailing  
list,
but what I would like to end up is my HTML folder with our software  
documentation, then a search.jar file which contains all my index and  
then, with a simple java applet be able to query such file and  
provide results always in the applet page.


paolo





>
> On 2/20/06, Trieschnigg, R.B. (Dolf)  
> <r.b.trieschnigg@ewi.utwente.nl> wrote:
>> Hi Paulo,
>>
>> The main problem is that Lucene needs to store its index on a disk  
>> which under normal circumstances an applet may not read. The  
>> applet operates in a sandbox, which only allows "safe" operations.  
>> Reading and writing to disk is not allowed. An applet can only get  
>> resources from the host it came from.
>> As Lucene does not allow an IndexReader to be created for a URL, I  
>> guess it's not possible in a normal applet environment. Or you  
>> should dive into the IndexReader code an write your own  
>> IndexReader for remote indices.
>>
>> What you can also do is sign your applet; if a user accepts your  
>> applet as safe you can run it as any other Java application  
>> (download the index from a webserver to a temporary location and  
>> query it for example).
>> But I am usually quite sceptic with accepting signed applets from  
>> unkown distributors; as it is like leaving your door open for  
>> complete strangers ("of course you may delete all my files on disk").
>>
>> Are you going to put your applet on a website, or do you want to  
>> distribute it on e.g. a cd? If I would buy some software from you  
>> on a cd, I would more likely accept a signed applet than if I  
>> would visit some obscure homepage.
>>
>> Regards,
>> Dolf
>>
>>
>>
>>
>>
>>> -----Original Message-----
>>> From: paolo berto [mailto:pberto@jupiter-jazz.com]
>>> Sent: maandag 20 februari 2006 11:44
>>> To: java-user@lucene.apache.org
>>> Subject: webserverless search with lucene on offline HTML doc
>>>
>>> Hello,
>>>
>>> I would like to figure out if it is possible to write a java
>>> applet able to search with lucene through an HTML
>>> documentation WITHOUT having a webserver installed on the
>>> system and on multiple platforms.
>>>
>>> So I have a set of static offline HTML files forming a
>>> software documentation, would like to index it and search
>>> through it from a browser without having to install a web
>>> server and on various platforms (osx/win32/linux) Is that
>>> possible at all?
>>>
>>> Thanks and sorry for the basic question,
>>>
>>> paolo
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 13:30:32 2006
Return-Path: <java-user-return-19035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94441 invoked from network); 20 Feb 2006 13:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 13:30:31 -0000
Received: (qmail 41077 invoked by uid 500); 20 Feb 2006 13:30:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40863 invoked by uid 500); 20 Feb 2006 13:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40852 invoked by uid 99); 20 Feb 2006 13:30:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 05:30:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 05:30:24 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 30FA133CFDA; Mon, 20 Feb 2006 08:30:03 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1B65233CF36
	for <java-user@lucene.apache.org>; Mon, 20 Feb 2006 08:30:02 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <243881DE-1A64-4B25-9360-0AF2EEDBD70F@mac.com>
References: <472A62DD-B7F7-4B72-8F09-D00F86D70FE0@mac.com> <98CB672A-5660-4763-B56B-E3025151A056@ehatchersolutions.com> <98A08840-8EBF-4EA9-9D6F-D8724E967044@mac.com> <9174E679-3B84-4DA3-8F5D-1885D4193686@ehatchersolutions.com> <243881DE-1A64-4B25-9360-0AF2EEDBD70F@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CBB710BD-BEEB-40DF-ACC3-EA10A815587A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Rebuilding after modifying JSP's
Date: Mon, 20 Feb 2006 08:30:00 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 19, 2006, at 7:11 PM, Michael Dodson wrote:
> Turns out this isn't a lucene isolated problem.  I'm getting the  
> same error no matter what I try to build.  I suppose I should be  
> asking the ant mailing list...

Do you have a CLASSPATH set in your environment?  If so, remove or  
empty it and try it then.

As for asking the Ant community, you could certainly ask there but I  
think its just something simple and environmental.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 14:51:26 2006
Return-Path: <java-user-return-19036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47947 invoked from network); 20 Feb 2006 14:51:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 14:51:25 -0000
Received: (qmail 75728 invoked by uid 500); 20 Feb 2006 14:51:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75705 invoked by uid 500); 20 Feb 2006 14:51:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75694 invoked by uid 99); 20 Feb 2006 14:51:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 06:51:19 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.249] (HELO web50610.mail.yahoo.com) (206.190.38.249)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 06:51:18 -0800
Received: (qmail 21289 invoked by uid 60001); 20 Feb 2006 14:50:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=hKS1NIwgxlLOFbQQc+cZYzNNp5xKgFF+eRBSAw3diA1nv93hu6PV4ZbChSON33Z/GSurO1xguxT/ENhsOcC86IKE8xXSSfyKJ13TFZVSBD3WlwfyMF4hhBWJpK1L9re87sj+r9cu3nU/sPrlldQJJwEEUItOl7Vi4+k2NeGpqx4=  ;
Message-ID: <20060220145057.21287.qmail@web50610.mail.yahoo.com>
Received: from [63.95.36.9] by web50610.mail.yahoo.com via HTTP; Mon, 20 Feb 2006 06:50:57 PST
Date: Mon, 20 Feb 2006 06:50:57 -0800 (PST)
From: Amany Moussa <amany_moussa@yahoo.com>
Subject: Lucene CPU Utilization
To: java-user@lucene.apache.org
In-Reply-To: <9174E679-3B84-4DA3-8F5D-1885D4193686@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello,

I am building a Lucene index with over a million   
documents retrieved from database. I am running the
application on Unix, I am getting a 100% CPU
utilization the moment the application start.
The application creates a list of small indices in a
temp directory then merge them all in the main index
file.                                                 
Is there any way I can tune the indexing process and
reduce the CPU utilization.                         
Thanks much.                              

Amany M.

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 15:02:43 2006
Return-Path: <java-user-return-19037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53223 invoked from network); 20 Feb 2006 15:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 15:02:43 -0000
Received: (qmail 99828 invoked by uid 500); 20 Feb 2006 15:02:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99147 invoked by uid 500); 20 Feb 2006 15:02:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99136 invoked by uid 99); 20 Feb 2006 15:02:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 07:02:37 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.87.63] (HELO web37410.mail.mud.yahoo.com) (209.191.87.63)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 07:02:36 -0800
Received: (qmail 7256 invoked by uid 60001); 20 Feb 2006 15:02:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2cvO6pkuRTx/rsBvG7FROrCweQM7dZpNvSOsvXb1SPLj5jn2Pk5w1BoTg2vjb5mSJwsjAC4I3gfbHmKjkc7EjADS3HelJLwyw6tTdWf/ObX5x9E1wRp2UiRfD8oZWJBOSR0XqVhmRuOyKj8xcEmvJds9D1oHY1db3c49v4AB7dQ=  ;
Message-ID: <20060220150212.7254.qmail@web37410.mail.mud.yahoo.com>
Received: from [58.65.140.3] by web37410.mail.mud.yahoo.com via HTTP; Mon, 20 Feb 2006 15:02:12 GMT
Date: Mon, 20 Feb 2006 15:02:12 +0000 (GMT)
From: SOME ONE <sumvon@yahoo.com>
Subject: Re: Custom Sorting
To: java-user@lucene.apache.org
In-Reply-To: <43F74823.2080009@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Yes, my queries are like the first case. And as there
have been no other suggestions to do it in a single
search operation, will have to do it the way you
suggested. This technique will do the job particularly
because title's text is always in the body as well. So
finally I will have to run two search operations like

(body:a AND body:b AND body:c) AND
(title:a OR title:b OR title:c)

to get the first group of results for title match, and

(body:a AND body:b AND body:c) NOT
(title:a OR title:b OR title:c)

to get the second group of results with just body
match, and sort each group by date.

As the queries in two operations are very similar,
even if there is overhead involved by doing it in two
search operations, I think it can be improved by using
filters that cache results and reuse them in the
second search operation. But I'm not sure how much
overhead would there be for doing it in two search
operations, and if this optimization is really needed.

Thanks once again for your help.

Regards
Wiseman


--- "Michael D. Curtin" <mike@curtin.com> wrote:

> I'm not sure you can do what you want in a single
> search.  But, I'm not sure I 
> actually understand what your queries look like,
> either.  I *think* you want 
> to search like
> 
> (title:a OR body:a) AND (title:b OR body:b) AND
> (title:c OR body:c)
> 
> not something like
> 
> (title:a OR title:b OR title:c) AND (body:a OR
> body:b OR body:c)
> 
> or maybe something else altogether.  If it's the
> former, and your data really 
> has the title's text duplicated in the body, then I
> think you should run 2 
> searches, like this:
> 
> #1	body:a AND body:b AND body:c
> #2	title:a OR title:b OR title:c
> 
> #1 tells you whether you get a hit at all, and #2
> tells you whether the title 
> field was involved.  Putting the same criterion on
> title as on body in a given 
> query is redundant, because there's nothing in title
> that isn't also in body. 
>   You might even be able to do something like
> running #1, then using its 
> results as a Filter for #2.
> 
> Good luck!
> 
> --MDC
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 15:22:14 2006
Return-Path: <java-user-return-19038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65675 invoked from network); 20 Feb 2006 15:22:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 15:22:13 -0000
Received: (qmail 43053 invoked by uid 500); 20 Feb 2006 15:22:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43028 invoked by uid 500); 20 Feb 2006 15:22:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43017 invoked by uid 99); 20 Feb 2006 15:22:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 07:22:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.152 as permitted sender)
Received: from [205.158.62.152] (HELO ws6-5.us4.outblaze.com) (205.158.62.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 07:22:05 -0800
Received: (qmail 27275 invoked from network); 20 Feb 2006 15:21:44 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-5.us4.outblaze.com with SMTP; 20 Feb 2006 15:21:44 -0000
Message-ID: <43F9DE87.700@curtin.com>
Date: Mon, 20 Feb 2006 10:21:43 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Custom Sorting
References: <20060220150212.7254.qmail@web37410.mail.mud.yahoo.com>
In-Reply-To: <20060220150212.7254.qmail@web37410.mail.mud.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SOME ONE wrote:

> Hi,
> 
> Yes, my queries are like the first case. And as there
> have been no other suggestions to do it in a single
> search operation, will have to do it the way you
> suggested. This technique will do the job particularly
> because title's text is always in the body as well. So
> finally I will have to run two search operations like
> 
> (body:a AND body:b AND body:c) AND
> (title:a OR title:b OR title:c)
> 
> to get the first group of results for title match, and
> 
> (body:a AND body:b AND body:c) NOT
> (title:a OR title:b OR title:c)
> 
> to get the second group of results with just body
> match, and sort each group by date.

Here's another way.  Search just the first part of the first query, i.e. 
(body:a AND body:b AND body:c).  Then use an IndexReader, TermDocs and related 
objects to get a list of document numbers for each of title:a, title:b, and 
title:c.  Then merge / compare the lists to separate out the title matches and 
the body-only matches.  Doing it this way will save whatever resources are 
consumed by score computations.  Resources needed by the ORing will still 
basically be consumed, because of the merge / compare step you must perform.

Of course, this approach wouldn't work if the query terms aren't simple terms, 
i.e. you use ranges, or wildcards, or prefixes, etc.  If you do use constructs 
like those, then I don't see an alternative to the two-search algorithm. 
Unless you have hundreds of millions of documents, each of the two searches 
could be simpler than what you have above, though (see my earlier email for 
details).  The way they're set up above, 2 sets of reads through the indexes 
are necessary, and 2 sets of boolean operations.  The way I suggested earlier 
would have only 1 read of the index and 1 merge / compare computation.  if you 
have a few tens of millions of documents, or less, the lists of document 
numbers should easily fit in RAM.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 16:07:35 2006
Return-Path: <java-user-return-19039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90860 invoked from network); 20 Feb 2006 16:07:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 16:07:35 -0000
Received: (qmail 49486 invoked by uid 500); 20 Feb 2006 16:07:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49463 invoked by uid 500); 20 Feb 2006 16:07:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49452 invoked by uid 99); 20 Feb 2006 16:07:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 08:07:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 08:07:28 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Mon, 20 Feb 2006 09:07:02 -0700
Message-ID: <43F9E8BD.9010002@allegromedical.com>
Date: Mon, 20 Feb 2006 09:05:17 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: StandardAnalyzer question ...
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com> <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com> <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu> <43F62D2B.2060308@allegromedical.com>
In-Reply-To: <43F62D2B.2060308@allegromedical.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

When StandardAnalyzer is used to index documents, arent the terms, 
amongst other things, lower cased and stored that ways in the index?

I have a index field that I index like this:

....
ramWriter = new IndexWriter(ramDir, standardAnalyzer, true);
....
...
...
doc.add(Field.Text("categoryNames", categoryNames));
...
...

(I periodically write contents from the ram directory to the file system 
directory.)

When I search this field via luke using the standard analyzer I find 
words like this:
....
Digital Cameras
Digital Camera Batteries
....

Shouldn't the words indexed look like:

....
digital cameras
digital camera batteries
....

If I understand this right, when using standard analyzer, shouldn't the 
terms be indexed  in lower case?

Thanks,


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 16:21:33 2006
Return-Path: <java-user-return-19040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98452 invoked from network); 20 Feb 2006 16:21:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 16:21:33 -0000
Received: (qmail 82848 invoked by uid 500); 20 Feb 2006 16:21:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82819 invoked by uid 500); 20 Feb 2006 16:21:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82808 invoked by uid 99); 20 Feb 2006 16:21:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 08:21:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.136.41.129] (HELO ringhals.agent25.se) (213.136.41.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 08:21:27 -0800
Subject: Re: StandardAnalyzer question ...
From: Oskar Berger <oskar.berger@agent25.se>
To: java-user@lucene.apache.org
In-Reply-To: <43F9E8BD.9010002@allegromedical.com>
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>
	 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>
	 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>
	 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com>
Content-Type: text/plain
Date: Mon, 20 Feb 2006 17:21:00 +0100
Message-Id: <1140452460.8229.43.camel@murmansk>
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Not yet an expert in the field, but as I've understood the thing the
terms are indexed as you specify them (through the filters) but the
contents are stored depending on whether you want it or not
(Filed.UnStored(), which happens to be on its way to get deprecated).

So maybe you search the lower cased but indeed get the cased as the
result in this very CASE.

/oskar 

On Mon, 2006-02-20 at 09:05 -0700, Mufaddal Khumri wrote:
> Hi,
> 
> When StandardAnalyzer is used to index documents, arent the terms, 
> amongst other things, lower cased and stored that ways in the index?
> 
> I have a index field that I index like this:
> 
> ....
> ramWriter = new IndexWriter(ramDir, standardAnalyzer, true);
> ....
> ...
> ...
> doc.add(Field.Text("categoryNames", categoryNames));
> ...
> ...
> 
> (I periodically write contents from the ram directory to the file system 
> directory.)
> 
> When I search this field via luke using the standard analyzer I find 
> words like this:
> ....
> Digital Cameras
> Digital Camera Batteries
> ....
> 
> Shouldn't the words indexed look like:
> 
> ....
> digital cameras
> digital camera batteries
> ....
> 
> If I understand this right, when using standard analyzer, shouldn't the 
> terms be indexed  in lower case?
> 
> Thanks,
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 17:20:04 2006
Return-Path: <java-user-return-19041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28979 invoked from network); 20 Feb 2006 17:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 17:19:59 -0000
Received: (qmail 57415 invoked by uid 500); 20 Feb 2006 17:19:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57293 invoked by uid 500); 20 Feb 2006 17:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57257 invoked by uid 99); 20 Feb 2006 17:19:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 09:19:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 09:19:47 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Mon, 20 Feb 2006 10:19:25 -0700
Message-ID: <43F9F9B3.4050806@allegromedical.com>
Date: Mon, 20 Feb 2006 10:17:39 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: exact match ..
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>	 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>	 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>	 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk>
In-Reply-To: <1140452460.8229.43.camel@murmansk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

lets say i do this while indexing:

doc.add(Field.Text("categoryNames", categoryNames));

Now while searching categoryNames, I do a search for "digital cameras". 
I only want to match the exact phrase digital cameras with documents who 
have exactly the phrase "digital cameras" in the categoryNames field. I 
do not want results that have "digital camera batteries" part of the 
result.

Whats the best way to accomplish this?

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 17:25:03 2006
Return-Path: <java-user-return-19042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32846 invoked from network); 20 Feb 2006 17:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 17:25:03 -0000
Received: (qmail 87519 invoked by uid 500); 20 Feb 2006 17:24:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87493 invoked by uid 500); 20 Feb 2006 17:24:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87482 invoked by uid 99); 20 Feb 2006 17:24:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 09:24:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 09:24:56 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Mon, 20 Feb 2006 10:24:33 -0700
Message-ID: <43F9FAE8.5020202@allegromedical.com>
Date: Mon, 20 Feb 2006 10:22:48 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: span first query and boosting ..
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>	 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>	 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>	 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com>
In-Reply-To: <43F9F9B3.4050806@allegromedical.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I do this:

SpanFirstQuery fullPhraseInCategoryNamesQuery = new SpanFirstQuery(new 
SpanTermQuery(new Term("categoryNames", "digital cameras")), 2);
fullPhraseInCategoryNamesQuery.setBoost(8);

In my log output i get this:

spanFirst(categoryNames:digit camera, 2))

Why cant I boost a span query? What am i doing wrong?

-Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 17:35:22 2006
Return-Path: <java-user-return-19043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37398 invoked from network); 20 Feb 2006 17:35:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 17:35:18 -0000
Received: (qmail 23405 invoked by uid 500); 20 Feb 2006 17:35:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23376 invoked by uid 500); 20 Feb 2006 17:35:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23365 invoked by uid 99); 20 Feb 2006 17:35:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 09:35:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 09:35:08 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E6CA133C04F; Mon, 20 Feb 2006 12:34:47 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1B84733C021
	for <java-user@lucene.apache.org>; Mon, 20 Feb 2006 12:34:45 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43F9FAE8.5020202@allegromedical.com>
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>	 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>	 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>	 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com> <43F9FAE8.5020202@allegromedical.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <25FC3706-9399-4F31-968D-EC3F69EB3B79@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: span first query and boosting ..
Date: Mon, 20 Feb 2006 12:34:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 20, 2006, at 12:22 PM, Mufaddal Khumri wrote:

> Hi,
>
> I do this:
>
> SpanFirstQuery fullPhraseInCategoryNamesQuery = new SpanFirstQuery 
> (new SpanTermQuery(new Term("categoryNames", "digital cameras")), 2);
> fullPhraseInCategoryNamesQuery.setBoost(8);
>
> In my log output i get this:
>
> spanFirst(categoryNames:digit camera, 2))
>
> Why cant I boost a span query? What am i doing wrong?

You can boost any Query.  However, the .toString is not showing the  
boost.  Look at IndexSearcher.explain() results to see the effect of  
your boosts in action.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 17:42:20 2006
Return-Path: <java-user-return-19044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40791 invoked from network); 20 Feb 2006 17:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 17:42:19 -0000
Received: (qmail 51359 invoked by uid 500); 20 Feb 2006 17:42:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51338 invoked by uid 500); 20 Feb 2006 17:42:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51327 invoked by uid 99); 20 Feb 2006 17:42:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 09:42:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 09:42:13 -0800
Received: from [128.230.38.212] (syru38-212.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14F5BD87@mailer.syr.edu>; Mon, 20 Feb 2006 12:41:51 -0500
Message-ID: <43F9FF66.4050204@syr.edu>
Date: Mon, 20 Feb 2006 12:41:58 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5 (Windows/20060113)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: exact match ..
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>	 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>	 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>	 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com>
In-Reply-To: <43F9F9B3.4050806@allegromedical.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mufaddal Khumri wrote:
> lets say i do this while indexing:
> 
> doc.add(Field.Text("categoryNames", categoryNames));
> 
> Now while searching categoryNames, I do a search for "digital cameras". 
> I only want to match the exact phrase digital cameras with documents who 
> have exactly the phrase "digital cameras" in the categoryNames field. I 
> do not want results that have "digital camera batteries" part of the 
> result.
> 
> Whats the best way to accomplish this?

Hi Mufaddal,

One way to do this is to use the KeywordAnalyzer (in the Lucene 
Subversion trunk, but not in v1.4.3; will be in forthcoming v1.9) for 
the "categoryNames" field.  This analyzer does not tokenize field 
contents, so "digital cameras" would be a single token, and the only 
thing that would match it would be the exact same single token.  Be 
careful when you search to construct the search tokens similarly.

If you have other fields you want to search, and you want to tokenize 
their contents when you index them, you could use the 
PerFieldAnalyzerWrapper, so that the KeywordAnalyzer is only used for 
the "categoryNames" field.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 18:04:45 2006
Return-Path: <java-user-return-19045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52706 invoked from network); 20 Feb 2006 18:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 18:04:44 -0000
Received: (qmail 20391 invoked by uid 500); 20 Feb 2006 18:04:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20320 invoked by uid 500); 20 Feb 2006 18:04:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20030 invoked by uid 99); 20 Feb 2006 18:04:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:04:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:04:35 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Mon, 20 Feb 2006 11:04:13 -0700
Message-ID: <43FA0433.7040908@allegromedical.com>
Date: Mon, 20 Feb 2006 11:02:27 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: exact match ..
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>	 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>	 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>	 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com> <43F9FF66.4050204@syr.edu>
In-Reply-To: <43F9FF66.4050204@syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Steve,

If I understand you right, I could use something like the Keyword 
analyzer to tokenize the entire stream as a single token and store that 
in the index. I could definitely the keyword analyzer while indexing 
this particular field "categoryNames".

Now my questions is on how to search and boost this since this is part 
of a bigger boolean query in my case.

My typical query actually looks like:

+(+content:digit +content:camera) +entity:product +(title:"digit 
camera"~2^40.0 ((title:digit title:camera)^10.0) content:"digit 
camera"~2^20.0 (content:digit content:camera) categoryNames:"digit 
camera"^80.0)

As you can see i was trying to do a phrase query on the categoryNames 
field and boosting it by 80.0.
Also I am using the potter stemming filter to stem while searching. (I 
do this while indexing as well). If I go with the KeywordAnalyzer 
approach I can index the categoryNames field using this analyzer .

Would I be using the QueryParser to create my query and specify the 
keyword analyzer to it while searching on categoryNames ? (and then make 
that query part of my global boolean query?)

-Thanks.





Steven Rowe wrote:

> Mufaddal Khumri wrote:
>
>> lets say i do this while indexing:
>>
>> doc.add(Field.Text("categoryNames", categoryNames));
>>
>> Now while searching categoryNames, I do a search for "digital 
>> cameras". I only want to match the exact phrase digital cameras with 
>> documents who have exactly the phrase "digital cameras" in the 
>> categoryNames field. I do not want results that have "digital camera 
>> batteries" part of the result.
>>
>> Whats the best way to accomplish this?
>
>
> Hi Mufaddal,
>
> One way to do this is to use the KeywordAnalyzer (in the Lucene 
> Subversion trunk, but not in v1.4.3; will be in forthcoming v1.9) for 
> the "categoryNames" field.  This analyzer does not tokenize field 
> contents, so "digital cameras" would be a single token, and the only 
> thing that would match it would be the exact same single token.  Be 
> careful when you search to construct the search tokens similarly.
>
> If you have other fields you want to search, and you want to tokenize 
> their contents when you index them, you could use the 
> PerFieldAnalyzerWrapper, so that the KeywordAnalyzer is only used for 
> the "categoryNames" field.
>
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 18:25:33 2006
Return-Path: <java-user-return-19046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62358 invoked from network); 20 Feb 2006 18:25:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 18:25:33 -0000
Received: (qmail 76041 invoked by uid 500); 20 Feb 2006 18:25:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75969 invoked by uid 500); 20 Feb 2006 18:25:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75929 invoked by uid 99); 20 Feb 2006 18:25:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:25:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:25:09 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Mon, 20 Feb 2006 11:24:45 -0700
Message-ID: <43FA0903.6040506@allegromedical.com>
Date: Mon, 20 Feb 2006 11:22:59 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: exact match ..
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>	 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>	 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>	 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com> <43F9FF66.4050204@syr.edu> <43FA0433.7040908@allegromedical.com>
In-Reply-To: <43FA0433.7040908@allegromedical.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Just realized that the various fields I have are part of the same 
document. But in order to leverage the KeywordAnalyzer, I would have to 
now have two sets of document.
One document with the fields: title, content <--- analyzed by custom 
analyzer
Other document with the fields: categoryNames < ---- analyzed by keyword 
analyzer

Is there a way I could have a single document object have some fields 
analyzed by my custom analyzer and the one field - "categoryNames" 
analyzed by the keyword analyzer?

Thanks,

Mufaddal Khumri wrote:

> Hi Steve,
>
> If I understand you right, I could use something like the Keyword 
> analyzer to tokenize the entire stream as a single token and store 
> that in the index. I could definitely the keyword analyzer while 
> indexing this particular field "categoryNames".
>
> Now my questions is on how to search and boost this since this is part 
> of a bigger boolean query in my case.
>
> My typical query actually looks like:
>
> +(+content:digit +content:camera) +entity:product +(title:"digit 
> camera"~2^40.0 ((title:digit title:camera)^10.0) content:"digit 
> camera"~2^20.0 (content:digit content:camera) categoryNames:"digit 
> camera"^80.0)
>
> As you can see i was trying to do a phrase query on the categoryNames 
> field and boosting it by 80.0.
> Also I am using the potter stemming filter to stem while searching. (I 
> do this while indexing as well). If I go with the KeywordAnalyzer 
> approach I can index the categoryNames field using this analyzer .
>
> Would I be using the QueryParser to create my query and specify the 
> keyword analyzer to it while searching on categoryNames ? (and then 
> make that query part of my global boolean query?)
>
> -Thanks.
>
>
>
>
>
> Steven Rowe wrote:
>
>> Mufaddal Khumri wrote:
>>
>>> lets say i do this while indexing:
>>>
>>> doc.add(Field.Text("categoryNames", categoryNames));
>>>
>>> Now while searching categoryNames, I do a search for "digital 
>>> cameras". I only want to match the exact phrase digital cameras with 
>>> documents who have exactly the phrase "digital cameras" in the 
>>> categoryNames field. I do not want results that have "digital camera 
>>> batteries" part of the result.
>>>
>>> Whats the best way to accomplish this?
>>
>>
>>
>> Hi Mufaddal,
>>
>> One way to do this is to use the KeywordAnalyzer (in the Lucene 
>> Subversion trunk, but not in v1.4.3; will be in forthcoming v1.9) for 
>> the "categoryNames" field.  This analyzer does not tokenize field 
>> contents, so "digital cameras" would be a single token, and the only 
>> thing that would match it would be the exact same single token.  Be 
>> careful when you search to construct the search tokens similarly.
>>
>> If you have other fields you want to search, and you want to tokenize 
>> their contents when you index them, you could use the 
>> PerFieldAnalyzerWrapper, so that the KeywordAnalyzer is only used for 
>> the "categoryNames" field.
>>
>> Steve
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 18:26:47 2006
Return-Path: <java-user-return-19047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63011 invoked from network); 20 Feb 2006 18:26:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 18:26:46 -0000
Received: (qmail 80682 invoked by uid 500); 20 Feb 2006 18:26:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80659 invoked by uid 500); 20 Feb 2006 18:26:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80648 invoked by uid 99); 20 Feb 2006 18:26:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:26:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:26:39 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A18DE33C054; Mon, 20 Feb 2006 13:26:18 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id AAFFB33C01E
	for <java-user@lucene.apache.org>; Mon, 20 Feb 2006 13:26:17 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43FA0433.7040908@allegromedical.com>
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>	 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>	 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>	 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com> <43F9FF66.4050204@syr.edu> <43FA0433.7040908@allegromedical.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C77BBAF7-78D7-4ED7-9664-6AE988D22067@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: exact match ..
Date: Mon, 20 Feb 2006 13:26:12 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 20, 2006, at 1:02 PM, Mufaddal Khumri wrote:
> If I understand you right, I could use something like the Keyword  
> analyzer to tokenize the entire stream as a single token and store  
> that in the index. I could definitely the keyword analyzer while  
> indexing this particular field "categoryNames".

The KeywordAnalyzer is not needed for indexing... simply use  
Field.Keyword() for indexing without analysis.  Beware of case  
sensitivity though.

> +(+content:digit +content:camera) +entity:product +(title:"digit  
> camera"~2^40.0 ((title:digit title:camera)^10.0) content:"digit  
> camera"~2^20.0 (content:digit content:camera) categoryNames:"digit  
> camera"^80.0)
>
> As you can see i was trying to do a phrase query on the  
> categoryNames field and boosting it by 80.0.
> Also I am using the potter stemming filter to stem while searching.  
> (I do this while indexing as well). If I go with the  
> KeywordAnalyzer approach I can index the categoryNames field using  
> this analyzer .
>
> Would I be using the QueryParser to create my query and specify the  
> keyword analyzer to it while searching on categoryNames ? (and then  
> make that query part of my global boolean query?)

You can use the PerFieldAnalyzerWrapper with the KeywordAnalyzer  
assigned to your categoryNames field, sure, but you wouldn't have  
stemming capability at that point.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 18:28:49 2006
Return-Path: <java-user-return-19048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63887 invoked from network); 20 Feb 2006 18:28:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 18:28:48 -0000
Received: (qmail 84919 invoked by uid 500); 20 Feb 2006 18:28:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84898 invoked by uid 500); 20 Feb 2006 18:28:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84887 invoked by uid 99); 20 Feb 2006 18:28:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:28:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:28:40 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4681F33C060; Mon, 20 Feb 2006 13:28:20 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 05D0F33C054
	for <java-user@lucene.apache.org>; Mon, 20 Feb 2006 13:28:18 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43FA0903.6040506@allegromedical.com>
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>	 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>	 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>	 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com> <43F9FF66.4050204@syr.edu> <43FA0433.7040908@allegromedical.com> <43FA0903.6040506@allegromedical.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B31F5352-1D03-4620-86AB-EE963EB53D6B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: exact match ..
Date: Mon, 20 Feb 2006 13:28:13 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 20, 2006, at 1:22 PM, Mufaddal Khumri wrote:
> Just realized that the various fields I have are part of the same  
> document. But in order to leverage the KeywordAnalyzer, I would  
> have to now have two sets of document.
> One document with the fields: title, content <--- analyzed by  
> custom analyzer
> Other document with the fields: categoryNames < ---- analyzed by  
> keyword analyzer
>
> Is there a way I could have a single document object have some  
> fields analyzed by my custom analyzer and the one field -  
> "categoryNames" analyzed by the keyword analyzer?

Yes, this is what PerFieldAnalyzerWrapper provides for you, as  
described in detail in several sections of Lucene in Action:

	http://www.lucenebook.com/search?query=PerFieldAnalyzerWrapper

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 18:34:00 2006
Return-Path: <java-user-return-19049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66087 invoked from network); 20 Feb 2006 18:34:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 18:34:00 -0000
Received: (qmail 95394 invoked by uid 500); 20 Feb 2006 18:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95373 invoked by uid 500); 20 Feb 2006 18:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95362 invoked by uid 99); 20 Feb 2006 18:33:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:33:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:33:52 -0800
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id k1KIXU7V018935
	for <java-user@lucene.apache.org>; Mon, 20 Feb 2006 13:33:30 -0500 (EST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IV000H010VUXI@lmco.com> for java-user@lucene.apache.org; Mon, 20 Feb 2006 13:33:30 -0500 (EST)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IV000CW00VU38@lmco.com> for java-user@lucene.apache.org; Mon, 20 Feb 2006 13:33:30 -0500 (EST)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 20 Feb 2006 13:33:30 -0500
Date: Mon, 20 Feb 2006 13:33:30 -0500
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Speedup indexing process
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3AAD@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Speedup indexing process
Thread-Index: AcYzsDRE53hNtB9aSN6UMMN4/rcdewCm6jcQ
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 20 Feb 2006 18:33:30.0325 (UTC) FILETIME=[259F5050:01C6364C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

After indexing is done, you can copy the index files and merge them to
one large index. Or you can maintain several small indexes and search
across indexes.

Aviran

http://www.aviransplace.com

-----Original Message-----
From: Java Programmer [mailto:jprogramista@gmail.com] 
Sent: Friday, February 17, 2006 5:18 AM
To: java-user@lucene.apache.org
Subject: Speedup indexing process

Hi,
Maybe this question is trivial but I need to ask it. I've some problem
with indexing large number of documents, and I seek for better solution.
Task is to index about 33GB text data CSV (each record about 30kB), it
possible of course to index these data but I'm not very happy with
timings (about 26 hours), so I want to know how can i speed up this
process. First I think about splitting CVS file into smaller ones, eg
5GB and index them on 6 indexing computers, but now is my question - can
I join such parts into one index after indexing jobs on each computer is
finished? I saw example wit RAMDirectory which could be merged with
FSDirectory, but this example was about same IndexWriter, in my case I
need some separate IndexWriters on few computers. So does it possible
with Lucene?

Thx in advance for hints,
Adrian



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 18:37:08 2006
Return-Path: <java-user-return-19050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67855 invoked from network); 20 Feb 2006 18:37:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 18:37:07 -0000
Received: (qmail 5084 invoked by uid 500); 20 Feb 2006 18:37:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4810 invoked by uid 500); 20 Feb 2006 18:37:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4798 invoked by uid 99); 20 Feb 2006 18:37:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:37:00 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 10:37:00 -0800
Received: (qmail 59722 invoked by uid 60001); 20 Feb 2006 18:36:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=15rR5nKWzPa1BpSw7n7czSwyV130nfwzk/91nRYJwajP7zFEdJ6dQCCqGjJFQxVlOR4Hbcwplr+9OgMh4OjeVSL56lUOsIRgVRg4wDJiPyh/JHisA/8yzH+7jg1+8VNyXEZoAf51nhuCbHDupoZwiWIjypkfhX4/49Pwrmz8s6U=  ;
Message-ID: <20060220183638.59720.qmail@web50307.mail.yahoo.com>
Date: Mon, 20 Feb 2006 10:36:38 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene CPU Utilization
To: java-user@lucene.apache.org
In-Reply-To: <20060220145057.21287.qmail@web50610.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think I answered that question just the other day.... privately...
No, there is nothing in Lucene to help you with CPU utilization.
However, if you are running this on a UNIX box of some kind, you can (re)nice the process and thus lower its priority, giving other processes more time with the CPU.  Windows may have something similar.

Otis

----- Original Message ----
From: Amany Moussa <amany_moussa@yahoo.com>
To: java-user@lucene.apache.org
Sent: Monday, February 20, 2006 9:50:57 AM
Subject: Lucene CPU Utilization


Hello,

I am building a Lucene index with over a million   
documents retrieved from database. I am running the
application on Unix, I am getting a 100% CPU
utilization the moment the application start.
The application creates a list of small indices in a
temp directory then merge them all in the main index
file.                                                 
Is there any way I can tune the indexing process and
reduce the CPU utilization.                         
Thanks much.                              

Amany M.

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 18:40:15 2006
Return-Path: <java-user-return-19051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69714 invoked from network); 20 Feb 2006 18:40:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 18:40:15 -0000
Received: (qmail 11137 invoked by uid 500); 20 Feb 2006 18:40:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11115 invoked by uid 500); 20 Feb 2006 18:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11104 invoked by uid 99); 20 Feb 2006 18:40:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 10:40:08 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 10:40:08 -0800
Received: (qmail 5228 invoked by uid 60001); 20 Feb 2006 18:39:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=QdiUlWgusgb94JXF7CDuLcS8GqcjNCVpOlKhXvLDDOIbfOxJk7fCfiQqcLoqndJ3wJIp8Z8MvbQPkfR8LpDcywVWQ2FE376ZqirIhXbIl3XCeT6B7yzEbKRzQRi+opMMHX9yMQcONaYJU8Qx6jLeGxAgkqWb3ca7htl7RPyux1M=  ;
Message-ID: <20060220183946.5226.qmail@web50306.mail.yahoo.com>
Date: Mon, 20 Feb 2006 10:39:46 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index missing documents
To: java-user@lucene.apache.org
In-Reply-To: <002b01c635f6$7e80e040$0200a8c0@saturn>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No, using the same IndexWriter is the way to go.  If you want things to be written to disk more frequently, lower the maxBufferedDocs setting.  Go down to 1, if you want.  You'll use less memory (RAM), Documents will be written to disk without getting buffered in RAM, but the indexing process will be slower.

Otis

----- Original Message ----
From: Michael van Rooyen <mvanr@bigfoot.com>
To: java-user@lucene.apache.org; Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Sent: Monday, February 20, 2006 3:20:22 AM
Subject: Re: Index missing documents

Thanks Otis.  All the documents were written in a using the same 
IndexWriter, without ever closing it.  Is this what could be responsible for 
the documents not being in the segmens file, or is this bad practice?  Maybe 
I should use a writer for a batch of documents (1000 or so maybe?), and then 
discard it and start with a fresh one.  Would this help?





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 20:22:54 2006
Return-Path: <java-user-return-19052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34376 invoked from network); 20 Feb 2006 20:22:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 20:22:54 -0000
Received: (qmail 1209 invoked by uid 500); 20 Feb 2006 20:22:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 493 invoked by uid 500); 20 Feb 2006 20:22:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 481 invoked by uid 99); 20 Feb 2006 20:22:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 12:22:46 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.158] (HELO web50612.mail.yahoo.com) (206.190.38.158)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 12:22:45 -0800
Received: (qmail 81880 invoked by uid 60001); 20 Feb 2006 20:22:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=e015zrQU341yHxK+ddDuPh6nGy798X7vWqSw7FvcRNN9TDadLnx5jbxBYtw4XtT2o2ZH85OnoU8/azfODkYEB/fQDtk+m2RsrW4E1dwSSxa5ryf4vSUMS60hJu/XSihK19YmIse2Uc0rASCv9nqJFtB3D2CWD4dp6EE6MI4mNXE=  ;
Message-ID: <20060220202224.81878.qmail@web50612.mail.yahoo.com>
Received: from [63.111.163.13] by web50612.mail.yahoo.com via HTTP; Mon, 20 Feb 2006 12:22:24 PST
Date: Mon, 20 Feb 2006 12:22:24 -0800 (PST)
From: Amany Moussa <amany_moussa@yahoo.com>
Subject: Re: Lucene CPU Utilization
To: java-user@lucene.apache.org
In-Reply-To: <20060220183638.59720.qmail@web50307.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you so much for your reply.

I know that you answered this question before. I just
wanted to post the question to receive more feedbacks
and share the information.

Thanks again.

Amany M.

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> I think I answered that question just the other
> day.... privately...
> No, there is nothing in Lucene to help you with CPU
> utilization.
> However, if you are running this on a UNIX box of
> some kind, you can (re)nice the process and thus
> lower its priority, giving other processes more time
> with the CPU.  Windows may have something similar.
> 
> Otis
> 
> ----- Original Message ----
> From: Amany Moussa <amany_moussa@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Monday, February 20, 2006 9:50:57 AM
> Subject: Lucene CPU Utilization
> 
> 
> Hello,
> 
> I am building a Lucene index with over a million   
> documents retrieved from database. I am running the
> application on Unix, I am getting a 100% CPU
> utilization the moment the application start.
> The application creates a list of small indices in a
> temp directory then merge them all in the main index
> file.                                               
>  
> Is there any way I can tune the indexing process and
> reduce the CPU utilization.                         
> Thanks much.                              
> 
> Amany M.
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> http://mail.yahoo.com 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 20 23:45:03 2006
Return-Path: <java-user-return-19053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26695 invoked from network); 20 Feb 2006 23:45:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Feb 2006 23:45:02 -0000
Received: (qmail 37756 invoked by uid 500); 20 Feb 2006 23:44:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37645 invoked by uid 500); 20 Feb 2006 23:44:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37611 invoked by uid 99); 20 Feb 2006 23:44:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 15:44:52 -0800
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_SORBS_SOCKS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.137.212.28] (HELO basicbox6.server-home.net) (195.137.212.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 15:44:50 -0800
Received: from sleipnir2 (dslb-084-061-034-224.pools.arcor-ip.net [84.61.34.224])
	by basicbox6.server-home.net (Postfix) with ESMTP id F078A7183D4
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 00:44:22 +0100 (CET)
From: "Klaus" <klaus@vommond.de>
To: <java-user@lucene.apache.org>
Subject: Lucene in multithreaded enviroment
Date: Tue, 21 Feb 2006 00:44:23 +0100
Message-ID: <001b01c63677$93bbe2d0$6402a8c0@sleipnir2>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <20060220202224.81878.qmail@web50612.mail.yahoo.com>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
Thread-Index: AcY2W2RXeHB/7SsIQAmCil/7JXUqOAAG9FXA
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi=20
I'm using Lucene in a web application. Every time a new object is added =
to
the system the index will be updated. May there be any problems, if two
objects were created at the same moment? I know Lucene has some locking
mechanism.=20

Thx

klaus

-----Urspr=FCngliche Nachricht-----
Von: Amany Moussa [mailto:amany_moussa@yahoo.com]=20
Gesendet: Montag, 20. Februar 2006 21:22
An: java-user@lucene.apache.org
Betreff: Re: Lucene CPU Utilization

Thank you so much for your reply.

I know that you answered this question before. I just
wanted to post the question to receive more feedbacks
and share the information.

Thanks again.

Amany M.

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> I think I answered that question just the other
> day.... privately...
> No, there is nothing in Lucene to help you with CPU
> utilization.
> However, if you are running this on a UNIX box of
> some kind, you can (re)nice the process and thus
> lower its priority, giving other processes more time
> with the CPU.  Windows may have something similar.
>=20
> Otis
>=20
> ----- Original Message ----
> From: Amany Moussa <amany_moussa@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Monday, February 20, 2006 9:50:57 AM
> Subject: Lucene CPU Utilization
>=20
>=20
> Hello,
>=20
> I am building a Lucene index with over a million  =20
> documents retrieved from database. I am running the
> application on Unix, I am getting a 100% CPU
> utilization the moment the application start.
> The application creates a list of small indices in a
> temp directory then merge them all in the main index
> file.                                              =20
> =20
> Is there any way I can tune the indexing process and
> reduce the CPU utilization.                        =20
> Thanks much.                             =20
>=20
> Amany M.
>=20
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around=20
> http://mail.yahoo.com=20
>=20
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
>=20
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around=20
http://mail.yahoo.com=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 00:00:05 2006
Return-Path: <java-user-return-19054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32800 invoked from network); 21 Feb 2006 00:00:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 00:00:05 -0000
Received: (qmail 55832 invoked by uid 500); 20 Feb 2006 23:59:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55794 invoked by uid 500); 20 Feb 2006 23:59:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55781 invoked by uid 99); 20 Feb 2006 23:59:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 15:59:58 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.22.58.18] (HELO mail.dicarta.com) (12.22.58.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 15:59:56 -0800
Received: from corpx.corp.dicarta.com (corpx.dicarta.com [10.1.8.35])
	by mail.dicarta.com  with ESMTP id k1KNxVs15574
	for <java-user@lucene.apache.org>; Mon, 20 Feb 2006 15:59:31 -0800 (PST)
From: jwang@dicarta.com
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C63679.B3930F8C"
Subject: Re: Lucene CPU Utilization 
Date: Mon, 20 Feb 2006 15:59:35 -0800
Message-ID: <9778DA4F3D53D04B9AE80AC64AC073A305745B26@corpx.dicarta.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <9778DA4F3D53D04B9AE80AC64AC073A305745B26@corpx.dicarta.com>
Thread-Topic: [NEW] - Re: Lucene CPU Utilization - Message is from an unknown sender
Thread-Index: AcY2W27cBRIrjmMCR0+1nsKcAY/RbQAHYhaS
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C63679.B3930F8C
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

We're going to run into this issue when dealing with some of our larger =
customers.

What we plan on doing is to separate our indexers in to separate cpus, =
and then throttle them by using sleep(100) or some other number to be =
determined in testing.  We also plan on doing this over 2 weekends, =
since our user base on the weekend is probably 10% of that on a weekday. =
 We'll merge the generated indexes into a master index at the end of =
each weekend, so the users can search on half (hopefully) of the =
documents in the first week of deployment and all in the second week.

Jeff Wang
diCarta, Inc.

-----Original Message-----
From:	Amany Moussa [mailto:amany_moussa@yahoo.com]
Sent:	Mon 2/20/2006 12:22 PM
To:	java-user@lucene.apache.org
Cc:=09
Subject:	Re: Lucene CPU Utilization
Thank you so much for your reply.

I know that you answered this question before. I just
wanted to post the question to receive more feedbacks
and share the information.

Thanks again.

Amany M.

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> I think I answered that question just the other
> day.... privately...
> No, there is nothing in Lucene to help you with CPU
> utilization.
> However, if you are running this on a UNIX box of
> some kind, you can (re)nice the process and thus
> lower its priority, giving other processes more time
> with the CPU.  Windows may have something similar.
>=20
> Otis
>=20
> ----- Original Message ----
> From: Amany Moussa <amany_moussa@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Monday, February 20, 2006 9:50:57 AM
> Subject: Lucene CPU Utilization
>=20
>=20
> Hello,
>=20
> I am building a Lucene index with over a million  =20
> documents retrieved from database. I am running the
> application on Unix, I am getting a 100% CPU
> utilization the moment the application start.
> The application creates a list of small indices in a
> temp directory then merge them all in the main index
> file.                                              =20
> =20
> Is there any way I can tune the indexing process and
> reduce the CPU utilization.                        =20
> Thanks much.                             =20
>=20
> Amany M.
>=20
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around=20
> http://mail.yahoo.com=20
>=20
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
>=20
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around=20
http://mail.yahoo.com=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






------_=_NextPart_001_01C63679.B3930F8C
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C63679.B3930F8C--

From java-user-return-19055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 03:24:15 2006
Return-Path: <java-user-return-19055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4775 invoked from network); 21 Feb 2006 03:24:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 03:24:14 -0000
Received: (qmail 13067 invoked by uid 500); 21 Feb 2006 03:24:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13013 invoked by uid 500); 21 Feb 2006 03:24:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13002 invoked by uid 99); 21 Feb 2006 03:24:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Feb 2006 19:24:08 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Feb 2006 19:24:07 -0800
Received: (qmail 40978 invoked by uid 60001); 21 Feb 2006 03:23:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Eiz/MqfJWGp1DXl53em4bnOs2SuflaHiK64HWeUKIBln40xWvabGDlXmPZhzrvXi1EeuySJ2u2rHoZyT2teCibggfbzK+mP/yvlDN47ziUv1ul647ckQOi0AuGe4CK9LhUNIXv/qk3PwztpkbeAmtHedZX1rT7aoae9aQEmp3lo=  ;
Message-ID: <20060221032346.40976.qmail@web50313.mail.yahoo.com>
Date: Mon, 20 Feb 2006 19:23:46 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene in multithreaded enviroment
To: java-user@lucene.apache.org
In-Reply-To: <001b01c63677$93bbe2d0$6402a8c0@sleipnir2>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Klaus,
If you use a single instance of IndexWriter, you can call addDocument(...) =
on it without synchronizing (things are thread safe inside the call).  If y=
ou are opening/closing IndexWriters yourself, then you have to make sure yo=
u have only 1 IndexWriter open at a time.
If you have Lucene in Action, check out section 2.9.1 - http://www.lucenebo=
ok.com/search?query=3Dconcurrency+rules

Otis

----- Original Message ----
From: Klaus <klaus@vommond.de>
To: java-user@lucene.apache.org
Sent: Mon 20 Feb 2006 06:44:23 PM EST
Subject: Lucene in multithreaded enviroment


Hi=20
I'm using Lucene in a web application. Every time a new object is added to
the system the index will be updated. May there be any problems, if two
objects were created at the same moment? I know Lucene has some locking
mechanism.=20

Thx

klaus

-----Urspr=C3=BCngliche Nachricht-----
Von: Amany Moussa [mailto:amany_moussa@yahoo.com]=20
Gesendet: Montag, 20. Februar 2006 21:22
An: java-user@lucene.apache.org
Betreff: Re: Lucene CPU Utilization

Thank you so much for your reply.

I know that you answered this question before. I just
wanted to post the question to receive more feedbacks
and share the information.

Thanks again.

Amany M.

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> I think I answered that question just the other
> day.... privately...
> No, there is nothing in Lucene to help you with CPU
> utilization.
> However, if you are running this on a UNIX box of
> some kind, you can (re)nice the process and thus
> lower its priority, giving other processes more time
> with the CPU.  Windows may have something similar.
>=20
> Otis
>=20
> ----- Original Message ----
> From: Amany Moussa <amany_moussa@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Monday, February 20, 2006 9:50:57 AM
> Subject: Lucene CPU Utilization
>=20
>=20
> Hello,
>=20
> I am building a Lucene index with over a million  =20
> documents retrieved from database. I am running the
> application on Unix, I am getting a 100% CPU
> utilization the moment the application start.
> The application creates a list of small indices in a
> temp directory then merge them all in the main index
> file.                                              =20
> =20
> Is there any way I can tune the indexing process and
> reduce the CPU utilization.                        =20
> Thanks much.                             =20
>=20
> Amany M.
>=20
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around=20
> http://mail.yahoo.com=20
>=20
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
>=20
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around=20
http://mail.yahoo.com=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 13:41:39 2006
Return-Path: <java-user-return-19056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81061 invoked from network); 21 Feb 2006 13:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 13:41:39 -0000
Received: (qmail 80992 invoked by uid 500); 21 Feb 2006 13:41:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80945 invoked by uid 500); 21 Feb 2006 13:41:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80934 invoked by uid 99); 21 Feb 2006 13:41:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 05:41:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 05:41:32 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1LDf067004774
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 14:41:00 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [267.15.12/265]); Tue, 21 Feb 2006 14:40:58 +0100
Message-ID: <43FB1869.4050805@isb-sib.ch>
Date: Tue, 21 Feb 2006 14:40:57 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Boolean Precedence
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was wondering:

Is there any good reason why

   x AND y OR z

is interpreted as

   +(+x y z)

rather than

   +(+(+x +y) z)

?

If yes, any suggestions how this could be accomplished most easily?

Searched the mailing list, found something about a "PrecedenceQueryParser", 
but this seems to have disappeared?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 13:49:26 2006
Return-Path: <java-user-return-19057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85395 invoked from network); 21 Feb 2006 13:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 13:49:25 -0000
Received: (qmail 99225 invoked by uid 500); 21 Feb 2006 13:49:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99180 invoked by uid 500); 21 Feb 2006 13:49:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99168 invoked by uid 99); 21 Feb 2006 13:49:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 05:49:04 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FROM_LOCAL_NOVOWEL,HTML_00_10,HTML_MESSAGE,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrshwrk@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 05:49:03 -0800
Received: by wproxy.gmail.com with SMTP id 36so273827wra
        for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 05:48:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=pdTF8WJ1HKf+Jy3iVkqHfr06D74bNYRuIL3sbSd+wNXVbGTZwue1TXdWLydsUBdaSg5rIBYbIK2jheyfANjmNlNQeiYrDTxMYbM3Q1LqxcrqGZQ+ayu2bUVKrSC6tRIIWwkaU6weq7loMRkvRwcRF7lMDOqMKZnUvC246dyRcvg=
Received: by 10.65.188.15 with SMTP id q15mr1407363qbp;
        Tue, 21 Feb 2006 05:48:42 -0800 (PST)
Received: by 10.65.192.2 with HTTP; Tue, 21 Feb 2006 05:48:42 -0800 (PST)
Message-ID: <bf155c6c0602210548kb6a5e39w7e91e2d200d4268b@mail.gmail.com>
Date: Tue, 21 Feb 2006 19:18:42 +0530
From: rrshwrk@gmail.com
To: java-user@lucene.apache.org, tomcat-user@jakarta.apache.org
Subject: Tools to save click through data in a search engine
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13259_25957606.1140529722580"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13259_25957606.1140529722580
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

hi all,

I am using lucene + tomcat to host a web search engine. I want to save the
queries posted to the search engine and the clicked results
returned by the search engine. However, i am unsure if they are any tools
readily available to do that (prefererably open source tools)
I am sure atleast some one in this list might be doing it. Could you please
point me to any sources avaliable.

thanks
~Rsh

------=_Part_13259_25957606.1140529722580--

From java-user-return-19058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 13:59:42 2006
Return-Path: <java-user-return-19058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91120 invoked from network); 21 Feb 2006 13:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 13:59:41 -0000
Received: (qmail 25341 invoked by uid 500); 21 Feb 2006 13:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25317 invoked by uid 500); 21 Feb 2006 13:59:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25306 invoked by uid 99); 21 Feb 2006 13:59:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 05:59:35 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=TRACKER_ID
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.136.41.129] (HELO ringhals.agent25.se) (213.136.41.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 05:59:34 -0800
Subject: AccumulativeFieldAnalyzer
From: Oskar Berger <oskar.berger@agent25.se>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Tue, 21 Feb 2006 14:59:07 +0100
Message-Id: <1140530347.17844.19.camel@murmansk>
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

Blatantly trying to take advantage of previous mistakes and expertise
experience among all of you, I hereby ask for help in a small issue
dealing with indexing into multiple fields I've run into.

Objective:
To index multiple fields derived from one source field.
e.g. CASE, REVERSE, REVERSE_CASE

I've been thinking about using PerFieldAnalyzerWrapper as a start but
then write an Analyzer that would store preprocessed tokenStreams for
each field in a hash map. Then I could write a MarionetteAnalyzer that
de facto would do nothing at all but lookup the supplied tokenStream
(initialized by the one that is used to indeed analyze the field), and
add it in the PerFieldAnalyzerWrapper.

This way the field would be analyzed only once, and as the source is the
same it does not make sense to do it over and over.

Is this a sound approach or am I totally out in the blue?

/oskar


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 14:55:16 2006
Return-Path: <java-user-return-19059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32988 invoked from network); 21 Feb 2006 14:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 14:55:16 -0000
Received: (qmail 61697 invoked by uid 500); 21 Feb 2006 14:55:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61672 invoked by uid 500); 21 Feb 2006 14:55:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61661 invoked by uid 99); 21 Feb 2006 14:55:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 06:55:09 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 06:55:09 -0800
Received: from imp6-g19.free.fr (imp6-g19.free.fr [212.27.42.6])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 5DC696CD54
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 15:54:48 +0100 (CET)
Received: by imp6-g19.free.fr (Postfix, from userid 33)
	id 49B792CDC2; Tue, 21 Feb 2006 15:54:48 +0100 (MET)
Received: from 160.92.7.69 ([160.92.7.69]) 
	by imp6-g19.free.fr (IMP) with HTTP 
	for <artdivin@212.27.48.2>; Tue, 21 Feb 2006 15:54:48 +0100
Message-ID: <1140533688.43fb29b82493c@imp6-g19.free.fr>
Date: Tue, 21 Feb 2006 15:54:48 +0100
From: artdivin@free.fr
To: java-user@lucene.apache.org
Subject: Search through WML/WAP
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.5
X-Originating-IP: 160.92.7.69
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
I'm trying to find a search engine allowing to search through WML (WAP).
Do you know if Lucene enables to do it ? Did you already try it ?
thanx for your answers !
artdivin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 15:06:28 2006
Return-Path: <java-user-return-19060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41196 invoked from network); 21 Feb 2006 15:06:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 15:06:27 -0000
Received: (qmail 91329 invoked by uid 500); 21 Feb 2006 15:06:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91298 invoked by uid 500); 21 Feb 2006 15:06:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91287 invoked by uid 99); 21 Feb 2006 15:06:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:06:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.139.157.247] (HELO stimxch1.dev.mediagrif.com) (207.139.157.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:06:18 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C636F8.513ED5E2"
Subject: Open an IndexWriter in parallel with an IndexReader on the same index.
Date: Tue, 21 Feb 2006 10:05:56 -0500
Message-ID: <BE2E4FB5FE474F49A9DEA7B72EF201D5B20762@stimxch1.dev.mediagrif.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Open an IndexWriter in parallel with an IndexReader on the same index.
Thread-Index: AcY2+FExExsMnKgjRqi6kBhAlRctdw==
From: "Pierre Luc Dupont" <PLDupont@mediagrif.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C636F8.513ED5E2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
    is it possible to open an IndexWriter and an IndexReader on the same
index, at the same time,
to do deleteTerm and addDocument?
=20
Thanks!
Pierre-Luc

------_=_NextPart_001_01C636F8.513ED5E2--

From java-user-return-19061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 15:14:24 2006
Return-Path: <java-user-return-19061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47562 invoked from network); 21 Feb 2006 15:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 15:14:22 -0000
Received: (qmail 16703 invoked by uid 500); 21 Feb 2006 15:14:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16675 invoked by uid 500); 21 Feb 2006 15:14:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16664 invoked by uid 99); 21 Feb 2006 15:14:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:14:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.194 as permitted sender)
Received: from [64.233.182.194] (HELO nproxy.gmail.com) (64.233.182.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:14:13 -0800
Received: by nproxy.gmail.com with SMTP id l37so815812nfc
        for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 07:13:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=D6nsEhvzEq1lVsMs1pe+Cm6T+JWlnhkgKlzfErIrT54rDOvDzg2wZc8UZJy+RlYZKNyOs1fugFbDuS2Aol/K31n7+kPEqdLovZHUQPXUAQ2Kgk+BbDugcOWZ8lVyZAdoELC0nB+mJ/5tEEWBc5pzy/3oAI9BpeOimMMJYr7nxa8=
Received: by 10.48.42.2 with SMTP id p2mr1507238nfp;
        Tue, 21 Feb 2006 07:13:52 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Tue, 21 Feb 2006 07:13:52 -0800 (PST)
Message-ID: <c68e39170602210713u353d5917h412cd3e416736ffc@mail.gmail.com>
Date: Tue, 21 Feb 2006 10:13:52 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Open an IndexWriter in parallel with an IndexReader on the same index.
In-Reply-To: <BE2E4FB5FE474F49A9DEA7B72EF201D5B20762@stimxch1.dev.mediagrif.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BE2E4FB5FE474F49A9DEA7B72EF201D5B20762@stimxch1.dev.mediagrif.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 2/21/06, Pierre Luc Dupont <PLDupont@mediagrif.com> wrote:
>     is it possible to open an IndexWriter and an IndexReader on the same
> index, at the same time,
> to do deleteTerm and addDocument?

No, it's not possible.  You should batch things: do all your
deletions, close the IndexReader, then open an IndexWriter and do all
the addDocument calls.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 15:16:59 2006
Return-Path: <java-user-return-19062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49332 invoked from network); 21 Feb 2006 15:16:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 15:16:59 -0000
Received: (qmail 23654 invoked by uid 500); 21 Feb 2006 15:16:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23608 invoked by uid 500); 21 Feb 2006 15:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23589 invoked by uid 99); 21 Feb 2006 15:16:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:16:52 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 205.152.59.64 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from [205.152.59.64] (HELO imf16aec.mail.bellsouth.net) (205.152.59.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:16:50 -0800
Received: from ibm56aec.bellsouth.net ([68.209.119.157])
          by imf16aec.mail.bellsouth.net with ESMTP
          id <20060221151628.TBNE2455.imf16aec.mail.bellsouth.net@ibm56aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Tue, 21 Feb 2006 10:16:28 -0500
Received: from jimwormold ([68.209.119.157]) by ibm56aec.bellsouth.net
          with ESMTP
          id <20060221151628.ZZNH24208.ibm56aec.bellsouth.net@jimwormold>
          for <java-user@lucene.apache.org>;
          Tue, 21 Feb 2006 10:16:28 -0500
Date: Tue, 21 Feb 2006 10:15:55 -0500 (EST)
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: exact match ..
In-Reply-To: <B31F5352-1D03-4620-86AB-EE963EB53D6B@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.63.0602210946130.25461@jimwormold>
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com> 
 <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com> 
 <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu> 
 <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com>
 <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com>
 <43F9FF66.4050204@syr.edu> <43FA0433.7040908@allegromedical.com>
 <43FA0903.6040506@allegromedical.com> <B31F5352-1D03-4620-86AB-EE963EB53D6B@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The way I have solved the problem of allowing exact matches is, for each
field in which it is possible for an exact match to be requested, a
parallel field is created at index time that is unstemmed and has a
specific prefix:

 	if (fieldData.isSearched() && tokenize && usingStemmingAnalyzer) {
 		doc.add(new Field(UNSTEMMED_FIELD_PREFIX + fieldName,
 			fieldValueStr, false, true, true));
 	}

Also, I use a custom Analyzer for both indexing and searching that
understands this:

 	public TokenStream tokenStream(String fieldName, Reader reader)
 	{
 		TokenStream result = new WISTokenizer(reader);
 		result = new StandardFilter(result);
 		result = new LowerCaseFilter(result);
 		if (stoptable != null) {
 			result = new StopFilter(result, stoptable);
 		}
 		if (!fieldName.startsWith(UNSTEMMED_FIELD_PREFIX)) {
 			result = new SpellFilter(result);
 			result = new PorterStemFilter(result);
 		}
 		return result;
 	}

For searching, I've written a custom parser using JavaCC (I need to
support more operators than Lucene does OOTB), as well as a
QueryBuilder class that constructs the queries "manually" for each node
type. For a quoted string (i.e. requiring an exact match):

 	case JJTQUOTED:
 		if (node.hasWildcard()) {
 			Node phraseNode = SimpleNode.getPhraseNode(node.getName());
 			query = getSpanQuery(new Node[]{phraseNode}, currentField, 0);
 		}
 		else {
 			// match quoted strings "exactly", i.e. without stemming
 			// NB: matches are case insensitive
 			String fieldToSearch = usingStemmingAnalyzer ?
 				UNSTEMMED_FIELD_PREFIX + currentField : currentField;
 			query = getTerminalQuery(node.getName(), fieldToSearch);
 		}
 		break;

and:

 	protected Query getTerminalQuery(String term, String currentField)
 		throws QueryBuildingException
 	{
 		Query q;
 		try {
 			q = org.apache.lucene.queryParser.QueryParser.parse(term,
 				currentField, analyzer);
 		}
 		catch (org.apache.lucene.queryParser.ParseException e) {
 			throw new QueryBuildingException(e);
 		}
 		return q;
 	}

There is, obviously, a fair amount of work involved, but the level of
control is the payoff.

-- Robert

--------------------
Robert Watkins
rwatkins@foo-bar.org
--------------------

On Mon, 20 Feb 2006, Erik Hatcher wrote:

>
> Yes, this is what PerFieldAnalyzerWrapper provides for you, as described in 
> detail in several sections of Lucene in Action:
>
> 	http://www.lucenebook.com/search?query=PerFieldAnalyzerWrapper
>
> Erik
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 15:20:23 2006
Return-Path: <java-user-return-19063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52705 invoked from network); 21 Feb 2006 15:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 15:20:21 -0000
Received: (qmail 36427 invoked by uid 500); 21 Feb 2006 15:20:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36379 invoked by uid 500); 21 Feb 2006 15:20:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36359 invoked by uid 99); 21 Feb 2006 15:20:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:20:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.139.157.247] (HELO stimxch1.dev.mediagrif.com) (207.139.157.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:20:13 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Open an IndexWriter in parallel with an IndexReader on the same index.
Date: Tue, 21 Feb 2006 10:19:52 -0500
Message-ID: <BE2E4FB5FE474F49A9DEA7B72EF201D5B20764@stimxch1.dev.mediagrif.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Open an IndexWriter in parallel with an IndexReader on the same index.
Thread-Index: AcY2+X6FEg7d3O/rReCwD3dVnswMzAAAJn2Q
From: "Pierre Luc Dupont" <PLDupont@mediagrif.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok, thanks.

That is what I was thinking.=20

Pierre-Luc=20

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]=20
Sent: 2006-02-21 10:14
To: java-user@lucene.apache.org
Subject: Re: Open an IndexWriter in parallel with an IndexReader on the
same index.

On 2/21/06, Pierre Luc Dupont <PLDupont@mediagrif.com> wrote:
>     is it possible to open an IndexWriter and an IndexReader on the=20
> same index, at the same time, to do deleteTerm and addDocument?

No, it's not possible.  You should batch things: do all your deletions,
close the IndexReader, then open an IndexWriter and do all the
addDocument calls.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 15:33:08 2006
Return-Path: <java-user-return-19064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62861 invoked from network); 21 Feb 2006 15:33:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 15:33:07 -0000
Received: (qmail 81585 invoked by uid 500); 21 Feb 2006 15:33:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81560 invoked by uid 500); 21 Feb 2006 15:33:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81549 invoked by uid 99); 21 Feb 2006 15:33:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:33:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:33:00 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: fitler vs query
Date: Tue, 21 Feb 2006 09:31:49 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B291988FF@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: fitler vs query
Thread-Index: AcY0n/8L2DjVdyYkRDeoDPObUaO/JACWyTwQ
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Before I learned about filters in lucene I was building my initial query
as a stringbuffer and then I use that with a queryparser.    Is there
any difference/advantage to separating out the "filter" part of my query
into a proper filter in lucene or does it just add requirements the same
to the query as I am doing (+field:blah AND field:blah)?

--jN


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 15:46:17 2006
Return-Path: <java-user-return-19065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72799 invoked from network); 21 Feb 2006 15:46:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 15:46:16 -0000
Received: (qmail 11310 invoked by uid 500); 21 Feb 2006 15:46:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11228 invoked by uid 500); 21 Feb 2006 15:46:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11017 invoked by uid 99); 21 Feb 2006 15:46:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:46:05 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 07:46:04 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.12.10/8.12.10) with ESMTP id k1LFjhHm249924
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 15:45:43 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.12.10/NCO/VERS6.8) with ESMTP id k1LFjq0f150894
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 16:45:52 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11/8.13.3) with ESMTP id k1LFjgas003649
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 16:45:42 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11/8.12.11) with ESMTP id k1LFjgCX003643
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 16:45:42 +0100
In-Reply-To: <c68e39170602210713u353d5917h412cd3e416736ffc@mail.gmail.com>
Subject: Re: Open an IndexWriter in parallel with an IndexReader on the same index.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 August 18, 2005
Message-ID: <OFBC0D871B.E7CC2A41-ONC225711C.0054C492-C225711C.0055B04E@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Tue, 21 Feb 2006 17:35:56 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0HF90 | November 16, 2005) at
 21/02/2006 17:45:52
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"Yonik Seeley" <yseeley@gmail.com> wrote on 21/02/2006 05:13:52 PM:
> On 2/21/06, Pierre Luc Dupont <PLDupont@mediagrif.com> wrote:
> >     is it possible to open an IndexWriter and an IndexReader on the
same
> > index, at the same time,
> > to do deleteTerm and addDocument?
>
> No, it's not possible.  You should batch things: do all your
> deletions, close the IndexReader, then open an IndexWriter and do all
> the addDocument calls.

For some applications, the seperation of indexWriter (which can add a
document) and indexReader (which can delete a document) is very
inconvenient.
For example, consider a case where documents are often updated, and we
often need to find and remove the old document and add the new version
of the document. the "indexModifier" class nicely hides the complexity
from us and allows both addition and deletion, but the documentation
says its performance sucks (when used in the way I just outlined):
imagine 1000 documents being modified, and now we start deleting and
adding each one, one after another.

It would have been nice if someone wrote something like indexModifier,
but with a cache, similar to what Yonik suggested above: deletions will
not be done immediately, but rather cached and later done in batches.
Of course, batched deletions should not remember the term to delete,
but rather the matching document numbers at the time of the deletion -
because after the addition of the modified document if we search for
the term again we'll find two documents.

What about this idea? Does an implementation of something similar
already exist?

--
Nadav Har'El


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 16:22:29 2006
Return-Path: <java-user-return-19066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97743 invoked from network); 21 Feb 2006 16:22:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 16:22:29 -0000
Received: (qmail 23920 invoked by uid 500); 21 Feb 2006 16:22:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23884 invoked by uid 500); 21 Feb 2006 16:22:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23873 invoked by uid 99); 21 Feb 2006 16:22:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 08:22:22 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 08:22:21 -0800
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id QAA11064
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 16:30:01 GMT
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma011059; Tue, 21 Feb 06 16:29:59 GMT
In-Reply-To: <OFBC0D871B.E7CC2A41-ONC225711C.0054C492-C225711C.0055B04E@il.ibm.com>
Subject: Re: Open an IndexWriter in parallel with an IndexReader on the same index.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF7DB9F854.11A72AAF-ON8025711C.00575582-8025711C.0059E883@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Tue, 21 Feb 2006 16:26:23 +0000
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 21/02/2006 16:26:23
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N






I have a set of classes similar in function to IndexModifier but a little
more advanced. The idea is  to keep the IndexReaders and IndexWriters open
as long as possible only closing them when absolutely necessary. Using the
concurrency package allows for me to have multiple readers and a single
writer. I use a watchdog timer to flush the index if the index is idle for
a while (closes the index flushes unwritten writes on a writer and
unwritten deletes on a reader). The downside to this approach is you lose
all the benefits of any caching that Lucene does of sorted results and of
any filters that are weakly cached on IndexReaders which can have a massive
impact on searching (I sometimes take a several seconds hit after the index
is reopened on the first sorted query).

In addition to this index management code I have a queue onto which I place
new documents/updates/deletes. Every time a document is added the tasks on
the queue are reordered to batch up similar actions. The downside here is
that this is effectively single threaded which arguably affects the
performance. In addition for this to work well (and to prevent to
equivalent of a databases "dirty read") I also have to queue up the
querying of the index until all previous updates have been carried out -
not ideal but not causing too significant a problem in my situation.

My experience is that producing something to manage the indexes swapping
between readers and writers is relatively straightforward.  The task of
batching up updates/deletes and the like may be too application specific -
my code relies on my own unique document ids being in the index and so is
quite specific.

Regards

Paul I.




                                                                           
             "Nadav Har'El"                                                
             <NYH@il.ibm.com>                                              
                                                                        To 
             21/02/2006 15:35          java-user@lucene.apache.org         
                                                                        cc 
                                                                           
             Please respond to                                     Subject 
             java-user@lucene.         Re: Open an IndexWriter in parallel 
                apache.org             with an IndexReader on the same     
                                       index.                              
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           




"Yonik Seeley" <yseeley@gmail.com> wrote on 21/02/2006 05:13:52 PM:
> On 2/21/06, Pierre Luc Dupont <PLDupont@mediagrif.com> wrote:
> >     is it possible to open an IndexWriter and an IndexReader on the
same
> > index, at the same time,
> > to do deleteTerm and addDocument?
>
> No, it's not possible.  You should batch things: do all your
> deletions, close the IndexReader, then open an IndexWriter and do all
> the addDocument calls.

For some applications, the seperation of indexWriter (which can add a
document) and indexReader (which can delete a document) is very
inconvenient.
For example, consider a case where documents are often updated, and we
often need to find and remove the old document and add the new version
of the document. the "indexModifier" class nicely hides the complexity
from us and allows both addition and deletion, but the documentation
says its performance sucks (when used in the way I just outlined):
imagine 1000 documents being modified, and now we start deleting and
adding each one, one after another.

It would have been nice if someone wrote something like indexModifier,
but with a cache, similar to what Yonik suggested above: deletions will
not be done immediately, but rather cached and later done in batches.
Of course, batched deletions should not remember the term to delete,
but rather the matching document numbers at the time of the deletion -
because after the addition of the modified document if we search for
the term again we'll find two documents.

What about this idea? Does an implementation of something similar
already exist?

--

Nadav Har'El


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 16:33:57 2006
Return-Path: <java-user-return-19067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3535 invoked from network); 21 Feb 2006 16:33:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 16:33:57 -0000
Received: (qmail 49572 invoked by uid 500); 21 Feb 2006 16:33:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49540 invoked by uid 500); 21 Feb 2006 16:33:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49529 invoked by uid 99); 21 Feb 2006 16:33:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 08:33:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 08:33:50 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Tue, 21 Feb 2006 09:33:28 -0700
Message-ID: <43FB40D2.3080103@allegromedical.com>
Date: Tue, 21 Feb 2006 09:33:22 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: get results by relevance, limiting results and then sort the results
 by some criterion
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>  <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>  <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>  <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com> <43F9FF66.4050204@syr.edu> <43FA0433.7040908@allegromedical.com> <43FA0903.6040506@allegromedical.com> <B31F5352-1D03-4620-86AB-EE963EB53D6B@ehatchersolutions.com> <Pine.LNX.4.63.0602210946130.25461@jimwormold>
In-Reply-To: <Pine.LNX.4.63.0602210946130.25461@jimwormold>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When I do a search for example on "batteries" i get 1200+ results. I 
would like to show the user lets say 300. I can do that by only 
extracting the first 300 hits (sorted by decreasing relevance by 
default) and displaying those to the user.

Now on the search results page, I have a drop down box that lets the 
user sort the results by price. When the user selects the "Sort by price 
low to high", i would like to be able to sort the same 300 hits I got 
above (sorted by decreasing relevance by default) by price.

Essentially I want to be able to sort the first 300 relevant search 
results by price. (in other words I would like to be able to get search 
results by relevance, limit the results and sort the results by some 
criterion).

What would be a good way to do this in lucene?

-Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 17:54:22 2006
Return-Path: <java-user-return-19068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57677 invoked from network); 21 Feb 2006 17:54:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 17:54:21 -0000
Received: (qmail 32984 invoked by uid 500); 21 Feb 2006 17:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32915 invoked by uid 500); 21 Feb 2006 17:54:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32904 invoked by uid 99); 21 Feb 2006 17:54:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 09:54:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 09:54:14 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: get results by relevance, limiting results and then sort the results by some criterion
Date: Tue, 21 Feb 2006 11:53:24 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B2919891B@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: get results by relevance, limiting results and then sort the results by some criterion
Thread-Index: AcY3BHD0NPTz6y/5TeCWuJ+qvtgBBwACuSaw
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm sure you've taken care of this, but I am curious myself:

If the 301 document only has a single term "batteries" (and thus is so
far low on the Hits), but has a price of seven cents, then the sort of
all the documents with "batteries" would put this near the top, but by
eliminating all documents above 300, this one doesn't appear in the
solution you are working for, correct?    Why is that a good thing?
It seems you would want to sort on the full document list, and then
return on the 300 top that you want the user to see.     =20

I think I'm just curious why getting rid of some that could (in a new
sort) be of higher relevance is a good thing.

-----Original Message-----
From: Mufaddal Khumri [mailto:mkhumri@allegromedical.com]=20
Sent: Tuesday, February 21, 2006 10:33 AM
To: java-user@lucene.apache.org
Subject: get results by relevance, limiting results and then sort the
results by some criterion

When I do a search for example on "batteries" i get 1200+ results. I=20
would like to show the user lets say 300. I can do that by only=20
extracting the first 300 hits (sorted by decreasing relevance by=20
default) and displaying those to the user.

Now on the search results page, I have a drop down box that lets the=20
user sort the results by price. When the user selects the "Sort by price

low to high", i would like to be able to sort the same 300 hits I got=20
above (sorted by decreasing relevance by default) by price.

Essentially I want to be able to sort the first 300 relevant search=20
results by price. (in other words I would like to be able to get search=20
results by relevance, limit the results and sort the results by some=20
criterion).

What would be a good way to do this in lucene?

-Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 18:02:29 2006
Return-Path: <java-user-return-19069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63051 invoked from network); 21 Feb 2006 18:02:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 18:02:28 -0000
Received: (qmail 48822 invoked by uid 500); 21 Feb 2006 18:02:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48795 invoked by uid 500); 21 Feb 2006 18:02:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48784 invoked by uid 99); 21 Feb 2006 18:02:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 10:02:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 10:02:21 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Tue, 21 Feb 2006 11:01:59 -0700
Message-ID: <43FB5591.3020304@allegromedical.com>
Date: Tue, 21 Feb 2006 11:01:53 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: get results by relevance, limiting results and then sort the
 results by some criterion
References: <F9E303076B72074AB76B2C8F78952B2919891B@bettylou.configureone.net>
In-Reply-To: <F9E303076B72074AB76B2C8F78952B2919891B@bettylou.configureone.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In my case when we search for lets say cameras , my top x results are
all sorts of cameras and then i get documents that match camera casings etc.

As a company we want to show as many cameras as possible and not other 
camera
related products for this one web view on a specific page we have. On 
this same page
we also want to provide a way that the user can select "price high to 
low" or price low to high" and sort these top x results. Essentially the 
hard part is to come up with the X so that you ideally dont prune any 
cameras.
As a business we want to strive to get as many cameras in the search 
results, but at the same time we dont mind if a few cameras do not 
appear in those results if we can really fine tune our search results to 
only show cameras and not camera casings and camera batteries etc.

I have been looking at QueryFilter and the Sort API, but havent yet 
figured out a way to do what I am trying to do .. any pointers are 
greatly appreciated.

-Thanks,

John Powers wrote:

>I'm sure you've taken care of this, but I am curious myself:
>
>If the 301 document only has a single term "batteries" (and thus is so
>far low on the Hits), but has a price of seven cents, then the sort of
>all the documents with "batteries" would put this near the top, but by
>eliminating all documents above 300, this one doesn't appear in the
>solution you are working for, correct?    Why is that a good thing?
>It seems you would want to sort on the full document list, and then
>return on the 300 top that you want the user to see.      
>
>I think I'm just curious why getting rid of some that could (in a new
>sort) be of higher relevance is a good thing.
>
>-----Original Message-----
>From: Mufaddal Khumri [mailto:mkhumri@allegromedical.com] 
>Sent: Tuesday, February 21, 2006 10:33 AM
>To: java-user@lucene.apache.org
>Subject: get results by relevance, limiting results and then sort the
>results by some criterion
>
>When I do a search for example on "batteries" i get 1200+ results. I 
>would like to show the user lets say 300. I can do that by only 
>extracting the first 300 hits (sorted by decreasing relevance by 
>default) and displaying those to the user.
>
>Now on the search results page, I have a drop down box that lets the 
>user sort the results by price. When the user selects the "Sort by price
>
>low to high", i would like to be able to sort the same 300 hits I got 
>above (sorted by decreasing relevance by default) by price.
>
>Essentially I want to be able to sort the first 300 relevant search 
>results by price. (in other words I would like to be able to get search 
>results by relevance, limit the results and sort the results by some 
>criterion).
>
>What would be a good way to do this in lucene?
>
>-Thanks.
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 18:06:24 2006
Return-Path: <java-user-return-19070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64722 invoked from network); 21 Feb 2006 18:06:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 18:06:23 -0000
Received: (qmail 57333 invoked by uid 500); 21 Feb 2006 18:06:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57308 invoked by uid 500); 21 Feb 2006 18:06:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57297 invoked by uid 99); 21 Feb 2006 18:06:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 10:06:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 10:06:16 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Tue, 21 Feb 2006 11:05:55 -0700
Message-ID: <43FB567D.4080207@allegromedical.com>
Date: Tue, 21 Feb 2006 11:05:49 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: get results by relevance, limiting results and then sort the
 results by some criterion
References: <F9E303076B72074AB76B2C8F78952B2919891B@bettylou.configureone.net> <43FB5591.3020304@allegromedical.com>
In-Reply-To: <43FB5591.3020304@allegromedical.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So yes, if the xth + 1 item happens to be a camera and if its price 
happens to be lower than the previous x cameras it wont be included in 
this view and that is exactly what we want.

Mufaddal Khumri wrote:

> In my case when we search for lets say cameras , my top x results are
> all sorts of cameras and then i get documents that match camera 
> casings etc.
>
> As a company we want to show as many cameras as possible and not other 
> camera
> related products for this one web view on a specific page we have. On 
> this same page
> we also want to provide a way that the user can select "price high to 
> low" or price low to high" and sort these top x results. Essentially 
> the hard part is to come up with the X so that you ideally dont prune 
> any cameras.
> As a business we want to strive to get as many cameras in the search 
> results, but at the same time we dont mind if a few cameras do not 
> appear in those results if we can really fine tune our search results 
> to only show cameras and not camera casings and camera batteries etc.
>
> I have been looking at QueryFilter and the Sort API, but havent yet 
> figured out a way to do what I am trying to do .. any pointers are 
> greatly appreciated.
>
> -Thanks,
>
> John Powers wrote:
>
>> I'm sure you've taken care of this, but I am curious myself:
>>
>> If the 301 document only has a single term "batteries" (and thus is so
>> far low on the Hits), but has a price of seven cents, then the sort of
>> all the documents with "batteries" would put this near the top, but by
>> eliminating all documents above 300, this one doesn't appear in the
>> solution you are working for, correct?    Why is that a good thing?
>> It seems you would want to sort on the full document list, and then
>> return on the 300 top that you want the user to see.     
>> I think I'm just curious why getting rid of some that could (in a new
>> sort) be of higher relevance is a good thing.
>>
>> -----Original Message-----
>> From: Mufaddal Khumri [mailto:mkhumri@allegromedical.com] Sent: 
>> Tuesday, February 21, 2006 10:33 AM
>> To: java-user@lucene.apache.org
>> Subject: get results by relevance, limiting results and then sort the
>> results by some criterion
>>
>> When I do a search for example on "batteries" i get 1200+ results. I 
>> would like to show the user lets say 300. I can do that by only 
>> extracting the first 300 hits (sorted by decreasing relevance by 
>> default) and displaying those to the user.
>>
>> Now on the search results page, I have a drop down box that lets the 
>> user sort the results by price. When the user selects the "Sort by price
>>
>> low to high", i would like to be able to sort the same 300 hits I got 
>> above (sorted by decreasing relevance by default) by price.
>>
>> Essentially I want to be able to sort the first 300 relevant search 
>> results by price. (in other words I would like to be able to get 
>> search results by relevance, limit the results and sort the results 
>> by some criterion).
>>
>> What would be a good way to do this in lucene?
>>
>> -Thanks.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>  
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 18:11:58 2006
Return-Path: <java-user-return-19071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68230 invoked from network); 21 Feb 2006 18:11:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 18:11:57 -0000
Received: (qmail 73600 invoked by uid 500); 21 Feb 2006 18:11:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73548 invoked by uid 500); 21 Feb 2006 18:11:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73505 invoked by uid 99); 21 Feb 2006 18:11:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 10:11:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 10:11:48 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: get results by relevance, limiting results and then sort the results by some criterion
Date: Tue, 21 Feb 2006 12:11:02 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B29198923@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: get results by relevance, limiting results and then sort the results by some criterion
Thread-Index: AcY3EM7ttNS7urv8QreaNbIJkiqRAQAAOkJQ
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It seems to me that the "X" then is a problem for you.. like you said
"coming up with the X" is hard.     Maybe you want another tag then.
We call those ones you are trying to not return "related items" on our
search system.    So you do a search that has +related:0   or something
like that.   =20

Then you can return only primary products instead of "bolts & screws"
and other ancillary items.

And you don't have to use an arbitrary number to achieve what you want
ideally.       I imagine that the number "x" would differ greatly
between product lines as well.       Then you have "pen" and "pencil".
A search for "pen" would bring back both "product lines", but you don't
want to limit them to either the 300 for the pens or the 300 for the
pencils.   So in this case you'll get back all the primary pens and
pencils, which makes sense.

-----Original Message-----
From: Mufaddal Khumri [mailto:mkhumri@allegromedical.com]=20
Sent: Tuesday, February 21, 2006 12:02 PM
To: java-user@lucene.apache.org
Subject: Re: get results by relevance, limiting results and then sort
the results by some criterion

In my case when we search for lets say cameras , my top x results are
all sorts of cameras and then i get documents that match camera casings
etc.

As a company we want to show as many cameras as possible and not other=20
camera
related products for this one web view on a specific page we have. On=20
this same page
we also want to provide a way that the user can select "price high to=20
low" or price low to high" and sort these top x results. Essentially the

hard part is to come up with the X so that you ideally dont prune any=20
cameras.
As a business we want to strive to get as many cameras in the search=20
results, but at the same time we dont mind if a few cameras do not=20
appear in those results if we can really fine tune our search results to

only show cameras and not camera casings and camera batteries etc.

I have been looking at QueryFilter and the Sort API, but havent yet=20
figured out a way to do what I am trying to do .. any pointers are=20
greatly appreciated.

-Thanks,

John Powers wrote:

>I'm sure you've taken care of this, but I am curious myself:
>
>If the 301 document only has a single term "batteries" (and thus is so
>far low on the Hits), but has a price of seven cents, then the sort of
>all the documents with "batteries" would put this near the top, but by
>eliminating all documents above 300, this one doesn't appear in the
>solution you are working for, correct?    Why is that a good thing?
>It seems you would want to sort on the full document list, and then
>return on the 300 top that you want the user to see.     =20
>
>I think I'm just curious why getting rid of some that could (in a new
>sort) be of higher relevance is a good thing.
>
>-----Original Message-----
>From: Mufaddal Khumri [mailto:mkhumri@allegromedical.com]=20
>Sent: Tuesday, February 21, 2006 10:33 AM
>To: java-user@lucene.apache.org
>Subject: get results by relevance, limiting results and then sort the
>results by some criterion
>
>When I do a search for example on "batteries" i get 1200+ results. I=20
>would like to show the user lets say 300. I can do that by only=20
>extracting the first 300 hits (sorted by decreasing relevance by=20
>default) and displaying those to the user.
>
>Now on the search results page, I have a drop down box that lets the=20
>user sort the results by price. When the user selects the "Sort by
price
>
>low to high", i would like to be able to sort the same 300 hits I got=20
>above (sorted by decreasing relevance by default) by price.
>
>Essentially I want to be able to sort the first 300 relevant search=20
>results by price. (in other words I would like to be able to get search

>results by relevance, limit the results and sort the results by some=20
>criterion).
>
>What would be a good way to do this in lucene?
>
>-Thanks.
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
> =20
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 19:00:25 2006
Return-Path: <java-user-return-19072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9604 invoked from network); 21 Feb 2006 19:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 19:00:16 -0000
Received: (qmail 83112 invoked by uid 500); 21 Feb 2006 19:00:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83003 invoked by uid 500); 21 Feb 2006 19:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82958 invoked by uid 99); 21 Feb 2006 19:00:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:00:01 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Feb 2006 10:59:59 -0800
Received: (qmail 70047 invoked by uid 60001); 21 Feb 2006 18:59:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Hh9Wvwoa2Qqoes31M9XG4M6CKGrsthE0l74hYUXyoVM6gCvJr+tNDDPdbvC/DReIs7SGTMhwukYHjlztm8K9ROaVtl7u5vbKTalLa/ydJYdDN4mZl7n29D/HiKc16BL1VIIvcYxYiKKD+vRwN8VugrInCFOHRjxq78jnzvo91iQ=  ;
Message-ID: <20060221185938.70045.qmail@web50303.mail.yahoo.com>
Date: Tue, 21 Feb 2006 10:59:38 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: get results by relevance, limiting results and then sort the results by some criterion
To: java-user@lucene.apache.org
In-Reply-To: <43FB40D2.3080103@allegromedical.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It sounds like this is a webapp.
I'd consider playing with HTML DOM a little bit - come up with a system where I get top N matches by relevance, store them somewhere, and then just re-sort them using users' criteria, without going back to the Lucene index.

For instance, you could store this data inside some JavaScript arrays in the first results page, and re-sorting inside the client (browser).  Why go all the way back to the server and disk?

Or, if you really want to go to the server, you could come up with a mechanism where the first set of N hits are stored some place on disk in whichever format is suitable (e.g. serialized object on disk, XML...) and then when the user wants to re-sort the matches, go to the server, grab the cached data, sort appropriately, and display.  Smells like ajax, if you want to play with that.

Otis

----- Original Message ----
From: Mufaddal Khumri <mkhumri@allegromedical.com>
To: java-user@lucene.apache.org
Sent: Tue 21 Feb 2006 11:33:22 AM EST
Subject: get results by relevance, limiting results and then sort the results by some criterion

When I do a search for example on "batteries" i get 1200+ results. I 
would like to show the user lets say 300. I can do that by only 
extracting the first 300 hits (sorted by decreasing relevance by 
default) and displaying those to the user.

Now on the search results page, I have a drop down box that lets the 
user sort the results by price. When the user selects the "Sort by price 
low to high", i would like to be able to sort the same 300 hits I got 
above (sorted by decreasing relevance by default) by price.

Essentially I want to be able to sort the first 300 relevant search 
results by price. (in other words I would like to be able to get search 
results by relevance, limit the results and sort the results by some 
criterion).

What would be a good way to do this in lucene?

-Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 19:04:29 2006
Return-Path: <java-user-return-19073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13519 invoked from network); 21 Feb 2006 19:04:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 19:04:29 -0000
Received: (qmail 2070 invoked by uid 500); 21 Feb 2006 19:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2039 invoked by uid 500); 21 Feb 2006 19:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2027 invoked by uid 99); 21 Feb 2006 19:04:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:04:22 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Feb 2006 11:04:21 -0800
Received: (qmail 67095 invoked by uid 60001); 21 Feb 2006 19:04:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Hq6IGNqcFylOgmO6zRO+/CFrwgC7DxLMlmPiFbGA+lORfC2sddWQPOijPaO63BkaDN8CXUQ+ywXnqglREntXupw5W0Ou3jCW+NCPiTLloJnb+m92wSdOOeKhZ4iQM1TDlD3cqRpokFlpI2vMlz31f868onKknHR1djLtXo/DenY=  ;
Message-ID: <20060221190400.67093.qmail@web50306.mail.yahoo.com>
Date: Tue, 21 Feb 2006 11:04:00 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: fitler vs query
To: java-user@lucene.apache.org
In-Reply-To: <F9E303076B72074AB76B2C8F78952B291988FF@bettylou.configureone.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hoss, come on, where are you - Filters! ;)

John, filters are handy for situations where you want to run your query multiple times against the same sub-set of your indexed documents.  For instance, if you have Documents that span several years, and want to be able to search individual years, you create a filter for each year, cache it, and run the new query against the appropriate year's filter.

Look at the very first line of the very first snippet here (section 5.5.5):
  http://www.lucenebook.com/search?query=filter+cache

Otis


----- Original Message ----
From: John Powers <jpowers@configureone.com>
To: java-user@lucene.apache.org
Sent: Tue 21 Feb 2006 10:31:49 AM EST
Subject: fitler vs query

Hello,

Before I learned about filters in lucene I was building my initial query
as a stringbuffer and then I use that with a queryparser.    Is there
any difference/advantage to separating out the "filter" part of my query
into a proper filter in lucene or does it just add requirements the same
to the query as I am doing (+field:blah AND field:blah)?

--jN


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 19:06:49 2006
Return-Path: <java-user-return-19074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15041 invoked from network); 21 Feb 2006 19:06:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 19:06:48 -0000
Received: (qmail 13827 invoked by uid 500); 21 Feb 2006 19:06:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13802 invoked by uid 500); 21 Feb 2006 19:06:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13791 invoked by uid 99); 21 Feb 2006 19:06:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:06:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.196 as permitted sender)
Received: from [64.233.162.196] (HELO zproxy.gmail.com) (64.233.162.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:06:40 -0800
Received: by zproxy.gmail.com with SMTP id 16so1315250nzp
        for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 11:06:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cs4bsznd9tU2PY5mqIVItSfoN58LG4GrOE+ZUKTMVg9A7lI1Tx/EivSrjZ05DEbCQKfR4EqsudlpxiPNf7Zn48k5m1wSKb98neowN/dsGk/uHXd0NtnHHMeAuvp0HaFH5AwD+4EOJABLCwtXJTUGxRDZGBmrmewf2wN1adT6h5M=
Received: by 10.36.252.33 with SMTP id z33mr7495112nzh;
        Tue, 21 Feb 2006 11:06:19 -0800 (PST)
Received: from ?172.22.19.82? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id r15sm4696619nza.2006.02.21.11.06.15;
        Tue, 21 Feb 2006 11:06:15 -0800 (PST)
Message-ID: <43FB64A6.8060703@gmail.com>
Date: Tue, 21 Feb 2006 13:06:14 -0600
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: get results by relevance, limiting results and then sort the
 results by some criterion
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>  <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>  <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>  <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com> <43F9FF66.4050204@syr.edu> <43FA0433.7040908@allegromedical.com> <43FA0903.6040506@allegromedical.com> <B31F5352-1D03-4620-86AB-EE963EB53D6B@ehatchersolutions.com> <Pine.LNX.4.63.0602210946130.25461@jimwormold> <43FB40D2.3080103@allegromedical.com>
In-Reply-To: <43FB40D2.3080103@allegromedical.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mufaddal Khumri wrote:
> When I do a search for example on "batteries" i get 1200+ results. I 
> would like to show the user lets say 300. I can do that by only 
> extracting the first 300 hits (sorted by decreasing relevance by 
> default) and displaying those to the user.
> 
> 

If you are only talking about ordering the number of items that you are 
going to show to the user, that seems to imply that the number will be 
small.  Why don't you just re-sort the items that you are going to 
display to the user somewhere in your code after you get the documents 
back from lucene?  It may not be quite as clean, but I doubt that there 
will be any performance impact.

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 19:26:41 2006
Return-Path: <java-user-return-19075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25655 invoked from network); 21 Feb 2006 19:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 19:26:41 -0000
Received: (qmail 52924 invoked by uid 500); 21 Feb 2006 19:26:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52902 invoked by uid 500); 21 Feb 2006 19:26:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52891 invoked by uid 99); 21 Feb 2006 19:26:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:26:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:26:34 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: fitler vs query
Date: Tue, 21 Feb 2006 13:25:58 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B2919893F@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: fitler vs query
Thread-Index: AcY3GXgsELC/lcyPRM+ILXj4bRYMnwAAw+5g
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>,
	"Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So by me building a new query instead of a filter, I'm missing this
caching part?    Seems pretty fast to me right now.   But sounds like I
should use the filter anyway.  =20

Thanks.

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Tuesday, February 21, 2006 1:04 PM
To: java-user@lucene.apache.org
Subject: Re: fitler vs query

Hoss, come on, where are you - Filters! ;)

John, filters are handy for situations where you want to run your query
multiple times against the same sub-set of your indexed documents.  For
instance, if you have Documents that span several years, and want to be
able to search individual years, you create a filter for each year,
cache it, and run the new query against the appropriate year's filter.

Look at the very first line of the very first snippet here (section
5.5.5):
  http://www.lucenebook.com/search?query=3Dfilter+cache

Otis


----- Original Message ----
From: John Powers <jpowers@configureone.com>
To: java-user@lucene.apache.org
Sent: Tue 21 Feb 2006 10:31:49 AM EST
Subject: fitler vs query

Hello,

Before I learned about filters in lucene I was building my initial query
as a stringbuffer and then I use that with a queryparser.    Is there
any difference/advantage to separating out the "filter" part of my query
into a proper filter in lucene or does it just add requirements the same
to the query as I am doing (+field:blah AND field:blah)?

--jN


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 19:36:46 2006
Return-Path: <java-user-return-19076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31134 invoked from network); 21 Feb 2006 19:36:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 19:36:46 -0000
Received: (qmail 70634 invoked by uid 500); 21 Feb 2006 19:36:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70612 invoked by uid 500); 21 Feb 2006 19:36:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70601 invoked by uid 99); 21 Feb 2006 19:36:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:36:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:36:38 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: get results by relevance, limiting results and then sort the results by some criterion
Date: Tue, 21 Feb 2006 13:36:04 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B29198947@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: get results by relevance, limiting results and then sort the results by some criterion
Thread-Index: AcY3EVs7vg8UBthqSiCqa/E7Klcs3QADHpuA
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Also, if you don't like the tag solution, you could borrow something
right from LIA...   boost the documents that are "significant" products
with 1.5 (or whatever higher then 1), and the support/ancillary products
boot with .1

If there is nothing relavent in the "significant" products, at least
you'll get some of these.   After all they may search for "bolt" ....
maybe they want an ancillary product.   =20

-----Original Message-----
From: Mufaddal Khumri [mailto:mkhumri@allegromedical.com]=20
Sent: Tuesday, February 21, 2006 12:06 PM
To: java-user@lucene.apache.org
Subject: Re: get results by relevance, limiting results and then sort
the results by some criterion

So yes, if the xth + 1 item happens to be a camera and if its price=20
happens to be lower than the previous x cameras it wont be included in=20
this view and that is exactly what we want.

Mufaddal Khumri wrote:

> In my case when we search for lets say cameras , my top x results are
> all sorts of cameras and then i get documents that match camera=20
> casings etc.
>
> As a company we want to show as many cameras as possible and not other

> camera
> related products for this one web view on a specific page we have. On=20
> this same page
> we also want to provide a way that the user can select "price high to=20
> low" or price low to high" and sort these top x results. Essentially=20
> the hard part is to come up with the X so that you ideally dont prune=20
> any cameras.
> As a business we want to strive to get as many cameras in the search=20
> results, but at the same time we dont mind if a few cameras do not=20
> appear in those results if we can really fine tune our search results=20
> to only show cameras and not camera casings and camera batteries etc.
>
> I have been looking at QueryFilter and the Sort API, but havent yet=20
> figured out a way to do what I am trying to do .. any pointers are=20
> greatly appreciated.
>
> -Thanks,
>
> John Powers wrote:
>
>> I'm sure you've taken care of this, but I am curious myself:
>>
>> If the 301 document only has a single term "batteries" (and thus is
so
>> far low on the Hits), but has a price of seven cents, then the sort
of
>> all the documents with "batteries" would put this near the top, but
by
>> eliminating all documents above 300, this one doesn't appear in the
>> solution you are working for, correct?    Why is that a good thing?
>> It seems you would want to sort on the full document list, and then
>> return on the 300 top that you want the user to see.    =20
>> I think I'm just curious why getting rid of some that could (in a new
>> sort) be of higher relevance is a good thing.
>>
>> -----Original Message-----
>> From: Mufaddal Khumri [mailto:mkhumri@allegromedical.com] Sent:=20
>> Tuesday, February 21, 2006 10:33 AM
>> To: java-user@lucene.apache.org
>> Subject: get results by relevance, limiting results and then sort the
>> results by some criterion
>>
>> When I do a search for example on "batteries" i get 1200+ results. I=20
>> would like to show the user lets say 300. I can do that by only=20
>> extracting the first 300 hits (sorted by decreasing relevance by=20
>> default) and displaying those to the user.
>>
>> Now on the search results page, I have a drop down box that lets the=20
>> user sort the results by price. When the user selects the "Sort by
price
>>
>> low to high", i would like to be able to sort the same 300 hits I got

>> above (sorted by decreasing relevance by default) by price.
>>
>> Essentially I want to be able to sort the first 300 relevant search=20
>> results by price. (in other words I would like to be able to get=20
>> search results by relevance, limit the results and sort the results=20
>> by some criterion).
>>
>> What would be a good way to do this in lucene?
>>
>> -Thanks.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> =20
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 19:49:37 2006
Return-Path: <java-user-return-19077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38571 invoked from network); 21 Feb 2006 19:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 19:49:36 -0000
Received: (qmail 96867 invoked by uid 500); 21 Feb 2006 19:49:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96561 invoked by uid 500); 21 Feb 2006 19:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96550 invoked by uid 99); 21 Feb 2006 19:49:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:49:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 11:49:29 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B416B5B76E; Tue, 21 Feb 2006 11:49:01 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AF5057F403;
	Tue, 21 Feb 2006 11:49:01 -0800 (PST)
Date: Tue, 21 Feb 2006 11:49:01 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org,
	Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: fitler vs query
In-Reply-To: <20060221190400.67093.qmail@web50306.mail.yahoo.com>
Message-ID: <Pine.LNX.4.58.0602211139250.1235@hal.rescomp.berkeley.edu>
References: <20060221190400.67093.qmail@web50306.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Hoss, come on, where are you - Filters! ;)

Otis my man, cut me some slack! .. I'm in the Pacific/USA Timezone, I
don't get to work untill 10AM at the earliest, and I'm a little wacked out
from having a really delayed flight last night.

: John, filters are handy for situations where you want to run your query
: multiple times against the same sub-set of your indexed documents.  For
: instance, if you have Documents that span several years, and want to be
: able to search individual years, you create a filter for each year,
: cache it, and run the new query against the appropriate year's filter.

You goad me for not replying fast enough and then you won't even help me
out and throw in my stock line for me? ....

The ability to cache Filters is one of their biggest assets, but even if
performacne isn't a factor at all, the other key reason to use a Filter is
when you just want to limit the results by a set critera, without
affecting the scores.

To extend Otis's example, if you want to limit your results to 1995-1997
something like RangeQuery is acctually going to affect the scores of every
doc in the year 1995 based on how many docs have that date -- when dealing
with dcate/numeric ranges, that typically isn't what you want.  Likewise
when dealing with "filtering by cateory" or "filter by compnay" ... just
because company A has published more books then company b that doesn't
mean when you filter by "company A or B" you wan the books published by
company B to get better scores becuase of how less common that term is --
that's exactly what happens when you do something like...

            "my query +(company:A company:B) +pubyear:[1995 TO 1997]"

: Before I learned about filters in lucene I was building my initial query
: as a stringbuffer and then I use that with a queryparser.    Is there

as a side comment, the only reason to use QueryParser is if you are
parsing a sytirng that coems from outside of your application (ie: user
input, or a config file) ... if you are building up a StringBuffer and
then parsing it again, you are not only wasting cycles, you are creating a
headache foryourself down the road ... progromatically generating
Query Objects yourself is a noble and worthwhile endevor.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 20:17:24 2006
Return-Path: <java-user-return-19078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51592 invoked from network); 21 Feb 2006 20:17:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 20:17:22 -0000
Received: (qmail 54239 invoked by uid 500); 21 Feb 2006 20:17:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54220 invoked by uid 500); 21 Feb 2006 20:17:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54200 invoked by uid 99); 21 Feb 2006 20:17:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 12:17:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.89.10.11] (HELO denhaag.ewi.utwente.nl) (130.89.10.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 12:17:15 -0800
Received: from ewiex01.ewi.utwente.nl (ewiex02.ewi.utwente.nl [130.89.10.121])
	by denhaag.ewi.utwente.nl (8.13.1/8.13.1) with ESMTP id k1LKGoVJ011606
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 21:16:51 +0100 (MET)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: webserverless search with lucene on offline HTML doc
Date: Tue, 21 Feb 2006 21:12:36 +0100
Message-ID: <5DD2165A95E801438DAA9C1E0957EB5E7586AA@ewiex02.dynamic.ewi.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: webserverless search with lucene on offline HTML doc
Thread-Index: AcY2HBaC9kEOFfVDRvyK+cuDlPBiFwBBxHpG
References: <5DD2165A95E801438DAA9C1E0957EB5ED3F342@ewiex02.dynamic.ewi.utwente.nl> <a02a04880602200342x1228124ducba5378b1f110be9@mail.gmail.com> <556D1D57-79B7-4380-98EC-E644A1BDD204@jupiter-jazz.com>
From: "Trieschnigg, R.B. \(Dolf\)" <r.b.trieschnigg@ewi.utwente.nl>
To: <java-user@lucene.apache.org>
X-Spam-Score: -5.771 () ALL_TRUSTED,AWL,BAYES_00
X-Scanned-By: MIMEDefang 2.52 on 130.89.10.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0b5 (denhaag.ewi.utwente.nl [130.89.10.11]); Tue, 21 Feb 2006 21:16:51 +0100 (MET)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Wouldn't this be a good case for the JarDirectory implementation
> somebody asked for?
> The index could then be statically written in a jar file downloaded
> with the applet (the original mail refers to static offline HTML
> files).

I wrote a quick and dirty implementation of a JarDirectory - it works, =
but a new problem is encountered soon after: The indexWriter requires =
information from the System properties; an applet is allowed to read =
only a limited set of Properties.

Especially with an offline applet I would stick to the solution of =
signing the applet.

Dolf.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 20:26:48 2006
Return-Path: <java-user-return-19079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58335 invoked from network); 21 Feb 2006 20:26:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 20:26:48 -0000
Received: (qmail 71699 invoked by uid 500); 21 Feb 2006 20:26:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71678 invoked by uid 500); 21 Feb 2006 20:26:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71667 invoked by uid 99); 21 Feb 2006 20:26:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 12:26:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 12:26:41 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Tue, 21 Feb 2006 13:26:19 -0700
Message-ID: <43FB7768.8010405@allegromedical.com>
Date: Tue, 21 Feb 2006 13:26:16 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: get results by relevance, limiting results and then sort the
 results by some criterion
References: <F9E303076B72074AB76B2C8F78952B29198947@bettylou.configureone.net>
In-Reply-To: <F9E303076B72074AB76B2C8F78952B29198947@bettylou.configureone.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Currently I am doing exactly that. I am boosting relevant docs and I am 
sorting in java to get the desired effect. I just was trying to see if I 
can do something using QueryFilter or Sorts and do what I am doing.

-Thanks.

John Powers wrote:

>Also, if you don't like the tag solution, you could borrow something
>right from LIA...   boost the documents that are "significant" products
>with 1.5 (or whatever higher then 1), and the support/ancillary products
>boot with .1
>
>If there is nothing relavent in the "significant" products, at least
>you'll get some of these.   After all they may search for "bolt" ....
>maybe they want an ancillary product.    
>
>-----Original Message-----
>From: Mufaddal Khumri [mailto:mkhumri@allegromedical.com] 
>Sent: Tuesday, February 21, 2006 12:06 PM
>To: java-user@lucene.apache.org
>Subject: Re: get results by relevance, limiting results and then sort
>the results by some criterion
>
>So yes, if the xth + 1 item happens to be a camera and if its price 
>happens to be lower than the previous x cameras it wont be included in 
>this view and that is exactly what we want.
>
>Mufaddal Khumri wrote:
>
>  
>
>>In my case when we search for lets say cameras , my top x results are
>>all sorts of cameras and then i get documents that match camera 
>>casings etc.
>>
>>As a company we want to show as many cameras as possible and not other
>>    
>>
>
>  
>
>>camera
>>related products for this one web view on a specific page we have. On 
>>this same page
>>we also want to provide a way that the user can select "price high to 
>>low" or price low to high" and sort these top x results. Essentially 
>>the hard part is to come up with the X so that you ideally dont prune 
>>any cameras.
>>As a business we want to strive to get as many cameras in the search 
>>results, but at the same time we dont mind if a few cameras do not 
>>appear in those results if we can really fine tune our search results 
>>to only show cameras and not camera casings and camera batteries etc.
>>
>>I have been looking at QueryFilter and the Sort API, but havent yet 
>>figured out a way to do what I am trying to do .. any pointers are 
>>greatly appreciated.
>>
>>-Thanks,
>>
>>John Powers wrote:
>>
>>    
>>
>>>I'm sure you've taken care of this, but I am curious myself:
>>>
>>>If the 301 document only has a single term "batteries" (and thus is
>>>      
>>>
>so
>  
>
>>>far low on the Hits), but has a price of seven cents, then the sort
>>>      
>>>
>of
>  
>
>>>all the documents with "batteries" would put this near the top, but
>>>      
>>>
>by
>  
>
>>>eliminating all documents above 300, this one doesn't appear in the
>>>solution you are working for, correct?    Why is that a good thing?
>>>It seems you would want to sort on the full document list, and then
>>>return on the 300 top that you want the user to see.     
>>>I think I'm just curious why getting rid of some that could (in a new
>>>sort) be of higher relevance is a good thing.
>>>
>>>-----Original Message-----
>>>From: Mufaddal Khumri [mailto:mkhumri@allegromedical.com] Sent: 
>>>Tuesday, February 21, 2006 10:33 AM
>>>To: java-user@lucene.apache.org
>>>Subject: get results by relevance, limiting results and then sort the
>>>results by some criterion
>>>
>>>When I do a search for example on "batteries" i get 1200+ results. I 
>>>would like to show the user lets say 300. I can do that by only 
>>>extracting the first 300 hits (sorted by decreasing relevance by 
>>>default) and displaying those to the user.
>>>
>>>Now on the search results page, I have a drop down box that lets the 
>>>user sort the results by price. When the user selects the "Sort by
>>>      
>>>
>price
>  
>
>>>low to high", i would like to be able to sort the same 300 hits I got
>>>      
>>>
>
>  
>
>>>above (sorted by decreasing relevance by default) by price.
>>>
>>>Essentially I want to be able to sort the first 300 relevant search 
>>>results by price. (in other words I would like to be able to get 
>>>search results by relevance, limit the results and sort the results 
>>>by some criterion).
>>>
>>>What would be a good way to do this in lucene?
>>>
>>>-Thanks.
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> 
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 20:28:23 2006
Return-Path: <java-user-return-19080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65840 invoked from network); 21 Feb 2006 20:28:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 20:28:23 -0000
Received: (qmail 76643 invoked by uid 500); 21 Feb 2006 20:28:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76620 invoked by uid 500); 21 Feb 2006 20:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76608 invoked by uid 99); 21 Feb 2006 20:28:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 12:28:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 12:28:16 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Tue, 21 Feb 2006 13:27:55 -0700
Message-ID: <43FB77C9.3070007@allegromedical.com>
Date: Tue, 21 Feb 2006 13:27:53 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: get results by relevance, limiting results and then sort the
 results by some criterion
References: <af75a3a20602170217o4cf147faye2b5d422699d6376@mail.gmail.com>  <43F5EE18.6050900@curtin.com> <43F6249B.8070505@allegromedical.com>  <Pine.LNX.4.58.0602171138550.27205@hal.rescomp.berkeley.edu>  <43F62D2B.2060308@allegromedical.com> <43F9E8BD.9010002@allegromedical.com> <1140452460.8229.43.camel@murmansk> <43F9F9B3.4050806@allegromedical.com> <43F9FF66.4050204@syr.edu> <43FA0433.7040908@allegromedical.com> <43FA0903.6040506@allegromedical.com> <B31F5352-1D03-4620-86AB-EE963EB53D6B@ehatchersolutions.com> <Pine.LNX.4.63.0602210946130.25461@jimwormold> <43FB40D2.3080103@allegromedical.com> <43FB64A6.8060703@gmail.com>
In-Reply-To: <43FB64A6.8060703@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thats exactly what I am doing currently. Was just wondering if there is 
a lucene way to do what I am doing using QueryFilter etc.

-Thanks.

Dan Armbrust wrote:

> Mufaddal Khumri wrote:
>
>> When I do a search for example on "batteries" i get 1200+ results. I 
>> would like to show the user lets say 300. I can do that by only 
>> extracting the first 300 hits (sorted by decreasing relevance by 
>> default) and displaying those to the user.
>>
>>
>
> If you are only talking about ordering the number of items that you 
> are going to show to the user, that seems to imply that the number 
> will be small.  Why don't you just re-sort the items that you are 
> going to display to the user somewhere in your code after you get the 
> documents back from lucene?  It may not be quite as clean, but I doubt 
> that there will be any performance impact.
>
> Dan
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 22:20:52 2006
Return-Path: <java-user-return-19081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29968 invoked from network); 21 Feb 2006 22:20:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:20:52 -0000
Received: (qmail 69763 invoked by uid 500); 21 Feb 2006 22:20:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69741 invoked by uid 500); 21 Feb 2006 22:20:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69730 invoked by uid 99); 21 Feb 2006 22:20:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:20:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:20:44 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 37ECEB735C
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 09:20:19 +1100 (EST)
Message-ID: <43FB9210.4050809@nuix.com.au>
Date: Wed, 22 Feb 2006 09:20:00 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boolean Precedence
References: <43FB1869.4050805@isb-sib.ch>
In-Reply-To: <43FB1869.4050805@isb-sib.ch>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric Jain wrote:
> Searched the mailing list, found something about a 
> "PrecedenceQueryParser", but this seems to have disappeared?

It's moved:

http://tinyurl.com/hzsna

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 22:39:45 2006
Return-Path: <java-user-return-19082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41075 invoked from network); 21 Feb 2006 22:39:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 22:39:45 -0000
Received: (qmail 94977 invoked by uid 500); 21 Feb 2006 22:39:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94943 invoked by uid 500); 21 Feb 2006 22:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94899 invoked by uid 99); 21 Feb 2006 22:39:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:39:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 14:39:39 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1LMdA67004705
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 23:39:10 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [267.15.12/265]); Tue, 21 Feb 2006 23:39:10 +0100
Message-ID: <43FB968E.1060703@isb-sib.ch>
Date: Tue, 21 Feb 2006 23:39:10 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boolean Precedence
References: <43FB1869.4050805@isb-sib.ch> <43FB9210.4050809@nuix.com.au>
In-Reply-To: <43FB9210.4050809@nuix.com.au>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Noll wrote:
> http://tinyurl.com/hzsna

Thanks!

There is some mention of "open issues" with this parser.

Anyone know what these are, and if anyone is still working on this?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 21 23:45:40 2006
Return-Path: <java-user-return-19083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78443 invoked from network); 21 Feb 2006 23:45:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Feb 2006 23:45:40 -0000
Received: (qmail 96749 invoked by uid 500); 21 Feb 2006 23:45:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96725 invoked by uid 500); 21 Feb 2006 23:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96714 invoked by uid 99); 21 Feb 2006 23:45:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 15:45:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO zproxy.gmail.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 15:45:32 -0800
Received: by zproxy.gmail.com with SMTP id 14so1368871nzn
        for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 15:45:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=enlNIGWF2Ipx6KTfCVDszh/9EaNoCUMeD7ghdLUL5BKl5+l+ni4UIzeAsyr+U5fgugruIZvLR1dk+XfnXtV7LrUm1IRS4FAMbB6ZwIU0ES1zchaQ5eicR8hk5lZ38XMuGK7ArdrT4No4pb9y7+dlXEvRRmtR8ON0stbqtBwvZFs=
Received: by 10.65.124.9 with SMTP id b9mr1890398qbn;
        Tue, 21 Feb 2006 15:45:12 -0800 (PST)
Received: by 10.65.244.16 with HTTP; Tue, 21 Feb 2006 15:45:12 -0800 (PST)
Message-ID: <abe188f20602211545u3bcbe356p83ded3b119a4b564@mail.gmail.com>
Date: Tue, 21 Feb 2006 17:45:12 -0600
From: "Rajesh Munavalli" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Phrase query vs span query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16207_13274573.1140565512244"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_16207_13274573.1140565512244
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I am trying to adopt lucene for a special IR system. The following scenario
is an approximation of what I am trying to do. Please bear with me if some
things doesnt make sense. I need some suggestions on formulating queries fo=
r
the following scenario

Each document consists of a set of fields (standard in lucene). But in my
case, the field is somewhat different as explained below.

Field:
---------
Each field consists of a set of conceptual sections. Each of these sections
is separated by say N (say 1000) index positions but are in the same field.
Sizes of sections vary and do not have any lower or upper bound on the
number of terms they may contain
.
Ex: Lets say Field "contents" has
<section1 of 100 terms><gap of 1000 term positions><section 2 of 1500
terms><gap of 1000 term positions><gap of 1000 term positions><section 3 of
10 terms>

NOTE: At index time, I am assuming I somehow know how to form these
sections.

Typical Query:
---------------------
Consists of 15 to 30 query terms. In other words, these query terms
represent a conceptual section.

Aim of the Query formation:
----------------------------------------
I want to rank the documents proportional to the number query terms
appearing in the SAME SECTION and IN ORDER. Documents containing terms with
the

My Questions:
---------------------
Considering the structure of the fields/documents and the number of query
terms.

(1) Is there an effective way of formulating a query with the existing quer=
y
types in Lucene?

(2) After considering the way different queries work and their limitations,
I think forming phrase/span queries of groups of query terms
might approximate the rankings I am expecting. In that case which of the
following queries will perform better (in terms of QUERY SPEED and RANKING)
              (a) phrase query with certain slope factor
              (b) span query

Thanks,

Rajesh Munavalli

------=_Part_16207_13274573.1140565512244--

From java-user-return-19084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 00:31:44 2006
Return-Path: <java-user-return-19084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97225 invoked from network); 22 Feb 2006 00:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 00:31:44 -0000
Received: (qmail 54656 invoked by uid 500); 22 Feb 2006 00:31:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54627 invoked by uid 500); 22 Feb 2006 00:31:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54616 invoked by uid 99); 22 Feb 2006 00:31:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 16:31:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 16:31:38 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 20C235B776; Tue, 21 Feb 2006 16:31:14 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 16B747F403
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 16:31:14 -0800 (PST)
Date: Tue, 21 Feb 2006 16:31:14 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Phrase query vs span query
In-Reply-To: <abe188f20602211545u3bcbe356p83ded3b119a4b564@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602211624490.12421@hal.rescomp.berkeley.edu>
References: <abe188f20602211545u3bcbe356p83ded3b119a4b564@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


your "Aim of the Query formation" got truncated, so it's not entirely
clear what you are looking for, but if the general idea of what you are
looking for is that you want searches for phrase like "quick brown fox" to
only match if/when the words "quick" "brown" and "fox" all appear in the
same section in the specified order, and you want documents in which the
phrases appear more then once to bescored higher then a simple PhraseQuery
with a high slop factor and "inOrder=true" should work fine ... the key
being that your slop value needs to be at least as big as the largest
section size you can have, and less then the gap you put between sections.

I have no idea if it will be faster/slower then a span query, but it's a
little simpler because you don't need to use artificial section boundry
tokens.

If you want to tweak how much the score is influenced by the proximity of
the words in the query, vs the frequency of hte phrases in the docs, see
my recent posting about the use of tf in Similarity -- which i think is
accurate since nobody replied and said i was wrong...

http://www.nabble.com/Similarity-Usage%3A-tf%28int%29-vs-tf%28float%29-p2981283.html


: Date: Tue, 21 Feb 2006 17:45:12 -0600
: From: Rajesh Munavalli <findmath@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Phrase query vs span query
:
: I am trying to adopt lucene for a special IR system. The following scenario
: is an approximation of what I am trying to do. Please bear with me if some
: things doesnt make sense. I need some suggestions on formulating queries for
: the following scenario
:
: Each document consists of a set of fields (standard in lucene). But in my
: case, the field is somewhat different as explained below.
:
: Field:
: ---------
: Each field consists of a set of conceptual sections. Each of these sections
: is separated by say N (say 1000) index positions but are in the same field.
: Sizes of sections vary and do not have any lower or upper bound on the
: number of terms they may contain
: .
: Ex: Lets say Field "contents" has
: <section1 of 100 terms><gap of 1000 term positions><section 2 of 1500
: terms><gap of 1000 term positions><gap of 1000 term positions><section 3 of
: 10 terms>
:
: NOTE: At index time, I am assuming I somehow know how to form these
: sections.
:
: Typical Query:
: ---------------------
: Consists of 15 to 30 query terms. In other words, these query terms
: represent a conceptual section.
:
: Aim of the Query formation:
: ----------------------------------------
: I want to rank the documents proportional to the number query terms
: appearing in the SAME SECTION and IN ORDER. Documents containing terms with
: the
:
: My Questions:
: ---------------------
: Considering the structure of the fields/documents and the number of query
: terms.
:
: (1) Is there an effective way of formulating a query with the existing query
: types in Lucene?
:
: (2) After considering the way different queries work and their limitations,
: I think forming phrase/span queries of groups of query terms
: might approximate the rankings I am expecting. In that case which of the
: following queries will perform better (in terms of QUERY SPEED and RANKING)
:               (a) phrase query with certain slope factor
:               (b) span query
:
: Thanks,
:
: Rajesh Munavalli
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 01:25:30 2006
Return-Path: <java-user-return-19085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19995 invoked from network); 22 Feb 2006 01:25:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 01:25:30 -0000
Received: (qmail 5283 invoked by uid 500); 22 Feb 2006 01:25:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5258 invoked by uid 500); 22 Feb 2006 01:25:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5247 invoked by uid 99); 22 Feb 2006 01:25:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 17:25:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 17:25:22 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 41C5D5B773; Tue, 21 Feb 2006 17:24:58 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3ADE27F403
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 17:24:58 -0800 (PST)
Date: Tue, 21 Feb 2006 17:24:58 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Open an IndexWriter in parallel with an IndexReader on the same
 index.
In-Reply-To: <OFBC0D871B.E7CC2A41-ONC225711C.0054C492-C225711C.0055B04E@il.ibm.com>
Message-ID: <Pine.LNX.4.58.0602211722050.18041@hal.rescomp.berkeley.edu>
References: <OFBC0D871B.E7CC2A41-ONC225711C.0054C492-C225711C.0055B04E@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: It would have been nice if someone wrote something like indexModifier,
: but with a cache, similar to what Yonik suggested above: deletions will
: not be done immediately, but rather cached and later done in batches.
: Of course, batched deletions should not remember the term to delete,
: but rather the matching document numbers at the time of the deletion -
: because after the addition of the modified document if we search for
: the term again we'll find two documents.

That's not a safe sequence of events.  An Add can trigger a segment merge,
which cna renumber documents.

As yonik said, you want to queue up the adds/updates, then do a delete for
each update in your queue, then do your adds in one batch.  knowing
when/what to delete requies knowing a "key" for your records -- which
isnt' a native lucne concept, but it is certainly a general enough one
that a helper class could be written for this.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 02:34:04 2006
Return-Path: <java-user-return-19086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50819 invoked from network); 22 Feb 2006 02:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 02:34:03 -0000
Received: (qmail 41305 invoked by uid 500); 22 Feb 2006 02:33:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41277 invoked by uid 500); 22 Feb 2006 02:33:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41266 invoked by uid 99); 22 Feb 2006 02:33:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 18:33:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 18:33:57 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4062E33CFDC; Tue, 21 Feb 2006 21:33:37 -0500 (EST)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 8D0BA33CFDC
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 21:33:34 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43FB968E.1060703@isb-sib.ch>
References: <43FB1869.4050805@isb-sib.ch> <43FB9210.4050809@nuix.com.au> <43FB968E.1060703@isb-sib.ch>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6DD792A3-7CEA-4CF3-8AD4-C3CDF87B6E0E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Boolean Precedence
Date: Tue, 21 Feb 2006 21:33:30 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 21, 2006, at 5:39 PM, Eric Jain wrote:

> Daniel Noll wrote:
>> http://tinyurl.com/hzsna
>
> Thanks!
>
> There is some mention of "open issues" with this parser.
>
> Anyone know what these are, and if anyone is still working on this?

I worked on it to a point, but I don't recall what open issues there  
were when I left it though they were fiddly.  The test case may point  
you in the right direction:

	<http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/ 
miscellaneous/src/test/org/apache/lucene/queryParser/precedence/ 
TestPrecedenceQueryParser.java?view=markup>

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 03:04:36 2006
Return-Path: <java-user-return-19087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63357 invoked from network); 22 Feb 2006 03:04:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 03:04:35 -0000
Received: (qmail 73388 invoked by uid 500); 22 Feb 2006 03:04:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73360 invoked by uid 500); 22 Feb 2006 03:04:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73343 invoked by uid 99); 22 Feb 2006 03:04:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 19:04:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.184.193 as permitted sender)
Received: from [64.233.184.193] (HELO wproxy.gmail.com) (64.233.184.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 19:04:28 -0800
Received: by wproxy.gmail.com with SMTP id i13so24387wra
        for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 19:04:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qwrDZlcEcdu7U8aiU9VsUlkqCD28DGsKVW82wZLDBvZL4m3rxszM5Al4U+W7DuFo/EVV2eusBj2uR3QeaaGiY9ycxAiBWJuX3bCJ+jQT2ApQJJfLPCEELed3+UE+ccpVlvpe/zE7Tsa1ZJlwlMc9GRNCmdNL+RxDKa3wZ37mygU=
Received: by 10.65.121.8 with SMTP id y8mr1972295qbm;
        Tue, 21 Feb 2006 19:04:07 -0800 (PST)
Received: by 10.65.244.16 with HTTP; Tue, 21 Feb 2006 19:04:07 -0800 (PST)
Message-ID: <abe188f20602211904n6a80bc7ax47619efef79a1591@mail.gmail.com>
Date: Tue, 21 Feb 2006 21:04:07 -0600
From: "Rajesh Munavalli" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Phrase query vs span query
In-Reply-To: <Pine.LNX.4.58.0602211624490.12421@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_405_5499982.1140577447043"
References: <abe188f20602211545u3bcbe356p83ded3b119a4b564@mail.gmail.com>
	 <Pine.LNX.4.58.0602211624490.12421@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_405_5499982.1140577447043
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On 2/21/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> your "Aim of the Query formation" got truncated, so it's not entirely
> clear what you are looking for, but if the general idea of what you are


Documents should be ordered as follows
Rank 1: Documents containing section containing all terms in the order of
the query terms
Rank 2: Documents containing section containing all terms but randomly
ordered
Rank 3: Documents containing atleast n (n  < N, where N is total number of
query terms) in the same section and in order

and so on...

But considering the number of query terms to be large, I am not really
looking for the exact ranking. Anything closer would  work just fine.
However, the number of query terms is what i am more concerned about when i=
t
comes to implementing using Phrase query versus Span query in terms of quer=
y
speed.

looking for is that you want searches for phrase like "quick brown fox" to
> only match if/when the words "quick" "brown" and "fox" all appear in the
> same section in the specified order, and you want documents in which the
> phrases appear more then once to bescored higher then a simple PhraseQuer=
y
> with a high slop factor and "inOrder=3Dtrue" should work fine ... the key
> being that your slop value needs to be at least as big as the largest
> section size you can have, and less then the gap you put between sections=
.
>
> I have no idea if it will be faster/slower then a span query, but it's a
> little simpler because you don't need to use artificial section boundry
> tokens.


Wouldnt the  phrase/span query match across sections if I do not introduced
the artifical section boundry?

If you want to tweak how much the score is influenced by the proximity of
> the words in the query, vs the frequency of hte phrases in the docs, see
> my recent posting about the use of tf in Similarity -- which i think is
> accurate since nobody replied and said i was wrong...
>
>
> http://www.nabble.com/Similarity-Usage%3A-tf%28int%29-vs-tf%28float%29-p2=
981283.html


I will take a closer look at the explaination.


Thanks,

Rajesh Munavalli

------=_Part_405_5499982.1140577447043--

From java-user-return-19088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 03:20:43 2006
Return-Path: <java-user-return-19088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67812 invoked from network); 22 Feb 2006 03:20:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 03:20:42 -0000
Received: (qmail 90074 invoked by uid 500); 22 Feb 2006 03:20:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90046 invoked by uid 500); 22 Feb 2006 03:20:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90035 invoked by uid 99); 22 Feb 2006 03:20:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 19:20:36 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fairwinds@eastlink.ca designates 24.222.0.30 as permitted sender)
Received: from [24.222.0.30] (HELO smtpout.eastlink.ca) (24.222.0.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 19:20:36 -0800
Received: from ip03.eastlink.ca ([24.222.10.15])
 by mta01.eastlink.ca (Sun Java System Messaging Server 6.2-4.03 (built Sep 22
 2005)) with ESMTP id <0IV2003ENJYDRP30@mta01.eastlink.ca> for
 java-user@lucene.apache.org; Tue, 21 Feb 2006 23:20:37 -0400 (AST)
Received: from blk-224-224-216.eastlink.ca (HELO [192.168.1.200])
 ([24.224.224.216]) by ip03.eastlink.ca with ESMTP; Tue,
 21 Feb 2006 23:20:15 -0400
Date: Tue, 21 Feb 2006 23:20:14 -0400
From: David Pratt <fairwinds@eastlink.ca>
Subject: Searching/sorting strategy for many properties for semantic web app
To: java-user@lucene.apache.org
Message-id: <43FBD86E.4010604@eastlink.ca>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAQAAA+k=
User-Agent: Mozilla Thunderbird 1.0.7 (Macintosh/20050923)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there. I am new to Lucene and I have been developing a semantic 
application for a while and it appears to me Lucene could help me to get 
a much needed search with reasonable speed. I have some general question 
to start:

1) Since my app is virtually all metadata, what should I store in the 
indexes if anything?
2) Should I only index the most common properties that people will 
search and combine the rest (and index this combined text as a field)?
3) I would like to sort and filter results but am concerned this could 
be very memory intensive
4) Some general guidance on organizing indexes in an app would be 
appreciated.

My schema is fairly large but I generally expect people to search on 
about 6 to 8 properties for the most part. I have the data stored in an 
sql database but not in a conventional way. I am willing to accept a 
slower advanced search on less common properties (accomodating this with 
sql search) but I really want some speed for the main properties with 
full text search.

Pretty much everything in the app is metadata so I am most interested in 
  focussing on the 6-8 properties that people will use to search on for 
the most part. I am thinking of combining the text of the remaining 
properties (quite a number) into a single description type field so that 
essentially all information gets indexed and ranked. Is this a 
reasonable approach?

I see that there are advanced possibilities with the indexes to sort and 
filter. How advisable is using sort for large record sets. For example, 
say you have got 20000 records returned from your search. Because this 
will have a web interface I will only be showing first 20 likely so I 
will be batching results. Is the sorting filtering highly memory intensive?

Hopefully, someone can provide some initial advice. Many thanks.

Regards,
David

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 04:36:05 2006
Return-Path: <java-user-return-19089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89126 invoked from network); 22 Feb 2006 04:36:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 04:36:05 -0000
Received: (qmail 58525 invoked by uid 500); 22 Feb 2006 04:35:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58494 invoked by uid 500); 22 Feb 2006 04:35:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58482 invoked by uid 99); 22 Feb 2006 04:35:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 20:35:58 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sogwhitester@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 20:35:58 -0800
Received: by pproxy.gmail.com with SMTP id n25so1642278pyg
        for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 20:35:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=XurWKRbBUL0LIQr8c5VXhS9s2wMW4HfJYodkNqx7lq3PPP98J0LuC+f386E1scufeT6slfKnpFxEQO9ntTMR6os7XAs87qE1ciG/P1xBg0Bjr+X1YwYixHOxCZCkN/RGoBfOUfB6ysnmmH4WiMc51wyh2jLlLHDIKcabAjbUOd0=
Received: by 10.35.70.17 with SMTP id x17mr734224pyk;
        Tue, 21 Feb 2006 20:35:37 -0800 (PST)
Received: from baihui ( [218.247.170.164])
        by mx.gmail.com with ESMTP id k62sm352532pyk.2006.02.21.20.35.36;
        Tue, 21 Feb 2006 20:35:37 -0800 (PST)
Message-ID: <006e01c63769$6c6f6010$1f00a8c0@baihui>
From: "sog" <sogwhitester@gmail.com>
To: <java-user@lucene.apache.org>
Subject: How can I get a term's frequency?
Date: Wed, 22 Feb 2006 12:35:32 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="gb2312";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.1830
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I search the index with a group of terms. I want to get every term's 
frequency in each document of the search result.

How can I?


thx,

sog 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 05:20:22 2006
Return-Path: <java-user-return-19090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11138 invoked from network); 22 Feb 2006 05:20:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 05:20:22 -0000
Received: (qmail 99000 invoked by uid 500); 22 Feb 2006 05:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98972 invoked by uid 500); 22 Feb 2006 05:20:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98961 invoked by uid 99); 22 Feb 2006 05:20:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 21:20:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 21:20:15 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B21B3B762E
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 16:19:51 +1100 (EST)
Message-ID: <43FBF464.6010201@nuix.com.au>
Date: Wed, 22 Feb 2006 16:19:32 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How can I get a term's frequency?
References: <006e01c63769$6c6f6010$1f00a8c0@baihui>
In-Reply-To: <006e01c63769$6c6f6010$1f00a8c0@baihui>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

sog wrote:
> 
> I search the index with a group of terms. I want to get every term's 
> frequency in each document of the search result.

Are you looking for this?

TermFreqVector vector = IndexReader.getTermFreqVector(docNum, "field");

That gives you the frequency of every term, but you can just look up the
ones you're interested in.

Daniel


-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 07:12:14 2006
Return-Path: <java-user-return-19091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60343 invoked from network); 22 Feb 2006 07:12:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 07:12:14 -0000
Received: (qmail 8245 invoked by uid 500); 22 Feb 2006 07:12:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8213 invoked by uid 500); 22 Feb 2006 07:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8202 invoked by uid 99); 22 Feb 2006 07:12:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 23:12:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Feb 2006 23:12:05 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 683755B773; Tue, 21 Feb 2006 23:11:40 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5C08F7F403
	for <java-user@lucene.apache.org>; Tue, 21 Feb 2006 23:11:40 -0800 (PST)
Date: Tue, 21 Feb 2006 23:11:40 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Phrase query vs span query
In-Reply-To: <abe188f20602211904n6a80bc7ax47619efef79a1591@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602212250540.30264@hal.rescomp.berkeley.edu>
References: <abe188f20602211545u3bcbe356p83ded3b119a4b564@mail.gmail.com> 
 <Pine.LNX.4.58.0602211624490.12421@hal.rescomp.berkeley.edu>
 <abe188f20602211904n6a80bc7ax47619efef79a1591@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Rank 3: Documents containing atleast n (n  < N, where N is total number of
: query terms) in the same section and in order

that's a non-trivial goal in itself -- even without the "in the same
section" restriction, i can't think of a way to do that off the top of my
head other then a Span query for every Combination ... I think you may
need a custom query for that.

: However, the number of query terms is what i am more concerned about when it
: comes to implementing using Phrase query versus Span query in terms of query
: speed.

I don't know if anyone has done any benchmarks of Phrase vs Span that fit
your description.  it shoudl be fairly easy to crank some out.

: > I have no idea if it will be faster/slower then a span query, but it's a
: > little simpler because you don't need to use artificial section boundry
: > tokens.

: Wouldnt the  phrase/span query match across sections if I do not introduced
: the artifical section boundry?

if the position increment gap between sections is larger then the slop
factor you query with, then you don't need an artificial boundary token.

The subject of creating artificial tokens to indicate
chapter/section/paragraph/sentence boundaries and then using
SpanNotQueries to make sure searches don't cross one of those boundaries
-- but it doesn't sound like that's something you are worried about.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 08:31:44 2006
Return-Path: <java-user-return-19092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97330 invoked from network); 22 Feb 2006 08:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 08:31:44 -0000
Received: (qmail 96479 invoked by uid 500); 22 Feb 2006 08:31:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96456 invoked by uid 500); 22 Feb 2006 08:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96444 invoked by uid 99); 22 Feb 2006 08:31:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 00:31:36 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 00:31:36 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.12.10/8.12.10) with ESMTP id k1M8VEVV222790
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 08:31:14 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.12.10/NCO/VERS6.8) with ESMTP id k1M8VOHl243958
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 09:31:24 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11/8.13.3) with ESMTP id k1M8VDOQ015092
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 09:31:13 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11/8.12.11) with ESMTP id k1M8VD8f015087
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 09:31:13 +0100
In-Reply-To: <Pine.LNX.4.58.0602211722050.18041@hal.rescomp.berkeley.edu>
Subject: Re: Open an IndexWriter in parallel with an IndexReader on the same index.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 August 18, 2005
Message-ID: <OF4A0D346D.2F7D0F2D-ONC225711D.002D401F-C225711D.002E1129@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Wed, 22 Feb 2006 10:23:10 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0HF90 | November 16, 2005) at
 22/02/2006 10:31:23
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter <hossman_lucene@fucit.org> wrote on 22/02/2006 03:24:58 AM:
>
> : It would have been nice if someone wrote something like indexModifier,
> : but with a cache, similar to what Yonik suggested above: deletions will
> : not be done immediately, but rather cached and later done in batches.
> : Of course, batched deletions should not remember the term to delete,
> : but rather the matching document numbers at the time of the deletion -
> : because after the addition of the modified document if we search for
> : the term again we'll find two documents.
>
> That's not a safe sequence of events.  An Add can trigger a segment
merge,
> which cna renumber documents.

I see. Then maybe there's a way to catch this merge and do the deletions
just before it, because...

> As yonik said, you want to queue up the adds/updates, then do a delete
for
> each update in your queue, then do your adds in one batch.  knowing

The problem in this solution is that unlike queuing deletes, queuing
additions requires you to queue the actual document contents. Doing
this in memory might add a large memory pentalty which is undesired
for applications that try to maintain a small memory footprint.

> when/what to delete requies knowing a "key" for your records -- which
> isnt' a native lucne concept, but it is certainly a general enough one
> that a helper class could be written for this.

I realise that the name of this delete key isn't defined by Lucene,
but I believe that the concept of such a key was "officially"
sanctioned by Lucene with the deleteDocuments(Term) method (whose
documentation even mentions the "unique ID string" scenario).
So indeed a helper class of this sort will probably be useful to
more than a few people.

--
Nadav Har'El


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 08:33:12 2006
Return-Path: <java-user-return-19093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97935 invoked from network); 22 Feb 2006 08:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 08:33:12 -0000
Received: (qmail 1158 invoked by uid 500); 22 Feb 2006 08:33:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1137 invoked by uid 500); 22 Feb 2006 08:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1126 invoked by uid 99); 22 Feb 2006 08:33:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 00:33:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sogwhitester@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO pproxy.gmail.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 00:33:04 -0800
Received: by pproxy.gmail.com with SMTP id n25so1690972pyg
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 00:32:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=ujMmTHec/kc1mwV0R55HOCPri4UPuQUMoDOHVahSADvOoC5RmyJGsSw3FD07EZ7gmLEZYV3c2ISijG0iiCswexMRNy0mS1BzzxSZkgocNchltXQ7c42ruvCTsUdqUlN2q8pJ25kbyqshz61onSQLPR9UDjh9cUIbEFAIoxfGdBY=
Received: by 10.35.54.20 with SMTP id g20mr228963pyk;
        Wed, 22 Feb 2006 00:32:44 -0800 (PST)
Received: from baihui ( [218.247.170.164])
        by mx.gmail.com with ESMTP id q36sm283760pyg.2006.02.22.00.32.42;
        Wed, 22 Feb 2006 00:32:43 -0800 (PST)
Message-ID: <000a01c6378a$8bec1fc0$1f00a8c0@baihui>
From: "sog" <sogwhitester@gmail.com>
To: <java-user@lucene.apache.org>
References: <006e01c63769$6c6f6010$1f00a8c0@baihui> <43FBF464.6010201@nuix.com.au>
Subject: Re: How can I get a term's frequency?
Date: Wed, 22 Feb 2006 16:32:37 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="gb2312";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.1830
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

en, but IndexReader.getTermFreqVector is an abstract method, I do not know 
how to implement it in an efficient way. Anyone has good advise?

I search with a group of query terms, I can get a document from the search 
result:

Query(term1, term2, term3)-->search index-->Hits(doc1, doc2, doc3, ......)

I wanna get term1's frequency in doc1 ?

I think the tf value is caculated in the index procedure. can I get the 
tf(term frequency) value of term1 directly?

I can do it in this way:


QueryTermVector vector= new QueryTermVector(Document.getValues(field));
freq = result.getTermFrequencies();


but I think this is a very low efficient way.

Anyone can help me ? thx


sog




----- Original Message ----- 
From: "Daniel Noll" <daniel@nuix.com.au>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 22, 2006 1:19 PM
Subject: Re: How can I get a term's frequency?


> sog wrote:
>>
>> I search the index with a group of terms. I want to get every term's
>> frequency in each document of the search result.
>
> Are you looking for this?
>
> TermFreqVector vector = IndexReader.getTermFreqVector(docNum, "field");
>
> That gives you the frequency of every term, but you can just look up the
> ones you're interested in.
>
> Daniel
>
>
> -- 
> Daniel Noll
>
> Nuix Australia Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> Phone: (02) 9280 0699
> Fax:   (02) 9212 6902
>
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 08:36:49 2006
Return-Path: <java-user-return-19094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99214 invoked from network); 22 Feb 2006 08:36:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 08:36:48 -0000
Received: (qmail 3885 invoked by uid 500); 22 Feb 2006 08:36:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3852 invoked by uid 500); 22 Feb 2006 08:36:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3841 invoked by uid 99); 22 Feb 2006 08:36:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 00:36:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 00:36:41 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.3/8.13.3) with ESMTP id k1M8aJvj078268
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 09:36:19 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Phrase query vs span query
Date: Wed, 22 Feb 2006 09:36:18 +0100
User-Agent: KMail/1.8.2
References: <abe188f20602211545u3bcbe356p83ded3b119a4b564@mail.gmail.com>
In-Reply-To: <abe188f20602211545u3bcbe356p83ded3b119a4b564@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602220936.19079.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 22 February 2006 00:45, Rajesh Munavalli wrote:
> I am trying to adopt lucene for a special IR system. The following scenario
> is an approximation of what I am trying to do. Please bear with me if some
> things doesnt make sense. I need some suggestions on formulating queries for
> the following scenario
> 
> Each document consists of a set of fields (standard in lucene). But in my
> case, the field is somewhat different as explained below.
> 
> Field:
> ---------
> Each field consists of a set of conceptual sections. Each of these sections
> is separated by say N (say 1000) index positions but are in the same field.
> Sizes of sections vary and do not have any lower or upper bound on the
> number of terms they may contain
> .
> Ex: Lets say Field "contents" has
> <section1 of 100 terms><gap of 1000 term positions><section 2 of 1500
> terms><gap of 1000 term positions><gap of 1000 term positions><section 3 of
> 10 terms>
> 
> NOTE: At index time, I am assuming I somehow know how to form these
> sections.

One more choice you have is too index both the full document and each section
as a Lucene document.

> 
> Typical Query:
> ---------------------
> Consists of 15 to 30 query terms. In other words, these query terms
> represent a conceptual section.

Would you need synonyms of these terms, too?
 
> Aim of the Query formation:
> ----------------------------------------
> I want to rank the documents proportional to the number query terms

For this there is the coord() factor used in Lucene boolean queries.
But scoring exactly proportional to the number of query terms is difficult
to do because the lucene score is not bound by default.

> appearing in the SAME SECTION and IN ORDER. Documents containing terms with

To query the exact order, you can use PhraseQuery and SpanQuery.

> the
> 
> My Questions:
> ---------------------
> Considering the structure of the fields/documents and the number of query
> terms.
> 
> (1) Is there an effective way of formulating a query with the existing query
> types in Lucene?

I don't think so, see below.

> (2) After considering the way different queries work and their limitations,
> I think forming phrase/span queries of groups of query terms
> might approximate the rankings I am expecting. In that case which of the
> following queries will perform better (in terms of QUERY SPEED and RANKING)
>               (a) phrase query with certain slope factor
>               (b) span query

SpanQuery is slower than PhraseQuery, but it has the advantage that it can
be nested. Nesting here means the possibility to use eg. a short phrase as
a unit to be matched and scored.

Concerning this:
>Rank 2: Documents containing section containing all terms but randomly
>ordered

SpanQuery can also match unordered occurrences, I don't know about
PhraseQuery.

To formulate a single query for your requirements,
there is still the problem that PhraseQuery and SpanQuery only work when
all their "terms" are present in an indexed lucene document field.
Putting it differently, when fewer terms present, their order cannot
be taken into account, unless the query contains an (non)ordered query 
specifying a subset of the terms present in the documents.

An alternative to the current span query implementation is here:
http://issues.apache.org/jira/browse/LUCENE-413
but this will only help to get an impression of how to match in the ordered
and unordered cases.
It might be possible to generalize the various span algorithms there and
in the trunk to work with fewer "terms".

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 09:46:23 2006
Return-Path: <java-user-return-19095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32236 invoked from network); 22 Feb 2006 09:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 09:46:22 -0000
Received: (qmail 90626 invoked by uid 500); 22 Feb 2006 09:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90585 invoked by uid 500); 22 Feb 2006 09:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90574 invoked by uid 99); 22 Feb 2006 09:46:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 01:46:17 -0800
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_POST,RCVD_IN_WHOIS_BOGONS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [196.7.150.227] (HELO www.loot.co.za) (196.7.150.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Feb 2006 01:46:16 -0800
Received: (qmail 30841 invoked from network); 22 Feb 2006 09:45:51 -0000
Received: from unknown (HELO sun.loot.co.za) (10.1.0.2)
  by 0 with SMTP; 22 Feb 2006 09:45:51 -0000
Received: (qmail 1067 invoked by uid 7791); 22 Feb 2006 09:45:35 -0000
Received: from unknown (HELO saturn) (192.168.0.2)
  by 0 with SMTP; 22 Feb 2006 09:45:35 -0000
Message-ID: <00f601c63794$ba71de70$0200a8c0@saturn>
From: "Michael van Rooyen" <mvanr@bigfoot.com>
To: <java-user@lucene.apache.org>,
	"Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
References: <20060220183946.5226.qmail@web50306.mail.yahoo.com>
Subject: Re: Index missing documents
Date: Wed, 22 Feb 2006 11:45:34 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Spam-Checker-Version: SpamAssassin 3.0.2 (2004-11-16) on sun.loot.co.za
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.2
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm using Lucene 1.4.3, and maxBufferedDocs only appears to be in the new 
(unreleased?) version of IndexWriter in CVS.  Looking at the code though, 
setMaxBufferedDocs(n) just translates to minMergeDocs = n.  My index was 
constructed using the default minMergeDocs = 10, so somehow this doesn't 
seem to be the culprit that caused all 2 million+ documents to be missing 
from the crashed index.  It seems more likely that none of the index files 
were "registered" in Lucene's segements file.  Is there perhaps some other 
trigger that causes Lucene to "register" the indexes in the segments file, 
or is there some way of flushing the segments file every so often to ensure 
that it's list is up to date?  Thanks again for your assistance.

Michael.

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Monday, February 20, 2006 8:39 PM
Subject: Re: Index missing documents


> No, using the same IndexWriter is the way to go.  If you want things to be 
> written to disk more frequently, lower the maxBufferedDocs setting.  Go 
> down to 1, if you want.  You'll use less memory (RAM), Documents will be 
> written to disk without getting buffered in RAM, but the indexing process 
> will be slower.
>
> Otis
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 10:19:04 2006
Return-Path: <java-user-return-19096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47628 invoked from network); 22 Feb 2006 10:18:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 10:18:58 -0000
Received: (qmail 32996 invoked by uid 500); 22 Feb 2006 10:18:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32969 invoked by uid 500); 22 Feb 2006 10:18:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32957 invoked by uid 99); 22 Feb 2006 10:18:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 02:18:44 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sogwhitester@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO pproxy.gmail.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 02:18:44 -0800
Received: by pproxy.gmail.com with SMTP id w49so1710906pyg
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 02:18:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=P7RdZT3uySHntAOry9NTIm8AWCDOt9g27LZAI1RG2yR1EW4/6wYbbPfJKSfGmaUXry4MS6S5XNkfNh3gmauQe8d1Ghd7VRhFJutHovMNMDa2yQLJW2ekEGgF5DyUPD5bqRIBkI1hzh4sayGUhfU6t57Pr2j7tGIAPf7rdWsuiPI=
Received: by 10.35.91.10 with SMTP id t10mr323682pyl;
        Wed, 22 Feb 2006 02:18:23 -0800 (PST)
Received: from baihui ( [218.247.170.164])
        by mx.gmail.com with ESMTP id k62sm568588pyk.2006.02.22.02.18.22;
        Wed, 22 Feb 2006 02:18:23 -0800 (PST)
Message-ID: <004501c63799$4edb59c0$1f00a8c0@baihui>
From: "sog" <sogwhitester@gmail.com>
To: <java-user@lucene.apache.org>
References: <006e01c63769$6c6f6010$1f00a8c0@baihui> <43FBF464.6010201@nuix.com.au>
Subject: Re: How can I get a term's frequency?
Date: Wed, 22 Feb 2006 18:18:18 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="gb2312";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.1830
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


en, I describe my question more clearly:

I search with a group of query terms, I can get a document from the search 
result:

Query(term1, term2, term3)-->search index-->Hits(doc1, doc2, doc3, ......)

I wanna get term1's frequency in doc1 ?

Hits(docs1((term1,freq),(term2,freq),(term3,freq)),
     docs2((term1,freq),(term2,freq),(term3,freq)),......)

 
I think the tf value is caculated in the index procedure. can I get the 
tf(term frequency) value of term1 directly?

I can do it in this way:


QueryTermVector vector= new QueryTermVector(Document.getValues(field));
freq = result.getTermFrequencies();


but I think this is a very low efficient way.

Anyone can help me ? thx


sog


----- Original Message ----- 
From: "Daniel Noll" <daniel@nuix.com.au>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 22, 2006 1:19 PM
Subject: Re: How can I get a term's frequency?


> sog wrote:
>> 
>> I search the index with a group of terms. I want to get every term's 
>> frequency in each document of the search result.
> 
> Are you looking for this?
> 
> TermFreqVector vector = IndexReader.getTermFreqVector(docNum, "field");
> 
> That gives you the frequency of every term, but you can just look up the
> ones you're interested in.
> 
> Daniel
> 
> 
> -- 
> Daniel Noll
> 
> Nuix Australia Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> Phone: (02) 9280 0699
> Fax:   (02) 9212 6902
> 
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 11:21:55 2006
Return-Path: <java-user-return-19097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76688 invoked from network); 22 Feb 2006 11:21:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 11:21:55 -0000
Received: (qmail 39967 invoked by uid 500); 22 Feb 2006 11:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39937 invoked by uid 500); 22 Feb 2006 11:21:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39919 invoked by uid 99); 22 Feb 2006 11:21:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 03:21:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of finsaccanebbia@gmail.com designates 64.233.182.193 as permitted sender)
Received: from [64.233.182.193] (HELO nproxy.gmail.com) (64.233.182.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 03:21:45 -0800
Received: by nproxy.gmail.com with SMTP id y38so908143nfb
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 03:21:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kH7g84GbGXDeG9uRFGF6/tvB9ImsRKAf4qhRxa4FQNERjbJuBlgRAtgPvicVq4C0AKPJt7SMEHolDpik6uHTg+0rWnIz8uYj/Hrb8aswXru1Fh4lvXBUwntpsr7JEzBNoUdGrixEVDsYBgq/lySQqJIoq67rC4sDy1BxnwOjAWg=
Received: by 10.49.35.10 with SMTP id n10mr1818644nfj;
        Wed, 22 Feb 2006 03:21:24 -0800 (PST)
Received: by 10.49.61.20 with HTTP; Wed, 22 Feb 2006 03:21:24 -0800 (PST)
Message-ID: <a02a04880602220321g721e6793q8ebd863e2b974bcb@mail.gmail.com>
Date: Wed, 22 Feb 2006 12:21:24 +0100
From: "Fabio Insaccanebbia" <finsaccanebbia@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: webserverless search with lucene on offline HTML doc
In-Reply-To: <5DD2165A95E801438DAA9C1E0957EB5E7586AA@ewiex02.dynamic.ewi.utwente.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5DD2165A95E801438DAA9C1E0957EB5ED3F342@ewiex02.dynamic.ewi.utwente.nl>
	 <a02a04880602200342x1228124ducba5378b1f110be9@mail.gmail.com>
	 <556D1D57-79B7-4380-98EC-E644A1BDD204@jupiter-jazz.com>
	 <5DD2165A95E801438DAA9C1E0957EB5E7586AA@ewiex02.dynamic.ewi.utwente.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The signed applet is surely a simpler and more elegant solution..

In some projects however this could not be a viable option:
the "System properties problem" you have pointed out (and I had missed
:-) is hopefully going to be solved in 1.9
(http://issues.apache.org/jira/browse/LUCENE-369)

Fabio

P.S.: is there any possibilty to have a look at your quick and dirty
implementation of the JarDirectory? I've written a
"JarReadOnlyDirectory" but it was "very dirty" and not even so quick
for me to write :-(

> I wrote a quick and dirty implementation of a JarDirectory - it works, bu=
t a new problem is encountered soon after: The indexWriter requires informa=
tion from the System properties; an applet is allowed to read only a limite=
d set of Properties.
>
> Especially with an offline applet I would stick to the solution of signin=
g the applet.
>
> Dolf.


On 2/21/06, Trieschnigg, R.B. (Dolf) <r.b.trieschnigg@ewi.utwente.nl> wrote=
:
> > Wouldn't this be a good case for the JarDirectory implementation
> > somebody asked for?
> > The index could then be statically written in a jar file downloaded
> > with the applet (the original mail refers to static offline HTML
> > files).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 11:33:57 2006
Return-Path: <java-user-return-19098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81938 invoked from network); 22 Feb 2006 11:33:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 11:33:23 -0000
Received: (qmail 60431 invoked by uid 500); 22 Feb 2006 11:33:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60398 invoked by uid 500); 22 Feb 2006 11:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60383 invoked by uid 99); 22 Feb 2006 11:33:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 03:33:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.128.105.12] (HELO King.Siti.com) (209.128.105.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 03:33:15 -0800
Received: from ravij ([10.2.152.215] unverified) by King.Siti.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 22 Feb 2006 03:17:38 -0800
From: "Ravi" <ravi.jaladanki@siti.com>
To: <java-user@lucene.apache.org>
Subject: :Lucene 1.9 RC1 is not working properly with older version of Code 1.43:
Date: Wed, 22 Feb 2006 17:06:18 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0003_01C637D2.563BFE70"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
thread-index: AcY3pDI2yi+ntmh+S6u47h/o2g5iqQ==
Message-ID: <KINGPYzDabigPasSmz6000001d2@King.Siti.com>
X-OriginalArrivalTime: 22 Feb 2006 11:17:40.0046 (UTC) FILETIME=[97AAE6E0:01C637A1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0003_01C637D2.563BFE70
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi ,

 

I  got the latest source code of Lucene 1.9 RC1 and modified my code
according to that by removing the deprecated methods. But once I have
updated to this version the search is not working at all.. if I try with
luke it is working fine but If I try with program it is not returning any
error .. and result.. please let me know If any problems are there with this
version. If that contains  I will replace with old version1.4.3 which is
working fine..

 

 

Thanks

Ravi Kumar Jaladanki


------=_NextPart_000_0003_01C637D2.563BFE70--


From java-user-return-19099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 14:45:45 2006
Return-Path: <java-user-return-19099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1580 invoked from network); 22 Feb 2006 14:45:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 14:45:45 -0000
Received: (qmail 99740 invoked by uid 500); 22 Feb 2006 14:45:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99709 invoked by uid 500); 22 Feb 2006 14:45:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99698 invoked by uid 99); 22 Feb 2006 14:45:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 06:45:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO zproxy.gmail.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 06:45:35 -0800
Received: by zproxy.gmail.com with SMTP id i11so1432489nzh
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 06:45:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=uhGVNT6JGl3fwEYLDwG/AORirXK1vznkz+bn5yfvNly8D7xfdjs/StLQuliI/Aohb1u0Ba7KmAxGdRhTtLGvWIFYUbc31wehCRb9SJJXm7C90Yr/qJ2/a1/Q+g9EZi2EGYTDhNi+f2jPGPcAm2fiYfA/DOJzqXKFAHMv2CuyrJk=
Received: by 10.64.249.9 with SMTP id w9mr2004622qbh;
        Wed, 22 Feb 2006 06:45:14 -0800 (PST)
Received: by 10.65.186.9 with HTTP; Wed, 22 Feb 2006 06:45:14 -0800 (PST)
Message-ID: <4f9b23800602220645o56ba1a62j@mail.gmail.com>
Date: Wed, 22 Feb 2006 14:45:14 +0000
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene, Cannot rename segments.new to segments
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am getting intermittent errors with Lucene.  Here are two examples:
java.io.IOException: Cannot rename E:\lucene\segments.new to E:\lucene\segm=
ents
java.io.IOException: Cannot rename E:\lucene\_8ya.tmp to E:\lucene\_8ya.del

This issue has an open BugZilla entry:
http://issues.apache.org/bugzilla/show_bug.cgi?id=3D36241

I thought this error must be caused by an error in my application.  To
try and solve the error I used the LuceneIndexAccessor in my
application:
http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34995

I am still getting the error.

1) Is there a reason (other than time and resource) why the bug report
is still set to "NEW" after 6 months (since August 2005)?

2) Is the problem likely to be in my application?  Any ideas how I
could go about solving this issue?

Thanks for your help
Patrick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 14:48:15 2006
Return-Path: <java-user-return-19100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3298 invoked from network); 22 Feb 2006 14:48:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 14:48:13 -0000
Received: (qmail 7080 invoked by uid 500); 22 Feb 2006 14:48:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6949 invoked by uid 500); 22 Feb 2006 14:48:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6860 invoked by uid 99); 22 Feb 2006 14:48:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 06:48:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.202 as permitted sender)
Received: from [64.233.182.202] (HELO nproxy.gmail.com) (64.233.182.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 06:47:59 -0800
Received: by nproxy.gmail.com with SMTP id x4so1007669nfb
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 06:47:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=agIlSqa8fEqeFkmPcne2JHa6P2B/aab09sMwwqPkHvRxaMqu/sKjWNlKZWaNntAvnVh1a36C6jXwvsi4gomySLtmPfiCJ3M6CJOwXyiIfTJLQRuiwbZw8q7PheOROmdo/9TBj+J0wsynUTs0N0RHWOLp7gQmXvla6aTFI8mT/R4=
Received: by 10.48.3.15 with SMTP id 15mr1894267nfc;
        Wed, 22 Feb 2006 06:47:36 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Wed, 22 Feb 2006 06:47:36 -0800 (PST)
Message-ID: <c68e39170602220647r610e8b72qb61f6da12237bcf8@mail.gmail.com>
Date: Wed, 22 Feb 2006 09:47:36 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: :Lucene 1.9 RC1 is not working properly with older version of Code 1.43:
In-Reply-To: <KINGPYzDabigPasSmz6000001d2@King.Siti.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <KINGPYzDabigPasSmz6000001d2@King.Siti.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Ravi,

Could you try 1.9RC1 without changing your code to remove the
deprecated calls first?
If that works, try changing one type of deprecated call at a time
until the culprit is found.
It may either be a bug in API usage in your code, or a bug in Lucene.

-Yonik

On 2/22/06, Ravi <ravi.jaladanki@siti.com> wrote:
> I  got the latest source code of Lucene 1.9 RC1 and modified my code
> according to that by removing the deprecated methods. But once I have
> updated to this version the search is not working at all.. if I try with
> luke it is working fine but If I try with program it is not returning any
> error .. and result.. please let me know If any problems are there with t=
his
> version. If that contains  I will replace with old version1.4.3 which is
> working fine..

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 14:57:54 2006
Return-Path: <java-user-return-19101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9503 invoked from network); 22 Feb 2006 14:57:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 14:57:52 -0000
Received: (qmail 31904 invoked by uid 500); 22 Feb 2006 14:57:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31805 invoked by uid 500); 22 Feb 2006 14:57:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31775 invoked by uid 99); 22 Feb 2006 14:57:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 06:57:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.140] (HELO smtp803.mail.ukl.yahoo.com) (217.12.12.140)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Feb 2006 06:57:40 -0800
Received: (qmail 50188 invoked from network); 22 Feb 2006 14:57:19 -0000
Received: from unknown (HELO MALCOLM) (malcyclark@btinternet.com@86.132.167.219 with login)
  by smtp803.mail.ukl.yahoo.com with SMTP; 22 Feb 2006 14:57:18 -0000
Message-ID: <00c601c637c0$43eb2410$0201a8c0@MALCOLM>
From: "Malcolm Clark" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References: <F9E303076B72074AB76B2C8F78952B2919891B@bettylou.configureone.net> <43FB5591.3020304@allegromedical.com>
Subject: TREC,INEX and  Lucene
Date: Wed, 22 Feb 2006 14:57:13 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2527
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
I am planning on participating in the INEX and hopefully passively on a 
couple of TREC tracks mainly using the Lucene API.
Is anyone else on this list planning on using Lucene during participation?
I am particularly interested in the SPAM, Blog and ADHOC tracks.
Malcolm Clark 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 15:00:56 2006
Return-Path: <java-user-return-19102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10894 invoked from network); 22 Feb 2006 15:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 15:00:55 -0000
Received: (qmail 36471 invoked by uid 500); 22 Feb 2006 15:00:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36449 invoked by uid 500); 22 Feb 2006 15:00:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36437 invoked by uid 99); 22 Feb 2006 15:00:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 07:00:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.192 as permitted sender)
Received: from [64.233.182.192] (HELO nproxy.gmail.com) (64.233.182.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 07:00:48 -0800
Received: by nproxy.gmail.com with SMTP id x29so1012009nfb
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 07:00:25 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pV2f1CUpJuCGQcQNQw5E6d9g8+PrnhoiXcdnrNBlA7ggB613fAoDV1TdhegAbYPkRFoNS5j2/DBst6NbLEVMYd62p+iY87FpuG1Xa9iQkEkvs3m00/PmCIHTaPiTbLRZ3271A6+/jIHWEAISKGmze9S1B1PXm2YXnkinmwxj0gw=
Received: by 10.49.8.13 with SMTP id l13mr1620663nfi;
        Wed, 22 Feb 2006 07:00:25 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Wed, 22 Feb 2006 07:00:25 -0800 (PST)
Message-ID: <c68e39170602220700u493b1354r8a7becbe85de5239@mail.gmail.com>
Date: Wed, 22 Feb 2006 10:00:25 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene, Cannot rename segments.new to segments
In-Reply-To: <4f9b23800602220645o56ba1a62j@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4f9b23800602220645o56ba1a62j@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Patrick, we use JIRA now:
http://issues.apache.org/jira/browse/LUCENE-425

That issue might be related to this bug, recently fixed:
https://issues.apache.org/jira/browse/LUCENE-481

If your problem is reproducible enough, could you try your application with
1.9-rc1?
http://www.apache.org/dyn/closer.cgi/lucene/java/

-Yonik

On 2/22/06, Patrick Kimber <mailing.patrick.kimber@gmail.com> wrote:
> I am getting intermittent errors with Lucene.  Here are two examples:
> java.io.IOException: Cannot rename E:\lucene\segments.new to E:\lucene\se=
gments
> java.io.IOException: Cannot rename E:\lucene\_8ya.tmp to E:\lucene\_8ya.d=
el
>
> This issue has an open BugZilla entry:
> http://issues.apache.org/bugzilla/show_bug.cgi?id=3D36241
>
> I thought this error must be caused by an error in my application.  To
> try and solve the error I used the LuceneIndexAccessor in my
> application:
> http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34995
>
> I am still getting the error.
>
> 1) Is there a reason (other than time and resource) why the bug report
> is still set to "NEW" after 6 months (since August 2005)?
>
> 2) Is the problem likely to be in my application?  Any ideas how I
> could go about solving this issue?
>
> Thanks for your help
> Patrick
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 15:40:20 2006
Return-Path: <java-user-return-19103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38091 invoked from network); 22 Feb 2006 15:40:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 15:40:20 -0000
Received: (qmail 25895 invoked by uid 500); 22 Feb 2006 15:40:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25866 invoked by uid 500); 22 Feb 2006 15:40:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25855 invoked by uid 99); 22 Feb 2006 15:40:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 07:40:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 07:40:11 -0800
Received: by wproxy.gmail.com with SMTP id i24so1110318wra
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 07:39:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CSWvkSPwSQhowvVYKlW0v8pQGpN2Oy4OBU+YvO3aPhCCb918fGXTjEMI0OLAE/FttuA7mKDolYEzXpkdhdJy2Kxldl5QY1wMNZicPhv+GEw4pzvuTBW5nhUJINRTXbmJdBFtsRAyfJLuW2q8b81XPcX8ZjnvV2u+jLn+onPBDJg=
Received: by 10.65.225.13 with SMTP id c13mr1575392qbr;
        Wed, 22 Feb 2006 07:39:49 -0800 (PST)
Received: by 10.65.244.16 with HTTP; Wed, 22 Feb 2006 07:39:49 -0800 (PST)
Message-ID: <abe188f20602220739i75a2e2bajb6176533d15bc28@mail.gmail.com>
Date: Wed, 22 Feb 2006 09:39:49 -0600
From: "Rajesh Munavalli" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Phrase query vs span query
In-Reply-To: <200602220936.19079.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10317_13773633.1140622789534"
References: <abe188f20602211545u3bcbe356p83ded3b119a4b564@mail.gmail.com>
	 <200602220936.19079.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10317_13773633.1140622789534
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On 2/22/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> >
> > Typical Query:
> > ---------------------
> > Consists of 15 to 30 query terms. In other words, these query terms
> > represent a conceptual section.
>
> Would you need synonyms of these terms, too?


Yes.


> > (2) After considering the way different queries work and their
> limitations,
> > I think forming phrase/span queries of groups of query terms
> > might approximate the rankings I am expecting. In that case which of th=
e
> > following queries will perform better (in terms of QUERY SPEED and
> RANKING)
> >               (a) phrase query with certain slope factor
> >               (b) span query
>
> SpanQuery is slower than PhraseQuery, but it has the advantage that it ca=
n
> be nested. Nesting here means the possibility to use eg. a short phrase a=
s
> a unit to be matched and scored.


I wasn't aware of the capability to nest spanquery. Is there a link where I
could read more about this?

 To formulate a single query for your requirements,
> there is still the problem that PhraseQuery and SpanQuery only work when
> all their "terms" are present in an indexed lucene document field.
> Putting it differently, when fewer terms present, their order cannot
> be taken into account, unless the query contains an (non)ordered query
> specifying a subset of the terms present in the documents.
>

I was thinking of building a boolean combination of either phrase/span quer=
y
on subset of terms. Though its not exhaustive, but might be sufficient in
majority of the cases.

An alternative to the current span query implementation is here:
> http://issues.apache.org/jira/browse/LUCENE-413
> but this will only help to get an impression of how to match in the
> ordered
> and unordered cases.
> It might be possible to generalize the various span algorithms there and
> in the trunk to work with fewer "terms".
>
I will consider that option.

Thanks,

Rajesh Munavalli

------=_Part_10317_13773633.1140622789534--

From java-user-return-19104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 16:57:27 2006
Return-Path: <java-user-return-19104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94685 invoked from network); 22 Feb 2006 16:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 16:57:25 -0000
Received: (qmail 48205 invoked by uid 500); 22 Feb 2006 16:57:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48140 invoked by uid 500); 22 Feb 2006 16:57:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48129 invoked by uid 99); 22 Feb 2006 16:57:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 08:57:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 08:57:17 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.13.3/8.13.3) with ESMTP id k1MGut7B079120
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 17:56:55 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Phrase query vs span query
Date: Wed, 22 Feb 2006 17:56:55 +0100
User-Agent: KMail/1.8.2
References: <abe188f20602211545u3bcbe356p83ded3b119a4b564@mail.gmail.com> <200602220936.19079.paul.elschot@xs4all.nl> <abe188f20602220739i75a2e2bajb6176533d15bc28@mail.gmail.com>
In-Reply-To: <abe188f20602220739i75a2e2bajb6176533d15bc28@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602221756.55180.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 22 February 2006 16:39, Rajesh Munavalli wrote:

> 
> I wasn't aware of the capability to nest spanquery. Is there a link where I
> could read more about this?

from the practice-what-you-preach dept.
http://www.lucenebook.com/search?query=span+nest

The subclasses of SpanQuery:
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/spans/SpanQuery.html

This parser allows nesting span queries, you might consider extending it
in case you decide to write your own Scorers:
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/surround/

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 17:20:55 2006
Return-Path: <java-user-return-19105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10321 invoked from network); 22 Feb 2006 17:20:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 17:20:53 -0000
Received: (qmail 94568 invoked by uid 500); 22 Feb 2006 17:20:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94536 invoked by uid 500); 22 Feb 2006 17:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94525 invoked by uid 99); 22 Feb 2006 17:20:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 09:20:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 09:20:45 -0800
Received: from localhost [127.0.0.1]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Wed, 22 Feb 2006 10:20:23 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C637D4.43B63403"
Subject: ArrayIndexOutOfBoundsException being thrown ...
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Wed, 22 Feb 2006 10:20:23 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF3286740239D54E@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: ArrayIndexOutOfBoundsException being thrown ...
thread-index: AcY31EOx8TL13nO3SBKBybmo40I2IA==
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C637D4.43B63403
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Getting an ArrayIndexOutOfBoundsException ...

Line 31 in IndexSearcherManager.java:
...

	public static IndexSearcher getIndexSearcher(String indexPath)=20
        {
                logger.debug("indexPath =3D " + indexPath);
                ....
                ....=20
		searcher =3D new IndexSearcher(indexPath); <---------------- LINE 31
		....
		return searcher;
	}
...
...

I get the following exception:

28628 DEBUG =
com.allegrocentral.tandoori.managers.search.IndexSearcherManager [21] - =
indexPath =3D /opt/tomcat/webapps/ROOT/WEB-INF/search-index
28666 WARN  org.apache.struts.action.RequestProcessor [516] - Unhandled =
Exception thrown: class java.lang.ArrayIndexOutOfBoundsException
28669 ERROR =
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/].[action=
] [704] - Servlet.service() for servlet action threw exception
java.lang.ArrayIndexOutOfBoundsException: -1
        at java.util.ArrayList.get(ArrayList.java:323)
        at =
org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155)
        at =
org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java:151)
        at =
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:149=
)
        at =
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)
        at =
org.apache.lucene.index.TermInfosReader.readIndex(TermInfosReader.java:86=
)
        at =
org.apache.lucene.index.TermInfosReader.<init>(TermInfosReader.java:45)
        at =
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:112)
        at =
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:89)
        at =
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:118)
        at org.apache.lucene.store.Lock$With.run(Lock.java:109)
        at =
org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
        at =
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
        at =
com.allegrocentral.tandoori.managers.search.IndexSearcherManager.getIndex=
Searcher(IndexSearcherManager.java:31)

Any ideas as to why this might be happening? (Am using =
lucene-core-1.9-rc1.jar)

-Thanks.

------_=_NextPart_001_01C637D4.43B63403--

From java-user-return-19106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 17:26:56 2006
Return-Path: <java-user-return-19106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14088 invoked from network); 22 Feb 2006 17:26:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 17:26:55 -0000
Received: (qmail 5248 invoked by uid 500); 22 Feb 2006 17:26:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5057 invoked by uid 500); 22 Feb 2006 17:26:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5046 invoked by uid 99); 22 Feb 2006 17:26:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 09:26:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gusk@altrec.com designates 63.251.175.92 as permitted sender)
Received: from [63.251.175.92] (HELO mta.altrec.com) (63.251.175.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 09:26:48 -0800
Received: from localhost (mta.altrec.com [127.0.0.1])
	by mta.altrec.com (Postfix) with ESMTP id 05A2D7BB9C
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 09:26:19 -0800 (PST)
Received: from mta.altrec.com ([127.0.0.1])
 by localhost (mta.altrec.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 24083-07 for <java-user@lucene.apache.org>;
 Wed, 22 Feb 2006 09:26:18 -0800 (PST)
Received: from denali.altrec.com (arachne.altrec.com [63.251.175.11])
	by mta.altrec.com (Postfix) with ESMTP id 0F8F37BB78
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 09:26:18 -0800 (PST)
Received: by DENALI with Internet Mail Service (5.5.2656.59)
	id <WF7DX6V8>; Wed, 22 Feb 2006 09:27:36 -0800
Message-ID: <55903574BD75D311B8A0009027CCC22B0529DC9C@DENALI>
From: Gus Kormeier <gusk@altrec.com>
To: java-user@lucene.apache.org
Subject: IndexSearcher
Date: Wed, 22 Feb 2006 09:27:35 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe too general a question, but is there anything about creating an
IndexSearcher( directory) object that would make the instantiation really
slow?


I have one index where the instantiation is very fast, to the point where I
don't need to do any pooling.  A new index I have created, takes a very long
time to create the IndexSearcher object.  With a 30mb index, it can take
about 30 seconds just to instantiate an IndexSearcher().  It almost seems
like it is reading the index at that point.


The only difference between the indexes has been the # of fields indexed.
The newer one only having one field indexed.

Any ways to speed up that instantiation? Or do I have to use a pooling
system?

Thanks for any suggestions,
-Gus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 17:36:55 2006
Return-Path: <java-user-return-19107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20134 invoked from network); 22 Feb 2006 17:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 17:36:50 -0000
Received: (qmail 22454 invoked by uid 500); 22 Feb 2006 17:36:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22427 invoked by uid 500); 22 Feb 2006 17:36:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22416 invoked by uid 99); 22 Feb 2006 17:36:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 09:36:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 09:36:39 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexSearcher
Date: Wed, 22 Feb 2006 11:35:10 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B291989BE@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexSearcher
Thread-Index: AcY31QGm9BWbeMWyRI+j6VaXWbrtcAAATzyA
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This doesn't really address your question, but...

Once you have the single indexsearcher, do you need any others?   Could
your app just use the single instance? =20

-----Original Message-----
From: Gus Kormeier [mailto:gusk@altrec.com]=20
Sent: Wednesday, February 22, 2006 11:28 AM
To: java-user@lucene.apache.org
Subject: IndexSearcher

Maybe too general a question, but is there anything about creating an
IndexSearcher( directory) object that would make the instantiation
really
slow?


I have one index where the instantiation is very fast, to the point
where I
don't need to do any pooling.  A new index I have created, takes a very
long
time to create the IndexSearcher object.  With a 30mb index, it can take
about 30 seconds just to instantiate an IndexSearcher().  It almost
seems
like it is reading the index at that point.


The only difference between the indexes has been the # of fields
indexed.
The newer one only having one field indexed.

Any ways to speed up that instantiation? Or do I have to use a pooling
system?

Thanks for any suggestions,
-Gus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 17:53:14 2006
Return-Path: <java-user-return-19108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32995 invoked from network); 22 Feb 2006 17:53:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 17:53:13 -0000
Received: (qmail 47653 invoked by uid 500); 22 Feb 2006 17:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47631 invoked by uid 500); 22 Feb 2006 17:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47620 invoked by uid 99); 22 Feb 2006 17:53:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 09:53:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 09:53:06 -0800
Received: from localhost [127.0.0.1]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Wed, 22 Feb 2006 10:52:45 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C637D8.C8F4CAE5"
Subject: RE: ArrayIndexOutOfBoundsException being thrown ...
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Wed, 22 Feb 2006 10:51:52 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF3286740239D54F@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <B5ADCC4EA669BF4697F6AF63FF3286740239D54F@exch01.allegro.med>
Thread-Topic: ArrayIndexOutOfBoundsException being thrown ...
thread-index: AcY31EOx8TL13nO3SBKBybmo40I2IAABGXZO
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C637D8.C8F4CAE5
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


I switched back to lucene-1.4.3.jar and i dont get the exception any =
more? Is this a bug in the new jar?

-Mufaddal.

-----Original Message-----
From: Mufaddal Khumri [mailto:MKhumri@allegromedical.com]
Sent: Wed 2/22/2006 10:20 AM
To: java-user@lucene.apache.org
Subject: ArrayIndexOutOfBoundsException being thrown ...
=20
Getting an ArrayIndexOutOfBoundsException ...

Line 31 in IndexSearcherManager.java:
...

	public static IndexSearcher getIndexSearcher(String indexPath)=20
        {
                logger.debug("indexPath =3D " + indexPath);
                ....
                ....=20
		searcher =3D new IndexSearcher(indexPath); <---------------- LINE 31
		....
		return searcher;
	}
...
...

I get the following exception:

28628 DEBUG =
com.allegrocentral.tandoori.managers.search.IndexSearcherManager [21] - =
indexPath =3D /opt/tomcat/webapps/ROOT/WEB-INF/search-index
28666 WARN  org.apache.struts.action.RequestProcessor [516] - Unhandled =
Exception thrown: class java.lang.ArrayIndexOutOfBoundsException
28669 ERROR =
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/].[action=
] [704] - Servlet.service() for servlet action threw exception
java.lang.ArrayIndexOutOfBoundsException: -1
        at java.util.ArrayList.get(ArrayList.java:323)
        at =
org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155)
        at =
org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java:151)
        at =
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:149=
)
        at =
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)
        at =
org.apache.lucene.index.TermInfosReader.readIndex(TermInfosReader.java:86=
)
        at =
org.apache.lucene.index.TermInfosReader.<init>(TermInfosReader.java:45)
        at =
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:112)
        at =
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:89)
        at =
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:118)
        at org.apache.lucene.store.Lock$With.run(Lock.java:109)
        at =
org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
        at =
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
        at =
com.allegrocentral.tandoori.managers.search.IndexSearcherManager.getIndex=
Searcher(IndexSearcherManager.java:31)

Any ideas as to why this might be happening? (Am using =
lucene-core-1.9-rc1.jar)

-Thanks.



------_=_NextPart_001_01C637D8.C8F4CAE5
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C637D8.C8F4CAE5--

From java-user-return-19109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 18:01:05 2006
Return-Path: <java-user-return-19109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37414 invoked from network); 22 Feb 2006 18:01:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 18:01:03 -0000
Received: (qmail 66760 invoked by uid 500); 22 Feb 2006 18:00:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66719 invoked by uid 500); 22 Feb 2006 18:00:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66694 invoked by uid 99); 22 Feb 2006 18:00:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 10:00:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jlhamilton@kbsi.com designates 209.189.225.82 as permitted sender)
Received: from [209.189.225.82] (HELO mail.kbsi.com) (209.189.225.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 10:00:43 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C637D9.D19613E0"
Subject: search a subdirectory (New to Lucene)
Date: Wed, 22 Feb 2006 12:00:09 -0600
Message-ID: <25039D8626986D42820764CF3C2AB791032FED@00-emerald.kbsi-cs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search a subdirectory (New to Lucene)
Thread-Index: AcY32dF0dzAgG7MdRDihLYkV0HehAw==
From: "John Hamilton" <jlhamilton@kbsi.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C637D9.D19613E0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I'm new to Lucene and was wondering what is the best way to perform a =
search on a subdirectory or subdirectories within the index?  My thought =
at this point is to build a query to first search for files in the =
required directory(ies) and then use that query to make a QueryFilter =
and use that QueryFilter in the actual search.  Is there an easier way?
=20
On an unrelated note, does anybody know of a way to get results a the =
section level within a document?  For example, could I find not just a =
document that matches my query, but the paragraph within that document =
that best matches the query?
=20
thanks,
=20
John

------_=_NextPart_001_01C637D9.D19613E0--

From java-user-return-19110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 18:41:45 2006
Return-Path: <java-user-return-19110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58122 invoked from network); 22 Feb 2006 18:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 18:41:44 -0000
Received: (qmail 47763 invoked by uid 500); 22 Feb 2006 18:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47738 invoked by uid 500); 22 Feb 2006 18:41:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47509 invoked by uid 99); 22 Feb 2006 18:41:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 10:41:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gusk@altrec.com designates 63.251.175.92 as permitted sender)
Received: from [63.251.175.92] (HELO mta.altrec.com) (63.251.175.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 10:41:36 -0800
Received: from localhost (mta.altrec.com [127.0.0.1])
	by mta.altrec.com (Postfix) with ESMTP id 22DEF7BB9C
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 10:41:06 -0800 (PST)
Received: from mta.altrec.com ([127.0.0.1])
 by localhost (mta.altrec.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 25344-03 for <java-user@lucene.apache.org>;
 Wed, 22 Feb 2006 10:41:04 -0800 (PST)
Received: from denali.altrec.com (arachne.altrec.com [63.251.175.11])
	by mta.altrec.com (Postfix) with ESMTP id D13067BB78
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 10:41:04 -0800 (PST)
Received: by DENALI with Internet Mail Service (5.5.2656.59)
	id <WF7DX665>; Wed, 22 Feb 2006 10:42:23 -0800
Message-ID: <55903574BD75D311B8A0009027CCC22B0529DCA0@DENALI>
From: Gus Kormeier <gusk@altrec.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: IndexSearcher
Date: Wed, 22 Feb 2006 10:42:23 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's in a servlet, so one work around I have been going with is to just open
it at init().  That gives me some threading concerns.

And I didn't have to do that in the past,
-Gus

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]
Sent: Wednesday, February 22, 2006 9:35 AM
To: java-user@lucene.apache.org
Subject: RE: IndexSearcher


This doesn't really address your question, but...

Once you have the single indexsearcher, do you need any others?   Could
your app just use the single instance?  

-----Original Message-----
From: Gus Kormeier [mailto:gusk@altrec.com] 
Sent: Wednesday, February 22, 2006 11:28 AM
To: java-user@lucene.apache.org
Subject: IndexSearcher

Maybe too general a question, but is there anything about creating an
IndexSearcher( directory) object that would make the instantiation
really
slow?


I have one index where the instantiation is very fast, to the point
where I
don't need to do any pooling.  A new index I have created, takes a very
long
time to create the IndexSearcher object.  With a 30mb index, it can take
about 30 seconds just to instantiate an IndexSearcher().  It almost
seems
like it is reading the index at that point.


The only difference between the indexes has been the # of fields
indexed.
The newer one only having one field indexed.

Any ways to speed up that instantiation? Or do I have to use a pooling
system?

Thanks for any suggestions,
-Gus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 18:48:21 2006
Return-Path: <java-user-return-19111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62270 invoked from network); 22 Feb 2006 18:48:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 18:48:20 -0000
Received: (qmail 66224 invoked by uid 500); 22 Feb 2006 18:48:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66188 invoked by uid 500); 22 Feb 2006 18:48:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66162 invoked by uid 99); 22 Feb 2006 18:48:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 10:48:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 10:48:03 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1MIlZ67015408
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 19:47:35 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [267.15.12/265]); Wed, 22 Feb 2006 19:46:43 +0100
Message-ID: <43FCB193.2070300@isb-sib.ch>
Date: Wed, 22 Feb 2006 19:46:43 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boolean Precedence
References: <43FB1869.4050805@isb-sib.ch> <43FB9210.4050809@nuix.com.au> <43FB968E.1060703@isb-sib.ch> <6DD792A3-7CEA-4CF3-8AD4-C3CDF87B6E0E@ehatchersolutions.com>
In-Reply-To: <6DD792A3-7CEA-4CF3-8AD4-C3CDF87B6E0E@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> I worked on it to a point, but I don't recall what open issues there 
> were when I left it though they were fiddly.  The test case may point 
> you in the right direction:
> 
>     <http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/miscellaneous/src/test/org/apache/lucene/queryParser/precedence/TestPrecedenceQueryParser.java?view=markup> 

Didn't run these tests (maybe later, too lazy to set up the build 
environment at the moment), but I just swapped in the 
PrecedenceQueryParser, and all looks fine, and my (admittedly somewhat 
anemic) test suite doesn't detect any problems. I therefore assume that if 
there are any issues they are most likely less annoying and confusing than 
the weird boolean logic used by the default query parser...

In any case, thanks a lot for this code!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 19:52:06 2006
Return-Path: <java-user-return-19112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4061 invoked from network); 22 Feb 2006 19:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 19:52:06 -0000
Received: (qmail 86884 invoked by uid 500); 22 Feb 2006 19:52:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86847 invoked by uid 500); 22 Feb 2006 19:52:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86836 invoked by uid 99); 22 Feb 2006 19:52:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 11:52:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 11:51:59 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexSearcher
Date: Wed, 22 Feb 2006 13:50:31 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B291989DF@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexSearcher
Thread-Index: AcY333UpiWe9eyAgTeGQGvQDVy7YPQACaLhg
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I guess what I meant was to have all your servlets use the same
instance.  They could get it from the class or from a parent of all your
servlets.   Then you can let the indexsearcher take care of all the
search requests.

-----Original Message-----
From: Gus Kormeier [mailto:gusk@altrec.com]=20
Sent: Wednesday, February 22, 2006 12:42 PM
To: 'java-user@lucene.apache.org'
Subject: RE: IndexSearcher

It's in a servlet, so one work around I have been going with is to just
open
it at init().  That gives me some threading concerns.

And I didn't have to do that in the past,
-Gus

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]
Sent: Wednesday, February 22, 2006 9:35 AM
To: java-user@lucene.apache.org
Subject: RE: IndexSearcher


This doesn't really address your question, but...

Once you have the single indexsearcher, do you need any others?   Could
your app just use the single instance? =20

-----Original Message-----
From: Gus Kormeier [mailto:gusk@altrec.com]=20
Sent: Wednesday, February 22, 2006 11:28 AM
To: java-user@lucene.apache.org
Subject: IndexSearcher

Maybe too general a question, but is there anything about creating an
IndexSearcher( directory) object that would make the instantiation
really
slow?


I have one index where the instantiation is very fast, to the point
where I
don't need to do any pooling.  A new index I have created, takes a very
long
time to create the IndexSearcher object.  With a 30mb index, it can take
about 30 seconds just to instantiate an IndexSearcher().  It almost
seems
like it is reading the index at that point.


The only difference between the indexes has been the # of fields
indexed.
The newer one only having one field indexed.

Any ways to speed up that instantiation? Or do I have to use a pooling
system?

Thanks for any suggestions,
-Gus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 20:06:21 2006
Return-Path: <java-user-return-19113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14372 invoked from network); 22 Feb 2006 20:06:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:06:20 -0000
Received: (qmail 22489 invoked by uid 500); 22 Feb 2006 20:06:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22455 invoked by uid 500); 22 Feb 2006 20:06:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22444 invoked by uid 99); 22 Feb 2006 20:06:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:06:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.196 as permitted sender)
Received: from [64.233.184.196] (HELO wproxy.gmail.com) (64.233.184.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:06:11 -0800
Received: by wproxy.gmail.com with SMTP id i31so1442144wra
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 12:05:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rzhJ9G9Z58Eu9PXFaa2TifER8pzzDaWpaM6evtecr+CRlRhr5qIWLScp9KrWu+LWNJag22/GHWTw5/vi/ZE9Gy0HRydvPeWCSHXlzCWykSBnez+MqBJ/o5Rs3oFo/j8sHg/JQr35xwysVzJgBxv89APTc0lvZFFa363YCR55CWs=
Received: by 10.54.110.20 with SMTP id i20mr1916913wrc;
        Wed, 22 Feb 2006 11:50:26 -0800 (PST)
Received: by 10.54.123.8 with HTTP; Wed, 22 Feb 2006 11:52:21 -0800 (PST)
Message-ID: <e994873a0602221152q1bad1e52gdeb3477611d31916@mail.gmail.com>
Date: Wed, 22 Feb 2006 14:52:21 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <e994873a0601300615p5f46dab6qfb4b4504bfb2bd7f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_871_9515906.1140637941351"
References: <GJEMKBFALLAJKLGINBHHKEHAKOAA.jbooth@net-temps.com>
	 <43820731.5000806@apache.org>
	 <fb9748c90601260043m3ed5e7fbh78ac7e23947a488f@mail.gmail.com>
	 <e994873a0601260756o58fb3b1ap3aa87df6de1ac0d7@mail.gmail.com>
	 <43D92935.1000809@apache.org> <43D92A28.6050501@apache.org>
	 <e994873a0601261320r753d864cwcb37b72e54539d09@mail.gmail.com>
	 <43DD6821.8020302@nuix.com.au>
	 <e994873a0601300615p5f46dab6qfb4b4504bfb2bd7f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_871_9515906.1140637941351
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I am doing a performance comparison of Lucene on Linux vs Windows.

I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
processors, 64GB RAM). One is running CentOS 4 Linux, the other is running
Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs from Sun.
The Lucene server is using MMapDirectory. I'm running the jvm with
-Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and 7.8GB on
windows.

I'm observing query rates of 330 queries/sec on the Wintel server, but only
200 qps on the Linux box. At first, I suspected a network bottleneck, but
when I 'short-circuited' Lucene, the query rates were identical.

I suspect that there are some things to be tuned in Linux, but I'm not sure
what. Any advice would be appreciated.

Peter



On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> I cranked up the dial on my query tester and was able to get the rate up
> to 325 qps. Unfortunately, the machine died shortly thereafter (memory
> errors :-( ) Hopefully, it was just a coincidence. I haven't measured 64-=
bit
> indexing speed, yet.
>
> Peter
>
> On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> >
> > Peter Keegan wrote:
> > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and I'm now
> > > getting 250 queries/sec and excellent cpu utilization (equal
> > concurrency on
> > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. I wasn't
> > aware
> > > of it.
> > >
> > Wow.  That's fast.
> >
> > Out of interest, does indexing time speed up much on 64-bit hardware?
> > I'm particularly interested in this side of things because for our own
> > application, any query response under half a second is good enough, but
> > the indexing side could always be faster. :-)
> >
> > Daniel
> >
> > --
> > Daniel Noll
> >
> > Nuix Australia Pty Ltd
> > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > Phone: (02) 9280 0699
> > Fax:   (02) 9212 6902
> >
> > This message is intended only for the named recipient. If you are not
> > the intended recipient you are notified that disclosing, copying,
> > distributing or taking any action in reliance on the contents of this
> > message or attachment is strictly prohibited.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_871_9515906.1140637941351--

From java-user-return-19114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 20:18:59 2006
Return-Path: <java-user-return-19114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23547 invoked from network); 22 Feb 2006 20:18:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 20:18:58 -0000
Received: (qmail 48364 invoked by uid 500); 22 Feb 2006 20:18:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48337 invoked by uid 500); 22 Feb 2006 20:18:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48319 invoked by uid 99); 22 Feb 2006 20:18:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:18:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.198 as permitted sender)
Received: from [64.233.182.198] (HELO nproxy.gmail.com) (64.233.182.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 12:18:51 -0800
Received: by nproxy.gmail.com with SMTP id x4so1072294nfb
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 12:18:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=B95sXfi8tbY/8xZBE0tkwi5uID0QQStcAkyUGJPWmO64pQbIEoH89TTmA7tR61pF1AfgsmCiVu2T71UsiI0nbWHbPpAH9TydRFma2pQ74WYa6ACyz/doeo2UpMvLWCiveBl1wE4kq9fHTiLV5bNoojPlKd4JWKcM3OUYCGEQhLI=
Received: by 10.49.10.15 with SMTP id n15mr1744521nfi;
        Wed, 22 Feb 2006 12:18:26 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Wed, 22 Feb 2006 12:18:26 -0800 (PST)
Message-ID: <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
Date: Wed, 22 Feb 2006 15:18:26 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <e994873a0602221152q1bad1e52gdeb3477611d31916@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <GJEMKBFALLAJKLGINBHHKEHAKOAA.jbooth@net-temps.com>
	 <43820731.5000806@apache.org>
	 <fb9748c90601260043m3ed5e7fbh78ac7e23947a488f@mail.gmail.com>
	 <e994873a0601260756o58fb3b1ap3aa87df6de1ac0d7@mail.gmail.com>
	 <43D92935.1000809@apache.org> <43D92A28.6050501@apache.org>
	 <e994873a0601261320r753d864cwcb37b72e54539d09@mail.gmail.com>
	 <43DD6821.8020302@nuix.com.au>
	 <e994873a0601300615p5f46dab6qfb4b4504bfb2bd7f@mail.gmail.com>
	 <e994873a0602221152q1bad1e52gdeb3477611d31916@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hmmm, not sure what that could be.
You could try using the default FSDir instead of MMapDir to see if the
differences are there.

Some things that could be different:
- thread scheduling (shouldn't make too much of a difference though)
- synchronization workings
- page replacement policy... how to figure out what pages to swap in
and which to swap out, esp of the memory mapped files.

You could also try a profiler on both platforms to try and see where
the difference is.

-Yonik

On 2/22/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> I am doing a performance comparison of Lucene on Linux vs Windows.
>
> I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
> processors, 64GB RAM). One is running CentOS 4 Linux, the other is runnin=
g
> Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs from Su=
n.
> The Lucene server is using MMapDirectory. I'm running the jvm with
> -Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and 7.8GB =
on
> windows.
>
> I'm observing query rates of 330 queries/sec on the Wintel server, but on=
ly
> 200 qps on the Linux box. At first, I suspected a network bottleneck, but
> when I 'short-circuited' Lucene, the query rates were identical.
>
> I suspect that there are some things to be tuned in Linux, but I'm not su=
re
> what. Any advice would be appreciated.
>
> Peter
>
>
>
> On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > I cranked up the dial on my query tester and was able to get the rate u=
p
> > to 325 qps. Unfortunately, the machine died shortly thereafter (memory
> > errors :-( ) Hopefully, it was just a coincidence. I haven't measured 6=
4-bit
> > indexing speed, yet.
> >
> > Peter
> >
> > On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> > >
> > > Peter Keegan wrote:
> > > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and I'm n=
ow
> > > > getting 250 queries/sec and excellent cpu utilization (equal
> > > concurrency on
> > > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. I wasn=
't
> > > aware
> > > > of it.
> > > >
> > > Wow.  That's fast.
> > >
> > > Out of interest, does indexing time speed up much on 64-bit hardware?
> > > I'm particularly interested in this side of things because for our ow=
n
> > > application, any query response under half a second is good enough, b=
ut
> > > the indexing side could always be faster. :-)
> > >
> > > Daniel
> > >
> > > --
> > > Daniel Noll
> > >
> > > Nuix Australia Pty Ltd
> > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > > Phone: (02) 9280 0699
> > > Fax:   (02) 9212 6902
> > >
> > > This message is intended only for the named recipient. If you are not
> > > the intended recipient you are notified that disclosing, copying,
> > > distributing or taking any action in reliance on the contents of this
> > > message or attachment is strictly prohibited.
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 21:11:16 2006
Return-Path: <java-user-return-19115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83529 invoked from network); 22 Feb 2006 21:11:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 21:11:16 -0000
Received: (qmail 56652 invoked by uid 500); 22 Feb 2006 21:11:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56629 invoked by uid 500); 22 Feb 2006 21:11:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56618 invoked by uid 99); 22 Feb 2006 21:11:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 13:11:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 13:11:08 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 088C033C06D; Wed, 22 Feb 2006 16:10:48 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E52FA33C068
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 16:10:46 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43FBD86E.4010604@eastlink.ca>
References: <43FBD86E.4010604@eastlink.ca>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <757A8791-747A-47C7-AE45-6BBFA2D14717@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searching/sorting strategy for many properties for semantic web app
Date: Wed, 22 Feb 2006 16:10:43 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

One very nice implementation to take a look at is the Simile project  
at MIT.   The Piggy Bank and Longwell projects use Lucene to index  
RDF and integrate full-text and structural queries nicely together.    
http://simile.mit.edu

	Erik

On Feb 21, 2006, at 10:20 PM, David Pratt wrote:

> Hi there. I am new to Lucene and I have been developing a semantic  
> application for a while and it appears to me Lucene could help me  
> to get a much needed search with reasonable speed. I have some  
> general question to start:
>
> 1) Since my app is virtually all metadata, what should I store in  
> the indexes if anything?
> 2) Should I only index the most common properties that people will  
> search and combine the rest (and index this combined text as a field)?
> 3) I would like to sort and filter results but am concerned this  
> could be very memory intensive
> 4) Some general guidance on organizing indexes in an app would be  
> appreciated.
>
> My schema is fairly large but I generally expect people to search  
> on about 6 to 8 properties for the most part. I have the data  
> stored in an sql database but not in a conventional way. I am  
> willing to accept a slower advanced search on less common  
> properties (accomodating this with sql search) but I really want  
> some speed for the main properties with full text search.
>
> Pretty much everything in the app is metadata so I am most  
> interested in  focussing on the 6-8 properties that people will use  
> to search on for the most part. I am thinking of combining the text  
> of the remaining properties (quite a number) into a single  
> description type field so that essentially all information gets  
> indexed and ranked. Is this a reasonable approach?
>
> I see that there are advanced possibilities with the indexes to  
> sort and filter. How advisable is using sort for large record sets.  
> For example, say you have got 20000 records returned from your  
> search. Because this will have a web interface I will only be  
> showing first 20 likely so I will be batching results. Is the  
> sorting filtering highly memory intensive?
>
> Hopefully, someone can provide some initial advice. Many thanks.
>
> Regards,
> David
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 21:18:46 2006
Return-Path: <java-user-return-19116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88988 invoked from network); 22 Feb 2006 21:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 21:18:44 -0000
Received: (qmail 80548 invoked by uid 500); 22 Feb 2006 21:18:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80516 invoked by uid 500); 22 Feb 2006 21:18:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80504 invoked by uid 99); 22 Feb 2006 21:18:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 13:18:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 13:18:36 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 79EA233C068; Wed, 22 Feb 2006 16:18:16 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3479633C068
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 16:18:13 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <25039D8626986D42820764CF3C2AB791032FED@00-emerald.kbsi-cs.com>
References: <25039D8626986D42820764CF3C2AB791032FED@00-emerald.kbsi-cs.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AFFE4924-6A44-45F3-A1C9-21613E5E47E5@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search a subdirectory (New to Lucene)
Date: Wed, 22 Feb 2006 16:18:10 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I presume by saying "subdirectory" you're referring to filesystem  
directories and you're indexing a directory tree of files.   If you  
index the path (perhaps relative from the root is best) as a keyword  
field (untokenized, but indexed) you could perform filtering on a / 
path/subpath sort of way using PrefixQuery.

As for paragraphs - how you index a "document" is entirely  
application dependent.  Maybe it makes sense to parse the documents  
before handing them to Lucene such that you're creating a Lucene  
Document for each paragraph rather than for each entire file.   
Slicing the granularity of a domain into Documents is a fascinating  
topic :)

	Erik


On Feb 22, 2006, at 1:00 PM, John Hamilton wrote:

> I'm new to Lucene and was wondering what is the best way to perform  
> a search on a subdirectory or subdirectories within the index?  My  
> thought at this point is to build a query to first search for files  
> in the required directory(ies) and then use that query to make a  
> QueryFilter and use that QueryFilter in the actual search.  Is  
> there an easier way?
>
> On an unrelated note, does anybody know of a way to get results a  
> the section level within a document?  For example, could I find not  
> just a document that matches my query, but the paragraph within  
> that document that best matches the query?
>
> thanks,
>
> John


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 21:47:06 2006
Return-Path: <java-user-return-19117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20300 invoked from network); 22 Feb 2006 21:47:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 21:47:05 -0000
Received: (qmail 52906 invoked by uid 500); 22 Feb 2006 21:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52884 invoked by uid 500); 22 Feb 2006 21:46:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52872 invoked by uid 99); 22 Feb 2006 21:46:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 13:46:58 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Feb 2006 13:46:58 -0800
Received: (qmail 83400 invoked by uid 60001); 22 Feb 2006 21:46:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=aP68cplZqUuExQ7AqWcr/cTz4pULQNflzcjnJMYjKiO5nxXZ+HNUzuW7kVxEk7tm8YjLwLlwiiTA9CgZVNTJXXtRlm1WbYqdTSswx1MM44voz60cX5UiSkZsxN0R6U3piLvk+ofRC/rCxZebLJq+pUhKWXx9a5i/Y6Gssu/tiOI=  ;
Message-ID: <20060222214635.83398.qmail@web50310.mail.yahoo.com>
Date: Wed, 22 Feb 2006 13:46:35 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Throughput doesn't increase when using more concurrent threads
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Some things that could be different:
- thread scheduling (shouldn't make too much of a difference though)

--- I would also play with disk IO schedulers, if you can.  CentOS is based on RedHat, I believe, and RedHat (ext3, really) now has about 4 different IO schedulers that, according to articles I recently read, can have an impact on disk read/write performance.  These schedules can be specified at mount time, I believe, and maybe at boot time (kernel line in Grub/LILO).

Otis


On 2/22/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> I am doing a performance comparison of Lucene on Linux vs Windows.
>
> I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
> processors, 64GB RAM). One is running CentOS 4 Linux, the other is running
> Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs from Sun.
> The Lucene server is using MMapDirectory. I'm running the jvm with
> -Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and 7.8GB on
> windows.
>
> I'm observing query rates of 330 queries/sec on the Wintel server, but only
> 200 qps on the Linux box. At first, I suspected a network bottleneck, but
> when I 'short-circuited' Lucene, the query rates were identical.
>
> I suspect that there are some things to be tuned in Linux, but I'm not sure
> what. Any advice would be appreciated.
>
> Peter
>
>
>
> On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > I cranked up the dial on my query tester and was able to get the rate up
> > to 325 qps. Unfortunately, the machine died shortly thereafter (memory
> > errors :-( ) Hopefully, it was just a coincidence. I haven't measured 64-bit
> > indexing speed, yet.
> >
> > Peter
> >
> > On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> > >
> > > Peter Keegan wrote:
> > > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and I'm now
> > > > getting 250 queries/sec and excellent cpu utilization (equal
> > > concurrency on
> > > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. I wasn't
> > > aware
> > > > of it.
> > > >
> > > Wow.  That's fast.
> > >
> > > Out of interest, does indexing time speed up much on 64-bit hardware?
> > > I'm particularly interested in this side of things because for our own
> > > application, any query response under half a second is good enough, but
> > > the indexing side could always be faster. :-)
> > >
> > > Daniel
> > >
> > > --
> > > Daniel Noll
> > >
> > > Nuix Australia Pty Ltd
> > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > > Phone: (02) 9280 0699
> > > Fax:   (02) 9212 6902
> > >
> > > This message is intended only for the named recipient. If you are not
> > > the intended recipient you are notified that disclosing, copying,
> > > distributing or taking any action in reliance on the contents of this
> > > message or attachment is strictly prohibited.
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 22 22:36:37 2006
Return-Path: <java-user-return-19118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59146 invoked from network); 22 Feb 2006 22:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Feb 2006 22:36:36 -0000
Received: (qmail 73180 invoked by uid 500); 22 Feb 2006 22:36:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73001 invoked by uid 500); 22 Feb 2006 22:36:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72987 invoked by uid 99); 22 Feb 2006 22:36:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 14:36:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 14:36:29 -0800
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net [207.115.4.22])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k1MMa43W002331
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 17:36:06 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net [69.228.231.148])
	by pimout6-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id k1MMZwOL092132;
	Wed, 22 Feb 2006 17:36:02 -0500
Message-ID: <43FCE74D.4060400@apache.org>
Date: Wed, 22 Feb 2006 14:35:57 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene 1.9 RC1 release available
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Release 1.9 RC1 of Lucene is now available from:

http://www.apache.org/dyn/closer.cgi/lucene/java/

This release candidate has many improvements since release 1.4.3,
including new features, performance improvements, bug fixes, etc.  For
details, see:

http://svn.apache.org/viewcvs.cgi/*checkout*/lucene/java/branches/lucene_1_9/CHANGES.txt?rev=379190

1.9 will be the last 1.x release. It is both back-compatible with 1.4.3
and forward-compatible with the upcoming 2.0 release. Many methods and
classes in 1.4.3 have been deprecated in 1.9 and will be removed in 2.0.
  Applications must compile against 1.9 without deprecation warnings
before they are compatible with 2.0.

Doug


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 00:02:53 2006
Return-Path: <java-user-return-19119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6277 invoked from network); 23 Feb 2006 00:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 00:02:53 -0000
Received: (qmail 38600 invoked by uid 500); 23 Feb 2006 00:02:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38544 invoked by uid 500); 23 Feb 2006 00:02:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38533 invoked by uid 99); 23 Feb 2006 00:02:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 16:02:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 16:02:46 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id ABAF05B776; Wed, 22 Feb 2006 16:02:15 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 23BC37F403
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 16:02:15 -0800 (PST)
Date: Wed, 22 Feb 2006 16:02:14 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher
In-Reply-To: <55903574BD75D311B8A0009027CCC22B0529DC9C@DENALI>
Message-ID: <Pine.LNX.4.58.0602221555580.9833@hal.rescomp.berkeley.edu>
References: <55903574BD75D311B8A0009027CCC22B0529DC9C@DENALI>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I have one index where the instantiation is very fast, to the point where I
: don't need to do any pooling.  A new index I have created, takes a very long
: time to create the IndexSearcher object.  With a 30mb index, it can take
: about 30 seconds just to instantiate an IndexSearcher().  It almost seems
: like it is reading the index at that point.
:
:
: The only difference between the indexes has been the # of fields indexed.
: The newer one only having one field indexed.

If i remember correctly, The IndexSearcher constructor doesn't do anything
but open an IndexReader ... IndexReader.open() opens a MultiReader on all
of the segments, and each of the SegmentReaders open up a bunch of files.

so off hte top of my head, one thing that can make a differnece in the
"new IndexSearcher" times, is how many segments you have in your index
(ie: is it optimized?) ... using the compound fileformat can probably make
a difference as well.

: Any ways to speed up that instantiation? Or do I have to use a pooling
: system?

Even if you get it down to 0.00001 seconds,i would still reuse the same
IndexSearcher as much as possible.  See previous replies from me in
the archive about memory for my reasoning.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 00:57:32 2006
Return-Path: <java-user-return-19120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31933 invoked from network); 23 Feb 2006 00:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 00:57:32 -0000
Received: (qmail 10090 invoked by uid 500); 23 Feb 2006 00:57:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10058 invoked by uid 500); 23 Feb 2006 00:57:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10047 invoked by uid 99); 23 Feb 2006 00:57:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 16:57:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gusk@altrec.com designates 63.251.175.92 as permitted sender)
Received: from [63.251.175.92] (HELO mta.altrec.com) (63.251.175.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 16:57:26 -0800
Received: from localhost (mta.altrec.com [127.0.0.1])
	by mta.altrec.com (Postfix) with ESMTP id 851077BB9C
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 16:56:56 -0800 (PST)
Received: from mta.altrec.com ([127.0.0.1])
 by localhost (mta.altrec.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 31306-04 for <java-user@lucene.apache.org>;
 Wed, 22 Feb 2006 16:56:55 -0800 (PST)
Received: from denali.altrec.com (arachne.altrec.com [63.251.175.11])
	by mta.altrec.com (Postfix) with ESMTP id E7D127BB20
	for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 16:56:54 -0800 (PST)
Received: by DENALI with Internet Mail Service (5.5.2656.59)
	id <WF7DX7X4>; Wed, 22 Feb 2006 16:58:14 -0800
Message-ID: <55903574BD75D311B8A0009027CCC22B0529DCB2@DENALI>
From: Gus Kormeier <gusk@altrec.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: IndexSearcher
Date: Wed, 22 Feb 2006 16:58:14 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Hoss,
	I did figure out that I was putting about 400 stored fields per
document into my new index; more than my prior indexes. 
Reducing the number of stored fields seems to have helped significantly.

I do call writer.optimize() after loading in documents, but not sure how I
would set the # of segments?
I think I will keep the IndexSearcher statically for all instances. The slow
times I was seeing, weren't even sufficient for that though.

Since this is a case of really only needing to search on one field and use
the index as a storage medium for the rest of the data(pretty much textual
data), I'm thinking it would make sense to get the latest version of lucene
and create a two field index.
Something like:
Field1: id
Field2: serialized data object.

Any reason why that wouldn't be fast?

I have been having elusive memory issues with my other usage, maybe you just
helped me find that solution as well.
Thanks,
-Gus

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: Wednesday, February 22, 2006 4:02 PM
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher


: I have one index where the instantiation is very fast, to the point where
I
: don't need to do any pooling.  A new index I have created, takes a very
long
: time to create the IndexSearcher object.  With a 30mb index, it can take
: about 30 seconds just to instantiate an IndexSearcher().  It almost seems
: like it is reading the index at that point.
:
:
: The only difference between the indexes has been the # of fields indexed.
: The newer one only having one field indexed.

If i remember correctly, The IndexSearcher constructor doesn't do anything
but open an IndexReader ... IndexReader.open() opens a MultiReader on all
of the segments, and each of the SegmentReaders open up a bunch of files.

so off hte top of my head, one thing that can make a differnece in the
"new IndexSearcher" times, is how many segments you have in your index
(ie: is it optimized?) ... using the compound fileformat can probably make
a difference as well.

: Any ways to speed up that instantiation? Or do I have to use a pooling
: system?

Even if you get it down to 0.00001 seconds,i would still reuse the same
IndexSearcher as much as possible.  See previous replies from me in
the archive about memory for my reasoning.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 00:58:31 2006
Return-Path: <java-user-return-19121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32338 invoked from network); 23 Feb 2006 00:58:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 00:58:31 -0000
Received: (qmail 12119 invoked by uid 500); 23 Feb 2006 00:58:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12078 invoked by uid 500); 23 Feb 2006 00:58:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12065 invoked by uid 99); 23 Feb 2006 00:58:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 16:58:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 16:58:24 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B718EB735C
	for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 11:57:59 +1100 (EST)
Message-ID: <43FD0887.1080205@nuix.com.au>
Date: Thu, 23 Feb 2006 11:57:43 +1100
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How can I get a term's frequency?
References: <006e01c63769$6c6f6010$1f00a8c0@baihui> <43FBF464.6010201@nuix.com.au> <000a01c6378a$8bec1fc0$1f00a8c0@baihui>
In-Reply-To: <000a01c6378a$8bec1fc0$1f00a8c0@baihui>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

sog wrote:
> en, but IndexReader.getTermFreqVector is an abstract method, I do not 
> know how to implement it in an efficient way. Anyone has good advise?

You probably don't need to implement it, it's been implemented already.
 Just call the method.

> I can do it in this way:
> 
> QueryTermVector vector= new QueryTermVector(Document.getValues(field));
> freq = result.getTermFrequencies();

I'm not sure because I've never used QueryTermVector before, but the
fact that QueryTermVector doesn't take an IndexReader as a parameter is
a good indication that it can't tell you anything about the frequency of
the term in your documents.

Daniel




-- 
Daniel Noll

Nuix Australia Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
Phone: (02) 9280 0699
Fax:   (02) 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 02:02:08 2006
Return-Path: <java-user-return-19122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70506 invoked from network); 23 Feb 2006 02:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 02:02:08 -0000
Received: (qmail 60426 invoked by uid 500); 23 Feb 2006 02:02:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60390 invoked by uid 500); 23 Feb 2006 02:02:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60379 invoked by uid 99); 23 Feb 2006 02:02:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:02:03 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fairwinds@eastlink.ca designates 24.222.0.30 as permitted sender)
Received: from [24.222.0.30] (HELO smtpout.eastlink.ca) (24.222.0.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:02:01 -0800
Received: from ip04.eastlink.ca ([24.222.10.20])
 by mta01.eastlink.ca (Sun Java System Messaging Server 6.2-4.03 (built Sep 22
 2005)) with ESMTP id <0IV40035IAZERPA2@mta01.eastlink.ca> for
 java-user@lucene.apache.org; Wed, 22 Feb 2006 22:02:03 -0400 (AST)
Received: from blk-224-224-216.eastlink.ca (HELO [192.168.1.200])
 ([24.224.224.216]) by ip04.eastlink.ca with ESMTP; Wed,
 22 Feb 2006 22:01:39 -0400
Date: Wed, 22 Feb 2006 22:01:38 -0400
From: David Pratt <fairwinds@eastlink.ca>
Subject: Re: Searching/sorting strategy for many properties for semantic web app
In-reply-to: <757A8791-747A-47C7-AE45-6BBFA2D14717@ehatchersolutions.com>
To: java-user@lucene.apache.org
Message-id: <43FD1782.7040805@eastlink.ca>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAQAAA+k=
References: <43FBD86E.4010604@eastlink.ca>
 <757A8791-747A-47C7-AE45-6BBFA2D14717@ehatchersolutions.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Macintosh/20050923)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik. Many thanks for your reply. I'll likely see if I can find a 
list to pose a couple of questions there way. I am having fun with 
Lucene since it is new to me and I am impressed with the speed I am 
getting. I am reading anything I can get hold of and trying different 
code experiments. So far, the code is fairly straight forward so not so 
concerned about this at the moment.

I am really hoping to hear from experienced people like yourself more on 
strategically what to index, what sort of things it would be a good idea 
to store and what to do about a fairly large schema that has much 
metadata to offer. Also perhaps when sorting and filtering gets too 
expensive. I realize that just because the metadata is available doesn't 
necessarily mean you want to even put it all in an index. I think these 
issues are pretty general, however I know there are folks on this that 
would likely advise some particular path or direction because of their 
own experiences with Lucene. I would really like to hear from anyone 
that has been working with metadata particularly or anyone generally 
about these topics.

Regards,
David


Erik Hatcher wrote:
> One very nice implementation to take a look at is the Simile project  at 
> MIT.   The Piggy Bank and Longwell projects use Lucene to index  RDF and 
> integrate full-text and structural queries nicely together.    
> http://simile.mit.edu
> 
>     Erik
> 
> On Feb 21, 2006, at 10:20 PM, David Pratt wrote:
> 
>> Hi there. I am new to Lucene and I have been developing a semantic  
>> application for a while and it appears to me Lucene could help me  to 
>> get a much needed search with reasonable speed. I have some  general 
>> question to start:
>>
>> 1) Since my app is virtually all metadata, what should I store in  the 
>> indexes if anything?
>> 2) Should I only index the most common properties that people will  
>> search and combine the rest (and index this combined text as a field)?
>> 3) I would like to sort and filter results but am concerned this  
>> could be very memory intensive
>> 4) Some general guidance on organizing indexes in an app would be  
>> appreciated.
>>
>> My schema is fairly large but I generally expect people to search  on 
>> about 6 to 8 properties for the most part. I have the data  stored in 
>> an sql database but not in a conventional way. I am  willing to accept 
>> a slower advanced search on less common  properties (accomodating this 
>> with sql search) but I really want  some speed for the main properties 
>> with full text search.
>>
>> Pretty much everything in the app is metadata so I am most  interested 
>> in  focussing on the 6-8 properties that people will use  to search on 
>> for the most part. I am thinking of combining the text  of the 
>> remaining properties (quite a number) into a single  description type 
>> field so that essentially all information gets  indexed and ranked. Is 
>> this a reasonable approach?
>>
>> I see that there are advanced possibilities with the indexes to  sort 
>> and filter. How advisable is using sort for large record sets.  For 
>> example, say you have got 20000 records returned from your  search. 
>> Because this will have a web interface I will only be  showing first 
>> 20 likely so I will be batching results. Is the  sorting filtering 
>> highly memory intensive?
>>
>> Hopefully, someone can provide some initial advice. Many thanks.
>>
>> Regards,
>> David
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 02:20:38 2006
Return-Path: <java-user-return-19123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79077 invoked from network); 23 Feb 2006 02:20:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 02:20:37 -0000
Received: (qmail 81248 invoked by uid 500); 23 Feb 2006 02:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81212 invoked by uid 500); 23 Feb 2006 02:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81201 invoked by uid 99); 23 Feb 2006 02:20:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:20:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 18:20:30 -0800
Received: by wproxy.gmail.com with SMTP id i7so274758wra
        for <java-user@lucene.apache.org>; Wed, 22 Feb 2006 18:20:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=E10xCUmTkUnU7ygKI6Lhj098c+sv0s/ESz2AyaHwK5JZ+1p4b0zjFBqfKAa7lUInRKvHst+qeDuhE+GFlRdiM8eqoChdyeF8cTact8mBcZNPdIjrKDM2MUFiRtSUviTZ8ArRT9p7IokaDmtCkLm/LY1l3dKDcDD7wthCUPoaguY=
Received: by 10.54.81.15 with SMTP id e15mr252327wrb;
        Wed, 22 Feb 2006 18:20:10 -0800 (PST)
Received: by 10.54.156.11 with HTTP; Wed, 22 Feb 2006 18:20:10 -0800 (PST)
Message-ID: <901c03930602221820s4456b6fcncddb44fd1d52be42@mail.gmail.com>
Date: Thu, 23 Feb 2006 10:20:10 +0800
From: "Dave Kor" <davekor@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TREC,INEX and Lucene
In-Reply-To: <00c601c637c0$43eb2410$0201a8c0@MALCOLM>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <F9E303076B72074AB76B2C8F78952B2919891B@bettylou.configureone.net>
	 <43FB5591.3020304@allegromedical.com>
	 <00c601c637c0$43eb2410$0201a8c0@MALCOLM>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Malcom, I've used Lucene in TREC last year in my QA list module, as
have many of my contempories.

On 2/22/06, Malcolm Clark <malcyclark@btinternet.com> wrote:
> Hi all,
> I am planning on participating in the INEX and hopefully passively on a
> couple of TREC tracks mainly using the Lucene API.
> Is anyone else on this list planning on using Lucene during participation=
?
> I am particularly interested in the SPAM, Blog and ADHOC tracks.
> Malcolm Clark
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Dave Kor, Research Assistant
Center for Information Mining and Extraction
School of Computing
National University of Singapore.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 06:10:50 2006
Return-Path: <java-user-return-19124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75256 invoked from network); 23 Feb 2006 06:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 06:10:49 -0000
Received: (qmail 14117 invoked by uid 500); 23 Feb 2006 06:10:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13876 invoked by uid 500); 23 Feb 2006 06:10:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13858 invoked by uid 99); 23 Feb 2006 06:10:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 22:10:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Feb 2006 22:10:40 -0800
Received: from localhost [127.0.0.1]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Wed, 22 Feb 2006 23:10:18 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6383F.D1BE2F1F"
Subject: hyphen not being removed by standard filter
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Wed, 22 Feb 2006 23:10:17 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF3286740239D550@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: hyphen not being removed by standard filter
thread-index: AcY4P9G5PuUg1eW7Ru6tsjzeO8wXTA==
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6383F.D1BE2F1F
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I might be missing something. I have a custom analyzer the gist of which =
is:

	public TokenStream tokenStream(String fieldName, Reader reader)
	{
		TokenStream result =3D new StandardTokenizer(reader);
		result =3D new StandardFilter(result);
		result =3D new LowerCaseFilter(result);
		result =3D new StopFilter(result, stopSet);
		result =3D new PorterStemFilter(result);
		return result;
	}

I test my above analyzer with the following query string:
the is EOS-20D canon amazing

In my test code I do this  to see what my analyzed query string looks =
like:
       =20
	        PerFieldAnalyzerWrapper analyzer =3D new =
PerFieldAnalyzerWrapper(new StandardStemmingAnalyzer());
		analyzer.addAnalyzer("categoryNames", new KeywordAnalyzer());

		TokenStream stream =3D analyzer.tokenStream(null, new =
StringReader(queryString));
		String analyzedQueryString =3D "";
	=09
		while(true)
		{
			Token token =3D stream.next();
			if(token =3D=3D null)
			{
				break;
			}
	=09
			analyzedQueryString =3D analyzedQueryString + token.termText() + " ";
		}
	=09
		analyzedQueryString =3D analyzedQueryString.trim();

		log.debug("analyzedQueryString =3D " + analyzedQueryString);

The output of the log statement above is:

analyzedQueryString =3D eos-20d canon amaz

I see that the common stop words have been removed, everything has been =
lower cased and even the query has also been stemmed, why was the hyphen =
not removed by the standard filter??? Or does the standard analyzer =
remove hyphens only from phrases like "eos - 20d" and not from "eos-20d" =
?

Thanks.

------_=_NextPart_001_01C6383F.D1BE2F1F--

From java-user-return-19125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 08:32:10 2006
Return-Path: <java-user-return-19125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47432 invoked from network); 23 Feb 2006 08:32:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 08:32:09 -0000
Received: (qmail 20048 invoked by uid 500); 23 Feb 2006 08:32:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20025 invoked by uid 500); 23 Feb 2006 08:32:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20014 invoked by uid 99); 23 Feb 2006 08:32:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 00:32:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 00:32:01 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1N8VW67031937
	for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 09:31:33 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [268.0.0/267]); Thu, 23 Feb 2006 09:30:40 +0100
Message-ID: <43FD72B0.3050609@isb-sib.ch>
Date: Thu, 23 Feb 2006 09:30:40 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Frequency of phrase
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is somewhat related to a question sent to this list a while ago: Is 
there an efficient way to count the number of occurrences of a phrase (not 
term) in an index?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 13:36:28 2006
Return-Path: <java-user-return-19126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83483 invoked from network); 23 Feb 2006 13:36:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 13:36:27 -0000
Received: (qmail 50599 invoked by uid 500); 23 Feb 2006 13:36:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50552 invoked by uid 500); 23 Feb 2006 13:36:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50541 invoked by uid 99); 23 Feb 2006 13:36:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 05:36:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 05:36:20 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14F7F76A@mailer.syr.edu>; Thu, 23 Feb 2006 8:35:59 -0500
Message-ID: <43FDB9C5.9020703@syr.edu>
Date: Thu, 23 Feb 2006 08:33:57 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How can I get a term's frequency?
References: <006e01c63769$6c6f6010$1f00a8c0@baihui> <43FBF464.6010201@nuix.com.au> <000a01c6378a$8bec1fc0$1f00a8c0@baihui> <43FD0887.1080205@nuix.com.au>
In-Reply-To: <43FD0887.1080205@nuix.com.au>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You need to make sure you are indexing with Term Vectors in order for
IndexReader.getTermFreqVector to return anything meaningful. You do not
need to implement it.

QueryTermVector is meant to provide similar information to the Document
side for Queries.

For an example demo of indexing and using term vectors, go to
http://www.cnlp.org/apachecon2005. All the examples are under Apache
license and there is some documentation too.

-Grant

Daniel Noll wrote:
> sog wrote:
>   
>> en, but IndexReader.getTermFreqVector is an abstract method, I do not 
>> know how to implement it in an efficient way. Anyone has good advise?
>>     
>
> You probably don't need to implement it, it's been implemented already.
>  Just call the method.
>
>   
>> I can do it in this way:
>>
>> QueryTermVector vector= new QueryTermVector(Document.getValues(field));
>> freq = result.getTermFrequencies();
>>     
>
> I'm not sure because I've never used QueryTermVector before, but the
> fact that QueryTermVector doesn't take an IndexReader as a parameter is
> a good indication that it can't tell you anything about the frequency of
> the term in your documents.
>
> Daniel
>
>
>
>
>   

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 16:01:29 2006
Return-Path: <java-user-return-19127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97796 invoked from network); 23 Feb 2006 16:01:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 16:01:15 -0000
Received: (qmail 81920 invoked by uid 500); 23 Feb 2006 16:01:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81815 invoked by uid 500); 23 Feb 2006 16:01:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81635 invoked by uid 99); 23 Feb 2006 16:01:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 08:01:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.198 as permitted sender)
Received: from [64.233.184.198] (HELO wproxy.gmail.com) (64.233.184.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 08:01:00 -0800
Received: by wproxy.gmail.com with SMTP id 69so73991wra
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 08:00:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H/ze4/W6DmikuSEJWuIxVwZcvUzasJQMnqfmIFoulEL2NX9x/LHimPVWkfD+CYBMSE4YDzsdYS2294pmtNc3Bojw/VG6tx0RFzuaKqsJNWnRPPOrnjVndm/rl/MCQ/2IYWtj7HeOL0cKbAV6/z1H053I4DteL0hJgDyyQPif8YQ=
Received: by 10.54.92.1 with SMTP id p1mr376459wrb;
        Thu, 23 Feb 2006 08:00:39 -0800 (PST)
Received: by 10.54.123.8 with HTTP; Thu, 23 Feb 2006 08:00:39 -0800 (PST)
Message-ID: <e994873a0602230800l3d20c77ex31bb0140c7f74f7@mail.gmail.com>
Date: Thu, 23 Feb 2006 11:00:39 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <20060222214635.83398.qmail@web50310.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12204_15235412.1140710439077"
References: <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
	 <20060222214635.83398.qmail@web50310.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12204_15235412.1140710439077
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Otis,

The Lucene server is actually CPU and network bound, as the index gets
memory mapped pretty quickly. There is little disk activity observed.

I was also able to run the server on a Sun box last night with 4 dual core
opterons (same Linux and JVM) and I'm observing query rates of 400 qps! Has
Linux been optimized to run on this hardware? I imagine that Sun's JVM has
been.

Peter

On 2/22/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Hi,
>
> Some things that could be different:
> - thread scheduling (shouldn't make too much of a difference though)
>
> --- I would also play with disk IO schedulers, if you can.  CentOS is
> based on RedHat, I believe, and RedHat (ext3, really) now has about 4
> different IO schedulers that, according to articles I recently read, can
> have an impact on disk read/write performance.  These schedules can be
> specified at mount time, I believe, and maybe at boot time (kernel line i=
n
> Grub/LILO).
>
> Otis
>
>
> On 2/22/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > I am doing a performance comparison of Lucene on Linux vs Windows.
> >
> > I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
> > processors, 64GB RAM). One is running CentOS 4 Linux, the other is
> running
> > Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs from
> Sun.
> > The Lucene server is using MMapDirectory. I'm running the jvm with
> > -Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and 7.8G=
Bon
> > windows.
> >
> > I'm observing query rates of 330 queries/sec on the Wintel server, but
> only
> > 200 qps on the Linux box. At first, I suspected a network bottleneck,
> but
> > when I 'short-circuited' Lucene, the query rates were identical.
> >
> > I suspect that there are some things to be tuned in Linux, but I'm not
> sure
> > what. Any advice would be appreciated.
> >
> > Peter
> >
> >
> >
> > On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > >
> > > I cranked up the dial on my query tester and was able to get the rate
> up
> > > to 325 qps. Unfortunately, the machine died shortly thereafter (memor=
y
> > > errors :-( ) Hopefully, it was just a coincidence. I haven't measured
> 64-bit
> > > indexing speed, yet.
> > >
> > > Peter
> > >
> > > On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> > > >
> > > > Peter Keegan wrote:
> > > > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and I'm
> now
> > > > > getting 250 queries/sec and excellent cpu utilization (equal
> > > > concurrency on
> > > > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. I
> wasn't
> > > > aware
> > > > > of it.
> > > > >
> > > > Wow.  That's fast.
> > > >
> > > > Out of interest, does indexing time speed up much on 64-bit
> hardware?
> > > > I'm particularly interested in this side of things because for our
> own
> > > > application, any query response under half a second is good enough,
> but
> > > > the indexing side could always be faster. :-)
> > > >
> > > > Daniel
> > > >
> > > > --
> > > > Daniel Noll
> > > >
> > > > Nuix Australia Pty Ltd
> > > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > > > Phone: (02) 9280 0699
> > > > Fax:   (02) 9212 6902
> > > >
> > > > This message is intended only for the named recipient. If you are
> not
> > > > the intended recipient you are notified that disclosing, copying,
> > > > distributing or taking any action in reliance on the contents of
> this
> > > > message or attachment is strictly prohibited.
> > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12204_15235412.1140710439077--

From java-user-return-19128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 16:11:01 2006
Return-Path: <java-user-return-19128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3955 invoked from network); 23 Feb 2006 16:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 16:10:54 -0000
Received: (qmail 7420 invoked by uid 500); 23 Feb 2006 16:10:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7311 invoked by uid 500); 23 Feb 2006 16:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7218 invoked by uid 99); 23 Feb 2006 16:10:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 08:10:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrprabhu@gmail.com designates 64.233.182.204 as permitted sender)
Received: from [64.233.182.204] (HELO nproxy.gmail.com) (64.233.182.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 08:10:33 -0800
Received: by nproxy.gmail.com with SMTP id p48so57432nfa
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 08:10:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=joq33bM8Z5Ab2Mxq9PLPpG+LvwfAlD7skVDBCKnt/JrtlbijlpukmkmLtAx8VjHyjY4IdmEMxl1vtoS4dDMSyzuiTSJ8/gmIMSLFlnp9rk0KLExblsbdRow80C8Wt6VhVrijqrbo1N0TCeMJG4DKPCs9yfvvpf3XLViHcDVfIqI=
Received: by 10.49.35.10 with SMTP id n10mr2374680nfj;
        Thu, 23 Feb 2006 08:10:11 -0800 (PST)
Received: by 10.49.51.16 with HTTP; Thu, 23 Feb 2006 08:10:11 -0800 (PST)
Message-ID: <f13b62210602230810t7a9d24bbhe4c02c1c71b0827c@mail.gmail.com>
Date: Thu, 23 Feb 2006 21:40:11 +0530
From: "Raghavendra Prabhu" <rrprabhu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <e994873a0602230800l3d20c77ex31bb0140c7f74f7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16805_26940122.1140711011555"
References: <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
	 <20060222214635.83398.qmail@web50310.mail.yahoo.com>
	 <e994873a0602230800l3d20c77ex31bb0140c7f74f7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_16805_26940122.1140711011555
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Can nutch be made to use lucene query parser?

Rgds
Prabhu


On 2/23/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> Hi Otis,
>
> The Lucene server is actually CPU and network bound, as the index gets
> memory mapped pretty quickly. There is little disk activity observed.
>
> I was also able to run the server on a Sun box last night with 4 dual cor=
e
> opterons (same Linux and JVM) and I'm observing query rates of 400 qps!
> Has
> Linux been optimized to run on this hardware? I imagine that Sun's JVM ha=
s
> been.
>
> Peter
>
> On 2/22/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> >
> > Hi,
> >
> > Some things that could be different:
> > - thread scheduling (shouldn't make too much of a difference though)
> >
> > --- I would also play with disk IO schedulers, if you can.  CentOS is
> > based on RedHat, I believe, and RedHat (ext3, really) now has about 4
> > different IO schedulers that, according to articles I recently read, ca=
n
> > have an impact on disk read/write performance.  These schedules can be
> > specified at mount time, I believe, and maybe at boot time (kernel line
> in
> > Grub/LILO).
> >
> > Otis
> >
> >
> > On 2/22/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > I am doing a performance comparison of Lucene on Linux vs Windows.
> > >
> > > I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
> > > processors, 64GB RAM). One is running CentOS 4 Linux, the other is
> > running
> > > Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs fro=
m
> > Sun.
> > > The Lucene server is using MMapDirectory. I'm running the jvm with
> > > -Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and
> 7.8GBon
> > > windows.
> > >
> > > I'm observing query rates of 330 queries/sec on the Wintel server, bu=
t
> > only
> > > 200 qps on the Linux box. At first, I suspected a network bottleneck,
> > but
> > > when I 'short-circuited' Lucene, the query rates were identical.
> > >
> > > I suspect that there are some things to be tuned in Linux, but I'm no=
t
> > sure
> > > what. Any advice would be appreciated.
> > >
> > > Peter
> > >
> > >
> > >
> > > On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > >
> > > > I cranked up the dial on my query tester and was able to get the
> rate
> > up
> > > > to 325 qps. Unfortunately, the machine died shortly thereafter
> (memory
> > > > errors :-( ) Hopefully, it was just a coincidence. I haven't
> measured
> > 64-bit
> > > > indexing speed, yet.
> > > >
> > > > Peter
> > > >
> > > > On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> > > > >
> > > > > Peter Keegan wrote:
> > > > > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and
> I'm
> > now
> > > > > > getting 250 queries/sec and excellent cpu utilization (equal
> > > > > concurrency on
> > > > > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. I
> > wasn't
> > > > > aware
> > > > > > of it.
> > > > > >
> > > > > Wow.  That's fast.
> > > > >
> > > > > Out of interest, does indexing time speed up much on 64-bit
> > hardware?
> > > > > I'm particularly interested in this side of things because for ou=
r
> > own
> > > > > application, any query response under half a second is good
> enough,
> > but
> > > > > the indexing side could always be faster. :-)
> > > > >
> > > > > Daniel
> > > > >
> > > > > --
> > > > > Daniel Noll
> > > > >
> > > > > Nuix Australia Pty Ltd
> > > > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > > > > Phone: (02) 9280 0699
> > > > > Fax:   (02) 9212 6902
> > > > >
> > > > > This message is intended only for the named recipient. If you are
> > not
> > > > > the intended recipient you are notified that disclosing, copying,
> > > > > distributing or taking any action in reliance on the contents of
> > this
> > > > > message or attachment is strictly prohibited.
> > > > >
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_16805_26940122.1140711011555--

From java-user-return-19129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 16:11:45 2006
Return-Path: <java-user-return-19129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4518 invoked from network); 23 Feb 2006 16:11:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 16:11:45 -0000
Received: (qmail 11701 invoked by uid 500); 23 Feb 2006 16:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11601 invoked by uid 500); 23 Feb 2006 16:11:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11550 invoked by uid 99); 23 Feb 2006 16:11:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 08:11:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO zproxy.gmail.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 08:11:24 -0800
Received: by zproxy.gmail.com with SMTP id i28so87176nzi
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 08:11:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=H+4XZf4QH+JVNpyIgDiNF+UN4LKW2PrmgVEPb/l1H+G4qzsl9MsZj77xm8DVhAHKODDUvvRJ6hZs1N/CHDVzfr1t60qmfUkp1hLUJz9PpLdQb3Gr48LDMge1MoUvy8bQPvWYg8TzPx2+yXuk7zn1TDwv5LM7IEDuzYZYr/hk51Y=
Received: by 10.36.127.11 with SMTP id z11mr5043149nzc;
        Thu, 23 Feb 2006 08:10:50 -0800 (PST)
Received: from ?172.22.19.82? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id e1sm288557nzd.2006.02.23.08.10.49;
        Thu, 23 Feb 2006 08:10:49 -0800 (PST)
Message-ID: <43FDDE86.2040401@gmail.com>
Date: Thu, 23 Feb 2006 10:10:46 -0600
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
References: <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>	 <20060222214635.83398.qmail@web50310.mail.yahoo.com> <e994873a0602230800l3d20c77ex31bb0140c7f74f7@mail.gmail.com>
In-Reply-To: <e994873a0602230800l3d20c77ex31bb0140c7f74f7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would give the IBM or blackdown JVM a try on linux - I've seen pretty 
wide variance in their speed on different operations.

Sometimes better than Sun, sometimes worse - it depended on the task (I 
did some adhoc tests at one point that showed sun was faster for 
indexing, but IBM was faster for querying - but that was quite a while ago.

Dan


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 17:34:45 2006
Return-Path: <java-user-return-19130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63284 invoked from network); 23 Feb 2006 17:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:34:25 -0000
Received: (qmail 7978 invoked by uid 500); 23 Feb 2006 17:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7955 invoked by uid 500); 23 Feb 2006 17:34:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7944 invoked by uid 99); 23 Feb 2006 17:34:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:34:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.125.145.37] (HELO hermes.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:34:13 -0800
Received: from vienna.propylon.com ([213.94.211.166] helo=HUGHROSS)
	by hermes.propylon.com with esmtp (Exim 4.50)
	id 1FCKLb-0005Ww-Jf
	for java-user@lucene.apache.org; Thu, 23 Feb 2006 17:33:51 +0000
From: "Hugh Ross" <hugh.ross@propylon.com>
To: <java-user@lucene.apache.org>
Date: Thu, 23 Feb 2006 17:33:34 -0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0027_01C6389F.4870B7E0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
thread-index: AcY4n0Up/y/6rWXkSe+Tu2hquoJG8Q==
Message-Id: <E1FCKLb-0005Ww-Jf@hermes.propylon.com>
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: hugh.ross@propylon.com
Subject: SQL DISTINCT functionality in Lucene
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on hermes.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on hermes.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,HTML_90_100,
	HTML_MESSAGE,MSGID_FROM_MTA_ID autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0027_01C6389F.4870B7E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

I need to find all distinct values for a keyword field in a Lucene index.

 

Is this easily done? If so how?

 

Many thanks,

Hugh


------=_NextPart_000_0027_01C6389F.4870B7E0--



From java-user-return-19131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 17:38:08 2006
Return-Path: <java-user-return-19131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67055 invoked from network); 23 Feb 2006 17:38:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:38:00 -0000
Received: (qmail 13458 invoked by uid 500); 23 Feb 2006 17:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13190 invoked by uid 500); 23 Feb 2006 17:37:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13178 invoked by uid 99); 23 Feb 2006 17:37:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:37:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.125.145.37] (HELO hermes.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:37:52 -0800
Received: from vienna.propylon.com ([213.94.211.166] helo=HUGHROSS)
	by hermes.propylon.com with esmtp (Exim 4.50)
	id 1FCKP9-0005aK-DD
	for java-user@lucene.apache.org; Thu, 23 Feb 2006 17:37:31 +0000
From: "Hugh Ross" <hugh.ross@propylon.com>
To: <java-user@lucene.apache.org>
Date: Thu, 23 Feb 2006 17:37:15 -0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002E_01C6389F.CBB5C280"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
thread-index: AcY4n8lC1YQjCMf8Twm8eRO4xiXgCQ==
Message-Id: <E1FCKP9-0005aK-DD@hermes.propylon.com>
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: hugh.ross@propylon.com
Subject: Hierarchical Navigation in Lucene
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on hermes.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on hermes.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.0 required=5.0 tests=AWL,BAYES_00,HTML_80_90,
	HTML_MESSAGE,MSGID_FROM_MTA_ID autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_002E_01C6389F.CBB5C280
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

We have a custom built document repository which is searchable / indexed via
lucene.

I want to put together some kind of navigation framework based on the
repository metadata (which is also indexed with lucene). 


Is there a best-practice way to do this.?

 

Thanks,

Hugh

 

 


------=_NextPart_000_002E_01C6389F.CBB5C280--



From java-user-return-19132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 17:40:37 2006
Return-Path: <java-user-return-19132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68648 invoked from network); 23 Feb 2006 17:40:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:40:02 -0000
Received: (qmail 17938 invoked by uid 500); 23 Feb 2006 17:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17796 invoked by uid 500); 23 Feb 2006 17:39:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17785 invoked by uid 99); 23 Feb 2006 17:39:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:39:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.197 as permitted sender)
Received: from [205.158.62.197] (HELO ws6-2.us4.outblaze.com) (205.158.62.197)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Feb 2006 09:39:36 -0800
Received: (qmail 5977 invoked from network); 23 Feb 2006 17:39:16 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-2.us4.outblaze.com with SMTP; 23 Feb 2006 17:39:15 -0000
Message-ID: <43FDF342.2040408@curtin.com>
Date: Thu, 23 Feb 2006 12:39:14 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: SQL DISTINCT functionality in Lucene
References: <E1FCKLb-0005Ww-Jf@hermes.propylon.com>
In-Reply-To: <E1FCKLb-0005Ww-Jf@hermes.propylon.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hugh Ross wrote:


> I need to find all distinct values for a keyword field in a Lucene index.

I think the IndexReader.terms() method will do what you want.  Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 17:42:39 2006
Return-Path: <java-user-return-19133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70610 invoked from network); 23 Feb 2006 17:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:42:38 -0000
Received: (qmail 25874 invoked by uid 500); 23 Feb 2006 17:42:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25850 invoked by uid 500); 23 Feb 2006 17:42:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25839 invoked by uid 99); 23 Feb 2006 17:42:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:42:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.125.145.37] (HELO hermes.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:42:29 -0800
Received: from vienna.propylon.com ([213.94.211.166] helo=HUGHROSS)
	by hermes.propylon.com with esmtp (Exim 4.50)
	id 1FCKTc-0005dk-K8
	for java-user@lucene.apache.org; Thu, 23 Feb 2006 17:42:08 +0000
From: "Hugh Ross" <hugh.ross@propylon.com>
To: <java-user@lucene.apache.org>
Date: Thu, 23 Feb 2006 17:41:51 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
thread-index: AcY4oCOcQ4wSV0f4RTa/vzqaIIoSZwAAEFng
In-Reply-To: <43FDF342.2040408@curtin.com>
Message-Id: <E1FCKTc-0005dk-K8@hermes.propylon.com>
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: hugh.ross@propylon.com
Subject: RE: SQL DISTINCT functionality in Lucene
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on hermes.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on hermes.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,
	MSGID_FROM_MTA_ID autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Many Thanks. 
Hugh

-----Original Message-----
From: Michael D. Curtin [mailto:mike@curtin.com] 
Sent: 23 February 2006 17:39
To: java-user@lucene.apache.org
Subject: Re: SQL DISTINCT functionality in Lucene

Hugh Ross wrote:


> I need to find all distinct values for a keyword field in a Lucene index.

I think the IndexReader.terms() method will do what you want.  Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 17:47:54 2006
Return-Path: <java-user-return-19134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73292 invoked from network); 23 Feb 2006 17:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:47:51 -0000
Received: (qmail 32238 invoked by uid 500); 23 Feb 2006 17:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32197 invoked by uid 500); 23 Feb 2006 17:47:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32185 invoked by uid 99); 23 Feb 2006 17:47:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:47:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jlhamilton@kbsi.com designates 209.189.225.82 as permitted sender)
Received: from [209.189.225.82] (HELO mail.kbsi.com) (209.189.225.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:47:42 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: search a subdirectory (New to Lucene)
Date: Thu, 23 Feb 2006 11:47:17 -0600
Message-ID: <25039D8626986D42820764CF3C2AB791032FF1@00-emerald.kbsi-cs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search a subdirectory (New to Lucene)
Thread-Index: AcY39ZF5NbsZQ48fSVm+Kp74w1m6QwAqzFdw
From: "John Hamilton" <jlhamilton@kbsi.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I reindexed with the path as a keyword field and now the PrefixQuery =
filter does exactly what I need.  Thanks!

I'm going to hold off on the paragraph-level indexing for now, but that =
does sound interesting.

many thanks,

John

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, February 22, 2006 3:18 PM
To: java-user@lucene.apache.org
Subject: Re: search a subdirectory (New to Lucene)


I presume by saying "subdirectory" you're referring to filesystem =20
directories and you're indexing a directory tree of files.   If you =20
index the path (perhaps relative from the root is best) as a keyword =20
field (untokenized, but indexed) you could perform filtering on a /=20
path/subpath sort of way using PrefixQuery.

As for paragraphs - how you index a "document" is entirely =20
application dependent.  Maybe it makes sense to parse the documents =20
before handing them to Lucene such that you're creating a Lucene =20
Document for each paragraph rather than for each entire file.  =20
Slicing the granularity of a domain into Documents is a fascinating =20
topic :)

	Erik


On Feb 22, 2006, at 1:00 PM, John Hamilton wrote:

> I'm new to Lucene and was wondering what is the best way to perform =20
> a search on a subdirectory or subdirectories within the index?  My =20
> thought at this point is to build a query to first search for files =20
> in the required directory(ies) and then use that query to make a =20
> QueryFilter and use that QueryFilter in the actual search.  Is =20
> there an easier way?
>
> On an unrelated note, does anybody know of a way to get results a =20
> the section level within a document?  For example, could I find not =20
> just a document that matches my query, but the paragraph within =20
> that document that best matches the query?
>
> thanks,
>
> John


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 17:56:30 2006
Return-Path: <java-user-return-19135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80728 invoked from network); 23 Feb 2006 17:56:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:56:29 -0000
Received: (qmail 53193 invoked by uid 500); 23 Feb 2006 17:56:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52794 invoked by uid 500); 23 Feb 2006 17:56:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52783 invoked by uid 99); 23 Feb 2006 17:56:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:56:22 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Feb 2006 09:56:22 -0800
Received: (qmail 35041 invoked by uid 60001); 23 Feb 2006 17:56:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=tD4NXEJ2mjkJhQy2tBVtWpPS1HXsryC9pIF8Q52iHtGFa8WxfG0O/VTo9ipJosQTJKiabMJg450Tbs8ZKhPReDWUgCLLJUnKpTyURLo10wLTUFIh/F1y/C2UMwoA/FP9YPfy1DNGiZhEZQZEi3Y8QmOYySGaAprzsjga4mhZuTE=  ;
Message-ID: <20060223175600.35034.qmail@web50309.mail.yahoo.com>
Date: Thu, 23 Feb 2006 09:56:00 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Throughput doesn't increase when using more concurrent threads
To: java-user@lucene.apache.org
In-Reply-To: <f13b62210602230810t7a9d24bbhe4c02c1c71b0827c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Please ask on the Nutch mailing list (I answered your question in general@ already).
Also, please don't steal other people's threads - it's considered inpolite for obvious reasons.

Otis


----- Original Message ----
From: Raghavendra Prabhu <rrprabhu@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, February 23, 2006 11:10:11 AM
Subject: Re: Throughput doesn't increase when using more concurrent threads

Can nutch be made to use lucene query parser?

Rgds
Prabhu


On 2/23/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> Hi Otis,
>
> The Lucene server is actually CPU and network bound, as the index gets
> memory mapped pretty quickly. There is little disk activity observed.
>
> I was also able to run the server on a Sun box last night with 4 dual core
> opterons (same Linux and JVM) and I'm observing query rates of 400 qps!
> Has
> Linux been optimized to run on this hardware? I imagine that Sun's JVM has
> been.
>
> Peter
>
> On 2/22/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> >
> > Hi,
> >
> > Some things that could be different:
> > - thread scheduling (shouldn't make too much of a difference though)
> >
> > --- I would also play with disk IO schedulers, if you can.  CentOS is
> > based on RedHat, I believe, and RedHat (ext3, really) now has about 4
> > different IO schedulers that, according to articles I recently read, can
> > have an impact on disk read/write performance.  These schedules can be
> > specified at mount time, I believe, and maybe at boot time (kernel line
> in
> > Grub/LILO).
> >
> > Otis
> >
> >
> > On 2/22/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > I am doing a performance comparison of Lucene on Linux vs Windows.
> > >
> > > I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
> > > processors, 64GB RAM). One is running CentOS 4 Linux, the other is
> > running
> > > Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs from
> > Sun.
> > > The Lucene server is using MMapDirectory. I'm running the jvm with
> > > -Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and
> 7.8GBon
> > > windows.
> > >
> > > I'm observing query rates of 330 queries/sec on the Wintel server, but
> > only
> > > 200 qps on the Linux box. At first, I suspected a network bottleneck,
> > but
> > > when I 'short-circuited' Lucene, the query rates were identical.
> > >
> > > I suspect that there are some things to be tuned in Linux, but I'm not
> > sure
> > > what. Any advice would be appreciated.
> > >
> > > Peter
> > >
> > >
> > >
> > > On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > >
> > > > I cranked up the dial on my query tester and was able to get the
> rate
> > up
> > > > to 325 qps. Unfortunately, the machine died shortly thereafter
> (memory
> > > > errors :-( ) Hopefully, it was just a coincidence. I haven't
> measured
> > 64-bit
> > > > indexing speed, yet.
> > > >
> > > > Peter
> > > >
> > > > On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> > > > >
> > > > > Peter Keegan wrote:
> > > > > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and
> I'm
> > now
> > > > > > getting 250 queries/sec and excellent cpu utilization (equal
> > > > > concurrency on
> > > > > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. I
> > wasn't
> > > > > aware
> > > > > > of it.
> > > > > >
> > > > > Wow.  That's fast.
> > > > >
> > > > > Out of interest, does indexing time speed up much on 64-bit
> > hardware?
> > > > > I'm particularly interested in this side of things because for our
> > own
> > > > > application, any query response under half a second is good
> enough,
> > but
> > > > > the indexing side could always be faster. :-)
> > > > >
> > > > > Daniel
> > > > >
> > > > > --
> > > > > Daniel Noll
> > > > >
> > > > > Nuix Australia Pty Ltd
> > > > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > > > > Phone: (02) 9280 0699
> > > > > Fax:   (02) 9212 6902
> > > > >
> > > > > This message is intended only for the named recipient. If you are
> > not
> > > > > the intended recipient you are notified that disclosing, copying,
> > > > > distributing or taking any action in reliance on the contents of
> > this
> > > > > message or attachment is strictly prohibited.
> > > > >
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 17:59:55 2006
Return-Path: <java-user-return-19136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83271 invoked from network); 23 Feb 2006 17:59:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 17:59:55 -0000
Received: (qmail 68211 invoked by uid 500); 23 Feb 2006 17:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68025 invoked by uid 500); 23 Feb 2006 17:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67990 invoked by uid 99); 23 Feb 2006 17:59:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:59:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrprabhu@gmail.com designates 64.233.182.199 as permitted sender)
Received: from [64.233.182.199] (HELO nproxy.gmail.com) (64.233.182.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 09:59:32 -0800
Received: by nproxy.gmail.com with SMTP id m19so77413nfc
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 09:59:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a6vlV9a3J5H2/9UKxsR8j9nDgHhyCJYkE5gH7qd+XVaDrY2cWSXDp0lFbhVpZPJs8Pq4jNh4gagKjw3+Y8D0lQp1qjSkknBFu68UBT3RRr566iCUvJnIoSw+CxEqjr/OxbvDfsMe0P0DmTMowm1ca2Ow7kWIItD/nUWkpMgbr54=
Received: by 10.49.35.10 with SMTP id n10mr2408068nfj;
        Thu, 23 Feb 2006 09:59:09 -0800 (PST)
Received: by 10.49.51.16 with HTTP; Thu, 23 Feb 2006 09:59:09 -0800 (PST)
Message-ID: <f13b62210602230959u5d871342jc26ab895df57eae3@mail.gmail.com>
Date: Thu, 23 Feb 2006 23:29:09 +0530
From: "Raghavendra Prabhu" <rrprabhu@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <20060223175600.35034.qmail@web50309.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19167_13977807.1140717549482"
References: <f13b62210602230810t7a9d24bbhe4c02c1c71b0827c@mail.gmail.com>
	 <20060223175600.35034.qmail@web50309.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19167_13977807.1140717549482
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi

Sorry for the trouble

I was sending my first mail to the group

and replied to this thread and then later on sent a direct mail.

I would like to apologise for the inconvenience caused.

Rgds
Prabhu


On 2/23/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Hi,
>
> Please ask on the Nutch mailing list (I answered your question in general=
@
> already).
> Also, please don't steal other people's threads - it's considered inpolit=
e
> for obvious reasons.
>
> Otis
>
>
> ----- Original Message ----
> From: Raghavendra Prabhu <rrprabhu@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, February 23, 2006 11:10:11 AM
> Subject: Re: Throughput doesn't increase when using more concurrent
> threads
>
> Can nutch be made to use lucene query parser?
>
> Rgds
> Prabhu
>
>
> On 2/23/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > Hi Otis,
> >
> > The Lucene server is actually CPU and network bound, as the index gets
> > memory mapped pretty quickly. There is little disk activity observed.
> >
> > I was also able to run the server on a Sun box last night with 4 dual
> core
> > opterons (same Linux and JVM) and I'm observing query rates of 400 qps!
> > Has
> > Linux been optimized to run on this hardware? I imagine that Sun's JVM
> has
> > been.
> >
> > Peter
> >
> > On 2/22/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > >
> > > Hi,
> > >
> > > Some things that could be different:
> > > - thread scheduling (shouldn't make too much of a difference though)
> > >
> > > --- I would also play with disk IO schedulers, if you can.  CentOS is
> > > based on RedHat, I believe, and RedHat (ext3, really) now has about 4
> > > different IO schedulers that, according to articles I recently read,
> can
> > > have an impact on disk read/write performance.  These schedules can b=
e
> > > specified at mount time, I believe, and maybe at boot time (kernel
> line
> > in
> > > Grub/LILO).
> > >
> > > Otis
> > >
> > >
> > > On 2/22/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > > I am doing a performance comparison of Lucene on Linux vs Windows.
> > > >
> > > > I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
> > > > processors, 64GB RAM). One is running CentOS 4 Linux, the other is
> > > running
> > > > Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs
> from
> > > Sun.
> > > > The Lucene server is using MMapDirectory. I'm running the jvm with
> > > > -Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and
> > 7.8GBon
> > > > windows.
> > > >
> > > > I'm observing query rates of 330 queries/sec on the Wintel server,
> but
> > > only
> > > > 200 qps on the Linux box. At first, I suspected a network
> bottleneck,
> > > but
> > > > when I 'short-circuited' Lucene, the query rates were identical.
> > > >
> > > > I suspect that there are some things to be tuned in Linux, but I'm
> not
> > > sure
> > > > what. Any advice would be appreciated.
> > > >
> > > > Peter
> > > >
> > > >
> > > >
> > > > On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > > >
> > > > > I cranked up the dial on my query tester and was able to get the
> > rate
> > > up
> > > > > to 325 qps. Unfortunately, the machine died shortly thereafter
> > (memory
> > > > > errors :-( ) Hopefully, it was just a coincidence. I haven't
> > measured
> > > 64-bit
> > > > > indexing speed, yet.
> > > > >
> > > > > Peter
> > > > >
> > > > > On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> > > > > >
> > > > > > Peter Keegan wrote:
> > > > > > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and
> > I'm
> > > now
> > > > > > > getting 250 queries/sec and excellent cpu utilization (equal
> > > > > > concurrency on
> > > > > > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. =
I
> > > wasn't
> > > > > > aware
> > > > > > > of it.
> > > > > > >
> > > > > > Wow.  That's fast.
> > > > > >
> > > > > > Out of interest, does indexing time speed up much on 64-bit
> > > hardware?
> > > > > > I'm particularly interested in this side of things because for
> our
> > > own
> > > > > > application, any query response under half a second is good
> > enough,
> > > but
> > > > > > the indexing side could always be faster. :-)
> > > > > >
> > > > > > Daniel
> > > > > >
> > > > > > --
> > > > > > Daniel Noll
> > > > > >
> > > > > > Nuix Australia Pty Ltd
> > > > > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > > > > > Phone: (02) 9280 0699
> > > > > > Fax:   (02) 9212 6902
> > > > > >
> > > > > > This message is intended only for the named recipient. If you
> are
> > > not
> > > > > > the intended recipient you are notified that disclosing,
> copying,
> > > > > > distributing or taking any action in reliance on the contents o=
f
> > > this
> > > > > > message or attachment is strictly prohibited.
> > > > > >
> > > > > >
> > > > > >
> > > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19167_13977807.1140717549482--

From java-user-return-19137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 18:23:19 2006
Return-Path: <java-user-return-19137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99676 invoked from network); 23 Feb 2006 18:23:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 18:23:19 -0000
Received: (qmail 35636 invoked by uid 500); 23 Feb 2006 18:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35610 invoked by uid 500); 23 Feb 2006 18:23:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35599 invoked by uid 500); 23 Feb 2006 18:23:11 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 35596 invoked by uid 99); 23 Feb 2006 18:23:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 10:23:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 10:23:11 -0800
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id 89C6E1BB1F
	for <lucene-user@jakarta.apache.org>; Thu, 23 Feb 2006 19:22:44 +0100 (CET)
Message-ID: <43FDFD74.8000908@fib.upc.edu>
Date: Thu, 23 Feb 2006 19:22:44 +0100
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: about Filttering
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi luceners,

I have a problem that I don't know what to do.

I want to use ISOLatin1AccentFilter that I found In lucene trunks

The code in my analyzer is:

  public final TokenStream tokenStream(String fieldName, Reader reader) {

    if (fieldName == null) throw new IllegalArgumentException("fieldName 
must not be null");
    if (reader == null) throw new IllegalArgumentException("reader must 
not be null");
    TokenStream result = new StandardTokenizer(reader);

    result = new ISOLatin1AccentFilter(result);
    //result = new ParaulesFilter(new LowerCaseFilter(result));
    result = new StandardFilter(result);
    result = new StopFilter(new LetterTokenizer(reader), stoptable);
   
    return result;
  }

Why reason It doesn't works? I try to put some sysouts in de code Code 
of ISOLatin1AccentFilter, and the only log that appears is in the 
constructor method, but
never do next() method of ISOLatin1AccentFilter.

I don't have idea to do. thks for any reply to rescue me :D.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 19:00:36 2006
Return-Path: <java-user-return-19138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25077 invoked from network); 23 Feb 2006 19:00:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 19:00:32 -0000
Received: (qmail 35263 invoked by uid 500); 23 Feb 2006 19:00:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35228 invoked by uid 500); 23 Feb 2006 19:00:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35217 invoked by uid 99); 23 Feb 2006 19:00:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 11:00:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.204 as permitted sender)
Received: from [64.233.184.204] (HELO wproxy.gmail.com) (64.233.184.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 11:00:22 -0800
Received: by wproxy.gmail.com with SMTP id i22so113908wra
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 11:00:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TR7bjwtWvxYqNyj6DDb+yOeqOsqumg46+/8RNFR8rOHRUub6YlB70FVanAT3aUOpLHwX6rFxVe5r/NN1QpJiW7SVEmIBsD7VQfL35GQnw+9TY6NKeZX3Tx6QKY2ZlK+5NdiLy9D1NGUhhhbX3jjVNY1NV/iURKcvPFVDLRAV/2U=
Received: by 10.54.121.9 with SMTP id t9mr583583wrc;
        Thu, 23 Feb 2006 11:00:01 -0800 (PST)
Received: by 10.54.123.8 with HTTP; Thu, 23 Feb 2006 11:00:01 -0800 (PST)
Message-ID: <e994873a0602231100v48a73ec4tcca903fc65548fa6@mail.gmail.com>
Date: Thu, 23 Feb 2006 14:00:01 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15207_27313931.1140721201552"
References: <GJEMKBFALLAJKLGINBHHKEHAKOAA.jbooth@net-temps.com>
	 <fb9748c90601260043m3ed5e7fbh78ac7e23947a488f@mail.gmail.com>
	 <e994873a0601260756o58fb3b1ap3aa87df6de1ac0d7@mail.gmail.com>
	 <43D92935.1000809@apache.org> <43D92A28.6050501@apache.org>
	 <e994873a0601261320r753d864cwcb37b72e54539d09@mail.gmail.com>
	 <43DD6821.8020302@nuix.com.au>
	 <e994873a0601300615p5f46dab6qfb4b4504bfb2bd7f@mail.gmail.com>
	 <e994873a0602221152q1bad1e52gdeb3477611d31916@mail.gmail.com>
	 <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_15207_27313931.1140721201552
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

We discovered that the kernel was only using 8 CPUs. After recompiling for
16 (8+hyperthreads), it looks like the query rate will settle in around
280-300 qps. Much better, although still quite a bit slower than the
opteron.

Peter




On 2/22/06, Yonik Seeley <yseeley@gmail.com> wrote:
>
> Hmmm, not sure what that could be.
> You could try using the default FSDir instead of MMapDir to see if the
> differences are there.
>
> Some things that could be different:
> - thread scheduling (shouldn't make too much of a difference though)
> - synchronization workings
> - page replacement policy... how to figure out what pages to swap in
> and which to swap out, esp of the memory mapped files.
>
> You could also try a profiler on both platforms to try and see where
> the difference is.
>
> -Yonik
>
> On 2/22/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > I am doing a performance comparison of Lucene on Linux vs Windows.
> >
> > I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
> > processors, 64GB RAM). One is running CentOS 4 Linux, the other is
> running
> > Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs from
> Sun.
> > The Lucene server is using MMapDirectory. I'm running the jvm with
> > -Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and 7.8G=
Bon
> > windows.
> >
> > I'm observing query rates of 330 queries/sec on the Wintel server, but
> only
> > 200 qps on the Linux box. At first, I suspected a network bottleneck,
> but
> > when I 'short-circuited' Lucene, the query rates were identical.
> >
> > I suspect that there are some things to be tuned in Linux, but I'm not
> sure
> > what. Any advice would be appreciated.
> >
> > Peter
> >
> >
> >
> > On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > >
> > > I cranked up the dial on my query tester and was able to get the rate
> up
> > > to 325 qps. Unfortunately, the machine died shortly thereafter (memor=
y
> > > errors :-( ) Hopefully, it was just a coincidence. I haven't measured
> 64-bit
> > > indexing speed, yet.
> > >
> > > Peter
> > >
> > > On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> > > >
> > > > Peter Keegan wrote:
> > > > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and I'm
> now
> > > > > getting 250 queries/sec and excellent cpu utilization (equal
> > > > concurrency on
> > > > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. I
> wasn't
> > > > aware
> > > > > of it.
> > > > >
> > > > Wow.  That's fast.
> > > >
> > > > Out of interest, does indexing time speed up much on 64-bit
> hardware?
> > > > I'm particularly interested in this side of things because for our
> own
> > > > application, any query response under half a second is good enough,
> but
> > > > the indexing side could always be faster. :-)
> > > >
> > > > Daniel
> > > >
> > > > --
> > > > Daniel Noll
> > > >
> > > > Nuix Australia Pty Ltd
> > > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > > > Phone: (02) 9280 0699
> > > > Fax:   (02) 9212 6902
> > > >
> > > > This message is intended only for the named recipient. If you are
> not
> > > > the intended recipient you are notified that disclosing, copying,
> > > > distributing or taking any action in reliance on the contents of
> this
> > > > message or attachment is strictly prohibited.
> > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15207_27313931.1140721201552--

From java-user-return-19139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 19:48:47 2006
Return-Path: <java-user-return-19139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54377 invoked from network); 23 Feb 2006 19:48:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 19:48:46 -0000
Received: (qmail 39701 invoked by uid 500); 23 Feb 2006 19:48:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39668 invoked by uid 500); 23 Feb 2006 19:48:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39657 invoked by uid 99); 23 Feb 2006 19:48:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 11:48:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 64.233.182.197 as permitted sender)
Received: from [64.233.182.197] (HELO nproxy.gmail.com) (64.233.182.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 11:48:38 -0800
Received: by nproxy.gmail.com with SMTP id x29so125675nfb
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 11:48:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pEqxFxa4PTHmOOcbK4KfcDfjq+gfXk4j6+OCUtld5KasJiG1JNwOuGgpAvq4JxIEZOyS9S3Os3Ut8FwDYn8ywwhs2hHLmeAXf2WHt66IwowtX0eDzyBdUHSq1jqd8d4D5hFs2rtku0767bxg/sK/3CJxLAE3tF1Q+hdv9419plg=
Received: by 10.49.2.4 with SMTP id e4mr159569nfi;
        Thu, 23 Feb 2006 11:48:16 -0800 (PST)
Received: by 10.49.8.7 with HTTP; Thu, 23 Feb 2006 11:48:16 -0800 (PST)
Message-ID: <88c6a6720602231148v520b3be6uab8cfd7fb48899a9@mail.gmail.com>
Date: Thu, 23 Feb 2006 13:48:16 -0600
From: "Chris Lamprecht" <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <e994873a0602231100v48a73ec4tcca903fc65548fa6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <GJEMKBFALLAJKLGINBHHKEHAKOAA.jbooth@net-temps.com>
	 <e994873a0601260756o58fb3b1ap3aa87df6de1ac0d7@mail.gmail.com>
	 <43D92935.1000809@apache.org> <43D92A28.6050501@apache.org>
	 <e994873a0601261320r753d864cwcb37b72e54539d09@mail.gmail.com>
	 <43DD6821.8020302@nuix.com.au>
	 <e994873a0601300615p5f46dab6qfb4b4504bfb2bd7f@mail.gmail.com>
	 <e994873a0602221152q1bad1e52gdeb3477611d31916@mail.gmail.com>
	 <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
	 <e994873a0602231100v48a73ec4tcca903fc65548fa6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Peter,
Have you given JRockit JVM a try?  I've seen it help throughput
compared to Sun's JVM on a dual xeon/linux machine, especially with
concurrency (up to 6 concurrent searches happening).  I'm curious to
see if it makes a difference for you.

-chris

On 2/23/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> We discovered that the kernel was only using 8 CPUs. After recompiling fo=
r
> 16 (8+hyperthreads), it looks like the query rate will settle in around
> 280-300 qps. Much better, although still quite a bit slower than the
> opteron.
>
> Peter
>
>
>
>
> On 2/22/06, Yonik Seeley <yseeley@gmail.com> wrote:
> >
> > Hmmm, not sure what that could be.
> > You could try using the default FSDir instead of MMapDir to see if the
> > differences are there.
> >
> > Some things that could be different:
> > - thread scheduling (shouldn't make too much of a difference though)
> > - synchronization workings
> > - page replacement policy... how to figure out what pages to swap in
> > and which to swap out, esp of the memory mapped files.
> >
> > You could also try a profiler on both platforms to try and see where
> > the difference is.
> >
> > -Yonik
> >
> > On 2/22/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > I am doing a performance comparison of Lucene on Linux vs Windows.
> > >
> > > I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
> > > processors, 64GB RAM). One is running CentOS 4 Linux, the other is
> > running
> > > Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs fro=
m
> > Sun.
> > > The Lucene server is using MMapDirectory. I'm running the jvm with
> > > -Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and 7.=
8GBon
> > > windows.
> > >
> > > I'm observing query rates of 330 queries/sec on the Wintel server, bu=
t
> > only
> > > 200 qps on the Linux box. At first, I suspected a network bottleneck,
> > but
> > > when I 'short-circuited' Lucene, the query rates were identical.
> > >
> > > I suspect that there are some things to be tuned in Linux, but I'm no=
t
> > sure
> > > what. Any advice would be appreciated.
> > >
> > > Peter
> > >
> > >
> > >
> > > On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > >
> > > > I cranked up the dial on my query tester and was able to get the ra=
te
> > up
> > > > to 325 qps. Unfortunately, the machine died shortly thereafter (mem=
ory
> > > > errors :-( ) Hopefully, it was just a coincidence. I haven't measur=
ed
> > 64-bit
> > > > indexing speed, yet.
> > > >
> > > > Peter
> > > >
> > > > On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> > > > >
> > > > > Peter Keegan wrote:
> > > > > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and I=
'm
> > now
> > > > > > getting 250 queries/sec and excellent cpu utilization (equal
> > > > > concurrency on
> > > > > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. I
> > wasn't
> > > > > aware
> > > > > > of it.
> > > > > >
> > > > > Wow.  That's fast.
> > > > >
> > > > > Out of interest, does indexing time speed up much on 64-bit
> > hardware?
> > > > > I'm particularly interested in this side of things because for ou=
r
> > own
> > > > > application, any query response under half a second is good enoug=
h,
> > but
> > > > > the indexing side could always be faster. :-)
> > > > >
> > > > > Daniel
> > > > >
> > > > > --
> > > > > Daniel Noll
> > > > >
> > > > > Nuix Australia Pty Ltd
> > > > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > > > > Phone: (02) 9280 0699
> > > > > Fax:   (02) 9212 6902
> > > > >
> > > > > This message is intended only for the named recipient. If you are
> > not
> > > > > the intended recipient you are notified that disclosing, copying,
> > > > > distributing or taking any action in reliance on the contents of
> > this
> > > > > message or attachment is strictly prohibited.
> > > > >
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 20:25:58 2006
Return-Path: <java-user-return-19140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78275 invoked from network); 23 Feb 2006 20:25:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 20:25:57 -0000
Received: (qmail 37968 invoked by uid 500); 23 Feb 2006 20:25:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37827 invoked by uid 500); 23 Feb 2006 20:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37796 invoked by uid 99); 23 Feb 2006 20:25:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 12:25:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 12:25:39 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E9BB733CFF2; Thu, 23 Feb 2006 15:25:18 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id CA0EA33CFF1
	for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 15:25:17 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43FDFD74.8000908@fib.upc.edu>
References: <43FDFD74.8000908@fib.upc.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <13C453CD-7915-431D-B452-B57A8DCA48FA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: about Filttering
Date: Thu, 23 Feb 2006 15:25:15 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 23, 2006, at 1:22 PM, Daniel Cortes wrote:

> Hi luceners,
>
> I have a problem that I don't know what to do.
>
> I want to use ISOLatin1AccentFilter that I found In lucene trunks
>
> The code in my analyzer is:
>
>  public final TokenStream tokenStream(String fieldName, Reader  
> reader) {
>
>    if (fieldName == null) throw new IllegalArgumentException 
> ("fieldName must not be null");
>    if (reader == null) throw new IllegalArgumentException("reader  
> must not be null");
>    TokenStream result = new StandardTokenizer(reader);
>
>    result = new ISOLatin1AccentFilter(result);
>    //result = new ParaulesFilter(new LowerCaseFilter(result));
>    result = new StandardFilter(result);
>    result = new StopFilter(new LetterTokenizer(reader), stoptable);
>      return result;
>  }
>
> Why reason It doesn't works? I try to put some sysouts in de code  
> Code of ISOLatin1AccentFilter, and the only log that appears is in  
> the constructor method, but
> never do next() method of ISOLatin1AccentFilter.
>
> I don't have idea to do. thks for any reply to rescue me :D.

Well, it's because you have a bug in your code.... the result that is  
returned is just a StopFilter.  You aren't chaining things properly  
to achieve what you want.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 20:42:24 2006
Return-Path: <java-user-return-19141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85062 invoked from network); 23 Feb 2006 20:42:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 20:42:24 -0000
Received: (qmail 67719 invoked by uid 500); 23 Feb 2006 20:42:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67455 invoked by uid 500); 23 Feb 2006 20:42:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67444 invoked by uid 99); 23 Feb 2006 20:42:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 12:42:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 12:42:17 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A51A233CFF1; Thu, 23 Feb 2006 15:41:54 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id C78AD33CFEF
	for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 15:41:52 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <E1FCKP9-0005aK-DD@hermes.propylon.com>
References: <E1FCKP9-0005aK-DD@hermes.propylon.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EC2A805C-A475-4FD1-8833-F8C64C6CBC8F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Hierarchical Navigation in Lucene
Date: Thu, 23 Feb 2006 15:41:50 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 23, 2006, at 12:37 PM, Hugh Ross wrote:

> Hi,
>
> We have a custom built document repository which is searchable /  
> indexed via
> lucene.
>
> I want to put together some kind of navigation framework based on the
> repository metadata (which is also indexed with lucene).
>
>
> Is there a best-practice way to do this.?
>

I don't know about a best practice, but I've used term enumeration  
coupled with PrefixQuery's to enable hierarchical navigation on my  
(very dusty and way outdated) blog: http://www.blogscene.org/erik

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 20:50:51 2006
Return-Path: <java-user-return-19142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89030 invoked from network); 23 Feb 2006 20:50:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 20:50:51 -0000
Received: (qmail 85545 invoked by uid 500); 23 Feb 2006 20:50:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85471 invoked by uid 500); 23 Feb 2006 20:50:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85436 invoked by uid 99); 23 Feb 2006 20:50:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 12:50:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 12:50:27 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4003533CFEF; Thu, 23 Feb 2006 15:50:07 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1F2C533CFDA
	for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 15:50:06 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43FD1782.7040805@eastlink.ca>
References: <43FBD86E.4010604@eastlink.ca> <757A8791-747A-47C7-AE45-6BBFA2D14717@ehatchersolutions.com> <43FD1782.7040805@eastlink.ca>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <468253E5-64B5-45C7-A1F8-3DF2A823A73F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searching/sorting strategy for many properties for semantic web app
Date: Thu, 23 Feb 2006 15:50:02 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 22, 2006, at 9:01 PM, David Pratt wrote:
> Hi Erik. Many thanks for your reply. I'll likely see if I can find  
> a list to pose a couple of questions there way. I am having fun  
> with Lucene since it is new to me and I am impressed with the speed  
> I am getting. I am reading anything I can get hold of and trying  
> different code experiments. So far, the code is fairly straight  
> forward so not so concerned about this at the moment.
>
> I am really hoping to hear from experienced people like yourself  
> more on strategically what to index, what sort of things it would  
> be a good idea to store and what to do about a fairly large schema  
> that has much metadata to offer. Also perhaps when sorting and  
> filtering gets too expensive. I realize that just because the  
> metadata is available doesn't necessarily mean you want to even put  
> it all in an index. I think these issues are pretty general,  
> however I know there are folks on this that would likely advise  
> some particular path or direction because of their own experiences  
> with Lucene. I would really like to hear from anyone that has been  
> working with metadata particularly or anyone generally about these  
> topics.

In my University job, I'm dealing with a fair bit of metadata in the  
form of RDF about 19th century literature objects.  I'm indexing  
basic Dublin Core data such as title and author as individual fields,  
and also dropping all indexed metadata into a single searchable  
field.  I've been using Kowari as the metadata store, but it also has  
Lucene integration (that I've not tried myself yet).

I'm not sure what else to add as your query is a bit general.  I  
think you'll find if you post more specific questions you're more  
likely to get detailed responses.  General queries tend to be too  
general to respond to, I find.

There really are no "best practices" with Lucene in terms of what to  
index, what to store - these are all highly application dependent and  
is often something I tune as the application itself evolves.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 21:14:53 2006
Return-Path: <java-user-return-19143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99345 invoked from network); 23 Feb 2006 21:14:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 21:14:52 -0000
Received: (qmail 22375 invoked by uid 500); 23 Feb 2006 21:14:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22353 invoked by uid 500); 23 Feb 2006 21:14:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22340 invoked by uid 99); 23 Feb 2006 21:14:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:14:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:14:45 -0800
Received: by wproxy.gmail.com with SMTP id 50so145217wri
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 13:14:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NXQWbbN0LhWgvnodxPUusK1t8J/3EUkDTW2R5sqwJT3YG6CEZ+4eSLPI5CQE88PcLgvrkvCiiZCkZ9p0sk0nBZL1z60x/aXcquWO+92B1mU3MCvSx0NyRjkCJbM9aCJz1jtzVmXu/Qw2yNKu9g+drYM2orbS6vD0/Fr+py5oUWc=
Received: by 10.54.71.15 with SMTP id t15mr724423wra;
        Thu, 23 Feb 2006 13:14:24 -0800 (PST)
Received: by 10.54.123.8 with HTTP; Thu, 23 Feb 2006 13:14:24 -0800 (PST)
Message-ID: <e994873a0602231314t5c7707bdjf79665d3d4ad1cf0@mail.gmail.com>
Date: Thu, 23 Feb 2006 16:14:24 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <88c6a6720602231148v520b3be6uab8cfd7fb48899a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17007_16436157.1140729264160"
References: <GJEMKBFALLAJKLGINBHHKEHAKOAA.jbooth@net-temps.com>
	 <43D92935.1000809@apache.org> <43D92A28.6050501@apache.org>
	 <e994873a0601261320r753d864cwcb37b72e54539d09@mail.gmail.com>
	 <43DD6821.8020302@nuix.com.au>
	 <e994873a0601300615p5f46dab6qfb4b4504bfb2bd7f@mail.gmail.com>
	 <e994873a0602221152q1bad1e52gdeb3477611d31916@mail.gmail.com>
	 <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
	 <e994873a0602231100v48a73ec4tcca903fc65548fa6@mail.gmail.com>
	 <88c6a6720602231148v520b3be6uab8cfd7fb48899a9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17007_16436157.1140729264160
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Chris,

I tried JRockit a while back on 8-cpu/windows and it was slower than Sun's.
Since I seem to be cpu-bound right now, I'll be trying a 16-cpu system next
(32 with hyperthreading), on LinTel. I may give JRockit another go around
then.

Thanks,
Peter

On 2/23/06, Chris Lamprecht <clamprecht@gmail.com> wrote:
>
> Peter,
> Have you given JRockit JVM a try?  I've seen it help throughput
> compared to Sun's JVM on a dual xeon/linux machine, especially with
> concurrency (up to 6 concurrent searches happening).  I'm curious to
> see if it makes a difference for you.
>
> -chris
>
> On 2/23/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > We discovered that the kernel was only using 8 CPUs. After recompiling
> for
> > 16 (8+hyperthreads), it looks like the query rate will settle in around
> > 280-300 qps. Much better, although still quite a bit slower than the
> > opteron.
> >
> > Peter
> >
> >
> >
> >
> > On 2/22/06, Yonik Seeley <yseeley@gmail.com> wrote:
> > >
> > > Hmmm, not sure what that could be.
> > > You could try using the default FSDir instead of MMapDir to see if th=
e
> > > differences are there.
> > >
> > > Some things that could be different:
> > > - thread scheduling (shouldn't make too much of a difference though)
> > > - synchronization workings
> > > - page replacement policy... how to figure out what pages to swap in
> > > and which to swap out, esp of the memory mapped files.
> > >
> > > You could also try a profiler on both platforms to try and see where
> > > the difference is.
> > >
> > > -Yonik
> > >
> > > On 2/22/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > > I am doing a performance comparison of Lucene on Linux vs Windows.
> > > >
> > > > I have 2 identically configured servers (8-CPUs (real) x 3GHz Xeon
> > > > processors, 64GB RAM). One is running CentOS 4 Linux, the other is
> > > running
> > > > Windows server 2003 Enterprise Edition x64. Both have 64-bit JVMs
> from
> > > Sun.
> > > > The Lucene server is using MMapDirectory. I'm running the jvm with
> > > > -Xmx16000M. Peak memory usage of the jvm on Linux is about 6GB and
> 7.8GBon
> > > > windows.
> > > >
> > > > I'm observing query rates of 330 queries/sec on the Wintel server,
> but
> > > only
> > > > 200 qps on the Linux box. At first, I suspected a network
> bottleneck,
> > > but
> > > > when I 'short-circuited' Lucene, the query rates were identical.
> > > >
> > > > I suspect that there are some things to be tuned in Linux, but I'm
> not
> > > sure
> > > > what. Any advice would be appreciated.
> > > >
> > > > Peter
> > > >
> > > >
> > > >
> > > > On 1/30/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > > >
> > > > > I cranked up the dial on my query tester and was able to get the
> rate
> > > up
> > > > > to 325 qps. Unfortunately, the machine died shortly thereafter
> (memory
> > > > > errors :-( ) Hopefully, it was just a coincidence. I haven't
> measured
> > > 64-bit
> > > > > indexing speed, yet.
> > > > >
> > > > > Peter
> > > > >
> > > > > On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
> > > > > >
> > > > > > Peter Keegan wrote:
> > > > > > > I tried the AMD64-bit JVM from Sun and with MMapDirectory and
> I'm
> > > now
> > > > > > > getting 250 queries/sec and excellent cpu utilization (equal
> > > > > > concurrency on
> > > > > > > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. =
I
> > > wasn't
> > > > > > aware
> > > > > > > of it.
> > > > > > >
> > > > > > Wow.  That's fast.
> > > > > >
> > > > > > Out of interest, does indexing time speed up much on 64-bit
> > > hardware?
> > > > > > I'm particularly interested in this side of things because for
> our
> > > own
> > > > > > application, any query response under half a second is good
> enough,
> > > but
> > > > > > the indexing side could always be faster. :-)
> > > > > >
> > > > > > Daniel
> > > > > >
> > > > > > --
> > > > > > Daniel Noll
> > > > > >
> > > > > > Nuix Australia Pty Ltd
> > > > > > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> > > > > > Phone: (02) 9280 0699
> > > > > > Fax:   (02) 9212 6902
> > > > > >
> > > > > > This message is intended only for the named recipient. If you
> are
> > > not
> > > > > > the intended recipient you are notified that disclosing,
> copying,
> > > > > > distributing or taking any action in reliance on the contents o=
f
> > > this
> > > > > > message or attachment is strictly prohibited.
> > > > > >
> > > > > >
> > > > > >
> > > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17007_16436157.1140729264160--

From java-user-return-19144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 21:17:23 2006
Return-Path: <java-user-return-19144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 534 invoked from network); 23 Feb 2006 21:17:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 21:17:22 -0000
Received: (qmail 26654 invoked by uid 500); 23 Feb 2006 21:17:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26628 invoked by uid 500); 23 Feb 2006 21:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26614 invoked by uid 99); 23 Feb 2006 21:17:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:17:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:17:15 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Thu, 23 Feb 2006 14:16:53 -0700
Message-ID: <43FE263A.5070905@allegromedical.com>
Date: Thu, 23 Feb 2006 14:16:42 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Getting no hits ... 
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have been trying to figure out why my query below would not return any 
hits.

I use two custom analyzers for indexing and searching. The one I use for 
indexing uses this:

    public TokenStream tokenStream(String fieldName, Reader reader)
    {
        TokenStream result = new StandardTokenizer(reader);
        result = new StandardFilter(result);
        result = new LowerCaseFilter(result);
        result = new StopFilter(result, stopSet);
        result = new SynonymFilter(result, new MySynonymEngine());
        result = new PorterStemFilter(result);
        return result;
    }

The one I use for searching uses this:

    public TokenStream tokenStream(String fieldName, Reader reader)
    {
        TokenStream result = new StandardTokenizer(reader);
        result = new StandardFilter(result);
        result = new LowerCaseFilter(result);
        result = new StopFilter(result, stopSet);
        result = new PorterStemFilter(result);
        return result;
    }

(Basically while searching I do not use the SynonymFilter.)

I have quite a few products that I index that have the text on which I 
am querying on.

I do a search for this: ES-20D

This is the final query that I run:
+(+content:es\-20d) +entity:product +(title:"es\-20d"~2^40.0 
((title:es\-20d)^10.0) content:"es\-20d"~2^20.0 (content:es\-20d) 
categoryName:"es\-20d"^80.0)

(The content and title fields are Indexed, Tokenized and Stored. The 
categoryName field is Indexed and Stored.)

I get no hits?

Where am i going wrong with this? Any pointers?

-Thanks.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 21:25:16 2006
Return-Path: <java-user-return-19145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5364 invoked from network); 23 Feb 2006 21:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 21:25:14 -0000
Received: (qmail 40465 invoked by uid 500); 23 Feb 2006 21:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40347 invoked by uid 500); 23 Feb 2006 21:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40292 invoked by uid 99); 23 Feb 2006 21:24:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:24:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.200 as permitted sender)
Received: from [64.233.182.200] (HELO nproxy.gmail.com) (64.233.182.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:24:55 -0800
Received: by nproxy.gmail.com with SMTP id p46so141806nfa
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 13:24:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AQENQQ09k4sf1+G7E2Vic7GAPwPo8vRB4fTrG5Dp8bM8NWgMEw4ZmtFa8AyQWXOzYLsEd3aw9L34OdjB47QcAdB1j3xqY4gnXZ/l4Ntz9MtuKSwBpakWVOOV39Rp+PH5An6ZarVufiKDnTTl7jgnEIsCUrLpkGYfcibUKJ7crNA=
Received: by 10.48.49.2 with SMTP id w2mr428833nfw;
        Thu, 23 Feb 2006 13:24:33 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Thu, 23 Feb 2006 13:24:33 -0800 (PST)
Message-ID: <c68e39170602231324s5c425a02m235b51b469a1e79c@mail.gmail.com>
Date: Thu, 23 Feb 2006 16:24:33 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <e994873a0602231314t5c7707bdjf79665d3d4ad1cf0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <GJEMKBFALLAJKLGINBHHKEHAKOAA.jbooth@net-temps.com>
	 <43D92A28.6050501@apache.org>
	 <e994873a0601261320r753d864cwcb37b72e54539d09@mail.gmail.com>
	 <43DD6821.8020302@nuix.com.au>
	 <e994873a0601300615p5f46dab6qfb4b4504bfb2bd7f@mail.gmail.com>
	 <e994873a0602221152q1bad1e52gdeb3477611d31916@mail.gmail.com>
	 <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
	 <e994873a0602231100v48a73ec4tcca903fc65548fa6@mail.gmail.com>
	 <88c6a6720602231148v520b3be6uab8cfd7fb48899a9@mail.gmail.com>
	 <e994873a0602231314t5c7707bdjf79665d3d4ad1cf0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wow, some resources!
Would it be cheaper / more scalable to copy the index to multiple
boxes and loadbalance requests across them?

-Yonik

On 2/23/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Since I seem to be cpu-bound right now, I'll be trying a 16-cpu system ne=
xt
> (32 with hyperthreading), on LinTel. I may give JRockit another go around
> then.
>
> Thanks,
> Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 21:30:49 2006
Return-Path: <java-user-return-19146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7592 invoked from network); 23 Feb 2006 21:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 21:30:49 -0000
Received: (qmail 48471 invoked by uid 500); 23 Feb 2006 21:30:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48435 invoked by uid 500); 23 Feb 2006 21:30:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48424 invoked by uid 99); 23 Feb 2006 21:30:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:30:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:30:42 -0800
Received: by wproxy.gmail.com with SMTP id i23so148070wra
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 13:30:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=STH82Vercz0th+HQuZSZh8LV/ZF+HMnvtjL5ppGjcOSdpDLOx/X52rByE1/pa2gIHZAUC+ESFF6uf2r/T4m8qFCnoOrLrCa0gCaMsV3mHx1fborB6X3Lny8YYG1w/EkWuLod21VMc/GH/fo1SfctT6yJN4xM0AMDzybf5uqkriQ=
Received: by 10.54.92.1 with SMTP id p1mr691750wrb;
        Thu, 23 Feb 2006 13:30:22 -0800 (PST)
Received: by 10.54.123.8 with HTTP; Thu, 23 Feb 2006 13:30:21 -0800 (PST)
Message-ID: <e994873a0602231330p2f3dd3b7yeb6a04ed86103069@mail.gmail.com>
Date: Thu, 23 Feb 2006 16:30:21 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <c68e39170602231324s5c425a02m235b51b469a1e79c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17107_4179745.1140730221937"
References: <GJEMKBFALLAJKLGINBHHKEHAKOAA.jbooth@net-temps.com>
	 <e994873a0601261320r753d864cwcb37b72e54539d09@mail.gmail.com>
	 <43DD6821.8020302@nuix.com.au>
	 <e994873a0601300615p5f46dab6qfb4b4504bfb2bd7f@mail.gmail.com>
	 <e994873a0602221152q1bad1e52gdeb3477611d31916@mail.gmail.com>
	 <c68e39170602221218g6f7c2cb2m225c16f668b8497b@mail.gmail.com>
	 <e994873a0602231100v48a73ec4tcca903fc65548fa6@mail.gmail.com>
	 <88c6a6720602231148v520b3be6uab8cfd7fb48899a9@mail.gmail.com>
	 <e994873a0602231314t5c7707bdjf79665d3d4ad1cf0@mail.gmail.com>
	 <c68e39170602231324s5c425a02m235b51b469a1e79c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17107_4179745.1140730221937
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Yonik,

We're investigating both approaches.
Yes, the resources (and permutations) are dizzying!

Peter

On 2/23/06, Yonik Seeley <yseeley@gmail.com> wrote:
>
> Wow, some resources!
> Would it be cheaper / more scalable to copy the index to multiple
> boxes and loadbalance requests across them?
>
> -Yonik
>
> On 2/23/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > Since I seem to be cpu-bound right now, I'll be trying a 16-cpu system
> next
> > (32 with hyperthreading), on LinTel. I may give JRockit another go
> around
> > then.
> >
> > Thanks,
> > Peter
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17107_4179745.1140730221937--

From java-user-return-19147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 21:45:38 2006
Return-Path: <java-user-return-19147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16544 invoked from network); 23 Feb 2006 21:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 21:45:36 -0000
Received: (qmail 63187 invoked by uid 500); 23 Feb 2006 21:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63148 invoked by uid 500); 23 Feb 2006 21:45:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63137 invoked by uid 99); 23 Feb 2006 21:45:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:45:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 13:45:22 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 172AD5B76C; Thu, 23 Feb 2006 13:44:54 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0BB797F403
	for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 13:44:54 -0800 (PST)
Date: Thu, 23 Feb 2006 13:44:54 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Getting no hits ... 
In-Reply-To: <43FE263A.5070905@allegromedical.com>
Message-ID: <Pine.LNX.4.58.0602231340150.21630@hal.rescomp.berkeley.edu>
References: <43FE263A.5070905@allegromedical.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1) Have you looked at what tokens your indexing analyzer produces when you
   tokenize "ES-20D" ?
2) Have you looked at what tokens your query analyser products when you
   tokenize "ES-20D" ?
3) Have you tried a simpler query (ie: just "content:es\-20d" ) ?
4) When giving QueryParser a (quoted) phrase search, i don't think you
   really want to escape that "-" character.



: Date: Thu, 23 Feb 2006 14:16:42 -0700
: From: Mufaddal Khumri <mkhumri@allegromedical.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Getting no hits ...
:
: I have been trying to figure out why my query below would not return any
: hits.
:
: I use two custom analyzers for indexing and searching. The one I use for
: indexing uses this:
:
:     public TokenStream tokenStream(String fieldName, Reader reader)
:     {
:         TokenStream result = new StandardTokenizer(reader);
:         result = new StandardFilter(result);
:         result = new LowerCaseFilter(result);
:         result = new StopFilter(result, stopSet);
:         result = new SynonymFilter(result, new MySynonymEngine());
:         result = new PorterStemFilter(result);
:         return result;
:     }
:
: The one I use for searching uses this:
:
:     public TokenStream tokenStream(String fieldName, Reader reader)
:     {
:         TokenStream result = new StandardTokenizer(reader);
:         result = new StandardFilter(result);
:         result = new LowerCaseFilter(result);
:         result = new StopFilter(result, stopSet);
:         result = new PorterStemFilter(result);
:         return result;
:     }
:
: (Basically while searching I do not use the SynonymFilter.)
:
: I have quite a few products that I index that have the text on which I
: am querying on.
:
: I do a search for this: ES-20D
:
: This is the final query that I run:
: +(+content:es\-20d) +entity:product +(title:"es\-20d"~2^40.0
: ((title:es\-20d)^10.0) content:"es\-20d"~2^20.0 (content:es\-20d)
: categoryName:"es\-20d"^80.0)
:
: (The content and title fields are Indexed, Tokenized and Stored. The
: categoryName field is Indexed and Stored.)
:
: I get no hits?
:
: Where am i going wrong with this? Any pointers?
:
: -Thanks.
:
:
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 22:20:34 2006
Return-Path: <java-user-return-19148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30184 invoked from network); 23 Feb 2006 22:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 22:20:32 -0000
Received: (qmail 33088 invoked by uid 500); 23 Feb 2006 22:20:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33064 invoked by uid 500); 23 Feb 2006 22:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33053 invoked by uid 99); 23 Feb 2006 22:20:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 14:20:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 14:20:26 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Thu, 23 Feb 2006 15:20:03 -0700
Message-ID: <43FE3508.70507@allegromedical.com>
Date: Thu, 23 Feb 2006 15:19:52 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Getting no hits ...
References: <43FE263A.5070905@allegromedical.com> <Pine.LNX.4.58.0602231340150.21630@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0602231340150.21630@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In my earlier email i put in the wrong query that I am searching on. The 
correct query is: EOS-20D

And this is the query under question that is producing no hits still:

+(+content:eos\-20d) +entity:product +(title:"eos\-20d"~2^40.0 
((title:eos\-20d)^10.0) content:"eos\-20d"~2^20.0 (content:eos\-20d) 
categoryName:"eos\-20d"^80.0)

I have used the AnalyzerUtils.displayTokensWithFullDetails(analyzer, 
string); (AnalyzerUtils from the LIA book).

This is part of the log output from using the 
AnalyzerUtils.displayTokensWithFullDetails(analyzer, string) when this 
product gets indexed:
....
....
119: [013803044430:857->869:<ALPHANUM>]
120: [eos-20d:870->877:<NUM>]
121: [011-eos-20d:878->889:<NUM>]

This is part of the log output from using the 
AnalyzerUtils.displayTokensWithFullDetails(analyzer, string) when I do 
the search:
1: [eos-20d:0->6:<NUM>]

 From what I understand I see that the analyzer is producing the same 
tokens while indexing and during searching.

Chris Hostetter wrote:

>1) Have you looked at what tokens your indexing analyzer produces when you
>   tokenize "ES-20D" ?
>2) Have you looked at what tokens your query analyser products when you
>   tokenize "ES-20D" ?
>3) Have you tried a simpler query (ie: just "content:es\-20d" ) ?
>4) When giving QueryParser a (quoted) phrase search, i don't think you
>   really want to escape that "-" character.
>
>
>
>: Date: Thu, 23 Feb 2006 14:16:42 -0700
>: From: Mufaddal Khumri <mkhumri@allegromedical.com>
>: Reply-To: java-user@lucene.apache.org
>: To: java-user@lucene.apache.org
>: Subject: Getting no hits ...
>:
>: I have been trying to figure out why my query below would not return any
>: hits.
>:
>: I use two custom analyzers for indexing and searching. The one I use for
>: indexing uses this:
>:
>:     public TokenStream tokenStream(String fieldName, Reader reader)
>:     {
>:         TokenStream result = new StandardTokenizer(reader);
>:         result = new StandardFilter(result);
>:         result = new LowerCaseFilter(result);
>:         result = new StopFilter(result, stopSet);
>:         result = new SynonymFilter(result, new MySynonymEngine());
>:         result = new PorterStemFilter(result);
>:         return result;
>:     }
>:
>: The one I use for searching uses this:
>:
>:     public TokenStream tokenStream(String fieldName, Reader reader)
>:     {
>:         TokenStream result = new StandardTokenizer(reader);
>:         result = new StandardFilter(result);
>:         result = new LowerCaseFilter(result);
>:         result = new StopFilter(result, stopSet);
>:         result = new PorterStemFilter(result);
>:         return result;
>:     }
>:
>: (Basically while searching I do not use the SynonymFilter.)
>:
>: I have quite a few products that I index that have the text on which I
>: am querying on.
>:
>: I do a search for this: ES-20D
>:
>: This is the final query that I run:
>: +(+content:es\-20d) +entity:product +(title:"es\-20d"~2^40.0
>: ((title:es\-20d)^10.0) content:"es\-20d"~2^20.0 (content:es\-20d)
>: categoryName:"es\-20d"^80.0)
>:
>: (The content and title fields are Indexed, Tokenized and Stored. The
>: categoryName field is Indexed and Stored.)
>:
>: I get no hits?
>:
>: Where am i going wrong with this? Any pointers?
>:
>: -Thanks.
>:
>:
>:
>:
>:
>: ---------------------------------------------------------------------
>: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>: For additional commands, e-mail: java-user-help@lucene.apache.org
>:
>
>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 22:56:34 2006
Return-Path: <java-user-return-19149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48623 invoked from network); 23 Feb 2006 22:56:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 22:56:33 -0000
Received: (qmail 1168 invoked by uid 500); 23 Feb 2006 22:56:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1144 invoked by uid 500); 23 Feb 2006 22:56:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1133 invoked by uid 99); 23 Feb 2006 22:56:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 14:56:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [150.203.2.42] (HELO anumail2.anu.edu.au) (150.203.2.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 14:56:26 -0800
Received: from smtphost.anu.edu.au (stats.anu.edu.au [150.203.2.50])
	by anumail2.anu.edu.au (8.13.4/8.13.4) with ESMTP id k1NMu3pK027380
	for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 09:56:03 +1100 (EST)
Received: from cairo.anu.edu.au (cairo.anu.edu.au [150.203.224.11])
	by smtphost.anu.edu.au (8.13.4/8.13.4) with ESMTP id k1NMu3KV012228
	for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 09:56:03 +1100 (EST)
Received: from acsr211.anu.edu.au (assda211.anu.edu.au [150.203.11.211])
	by cairo.anu.edu.au (8.12.9/8.12.0) with ESMTP id k1NMv4hL014041
	for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 09:57:04 +1100 (EST)
Message-Id: <6.2.1.2.0.20060224095530.01c87ee8@mail.coombs.anu.edu.au>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.1.2
Date: Fri, 24 Feb 2006 09:59:09 +1100
To: java-user@lucene.apache.org
From: Stephen Gray <Stephen.Gray@anu.edu.au>
Subject: Re: ArrayIndexOutOfBounds being thrown ...
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====================_1119640==.ALT"
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.3.0.1, Antispam-Data: 2006.02.23.134606 internal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=====================_1119640==.ALT
Content-Type: text/plain; charset="us-ascii"; format=flowed

Hi everyone,

Sorry for not replying to original post (from Muffadal Khumri, 22/2) - I'm 
new to the list.

I also had this problem, but it seems not to be in the source - downloading 
and building the1.9-rc1 source fixed the problem for me.

Steve


Stephen Gray
Archive Research Officer
Australian Social Science Data Archive
18 Balmain Crescent (Building #66)
The Australian National University
Canberra ACT 0200

Phone +61 2 6125 2185
Fax +61 2 6125 0627
Web http://assda.anu.edu.au/

--=====================_1119640==.ALT--


From java-user-return-19150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 23 22:56:53 2006
Return-Path: <java-user-return-19150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48743 invoked from network); 23 Feb 2006 22:56:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Feb 2006 22:56:53 -0000
Received: (qmail 2360 invoked by uid 500); 23 Feb 2006 22:56:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2336 invoked by uid 500); 23 Feb 2006 22:56:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2325 invoked by uid 99); 23 Feb 2006 22:56:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 14:56:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 14:56:46 -0800
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Thu, 23 Feb 2006 15:56:24 -0700
Message-ID: <43FE3D8D.10204@allegromedical.com>
Date: Thu, 23 Feb 2006 15:56:13 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Getting no hits ...
References: <43FE263A.5070905@allegromedical.com> <Pine.LNX.4.58.0602231340150.21630@hal.rescomp.berkeley.edu> <43FE3508.70507@allegromedical.com>
In-Reply-To: <43FE3508.70507@allegromedical.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Follow up on my previous email ...

When I execute this query using luke using the standard analyzer on the 
same index, i get 8 hits.
 +(+content:eos\-20d) +entity:product +(title:"eos\-20d"~2^40.0 
((title:eos\-20d)^10.0) content:"eos\-20d"~2^20.0 (content:eos\-20d) 
categoryName:"eos\-20d"^80.0)

I modified my searching code to use the standard analyzer, but i did not 
get any hits back. I am still trying to figure out the problem out. Any 
ideas?

Mufaddal Khumri wrote:

> In my earlier email i put in the wrong query that I am searching on. 
> The correct query is: EOS-20D
>
> And this is the query under question that is producing no hits still:
>
> +(+content:eos\-20d) +entity:product +(title:"eos\-20d"~2^40.0 
> ((title:eos\-20d)^10.0) content:"eos\-20d"~2^20.0 (content:eos\-20d) 
> categoryName:"eos\-20d"^80.0)
>
> I have used the AnalyzerUtils.displayTokensWithFullDetails(analyzer, 
> string); (AnalyzerUtils from the LIA book).
>
> This is part of the log output from using the 
> AnalyzerUtils.displayTokensWithFullDetails(analyzer, string) when this 
> product gets indexed:
> ....
> ....
> 119: [013803044430:857->869:<ALPHANUM>]
> 120: [eos-20d:870->877:<NUM>]
> 121: [011-eos-20d:878->889:<NUM>]
>
> This is part of the log output from using the 
> AnalyzerUtils.displayTokensWithFullDetails(analyzer, string) when I do 
> the search:
> 1: [eos-20d:0->6:<NUM>]
>
> From what I understand I see that the analyzer is producing the same 
> tokens while indexing and during searching.
>
> Chris Hostetter wrote:
>
>> 1) Have you looked at what tokens your indexing analyzer produces 
>> when you
>>   tokenize "ES-20D" ?
>> 2) Have you looked at what tokens your query analyser products when you
>>   tokenize "ES-20D" ?
>> 3) Have you tried a simpler query (ie: just "content:es\-20d" ) ?
>> 4) When giving QueryParser a (quoted) phrase search, i don't think you
>>   really want to escape that "-" character.
>>
>>
>>
>> : Date: Thu, 23 Feb 2006 14:16:42 -0700
>> : From: Mufaddal Khumri <mkhumri@allegromedical.com>
>> : Reply-To: java-user@lucene.apache.org
>> : To: java-user@lucene.apache.org
>> : Subject: Getting no hits ...
>> :
>> : I have been trying to figure out why my query below would not 
>> return any
>> : hits.
>> :
>> : I use two custom analyzers for indexing and searching. The one I 
>> use for
>> : indexing uses this:
>> :
>> :     public TokenStream tokenStream(String fieldName, Reader reader)
>> :     {
>> :         TokenStream result = new StandardTokenizer(reader);
>> :         result = new StandardFilter(result);
>> :         result = new LowerCaseFilter(result);
>> :         result = new StopFilter(result, stopSet);
>> :         result = new SynonymFilter(result, new MySynonymEngine());
>> :         result = new PorterStemFilter(result);
>> :         return result;
>> :     }
>> :
>> : The one I use for searching uses this:
>> :
>> :     public TokenStream tokenStream(String fieldName, Reader reader)
>> :     {
>> :         TokenStream result = new StandardTokenizer(reader);
>> :         result = new StandardFilter(result);
>> :         result = new LowerCaseFilter(result);
>> :         result = new StopFilter(result, stopSet);
>> :         result = new PorterStemFilter(result);
>> :         return result;
>> :     }
>> :
>> : (Basically while searching I do not use the SynonymFilter.)
>> :
>> : I have quite a few products that I index that have the text on which I
>> : am querying on.
>> :
>> : I do a search for this: ES-20D
>> :
>> : This is the final query that I run:
>> : +(+content:es\-20d) +entity:product +(title:"es\-20d"~2^40.0
>> : ((title:es\-20d)^10.0) content:"es\-20d"~2^20.0 (content:es\-20d)
>> : categoryName:"es\-20d"^80.0)
>> :
>> : (The content and title fields are Indexed, Tokenized and Stored. The
>> : categoryName field is Indexed and Stored.)
>> :
>> : I get no hits?
>> :
>> : Where am i going wrong with this? Any pointers?
>> :
>> : -Thanks.
>> :
>> :
>> :
>> :
>> :
>> : ---------------------------------------------------------------------
>> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> : For additional commands, e-mail: java-user-help@lucene.apache.org
>> :
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>  
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 01:27:35 2006
Return-Path: <java-user-return-19151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7034 invoked from network); 24 Feb 2006 01:27:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 01:27:35 -0000
Received: (qmail 78583 invoked by uid 500); 24 Feb 2006 01:27:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78523 invoked by uid 500); 24 Feb 2006 01:27:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78512 invoked by uid 99); 24 Feb 2006 01:27:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 17:27:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sogwhitester@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 17:27:28 -0800
Received: by pproxy.gmail.com with SMTP id e30so233648pya
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 17:27:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:from:to:cc:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=tXEqUHKlb/ZQmyg9c3C4iiyKlo+xcyqh4QchRzqY4awYiXmbbb7iTMfa6fQhFEaLhad5HN9DwscncJbRMwK8HcGsSfWTX6BHeIrl4xQ0nU6yzWoWWSJo6xcr2a5TOLoIoLn3e9OsbXkUP2ny0twrOvSjaCAuPGhCsXuKm+Oj5A8=
Received: by 10.35.79.5 with SMTP id g5mr1840464pyl;
        Thu, 23 Feb 2006 17:27:07 -0800 (PST)
Received: from baihui ( [218.247.170.164])
        by mx.gmail.com with ESMTP id m68sm158252pye.2006.02.23.17.27.06;
        Thu, 23 Feb 2006 17:27:07 -0800 (PST)
Message-ID: <001c01c638e1$6b851a40$1f00a8c0@baihui>
From: "sog" <sogwhitester@gmail.com>
To: <java-user@lucene.apache.org>
Cc: <daniel@nuix.com.au>
References: <006e01c63769$6c6f6010$1f00a8c0@baihui> <43FBF464.6010201@nuix.com.au> <000a01c6378a$8bec1fc0$1f00a8c0@baihui> <43FD0887.1080205@nuix.com.au>
Subject: phrase frequency??
Date: Fri, 24 Feb 2006 09:27:00 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="gb2312";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.1830
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I searched my question in the mail archive, and found that I really want to 
get a phrase frequency, it is an old question which was not solved well.

I traced Lucene source code, and discover that I can get a phrase's IDF from 
the Hits object

weight= PhraseQuery$PhraseWeight  (id=62)
 idf= 8.3973465
 queryNorm= 0.11908524
 queryWeight= 1.0
 similarity= DefaultSimilarity  (id=66)
 this$0= PhraseQuery  (id=29)
 value= 8.3973465

and we can get an approximate formula: score = tf * idf

so: tf(phrase)= score / idf(phrase)


is this correct?



----- Original Message ----- 
From: "Daniel Noll" <daniel@nuix.com.au>
To: <java-user@lucene.apache.org>
Sent: Thursday, February 23, 2006 8:57 AM
Subject: Re: How can I get a term's frequency?


> sog wrote:
>> en, but IndexReader.getTermFreqVector is an abstract method, I do not
>> know how to implement it in an efficient way. Anyone has good advise?
>
> You probably don't need to implement it, it's been implemented already.
> Just call the method.
>
>> I can do it in this way:
>>
>> QueryTermVector vector= new QueryTermVector(Document.getValues(field));
>> freq = result.getTermFrequencies();
>
> I'm not sure because I've never used QueryTermVector before, but the
> fact that QueryTermVector doesn't take an IndexReader as a parameter is
> a good indication that it can't tell you anything about the frequency of
> the term in your documents.
>
> Daniel
>
>
>
>
> -- 
> Daniel Noll
>
> Nuix Australia Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> Phone: (02) 9280 0699
> Fax:   (02) 9212 6902
>
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 01:47:47 2006
Return-Path: <java-user-return-19152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18433 invoked from network); 24 Feb 2006 01:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 01:47:47 -0000
Received: (qmail 94116 invoked by uid 500); 24 Feb 2006 01:47:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94077 invoked by uid 500); 24 Feb 2006 01:47:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94066 invoked by uid 99); 24 Feb 2006 01:47:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 17:47:41 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fairwinds@eastlink.ca designates 24.222.0.30 as permitted sender)
Received: from [24.222.0.30] (HELO smtpout.eastlink.ca) (24.222.0.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 17:47:41 -0800
Received: from ip03.eastlink.ca ([24.222.10.15])
 by mta01.eastlink.ca (Sun Java System Messaging Server 6.2-4.03 (built Sep 22
 2005)) with ESMTP id <0IV6005KE4ZHIRK2@mta01.eastlink.ca> for
 java-user@lucene.apache.org; Thu, 23 Feb 2006 21:47:41 -0400 (AST)
Received: from blk-224-224-216.eastlink.ca (HELO [192.168.1.200])
 ([24.224.224.216]) by ip03.eastlink.ca with ESMTP; Thu,
 23 Feb 2006 21:47:19 -0400
Date: Thu, 23 Feb 2006 21:47:19 -0400
From: David Pratt <fairwinds@eastlink.ca>
Subject: Re: Searching/sorting strategy for many properties for semantic web app
In-reply-to: <468253E5-64B5-45C7-A1F8-3DF2A823A73F@ehatchersolutions.com>
To: java-user@lucene.apache.org
Message-id: <43FE65A7.4050706@eastlink.ca>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAQAAA+k=
References: <43FBD86E.4010604@eastlink.ca>
 <757A8791-747A-47C7-AE45-6BBFA2D14717@ehatchersolutions.com>
 <43FD1782.7040805@eastlink.ca>
 <468253E5-64B5-45C7-A1F8-3DF2A823A73F@ehatchersolutions.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Macintosh/20050923)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Erik. I am continuing to experiment and making good progress. I 
have got my basic functionality established and am now looking at 
sorting and ranking. I guess the good thing is I can adjust and modify 
things as I learn more.  I am reading some archived material from the 
list as well to get a general sense of issues that have come forward. I 
managed to get a powerpoint from apachecon on advanced techniques. This 
  kind of materialhelps to understand what is possible and to discover 
how dynamic Lucene really is.

Regards,
David

Erik Hatcher wrote:
> 
> On Feb 22, 2006, at 9:01 PM, David Pratt wrote:
> 
>> Hi Erik. Many thanks for your reply. I'll likely see if I can find  a 
>> list to pose a couple of questions there way. I am having fun  with 
>> Lucene since it is new to me and I am impressed with the speed  I am 
>> getting. I am reading anything I can get hold of and trying  different 
>> code experiments. So far, the code is fairly straight  forward so not 
>> so concerned about this at the moment.
>>
>> I am really hoping to hear from experienced people like yourself  more 
>> on strategically what to index, what sort of things it would  be a 
>> good idea to store and what to do about a fairly large schema  that 
>> has much metadata to offer. Also perhaps when sorting and  filtering 
>> gets too expensive. I realize that just because the  metadata is 
>> available doesn't necessarily mean you want to even put  it all in an 
>> index. I think these issues are pretty general,  however I know there 
>> are folks on this that would likely advise  some particular path or 
>> direction because of their own experiences  with Lucene. I would 
>> really like to hear from anyone that has been  working with metadata 
>> particularly or anyone generally about these  topics.
> 
> 
> In my University job, I'm dealing with a fair bit of metadata in the  
> form of RDF about 19th century literature objects.  I'm indexing  basic 
> Dublin Core data such as title and author as individual fields,  and 
> also dropping all indexed metadata into a single searchable  field.  
> I've been using Kowari as the metadata store, but it also has  Lucene 
> integration (that I've not tried myself yet).
> 
> I'm not sure what else to add as your query is a bit general.  I  think 
> you'll find if you post more specific questions you're more  likely to 
> get detailed responses.  General queries tend to be too  general to 
> respond to, I find.
> 
> There really are no "best practices" with Lucene in terms of what to  
> index, what to store - these are all highly application dependent and  
> is often something I tune as the application itself evolves.
> 
>     Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 02:53:56 2006
Return-Path: <java-user-return-19153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44964 invoked from network); 24 Feb 2006 02:53:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 02:53:56 -0000
Received: (qmail 68232 invoked by uid 500); 24 Feb 2006 02:53:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68207 invoked by uid 500); 24 Feb 2006 02:53:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68196 invoked by uid 99); 24 Feb 2006 02:53:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 18:53:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Feb 2006 18:53:49 -0800
Received: by wproxy.gmail.com with SMTP id 68so204593wra
        for <java-user@lucene.apache.org>; Thu, 23 Feb 2006 18:53:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DeJhObasVENi+cAFQQuIpVFh5hmPeo2dFIJXZ78Emc2sZgBtfJPZ6LlC+mQl48IDDCqhJMZRY1L8cCW4TXy9CQnqaWvUMHUL7PY2w6uYuHu2kCkm4BXWrl+o7qREo+0sNY1jUhpqyoceHxNalw2DNSIFO7PNGhVKPjpEJ6p/QYc=
Received: by 10.54.148.11 with SMTP id v11mr978182wrd;
        Thu, 23 Feb 2006 18:53:28 -0800 (PST)
Received: by 10.54.156.11 with HTTP; Thu, 23 Feb 2006 18:53:28 -0800 (PST)
Message-ID: <901c03930602231853q5dc9d42do5228b216b3951b4@mail.gmail.com>
Date: Fri, 24 Feb 2006 10:53:28 +0800
From: "Dave Kor" <davekor@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Frequency of phrase
In-Reply-To: <43FD72B0.3050609@isb-sib.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <43FD72B0.3050609@isb-sib.ch>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not sure if this is what you want, but what I have done is to issue
exact phrase queries to Lucene and counted the number of hits found.

On 2/23/06, Eric Jain <Eric.Jain@isb-sib.ch> wrote:
> This is somewhat related to a question sent to this list a while ago: Is
> there an efficient way to count the number of occurrences of a phrase (no=
t
> term) in an index?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 09:44:31 2006
Return-Path: <java-user-return-19154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72739 invoked from network); 24 Feb 2006 09:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 09:44:22 -0000
Received: (qmail 98516 invoked by uid 500); 24 Feb 2006 09:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98236 invoked by uid 500); 24 Feb 2006 09:44:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98225 invoked by uid 99); 24 Feb 2006 09:44:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 01:44:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 01:44:12 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1O9hj67026385
	for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 10:43:46 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [268.0.0/268]); Fri, 24 Feb 2006 10:42:52 +0100
Message-ID: <43FED51C.2020504@isb-sib.ch>
Date: Fri, 24 Feb 2006 10:42:52 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Frequency of phrase
References: <43FD72B0.3050609@isb-sib.ch> <901c03930602231853q5dc9d42do5228b216b3951b4@mail.gmail.com>
In-Reply-To: <901c03930602231853q5dc9d42do5228b216b3951b4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dave Kor wrote:
> Not sure if this is what you want, but what I have done is to issue
> exact phrase queries to Lucene and counted the number of hits found.

This gives you the number of documents containing the phrase, rather than 
the number of occurrences of the phrase itself, but that may in fact be 
good enough...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 11:26:42 2006
Return-Path: <java-user-return-19155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21104 invoked from network); 24 Feb 2006 11:26:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 11:26:38 -0000
Received: (qmail 21807 invoked by uid 500); 24 Feb 2006 11:26:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21778 invoked by uid 500); 24 Feb 2006 11:26:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21767 invoked by uid 99); 24 Feb 2006 11:26:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 03:26:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.146.137.36] (HELO mailserver.as13009.net) (213.146.137.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 03:26:30 -0800
Received: from [213.146.135.126] (helo=limesvr01.limehouse.co.uk)
	by mailserver.as13009.net with esmtp (Exim 4.43)
	id 1FCc0l-0000IN-Ud
	for java-user@lucene.apache.org; Fri, 24 Feb 2006 12:25:27 +0000
Received: from [127.0.0.1] ([192.168.42.103]) by limesvr01.limehouse.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 24 Feb 2006 11:26:11 +0000
Message-ID: <43FEED52.3020005@limehouse.co.uk>
Date: Fri, 24 Feb 2006 11:26:10 +0000
From: Richard Grantham <richard.grantham@limehouse.co.uk>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Restricting the searchable fields
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 24 Feb 2006 11:26:11.0000 (UTC) FILETIME=[1D0BCB80:01C63935]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi list,

I've been working on trying to restrict the indexed fields that are 
available to different types of search.  I have two 'classes' of search: 
admin and standard.  Admin may search all fields, standard may search 
only three or four.  Unfortunately I've not had much joy reliably 
implementing this in Lucene.

Here is my first implementation (apologies for the 1.4.3 code)

// get the fields that may be searched and set the flags to be
// prohibited by default
String[] fields = getAdminSearchFields();
int[] flags = new int[fields.length];
for (int i = 0; i < flags.length; i++) {
     flags[i] = MultiFieldQueryParser.PROHIBITED_FIELD;
}

// get the fields we are allowed to search
String[] searchFields = null;
switch (mode) {
     case MODE_ADMIN :
         searchFields = getAdminSearchFields();
         break;
     case MODE_STANDARD :
     default:
         searchFields = getStandardSearchFields();
         break;
}

// set the flags on the allowed fields to normal
for (int i = 0; i < fields.length; i++) {
     for (int j = 0; j < searchFields.length; j++) {
         if (fields[i].equals(searchFields[j])) {
             flags[i] = MultiFieldQueryParser.NORMAL_FIELD;
         }
     }
}

Query query = MultiFieldQueryParser.parse(queryString, fields, flags,
     new StandardAnalyzer());

The search fields are just string arrays:

protected String[] getAdminSearchFields() {
     // admin search fields
     return new String[] { ADDRESS, EMAIL_ADDRESS, FAMILY_NAME, FAX_NUMBER,
         GIVEN_NAME, HISTORICAL_ID, NOTES, ORGANISATION, PHONE_NUMBER, 
POSITION,
         POST_CODE, POST_TOWN, TITLE, USERNAME };
}

protected String[] getStandardSearchFields() {
     // standard search fields
     return new String[] { TITLE, FAMILY_NAME, GIVEN_NAME, ORGANISATION };
}

I have found that the standard query doesn't work as intended.  I am not 
able to specify specific search fields in the query and sometimes 
searches on permitted fields fail.  An example of a query which would 
return no results even though there is a hit would be 'givenName:fred'. 
  I suppose this makes sense given the query that's generated.

My second attempt looks like this:

// get the fields we are allowed to search
String[] searchFields = null;
switch (mode) {
     case MODE_ADMIN :
         searchFields = getAdminSearchFields();
         break;
     case MODE_STANDARD :
     default:
         searchFields = getStandardSearchFields();
         break;
}

Query query = MultiFieldQueryParser.parse(queryString, searchFields,
     new StandardAnalyzer());

This mostly works.  The point where it falls down is when you specify a 
field I want prohibited in the query string.  Eg. searching for 'london' 
will fail, but searching for 'address:london' will return results.

Can anyone recommend a method that might achieve what I want?  I really 
don't want standard users to be able to search on address, etc.

rgds,

Richard


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 12:11:34 2006
Return-Path: <java-user-return-19156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40517 invoked from network); 24 Feb 2006 12:11:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 12:11:32 -0000
Received: (qmail 89439 invoked by uid 500); 24 Feb 2006 12:11:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89410 invoked by uid 500); 24 Feb 2006 12:11:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89399 invoked by uid 99); 24 Feb 2006 12:11:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 04:11:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 04:11:22 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4010733D10D; Fri, 24 Feb 2006 07:11:00 -0500 (EST)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 5064E33D10C
	for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 07:10:59 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43FEED52.3020005@limehouse.co.uk>
References: <43FEED52.3020005@limehouse.co.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B47BEAB6-0FCC-4C41-94B0-62F00E6984FA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Restricting the searchable fields
Date: Fri, 24 Feb 2006 07:10:56 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 24, 2006, at 6:26 AM, Richard Grantham wrote:
> Query query = MultiFieldQueryParser.parse(queryString, searchFields,
>     new StandardAnalyzer());
>
> This mostly works.  The point where it falls down is when you  
> specify a field I want prohibited in the query string.  Eg.  
> searching for 'london' will fail, but searching for  
> 'address:london' will return results.
>
> Can anyone recommend a method that might achieve what I want?  I  
> really don't want standard users to be able to search on address, etc.

If you are handing a user-typed String to (MultiField)QueryParser you  
cannot, be default, prevent any indexed fields from being searched.   
You could, however, create custom QueryParser and  
MultiFieldQueryParser subclasses that could prevent this, I believe,  
by overriding all the various get* methods that return a Query and  
block specific fields as desired.  I'm not quite sure of the details  
and am just mentioning this off the top of my head, so maybe there  
are some issues I haven't considered that make this tougher than just  
that.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 12:12:43 2006
Return-Path: <java-user-return-19157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41016 invoked from network); 24 Feb 2006 12:12:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 12:12:42 -0000
Received: (qmail 91330 invoked by uid 500); 24 Feb 2006 12:12:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91136 invoked by uid 500); 24 Feb 2006 12:12:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91122 invoked by uid 99); 24 Feb 2006 12:12:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 04:12:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jprogramista@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO pproxy.gmail.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 04:12:35 -0800
Received: by pproxy.gmail.com with SMTP id t32so363458pyc
        for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 04:12:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FJAwQoV3f66jc1DIKJ8XP0h1xpEKMjTcpg6tQY70Nh1mJtNeddYJmxPXNU6cnQaicnpGeQPquYn0q416ECrJX5rE8IdZ1nDNh9OQ4he4/OP7yIrQmtZIxKdFXhvCW1b9YbSysMrGVCnImXZhwmGeR2ptA4HA+MXjx3HNMLlrvj0=
Received: by 10.35.111.7 with SMTP id o7mr2532249pym;
        Fri, 24 Feb 2006 04:12:14 -0800 (PST)
Received: by 10.35.18.11 with HTTP; Fri, 24 Feb 2006 04:12:14 -0800 (PST)
Message-ID: <af75a3a20602240412y16bfea10v913c01e667bf9ee6@mail.gmail.com>
Date: Fri, 24 Feb 2006 13:12:14 +0100
From: "Java Programmer" <jprogramista@gmail.com>
To: java-user@lucene.apache.org
Subject: Hitmaps of results (number of results for category/filter or groupping results)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15082_16749381.1140783134630"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_15082_16749381.1140783134630
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,
I'm quite new to Lucene but I pretty amazed with her abilities. My question
consider something called commonly as "hitmap" is it possible to do it in
Lucene, maybe someone did it already, or maybe even it is built-in?
By term hitmap we describe e.g. ability to group results into category, for
example when searching eBay you get also an hitmap of results within
category (Computers [10], Sports [111], etc.) . So is it possible to do thi=
s
in Lucene, without huge CPU/time consumption?
I appreciate for any hints for this problem,

Best Regards
Adrian

------=_Part_15082_16749381.1140783134630--

From java-user-return-19158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 12:16:57 2006
Return-Path: <java-user-return-19158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42457 invoked from network); 24 Feb 2006 12:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 12:16:56 -0000
Received: (qmail 94362 invoked by uid 500); 24 Feb 2006 12:16:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94329 invoked by uid 500); 24 Feb 2006 12:16:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94308 invoked by uid 99); 24 Feb 2006 12:16:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 04:16:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.146.137.36] (HELO mailserver.as13009.net) (213.146.137.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 04:16:47 -0800
Received: from [213.146.135.126] (helo=limesvr01.limehouse.co.uk)
	by mailserver.as13009.net with esmtp (Exim 4.43)
	id 1FCcnQ-0007PL-RI
	for java-user@lucene.apache.org; Fri, 24 Feb 2006 13:15:44 +0000
Received: from [127.0.0.1] ([192.168.42.103]) by limesvr01.limehouse.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 24 Feb 2006 12:16:28 +0000
Message-ID: <43FEF91B.9020100@limehouse.co.uk>
Date: Fri, 24 Feb 2006 12:16:27 +0000
From: Richard Grantham <richard.grantham@limehouse.co.uk>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Restricting the searchable fields
References: <43FEED52.3020005@limehouse.co.uk> <B47BEAB6-0FCC-4C41-94B0-62F00E6984FA@ehatchersolutions.com>
In-Reply-To: <B47BEAB6-0FCC-4C41-94B0-62F00E6984FA@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 24 Feb 2006 12:16:28.0000 (UTC) FILETIME=[23517600:01C6393C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Erik, I'll give it a go and let you know how I get on.  I suppose 
it's a bit of a wierd request but it's a requirement on the project I'm 
working on.

Erik Hatcher wrote:
> 
> On Feb 24, 2006, at 6:26 AM, Richard Grantham wrote:
> 
>> Query query = MultiFieldQueryParser.parse(queryString, searchFields,
>>     new StandardAnalyzer());
>>
>> This mostly works.  The point where it falls down is when you  specify 
>> a field I want prohibited in the query string.  Eg.  searching for 
>> 'london' will fail, but searching for  'address:london' will return 
>> results.
>>
>> Can anyone recommend a method that might achieve what I want?  I  
>> really don't want standard users to be able to search on address, etc.
> 
> 
> If you are handing a user-typed String to (MultiField)QueryParser you  
> cannot, be default, prevent any indexed fields from being searched.   
> You could, however, create custom QueryParser and  MultiFieldQueryParser 
> subclasses that could prevent this, I believe,  by overriding all the 
> various get* methods that return a Query and  block specific fields as 
> desired.  I'm not quite sure of the details  and am just mentioning this 
> off the top of my head, so maybe there  are some issues I haven't 
> considered that make this tougher than just  that.
> 
>     Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 12:26:23 2006
Return-Path: <java-user-return-19159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46857 invoked from network); 24 Feb 2006 12:26:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 12:26:21 -0000
Received: (qmail 9389 invoked by uid 500); 24 Feb 2006 12:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9298 invoked by uid 500); 24 Feb 2006 12:26:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9287 invoked by uid 99); 24 Feb 2006 12:26:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 04:26:06 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.37] (HELO web26015.mail.ukl.yahoo.com) (217.146.177.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Feb 2006 04:26:05 -0800
Received: (qmail 8349 invoked by uid 60001); 24 Feb 2006 12:25:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=18+6ffDJWN3rmKc1eAu/HGlVX8RmyZ54fdcB1qlg35PNoe5o8m9XlKxHiA4ocQZICkYtGE1HVGHbq+lxnxlqq0kkoStHxGQSfq6qT6vpfP6Te9m9WhFfS8qm4Ylfz1oSEfGr2oDr+g8fpiweEYl3NdqKUw7RRlClDl5o6tKbm7c=  ;
Message-ID: <20060224122543.8347.qmail@web26015.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26015.mail.ukl.yahoo.com via HTTP; Fri, 24 Feb 2006 12:25:43 GMT
Date: Fri, 24 Feb 2006 12:25:43 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Hitmaps of results (number of results for category/filter or groupping results)
To: java-user@lucene.apache.org
In-Reply-To: <af75a3a20602240412y16bfea10v913c01e667bf9ee6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This should really be a FAQ entry somewhere...

http://www.mail-archive.com/java-user@lucene.apache.org/msg05123.html


--- Java Programmer <jprogramista@gmail.com> wrote:

> Hello,
> I'm quite new to Lucene but I pretty amazed with her
> abilities. My question
> consider something called commonly as "hitmap" is it
> possible to do it in
> Lucene, maybe someone did it already, or maybe even
> it is built-in?
> By term hitmap we describe e.g. ability to group
> results into category, for
> example when searching eBay you get also an hitmap
> of results within
> category (Computers [10], Sports [111], etc.) . So
> is it possible to do this
> in Lucene, without huge CPU/time consumption?
> I appreciate for any hints for this problem,
> 
> Best Regards
> Adrian
> 



		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 12:28:19 2006
Return-Path: <java-user-return-19160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47646 invoked from network); 24 Feb 2006 12:28:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 12:28:13 -0000
Received: (qmail 12416 invoked by uid 500); 24 Feb 2006 12:28:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12200 invoked by uid 500); 24 Feb 2006 12:28:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12185 invoked by uid 99); 24 Feb 2006 12:28:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 04:28:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.125.145.37] (HELO hermes.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 04:28:01 -0800
Received: from vienna.propylon.com ([213.94.211.166] helo=HUGHROSS)
	by hermes.propylon.com with esmtp (Exim 4.50)
	id 1FCc2r-0003Pz-Vj
	for java-user@lucene.apache.org; Fri, 24 Feb 2006 12:27:39 +0000
From: "Hugh Ross" <hugh.ross@propylon.com>
To: <java-user@lucene.apache.org>
Date: Fri, 24 Feb 2006 12:27:10 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
Thread-Index: AcY4uaqp86GG97HFR2aZzcSSs7fpXgAg3ARQ
In-reply-to: <EC2A805C-A475-4FD1-8833-F8C64C6CBC8F@ehatchersolutions.com>
Message-Id: <E1FCc2r-0003Pz-Vj@hermes.propylon.com>
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: hugh.ross@propylon.com
Subject: RE: Hierarchical Navigation in Lucene
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on hermes.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on hermes.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,
	MSGID_FROM_MTA_ID autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Eric

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: 23 February 2006 20:42
To: java-user@lucene.apache.org
Subject: Re: Hierarchical Navigation in Lucene


On Feb 23, 2006, at 12:37 PM, Hugh Ross wrote:

> Hi,
>
> We have a custom built document repository which is searchable /  
> indexed via
> lucene.
>
> I want to put together some kind of navigation framework based on the
> repository metadata (which is also indexed with lucene).
>
>
> Is there a best-practice way to do this.?
>

I don't know about a best practice, but I've used term enumeration  
coupled with PrefixQuery's to enable hierarchical navigation on my  
(very dusty and way outdated) blog: http://www.blogscene.org/erik

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 13:11:36 2006
Return-Path: <java-user-return-19161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66877 invoked from network); 24 Feb 2006 13:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 13:11:35 -0000
Received: (qmail 72207 invoked by uid 500); 24 Feb 2006 13:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72172 invoked by uid 500); 24 Feb 2006 13:11:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72161 invoked by uid 99); 24 Feb 2006 13:11:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 05:11:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.237.132.8] (HELO wp001.webpack.hosteurope.de) (80.237.132.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 05:11:28 -0800
Received: by wp001.webpack.hosteurope.de running Exim 4.43 using esmtpa
	from dcsigate.dcsi.de ([62.54.117.250] helo=[192.168.1.226])
	id 1FCcix-0000a0-Fm; Fri, 24 Feb 2006 14:11:07 +0100
Message-ID: <43FF058A.3080308@thopap.de>
Date: Fri, 24 Feb 2006 14:09:30 +0100
From: Thomas Papke <tp@thopap.de>
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Question to Lucene Index
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello there,

i am a "newby" in usage of Apache Lucene. If have a relativly big 
database indexed by lucene (about 300MB File). Up to now - all users 
could search over the hole index. How to restrict the resultset? I have 
tried it with adding some BooleanQuerys to restrict entries. But with 
this solution i get sometimes a "More than 32 required/prohibited 
clauses in query." Exception. Anyone a solution for my that problem or 
some sites for me where i could look at (with some examples)? Or is 
there a way to generate (relativly fast) a subindex?

Thanks a lot for answer,

Thomas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 13:24:09 2006
Return-Path: <java-user-return-19162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72862 invoked from network); 24 Feb 2006 13:24:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 13:24:09 -0000
Received: (qmail 83690 invoked by uid 500); 24 Feb 2006 13:24:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83657 invoked by uid 500); 24 Feb 2006 13:24:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83646 invoked by uid 99); 24 Feb 2006 13:24:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 05:24:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.199 as permitted sender)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Feb 2006 05:24:02 -0800
Received: (qmail 8196 invoked from network); 24 Feb 2006 13:23:41 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-3.us4.outblaze.com with SMTP; 24 Feb 2006 13:23:41 -0000
Message-ID: <43FF08DE.4020508@curtin.com>
Date: Fri, 24 Feb 2006 08:23:42 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Question to Lucene Index
References: <43FF058A.3080308@thopap.de>
In-Reply-To: <43FF058A.3080308@thopap.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thomas Papke wrote:

> i am a "newby" in usage of Apache Lucene. If have a relativly big 
> database indexed by lucene (about 300MB File). Up to now - all users 
> could search over the hole index. How to restrict the resultset? I have 
> tried it with adding some BooleanQuerys to restrict entries. But with 
> this solution i get sometimes a "More than 32 required/prohibited 
> clauses in query." Exception. Anyone a solution for my that problem or 
> some sites for me where i could look at (with some examples)? Or is 
> there a way to generate (relativly fast) a subindex?

You can increase the limit from 32 to just about anything you want via the 
system property org.apache.lucene.maxClauseCount.  You can use code like this:

System.setProperty"org.apache.lucene.maxClauseCount", "1000000");

Or, you can set a value on the JVM's command line with -D.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 13:26:31 2006
Return-Path: <java-user-return-19163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74171 invoked from network); 24 Feb 2006 13:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 13:26:31 -0000
Received: (qmail 90096 invoked by uid 500); 24 Feb 2006 13:26:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89947 invoked by uid 500); 24 Feb 2006 13:26:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89887 invoked by uid 99); 24 Feb 2006 13:26:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 05:26:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.237.132.8] (HELO wp001.webpack.hosteurope.de) (80.237.132.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 05:26:11 -0800
Received: by wp001.webpack.hosteurope.de running Exim 4.43 using esmtpa
	from dcsigate.dcsi.de ([62.54.117.250] helo=[192.168.1.226])
	id 1FCcxC-0001s0-EK; Fri, 24 Feb 2006 14:25:50 +0100
Message-ID: <43FF08FD.9000005@thopap.de>
Date: Fri, 24 Feb 2006 14:24:13 +0100
From: Thomas Papke <tp@thopap.de>
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Question to Lucene Index
References: <43FF058A.3080308@thopap.de> <43FF08DE.4020508@curtin.com>
In-Reply-To: <43FF08DE.4020508@curtin.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What is the disadvantage of doing that?

Michael D. Curtin schrieb:

> Thomas Papke wrote:
>
>> i am a "newby" in usage of Apache Lucene. If have a relativly big 
>> database indexed by lucene (about 300MB File). Up to now - all users 
>> could search over the hole index. How to restrict the resultset? I 
>> have tried it with adding some BooleanQuerys to restrict entries. But 
>> with this solution i get sometimes a "More than 32 
>> required/prohibited clauses in query." Exception. Anyone a solution 
>> for my that problem or some sites for me where i could look at (with 
>> some examples)? Or is there a way to generate (relativly fast) a 
>> subindex?
>
>
> You can increase the limit from 32 to just about anything you want via 
> the system property org.apache.lucene.maxClauseCount.  You can use 
> code like this:
>
> System.setProperty"org.apache.lucene.maxClauseCount", "1000000");
>
> Or, you can set a value on the JVM's command line with -D.
>
> Good luck!
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 13:31:58 2006
Return-Path: <java-user-return-19164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77824 invoked from network); 24 Feb 2006 13:31:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 13:31:57 -0000
Received: (qmail 6040 invoked by uid 500); 24 Feb 2006 13:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6015 invoked by uid 500); 24 Feb 2006 13:31:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6004 invoked by uid 99); 24 Feb 2006 13:31:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 05:31:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.196 as permitted sender)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Feb 2006 05:31:50 -0800
Received: (qmail 1293 invoked from network); 24 Feb 2006 13:31:30 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-1.us4.outblaze.com with SMTP; 24 Feb 2006 13:31:29 -0000
Message-ID: <43FF0AB2.6080501@curtin.com>
Date: Fri, 24 Feb 2006 08:31:30 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Question to Lucene Index
References: <43FF058A.3080308@thopap.de> <43FF08DE.4020508@curtin.com> <43FF08FD.9000005@thopap.de>
In-Reply-To: <43FF08FD.9000005@thopap.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thomas Papke wrote:

> What is the disadvantage of doing that?

Besides being a bit awkward, it could use more RAM and time to compile 
queries.  That could be because a query like "foo*" gets expanded into all the 
terms from the index that begin with "foo", ORed together, like so:

"foo" OR "food" OR "fool" OR "foot" ...

I suppose it's theoretically possible that if you have millions of unique 
terms that all begin with the same thing and then use that common prefix as a 
query, you could notice.  I haven't noticed anything at all in my application, 
which has a few million documents and ~10 million unique terms.

In other words, in practical situations I doubt there are any disadvantages.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 13:33:08 2006
Return-Path: <java-user-return-19165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78307 invoked from network); 24 Feb 2006 13:33:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 13:33:08 -0000
Received: (qmail 7579 invoked by uid 500); 24 Feb 2006 13:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7558 invoked by uid 500); 24 Feb 2006 13:33:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7547 invoked by uid 99); 24 Feb 2006 13:33:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 05:33:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.20.168.25] (HELO uar.i-hypergrid.com) (217.20.168.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 05:33:00 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 0F77DBAE57
	for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 15:32:37 +0200 (EET)
Message-ID: <43FF0AF4.9000209@i-hypergrid.com>
Date: Fri, 24 Feb 2006 15:32:36 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Question to Lucene Index
References: <43FF058A.3080308@thopap.de> <43FF08DE.4020508@curtin.com>
In-Reply-To: <43FF08DE.4020508@curtin.com>
Content-Type: multipart/alternative;
 boundary="------------020400050109090009070504"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------020400050109090009070504
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

This is not the case.

maxClauseCount limit number of terms that can fit into BooleanQuery 
during some queries rewriting. And default value is 1024, not 32.

32 required/prohibited clauses is limitation of Lucene 1.4.3 due to 
usage of bit patterns to mask required/prohibited clauses.
You can solve this problem by using Lucene 1.9 RC or use Filters.

Michael D. Curtin wrote:
> Thomas Papke wrote:
>
>> i am a "newby" in usage of Apache Lucene. If have a relativly big 
>> database indexed by lucene (about 300MB File). Up to now - all users 
>> could search over the hole index. How to restrict the resultset? I 
>> have tried it with adding some BooleanQuerys to restrict entries. But 
>> with this solution i get sometimes a "More than 32 
>> required/prohibited clauses in query." Exception. Anyone a solution 
>> for my that problem or some sites for me where i could look at (with 
>> some examples)? Or is there a way to generate (relativly fast) a 
>> subindex?
>
> You can increase the limit from 32 to just about anything you want via 
> the system property org.apache.lucene.maxClauseCount.  You can use 
> code like this:
>
> System.setProperty"org.apache.lucene.maxClauseCount", "1000000");
>
> Or, you can set a value on the JVM's command line with -D.
>
> Good luck!
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
regards,
Volodymyr Bychkoviak


--------------020400050109090009070504--

From java-user-return-19166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 13:52:30 2006
Return-Path: <java-user-return-19166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97228 invoked from network); 24 Feb 2006 13:52:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 13:52:29 -0000
Received: (qmail 43028 invoked by uid 500); 24 Feb 2006 13:52:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42999 invoked by uid 500); 24 Feb 2006 13:52:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42988 invoked by uid 99); 24 Feb 2006 13:52:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 05:52:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.199 as permitted sender)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Feb 2006 05:52:21 -0800
Received: (qmail 3997 invoked from network); 24 Feb 2006 13:52:01 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-3.us4.outblaze.com with SMTP; 24 Feb 2006 13:52:00 -0000
Message-ID: <43FF0F80.5090806@curtin.com>
Date: Fri, 24 Feb 2006 08:52:00 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Question to Lucene Index
References: <43FF058A.3080308@thopap.de> <43FF08DE.4020508@curtin.com> <43FF0AF4.9000209@i-hypergrid.com>
In-Reply-To: <43FF0AF4.9000209@i-hypergrid.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Volodymyr Bychkoviak wrote:

> This is not the case.
> 
> maxClauseCount limit number of terms that can fit into BooleanQuery 
> during some queries rewriting. And default value is 1024, not 32.
> 
> 32 required/prohibited clauses is limitation of Lucene 1.4.3 due to 
> usage of bit patterns to mask required/prohibited clauses.
> You can solve this problem by using Lucene 1.9 RC or use Filters.

Doh!  Wrong Exception.  Volodymyr is right.

Thomas, what do your extra clauses look like?  Can they be combined in 
sub-clauses, as it were?  For example, if you want hits with A, subject to the 
restrictions that they don't have B, nor C, ..., you might be able to use a 
query construct like

+A -(B || C || ...)

The components of the B || C || ... part aren't required nor prohibited, so 
you wouldn't run up against the 32 limit (you might hit the 1024 limit, but 
then you now know how to increase that).  If you're constructing the Query 
yourself (not via the QueryParser), then something like this:

BooleanQuery q1 = new BooleanQuery();
q1.add(new TermQuery(new Term("field", "B"), false, false);
q1.add(new TermQuery(new Term("field", "C"), false, false);
     ...
q2 = new BooleanQuery();
q2.add(new TermQuery(new Term("field", "A"), true, false);
q2.add(q1, false, true);
// Use q2 for searching


Note also that you could substitute any Query-derived object for the new 
TermQuery()s in q1.  If you need to add restrictions more complicated than a 
single value of a single field, build up another Query-derived object for that 
restriction, and put it into q1 instead.

Good luck!  (And sorry about the misdirection)

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 17:42:12 2006
Return-Path: <java-user-return-19167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35178 invoked from network); 24 Feb 2006 17:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 17:42:11 -0000
Received: (qmail 97251 invoked by uid 500); 24 Feb 2006 17:41:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97144 invoked by uid 500); 24 Feb 2006 17:41:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97106 invoked by uid 99); 24 Feb 2006 17:41:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 09:41:56 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.179.229] (HELO web36115.mail.mud.yahoo.com) (66.163.179.229)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Feb 2006 09:41:55 -0800
Received: (qmail 12145 invoked by uid 60001); 24 Feb 2006 17:41:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=oRyRyVKZ6dZp/Y8X802YXukJIiSmoJno2MC2trDvP79GejC+0kU9U6SO5xaHt/lJ68eZf3IZmFZftH/JsYEZhV8L/w6p/NkKy/N5dZtxkKGPD8rH2Nm0+TkgN+xZG8rUBBVwyvtlhN6JmcJLaA5+YLZNeNRq4lLQnzKkA1RAS1A=  ;
Message-ID: <20060224174133.12143.qmail@web36115.mail.mud.yahoo.com>
Received: from [124.7.80.93] by web36115.mail.mud.yahoo.com via HTTP; Fri, 24 Feb 2006 09:41:33 PST
Date: Fri, 24 Feb 2006 09:41:33 -0800 (PST)
From: revati joshi <revati_joshi83@yahoo.com>
Subject: Indexing speed
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-97402141-1140802893=:11678"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-97402141-1140802893=:11678
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hi all,
           I just wnted to know how to increase the speed of indexing of files .
  I tried it by using Multithreading approach but couldn't get much better performance.
  It was same as it is in usual sequential indexing.Is there any other approach to get better Indexing performance incase of large file structure.?
  waiting for the reply.
        regards,
        Revati.

		
---------------------------------
 
 What are the most popular cars? Find out at Yahoo! Autos 
--0-97402141-1140802893=:11678--

From java-user-return-19168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 18:37:28 2006
Return-Path: <java-user-return-19168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62937 invoked from network); 24 Feb 2006 18:37:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 18:37:28 -0000
Received: (qmail 44095 invoked by uid 500); 24 Feb 2006 18:37:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44060 invoked by uid 500); 24 Feb 2006 18:37:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44049 invoked by uid 99); 24 Feb 2006 18:37:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 10:37:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 10:37:20 -0800
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net [207.115.4.22])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k1OIat3W009211
	for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 13:36:58 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net [69.228.231.148])
	by pimout6-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id k1OIat3A049578;
	Fri, 24 Feb 2006 13:36:56 -0500
Message-ID: <43FF5247.9000303@apache.org>
Date: Fri, 24 Feb 2006 10:36:55 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing speed
References: <20060224174133.12143.qmail@web36115.mail.mud.yahoo.com>
In-Reply-To: <20060224174133.12143.qmail@web36115.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

revati joshi wrote:
> hi all,
>            I just wnted to know how to increase the speed of indexing of files .
>   I tried it by using Multithreading approach but couldn't get much better performance.
>   It was same as it is in usual sequential indexing.Is there any other approach to get better Indexing performance incase of large file structure.?

It would be better to know more about how you're currently using Lucene. 
  For example, it is much faster to index many documents on a single 
IndexWriter rather than to create a new IndexWriter per document.  It's 
also somewhat faster to not store document text in the index.  Etc.

That said, the single parameter that can most improve things is the 
number of buffered docs:

http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#setMaxBufferedDocs(int)

Try increasing this to, e.g., 50.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 18:38:46 2006
Return-Path: <java-user-return-19169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63409 invoked from network); 24 Feb 2006 18:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 18:38:45 -0000
Received: (qmail 45863 invoked by uid 500); 24 Feb 2006 18:38:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45612 invoked by uid 500); 24 Feb 2006 18:38:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45601 invoked by uid 99); 24 Feb 2006 18:38:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 10:38:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 10:38:38 -0800
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net [207.115.4.22])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k1OIcF3W012457
	for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 13:38:16 -0500
X-ORBL: [69.228.231.148]
Received: from [192.168.168.15] (adsl-69-228-231-148.dsl.pltn13.pacbell.net [69.228.231.148])
	by pimout6-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id k1OIcFFe030964;
	Fri, 24 Feb 2006 13:38:16 -0500
Message-ID: <43FF5297.8060303@apache.org>
Date: Fri, 24 Feb 2006 10:38:15 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Frequency of phrase
References: <43FD72B0.3050609@isb-sib.ch> <901c03930602231853q5dc9d42do5228b216b3951b4@mail.gmail.com> <43FED51C.2020504@isb-sib.ch>
In-Reply-To: <43FED51C.2020504@isb-sib.ch>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric Jain wrote:
> This gives you the number of documents containing the phrase, rather 
> than the number of occurrences of the phrase itself, but that may in 
> fact be good enough...

If you use a span query then you can get the actual number of phrase 
instances.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 24 19:48:03 2006
Return-Path: <java-user-return-19170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96488 invoked from network); 24 Feb 2006 19:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Feb 2006 19:48:02 -0000
Received: (qmail 28298 invoked by uid 500); 24 Feb 2006 19:47:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28000 invoked by uid 500); 24 Feb 2006 19:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27983 invoked by uid 99); 24 Feb 2006 19:47:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 11:47:55 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Feb 2006 11:47:54 -0800
Received: (qmail 9000 invoked by uid 60001); 24 Feb 2006 19:47:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=awmsSxZGYfZ3pKwu2dD58LFEij3veEtMSpz5UYIkR/EDsdVRjU5t69wfnaO9cI2knFN8iPeRLQzRs4JkrGP96Hx4CvsVvA0telsFLp+GUnPBndtT2sXenqACWv5hyghvnVd8yMnSRf7qeJ7o7Nzz0SKyf/tzjbRfoZERFxN1hw4=  ;
Message-ID: <20060224194733.8998.qmail@web50311.mail.yahoo.com>
Date: Fri, 24 Feb 2006 11:47:33 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing speed
To: java-user@lucene.apache.org
In-Reply-To: <20060224174133.12143.qmail@web36115.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Revati,

If you have Lucene in Action, look at Chapter 2, ection 2.7 - http://www.lucenebook.com/search?query=index+performance+control
If you don't have LIA, look at IndexWriter class and its mergeFactor and maxBufferedDocs parameters.  You can also look for my article about indexing with Lucene (link in the Wiki), which includes code for playing with various parameters and explains what's going on, etc.

Otis


----- Original Message ----
From: revati joshi <revati_joshi83@yahoo.com>
To: java-user@lucene.apache.org
Sent: Fri 24 Feb 2006 12:41:33 PM EST
Subject: Indexing speed

hi all,
           I just wnted to know how to increase the speed of indexing of files .
  I tried it by using Multithreading approach but couldn't get much better performance.
  It was same as it is in usual sequential indexing.Is there any other approach to get better Indexing performance incase of large file structure.?
  waiting for the reply.
        regards,
        Revati.

        
---------------------------------
 
 What are the most popular cars? Find out at Yahoo! Autos 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 25 01:17:09 2006
Return-Path: <java-user-return-19171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25792 invoked from network); 25 Feb 2006 01:17:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Feb 2006 01:17:09 -0000
Received: (qmail 48004 invoked by uid 500); 25 Feb 2006 01:17:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47940 invoked by uid 500); 25 Feb 2006 01:17:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47929 invoked by uid 99); 25 Feb 2006 01:17:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 17:17:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of csliupu@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO zproxy.gmail.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Feb 2006 17:17:02 -0800
Received: by zproxy.gmail.com with SMTP id 18so499561nzp
        for <java-user@lucene.apache.org>; Fri, 24 Feb 2006 17:16:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=J19+jcimKlVQabuAJAgjN/lrWHn09qw6Q3bYPKeY7ymhkWLTQrgYCszw4Y73RkQjPxo1Q82hJeQc9m1jBOtuKcWbIwmlDu2eDGHsvsjjnBZu1T7+QeghDrEuxQ5gL6kw6QtgjM6haNWFBN4vM7ZG2jiDxTKOtZ0p0uhtGE6j8Wk=
Received: by 10.35.91.10 with SMTP id t10mr385787pyl;
        Fri, 24 Feb 2006 17:16:41 -0800 (PST)
Received: from ?222.38.69.174? ( [222.38.69.174])
        by mx.gmail.com with ESMTP id w66sm846415pyw.2006.02.24.17.16.39;
        Fri, 24 Feb 2006 17:16:40 -0800 (PST)
Message-ID: <43FFAFF8.2040203@gmail.com>
Date: Sat, 25 Feb 2006 09:16:40 +0800
From: lp <csliupu@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Search through WML/WAP
References: <1140533688.43fb29b82493c@imp6-g19.free.fr>
In-Reply-To: <1140533688.43fb29b82493c@imp6-g19.free.fr>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

artdivin@free.fr wrote:
> Hello,
> I'm trying to find a search engine allowing to search through WML (WAP).
> Do you know if Lucene enables to do it ? Did you already try it ?
> thanx for your answers !
> artdivin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
I think you just need package org.xml.sax to extract the .wml page
and get what you want, then you can use Lucene to index them...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 25 13:22:21 2006
Return-Path: <java-user-return-19172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65949 invoked from network); 25 Feb 2006 13:22:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Feb 2006 13:22:20 -0000
Received: (qmail 40207 invoked by uid 500); 25 Feb 2006 13:22:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39188 invoked by uid 500); 25 Feb 2006 13:22:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39177 invoked by uid 99); 25 Feb 2006 13:22:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Feb 2006 05:22:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Feb 2006 05:22:13 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1PDLj67027293
	for <java-user@lucene.apache.org>; Sat, 25 Feb 2006 14:21:45 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [268.1.0/269]); Sat, 25 Feb 2006 14:20:51 +0100
Message-ID: <440059B3.4070302@isb-sib.ch>
Date: Sat, 25 Feb 2006 14:20:51 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Indexing performance with Lucene 1.9
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

After upgrading to Lucene 1.9, an index that used to take about 9h to build 
now requires 13h. Any one else notice a decrease in performance?

This is how I configure the IndexWriter:

   writer = new IndexWriter(dir, analyzer, false);
   writer.mergeFactor = 100;
   writer.minMergeDocs = 100;
   writer.maxFieldLength = Integer.MAX_VALUE;
   writer.setUseCompoundFile(false);

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 25 13:36:03 2006
Return-Path: <java-user-return-19173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72381 invoked from network); 25 Feb 2006 13:36:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Feb 2006 13:36:02 -0000
Received: (qmail 48361 invoked by uid 500); 25 Feb 2006 13:35:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48338 invoked by uid 500); 25 Feb 2006 13:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48327 invoked by uid 99); 25 Feb 2006 13:35:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Feb 2006 05:35:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Feb 2006 05:35:55 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1PDZT67029859
	for <java-user@lucene.apache.org>; Sat, 25 Feb 2006 14:35:29 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [268.1.0/269]); Sat, 25 Feb 2006 14:34:36 +0100
Message-ID: <44005CEB.60302@isb-sib.ch>
Date: Sat, 25 Feb 2006 14:34:35 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Frequency of phrase
References: <43FD72B0.3050609@isb-sib.ch> <901c03930602231853q5dc9d42do5228b216b3951b4@mail.gmail.com> <43FED51C.2020504@isb-sib.ch> <43FF5297.8060303@apache.org>
In-Reply-To: <43FF5297.8060303@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:
> If you use a span query then you can get the actual number of phrase 
> instances.

Thanks, good to know!

In this case (need to suggest phrase queries to the user) I've now settled 
with dividing the number of hits for a potential phrase by the number of 
documents that contain all terms in the phrase. Seems to be fast and work 
well...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 26 02:11:04 2006
Return-Path: <java-user-return-19174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34028 invoked from network); 26 Feb 2006 02:11:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Feb 2006 02:11:04 -0000
Received: (qmail 6786 invoked by uid 500); 26 Feb 2006 02:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6711 invoked by uid 500); 26 Feb 2006 02:10:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6694 invoked by uid 99); 26 Feb 2006 02:10:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Feb 2006 18:10:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Feb 2006 18:10:55 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3BEBC5B764; Sat, 25 Feb 2006 18:10:26 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 333577F403
	for <java-user@lucene.apache.org>; Sat, 25 Feb 2006 18:10:26 -0800 (PST)
Date: Sat, 25 Feb 2006 18:10:26 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Frequency of phrase
In-Reply-To: <44005CEB.60302@isb-sib.ch>
Message-ID: <Pine.LNX.4.58.0602251803370.14300@hal.rescomp.berkeley.edu>
References: <43FD72B0.3050609@isb-sib.ch> <901c03930602231853q5dc9d42do5228b216b3951b4@mail.gmail.com>
 <43FED51C.2020504@isb-sib.ch> <43FF5297.8060303@apache.org> <44005CEB.60302@isb-sib.ch>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



: > If you use a span query then you can get the actual number of phrase
: > instances.
:
: Thanks, good to know!

Just to clarify, i Doug means you can use the getSpans method of a
SpanNear query, and then count the iterations of next() untill you run
out.

Which is a really good idea I hadn't thought of before.

Another idea that was floating arround on the tip of my brain after the
recent comment about using a PhraseQUery and the idf, is that with a
custom Similarity that impliminted all of it's functions as constants, and
a HitCollector that just recorded the sum of the raw scores, you should
also be able to get the exact number of occurances of an (exact)
PhraseQuery.

You'd need to double check the score calculation to figure out exactly
which constants each of the functions should return -- I think it would
mainly be 1.0f, but the sumOfSquares aspect of the equation may make one
of them more interesting.  The only exception would be tf(float) which (I
think) should be an identity function.

Given other comments I've seen from people I trust that PhraseQueries are
faster then SpanNearQueries, that may be faster then the Span appraoch
Doug alluded too -- but it's also more complicated to get working.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 26 02:17:56 2006
Return-Path: <java-user-return-19175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38525 invoked from network); 26 Feb 2006 02:17:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Feb 2006 02:17:56 -0000
Received: (qmail 11116 invoked by uid 500); 26 Feb 2006 02:17:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10678 invoked by uid 500); 26 Feb 2006 02:17:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10667 invoked by uid 99); 26 Feb 2006 02:17:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Feb 2006 18:17:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Feb 2006 18:17:50 -0800
Received: (qmail 8856 invoked from network); 26 Feb 2006 02:17:28 -0000
Received: from unknown (HELO p5496fdca.dip.t-dialin.net) ([pbs]695637@[84.150.253.202])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 26 Feb 2006 02:17:28 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Indexing performance with Lucene 1.9
Date: Sun, 26 Feb 2006 03:18:49 +0100
User-Agent: KMail/1.8.2
References: <440059B3.4070302@isb-sib.ch>
In-Reply-To: <440059B3.4070302@isb-sib.ch>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602260318.49731@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Samstag 25 Februar 2006 14:20, Eric Jain wrote:

> After upgrading to Lucene 1.9, an index that used to take about 9h to
> build now requires 13h. Any one else notice a decrease in performance?

Yes, I can reproduce this with the Lucene demo on a much smaller index of 
2000 documents. It (partly?) seems to be caused by my patch here:

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/lucene/index/IndexWriter.java?rev=372350&r1=216236&r2=372350&diff_format=h

This tries to fix an off-by-one bug with setMaxBufferedDocs, but it changes 
the way segments are merged, i.e. merging becomes slower. I guess this 
needs to be reverted. Maybe you can try doing that locally and see how it 
affects your performance.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 26 10:21:17 2006
Return-Path: <java-user-return-19176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97147 invoked from network); 26 Feb 2006 10:21:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Feb 2006 10:21:17 -0000
Received: (qmail 31332 invoked by uid 500); 26 Feb 2006 10:21:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31288 invoked by uid 500); 26 Feb 2006 10:21:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31277 invoked by uid 99); 26 Feb 2006 10:21:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 02:21:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.46.255.16] (HELO viefep13-int.chello.at) (213.46.255.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 02:21:10 -0800
Received: from genuine ([80.108.128.16]) by viefep13-int.chello.at
          (InterMail vM.6.01.04.04 201-2131-118-104-20050224) with ESMTP
          id <20060226102047.GTTK9056.viefep13-int.chello.at@genuine>
          for <java-user@lucene.apache.org>;
          Sun, 26 Feb 2006 11:20:47 +0100
Received: from laptop.home ([192.168.1.50])
	by genuine with esmtpa (Exim 4.50)
	id 1FDJ0D-0004hj-L2
	for java-user@lucene.apache.org; Sun, 26 Feb 2006 11:19:48 +0100
Message-ID: <440180FC.3070101@fischer.name>
Date: Sun, 26 Feb 2006 11:20:44 +0100
From: Markus Fischer <markus@fischer.name>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6) Gecko/20050317 Thunderbird/1.0.2 Mnenhy/0.7.2.0
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Different fields in the same and index and query boosting
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Score: -27
X-Spam-Level: --
X-Spam-Report: Spam detection software, running on the system "genuine", has
	identified this incoming email as possible spam.  The original message
	has been attached to this so you can view it (if it isn't spam) or label
	similar future email.  If you have any questions, see
	the administrator of that system for details.
	Content preview:  -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1 Hi, 1)
	Many different fields because of different projects? [...] 
	Content analysis details:   (-2.8 points, 5.0 required)
	pts rule name              description
	---- ---------------------- --------------------------------------------------
	-2.8 ALL_TRUSTED            Did not pass through any untrusted hosts
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

1) Many different fields because of different projects?

I'm accessing Lucenes index on a remote server through XML-RPC and I'ld
like to use one index for completely independent search projects. The
number of query requests is not that high (just a few per minute) so
from performance wise I wouldn't see a problem.

When adding documents to an index in this case I would add e.g. 5000
documents with fields like "name", "author", "excerpt" and then also a
batch of 2000 files with other fields like "title", "front", "back".

Before adding a batch of thousand files for one project I would first
remove them. Common for all projects would be one "key" field by which I
would differentiate the projects, the query terms are so crafted that
key is always set as an AND field. They key has values like "project1"
and "project2".

Now my concern is: the more projects I add the more different fields
would come into play. I would not recreate the index from scratch as I'm
doing right now but I would only remove all documents with e.g. key
"project1" and add the new documents completely but not touching other
projects.

- From what I read from the documentation, as long as I would call
optimized() after every batch of change it should be ok.

2) Query boosting
Currently I was using query boosting extensive for the headings in HTML
documents, e.g. title:(term)^8 h1:(term)^7 ... h6:(term)^2
content:(term)^1 . I was wondering if this is actually necessary. The
number of existing h1 to h6 fields with content decreases with the
amount of documents. To give the fields title and h1, which are the most
used ones anyway, the highest importance, to I need the boost factor
here anyway or can I avoid them?

thanks for any answers,
- - Markus
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2.1 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEAYD71nS0RcInK9ARAlA4AJ9hhocglnke6fGthZpjeKeoZA6dfACeJo/6
i8n5ZhbuY/ujzyT8vRY7vpg=
=GWZ8
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 26 10:38:52 2006
Return-Path: <java-user-return-19177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3301 invoked from network); 26 Feb 2006 10:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Feb 2006 10:38:52 -0000
Received: (qmail 41291 invoked by uid 500); 26 Feb 2006 10:38:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41253 invoked by uid 500); 26 Feb 2006 10:38:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41242 invoked by uid 99); 26 Feb 2006 10:38:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 02:38:48 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of samurujackson@googlemail.com designates 64.233.162.196 as permitted sender)
Received: from [64.233.162.196] (HELO zproxy.gmail.com) (64.233.162.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 02:38:45 -0800
Received: by zproxy.gmail.com with SMTP id i11so665660nzh
        for <java-user@lucene.apache.org>; Sun, 26 Feb 2006 02:38:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=HBtgmD0Z1f7eLn6L8BLkWVmhNci/4Rx3R//8jSasoVxuMGYB07+E+VJERXLDkvrtIolynQLwADxM660aAyUuCPDY6ZeuQOxhv7+RnNbSqksgX/KnC+kpspAZenJhaVc8hH5qPffwyKKYwbSHECMcpmkrkD4dlm3eJsKPQekvhl4=
Received: by 10.65.61.10 with SMTP id o10mr4330860qbk;
        Sun, 26 Feb 2006 02:38:24 -0800 (PST)
Received: by 10.65.74.19 with HTTP; Sun, 26 Feb 2006 02:38:24 -0800 (PST)
Message-ID: <fed285090602260238s5603347emb46ed8abd3a139d2@mail.gmail.com>
Date: Sun, 26 Feb 2006 11:38:24 +0100
From: "Samuru Jackson" <samurujackson@googlemail.com>
To: java-user@lucene.apache.org
Subject: Filter Field.Keyword possible?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12396_12541183.1140950304422"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12396_12541183.1140950304422
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi to all!

I added some documents to my index repository this way:

Document document =3D new Document();
document.add(Field.Keyword("id", id));
document.add(Field.Keyword("type", type));
document.add(Field.Text("content", content));


Is it possible to search only within a specific Field.Keyword? For example =
I
want to search only the contents that have got a Keyword *type*=3D"webpages=
".

Is there a way to create such a filter?

Samuru

------=_Part_12396_12541183.1140950304422--

From java-user-return-19178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 26 11:38:19 2006
Return-Path: <java-user-return-19178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21281 invoked from network); 26 Feb 2006 11:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Feb 2006 11:38:19 -0000
Received: (qmail 77441 invoked by uid 500); 26 Feb 2006 11:38:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76929 invoked by uid 500); 26 Feb 2006 11:38:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76918 invoked by uid 99); 26 Feb 2006 11:38:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 03:38:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 03:38:12 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 70D8C33D2EB; Sun, 26 Feb 2006 06:37:51 -0500 (EST)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 762F433D2EA
	for <java-user@lucene.apache.org>; Sun, 26 Feb 2006 06:37:50 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <fed285090602260238s5603347emb46ed8abd3a139d2@mail.gmail.com>
References: <fed285090602260238s5603347emb46ed8abd3a139d2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9BC0EEC2-13D7-4486-BE29-94E8DD1B3B58@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Filter Field.Keyword possible?
Date: Sun, 26 Feb 2006 06:37:51 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 26, 2006, at 5:38 AM, Samuru Jackson wrote:

> Hi to all!
>
> I added some documents to my index repository this way:
>
> Document document = new Document();
> document.add(Field.Keyword("id", id));
> document.add(Field.Keyword("type", type));
> document.add(Field.Text("content", content));
>
>
> Is it possible to search only within a specific Field.Keyword? For  
> example I
> want to search only the contents that have got a Keyword  
> *type*="webpages".
>
> Is there a way to create such a filter?

Two ways....

	1) Simply create a BooleanQuery with one clause a TermQuery for  
"type" and the constraint

	2) Use a QueryFilter with that same TermQuery, and apply that Filter  
to your search method.

#1 is the simplest and most recommended to begin with unless you have  
other reasons to go to #2.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 26 18:09:40 2006
Return-Path: <java-user-return-19179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73998 invoked from network); 26 Feb 2006 18:09:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Feb 2006 18:09:39 -0000
Received: (qmail 80439 invoked by uid 500); 26 Feb 2006 18:09:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80408 invoked by uid 500); 26 Feb 2006 18:09:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80397 invoked by uid 99); 26 Feb 2006 18:09:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 10:09:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 10:09:32 -0800
Received: (qmail 747 invoked from network); 26 Feb 2006 18:09:09 -0000
Received: from unknown (HELO p5496d3a9.dip.t-dialin.net) ([pbs]695637@[84.150.211.169])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 26 Feb 2006 18:09:09 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Indexing performance with Lucene 1.9
Date: Sun, 26 Feb 2006 19:10:34 +0100
User-Agent: KMail/1.8.2
References: <440059B3.4070302@isb-sib.ch>
In-Reply-To: <440059B3.4070302@isb-sib.ch>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602261910.34137@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Samstag 25 Februar 2006 14:20, Eric Jain wrote:

> After upgrading to Lucene 1.9, an index that used to take about 9h to
> build now requires 13h. Any one else notice a decrease in performance?

A fix has now been committed to trunk in SVN, it should be part of the next 
1.9 release.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 26 21:06:26 2006
Return-Path: <java-user-return-19180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31566 invoked from network); 26 Feb 2006 21:06:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Feb 2006 21:06:26 -0000
Received: (qmail 69970 invoked by uid 500); 26 Feb 2006 21:06:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69910 invoked by uid 500); 26 Feb 2006 21:06:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69899 invoked by uid 99); 26 Feb 2006 21:06:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 13:06:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Feb 2006 13:06:19 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 757785B766; Sun, 26 Feb 2006 13:05:48 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6CF0F7F403
	for <java-user@lucene.apache.org>; Sun, 26 Feb 2006 13:05:48 -0800 (PST)
Date: Sun, 26 Feb 2006 13:05:48 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Different fields in the same and index and query boosting
In-Reply-To: <440180FC.3070101@fischer.name>
Message-ID: <Pine.LNX.4.58.0602261256040.14459@hal.rescomp.berkeley.edu>
References: <440180FC.3070101@fischer.name>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Now my concern is: the more projects I add the more different fields
: would come into play. I would not recreate the index from scratch as I'm
: doing right now but I would only remove all documents with e.g. key
: "project1" and add the new documents completely but not touching other
: projects.

this should work ok, but one of the things you'll want to watch out for is
the fieldNorms.

Anytime you add a document with an index field, lucene by default creates
a "fieldNorm" value for *every* document in your index -- even if those
documents don't have that field.

if you are only planning on having a handfull of document types, and only
a handfull of indexed fields per doctype, then this shouldn't be a big
deal -- but if you wnat to have thousands of indexed fields per doctype,
or thousands of doctypes -- you may find your index size growing a lot
faster then you expected.

there is an option in 1.9 that lets you specify when adding an indexed
field to a document that you don't want to bother storing a fieldNorm for
that field -- if you do this length normalization won't be possible for
queries on that field, and index time field/document boosts won't work --
but if you aren't concerned about those things, it will help keep your
index size managable.

: Currently I was using query boosting extensive for the headings in HTML
: documents, e.g. title:(term)^8 h1:(term)^7 ... h6:(term)^2
: content:(term)^1 . I was wondering if this is actually necessary. The
: number of existing h1 to h6 fields with content decreases with the
: amount of documents. To give the fields title and h1, which are the most
: used ones anyway, the highest importance, to I need the boost factor
: here anyway or can I avoid them?

you should try some queries like "title:term content:term" and look at the
explain output on your matches to see how much of an impact on the final
score the various matches on title vs content have ... if there are a lot
less terms indexed in the title field then in the content field you should
see the match on title be more significant, and then you can decide how
much boost you want to give if it's not significant enough.

my question do you would be: why do you wnat to avoid using query
time boosts?  there's really no harm in using them, under the coveres an
implicit boost of 1.0f is used for every Query class (that i can think of)
so specifying your own boost value doesn't really affect the performance
of the query if that's what you are concerned about.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 08:04:44 2006
Return-Path: <java-user-return-19181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40915 invoked from network); 27 Feb 2006 08:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 08:04:43 -0000
Received: (qmail 84258 invoked by uid 500); 27 Feb 2006 08:04:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84228 invoked by uid 500); 27 Feb 2006 08:04:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84217 invoked by uid 99); 27 Feb 2006 08:04:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 00:04:38 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.59.116.41] (HELO orbita1.ru) (213.59.116.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 00:04:36 -0800
Received: from anton.ipt ([192.168.0.177] helo=anton)
	by orbita1.ru with esmtpa (Exim 4.42)
	id 1FDdMY-00023H-5N; Mon, 27 Feb 2006 11:04:10 +0300
From: <anton@orbita1.ru>
To: <java-user@lucene.apache.org>,
	"'Otis Gospodnetic'" <otis_gospodnetic@yahoo.com>
Subject: RE: Indexing speed
Date: Mon, 27 Feb 2006 11:03:49 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <20060224194733.8998.qmail@web50311.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Thread-Index: AcY5ezgB9h9FEnItS1SPGMGydKn4fAB+Grtg
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060227080436.B860F10FB004@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


maxBufferedDocs parameters.  You can also look for my article about indexing
with Lucene (link in the Wiki), which includes code for playing with various
parameters and explains what's going on, etc.

Sorry, but where this link ? 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 09:08:48 2006
Return-Path: <java-user-return-19182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76295 invoked from network); 27 Feb 2006 09:08:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 09:08:48 -0000
Received: (qmail 67395 invoked by uid 500); 27 Feb 2006 09:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67361 invoked by uid 500); 27 Feb 2006 09:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67022 invoked by uid 99); 27 Feb 2006 09:08:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 01:08:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.237.132.8] (HELO wp001.webpack.hosteurope.de) (80.237.132.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 01:08:38 -0800
Received: by wp001.webpack.hosteurope.de running Exim 4.43 using esmtpa
	from dcsigate.dcsi.de ([62.54.117.250] helo=[192.168.1.226])
	id 1FDeMZ-0000tL-T7; Mon, 27 Feb 2006 10:08:16 +0100
Message-ID: <4402C11A.6010802@thopap.de>
Date: Mon, 27 Feb 2006 10:06:34 +0100
From: Thomas Papke <tp@thopap.de>
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Question to Lucene Index
References: <43FF058A.3080308@thopap.de> <43FF08DE.4020508@curtin.com> <43FF0AF4.9000209@i-hypergrid.com> <43FF0F80.5090806@curtin.com>
In-Reply-To: <43FF0F80.5090806@curtin.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you for all your good answers

The restriction i want to search with looks somethinks like this:

I want to do some searching for A in diffenerent Fields and i want to 
prohibite some user/usergroups specific field values. I am right to do 
it in this way:
BooleanQuery q1 = new BooleanQuery();
q1.add(new TermQuery(new Term("field", "B"), false, true);
q1.add(new TermQuery(new Term("field", "C"), false, true);
    ...
q2 = new BooleanQuery();
q2.add(new TermQuery(new Term("field", "A"), true, false);
q2.add(q1, false, true);

Or is there an better way to prohibite something? Filters maybe? Anyone 
a short example how to implement a lucene filter?

Thanks a lot, Thomas

Michael D. Curtin schrieb:

> Volodymyr Bychkoviak wrote:
>
>> This is not the case.
>>
>> maxClauseCount limit number of terms that can fit into BooleanQuery 
>> during some queries rewriting. And default value is 1024, not 32.
>>
>> 32 required/prohibited clauses is limitation of Lucene 1.4.3 due to 
>> usage of bit patterns to mask required/prohibited clauses.
>> You can solve this problem by using Lucene 1.9 RC or use Filters.
>
>
> Doh!  Wrong Exception.  Volodymyr is right.
>
> Thomas, what do your extra clauses look like?  Can they be combined in 
> sub-clauses, as it were?  For example, if you want hits with A, 
> subject to the restrictions that they don't have B, nor C, ..., you 
> might be able to use a query construct like
>
> +A -(B || C || ...)
>
> The components of the B || C || ... part aren't required nor 
> prohibited, so you wouldn't run up against the 32 limit (you might hit 
> the 1024 limit, but then you now know how to increase that).  If 
> you're constructing the Query yourself (not via the QueryParser), then 
> something like this:
>
> BooleanQuery q1 = new BooleanQuery();
> q1.add(new TermQuery(new Term("field", "B"), false, false);
> q1.add(new TermQuery(new Term("field", "C"), false, false);
>     ...
> q2 = new BooleanQuery();
> q2.add(new TermQuery(new Term("field", "A"), true, false);
> q2.add(q1, false, true);
> // Use q2 for searching
>
>
> Note also that you could substitute any Query-derived object for the 
> new TermQuery()s in q1.  If you need to add restrictions more 
> complicated than a single value of a single field, build up another 
> Query-derived object for that restriction, and put it into q1 instead.
>
> Good luck!  (And sorry about the misdirection)
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 09:25:18 2006
Return-Path: <java-user-return-19183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84094 invoked from network); 27 Feb 2006 09:25:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 09:25:17 -0000
Received: (qmail 96879 invoked by uid 500); 27 Feb 2006 09:25:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96849 invoked by uid 500); 27 Feb 2006 09:25:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96838 invoked by uid 99); 27 Feb 2006 09:25:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 01:25:11 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.59.116.41] (HELO orbita1.ru) (213.59.116.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 01:25:10 -0800
Received: from anton.ipt ([192.168.0.177] helo=anton)
	by orbita1.ru with esmtpa (Exim 4.42)
	id 1FDeca-0002J5-Eb
	for java-user@lucene.apache.org; Mon, 27 Feb 2006 12:24:48 +0300
From: <anton@orbita1.ru>
To: <java-user@lucene.apache.org>
Subject: RE: Indexing speed
Date: Mon, 27 Feb 2006 12:24:27 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <20060227080436.B860F10FB004@asf.osuosl.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Thread-Index: AcY5ezgB9h9FEnItS1SPGMGydKn4fAB+GrtgAAL1JFA=
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060227092510.AB71310FB004@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



maxBufferedDocs parameters.  You can also look for my article about indexing
with Lucene (link in the Wiki), which includes code for playing with various
parameters and explains what's going on, etc.

Sorry, but where this link ? 

Where placed your article ? Please, give me url.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 09:36:46 2006
Return-Path: <java-user-return-19184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89059 invoked from network); 27 Feb 2006 09:36:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 09:36:35 -0000
Received: (qmail 7212 invoked by uid 500); 27 Feb 2006 09:36:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7003 invoked by uid 500); 27 Feb 2006 09:36:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6992 invoked by uid 99); 27 Feb 2006 09:36:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 01:36:24 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 27 Feb 2006 01:36:23 -0800
Received: (qmail 17365 invoked by uid 60001); 27 Feb 2006 09:36:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=THYxu7+TcB9NFV6wrDGRmKbu3lCIlpNVsQ04R/7iYsS2XUO5FOJTQkBqxojn1qarh6NRbOA2gH3eB3gZGH3XFOPR16HkCJLw0rt9VDbuk2LDoZz/1TgDESdWQAMcnXaNmB+C5U0W8Z6ZY31YtqBf8xEQC4zXskVxuXPdhLPIyXk=  ;
Message-ID: <20060227093602.17363.qmail@web50313.mail.yahoo.com>
Date: Mon, 27 Feb 2006 01:36:02 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing speed
To: java-user@lucene.apache.org
In-Reply-To: <20060227092510.AB71310FB004@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Here: http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html

----- Original Message ----
From: anton@orbita1.ru
To: java-user@lucene.apache.org
Sent: Monday, February 27, 2006 4:24:27 AM
Subject: RE: Indexing speed



maxBufferedDocs parameters.  You can also look for my article about indexing
with Lucene (link in the Wiki), which includes code for playing with various
parameters and explains what's going on, etc.

Sorry, but where this link ? 

Where placed your article ? Please, give me url.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 11:12:54 2006
Return-Path: <java-user-return-19185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43142 invoked from network); 27 Feb 2006 11:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 11:12:52 -0000
Received: (qmail 43894 invoked by uid 500); 27 Feb 2006 11:12:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43874 invoked by uid 500); 27 Feb 2006 11:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43863 invoked by uid 99); 27 Feb 2006 11:12:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 03:12:45 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.151.11.163] (HELO smtp.ya.com) (62.151.11.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 03:12:44 -0800
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1FDgIg-0007LV-00
	for java-user@lucene.apache.org; Mon, 27 Feb 2006 12:12:22 +0100
Message-ID: <03d001c63b8e$ae80f6c0$1e8e10ac@yacom.ofi>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
References: <20060227093602.17363.qmail@web50313.mail.yahoo.com>
Subject: Problem with reverse ordering
Date: Mon, 27 Feb 2006 12:12:22 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I have an index with some fields, one of them is a String representing a 
date in the format yyyyMMddHHmmss.
I store this field as a Keyword to be sortable.

My problem is that I obtain the results in the same order with
Hits hits = is.search(query, new Sort("formatted-date"));
than
Hits hits = is.search(query, new Sort("formatted-date", true));


doen anyone why this could be happening?

Thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 11:50:43 2006
Return-Path: <java-user-return-19186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61403 invoked from network); 27 Feb 2006 11:50:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 11:50:41 -0000
Received: (qmail 91087 invoked by uid 500); 27 Feb 2006 11:50:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91047 invoked by uid 500); 27 Feb 2006 11:50:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91035 invoked by uid 99); 27 Feb 2006 11:50:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 03:50:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of samurujackson@googlemail.com designates 64.233.184.203 as permitted sender)
Received: from [64.233.184.203] (HELO wproxy.gmail.com) (64.233.184.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 03:50:33 -0800
Received: by wproxy.gmail.com with SMTP id i13so1134189wra
        for <java-user@lucene.apache.org>; Mon, 27 Feb 2006 03:50:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=fgwD3hRes1GlHaRWP3eLUMZiR58x190otxoifmIbNK6aO5IfhnrtgrH/FrpyOLlsiGNPmWhLbX8H+D8bMmZZSfcQAWgqYRov3/jd13GxHARRqfHzBJ/d1D+X7Ccrryu6VtM+ZNdZaiubMTFoaK4rzpqsMIz/4zBoa8ZyrlppiF0=
Received: by 10.64.21.20 with SMTP id 20mr4803997qbu;
        Mon, 27 Feb 2006 03:50:11 -0800 (PST)
Received: by 10.65.74.19 with HTTP; Mon, 27 Feb 2006 03:50:11 -0800 (PST)
Message-ID: <fed285090602270350r306d57eci5a3949d807d6a5ea@mail.gmail.com>
Date: Mon, 27 Feb 2006 12:50:11 +0100
From: "Samuru Jackson" <samurujackson@googlemail.com>
To: java-user@lucene.apache.org
Subject: Get list with found words for a hit?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2054_23552214.1141041011839"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2054_23552214.1141041011839
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi!

Is there a way to retrieve a List of the matching words for a Hit?

For example I create a query like this one:

"Paris London -Stockholm"

Now I get a Hit object with a couple of results back where I can iterate
over the documents:

for (int i =3D 0; i < hits.length(); i++) {
                Document doc =3D hits.doc(i);
                doc.get("whatever");
}

How do I know which words have been found in a document? In one it could be
Paris, in another it could be London or both!

I would need this information in order to highlight those words if I displa=
y
the search results to the user.

Thanks!

Samuru

------=_Part_2054_23552214.1141041011839--

From java-user-return-19187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 11:51:55 2006
Return-Path: <java-user-return-19187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61743 invoked from network); 27 Feb 2006 11:51:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 11:51:54 -0000
Received: (qmail 94757 invoked by uid 500); 27 Feb 2006 11:51:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94722 invoked by uid 500); 27 Feb 2006 11:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94704 invoked by uid 99); 27 Feb 2006 11:51:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 03:51:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [194.217.242.85] (HELO anchor-post-35.mail.demon.net) (194.217.242.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 03:51:43 -0800
Received: from rselvaraj.demon.co.uk ([83.104.137.62] helo=Taurus)
	by anchor-post-35.mail.demon.net with esmtp (Exim 4.42)
	id 1FDgtw-0000XN-Hh; Mon, 27 Feb 2006 11:50:53 +0000
Reply-To: <lucene@searchblox.com>
From: "Robert Selvaraj" <lucene@searchblox.com>
To: <java-user@lucene.apache.org>,
	<java-dev@lucene.apache.org>
Subject: SearchBlox Content Search Software Version 3.2 released
Date: Mon, 27 Feb 2006 11:50:48 -0000
Organization: SearchBlox Software, Inc.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcY7k+bfBhRiCqJ6RY2rIwfA2G5Pjg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060227115144.EC80310FB00F@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SearchBlox Software has released Version 3.2 of its J2EE Content Search
Software. SearchBlox delivers out-of-the-box search functionality for quick
and easy integration with websites, applications, intranets and portals. 
SearchBlox uses the Lucene Search API and incorporates integrated
HTTP/HTTPS, File System and Feed crawlers, support for various document
formats including HTML, Word, PDF, PowerPoint and Excel, support for
indexing and searching content in 30 languages and customizable search
results, all controlled from a browser-based Admin Console. 

Main features in Version 3.2: 
==============================
- CSS support for search results customization
- Duplicate document detection
- Redesigned HTTP and Feed crawlers for high performance
- SearchBlox Server for Linux/Unix Platform
- Support to run SearchBlox Server as a Windows Service  

SearchBlox is available as a Web Archive (WAR) and has been tested with all
major Java Application Servers. It is also available as standalone
application for Windows, Linux/Unix and Mac OS X.

The SearchBlox FREE Edition is available free of charge and can index up to
1000 documents. 

The software can be downloaded from http://www.searchblox.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 12:05:55 2006
Return-Path: <java-user-return-19188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68536 invoked from network); 27 Feb 2006 12:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 12:05:53 -0000
Received: (qmail 26175 invoked by uid 500); 27 Feb 2006 12:05:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25181 invoked by uid 500); 27 Feb 2006 12:05:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25170 invoked by uid 99); 27 Feb 2006 12:05:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 04:05:47 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 04:05:46 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.12.10/8.12.10) with ESMTP id k1RC5O7i039434
	for <java-user@lucene.apache.org>; Mon, 27 Feb 2006 12:05:24 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.12.10/NCO/VER6.8) with ESMTP id k1RC5c85222326
	for <java-user@lucene.apache.org>; Mon, 27 Feb 2006 13:05:38 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.13.3) with ESMTP id k1RC5N5Z020755
	for <java-user@lucene.apache.org>; Mon, 27 Feb 2006 13:05:23 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.12.11) with ESMTP id k1RC5NqY020744
	for <java-user@lucene.apache.org>; Mon, 27 Feb 2006 13:05:23 +0100
In-Reply-To: <fed285090602270350r306d57eci5a3949d807d6a5ea@mail.gmail.com>
Subject: Re: Get list with found words for a hit?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 August 18, 2005
Message-ID: <OFAA2E2660.EF522D87-ONC2257122.004084F0-C2257122.0041A231@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Mon, 27 Feb 2006 13:56:53 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0HF90 | November 16, 2005) at
 27/02/2006 14:05:37
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"Samuru Jackson" <samurujackson@googlemail.com> wrote on 27/02/2006
01:50:11 PM:
> Is there a way to retrieve a List of the matching words for a Hit?
> For example I create a query like this one:
> "Paris London -Stockholm"
> ...
> How do I know which words have been found in a document? In one it could
be
> Paris, in another it could be London or both!
> I would need this information in order to highlight those words if I
display
> the search results to the user.

For the purpose of highlighting, you don't necessarily need to know in
advance
which word matched: you can just highlight any occurance of either Paris or
London - wherever you find them - in the original text.

You might want to take a look at the Highlighter class in the contrib
directory
of Lucene's distribution, which might do what you want. Here is some
example
code: it creates a Highlighter object for highlighting the given query "q",
and then for each of the results, it retrieves the full content of the
document from the stored "storeadContent" field which I added to the index,
and finds the 2 most relevant sentences in the content and highlights q's
words (this is similar to the summaries you see in Google and its likes):

      Highlighter highlighter = new Highlighter(new QueryScorer(q));

highlighter.setMaxDocBytesToAnalyze(ArbitraryLimits.DocumentToSaveCutOff);

      for(... i iterates over the relevant hits...){
            Document doc = hits.doc(i);
            TokenStream tokenStream = analyzer.tokenStream("storedContent",
                        new StringReader(doc.get("storedContent")));
            summary = highlighter.getBestFragments(tokenStream,
                              doc.get("storedContent"), 2, " ... ");
      }


--
Nadav Har'El


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 13:31:12 2006
Return-Path: <java-user-return-19189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12784 invoked from network); 27 Feb 2006 13:31:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 13:31:12 -0000
Received: (qmail 33855 invoked by uid 500); 27 Feb 2006 13:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33819 invoked by uid 500); 27 Feb 2006 13:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 67857 invoked by uid 99); 27 Feb 2006 11:28:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Reply-To: <rselvaraj@searchblox.com>
From: "Robert Selvaraj" <rselvaraj@searchblox.com>
To: <java-dev@lucene.apache.org>,
	<java-user@lucene.apache.org>
Subject: SearchBlox Content Search Software Version 3.2 released
Date: Mon, 27 Feb 2006 11:28:21 -0000
Organization: SearchBlox Software, Inc.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcY7kOoI/dST5DoCR0a5iAqmiHHzSQ==
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060227112849.10DC610FB004@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SearchBlox Software has released Version 3.2 of its J2EE Content Search
Software. SearchBlox delivers out-of-the-box search functionality for quick
and easy integration with websites, applications, intranets and portals. 
SearchBlox uses the Lucene Search API and incorporates integrated
HTTP/HTTPS, File System and Feed crawlers, support for various document
formats including HTML, Word, PDF, PowerPoint and Excel, support for
indexing and searching content in 30 languages and customizable search
results, all controlled from a browser-based Admin Console. 

Main features in Version 3.2: 
==============================
- CSS support for search results customization 
- Duplicate document detection 
- Redesigned HTTP and Feed crawlers for high performance 
- SearchBlox Server for Linux/Unix Platform
- Support to run SearchBlox Server as a Windows Service  

SearchBlox is available as a Web Archive (WAR) and has been tested with all
major Java Application Servers. It is also available as standalone
application for Windows, Linux/Unix and Mac OS X.

The SearchBlox FREE Edition is available free of charge and can index up to
1000 documents. 

The software can be downloaded from http://www.searchblox.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 13:39:15 2006
Return-Path: <java-user-return-19190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16295 invoked from network); 27 Feb 2006 13:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 13:39:15 -0000
Received: (qmail 45867 invoked by uid 500); 27 Feb 2006 13:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45846 invoked by uid 500); 27 Feb 2006 13:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45835 invoked by uid 99); 27 Feb 2006 13:39:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 05:39:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 05:39:08 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D289533D2EB; Mon, 27 Feb 2006 08:38:47 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 98A9833D2EB
	for <java-user@lucene.apache.org>; Mon, 27 Feb 2006 08:38:45 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <4402C11A.6010802@thopap.de>
References: <43FF058A.3080308@thopap.de> <43FF08DE.4020508@curtin.com> <43FF0AF4.9000209@i-hypergrid.com> <43FF0F80.5090806@curtin.com> <4402C11A.6010802@thopap.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <97B3BCFF-F593-4BEE-98C2-6ABF51202203@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Question to Lucene Index
Date: Mon, 27 Feb 2006 08:38:48 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 27, 2006, at 4:06 AM, Thomas Papke wrote:

> Thank you for all your good answers
>
> The restriction i want to search with looks somethinks like this:
>
> I want to do some searching for A in diffenerent Fields and i want  
> to prohibite some user/usergroups specific field values. I am right  
> to do it in this way:
> BooleanQuery q1 = new BooleanQuery();
> q1.add(new TermQuery(new Term("field", "B"), false, true);
> q1.add(new TermQuery(new Term("field", "C"), false, true);
>    ...
> q2 = new BooleanQuery();
> q2.add(new TermQuery(new Term("field", "A"), true, false);
> q2.add(q1, false, true);
>
> Or is there an better way to prohibite something? Filters maybe?  
> Anyone a short example how to implement a lucene filter?

The code to Lucene in Action, available for free at http:// 
www.lucenebook.com, has Filter examples.  One such example is a  
SecurityFilter that prohibits a user from seeing documents that he/ 
she does not "own" (a contrived example).  Wouldn't hurt our feelings  
if you purchased the book too :))

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 27 16:43:20 2006
Return-Path: <java-user-return-19191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25627 invoked from network); 27 Feb 2006 16:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Feb 2006 16:43:20 -0000
Received: (qmail 41539 invoked by uid 500); 27 Feb 2006 16:43:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41300 invoked by uid 500); 27 Feb 2006 16:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41289 invoked by uid 99); 27 Feb 2006 16:43:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 08:43:11 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of echofloripa.yell@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO zproxy.gmail.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Feb 2006 08:43:10 -0800
Received: by zproxy.gmail.com with SMTP id r28so1008124nza
        for <java-user@lucene.apache.org>; Mon, 27 Feb 2006 08:42:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=KdlXbohn/T5BGC05rqcLBSVDVn6P9xqROE207rJgAVywKeuSei4NHfUi91EZ4zhTFVTWJIjap4LRe31OImvUAaTuRtgYRis1ercw60uw/YpGWg8g0nsWTcUdNP5gNX/2aFwqZIvomj2bNFgUgadHYuFQDnRlLfB9SfaZrLI5i7s=
Received: by 10.65.211.11 with SMTP id n11mr367875qbq;
        Mon, 27 Feb 2006 08:42:48 -0800 (PST)
Received: by 10.65.248.17 with HTTP; Mon, 27 Feb 2006 08:42:48 -0800 (PST)
Message-ID: <806d3a1f0602270842i3e1c91e9n@mail.gmail.com>
Date: Mon, 27 Feb 2006 16:42:48 +0000
From: "emerson cargnin" <echofloripa.yell@gmail.com>
To: java-user@lucene.apache.org
Subject: Restricting the number of docs per search field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4861_9951668.1141058568401"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4861_9951668.1141058568401
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi all

Due a performance problem, I'm looking a way of restricting the docs
returned based of the number of docs which a field has the same value. At
the moment we just discard the docs if more than a X number for the same
field, but I think it can be done by lucence, hence improving a lot the
performance, as now it can return a hundred of docs for the the field value=
,
when just the first 4-5 will be really used.

thanks
Emerson

------=_Part_4861_9951668.1141058568401--

From java-user-return-19192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 08:00:49 2006
Return-Path: <java-user-return-19192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27102 invoked from network); 28 Feb 2006 08:00:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 08:00:49 -0000
Received: (qmail 97043 invoked by uid 500); 28 Feb 2006 08:00:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97027 invoked by uid 500); 28 Feb 2006 08:00:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97016 invoked by uid 99); 28 Feb 2006 08:00:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 00:00:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.59.116.41] (HELO orbita1.ru) (213.59.116.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 00:00:32 -0800
Received: from orbitsoft.ipt ([192.168.0.150] helo=orbitsoft.orbitscripts)
	by orbita1.ru with esmtpa (Exim 4.42)
	id 1FDzmD-0005Pm-Vz
	for java-user@lucene.apache.org; Tue, 28 Feb 2006 11:00:10 +0300
Subject: search problem
Date: Tue, 28 Feb 2006 10:59:41 +0300
Message-ID: <41D8E340E5045F4ABA553E4524E3D3792DFA06@orbitsoft.orbitscripts>
X-MS-Has-Attach: 
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C63C3D.0AF9182A"
X-MS-TNEF-Correlator: 
Thread-Topic: search problem
Thread-Index: AcY8PO4h0aVw86tPSpO4KkHHrTka7A==
Content-class: urn:content-classes:message
From: "Anton Potehin" <anton@orbita1.ru>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C63C3D.0AF9182A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have a problem.=20

There is an index, which contains about 6,000,000 records (15,000,000
will be soon) the size is 4GB. Index is optimized and consists of only
one segment. This index stores the products. Each product has brand,
price and about 10 more additional fields. I want to not just find
something in the index also I want to get the lists of all brands and
price. The list of brands is needed for displaying all of the products
and the quantity of products of this brand for certain search request.

=20

Here is the fragment of the code for results obtaining:

=20

            ...the fragment of code for search is passed by, because it
is not so important...=20

int count =3D hits.length();=20

            TreeMap brands =3D new TreeMap();

            float[] priceArr =3D new float[count];

=20

            ArrayList results =3D new ArrayList();

            for (int i =3D 0; i < count; i++) {

                try {

                    Document doc =3D hits.doc(i);

                    String brand =3D
doc.getField("manufacturer").stringValue();

                    int number =3D 1;

                    try {

                        number =3D Integer.parseInt((String)
brands.get(brand));

                        number++;

                    } catch (Exception ex) {

                    }

                    brands.put(brand, number + "");

                    float price =3D
PriceUtils.priceFromStringToFloat(doc.getField("price").stringValue());

                    float maxPriceCurrent =3D
PriceUtils.priceFromStringToFloat(doc.getField("max_price").stringValue(
));

                    float minPriceCurrent =3D
PriceUtils.priceFromStringToFloat(doc.getField("min_price").stringValue(
));

=20

                    priceArr[i] =3D price;

=20

//start----------------------Brand Filter

                    if (!brandFilter.equals("") &&
!brandFilter.toLowerCase().equals(brand.toLowerCase())) {

                        continue;

                    }

//end------------------------Brand Filter

=20

//start----------------------Price Filter

                    if (minPrice !=3D -1 && price < minPrice) {

                        continue;

                    }

                    if (maxPrice !=3D -1 && price > maxPrice) {

                        continue;

                    }

//start----------------------Price Filter

                    if (startAt <=3D numberOfResults && results.size() <
maxNumberResults) {

                        String name =3D
StringUtils.stringLimitation(MAX_LENGTH_OF_NAME,
doc.getField("name").stringValue());

                        String description =3D
StringUtils.stringLimitation(MAX_LENGTH_OF_DESCRIPTION,
doc.getField("description").stringValue());

                        String idProduct =3D
doc.getField("id_product").stringValue();

                        Element item =3D
documentFactory.createElement("item");

=20

//                        ...the reading of needed fields from document
is omitted...=20

=20

                        results.add((threadNumber - 1), item);

                    }

                    numberOfResults++;

                } catch (IOException e) {

                    System.err.println(e.toString());

                }

            }

=20

As it is seen, to feel brands and priceArr I have to check all of
results from hits. The search may give up to 100,000 results, the
checking takes too much time and memory. Do anybody have some ideas how
to speed up this process?

=20


------_=_NextPart_001_01C63C3D.0AF9182A--

From java-user-return-19193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 08:58:11 2006
Return-Path: <java-user-return-19193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59787 invoked from network); 28 Feb 2006 08:58:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 08:58:09 -0000
Received: (qmail 67419 invoked by uid 500); 28 Feb 2006 08:58:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67385 invoked by uid 500); 28 Feb 2006 08:58:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67368 invoked by uid 99); 28 Feb 2006 08:58:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 00:58:00 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 00:57:59 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.12.10/8.12.10) with ESMTP id k1S8vbQk210334
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 08:57:37 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.12.10/NCO/VER6.8) with ESMTP id k1S8vqwQ231018
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 09:57:52 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.13.3) with ESMTP id k1S8vaSn014569
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 09:57:37 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.12.11) with ESMTP id k1S8vaWs014564
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 09:57:36 +0100
Subject: Efficiently updating indexed documents
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 August 18, 2005
Message-ID: <OFB36E7EAB.3D8CD49B-ONC2257123.002DB3D8-C2257123.003071CF@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Tue, 28 Feb 2006 10:49:08 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0HF90 | November 16, 2005) at
 28/02/2006 10:57:51
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


A few days ago someone on this list asked how to efficiently "update"
documents in the index, i.e.,
delete the old version of the document (found by some unique id field)  and
add the new version.
The problem was that opening and closing the IndexReader and IndexWriter
after each document
was inefficient (using IndexModifier doesn't help here, because it does the
same under the scenes).
I was also interested in doing the same thing myself.

People suggested doing the deletes immediately and buffering the document
additions
in memory for later. This is doable, but  I wanted to avoid buffering the
new documents (potentially
large) in memory myself (let Lucene do whatever buffering it wishes in
IndexWriter). I also did not
like the idea that in some periods of time, searches will not return the
updated file, because the old
version was already deleted and the new version was not yet indexed.

I therefore came up with the following solution, which I'll be happy to
hear comments about
(especially if you think this solution is broken in some way or my
assumptions are wrong).

The idea is basically this: when I want to replace a document, I immediatly
add (with
IndexWriter.addDocument) the new document to the open IndexWriter. I also
save the
document;s unique id term to a vector "idsReplaced", of terms we will deal
with later:

    private Vector idsReplaced = new Vector();
    public void replaceDocument(Document document, String idfield, Analyzer
analyzer) throws IOException {
      indexwriter.addDocument(document, analyzer);
      idsReplaced.add(new Term(idfield,document.get(idfield)));
    }

Now, when I want to flush the index, I close the IndexWriter to make sure
all the new documents
were added, and then for each id in the idsReplaced vector, I remove all
but the last document
with this id. The trick here is that IndexReader.termDocs(term) returns the
matching documents
ordered by internal document number, and documents added later get a higher
number
(I hope this is actually true... It seems like that in my experiments), so
we can delete all but the
last matching document for the same id. The code looks something like this:

    // call this after doing indexwriter.close();
    private void doDelete() throws IOException {
      if(idsReplaced.isEmpty())
            return;
      IndexReader ir = IndexReader.open(indexDir);
      for(Iterator i = idsReplaced.iterator(); i.hasNext();){
            Term term = (Term) i.next();
            TermDocs docs = ir.termDocs(term);
            int doctodelete = -1;
            while(docs.next()){
                  if(doctodelete>0)
                        ir.deleteDocument(doctodelete);
                  doctodelete=docs.doc();
            }
      }
      idsReplaced.clear();
      ir.close();
    }

I did not test this idea too much, but in some initial experiments I tried,
it seems
to work.

--
Nadav Har'El
nyh@il.ibm.com
+972-4-829-6326


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 10:19:36 2006
Return-Path: <java-user-return-19194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3527 invoked from network); 28 Feb 2006 10:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 10:19:35 -0000
Received: (qmail 61171 invoked by uid 500); 28 Feb 2006 10:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61023 invoked by uid 500); 28 Feb 2006 10:19:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60967 invoked by uid 99); 28 Feb 2006 10:19:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 02:19:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.247.205.10] (HELO smtp.eurospider.ch) (193.247.205.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 02:19:22 -0800
Received: from [195.176.203.68] (hyakutake.eurospider.ch [195.176.203.68])
	by smtp.eurospider.ch (Postfix) with ESMTP id 3A709415B6
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 11:18:59 +0100 (MET)
Message-ID: <4404239B.9070905@eurospider.com>
Date: Tue, 28 Feb 2006 11:19:07 +0100
From: Andreas Baumann <Andreas.Baumann@eurospider.com>
User-Agent: Thunderbird 1.5 (X11/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Maven2 Lucene 1.9 package
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,


I need an official Maven2 package and wanted to build one. Then I saw
the following in the documentation of Maven:

"Maven partners

The following sites sync automatically their project repository with the 
central one. If you want a project from any of this sites to be uploaded 
to ibiblio you'll have to contact the project maintainers.

     * The Apache Software Foundation
     * Codehaus
     * MortBay Jetty
     * OpenSymphony
     * OS Java
"

I wonder if somebody did it before or if somebody of the core developers
wants to take the responsability to build one?


With kind regards

Andreas Baumann


--
Andreas Baumann
Senior Software Engineer
Eurospider Information Technology AG
Schaffhauserstrasse 18
CH-8006 Zuerich
Telefon: +41(0)43/255 25 25
Fax: +41(0)43/255 25 26
E-mail: Andreas.Baumann@eurospider.com
Homepage: www.eurospider.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 10:55:45 2006
Return-Path: <java-user-return-19195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22183 invoked from network); 28 Feb 2006 10:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 10:55:44 -0000
Received: (qmail 12906 invoked by uid 500); 28 Feb 2006 10:55:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12882 invoked by uid 500); 28 Feb 2006 10:55:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12870 invoked by uid 99); 28 Feb 2006 10:55:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 02:55:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 02:55:35 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1SAt167008232
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 11:55:04 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [268.1.1/270]); Tue, 28 Feb 2006 11:54:05 +0100
Message-ID: <44042BCD.1050608@isb-sib.ch>
Date: Tue, 28 Feb 2006 11:54:05 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing performance with Lucene 1.9
References: <440059B3.4070302@isb-sib.ch> <200602261910.34137@danielnaber.de>
In-Reply-To: <200602261910.34137@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> A fix has now been committed to trunk in SVN, it should be part of the next 
> 1.9 release.

Performance seems to have recovered, more or less, thanks!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 11:11:28 2006
Return-Path: <java-user-return-19196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29712 invoked from network); 28 Feb 2006 11:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 11:11:28 -0000
Received: (qmail 29896 invoked by uid 500); 28 Feb 2006 11:11:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29841 invoked by uid 500); 28 Feb 2006 11:11:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29828 invoked by uid 99); 28 Feb 2006 11:11:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:11:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of samurujackson@googlemail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO zproxy.gmail.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:11:17 -0800
Received: by zproxy.gmail.com with SMTP id z6so1213898nzd
        for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 03:10:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=aBpirYuAqb28poWC26V2YA4WgFiu1zgIQLxRQmNHOsST0cNz6G5IAAgLl1Y5TIGjOIMdHnr8M8CE2dRPyAbV5Zhs4ewuqjkwhQmyiECODCjo2gzz9j0mCLSdojeRjvb+lb1FGWKMZ/hiDBalt2mV13K+6UAYSwz6H60WrnFGzAI=
Received: by 10.65.73.5 with SMTP id a5mr387501qbl;
        Tue, 28 Feb 2006 03:10:56 -0800 (PST)
Received: by 10.65.74.19 with HTTP; Tue, 28 Feb 2006 03:10:56 -0800 (PST)
Message-ID: <fed285090602280310q64e9c803g1d6901016fce987@mail.gmail.com>
Date: Tue, 28 Feb 2006 12:10:56 +0100
From: "Samuru Jackson" <samurujackson@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter Field.Keyword possible?
In-Reply-To: <9BC0EEC2-13D7-4486-BE29-94E8DD1B3B58@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <fed285090602260238s5603347emb46ed8abd3a139d2@mail.gmail.com>
	 <9BC0EEC2-13D7-4486-BE29-94E8DD1B3B58@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi again!

>         2) Use a QueryFilter with that same TermQuery, and apply that Fil=
ter
> to your search method.

Thanks for the hint - I just bought "Lucene in Action" and now I'm
more into it :-)

But at this point I'm facing some Filter problems again.

As proposed in LiA the easiest way would be to use the QueryFilter for
my problem. I just create a Term for "type" in my last example and
thats all.

**But** what if I want to create a whole set of filters?

For example I add documents to my index like the way above:

Document document =3D new Document();
document.add(Field.Keyword("id", id));
document.add(Field.Keyword("type", type));
document.add(Field.Text("content", content));

Now I want to search through only the documents with the ids 1, 12,
33, 44, 55, 87 and 123 plus "type" must be filtered to something too
to make it much more complicated.

Can anyone give me a hint again ;-)

Thanks!

Samuru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 11:16:58 2006
Return-Path: <java-user-return-19197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32302 invoked from network); 28 Feb 2006 11:16:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 11:16:37 -0000
Received: (qmail 42572 invoked by uid 500); 28 Feb 2006 11:16:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42532 invoked by uid 500); 28 Feb 2006 11:16:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42514 invoked by uid 99); 28 Feb 2006 11:16:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:16:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [210.18.90.100] (HELO chnmail.satyam.com) (210.18.90.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:16:21 -0800
X-eSCM-MailFrom: <Haritha_Parvatham@satyam.com>
Received: from Unknown (172.18.73.12)
	by chnescm01 (172.18.76.22);
	Tue, 28 February 2006 16:46:25 +0530
Received: from disclaimerchn.corp.satyam.ad (chn.satyam.com [172.18.73.8])
	by che2.satyam.com (8.12.8/8.12.8) with ESMTP id k1SB6cTR011274
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 16:36:38 +0530
Received: from ccrmsg003.corp.satyam.ad ([172.18.73.7]) by disclaimerchn.corp.satyam.ad with Microsoft SMTPSVC(6.0.3790.211); Tue, 28 Feb 2006 16:45:19 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.326
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Importance: normal
Priority: normal
Subject: RE: Filter Field.Keyword possible?
Date: Tue, 28 Feb 2006 16:44:29 +0530
Message-ID: <F448FF49D11EA4459D957805E93C3A690252185B@ccrmsg003.corp.satyam.ad>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Filter Field.Keyword possible?
Thread-Index: AcY8V8Nl4ho+QDPCTByu0njbR5wW7AAABOqQ
From: "Haritha_Parvatham" <Haritha_Parvatham@satyam.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2006 11:15:19.0176 (UTC) FILETIME=[422E5880:01C63C58]
X-Virus-Scanned: ClamAV version 0.87, clamav-milter version 0.87 on che2.satyam.com
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20

Hi,
Is there some one to guide to deploy lucene 1.4.3.
Iam having lucene 1.4.3 sources.Please tell me the procedure to run
lucene in my system.Iam using windows as os.
Thanks,




-----Original Message-----
From: Samuru Jackson [mailto:samurujackson@googlemail.com]=20
Sent: Tuesday, February 28, 2006 4:41 PM
To: java-user@lucene.apache.org
Subject: Re: Filter Field.Keyword possible?

Hi again!

>         2) Use a QueryFilter with that same TermQuery, and apply that=20
> Filter to your search method.

Thanks for the hint - I just bought "Lucene in Action" and now I'm more
into it :-)

But at this point I'm facing some Filter problems again.

As proposed in LiA the easiest way would be to use the QueryFilter for
my problem. I just create a Term for "type" in my last example and thats
all.

**But** what if I want to create a whole set of filters?

For example I add documents to my index like the way above:

Document document =3D new Document();
document.add(Field.Keyword("id", id));
document.add(Field.Keyword("type", type));
document.add(Field.Text("content", content));

Now I want to search through only the documents with the ids 1, 12, 33,
44, 55, 87 and 123 plus "type" must be filtered to something too to make
it much more complicated.

Can anyone give me a hint again ;-)

Thanks!

Samuru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




DISCLAIMER:
This email (including any attachments) is intended for the sole use of =
the intended recipient/s and may contain material that is CONFIDENTIAL =
AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or =
copying or distribution or forwarding of any or all of the contents in =
this message is STRICTLY PROHIBITED. If you are not the intended =
recipient, please contact the sender by email and delete all copies; =
your cooperation in this regard is appreciated.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 11:27:36 2006
Return-Path: <java-user-return-19198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37140 invoked from network); 28 Feb 2006 11:27:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 11:27:35 -0000
Received: (qmail 53161 invoked by uid 500); 28 Feb 2006 11:27:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53091 invoked by uid 500); 28 Feb 2006 11:27:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53066 invoked by uid 99); 28 Feb 2006 11:27:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:27:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:27:23 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 43ED733CFF2; Tue, 28 Feb 2006 06:27:02 -0500 (EST)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 66F1233CFF1
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 06:27:01 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <F448FF49D11EA4459D957805E93C3A690252185B@ccrmsg003.corp.satyam.ad>
References: <F448FF49D11EA4459D957805E93C3A690252185B@ccrmsg003.corp.satyam.ad>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <59F9244B-DB39-45C2-B42F-AAA24E27FBCF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Filter Field.Keyword possible?
Date: Tue, 28 Feb 2006 06:27:05 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 28, 2006, at 6:14 AM, Haritha_Parvatham wrote:
> Hi,
> Is there some one to guide to deploy lucene 1.4.3.
> Iam having lucene 1.4.3 sources.Please tell me the procedure to run
> lucene in my system.Iam using windows as os.

First steps are to familiarize yourself with just what exactly Lucene  
is.  You don't "deploy" Lucene, per se.  It simply(!) a library, a  
JAR in Java terms.  Lucene itself becomes integrated into your  
application just like any other 3rd party library.

I recommend you begin by reading any of the freely available articles  
online - http://wiki.apache.org/jakarta-lucene/Resources - and  the  
wonderful (hey, even I think so ;) "Lucene in Action" book.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 11:32:05 2006
Return-Path: <java-user-return-19199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39888 invoked from network); 28 Feb 2006 11:32:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 11:32:03 -0000
Received: (qmail 59680 invoked by uid 500); 28 Feb 2006 11:31:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59650 invoked by uid 500); 28 Feb 2006 11:31:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59639 invoked by uid 99); 28 Feb 2006 11:31:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:31:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:31:50 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B05D833D10B; Tue, 28 Feb 2006 06:31:29 -0500 (EST)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9FD7533D2D6
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 06:31:15 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <fed285090602280310q64e9c803g1d6901016fce987@mail.gmail.com>
References: <fed285090602260238s5603347emb46ed8abd3a139d2@mail.gmail.com> <9BC0EEC2-13D7-4486-BE29-94E8DD1B3B58@ehatchersolutions.com> <fed285090602280310q64e9c803g1d6901016fce987@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3564E3FC-9037-45CB-8090-D64281D06AE6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Filter Field.Keyword possible?
Date: Tue, 28 Feb 2006 06:31:19 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 28, 2006, at 6:10 AM, Samuru Jackson wrote:
> Hi again!
>
>>         2) Use a QueryFilter with that same TermQuery, and apply  
>> that Filter
>> to your search method.
>
> Thanks for the hint - I just bought "Lucene in Action" and now I'm
> more into it :-)
>
> But at this point I'm facing some Filter problems again.
>
> As proposed in LiA the easiest way would be to use the QueryFilter for
> my problem. I just create a Term for "type" in my last example and
> thats all.

Also heed the other recommendations in LIA and don't necessarily use  
Filters when BooleanQuery clauses will suffice.  There is overhead  
involved in the Filter mechanism in terms of executing multiple  
queries to build all the filters you're proposing.

> **But** what if I want to create a whole set of filters?

There is a ChainedFilter available in the contrib/miscellaneous area  
(previously called the "sandbox", as in LIA) that can be used to  
combine multiple Filters in sophisticated ways.  Maybe this is what  
you're after?  It is covered in LIA.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 11:34:39 2006
Return-Path: <java-user-return-19200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40784 invoked from network); 28 Feb 2006 11:34:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 11:34:38 -0000
Received: (qmail 62659 invoked by uid 500); 28 Feb 2006 11:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62637 invoked by uid 500); 28 Feb 2006 11:34:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62626 invoked by uid 99); 28 Feb 2006 11:34:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:34:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [210.18.90.100] (HELO chnmail.satyam.com) (210.18.90.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:34:26 -0800
X-eSCM-MailFrom: <Haritha_Parvatham@satyam.com>
Received: from Unknown (172.18.73.12)
	by chnescm01 (172.18.76.22);
	Tue, 28 February 2006 17:04:48 +0530
Received: from disclaimerchn.corp.satyam.ad (chn.satyam.com [172.18.73.8])
	by che2.satyam.com (8.12.8/8.12.8) with ESMTP id k1SBP6TR018906
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 16:55:06 +0530
Received: from ccrmsg003.corp.satyam.ad ([172.18.73.7]) by disclaimerchn.corp.satyam.ad with Microsoft SMTPSVC(6.0.3790.211); Tue, 28 Feb 2006 17:03:47 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.326
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Importance: normal
Priority: normal
Subject: RE: Filter Field.Keyword possible?
Date: Tue, 28 Feb 2006 17:03:00 +0530
Message-ID: <F448FF49D11EA4459D957805E93C3A690252185C@ccrmsg003.corp.satyam.ad>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Filter Field.Keyword possible?
Thread-Index: AcY8Wd32h0jvrUD+TF+gqOweHDDq7QAABckw
From: "Haritha_Parvatham" <Haritha_Parvatham@satyam.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2006 11:33:47.0933 (UTC) FILETIME=[D70D3CD0:01C63C5A]
X-Virus-Scanned: ClamAV version 0.87, clamav-milter version 0.87 on che2.satyam.com
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20
Hi,

Lucene uses stemmer for supporting multilingualism.The stemming
algorthim differs from language to language.
Can you tell me how many different types of stemmer available & which
stemmer lucene supports.I believe it supports snowball stemmer.I have
downloaded the snowball stemmer .it supports few languages.The source
files are in Core 'C' language.I have compiled C file using C
compiler.Now I want to know how Snowball can be implemented in lucene

Thanks
-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Tuesday, February 28, 2006 4:57 PM
To: java-user@lucene.apache.org
Subject: Re: Filter Field.Keyword possible?


On Feb 28, 2006, at 6:14 AM, Haritha_Parvatham wrote:
> Hi,
> Is there some one to guide to deploy lucene 1.4.3.
> Iam having lucene 1.4.3 sources.Please tell me the procedure to run=20
> lucene in my system.Iam using windows as os.

First steps are to familiarize yourself with just what exactly Lucene
is.  You don't "deploy" Lucene, per se.  It simply(!) a library, a JAR
in Java terms.  Lucene itself becomes integrated into your application
just like any other 3rd party library.

I recommend you begin by reading any of the freely available articles
online - http://wiki.apache.org/jakarta-lucene/Resources - and  the
wonderful (hey, even I think so ;) "Lucene in Action" book.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




DISCLAIMER:
This email (including any attachments) is intended for the sole use of =
the intended recipient/s and may contain material that is CONFIDENTIAL =
AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or =
copying or distribution or forwarding of any or all of the contents in =
this message is STRICTLY PROHIBITED. If you are not the intended =
recipient, please contact the sender by email and delete all copies; =
your cooperation in this regard is appreciated.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 11:42:06 2006
Return-Path: <java-user-return-19201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42978 invoked from network); 28 Feb 2006 11:42:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 11:42:04 -0000
Received: (qmail 73517 invoked by uid 500); 28 Feb 2006 11:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73489 invoked by uid 500); 28 Feb 2006 11:41:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73478 invoked by uid 99); 28 Feb 2006 11:41:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:41:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:41:54 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5AFC833CFF2; Tue, 28 Feb 2006 06:41:34 -0500 (EST)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id EC64733CFF2
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 06:41:31 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <F448FF49D11EA4459D957805E93C3A690252185C@ccrmsg003.corp.satyam.ad>
References: <F448FF49D11EA4459D957805E93C3A690252185C@ccrmsg003.corp.satyam.ad>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <35036C34-C52C-4FDF-B9EB-6720FE5F034E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Filter Field.Keyword possible?
Date: Tue, 28 Feb 2006 06:41:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Haritha - please do not hijack threads (meaning you're replying to a  
message with one subject, but starting a new one with the same  
"subject" line).  Please create a brand new message to the list with  
a new subject.

The SnowballAnalyzer is available in Lucene, which incorporates the  
Snowball stemming algorithm.   There is also a PorterStemFilter using  
the Porter stemmer (precursor to Snowball) built into Lucene 1.4.3.

	Erik


On Feb 28, 2006, at 6:33 AM, Haritha_Parvatham wrote:

>
> Hi,
>
> Lucene uses stemmer for supporting multilingualism.The stemming
> algorthim differs from language to language.
> Can you tell me how many different types of stemmer available & which
> stemmer lucene supports.I believe it supports snowball stemmer.I have
> downloaded the snowball stemmer .it supports few languages.The source
> files are in Core 'C' language.I have compiled C file using C
> compiler.Now I want to know how Snowball can be implemented in lucene
>
> Thanks
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tuesday, February 28, 2006 4:57 PM
> To: java-user@lucene.apache.org
> Subject: Re: Filter Field.Keyword possible?
>
>
> On Feb 28, 2006, at 6:14 AM, Haritha_Parvatham wrote:
>> Hi,
>> Is there some one to guide to deploy lucene 1.4.3.
>> Iam having lucene 1.4.3 sources.Please tell me the procedure to run
>> lucene in my system.Iam using windows as os.
>
> First steps are to familiarize yourself with just what exactly Lucene
> is.  You don't "deploy" Lucene, per se.  It simply(!) a library, a JAR
> in Java terms.  Lucene itself becomes integrated into your application
> just like any other 3rd party library.
>
> I recommend you begin by reading any of the freely available articles
> online - http://wiki.apache.org/jakarta-lucene/Resources - and  the
> wonderful (hey, even I think so ;) "Lucene in Action" book.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> DISCLAIMER:
> This email (including any attachments) is intended for the sole use  
> of the intended recipient/s and may contain material that is  
> CONFIDENTIAL AND PRIVATE COMPANY INFORMATION. Any review or  
> reliance by others or copying or distribution or forwarding of any  
> or all of the contents in this message is STRICTLY PROHIBITED. If  
> you are not the intended recipient, please contact the sender by  
> email and delete all copies; your cooperation in this regard is  
> appreciated.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 11:55:51 2006
Return-Path: <java-user-return-19202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47597 invoked from network); 28 Feb 2006 11:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 11:55:50 -0000
Received: (qmail 90257 invoked by uid 500); 28 Feb 2006 11:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90216 invoked by uid 500); 28 Feb 2006 11:55:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90198 invoked by uid 99); 28 Feb 2006 11:55:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:55:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [210.18.90.100] (HELO chnmail.satyam.com) (210.18.90.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 03:55:34 -0800
X-eSCM-MailFrom: <Haritha_Parvatham@satyam.com>
Received: from Unknown (172.18.73.12)
	by chnescm01 (172.18.76.22);
	Tue, 28 February 2006 17:25:33 +0530
Received: from disclaimerchn.corp.satyam.ad (chn.satyam.com [172.18.73.8])
	by che2.satyam.com (8.12.8/8.12.8) with ESMTP id k1SBjiTV028561
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 17:15:51 +0530
Received: from ccrmsg003.corp.satyam.ad ([172.18.73.7]) by disclaimerchn.corp.satyam.ad with Microsoft SMTPSVC(6.0.3790.211); Tue, 28 Feb 2006 17:24:30 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.326
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Importance: normal
Priority: normal
Subject: How to Configure lucene using tomcat
Date: Tue, 28 Feb 2006 17:23:33 +0530
Message-ID: <F448FF49D11EA4459D957805E93C3A690252185D@ccrmsg003.corp.satyam.ad>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to Configure lucene using tomcat
Thread-Index: AcY8XCHNvNLY4kYIQ2+3pP51VWfJQAAAKaFg
From: "Haritha_Parvatham" <Haritha_Parvatham@satyam.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2006 11:54:30.0358 (UTC) FILETIME=[BB983F60:01C63C5D]
X-Virus-Scanned: ClamAV version 0.87, clamav-milter version 0.87 on che2.satyam.com
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20
Hi erik,
Iam sorry for using the same subject line.

I believe that snowball uses porter stemming algorthim.Is there is any
other alternative for snowball.Because I want stemmer which supports
multilingualism.
Please help me in configuring lucene step by step in my systemI have
downloaded lucene binaries

Thank you
Haritha
-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Tuesday, February 28, 2006 5:12 PM
To: java-user@lucene.apache.org
Subject: Re: Filter Field.Keyword possible?

Haritha - please do not hijack threads (meaning you're replying to a
message with one subject, but starting a new one with the same "subject"
line).  Please create a brand new message to the list with a new
subject.

The SnowballAnalyzer is available in Lucene, which incorporates the =20
Snowball stemming algorithm.   There is also a PorterStemFilter using =20
the Porter stemmer (precursor to Snowball) built into Lucene 1.4.3.

	Erik


On Feb 28, 2006, at 6:33 AM, Haritha_Parvatham wrote:

>
> Hi,
>
> Lucene uses stemmer for supporting multilingualism.The stemming=20
> algorthim differs from language to language.
> Can you tell me how many different types of stemmer available & which=20
> stemmer lucene supports.I believe it supports snowball stemmer.I have=20
> downloaded the snowball stemmer .it supports few languages.The source=20
> files are in Core 'C' language.I have compiled C file using C=20
> compiler.Now I want to know how Snowball can be implemented in lucene
>
> Thanks
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tuesday, February 28, 2006 4:57 PM
> To: java-user@lucene.apache.org
> Subject: Re: Filter Field.Keyword possible?
>
>
> On Feb 28, 2006, at 6:14 AM, Haritha_Parvatham wrote:
>> Hi,
>> Is there some one to guide to deploy lucene 1.4.3.
>> Iam having lucene 1.4.3 sources.Please tell me the procedure to run=20
>> lucene in my system.Iam using windows as os.
>
> First steps are to familiarize yourself with just what exactly Lucene=20
> is.  You don't "deploy" Lucene, per se.  It simply(!) a library, a JAR

> in Java terms.  Lucene itself becomes integrated into your application

> just like any other 3rd party library.
>
> I recommend you begin by reading any of the freely available articles=20
> online - http://wiki.apache.org/jakarta-lucene/Resources - and  the=20
> wonderful (hey, even I think so ;) "Lucene in Action" book.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> DISCLAIMER:
> This email (including any attachments) is intended for the sole use of

> the intended recipient/s and may contain material that is CONFIDENTIAL

> AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or=20
> copying or distribution or forwarding of any or all of the contents in

> this message is STRICTLY PROHIBITED. If you are not the intended=20
> recipient, please contact the sender by email and delete all copies;=20
> your cooperation in this regard is appreciated.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




DISCLAIMER:
This email (including any attachments) is intended for the sole use of =
the intended recipient/s and may contain material that is CONFIDENTIAL =
AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or =
copying or distribution or forwarding of any or all of the contents in =
this message is STRICTLY PROHIBITED. If you are not the intended =
recipient, please contact the sender by email and delete all copies; =
your cooperation in this regard is appreciated.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 13:12:02 2006
Return-Path: <java-user-return-19203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78562 invoked from network); 28 Feb 2006 13:12:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 13:12:01 -0000
Received: (qmail 741 invoked by uid 500); 28 Feb 2006 13:11:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 718 invoked by uid 500); 28 Feb 2006 13:11:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 707 invoked by uid 99); 28 Feb 2006 13:11:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 05:11:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of samurujackson@googlemail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO zproxy.gmail.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 05:11:44 -0800
Received: by zproxy.gmail.com with SMTP id i11so1241504nzi
        for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 05:11:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZUPGjT1TuuD5FYTqYMS32D/6AZ0vBJsmWGV3TESJflYQ8OWwhxovY/9/vgOGVIld8WlSHzUqZB+4H0upefI3e9nQGp0o5EBCDJH7lAu3CrY3SiVn/oJnS0gMzOQ9TPauIxW9pr9sdoxf3Upl3H7ooGRG5959iHUrqiUPuVziLQc=
Received: by 10.64.213.14 with SMTP id l14mr3227143qbg;
        Tue, 28 Feb 2006 05:11:23 -0800 (PST)
Received: by 10.65.74.19 with HTTP; Tue, 28 Feb 2006 05:11:23 -0800 (PST)
Message-ID: <fed285090602280511q5b4cb376v5d2a27873d9bdae5@mail.gmail.com>
Date: Tue, 28 Feb 2006 14:11:23 +0100
From: "Samuru Jackson" <samurujackson@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter Field.Keyword possible?
In-Reply-To: <3564E3FC-9037-45CB-8090-D64281D06AE6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <fed285090602260238s5603347emb46ed8abd3a139d2@mail.gmail.com>
	 <9BC0EEC2-13D7-4486-BE29-94E8DD1B3B58@ehatchersolutions.com>
	 <fed285090602280310q64e9c803g1d6901016fce987@mail.gmail.com>
	 <3564E3FC-9037-45CB-8090-D64281D06AE6@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Also heed the other recommendations in LIA and don't necessarily use
> Filters when BooleanQuery clauses will suffice.  There is overhead
> involved in the Filter mechanism in terms of executing multiple
> queries to build all the filters you're proposing.

I'm aware of the fact that using multiple filters will result in
performance problems. One point is that QueryFilters can be reused to
benefit from its caching.

BooleanQueries seem to do no caching except when using
CachingWrappingFilter. But I don't think that will help me in my
project as I won't create similar Filters that often. I will see how
it performs with 3gb indexed docs ;-)

> There is a ChainedFilter available in the contrib/miscellaneous area
> (previously called the "sandbox", as in LIA) that can be used to
> combine multiple Filters in sophisticated ways.  Maybe this is what
> you're after?  It is covered in LIA.

ChainedFilter is interesting, but I noticed that I can *add* more than
one Term to BooleanQueries and combine them with BooleanClause.Occur.
That would be sufficient for the moment...



Regarding ChainedFilter ... I can't find any API on the web!


Thanks a lot!

Samuru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 13:16:29 2006
Return-Path: <java-user-return-19204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80098 invoked from network); 28 Feb 2006 13:16:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 13:16:28 -0000
Received: (qmail 5117 invoked by uid 500); 28 Feb 2006 13:16:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4867 invoked by uid 500); 28 Feb 2006 13:16:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4856 invoked by uid 99); 28 Feb 2006 13:16:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 05:16:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.152 as permitted sender)
Received: from [205.158.62.152] (HELO ws6-5.us4.outblaze.com) (205.158.62.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Feb 2006 05:16:17 -0800
Received: (qmail 12842 invoked from network); 28 Feb 2006 13:15:56 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.12.6)
  by ws6-5.us4.outblaze.com with SMTP; 28 Feb 2006 13:15:56 -0000
Message-ID: <44044D0D.9030304@curtin.com>
Date: Tue, 28 Feb 2006 08:15:57 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: search problem
References: <41D8E340E5045F4ABA553E4524E3D3792DFA06@orbitsoft.orbitscripts>
In-Reply-To: <41D8E340E5045F4ABA553E4524E3D3792DFA06@orbitsoft.orbitscripts>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Anton Potehin wrote:

> I have a problem. 
> 
> There is an index, which contains about 6,000,000 records (15,000,000
> will be soon) the size is 4GB. Index is optimized and consists of only
> one segment. This index stores the products. Each product has brand,
> price and about 10 more additional fields. I want to not just find
> something in the index also I want to get the lists of all brands and
> price. The list of brands is needed for displaying all of the products
> and the quantity of products of this brand for certain search request.
> ...

Try using IndexReader.terms() to enumerate over all the values in the index 
for a given field.  Should be a LOT faster.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 14:41:13 2006
Return-Path: <java-user-return-19205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29163 invoked from network); 28 Feb 2006 14:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 14:41:11 -0000
Received: (qmail 27305 invoked by uid 500); 28 Feb 2006 14:40:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27276 invoked by uid 500); 28 Feb 2006 14:40:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27265 invoked by uid 99); 28 Feb 2006 14:40:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 06:40:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 06:40:42 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4393F33CFE2; Tue, 28 Feb 2006 09:40:22 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 4641033CFDC
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 09:40:21 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <fed285090602280511q5b4cb376v5d2a27873d9bdae5@mail.gmail.com>
References: <fed285090602260238s5603347emb46ed8abd3a139d2@mail.gmail.com> <9BC0EEC2-13D7-4486-BE29-94E8DD1B3B58@ehatchersolutions.com> <fed285090602280310q64e9c803g1d6901016fce987@mail.gmail.com> <3564E3FC-9037-45CB-8090-D64281D06AE6@ehatchersolutions.com> <fed285090602280511q5b4cb376v5d2a27873d9bdae5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0ECECE08-49A4-4F27-AF72-FB06D762F823@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Filter Field.Keyword possible?
Date: Tue, 28 Feb 2006 09:40:25 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 28, 2006, at 8:11 AM, Samuru Jackson wrote:

>> Also heed the other recommendations in LIA and don't necessarily use
>> Filters when BooleanQuery clauses will suffice.  There is overhead
>> involved in the Filter mechanism in terms of executing multiple
>> queries to build all the filters you're proposing.
>
> I'm aware of the fact that using multiple filters will result in
> performance problems. One point is that QueryFilters can be reused to
> benefit from its caching.
>
> BooleanQueries seem to do no caching except when using
> CachingWrappingFilter.

That last statement is not correct.  BooleanQuery and  
CachingWrapperFilter are separate beasts.  BooleanQuery does no  
caching... but then again you might not need it.  Experimentation is  
the best judge of what is needed.

>
> Regarding ChainedFilter ... I can't find any API on the web!

It's all open source :)

Our Subversion repository starts here: http://svn.apache.org/repos/ 
asf/lucene/java/trunk

And ChainedFilter is here:

	<http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/ 
miscellaneous/src/java/org/apache/lucene/misc/ChainedFilter.java>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 14:55:46 2006
Return-Path: <java-user-return-19206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41813 invoked from network); 28 Feb 2006 14:55:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 14:55:40 -0000
Received: (qmail 47663 invoked by uid 500); 28 Feb 2006 14:55:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47632 invoked by uid 500); 28 Feb 2006 14:55:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47619 invoked by uid 99); 28 Feb 2006 14:55:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 06:55:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 06:55:15 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 37EF433CFEC; Tue, 28 Feb 2006 09:54:55 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 631FF33CFE3
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 09:54:51 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <F448FF49D11EA4459D957805E93C3A690252185D@ccrmsg003.corp.satyam.ad>
References: <F448FF49D11EA4459D957805E93C3A690252185D@ccrmsg003.corp.satyam.ad>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8D6479EE-2BEA-49E8-92C5-CD7534561C12@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to Configure lucene using tomcat
Date: Tue, 28 Feb 2006 09:54:56 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Feb 28, 2006, at 6:53 AM, Haritha_Parvatham wrote:
> I believe that snowball uses porter stemming algorthim.

The Snowball stemmer came from Porter, yes.  There was a looser  
stemming algorithm prior to Snowball though, which the  
PorterStemFilter uses.

Anyway....

> Is there is any
> other alternative for snowball.Because I want stemmer which supports
> multilingualism.

Multi-lingual stemming is one of the most complex topics I've  
personally come across.  It is not a generalizable thing - each  
language is unique and you'd need to have the language known for each  
word being stemmed.  As far as I know, this is still practically an  
impossible task with existing technology.  If you come across  
something good in this area, please share :)

There are other stemming algorithms, K-Stem is one I've heard of but  
don't know anything about currently.

> Please help me in configuring lucene step by step in my systemI have
> downloaded lucene binaries

Best advice is to read the many articles/book and this e-mail list.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 15:08:51 2006
Return-Path: <java-user-return-19207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48085 invoked from network); 28 Feb 2006 15:08:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 15:08:42 -0000
Received: (qmail 64419 invoked by uid 500); 28 Feb 2006 15:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64032 invoked by uid 500); 28 Feb 2006 15:07:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63807 invoked by uid 99); 28 Feb 2006 15:07:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 07:07:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of echofloripa.yell@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO zproxy.gmail.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 07:07:24 -0800
Received: by zproxy.gmail.com with SMTP id 8so1191544nzo
        for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 07:07:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RI3u0Q0VAMhAAGLlGXuB7+z5jk6fH/qqnlpW4rFIRpCIF5V0GcIIDjqcUjO8rONr2YTBV5EWytpwmCEqzQgztSos0JHdoaPUU/mLEQ2qzeU0udXI2ZRRcZIXuzJu0x2pyGWrKbVuZXws+FFAAD6xzhlk7km9856ibenc8o9RF84=
Received: by 10.65.248.13 with SMTP id a13mr26695qbs;
        Tue, 28 Feb 2006 07:07:03 -0800 (PST)
Received: by 10.65.248.17 with HTTP; Tue, 28 Feb 2006 07:07:02 -0800 (PST)
Message-ID: <806d3a1f0602280707i59e0a574t@mail.gmail.com>
Date: Tue, 28 Feb 2006 15:07:02 +0000
From: "emerson cargnin" <echofloripa.yell@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Restricting the number of docs per search field
In-Reply-To: <806d3a1f0602270842i3e1c91e9n@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20324_20547173.1141139222928"
References: <806d3a1f0602270842i3e1c91e9n@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20324_20547173.1141139222928
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

does anyone knows a solution for that?
I know theres a method that returns a TopDoc, but it needs a filter, and in
my case, Ill need the first 2 of each doc with the same value in a given
property.


On 27/02/06, emerson cargnin <echofloripa.yell@gmail.com> wrote:
>
> Hi all
>
> Due a performance problem, I'm looking a way of restricting the docs
> returned based of the number of docs which a field has the same value. At
> the moment we just discard the docs if more than a X number for the same
> field, but I think it can be done by lucence, hence improving a lot the
> performance, as now it can return a hundred of docs for the the field val=
ue,
> when just the first 4-5 will be really used.
>
> thanks
> Emerson
>

------=_Part_20324_20547173.1141139222928--

From java-user-return-19208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 15:41:21 2006
Return-Path: <java-user-return-19208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68196 invoked from network); 28 Feb 2006 15:41:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 15:41:21 -0000
Received: (qmail 35412 invoked by uid 500); 28 Feb 2006 15:41:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35389 invoked by uid 500); 28 Feb 2006 15:41:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35378 invoked by uid 99); 28 Feb 2006 15:41:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 07:41:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 07:41:10 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14FC246F@mailer.syr.edu>; Tue, 28 Feb 2006 10:40:49 -0500
Message-ID: <44046E88.5070003@syr.edu>
Date: Tue, 28 Feb 2006 10:38:48 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Restricting the number of docs per search field
References: <806d3a1f0602270842i3e1c91e9n@mail.gmail.com> <806d3a1f0602280707i59e0a574t@mail.gmail.com>
In-Reply-To: <806d3a1f0602280707i59e0a574t@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Do you want the first 2 docs, regardless of score, with the same 
property or do you want the 2 highest scoring docs with the same property?

You might look at the HitCollector search method on IndexSearcher.  Btw, 
the Filter that is required can be null.  The HitCollector interface 
allows you to apply business rules to a document as it is being scored 
and store them how you see fit.

I am not sure you will see much performance gain, as Lucene is pretty 
fast. Have you done profiling, etc. to determine that Lucene is actually 
the bottleneck?

-Grant



emerson cargnin wrote:
> does anyone knows a solution for that?
> I know theres a method that returns a TopDoc, but it needs a filter, and in
> my case, Ill need the first 2 of each doc with the same value in a given
> property.
>
>
> On 27/02/06, emerson cargnin <echofloripa.yell@gmail.com> wrote:
>   
>> Hi all
>>
>> Due a performance problem, I'm looking a way of restricting the docs
>> returned based of the number of docs which a field has the same value. At
>> the moment we just discard the docs if more than a X number for the same
>> field, but I think it can be done by lucence, hence improving a lot the
>> performance, as now it can return a hundred of docs for the the field value,
>> when just the first 4-5 will be really used.
>>
>> thanks
>> Emerson
>>
>>     
>
>   

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 15:51:36 2006
Return-Path: <java-user-return-19209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73518 invoked from network); 28 Feb 2006 15:51:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 15:51:35 -0000
Received: (qmail 56939 invoked by uid 500); 28 Feb 2006 15:51:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56917 invoked by uid 500); 28 Feb 2006 15:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56906 invoked by uid 99); 28 Feb 2006 15:51:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 07:51:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of echofloripa.yell@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO zproxy.gmail.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 07:51:24 -0800
Received: by zproxy.gmail.com with SMTP id n29so1200857nzf
        for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 07:51:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BfNMq0+01DUwZ3QbA8Ie1d139vWbCTvIBjOLk2NFaFe4TUG5IB07HvT/yvHwk15aWfZxZbvp1TnmqQht6yTNKhi4y1lGE9Cp3akgcinQzVnHngpPXNcdIrhm6bK8xi0UaldsjrZLQuJqXvQmPDc8DL1W3y8/3tmt596FwiV0iLs=
Received: by 10.65.98.10 with SMTP id a10mr405134qbm;
        Tue, 28 Feb 2006 07:51:03 -0800 (PST)
Received: by 10.65.248.17 with HTTP; Tue, 28 Feb 2006 07:51:03 -0800 (PST)
Message-ID: <806d3a1f0602280751p1ded66e9n@mail.gmail.com>
Date: Tue, 28 Feb 2006 15:51:03 +0000
From: "emerson cargnin" <echofloripa.yell@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Restricting the number of docs per search field
In-Reply-To: <44046E88.5070003@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21348_9171534.1141141863584"
References: <806d3a1f0602270842i3e1c91e9n@mail.gmail.com>
	 <806d3a1f0602280707i59e0a574t@mail.gmail.com>
	 <44046E88.5070003@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21348_9171534.1141141863584
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Yes, the bottleneck is defenitely in lucene. The index is quite big, three
files with more than 1 giga.
We are querying for html extracts, with the id together, but it can return
almost 50 extracts for each ID, and just the first 2 will be used. We could
as well do 10 queries(that's the max number of ids that will be searched),
but Im not sure what would be faster...

thanks for the answer


On 28/02/06, Grant Ingersoll <gsingers@syr.edu> wrote:
>
> Do you want the first 2 docs, regardless of score, with the same
> property or do you want the 2 highest scoring docs with the same property=
?
>
> You might look at the HitCollector search method on IndexSearcher.  Btw,
> the Filter that is required can be null.  The HitCollector interface
> allows you to apply business rules to a document as it is being scored
> and store them how you see fit.
>
> I am not sure you will see much performance gain, as Lucene is pretty
> fast. Have you done profiling, etc. to determine that Lucene is actually
> the bottleneck?
>
> -Grant
>
>
>
> emerson cargnin wrote:
> > does anyone knows a solution for that?
> > I know theres a method that returns a TopDoc, but it needs a filter, an=
d
> in
> > my case, Ill need the first 2 of each doc with the same value in a give=
n
> > property.
> >
> >
> > On 27/02/06, emerson cargnin <echofloripa.yell@gmail.com> wrote:
> >
> >> Hi all
> >>
> >> Due a performance problem, I'm looking a way of restricting the docs
> >> returned based of the number of docs which a field has the same value.
> At
> >> the moment we just discard the docs if more than a X number for the
> same
> >> field, but I think it can be done by lucence, hence improving a lot th=
e
> >> performance, as now it can return a hundred of docs for the the field
> value,
> >> when just the first 4-5 will be really used.
> >>
> >> thanks
> >> Emerson
> >>
> >>
> >
> >
>
> --
> -------------------------------------------------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> School of Information Studies
> 335 Hinds Hall
> Syracuse, NY 13244
>
> http://www.cnlp.org
> Voice:  315-443-5484
> Fax: 315-443-6886
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21348_9171534.1141141863584--

From java-user-return-19210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 15:55:44 2006
Return-Path: <java-user-return-19210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75401 invoked from network); 28 Feb 2006 15:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 15:55:43 -0000
Received: (qmail 62054 invoked by uid 500); 28 Feb 2006 15:55:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62032 invoked by uid 500); 28 Feb 2006 15:55:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62021 invoked by uid 99); 28 Feb 2006 15:55:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 07:55:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Seeta.Somagani@xplana.com designates 65.61.155.233 as permitted sender)
Received: from [65.61.155.233] (HELO server1.takeexit33.com) (65.61.155.233)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Feb 2006 07:55:11 -0800
Received: (qmail 25949 invoked from network); 28 Feb 2006 15:54:50 -0000
Received: from w082.z209031132.bos-ma.dsl.cnc.net (HELO xplana.com) (209.31.132.82)
  by xplana.com with SMTP; 28 Feb 2006 15:54:50 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C63C7F.2ED0CF0E"
Subject: RangeQuery or BooleanQuery?
Date: Tue, 28 Feb 2006 10:53:56 -0500
Message-ID: <666F5DC00A92964896146F60A828D32B839D0E@MASSAVE.xplana.priv>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RangeQuery or BooleanQuery?
Thread-Index: AcY8fy6Kx+9m80dyStywq4oR/taplw==
From: "Seeta Somagani" <Seeta.Somagani@xplana.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C63C7F.2ED0CF0E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

=20

Hi,

=20

My documents are in the following format.

=20

doc.add(new Field ("id",page, Field.Store.YES, Field.Index.TOKENIZED));

doc.add(new Field ("content",fileContent.toString(), Field.Store.YES, =
Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS_OFFSETS));

=20

=20

I need to make a query on the content over a range of "id"s.

I have the following code in my searcher stub.

=20

QueryParser queryParser =3D new ContextQueryParser("content", new =
SimpleAnalyzer());

=20

Query query =3D queryParser.parse(queryValue);

=20

Hits hits =3D searcher.search(query);

=20

But, when I enter the query - id: [104 TO 200] content: "Marbella =
Espa=F1a" it's just returning me all the results while ignoring the =
range.

I'm getting the same result, no matter which permutations of =
phraseQueries, BooleanQueries and TermQueries I'm entering.

=20

I'd greatly appreciate any help in this regard. Thanks.

Seeta Somagani


------_=_NextPart_001_01C63C7F.2ED0CF0E--

From java-user-return-19211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 16:11:33 2006
Return-Path: <java-user-return-19211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85102 invoked from network); 28 Feb 2006 16:11:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 16:11:32 -0000
Received: (qmail 94420 invoked by uid 500); 28 Feb 2006 16:11:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94387 invoked by uid 500); 28 Feb 2006 16:11:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94376 invoked by uid 99); 28 Feb 2006 16:11:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 08:11:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Seeta.Somagani@xplana.com designates 65.61.155.233 as permitted sender)
Received: from [65.61.155.233] (HELO server1.takeexit33.com) (65.61.155.233)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Feb 2006 08:11:21 -0800
Received: (qmail 26390 invoked from network); 28 Feb 2006 16:11:01 -0000
Received: from w082.z209031132.bos-ma.dsl.cnc.net (HELO xplana.com) (209.31.132.82)
  by xplanazine.com with SMTP; 28 Feb 2006 16:11:01 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: RangeQuery or BooleanQuery?
Date: Tue, 28 Feb 2006 11:10:21 -0500
Message-ID: <666F5DC00A92964896146F60A828D32B839D21@MASSAVE.xplana.priv>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RangeQuery or BooleanQuery?
Thread-Index: AcY8fy6Kx+9m80dyStywq4oR/taplwAAiGAA
From: "Seeta Somagani" <Seeta.Somagani@xplana.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please ignore the ContextQueryParser... I dumped that and switched back =
to the QueryParser which still gives me the same result.
Thanks.

Seeta Somagani

-----Original Message-----
From: Seeta Somagani [mailto:Seeta.Somagani@xplana.com]=20
Sent: Tuesday, February 28, 2006 10:54 AM
To: java-user@lucene.apache.org
Subject: RangeQuery or BooleanQuery?

=20

Hi,

=20

My documents are in the following format.

=20

doc.add(new Field ("id",page, Field.Store.YES, Field.Index.TOKENIZED));

doc.add(new Field ("content",fileContent.toString(), Field.Store.YES, =
Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS_OFFSETS));

=20

=20

I need to make a query on the content over a range of "id"s.

I have the following code in my searcher stub.

=20

QueryParser queryParser =3D new ContextQueryParser("content", new =
SimpleAnalyzer());

=20

Query query =3D queryParser.parse(queryValue);

=20

Hits hits =3D searcher.search(query);

=20

But, when I enter the query - id: [104 TO 200] content: "Marbella =
Espa=F1a" it's just returning me all the results while ignoring the =
range.

I'm getting the same result, no matter which permutations of =
phraseQueries, BooleanQueries and TermQueries I'm entering.

=20

I'd greatly appreciate any help in this regard. Thanks.

Seeta Somagani


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 16:24:38 2006
Return-Path: <java-user-return-19212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94226 invoked from network); 28 Feb 2006 16:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 16:24:37 -0000
Received: (qmail 24242 invoked by uid 500); 28 Feb 2006 16:24:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24213 invoked by uid 500); 28 Feb 2006 16:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24197 invoked by uid 99); 28 Feb 2006 16:24:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 08:24:10 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Feb 2006 08:24:07 -0800
Received: (qmail 13792 invoked by uid 60001); 28 Feb 2006 16:23:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=iBoR1jBkuhn7MPXUK5hcPNk1QdRT9DUNqGIvaKKYycF+Yq0ALQvxnxxue2YKAmFhEE7aQRtHD/qrQc/Dfl1N1whvPCpyHo5chd0fSxJcVgnetl6QsSwEHe6A9ty2OmohDRLjIDNPOrb8/V260Z8b3x1JA5FJAq3a4NwVfunT0Pg=  ;
Message-ID: <20060228162346.13790.qmail@web50308.mail.yahoo.com>
Date: Tue, 28 Feb 2006 08:23:46 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing performance with Lucene 1.9
To: java-user@lucene.apache.org
In-Reply-To: <44042BCD.1050608@isb-sib.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Eric,
Regarding performance fix - if you can be more precise (is it really just more or less or is it as good as before), that would be great for those of us itching to use 1.9.
Thanks,
Otis

----- Original Message ----
From: Eric Jain <Eric.Jain@isb-sib.ch>
To: java-user@lucene.apache.org
Sent: Tue 28 Feb 2006 05:54:05 AM EST
Subject: Re: Indexing performance with Lucene 1.9

Daniel Naber wrote:
> A fix has now been committed to trunk in SVN, it should be part of the next 
> 1.9 release.

Performance seems to have recovered, more or less, thanks!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 17:18:05 2006
Return-Path: <java-user-return-19213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25155 invoked from network); 28 Feb 2006 17:18:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 17:18:04 -0000
Received: (qmail 67633 invoked by uid 500); 28 Feb 2006 17:17:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67604 invoked by uid 500); 28 Feb 2006 17:17:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67581 invoked by uid 99); 28 Feb 2006 17:17:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 09:17:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 09:17:42 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1SHHG67016592
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 18:17:16 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [268.1.1/270]); Tue, 28 Feb 2006 18:16:19 +0100
Message-ID: <44048563.9060809@isb-sib.ch>
Date: Tue, 28 Feb 2006 18:16:19 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing performance with Lucene 1.9
References: <44042BCD.1050608@isb-sib.ch> <20060228162346.13790.qmail@web50308.mail.yahoo.com>
In-Reply-To: <20060228162346.13790.qmail@web50308.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:
> Regarding performance fix - if you can be more precise (is it really 
 > just more or less or is it as good as before), that would be great
 > for those of us itching to use 1.9.

Yes, I can confirm that performance differs by no more than 3.1 fraggles.

;-)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 17:20:15 2006
Return-Path: <java-user-return-19214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26077 invoked from network); 28 Feb 2006 17:20:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 17:20:14 -0000
Received: (qmail 69618 invoked by uid 500); 28 Feb 2006 17:19:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69574 invoked by uid 500); 28 Feb 2006 17:19:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69516 invoked by uid 99); 28 Feb 2006 17:19:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 09:19:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 09:19:34 -0800
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k1SHJ867016903
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 18:19:08 +0100
Received: from 127.0.0.1 (AVG SMTP 7.1.375 [268.1.1/270]); Tue, 28 Feb 2006 18:18:12 +0100
Message-ID: <440485D3.3050700@isb-sib.ch>
Date: Tue, 28 Feb 2006 18:18:11 +0100
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing performance with Lucene 1.9
References: <44042BCD.1050608@isb-sib.ch> <20060228162346.13790.qmail@web50308.mail.yahoo.com>
In-Reply-To: <20060228162346.13790.qmail@web50308.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:
> Regarding performance fix - if you can be more precise (is it really 
> just more or less or is it as good as before), that would be great
> for those of us itching to use 1.9.

To be more precise: The patch reduced the time required to build one large 
index from 13 to 11 hours, though I vaguely remember it used to require no 
more than 9 hours. But there have also been some other changes that are 
none of Lucene's fault, so I'll rerun the indexing procedure with the old 
version overnight, just to be sure.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 19:05:01 2006
Return-Path: <java-user-return-19215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84573 invoked from network); 28 Feb 2006 19:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 19:05:00 -0000
Received: (qmail 7026 invoked by uid 500); 28 Feb 2006 19:04:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6931 invoked by uid 500); 28 Feb 2006 19:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6857 invoked by uid 99); 28 Feb 2006 19:04:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 11:04:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 11:03:53 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3E4625B782; Tue, 28 Feb 2006 11:03:23 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 355367F403
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 11:03:23 -0800 (PST)
Date: Tue, 28 Feb 2006 11:03:23 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: RangeQuery or BooleanQuery?
In-Reply-To: <666F5DC00A92964896146F60A828D32B839D21@MASSAVE.xplana.priv>
Message-ID: <Pine.LNX.4.58.0602281056560.4463@hal.rescomp.berkeley.edu>
References: <666F5DC00A92964896146F60A828D32B839D21@MASSAVE.xplana.priv>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


there are a couple of things that could be happening that make your
results unexpected...

: But, when I enter the query - id: [104 TO 200] content: "Marbella
: Espa=F1a" it's just returning me all the results while ignoring the range=
=2E

1) if you really have a space between the "id:" and the "[104 TO 200]" i
don't know what you'll get ... i imagine you are searching the default
field for the literal string "id:" and for the range.  likewise for
content: and the phrase after it.

2) last time i looked when query parser detects multiple queries that it
puts into a BooleanQuery, it defualts to making them all optional unless
they have a specific "occurs" flag indicating thatthey should be required
or prohibited.  changing your query to...
         +id:[104 TO 200] +content:"Marbella Espa=F1a"
=2E..may create the desired affect.

3) indexing numbers is tricky when you want to sort on those numbers, or
do range queries on those numbers becuase lucene orders everything
lexigraphically, so a range of [104 TO 200] includes numbers like "2" and
"20".  there has been a lot of talk on this in the mailing list in the
past, and a wiki HOWTO has been written about it that you should review...

=09http://wiki.apache.org/jakarta-lucene/SearchNumericalFields


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 19:14:38 2006
Return-Path: <java-user-return-19216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89165 invoked from network); 28 Feb 2006 19:14:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 19:14:37 -0000
Received: (qmail 36178 invoked by uid 500); 28 Feb 2006 19:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36100 invoked by uid 500); 28 Feb 2006 19:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36005 invoked by uid 99); 28 Feb 2006 19:14:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 11:14:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 11:14:07 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A22FB5B77F; Tue, 28 Feb 2006 11:13:46 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9BC5E7F403
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 11:13:46 -0800 (PST)
Date: Tue, 28 Feb 2006 11:13:46 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: search problem
In-Reply-To: <41D8E340E5045F4ABA553E4524E3D3792DFA06@orbitsoft.orbitscripts>
Message-ID: <Pine.LNX.4.58.0602281110020.4463@hal.rescomp.berkeley.edu>
References: <41D8E340E5045F4ABA553E4524E3D3792DFA06@orbitsoft.orbitscripts>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: price and about 10 more additional fields. I want to not just find
: something in the index also I want to get the lists of all brands and
: price. The list of brands is needed for displaying all of the products
: and the quantity of products of this brand for certain search request.

1) iterating over all the docs in an instance of Hits can be very
expensive for large results sets.  partly becuase under the covers Hits
will reexecute your search many times, and partly because you are
constantly puling back *all* of hte stored fields of all matching
documents.

2) assuming what you want is not all brands and all prices, but just the
prices and brands of the documents in you results, then i would strongly
recommend doing your search twice -- once do get the Hits object you need
and once using a HitCollector.  Within the HitCollector, use FieldCaches
to lookup the values of the fields you want.  this requires that those
fields are indexed and not tokenized, but it should be *much* faster then
your current approach.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 20:11:34 2006
Return-Path: <java-user-return-19217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12803 invoked from network); 28 Feb 2006 20:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 20:11:34 -0000
Received: (qmail 19194 invoked by uid 500); 28 Feb 2006 20:11:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19159 invoked by uid 500); 28 Feb 2006 20:11:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19146 invoked by uid 99); 28 Feb 2006 20:11:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jeff.rodenburg@gmail.com designates 66.249.92.206 as permitted sender)
Received: from [66.249.92.206] (HELO uproxy.gmail.com) (66.249.92.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 12:11:19 -0800
Received: by uproxy.gmail.com with SMTP id y2so509044uge
        for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 12:10:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=UvLqGNFsllbPIqT7W2uD+377rU546I/G4D755ahJIiEA+1pago3wfva+eQktORLOSJK5Lyci4ySyRSV7T8s+66vGPWC0B6c1p5CaKVcwpgp4taY8DgMsoZSHahzGqO9b4yX4wRGCMIJk5efnsAk2+7EEDDxPyAPO9HqQgjx6yZM=
Received: by 10.67.98.16 with SMTP id a16mr531726ugm;
        Tue, 28 Feb 2006 12:10:43 -0800 (PST)
Received: by 10.67.15.15 with HTTP; Tue, 28 Feb 2006 12:10:43 -0800 (PST)
Message-ID: <50f433360602281210t437b53cbp369d0d306c1e0bbe@mail.gmail.com>
Date: Tue, 28 Feb 2006 12:10:43 -0800
From: "Jeff Rodenburg" <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Hacking proximity search: looking for feedback
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17180_15338118.1141157443162"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17180_15338118.1141157443162
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I've been wrestling with a way to index and search data with a
geo-positional aspect.  By a geo-positional search, I want to constrain
search results within a given location range.  Furthermore, I want to allow
the user to set/change the geo-positional boundaries as needed for their
search.  This isn't a foreign concept to anyone who's needed to do the same=
.

There's been some work done in this area publicly (or at least what I could
find via the list archives and google), but not a lot.  The guys at
eventax.de have done some very impressive work.  Their implementation is
within the constructs of nutch; there's more here at
http://wiki.apache.org/nutch/GeoPosition.  Their approach is very
interesting and is predicated by having data indexed in a certain format.
I've considered building something based on the FunctionQuery class as
well.  Within this class, I could actually do the mathematical calculations
(Haversine formula, anyone?) for geo-positional filtering.  Range queries o=
n
this data set were an option as well.

I've hit a performance wall with these approaches.  The geo-positional
calculations are proving to be intensive.  With the combination of my data
set, hardware, and OS, this just wasn't getting it done.

So, I reversed my thinking.  Instead of getting Lucene to do geo-math, what
if I made geo-math do Lucene?  Lucene is exceptional at string lookups; how
could I do geo-positional search in that framework?  I seized upon an
approach that I've validated in testing, but wanted to get more feedback
from the community.

***************************************************************************=
*****************************

Data structure:
Latitude & longitude values in decimal format, i.e. latitude=3D47.480227,
longitude=3D-122.333670 (btw, a tire shop I recently visited).

Geo definition:
Boxing around a center point.  It's not critical to do a radius search with
a given circle.  A boxed approach allows for taller or wider frames of
reference, which are applicable for our use.


How I'm solving:
Treat the data as strings and formulate boolean query lookups based on
positional comparison.  Here are the steps:

Indexing:
1. Break up lat/long values to individual characters, and store each field
in progression.  Field storage type =3D Keyword.  The tire shop example:
Lat1 =3D [4]
Lat2 =3D [7]
Lat3 =3D [.]
Lat4 =3D [4]
Lat5 =3D [8]
...
Long1 =3D [-]
Long2 =3D [1]
Long3 =3D [2]
...

Searching:
1. Start with box coordinates - North/West corner, South/East corner.  For
example, a sample box around Seattle, WA:
North latitude =3D 47.77704
West longitude =3D -122.41909
South latitude =3D 47.34827
East longitude =3D -122.22031
2. Break up lat/long values in a manner similar to indexing.
3. Begin to build boolean query.  Query will contain two required clauses:
the North/South query, and the West/East query.  Both queries are built
using the same progressional evaluation of characters by position.
4. Compare North/South (top/bottom) values.  Here's a pseudo-graphical
chart:

North =3D [4][7][.][7][7][7][0][4]
South =3D [4][7][.][3][4][8][2][7]

Qualifying records will have latitude values between 47.77704 and 47.34827.
With lexicographical ordering in mind, I can safely include this phrase in
my North/South query:

   (+Lat1:4 +Lat2:7 +Lat3:. +(Lat4:4 Lat4:5 Lat4:6)

The logic is that any latitude with the first three values matching, and th=
e
fourth position containing either 4 or 5 or 6 will yield a qualifying match=
.

What other queries are needed?  Ones that match 7 or 3 in the fourth
position should be considered, but they need further qualification.  The
further qualification is based on values from the fifth position.  I can
safely included the following phrases in my North/South query:

    (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:7) +(Lat5:6 Lat5:5 Lat5:4 Lat5:3 Lat5:2
Lat5:1 Lat5:0)
    (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:3) +(Lat5:5 Lat5:6 Lat5:7 Lat5:8 Lat5:9)

The logic here is simply an extension of the first query, extended to next
position in the latitude range.  In the Northern latitude, with the first
four positions matching those values exactly, anything less than 7 in the
fifth position will yield a matching latitude.  Same goes for the South
(bottom) query.

***************************************************************************=
****************

This approach yields a higher number of boolean query clauses, the more
granular you get.  In this scenario, I've estimated approximately 145
clauses within the final constructed query.  In validation testing, this
approach has proven to be:

1) Accurate.
2) Performant (thus far).


At last, my question to everyone who cares to respond (and read this far):
feedback?

Thanks,
-- jeff

------=_Part_17180_15338118.1141157443162--

From java-user-return-19218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 20:35:21 2006
Return-Path: <java-user-return-19218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29996 invoked from network); 28 Feb 2006 20:35:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 20:35:21 -0000
Received: (qmail 66092 invoked by uid 500); 28 Feb 2006 20:35:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66038 invoked by uid 500); 28 Feb 2006 20:35:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65999 invoked by uid 99); 28 Feb 2006 20:35:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 12:35:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 12:34:51 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E79E05B763; Tue, 28 Feb 2006 12:34:26 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D375A7F403
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 12:34:26 -0800 (PST)
Date: Tue, 28 Feb 2006 12:34:26 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Hacking proximity search: looking for feedback
In-Reply-To: <50f433360602281210t437b53cbp369d0d306c1e0bbe@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602281227380.5837@hal.rescomp.berkeley.edu>
References: <50f433360602281210t437b53cbp369d0d306c1e0bbe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Geo definition:
: Boxing around a center point.  It's not critical to do a radius search with
: a given circle.  A boxed approach allows for taller or wider frames of
: reference, which are applicable for our use.

if you are just loking to confine your results to a box then i think
RangeFiltering on both the X and Y axis will be more efficient then the
individual term queries you are producing.

It will have the added bonus of not artificially affecting the scores of
hte documents based on how often a particular digit apears in a particular
position of hte latitue accross your corpus.

Once you've filtered down to a particular bounding box, you might consider
going back to the function query approach to score documents inside that
box based on their actual distance from the center point.  I don't recall
at the moment but i believe FunctionQuery's Scorer supports skipTo in such
a way that it won't bother computing the function for a document that has
been skiped (ie: when containing in a BooleanQuery with another clause
that has already prohibited it, or when executed in the context of a
Filter)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 20:49:16 2006
Return-Path: <java-user-return-19219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35583 invoked from network); 28 Feb 2006 20:49:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 20:49:16 -0000
Received: (qmail 45129 invoked by uid 500); 28 Feb 2006 20:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45096 invoked by uid 500); 28 Feb 2006 20:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45085 invoked by uid 99); 28 Feb 2006 20:49:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 12:49:08 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=RCVD_DOUBLE_IP_SPAM
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [208.253.57.99] (HELO uwamail.unitedway.org) (208.253.57.99)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Feb 2006 12:49:07 -0800
Received: from [10.100.8.1] by 10.100.8.99 with StormMail ESMTP id 93786.1575569382;
	Tue, 28 Feb 2006 15:36:29 -0500 (EST)
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C63CA8.5D898F0A"
Subject: RE: Hacking proximity search: looking for feedback
Date: Tue, 28 Feb 2006 15:48:44 -0500
Message-ID: <2911FD5311EEF04EABA7B8DAC518C1F607CFA887@uwamail.unitedway.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <2911FD5311EEF04EABA7B8DAC518C1F607CFA887@uwamail.unitedway.org>
Thread-Topic: Hacking proximity search: looking for feedback
Thread-Index: AcY8oyVn0Kajq2wZTHWJC8wTO+s8RAABQArG
References: <50f433360602281210t437b53cbp369d0d306c1e0bbe@mail.gmail.com>
From: "Bryzek.Michael" <Michael.Bryzek@uwa.unitedway.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C63CA8.5D898F0A
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

Jeff -

This is an interesting approach. On our end, we have experimented with
two variants:

Variant 1: Use Range Query

Rather than precomputing the boolean clauses yourself, index encoded
latitude and longitude values and use a Range Query. We encode by
adding 1000 to each of the values. Note: We only deal with zip codes
in the US for which this encoding works fine, but is worth another
look if you have a broader range of coordinates.

Example: Compute the box as you describe, then encode each value and
use a RangeQuery. Using the box you provided and lucene's query
parser:

       North latitude =3D 47.77704
       West longitude =3D -122.41909
       South latitude =3D 47.34827
       East longitude =3D -122.22031

gives us this query:

latitude:[1047.34827 TO 1047.77704] AND longitude:[877.58091 TO =
877.77969]

Lucene then handles expanding this query into the appropriate set of
Boolean Queries.


Variant 2: Combine the above w/ a custom scorer

For us, boxing works well to retrieve relevant documents, but our
users want those documents sorted by distance. We modified the custom
scoring class that Hatcher provides in Lucene in Action to compute the
distance between two points for only those documents which actually
match. Thus, we do our search using a Range Query, then for all
matching documents we compute an actual score that incorporates the
distance from the actual location from which the user is searching.=20

On our data set, we can still end up with 1000s of matching documents
after boxing. Thus, we still see a bottleneck computing the score for
even this smaller set of documents which we are still working through.

-Mike


-----Original Message-----
From:	Jeff Rodenburg [mailto:jeff.rodenburg@gmail.com]
Sent:	Tue 2/28/06 3:10 PM
To:	java-user@lucene.apache.org
Cc:=09
Subject:	Hacking proximity search: looking for feedback

I've been wrestling with a way to index and search data with a
geo-positional aspect.  By a geo-positional search, I want to constrain
search results within a given location range.  Furthermore, I want to =
allow
the user to set/change the geo-positional boundaries as needed for their
search.  This isn't a foreign concept to anyone who's needed to do the =
same.

There's been some work done in this area publicly (or at least what I =
could
find via the list archives and google), but not a lot.  The guys at
eventax.de have done some very impressive work.  Their implementation is
within the constructs of nutch; there's more here at
http://wiki.apache.org/nutch/GeoPosition.  Their approach is very
interesting and is predicated by having data indexed in a certain =
format.
I've considered building something based on the FunctionQuery class as
well.  Within this class, I could actually do the mathematical =
calculations
(Haversine formula, anyone?) for geo-positional filtering.  Range =
queries on
this data set were an option as well.

I've hit a performance wall with these approaches.  The geo-positional
calculations are proving to be intensive.  With the combination of my =
data
set, hardware, and OS, this just wasn't getting it done.

So, I reversed my thinking.  Instead of getting Lucene to do geo-math, =
what
if I made geo-math do Lucene?  Lucene is exceptional at string lookups; =
how
could I do geo-positional search in that framework?  I seized upon an
approach that I've validated in testing, but wanted to get more feedback
from the community.

*************************************************************************=
*******************************

Data structure:
Latitude & longitude values in decimal format, i.e. =
latitude=3D47.480227,
longitude=3D-122.333670 (btw, a tire shop I recently visited).

Geo definition:
Boxing around a center point.  It's not critical to do a radius search =
with
a given circle.  A boxed approach allows for taller or wider frames of
reference, which are applicable for our use.


How I'm solving:
Treat the data as strings and formulate boolean query lookups based on
positional comparison.  Here are the steps:

Indexing:
1. Break up lat/long values to individual characters, and store each =
field
in progression.  Field storage type =3D Keyword.  The tire shop example:
Lat1 =3D [4]
Lat2 =3D [7]
Lat3 =3D [.]
Lat4 =3D [4]
Lat5 =3D [8]
...
Long1 =3D [-]
Long2 =3D [1]
Long3 =3D [2]
...

Searching:
1. Start with box coordinates - North/West corner, South/East corner.  =
For
example, a sample box around Seattle, WA:
North latitude =3D 47.77704
West longitude =3D -122.41909
South latitude =3D 47.34827
East longitude =3D -122.22031
2. Break up lat/long values in a manner similar to indexing.
3. Begin to build boolean query.  Query will contain two required =
clauses:
the North/South query, and the West/East query.  Both queries are built
using the same progressional evaluation of characters by position.
4. Compare North/South (top/bottom) values.  Here's a pseudo-graphical
chart:

North =3D [4][7][.][7][7][7][0][4]
South =3D [4][7][.][3][4][8][2][7]

Qualifying records will have latitude values between 47.77704 and =
47.34827.
With lexicographical ordering in mind, I can safely include this phrase =
in
my North/South query:

   (+Lat1:4 +Lat2:7 +Lat3:. +(Lat4:4 Lat4:5 Lat4:6)

The logic is that any latitude with the first three values matching, and =
the
fourth position containing either 4 or 5 or 6 will yield a qualifying =
match.

What other queries are needed?  Ones that match 7 or 3 in the fourth
position should be considered, but they need further qualification.  The
further qualification is based on values from the fifth position.  I can
safely included the following phrases in my North/South query:

    (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:7) +(Lat5:6 Lat5:5 Lat5:4 Lat5:3 =
Lat5:2
Lat5:1 Lat5:0)
    (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:3) +(Lat5:5 Lat5:6 Lat5:7 Lat5:8 =
Lat5:9)

The logic here is simply an extension of the first query, extended to =
next
position in the latitude range.  In the Northern latitude, with the =
first
four positions matching those values exactly, anything less than 7 in =
the
fifth position will yield a matching latitude.  Same goes for the South
(bottom) query.

*************************************************************************=
******************

This approach yields a higher number of boolean query clauses, the more
granular you get.  In this scenario, I've estimated approximately 145
clauses within the final constructed query.  In validation testing, this
approach has proven to be:

1) Accurate.
2) Performant (thus far).


At last, my question to everyone who cares to respond (and read this =
far):
feedback?

Thanks,
-- jeff




------_=_NextPart_001_01C63CA8.5D898F0A
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C63CA8.5D898F0A--

From java-user-return-19220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 20:55:05 2006
Return-Path: <java-user-return-19220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38744 invoked from network); 28 Feb 2006 20:55:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 20:55:04 -0000
Received: (qmail 76412 invoked by uid 500); 28 Feb 2006 20:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76368 invoked by uid 500); 28 Feb 2006 20:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76336 invoked by uid 99); 28 Feb 2006 20:54:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 12:54:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 12:54:54 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Hacking proximity search: looking for feedback
Date: Tue, 28 Feb 2006 14:53:20 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B291C7B9B@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Hacking proximity search: looking for feedback
Thread-Index: AcY8qEM1y3OH45ZMSSuGoo3dcPmfPgAAIj1g
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't know if this matters, but we do all of our geolocating in sql
with decent speed.   All the trig is in the query itself and then we can
limit top 5, top 10 etc for what we show.    Is the data such that you
need lucene?    Can I ask what causes it to be beyond a databases
ability?

-----Original Message-----
From: Bryzek.Michael [mailto:Michael.Bryzek@uwa.unitedway.org]=20
Sent: Tuesday, February 28, 2006 2:49 PM
To: java-user@lucene.apache.org
Subject: RE: Hacking proximity search: looking for feedback

Jeff -

This is an interesting approach. On our end, we have experimented with
two variants:

Variant 1: Use Range Query

Rather than precomputing the boolean clauses yourself, index encoded
latitude and longitude values and use a Range Query. We encode by
adding 1000 to each of the values. Note: We only deal with zip codes
in the US for which this encoding works fine, but is worth another
look if you have a broader range of coordinates.

Example: Compute the box as you describe, then encode each value and
use a RangeQuery. Using the box you provided and lucene's query
parser:

       North latitude =3D 47.77704
       West longitude =3D -122.41909
       South latitude =3D 47.34827
       East longitude =3D -122.22031

gives us this query:

latitude:[1047.34827 TO 1047.77704] AND longitude:[877.58091 TO
877.77969]

Lucene then handles expanding this query into the appropriate set of
Boolean Queries.


Variant 2: Combine the above w/ a custom scorer

For us, boxing works well to retrieve relevant documents, but our
users want those documents sorted by distance. We modified the custom
scoring class that Hatcher provides in Lucene in Action to compute the
distance between two points for only those documents which actually
match. Thus, we do our search using a Range Query, then for all
matching documents we compute an actual score that incorporates the
distance from the actual location from which the user is searching.=20

On our data set, we can still end up with 1000s of matching documents
after boxing. Thus, we still see a bottleneck computing the score for
even this smaller set of documents which we are still working through.

-Mike


-----Original Message-----
From:	Jeff Rodenburg [mailto:jeff.rodenburg@gmail.com]
Sent:	Tue 2/28/06 3:10 PM
To:	java-user@lucene.apache.org
Cc:=09
Subject:	Hacking proximity search: looking for feedback

I've been wrestling with a way to index and search data with a
geo-positional aspect.  By a geo-positional search, I want to constrain
search results within a given location range.  Furthermore, I want to
allow
the user to set/change the geo-positional boundaries as needed for their
search.  This isn't a foreign concept to anyone who's needed to do the
same.

There's been some work done in this area publicly (or at least what I
could
find via the list archives and google), but not a lot.  The guys at
eventax.de have done some very impressive work.  Their implementation is
within the constructs of nutch; there's more here at
http://wiki.apache.org/nutch/GeoPosition.  Their approach is very
interesting and is predicated by having data indexed in a certain
format.
I've considered building something based on the FunctionQuery class as
well.  Within this class, I could actually do the mathematical
calculations
(Haversine formula, anyone?) for geo-positional filtering.  Range
queries on
this data set were an option as well.

I've hit a performance wall with these approaches.  The geo-positional
calculations are proving to be intensive.  With the combination of my
data
set, hardware, and OS, this just wasn't getting it done.

So, I reversed my thinking.  Instead of getting Lucene to do geo-math,
what
if I made geo-math do Lucene?  Lucene is exceptional at string lookups;
how
could I do geo-positional search in that framework?  I seized upon an
approach that I've validated in testing, but wanted to get more feedback
from the community.

************************************************************************
********************************

Data structure:
Latitude & longitude values in decimal format, i.e. =
latitude=3D47.480227,
longitude=3D-122.333670 (btw, a tire shop I recently visited).

Geo definition:
Boxing around a center point.  It's not critical to do a radius search
with
a given circle.  A boxed approach allows for taller or wider frames of
reference, which are applicable for our use.


How I'm solving:
Treat the data as strings and formulate boolean query lookups based on
positional comparison.  Here are the steps:

Indexing:
1. Break up lat/long values to individual characters, and store each
field
in progression.  Field storage type =3D Keyword.  The tire shop example:
Lat1 =3D [4]
Lat2 =3D [7]
Lat3 =3D [.]
Lat4 =3D [4]
Lat5 =3D [8]
...
Long1 =3D [-]
Long2 =3D [1]
Long3 =3D [2]
...

Searching:
1. Start with box coordinates - North/West corner, South/East corner.
For
example, a sample box around Seattle, WA:
North latitude =3D 47.77704
West longitude =3D -122.41909
South latitude =3D 47.34827
East longitude =3D -122.22031
2. Break up lat/long values in a manner similar to indexing.
3. Begin to build boolean query.  Query will contain two required
clauses:
the North/South query, and the West/East query.  Both queries are built
using the same progressional evaluation of characters by position.
4. Compare North/South (top/bottom) values.  Here's a pseudo-graphical
chart:

North =3D [4][7][.][7][7][7][0][4]
South =3D [4][7][.][3][4][8][2][7]

Qualifying records will have latitude values between 47.77704 and
47.34827.
With lexicographical ordering in mind, I can safely include this phrase
in
my North/South query:

   (+Lat1:4 +Lat2:7 +Lat3:. +(Lat4:4 Lat4:5 Lat4:6)

The logic is that any latitude with the first three values matching, and
the
fourth position containing either 4 or 5 or 6 will yield a qualifying
match.

What other queries are needed?  Ones that match 7 or 3 in the fourth
position should be considered, but they need further qualification.  The
further qualification is based on values from the fifth position.  I can
safely included the following phrases in my North/South query:

    (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:7) +(Lat5:6 Lat5:5 Lat5:4 Lat5:3
Lat5:2
Lat5:1 Lat5:0)
    (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:3) +(Lat5:5 Lat5:6 Lat5:7 Lat5:8
Lat5:9)

The logic here is simply an extension of the first query, extended to
next
position in the latitude range.  In the Northern latitude, with the
first
four positions matching those values exactly, anything less than 7 in
the
fifth position will yield a matching latitude.  Same goes for the South
(bottom) query.

************************************************************************
*******************

This approach yields a higher number of boolean query clauses, the more
granular you get.  In this scenario, I've estimated approximately 145
clauses within the final constructed query.  In validation testing, this
approach has proven to be:

1) Accurate.
2) Performant (thus far).


At last, my question to everyone who cares to respond (and read this
far):
feedback?

Thanks,
-- jeff




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 21:00:47 2006
Return-Path: <java-user-return-19221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41003 invoked from network); 28 Feb 2006 21:00:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 21:00:47 -0000
Received: (qmail 2862 invoked by uid 500); 28 Feb 2006 21:00:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2704 invoked by uid 500); 28 Feb 2006 21:00:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2422 invoked by uid 99); 28 Feb 2006 21:00:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:00:34 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=RCVD_DOUBLE_IP_SPAM
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [208.253.57.99] (HELO uwamail.unitedway.org) (208.253.57.99)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Feb 2006 13:00:33 -0800
Received: from [10.100.8.1] by 10.100.8.99 with StormMail ESMTP id 93786.1575569382;
	Tue, 28 Feb 2006 15:47:56 -0500 (EST)
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Hacking proximity search: looking for feedback
Date: Tue, 28 Feb 2006 16:00:11 -0500
Message-ID: <2911FD5311EEF04EABA7B8DAC518C1F607CFA888@uwamail.unitedway.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Hacking proximity search: looking for feedback
Thread-Index: AcY8qEM1y3OH45ZMSSuGoo3dcPmfPgAAIj1gAAAuw2c=
References: <F9E303076B72074AB76B2C8F78952B291C7B9B@bettylou.configureone.net>
From: "Bryzek.Michael" <Michael.Bryzek@uwa.unitedway.org>
To: <java-user@lucene.apache.org>,
	<java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Our geo searches are combined with keyword searches. We previously =
performed all of our queries in the database (Oracle 10g w/ interMedia =
for the unstructured portion) but found that it was easier to scale =
search outside the database than within.


-----Original Message-----
From:	John Powers [mailto:jpowers@configureone.com]
Sent:	Tue 2/28/06 3:53 PM
To:	java-user@lucene.apache.org
Cc:=09
Subject:	RE: Hacking proximity search: looking for feedback

I don't know if this matters, but we do all of our geolocating in sql
with decent speed.   All the trig is in the query itself and then we can
limit top 5, top 10 etc for what we show.    Is the data such that you
need lucene?    Can I ask what causes it to be beyond a databases
ability?

-----Original Message-----
From: Bryzek.Michael [mailto:Michael.Bryzek@uwa.unitedway.org]=20
Sent: Tuesday, February 28, 2006 2:49 PM
To: java-user@lucene.apache.org
Subject: RE: Hacking proximity search: looking for feedback

Jeff -

This is an interesting approach. On our end, we have experimented with
two variants:

Variant 1: Use Range Query

Rather than precomputing the boolean clauses yourself, index encoded
latitude and longitude values and use a Range Query. We encode by
adding 1000 to each of the values. Note: We only deal with zip codes
in the US for which this encoding works fine, but is worth another
look if you have a broader range of coordinates.

Example: Compute the box as you describe, then encode each value and
use a RangeQuery. Using the box you provided and lucene's query
parser:

       North latitude =3D 47.77704
       West longitude =3D -122.41909
       South latitude =3D 47.34827
       East longitude =3D -122.22031

gives us this query:

latitude:[1047.34827 TO 1047.77704] AND longitude:[877.58091 TO
877.77969]

Lucene then handles expanding this query into the appropriate set of
Boolean Queries.


Variant 2: Combine the above w/ a custom scorer

For us, boxing works well to retrieve relevant documents, but our
users want those documents sorted by distance. We modified the custom
scoring class that Hatcher provides in Lucene in Action to compute the
distance between two points for only those documents which actually
match. Thus, we do our search using a Range Query, then for all
matching documents we compute an actual score that incorporates the
distance from the actual location from which the user is searching.=20

On our data set, we can still end up with 1000s of matching documents
after boxing. Thus, we still see a bottleneck computing the score for
even this smaller set of documents which we are still working through.

-Mike


-----Original Message-----
From:	Jeff Rodenburg [mailto:jeff.rodenburg@gmail.com]
Sent:	Tue 2/28/06 3:10 PM
To:	java-user@lucene.apache.org
Cc:=09
Subject:	Hacking proximity search: looking for feedback

I've been wrestling with a way to index and search data with a
geo-positional aspect.  By a geo-positional search, I want to constrain
search results within a given location range.  Furthermore, I want to
allow
the user to set/change the geo-positional boundaries as needed for their
search.  This isn't a foreign concept to anyone who's needed to do the
same.

There's been some work done in this area publicly (or at least what I
could
find via the list archives and google), but not a lot.  The guys at
eventax.de have done some very impressive work.  Their implementation is
within the constructs of nutch; there's more here at
http://wiki.apache.org/nutch/GeoPosition.  Their approach is very
interesting and is predicated by having data indexed in a certain
format.
I've considered building something based on the FunctionQuery class as
well.  Within this class, I could actually do the mathematical
calculations
(Haversine formula, anyone?) for geo-positional filtering.  Range
queries on
this data set were an option as well.

I've hit a performance wall with these approaches.  The geo-positional
calculations are proving to be intensive.  With the combination of my
data
set, hardware, and OS, this just wasn't getting it done.

So, I reversed my thinking.  Instead of getting Lucene to do geo-math,
what
if I made geo-math do Lucene?  Lucene is exceptional at string lookups;
how
could I do geo-positional search in that framework?  I seized upon an
approach that I've validated in testing, but wanted to get more feedback
from the community.

************************************************************************
********************************

Data structure:
Latitude & longitude values in decimal format, i.e. =
latitude=3D47.480227,
longitude=3D-122.333670 (btw, a tire shop I recently visited).

Geo definition:
Boxing around a center point.  It's not critical to do a radius search
with
a given circle.  A boxed approach allows for taller or wider frames of
reference, which are applicable for our use.


How I'm solving:
Treat the data as strings and formulate boolean query lookups based on
positional comparison.  Here are the steps:

Indexing:
1. Break up lat/long values to individual characters, and store each
field
in progression.  Field storage type =3D Keyword.  The tire shop example:
Lat1 =3D [4]
Lat2 =3D [7]
Lat3 =3D [.]
Lat4 =3D [4]
Lat5 =3D [8]
...
Long1 =3D [-]
Long2 =3D [1]
Long3 =3D [2]
...

Searching:
1. Start with box coordinates - North/West corner, South/East corner.
For
example, a sample box around Seattle, WA:
North latitude =3D 47.77704
West longitude =3D -122.41909
South latitude =3D 47.34827
East longitude =3D -122.22031
2. Break up lat/long values in a manner similar to indexing.
3. Begin to build boolean query.  Query will contain two required
clauses:
the North/South query, and the West/East query.  Both queries are built
using the same progressional evaluation of characters by position.
4. Compare North/South (top/bottom) values.  Here's a pseudo-graphical
chart:

North =3D [4][7][.][7][7][7][0][4]
South =3D [4][7][.][3][4][8][2][7]

Qualifying records will have latitude values between 47.77704 and
47.34827.
With lexicographical ordering in mind, I can safely include this phrase
in
my North/South query:

   (+Lat1:4 +Lat2:7 +Lat3:. +(Lat4:4 Lat4:5 Lat4:6)

The logic is that any latitude with the first three values matching, and
the
fourth position containing either 4 or 5 or 6 will yield a qualifying
match.

What other queries are needed?  Ones that match 7 or 3 in the fourth
position should be considered, but they need further qualification.  The
further qualification is based on values from the fifth position.  I can
safely included the following phrases in my North/South query:

    (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:7) +(Lat5:6 Lat5:5 Lat5:4 Lat5:3
Lat5:2
Lat5:1 Lat5:0)
    (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:3) +(Lat5:5 Lat5:6 Lat5:7 Lat5:8
Lat5:9)

The logic here is simply an extension of the first query, extended to
next
position in the latitude range.  In the Northern latitude, with the
first
four positions matching those values exactly, anything less than 7 in
the
fifth position will yield a matching latitude.  Same goes for the South
(bottom) query.

************************************************************************
*******************

This approach yields a higher number of boolean query clauses, the more
granular you get.  In this scenario, I've estimated approximately 145
clauses within the final constructed query.  In validation testing, this
approach has proven to be:

1) Accurate.
2) Performant (thus far).


At last, my question to everyone who cares to respond (and read this
far):
feedback?

Thanks,
-- jeff




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 21:26:49 2006
Return-Path: <java-user-return-19222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54316 invoked from network); 28 Feb 2006 21:26:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 21:26:49 -0000
Received: (qmail 12639 invoked by uid 500); 28 Feb 2006 21:26:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12615 invoked by uid 500); 28 Feb 2006 21:26:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12604 invoked by uid 99); 28 Feb 2006 21:26:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:26:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 66.249.92.200 as permitted sender)
Received: from [66.249.92.200] (HELO uproxy.gmail.com) (66.249.92.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:26:43 -0800
Received: by uproxy.gmail.com with SMTP id c2so511379ugf
        for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 13:26:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gHxxlCzU9ye+Kmjmk20arTFactp0UZmCIUWQ+uslAu0EPrn7v6tEM1BhEG6YXO5z8QeKgvY3UXoEbnXQ15kg4ur9qZCBkv7ryGG7FzFXBncAyjMdzzebt7fNk+FYVbaHrCMqN8hyoj7ueSn+UaMcOC4h6TZcBzr/FVHQbP+lwiE=
Received: by 10.67.88.18 with SMTP id q18mr566837ugl;
        Tue, 28 Feb 2006 13:26:21 -0800 (PST)
Received: by 10.67.15.15 with HTTP; Tue, 28 Feb 2006 13:26:21 -0800 (PST)
Message-ID: <50f433360602281326q5084096dy3678eed0cea45355@mail.gmail.com>
Date: Tue, 28 Feb 2006 13:26:21 -0800
From: "Jeff Rodenburg" <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hacking proximity search: looking for feedback
In-Reply-To: <2911FD5311EEF04EABA7B8DAC518C1F607CFA888@uwamail.unitedway.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17706_27371155.1141161981563"
References: <F9E303076B72074AB76B2C8F78952B291C7B9B@bettylou.configureone.net>
	 <2911FD5311EEF04EABA7B8DAC518C1F607CFA888@uwamail.unitedway.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17706_27371155.1141161981563
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm in the same boat as Michael on this one.  It's not a matter of finding
the right technology to do geo-locational calculations, but rather being
able to accomplish that task in conjunction with keyword search.

-- j

On 2/28/06, Bryzek.Michael <Michael.Bryzek@uwa.unitedway.org> wrote:
>
> Our geo searches are combined with keyword searches. We previously
> performed all of our queries in the database (Oracle 10g w/ interMedia fo=
r
> the unstructured portion) but found that it was easier to scale search
> outside the database than within.
>
>
> -----Original Message-----
> From:   John Powers [mailto:jpowers@configureone.com]
> Sent:   Tue 2/28/06 3:53 PM
> To:     java-user@lucene.apache.org
> Cc:
> Subject:        RE: Hacking proximity search: looking for feedback
>
> I don't know if this matters, but we do all of our geolocating in sql
> with decent speed.   All the trig is in the query itself and then we can
> limit top 5, top 10 etc for what we show.    Is the data such that you
> need lucene?    Can I ask what causes it to be beyond a databases
> ability?
>
> -----Original Message-----
> From: Bryzek.Michael [mailto:Michael.Bryzek@uwa.unitedway.org]
> Sent: Tuesday, February 28, 2006 2:49 PM
> To: java-user@lucene.apache.org
> Subject: RE: Hacking proximity search: looking for feedback
>
> Jeff -
>
> This is an interesting approach. On our end, we have experimented with
> two variants:
>
> Variant 1: Use Range Query
>
> Rather than precomputing the boolean clauses yourself, index encoded
> latitude and longitude values and use a Range Query. We encode by
> adding 1000 to each of the values. Note: We only deal with zip codes
> in the US for which this encoding works fine, but is worth another
> look if you have a broader range of coordinates.
>
> Example: Compute the box as you describe, then encode each value and
> use a RangeQuery. Using the box you provided and lucene's query
> parser:
>
>        North latitude =3D 47.77704
>        West longitude =3D -122.41909
>        South latitude =3D 47.34827
>        East longitude =3D -122.22031
>
> gives us this query:
>
> latitude:[1047.34827 TO 1047.77704] AND longitude:[877.58091 TO
> 877.77969]
>
> Lucene then handles expanding this query into the appropriate set of
> Boolean Queries.
>
>
> Variant 2: Combine the above w/ a custom scorer
>
> For us, boxing works well to retrieve relevant documents, but our
> users want those documents sorted by distance. We modified the custom
> scoring class that Hatcher provides in Lucene in Action to compute the
> distance between two points for only those documents which actually
> match. Thus, we do our search using a Range Query, then for all
> matching documents we compute an actual score that incorporates the
> distance from the actual location from which the user is searching.
>
> On our data set, we can still end up with 1000s of matching documents
> after boxing. Thus, we still see a bottleneck computing the score for
> even this smaller set of documents which we are still working through.
>
> -Mike
>
>
> -----Original Message-----
> From:   Jeff Rodenburg [mailto:jeff.rodenburg@gmail.com]
> Sent:   Tue 2/28/06 3:10 PM
> To:     java-user@lucene.apache.org
> Cc:
> Subject:        Hacking proximity search: looking for feedback
>
> I've been wrestling with a way to index and search data with a
> geo-positional aspect.  By a geo-positional search, I want to constrain
> search results within a given location range.  Furthermore, I want to
> allow
> the user to set/change the geo-positional boundaries as needed for their
> search.  This isn't a foreign concept to anyone who's needed to do the
> same.
>
> There's been some work done in this area publicly (or at least what I
> could
> find via the list archives and google), but not a lot.  The guys at
> eventax.de have done some very impressive work.  Their implementation is
> within the constructs of nutch; there's more here at
> http://wiki.apache.org/nutch/GeoPosition.  Their approach is very
> interesting and is predicated by having data indexed in a certain
> format.
> I've considered building something based on the FunctionQuery class as
> well.  Within this class, I could actually do the mathematical
> calculations
> (Haversine formula, anyone?) for geo-positional filtering.  Range
> queries on
> this data set were an option as well.
>
> I've hit a performance wall with these approaches.  The geo-positional
> calculations are proving to be intensive.  With the combination of my
> data
> set, hardware, and OS, this just wasn't getting it done.
>
> So, I reversed my thinking.  Instead of getting Lucene to do geo-math,
> what
> if I made geo-math do Lucene?  Lucene is exceptional at string lookups;
> how
> could I do geo-positional search in that framework?  I seized upon an
> approach that I've validated in testing, but wanted to get more feedback
> from the community.
>
> ************************************************************************
> ********************************
>
> Data structure:
> Latitude & longitude values in decimal format, i.e. latitude=3D47.480227,
> longitude=3D-122.333670 (btw, a tire shop I recently visited).
>
> Geo definition:
> Boxing around a center point.  It's not critical to do a radius search
> with
> a given circle.  A boxed approach allows for taller or wider frames of
> reference, which are applicable for our use.
>
>
> How I'm solving:
> Treat the data as strings and formulate boolean query lookups based on
> positional comparison.  Here are the steps:
>
> Indexing:
> 1. Break up lat/long values to individual characters, and store each
> field
> in progression.  Field storage type =3D Keyword.  The tire shop example:
> Lat1 =3D [4]
> Lat2 =3D [7]
> Lat3 =3D [.]
> Lat4 =3D [4]
> Lat5 =3D [8]
> ...
> Long1 =3D [-]
> Long2 =3D [1]
> Long3 =3D [2]
> ...
>
> Searching:
> 1. Start with box coordinates - North/West corner, South/East corner.
> For
> example, a sample box around Seattle, WA:
> North latitude =3D 47.77704
> West longitude =3D -122.41909
> South latitude =3D 47.34827
> East longitude =3D -122.22031
> 2. Break up lat/long values in a manner similar to indexing.
> 3. Begin to build boolean query.  Query will contain two required
> clauses:
> the North/South query, and the West/East query.  Both queries are built
> using the same progressional evaluation of characters by position.
> 4. Compare North/South (top/bottom) values.  Here's a pseudo-graphical
> chart:
>
> North =3D [4][7][.][7][7][7][0][4]
> South =3D [4][7][.][3][4][8][2][7]
>
> Qualifying records will have latitude values between 47.77704 and
> 47.34827.
> With lexicographical ordering in mind, I can safely include this phrase
> in
> my North/South query:
>
>    (+Lat1:4 +Lat2:7 +Lat3:. +(Lat4:4 Lat4:5 Lat4:6)
>
> The logic is that any latitude with the first three values matching, and
> the
> fourth position containing either 4 or 5 or 6 will yield a qualifying
> match.
>
> What other queries are needed?  Ones that match 7 or 3 in the fourth
> position should be considered, but they need further qualification.  The
> further qualification is based on values from the fifth position.  I can
> safely included the following phrases in my North/South query:
>
>     (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:7) +(Lat5:6 Lat5:5 Lat5:4 Lat5:3
> Lat5:2
> Lat5:1 Lat5:0)
>     (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:3) +(Lat5:5 Lat5:6 Lat5:7 Lat5:8
> Lat5:9)
>
> The logic here is simply an extension of the first query, extended to
> next
> position in the latitude range.  In the Northern latitude, with the
> first
> four positions matching those values exactly, anything less than 7 in
> the
> fifth position will yield a matching latitude.  Same goes for the South
> (bottom) query.
>
> ************************************************************************
> *******************
>
> This approach yields a higher number of boolean query clauses, the more
> granular you get.  In this scenario, I've estimated approximately 145
> clauses within the final constructed query.  In validation testing, this
> approach has proven to be:
>
> 1) Accurate.
> 2) Performant (thus far).
>
>
> At last, my question to everyone who cares to respond (and read this
> far):
> feedback?
>
> Thanks,
> -- jeff
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17706_27371155.1141161981563--

From java-user-return-19223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 21:33:03 2006
Return-Path: <java-user-return-19223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57517 invoked from network); 28 Feb 2006 21:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 21:33:02 -0000
Received: (qmail 24299 invoked by uid 500); 28 Feb 2006 21:32:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24270 invoked by uid 500); 28 Feb 2006 21:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24259 invoked by uid 99); 28 Feb 2006 21:32:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:32:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 66.249.92.197 as permitted sender)
Received: from [66.249.92.197] (HELO uproxy.gmail.com) (66.249.92.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:32:54 -0800
Received: by uproxy.gmail.com with SMTP id u2so515466uge
        for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 13:32:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bFAZFcU4HVbJ+CPYz//nT5Y1zJdVmU+0IwKMsm2P30wbxtxL1G4kPlRMRGqP6ImEtfYvKld9gkaXG1WE2M9Eg50kTaipCequDp5a2B+lMghxbeyw1v+ylGrEphAzx+BJQ6Fr/cfypzAhBFr47O9N3Hkh1YQEE0JxNGSLDEYNB3s=
Received: by 10.67.89.7 with SMTP id r7mr642543ugl;
        Tue, 28 Feb 2006 13:32:33 -0800 (PST)
Received: by 10.67.15.15 with HTTP; Tue, 28 Feb 2006 13:32:32 -0800 (PST)
Message-ID: <50f433360602281332j57d97c5cq77ab07e8fd57443d@mail.gmail.com>
Date: Tue, 28 Feb 2006 13:32:32 -0800
From: "Jeff Rodenburg" <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hacking proximity search: looking for feedback
In-Reply-To: <2911FD5311EEF04EABA7B8DAC518C1F607CFA887@uwamail.unitedway.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17738_807000.1141162352874"
References: <50f433360602281210t437b53cbp369d0d306c1e0bbe@mail.gmail.com>
	 <2911FD5311EEF04EABA7B8DAC518C1F607CFA887@uwamail.unitedway.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17738_807000.1141162352874
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Michael -

Great thoughts, and thanks for the feedback.

Following on the Range Query approach, how is performance?  I found the
range approach (albeit with the exact values) to be slower than the
parsed-string approach I posited.

On the custom scoring, is the distance element for sorting or as a componen=
t
of relevance?  We have a need for distance sorting, but I'm trying to slay
that beast at a later stage.

-- jeff

On 2/28/06, Bryzek.Michael <Michael.Bryzek@uwa.unitedway.org> wrote:
>
> Jeff -
>
> This is an interesting approach. On our end, we have experimented with
> two variants:
>
> Variant 1: Use Range Query
>
> Rather than precomputing the boolean clauses yourself, index encoded
> latitude and longitude values and use a Range Query. We encode by
> adding 1000 to each of the values. Note: We only deal with zip codes
> in the US for which this encoding works fine, but is worth another
> look if you have a broader range of coordinates.
>
> Example: Compute the box as you describe, then encode each value and
> use a RangeQuery. Using the box you provided and lucene's query
> parser:
>
>        North latitude =3D 47.77704
>        West longitude =3D -122.41909
>        South latitude =3D 47.34827
>        East longitude =3D -122.22031
>
> gives us this query:
>
> latitude:[1047.34827 TO 1047.77704] AND longitude:[877.58091 TO 877.77969=
]
>
> Lucene then handles expanding this query into the appropriate set of
> Boolean Queries.
>
>
> Variant 2: Combine the above w/ a custom scorer
>
> For us, boxing works well to retrieve relevant documents, but our
> users want those documents sorted by distance. We modified the custom
> scoring class that Hatcher provides in Lucene in Action to compute the
> distance between two points for only those documents which actually
> match. Thus, we do our search using a Range Query, then for all
> matching documents we compute an actual score that incorporates the
> distance from the actual location from which the user is searching.
>
> On our data set, we can still end up with 1000s of matching documents
> after boxing. Thus, we still see a bottleneck computing the score for
> even this smaller set of documents which we are still working through.
>
> -Mike
>
>
> -----Original Message-----
> From:   Jeff Rodenburg [mailto:jeff.rodenburg@gmail.com]
> Sent:   Tue 2/28/06 3:10 PM
> To:     java-user@lucene.apache.org
> Cc:
> Subject:        Hacking proximity search: looking for feedback
>
> I've been wrestling with a way to index and search data with a
> geo-positional aspect.  By a geo-positional search, I want to constrain
> search results within a given location range.  Furthermore, I want to
> allow
> the user to set/change the geo-positional boundaries as needed for their
> search.  This isn't a foreign concept to anyone who's needed to do the
> same.
>
> There's been some work done in this area publicly (or at least what I
> could
> find via the list archives and google), but not a lot.  The guys at
> eventax.de have done some very impressive work.  Their implementation is
> within the constructs of nutch; there's more here at
> http://wiki.apache.org/nutch/GeoPosition.  Their approach is very
> interesting and is predicated by having data indexed in a certain format.
> I've considered building something based on the FunctionQuery class as
> well.  Within this class, I could actually do the mathematical
> calculations
> (Haversine formula, anyone?) for geo-positional filtering.  Range queries
> on
> this data set were an option as well.
>
> I've hit a performance wall with these approaches.  The geo-positional
> calculations are proving to be intensive.  With the combination of my dat=
a
> set, hardware, and OS, this just wasn't getting it done.
>
> So, I reversed my thinking.  Instead of getting Lucene to do geo-math,
> what
> if I made geo-math do Lucene?  Lucene is exceptional at string lookups;
> how
> could I do geo-positional search in that framework?  I seized upon an
> approach that I've validated in testing, but wanted to get more feedback
> from the community.
>
>
> *************************************************************************=
*******************************
>
> Data structure:
> Latitude & longitude values in decimal format, i.e. latitude=3D47.480227,
> longitude=3D-122.333670 (btw, a tire shop I recently visited).
>
> Geo definition:
> Boxing around a center point.  It's not critical to do a radius search
> with
> a given circle.  A boxed approach allows for taller or wider frames of
> reference, which are applicable for our use.
>
>
> How I'm solving:
> Treat the data as strings and formulate boolean query lookups based on
> positional comparison.  Here are the steps:
>
> Indexing:
> 1. Break up lat/long values to individual characters, and store each fiel=
d
> in progression.  Field storage type =3D Keyword.  The tire shop example:
> Lat1 =3D [4]
> Lat2 =3D [7]
> Lat3 =3D [.]
> Lat4 =3D [4]
> Lat5 =3D [8]
> ...
> Long1 =3D [-]
> Long2 =3D [1]
> Long3 =3D [2]
> ...
>
> Searching:
> 1. Start with box coordinates - North/West corner, South/East corner.  Fo=
r
> example, a sample box around Seattle, WA:
> North latitude =3D 47.77704
> West longitude =3D -122.41909
> South latitude =3D 47.34827
> East longitude =3D -122.22031
> 2. Break up lat/long values in a manner similar to indexing.
> 3. Begin to build boolean query.  Query will contain two required clauses=
:
> the North/South query, and the West/East query.  Both queries are built
> using the same progressional evaluation of characters by position.
> 4. Compare North/South (top/bottom) values.  Here's a pseudo-graphical
> chart:
>
> North =3D [4][7][.][7][7][7][0][4]
> South =3D [4][7][.][3][4][8][2][7]
>
> Qualifying records will have latitude values between 47.77704 and 47.3482=
7
> .
> With lexicographical ordering in mind, I can safely include this phrase i=
n
> my North/South query:
>
>    (+Lat1:4 +Lat2:7 +Lat3:. +(Lat4:4 Lat4:5 Lat4:6)
>
> The logic is that any latitude with the first three values matching, and
> the
> fourth position containing either 4 or 5 or 6 will yield a qualifying
> match.
>
> What other queries are needed?  Ones that match 7 or 3 in the fourth
> position should be considered, but they need further qualification.  The
> further qualification is based on values from the fifth position.  I can
> safely included the following phrases in my North/South query:
>
>     (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:7) +(Lat5:6 Lat5:5 Lat5:4 Lat5:3 Lat5:=
2
> Lat5:1 Lat5:0)
>     (+Lat1:4 +Lat2:7 +Lat3:. +Lat4:3) +(Lat5:5 Lat5:6 Lat5:7 Lat5:8
> Lat5:9)
>
> The logic here is simply an extension of the first query, extended to nex=
t
> position in the latitude range.  In the Northern latitude, with the first
> four positions matching those values exactly, anything less than 7 in the
> fifth position will yield a matching latitude.  Same goes for the South
> (bottom) query.
>
>
> *************************************************************************=
******************
>
> This approach yields a higher number of boolean query clauses, the more
> granular you get.  In this scenario, I've estimated approximately 145
> clauses within the final constructed query.  In validation testing, this
> approach has proven to be:
>
> 1) Accurate.
> 2) Performant (thus far).
>
>
> At last, my question to everyone who cares to respond (and read this far)=
:
> feedback?
>
> Thanks,
> -- jeff
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17738_807000.1141162352874--

From java-user-return-19224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 21:38:50 2006
Return-Path: <java-user-return-19224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60573 invoked from network); 28 Feb 2006 21:38:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 21:38:50 -0000
Received: (qmail 38166 invoked by uid 500); 28 Feb 2006 21:38:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38143 invoked by uid 500); 28 Feb 2006 21:38:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38132 invoked by uid 99); 28 Feb 2006 21:38:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:38:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Seeta.Somagani@xplana.com designates 65.61.155.233 as permitted sender)
Received: from [65.61.155.233] (HELO server1.takeexit33.com) (65.61.155.233)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Feb 2006 13:38:44 -0800
Received: (qmail 2976 invoked from network); 28 Feb 2006 21:38:23 -0000
Received: from w082.z209031132.bos-ma.dsl.cnc.net (HELO xplana.com) (209.31.132.82)
  by parentingbythenumbers.com with SMTP; 28 Feb 2006 21:38:23 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: RangeQuery or BooleanQuery?
Date: Tue, 28 Feb 2006 16:30:26 -0500
Message-ID: <666F5DC00A92964896146F60A828D32B839D90@MASSAVE.xplana.priv>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RangeQuery or BooleanQuery?
Thread-Index: AcY8md5NeCA2fU6/Qr2zPu7aXhcmtwAEPf/A
From: "Seeta Somagani" <Seeta.Somagani@xplana.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hoss,

Your observation about the spaces seems very likely. I hence, removed =
the spaces, padded the numbers and also tried using the RangeFilter, but =
still I got the same result. Upon closer inspection of my code, I found =
that I was tokenizing the "id" field, which was rendering that field =
illegible for the filter. I promptly changed it to UNTOKENIZED and now =
the RangeFilter recognizes the field. I discovered that I'd have to take =
care of more issues before I can make sure that this works.

Thanks so much
Seeta

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Tuesday, February 28, 2006 2:03 PM
To: java-user@lucene.apache.org
Subject: RE: RangeQuery or BooleanQuery?


there are a couple of things that could be happening that make your
results unexpected...

: But, when I enter the query - id: [104 TO 200] content: "Marbella
: Espa=F1a" it's just returning me all the results while ignoring the =
range.

1) if you really have a space between the "id:" and the "[104 TO 200]" i
don't know what you'll get ... i imagine you are searching the default
field for the literal string "id:" and for the range.  likewise for
content: and the phrase after it.

2) last time i looked when query parser detects multiple queries that it
puts into a BooleanQuery, it defualts to making them all optional unless
they have a specific "occurs" flag indicating thatthey should be =
required
or prohibited.  changing your query to...
         +id:[104 TO 200] +content:"Marbella Espa=F1a"
...may create the desired affect.

3) indexing numbers is tricky when you want to sort on those numbers, or
do range queries on those numbers becuase lucene orders everything
lexigraphically, so a range of [104 TO 200] includes numbers like "2" =
and
"20".  there has been a lot of talk on this in the mailing list in the
past, and a wiki HOWTO has been written about it that you should =
review...

	http://wiki.apache.org/jakarta-lucene/SearchNumericalFields


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 21:41:06 2006
Return-Path: <java-user-return-19225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62060 invoked from network); 28 Feb 2006 21:41:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 21:41:06 -0000
Received: (qmail 41534 invoked by uid 500); 28 Feb 2006 21:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41402 invoked by uid 500); 28 Feb 2006 21:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41386 invoked by uid 99); 28 Feb 2006 21:40:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:40:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 66.249.92.201 as permitted sender)
Received: from [66.249.92.201] (HELO uproxy.gmail.com) (66.249.92.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:40:50 -0800
Received: by uproxy.gmail.com with SMTP id q2so514486uge
        for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 13:40:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Kwx0r+rnOcGLjaJ+9xdwIRs3Ug8679v7RBpa7fzNnMocUEY+82hpPY4IjNvgRzTUNfnpBNyiIu2Go0/xOmkJVFMhS39QeNuecDAAlujzlEC7oyPScs5lDz7JT7PyNQmL2BgQwbc8nAbSjdMGdEZqCtmMoAU9wato2DRMiwkWwyo=
Received: by 10.66.184.5 with SMTP id h5mr690359ugf;
        Tue, 28 Feb 2006 13:40:29 -0800 (PST)
Received: by 10.67.15.15 with HTTP; Tue, 28 Feb 2006 13:40:29 -0800 (PST)
Message-ID: <50f433360602281340u40a987cew346f95d7d180785@mail.gmail.com>
Date: Tue, 28 Feb 2006 13:40:29 -0800
From: "Jeff Rodenburg" <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hacking proximity search: looking for feedback
In-Reply-To: <Pine.LNX.4.58.0602281227380.5837@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17842_16556142.1141162829315"
References: <50f433360602281210t437b53cbp369d0d306c1e0bbe@mail.gmail.com>
	 <Pine.LNX.4.58.0602281227380.5837@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17842_16556142.1141162829315
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Very good points, I hadn't considered the term frequency of the digits
affecting scoring.  As an aside, can that aspect of the score be ignored fo=
r
these fields?

I need to spend more time with FunctionQuery, I haven't given it the
attention it deserves.

Great feedback, thanks for the notes.

-- jeff

On 2/28/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Geo definition:
> : Boxing around a center point.  It's not critical to do a radius search
> with
> : a given circle.  A boxed approach allows for taller or wider frames of
> : reference, which are applicable for our use.
>
> if you are just loking to confine your results to a box then i think
> RangeFiltering on both the X and Y axis will be more efficient then the
> individual term queries you are producing.
>
> It will have the added bonus of not artificially affecting the scores of
> hte documents based on how often a particular digit apears in a particula=
r
> position of hte latitue accross your corpus.
>
> Once you've filtered down to a particular bounding box, you might conside=
r
> going back to the function query approach to score documents inside that
> box based on their actual distance from the center point.  I don't recall
> at the moment but i believe FunctionQuery's Scorer supports skipTo in suc=
h
> a way that it won't bother computing the function for a document that has
> been skiped (ie: when containing in a BooleanQuery with another clause
> that has already prohibited it, or when executed in the context of a
> Filter)
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17842_16556142.1141162829315--

From java-user-return-19226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 21:54:10 2006
Return-Path: <java-user-return-19226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70176 invoked from network); 28 Feb 2006 21:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 21:54:10 -0000
Received: (qmail 67302 invoked by uid 500); 28 Feb 2006 21:54:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67260 invoked by uid 500); 28 Feb 2006 21:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67249 invoked by uid 99); 28 Feb 2006 21:54:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:54:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Seeta.Somagani@xplana.com designates 65.61.155.233 as permitted sender)
Received: from [65.61.155.233] (HELO server1.takeexit33.com) (65.61.155.233)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Feb 2006 13:54:04 -0800
Received: (qmail 3444 invoked from network); 28 Feb 2006 21:53:44 -0000
Received: from w082.z209031132.bos-ma.dsl.cnc.net (HELO xplana.com) (209.31.132.82)
  by marketingtowin.net with SMTP; 28 Feb 2006 21:53:44 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C63CB0.A3E75083"
Subject: Inside a Boolean Query
Date: Tue, 28 Feb 2006 16:47:58 -0500
Message-ID: <666F5DC00A92964896146F60A828D32B839D96@MASSAVE.xplana.priv>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inside a Boolean Query
Thread-Index: AcY8sKN9vw/C5JhiROOgXFhGG1AD2A==
From: "Seeta Somagani" <Seeta.Somagani@xplana.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C63CB0.A3E75083
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I need to return the context of the terms along with the results.

The approach that I'm using is to

1)       detect what kind of query it is,=20

2)       extract the terms of the query,=20

3)       fetch the context of the individual terms, and=20

4)       finally join them depending on the query.

=20

The problem is that all user entered queries are either PhraseQuerys,
BooleanQuerys, or TermQuerys.

PhraseQuerys and TermQuerys can easily be done, but the problem is with
a BooleanQuery.

I'm unable to find out what Querys make up the BooleanQuery. That
matters when there are a combination of Querys like a PhraseQuery and a
TermQuery inside the BooleanQuery.=20

Is there a way that I can detect the composition of a BooleanQuery,
rather than just extract the individual terms?

=20

Seeta


------_=_NextPart_001_01C63CB0.A3E75083--

From java-user-return-19227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 21:59:21 2006
Return-Path: <java-user-return-19227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73082 invoked from network); 28 Feb 2006 21:59:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 21:59:21 -0000
Received: (qmail 80672 invoked by uid 500); 28 Feb 2006 21:59:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80647 invoked by uid 500); 28 Feb 2006 21:59:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80636 invoked by uid 99); 28 Feb 2006 21:59:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:59:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.195 as permitted sender)
Received: from [64.233.182.195] (HELO nproxy.gmail.com) (64.233.182.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 13:59:14 -0800
Received: by nproxy.gmail.com with SMTP id y25so942442nfb
        for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 13:58:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Kg7zn9pZ/StPFSmxj8fxdyn0q6MwuBkfiZ3rJk7nFqdCv1Hm/OoL52Pal0UoPoF85x72pqYNQ/YQ+FiJZqAx2g4g5FlOnJgNpZE5v/JCgJiQKsIhXWuSVBlCy5/nJbze86j3hMDFV2oGd0hPh/WxEsy3V/P/IbylGhTx7EcUqQE=
Received: by 10.48.49.2 with SMTP id w2mr2355167nfw;
        Tue, 28 Feb 2006 13:58:52 -0800 (PST)
Received: by 10.49.93.9 with HTTP; Tue, 28 Feb 2006 13:58:52 -0800 (PST)
Message-ID: <c68e39170602281358q7c801d1cx768a20bfe3679f1@mail.gmail.com>
Date: Tue, 28 Feb 2006 16:58:52 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inside a Boolean Query
In-Reply-To: <666F5DC00A92964896146F60A828D32B839D96@MASSAVE.xplana.priv>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <666F5DC00A92964896146F60A828D32B839D96@MASSAVE.xplana.priv>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 2/28/06, Seeta Somagani <Seeta.Somagani@xplana.com> wrote:
> Is there a way that I can detect the composition of a BooleanQuery,
> rather than just extract the individual terms?

Hi Seeta,

I think BooleanQuery.getClauses() might be what you are looking for.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 22:09:24 2006
Return-Path: <java-user-return-19228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78092 invoked from network); 28 Feb 2006 22:09:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 22:09:23 -0000
Received: (qmail 25988 invoked by uid 500); 28 Feb 2006 22:09:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25807 invoked by uid 500); 28 Feb 2006 22:09:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25684 invoked by uid 99); 28 Feb 2006 22:09:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 14:09:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Seeta.Somagani@xplana.com designates 65.61.155.233 as permitted sender)
Received: from [65.61.155.233] (HELO server1.takeexit33.com) (65.61.155.233)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Feb 2006 14:09:12 -0800
Received: (qmail 3862 invoked from network); 28 Feb 2006 22:08:52 -0000
Received: from w082.z209031132.bos-ma.dsl.cnc.net (HELO xplana.com) (209.31.132.82)
  by bloglens.com with SMTP; 28 Feb 2006 22:08:52 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Inside a Boolean Query
Date: Tue, 28 Feb 2006 17:04:02 -0500
Message-ID: <666F5DC00A92964896146F60A828D32B839DA3@MASSAVE.xplana.priv>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inside a Boolean Query
Thread-Index: AcY8sjo2yiLdwqeRTI6vF9GiuVzATgAAJ+bg
From: "Seeta Somagani" <Seeta.Somagani@xplana.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Yonik, there they are

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]=20
Sent: Tuesday, February 28, 2006 4:59 PM
To: java-user@lucene.apache.org
Subject: Re: Inside a Boolean Query

On 2/28/06, Seeta Somagani <Seeta.Somagani@xplana.com> wrote:
> Is there a way that I can detect the composition of a BooleanQuery,
> rather than just extract the individual terms?

Hi Seeta,

I think BooleanQuery.getClauses() might be what you are looking for.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 28 22:13:14 2006
Return-Path: <java-user-return-19229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79734 invoked from network); 28 Feb 2006 22:13:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Feb 2006 22:13:13 -0000
Received: (qmail 39611 invoked by uid 500); 28 Feb 2006 22:13:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39586 invoked by uid 500); 28 Feb 2006 22:13:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39575 invoked by uid 99); 28 Feb 2006 22:13:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 14:13:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 14:13:06 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C66C75B763; Tue, 28 Feb 2006 14:12:36 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BA3697F403
	for <java-user@lucene.apache.org>; Tue, 28 Feb 2006 14:12:36 -0800 (PST)
Date: Tue, 28 Feb 2006 14:12:36 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Hacking proximity search: looking for feedback
In-Reply-To: <50f433360602281340u40a987cew346f95d7d180785@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0602281402190.11439@hal.rescomp.berkeley.edu>
References: <50f433360602281210t437b53cbp369d0d306c1e0bbe@mail.gmail.com> 
 <Pine.LNX.4.58.0602281227380.5837@hal.rescomp.berkeley.edu>
 <50f433360602281340u40a987cew346f95d7d180785@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Very good points, I hadn't considered the term frequency of the digits
: affecting scoring.  As an aside, can that aspect of the score be ignored for
: these fields?

The easiest way is to use a boost that is so low it's insignificant, or
you could subclass TermQuery and override getSimilarity to return a
DelegateSimilarity which wraps the real instance and returns constant
values for things like tf() and idf() ... but i'm 95% sure that using a
RangeFilter (or a ConstantScoreRangeQuery) is going to be faster then all
of those TermQueries no matter what.

: I need to spend more time with FunctionQuery, I haven't given it the
: attention it deserves.

i would start by trying out an apples to apples comparison of your current
approach with one where your index only has one indexed field each for
long/lat that uses ConstantScoreRangeQuery to do the boxing.  Compare both
the size of the resulting indexes, the memory footprint while open, and
the time spent executing comparable queries.  You should probably compare
queries that involve both large boxes and small boxes, and depending on
hte usage pattern you expect consider caching your Filters if you expect
many boxes to be reused frequently.

once you've found the "best" way to do your boxing ... then look into
using FunctionQueries to influence your scores based on distance fro mthe
center of hte box.

:
: Great feedback, thanks for the notes.
:
: -- jeff
:
: On 2/28/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
: >
: >
: > : Geo definition:
: > : Boxing around a center point.  It's not critical to do a radius search
: > with
: > : a given circle.  A boxed approach allows for taller or wider frames of
: > : reference, which are applicable for our use.
: >
: > if you are just loking to confine your results to a box then i think
: > RangeFiltering on both the X and Y axis will be more efficient then the
: > individual term queries you are producing.
: >
: > It will have the added bonus of not artificially affecting the scores of
: > hte documents based on how often a particular digit apears in a particular
: > position of hte latitue accross your corpus.
: >
: > Once you've filtered down to a particular bounding box, you might consider
: > going back to the function query approach to score documents inside that
: > box based on their actual distance from the center point.  I don't recall
: > at the moment but i believe FunctionQuery's Scorer supports skipTo in such
: > a way that it won't bother computing the function for a document that has
: > been skiped (ie: when containing in a BooleanQuery with another clause
: > that has already prohibited it, or when executed in the context of a
: > Filter)
: >
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 01 06:23:41 2006
Return-Path: <java-user-return-19230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16413 invoked from network); 1 Mar 2006 06:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Mar 2006 06:23:41 -0000
Received: (qmail 71744 invoked by uid 500); 1 Mar 2006 06:24:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71715 invoked by uid 500); 1 Mar 2006 06:24:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71704 invoked by uid 99); 1 Mar 2006 06:24:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 22:24:22 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 84.95.2.10 is neither permitted nor denied by domain of eyal.junk@gmail.com)
Received: from [84.95.2.10] (HELO mtaout4.012.net.il) (84.95.2.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Feb 2006 22:24:21 -0800
Received: from srv1 ([87.69.27.244])
 by i_mtaout4.012.net.il (HyperSendmail v2004.12)
 with ESMTP id <0IVF00CSCR7ZPKI0@i_mtaout4.012.net.il> for
 java-user@lucene.apache.org; Wed, 01 Mar 2006 08:26:23 +0200 (IST)
Date: Wed, 01 Mar 2006 08:23:45 +0200
From: Eyal Post <eyal.junk@gmail.com>
Subject: Adding line count to a document
To: java-user@lucene.apache.org
Message-id: <000001c63cf8$b1bc9540$8700a8c0@srv1>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
X-Mailer: Microsoft Office Outlook 11
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-index: AcY8Ogq0t3Kz6XuMSWqaTSVuoN5IQQ==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'd like to add a line count field to my indexed document. The obvious way
is to read my file twice, once to tokenize it and add it's content to a
field in the document and once to count the number of lines in it and add it
to another field. 
Any idea how can I optimize this and read the file once? 

Regards,
Eyal 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


