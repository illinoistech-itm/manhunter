From java-user-return-40558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 08:49:31 2009
Return-Path: <java-user-return-40558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5399 invoked from network); 1 Jun 2009 08:49:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 08:49:31 -0000
Received: (qmail 63357 invoked by uid 500); 1 Jun 2009 08:49:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63289 invoked by uid 500); 1 Jun 2009 08:49:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63279 invoked by uid 99); 1 Jun 2009 08:49:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 08:49:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dioxide.software@gmail.com designates 209.85.222.199 as permitted sender)
Received: from [209.85.222.199] (HELO mail-pz0-f199.google.com) (209.85.222.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 08:49:33 +0000
Received: by pzk37 with SMTP id 37so1346610pzk.29
        for <java-user@lucene.apache.org>; Mon, 01 Jun 2009 01:49:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=rlNdCa94no2mUHg5AAuE87nXhIYtDXeN0AjJmwYOcIM=;
        b=JHoRYkxJxjU+Kuo6j/gHXsTf4zLMeX9zIP/qY6URGBg4ET4T77mP4perPSaRThzHa8
         xQskx7b637Iw6o/4bAx8h9WG9O65c/EJLZJI3IzDmVh7dII8Vspxnq3M9muEvpQSdkt/
         rXPz+m0LQXs8L9w03SU+tzCpL8D/GfdinPhuA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=lrm4sKGZzzK0A9tdl2QeuuFp1IF3Q1I6FBTSkz9ZdR0B9W44jZfIUlxoj9pI2PVFuE
         qtLcrj4l/ozEn+8VMJ//YWD1qj8PkLm8tcDzLXYSOejLM1vm9HrCOogt1wWczYDE2VXK
         JdUQRWaAhNnxnQGaIv2b7zjIkiKO0AKIhunuw=
MIME-Version: 1.0
Received: by 10.143.159.1 with SMTP id l1mr1752292wfo.93.1243846153073; Mon, 
	01 Jun 2009 01:49:13 -0700 (PDT)
From: KK <dioxide.software@gmail.com>
Date: Mon, 1 Jun 2009 14:18:53 +0530
Message-ID: <8db6d74a0906010148y3c2895f0wb410f502e9b381c@mail.gmail.com>
Subject: How to post date encoded in NCR(decimal) to lucene indexer?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e1fda61bf3e7046b4580c3
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e1fda61bf3e7046b4580c3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi All,
I'm trying to index data to lucene index in unicode utf-8 format. All my
search queries are of the form \uxxxx and its working fine. But the problem
is in some cases, when the document[actually a webpage content] contains
Numeric Character Reference[decimal], these are getting indexed as such. For
example I've the following data[some telugu language data],

&#3105;&#3134;&#3093;&#3149;&#3103;&#3120;&#3149;

When I index this they get indexed as such and querying using \uxxxx
format doesnot give any result. so I want to know is there any way
where we can configure lucene to take
care of such things by itself, or I've to convert the same to \uxxxx
format[this is just replace &# with \u and replace the 4-dig number
with its hex equivalent]. This manual

method doesnot sound good to me. If there is any standard way to doing
the same, please someone let ke know. Thank you.

--KK.

One question?
Is it mandatory that the data to be indexed by lucene has to in \uxxxx
format for unicode utf-8 encoded data?

--001636e1fda61bf3e7046b4580c3--

From java-user-return-40559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 15:39:50 2009
Return-Path: <java-user-return-40559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75248 invoked from network); 1 Jun 2009 15:39:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 15:39:49 -0000
Received: (qmail 73677 invoked by uid 500); 1 Jun 2009 15:39:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73591 invoked by uid 500); 1 Jun 2009 15:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73527 invoked by uid 99); 1 Jun 2009 15:39:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 15:39:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 15:39:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MB9bf-0005eZ-Q4
	for java-user@lucene.apache.org; Mon, 01 Jun 2009 08:39:23 -0700
Message-ID: <23817012.post@talk.nabble.com>
Date: Mon, 1 Jun 2009 08:39:23 -0700 (PDT)
From: vanshi <nilu.thakur@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: No hits while searching!
In-Reply-To: <359a92830905270538r5cdb011o95a507a6e5ddc779@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nilu.thakur@gmail.com
References: <23735920.post@talk.nabble.com> <359a92830905270538r5cdb011o95a507a6e5ddc779@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Erick, I was able to get this work...as you said ..Luke is a great
tool to look in to what gets stored as indexes though in my case I was
searching before the indexes were created so i was getting zero hits.

On side note, I'm running a strange output with prefix query...it only works
when i have 3 or more than 3 letters in the first name/last name. Any idea
what is going on here? Please see the output from log here.

02:05:20,996 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms in
PhysicianQuerybuilder with exactName=true
02:05:20,996 INFO  [PhysicianQueryBuilder] Before running Prefix query,
First name: ang
02:05:20,996 INFO  [PhysicianQueryBuilder] Before running  Prefix query,
Last name: john
02:05:21,012 INFO  [LuceneIndexService] the query is:
+(FIRST_NAME_EXACT:ang*) +(LAST_NAME_EXACT:john*)
02:05:21,012 INFO  [LuceneIndexService] Result Size: 1

02:06:03,578 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms in
PhysicianQuerybuilder with exactName=true
02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query, First
name: a
02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query, Last
name: johns
02:06:03,578 INFO  [LuceneIndexService] the query is: +()
+(LAST_NAME_EXACT:johns*)
02:06:03,578 INFO  [LuceneIndexService] Result Size: 0

02:08:01,548 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms in
PhysicianQuerybuilder with exactName=true
02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query, First
name: an
02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query, Last
name: johns
02:08:01,548 INFO  [LuceneIndexService] the query is: +()
+(LAST_NAME_EXACT:johns*)
02:08:01,580 INFO  [LuceneIndexService] Result Size: 0

As one can see the query works with first name=ang but not with first name=a
or an.

Appreciate all your inputs.

Vanshi

Erick Erickson wrote:
> 
> The most common issue with this kind of thing is that UN_TOKENIZEDimplies
> no
> case folding. So if your case differs you won't get a match.
> 
> That aside, the very first thing I'd do is get a copy of Luke (google
> Lucene
> Luke)
> and examine the index to see if what's in your index is what you *think*
> is
> in there.
> 
> 
> The second thing I'd do is look at query.toString() to see what the actual
>> query is. You can even paste the output of toString() into Luke and see
>> what happens.
> 
> I'm not sure what buildMultiTermPrefixQuery is all about, but I assume
> you have a good reason for using that. But the other strategy I use for
> this kind of "what happened?" question is to peel back to simpler cases
> until I get what I expect, then build back up until it breaks.....
> 
> But really get a copy of Luke, it's a wonderful tool that'll give you lots
> of
> insight about what's *really* going on...
> 
> Best
> Erick
> 
> On Wed, May 27, 2009 at 12:43 AM, vanshi <nilu.thakur@gmail.com> wrote:
> 
>>
>> In my web application, I need search functionality on first name and last
>> name in 2 different ways, one search must be based on 'Metaphone
>> Analyzer'
>> giving all similar sounding names as result and another search should be
>> exact match on either first name or last name. The name sounds like
>> search
>> has already been coded previously and I need to add another exact match
>> search to the application. For this, I have a Lucene Index based out on
>> fields from database tables which already had the names field indexed
>> with
>> metaphone analyzer. I added 2 more fields in the existing document, which
>> indexes first name/last name as UN_TOKENIZED. While searching for exact
>> match, I create a term query to look in to newly created UN_TOKENIZED
>> fields
>> as shown in the code snippets......however this is not getting any hits.
>> I
>> would like to know is there anything wrong conceptually?
>>
>> //creating fields for the document
>> FIRST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>                FIRST_NAME_EXACT(Field.Store.NO,
>> Field.Index.UN_TOKENIZED),
>>                LAST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>                LAST_NAME_EXACT(Field.Store.NO, Field.Index.UN_TOKENIZED),
>>
>> //name sounds like analyzer class....used while Indexing and searching
>> public class NameSoundsLikeAnalyzer extends Analyzer {
>>        PerFieldAnalyzerWrapper wrapper;
>>
>>        /**
>>         *
>>         */
>>        public NameSoundsLikeAnalyzer() {
>>                wrapper = new PerFieldAnalyzerWrapper(new StopAnalyzer());
>>                wrapper.addAnalyzer(
>>
>>  PhysicianDocumentBuilder.PhysicianFieldInfo.FIRST_NAME
>>                                                .toString(), new
>> MetaphoneReplacementAnalyzer());
>>
>>                wrapper.addAnalyzer(
>>
>>  PhysicianDocumentBuilder.PhysicianFieldInfo.LAST_NAME
>>                                                .toString(), new
>> MetaphoneReplacementAnalyzer());
>>
>>        }
>>
>>        /**
>>         * @see PerFieldAnalyzerWrapper#tokenStream(String, Reader)
>>         */
>>        @Override
>>        public TokenStream tokenStream(String fieldName, Reader reader) {
>>                return wrapper.tokenStream(fieldName, reader);
>>        }
>>
>> }
>>
>> //lastly the query builder
>> if(physicianQuery.getExactNameSearch()){
>>
>>  if(StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith())){
>>                                TermQuery term = new TermQuery(new
>> Term(FIRST_NAME_EXACT.toString(),
>> physicianQuery.getFirstNameStartsWith()));
>>                                query.add(term,MUST);
>>
>>                        }
>>
>>  if(StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())){
>>                                TermQuery term = new TermQuery(new
>> Term(LAST_NAME_EXACT.toString(),
>> physicianQuery.getLastNameStartsWith()));
>>                                query.add(term,MUST);
>>
>>                        }
>> else{
>> //we want metaphone search
>> if (StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith())) {
>>
>>  query.add(buildMultiTermPrefixQuery(FIRST_NAME.toString(),
>>
>>  physicianQuery.getFirstNameStartsWith()), MUST);
>>                        }
>>
>>                        if
>> (StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())) {
>>
>>  query.add(buildMultiTermPrefixQuery(LAST_NAME.toString(),
>>
>>  physicianQuery.getLastNameStartsWith()), MUST);
>>                        }
>> }
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/No-hits-while-searching%21-tp23735920p23735920.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/No-hits-while-searching%21-tp23735920p23817012.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 15:52:12 2009
Return-Path: <java-user-return-40560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77080 invoked from network); 1 Jun 2009 15:52:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 15:52:12 -0000
Received: (qmail 85138 invoked by uid 500); 1 Jun 2009 15:42:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85091 invoked by uid 500); 1 Jun 2009 15:42:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85081 invoked by uid 99); 1 Jun 2009 15:42:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 15:42:27 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport4.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 15:42:17 +0000
X-SBRS: None
X-MID: 134702019
Received: from fmd3tj002.fda.gov ([10.160.10.77])
  by ironport4.fda.gov with ESMTP; 01 Jun 2009 11:41:55 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.62]) by FMD3TJ002.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 1 Jun 2009 11:41:55 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: No hits while searching!
Date: Mon, 1 Jun 2009 11:41:54 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73C26@FMD3VS012.fda.gov>
In-Reply-To: <23817012.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: No hits while searching!
Thread-Index: AcnizzzqavKiqoRhTXGmYiwnrVMsNAAADRpQ
References: <23735920.post@talk.nabble.com> <359a92830905270538r5cdb011o95a507a6e5ddc779@mail.gmail.com> <23817012.post@talk.nabble.com>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Jun 2009 15:41:55.0715 (UTC) FILETIME=[7E053D30:01C9E2CF]
X-Virus-Checked: Checked by ClamAV on apache.org

=20

Do you use stopword filtering?

Sincerely,
Sithu D Sudarsan

-----Original Message-----
From: vanshi [mailto:nilu.thakur@gmail.com]=20
Sent: Monday, June 01, 2009 11:39 AM
To: java-user@lucene.apache.org
Subject: Re: No hits while searching!


Thanks Erick, I was able to get this work...as you said ..Luke is a
great
tool to look in to what gets stored as indexes though in my case I was
searching before the indexes were created so i was getting zero hits.

On side note, I'm running a strange output with prefix query...it only
works
when i have 3 or more than 3 letters in the first name/last name. Any
idea
what is going on here? Please see the output from log here.

02:05:20,996 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
in
PhysicianQuerybuilder with exactName=3Dtrue
02:05:20,996 INFO  [PhysicianQueryBuilder] Before running Prefix query,
First name: ang
02:05:20,996 INFO  [PhysicianQueryBuilder] Before running  Prefix query,
Last name: john
02:05:21,012 INFO  [LuceneIndexService] the query is:
+(FIRST_NAME_EXACT:ang*) +(LAST_NAME_EXACT:john*)
02:05:21,012 INFO  [LuceneIndexService] Result Size: 1

02:06:03,578 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
in
PhysicianQuerybuilder with exactName=3Dtrue
02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query,
First
name: a
02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query,
Last
name: johns
02:06:03,578 INFO  [LuceneIndexService] the query is: +()
+(LAST_NAME_EXACT:johns*)
02:06:03,578 INFO  [LuceneIndexService] Result Size: 0

02:08:01,548 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
in
PhysicianQuerybuilder with exactName=3Dtrue
02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query,
First
name: an
02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query,
Last
name: johns
02:08:01,548 INFO  [LuceneIndexService] the query is: +()
+(LAST_NAME_EXACT:johns*)
02:08:01,580 INFO  [LuceneIndexService] Result Size: 0

As one can see the query works with first name=3Dang but not with first
name=3Da
or an.

Appreciate all your inputs.

Vanshi

Erick Erickson wrote:
>=20
> The most common issue with this kind of thing is that
UN_TOKENIZEDimplies
> no
> case folding. So if your case differs you won't get a match.
>=20
> That aside, the very first thing I'd do is get a copy of Luke (google
> Lucene
> Luke)
> and examine the index to see if what's in your index is what you
*think*
> is
> in there.
>=20
>=20
> The second thing I'd do is look at query.toString() to see what the
actual
>> query is. You can even paste the output of toString() into Luke and
see
>> what happens.
>=20
> I'm not sure what buildMultiTermPrefixQuery is all about, but I assume
> you have a good reason for using that. But the other strategy I use
for
> this kind of "what happened?" question is to peel back to simpler
cases
> until I get what I expect, then build back up until it breaks.....
>=20
> But really get a copy of Luke, it's a wonderful tool that'll give you
lots
> of
> insight about what's *really* going on...
>=20
> Best
> Erick
>=20
> On Wed, May 27, 2009 at 12:43 AM, vanshi <nilu.thakur@gmail.com>
wrote:
>=20
>>
>> In my web application, I need search functionality on first name and
last
>> name in 2 different ways, one search must be based on 'Metaphone
>> Analyzer'
>> giving all similar sounding names as result and another search should
be
>> exact match on either first name or last name. The name sounds like
>> search
>> has already been coded previously and I need to add another exact
match
>> search to the application. For this, I have a Lucene Index based out
on
>> fields from database tables which already had the names field indexed
>> with
>> metaphone analyzer. I added 2 more fields in the existing document,
which
>> indexes first name/last name as UN_TOKENIZED. While searching for
exact
>> match, I create a term query to look in to newly created UN_TOKENIZED
>> fields
>> as shown in the code snippets......however this is not getting any
hits.
>> I
>> would like to know is there anything wrong conceptually?
>>
>> //creating fields for the document
>> FIRST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>                FIRST_NAME_EXACT(Field.Store.NO,
>> Field.Index.UN_TOKENIZED),
>>                LAST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>                LAST_NAME_EXACT(Field.Store.NO,
Field.Index.UN_TOKENIZED),
>>
>> //name sounds like analyzer class....used while Indexing and
searching
>> public class NameSoundsLikeAnalyzer extends Analyzer {
>>        PerFieldAnalyzerWrapper wrapper;
>>
>>        /**
>>         *
>>         */
>>        public NameSoundsLikeAnalyzer() {
>>                wrapper =3D new PerFieldAnalyzerWrapper(new
StopAnalyzer());
>>                wrapper.addAnalyzer(
>>
>>  PhysicianDocumentBuilder.PhysicianFieldInfo.FIRST_NAME
>>                                                .toString(), new
>> MetaphoneReplacementAnalyzer());
>>
>>                wrapper.addAnalyzer(
>>
>>  PhysicianDocumentBuilder.PhysicianFieldInfo.LAST_NAME
>>                                                .toString(), new
>> MetaphoneReplacementAnalyzer());
>>
>>        }
>>
>>        /**
>>         * @see PerFieldAnalyzerWrapper#tokenStream(String, Reader)
>>         */
>>        @Override
>>        public TokenStream tokenStream(String fieldName, Reader
reader) {
>>                return wrapper.tokenStream(fieldName, reader);
>>        }
>>
>> }
>>
>> //lastly the query builder
>> if(physicianQuery.getExactNameSearch()){
>>
>>  if(StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith())){
>>                                TermQuery term =3D new TermQuery(new
>> Term(FIRST_NAME_EXACT.toString(),
>> physicianQuery.getFirstNameStartsWith()));
>>                                query.add(term,MUST);
>>
>>                        }
>>
>>  if(StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())){
>>                                TermQuery term =3D new TermQuery(new
>> Term(LAST_NAME_EXACT.toString(),
>> physicianQuery.getLastNameStartsWith()));
>>                                query.add(term,MUST);
>>
>>                        }
>> else{
>> //we want metaphone search
>> if (StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith()))
{
>>
>>  query.add(buildMultiTermPrefixQuery(FIRST_NAME.toString(),
>>
>>  physicianQuery.getFirstNameStartsWith()), MUST);
>>                        }
>>
>>                        if
>> (StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())) {
>>
>>  query.add(buildMultiTermPrefixQuery(LAST_NAME.toString(),
>>
>>  physicianQuery.getLastNameStartsWith()), MUST);
>>                        }
>> }
>>
>>
>> --
>> View this message in context:
>>
http://www.nabble.com/No-hits-while-searching%21-tp23735920p23735920.htm
l
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20

--=20
View this message in context:
http://www.nabble.com/No-hits-while-searching%21-tp23735920p23817012.htm
l
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 15:57:06 2009
Return-Path: <java-user-return-40561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79666 invoked from network); 1 Jun 2009 15:57:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 15:57:05 -0000
Received: (qmail 91105 invoked by uid 500); 1 Jun 2009 15:56:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90461 invoked by uid 500); 1 Jun 2009 15:56:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89068 invoked by uid 99); 1 Jun 2009 15:50:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 15:50:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of marco.lazzara@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 15:50:35 +0000
Received: by ey-out-2122.google.com with SMTP id 22so1631072eye.53
        for <java-user@lucene.apache.org>; Mon, 01 Jun 2009 08:50:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=N+y8XHOhB9MSo4NSDmdjjn6Zl/EBEj8ojs1wAtPzC5k=;
        b=Hq5roZGgQbSfFsQNpurKVFRjB/+Sn6mD/kQgt9wBWKnfM3bxzNwZT3Pn0erKbV8Ikr
         wO2gpXiJLAAuqfy++XEE2VQwZJ6NCtQFHAmFoi6iUT1huC7R+THMqqqRZqB3JfuL5o4j
         ZQlTBQxeYGSDdTbpCHcq1EgjsnGFoD8z1qvgE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UujxxjUI+peKr45Y2AT6MgopU3ZE6yxmLKLJF+IScCG9o2w1weMu5WdLVxAIDV/k2F
         GPZWV1VKbZentC2wrA5vN3vg+jC7Tjed4ixVc9EkQGcv1rWmSu/kB+d1x/A3Kx+9fI3N
         IowxabIQAv8Kn4MX/ho2s8wwULKstze5SVMDA=
MIME-Version: 1.0
Received: by 10.216.45.71 with SMTP id o49mr1891628web.57.1243871413304; Mon, 
	01 Jun 2009 08:50:13 -0700 (PDT)
In-Reply-To: <45452.61381.qm@web1109.biz.mail.sk1.yahoo.com>
References: <1242666786.22206.13.camel@marco-desktop>
	 <BC06E4B9-7300-4308-B592-A61F1619365D@cognocys.com>
	 <25652c480905271014u67cc4b4bvbcac79115ccac079@mail.gmail.com>
	 <D550A470-AC6C-4E88-8CB8-D27032D6E123@cognocys.com>
	 <25652c480905271040u4af261f0sacd22d58d4ddac90@mail.gmail.com>
	 <9E65CCC5-E055-4129-9EF1-06B4938023AD@cognocys.com>
	 <25652c480905271114r5a3d3e09ld543b04e1fff9db0@mail.gmail.com>
	 <9EBE2EB2-1021-4492-964E-EB59D3E941BB@cognocys.com>
	 <25652c480905271241l7abcfc59h39a011016e30bdf0@mail.gmail.com>
	 <45452.61381.qm@web1109.biz.mail.sk1.yahoo.com>
Date: Mon, 1 Jun 2009 17:50:13 +0200
Message-ID: <25652c480906010850p2b925c38h6f91a304fbf17a72@mail.gmail.com>
Subject: Re: Searching index problems with tomcat
From: Marco Lazzara <marco.lazzara@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367d69d8bc7e3e046b4b61b1
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367d69d8bc7e3e046b4b61b1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

In order to let you know about my problem I decided to use swt for the
standalone app and to use Google Web Toolkit for web app!!!!

:):)

bye
ML


2009/5/27 N Hira <nhira@cognocys.com>

>
> Cool!
>
> 1.  So you are creating a parser with { name, synonyms, propIn }, correct?
>
> 2.  Sorry -- I meant the output of "query.toString()"; I'm expecting to see
> something like this when the sentence parameter is set to philipcimiano:
>    name:philipcimiano synonyms:philipcimiano propIn:philipcimiano
>
> 3.  Out of curiosity, what is the value of topDocs.totalHits for your
> search?
>
> -h
>
>
>
> ----- Original Message ----
> From: Marco Lazzara <marco.lazzara@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, May 27, 2009 2:41:44 PM
> Subject: Re: Searching index problems with tomcat
>
> I've made a bad copy-paste. this is the full class
>
> The output of philipcimiano is  ex#pub1-author-ex#res2-name-philipcimiano
> I've made a bad copy-paste. this is the full class
>
> public class RDFinder {
>
>    private Analyzer analyzer;
>    private Directory directory;
>    private IndexSearcher isearcher;
>    private MultiFieldQueryParser parser;
>    private Query query;
>    private TreeMap<Integer,ArrayList<String>> resultingpaths;
>    private PrintWriter outFile;
>
>    public RDFinder(String indexpath, String[] indexField) throws
> CorruptIndexException, IOException{
>
>        //Creazione dell'oggetto per la ricerca indicando la struttura
> (directory) su cui lavorare e l'analyzer
>        analyzer = new StandardAnalyzer();
>        directory = FSDirectory.getDirectory(indexpath);
>        isearcher = new IndexSearcher(directory);
>        parser = new MultiFieldQueryParser(indexField, analyzer);
>        resultingpaths = new TreeMap<Integer,ArrayList<String>>();
>        outFile = null;
>
>    }
>
>   public TreeMap<Integer,ArrayList<String>> Search(String sentence, String
> Field) throws ParseException, IOException{
>       query = parser.parse(sentence);
>
>       try
>         {
>
>         FileWriter fw = new FileWriter ("paths");
>         BufferedWriter bw = new BufferedWriter (fw);
>         outFile = new PrintWriter (bw);
>
>         }
>         catch (FileNotFoundException exception){}
>         catch (IOException exception){}
>
>       //ArrayList<String> results = new ArrayList<String>();
>
>     //Effettua la ricerca ottenendo l'oggetto TopDocs
>        TopDocs topDocs = isearcher.search(query,1000);
>        //Stampa del conteggio numero di hits.
>        //System.out.println("Numero di hits " + topDocs.totalHits);
>
>        //Array dei risultati
>        ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>        for (ScoreDoc sc : scoreDocs)
>        {
>         //System.out.print(i++ + ": - ");
>         //Attraverso l'oggetto scoreDoc e' possibile ottenere un indice che
> passato all metodo
>         //indexSearcher.doc restituisce un Document dal quale estrarre i
> vari campi
>
>         Field[] response = isearcher.doc(sc.doc).getFields(Field);
>         //System.out.println("Risultato ");
>
>         for (int k = 0; k <response.length; k++){
>             String res = response[k].stringValue();
>             if (!res.trim().equals(""))
>             {
>
>                 outFile.println(res);
>                 outFile.flush();
>                 res = res.toLowerCase();
>                 int lung = CountChar(res, '-')+1;
>
>                 //if (resultingpaths.containsKey(res.length()))
>                 if (resultingpaths.containsKey(lung))
>                     //resultingpaths.get(res.length()).add(res);
>                      resultingpaths.get(lung).add(res);
>                 else {
>                     ArrayList<String> respaths = new ArrayList<String>();
>                     respaths.add(res);
>                     //resultingpaths.put(res.length(), respaths);
>                     resultingpaths.put(lung, respaths);
>                 }
>                 //results.add(res);
>
>             }
>         }
>         //codice che c'era prima
>         /*String res = isearcher.doc(sc.doc).get(Field);
>           System.out.println(res);
>           results.add(res);*/
>        }
>        isearcher.close();
>        return resultingpaths;
>   }
>
>   public boolean Exists(String node) throws ParseException, IOException{
>
>       query = parser.parse(node);
>
>
>
>     //Effettua la ricerca ottenendo l'oggetto TopDocs
>        TopDocs topDocs = isearcher.search(query,1);
>
>
>        //Array dei risultati
>        ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>
>        return (scoreDocs.length >= 1);
>
>   }
>
>   public String[] InputKeywords(String sentence){
>
>       QueryTermVector QTV = new QueryTermVector(sentence, analyzer);
>       return QTV.getTerms();
>
>   }
>
>   public int CountChar(String s, char c){
>       int count = 0;
>       for (int i = 0; i < s.length(); i++)
>           if (s.charAt(i) == c) count++;
>       return count;
>   }
>
> }
>
> [ message truncated by mailer@cognocys.com -- too many replies ]
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016367d69d8bc7e3e046b4b61b1--

From java-user-return-40562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 15:59:20 2009
Return-Path: <java-user-return-40562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81441 invoked from network); 1 Jun 2009 15:59:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 15:59:20 -0000
Received: (qmail 9999 invoked by uid 500); 1 Jun 2009 15:59:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9958 invoked by uid 500); 1 Jun 2009 15:59:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9948 invoked by uid 99); 1 Jun 2009 15:59:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 15:59:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 15:59:19 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n51FwtUw012443
	for <java-user@lucene.apache.org>; Mon, 1 Jun 2009 11:58:56 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A23FABE.1050001@informatics.jax.org>
Date: Mon, 01 Jun 2009 11:58:54 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.21 (Windows/20090302)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: No hits while searching!
References: <23735920.post@talk.nabble.com> <359a92830905270538r5cdb011o95a507a6e5ddc779@mail.gmail.com> <23817012.post@talk.nabble.com> <F8A04958BB57B64096F9BE6B9572564304C73C26@FMD3VS012.fda.gov>
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73C26@FMD3VS012.fda.gov>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.4.371499, Antispam-Engine: 2.7.1.369594, Antispam-Data: 2009.6.1.154630
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_CONTACT_NAME 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __STOCK_PHRASE_24 0, __STOCK_PHRASE_7 0, __STOCK_SUBJ_9 0, __TO_MALFORMED_2 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, he's gotta be.

You might be better of using something like a lowercase analyzer here, 
since punctuation in a name is likely important.

Matt

Sudarsan, Sithu D. wrote:
>  
>
> Do you use stopword filtering?
>
> Sincerely,
> Sithu D Sudarsan
>
> -----Original Message-----
> From: vanshi [mailto:nilu.thakur@gmail.com] 
> Sent: Monday, June 01, 2009 11:39 AM
> To: java-user@lucene.apache.org
> Subject: Re: No hits while searching!
>
>
> Thanks Erick, I was able to get this work...as you said ..Luke is a
> great
> tool to look in to what gets stored as indexes though in my case I was
> searching before the indexes were created so i was getting zero hits.
>
> On side note, I'm running a strange output with prefix query...it only
> works
> when i have 3 or more than 3 letters in the first name/last name. Any
> idea
> what is going on here? Please see the output from log here.
>
> 02:05:20,996 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
> in
> PhysicianQuerybuilder with exactName=true
> 02:05:20,996 INFO  [PhysicianQueryBuilder] Before running Prefix query,
> First name: ang
> 02:05:20,996 INFO  [PhysicianQueryBuilder] Before running  Prefix query,
> Last name: john
> 02:05:21,012 INFO  [LuceneIndexService] the query is:
> +(FIRST_NAME_EXACT:ang*) +(LAST_NAME_EXACT:john*)
> 02:05:21,012 INFO  [LuceneIndexService] Result Size: 1
>
> 02:06:03,578 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
> in
> PhysicianQuerybuilder with exactName=true
> 02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query,
> First
> name: a
> 02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query,
> Last
> name: johns
> 02:06:03,578 INFO  [LuceneIndexService] the query is: +()
> +(LAST_NAME_EXACT:johns*)
> 02:06:03,578 INFO  [LuceneIndexService] Result Size: 0
>
> 02:08:01,548 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
> in
> PhysicianQuerybuilder with exactName=true
> 02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query,
> First
> name: an
> 02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query,
> Last
> name: johns
> 02:08:01,548 INFO  [LuceneIndexService] the query is: +()
> +(LAST_NAME_EXACT:johns*)
> 02:08:01,580 INFO  [LuceneIndexService] Result Size: 0
>
> As one can see the query works with first name=ang but not with first
> name=a
> or an.
>
> Appreciate all your inputs.
>
> Vanshi
>
> Erick Erickson wrote:
>   
>> The most common issue with this kind of thing is that
>>     
> UN_TOKENIZEDimplies
>   
>> no
>> case folding. So if your case differs you won't get a match.
>>
>> That aside, the very first thing I'd do is get a copy of Luke (google
>> Lucene
>> Luke)
>> and examine the index to see if what's in your index is what you
>>     
> *think*
>   
>> is
>> in there.
>>
>>
>> The second thing I'd do is look at query.toString() to see what the
>>     
> actual
>   
>>> query is. You can even paste the output of toString() into Luke and
>>>       
> see
>   
>>> what happens.
>>>       
>> I'm not sure what buildMultiTermPrefixQuery is all about, but I assume
>> you have a good reason for using that. But the other strategy I use
>>     
> for
>   
>> this kind of "what happened?" question is to peel back to simpler
>>     
> cases
>   
>> until I get what I expect, then build back up until it breaks.....
>>
>> But really get a copy of Luke, it's a wonderful tool that'll give you
>>     
> lots
>   
>> of
>> insight about what's *really* going on...
>>
>> Best
>> Erick
>>
>> On Wed, May 27, 2009 at 12:43 AM, vanshi <nilu.thakur@gmail.com>
>>     
> wrote:
>   
>>> In my web application, I need search functionality on first name and
>>>       
> last
>   
>>> name in 2 different ways, one search must be based on 'Metaphone
>>> Analyzer'
>>> giving all similar sounding names as result and another search should
>>>       
> be
>   
>>> exact match on either first name or last name. The name sounds like
>>> search
>>> has already been coded previously and I need to add another exact
>>>       
> match
>   
>>> search to the application. For this, I have a Lucene Index based out
>>>       
> on
>   
>>> fields from database tables which already had the names field indexed
>>> with
>>> metaphone analyzer. I added 2 more fields in the existing document,
>>>       
> which
>   
>>> indexes first name/last name as UN_TOKENIZED. While searching for
>>>       
> exact
>   
>>> match, I create a term query to look in to newly created UN_TOKENIZED
>>> fields
>>> as shown in the code snippets......however this is not getting any
>>>       
> hits.
>   
>>> I
>>> would like to know is there anything wrong conceptually?
>>>
>>> //creating fields for the document
>>> FIRST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>>                FIRST_NAME_EXACT(Field.Store.NO,
>>> Field.Index.UN_TOKENIZED),
>>>                LAST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>>                LAST_NAME_EXACT(Field.Store.NO,
>>>       
> Field.Index.UN_TOKENIZED),
>   
>>> //name sounds like analyzer class....used while Indexing and
>>>       
> searching
>   
>>> public class NameSoundsLikeAnalyzer extends Analyzer {
>>>        PerFieldAnalyzerWrapper wrapper;
>>>
>>>        /**
>>>         *
>>>         */
>>>        public NameSoundsLikeAnalyzer() {
>>>                wrapper = new PerFieldAnalyzerWrapper(new
>>>       
> StopAnalyzer());
>   
>>>                wrapper.addAnalyzer(
>>>
>>>  PhysicianDocumentBuilder.PhysicianFieldInfo.FIRST_NAME
>>>                                                .toString(), new
>>> MetaphoneReplacementAnalyzer());
>>>
>>>                wrapper.addAnalyzer(
>>>
>>>  PhysicianDocumentBuilder.PhysicianFieldInfo.LAST_NAME
>>>                                                .toString(), new
>>> MetaphoneReplacementAnalyzer());
>>>
>>>        }
>>>
>>>        /**
>>>         * @see PerFieldAnalyzerWrapper#tokenStream(String, Reader)
>>>         */
>>>        @Override
>>>        public TokenStream tokenStream(String fieldName, Reader
>>>       
> reader) {
>   
>>>                return wrapper.tokenStream(fieldName, reader);
>>>        }
>>>
>>> }
>>>
>>> //lastly the query builder
>>> if(physicianQuery.getExactNameSearch()){
>>>
>>>  if(StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith())){
>>>                                TermQuery term = new TermQuery(new
>>> Term(FIRST_NAME_EXACT.toString(),
>>> physicianQuery.getFirstNameStartsWith()));
>>>                                query.add(term,MUST);
>>>
>>>                        }
>>>
>>>  if(StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())){
>>>                                TermQuery term = new TermQuery(new
>>> Term(LAST_NAME_EXACT.toString(),
>>> physicianQuery.getLastNameStartsWith()));
>>>                                query.add(term,MUST);
>>>
>>>                        }
>>> else{
>>> //we want metaphone search
>>> if (StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith()))
>>>       
> {
>   
>>>  query.add(buildMultiTermPrefixQuery(FIRST_NAME.toString(),
>>>
>>>  physicianQuery.getFirstNameStartsWith()), MUST);
>>>                        }
>>>
>>>                        if
>>> (StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())) {
>>>
>>>  query.add(buildMultiTermPrefixQuery(LAST_NAME.toString(),
>>>
>>>  physicianQuery.getLastNameStartsWith()), MUST);
>>>                        }
>>> }
>>>
>>>
>>> --
>>> View this message in context:
>>>
>>>       
> http://www.nabble.com/No-hits-while-searching%21-tp23735920p23735920.htm
> l
>   
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>>     
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 16:55:41 2009
Return-Path: <java-user-return-40563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2509 invoked from network); 1 Jun 2009 16:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 16:55:41 -0000
Received: (qmail 83901 invoked by uid 500); 1 Jun 2009 16:55:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83818 invoked by uid 500); 1 Jun 2009 16:55:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83796 invoked by uid 99); 1 Jun 2009 16:55:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 16:55:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tarandeep@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 16:55:38 +0000
Received: by qw-out-2122.google.com with SMTP id 5so5022475qwd.53
        for <java-user@lucene.apache.org>; Mon, 01 Jun 2009 09:55:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:cc:content-type;
        bh=hD/TjQPgpJ1JImjgJ/q+r8foJy7iWNkfJeFZ4WgrEw4=;
        b=P9KXeSTQ8xHiNO+A/Da6kqInAD50KeEyuJo3uy9H7daLbE6UE68yRpY9X0UcmdKoDL
         0sfu9SuSX0UiDtgJN7bcRTZto5uYmN/dcZKtolbGEQpSRnMXccBBXNwIblmmL1ZRoqT+
         zMLx8HNdstjZMShbI7pYGmMApqXdrw2pThoA4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:cc:content-type;
        b=niiKz8A4rueeT9M1HkRl5mm3dZ7iabBATpomrrLDrqGI33sChFGHymKwl4GUVQuvO6
         PKlVnRdQFo6OAIcg38wUE9hIEY4C3e/VVtI/exd/YcDfRCEvBE9DtBu0PUfUFBo6/rbO
         NAwRMA5FoeD0NvlqIUwY+ijfGSAcDdMUKioI8=
MIME-Version: 1.0
Received: by 10.229.99.69 with SMTP id t5mr1753233qcn.30.1243875317118; Mon, 
	01 Jun 2009 09:55:17 -0700 (PDT)
From: Tarandeep Singh <tarandeep@gmail.com>
Date: Mon, 1 Jun 2009 09:54:57 -0700
Message-ID: <e75c02ef0906010954w70dd7244jd8b2bf523a0d615e@mail.gmail.com>
Subject: Distributed Lucene Questions
To: java-user@lucene.apache.org
Cc: core-user@hadoop.apache.org
Content-Type: multipart/alternative; boundary=0016367f9bce6bf825046b4c4a1c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367f9bce6bf825046b4c4a1c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi All,

I am trying to build a distributed system to build and serve lucene indexes.
I came across the Distributed Lucene project-
http://wiki.apache.org/hadoop/DistributedLucene
https://issues.apache.org/jira/browse/HADOOP-3394

and have a couple of questions. It will be really helpful if someone can
provide some insights.

1) Is this code production ready?
2) Does someone has performance data for this project?
3) It allows searches and updates/deletes to be performed at the same time.
How well the system will perform if there are frequent updates to the
system. Will it handle the search and update load easily or will it be
better to rebuild or update the indexes on different machines and then
deploy the indexes back to the machines that are serving the indexes?

Basically I am trying to choose between the 2 approaches-

1) Use Hadoop to build and/or update Lucene indexes and then deploy them on
separate cluster that will take care or load balancing, fault tolerance etc.
There is a package in Hadoop contrib that does this, so I can use that code.

2) Use and/or modify the Distributed Lucene code.

I am expecting daily updates to our index so I am not sure if Distribtued
Lucene code (which allows searches and updates on the same indexes) will be
able to handle search and update load efficiently.

Any suggestions ?

Thanks,
Tarandeep

--0016367f9bce6bf825046b4c4a1c--

From java-user-return-40564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 17:16:42 2009
Return-Path: <java-user-return-40564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10149 invoked from network); 1 Jun 2009 17:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 17:16:42 -0000
Received: (qmail 15812 invoked by uid 500); 1 Jun 2009 17:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15725 invoked by uid 500); 1 Jun 2009 17:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15715 invoked by uid 99); 1 Jun 2009 17:16:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 17:16:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.190.172.35] (HELO mail.go2.com) (209.190.172.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 17:16:43 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9E2DC.AE7C4C12"
Subject: Lucene on NFS/iSCSI
Date: Mon, 1 Jun 2009 13:16:20 -0400
Message-ID: <180939A51C17274FB68581AE17C5E0E708A8C5@bertha.Volley.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene on NFS/iSCSI
Thread-Index: Acni3K51sSN2fSxxRXmG29gOXxyYcQ==
From: "Jordon Saardchit" <jsaardchit@go2.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9E2DC.AE7C4C12
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


So I've read a lot about nightmares with lucene over shared indices =
using NFS, and was curious if anyone had any experience running Lucene =
over iSCSI?  Specifically if the same sort of lock failure issues occur =
as does with NFS.  I'm specifically looking into multple machines =
mounted to a SAN via iSCSI with accelerated hardware initiator.

Looking to just get a general idea before investing in the possible =
solution.

Thanks,
Jordon

------_=_NextPart_001_01C9E2DC.AE7C4C12--

From java-user-return-40565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 17:31:25 2009
Return-Path: <java-user-return-40565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19464 invoked from network); 1 Jun 2009 17:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 17:31:25 -0000
Received: (qmail 34208 invoked by uid 500); 1 Jun 2009 17:31:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34124 invoked by uid 500); 1 Jun 2009 17:31:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34114 invoked by uid 99); 1 Jun 2009 17:31:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 17:31:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 17:31:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MBBLl-0002KA-39
	for java-user@lucene.apache.org; Mon, 01 Jun 2009 10:31:05 -0700
Message-ID: <23818803.post@talk.nabble.com>
Date: Mon, 1 Jun 2009 10:31:05 -0700 (PDT)
From: vanshi <nilu.thakur@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: No hits while searching!
In-Reply-To: <4A23FABE.1050001@informatics.jax.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nilu.thakur@gmail.com
References: <23735920.post@talk.nabble.com> <359a92830905270538r5cdb011o95a507a6e5ddc779@mail.gmail.com> <23817012.post@talk.nabble.com> <F8A04958BB57B64096F9BE6B9572564304C73C26@FMD3VS012.fda.gov> <4A23FABE.1050001@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Matt & sithu. Yes, It was due to stop word analyzer...now i'm using a
simple analyzer temporarily, as I know even simple analyzer cannot handle
quotes in names. However, can somebody plz direct me towards how to handle
quotes with the name in query using lowercase analyzer?

thanks,
Vanshi

Matthew Hall-7 wrote:
> 
> Yeah, he's gotta be.
> 
> You might be better of using something like a lowercase analyzer here, 
> since punctuation in a name is likely important.
> 
> Matt
> 
> Sudarsan, Sithu D. wrote:
>>  
>>
>> Do you use stopword filtering?
>>
>> Sincerely,
>> Sithu D Sudarsan
>>
>> -----Original Message-----
>> From: vanshi [mailto:nilu.thakur@gmail.com] 
>> Sent: Monday, June 01, 2009 11:39 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: No hits while searching!
>>
>>
>> Thanks Erick, I was able to get this work...as you said ..Luke is a
>> great
>> tool to look in to what gets stored as indexes though in my case I was
>> searching before the indexes were created so i was getting zero hits.
>>
>> On side note, I'm running a strange output with prefix query...it only
>> works
>> when i have 3 or more than 3 letters in the first name/last name. Any
>> idea
>> what is going on here? Please see the output from log here.
>>
>> 02:05:20,996 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
>> in
>> PhysicianQuerybuilder with exactName=true
>> 02:05:20,996 INFO  [PhysicianQueryBuilder] Before running Prefix query,
>> First name: ang
>> 02:05:20,996 INFO  [PhysicianQueryBuilder] Before running  Prefix query,
>> Last name: john
>> 02:05:21,012 INFO  [LuceneIndexService] the query is:
>> +(FIRST_NAME_EXACT:ang*) +(LAST_NAME_EXACT:john*)
>> 02:05:21,012 INFO  [LuceneIndexService] Result Size: 1
>>
>> 02:06:03,578 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
>> in
>> PhysicianQuerybuilder with exactName=true
>> 02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query,
>> First
>> name: a
>> 02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query,
>> Last
>> name: johns
>> 02:06:03,578 INFO  [LuceneIndexService] the query is: +()
>> +(LAST_NAME_EXACT:johns*)
>> 02:06:03,578 INFO  [LuceneIndexService] Result Size: 0
>>
>> 02:08:01,548 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
>> in
>> PhysicianQuerybuilder with exactName=true
>> 02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query,
>> First
>> name: an
>> 02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query,
>> Last
>> name: johns
>> 02:08:01,548 INFO  [LuceneIndexService] the query is: +()
>> +(LAST_NAME_EXACT:johns*)
>> 02:08:01,580 INFO  [LuceneIndexService] Result Size: 0
>>
>> As one can see the query works with first name=ang but not with first
>> name=a
>> or an.
>>
>> Appreciate all your inputs.
>>
>> Vanshi
>>
>> Erick Erickson wrote:
>>   
>>> The most common issue with this kind of thing is that
>>>     
>> UN_TOKENIZEDimplies
>>   
>>> no
>>> case folding. So if your case differs you won't get a match.
>>>
>>> That aside, the very first thing I'd do is get a copy of Luke (google
>>> Lucene
>>> Luke)
>>> and examine the index to see if what's in your index is what you
>>>     
>> *think*
>>   
>>> is
>>> in there.
>>>
>>>
>>> The second thing I'd do is look at query.toString() to see what the
>>>     
>> actual
>>   
>>>> query is. You can even paste the output of toString() into Luke and
>>>>       
>> see
>>   
>>>> what happens.
>>>>       
>>> I'm not sure what buildMultiTermPrefixQuery is all about, but I assume
>>> you have a good reason for using that. But the other strategy I use
>>>     
>> for
>>   
>>> this kind of "what happened?" question is to peel back to simpler
>>>     
>> cases
>>   
>>> until I get what I expect, then build back up until it breaks.....
>>>
>>> But really get a copy of Luke, it's a wonderful tool that'll give you
>>>     
>> lots
>>   
>>> of
>>> insight about what's *really* going on...
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, May 27, 2009 at 12:43 AM, vanshi <nilu.thakur@gmail.com>
>>>     
>> wrote:
>>   
>>>> In my web application, I need search functionality on first name and
>>>>       
>> last
>>   
>>>> name in 2 different ways, one search must be based on 'Metaphone
>>>> Analyzer'
>>>> giving all similar sounding names as result and another search should
>>>>       
>> be
>>   
>>>> exact match on either first name or last name. The name sounds like
>>>> search
>>>> has already been coded previously and I need to add another exact
>>>>       
>> match
>>   
>>>> search to the application. For this, I have a Lucene Index based out
>>>>       
>> on
>>   
>>>> fields from database tables which already had the names field indexed
>>>> with
>>>> metaphone analyzer. I added 2 more fields in the existing document,
>>>>       
>> which
>>   
>>>> indexes first name/last name as UN_TOKENIZED. While searching for
>>>>       
>> exact
>>   
>>>> match, I create a term query to look in to newly created UN_TOKENIZED
>>>> fields
>>>> as shown in the code snippets......however this is not getting any
>>>>       
>> hits.
>>   
>>>> I
>>>> would like to know is there anything wrong conceptually?
>>>>
>>>> //creating fields for the document
>>>> FIRST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>>>                FIRST_NAME_EXACT(Field.Store.NO,
>>>> Field.Index.UN_TOKENIZED),
>>>>                LAST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>>>                LAST_NAME_EXACT(Field.Store.NO,
>>>>       
>> Field.Index.UN_TOKENIZED),
>>   
>>>> //name sounds like analyzer class....used while Indexing and
>>>>       
>> searching
>>   
>>>> public class NameSoundsLikeAnalyzer extends Analyzer {
>>>>        PerFieldAnalyzerWrapper wrapper;
>>>>
>>>>        /**
>>>>         *
>>>>         */
>>>>        public NameSoundsLikeAnalyzer() {
>>>>                wrapper = new PerFieldAnalyzerWrapper(new
>>>>       
>> StopAnalyzer());
>>   
>>>>                wrapper.addAnalyzer(
>>>>
>>>>  PhysicianDocumentBuilder.PhysicianFieldInfo.FIRST_NAME
>>>>                                                .toString(), new
>>>> MetaphoneReplacementAnalyzer());
>>>>
>>>>                wrapper.addAnalyzer(
>>>>
>>>>  PhysicianDocumentBuilder.PhysicianFieldInfo.LAST_NAME
>>>>                                                .toString(), new
>>>> MetaphoneReplacementAnalyzer());
>>>>
>>>>        }
>>>>
>>>>        /**
>>>>         * @see PerFieldAnalyzerWrapper#tokenStream(String, Reader)
>>>>         */
>>>>        @Override
>>>>        public TokenStream tokenStream(String fieldName, Reader
>>>>       
>> reader) {
>>   
>>>>                return wrapper.tokenStream(fieldName, reader);
>>>>        }
>>>>
>>>> }
>>>>
>>>> //lastly the query builder
>>>> if(physicianQuery.getExactNameSearch()){
>>>>
>>>>  if(StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith())){
>>>>                                TermQuery term = new TermQuery(new
>>>> Term(FIRST_NAME_EXACT.toString(),
>>>> physicianQuery.getFirstNameStartsWith()));
>>>>                                query.add(term,MUST);
>>>>
>>>>                        }
>>>>
>>>>  if(StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())){
>>>>                                TermQuery term = new TermQuery(new
>>>> Term(LAST_NAME_EXACT.toString(),
>>>> physicianQuery.getLastNameStartsWith()));
>>>>                                query.add(term,MUST);
>>>>
>>>>                        }
>>>> else{
>>>> //we want metaphone search
>>>> if (StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith()))
>>>>       
>> {
>>   
>>>>  query.add(buildMultiTermPrefixQuery(FIRST_NAME.toString(),
>>>>
>>>>  physicianQuery.getFirstNameStartsWith()), MUST);
>>>>                        }
>>>>
>>>>                        if
>>>> (StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())) {
>>>>
>>>>  query.add(buildMultiTermPrefixQuery(LAST_NAME.toString(),
>>>>
>>>>  physicianQuery.getLastNameStartsWith()), MUST);
>>>>                        }
>>>> }
>>>>
>>>>
>>>> --
>>>> View this message in context:
>>>>
>>>>       
>> http://www.nabble.com/No-hits-while-searching%21-tp23735920p23735920.htm
>> l
>>   
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>       
>>>     
>>
>>   
> 
> 
> -- 
> Matthew Hall
> Software Engineer
> Mouse Genome Informatics
> mhall@informatics.jax.org
> (207) 288-6012
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/No-hits-while-searching%21-tp23735920p23818803.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 17:51:29 2009
Return-Path: <java-user-return-40566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33679 invoked from network); 1 Jun 2009 17:51:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 17:51:29 -0000
Received: (qmail 66381 invoked by uid 500); 1 Jun 2009 17:51:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66320 invoked by uid 500); 1 Jun 2009 17:51:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66310 invoked by uid 99); 1 Jun 2009 17:51:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 17:51:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 17:51:26 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n51Hp0gP020663
	for <java-user@lucene.apache.org>; Mon, 1 Jun 2009 13:51:01 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A241504.1080605@informatics.jax.org>
Date: Mon, 01 Jun 2009 13:51:00 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.21 (Windows/20090302)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: No hits while searching!
References: <23735920.post@talk.nabble.com> <359a92830905270538r5cdb011o95a507a6e5ddc779@mail.gmail.com> <23817012.post@talk.nabble.com> <F8A04958BB57B64096F9BE6B9572564304C73C26@FMD3VS012.fda.gov> <4A23FABE.1050001@informatics.jax.org> <23818803.post@talk.nabble.com>
In-Reply-To: <23818803.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.4.371499, Antispam-Engine: 2.7.1.369594, Antispam-Data: 2009.6.1.173428
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_10000_PLUS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_CONTACT_NAME 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __STOCK_PHRASE_24 0, __STOCK_SUBJ_9 0, __TO_MALFORMED_2 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Just build your own.

Here's exactly what you are looking for:

(Mind you I just whipped this out, and didn't compile it... so there 
could be minor syntax errors here.)

You will also obviously have to make your own package declaration, and 
your own imports.

So anyhow, the really neat thing about lucene, is being able to do 
exactly what we just did here, you can chain these tokenizers and 
filters together in almost any way you want, and create custom analyzers 
outta them.

Its a good thing to become familiar with, because I will nearly promise 
you that this analyzer here will ALSO probably be insufficient for your 
needs.

Anyhow, hope this helps.

Matt

/**
 * Custom Lowercase Analyzer
 *
 * @author mhall
 *
 * This analyzer tokenizes on whitespace, and then lowercases the token.
 *
 */

public class LowerCaseAnalyzer extends Analyzer {

    public LowerCaseAnalyzer() {
       super();
    }

    /**
     * Worker for this Analyzer.
     *
     * Specifically this analyzer chains together WhitespaceTokenizer ->
     * LowerCaseFilter together to form customized Tokens
     */

    public TokenStream tokenStream(String fieldName, Reader reader) {
        return new LowerCaseFilter(new WhitespaceTokenizer(reader));
    }

}

vanshi wrote:
> Thanks Matt & sithu. Yes, It was due to stop word analyzer...now i'm using a
> simple analyzer temporarily, as I know even simple analyzer cannot handle
> quotes in names. However, can somebody plz direct me towards how to handle
> quotes with the name in query using lowercase analyzer?
>
> thanks,
> Vanshi
>
> Matthew Hall-7 wrote:
>   
>> Yeah, he's gotta be.
>>
>> You might be better of using something like a lowercase analyzer here, 
>> since punctuation in a name is likely important.
>>
>> Matt
>>
>> Sudarsan, Sithu D. wrote:
>>     
>>>  
>>>
>>> Do you use stopword filtering?
>>>
>>> Sincerely,
>>> Sithu D Sudarsan
>>>
>>> -----Original Message-----
>>> From: vanshi [mailto:nilu.thakur@gmail.com] 
>>> Sent: Monday, June 01, 2009 11:39 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: No hits while searching!
>>>
>>>
>>> Thanks Erick, I was able to get this work...as you said ..Luke is a
>>> great
>>> tool to look in to what gets stored as indexes though in my case I was
>>> searching before the indexes were created so i was getting zero hits.
>>>
>>> On side note, I'm running a strange output with prefix query...it only
>>> works
>>> when i have 3 or more than 3 letters in the first name/last name. Any
>>> idea
>>> what is going on here? Please see the output from log here.
>>>
>>> 02:05:20,996 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
>>> in
>>> PhysicianQuerybuilder with exactName=true
>>> 02:05:20,996 INFO  [PhysicianQueryBuilder] Before running Prefix query,
>>> First name: ang
>>> 02:05:20,996 INFO  [PhysicianQueryBuilder] Before running  Prefix query,
>>> Last name: john
>>> 02:05:21,012 INFO  [LuceneIndexService] the query is:
>>> +(FIRST_NAME_EXACT:ang*) +(LAST_NAME_EXACT:john*)
>>> 02:05:21,012 INFO  [LuceneIndexService] Result Size: 1
>>>
>>> 02:06:03,578 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
>>> in
>>> PhysicianQuerybuilder with exactName=true
>>> 02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query,
>>> First
>>> name: a
>>> 02:06:03,578 INFO  [PhysicianQueryBuilder] Before running term query,
>>> Last
>>> name: johns
>>> 02:06:03,578 INFO  [LuceneIndexService] the query is: +()
>>> +(LAST_NAME_EXACT:johns*)
>>> 02:06:03,578 INFO  [LuceneIndexService] Result Size: 0
>>>
>>> 02:08:01,548 INFO  [PhysicianQueryBuilder] Entered addTypeSpecificTerms
>>> in
>>> PhysicianQuerybuilder with exactName=true
>>> 02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query,
>>> First
>>> name: an
>>> 02:08:01,548 INFO  [PhysicianQueryBuilder] Before running term query,
>>> Last
>>> name: johns
>>> 02:08:01,548 INFO  [LuceneIndexService] the query is: +()
>>> +(LAST_NAME_EXACT:johns*)
>>> 02:08:01,580 INFO  [LuceneIndexService] Result Size: 0
>>>
>>> As one can see the query works with first name=ang but not with first
>>> name=a
>>> or an.
>>>
>>> Appreciate all your inputs.
>>>
>>> Vanshi
>>>
>>> Erick Erickson wrote:
>>>   
>>>       
>>>> The most common issue with this kind of thing is that
>>>>     
>>>>         
>>> UN_TOKENIZEDimplies
>>>   
>>>       
>>>> no
>>>> case folding. So if your case differs you won't get a match.
>>>>
>>>> That aside, the very first thing I'd do is get a copy of Luke (google
>>>> Lucene
>>>> Luke)
>>>> and examine the index to see if what's in your index is what you
>>>>     
>>>>         
>>> *think*
>>>   
>>>       
>>>> is
>>>> in there.
>>>>
>>>>
>>>> The second thing I'd do is look at query.toString() to see what the
>>>>     
>>>>         
>>> actual
>>>   
>>>       
>>>>> query is. You can even paste the output of toString() into Luke and
>>>>>       
>>>>>           
>>> see
>>>   
>>>       
>>>>> what happens.
>>>>>       
>>>>>           
>>>> I'm not sure what buildMultiTermPrefixQuery is all about, but I assume
>>>> you have a good reason for using that. But the other strategy I use
>>>>     
>>>>         
>>> for
>>>   
>>>       
>>>> this kind of "what happened?" question is to peel back to simpler
>>>>     
>>>>         
>>> cases
>>>   
>>>       
>>>> until I get what I expect, then build back up until it breaks.....
>>>>
>>>> But really get a copy of Luke, it's a wonderful tool that'll give you
>>>>     
>>>>         
>>> lots
>>>   
>>>       
>>>> of
>>>> insight about what's *really* going on...
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Wed, May 27, 2009 at 12:43 AM, vanshi <nilu.thakur@gmail.com>
>>>>     
>>>>         
>>> wrote:
>>>   
>>>       
>>>>> In my web application, I need search functionality on first name and
>>>>>       
>>>>>           
>>> last
>>>   
>>>       
>>>>> name in 2 different ways, one search must be based on 'Metaphone
>>>>> Analyzer'
>>>>> giving all similar sounding names as result and another search should
>>>>>       
>>>>>           
>>> be
>>>   
>>>       
>>>>> exact match on either first name or last name. The name sounds like
>>>>> search
>>>>> has already been coded previously and I need to add another exact
>>>>>       
>>>>>           
>>> match
>>>   
>>>       
>>>>> search to the application. For this, I have a Lucene Index based out
>>>>>       
>>>>>           
>>> on
>>>   
>>>       
>>>>> fields from database tables which already had the names field indexed
>>>>> with
>>>>> metaphone analyzer. I added 2 more fields in the existing document,
>>>>>       
>>>>>           
>>> which
>>>   
>>>       
>>>>> indexes first name/last name as UN_TOKENIZED. While searching for
>>>>>       
>>>>>           
>>> exact
>>>   
>>>       
>>>>> match, I create a term query to look in to newly created UN_TOKENIZED
>>>>> fields
>>>>> as shown in the code snippets......however this is not getting any
>>>>>       
>>>>>           
>>> hits.
>>>   
>>>       
>>>>> I
>>>>> would like to know is there anything wrong conceptually?
>>>>>
>>>>> //creating fields for the document
>>>>> FIRST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>>>>                FIRST_NAME_EXACT(Field.Store.NO,
>>>>> Field.Index.UN_TOKENIZED),
>>>>>                LAST_NAME(Field.Store.NO, Field.Index.TOKENIZED),
>>>>>                LAST_NAME_EXACT(Field.Store.NO,
>>>>>       
>>>>>           
>>> Field.Index.UN_TOKENIZED),
>>>   
>>>       
>>>>> //name sounds like analyzer class....used while Indexing and
>>>>>       
>>>>>           
>>> searching
>>>   
>>>       
>>>>> public class NameSoundsLikeAnalyzer extends Analyzer {
>>>>>        PerFieldAnalyzerWrapper wrapper;
>>>>>
>>>>>        /**
>>>>>         *
>>>>>         */
>>>>>        public NameSoundsLikeAnalyzer() {
>>>>>                wrapper = new PerFieldAnalyzerWrapper(new
>>>>>       
>>>>>           
>>> StopAnalyzer());
>>>   
>>>       
>>>>>                wrapper.addAnalyzer(
>>>>>
>>>>>  PhysicianDocumentBuilder.PhysicianFieldInfo.FIRST_NAME
>>>>>                                                .toString(), new
>>>>> MetaphoneReplacementAnalyzer());
>>>>>
>>>>>                wrapper.addAnalyzer(
>>>>>
>>>>>  PhysicianDocumentBuilder.PhysicianFieldInfo.LAST_NAME
>>>>>                                                .toString(), new
>>>>> MetaphoneReplacementAnalyzer());
>>>>>
>>>>>        }
>>>>>
>>>>>        /**
>>>>>         * @see PerFieldAnalyzerWrapper#tokenStream(String, Reader)
>>>>>         */
>>>>>        @Override
>>>>>        public TokenStream tokenStream(String fieldName, Reader
>>>>>       
>>>>>           
>>> reader) {
>>>   
>>>       
>>>>>                return wrapper.tokenStream(fieldName, reader);
>>>>>        }
>>>>>
>>>>> }
>>>>>
>>>>> //lastly the query builder
>>>>> if(physicianQuery.getExactNameSearch()){
>>>>>
>>>>>  if(StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith())){
>>>>>                                TermQuery term = new TermQuery(new
>>>>> Term(FIRST_NAME_EXACT.toString(),
>>>>> physicianQuery.getFirstNameStartsWith()));
>>>>>                                query.add(term,MUST);
>>>>>
>>>>>                        }
>>>>>
>>>>>  if(StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())){
>>>>>                                TermQuery term = new TermQuery(new
>>>>> Term(LAST_NAME_EXACT.toString(),
>>>>> physicianQuery.getLastNameStartsWith()));
>>>>>                                query.add(term,MUST);
>>>>>
>>>>>                        }
>>>>> else{
>>>>> //we want metaphone search
>>>>> if (StringUtils.isNotEmpty(physicianQuery.getFirstNameStartsWith()))
>>>>>       
>>>>>           
>>> {
>>>   
>>>       
>>>>>  query.add(buildMultiTermPrefixQuery(FIRST_NAME.toString(),
>>>>>
>>>>>  physicianQuery.getFirstNameStartsWith()), MUST);
>>>>>                        }
>>>>>
>>>>>                        if
>>>>> (StringUtils.isNotEmpty(physicianQuery.getLastNameStartsWith())) {
>>>>>
>>>>>  query.add(buildMultiTermPrefixQuery(LAST_NAME.toString(),
>>>>>
>>>>>  physicianQuery.getLastNameStartsWith()), MUST);
>>>>>                        }
>>>>> }
>>>>>
>>>>>
>>>>> --
>>>>> View this message in context:
>>>>>
>>>>>       
>>>>>           
>>> http://www.nabble.com/No-hits-while-searching%21-tp23735920p23735920.htm
>>> l
>>>   
>>>       
>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>       
>>>>>           
>>>>     
>>>>         
>>>   
>>>       
>> -- 
>> Matthew Hall
>> Software Engineer
>> Mouse Genome Informatics
>> mhall@informatics.jax.org
>> (207) 288-6012
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 18:08:04 2009
Return-Path: <java-user-return-40567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43476 invoked from network); 1 Jun 2009 18:08:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 18:08:04 -0000
Received: (qmail 91801 invoked by uid 500); 1 Jun 2009 18:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91748 invoked by uid 500); 1 Jun 2009 18:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91738 invoked by uid 99); 1 Jun 2009 18:08:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 18:08:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 18:08:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MBBvC-00043U-3x
	for java-user@lucene.apache.org; Mon, 01 Jun 2009 11:07:42 -0700
Message-ID: <23819354.post@talk.nabble.com>
Date: Mon, 1 Jun 2009 11:07:42 -0700 (PDT)
From: vanshi <nilu.thakur@gmail.com>
To: java-user@lucene.apache.org
Subject: Sorting fields while searching!
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nilu.thakur@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have two fields initialized following way for Index writing:

FIRST_NAME_EXACT(Field.Store.YES, Field.Index.UN_TOKENIZED),
LAST_NAME_EXACT(Field.Store.YES, Field.Index.UN_TOKENIZED),

I have a prefix query to look for any name starting with the name entered by
the user. Lets say user enters 'kar' as FName and 'johns' as last name and
then the prefix query becomes 'kar*' 'johns*'. I need to display result in
alphabatical order....that means 'kara johns' must come before 'karen
johns'. First I thought, prefix query itself will rank document with the
alphabatical order but that does not seem the case. So, now I'm trying to
sort while searching, with this code.....but I don't see any difference
between wht the results were before and what they are now. 

sorts.add(new SortField(PhysicianFieldInfo.FIRST_NAME_EXACT.toString(),
SortField.STRING ));
sorts.add(new SortField(PhysicianFieldInfo.LAST_NAME_EXACT.toString(),
SortField.STRING ));

After these 2 sorting, I'm also doing sorting on some other fields but i
guess the name sorting should take precedence over later sortings. Can
anybody suggest what I'm doing wrong here?

Thanks,
Vanshi
-- 
View this message in context: http://www.nabble.com/Sorting-fields-while-searching%21-tp23819354p23819354.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 18:08:07 2009
Return-Path: <java-user-return-40568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43561 invoked from network); 1 Jun 2009 18:08:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 18:08:06 -0000
Received: (qmail 92829 invoked by uid 500); 1 Jun 2009 18:08:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92785 invoked by uid 500); 1 Jun 2009 18:08:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92751 invoked by uid 99); 1 Jun 2009 18:08:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 18:08:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.177.145.93] (HELO prxy.net) (209.177.145.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 18:08:04 +0000
X-Scanned-By: RAE MPP/ClamAV http://raeinternet.com/mpp
X-Scanned-By: This message was scanned by MPP Free Edition (www.messagepartners.com)!
Received: from [71.142.249.47] (account ken@krugler.org HELO [172.16.31.76])
  by prxy.net (CommuniGate Pro SMTP 4.2.10)
  with ESMTP-TLS id 105740950 for java-user@lucene.apache.org; Mon, 01 Jun 2009 11:08:17 -0700
Mime-Version: 1.0
Message-Id: <p06240801c649c81ebbbd@[172.16.31.76]>
In-Reply-To: <e75c02ef0906010954w70dd7244jd8b2bf523a0d615e@mail.gmail.com>
References: <e75c02ef0906010954w70dd7244jd8b2bf523a0d615e@mail.gmail.com>
Date: Mon, 1 Jun 2009 11:05:15 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Distributed Lucene Questions
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org

>Hi All,
>
>I am trying to build a distributed system to build and serve lucene indexes.
>I came across the Distributed Lucene project-
>http://wiki.apache.org/hadoop/DistributedLucene
>https://issues.apache.org/jira/browse/HADOOP-3394
>
>and have a couple of questions. It will be really helpful if someone can
>provide some insights.
>
>1) Is this code production ready?
>2) Does someone has performance data for this project?
>3) It allows searches and updates/deletes to be performed at the same time.
>How well the system will perform if there are frequent updates to the
>system. Will it handle the search and update load easily or will it be
>better to rebuild or update the indexes on different machines and then
>deploy the indexes back to the machines that are serving the indexes?
>
>Basically I am trying to choose between the 2 approaches-
>
>1) Use Hadoop to build and/or update Lucene indexes and then deploy them on
>separate cluster that will take care or load balancing, fault tolerance etc.
>There is a package in Hadoop contrib that does this, so I can use that code.
>
>2) Use and/or modify the Distributed Lucene code.
>
>I am expecting daily updates to our index so I am not sure if Distribtued
>Lucene code (which allows searches and updates on the same indexes) will be
>able to handle search and update load efficiently.

I think you should take a look at Katta, as this is exactly the type 
of use case it's designed to handle.

http://katta.sourceforge.net/

Other people use the distributed search support inside of Nutch.

And Solr has distributed search support, though it's still pretty new.

-- Ken
-- 
Ken Krugler
+1 530-210-6378

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 21:17:06 2009
Return-Path: <java-user-return-40569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21082 invoked from network); 1 Jun 2009 21:17:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 21:17:06 -0000
Received: (qmail 95360 invoked by uid 500); 1 Jun 2009 21:17:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95290 invoked by uid 500); 1 Jun 2009 21:17:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95279 invoked by uid 99); 1 Jun 2009 21:17:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 21:17:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.221.180 as permitted sender)
Received: from [209.85.221.180] (HELO mail-qy0-f180.google.com) (209.85.221.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 21:17:04 +0000
Received: by qyk10 with SMTP id 10so5204996qyk.29
        for <java-user@lucene.apache.org>; Mon, 01 Jun 2009 14:16:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=wtp4aTrsZeEEkTePaeiyW+EsOhxY9WXtBEMHqt/87xo=;
        b=FEqa6Y6TzdiI6m4X+NpyWQtsDy0BjitTEPrMhlx0OKx3IMN+8fFaMBk8n0EiEOjZt0
         YZ++oarhFNKWGdfBhIGeTakLrEQD2tMFA9mj1+pYwKy8E178Stiz8PKvvwb3GbeLdhpY
         E9G3eNprJBcEv7+Xni1b333a6KQAyJFUX6ADM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IWeu4w5+Yj3L4S7PTsM3walnSghrLCqDJLUZKmVH8icdXKF/w5nyNoBElIEpFaRbcA
         qRm+Ka5xGvmf0mxZkg0q7KMMKNyOJdoI4SFIKXYRo5k55rJjRFoClNpypGRuepfVu2ny
         9VR4YHgjSxiGnZNYlKSzEM2ex1LYaJdLh3QTw=
MIME-Version: 1.0
Received: by 10.220.71.6 with SMTP id f6mr4508116vcj.16.1243891003658; Mon, 01 
	Jun 2009 14:16:43 -0700 (PDT)
In-Reply-To: <23819354.post@talk.nabble.com>
References: <23819354.post@talk.nabble.com>
Date: Mon, 1 Jun 2009 17:16:43 -0400
Message-ID: <359a92830906011416k3fee70f8ufdd7b7441bdaa545@mail.gmail.com>
Subject: Re: Sorting fields while searching!
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485e8d21669a71d046b4ff1bc
X-Virus-Checked: Checked by ClamAV on apache.org

--001485e8d21669a71d046b4ff1bc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

It's really unclear to me what
PhysicianFieldInfo.FIRST_NAME_EXACT.toString()
returns. I assume the intent is to return a field name, but
how that relates to
FIRST_NAME_EXACT(Field.Store.YES, Field.Index.UN_TOKENIZED)

doesn't mean anything to me. Could you provide some details?

Note that if you specify a sort field that isn't in the document it
has no effect (i.e. if your
PhysicianFieldInfo.FIRST_NAME_EXACT.toString()
returns something like "2309884@").

I'll ask the dumb question: you *are* passing your
sort object(s) to the search, right?

Finally, take some care about capitalization. My memory is weak,
so check that your casing on the sort fields isn't messing you up.
I'd think about lower or upper case everything you expect to sort on
when indexing since you're not displaying it anyway.....

Best
Erick

On Mon, Jun 1, 2009 at 2:07 PM, vanshi <nilu.thakur@gmail.com> wrote:

>
> I have two fields initialized following way for Index writing:
>
> FIRST_NAME_EXACT(Field.Store.YES, Field.Index.UN_TOKENIZED),
> LAST_NAME_EXACT(Field.Store.YES, Field.Index.UN_TOKENIZED),
>
> I have a prefix query to look for any name starting with the name entered
> by
> the user. Lets say user enters 'kar' as FName and 'johns' as last name and
> then the prefix query becomes 'kar*' 'johns*'. I need to display result in
> alphabatical order....that means 'kara johns' must come before 'karen
> johns'. First I thought, prefix query itself will rank document with the
> alphabatical order but that does not seem the case. So, now I'm trying to
> sort while searching, with this code.....but I don't see any difference
> between wht the results were before and what they are now.
>
> sorts.add(new SortField(PhysicianFieldInfo.FIRST_NAME_EXACT.toString(),
> SortField.STRING ));
> sorts.add(new SortField(PhysicianFieldInfo.LAST_NAME_EXACT.toString(),
> SortField.STRING ));
>
> After these 2 sorting, I'm also doing sorting on some other fields but i
> guess the name sorting should take precedence over later sortings. Can
> anybody suggest what I'm doing wrong here?
>
> Thanks,
> Vanshi
> --
> View this message in context:
> http://www.nabble.com/Sorting-fields-while-searching%21-tp23819354p23819354.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485e8d21669a71d046b4ff1bc--

From java-user-return-40570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 01 22:32:45 2009
Return-Path: <java-user-return-40570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58971 invoked from network); 1 Jun 2009 22:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jun 2009 22:32:45 -0000
Received: (qmail 93415 invoked by uid 500); 1 Jun 2009 22:32:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93332 invoked by uid 500); 1 Jun 2009 22:32:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93313 invoked by uid 99); 1 Jun 2009 22:32:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 22:32:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vijay.stanford@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Jun 2009 22:32:44 +0000
Received: by qw-out-2122.google.com with SMTP id 5so5173112qwd.53
        for <multiple recipients>; Mon, 01 Jun 2009 15:32:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=KuiaACGdgEDnVKsUBCZlox/sDKoFY+xUfon5kx0SZcU=;
        b=n8Awe4QSwtOGPe07n5RraTV/vTnmtXTRycR7cGDVPxLLggJbV1Lt8BGntqsiIh4BRl
         4qViMe9+PCcGfzm7jEwCKaFPQ4F0WTQFfWiU1L/HD1hfgqX3sFaQ/d7uQnjMX4L38rUX
         MNYow28aTxrqdDxrDWjssx45GsDrIDHWQFXa8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=pKWkxC6av3yU5FhRNzf/G744ASgfQM7M4beHj6wcc87sAphy4jdiGJbP9eVmwQCu0x
         jDY7o47bIeQKxmYqQS7Jomo1rPwThP4YjdnHwoO+TEhM1+VOM+6KVkHK/+aEbjj+bjRh
         fwSPXrck6v3oukKpYOC1V01oCdY9KUT31+KOE=
MIME-Version: 1.0
Received: by 10.224.89.8 with SMTP id c8mr6165648qam.371.1243895543373; Mon, 
	01 Jun 2009 15:32:23 -0700 (PDT)
In-Reply-To: <286418790906011508ybea6112o667d9e5c0c960a5d@mail.gmail.com>
References: <286418790906011508ybea6112o667d9e5c0c960a5d@mail.gmail.com>
Date: Mon, 1 Jun 2009 15:32:23 -0700
Message-ID: <286418790906011532u5bd485f8pf09c5a9fb35da148@mail.gmail.com>
Subject: Question on Efficient field updates in the Lucene index in Nutch
From: Vijay <vijay.stanford@gmail.com>
To: nutch-user@lucene.apache.org, java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb6e200206e046b510092
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cb6e200206e046b510092
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all,

      I have a question regarding field updates to the lucene index in
nutch.

       Suppose I am indexing webpages along with tags as an extra field. I
want to add an extra tag to a webpage. Is there a clean way for me to do
this without having to re-index the page with the updated tags field and
deleting duplicates?

      For example, can I create a new document with the same doc id as the
object made from the relevant URL in the past, with the new tag alone as a
field, with no content section. Could this enable adding the correct doc id
to the new tag postings list, thereby creating the same effect as indexing
the webpage afresh with all the given tags?
     Alternatively is there any other efficient way to do this?


Thanks a ton,
Vijay

--0015175cb6e200206e046b510092--

From java-user-return-40571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 00:11:44 2009
Return-Path: <java-user-return-40571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94919 invoked from network); 2 Jun 2009 00:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 00:11:44 -0000
Received: (qmail 92103 invoked by uid 500); 2 Jun 2009 00:11:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92053 invoked by uid 500); 2 Jun 2009 00:11:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92043 invoked by uid 99); 2 Jun 2009 00:11:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 00:11:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.52.219.147] (HELO mx01.business.com) (216.52.219.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 00:11:46 +0000
Received: from unknown (HELO exchg04.corp.business.com) ([10.1.0.24])
  by mx00.business.com with ESMTP; 01 Jun 2009 17:11:26 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Distributed Lucene Questions
Date: Mon, 1 Jun 2009 17:11:25 -0700
Message-ID: <DEC11051901DCC43BD47EC508118AD860779A084@exchg04.corp.business.com>
In-Reply-To: <p06240801c649c81ebbbd@[172.16.31.76]>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Distributed Lucene Questions
Thread-Index: Acni4/EGQyI+E6LzSvmX3tg3QAnY7QAMcIhA
References: <e75c02ef0906010954w70dd7244jd8b2bf523a0d615e@mail.gmail.com> <p06240801c649c81ebbbd@[172.16.31.76]>
From: "Angel, Eric" <eangel@business.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Has anyone used Katta in production?  It looks very interesting and
feature-rich, but I'm wondering how stable it is and whether or not it
can support fine-grained queries - for example, constant score queries,
MultiSearcher, etc.

-----Original Message-----
From: Ken Krugler [mailto:kkrugler_lists@transpac.com]=20
Sent: Monday, June 01, 2009 11:05 AM
To: java-user@lucene.apache.org
Subject: Re: Distributed Lucene Questions

>Hi All,
>
>I am trying to build a distributed system to build and serve lucene
indexes.
>I came across the Distributed Lucene project-
>http://wiki.apache.org/hadoop/DistributedLucene
>https://issues.apache.org/jira/browse/HADOOP-3394
>
>and have a couple of questions. It will be really helpful if someone
can
>provide some insights.
>
>1) Is this code production ready?
>2) Does someone has performance data for this project?
>3) It allows searches and updates/deletes to be performed at the same
time.
>How well the system will perform if there are frequent updates to the
>system. Will it handle the search and update load easily or will it be
>better to rebuild or update the indexes on different machines and then
>deploy the indexes back to the machines that are serving the indexes?
>
>Basically I am trying to choose between the 2 approaches-
>
>1) Use Hadoop to build and/or update Lucene indexes and then deploy
them on
>separate cluster that will take care or load balancing, fault tolerance
etc.
>There is a package in Hadoop contrib that does this, so I can use that
code.
>
>2) Use and/or modify the Distributed Lucene code.
>
>I am expecting daily updates to our index so I am not sure if
Distribtued
>Lucene code (which allows searches and updates on the same indexes)
will be
>able to handle search and update load efficiently.

I think you should take a look at Katta, as this is exactly the type=20
of use case it's designed to handle.

http://katta.sourceforge.net/

Other people use the distributed search support inside of Nutch.

And Solr has distributed search support, though it's still pretty new.

-- Ken
--=20
Ken Krugler
+1 530-210-6378

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 04:21:14 2009
Return-Path: <java-user-return-40572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82202 invoked from network); 2 Jun 2009 04:21:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 04:21:13 -0000
Received: (qmail 39449 invoked by uid 500); 2 Jun 2009 04:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39367 invoked by uid 500); 2 Jun 2009 04:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39357 invoked by uid 99); 2 Jun 2009 04:21:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 04:21:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 04:21:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MBLUZ-0001xW-OQ
	for java-user@lucene.apache.org; Mon, 01 Jun 2009 21:20:51 -0700
Message-ID: <23826263.post@talk.nabble.com>
Date: Mon, 1 Jun 2009 21:20:51 -0700 (PDT)
From: mattspitz <mspitz@stanford.edu>
To: java-user@lucene.apache.org
Subject: Searching documents that contain a field (text of field is
 irrelevant)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mspitz@stanford.edu
X-Virus-Checked: Checked by ClamAV on apache.org


Hey!

Consider a bunch of documents that represent, say, students.  These students
have the following attributes:
1) Student IDs
2) Name
3) Self-description (optional)

So, all documents have id: and name:, but only some of the documents have an
added desc:

Assuming all of the fields are indexed, I can certainly search within any of
the fields.  That is: "+name:John desc:muffins" searches for students named
John who mentioned "muffins" in their description.

What I want is all documents that contain the self-description field,
regardless of what that field contains.  

I can probably do this: "desc:*", but I'm not sure how efficient that'd be,
and I wonder if there's a better way to do it.

Thank you!
-Matt
-- 
View this message in context: http://www.nabble.com/Searching-documents-that-contain-a-field-%28text-of-field-is-irrelevant%29-tp23826263p23826263.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 04:51:43 2009
Return-Path: <java-user-return-40573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86368 invoked from network); 2 Jun 2009 04:51:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 04:51:43 -0000
Received: (qmail 57744 invoked by uid 500); 2 Jun 2009 04:51:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57650 invoked by uid 500); 2 Jun 2009 04:51:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57640 invoked by uid 99); 2 Jun 2009 04:51:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 04:51:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.125.93] (HELO web38802.mail.mud.yahoo.com) (209.191.125.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Jun 2009 04:51:41 +0000
Received: (qmail 26888 invoked by uid 60001); 2 Jun 2009 04:51:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1243918280; bh=lvzeDDKorIsWaUfHvFKKkHUcYO8h+khlH3kMoPYyLsw=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=jhQaEZoN64/nzOF/piXLqh0ZoBBbvSNCyxEhw9vdpQgxN2ZjgvNMUPYghF2ECAXSo195Wnt2zpACEsNiUwkz6vNLsWf8d+xO4esujnuzeDJzJPSPZ+a+9bDff++25yDCD7JlYzRECIy6Z8QYb7EKECG1GKbBdmsQRqmlGDvaK2M=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=4fHq2UmbOWKLfakmsqveRTVkPW7bv73TyO9+n8HvBn9k+Div+oqHNCzSWW1XxTaW8/wCTmxvLZ8CjjLOX5/zRqFDq3wePbniVIun3NlTN/aUv8j12vx+6xzf8hGyqOfZNpbXJx6QSloydvm1/I3/uFaG+c3mkqlxDes/eW8/mrc=;
Message-ID: <280099.25432.qm@web38802.mail.mud.yahoo.com>
X-YMail-OSG: JQ2vjh8VM1ksuPQV_FwgEoRMfK4UQPsWLunEsQKa2oAVTsgFGo7xewQYP7kskQrpGe3CisKErWAM5tGg.odCxykchM30w.fgL4pgmuA3Py1jAX1pvQ2eo4o6OKz1JvTbSqGUmm1DmMcxo09l8SueZo8ENcT6_gf7m31Knv7kasWEGGGCis_D8NPlBSX7b.gxe.rp_dQVGf12KFcF0xuRHX6YyJe.l_hunLFCTdqZLfaf.xzdwGfGXZWUWx6UYzJ04ZJUrgIOpJIN4gd5mpJ63dLRTNzEHZfQjKokqJgNtxauxwQMJWnPHddSQCqrmIfOC.k0xOm2Ur46b4wmAVIrpQ--
Received: from [121.245.55.139] by web38802.mail.mud.yahoo.com via HTTP; Mon, 01 Jun 2009 21:51:20 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.10
References: <23826263.post@talk.nabble.com>
Date: Mon, 1 Jun 2009 21:51:20 -0700 (PDT)
From: balasubramanian sudaakeran <sudaakeran_b@yahoo.com>
Subject: Re: Searching documents that contain a field (text of field is irrelevant)
To: java-user@lucene.apache.org
In-Reply-To: <23826263.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Couple of approaches. (But not very sure if there are other better approach=
es)=0A1. Add a seperate field which is set to 1 or 0 depending upon if the =
self description is present or not. Then you can search by this new field.=
=0A2. Along with each self-descrition add a common idenfier word. Then you =
can search by this idenfier word.=0A=0A=0A=0A----- Original Message ----=0A=
From: mattspitz <mspitz@stanford.edu>=0ATo: java-user@lucene.apache.org=0AS=
ent: Tuesday, June 2, 2009 9:50:51 AM=0ASubject: Searching documents that c=
ontain a field (text of field is irrelevant)=0A=0A=0AHey!=0A=0AConsider a b=
unch of documents that represent, say, students.=A0 These students=0Ahave t=
he following attributes:=0A1) Student IDs=0A2) Name=0A3) Self-description (=
optional)=0A=0ASo, all documents have id: and name:, but only some of the d=
ocuments have an=0Aadded desc:=0A=0AAssuming all of the fields are indexed,=
 I can certainly search within any of=0Athe fields.=A0 That is: "+name:John=
 desc:muffins" searches for students named=0AJohn who mentioned "muffins" i=
n their description.=0A=0AWhat I want is all documents that contain the sel=
f-description field,=0Aregardless of what that field contains.=A0 =0A=0AI c=
an probably do this: "desc:*", but I'm not sure how efficient that'd be,=0A=
and I wonder if there's a better way to do it.=0A=0AThank you!=0A-Matt=0A--=
 =0AView this message in context: http://www.nabble.com/Searching-documents=
-that-contain-a-field-%28text-of-field-is-irrelevant%29-tp23826263p23826263=
.html=0ASent from the Lucene - Java Users mailing list archive at Nabble.co=
m.=0A=0A=0A----------------------------------------------------------------=
-----=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AF=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A  =
    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 05:13:18 2009
Return-Path: <java-user-return-40574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91203 invoked from network); 2 Jun 2009 05:13:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 05:13:18 -0000
Received: (qmail 76070 invoked by uid 500); 2 Jun 2009 05:13:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75986 invoked by uid 500); 2 Jun 2009 05:13:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75976 invoked by uid 99); 2 Jun 2009 05:13:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 05:13:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 05:13:20 +0000
X-ASG-Debug-ID: 1243919579-46d7001a0000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 6E12013FF8
	for <java-user@lucene.apache.org>; Mon,  1 Jun 2009 22:12:59 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id uqsZ7wvGWLnRwNlA for <java-user@lucene.apache.org>; Mon, 01 Jun 2009 22:12:59 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
Subject: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
Date: Mon, 1 Jun 2009 22:12:59 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAA4@rw-ex2003.BROADVISION.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
Thread-Index: AcnjQMu38mNO1SZfTyOezrEIEY5oaw==
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1243919579
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

When I use lucene 2.4.1 QueryParser with CJKAnalyzer, somehow
it always generates an extra space, for example, if the input is "ABC",
the query would be:

myfield"AB BC "  // should be myfield:"AB BC"

If I create PhraseQuery directly it does work. From Luke I know indexing
works OK. In lucene 1.4.3 we donot have this issue. I diffed CJKAnalyzer
code and it seems to be the same, so I guess it could be a QueryParser
bug?

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 05:39:34 2009
Return-Path: <java-user-return-40575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3832 invoked from network); 2 Jun 2009 05:39:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 05:39:34 -0000
Received: (qmail 2924 invoked by uid 500); 2 Jun 2009 05:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2869 invoked by uid 500); 2 Jun 2009 05:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2859 invoked by uid 99); 2 Jun 2009 05:39:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 05:39:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 05:39:34 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id 6135373005
	for <java-user@lucene.apache.org>; Tue,  2 Jun 2009 14:39:13 +0900 (JST)
Message-ID: <4A24BB01.4090900@r.email.ne.jp>
Date: Tue, 02 Jun 2009 14:39:13 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.21 (Macintosh/20090302)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAA4@rw-ex2003.BROADVISION.COM>
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAA4@rw-ex2003.BROADVISION.COM>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure this is the same case, but there is a report and patch for 
CJKTokenizer in JARA:

https://issues.apache.org/jira/browse/LUCENE-973

Koji


Zhang, Lisheng wrote:
> Hi,
>
> When I use lucene 2.4.1 QueryParser with CJKAnalyzer, somehow
> it always generates an extra space, for example, if the input is "ABC",
> the query would be:
>
> myfield"AB BC "  // should be myfield:"AB BC"
>
> If I create PhraseQuery directly it does work. From Luke I know indexing
> works OK. In lucene 1.4.3 we donot have this issue. I diffed CJKAnalyzer
> code and it seems to be the same, so I guess it could be a QueryParser
> bug?
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 09:54:10 2009
Return-Path: <java-user-return-40576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90435 invoked from network); 2 Jun 2009 09:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 09:54:10 -0000
Received: (qmail 16758 invoked by uid 500); 2 Jun 2009 09:54:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16676 invoked by uid 500); 2 Jun 2009 09:54:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16666 invoked by uid 99); 2 Jun 2009 09:54:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 09:54:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.222.199 as permitted sender)
Received: from [209.85.222.199] (HELO mail-pz0-f199.google.com) (209.85.222.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 09:54:10 +0000
Received: by pzk37 with SMTP id 37so1958233pzk.29
        for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 02:53:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=WEJ1DRHKXEmXvlRg0QX54PtPx4IftYyy+J5Ii1i+mso=;
        b=O7IOhsEhk4uv2yqZfieFy6rb0NGTJe0z+RPxuhxemJDrczIcF9SJwgOYRKSLenZnKB
         gCFlETgKGijr9Us6Xhg4K3nxWvIzKWk0ZVMq3HOvHTyOwAp3jG/C3k9k91400heMbf9C
         eEJqBLfBot4mfNn+VjoBozu7b0gwSKpUZOq3A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=NkxpGWTjMIIzpuGHa0QB6n40XhvQI2PvaE0pgln2Vy9cetOZs/ozjcoA9aoaQLLTOn
         VY6MeySt7uSmZQ6ngxaCdwzWleYsAtHqiHaUSQf/4ePg7NQ1wS2FGy68wVUiZ1xatnXO
         PsnM390cQ/tLu/I2v8M7KN2KFkZkbb+arqBuw=
MIME-Version: 1.0
Received: by 10.142.44.14 with SMTP id r14mr2668895wfr.196.1243936429105; Tue, 
	02 Jun 2009 02:53:49 -0700 (PDT)
From: KK <dioxide.software@gmail.com>
Date: Tue, 2 Jun 2009 15:23:29 +0530
Message-ID: <8db6d74a0906020253l336e9bc9re35b56dc2b2f7ccf@mail.gmail.com>
Subject: How to get top x[30 or 40] docs from result still alongwith the 
	support for hit highlighting?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd15744fae481046b5a84e3
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd15744fae481046b5a84e3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi All,
I've been using hit highlighting for some time for non-english search.
I'm indexing the fields using this,

    Document doc = new Document();
    doc.add(new Field(contentField, pageContent, Field.Store.YES,
Field.Index.TOKENIZED));
    doc.add(new Field(idField, pageId, Field.Store.YES,
Field.Index.TOKENIZED));

and used the following for searching bundled wiht hit highlighting,
# I'm using a phrase query for forming the query like this,

        PhraseQuery phrase = new PhraseQuery();
        String[] termArray = queryTerms.split(" ");
        System.out.println("array size " + termArray.length);
        for (int i=0; i<termArray.length; i++) {
            System.out.println("adding " + termArray[i]);
            phrase.add(new Term("content", termArray[i]));
        }

then instantiating a searcher as follows, with a given trueindexpath,
         String searchField = "content";
        IndexSearcher searcher = new IndexSearcher(trueIndexPath);
        QueryParser queryParser = null;
        try {
            queryParser = new QueryParser(searchField, new
WhitespaceAnalyzer());
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        Hits hits = null;
        try {
            hits = searcher.search(phrase);
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        hitCount = hits.length();

and finally the following for hit highlighting, I'm putitng all the field
values in a hashmap called earchresult and finally to a bigger map
resutlMap,

SimpleHTMLFormatter formatter = new SimpleHTMLFormatter("<span
class=\"highlight\">", "</span>");
        QueryScorer scorer = new QueryScorer(phrase);
        Highlighter highlighter = new Highlighter(formatter, scorer);

        for (int i = 0; i < hits.length(); i++) {
            Map eachResult = new HashMap();
            String content = hits.doc(i).get("content");
            TokenStream stream = new
WhitespaceAnalyzer().tokenStream("content", new StringReader(content));
            String fragment = highlighter.getBestFragments(stream, content,
3, "...");
            System.out.println(fragment);
            eachResult.put("id", hits.doc(i).get("id"));
            eachResult.put("content", fragment);
            resultList.add(eachResult);
        }

Now I'm not able to limit the search results to a certain limit, because say
we've 1000 results, we're not going to show all, we can limit that to some
lower value say 30 or 50 like that. Can someone let me know how to limit the
search results keeping the other things intact i.e highlighting. I googled
and found something called TopDocs but could not figure out how to plug the
same thing in the above code fragment, a good example will be helpful.
As of now I thing its the highlighter thats taking the major part of the
time consumed for search. So we can restrict the whole thing for only the
part that we are going to show on the first page. Any idea on the same is
very welcome. Thank you.

--KK.

--000e0cd15744fae481046b5a84e3--

From java-user-return-40577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 13:30:13 2009
Return-Path: <java-user-return-40577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67922 invoked from network); 2 Jun 2009 13:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 13:30:12 -0000
Received: (qmail 55770 invoked by uid 500); 2 Jun 2009 13:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55712 invoked by uid 500); 2 Jun 2009 13:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55702 invoked by uid 99); 2 Jun 2009 13:30:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 13:30:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.221.107 as permitted sender)
Received: from [209.85.221.107] (HELO mail-qy0-f107.google.com) (209.85.221.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 13:30:12 +0000
Received: by qyk5 with SMTP id 5so305qyk.29
        for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 06:29:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=JSGb6B/iSnbGdGNkg3QL02D2GtMubf8HIm2JjrXBy3A=;
        b=pRRj6Tt+zOUMud39VYBXrglzGUlx8BLhFUfjtyTFfmQrDFEWuJAFX19vqUB1DDQOtj
         zlapfYTXA+zkdDvmUfk2y1y/PqhGWOEaI5NaQTDsiG6Dk0Fc8iiW+HBkXFnQrSSjX8kP
         zzL0HJx8iyvbqoseyO0PHJb0kUoBKq9zHNe1g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ofXTi+S0u3Mh+5KKZVtDjALIoV7y4S1H0nS5xTGyvrlNZD756DjPPtyokFqLVzdPNS
         aQ7sU++vCW8mhFAxSPKyjyu1Rp8AZtsEOzEDnDlCE52PhjlBo8YyU7P8NiVzprOvQmIC
         KEVaE4V9DOyr3r4ao/r+zgARcpHKu5lEl4Nz0=
MIME-Version: 1.0
Received: by 10.220.73.209 with SMTP id r17mr4618378vcj.46.1243948943195; Tue, 
	02 Jun 2009 06:22:23 -0700 (PDT)
In-Reply-To: <8db6d74a0906020253l336e9bc9re35b56dc2b2f7ccf@mail.gmail.com>
References: <8db6d74a0906020253l336e9bc9re35b56dc2b2f7ccf@mail.gmail.com>
Date: Tue, 2 Jun 2009 09:22:20 -0400
Message-ID: <359a92830906020622u1220b5dap32d225cdba61f155@mail.gmail.com>
Subject: Re: How to get top x[30 or 40] docs from result still alongwith the 
	support for hit highlighting?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636310867e0c024046b5d6ee7
X-Virus-Checked: Checked by ClamAV on apache.org

--001636310867e0c024046b5d6ee7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

First, I'd ask how sure you are that highlighting is the problem.But
answering this should be simple, just remove the
highlighting portion.

Why can't you just stop iterating the Hits object at your limit?
Something like:
for (int i = 0; i < hits.length() && i < 50; i++)

?

That'll tell you whether you're on the right track as far as highlighting.

Best
Erick

On Tue, Jun 2, 2009 at 5:53 AM, KK <dioxide.software@gmail.com> wrote:

> Hi All,
> I've been using hit highlighting for some time for non-english search.
> I'm indexing the fields using this,
>
>    Document doc = new Document();
>    doc.add(new Field(contentField, pageContent, Field.Store.YES,
> Field.Index.TOKENIZED));
>    doc.add(new Field(idField, pageId, Field.Store.YES,
> Field.Index.TOKENIZED));
>
> and used the following for searching bundled wiht hit highlighting,
> # I'm using a phrase query for forming the query like this,
>
>        PhraseQuery phrase = new PhraseQuery();
>        String[] termArray = queryTerms.split(" ");
>        System.out.println("array size " + termArray.length);
>        for (int i=0; i<termArray.length; i++) {
>            System.out.println("adding " + termArray[i]);
>            phrase.add(new Term("content", termArray[i]));
>        }
>
> then instantiating a searcher as follows, with a given trueindexpath,
>         String searchField = "content";
>        IndexSearcher searcher = new IndexSearcher(trueIndexPath);
>        QueryParser queryParser = null;
>        try {
>            queryParser = new QueryParser(searchField, new
> WhitespaceAnalyzer());
>        } catch (Exception ex) {
>            ex.printStackTrace();
>        }
>
>        Hits hits = null;
>        try {
>            hits = searcher.search(phrase);
>        } catch (Exception ex) {
>            ex.printStackTrace();
>        }
>
>        hitCount = hits.length();
>
> and finally the following for hit highlighting, I'm putitng all the field
> values in a hashmap called earchresult and finally to a bigger map
> resutlMap,
>
> SimpleHTMLFormatter formatter = new SimpleHTMLFormatter("<span
> class=\"highlight\">", "</span>");
>        QueryScorer scorer = new QueryScorer(phrase);
>        Highlighter highlighter = new Highlighter(formatter, scorer);
>
>        for (int i = 0; i < hits.length(); i++) {
>            Map eachResult = new HashMap();
>            String content = hits.doc(i).get("content");
>            TokenStream stream = new
> WhitespaceAnalyzer().tokenStream("content", new StringReader(content));
>            String fragment = highlighter.getBestFragments(stream, content,
> 3, "...");
>            System.out.println(fragment);
>            eachResult.put("id", hits.doc(i).get("id"));
>            eachResult.put("content", fragment);
>            resultList.add(eachResult);
>        }
>
> Now I'm not able to limit the search results to a certain limit, because
> say
> we've 1000 results, we're not going to show all, we can limit that to some
> lower value say 30 or 50 like that. Can someone let me know how to limit
> the
> search results keeping the other things intact i.e highlighting. I googled
> and found something called TopDocs but could not figure out how to plug the
> same thing in the above code fragment, a good example will be helpful.
> As of now I thing its the highlighter thats taking the major part of the
> time consumed for search. So we can restrict the whole thing for only the
> part that we are going to show on the first page. Any idea on the same is
> very welcome. Thank you.
>
> --KK.
>

--001636310867e0c024046b5d6ee7--

From java-user-return-40578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 14:04:15 2009
Return-Path: <java-user-return-40578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84585 invoked from network); 2 Jun 2009 14:04:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 14:04:15 -0000
Received: (qmail 31009 invoked by uid 500); 2 Jun 2009 14:04:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30949 invoked by uid 500); 2 Jun 2009 14:04:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30939 invoked by uid 99); 2 Jun 2009 14:04:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 14:04:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 14:04:15 +0000
Received: by wf-out-1314.google.com with SMTP id 24so2441321wfg.20
        for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 07:03:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=FAHqLnyFU8kkCeeliNSvYW1GkXRH0P6shUvsgPPqdLQ=;
        b=UOSMGZ7Oq8+KHjGVe7+JCTOWyrxisPtDaW5qb9zKT58C8eOCbWPC/oRQo8LVPiWz2R
         Cn+qmy58b33U1E7yoxUrb5k1a6NveISttLtcpNDCmilHGZzLN5Wto9f3xTzZznfd1nGp
         fi+qXfEGVPgejYzx4F+tW8U7t+oUy/q1YzkiI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=WPjUuw39tH+bISdGK488LSnraU+4eKiKf4rlXoYT27bzntG+GgoKAKk1m2qOtH5MgN
         9kdaWo6Y53R7gHr6ZacAKlCE76IAXliUft2Z6p/XH/d8Xjig2nYE82UB4RzwaSxbwyKL
         /6L/G1RgkgK/ijvZfYkXwr18LLzCmdpKun3WI=
MIME-Version: 1.0
Received: by 10.142.166.7 with SMTP id o7mr366830wfe.97.1243951433790; Tue, 02 
	Jun 2009 07:03:53 -0700 (PDT)
In-Reply-To: <359a92830906020622u1220b5dap32d225cdba61f155@mail.gmail.com>
References: <8db6d74a0906020253l336e9bc9re35b56dc2b2f7ccf@mail.gmail.com> 
	<359a92830906020622u1220b5dap32d225cdba61f155@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Tue, 2 Jun 2009 19:33:32 +0530
Message-ID: <8db6d74a0906020703x3cbc020dva3ddfa21c3c3b594@mail.gmail.com>
Subject: Re: How to get top x[30 or 40] docs from result still alongwith the 
	support for hit highlighting?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd328a654a1fa046b5e0372
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd328a654a1fa046b5e0372
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks for your response.
BTW, I got it done using TopDocs in place of Hits and used this

 String content = searcher.doc(topDocs.scoreDocs[i].doc).get("content");

instead of
  String content = hits.doc(i).get("content");

Thanks,
KK

On Tue, Jun 2, 2009 at 6:52 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> First, I'd ask how sure you are that highlighting is the problem.But
> answering this should be simple, just remove the
> highlighting portion.
>
> Why can't you just stop iterating the Hits object at your limit?
> Something like:
> for (int i = 0; i < hits.length() && i < 50; i++)
>
> ?
>
> That'll tell you whether you're on the right track as far as highlighting.
>
> Best
> Erick
>
> On Tue, Jun 2, 2009 at 5:53 AM, KK <dioxide.software@gmail.com> wrote:
>
> > Hi All,
> > I've been using hit highlighting for some time for non-english search.
> > I'm indexing the fields using this,
> >
> >    Document doc = new Document();
> >    doc.add(new Field(contentField, pageContent, Field.Store.YES,
> > Field.Index.TOKENIZED));
> >    doc.add(new Field(idField, pageId, Field.Store.YES,
> > Field.Index.TOKENIZED));
> >
> > and used the following for searching bundled wiht hit highlighting,
> > # I'm using a phrase query for forming the query like this,
> >
> >        PhraseQuery phrase = new PhraseQuery();
> >        String[] termArray = queryTerms.split(" ");
> >        System.out.println("array size " + termArray.length);
> >        for (int i=0; i<termArray.length; i++) {
> >            System.out.println("adding " + termArray[i]);
> >            phrase.add(new Term("content", termArray[i]));
> >        }
> >
> > then instantiating a searcher as follows, with a given trueindexpath,
> >         String searchField = "content";
> >        IndexSearcher searcher = new IndexSearcher(trueIndexPath);
> >        QueryParser queryParser = null;
> >        try {
> >            queryParser = new QueryParser(searchField, new
> > WhitespaceAnalyzer());
> >        } catch (Exception ex) {
> >            ex.printStackTrace();
> >        }
> >
> >        Hits hits = null;
> >        try {
> >            hits = searcher.search(phrase);
> >        } catch (Exception ex) {
> >            ex.printStackTrace();
> >        }
> >
> >        hitCount = hits.length();
> >
> > and finally the following for hit highlighting, I'm putitng all the field
> > values in a hashmap called earchresult and finally to a bigger map
> > resutlMap,
> >
> > SimpleHTMLFormatter formatter = new SimpleHTMLFormatter("<span
> > class=\"highlight\">", "</span>");
> >        QueryScorer scorer = new QueryScorer(phrase);
> >        Highlighter highlighter = new Highlighter(formatter, scorer);
> >
> >        for (int i = 0; i < hits.length(); i++) {
> >            Map eachResult = new HashMap();
> >            String content = hits.doc(i).get("content");
> >            TokenStream stream = new
> > WhitespaceAnalyzer().tokenStream("content", new StringReader(content));
> >            String fragment = highlighter.getBestFragments(stream,
> content,
> > 3, "...");
> >            System.out.println(fragment);
> >            eachResult.put("id", hits.doc(i).get("id"));
> >            eachResult.put("content", fragment);
> >            resultList.add(eachResult);
> >        }
> >
> > Now I'm not able to limit the search results to a certain limit, because
> > say
> > we've 1000 results, we're not going to show all, we can limit that to
> some
> > lower value say 30 or 50 like that. Can someone let me know how to limit
> > the
> > search results keeping the other things intact i.e highlighting. I
> googled
> > and found something called TopDocs but could not figure out how to plug
> the
> > same thing in the above code fragment, a good example will be helpful.
> > As of now I thing its the highlighter thats taking the major part of the
> > time consumed for search. So we can restrict the whole thing for only the
> > part that we are going to show on the first page. Any idea on the same is
> > very welcome. Thank you.
> >
> > --KK.
> >
>

--000e0cd328a654a1fa046b5e0372--

From java-user-return-40579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 15:03:45 2009
Return-Path: <java-user-return-40579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17929 invoked from network); 2 Jun 2009 15:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 15:03:45 -0000
Received: (qmail 50310 invoked by uid 500); 2 Jun 2009 15:03:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50271 invoked by uid 500); 2 Jun 2009 15:03:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50255 invoked by uid 99); 2 Jun 2009 15:03:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 15:03:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of radha84@gmail.com designates 209.85.222.199 as permitted sender)
Received: from [209.85.222.199] (HELO mail-pz0-f199.google.com) (209.85.222.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 15:03:43 +0000
Received: by pzk37 with SMTP id 37so2112471pzk.29
        for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 08:03:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=UcsaBzbVE/1OMcfxPCDZxow2qlbDEDKJL3Zi2/iZeSY=;
        b=Vlq6vcY0iSuzrQjSYCj0wZptyMu+1wIVK4IB8dB5pE5mDXry4/JgUWYYtdZOoyK1s2
         H8v2qKmB1va79B7zbnQaXPmZwElcloUVqG0wqM0GhVoQov2psPFzSLEMr6mYkqZf4Ib4
         ilLbNOhNWOPQKsGXbGj+YCB9sfcYWYMdtKbyQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=g/xDdKsKvE/IoP4ZiJzhEjmUG8oP/1ePZvBOH14/Tl16y/eVR8L2uUhfxkDeazCyxo
         oUQ/EI3JOrQzm1g7mg57nENqxW4Sc3mXBxTXgkgWjorGZqfKNSZnWRAxIIIxS9z9U3vR
         796gaQOB2zU5jKbJuSih1H7t2l8wLPBxuZHOs=
MIME-Version: 1.0
Received: by 10.142.218.4 with SMTP id q4mr2463907wfg.225.1243955002442; Tue, 
	02 Jun 2009 08:03:22 -0700 (PDT)
Date: Tue, 2 Jun 2009 20:33:22 +0530
Message-ID: <45e5f8bb0906020803u410f1ca8ma64d21b4b1649410@mail.gmail.com>
Subject: Highlighting in Lucene ( With SrndQuery & Query Parser )
From: Radha Sreedharan <radha84@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd22f28098523046b5ed82b
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd22f28098523046b5ed82b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all,

*Requirment *
I have a query of type *SrndQuery *which is parsed by *QueryParser*.On the
hit of this query I want to get the region of words around the match.

*Approach followed*
I used the highlighting logic code as per example usage in <<
http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/highlight/package-summary.html>>

*Issue faced*
However the scores returned for the *TextFragments *are always 0, hence no
text fragment is picked up
The same piece of code works when my underlying query is *SpanQuery *and I
am *NOT** *using *QueryParser*.

*Query*
Please do let me know if any of you have an idea how to resolve this issue?

Regards,
Radha

--000e0cd22f28098523046b5ed82b--

From java-user-return-40580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 16:23:49 2009
Return-Path: <java-user-return-40580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83667 invoked from network); 2 Jun 2009 16:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 16:23:47 -0000
Received: (qmail 86226 invoked by uid 500); 2 Jun 2009 16:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86155 invoked by uid 500); 2 Jun 2009 16:23:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85987 invoked by uid 99); 2 Jun 2009 16:23:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 16:23:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tarandeep@gmail.com designates 209.85.221.107 as permitted sender)
Received: from [209.85.221.107] (HELO mail-qy0-f107.google.com) (209.85.221.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 16:23:46 +0000
Received: by qyk5 with SMTP id 5so191887qyk.29
        for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 09:23:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:cc:content-type;
        bh=cabwzUT3clKGdgb9sFdgYNqos2LUb7xlUcQZTpWUpS4=;
        b=pffSnU0TwMRx8UGtOQe90J3+3gTgCL/0WFi0XbOyFQwHBvYPYkZ5ru6KyAJR0zmmPR
         lpOXTOsYSXwgMcqyo72R5rJkQxskf3gHmftmJ6+ZSrduc3FL6OoE4IPY7aUuNsubvQDm
         3YScPKTi3/UCt5sqXQe/91ovM6hg50QrSzh30=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=HddIzMrz1QjbNgeVrQFgosDRn516ixFDmlidkwBS+Ur+9t2qo48HH6tkkVypr4r7dC
         jpuF+nrZFeNnOe6AhJUVoA2CbOTSTKOgs1Hvsl/aNhwvTM/Ejlb2jhsy5NhFwN4QMnR4
         t9wR0KPbHfTUrsEE+y6Xlfj1iEm8BGS8axjUY=
MIME-Version: 1.0
Received: by 10.229.82.83 with SMTP id a19mr2043481qcl.42.1243959805170; Tue, 
	02 Jun 2009 09:23:25 -0700 (PDT)
In-Reply-To: <79F182E5-0F76-466F-9BE8-43AE3BEA1413@101tec.com>
References: <e75c02ef0906010954w70dd7244jd8b2bf523a0d615e@mail.gmail.com> 
	<79F182E5-0F76-466F-9BE8-43AE3BEA1413@101tec.com>
From: Tarandeep Singh <tarandeep@gmail.com>
Date: Tue, 2 Jun 2009 09:23:05 -0700
Message-ID: <e75c02ef0906020923m102610c4k75bd8e382d4a8553@mail.gmail.com>
Subject: Re: Distributed Lucene Questions
To: core-user@hadoop.apache.org
Cc: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646d5c44d563f046b5ff61d
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646d5c44d563f046b5ff61d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

thanks all for your replies. I am checking Katta...

-Tarandeep

On Tue, Jun 2, 2009 at 8:05 AM, Stefan Groschupf <sg@101tec.com> wrote:

> Hi,
> you might want to checkout:
> http://katta.sourceforge.net/
>
> Stefan
>
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Hadoop training and consulting
> http://www.scaleunlimited.com
> http://www.101tec.com
>
>
>
>
> On Jun 1, 2009, at 9:54 AM, Tarandeep Singh wrote:
>
>  Hi All,
>>
>> I am trying to build a distributed system to build and serve lucene
>> indexes.
>> I came across the Distributed Lucene project-
>> http://wiki.apache.org/hadoop/DistributedLucene
>> https://issues.apache.org/jira/browse/HADOOP-3394
>>
>> and have a couple of questions. It will be really helpful if someone can
>> provide some insights.
>>
>> 1) Is this code production ready?
>> 2) Does someone has performance data for this project?
>> 3) It allows searches and updates/deletes to be performed at the same
>> time.
>> How well the system will perform if there are frequent updates to the
>> system. Will it handle the search and update load easily or will it be
>> better to rebuild or update the indexes on different machines and then
>> deploy the indexes back to the machines that are serving the indexes?
>>
>> Basically I am trying to choose between the 2 approaches-
>>
>> 1) Use Hadoop to build and/or update Lucene indexes and then deploy them
>> on
>> separate cluster that will take care or load balancing, fault tolerance
>> etc.
>> There is a package in Hadoop contrib that does this, so I can use that
>> code.
>>
>> 2) Use and/or modify the Distributed Lucene code.
>>
>> I am expecting daily updates to our index so I am not sure if Distribtued
>> Lucene code (which allows searches and updates on the same indexes) will
>> be
>> able to handle search and update load efficiently.
>>
>> Any suggestions ?
>>
>> Thanks,
>> Tarandeep
>>
>
>

--00163646d5c44d563f046b5ff61d--

From java-user-return-40581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 16:35:37 2009
Return-Path: <java-user-return-40581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86287 invoked from network); 2 Jun 2009 16:35:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 16:35:37 -0000
Received: (qmail 1487 invoked by uid 500); 2 Jun 2009 16:35:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1448 invoked by uid 500); 2 Jun 2009 16:35:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1438 invoked by uid 99); 2 Jun 2009 16:35:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 16:35:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 16:35:37 +0000
X-ASG-Debug-ID: 1243960515-7f2a00620000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 9736A6811F
	for <java-user@lucene.apache.org>; Tue,  2 Jun 2009 09:35:15 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id xDY18sxpKI25UYTL for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 09:35:15 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
Subject: RE: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
Date: Tue, 2 Jun 2009 09:35:15 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAA9@rw-ex2003.BROADVISION.COM>
In-Reply-To: <4A24BB01.4090900@r.email.ne.jp>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
Thread-Index: AcnjRIlwlgrKJZksRMSEF+OkfABPGAAW0bdA
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1243960515
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks very much, this could be the same issue, but somehow
I could not open the *.patch file, maybe that's sth trivial,
is there a *.patch file related tools? I really appreciate
a simple pointer.

Best regards, Lisheng



-----Original Message-----
From: Koji Sekiguchi [mailto:koji@r.email.ne.jp]
Sent: Monday, June 01, 2009 10:39 PM
To: java-user@lucene.apache.org
Subject: Re: Possible bug in QueryParser when using CJKAnalyzer (lucene
2.4.1)


I'm not sure this is the same case, but there is a report and patch for=20
CJKTokenizer in JARA:

https://issues.apache.org/jira/browse/LUCENE-973

Koji


Zhang, Lisheng wrote:
> Hi,
>
> When I use lucene 2.4.1 QueryParser with CJKAnalyzer, somehow
> it always generates an extra space, for example, if the input is =
"ABC",
> the query would be:
>
> myfield"AB BC "  // should be myfield:"AB BC"
>
> If I create PhraseQuery directly it does work. From Luke I know =
indexing
> works OK. In lucene 1.4.3 we donot have this issue. I diffed =
CJKAnalyzer
> code and it seems to be the same, so I guess it could be a QueryParser
> bug?
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 16:42:05 2009
Return-Path: <java-user-return-40582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88561 invoked from network); 2 Jun 2009 16:42:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 16:42:05 -0000
Received: (qmail 21191 invoked by uid 500); 2 Jun 2009 16:42:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21139 invoked by uid 500); 2 Jun 2009 16:42:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21129 invoked by uid 99); 2 Jun 2009 16:42:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 16:42:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Jun 2009 16:42:05 +0000
Received: (qmail 85947 invoked by uid 60001); 2 Jun 2009 16:41:43 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1243960903; bh=PcOZoFA+e49EjgJcncFIqZ6J6bTEMNTjpnT21x/BBHc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=zPYeIqwVN03/QOESakPa1KpPdJ/zYNBttVP5tp/iO02u0IUs2vI1A4imFWslVTkyQjoD464kVPFSfO9OcER3InRnQehJnxDSCt7bfaMrPVKZTZwqlEQnzO2HR/e/2Aj4nlRQEqrNpkM/hE30bVN7NwN2cSeZj4tZWgbci6K/ebk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=LAKOKT9RlwCjWxjmVOsWpcpaUvic6l+DN220D2unRj/upDK7GeApijFiM3sPPziP5yHQugPOz8K2IhNvzhztRtYc7ijmrRe3xWATaj9YUlJ13hPkuR4vTr6ZgmDnqzeHqH/5glbr+T7OGEHBMxG8PjMJjMR4WpED7iHR9fw+row=;
Message-ID: <894525.85797.qm@web50302.mail.re2.yahoo.com>
X-YMail-OSG: vDAOEYcVM1mBNJG.Ivn0a70YZ5WwP24G0hk0CxnsMOnjbvhIpp1CvA0pznAalwhUGlB5nWwba66pjJZrABCL16mumOjUDCDVCL1iAf.YF6w26QSZu6Qm7EuWORCfp_5413FZ5fXuvIHd6lOCLXgnJSKYc3pbQWk2D03o.xmhUOvErNbFV7SmMcAv.V.UHZJ.e_n9Zvz2_rDoh4tQ_B4QjLmJ93jkfHzpAZijVtbMCTDqo9lhjxzZex2iaeycfNoBw97uR0EPrNKeF2RxD2gQz2P_ADy8zhEW4Fo18Ru2hm53eaMEaKaNfUJU1sc03gihUupcmT24IDud452fyDsg.dloZnARmnbBkIwYUra9.4PF
Received: from [167.206.188.3] by web50302.mail.re2.yahoo.com via HTTP; Tue, 02 Jun 2009 09:41:43 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.10
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAA9@rw-ex2003.BROADVISION.COM>
Date: Tue, 2 Jun 2009 09:41:43 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
To: java-user@lucene.apache.org
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAA9@rw-ex2003.BROADVISION.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Lisheng,

A patch file is just a text file, so you will be able to open it with any text editor.
But you'll need to apply it from the command line or from an IDE - http://www.google.com/search?hl=en&q=how+to+apply+a+patch

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, June 2, 2009 12:35:15 PM
> Subject: RE: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
> 
> Thanks very much, this could be the same issue, but somehow
> I could not open the *.patch file, maybe that's sth trivial,
> is there a *.patch file related tools? I really appreciate
> a simple pointer.
> 
> Best regards, Lisheng
> 
> 
> 
> -----Original Message-----
> From: Koji Sekiguchi [mailto:koji@r.email.ne.jp]
> Sent: Monday, June 01, 2009 10:39 PM
> To: java-user@lucene.apache.org
> Subject: Re: Possible bug in QueryParser when using CJKAnalyzer (lucene
> 2.4.1)
> 
> 
> I'm not sure this is the same case, but there is a report and patch for 
> CJKTokenizer in JARA:
> 
> https://issues.apache.org/jira/browse/LUCENE-973
> 
> Koji
> 
> 
> Zhang, Lisheng wrote:
> > Hi,
> >
> > When I use lucene 2.4.1 QueryParser with CJKAnalyzer, somehow
> > it always generates an extra space, for example, if the input is "ABC",
> > the query would be:
> >
> > myfield"AB BC "  // should be myfield:"AB BC"
> >
> > If I create PhraseQuery directly it does work. From Luke I know indexing
> > works OK. In lucene 1.4.3 we donot have this issue. I diffed CJKAnalyzer
> > code and it seems to be the same, so I guess it could be a QueryParser
> > bug?
> >
> > Thanks very much for helps, Lisheng
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >  
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 17:14:21 2009
Return-Path: <java-user-return-40583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98855 invoked from network); 2 Jun 2009 17:14:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 17:14:21 -0000
Received: (qmail 93559 invoked by uid 500); 2 Jun 2009 17:14:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93492 invoked by uid 500); 2 Jun 2009 17:14:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93482 invoked by uid 99); 2 Jun 2009 17:14:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 17:14:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 17:14:22 +0000
X-ASG-Debug-ID: 1243962835-030200970000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 5E266154D6
	for <java-user@lucene.apache.org>; Tue,  2 Jun 2009 10:13:55 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id Oyz09E24jw4wxKzd for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 10:13:55 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
Subject: RE: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
Date: Tue, 2 Jun 2009 10:13:55 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAAA@rw-ex2003.BROADVISION.COM>
In-Reply-To: <894525.85797.qm@web50302.mail.re2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Possible bug in QueryParser when using CJKAnalyzer (lucene 2.4.1)
Thread-Index: AcnjoRc9Fngmp/GmQuuh+U/OMH0UbwABE7+g
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1243962835
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks very much!!!

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, June 02, 2009 9:42 AM
To: java-user@lucene.apache.org
Subject: Re: Possible bug in QueryParser when using CJKAnalyzer (lucene
2.4.1)



Lisheng,

A patch file is just a text file, so you will be able to open it with =
any text editor.
But you'll need to apply it from the command line or from an IDE - =
http://www.google.com/search?hl=3Den&q=3Dhow+to+apply+a+patch

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, June 2, 2009 12:35:15 PM
> Subject: RE: Possible bug in QueryParser when using CJKAnalyzer =
(lucene 2.4.1)
>=20
> Thanks very much, this could be the same issue, but somehow
> I could not open the *.patch file, maybe that's sth trivial,
> is there a *.patch file related tools? I really appreciate
> a simple pointer.
>=20
> Best regards, Lisheng
>=20
>=20
>=20
> -----Original Message-----
> From: Koji Sekiguchi [mailto:koji@r.email.ne.jp]
> Sent: Monday, June 01, 2009 10:39 PM
> To: java-user@lucene.apache.org
> Subject: Re: Possible bug in QueryParser when using CJKAnalyzer =
(lucene
> 2.4.1)
>=20
>=20
> I'm not sure this is the same case, but there is a report and patch =
for=20
> CJKTokenizer in JARA:
>=20
> https://issues.apache.org/jira/browse/LUCENE-973
>=20
> Koji
>=20
>=20
> Zhang, Lisheng wrote:
> > Hi,
> >
> > When I use lucene 2.4.1 QueryParser with CJKAnalyzer, somehow
> > it always generates an extra space, for example, if the input is =
"ABC",
> > the query would be:
> >
> > myfield"AB BC "  // should be myfield:"AB BC"
> >
> > If I create PhraseQuery directly it does work. From Luke I know =
indexing
> > works OK. In lucene 1.4.3 we donot have this issue. I diffed =
CJKAnalyzer
> > code and it seems to be the same, so I guess it could be a =
QueryParser
> > bug?
> >
> > Thanks very much for helps, Lisheng
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 17:53:13 2009
Return-Path: <java-user-return-40584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22371 invoked from network); 2 Jun 2009 17:53:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 17:53:13 -0000
Received: (qmail 60140 invoked by uid 500); 2 Jun 2009 17:53:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60098 invoked by uid 500); 2 Jun 2009 17:53:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60088 invoked by uid 99); 2 Jun 2009 17:53:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 17:53:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of digydigy@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 17:53:13 +0000
Received: by bwz27 with SMTP id 27so8940439bwz.5
        for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 10:52:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:content-language;
        bh=Qb/obHslFgEh8wPI10kPPqSl3tP/9klelR4QpOLZJfo=;
        b=HYBxmCEHPY+Wi+/1lIlA/lHH6peb/RA0IBbH6C79ss7C5PU/yTomU4gj2fGU8FWc+h
         aq82UwjbEVNgIoIfB079Il3hKo85fKSpR8xufKoZ/PDORVwL6S8tzJUUd6bhWJPu16e8
         x+UO5hJabu1sqpaYCn6KMMg3ZnWSWLrHTSJSE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=YVedbw/KloKvqXQoXjvrUDoUHR/xvjbYR3wFfMx0KHncScrh5M7gT9r5Lw5hHNNi20
         dHXRRMXBU78hNdKrU8DZY53/4YYpv5YnU4x57ueIrm5n6c1izppTwWY8EPZGpzCwS0md
         cVtL55mRFC+iWWzld9Y1GdzlFMaVLn6XcS7Mc=
Received: by 10.204.57.67 with SMTP id b3mr7079140bkh.99.1243965171517;
        Tue, 02 Jun 2009 10:52:51 -0700 (PDT)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 21sm966936fks.9.2009.06.02.10.52.49
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 02 Jun 2009 10:52:50 -0700 (PDT)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <23826263.post@talk.nabble.com> <280099.25432.qm@web38802.mail.mud.yahoo.com>
In-Reply-To: <280099.25432.qm@web38802.mail.mud.yahoo.com>
Subject: RE: Searching documents that contain a field (text of field is irrelevant)
Date: Tue, 2 Jun 2009 20:52:35 +0300
Message-ID: <003901c9e3aa$ea31af80$be950e80$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-9"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcnjPdv7tesfT66mTrOA68/gQc7xagAbMx9Q
Content-Language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

Or=20
searcher.search( new PrefixQuery(  new Term("desc","") ) );

DIGY

-----Original Message-----
From: balasubramanian sudaakeran [mailto:sudaakeran_b@yahoo.com]=20
Sent: Tuesday, June 02, 2009 7:51 AM
To: java-user@lucene.apache.org
Subject: Re: Searching documents that contain a field (text of field is
irrelevant)


Couple of approaches. (But not very sure if there are other better
approaches)
1. Add a seperate field which is set to 1 or 0 depending upon if the =
self
description is present or not. Then you can search by this new field.
2. Along with each self-descrition add a common idenfier word. Then you =
can
search by this idenfier word.



----- Original Message ----
From: mattspitz <mspitz@stanford.edu>
To: java-user@lucene.apache.org
Sent: Tuesday, June 2, 2009 9:50:51 AM
Subject: Searching documents that contain a field (text of field is
irrelevant)


Hey!

Consider a bunch of documents that represent, say, students.=A0 These =
students
have the following attributes:
1) Student IDs
2) Name
3) Self-description (optional)

So, all documents have id: and name:, but only some of the documents =
have an
added desc:

Assuming all of the fields are indexed, I can certainly search within =
any of
the fields.=A0 That is: "+name:John desc:muffins" searches for students =
named
John who mentioned "muffins" in their description.

What I want is all documents that contain the self-description field,
regardless of what that field contains.=A0=20

I can probably do this: "desc:*", but I'm not sure how efficient that'd =
be,
and I wonder if there's a better way to do it.

Thank you!
-Matt
--=20
View this message in context:
http://www.nabble.com/Searching-documents-that-contain-a-field-%28text-of=
-fi
eld-is-irrelevant%29-tp23826263p23826263.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


     =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 02 19:48:46 2009
Return-Path: <java-user-return-40585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80104 invoked from network); 2 Jun 2009 19:48:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jun 2009 19:48:46 -0000
Received: (qmail 21648 invoked by uid 500); 2 Jun 2009 19:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21584 invoked by uid 500); 2 Jun 2009 19:48:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21574 invoked by uid 99); 2 Jun 2009 19:48:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 19:48:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jun 2009 19:48:47 +0000
Received: by gxk11 with SMTP id 11so14290953gxk.5
        for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 12:48:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.132.10 with SMTP id j10mr297663ybn.139.1243972099397; Tue, 
	02 Jun 2009 12:48:19 -0700 (PDT)
In-Reply-To: <180939A51C17274FB68581AE17C5E0E708A8C5@bertha.Volley.local>
References: <180939A51C17274FB68581AE17C5E0E708A8C5@bertha.Volley.local>
Date: Tue, 2 Jun 2009 15:48:19 -0400
Message-ID: <9ac0c6aa0906021248v2f4d50a3t3af2274d404068b8@mail.gmail.com>
Subject: Re: Lucene on NFS/iSCSI
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I don't have any specific experience with iSCSI, so what follows is
speculation...

I think iSCSI, which just routes SCSI commands over TCP/IP to some
remote storage device, is at a much lower level than NFS.  IE, to the
computer this remote device acts like a local device, and therefore
you can install any normal local filesystem on it.

So I'd expect that none of the caveats with NFS apply to iSCSI,
assuming you treat it like a local drive.

If you get interesting performance numbers from using Lucene over
iSCSI, please post back!

Mike

On Mon, Jun 1, 2009 at 1:16 PM, Jordon Saardchit <jsaardchit@go2.com> wrote=
:
>
> So I've read a lot about nightmares with lucene over shared indices using=
 NFS, and was curious if anyone had any experience running Lucene over iSCS=
I? =A0Specifically if the same sort of lock failure issues occur as does wi=
th NFS. =A0I'm specifically looking into multple machines mounted to a SAN =
via iSCSI with accelerated hardware initiator.
>
> Looking to just get a general idea before investing in the possible solut=
ion.
>
> Thanks,
> Jordon
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 03 00:58:05 2009
Return-Path: <java-user-return-40586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80569 invoked from network); 3 Jun 2009 00:58:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jun 2009 00:58:05 -0000
Received: (qmail 15288 invoked by uid 500); 3 Jun 2009 00:58:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15201 invoked by uid 500); 3 Jun 2009 00:58:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15191 invoked by uid 99); 3 Jun 2009 00:58:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 00:58:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 00:58:05 +0000
Received: by qw-out-2122.google.com with SMTP id 5so5728264qwd.53
        for <java-user@lucene.apache.org>; Tue, 02 Jun 2009 17:57:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=UIOK547zTaojpvMxpJqj9K2JKfQIWtneWPTyTsL9RJU=;
        b=GC9mlceD/7JeNxZxh3t5ieoC7pxySuA/Cs2/CaULt4tNp8JAmHQQiISHFXFW7oDurX
         ePvKfFbYoxhkuSzJ+Gk2KQERsuLWe7F2ITbtUui8soK6GFqfiW8LAqTZmfWiqvlnXjap
         HOH4Zjv+vUnSbC++ZaEqYWiobOlenoSytomu4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=k0SLjI867yT1v5F5WIDRZ3NpsqKP6dIdaYD9XHv8HRG1QvwsQchiE6akFKNAve58pa
         KxN95M1FxengqkRaaGEKXhg+CU8aScaOUcPJe7OZFw5N2vtbnJhIMG8s/mntUFTEUAX7
         kEQ0Noo/zF8nj4IDvnREgX5UNuHnNBFKQ7W5I=
MIME-Version: 1.0
Received: by 10.224.37.74 with SMTP id w10mr418712qad.14.1243990664207; Tue, 
	02 Jun 2009 17:57:44 -0700 (PDT)
In-Reply-To: <9ac0c6aa0905211439t15e99412v30e8daf2f4f644fb@mail.gmail.com>
References: <3836ec640904281849s271e7ad0k380d6978c9117a76@mail.gmail.com>
	 <9ac0c6aa0904290227k4cb08938ic55503688ac02bd8@mail.gmail.com>
	 <3836ec640904292115v4a49f532ofe54a3c221f42100@mail.gmail.com>
	 <9ac0c6aa0904300316t1eb4ab0fma543adac285ecafa@mail.gmail.com>
	 <3836ec640905211209j769436d1j31250d7ecc44ab3c@mail.gmail.com>
	 <9ac0c6aa0905211439t15e99412v30e8daf2f4f644fb@mail.gmail.com>
Date: Tue, 2 Jun 2009 19:57:44 -0500
Message-ID: <3836ec640906021757r2fab24aarfe3cf55b1cc0036c@mail.gmail.com>
Subject: Re: Phrase Highlighting
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175ca9e2a4de76046b672568
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175ca9e2a4de76046b672568
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

> Well what happens is if I use a SpanScorer instead, and allocate it like

> > such:
> >
> >            analyzer = StandardAnalyzer([])
> >            tokenStream = analyzer.tokenStream("contents",
> > lucene.StringReader(text))
> >            ctokenStream = lucene.CachingTokenFilter(tokenStream)
> >            highlighter = lucene.Highlighter(formatter,
> > lucene.HighlighterSpanScorer(self.query, "contents", ctokenStream))
> >            ctokenStream.reset()
> >
> >            result = highlighter.getBestFragments(ctokenStream, text,
> >                    2, "...")
> >
> >  My highlighter is still breaking up words inside of a span.  For
> example,
> > if I search for \"John Smith\", instead of the highlighter being called
> for
> > the whole "John Smith", it gets called for "John" and then "Smith".
>
> I think you need to use SimpleSpanFragmenter (vs SimpleFragmenter,
> which is the default used by Highlighter) to ensure that each fragment
> contains a full match for the query.  EG something like this (copied
> from LIA 2nd edition):
>
>    TermQuery query = new TermQuery(new Term("field", "fox"));
>
>    TokenStream tokenStream =
>        new SimpleAnalyzer().tokenStream("field",
>            new StringReader(text));
>
>    SpanScorer scorer = new SpanScorer(query, "field",
>                                       new CachingTokenFilter(tokenStream));
>    Fragmenter fragmenter = new SimpleSpanFragmenter(scorer);
>    Highlighter highlighter = new Highlighter(scorer);
>    highlighter.setTextFragmenter(fragmenter);



Okay, I hacked something up in Java that illustrates my issue.


import org.apache.lucene.search.*;
import org.apache.lucene.analysis.*;
import org.apache.lucene.document.*;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.Term;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.search.highlight.*;
import org.apache.lucene.search.spans.SpanTermQuery;
import java.io.Reader;
import java.io.StringReader;

public class PhraseTest {
    private IndexSearcher searcher;
    private RAMDirectory directory;

    public PhraseTest() throws Exception {
        directory = new RAMDirectory();

        Analyzer analyzer = new Analyzer() {
            public TokenStream tokenStream(String fieldName, Reader reader)
{
                return new WhitespaceTokenizer(reader);
            }

            public int getPositionIncrementGap(String fieldName) {
                return 100;
            }
        };

        IndexWriter writer = new IndexWriter(directory, analyzer, true,
                IndexWriter.MaxFieldLength.LIMITED);

        Document doc = new Document();
        String text = "Jimbo John is his name";
        doc.add(new Field("contents", text, Field.Store.YES,
Field.Index.ANALYZED));
        writer.addDocument(doc);

        writer.optimize();
        writer.close();

        searcher = new IndexSearcher(directory);

        // Try a phrase query
        PhraseQuery phraseQuery = new PhraseQuery();
        phraseQuery.add(new Term("contents", "Jimbo"));
        phraseQuery.add(new Term("contents", "John"));

        // Try a SpanTermQuery
        SpanTermQuery spanTermQuery = new SpanTermQuery(new Term("contents",
"Jimbo John"));

        // Try a parsed query
        Query parsedQuery = new QueryParser("contents",
analyzer).parse("\"Jimbo John\"");

        Hits hits = searcher.search(parsedQuery);
        System.out.println("We found " + hits.length() + " hits.");

        // Highlight the results
        CachingTokenFilter tokenStream = new
CachingTokenFilter(analyzer.tokenStream( "contents", new
StringReader(text)));

        SimpleHTMLFormatter formatter = new SimpleHTMLFormatter();

        SpanScorer sc = new SpanScorer(parsedQuery, "contents", tokenStream,
"contents");

        Highlighter highlighter = new Highlighter(formatter, sc);
        highlighter.setTextFragmenter(new SimpleSpanFragmenter(sc));
        tokenStream.reset();

        String rv = highlighter.getBestFragments(tokenStream, text, 1,
"...");
        System.out.println(rv);

    }
    public static void main(String[] args) {
        System.out.println("Starting...");
        try {
            PhraseTest pt = new PhraseTest();
        } catch(Exception ex) {
            ex.printStackTrace();
        }
    }
}



The output I'm getting is instead of highlighting <B>Jimbo John</B> it does
<B>Jimbo</B> then <B>John</B>.  Can I get around this some how?  I tried
several different query types (they are declared in the code, but only the
parsed version is being used).

Thanks
-max

--0015175ca9e2a4de76046b672568--

From java-user-return-40587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 03 06:26:16 2009
Return-Path: <java-user-return-40587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96722 invoked from network); 3 Jun 2009 06:26:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jun 2009 06:26:16 -0000
Received: (qmail 50847 invoked by uid 500); 3 Jun 2009 06:26:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50774 invoked by uid 500); 3 Jun 2009 06:26:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50764 invoked by uid 99); 3 Jun 2009 06:26:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 06:26:25 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.176.42] (HELO web26505.mail.ukl.yahoo.com) (217.146.176.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Jun 2009 06:26:14 +0000
Received: (qmail 46946 invoked by uid 60001); 3 Jun 2009 06:25:51 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.fr; s=s1024; t=1244010351; bh=VIcOqNYuN9kZ8wSmD8ITsNDU6CdWM87WAs0fBgMxtfY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=c1psCFAmorOvd62I0T7RzVFMTYNk11poDJJIajiXUqCFYxZxSURzK94wBTmWEr3UKPxycIyl7eEaSQYQ6/QeHrZ9XQbyprT91ca3sK4Eub9DnxWlnq7eb40MMUKIWOoeG+1wVlFVJXKJ33648M1bGjNpQX45GLkakMh2bzR7NR8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=HsOsRec76IZ5J30PKd8gvRW0K31afFlSI17KVZjwh/AcPD5GvQpq6njKdzI/7YE/HP67E3BYAgRHgGgAnhkft7SBNqkZymODeGoGoBsxyQ4uvzykV/fIbfn7dBzCE/N6n/gZSDAEDQx1h2cnicWN2BACph3sgwOHYi1kaSKzS5E=;
Message-ID: <817485.44420.qm@web26505.mail.ukl.yahoo.com>
X-YMail-OSG: pt7RhnIVM1kE16LHMJbsnup7F_Dl2r6LKZDt9s96RMs0RoZjjaUhqorbi.V5ZcMuywq1jAEEHc.N76ox.PH4qIbwCU.daQAsFfznTqJ0B.j96wru0i3pzL0CUtP0SizAd0X_HAV2ISn8ozQAv_XsEjm5hwqN5zcq8VvoEfqRe3mV18wEOZMpFBeeaEwHwyGGtvOhVeyIQukYwYJSzZ05a8IRzr27g4W.CyIJiPb_kumGt45TPqnndWTLl.OR248Sav2AJuBWwh87Wv65rkvbOO7WARTCDGk5YsABf1g.UNC0gHRtQQ_.EcfzjdHzjaZ21SQk5rZn3vxA0rLoS1HNs5F4
Received: from [193.49.212.127] by web26505.mail.ukl.yahoo.com via HTTP; Wed, 03 Jun 2009 06:25:51 GMT
X-Mailer: YahooMailClassic/5.3.9 YahooMailWebService/0.7.289.10
Date: Wed, 3 Jun 2009 06:25:51 +0000 (GMT)
From: legrand thomas <thomaslegrand14@yahoo.fr>
Subject: Re: Index and search terms containing character "-"
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1268506338-1244010351=:44420"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1268506338-1244010351=:44420
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

A KeywordAnalyzer solved my problem.=20
Luke allowed me to understand the queries and the content of the index.

Thanks=A0 (Erick & Balasubramanian Sudaakeran)
Tom

--- En date de : Dim 31.5.09, Erick Erickson <erickerickson@gmail.com> a =
=E9crit :

De: Erick Erickson <erickerickson@gmail.com>
Objet: Re: Index and search terms containing character "-"
=C0: java-user@lucene.apache.org
Date: Dimanche 31 Mai 2009, 15h33

Simple analyzer does two things: splits tokens on non-letter characters and
lowercases them.

So, in your test you've indexed the tokens "jack" and "bauer" in your secon=
d
document, the hyphen is completely lost during tokenization and you have
two tokens for that document.

Using the term query "jack-bauer" is looking for a *single* token that is
exactly "jack-bauer", which is nowhere in your index. Term queries assume
that you know exactly what result you want, they don't try to transform the
input at all. Had you run "jack-bauer" through the query parser with
SimpleAnalyzer, you'd be searching for a document with the two terms
"jack" and "bauer", and you'd have hit your second document but not your
first.

I'd strongly recommend you get a copy of Luke, it's invaluable for question=
s
like this
because it lets you look at what's actually in your index. It'll also show
you how
queries get broken down when pushed through various analyzers...

BTW, nice test case for demonstrating what you were seeing, it makes
answering
*vastly* easier.....

HTH
Erick

On Sun, May 31, 2009 at 5:55 AM, legrand thomas <thomaslegrand14@yahoo.fr>w=
rote:

> Hi,
>
> I have a problem using TermQuery and FuzzyQuery for terms containing the
> character "-". Considering I've indexed "jack" and "jack-bauer" as 2
> tokenized captions, I get no result when searching for "jack-bauer".
> Moreover, "jack" with a TermQuery returns the two captions.
>
> What should I do to get "jack-bauer" with new TermQuery("jack-bauer") ?
>
> A full test case is given below.
>
> Thanks,
> Tom
>
>
> import junit.framework.Assert;
>
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.SimpleAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.store.FSDirectory;
> import org.junit.Test;
>
> public class IDebugIndexTest {
>
>=A0 =A0=A0=A0@Test
>=A0 =A0=A0=A0public void TermQueryTest() {
>
>=A0 =A0 =A0 =A0=A0=A0Analyzer analyser =3D new SimpleAnalyzer();
>
>=A0 =A0 =A0 =A0=A0=A0try {
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0// write docs to new index
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0IndexWriter writer =3D new IndexWriter(FSDire=
ctory
>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=A0=A0.getDirectory("/tmp/idx_test"=
), analyser, true);
>
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0Document jack =3D new Document();
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0jack.add(new Field("caption", "jack", Field.S=
tore.YES,
>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=A0=A0Field.Index.TOKENIZED));
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0writer.addDocument(jack);
>
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0Document jackBauer =3D new Document();
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0jackBauer.add(new Field("caption", "jack-baue=
r",
> Field.Store.YES,
>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=A0=A0Field.Index.TOKENIZED));
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0writer.addDocument(jackBauer);
>
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0writer.close();
>
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0// try to search
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0IndexSearcher s =3D new
> IndexSearcher(IndexReader.open(FSDirectory
>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=A0=A0.getDirectory("/tmp/idx_test"=
)));
>
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0// The next assertion is ok
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0Hits jackHits =3D s
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0.search(new TermQuery(new Term("caption", "ja=
ck")));
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0Assert.assertEquals(jackHits.length(), 2);
>
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0// The next assertion fails !!!
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0Hits jackBauerHits =3D s.search(new TermQuery=
(new Term("caption",
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0"jack-bauer")));
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0Assert.assertEquals(jackBauerHits.length(), 1=
);
>
>=A0 =A0 =A0 =A0=A0=A0} catch (Exception e) {
>=A0 =A0 =A0 =A0 =A0 =A0=A0=A0Assert.fail();
>=A0 =A0 =A0 =A0=A0=A0}
>
>=A0 =A0=A0=A0}
> }
>
>
>
>
>
>
=0A=0A=0A      
--0-1268506338-1244010351=:44420--

From java-user-return-40588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 03 13:04:58 2009
Return-Path: <java-user-return-40588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40499 invoked from network); 3 Jun 2009 13:04:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jun 2009 13:04:58 -0000
Received: (qmail 89575 invoked by uid 500); 3 Jun 2009 13:05:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89538 invoked by uid 500); 3 Jun 2009 13:05:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89528 invoked by uid 99); 3 Jun 2009 13:05:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 13:05:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 13:04:58 +0000
Received: by rv-out-0506.google.com with SMTP id l9so3046097rvb.5
        for <java-user@lucene.apache.org>; Wed, 03 Jun 2009 06:04:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=HwHLQePj6Oha4KXIJPvynQ+7I5ZtX6DuzUzg7B5tXq4=;
        b=E6ip+hGToDL6C0psfByNMT3KqnMTzn7l74L/z7vS/SkSiyf6aWMT6sLaJsCC+xpo7s
         pEGKSsV2tJNGC8oZKbH+XFOruJJu+bIxzwlqaIip+AkrEd3wrHGgGQgTO2179Ypa5ZHB
         gaiNSetx9yOGobOVGrUfj3TmSIg0G94QwM+xo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ad2DA4um5yq4S2r9USrB5ErslryCqPErmLb6upMQizG27JWZjE4jm8sbcYX04bbZvl
         tv+v2iG/c18XKZUboUIuTWKJanyUSG2nc1wV7spMju2VeO3aMAQagkU3d/Z86DjaOuQL
         ucEBZmHuglaUPqVXaHFv9OTzgGDvqFcc3qef4=
MIME-Version: 1.0
Received: by 10.220.71.10 with SMTP id f10mr594639vcj.13.1244034276529; Wed, 
	03 Jun 2009 06:04:36 -0700 (PDT)
In-Reply-To: <817485.44420.qm@web26505.mail.ukl.yahoo.com>
References: <817485.44420.qm@web26505.mail.ukl.yahoo.com>
Date: Wed, 3 Jun 2009 09:04:36 -0400
Message-ID: <359a92830906030604g1aa15c55oe983cbfa1372f897@mail.gmail.com>
Subject: Re: Index and search terms containing character "-"
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64f466c241532046b714d23
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64f466c241532046b714d23
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Just be aware that KeywordAnalyzer won't tokenize at all. That is,if you
expect to index "jack-bauer" and hit on "jack" or "bauer" it won't.

Best
Erick

On Wed, Jun 3, 2009 at 2:25 AM, legrand thomas <thomaslegrand14@yahoo.fr>wr=
ote:

> Hi,
>
> A KeywordAnalyzer solved my problem.
> Luke allowed me to understand the queries and the content of the index.
>
> Thanks  (Erick & Balasubramanian Sudaakeran)
> Tom
>
> --- En date de : Dim 31.5.09, Erick Erickson <erickerickson@gmail.com> a
> =E9crit :
>
> De: Erick Erickson <erickerickson@gmail.com>
> Objet: Re: Index and search terms containing character "-"
> =C0: java-user@lucene.apache.org
> Date: Dimanche 31 Mai 2009, 15h33
>
> Simple analyzer does two things: splits tokens on non-letter characters a=
nd
> lowercases them.
>
> So, in your test you've indexed the tokens "jack" and "bauer" in your
> second
> document, the hyphen is completely lost during tokenization and you have
> two tokens for that document.
>
> Using the term query "jack-bauer" is looking for a *single* token that is
> exactly "jack-bauer", which is nowhere in your index. Term queries assume
> that you know exactly what result you want, they don't try to transform t=
he
> input at all. Had you run "jack-bauer" through the query parser with
> SimpleAnalyzer, you'd be searching for a document with the two terms
> "jack" and "bauer", and you'd have hit your second document but not your
> first.
>
> I'd strongly recommend you get a copy of Luke, it's invaluable for
> questions
> like this
> because it lets you look at what's actually in your index. It'll also sho=
w
> you how
> queries get broken down when pushed through various analyzers...
>
> BTW, nice test case for demonstrating what you were seeing, it makes
> answering
> *vastly* easier.....
>
> HTH
> Erick
>
> On Sun, May 31, 2009 at 5:55 AM, legrand thomas <thomaslegrand14@yahoo.fr
> >wrote:
>
> > Hi,
> >
> > I have a problem using TermQuery and FuzzyQuery for terms containing th=
e
> > character "-". Considering I've indexed "jack" and "jack-bauer" as 2
> > tokenized captions, I get no result when searching for "jack-bauer".
> > Moreover, "jack" with a TermQuery returns the two captions.
> >
> > What should I do to get "jack-bauer" with new TermQuery("jack-bauer") ?
> >
> > A full test case is given below.
> >
> > Thanks,
> > Tom
> >
> >
> > import junit.framework.Assert;
> >
> > import org.apache.lucene.analysis.Analyzer;
> > import org.apache.lucene.analysis.SimpleAnalyzer;
> > import org.apache.lucene.document.Document;
> > import org.apache.lucene.document.Field;
> > import org.apache.lucene.index.IndexReader;
> > import org.apache.lucene.index.IndexWriter;
> > import org.apache.lucene.index.Term;
> > import org.apache.lucene.search.Hits;
> > import org.apache.lucene.search.IndexSearcher;
> > import org.apache.lucene.search.TermQuery;
> > import org.apache.lucene.store.FSDirectory;
> > import org.junit.Test;
> >
> > public class IDebugIndexTest {
> >
> >     @Test
> >     public void TermQueryTest() {
> >
> >         Analyzer analyser =3D new SimpleAnalyzer();
> >
> >         try {
> >             // write docs to new index
> >             IndexWriter writer =3D new IndexWriter(FSDirectory
> >                     .getDirectory("/tmp/idx_test"), analyser, true);
> >
> >             Document jack =3D new Document();
> >             jack.add(new Field("caption", "jack", Field.Store.YES,
> >                     Field.Index.TOKENIZED));
> >             writer.addDocument(jack);
> >
> >             Document jackBauer =3D new Document();
> >             jackBauer.add(new Field("caption", "jack-bauer",
> > Field.Store.YES,
> >                     Field.Index.TOKENIZED));
> >             writer.addDocument(jackBauer);
> >
> >             writer.close();
> >
> >             // try to search
> >             IndexSearcher s =3D new
> > IndexSearcher(IndexReader.open(FSDirectory
> >                     .getDirectory("/tmp/idx_test")));
> >
> >             // The next assertion is ok
> >             Hits jackHits =3D s
> >             .search(new TermQuery(new Term("caption", "jack")));
> >             Assert.assertEquals(jackHits.length(), 2);
> >
> >             // The next assertion fails !!!
> >             Hits jackBauerHits =3D s.search(new TermQuery(new
> Term("caption",
> >             "jack-bauer")));
> >             Assert.assertEquals(jackBauerHits.length(), 1);
> >
> >         } catch (Exception e) {
> >             Assert.fail();
> >         }
> >
> >     }
> > }
> >
> >
> >
> >
> >
> >
>
>
>
>
>

--0016e64f466c241532046b714d23--

From java-user-return-40589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 03 14:16:18 2009
Return-Path: <java-user-return-40589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84245 invoked from network); 3 Jun 2009 14:16:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jun 2009 14:16:18 -0000
Received: (qmail 30967 invoked by uid 500); 3 Jun 2009 14:16:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30926 invoked by uid 500); 3 Jun 2009 14:16:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30894 invoked by uid 99); 3 Jun 2009 14:16:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 14:16:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dioxide.software@gmail.com designates 209.85.222.199 as permitted sender)
Received: from [209.85.222.199] (HELO mail-pz0-f199.google.com) (209.85.222.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 14:16:17 +0000
Received: by pzk37 with SMTP id 37so3222pzk.29
        for <java-user@lucene.apache.org>; Wed, 03 Jun 2009 07:15:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=+5j2Ugy7ZPqwWLwIHKzerddfs71Q110HLph+HPWCgEI=;
        b=VzoxughKMdam3nWKkv+ONDx6/M/apz82nMu+P+4aJQ9hXDwJ4L/gunXfWycanDNjRo
         la4e8iDZIMr9ptuLZOfE5eyUFkRo6/FP94a/1V4XdYC6XAza+I6AHMjTijJBnPYShn7b
         peKo8vLRSq4VroHw7hp54nMctv2y0tXq145pk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=mI1NN1Qhf7hKKXI4mVAViox9hTf/Pc0IpMlyRPE4Kk57AkUx6+NIUw+cavSKgh10XJ
         faBt1lvAxL5f+HsbFpm3t0lq4K7v6n8xUbT796dh5COnICeSgC6QDb8V8vOREMpHg66G
         vRsz+GyJa6D7PO0gI95qxM4X1G9ITQuDi9rtQ=
MIME-Version: 1.0
Received: by 10.142.214.12 with SMTP id m12mr346899wfg.119.1244038557122; Wed, 
	03 Jun 2009 07:15:57 -0700 (PDT)
From: KK <dioxide.software@gmail.com>
Date: Wed, 3 Jun 2009 19:45:37 +0530
Message-ID: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
Subject: How to support stemming and case folding for english content mixed 
	with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32d1848c349046b724cd3
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd32d1848c349046b724cd3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi All,
I'm indexing some non-english content. But the page also contains english
content. As of now I'm using WhitespaceAnalyzer for all content and I'm
storing the full webpage content under a single filed. Now we require to
support case folding and stemmming for the english content intermingled with
non-english content. I must metion that we dont have stemming and case
folding for these non-english content. I'm stuck with this. Some one do let
me know how to proceed for fixing this issue.

Thanks,
KK.

--000e0cd32d1848c349046b724cd3--

From java-user-return-40590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 03 16:13:10 2009
Return-Path: <java-user-return-40590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72096 invoked from network); 3 Jun 2009 16:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jun 2009 16:13:10 -0000
Received: (qmail 39657 invoked by uid 500); 3 Jun 2009 16:13:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39609 invoked by uid 500); 3 Jun 2009 16:13:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39597 invoked by uid 99); 3 Jun 2009 16:13:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 16:13:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 16:13:12 +0000
Received: by an-out-0708.google.com with SMTP id b6so38351ana.5
        for <java-user@lucene.apache.org>; Wed, 03 Jun 2009 09:12:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=sZvZPl/KVlx5zXd/sV37Fp9486gboPrhXTThLe5oHe8=;
        b=tbH1SGxo90Q1Rzi/nUq3d5qTmhtD2mBbUNLIC7UleFCH6OeQpe2i0VYctrM0W/g1jd
         8zOPK0/h1d6n+dUDIoHl4tepcUJ89OPvwkW1q6Lr0szCKsmzgeLPR1WoVWOYk/OOqwFd
         qieKND6gBFmXMz/0oX3XQYKajM9dDdWiXsgeA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=l+8KycX5EwFrLGtpoc14GLeZbV8/niFkpXBn8BPCWE1iwldtBNPqQ8t2bwRPIqUiAB
         zLKSN5mcjqaMwNfLgfY0Kl76Jt9x9Kc6NOWnKfbc212e4H2IDz9cCo+1rm/Fe20CIekq
         QOxwEffLK6DZsJrGD0Ag3z6vpD+p9+9Pb5/7Y=
MIME-Version: 1.0
Received: by 10.100.10.15 with SMTP id 15mr1298936anj.117.1244045571569; Wed, 
	03 Jun 2009 09:12:51 -0700 (PDT)
In-Reply-To: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
Date: Wed, 3 Jun 2009 12:12:51 -0400
Message-ID: <8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64652fa60b98a046b73ee60
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64652fa60b98a046b73ee60
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

KK, is all of your latin script text actually english? Is there stuff like
german or french mixed in?

And for your non-english content (your examples have been indian writing
systems), is it generally true that if you had devanagari, you can assume
its hindi? or is there stuff like marathi mixed in?

Reason I say this is to invoke the right stemmers, you really need some
language detection, but perhaps in your case you can cheat and detect this
based on scripts...

Thanks,
Robert


On Wed, Jun 3, 2009 at 10:15 AM, KK <dioxide.software@gmail.com> wrote:

> Hi All,
> I'm indexing some non-english content. But the page also contains english
> content. As of now I'm using WhitespaceAnalyzer for all content and I'm
> storing the full webpage content under a single filed. Now we require to
> support case folding and stemmming for the english content intermingled
> with
> non-english content. I must metion that we dont have stemming and case
> folding for these non-english content. I'm stuck with this. Some one do let
> me know how to proceed for fixing this issue.
>
> Thanks,
> KK.
>



-- 
Robert Muir
rcmuir@gmail.com

--0016e64652fa60b98a046b73ee60--

From java-user-return-40591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 03 18:58:30 2009
Return-Path: <java-user-return-40591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57671 invoked from network); 3 Jun 2009 18:58:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jun 2009 18:58:30 -0000
Received: (qmail 93526 invoked by uid 500); 3 Jun 2009 18:58:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93389 invoked by uid 500); 3 Jun 2009 18:58:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93357 invoked by uid 99); 3 Jun 2009 18:58:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 18:58:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bradfordstephens@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 18:58:28 +0000
Received: by gxk11 with SMTP id 11so301389gxk.5
        for <multiple recipients>; Wed, 03 Jun 2009 11:58:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=KOAJ9zri7BaVhkZW481PSDpYW94s7eEw0HBiI31d+Rw=;
        b=oIrO5SEApoGcW9g5NWoquncwhSrTWswZAWkjRLwhrt//lof9PU6Ji9ksSjc1mnHPjr
         lqhbUFVGBYoEUWpV27fh5jFn4MIu5h1A6xSVx2kVbH97oJGO/A4VdIW3Vbzt8YXMQs9v
         HY/zGWnJ1IgNKutl4y6vHs4QXWD2ByXnzsOAQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ZXO1D74E2LCzHPD3fTSBoIdmpJPdOY8627DAwRkfCnSc1lf0LOivsDx7ToJ36a+RBT
         f+FRTn56UI07iwUlG4ZJLbv1O7V/mNsl1v7LbAaJxXVsJQLj1PHPwOLcD5lKPOmW3xcL
         Q5hu2SApB2nCK/3/LSooaRaipbIJolrviLB80=
MIME-Version: 1.0
Received: by 10.90.93.13 with SMTP id q13mr1065235agb.79.1244055486977; Wed, 
	03 Jun 2009 11:58:06 -0700 (PDT)
In-Reply-To: <860544ed0904161527o4f1bb171x686682f23cb2cf88@mail.gmail.com>
References: <860544ed0904161527o4f1bb171x686682f23cb2cf88@mail.gmail.com>
Date: Wed, 3 Jun 2009 11:58:06 -0700
Message-ID: <860544ed0906031158u714ad4d3u9f634d9053c1d7c2@mail.gmail.com>
Subject: Re: Seattle / PNW Hadoop + Lucene User Group?
From: Bradford Stephens <bradfordstephens@gmail.com>
To: core-user@hadoop.apache.org, nutch-user@lucene.apache.org, 
	solr-user@lucene.apache.org, java-user@lucene.apache.org, 
	hbase-user@hadoop.apache.org, katta-developer@lists.sourceforge.net
Content-Type: multipart/alternative; boundary=00163630f24161d6f5046b763d92
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630f24161d6f5046b763d92
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hey everyone!
I just wanted to give a BIG THANKS for everyone who came. We had over a
dozen people, and a few got lost at UW :)  [I would have sent this update
earlier, but I flew to Florida the day after the meeting].

If you didn't come, you missed quite a bit of learning and topics. Such as:

-Building a Social Media Analysis company on the Apache Cloud Stack
-Cancer detection in images using Hadoop
-Real-time OLAP
-Scalable Lucene using Katta and Hadoop
-Video and Network Flow
-Custom Ranking in Lucene

I'm going to update our wiki with the topics, and a few questions raised and
the lessons we've learned.

The next meetup will be June 24th. Be there, or be... boring :)

Cheers,
Bradford

On Thu, Apr 16, 2009 at 3:27 PM, Bradford Stephens <
bradfordstephens@gmail.com> wrote:

> Greetings,
>
> Would anybody be willing to join a PNW Hadoop and/or Lucene User Group
> with me in the Seattle area? I can donate some facilities, etc. -- I
> also always have topics to speak about :)
>
> Cheers,
> Bradford
>

--00163630f24161d6f5046b763d92--

From java-user-return-40592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 03 21:36:58 2009
Return-Path: <java-user-return-40592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11498 invoked from network); 3 Jun 2009 21:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jun 2009 21:36:58 -0000
Received: (qmail 4443 invoked by uid 500); 3 Jun 2009 21:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4372 invoked by uid 500); 3 Jun 2009 21:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4286 invoked by uid 99); 3 Jun 2009 21:30:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 21:30:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bradfordstephens@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 21:30:46 +0000
Received: by yw-out-2324.google.com with SMTP id 2so122625ywt.5
        for <multiple recipients>; Wed, 03 Jun 2009 14:30:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type;
        bh=rgf8WgpfRpVKozjamoq23wMuTF5YJ15FQPtr4VV7IV0=;
        b=IK/Wb7seaGLPUYdfoBfOzjqygawDgkl6QWhzO094dTEL9qQAQZB1wwZqYkTPgn8XNW
         ghFHVXQKTjV/rf0dXo6OZAZAEk+l4OfPhjCYEx0wmdWUbsTALQ2JJIZQRIRFyOy+eNtX
         z6ZfhkTGwwLsPv2Js/C7s9gFVL4kdSBd56f3c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=n3RLQ3J0SyM32cuBBHtB581P7bI/7l3j8i5Gc5ruXFcgjhl5lzYZ/xraDxoU+M3AzT
         zDu1qsK4q+/bOVBHOJgNdgy7kAgQ/8JjPRNYvoVOycYgx28wT4y5UOY/T8BOcBToNa73
         wKW1HP0+wfhDoWB0PMtNKA4CpKxC8H7BkF+xo=
MIME-Version: 1.0
Received: by 10.90.90.4 with SMTP id n4mr1166921agb.113.1244064624861; Wed, 03 
	Jun 2009 14:30:24 -0700 (PDT)
In-Reply-To: <C64C322F.21A35%bbansal@linkedin.com>
References: <860544ed0906031158u714ad4d3u9f634d9053c1d7c2@mail.gmail.com>
	 <C64C322F.21A35%bbansal@linkedin.com>
Date: Wed, 3 Jun 2009 14:30:24 -0700
Message-ID: <860544ed0906031430w53520257va26cb956df6bfe62@mail.gmail.com>
Subject: Re: Seattle / PNW Hadoop + Lucene User Group?
From: Bradford Stephens <bradfordstephens@gmail.com>
To: core-user@hadoop.apache.org
Cc: nutch-user@lucene.apache.org, solr-user@lucene.apache.org, 
	java-user@lucene.apache.org, hbase-user@hadoop.apache.org, 
	katta-developer@lists.sourceforge.net
Content-Type: multipart/alternative; boundary=0016361648990ae3f9046b785e67
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361648990ae3f9046b785e67
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Sorry, no videos this time. The conversation wasn't very structured... next
month I'll record it :)

On Wed, Jun 3, 2009 at 1:59 PM, Bhupesh Bansal <bbansal@linkedin.com> wrote:

> Great Bradford,
>
> Can you post some videos if you have some ?
>
> Best
> Bhupesh
>
>
>
> On 6/3/09 11:58 AM, "Bradford Stephens" <bradfordstephens@gmail.com>
> wrote:
>
> > Hey everyone!
> > I just wanted to give a BIG THANKS for everyone who came. We had over a
> > dozen people, and a few got lost at UW :)  [I would have sent this update
> > earlier, but I flew to Florida the day after the meeting].
> >
> > If you didn't come, you missed quite a bit of learning and topics. Such
> as:
> >
> > -Building a Social Media Analysis company on the Apache Cloud Stack
> > -Cancer detection in images using Hadoop
> > -Real-time OLAP
> > -Scalable Lucene using Katta and Hadoop
> > -Video and Network Flow
> > -Custom Ranking in Lucene
> >
> > I'm going to update our wiki with the topics, and a few questions raised
> and
> > the lessons we've learned.
> >
> > The next meetup will be June 24th. Be there, or be... boring :)
> >
> > Cheers,
> > Bradford
> >
> > On Thu, Apr 16, 2009 at 3:27 PM, Bradford Stephens <
> > bradfordstephens@gmail.com> wrote:
> >
> >> Greetings,
> >>
> >> Would anybody be willing to join a PNW Hadoop and/or Lucene User Group
> >> with me in the Seattle area? I can donate some facilities, etc. -- I
> >> also always have topics to speak about :)
> >>
> >> Cheers,
> >> Bradford
> >>
>
>

--0016361648990ae3f9046b785e67--

From java-user-return-40593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 03 23:03:57 2009
Return-Path: <java-user-return-40593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51330 invoked from network); 3 Jun 2009 23:03:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jun 2009 23:03:57 -0000
Received: (qmail 71088 invoked by uid 500); 3 Jun 2009 23:04:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71009 invoked by uid 500); 3 Jun 2009 23:04:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70999 invoked by uid 99); 3 Jun 2009 23:04:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 23:04:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of listanand@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jun 2009 23:03:59 +0000
Received: by qw-out-2122.google.com with SMTP id 5so255028qwd.53
        for <java-user@lucene.apache.org>; Wed, 03 Jun 2009 16:03:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=Z4tL39ieTXu9KT5yfTRjrzTFcI85ZvAhiWMvTrP1+ak=;
        b=DZoLGsGV/EySMEiGuh4lW8c1O9gj/YsTmq6HGp8eFpjdhErXeRRY/GTNEUYoTOCLXe
         0YB2Ssbl3C8h7gAN2o1mk8tTSh9T02QEmB5b4dr2ov9eW6QCkb8Gqz5UWm8pjZU/IA/n
         EBQ+4iM3R6fh5tHNhxVvfyNUPPCoKg+pD9ks8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=gi99Zs2V56Qyh3dCV/jlyDXH+qNADI9Fi0zrcKZvchfU9H8Uu3fYxusFL7UPo2blqR
         izO42oD1IQbPe6NnxTsY//X7o33El4qsmFdMfeSs049/OX7Ix+OhWB02BH/8j8iMRJie
         k3DicZH9+dqGnCKmTeJ2vVQDwl1Ahsn/IUQOQ=
MIME-Version: 1.0
Received: by 10.231.16.72 with SMTP id n8mr393038iba.49.1244070217911; Wed, 03 
	Jun 2009 16:03:37 -0700 (PDT)
Date: Wed, 3 Jun 2009 16:03:37 -0700
Message-ID: <80152b9d0906031603t743c464ao49159f9c98f269ef@mail.gmail.com>
Subject: Lucene Website Integration
From: " \	listanand@gmail.com" <listanand@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I need to develop a website that allows for searching and browsing the
underlying documents collection. I am going to be using Lucene as the
underlying search engine. I am however not very familiar with web
development, and am new to Lucene as well. I have used JSP/Servlets
before, and since Lucene is written in Java I am guessing that that
will be the way forward this time as well.

My question is, is using JSP/Servlet an appropriate approach for what
I am trying to do? Also, I am more familiar with Perl and Python than
with Java. So, should I consider using any other Lucene implementation
(Plucene/PyLucene) etc.and go the CGI route instead?

Thanks in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 00:21:36 2009
Return-Path: <java-user-return-40594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72822 invoked from network); 4 Jun 2009 00:21:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 00:21:16 -0000
Received: (qmail 44653 invoked by uid 500); 4 Jun 2009 00:21:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44611 invoked by uid 500); 4 Jun 2009 00:21:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44584 invoked by uid 99); 4 Jun 2009 00:21:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 00:21:02 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.86.124.115] (HELO rpdz2.dailyrazor.com) (74.86.124.115)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 00:20:51 +0000
Received: from c-76-100-31-215.hsd1.md.comcast.net ([76.100.31.215]:34609 helo=[192.168.169.1])
	by rpdz2.dailyrazor.com with esmtpa (Exim 4.69)
	(envelope-from <gary@littlebunch.com>)
	id 1MC0h3-0004Mb-NJ
	for java-user@lucene.apache.org; Wed, 03 Jun 2009 19:20:29 -0500
Message-ID: <4A27134C.50607@littlebunch.com>
Date: Wed, 03 Jun 2009 20:20:28 -0400
From: Gary Moore <gary@littlebunch.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090302)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Website Integration
References: <80152b9d0906031603t743c464ao49159f9c98f269ef@mail.gmail.com>
In-Reply-To: <80152b9d0906031603t743c464ao49159f9c98f269ef@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - rpdz2.dailyrazor.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - littlebunch.com
X-Virus-Checked: Checked by ClamAV on apache.org

I would suggest you take a look at Solr -- http://lucene.apache.org/solr 
-- which requires essentially no Java knowledge to use.  It has a Python 
client which at the very least might help with the learning curve.   If 
you want to try an alternative to JSP/Servlets for your web framework, 
there's Grails/Groovy (http://grails.org/) which for me is a heck of a 
lot of fun.   BTW, there's a Grails plugin available which uses  
Compass/Lucene.   Who knows, it might be enough for you.   A lot of 
folks are using Rails/Ruby/Solr which is also worth checking out.
HTH
Gary
 listanand@gmail.com wrote:
> Hi all,
>
> I need to develop a website that allows for searching and browsing the
> underlying documents collection. I am going to be using Lucene as the
> underlying search engine. I am however not very familiar with web
> development, and am new to Lucene as well. I have used JSP/Servlets
> before, and since Lucene is written in Java I am guessing that that
> will be the way forward this time as well.
>
> My question is, is using JSP/Servlet an appropriate approach for what
> I am trying to do? Also, I am more familiar with Perl and Python than
> with Java. So, should I consider using any other Lucene implementation
> (Plucene/PyLucene) etc.and go the CGI route instead?
>
> Thanks in advance.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 00:34:55 2009
Return-Path: <java-user-return-40595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76641 invoked from network); 4 Jun 2009 00:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 00:34:55 -0000
Received: (qmail 62058 invoked by uid 500); 4 Jun 2009 00:35:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61978 invoked by uid 500); 4 Jun 2009 00:35:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61968 invoked by uid 99); 4 Jun 2009 00:35:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 00:35:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 00:34:53 +0000
Received: by qw-out-2122.google.com with SMTP id 5so286184qwd.53
        for <java-user@lucene.apache.org>; Wed, 03 Jun 2009 17:34:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=osGM4o63V0tkh0srRzfO3HWXnu02UxcwIp64VDpLY0k=;
        b=l8POIlZAuCp4/l4oy9+WoI6QasYS5Hi1sBh9xI5rG4sFTLL665ZOBdoQZSx9Tbc8yp
         UbmHFh3chyoYZL+A0Nw11xj0f8JcPz1IlD245oyGi2UhSD/TwCQTAr67r+onu0SAA2Pl
         DZdkNwnJlxUe/idi5etWZ6PIKD0PjPRE7Hxl0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=aOu217mP+2WPGz7pxD//N8jqfgE0jmnsZx8l1Y4x4nQcYNzOAecoZJjgMgzPk1jluT
         87/tYdYvIYvPYHaTb9Bk0sD5hE5rurSEY/2dVZgyg9dOcSiPDkNyy4Q0XInWJmxrtR0e
         2DlvR88IVlPtr6D4a1U0zD+ACxeJRIfcbJ0U0=
Received: by 10.224.73.196 with SMTP id r4mr1684672qaj.318.1244075671781;
        Wed, 03 Jun 2009 17:34:31 -0700 (PDT)
Received: from ?192.168.1.120? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 4sm99897qwe.7.2009.06.03.17.34.27
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 03 Jun 2009 17:34:30 -0700 (PDT)
Message-ID: <4A271692.4040905@gmail.com>
Date: Wed, 03 Jun 2009 20:34:26 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Phrase Highlighting
References: <3836ec640904281849s271e7ad0k380d6978c9117a76@mail.gmail.com>	 <9ac0c6aa0904290227k4cb08938ic55503688ac02bd8@mail.gmail.com>	 <3836ec640904292115v4a49f532ofe54a3c221f42100@mail.gmail.com>	 <9ac0c6aa0904300316t1eb4ab0fma543adac285ecafa@mail.gmail.com>	 <3836ec640905211209j769436d1j31250d7ecc44ab3c@mail.gmail.com>	 <9ac0c6aa0905211439t15e99412v30e8daf2f4f644fb@mail.gmail.com> <3836ec640906021757r2fab24aarfe3cf55b1cc0036c@mail.gmail.com>
In-Reply-To: <3836ec640906021757r2fab24aarfe3cf55b1cc0036c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Max Lynch wrote:
>> Well what happens is if I use a SpanScorer instead, and allocate it like
>>     
>
>   
>>> such:
>>>
>>>            analyzer = StandardAnalyzer([])
>>>            tokenStream = analyzer.tokenStream("contents",
>>> lucene.StringReader(text))
>>>            ctokenStream = lucene.CachingTokenFilter(tokenStream)
>>>            highlighter = lucene.Highlighter(formatter,
>>> lucene.HighlighterSpanScorer(self.query, "contents", ctokenStream))
>>>            ctokenStream.reset()
>>>
>>>            result = highlighter.getBestFragments(ctokenStream, text,
>>>                    2, "...")
>>>
>>>  My highlighter is still breaking up words inside of a span.  For
>>>       
>> example,
>>     
>>> if I search for \"John Smith\", instead of the highlighter being called
>>>       
>> for
>>     
>>> the whole "John Smith", it gets called for "John" and then "Smith".
>>>       
>> I think you need to use SimpleSpanFragmenter (vs SimpleFragmenter,
>> which is the default used by Highlighter) to ensure that each fragment
>> contains a full match for the query.  EG something like this (copied
>> from LIA 2nd edition):
>>
>>    TermQuery query = new TermQuery(new Term("field", "fox"));
>>
>>    TokenStream tokenStream =
>>        new SimpleAnalyzer().tokenStream("field",
>>            new StringReader(text));
>>
>>    SpanScorer scorer = new SpanScorer(query, "field",
>>                                       new CachingTokenFilter(tokenStream));
>>    Fragmenter fragmenter = new SimpleSpanFragmenter(scorer);
>>    Highlighter highlighter = new Highlighter(scorer);
>>    highlighter.setTextFragmenter(fragmenter);
>>     
>
>
>
> Okay, I hacked something up in Java that illustrates my issue.
>
>
> import org.apache.lucene.search.*;
> import org.apache.lucene.analysis.*;
> import org.apache.lucene.document.*;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.RAMDirectory;
> import org.apache.lucene.search.highlight.*;
> import org.apache.lucene.search.spans.SpanTermQuery;
> import java.io.Reader;
> import java.io.StringReader;
>
> public class PhraseTest {
>     private IndexSearcher searcher;
>     private RAMDirectory directory;
>
>     public PhraseTest() throws Exception {
>         directory = new RAMDirectory();
>
>         Analyzer analyzer = new Analyzer() {
>             public TokenStream tokenStream(String fieldName, Reader reader)
> {
>                 return new WhitespaceTokenizer(reader);
>             }
>
>             public int getPositionIncrementGap(String fieldName) {
>                 return 100;
>             }
>         };
>
>         IndexWriter writer = new IndexWriter(directory, analyzer, true,
>                 IndexWriter.MaxFieldLength.LIMITED);
>
>         Document doc = new Document();
>         String text = "Jimbo John is his name";
>         doc.add(new Field("contents", text, Field.Store.YES,
> Field.Index.ANALYZED));
>         writer.addDocument(doc);
>
>         writer.optimize();
>         writer.close();
>
>         searcher = new IndexSearcher(directory);
>
>         // Try a phrase query
>         PhraseQuery phraseQuery = new PhraseQuery();
>         phraseQuery.add(new Term("contents", "Jimbo"));
>         phraseQuery.add(new Term("contents", "John"));
>
>         // Try a SpanTermQuery
>         SpanTermQuery spanTermQuery = new SpanTermQuery(new Term("contents",
> "Jimbo John"));
>
>         // Try a parsed query
>         Query parsedQuery = new QueryParser("contents",
> analyzer).parse("\"Jimbo John\"");
>
>         Hits hits = searcher.search(parsedQuery);
>         System.out.println("We found " + hits.length() + " hits.");
>
>         // Highlight the results
>         CachingTokenFilter tokenStream = new
> CachingTokenFilter(analyzer.tokenStream( "contents", new
> StringReader(text)));
>
>         SimpleHTMLFormatter formatter = new SimpleHTMLFormatter();
>
>         SpanScorer sc = new SpanScorer(parsedQuery, "contents", tokenStream,
> "contents");
>
>         Highlighter highlighter = new Highlighter(formatter, sc);
>         highlighter.setTextFragmenter(new SimpleSpanFragmenter(sc));
>         tokenStream.reset();
>
>         String rv = highlighter.getBestFragments(tokenStream, text, 1,
> "...");
>         System.out.println(rv);
>
>     }
>     public static void main(String[] args) {
>         System.out.println("Starting...");
>         try {
>             PhraseTest pt = new PhraseTest();
>         } catch(Exception ex) {
>             ex.printStackTrace();
>         }
>     }
> }
>
>
>
> The output I'm getting is instead of highlighting <B>Jimbo John</B> it does
> <B>Jimbo</B> then <B>John</B>.  Can I get around this some how?  I tried
> several different query types (they are declared in the code, but only the
> parsed version is being used).
>
> Thanks
> -max
>
>   
Sorry, not much you can do at the moment. The change is non trivial for 
sure (its probably easier to write some regex that merges them). This 
limitation was accepted because with most markup, it will display the 
same anyway. An option to merge would be great, and while I don't 
remember the details, the last time I looked, it just ain't easy to do 
based on the implementation. The highlighter highlights by running 
through and scoring tokens, not phrases, and the Span highlighter asks 
if a given token is in a given span to see if it should get a score over 
0. Token by token handed off to the SpanScorer to be scored. I looked 
into adding the option at one point (back when I was putting the 
SpanScorer together) and didn't find it worth the effort after getting 
blocked a couple times.


-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 00:45:52 2009
Return-Path: <java-user-return-40596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77841 invoked from network); 4 Jun 2009 00:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 00:45:51 -0000
Received: (qmail 68197 invoked by uid 500); 4 Jun 2009 00:46:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68167 invoked by uid 500); 4 Jun 2009 00:46:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68157 invoked by uid 99); 4 Jun 2009 00:46:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 00:46:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 00:45:53 +0000
Received: by qw-out-2122.google.com with SMTP id 5so289663qwd.53
        for <java-user@lucene.apache.org>; Wed, 03 Jun 2009 17:45:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=OSXouSDuhR8X4tGPj8n2QjJpB4E3aqBL2HBv88aoGdw=;
        b=poe13t+py+4R99UTZL74Ayqa3jawvS1b2D8MQhAZb3QGRPnpOGdT2vo2NssJQtmwzW
         qtTX04ytzKvIV+vupIMfJApzgo38QO5hdnq4mrmaBHPjIWgmseXQqsmG7DLgVZVFDMJ4
         T/a1QHm3jLY+WAYRMglYDFZUmZYOnkqJxkRdk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Q5REsOh+pCr7Ov3qk5zZCQf3f7wHLg8QaiXWzGyqyKaK7P4wyak0+l7ZhmsnfQFjLN
         3MELaL8eQTQPLm0W1hZ9Jc3exf3pk6/lJ3mPxbpO8QCuOtZ8cZZIjDmO5jj8UEh9lb2k
         b/cdXMX/G/x/BNw4MoymkMaDmHcP1nFBAJABI=
MIME-Version: 1.0
Received: by 10.224.20.71 with SMTP id e7mr1741259qab.92.1244076332519; Wed, 
	03 Jun 2009 17:45:32 -0700 (PDT)
In-Reply-To: <4A271692.4040905@gmail.com>
References: <3836ec640904281849s271e7ad0k380d6978c9117a76@mail.gmail.com>
	 <9ac0c6aa0904290227k4cb08938ic55503688ac02bd8@mail.gmail.com>
	 <3836ec640904292115v4a49f532ofe54a3c221f42100@mail.gmail.com>
	 <9ac0c6aa0904300316t1eb4ab0fma543adac285ecafa@mail.gmail.com>
	 <3836ec640905211209j769436d1j31250d7ecc44ab3c@mail.gmail.com>
	 <9ac0c6aa0905211439t15e99412v30e8daf2f4f644fb@mail.gmail.com>
	 <3836ec640906021757r2fab24aarfe3cf55b1cc0036c@mail.gmail.com>
	 <4A271692.4040905@gmail.com>
Date: Wed, 3 Jun 2009 19:45:32 -0500
Message-ID: <3836ec640906031745j37888547n74199314d52bdd0d@mail.gmail.com>
Subject: Re: Phrase Highlighting
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cdd90df90ed046b7b178b
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cdd90df90ed046b7b178b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Wed, Jun 3, 2009 at 7:34 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Max Lynch wrote:
>
>> Well what happens is if I use a SpanScorer instead, and allocate it like
>>>
>>>
>>
>>
>>
>>> such:
>>>>
>>>>           analyzer = StandardAnalyzer([])
>>>>           tokenStream = analyzer.tokenStream("contents",
>>>> lucene.StringReader(text))
>>>>           ctokenStream = lucene.CachingTokenFilter(tokenStream)
>>>>           highlighter = lucene.Highlighter(formatter,
>>>> lucene.HighlighterSpanScorer(self.query, "contents", ctokenStream))
>>>>           ctokenStream.reset()
>>>>
>>>>           result = highlighter.getBestFragments(ctokenStream, text,
>>>>                   2, "...")
>>>>
>>>>  My highlighter is still breaking up words inside of a span.  For
>>>>
>>>>
>>> example,
>>>
>>>
>>>> if I search for \"John Smith\", instead of the highlighter being called
>>>>
>>>>
>>> for
>>>
>>>
>>>> the whole "John Smith", it gets called for "John" and then "Smith".
>>>>
>>>>
>>> I think you need to use SimpleSpanFragmenter (vs SimpleFragmenter,
>>> which is the default used by Highlighter) to ensure that each fragment
>>> contains a full match for the query.  EG something like this (copied
>>> from LIA 2nd edition):
>>>
>>>   TermQuery query = new TermQuery(new Term("field", "fox"));
>>>
>>>   TokenStream tokenStream =
>>>       new SimpleAnalyzer().tokenStream("field",
>>>           new StringReader(text));
>>>
>>>   SpanScorer scorer = new SpanScorer(query, "field",
>>>                                      new
>>> CachingTokenFilter(tokenStream));
>>>   Fragmenter fragmenter = new SimpleSpanFragmenter(scorer);
>>>   Highlighter highlighter = new Highlighter(scorer);
>>>   highlighter.setTextFragmenter(fragmenter);
>>>
>>>
>>
>>
>>
>> Okay, I hacked something up in Java that illustrates my issue.
>>
>>
>> import org.apache.lucene.search.*;
>> import org.apache.lucene.analysis.*;
>> import org.apache.lucene.document.*;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.index.Term;
>> import org.apache.lucene.queryParser.QueryParser;
>> import org.apache.lucene.store.Directory;
>> import org.apache.lucene.store.RAMDirectory;
>> import org.apache.lucene.search.highlight.*;
>> import org.apache.lucene.search.spans.SpanTermQuery;
>> import java.io.Reader;
>> import java.io.StringReader;
>>
>> public class PhraseTest {
>>    private IndexSearcher searcher;
>>    private RAMDirectory directory;
>>
>>    public PhraseTest() throws Exception {
>>        directory = new RAMDirectory();
>>
>>        Analyzer analyzer = new Analyzer() {
>>            public TokenStream tokenStream(String fieldName, Reader reader)
>> {
>>                return new WhitespaceTokenizer(reader);
>>            }
>>
>>            public int getPositionIncrementGap(String fieldName) {
>>                return 100;
>>            }
>>        };
>>
>>        IndexWriter writer = new IndexWriter(directory, analyzer, true,
>>                IndexWriter.MaxFieldLength.LIMITED);
>>
>>        Document doc = new Document();
>>        String text = "Jimbo John is his name";
>>        doc.add(new Field("contents", text, Field.Store.YES,
>> Field.Index.ANALYZED));
>>        writer.addDocument(doc);
>>
>>        writer.optimize();
>>        writer.close();
>>
>>        searcher = new IndexSearcher(directory);
>>
>>        // Try a phrase query
>>        PhraseQuery phraseQuery = new PhraseQuery();
>>        phraseQuery.add(new Term("contents", "Jimbo"));
>>        phraseQuery.add(new Term("contents", "John"));
>>
>>        // Try a SpanTermQuery
>>        SpanTermQuery spanTermQuery = new SpanTermQuery(new
>> Term("contents",
>> "Jimbo John"));
>>
>>        // Try a parsed query
>>        Query parsedQuery = new QueryParser("contents",
>> analyzer).parse("\"Jimbo John\"");
>>
>>        Hits hits = searcher.search(parsedQuery);
>>        System.out.println("We found " + hits.length() + " hits.");
>>
>>        // Highlight the results
>>        CachingTokenFilter tokenStream = new
>> CachingTokenFilter(analyzer.tokenStream( "contents", new
>> StringReader(text)));
>>
>>        SimpleHTMLFormatter formatter = new SimpleHTMLFormatter();
>>
>>        SpanScorer sc = new SpanScorer(parsedQuery, "contents",
>> tokenStream,
>> "contents");
>>
>>        Highlighter highlighter = new Highlighter(formatter, sc);
>>        highlighter.setTextFragmenter(new SimpleSpanFragmenter(sc));
>>        tokenStream.reset();
>>
>>        String rv = highlighter.getBestFragments(tokenStream, text, 1,
>> "...");
>>        System.out.println(rv);
>>
>>    }
>>    public static void main(String[] args) {
>>        System.out.println("Starting...");
>>        try {
>>            PhraseTest pt = new PhraseTest();
>>        } catch(Exception ex) {
>>            ex.printStackTrace();
>>        }
>>    }
>> }
>>
>>
>>
>> The output I'm getting is instead of highlighting <B>Jimbo John</B> it
>> does
>> <B>Jimbo</B> then <B>John</B>.  Can I get around this some how?  I tried
>> several different query types (they are declared in the code, but only the
>> parsed version is being used).
>>
>> Thanks
>> -max
>>
>>
>>
> Sorry, not much you can do at the moment. The change is non trivial for
> sure (its probably easier to write some regex that merges them). This
> limitation was accepted because with most markup, it will display the same
> anyway. An option to merge would be great, and while I don't remember the
> details, the last time I looked, it just ain't easy to do based on the
> implementation. The highlighter highlights by running through and scoring
> tokens, not phrases, and the Span highlighter asks if a given token is in a
> given span to see if it should get a score over 0. Token by token handed off
> to the SpanScorer to be scored. I looked into adding the option at one point
> (back when I was putting the SpanScorer together) and didn't find it worth
> the effort after getting blocked a couple times.
>
>
Thanks anyways Mark.  Yea what I gathered from the results is that I will
only get hits and highlights for phrases if the whole phrase was found, but
they will be separated.  I just combine them now but was hoping for a more
elegant solution.   At least I know that what I'm highlighting aren't random
parts of the text, but the actual phrase, so all is not lost.

-max

--0015175cdd90df90ed046b7b178b--

From java-user-return-40597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 04:58:32 2009
Return-Path: <java-user-return-40597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55984 invoked from network); 4 Jun 2009 04:58:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 04:58:32 -0000
Received: (qmail 23934 invoked by uid 500); 4 Jun 2009 04:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23861 invoked by uid 500); 4 Jun 2009 04:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23844 invoked by uid 99); 4 Jun 2009 04:58:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 04:58:41 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 04:58:32 +0000
Received: by pxi17 with SMTP id 17so452152pxi.29
        for <java-user@lucene.apache.org>; Wed, 03 Jun 2009 21:58:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.114.208.12 with SMTP id f12mr2789933wag.48.1244091490035; Wed, 
	03 Jun 2009 21:58:10 -0700 (PDT)
Date: Thu, 4 Jun 2009 14:58:10 +1000
Message-ID: <bb132a4a0906032158s62dc4defyeee8b13adaa8c07e@mail.gmail.com>
Subject: Extending StandardAnalyzer considered harmful
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163641773554e7d6046b7e9f78
X-Virus-Checked: Checked by ClamAV on apache.org

--00163641773554e7d6046b7e9f78
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Hi all.
I just want to tell some people an interesting story. :-)

We had a custom analyser which was implemented like this:

    public class NoStopWordsAnalyser extends StandardAnalyzer {
        public TokenStream tokenStream(String fieldName, Reader reader) {
            TokenStream result = new StandardTokenizer(reader);
            result = new StandardFilter(result);
            result = new LowerCaseFilter(result);
            return result;
        }
    }

Now, this seemed all well and good, and we unit tested the analyser and it
worked.

Some time later, a newer version of Lucene added reusableTokenStream() for a
performance optimisation.  The indexing side was updated to call the new
reusableTokenStream() method.  Since we had extended StandardAnalyzer, it
ended up going to StandardAnalyzer's implementation, which puts on a
StopFilter, so our NoStopWordsAnalyser ended up including a StopFilter.
 This in itself would have been a minor issue as well, but the QueryParser
side still called the older tokenStream() method, which resulted in
different token streams being used for indexing and querying -- even though
it was the same analyser!

The end result is that we could never get a hit if the query included any
stop words.

The solution in this case was to extend Analyzer instead.  I just thought it
was interesting that we got affected so much by a new method to the API
which didn't cause a compilation error or raise any other flags which would
indicate we had done something wrong.  Our own unit tests still passed
because they were testing the older method.  Had StandardAnalyzer or its
tokenStream() method been made final during this change, we would have had
our compilation fail.  Had it been final from the very first time the class
was introduced, it would have prevented the problem in its entirety as we
would have realised much sooner that it wasn't safe to override in the
beginning.

Daniel



-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

--00163641773554e7d6046b7e9f78--

From java-user-return-40598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 05:13:44 2009
Return-Path: <java-user-return-40598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58845 invoked from network); 4 Jun 2009 05:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 05:13:44 -0000
Received: (qmail 32889 invoked by uid 500); 4 Jun 2009 05:13:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32766 invoked by uid 500); 4 Jun 2009 05:13:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32512 invoked by uid 99); 4 Jun 2009 05:13:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 05:13:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dioxide.software@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 05:13:10 +0000
Received: by pxi17 with SMTP id 17so457924pxi.29
        for <java-user@lucene.apache.org>; Wed, 03 Jun 2009 22:12:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=4rnpEHbOHO+tuR/NzOeXGVyGEExtys1tzzKtvXLc50o=;
        b=gnXKQFdvTQLN2ygLDDaqwXC8jS7xAAea1PuNSJYoNRKxYN/SWtzuD1wFdmyjMsQ8qS
         Et6OquKqCo0Kv+8FWwaGb2Gk5kPmk869XfbyquPZuF5gtMbHf62mnN8iLMmeoB/ZzkPY
         uVm4s/xacrbsNH0SIG5bjHgz4gg9o64rOgzXU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ttJl4bOvsPKAMziZdiHd786ryQ2YTYblUM46VZaCfDZyGbNL0nMIW1JWF953yBq9Sc
         j7bwKDlCDSBSoKO1qqZNVRegPCdDazp+tIxGoGGcu4tQUi4wSdikiWEWBYzKEiNv0hkb
         53vksabplURz9Z1V419uNm/AWKnoJHFUkqyIs=
MIME-Version: 1.0
Received: by 10.142.71.16 with SMTP id t16mr615705wfa.273.1244092370072; Wed, 
	03 Jun 2009 22:12:50 -0700 (PDT)
In-Reply-To: <8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Thu, 4 Jun 2009 10:42:30 +0530
Message-ID: <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0a798c93443046b7ed3a0
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0a798c93443046b7ed3a0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Muir, thanks for your response.
I'm indexing indian language web pages which has got descent amount of
english content mixed with therein. For the time being I'm not going to use
any stemmers as we don't have standard stemmers for indian languages . So
what I want to do is like this,
Say I've a web page having hindi content with 5% english content. Then for
hindi I want to use the basic white space analyzer as we dont have stemmers
for this as I mentioned earlier and whereever english appears I want them to
be stemmed tokenized etc[the standard process used for english content]. As
of now I'm using whitespace analyzer for the full content which doesnot
support case folding, stemming etc for teh content. So if there is an
english word say "Detection" indexed as such then searching for detection or
detect is not giving any results, which is the expected behavior, but I want
this kind of queries to give results.
I hope I made it clear. Let me know any ideas on doing the same. And one
more thing, I'm storing the full webpage content under a single field, I
hope this will not make any difference, right?
It seems I've to use language identifiers, but do we really need that?
Because we've only non-english content mixed with english[and not french or
russian etc].

What is the best way of approaching the problem? Any thoughts!

Thanks,
KK.

On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <rcmuir@gmail.com> wrote:

> KK, is all of your latin script text actually english? Is there stuff like
> german or french mixed in?
>
> And for your non-english content (your examples have been indian writing
> systems), is it generally true that if you had devanagari, you can assume
> its hindi? or is there stuff like marathi mixed in?
>
> Reason I say this is to invoke the right stemmers, you really need some
> language detection, but perhaps in your case you can cheat and detect this
> based on scripts...
>
> Thanks,
> Robert
>
>
> On Wed, Jun 3, 2009 at 10:15 AM, KK <dioxide.software@gmail.com> wrote:
>
> > Hi All,
> > I'm indexing some non-english content. But the page also contains english
> > content. As of now I'm using WhitespaceAnalyzer for all content and I'm
> > storing the full webpage content under a single filed. Now we require to
> > support case folding and stemmming for the english content intermingled
> > with
> > non-english content. I must metion that we dont have stemming and case
> > folding for these non-english content. I'm stuck with this. Some one do
> let
> > me know how to proceed for fixing this issue.
> >
> > Thanks,
> > KK.
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

--001636e0a798c93443046b7ed3a0--

From java-user-return-40599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 11:10:18 2009
Return-Path: <java-user-return-40599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85963 invoked from network); 4 Jun 2009 11:10:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 11:10:18 -0000
Received: (qmail 87577 invoked by uid 500); 4 Jun 2009 11:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87514 invoked by uid 500); 4 Jun 2009 11:10:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87504 invoked by uid 99); 4 Jun 2009 11:10:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 11:10:27 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 11:10:16 +0000
Received: by gxk11 with SMTP id 11so1154772gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 04:09:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.139.8 with SMTP id r8mr3355295ybn.58.1244113788388; Thu, 
	04 Jun 2009 04:09:48 -0700 (PDT)
In-Reply-To: <4A271692.4040905@gmail.com>
References: <3836ec640904281849s271e7ad0k380d6978c9117a76@mail.gmail.com>
	 <9ac0c6aa0904290227k4cb08938ic55503688ac02bd8@mail.gmail.com>
	 <3836ec640904292115v4a49f532ofe54a3c221f42100@mail.gmail.com>
	 <9ac0c6aa0904300316t1eb4ab0fma543adac285ecafa@mail.gmail.com>
	 <3836ec640905211209j769436d1j31250d7ecc44ab3c@mail.gmail.com>
	 <9ac0c6aa0905211439t15e99412v30e8daf2f4f644fb@mail.gmail.com>
	 <3836ec640906021757r2fab24aarfe3cf55b1cc0036c@mail.gmail.com>
	 <4A271692.4040905@gmail.com>
Date: Thu, 4 Jun 2009 07:09:48 -0400
Message-ID: <9ac0c6aa0906040409u2a6db4a4qee9dfc9308fdf47a@mail.gmail.com>
Subject: Re: Phrase Highlighting
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Mark, is this because the highlighter package doesn't include enough
information as to why the fragmenter picked a given fragment?

Because... the SpanScorer is in fact doing all the work to properly
locate the full span for the phrase (I think?), so it's ashame that
because there's no way for it to "communicate" this information to the
formatter.  The strong decoupling of fragmenting from highlighting is
hurting us here...

Mike

On Wed, Jun 3, 2009 at 8:34 PM, Mark Miller <markrmiller@gmail.com> wrote:
> Max Lynch wrote:
>>>
>>> Well what happens is if I use a SpanScorer instead, and allocate it lik=
e
>>>
>>
>>
>>>>
>>>> such:
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 analyzer =3D StandardAnalyzer([])
>>>> =A0 =A0 =A0 =A0 =A0 tokenStream =3D analyzer.tokenStream("contents",
>>>> lucene.StringReader(text))
>>>> =A0 =A0 =A0 =A0 =A0 ctokenStream =3D lucene.CachingTokenFilter(tokenSt=
ream)
>>>> =A0 =A0 =A0 =A0 =A0 highlighter =3D lucene.Highlighter(formatter,
>>>> lucene.HighlighterSpanScorer(self.query, "contents", ctokenStream))
>>>> =A0 =A0 =A0 =A0 =A0 ctokenStream.reset()
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 result =3D highlighter.getBestFragments(ctokenStre=
am, text,
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 2, "...")
>>>>
>>>> =A0My highlighter is still breaking up words inside of a span. =A0For
>>>>
>>>
>>> example,
>>>
>>>>
>>>> if I search for \"John Smith\", instead of the highlighter being calle=
d
>>>>
>>>
>>> for
>>>
>>>>
>>>> the whole "John Smith", it gets called for "John" and then "Smith".
>>>>
>>>
>>> I think you need to use SimpleSpanFragmenter (vs SimpleFragmenter,
>>> which is the default used by Highlighter) to ensure that each fragment
>>> contains a full match for the query. =A0EG something like this (copied
>>> from LIA 2nd edition):
>>>
>>> =A0 TermQuery query =3D new TermQuery(new Term("field", "fox"));
>>>
>>> =A0 TokenStream tokenStream =3D
>>> =A0 =A0 =A0 new SimpleAnalyzer().tokenStream("field",
>>> =A0 =A0 =A0 =A0 =A0 new StringReader(text));
>>>
>>> =A0 SpanScorer scorer =3D new SpanScorer(query, "field",
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0new
>>> CachingTokenFilter(tokenStream));
>>> =A0 Fragmenter fragmenter =3D new SimpleSpanFragmenter(scorer);
>>> =A0 Highlighter highlighter =3D new Highlighter(scorer);
>>> =A0 highlighter.setTextFragmenter(fragmenter);
>>>
>>
>>
>>
>> Okay, I hacked something up in Java that illustrates my issue.
>>
>>
>> import org.apache.lucene.search.*;
>> import org.apache.lucene.analysis.*;
>> import org.apache.lucene.document.*;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.index.Term;
>> import org.apache.lucene.queryParser.QueryParser;
>> import org.apache.lucene.store.Directory;
>> import org.apache.lucene.store.RAMDirectory;
>> import org.apache.lucene.search.highlight.*;
>> import org.apache.lucene.search.spans.SpanTermQuery;
>> import java.io.Reader;
>> import java.io.StringReader;
>>
>> public class PhraseTest {
>> =A0 =A0private IndexSearcher searcher;
>> =A0 =A0private RAMDirectory directory;
>>
>> =A0 =A0public PhraseTest() throws Exception {
>> =A0 =A0 =A0 =A0directory =3D new RAMDirectory();
>>
>> =A0 =A0 =A0 =A0Analyzer analyzer =3D new Analyzer() {
>> =A0 =A0 =A0 =A0 =A0 =A0public TokenStream tokenStream(String fieldName, =
Reader reader)
>> {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0return new WhitespaceTokenizer(reader);
>> =A0 =A0 =A0 =A0 =A0 =A0}
>>
>> =A0 =A0 =A0 =A0 =A0 =A0public int getPositionIncrementGap(String fieldNa=
me) {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0return 100;
>> =A0 =A0 =A0 =A0 =A0 =A0}
>> =A0 =A0 =A0 =A0};
>>
>> =A0 =A0 =A0 =A0IndexWriter writer =3D new IndexWriter(directory, analyze=
r, true,
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexWriter.MaxFieldLength.LIMITED);
>>
>> =A0 =A0 =A0 =A0Document doc =3D new Document();
>> =A0 =A0 =A0 =A0String text =3D "Jimbo John is his name";
>> =A0 =A0 =A0 =A0doc.add(new Field("contents", text, Field.Store.YES,
>> Field.Index.ANALYZED));
>> =A0 =A0 =A0 =A0writer.addDocument(doc);
>>
>> =A0 =A0 =A0 =A0writer.optimize();
>> =A0 =A0 =A0 =A0writer.close();
>>
>> =A0 =A0 =A0 =A0searcher =3D new IndexSearcher(directory);
>>
>> =A0 =A0 =A0 =A0// Try a phrase query
>> =A0 =A0 =A0 =A0PhraseQuery phraseQuery =3D new PhraseQuery();
>> =A0 =A0 =A0 =A0phraseQuery.add(new Term("contents", "Jimbo"));
>> =A0 =A0 =A0 =A0phraseQuery.add(new Term("contents", "John"));
>>
>> =A0 =A0 =A0 =A0// Try a SpanTermQuery
>> =A0 =A0 =A0 =A0SpanTermQuery spanTermQuery =3D new SpanTermQuery(new
>> Term("contents",
>> "Jimbo John"));
>>
>> =A0 =A0 =A0 =A0// Try a parsed query
>> =A0 =A0 =A0 =A0Query parsedQuery =3D new QueryParser("contents",
>> analyzer).parse("\"Jimbo John\"");
>>
>> =A0 =A0 =A0 =A0Hits hits =3D searcher.search(parsedQuery);
>> =A0 =A0 =A0 =A0System.out.println("We found " + hits.length() + " hits."=
);
>>
>> =A0 =A0 =A0 =A0// Highlight the results
>> =A0 =A0 =A0 =A0CachingTokenFilter tokenStream =3D new
>> CachingTokenFilter(analyzer.tokenStream( "contents", new
>> StringReader(text)));
>>
>> =A0 =A0 =A0 =A0SimpleHTMLFormatter formatter =3D new SimpleHTMLFormatter=
();
>>
>> =A0 =A0 =A0 =A0SpanScorer sc =3D new SpanScorer(parsedQuery, "contents",
>> tokenStream,
>> "contents");
>>
>> =A0 =A0 =A0 =A0Highlighter highlighter =3D new Highlighter(formatter, sc=
);
>> =A0 =A0 =A0 =A0highlighter.setTextFragmenter(new SimpleSpanFragmenter(sc=
));
>> =A0 =A0 =A0 =A0tokenStream.reset();
>>
>> =A0 =A0 =A0 =A0String rv =3D highlighter.getBestFragments(tokenStream, t=
ext, 1,
>> "...");
>> =A0 =A0 =A0 =A0System.out.println(rv);
>>
>> =A0 =A0}
>> =A0 =A0public static void main(String[] args) {
>> =A0 =A0 =A0 =A0System.out.println("Starting...");
>> =A0 =A0 =A0 =A0try {
>> =A0 =A0 =A0 =A0 =A0 =A0PhraseTest pt =3D new PhraseTest();
>> =A0 =A0 =A0 =A0} catch(Exception ex) {
>> =A0 =A0 =A0 =A0 =A0 =A0ex.printStackTrace();
>> =A0 =A0 =A0 =A0}
>> =A0 =A0}
>> }
>>
>>
>>
>> The output I'm getting is instead of highlighting <B>Jimbo John</B> it
>> does
>> <B>Jimbo</B> then <B>John</B>. =A0Can I get around this some how? =A0I t=
ried
>> several different query types (they are declared in the code, but only t=
he
>> parsed version is being used).
>>
>> Thanks
>> -max
>>
>>
>
> Sorry, not much you can do at the moment. The change is non trivial for s=
ure
> (its probably easier to write some regex that merges them). This limitati=
on
> was accepted because with most markup, it will display the same anyway. A=
n
> option to merge would be great, and while I don't remember the details, t=
he
> last time I looked, it just ain't easy to do based on the implementation.
> The highlighter highlights by running through and scoring tokens, not
> phrases, and the Span highlighter asks if a given token is in a given spa=
n
> to see if it should get a score over 0. Token by token handed off to the
> SpanScorer to be scored. I looked into adding the option at one point (ba=
ck
> when I was putting the SpanScorer together) and didn't find it worth the
> effort after getting blocked a couple times.
>
>
> --
> - Mark
>
> http://www.lucidimagination.com
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 11:18:41 2009
Return-Path: <java-user-return-40600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88431 invoked from network); 4 Jun 2009 11:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 11:18:41 -0000
Received: (qmail 98355 invoked by uid 500); 4 Jun 2009 11:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98289 invoked by uid 500); 4 Jun 2009 11:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98279 invoked by uid 99); 4 Jun 2009 11:18:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 11:18:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 11:18:41 +0000
Received: by an-out-0708.google.com with SMTP id b6so334052ana.5
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 04:18:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=o34CwwUpuKdXeKlBNYEp9vU6hxbvFLDlJ/E7yGjxxho=;
        b=XhCH1g9HSWXetu9moiJy7LKmXjKxmbxhztDW44V4OIkXYkFVYeHY3yVHbNC8l94uvv
         kknZLMbMQxQavhIZD2Zfb4ZedyPCj8rdCSvboms3+8QXkS6VIaVCRT7VdeV/dcYo1hCV
         uIE+2Ky2lzsOoSKTboeMq2fjFomL2JYvVTLNU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lRtilXOmN+1MafThPSzBIUjmSY2rMmtak+XFow1UviNsfrfa82Z3OtQjGafrZ3bSY7
         JrjTGI4++9DB84731Tr1vWd24IhKeG9F8i6gZvk8mumNJ9lAktHDNGSpspAH17GPMRhg
         jmxR6t8IUFpCD/B5m0VFSOi86KYJv8i73gMGA=
MIME-Version: 1.0
Received: by 10.100.141.20 with SMTP id o20mr2394776and.40.1244114300429; Thu, 
	04 Jun 2009 04:18:20 -0700 (PDT)
In-Reply-To: <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com>
	 <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com>
Date: Thu, 4 Jun 2009 07:18:20 -0400
Message-ID: <8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e645ba42efebb6046b83ee21
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e645ba42efebb6046b83ee21
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

KK, ok, so you only really want to stem the english. This is good.

Is it possible for you to consider using solr? solr's default analyzer for
type 'text' will be good for your case. it will do the following
1. tokenize on whitespace
2. handle both indian language and english punctuation
3. lowercase the english.
4. stem the english.

try a nightly build, http://people.apache.org/builds/lucene/solr/nightly/

On Thu, Jun 4, 2009 at 1:12 AM, KK <dioxide.software@gmail.com> wrote:

> Muir, thanks for your response.
> I'm indexing indian language web pages which has got descent amount of
> english content mixed with therein. For the time being I'm not going to use
> any stemmers as we don't have standard stemmers for indian languages . So
> what I want to do is like this,
> Say I've a web page having hindi content with 5% english content. Then for
> hindi I want to use the basic white space analyzer as we dont have stemmers
> for this as I mentioned earlier and whereever english appears I want them
> to
> be stemmed tokenized etc[the standard process used for english content]. As
> of now I'm using whitespace analyzer for the full content which doesnot
> support case folding, stemming etc for teh content. So if there is an
> english word say "Detection" indexed as such then searching for detection
> or
> detect is not giving any results, which is the expected behavior, but I
> want
> this kind of queries to give results.
> I hope I made it clear. Let me know any ideas on doing the same. And one
> more thing, I'm storing the full webpage content under a single field, I
> hope this will not make any difference, right?
> It seems I've to use language identifiers, but do we really need that?
> Because we've only non-english content mixed with english[and not french or
> russian etc].
>
> What is the best way of approaching the problem? Any thoughts!
>
> Thanks,
> KK.
>
> On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > KK, is all of your latin script text actually english? Is there stuff
> like
> > german or french mixed in?
> >
> > And for your non-english content (your examples have been indian writing
> > systems), is it generally true that if you had devanagari, you can assume
> > its hindi? or is there stuff like marathi mixed in?
> >
> > Reason I say this is to invoke the right stemmers, you really need some
> > language detection, but perhaps in your case you can cheat and detect
> this
> > based on scripts...
> >
> > Thanks,
> > Robert
> >
> >
> > On Wed, Jun 3, 2009 at 10:15 AM, KK <dioxide.software@gmail.com> wrote:
> >
> > > Hi All,
> > > I'm indexing some non-english content. But the page also contains
> english
> > > content. As of now I'm using WhitespaceAnalyzer for all content and I'm
> > > storing the full webpage content under a single filed. Now we require
> to
> > > support case folding and stemmming for the english content intermingled
> > > with
> > > non-english content. I must metion that we dont have stemming and case
> > > folding for these non-english content. I'm stuck with this. Some one do
> > let
> > > me know how to proceed for fixing this issue.
> > >
> > > Thanks,
> > > KK.
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>



-- 
Robert Muir
rcmuir@gmail.com

--0016e645ba42efebb6046b83ee21--

From java-user-return-40601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 11:24:35 2009
Return-Path: <java-user-return-40601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89494 invoked from network); 4 Jun 2009 11:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 11:24:35 -0000
Received: (qmail 9985 invoked by uid 500); 4 Jun 2009 11:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9935 invoked by uid 500); 4 Jun 2009 11:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9925 invoked by uid 99); 4 Jun 2009 11:24:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 11:24:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.221.204 as permitted sender)
Received: from [209.85.221.204] (HELO mail-qy0-f204.google.com) (209.85.221.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 11:24:33 +0000
Received: by mail-qy0-f204.google.com with SMTP id 42so968687qyk.29
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 04:24:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=IaSuhB7YwM4CBZMk7thvH++QtFzVuuZT4LJKFEjPg8M=;
        b=r0h8sCCO2rG7yLkXO5K1Oykes7Aepv5Q4YxB7NFb3LlqONphZm2WLxqEHkLgu4YNMl
         6dkV1b9WcmVjC5ROQUQ/2HozleNVlziLlpX7Exv8UJd1OZ0lGv/h6oR9AwONWL1F7Hy4
         /3mh8Z+k4OCT+8ka1gEPqar4tcDcObqJoH6Ts=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=gbhnHLujMj4a0c0Wyb8kFhuCPgWZ82S0n5TUs5iE2bBBj81oNOgLmVYLD/XV9PrGWV
         9s7S9oYY9mlKfSg5lQhquZ7uXjpEfrwFT42ODF08WoXnk9YwhMBLNh3sKiFer6rrFcWk
         +xehAdtutVnjJsJdNB+x4k7yfGXamQMfRyFqs=
Received: by 10.224.45.210 with SMTP id g18mr2143961qaf.171.1244114653292;
        Thu, 04 Jun 2009 04:24:13 -0700 (PDT)
Received: from ?192.168.1.120? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm382607qwf.39.2009.06.04.04.24.12
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Jun 2009 04:24:12 -0700 (PDT)
Message-ID: <4A27AEDC.6040902@gmail.com>
Date: Thu, 04 Jun 2009 07:24:12 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Phrase Highlighting
References: <3836ec640904281849s271e7ad0k380d6978c9117a76@mail.gmail.com>	 <9ac0c6aa0904290227k4cb08938ic55503688ac02bd8@mail.gmail.com>	 <3836ec640904292115v4a49f532ofe54a3c221f42100@mail.gmail.com>	 <9ac0c6aa0904300316t1eb4ab0fma543adac285ecafa@mail.gmail.com>	 <3836ec640905211209j769436d1j31250d7ecc44ab3c@mail.gmail.com>	 <9ac0c6aa0905211439t15e99412v30e8daf2f4f644fb@mail.gmail.com>	 <3836ec640906021757r2fab24aarfe3cf55b1cc0036c@mail.gmail.com>	 <4A271692.4040905@gmail.com> <9ac0c6aa0906040409u2a6db4a4qee9dfc9308fdf47a@mail.gmail.com>
In-Reply-To: <9ac0c6aa0906040409u2a6db4a4qee9dfc9308fdf47a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, the highlighter framework as is is certainly limiting. When I 
first did the SpanHighlighter without trying to fit it into the old 
Highlighter (an early incomplete prototype type thing anyway) I made 
them merge right off the bat because it was very easy. That was because 
I could just use the span positions I got back in any manner I wanted to 
work with the tokens and create the text. To get things to work a token 
at a time though (you give me a token, I score it), I did things kind of 
differently where I collect all the valid spans for each token, and if a 
token falls in a valid span for that token (calculated ahead of time), I 
highlight it. I think that just makes it harder to deal with getting 
things right with overlap and what not. Its also difficult to talk to 
the Formatter from the Scorer to do the markup right without weird hacks 
where they talk to each other hard coded style or something. Its 
certainly not impossible, but it just ended up being much harder to get 
right with the current framework. Of course, I wasn't considering 
changing the framework at the time (wasn't even a contrib committer at 
the time), so perhaps there is something that could be done to ease 
things there (eg a way for the Scorer to communicate with the 
Formatter). I don't have a complete memory of all the issues really though.

I also don't want to discourage anyone from trying to get something 
going. Its not impossible, but it was just darn hard to get right with 
the current API. I've always just recommended post processing.

- Mark

Michael McCandless wrote:
> Mark, is this because the highlighter package doesn't include enough
> information as to why the fragmenter picked a given fragment?
>
> Because... the SpanScorer is in fact doing all the work to properly
> locate the full span for the phrase (I think?), so it's ashame that
> because there's no way for it to "communicate" this information to the
> formatter.  The strong decoupling of fragmenting from highlighting is
> hurting us here...
>
> Mike
>
> On Wed, Jun 3, 2009 at 8:34 PM, Mark Miller <markrmiller@gmail.com> wrote:
>   
>> Max Lynch wrote:
>>     
>>>> Well what happens is if I use a SpanScorer instead, and allocate it like
>>>>
>>>>         
>>>       
>>>>> such:
>>>>>
>>>>>           analyzer = StandardAnalyzer([])
>>>>>           tokenStream = analyzer.tokenStream("contents",
>>>>> lucene.StringReader(text))
>>>>>           ctokenStream = lucene.CachingTokenFilter(tokenStream)
>>>>>           highlighter = lucene.Highlighter(formatter,
>>>>> lucene.HighlighterSpanScorer(self.query, "contents", ctokenStream))
>>>>>           ctokenStream.reset()
>>>>>
>>>>>           result = highlighter.getBestFragments(ctokenStream, text,
>>>>>                   2, "...")
>>>>>
>>>>>  My highlighter is still breaking up words inside of a span.  For
>>>>>
>>>>>           
>>>> example,
>>>>
>>>>         
>>>>> if I search for \"John Smith\", instead of the highlighter being called
>>>>>
>>>>>           
>>>> for
>>>>
>>>>         
>>>>> the whole "John Smith", it gets called for "John" and then "Smith".
>>>>>
>>>>>           
>>>> I think you need to use SimpleSpanFragmenter (vs SimpleFragmenter,
>>>> which is the default used by Highlighter) to ensure that each fragment
>>>> contains a full match for the query.  EG something like this (copied
>>>> from LIA 2nd edition):
>>>>
>>>>   TermQuery query = new TermQuery(new Term("field", "fox"));
>>>>
>>>>   TokenStream tokenStream =
>>>>       new SimpleAnalyzer().tokenStream("field",
>>>>           new StringReader(text));
>>>>
>>>>   SpanScorer scorer = new SpanScorer(query, "field",
>>>>                                      new
>>>> CachingTokenFilter(tokenStream));
>>>>   Fragmenter fragmenter = new SimpleSpanFragmenter(scorer);
>>>>   Highlighter highlighter = new Highlighter(scorer);
>>>>   highlighter.setTextFragmenter(fragmenter);
>>>>
>>>>         
>>>
>>> Okay, I hacked something up in Java that illustrates my issue.
>>>
>>>
>>> import org.apache.lucene.search.*;
>>> import org.apache.lucene.analysis.*;
>>> import org.apache.lucene.document.*;
>>> import org.apache.lucene.index.IndexWriter;
>>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>> import org.apache.lucene.index.Term;
>>> import org.apache.lucene.queryParser.QueryParser;
>>> import org.apache.lucene.store.Directory;
>>> import org.apache.lucene.store.RAMDirectory;
>>> import org.apache.lucene.search.highlight.*;
>>> import org.apache.lucene.search.spans.SpanTermQuery;
>>> import java.io.Reader;
>>> import java.io.StringReader;
>>>
>>> public class PhraseTest {
>>>    private IndexSearcher searcher;
>>>    private RAMDirectory directory;
>>>
>>>    public PhraseTest() throws Exception {
>>>        directory = new RAMDirectory();
>>>
>>>        Analyzer analyzer = new Analyzer() {
>>>            public TokenStream tokenStream(String fieldName, Reader reader)
>>> {
>>>                return new WhitespaceTokenizer(reader);
>>>            }
>>>
>>>            public int getPositionIncrementGap(String fieldName) {
>>>                return 100;
>>>            }
>>>        };
>>>
>>>        IndexWriter writer = new IndexWriter(directory, analyzer, true,
>>>                IndexWriter.MaxFieldLength.LIMITED);
>>>
>>>        Document doc = new Document();
>>>        String text = "Jimbo John is his name";
>>>        doc.add(new Field("contents", text, Field.Store.YES,
>>> Field.Index.ANALYZED));
>>>        writer.addDocument(doc);
>>>
>>>        writer.optimize();
>>>        writer.close();
>>>
>>>        searcher = new IndexSearcher(directory);
>>>
>>>        // Try a phrase query
>>>        PhraseQuery phraseQuery = new PhraseQuery();
>>>        phraseQuery.add(new Term("contents", "Jimbo"));
>>>        phraseQuery.add(new Term("contents", "John"));
>>>
>>>        // Try a SpanTermQuery
>>>        SpanTermQuery spanTermQuery = new SpanTermQuery(new
>>> Term("contents",
>>> "Jimbo John"));
>>>
>>>        // Try a parsed query
>>>        Query parsedQuery = new QueryParser("contents",
>>> analyzer).parse("\"Jimbo John\"");
>>>
>>>        Hits hits = searcher.search(parsedQuery);
>>>        System.out.println("We found " + hits.length() + " hits.");
>>>
>>>        // Highlight the results
>>>        CachingTokenFilter tokenStream = new
>>> CachingTokenFilter(analyzer.tokenStream( "contents", new
>>> StringReader(text)));
>>>
>>>        SimpleHTMLFormatter formatter = new SimpleHTMLFormatter();
>>>
>>>        SpanScorer sc = new SpanScorer(parsedQuery, "contents",
>>> tokenStream,
>>> "contents");
>>>
>>>        Highlighter highlighter = new Highlighter(formatter, sc);
>>>        highlighter.setTextFragmenter(new SimpleSpanFragmenter(sc));
>>>        tokenStream.reset();
>>>
>>>        String rv = highlighter.getBestFragments(tokenStream, text, 1,
>>> "...");
>>>        System.out.println(rv);
>>>
>>>    }
>>>    public static void main(String[] args) {
>>>        System.out.println("Starting...");
>>>        try {
>>>            PhraseTest pt = new PhraseTest();
>>>        } catch(Exception ex) {
>>>            ex.printStackTrace();
>>>        }
>>>    }
>>> }
>>>
>>>
>>>
>>> The output I'm getting is instead of highlighting <B>Jimbo John</B> it
>>> does
>>> <B>Jimbo</B> then <B>John</B>.  Can I get around this some how?  I tried
>>> several different query types (they are declared in the code, but only the
>>> parsed version is being used).
>>>
>>> Thanks
>>> -max
>>>
>>>
>>>       
>> Sorry, not much you can do at the moment. The change is non trivial for sure
>> (its probably easier to write some regex that merges them). This limitation
>> was accepted because with most markup, it will display the same anyway. An
>> option to merge would be great, and while I don't remember the details, the
>> last time I looked, it just ain't easy to do based on the implementation.
>> The highlighter highlights by running through and scoring tokens, not
>> phrases, and the Span highlighter asks if a given token is in a given span
>> to see if it should get a score over 0. Token by token handed off to the
>> SpanScorer to be scored. I looked into adding the option at one point (back
>> when I was putting the SpanScorer together) and didn't find it worth the
>> effort after getting blocked a couple times.
>>
>>
>> --
>> - Mark
>>
>> http://www.lucidimagination.com
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 11:51:33 2009
Return-Path: <java-user-return-40602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94672 invoked from network); 4 Jun 2009 11:51:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 11:51:32 -0000
Received: (qmail 40530 invoked by uid 500); 4 Jun 2009 11:51:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40468 invoked by uid 500); 4 Jun 2009 11:51:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40458 invoked by uid 99); 4 Jun 2009 11:51:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 11:51:42 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 11:51:31 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id BD597D36002
	for <java-user@lucene.apache.org>; Thu,  4 Jun 2009 13:51:10 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OFKRZZF7yUst for <java-user@lucene.apache.org>;
	Thu,  4 Jun 2009 13:51:02 +0200 (CEST)
Received: from VEGA (gate2.marum.de [134.102.237.2])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 5D225D36001
	for <java-user@lucene.apache.org>; Thu,  4 Jun 2009 13:51:02 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> <8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com> <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com> <8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com>
Subject: RE: How to support stemming and case folding for english content mixed with non-english content?
Date: Thu, 4 Jun 2009 13:51:00 +0200
Message-ID: <ED1D56A848EF4BE6A4C5398C2782F470@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com>
Thread-Index: AcnlBkb407ATzt1cQvChl4cAV5wCMwABFufQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

You can also re-use the solr analyzers, as far as I found out. There is an
issue in jIRA/discussion on java-dev to merge them.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Thursday, June 04, 2009 1:18 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to support stemming and case folding for english content
> mixed with non-english content?
> 
> KK, ok, so you only really want to stem the english. This is good.
> 
> Is it possible for you to consider using solr? solr's default analyzer for
> type 'text' will be good for your case. it will do the following
> 1. tokenize on whitespace
> 2. handle both indian language and english punctuation
> 3. lowercase the english.
> 4. stem the english.
> 
> try a nightly build, http://people.apache.org/builds/lucene/solr/nightly/
> 
> On Thu, Jun 4, 2009 at 1:12 AM, KK <dioxide.software@gmail.com> wrote:
> 
> > Muir, thanks for your response.
> > I'm indexing indian language web pages which has got descent amount of
> > english content mixed with therein. For the time being I'm not going to
> use
> > any stemmers as we don't have standard stemmers for indian languages .
> So
> > what I want to do is like this,
> > Say I've a web page having hindi content with 5% english content. Then
> for
> > hindi I want to use the basic white space analyzer as we dont have
> stemmers
> > for this as I mentioned earlier and whereever english appears I want
> them
> > to
> > be stemmed tokenized etc[the standard process used for english content].
> As
> > of now I'm using whitespace analyzer for the full content which doesnot
> > support case folding, stemming etc for teh content. So if there is an
> > english word say "Detection" indexed as such then searching for
> detection
> > or
> > detect is not giving any results, which is the expected behavior, but I
> > want
> > this kind of queries to give results.
> > I hope I made it clear. Let me know any ideas on doing the same. And one
> > more thing, I'm storing the full webpage content under a single field, I
> > hope this will not make any difference, right?
> > It seems I've to use language identifiers, but do we really need that?
> > Because we've only non-english content mixed with english[and not french
> or
> > russian etc].
> >
> > What is the best way of approaching the problem? Any thoughts!
> >
> > Thanks,
> > KK.
> >
> > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> > > KK, is all of your latin script text actually english? Is there stuff
> > like
> > > german or french mixed in?
> > >
> > > And for your non-english content (your examples have been indian
> writing
> > > systems), is it generally true that if you had devanagari, you can
> assume
> > > its hindi? or is there stuff like marathi mixed in?
> > >
> > > Reason I say this is to invoke the right stemmers, you really need
> some
> > > language detection, but perhaps in your case you can cheat and detect
> > this
> > > based on scripts...
> > >
> > > Thanks,
> > > Robert
> > >
> > >
> > > On Wed, Jun 3, 2009 at 10:15 AM, KK <dioxide.software@gmail.com>
> wrote:
> > >
> > > > Hi All,
> > > > I'm indexing some non-english content. But the page also contains
> > english
> > > > content. As of now I'm using WhitespaceAnalyzer for all content and
> I'm
> > > > storing the full webpage content under a single filed. Now we
> require
> > to
> > > > support case folding and stemmming for the english content
> intermingled
> > > > with
> > > > non-english content. I must metion that we dont have stemming and
> case
> > > > folding for these non-english content. I'm stuck with this. Some one
> do
> > > let
> > > > me know how to proceed for fixing this issue.
> > > >
> > > > Thanks,
> > > > KK.
> > > >
> > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
> 
> 
> 
> --
> Robert Muir
> rcmuir@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 12:00:45 2009
Return-Path: <java-user-return-40603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96847 invoked from network); 4 Jun 2009 12:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 12:00:45 -0000
Received: (qmail 58551 invoked by uid 500); 4 Jun 2009 12:00:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58482 invoked by uid 500); 4 Jun 2009 12:00:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58472 invoked by uid 99); 4 Jun 2009 12:00:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:00:54 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:00:43 +0000
Received: by an-out-0708.google.com with SMTP id b6so345733ana.5
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 05:00:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=B02B300TEUovv0WsobIV8HEmGPVUadtQAjXTNqjW2vY=;
        b=YOMHRTH4IDFq/Rb1DeLm/pxK+H//PV16R9y1PLLX1S0gGTrhIwUpHpPl8kFK9Qa/Si
         P0YZmcS3to1sYlYF7lvNrgwD7habySy8Fb0j9cycOa0SqPSvMTBrDYuOsGvzrJqpDBzs
         6VXo9/pa/x5lTR+9p2Mogbw7WfHuobi1je3pw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GJdlp1Lh0p9vM4HA9m6xN6TcBbN2V8jOihvVaI4P9FEfHcCGHFNjTRizEabc/z6daP
         ipPOmPnc3FNUrOpffl43aSNrgztyf/FurTtYlN0gb+88+wqu3NPIW97zZEjlY95Sgnx6
         hMvsWpjsjwAzSb/BQyc259LYFeods6VWhpV/U=
MIME-Version: 1.0
Received: by 10.100.249.5 with SMTP id w5mr2459705anh.28.1244116821959; Thu, 
	04 Jun 2009 05:00:21 -0700 (PDT)
In-Reply-To: <ED1D56A848EF4BE6A4C5398C2782F470@VEGA>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com>
	 <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com>
	 <8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com>
	 <ED1D56A848EF4BE6A4C5398C2782F470@VEGA>
Date: Thu, 4 Jun 2009 08:00:21 -0400
Message-ID: <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e1c2b3b65ac046b848544
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e1c2b3b65ac046b848544
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

yes this is true. for starters KK, might be good to startup solr and look at
http://localhost:8983/solr/admin/analysis.jsp?highlight=on

if you want to stick with lucene, the WordDelimiterFilter is the piece you
will want for your text, mainly for punctuation but also for format
characters such as ZWJ/ZWNJ.

On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> You can also re-use the solr analyzers, as far as I found out. There is an
> issue in jIRA/discussion on java-dev to merge them.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Robert Muir [mailto:rcmuir@gmail.com]
> > Sent: Thursday, June 04, 2009 1:18 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: How to support stemming and case folding for english content
> > mixed with non-english content?
> >
> > KK, ok, so you only really want to stem the english. This is good.
> >
> > Is it possible for you to consider using solr? solr's default analyzer
> for
> > type 'text' will be good for your case. it will do the following
> > 1. tokenize on whitespace
> > 2. handle both indian language and english punctuation
> > 3. lowercase the english.
> > 4. stem the english.
> >
> > try a nightly build,
> http://people.apache.org/builds/lucene/solr/nightly/
> >
> > On Thu, Jun 4, 2009 at 1:12 AM, KK <dioxide.software@gmail.com> wrote:
> >
> > > Muir, thanks for your response.
> > > I'm indexing indian language web pages which has got descent amount of
> > > english content mixed with therein. For the time being I'm not going to
> > use
> > > any stemmers as we don't have standard stemmers for indian languages .
> > So
> > > what I want to do is like this,
> > > Say I've a web page having hindi content with 5% english content. Then
> > for
> > > hindi I want to use the basic white space analyzer as we dont have
> > stemmers
> > > for this as I mentioned earlier and whereever english appears I want
> > them
> > > to
> > > be stemmed tokenized etc[the standard process used for english
> content].
> > As
> > > of now I'm using whitespace analyzer for the full content which doesnot
> > > support case folding, stemming etc for teh content. So if there is an
> > > english word say "Detection" indexed as such then searching for
> > detection
> > > or
> > > detect is not giving any results, which is the expected behavior, but I
> > > want
> > > this kind of queries to give results.
> > > I hope I made it clear. Let me know any ideas on doing the same. And
> one
> > > more thing, I'm storing the full webpage content under a single field,
> I
> > > hope this will not make any difference, right?
> > > It seems I've to use language identifiers, but do we really need that?
> > > Because we've only non-english content mixed with english[and not
> french
> > or
> > > russian etc].
> > >
> > > What is the best way of approaching the problem? Any thoughts!
> > >
> > > Thanks,
> > > KK.
> > >
> > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <rcmuir@gmail.com> wrote:
> > >
> > > > KK, is all of your latin script text actually english? Is there stuff
> > > like
> > > > german or french mixed in?
> > > >
> > > > And for your non-english content (your examples have been indian
> > writing
> > > > systems), is it generally true that if you had devanagari, you can
> > assume
> > > > its hindi? or is there stuff like marathi mixed in?
> > > >
> > > > Reason I say this is to invoke the right stemmers, you really need
> > some
> > > > language detection, but perhaps in your case you can cheat and detect
> > > this
> > > > based on scripts...
> > > >
> > > > Thanks,
> > > > Robert
> > > >
> > > >
> > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <dioxide.software@gmail.com>
> > wrote:
> > > >
> > > > > Hi All,
> > > > > I'm indexing some non-english content. But the page also contains
> > > english
> > > > > content. As of now I'm using WhitespaceAnalyzer for all content and
> > I'm
> > > > > storing the full webpage content under a single filed. Now we
> > require
> > > to
> > > > > support case folding and stemmming for the english content
> > intermingled
> > > > > with
> > > > > non-english content. I must metion that we dont have stemming and
> > case
> > > > > folding for these non-english content. I'm stuck with this. Some
> one
> > do
> > > > let
> > > > > me know how to proceed for fixing this issue.
> > > > >
> > > > > Thanks,
> > > > > KK.
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > > >
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016368e1c2b3b65ac046b848544--

From java-user-return-40604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 12:04:36 2009
Return-Path: <java-user-return-40604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97862 invoked from network); 4 Jun 2009 12:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 12:04:36 -0000
Received: (qmail 65165 invoked by uid 500); 4 Jun 2009 12:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65125 invoked by uid 500); 4 Jun 2009 12:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65115 invoked by uid 99); 4 Jun 2009 12:04:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:04:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:04:37 +0000
Received: by gxk11 with SMTP id 11so1205418gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 05:04:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:from:date
         :x-google-sender-auth:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=D5M4T82oEQODggXmNw2mRsRWnmxXrb/7Jpe5uCzIv6Q=;
        b=M4lt7cleHQZqOgZB6AbXoShgK/Z7qgsb+cUpSQkqKP1fM012dY+tsFpoDymX3z1OA0
         m5ilqlX5ncaJvDsdFSlkCuHFP6RVbuYkVfkGW6ntq+oSyWsYOABWcQbd8S6HGCyF/AnF
         eO/20wuJHJnf3uhM6c1pbtebGpEpOg36r6KAQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type:content-transfer-encoding;
        b=xRDgNgfcFSMsi9IsrvHJlywMlUoKRok6Pc+SCTHAYihCL6tfVxWsLBVvaCzErTdi7Z
         ymWVUriMeFHsbsvQN6R7ukKgfAZ+G6kBQeXyepbKz9bwYTAFEKGYBCFNoMKxmR5rTmf/
         JClZnQju0BVtnsg8bEumQI2l9Zxeb4oOyvfDg=
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.151.125.10 with SMTP id c10mr3431648ybn.213.1244117056139; 
	Thu, 04 Jun 2009 05:04:16 -0700 (PDT)
From: Shashi Kant <skant@sloan.mit.edu>
Date: Thu, 4 Jun 2009 08:03:56 -0400
X-Google-Sender-Auth: ed8254f6c0745784
Message-ID: <4d19a3630906040503t166bf687i8475c35a0547badc@mail.gmail.com>
Subject: P2P Lucene
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I am writing to gauge the group's interest level in building a P2P
application using Lucene. Nothing fancy, just good old-fashioned P2P
search across one's social-network or work-network (very unlike
Gnutella, Kazaa etc.). The obvious business-case for this could be
many such as document sharing/location within organizations without
centralized repositories. As is well known - intentionally or
inadvertently - most documents are locked-up in individual computers
and such a tool could provide a powerful discovery mechanism.

I was thinking of create an F/OSS project leveraging Lucene and
Jabber/XMPP, but something far more lightweight than comparable
"groupware" projects with a dead-simple permission-based sharing
system. Lightweight simplicity being the operative words.

Just curious to see the interest level in collaborating on such an
effort, and/or sharing any other ideas where such an effort would be
helpful.

Thanks,
Shashi

skant@alum.mit.edu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 12:29:35 2009
Return-Path: <java-user-return-40605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11798 invoked from network); 4 Jun 2009 12:29:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 12:29:35 -0000
Received: (qmail 99421 invoked by uid 500); 4 Jun 2009 12:29:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99369 invoked by uid 500); 4 Jun 2009 12:29:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99359 invoked by uid 99); 4 Jun 2009 12:29:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:29:44 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dioxide.software@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:29:33 +0000
Received: by pxi17 with SMTP id 17so621258pxi.29
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 05:29:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=zPczWqLfNsUwKIaPOEn9YviG9gFvPq97G2CvIJPcPkE=;
        b=Ma8BnhHvcsBt6YuQX7s0mtzUnxR37gmD4K9uNeZjKCjv+eDLhComHniG1AeFnvFN8H
         rk5JwGQGF9Gs1Il/YAsIttRygPcZ/eO2YMaOeyp1xLQc+Gvw8I2b1d63u+m/ELynGoRb
         ozmVArbjHFKzPNRzLeAq+CWdNo0DoLyOO+csg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=X/KZtTRLb7RZmX7R5bcSo18282Qc0Z/uM9vt/wWmeyCqZaM3unMLQ4+MYTktVQdqcg
         C8OlzomGUVj7lUbgslydTPcnAehjijfZpq0Iofyvp/HA19ZsqGvKSju5vVcBZQtJ2pSY
         RuTWsFgcxpOSBouR97fxAENqhr6X/nlJLTDoY=
MIME-Version: 1.0
Received: by 10.142.200.3 with SMTP id x3mr734380wff.246.1244118552082; Thu, 
	04 Jun 2009 05:29:12 -0700 (PDT)
In-Reply-To: <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com> 
	<8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com> 
	<8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com> 
	<ED1D56A848EF4BE6A4C5398C2782F470@VEGA> <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Thu, 4 Jun 2009 17:58:52 +0530
Message-ID: <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd258305afaf2046b84ec42
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd258305afaf2046b84ec42
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thank you all.
To be frank I was using Solr in the begining half a month ago. The
problem[rather bug] with solr was creation of new index on the fly. Though
they have a restful method for teh same, but it was not working. If I
remember properly one of Solr commiter "Noble Paul"[I dont know his real
name] was trying to help me. I tried many nightly builds and spending a
couple of days stuck at that made me think of lucene and I switched to it.
Now after working with lucene which gives you full control of everything I
don't want to switch to Solr.[LOL, to me Solr:Lucene is similar to
Window$:Linux, its my view only, though]. Coming back to the point as Uwe
mentioned that we can do the same thing in lucene as well, what is available
in Solr, Solr is based on Lucene only, right?
I request Uwe to give me some more ideas on using the analyzers from solr
that will do the job for me, handling a mix of both english and non-english
content.
Muir, can you give me a bit detail description of how to use the
WordDelimiteFilter to do my job.
On a side note, I was thingking of writing a simple analyzer that will do
the following,
#. If the webpage fragment is non-english[for me its some indian language]
then index them as such, no stemming/ stop word removal to begin with. As I
know its in UCN unicode something like \u0021\u0012\u34ae\u0031[just a
sample]
# If the fragment is english then apply standard anlyzing process for
english content. I've not thought of quering in the same way as of now i.e
mix of non-english and engish words.
Now to get all this,
 #1. I need some sort of way which will let me know if the content is
english or not. If not english just add the tokens to the document. Do we
really need language identifiers, as i dont have any other content that uses
the same script as english other than those \u1234 things for my indian
language content. Any smart hack/trick for the same?
 #2. If the its english apply all normal process and add the stemmed token
to document.
For all this I was thinking of iterating earch word of the web page and
apply the above procedure. And finallyadd  the newly created document to the
index.

I would like some one to guide me in this direction. I'm pretty people must
have done similar/same thing earlier, I request them to guide me/ point me
to some tutorials for the same.
Else help me out writing a custom analyzer only if thats not going to be too
complex. LOL, I'm a new user to lucene and know basics of Java coding.
Thank you very much.

--KK.



On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com> wrote:

> yes this is true. for starters KK, might be good to startup solr and look
> at
> http://localhost:8983/solr/admin/analysis.jsp?highlight=on
>
> if you want to stick with lucene, the WordDelimiterFilter is the piece you
> will want for your text, mainly for punctuation but also for format
> characters such as ZWJ/ZWNJ.
>
> On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
> > You can also re-use the solr analyzers, as far as I found out. There is
> an
> > issue in jIRA/discussion on java-dev to merge them.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> > > -----Original Message-----
> > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > Sent: Thursday, June 04, 2009 1:18 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: How to support stemming and case folding for english
> content
> > > mixed with non-english content?
> > >
> > > KK, ok, so you only really want to stem the english. This is good.
> > >
> > > Is it possible for you to consider using solr? solr's default analyzer
> > for
> > > type 'text' will be good for your case. it will do the following
> > > 1. tokenize on whitespace
> > > 2. handle both indian language and english punctuation
> > > 3. lowercase the english.
> > > 4. stem the english.
> > >
> > > try a nightly build,
> > http://people.apache.org/builds/lucene/solr/nightly/
> > >
> > > On Thu, Jun 4, 2009 at 1:12 AM, KK <dioxide.software@gmail.com> wrote:
> > >
> > > > Muir, thanks for your response.
> > > > I'm indexing indian language web pages which has got descent amount
> of
> > > > english content mixed with therein. For the time being I'm not going
> to
> > > use
> > > > any stemmers as we don't have standard stemmers for indian languages
> .
> > > So
> > > > what I want to do is like this,
> > > > Say I've a web page having hindi content with 5% english content.
> Then
> > > for
> > > > hindi I want to use the basic white space analyzer as we dont have
> > > stemmers
> > > > for this as I mentioned earlier and whereever english appears I want
> > > them
> > > > to
> > > > be stemmed tokenized etc[the standard process used for english
> > content].
> > > As
> > > > of now I'm using whitespace analyzer for the full content which
> doesnot
> > > > support case folding, stemming etc for teh content. So if there is an
> > > > english word say "Detection" indexed as such then searching for
> > > detection
> > > > or
> > > > detect is not giving any results, which is the expected behavior, but
> I
> > > > want
> > > > this kind of queries to give results.
> > > > I hope I made it clear. Let me know any ideas on doing the same. And
> > one
> > > > more thing, I'm storing the full webpage content under a single
> field,
> > I
> > > > hope this will not make any difference, right?
> > > > It seems I've to use language identifiers, but do we really need
> that?
> > > > Because we've only non-english content mixed with english[and not
> > french
> > > or
> > > > russian etc].
> > > >
> > > > What is the best way of approaching the problem? Any thoughts!
> > > >
> > > > Thanks,
> > > > KK.
> > > >
> > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> > > >
> > > > > KK, is all of your latin script text actually english? Is there
> stuff
> > > > like
> > > > > german or french mixed in?
> > > > >
> > > > > And for your non-english content (your examples have been indian
> > > writing
> > > > > systems), is it generally true that if you had devanagari, you can
> > > assume
> > > > > its hindi? or is there stuff like marathi mixed in?
> > > > >
> > > > > Reason I say this is to invoke the right stemmers, you really need
> > > some
> > > > > language detection, but perhaps in your case you can cheat and
> detect
> > > > this
> > > > > based on scripts...
> > > > >
> > > > > Thanks,
> > > > > Robert
> > > > >
> > > > >
> > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <dioxide.software@gmail.com>
> > > wrote:
> > > > >
> > > > > > Hi All,
> > > > > > I'm indexing some non-english content. But the page also contains
> > > > english
> > > > > > content. As of now I'm using WhitespaceAnalyzer for all content
> and
> > > I'm
> > > > > > storing the full webpage content under a single filed. Now we
> > > require
> > > > to
> > > > > > support case folding and stemmming for the english content
> > > intermingled
> > > > > > with
> > > > > > non-english content. I must metion that we dont have stemming and
> > > case
> > > > > > folding for these non-english content. I'm stuck with this. Some
> > one
> > > do
> > > > > let
> > > > > > me know how to proceed for fixing this issue.
> > > > > >
> > > > > > Thanks,
> > > > > > KK.
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Robert Muir
> > > > > rcmuir@gmail.com
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

--000e0cd258305afaf2046b84ec42--

From java-user-return-40606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 12:41:08 2009
Return-Path: <java-user-return-40606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15618 invoked from network); 4 Jun 2009 12:41:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 12:41:07 -0000
Received: (qmail 20740 invoked by uid 500); 4 Jun 2009 12:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20701 invoked by uid 500); 4 Jun 2009 12:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20691 invoked by uid 99); 4 Jun 2009 12:41:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:41:17 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:41:08 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id B208445E625
	for <java-user@lucene.apache.org>; Thu,  4 Jun 2009 14:40:48 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Ql+c3rmqyGwH for <java-user@lucene.apache.org>;
	Thu,  4 Jun 2009 14:40:40 +0200 (CEST)
Received: from VEGA (gate2.marum.de [134.102.237.2])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BA80C45E624
	for <java-user@lucene.apache.org>; Thu,  4 Jun 2009 14:40:39 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> <8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com> <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com> <8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com> <ED1D56A848EF4BE6A4C5398C2782F470@VEGA> <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com> <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
Subject: RE: How to support stemming and case folding for english content mixed with non-english content?
Date: Thu, 4 Jun 2009 14:40:37 +0200
Message-ID: <A0F4BAD2649E465587F9977DC0BA273F@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
Thread-Index: AcnlEDBWYldzG6PpR5qdKgSZ62rsvgAATL3g
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

> I request Uwe to give me some more ideas on using the analyzers from solr
> that will do the job for me, handling a mix of both english and non-
> english content.

Look here:
http://lucene.apache.org/solr/api/org/apache/solr/analysis/package-summary.h
tml

As you see, the Solr analyzers are just standard Lucene analyzers. So you
can drop the solr core jar into your project and just use them :-)

Currently I am not sure which one is the analyzer Robert means, that can do
english stemming and detecting non-english parts, but there is to look for
it.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 12:45:08 2009
Return-Path: <java-user-return-40607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16562 invoked from network); 4 Jun 2009 12:45:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 12:45:08 -0000
Received: (qmail 26387 invoked by uid 500); 4 Jun 2009 12:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26337 invoked by uid 500); 4 Jun 2009 12:45:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26265 invoked by uid 99); 4 Jun 2009 12:45:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:45:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dioxide.software@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:45:10 +0000
Received: by pxi17 with SMTP id 17so626684pxi.29
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 05:44:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=ZcHXVA8/wAu5HJaLgj2A5dq7a7YthE1+aeaFdUaJaUQ=;
        b=S4rttkaeeYyAI7QM4PxKA4gDFwvE0iRj9LeuekHRNxcxZI8JPXXLEMaCdw6lvBUIGR
         pOqqmd+Vww2kkNqaxvO1eIegaChEVKXwKXZPod67RoIjhzKmifNveD+XUjcj4n2Ee2eA
         aGifn12hgJEe3x797iJDZ6YyiCTB9dg9MAhiI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=qavae9tncxf2jvcGotxV+GiuYKS/rRzpw4auEKuqVwbDD4ezEPIYYZxkEhRCWh/TYR
         i/sT9Jlf7yK/JKk94KxDUIqaiQu7g5Vhvm9Pe88OrHxYOYq0PShweBMclMhE1dnEd5Zc
         8m+3U0yOsMRea1Nq48oJ9j1WrjIYM11AlP/dM=
MIME-Version: 1.0
Received: by 10.142.126.6 with SMTP id y6mr734542wfc.269.1244119490063; Thu, 
	04 Jun 2009 05:44:50 -0700 (PDT)
In-Reply-To: <A0F4BAD2649E465587F9977DC0BA273F@VEGA>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com> 
	<8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com> 
	<8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com> 
	<ED1D56A848EF4BE6A4C5398C2782F470@VEGA> <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com> 
	<8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com> 
	<A0F4BAD2649E465587F9977DC0BA273F@VEGA>
From: KK <dioxide.software@gmail.com>
Date: Thu, 4 Jun 2009 18:14:30 +0530
Message-ID: <8db6d74a0906040544l4b2b520dif8a7f167a24c47d3@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd3108a436d04046b852429
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd3108a436d04046b852429
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Uwe, thanks for your lightening fast reponse :-).
 I'm looking into that and let me see how far I can go...Also I request Muir
to point me to the exact analyzer he mentiioned in thr previous mail.

Thanks,
KK

On Thu, Jun 4, 2009 at 6:10 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> > I request Uwe to give me some more ideas on using the analyzers from solr
> > that will do the job for me, handling a mix of both english and non-
> > english content.
>
> Look here:
>
> http://lucene.apache.org/solr/api/org/apache/solr/analysis/package-summary.h
> tml<http://lucene.apache.org/solr/api/org/apache/solr/analysis/package-summary.h%0Atml>
>
> As you see, the Solr analyzers are just standard Lucene analyzers. So you
> can drop the solr core jar into your project and just use them :-)
>
> Currently I am not sure which one is the analyzer Robert means, that can do
> english stemming and detecting non-english parts, but there is to look for
> it.
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd3108a436d04046b852429--

From java-user-return-40608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 12:49:48 2009
Return-Path: <java-user-return-40608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18255 invoked from network); 4 Jun 2009 12:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 12:49:48 -0000
Received: (qmail 39136 invoked by uid 500); 4 Jun 2009 12:49:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39071 invoked by uid 500); 4 Jun 2009 12:49:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39061 invoked by uid 99); 4 Jun 2009 12:49:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:49:57 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:49:45 +0000
Received: by an-out-0708.google.com with SMTP id b6so359916ana.5
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 05:49:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=rhPcnP7fLEhZLpOQu5+JmgN0/PAB5/D4Pqf6uHPF37Y=;
        b=Pm/qq1YRCTQV+JZH/DYKX8m78dP4GBMH0MWM33nJRPfKPLWyTKWHyOsRJdYG+3lVsw
         XqUIHK9Iy59+xn9x6AoGO2JDw8NzxylgFMjAhjJcBBH0vAyDXRiYXEgZFyzk1HO3Hyud
         T4jorgzSxQDfEBqE1LyBXC/9jIyz7bM4IDQdI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=fYgDqdEq9C5eTqnlM/Fs0jaOt0Fqjt+VT33tTGQxjoK/atq0ilbrMSW+qRk52IPku+
         cyTFecbAI4ADRUFu8IpCdCaKteX2H+XIHs5cJABYGzX6maNYn9FHHLQnu6n7xUu+EtbG
         zKSPfWdHiU/3w3N4J9G0u4TpwDk0P1M5KGUDw=
MIME-Version: 1.0
Received: by 10.100.205.15 with SMTP id c15mr2574696ang.5.1244119763860; Thu, 
	04 Jun 2009 05:49:23 -0700 (PDT)
In-Reply-To: <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com>
	 <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com>
	 <8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com>
	 <ED1D56A848EF4BE6A4C5398C2782F470@VEGA>
	 <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com>
	 <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
Date: Thu, 4 Jun 2009 08:49:23 -0400
Message-ID: <8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016369202cb9547f0046b853441
X-Virus-Checked: Checked by ClamAV on apache.org

--0016369202cb9547f0046b853441
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

KK, for your case, you don't really need to go to the effort of detecting
whether fragments are english or not.
Because the English stemmers in lucene will not modify your Indic text, and
neither will the LowerCaseFilter.

what you want to do is create a custom analyzer that works like this

-WhitespaceTokenizer with WordDelimiterFilter [from Solr nightly jar],
LowerCaseFilter, StopFilter, and PorterStemFilter-

Thanks,
Robert

On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.com> wrote:

> Thank you all.
> To be frank I was using Solr in the begining half a month ago. The
> problem[rather bug] with solr was creation of new index on the fly. Though
> they have a restful method for teh same, but it was not working. If I
> remember properly one of Solr commiter "Noble Paul"[I dont know his real
> name] was trying to help me. I tried many nightly builds and spending a
> couple of days stuck at that made me think of lucene and I switched to it.
> Now after working with lucene which gives you full control of everything I
> don't want to switch to Solr.[LOL, to me Solr:Lucene is similar to
> Window$:Linux, its my view only, though]. Coming back to the point as Uwe
> mentioned that we can do the same thing in lucene as well, what is
> available
> in Solr, Solr is based on Lucene only, right?
> I request Uwe to give me some more ideas on using the analyzers from solr
> that will do the job for me, handling a mix of both english and non-english
> content.
> Muir, can you give me a bit detail description of how to use the
> WordDelimiteFilter to do my job.
> On a side note, I was thingking of writing a simple analyzer that will do
> the following,
> #. If the webpage fragment is non-english[for me its some indian language]
> then index them as such, no stemming/ stop word removal to begin with. As I
> know its in UCN unicode something like \u0021\u0012\u34ae\u0031[just a
> sample]
> # If the fragment is english then apply standard anlyzing process for
> english content. I've not thought of quering in the same way as of now i.e
> mix of non-english and engish words.
> Now to get all this,
>  #1. I need some sort of way which will let me know if the content is
> english or not. If not english just add the tokens to the document. Do we
> really need language identifiers, as i dont have any other content that
> uses
> the same script as english other than those \u1234 things for my indian
> language content. Any smart hack/trick for the same?
>  #2. If the its english apply all normal process and add the stemmed token
> to document.
> For all this I was thinking of iterating earch word of the web page and
> apply the above procedure. And finallyadd  the newly created document to
> the
> index.
>
> I would like some one to guide me in this direction. I'm pretty people must
> have done similar/same thing earlier, I request them to guide me/ point me
> to some tutorials for the same.
> Else help me out writing a custom analyzer only if thats not going to be
> too
> complex. LOL, I'm a new user to lucene and know basics of Java coding.
> Thank you very much.
>
> --KK.
>
>
>
> On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > yes this is true. for starters KK, might be good to startup solr and look
> > at
> > http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> >
> > if you want to stick with lucene, the WordDelimiterFilter is the piece
> you
> > will want for your text, mainly for punctuation but also for format
> > characters such as ZWJ/ZWNJ.
> >
> > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> >
> > > You can also re-use the solr analyzers, as far as I found out. There is
> > an
> > > issue in jIRA/discussion on java-dev to merge them.
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > >
> > > > -----Original Message-----
> > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Re: How to support stemming and case folding for english
> > content
> > > > mixed with non-english content?
> > > >
> > > > KK, ok, so you only really want to stem the english. This is good.
> > > >
> > > > Is it possible for you to consider using solr? solr's default
> analyzer
> > > for
> > > > type 'text' will be good for your case. it will do the following
> > > > 1. tokenize on whitespace
> > > > 2. handle both indian language and english punctuation
> > > > 3. lowercase the english.
> > > > 4. stem the english.
> > > >
> > > > try a nightly build,
> > > http://people.apache.org/builds/lucene/solr/nightly/
> > > >
> > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <dioxide.software@gmail.com>
> wrote:
> > > >
> > > > > Muir, thanks for your response.
> > > > > I'm indexing indian language web pages which has got descent amount
> > of
> > > > > english content mixed with therein. For the time being I'm not
> going
> > to
> > > > use
> > > > > any stemmers as we don't have standard stemmers for indian
> languages
> > .
> > > > So
> > > > > what I want to do is like this,
> > > > > Say I've a web page having hindi content with 5% english content.
> > Then
> > > > for
> > > > > hindi I want to use the basic white space analyzer as we dont have
> > > > stemmers
> > > > > for this as I mentioned earlier and whereever english appears I
> want
> > > > them
> > > > > to
> > > > > be stemmed tokenized etc[the standard process used for english
> > > content].
> > > > As
> > > > > of now I'm using whitespace analyzer for the full content which
> > doesnot
> > > > > support case folding, stemming etc for teh content. So if there is
> an
> > > > > english word say "Detection" indexed as such then searching for
> > > > detection
> > > > > or
> > > > > detect is not giving any results, which is the expected behavior,
> but
> > I
> > > > > want
> > > > > this kind of queries to give results.
> > > > > I hope I made it clear. Let me know any ideas on doing the same.
> And
> > > one
> > > > > more thing, I'm storing the full webpage content under a single
> > field,
> > > I
> > > > > hope this will not make any difference, right?
> > > > > It seems I've to use language identifiers, but do we really need
> > that?
> > > > > Because we've only non-english content mixed with english[and not
> > > french
> > > > or
> > > > > russian etc].
> > > > >
> > > > > What is the best way of approaching the problem? Any thoughts!
> > > > >
> > > > > Thanks,
> > > > > KK.
> > > > >
> > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <rcmuir@gmail.com>
> > wrote:
> > > > >
> > > > > > KK, is all of your latin script text actually english? Is there
> > stuff
> > > > > like
> > > > > > german or french mixed in?
> > > > > >
> > > > > > And for your non-english content (your examples have been indian
> > > > writing
> > > > > > systems), is it generally true that if you had devanagari, you
> can
> > > > assume
> > > > > > its hindi? or is there stuff like marathi mixed in?
> > > > > >
> > > > > > Reason I say this is to invoke the right stemmers, you really
> need
> > > > some
> > > > > > language detection, but perhaps in your case you can cheat and
> > detect
> > > > > this
> > > > > > based on scripts...
> > > > > >
> > > > > > Thanks,
> > > > > > Robert
> > > > > >
> > > > > >
> > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <dioxide.software@gmail.com>
> > > > wrote:
> > > > > >
> > > > > > > Hi All,
> > > > > > > I'm indexing some non-english content. But the page also
> contains
> > > > > english
> > > > > > > content. As of now I'm using WhitespaceAnalyzer for all content
> > and
> > > > I'm
> > > > > > > storing the full webpage content under a single filed. Now we
> > > > require
> > > > > to
> > > > > > > support case folding and stemmming for the english content
> > > > intermingled
> > > > > > > with
> > > > > > > non-english content. I must metion that we dont have stemming
> and
> > > > case
> > > > > > > folding for these non-english content. I'm stuck with this.
> Some
> > > one
> > > > do
> > > > > > let
> > > > > > > me know how to proceed for fixing this issue.
> > > > > > >
> > > > > > > Thanks,
> > > > > > > KK.
> > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Robert Muir
> > > > > > rcmuir@gmail.com
> > > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>



-- 
Robert Muir
rcmuir@gmail.com

--0016369202cb9547f0046b853441--

From java-user-return-40609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 12:52:55 2009
Return-Path: <java-user-return-40609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18694 invoked from network); 4 Jun 2009 12:52:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 12:52:55 -0000
Received: (qmail 43597 invoked by uid 500); 4 Jun 2009 12:53:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43539 invoked by uid 500); 4 Jun 2009 12:53:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43516 invoked by uid 99); 4 Jun 2009 12:53:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:53:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:52:55 +0000
Received: by an-out-0708.google.com with SMTP id b6so360877ana.5
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 05:52:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TRySEyoYYA50VkztwkDBoNHXDER/0rpx6P49sbhTq94=;
        b=QDfV2WxfOjFPfxKSE90XIRVU0CuNckPTnyz4JZUGoaPWLd744zrPclkCmzbhRCUEBw
         SlbkHQyuUx9ARib+E5pY9+3QRu0IE9y0AsdLpBBEuoA54uYeNQ0GW6zrYce1Nf+584He
         PJYT84b7x5a++z1v8F8CMsfqPlNP0qgs9kgik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uuY9rFbg9tPwU8ceQnfqs4VdJSNqffYqeHZbyvJu4AG5uRgdUaoHnuOqp0/vfZaRci
         VoV48sy7HlwXXu+anbGtFLg2J5worrTPs+BgJjuOf5l+wCyd7d1b3iv8VV7t1nEq2Jf7
         PgPipTP/HmqyzD0pxdA5N9+OcvtCL8rWIWloA=
MIME-Version: 1.0
Received: by 10.100.197.7 with SMTP id u7mr2496265anf.108.1244119953935; Thu, 
	04 Jun 2009 05:52:33 -0700 (PDT)
In-Reply-To: <A0F4BAD2649E465587F9977DC0BA273F@VEGA>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com>
	 <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com>
	 <8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com>
	 <ED1D56A848EF4BE6A4C5398C2782F470@VEGA>
	 <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com>
	 <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
	 <A0F4BAD2649E465587F9977DC0BA273F@VEGA>
Date: Thu, 4 Jun 2009 08:52:33 -0400
Message-ID: <8f0ad1f30906040552l15f051f4u73ba673a273b7ae@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e644ba1ae9925b046b853fb0
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e644ba1ae9925b046b853fb0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

uwe what KK needs here is 'proper unicode handling'.

since the latest WordDelimiterFilter has pretty good handling of unicode
categories, combining this with WhiteSpaceTokenizer effectively gives you a
pretty good solution for unicode tokenization.

KK doesn't need detection of anything, the porter stem filter will simply
leave the indic text alone... so it will just work.

On Thu, Jun 4, 2009 at 8:40 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> > I request Uwe to give me some more ideas on using the analyzers from solr
> > that will do the job for me, handling a mix of both english and non-
> > english content.
>
> Look here:
>
> http://lucene.apache.org/solr/api/org/apache/solr/analysis/package-summary.h
> tml<http://lucene.apache.org/solr/api/org/apache/solr/analysis/package-summary.h%0Atml>
>
> As you see, the Solr analyzers are just standard Lucene analyzers. So you
> can drop the solr core jar into your project and just use them :-)
>
> Currently I am not sure which one is the analyzer Robert means, that can do
> english stemming and detecting non-english parts, but there is to look for
> it.
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016e644ba1ae9925b046b853fb0--

From java-user-return-40610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 12:54:40 2009
Return-Path: <java-user-return-40610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19613 invoked from network); 4 Jun 2009 12:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 12:54:40 -0000
Received: (qmail 52360 invoked by uid 500); 4 Jun 2009 12:54:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52288 invoked by uid 500); 4 Jun 2009 12:54:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52278 invoked by uid 99); 4 Jun 2009 12:54:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:54:49 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 12:54:38 +0000
Received: by wf-out-1314.google.com with SMTP id 24so252053wfg.20
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 05:54:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=geFZFHdvT5qcD3Ygo9lHiSZuz8LAaE/HCa81JffEyhc=;
        b=i+eJ/Hb/CMzGCr3K2U3YV9ut+/tI295T+Ie0PGOP/hGaZxqfZBjxwXVyeWb2UV/gU6
         boLpLJ7CQU/v8X+h7v+Eg7TRHEoPP/O5VdNkTMUX/TSvb7+F4Bqi5a7MrV9oE7rSeRhF
         c8a01WHGkv2eND+Ubpv2vc85U0oeADNIqFmu4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=SKZpIONtrmfgNS1tSFeL2lLmWQR2MSojAce/56vPeNTAcNSX288qlKzhwr/J4HOanG
         md4VvLx25Z1ZNKeP7xruLIlLE/92w92IVd6N4JCyRw7dfedTRGyGoz8qEJdzu80pp2wW
         I0gbgu5owBRrNPDoF2PPizCEl4Q7nCr/ZP17M=
MIME-Version: 1.0
Received: by 10.142.217.3 with SMTP id p3mr753738wfg.191.1244120056080; Thu, 
	04 Jun 2009 05:54:16 -0700 (PDT)
In-Reply-To: <8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com> 
	<8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com> 
	<8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com> 
	<ED1D56A848EF4BE6A4C5398C2782F470@VEGA> <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com> 
	<8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com> 
	<8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Thu, 4 Jun 2009 18:23:56 +0530
Message-ID: <8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd22f68002842046b85466a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd22f68002842046b85466a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks Muir.
Thanks for letting me know that I dont need language identifiers.
 I'll have a look and will try to write the analyzer. For my case I think it
wont be that difficult.
BTW, can you point me to some sample codes/tutorials writing custom
analyzers. I could not find something in LIA2ndEdn. Is something htere? do
let me know.

Thanks,
KK.



On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.com> wrote:

> KK, for your case, you don't really need to go to the effort of detecting
> whether fragments are english or not.
> Because the English stemmers in lucene will not modify your Indic text, and
> neither will the LowerCaseFilter.
>
> what you want to do is create a custom analyzer that works like this
>
> -WhitespaceTokenizer with WordDelimiterFilter [from Solr nightly jar],
> LowerCaseFilter, StopFilter, and PorterStemFilter-
>
> Thanks,
> Robert
>
> On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.com> wrote:
>
> > Thank you all.
> > To be frank I was using Solr in the begining half a month ago. The
> > problem[rather bug] with solr was creation of new index on the fly.
> Though
> > they have a restful method for teh same, but it was not working. If I
> > remember properly one of Solr commiter "Noble Paul"[I dont know his real
> > name] was trying to help me. I tried many nightly builds and spending a
> > couple of days stuck at that made me think of lucene and I switched to
> it.
> > Now after working with lucene which gives you full control of everything
> I
> > don't want to switch to Solr.[LOL, to me Solr:Lucene is similar to
> > Window$:Linux, its my view only, though]. Coming back to the point as Uwe
> > mentioned that we can do the same thing in lucene as well, what is
> > available
> > in Solr, Solr is based on Lucene only, right?
> > I request Uwe to give me some more ideas on using the analyzers from solr
> > that will do the job for me, handling a mix of both english and
> non-english
> > content.
> > Muir, can you give me a bit detail description of how to use the
> > WordDelimiteFilter to do my job.
> > On a side note, I was thingking of writing a simple analyzer that will do
> > the following,
> > #. If the webpage fragment is non-english[for me its some indian
> language]
> > then index them as such, no stemming/ stop word removal to begin with. As
> I
> > know its in UCN unicode something like \u0021\u0012\u34ae\u0031[just a
> > sample]
> > # If the fragment is english then apply standard anlyzing process for
> > english content. I've not thought of quering in the same way as of now
> i.e
> > mix of non-english and engish words.
> > Now to get all this,
> >  #1. I need some sort of way which will let me know if the content is
> > english or not. If not english just add the tokens to the document. Do we
> > really need language identifiers, as i dont have any other content that
> > uses
> > the same script as english other than those \u1234 things for my indian
> > language content. Any smart hack/trick for the same?
> >  #2. If the its english apply all normal process and add the stemmed
> token
> > to document.
> > For all this I was thinking of iterating earch word of the web page and
> > apply the above procedure. And finallyadd  the newly created document to
> > the
> > index.
> >
> > I would like some one to guide me in this direction. I'm pretty people
> must
> > have done similar/same thing earlier, I request them to guide me/ point
> me
> > to some tutorials for the same.
> > Else help me out writing a custom analyzer only if thats not going to be
> > too
> > complex. LOL, I'm a new user to lucene and know basics of Java coding.
> > Thank you very much.
> >
> > --KK.
> >
> >
> >
> > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> > > yes this is true. for starters KK, might be good to startup solr and
> look
> > > at
> > > http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> > >
> > > if you want to stick with lucene, the WordDelimiterFilter is the piece
> > you
> > > will want for your text, mainly for punctuation but also for format
> > > characters such as ZWJ/ZWNJ.
> > >
> > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> > >
> > > > You can also re-use the solr analyzers, as far as I found out. There
> is
> > > an
> > > > issue in jIRA/discussion on java-dev to merge them.
> > > >
> > > > -----
> > > > Uwe Schindler
> > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > http://www.thetaphi.de
> > > > eMail: uwe@thetaphi.de
> > > >
> > > >
> > > > > -----Original Message-----
> > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > > To: java-user@lucene.apache.org
> > > > > Subject: Re: How to support stemming and case folding for english
> > > content
> > > > > mixed with non-english content?
> > > > >
> > > > > KK, ok, so you only really want to stem the english. This is good.
> > > > >
> > > > > Is it possible for you to consider using solr? solr's default
> > analyzer
> > > > for
> > > > > type 'text' will be good for your case. it will do the following
> > > > > 1. tokenize on whitespace
> > > > > 2. handle both indian language and english punctuation
> > > > > 3. lowercase the english.
> > > > > 4. stem the english.
> > > > >
> > > > > try a nightly build,
> > > > http://people.apache.org/builds/lucene/solr/nightly/
> > > > >
> > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <dioxide.software@gmail.com>
> > wrote:
> > > > >
> > > > > > Muir, thanks for your response.
> > > > > > I'm indexing indian language web pages which has got descent
> amount
> > > of
> > > > > > english content mixed with therein. For the time being I'm not
> > going
> > > to
> > > > > use
> > > > > > any stemmers as we don't have standard stemmers for indian
> > languages
> > > .
> > > > > So
> > > > > > what I want to do is like this,
> > > > > > Say I've a web page having hindi content with 5% english content.
> > > Then
> > > > > for
> > > > > > hindi I want to use the basic white space analyzer as we dont
> have
> > > > > stemmers
> > > > > > for this as I mentioned earlier and whereever english appears I
> > want
> > > > > them
> > > > > > to
> > > > > > be stemmed tokenized etc[the standard process used for english
> > > > content].
> > > > > As
> > > > > > of now I'm using whitespace analyzer for the full content which
> > > doesnot
> > > > > > support case folding, stemming etc for teh content. So if there
> is
> > an
> > > > > > english word say "Detection" indexed as such then searching for
> > > > > detection
> > > > > > or
> > > > > > detect is not giving any results, which is the expected behavior,
> > but
> > > I
> > > > > > want
> > > > > > this kind of queries to give results.
> > > > > > I hope I made it clear. Let me know any ideas on doing the same.
> > And
> > > > one
> > > > > > more thing, I'm storing the full webpage content under a single
> > > field,
> > > > I
> > > > > > hope this will not make any difference, right?
> > > > > > It seems I've to use language identifiers, but do we really need
> > > that?
> > > > > > Because we've only non-english content mixed with english[and not
> > > > french
> > > > > or
> > > > > > russian etc].
> > > > > >
> > > > > > What is the best way of approaching the problem? Any thoughts!
> > > > > >
> > > > > > Thanks,
> > > > > > KK.
> > > > > >
> > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <rcmuir@gmail.com>
> > > wrote:
> > > > > >
> > > > > > > KK, is all of your latin script text actually english? Is there
> > > stuff
> > > > > > like
> > > > > > > german or french mixed in?
> > > > > > >
> > > > > > > And for your non-english content (your examples have been
> indian
> > > > > writing
> > > > > > > systems), is it generally true that if you had devanagari, you
> > can
> > > > > assume
> > > > > > > its hindi? or is there stuff like marathi mixed in?
> > > > > > >
> > > > > > > Reason I say this is to invoke the right stemmers, you really
> > need
> > > > > some
> > > > > > > language detection, but perhaps in your case you can cheat and
> > > detect
> > > > > > this
> > > > > > > based on scripts...
> > > > > > >
> > > > > > > Thanks,
> > > > > > > Robert
> > > > > > >
> > > > > > >
> > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> dioxide.software@gmail.com>
> > > > > wrote:
> > > > > > >
> > > > > > > > Hi All,
> > > > > > > > I'm indexing some non-english content. But the page also
> > contains
> > > > > > english
> > > > > > > > content. As of now I'm using WhitespaceAnalyzer for all
> content
> > > and
> > > > > I'm
> > > > > > > > storing the full webpage content under a single filed. Now we
> > > > > require
> > > > > > to
> > > > > > > > support case folding and stemmming for the english content
> > > > > intermingled
> > > > > > > > with
> > > > > > > > non-english content. I must metion that we dont have stemming
> > and
> > > > > case
> > > > > > > > folding for these non-english content. I'm stuck with this.
> > Some
> > > > one
> > > > > do
> > > > > > > let
> > > > > > > > me know how to proceed for fixing this issue.
> > > > > > > >
> > > > > > > > Thanks,
> > > > > > > > KK.
> > > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > --
> > > > > > > Robert Muir
> > > > > > > rcmuir@gmail.com
> > > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Robert Muir
> > > > > rcmuir@gmail.com
> > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

--000e0cd22f68002842046b85466a--

From java-user-return-40611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 13:07:15 2009
Return-Path: <java-user-return-40611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22816 invoked from network); 4 Jun 2009 13:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 13:07:15 -0000
Received: (qmail 67135 invoked by uid 500); 4 Jun 2009 13:07:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67057 invoked by uid 500); 4 Jun 2009 13:07:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67047 invoked by uid 99); 4 Jun 2009 13:07:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 13:07:25 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 13:07:15 +0000
Received: by yw-out-2324.google.com with SMTP id 2so338517ywt.5
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 06:06:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TR4CI+sgWbNOSs8TFLhQPHlwd9lPCzjaVP+H6axgmPg=;
        b=iiiLdbhQ042S8iRLcWiq0cN6JGoWgdomd41I+IHgtKjpgFjC3ymEDblw9zXRnHQu0G
         YkhHw+05R/WCZm9YzAKtEqos+ttGhBjLYrsdZLZcIwcw28HafP3AQWDURiQ2hWARRjT9
         D1PU3xeQsC8pUtuqL7G7U1blWwUrhyszGZsNY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SswKLmLfunhNjYwdNxh5FxhY3xp/TVwKZV/MObL1NPf/oUrG2BT7dQAPH0oFdwb7/k
         4dEeNg8FgUheg4b0cFHe82eQzaj+h6Usb946znbshAOXqzabWmuWGXYVwTaHYiiKsTMk
         WJjAlLMz/gNJ3QG4w3AXpne8i8PbtPhDRQX2A=
MIME-Version: 1.0
Received: by 10.100.141.15 with SMTP id o15mr2570352and.20.1244120813877; Thu, 
	04 Jun 2009 06:06:53 -0700 (PDT)
In-Reply-To: <8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com>
	 <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com>
	 <8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com>
	 <ED1D56A848EF4BE6A4C5398C2782F470@VEGA>
	 <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com>
	 <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
	 <8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com>
	 <8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com>
Date: Thu, 4 Jun 2009 09:06:53 -0400
Message-ID: <8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e640cc182b3a62046b8573cd
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e640cc182b3a62046b8573cd
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

KK well you can always get some good examples from the lucene contrib
codebase.
For example, look at the DutchAnalyzer, especially:

TokenStream tokenStream(String fieldName, Reader reader)

See how it combines a specified tokenizer with various filters? this is what
you want to do, except of course you want to use different tokenizer and
filters.

On Thu, Jun 4, 2009 at 8:53 AM, KK <dioxide.software@gmail.com> wrote:

> Thanks Muir.
> Thanks for letting me know that I dont need language identifiers.
>  I'll have a look and will try to write the analyzer. For my case I think
> it
> wont be that difficult.
> BTW, can you point me to some sample codes/tutorials writing custom
> analyzers. I could not find something in LIA2ndEdn. Is something htere? do
> let me know.
>
> Thanks,
> KK.
>
>
>
> On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > KK, for your case, you don't really need to go to the effort of detecting
> > whether fragments are english or not.
> > Because the English stemmers in lucene will not modify your Indic text,
> and
> > neither will the LowerCaseFilter.
> >
> > what you want to do is create a custom analyzer that works like this
> >
> > -WhitespaceTokenizer with WordDelimiterFilter [from Solr nightly jar],
> > LowerCaseFilter, StopFilter, and PorterStemFilter-
> >
> > Thanks,
> > Robert
> >
> > On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.com> wrote:
> >
> > > Thank you all.
> > > To be frank I was using Solr in the begining half a month ago. The
> > > problem[rather bug] with solr was creation of new index on the fly.
> > Though
> > > they have a restful method for teh same, but it was not working. If I
> > > remember properly one of Solr commiter "Noble Paul"[I dont know his
> real
> > > name] was trying to help me. I tried many nightly builds and spending a
> > > couple of days stuck at that made me think of lucene and I switched to
> > it.
> > > Now after working with lucene which gives you full control of
> everything
> > I
> > > don't want to switch to Solr.[LOL, to me Solr:Lucene is similar to
> > > Window$:Linux, its my view only, though]. Coming back to the point as
> Uwe
> > > mentioned that we can do the same thing in lucene as well, what is
> > > available
> > > in Solr, Solr is based on Lucene only, right?
> > > I request Uwe to give me some more ideas on using the analyzers from
> solr
> > > that will do the job for me, handling a mix of both english and
> > non-english
> > > content.
> > > Muir, can you give me a bit detail description of how to use the
> > > WordDelimiteFilter to do my job.
> > > On a side note, I was thingking of writing a simple analyzer that will
> do
> > > the following,
> > > #. If the webpage fragment is non-english[for me its some indian
> > language]
> > > then index them as such, no stemming/ stop word removal to begin with.
> As
> > I
> > > know its in UCN unicode something like \u0021\u0012\u34ae\u0031[just a
> > > sample]
> > > # If the fragment is english then apply standard anlyzing process for
> > > english content. I've not thought of quering in the same way as of now
> > i.e
> > > mix of non-english and engish words.
> > > Now to get all this,
> > >  #1. I need some sort of way which will let me know if the content is
> > > english or not. If not english just add the tokens to the document. Do
> we
> > > really need language identifiers, as i dont have any other content that
> > > uses
> > > the same script as english other than those \u1234 things for my indian
> > > language content. Any smart hack/trick for the same?
> > >  #2. If the its english apply all normal process and add the stemmed
> > token
> > > to document.
> > > For all this I was thinking of iterating earch word of the web page and
> > > apply the above procedure. And finallyadd  the newly created document
> to
> > > the
> > > index.
> > >
> > > I would like some one to guide me in this direction. I'm pretty people
> > must
> > > have done similar/same thing earlier, I request them to guide me/ point
> > me
> > > to some tutorials for the same.
> > > Else help me out writing a custom analyzer only if thats not going to
> be
> > > too
> > > complex. LOL, I'm a new user to lucene and know basics of Java coding.
> > > Thank you very much.
> > >
> > > --KK.
> > >
> > >
> > >
> > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com> wrote:
> > >
> > > > yes this is true. for starters KK, might be good to startup solr and
> > look
> > > > at
> > > > http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> > > >
> > > > if you want to stick with lucene, the WordDelimiterFilter is the
> piece
> > > you
> > > > will want for your text, mainly for punctuation but also for format
> > > > characters such as ZWJ/ZWNJ.
> > > >
> > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <uwe@thetaphi.de>
> wrote:
> > > >
> > > > > You can also re-use the solr analyzers, as far as I found out.
> There
> > is
> > > > an
> > > > > issue in jIRA/discussion on java-dev to merge them.
> > > > >
> > > > > -----
> > > > > Uwe Schindler
> > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > > http://www.thetaphi.de
> > > > > eMail: uwe@thetaphi.de
> > > > >
> > > > >
> > > > > > -----Original Message-----
> > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > > > To: java-user@lucene.apache.org
> > > > > > Subject: Re: How to support stemming and case folding for english
> > > > content
> > > > > > mixed with non-english content?
> > > > > >
> > > > > > KK, ok, so you only really want to stem the english. This is
> good.
> > > > > >
> > > > > > Is it possible for you to consider using solr? solr's default
> > > analyzer
> > > > > for
> > > > > > type 'text' will be good for your case. it will do the following
> > > > > > 1. tokenize on whitespace
> > > > > > 2. handle both indian language and english punctuation
> > > > > > 3. lowercase the english.
> > > > > > 4. stem the english.
> > > > > >
> > > > > > try a nightly build,
> > > > > http://people.apache.org/builds/lucene/solr/nightly/
> > > > > >
> > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <dioxide.software@gmail.com>
> > > wrote:
> > > > > >
> > > > > > > Muir, thanks for your response.
> > > > > > > I'm indexing indian language web pages which has got descent
> > amount
> > > > of
> > > > > > > english content mixed with therein. For the time being I'm not
> > > going
> > > > to
> > > > > > use
> > > > > > > any stemmers as we don't have standard stemmers for indian
> > > languages
> > > > .
> > > > > > So
> > > > > > > what I want to do is like this,
> > > > > > > Say I've a web page having hindi content with 5% english
> content.
> > > > Then
> > > > > > for
> > > > > > > hindi I want to use the basic white space analyzer as we dont
> > have
> > > > > > stemmers
> > > > > > > for this as I mentioned earlier and whereever english appears I
> > > want
> > > > > > them
> > > > > > > to
> > > > > > > be stemmed tokenized etc[the standard process used for english
> > > > > content].
> > > > > > As
> > > > > > > of now I'm using whitespace analyzer for the full content which
> > > > doesnot
> > > > > > > support case folding, stemming etc for teh content. So if there
> > is
> > > an
> > > > > > > english word say "Detection" indexed as such then searching for
> > > > > > detection
> > > > > > > or
> > > > > > > detect is not giving any results, which is the expected
> behavior,
> > > but
> > > > I
> > > > > > > want
> > > > > > > this kind of queries to give results.
> > > > > > > I hope I made it clear. Let me know any ideas on doing the
> same.
> > > And
> > > > > one
> > > > > > > more thing, I'm storing the full webpage content under a single
> > > > field,
> > > > > I
> > > > > > > hope this will not make any difference, right?
> > > > > > > It seems I've to use language identifiers, but do we really
> need
> > > > that?
> > > > > > > Because we've only non-english content mixed with english[and
> not
> > > > > french
> > > > > > or
> > > > > > > russian etc].
> > > > > > >
> > > > > > > What is the best way of approaching the problem? Any thoughts!
> > > > > > >
> > > > > > > Thanks,
> > > > > > > KK.
> > > > > > >
> > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <rcmuir@gmail.com>
> > > > wrote:
> > > > > > >
> > > > > > > > KK, is all of your latin script text actually english? Is
> there
> > > > stuff
> > > > > > > like
> > > > > > > > german or french mixed in?
> > > > > > > >
> > > > > > > > And for your non-english content (your examples have been
> > indian
> > > > > > writing
> > > > > > > > systems), is it generally true that if you had devanagari,
> you
> > > can
> > > > > > assume
> > > > > > > > its hindi? or is there stuff like marathi mixed in?
> > > > > > > >
> > > > > > > > Reason I say this is to invoke the right stemmers, you really
> > > need
> > > > > > some
> > > > > > > > language detection, but perhaps in your case you can cheat
> and
> > > > detect
> > > > > > > this
> > > > > > > > based on scripts...
> > > > > > > >
> > > > > > > > Thanks,
> > > > > > > > Robert
> > > > > > > >
> > > > > > > >
> > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> > dioxide.software@gmail.com>
> > > > > > wrote:
> > > > > > > >
> > > > > > > > > Hi All,
> > > > > > > > > I'm indexing some non-english content. But the page also
> > > contains
> > > > > > > english
> > > > > > > > > content. As of now I'm using WhitespaceAnalyzer for all
> > content
> > > > and
> > > > > > I'm
> > > > > > > > > storing the full webpage content under a single filed. Now
> we
> > > > > > require
> > > > > > > to
> > > > > > > > > support case folding and stemmming for the english content
> > > > > > intermingled
> > > > > > > > > with
> > > > > > > > > non-english content. I must metion that we dont have
> stemming
> > > and
> > > > > > case
> > > > > > > > > folding for these non-english content. I'm stuck with this.
> > > Some
> > > > > one
> > > > > > do
> > > > > > > > let
> > > > > > > > > me know how to proceed for fixing this issue.
> > > > > > > > >
> > > > > > > > > Thanks,
> > > > > > > > > KK.
> > > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > > --
> > > > > > > > Robert Muir
> > > > > > > > rcmuir@gmail.com
> > > > > > > >
> > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Robert Muir
> > > > > > rcmuir@gmail.com
> > > > >
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > > >
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>



-- 
Robert Muir
rcmuir@gmail.com

--0016e640cc182b3a62046b8573cd--

From java-user-return-40612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 13:48:59 2009
Return-Path: <java-user-return-40612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44511 invoked from network); 4 Jun 2009 13:48:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 13:48:59 -0000
Received: (qmail 41693 invoked by uid 500); 4 Jun 2009 13:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41651 invoked by uid 500); 4 Jun 2009 13:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41641 invoked by uid 99); 4 Jun 2009 13:49:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 13:49:09 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.204] (HELO mail-qy0-f204.google.com) (209.85.221.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 13:48:59 +0000
Received: by qyk42 with SMTP id 42so1090945qyk.29
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 06:48:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.155.20 with SMTP id h20mr3495758ybo.345.1244123317349; 
	Thu, 04 Jun 2009 06:48:37 -0700 (PDT)
In-Reply-To: <bb132a4a0906032158s62dc4defyeee8b13adaa8c07e@mail.gmail.com>
References: <bb132a4a0906032158s62dc4defyeee8b13adaa8c07e@mail.gmail.com>
Date: Thu, 4 Jun 2009 09:48:37 -0400
Message-ID: <9ac0c6aa0906040648r7a37f099w243f085a4cef8d00@mail.gmail.com>
Subject: Re: Extending StandardAnalyzer considered harmful
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm, sorry about that, and thank you for raising it.

This is indeed not good and should be considered a break in
back-compat since silently things change and it's not easy for you to
discover that.

I think we should at least deprecate Analyzer.tokenStream, and fix
QueryParser (and any others) to use reusableTokenStream. But that's
not perfect since on upgrading you'd only see deprecation warnings,
which you certainly would not expect to lead to changes in
functionality.

I think the only safe (back compatible) way for us to make such
changes in the future is to make a whole new class for each of the
core analyzers that switch to the new API (and deprecate the old
ones).  Either that, or going forward we make Lucene's core analyzers
final (and, more generally, any other core classes we intend/expect to
make API improvements to).  Or, as you suggested, make tokenStream
final with the change so that you hit catastrophic compilation errors
on upgrading, but that's currently against our back compat policy.

Mike

On Thu, Jun 4, 2009 at 12:58 AM, Daniel Noll <daniel@nuix.com> wrote:
> Hi all.
> I just want to tell some people an interesting story. :-)
>
> We had a custom analyser which was implemented like this:
>
> =A0 =A0public class NoStopWordsAnalyser extends StandardAnalyzer {
> =A0 =A0 =A0 =A0public TokenStream tokenStream(String fieldName, Reader re=
ader) {
> =A0 =A0 =A0 =A0 =A0 =A0TokenStream result =3D new StandardTokenizer(reade=
r);
> =A0 =A0 =A0 =A0 =A0 =A0result =3D new StandardFilter(result);
> =A0 =A0 =A0 =A0 =A0 =A0result =3D new LowerCaseFilter(result);
> =A0 =A0 =A0 =A0 =A0 =A0return result;
> =A0 =A0 =A0 =A0}
> =A0 =A0}
>
> Now, this seemed all well and good, and we unit tested the analyser and i=
t
> worked.
>
> Some time later, a newer version of Lucene added reusableTokenStream() fo=
r a
> performance optimisation. =A0The indexing side was updated to call the ne=
w
> reusableTokenStream() method. =A0Since we had extended StandardAnalyzer, =
it
> ended up going to StandardAnalyzer's implementation, which puts on a
> StopFilter, so our NoStopWordsAnalyser ended up including a StopFilter.
> =A0This in itself would have been a minor issue as well, but the QueryPar=
ser
> side still called the older tokenStream() method, which resulted in
> different token streams being used for indexing and querying -- even thou=
gh
> it was the same analyser!
>
> The end result is that we could never get a hit if the query included any
> stop words.
>
> The solution in this case was to extend Analyzer instead. =A0I just thoug=
ht it
> was interesting that we got affected so much by a new method to the API
> which didn't cause a compilation error or raise any other flags which wou=
ld
> indicate we had done something wrong. =A0Our own unit tests still passed
> because they were testing the older method. =A0Had StandardAnalyzer or it=
s
> tokenStream() method been made final during this change, we would have ha=
d
> our compilation fail. =A0Had it been final from the very first time the c=
lass
> was introduced, it would have prevented the problem in its entirety as we
> would have realised much sooner that it wasn't safe to override in the
> beginning.
>
> Daniel
>
>
>
> --
> Daniel Noll =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Forens=
ic and eDiscovery Software
> Senior Developer =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0The world's most advanced
> Nuix =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0email data analysis
> http://nuix.com/ =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0and eDiscovery software
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 19:55:27 2009
Return-Path: <java-user-return-40613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72357 invoked from network); 4 Jun 2009 19:55:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 19:55:26 -0000
Received: (qmail 19821 invoked by uid 500); 4 Jun 2009 19:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19753 invoked by uid 500); 4 Jun 2009 19:55:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19743 invoked by uid 99); 4 Jun 2009 19:55:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 19:55:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 19:55:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MCJ1k-0007hH-Gr
	for java-user@lucene.apache.org; Thu, 04 Jun 2009 12:55:04 -0700
Message-ID: <23876641.post@talk.nabble.com>
Date: Thu, 4 Jun 2009 12:55:04 -0700 (PDT)
From: vanshi <nilu.thakur@gmail.com>
To: java-user@lucene.apache.org
Subject: Custom sorting!
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nilu.thakur@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am doing custom sorting within lucene using overloaded
searcher.search(query, sort). First precedence is to sort based on 'last
name' and then on 'network status', where 'INN' is better than 'OUT'.

Fields are stored in the indexes like this:

FIRST_NAME(Field.Store.NO, Field.Index.NO_NORMS)
LAST_NAME_EXACT(Field.Store.NO, Field.Index.NO_NORMS)

And analyzer used is 'keyword analyzer' on these fields. And the fields are
sorted with following lines.

ArrayList<SortField> sorts = new ArrayList<SortField>();
sorts.add(new SortField("LAST_NAME_EXACT"));
sorts.add(new SortField(ProviderFieldInfo.NETWORK.toString(),
networkComparatorSource));
super.setSort(sorts.toArray(new SortField[sorts.size()]));

Now, with the above line my expectation is to see 'last name' sorted
alphabatically and then if two 'last names' are same then 'network
status(INN/OUT)' must get precedence and if both 'network status' and 'last
name' are same then socre will decide the order. Is this expectation wrong??

The result I'm getting is in this order: The query used is a prefix query,
where 'last name' entered is 'john' and first name is 'p'. 

JOHNSON, PETER A 	INN
JOHNSON, PETER B		INN
JOHNSON, PEGGY A	OUT
JOHNSON, PHILLIP W	INN
JOHNSON-STUHR, PAMELA J	OUT
JOHN, P G		INN
JOHNSON, PAUL G		INN
JOHNSON, PETER R		INN

Can somebody take alook and see what should be done to get expected results? 

Thanks,
Vanshi
 
-- 
View this message in context: http://www.nabble.com/Custom-sorting%21-tp23876641p23876641.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 21:11:32 2009
Return-Path: <java-user-return-40614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89681 invoked from network); 4 Jun 2009 21:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 21:11:31 -0000
Received: (qmail 24015 invoked by uid 500); 4 Jun 2009 21:11:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23984 invoked by uid 500); 4 Jun 2009 21:11:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23974 invoked by uid 99); 4 Jun 2009 21:11:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 21:11:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tarandeep@gmail.com designates 209.85.222.199 as permitted sender)
Received: from [209.85.222.199] (HELO mail-pz0-f199.google.com) (209.85.222.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 21:11:32 +0000
Received: by pzk37 with SMTP id 37so955666pzk.29
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 14:11:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=me959ypaxN8f0iqk7g7IMLrIAoG1OkrI1O3xtHzl6Oc=;
        b=aD+PNUaPb4a4bOEhVR+afk7SSTu5S6Zmb3KK6HL6WZHJXYXyVFcPujCHOI4YYktCsA
         BfkaVCcDseMPzF1LnjBKxik5TcF+iN7BQh+8Qf1wUMo+pTbF2S9OCOr9td6SFwAGv9il
         ZA8rgUHiKCCPfMQGK+G+5hAKFWbpfZGWJj2Yc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=CWn+HUdQuP+0SGmKThUTV0vqZhOvVhEf5tOOCqzkMa8Ja49vcTGTPKPn5oZzlcnkB7
         VUn2j4eGmUro56yRK5xpuIZDkirgKSbsmkPH50QQGmbYCbhtV9jLHE9vbAQynPH/v2Va
         oJq9onwBUjCzRJrmr59hIrpU3z1sl7NMyUQ20=
MIME-Version: 1.0
Received: by 10.142.156.2 with SMTP id d2mr1018982wfe.179.1244149871099; Thu, 
	04 Jun 2009 14:11:11 -0700 (PDT)
From: Tarandeep Singh <tarandeep@gmail.com>
Date: Thu, 4 Jun 2009 14:10:51 -0700
Message-ID: <e75c02ef0906041410o6f0e3430g4e8291f94b76fc35@mail.gmail.com>
Subject: Query:Adding all docs at once or creating smaller indexes and merge
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2dec61d4182046b8c377d
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2dec61d4182046b8c377d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

>From efficiency point of view, what will be more efficient-

Creating a single big index (big enough for one machine) by adding all
documents in it at once

or

Creating smaller indexes and then merge them to make one bigger index?

And if there is a performance penalty, then any rough estimate how much?

Thanks,
Tarandeep

--000e0cd2dec61d4182046b8c377d--

From java-user-return-40615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 04 21:57:34 2009
Return-Path: <java-user-return-40615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13752 invoked from network); 4 Jun 2009 21:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jun 2009 21:57:33 -0000
Received: (qmail 3259 invoked by uid 500); 4 Jun 2009 21:57:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3224 invoked by uid 500); 4 Jun 2009 21:57:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3214 invoked by uid 99); 4 Jun 2009 21:57:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jun 2009 21:57:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Jun 2009 21:57:33 +0000
Received: (qmail 28035 invoked by uid 60001); 4 Jun 2009 21:57:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1244152631; bh=AiqbC/oG6C38FFz0z0AWEj0BsVoqbZ8TkmgHWOsgLf0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=UsExTunkdziDwZeNXFJHvpHLjdS3Pi1JaXNIuAhPAmru5ZRgMbsAKcnO9utQgKpasY3IKaVhcCgKvj6Y3S6WfEBoJhh5KLcdX9GyfEEZ5YbCujhbbbBGYGhyrHjybx8rbzrJN33u+KXryoP08QtT025sXwEvvn9U3jvnnHBdP2E=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=p9ypNOeUKQocF2gjHu7Dw5jI0178WRnmhdecvnV3cmWIONXyaXVKKAyB4gJTy3qxHXif2yf89Tkm7QTTtBdtiusTausXxbB1upN5beZH+sxlDoY5n3b2KXT3d7GXvTDdl4UrK1lhODzLCM/gWgldZNOQ+kapwiRnEXGaNMZp3Io=;
Message-ID: <488992.27252.qm@web50301.mail.re2.yahoo.com>
X-YMail-OSG: d..ZyHEVM1mpuhrsqBYFjwUGSO3ZJrCuoPOOncSD67nGyXgvMbWYr8JbHJABP.GB6jIIv0on6t4vaXVghLuWMi9eRAwMuc_iMbOxUN3gJpDE_6tPQ22utxtBAVa.pjvJLTXmMO8UFs6yrfXpAvW98a4Sbw59.9cyIzcGtMI6W9c.qogMJ4917B2es3h7uMyBNazoMj1X5a3kaplLH_Rw9wb1Thxo8.3twp7RJvdtsx13RPG1Uze6.AEnBlHwaGDj_.XK5LtRHUty7bqfa2ZO.zuiToU7nwvkpOtaHxTIszZAxraWC0gvIUtXE5Py7iaAcByu.rvjyulP
Received: from [167.206.188.3] by web50301.mail.re2.yahoo.com via HTTP; Thu, 04 Jun 2009 14:57:11 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.10
References: <4d19a3630906040503t166bf687i8475c35a0547badc@mail.gmail.com>
Date: Thu, 4 Jun 2009 14:57:11 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: P2P Lucene
To: java-user@lucene.apache.org
In-Reply-To: <4d19a3630906040503t166bf687i8475c35a0547badc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Big +1 ! :)

It would make for a cool case study for Lucene in Action 3rd edition ;)

 Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Shashi Kant <skant@sloan.mit.edu>
> To: java-user@lucene.apache.org
> Sent: Thursday, June 4, 2009 8:03:56 AM
> Subject: P2P Lucene
> 
> Hi all,
> 
> I am writing to gauge the group's interest level in building a P2P
> application using Lucene. Nothing fancy, just good old-fashioned P2P
> search across one's social-network or work-network (very unlike
> Gnutella, Kazaa etc.). The obvious business-case for this could be
> many such as document sharing/location within organizations without
> centralized repositories. As is well known - intentionally or
> inadvertently - most documents are locked-up in individual computers
> and such a tool could provide a powerful discovery mechanism.
> 
> I was thinking of create an F/OSS project leveraging Lucene and
> Jabber/XMPP, but something far more lightweight than comparable
> "groupware" projects with a dead-simple permission-based sharing
> system. Lightweight simplicity being the operative words.
> 
> Just curious to see the interest level in collaborating on such an
> effort, and/or sharing any other ideas where such an effort would be
> helpful.
> 
> Thanks,
> Shashi
> 
> skant@alum.mit.edu
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 00:18:37 2009
Return-Path: <java-user-return-40616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63482 invoked from network); 5 Jun 2009 00:18:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 00:18:37 -0000
Received: (qmail 40301 invoked by uid 500); 5 Jun 2009 00:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40215 invoked by uid 500); 5 Jun 2009 00:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40205 invoked by uid 99); 5 Jun 2009 00:18:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 00:18:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.23.127] (HELO web111818.mail.gq1.yahoo.com) (67.195.23.127)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Jun 2009 00:18:37 +0000
Received: (qmail 99132 invoked by uid 60001); 5 Jun 2009 00:18:15 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1244161095; bh=M1TjbT6VjRlJC7R608QCRxwslJZpnVl7xhRsCX/+S4A=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=RSalDQSCFw+ZLIT03msd0JRfXe8N/NhjRVDrJNLxadKZdGcRlWvj29GUSVP/Dxs235x/W9GBKGz9klH9vjVmgx1eHEln4QsNsAMezcw/qOckM9fJHjE9pYl19R8wWhPWLk+UBW7RSJOG5JwPHGeNMvDjkgz6r3Sl4pkKclWe30A=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=PSkWVv+azgZvC2wX2jkUWm+HgH6WeMiDpAr6nPVM51FNCNu62Y5ORrq74XkAfZuHdELeEZt9JwsbamCsDq7m/PUERvhzaGQ1EbA1fR8hU02VpYX72BUl7h0OTq0drQI3KiMffeK75SDkwtk11gLZcR4EM/5qKsjil0mUWgWCaiY=;
Message-ID: <635121.98181.qm@web111818.mail.gq1.yahoo.com>
X-YMail-OSG: VGEpsMgVM1kVGOBdemWtoJo94nPpok.UoqIJ9jh.4MP8FBCYjozH4XWpK5X.odF2hVQHKhQOr.GOrXCRuRbfPQxSh6lNSHsaweaJHwA0VAFQG7x6S0z_G6YQTwrDVHg7fhoIRChf1_ZWl4IlH8KAaMfNPoM.tvaes3.EN1FdILZ7fsqOcR88D3Bcdqyia0QRaPNoMpnRflloKov6G8qOud1qyKa42c88W6oiLaHqzfz.GQEqS_lpNwBRA9oUr9lPFt16ZPhggzq12FXm_JfqfQz7DOPSmylfUfVr7NjoeyjBJztt8fc-
Received: from [66.188.107.21] by web111818.mail.gq1.yahoo.com via HTTP; Thu, 04 Jun 2009 17:18:15 PDT
X-Mailer: YahooMailClassic/5.4.12 YahooMailWebService/0.7.289.10
Date: Thu, 4 Jun 2009 17:18:15 -0700 (PDT)
From: Alex Steward <alex_lucene@yahoo.com>
Subject: cannot retrieve the values of a field is not stored in the index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1451902734-1244161095=:98181"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1451902734-1244161095=:98181
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable



Hi,

=A0 Is there a way I can retrieve the value of a field that is not stored i=
n the Index?


private static void indexFile(IndexWriter writer, File f)
=A0=A0=A0 throws IOException {

=A0=A0=A0 if (f.isHidden() || !f.exists() || !f.canRead()) {
=A0=A0=A0=A0=A0 return;
=A0=A0=A0 }

=A0=A0=A0 System.out.println("Indexing " + f.getCanonicalPath());

=A0=A0=A0 Document doc =3D new Document();

=A0=A0=A0 // add contents of file
=A0=A0=A0 FileReader fr =3D new FileReader(f);
=A0=A0 =A0
=A0=A0=A0 doc.add(new Field("contents", fr));

=A0=A0=A0 //adding second field which contains the path of the file
=A0=A0=A0 doc.add(new Field("path", f.getCanonicalPath(),
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 Field.Store.NO,
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 Field.Index.NOT_ANALYZED));
}

Is there a way I can access the value of the field "path" from the document=
 hits?

Thanks,
a
=0A=0A=0A      
--0-1451902734-1244161095=:98181--

From java-user-return-40617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 01:30:41 2009
Return-Path: <java-user-return-40617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92553 invoked from network); 5 Jun 2009 01:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 01:30:41 -0000
Received: (qmail 95203 invoked by uid 500); 5 Jun 2009 01:30:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95123 invoked by uid 500); 5 Jun 2009 01:30:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95113 invoked by uid 99); 5 Jun 2009 01:30:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 01:30:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yeminjiao@gmail.com designates 209.85.222.199 as permitted sender)
Received: from [209.85.222.199] (HELO mail-pz0-f199.google.com) (209.85.222.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 01:30:39 +0000
Received: by pzk37 with SMTP id 37so1047712pzk.29
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 18:30:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=rVF5PUZLu+j8n5p38kKE1ju/lzWYSSeC2EEtEuhYYBQ=;
        b=NdK8g8XcWAa1YNSEHajdg7lE337fr/LhdKt7fv10t4TF4iLEuQW5+VQ/hN4kEt0/fj
         doDxntXXcmkYPCBCtvGKMs05d3jQqOlkOX+a72TuDFHySTrJS+mLwGD5tSfGn7tZPfw3
         Wx4QlZsy+vyQEaFP4UHEzYImhC0kP4SQuGfMM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FY8FDzsa0bAd+NK3QVy1j83nmAlMyz/ENmDDnuiErVDg4EJGojwt+qv59NFJ86uygO
         fDKsfaFubBJE2nB09cNRzVXqnJ0vf9lQbX22p8vekEvt+oJOu3u3ETqwcWVHyNbxGUqW
         qt/I7p70o9xgSRBpKjVofkCm2h9uYZ1x22dYM=
MIME-Version: 1.0
Received: by 10.142.99.13 with SMTP id w13mr1116912wfb.18.1244165416886; Thu, 
	04 Jun 2009 18:30:16 -0700 (PDT)
In-Reply-To: <488992.27252.qm@web50301.mail.re2.yahoo.com>
References: <4d19a3630906040503t166bf687i8475c35a0547badc@mail.gmail.com>
	 <488992.27252.qm@web50301.mail.re2.yahoo.com>
Date: Fri, 5 Jun 2009 09:30:16 +0800
Message-ID: <c8c898a40906041830i14bbcab4p6aaea3f4bd50507a@mail.gmail.com>
Subject: Re: P2P Lucene
From: Ye Minjiao <yeminjiao@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502c913b722a4046b8fd55c
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502c913b722a4046b8fd55c
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

I guess sixearch might be the thing you are looking for...

http://sixearch.org/

Sixearch is a collaborative peer network application, which aims to address
the scalability and context limitations of centralized search engines and
also provides a complementary way for Web search.

 Sixearch uses the idea of modeling neighbor nodes by their content but
without assuming the presence of special directory hubs. As shown in Fig. 1,
each peer is both a (limited) directory hub and a content provider; it has
its own topical crawler guided by its user's information content and local
search engine. Peers communication is built on JXTA
<http://www.jxta.org/>platform . When a user submits a query, it is
first matched against the
local engine, and then routed to neighbor peers to obtain more results.
Ideally, the peer network should lead to the emergence of a clustered
topology by intelligent collaboration between the peers.
While traditional search engines such as Google and Yahoo provide access to
very large document collections, the Sixearch P2P Web search application
provides a complementary way for users to actively and collaboratively share
their own document collections. However, the Sixearch framework allows
traditional search engines to naturally be included as peers; such peers
would quickly emerge as reliable, trustworthy, and general authority nodes.

Ye Minjiao
eO0o.

George Bernard Shaw<http://www.brainyquote.com/quotes/authors/g/george_bernard_shaw.html>
- "A government that robs Peter to pay Paul can always depend on the
support of Paul."

On Fri, Jun 5, 2009 at 5:57 AM, Otis Gospodnetic <otis_gospodnetic@yahoo.com
> wrote:

>
> Big +1 ! :)
>
> It would make for a cool case study for Lucene in Action 3rd edition ;)
>
>  Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
> > From: Shashi Kant <skant@sloan.mit.edu>
> > To: java-user@lucene.apache.org
> > Sent: Thursday, June 4, 2009 8:03:56 AM
> > Subject: P2P Lucene
> >
> > Hi all,
> >
> > I am writing to gauge the group's interest level in building a P2P
> > application using Lucene. Nothing fancy, just good old-fashioned P2P
> > search across one's social-network or work-network (very unlike
> > Gnutella, Kazaa etc.). The obvious business-case for this could be
> > many such as document sharing/location within organizations without
> > centralized repositories. As is well known - intentionally or
> > inadvertently - most documents are locked-up in individual computers
> > and such a tool could provide a powerful discovery mechanism.
> >
> > I was thinking of create an F/OSS project leveraging Lucene and
> > Jabber/XMPP, but something far more lightweight than comparable
> > "groupware" projects with a dead-simple permission-based sharing
> > system. Lightweight simplicity being the operative words.
> >
> > Just curious to see the interest level in collaborating on such an
> > effort, and/or sharing any other ideas where such an effort would be
> > helpful.
> >
> > Thanks,
> > Shashi
> >
> > skant@alum.mit.edu
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502c913b722a4046b8fd55c--

From java-user-return-40618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 06:25:17 2009
Return-Path: <java-user-return-40618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99083 invoked from network); 5 Jun 2009 06:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 06:25:16 -0000
Received: (qmail 62508 invoked by uid 500); 5 Jun 2009 06:25:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62434 invoked by uid 500); 5 Jun 2009 06:25:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62424 invoked by uid 99); 5 Jun 2009 06:25:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 06:25:26 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.216.192 as permitted sender)
Received: from [209.85.216.192] (HELO mail-px0-f192.google.com) (209.85.216.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 06:25:14 +0000
Received: by pxi30 with SMTP id 30so285072pxi.29
        for <java-user@lucene.apache.org>; Thu, 04 Jun 2009 23:24:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=XoB6okS0yIGa34xW7+rwb1jNSQuK5mv8TEBZfhSe7To=;
        b=azc38jHmBkwLU7cIhO0H0uL9bx+8FLGqpelrXdDLrr57oSbF9J4a5FuVOgkIsO8Msq
         Kev9B/giBMug2woHvqTR+dzfpLaazOWjEDxdvFfxx84E+KL/vBetk/FcqpBqF8dWXQQo
         SNfl72aPpsXxTYAJkal5u6EivqFVngeNKvTbs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ZecRu+eWWQaWm7eugvSM++yG4Xd/aZgiIWamJ1dVPkOR6eRQ2l5HN2My3QfE4XBGkD
         kgTCoXgkMxvyfQtX3OAjZndpS74eoaABXEu3YnIce3MHcYmKdfoSeh6wKy1l5bLacsB7
         /7yqyOJkmYHNgB9v+pULOlR2qAv0OfdjWKUpY=
MIME-Version: 1.0
Received: by 10.142.50.6 with SMTP id x6mr1143345wfx.297.1244183092080; Thu, 
	04 Jun 2009 23:24:52 -0700 (PDT)
In-Reply-To: <8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com> 
	<8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com> 
	<8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com> 
	<ED1D56A848EF4BE6A4C5398C2782F470@VEGA> <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com> 
	<8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com> 
	<8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com> 
	<8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com> 
	<8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Fri, 5 Jun 2009 11:54:32 +0530
Message-ID: <8db6d74a0906042324o54636994j7f9dc14f45e7f1c5@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1a6763d31e7046b93f3d4
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1a6763d31e7046b93f3d4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello Robert,
I was thinking of kind of chaining analyzers, does this sound logical?
Currently I'm using the whitespace analyzer which tokenizes on whitespaces
only. As you mentioned earlier I dont need to use language identifiers,
which means I've to pass the full content through say first via
whitespaceanalyzer, then via analyzer for lowercasing, then analyzer for
stemming[do we have such analyzers or are they filters?I think they are
filters, then I've to go for custom analyzer]. As you said whitespace one
will act on the full content, lowercasing will aplly only on the english
part leaving my indic content untouched, right? and finally the stemming
will also apply to english words only and leaving the rest as such, right?
If passing the content through multiple analyzer is allowed then I thing I
can do else I have to have a custom analyzer that does exactly the same
thing. What you say?

Thanks,
KK.



On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com> wrote:

> KK well you can always get some good examples from the lucene contrib
> codebase.
> For example, look at the DutchAnalyzer, especially:
>
> TokenStream tokenStream(String fieldName, Reader reader)
>
> See how it combines a specified tokenizer with various filters? this is
> what
> you want to do, except of course you want to use different tokenizer and
> filters.
>
> On Thu, Jun 4, 2009 at 8:53 AM, KK <dioxide.software@gmail.com> wrote:
>
> > Thanks Muir.
> > Thanks for letting me know that I dont need language identifiers.
> >  I'll have a look and will try to write the analyzer. For my case I think
> > it
> > wont be that difficult.
> > BTW, can you point me to some sample codes/tutorials writing custom
> > analyzers. I could not find something in LIA2ndEdn. Is something htere?
> do
> > let me know.
> >
> > Thanks,
> > KK.
> >
> >
> >
> > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> > > KK, for your case, you don't really need to go to the effort of
> detecting
> > > whether fragments are english or not.
> > > Because the English stemmers in lucene will not modify your Indic text,
> > and
> > > neither will the LowerCaseFilter.
> > >
> > > what you want to do is create a custom analyzer that works like this
> > >
> > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr nightly jar],
> > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> > >
> > > Thanks,
> > > Robert
> > >
> > > On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.com> wrote:
> > >
> > > > Thank you all.
> > > > To be frank I was using Solr in the begining half a month ago. The
> > > > problem[rather bug] with solr was creation of new index on the fly.
> > > Though
> > > > they have a restful method for teh same, but it was not working. If I
> > > > remember properly one of Solr commiter "Noble Paul"[I dont know his
> > real
> > > > name] was trying to help me. I tried many nightly builds and spending
> a
> > > > couple of days stuck at that made me think of lucene and I switched
> to
> > > it.
> > > > Now after working with lucene which gives you full control of
> > everything
> > > I
> > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is similar to
> > > > Window$:Linux, its my view only, though]. Coming back to the point as
> > Uwe
> > > > mentioned that we can do the same thing in lucene as well, what is
> > > > available
> > > > in Solr, Solr is based on Lucene only, right?
> > > > I request Uwe to give me some more ideas on using the analyzers from
> > solr
> > > > that will do the job for me, handling a mix of both english and
> > > non-english
> > > > content.
> > > > Muir, can you give me a bit detail description of how to use the
> > > > WordDelimiteFilter to do my job.
> > > > On a side note, I was thingking of writing a simple analyzer that
> will
> > do
> > > > the following,
> > > > #. If the webpage fragment is non-english[for me its some indian
> > > language]
> > > > then index them as such, no stemming/ stop word removal to begin
> with.
> > As
> > > I
> > > > know its in UCN unicode something like \u0021\u0012\u34ae\u0031[just
> a
> > > > sample]
> > > > # If the fragment is english then apply standard anlyzing process for
> > > > english content. I've not thought of quering in the same way as of
> now
> > > i.e
> > > > mix of non-english and engish words.
> > > > Now to get all this,
> > > >  #1. I need some sort of way which will let me know if the content is
> > > > english or not. If not english just add the tokens to the document.
> Do
> > we
> > > > really need language identifiers, as i dont have any other content
> that
> > > > uses
> > > > the same script as english other than those \u1234 things for my
> indian
> > > > language content. Any smart hack/trick for the same?
> > > >  #2. If the its english apply all normal process and add the stemmed
> > > token
> > > > to document.
> > > > For all this I was thinking of iterating earch word of the web page
> and
> > > > apply the above procedure. And finallyadd  the newly created document
> > to
> > > > the
> > > > index.
> > > >
> > > > I would like some one to guide me in this direction. I'm pretty
> people
> > > must
> > > > have done similar/same thing earlier, I request them to guide me/
> point
> > > me
> > > > to some tutorials for the same.
> > > > Else help me out writing a custom analyzer only if thats not going to
> > be
> > > > too
> > > > complex. LOL, I'm a new user to lucene and know basics of Java
> coding.
> > > > Thank you very much.
> > > >
> > > > --KK.
> > > >
> > > >
> > > >
> > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> > > >
> > > > > yes this is true. for starters KK, might be good to startup solr
> and
> > > look
> > > > > at
> > > > > http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> > > > >
> > > > > if you want to stick with lucene, the WordDelimiterFilter is the
> > piece
> > > > you
> > > > > will want for your text, mainly for punctuation but also for format
> > > > > characters such as ZWJ/ZWNJ.
> > > > >
> > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <uwe@thetaphi.de>
> > wrote:
> > > > >
> > > > > > You can also re-use the solr analyzers, as far as I found out.
> > There
> > > is
> > > > > an
> > > > > > issue in jIRA/discussion on java-dev to merge them.
> > > > > >
> > > > > > -----
> > > > > > Uwe Schindler
> > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > > > http://www.thetaphi.de
> > > > > > eMail: uwe@thetaphi.de
> > > > > >
> > > > > >
> > > > > > > -----Original Message-----
> > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > > > > To: java-user@lucene.apache.org
> > > > > > > Subject: Re: How to support stemming and case folding for
> english
> > > > > content
> > > > > > > mixed with non-english content?
> > > > > > >
> > > > > > > KK, ok, so you only really want to stem the english. This is
> > good.
> > > > > > >
> > > > > > > Is it possible for you to consider using solr? solr's default
> > > > analyzer
> > > > > > for
> > > > > > > type 'text' will be good for your case. it will do the
> following
> > > > > > > 1. tokenize on whitespace
> > > > > > > 2. handle both indian language and english punctuation
> > > > > > > 3. lowercase the english.
> > > > > > > 4. stem the english.
> > > > > > >
> > > > > > > try a nightly build,
> > > > > > http://people.apache.org/builds/lucene/solr/nightly/
> > > > > > >
> > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <dioxide.software@gmail.com
> >
> > > > wrote:
> > > > > > >
> > > > > > > > Muir, thanks for your response.
> > > > > > > > I'm indexing indian language web pages which has got descent
> > > amount
> > > > > of
> > > > > > > > english content mixed with therein. For the time being I'm
> not
> > > > going
> > > > > to
> > > > > > > use
> > > > > > > > any stemmers as we don't have standard stemmers for indian
> > > > languages
> > > > > .
> > > > > > > So
> > > > > > > > what I want to do is like this,
> > > > > > > > Say I've a web page having hindi content with 5% english
> > content.
> > > > > Then
> > > > > > > for
> > > > > > > > hindi I want to use the basic white space analyzer as we dont
> > > have
> > > > > > > stemmers
> > > > > > > > for this as I mentioned earlier and whereever english appears
> I
> > > > want
> > > > > > > them
> > > > > > > > to
> > > > > > > > be stemmed tokenized etc[the standard process used for
> english
> > > > > > content].
> > > > > > > As
> > > > > > > > of now I'm using whitespace analyzer for the full content
> which
> > > > > doesnot
> > > > > > > > support case folding, stemming etc for teh content. So if
> there
> > > is
> > > > an
> > > > > > > > english word say "Detection" indexed as such then searching
> for
> > > > > > > detection
> > > > > > > > or
> > > > > > > > detect is not giving any results, which is the expected
> > behavior,
> > > > but
> > > > > I
> > > > > > > > want
> > > > > > > > this kind of queries to give results.
> > > > > > > > I hope I made it clear. Let me know any ideas on doing the
> > same.
> > > > And
> > > > > > one
> > > > > > > > more thing, I'm storing the full webpage content under a
> single
> > > > > field,
> > > > > > I
> > > > > > > > hope this will not make any difference, right?
> > > > > > > > It seems I've to use language identifiers, but do we really
> > need
> > > > > that?
> > > > > > > > Because we've only non-english content mixed with english[and
> > not
> > > > > > french
> > > > > > > or
> > > > > > > > russian etc].
> > > > > > > >
> > > > > > > > What is the best way of approaching the problem? Any
> thoughts!
> > > > > > > >
> > > > > > > > Thanks,
> > > > > > > > KK.
> > > > > > > >
> > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> rcmuir@gmail.com>
> > > > > wrote:
> > > > > > > >
> > > > > > > > > KK, is all of your latin script text actually english? Is
> > there
> > > > > stuff
> > > > > > > > like
> > > > > > > > > german or french mixed in?
> > > > > > > > >
> > > > > > > > > And for your non-english content (your examples have been
> > > indian
> > > > > > > writing
> > > > > > > > > systems), is it generally true that if you had devanagari,
> > you
> > > > can
> > > > > > > assume
> > > > > > > > > its hindi? or is there stuff like marathi mixed in?
> > > > > > > > >
> > > > > > > > > Reason I say this is to invoke the right stemmers, you
> really
> > > > need
> > > > > > > some
> > > > > > > > > language detection, but perhaps in your case you can cheat
> > and
> > > > > detect
> > > > > > > > this
> > > > > > > > > based on scripts...
> > > > > > > > >
> > > > > > > > > Thanks,
> > > > > > > > > Robert
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> > > dioxide.software@gmail.com>
> > > > > > > wrote:
> > > > > > > > >
> > > > > > > > > > Hi All,
> > > > > > > > > > I'm indexing some non-english content. But the page also
> > > > contains
> > > > > > > > english
> > > > > > > > > > content. As of now I'm using WhitespaceAnalyzer for all
> > > content
> > > > > and
> > > > > > > I'm
> > > > > > > > > > storing the full webpage content under a single filed.
> Now
> > we
> > > > > > > require
> > > > > > > > to
> > > > > > > > > > support case folding and stemmming for the english
> content
> > > > > > > intermingled
> > > > > > > > > > with
> > > > > > > > > > non-english content. I must metion that we dont have
> > stemming
> > > > and
> > > > > > > case
> > > > > > > > > > folding for these non-english content. I'm stuck with
> this.
> > > > Some
> > > > > > one
> > > > > > > do
> > > > > > > > > let
> > > > > > > > > > me know how to proceed for fixing this issue.
> > > > > > > > > >
> > > > > > > > > > Thanks,
> > > > > > > > > > KK.
> > > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > --
> > > > > > > > > Robert Muir
> > > > > > > > > rcmuir@gmail.com
> > > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > --
> > > > > > > Robert Muir
> > > > > > > rcmuir@gmail.com
> > > > > >
> > > > > >
> > > > > >
> > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Robert Muir
> > > > > rcmuir@gmail.com
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

--000e0cd1a6763d31e7046b93f3d4--

From java-user-return-40619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 07:20:30 2009
Return-Path: <java-user-return-40619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14302 invoked from network); 5 Jun 2009 07:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 07:20:30 -0000
Received: (qmail 7004 invoked by uid 500); 5 Jun 2009 07:20:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6954 invoked by uid 500); 5 Jun 2009 07:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6944 invoked by uid 99); 5 Jun 2009 07:20:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 07:20:39 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.222.199 as permitted sender)
Received: from [209.85.222.199] (HELO mail-pz0-f199.google.com) (209.85.222.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 07:20:27 +0000
Received: by pzk37 with SMTP id 37so1181836pzk.29
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 00:20:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=4v4qKClFfK9F3ax0wMDCZuy13n5pHKi8WEsbxDDKuBw=;
        b=RVOOnYqRPC1ta1SJpK27hpJtNZPaj0c48qtOhCWxTw7Ln6ulj2c3QsBeXTPf6CkRk8
         dtztTW/kvsKpwGirFEsDP5rHtOAPjrHLAeMNIK2+l0ly+R3G+CW4SlcpCUf1auWZa5FX
         BNtZ9XHtkgeNP0aErWiDiwLJGFuYjtDfR5z8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=hWuLPxK+vnuwGhqV9k270+xJgNbk5xyghb2q+paEzgmoT18tWJ02ofJnl878t2CGVd
         DApcWTzFj4ZvJw6IsaAas71CQF/5NHV++Pw77Fa98TNK3tBVZhRb343EyXYaqpm4mDro
         TDGFRaD+l8hypBouaoG5GsudPciyO6f2+XQME=
MIME-Version: 1.0
Received: by 10.142.194.1 with SMTP id r1mr1089262wff.122.1244186405211; Fri, 
	05 Jun 2009 00:20:05 -0700 (PDT)
In-Reply-To: <8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8f0ad1f30906030912y6b7abe07j48c6d08ffba1b30c@mail.gmail.com> 
	<8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com> 
	<8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com> 
	<ED1D56A848EF4BE6A4C5398C2782F470@VEGA> <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com> 
	<8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com> 
	<8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com> 
	<8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com> 
	<8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Fri, 5 Jun 2009 12:49:45 +0530
Message-ID: <8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd14ed8b79179046b94b8c1
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd14ed8b79179046b94b8c1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Robert,
This is what I copied from ThaiAnalyzer @ lucene contrib

public class ThaiAnalyzer extends Analyzer {
  public TokenStream tokenStream(String fieldName, Reader reader) {
      TokenStream ts = new StandardTokenizer(reader);
    ts = new StandardFilter(ts);
    ts = new ThaiWordFilter(ts);
    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
    return ts;
  }
}

Now as you said, I've to use whitespacetokenizer withworddelimitefilter[solr
nightly.jar] stop wordremoval, porter stemmer etc , so it is something like
this,
public class IndicAnalyzer extends Analyzer {
 public TokenStream tokenStream(String fieldName, Reader reader) {
   TokenStream ts = new WhiteSpaceTokenizer(reader);
   ts = new WordDelimiterFilter(ts);
   ts = new LowerCaseFilter(ts);
   ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS)   // english
stop filter, is this the default one?
   ts = new PorterFilter(ts);
   return ts;
 }
}

Does this sound OK? I think it will do the job...let me try it out..
I dont need custom filter as per my requirement, at least not for these
basic things I'm doing? I think so...

Thanks,
KK.


On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com> wrote:

> KK well you can always get some good examples from the lucene contrib
> codebase.
> For example, look at the DutchAnalyzer, especially:
>
> TokenStream tokenStream(String fieldName, Reader reader)
>
> See how it combines a specified tokenizer with various filters? this is
> what
> you want to do, except of course you want to use different tokenizer and
> filters.
>
> On Thu, Jun 4, 2009 at 8:53 AM, KK <dioxide.software@gmail.com> wrote:
>
> > Thanks Muir.
> > Thanks for letting me know that I dont need language identifiers.
> >  I'll have a look and will try to write the analyzer. For my case I think
> > it
> > wont be that difficult.
> > BTW, can you point me to some sample codes/tutorials writing custom
> > analyzers. I could not find something in LIA2ndEdn. Is something htere?
> do
> > let me know.
> >
> > Thanks,
> > KK.
> >
> >
> >
> > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> > > KK, for your case, you don't really need to go to the effort of
> detecting
> > > whether fragments are english or not.
> > > Because the English stemmers in lucene will not modify your Indic text,
> > and
> > > neither will the LowerCaseFilter.
> > >
> > > what you want to do is create a custom analyzer that works like this
> > >
> > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr nightly jar],
> > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> > >
> > > Thanks,
> > > Robert
> > >
> > > On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.com> wrote:
> > >
> > > > Thank you all.
> > > > To be frank I was using Solr in the begining half a month ago. The
> > > > problem[rather bug] with solr was creation of new index on the fly.
> > > Though
> > > > they have a restful method for teh same, but it was not working. If I
> > > > remember properly one of Solr commiter "Noble Paul"[I dont know his
> > real
> > > > name] was trying to help me. I tried many nightly builds and spending
> a
> > > > couple of days stuck at that made me think of lucene and I switched
> to
> > > it.
> > > > Now after working with lucene which gives you full control of
> > everything
> > > I
> > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is similar to
> > > > Window$:Linux, its my view only, though]. Coming back to the point as
> > Uwe
> > > > mentioned that we can do the same thing in lucene as well, what is
> > > > available
> > > > in Solr, Solr is based on Lucene only, right?
> > > > I request Uwe to give me some more ideas on using the analyzers from
> > solr
> > > > that will do the job for me, handling a mix of both english and
> > > non-english
> > > > content.
> > > > Muir, can you give me a bit detail description of how to use the
> > > > WordDelimiteFilter to do my job.
> > > > On a side note, I was thingking of writing a simple analyzer that
> will
> > do
> > > > the following,
> > > > #. If the webpage fragment is non-english[for me its some indian
> > > language]
> > > > then index them as such, no stemming/ stop word removal to begin
> with.
> > As
> > > I
> > > > know its in UCN unicode something like \u0021\u0012\u34ae\u0031[just
> a
> > > > sample]
> > > > # If the fragment is english then apply standard anlyzing process for
> > > > english content. I've not thought of quering in the same way as of
> now
> > > i.e
> > > > mix of non-english and engish words.
> > > > Now to get all this,
> > > >  #1. I need some sort of way which will let me know if the content is
> > > > english or not. If not english just add the tokens to the document.
> Do
> > we
> > > > really need language identifiers, as i dont have any other content
> that
> > > > uses
> > > > the same script as english other than those \u1234 things for my
> indian
> > > > language content. Any smart hack/trick for the same?
> > > >  #2. If the its english apply all normal process and add the stemmed
> > > token
> > > > to document.
> > > > For all this I was thinking of iterating earch word of the web page
> and
> > > > apply the above procedure. And finallyadd  the newly created document
> > to
> > > > the
> > > > index.
> > > >
> > > > I would like some one to guide me in this direction. I'm pretty
> people
> > > must
> > > > have done similar/same thing earlier, I request them to guide me/
> point
> > > me
> > > > to some tutorials for the same.
> > > > Else help me out writing a custom analyzer only if thats not going to
> > be
> > > > too
> > > > complex. LOL, I'm a new user to lucene and know basics of Java
> coding.
> > > > Thank you very much.
> > > >
> > > > --KK.
> > > >
> > > >
> > > >
> > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> > > >
> > > > > yes this is true. for starters KK, might be good to startup solr
> and
> > > look
> > > > > at
> > > > > http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> > > > >
> > > > > if you want to stick with lucene, the WordDelimiterFilter is the
> > piece
> > > > you
> > > > > will want for your text, mainly for punctuation but also for format
> > > > > characters such as ZWJ/ZWNJ.
> > > > >
> > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <uwe@thetaphi.de>
> > wrote:
> > > > >
> > > > > > You can also re-use the solr analyzers, as far as I found out.
> > There
> > > is
> > > > > an
> > > > > > issue in jIRA/discussion on java-dev to merge them.
> > > > > >
> > > > > > -----
> > > > > > Uwe Schindler
> > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > > > http://www.thetaphi.de
> > > > > > eMail: uwe@thetaphi.de
> > > > > >
> > > > > >
> > > > > > > -----Original Message-----
> > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > > > > To: java-user@lucene.apache.org
> > > > > > > Subject: Re: How to support stemming and case folding for
> english
> > > > > content
> > > > > > > mixed with non-english content?
> > > > > > >
> > > > > > > KK, ok, so you only really want to stem the english. This is
> > good.
> > > > > > >
> > > > > > > Is it possible for you to consider using solr? solr's default
> > > > analyzer
> > > > > > for
> > > > > > > type 'text' will be good for your case. it will do the
> following
> > > > > > > 1. tokenize on whitespace
> > > > > > > 2. handle both indian language and english punctuation
> > > > > > > 3. lowercase the english.
> > > > > > > 4. stem the english.
> > > > > > >
> > > > > > > try a nightly build,
> > > > > > http://people.apache.org/builds/lucene/solr/nightly/
> > > > > > >
> > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <dioxide.software@gmail.com
> >
> > > > wrote:
> > > > > > >
> > > > > > > > Muir, thanks for your response.
> > > > > > > > I'm indexing indian language web pages which has got descent
> > > amount
> > > > > of
> > > > > > > > english content mixed with therein. For the time being I'm
> not
> > > > going
> > > > > to
> > > > > > > use
> > > > > > > > any stemmers as we don't have standard stemmers for indian
> > > > languages
> > > > > .
> > > > > > > So
> > > > > > > > what I want to do is like this,
> > > > > > > > Say I've a web page having hindi content with 5% english
> > content.
> > > > > Then
> > > > > > > for
> > > > > > > > hindi I want to use the basic white space analyzer as we dont
> > > have
> > > > > > > stemmers
> > > > > > > > for this as I mentioned earlier and whereever english appears
> I
> > > > want
> > > > > > > them
> > > > > > > > to
> > > > > > > > be stemmed tokenized etc[the standard process used for
> english
> > > > > > content].
> > > > > > > As
> > > > > > > > of now I'm using whitespace analyzer for the full content
> which
> > > > > doesnot
> > > > > > > > support case folding, stemming etc for teh content. So if
> there
> > > is
> > > > an
> > > > > > > > english word say "Detection" indexed as such then searching
> for
> > > > > > > detection
> > > > > > > > or
> > > > > > > > detect is not giving any results, which is the expected
> > behavior,
> > > > but
> > > > > I
> > > > > > > > want
> > > > > > > > this kind of queries to give results.
> > > > > > > > I hope I made it clear. Let me know any ideas on doing the
> > same.
> > > > And
> > > > > > one
> > > > > > > > more thing, I'm storing the full webpage content under a
> single
> > > > > field,
> > > > > > I
> > > > > > > > hope this will not make any difference, right?
> > > > > > > > It seems I've to use language identifiers, but do we really
> > need
> > > > > that?
> > > > > > > > Because we've only non-english content mixed with english[and
> > not
> > > > > > french
> > > > > > > or
> > > > > > > > russian etc].
> > > > > > > >
> > > > > > > > What is the best way of approaching the problem? Any
> thoughts!
> > > > > > > >
> > > > > > > > Thanks,
> > > > > > > > KK.
> > > > > > > >
> > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> rcmuir@gmail.com>
> > > > > wrote:
> > > > > > > >
> > > > > > > > > KK, is all of your latin script text actually english? Is
> > there
> > > > > stuff
> > > > > > > > like
> > > > > > > > > german or french mixed in?
> > > > > > > > >
> > > > > > > > > And for your non-english content (your examples have been
> > > indian
> > > > > > > writing
> > > > > > > > > systems), is it generally true that if you had devanagari,
> > you
> > > > can
> > > > > > > assume
> > > > > > > > > its hindi? or is there stuff like marathi mixed in?
> > > > > > > > >
> > > > > > > > > Reason I say this is to invoke the right stemmers, you
> really
> > > > need
> > > > > > > some
> > > > > > > > > language detection, but perhaps in your case you can cheat
> > and
> > > > > detect
> > > > > > > > this
> > > > > > > > > based on scripts...
> > > > > > > > >
> > > > > > > > > Thanks,
> > > > > > > > > Robert
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> > > dioxide.software@gmail.com>
> > > > > > > wrote:
> > > > > > > > >
> > > > > > > > > > Hi All,
> > > > > > > > > > I'm indexing some non-english content. But the page also
> > > > contains
> > > > > > > > english
> > > > > > > > > > content. As of now I'm using WhitespaceAnalyzer for all
> > > content
> > > > > and
> > > > > > > I'm
> > > > > > > > > > storing the full webpage content under a single filed.
> Now
> > we
> > > > > > > require
> > > > > > > > to
> > > > > > > > > > support case folding and stemmming for the english
> content
> > > > > > > intermingled
> > > > > > > > > > with
> > > > > > > > > > non-english content. I must metion that we dont have
> > stemming
> > > > and
> > > > > > > case
> > > > > > > > > > folding for these non-english content. I'm stuck with
> this.
> > > > Some
> > > > > > one
> > > > > > > do
> > > > > > > > > let
> > > > > > > > > > me know how to proceed for fixing this issue.
> > > > > > > > > >
> > > > > > > > > > Thanks,
> > > > > > > > > > KK.
> > > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > --
> > > > > > > > > Robert Muir
> > > > > > > > > rcmuir@gmail.com
> > > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > --
> > > > > > > Robert Muir
> > > > > > > rcmuir@gmail.com
> > > > > >
> > > > > >
> > > > > >
> > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Robert Muir
> > > > > rcmuir@gmail.com
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

--000e0cd14ed8b79179046b94b8c1--

From java-user-return-40620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 10:35:45 2009
Return-Path: <java-user-return-40620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86106 invoked from network); 5 Jun 2009 10:35:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 10:35:45 -0000
Received: (qmail 58547 invoked by uid 500); 5 Jun 2009 10:35:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58473 invoked by uid 500); 5 Jun 2009 10:35:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58463 invoked by uid 99); 5 Jun 2009 10:35:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 10:35:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 10:35:46 +0000
Received: by gxk11 with SMTP id 11so1179026gxk.5
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 03:35:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=ZzkB3A7n2OhxtEUz4zWWPAA6tur9p3kVG9qvhzslwj8=;
        b=W7q4to/LEmCKbHOKaKRYuSvxrJDTHHwZdYWiLyP63NSs21Fl0QHFvDKywNN76iRXaw
         IuiHSyITipKnFFOGc25qgPoPy5K8brpeRRKfz/3XHl3K6V6keog/Y2wtyDTlWZ5LtQWp
         6pwTW/nxm927MKHZuqhib/vfbWDQd5Afrrnsc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=KDTHtHYhgRIUiI87s5mIZeuW/ZLaFYBdVpEdoPNPN/Vlrx5cTxns4K9mU/qcv17NCB
         6GZJDgutdzk8AfCqI37nlYnq429QkIIBm2Qxd63x8yDyENH8v+WboW+6tLGmc+CRPQ3X
         8B4+oug+oGHGjbQ1rDzP0ctBNc/Nsrq29tLRQ=
MIME-Version: 1.0
Received: by 10.150.149.17 with SMTP id w17mr5626678ybd.303.1244198125089; 
	Fri, 05 Jun 2009 03:35:25 -0700 (PDT)
In-Reply-To: <c8c898a40906041830i14bbcab4p6aaea3f4bd50507a@mail.gmail.com>
References: <4d19a3630906040503t166bf687i8475c35a0547badc@mail.gmail.com> 
	<488992.27252.qm@web50301.mail.re2.yahoo.com> <c8c898a40906041830i14bbcab4p6aaea3f4bd50507a@mail.gmail.com>
From: Shashi Kant <shashi.mit@gmail.com>
Date: Fri, 5 Jun 2009 06:35:05 -0400
Message-ID: <4d19a3630906050335sac1f8b3xb0163484e807fa0@mail.gmail.com>
Subject: Re: P2P Lucene
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the up Otis. I will give this some more thought, prototype
some, and possibly put in a proposal for the Apache Incubator.

Ye,

I am not aware of Sixearch, but there are several P2P applications
e.g. WiredReach, Grub, Neurogrid etc.
However, my idea is quite a bit different from the existing apps.

It differs because it leverages a user's current networks (IM buddies,
social networks, Organizations/Institutes etc.)  instead of
any-to-any. There are several other differences, which I will flesh
out once I have given it more thought.


thanks for responding and email me off-list if you wish.

shashi
skant@alum.mit.edu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 10:50:00 2009
Return-Path: <java-user-return-40621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90581 invoked from network); 5 Jun 2009 10:50:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 10:50:00 -0000
Received: (qmail 80479 invoked by uid 500); 5 Jun 2009 10:50:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80401 invoked by uid 500); 5 Jun 2009 10:50:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80391 invoked by uid 99); 5 Jun 2009 10:50:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 10:50:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 10:50:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MCWzU-0005fO-CS
	for java-user@lucene.apache.org; Fri, 05 Jun 2009 03:49:40 -0700
Message-ID: <23886073.post@talk.nabble.com>
Date: Fri, 5 Jun 2009 03:49:40 -0700 (PDT)
From: Piotr Jakubowski <piotrj@gmail.com>
To: java-user@lucene.apache.org
Subject: One character highlight
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: piotrj@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I am wondering whether using Lucene Highlighter it is possible to highlight
parts of words. So for instance, if I type A then in word America I would
have America or if I type er I would get America

Thanks for replies
-- 
View this message in context: http://www.nabble.com/One-character-highlight-tp23886073p23886073.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 11:02:17 2009
Return-Path: <java-user-return-40622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94091 invoked from network); 5 Jun 2009 11:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 11:02:16 -0000
Received: (qmail 89012 invoked by uid 500); 5 Jun 2009 11:02:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88932 invoked by uid 500); 5 Jun 2009 11:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88920 invoked by uid 99); 5 Jun 2009 11:02:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 11:02:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 11:02:17 +0000
Received: by fg-out-1718.google.com with SMTP id l27so158676fgb.4
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 04:01:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=dmtudzFmB+l5KvwM8oBh0Mm8I+OXqEw6PaMnG/zAML4=;
        b=mB335Dz/x0CENhTN7wUU/6T/Oz1mrEb6gBxVYiAVN0b6ma0cs1iJ8+Ow5SzHd4HmUI
         0HD8H2MfpdGtbsJXdN8T97ZuFtTLFm1dCNrJS19bGREJTsj8zC96RRwDYYQV7hqdol2k
         fZ4435+lQpddnjyNr3Z4cH4SBMdApPjxfSFyE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=RlTOWMOmwhirntiYxBoLM5vFAFHdxjFY1tvj0lBf9apSdbquOmMai/TDVgAqNy4yDE
         Hqib8hgu3tWL12fm2A8PzYfTjSn3faQu8OA92oKtCTGGwehvHZ7CGr9KYFNOZpuAMR+7
         /ycCvj+XI9wssU9W5hJSf0mXPXw3nmTiM4bMA=
MIME-Version: 1.0
Received: by 10.86.51.10 with SMTP id y10mr3763637fgy.9.1244199717072; Fri, 05 
	Jun 2009 04:01:57 -0700 (PDT)
In-Reply-To: <e75c02ef0906041410o6f0e3430g4e8291f94b76fc35@mail.gmail.com>
References: <e75c02ef0906041410o6f0e3430g4e8291f94b76fc35@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 5 Jun 2009 12:01:37 +0100
Message-ID: <8c4e68610906050401r6f092c67wc5a485ce8544d21a@mail.gmail.com>
Subject: Re: Query:Adding all docs at once or creating smaller indexes and 
	merge
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


My guess is that one big index would be more efficient since the total
IO read and write load would be less.  The big reason for creating
smaller intermediate indexes is that you could spread their creation
over multiple jobs/disks/servers.

There is lots of good advice in
http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

As to a performance penalty, there are too many variables to hazard a
guess.  Try it out in your application on your hardware.


--
Ian.


On Thu, Jun 4, 2009 at 10:10 PM, Tarandeep Singh<tarandeep@gmail.com> wrote:
> Hi,
>
> From efficiency point of view, what will be more efficient-
>
> Creating a single big index (big enough for one machine) by adding all
> documents in it at once
>
> or
>
> Creating smaller indexes and then merge them to make one bigger index?
>
> And if there is a performance penalty, then any rough estimate how much?
>
> Thanks,
> Tarandeep
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 11:15:22 2009
Return-Path: <java-user-return-40623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96042 invoked from network); 5 Jun 2009 11:15:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 11:15:22 -0000
Received: (qmail 3321 invoked by uid 500); 5 Jun 2009 11:15:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3257 invoked by uid 500); 5 Jun 2009 11:15:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3247 invoked by uid 99); 5 Jun 2009 11:15:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 11:15:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 11:15:22 +0000
Received: by fxm3 with SMTP id 3so1535525fxm.5
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 04:15:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=ntggoSxZUFUuhT18BZNLGnDBJ2QQGaqHJi98PSEuKL4=;
        b=Hfp2ww4gjkZerXp6b8sS5QbA58KSXMbSaTEdLsWtBSEjzDFCjvcA5FoTYMkmP1Lryj
         ZM9J8ECxI14ZGQD8Ku/cn+0FajDDvk+jlRMXL6bKUHFyxq6/Cid2/4YdGPI+9q+lSOZF
         CWK6xidGYmzwAmk6Ts7UsiV0bzzSY22GtTm4w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=GmMyV9xdkOWCZXJCn0xLSRcR0M3Ruys/PF1RJxRDf29nfLEPRidxNyI0nK+5L8zBOL
         kl+2erGjGf+5pdU2K063M6frWbucPAH7cMKCbxO4u7hUXhmeMeXsLYs9Vrb+6/L/95Fi
         N9qdJY7+0gSZh1S7YBivmj6egiiXlKpPYXsPU=
MIME-Version: 1.0
Received: by 10.86.36.11 with SMTP id j11mr3755249fgj.22.1244200501109; Fri, 
	05 Jun 2009 04:15:01 -0700 (PDT)
In-Reply-To: <635121.98181.qm@web111818.mail.gq1.yahoo.com>
References: <635121.98181.qm@web111818.mail.gq1.yahoo.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 5 Jun 2009 12:14:41 +0100
Message-ID: <8c4e68610906050414k33956ccbj391870b3bd74d9cc@mail.gmail.com>
Subject: Re: cannot retrieve the values of a field is not stored in the index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You can't get at the field values from the document hits.
Field.Store.NO means it isn't stored and what isn't there can't be
retrieved.

But you should be able to get at the indexed paths via a TermEnum.
Something like this

  	IndexReader reader =3D IndexReader.open(...);
	String field =3D "path".intern();
	Term st =3D new Term("path", "");
	TermEnum te =3D reader.terms(st);
	while (true) {
	    Term t =3D te.term();
	    if (t =3D=3D null || t.field() !=3D field) {
		break;
	    }
	    System.out.println(t.text());
	    if (!te.next()) {
		break;
	    }
	}
    }


--
Ian.


On Fri, Jun 5, 2009 at 1:18 AM, Alex Steward<alex_lucene@yahoo.com> wrote:
>
>
> Hi,
>
> =A0 Is there a way I can retrieve the value of a field that is not stored=
 in the Index?
>
>
> private static void indexFile(IndexWriter writer, File f)
> =A0=A0=A0 throws IOException {
>
> =A0=A0=A0 if (f.isHidden() || !f.exists() || !f.canRead()) {
> =A0=A0=A0=A0=A0 return;
> =A0=A0=A0 }
>
> =A0=A0=A0 System.out.println("Indexing " + f.getCanonicalPath());
>
> =A0=A0=A0 Document doc =3D new Document();
>
> =A0=A0=A0 // add contents of file
> =A0=A0=A0 FileReader fr =3D new FileReader(f);
>
> =A0=A0=A0 doc.add(new Field("contents", fr));
>
> =A0=A0=A0 //adding second field which contains the path of the file
> =A0=A0=A0 doc.add(new Field("path", f.getCanonicalPath(),
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 Field.Store.NO,
> =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 Field.Index.NOT_ANALYZED));
> }
>
> Is there a way I can access the value of the field "path" from the docume=
nt hits?
>
> Thanks,
> a
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 11:31:38 2009
Return-Path: <java-user-return-40624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1993 invoked from network); 5 Jun 2009 11:31:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 11:31:38 -0000
Received: (qmail 19546 invoked by uid 500); 5 Jun 2009 11:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19384 invoked by uid 500); 5 Jun 2009 11:31:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19353 invoked by uid 99); 5 Jun 2009 11:31:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 11:31:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of abhirama.bhat@gmail.com designates 209.85.222.196 as permitted sender)
Received: from [209.85.222.196] (HELO mail-pz0-f196.google.com) (209.85.222.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 11:31:37 +0000
Received: by pzk34 with SMTP id 34so55976pzk.29
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 04:31:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=isJcDeJoHkeJNRMeptrBC//yG8x5xDgb7DcIYnOkXWI=;
        b=BrggnO3HszWs5XAXMed6wZxFXSZxlWWrj471o2xtSx0RfY7cRtQ8d02iYnaA/OGu9G
         To0UB0zajZlJ52+2zPC3OH9K8sjng/81I7cIPXISVIIBJgr3BY4+y4QpBsJQPh3FVzyV
         o5LlGup3wCVBtl4kl+K3v0/dv/Vl+QOquQ8bo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Zrc3Kueq4Q63MpL0sXN4ve5Wa5L2BFsk+uM87UOvCpW0DY5R+767UyR5hk13b+LJ4T
         p+lB5YVa5pZsyr1Kp69Fe9Sou/2G7Kv/eAquNSOsRrAbjl2mJah3no4vymEDHsAMxrAf
         2OH9+79ktXkE/jZYRIYS+ol1ahQy0yHpWaXWs=
MIME-Version: 1.0
Received: by 10.142.82.6 with SMTP id f6mr1268965wfb.182.1244201475800; Fri, 
	05 Jun 2009 04:31:15 -0700 (PDT)
Date: Fri, 5 Jun 2009 17:01:15 +0530
Message-ID: <39f63ad30906050431j5e78e4c5v25dba006c236089f@mail.gmail.com>
Subject: Phrase search
From: Abhi <abhirama.bhat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e90d94fe800b046b983a02
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e90d94fe800b046b983a02
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Say I have indexed the following strings:

1. "cool gaming laptop"
2. "cool gaming lappy"
3. "gaming laptop cool"

Now when I search with a query say "cool gaming computer", I want string 1
and 2 to appear on top (where search terms are closer to each other)
followed by 3.

I can use a Term query to search but, the problem is that word proximity
does not come into picture. All 3 document get an even score. The behaviour
that I want is documents that have "cool" and "gaming" and "computer" (these
words might be present or not in the indexed document) as close to each
other as possible should get a higher score.

I can use a Phrase query so that proximity of search terms affect scoring
but, I do not get any result because string "computer" is not present in any
of the indexed documents.

Is there a way to achieve the above?
-- 
Cheers,
Abhi

--001636e90d94fe800b046b983a02--

From java-user-return-40625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 12:01:10 2009
Return-Path: <java-user-return-40625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9149 invoked from network); 5 Jun 2009 12:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 12:01:10 -0000
Received: (qmail 45579 invoked by uid 500); 5 Jun 2009 12:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45501 invoked by uid 500); 5 Jun 2009 12:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45491 invoked by uid 99); 5 Jun 2009 12:01:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 12:01:19 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 12:01:08 +0000
Received: by yw-out-2324.google.com with SMTP id 2so669857ywt.5
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 05:00:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/bJCQkY4cTfwHD19bQD97XV5UzrhU0zAt/288myDSiU=;
        b=li8jQmkT1t4TMITLgWiLoLHQv+vFRt6dKvnYT49QtF6yeKyy59mzl7KFXCQIIQXJB+
         zCk2XDuff0oIG5mEZRxNLJokwO8WH+ldVQc1EXv7ds20ja8bwp1XSjG3tub/1/5Qg4e2
         xS/Fno1YfIAi76NnS6ae92oFONzxEnL/3oUgY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NJ8JX0/7+DCW5DgWf1ANdMgpvfYBMhGtItQXL7RQwH4V/Lo9XwpBtRJbe5ZynUfWuX
         VjgJdGCi1EbwtJ7m39lLVuIrY1CgsKIgzHScJcLJHXv5psjOu5GONgvUmB0E6nI8Garr
         B7C16yF1vMrgS0FqkmmvKpj+62zlDpTc00oPM=
MIME-Version: 1.0
Received: by 10.100.248.16 with SMTP id v16mr3860884anh.60.1244203247348; Fri, 
	05 Jun 2009 05:00:47 -0700 (PDT)
In-Reply-To: <8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8db6d74a0906032212i62760b58r6799f3f441ee1ece@mail.gmail.com>
	 <8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com>
	 <ED1D56A848EF4BE6A4C5398C2782F470@VEGA>
	 <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com>
	 <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
	 <8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com>
	 <8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com>
	 <8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
	 <8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com>
Date: Fri, 5 Jun 2009 08:00:47 -0400
Message-ID: <8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016369201d0962df3046b98a48d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016369201d0962df3046b98a48d
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

i think you are on the right track... once you build your analyzer, put it
in your classpath and play around with it in luke and see if it does what
you want.

On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com> wrote:

> Hi Robert,
> This is what I copied from ThaiAnalyzer @ lucene contrib
>
> public class ThaiAnalyzer extends Analyzer {
>  public TokenStream tokenStream(String fieldName, Reader reader) {
>      TokenStream ts = new StandardTokenizer(reader);
>    ts = new StandardFilter(ts);
>    ts = new ThaiWordFilter(ts);
>    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
>    return ts;
>  }
> }
>
> Now as you said, I've to use whitespacetokenizer
> withworddelimitefilter[solr
> nightly.jar] stop wordremoval, porter stemmer etc , so it is something like
> this,
> public class IndicAnalyzer extends Analyzer {
>  public TokenStream tokenStream(String fieldName, Reader reader) {
>   TokenStream ts = new WhiteSpaceTokenizer(reader);
>   ts = new WordDelimiterFilter(ts);
>   ts = new LowerCaseFilter(ts);
>   ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS)   // english
> stop filter, is this the default one?
>   ts = new PorterFilter(ts);
>   return ts;
>  }
> }
>
> Does this sound OK? I think it will do the job...let me try it out..
> I dont need custom filter as per my requirement, at least not for these
> basic things I'm doing? I think so...
>
> Thanks,
> KK.
>
>
> On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > KK well you can always get some good examples from the lucene contrib
> > codebase.
> > For example, look at the DutchAnalyzer, especially:
> >
> > TokenStream tokenStream(String fieldName, Reader reader)
> >
> > See how it combines a specified tokenizer with various filters? this is
> > what
> > you want to do, except of course you want to use different tokenizer and
> > filters.
> >
> > On Thu, Jun 4, 2009 at 8:53 AM, KK <dioxide.software@gmail.com> wrote:
> >
> > > Thanks Muir.
> > > Thanks for letting me know that I dont need language identifiers.
> > >  I'll have a look and will try to write the analyzer. For my case I
> think
> > > it
> > > wont be that difficult.
> > > BTW, can you point me to some sample codes/tutorials writing custom
> > > analyzers. I could not find something in LIA2ndEdn. Is something htere?
> > do
> > > let me know.
> > >
> > > Thanks,
> > > KK.
> > >
> > >
> > >
> > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.com> wrote:
> > >
> > > > KK, for your case, you don't really need to go to the effort of
> > detecting
> > > > whether fragments are english or not.
> > > > Because the English stemmers in lucene will not modify your Indic
> text,
> > > and
> > > > neither will the LowerCaseFilter.
> > > >
> > > > what you want to do is create a custom analyzer that works like this
> > > >
> > > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr nightly
> jar],
> > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> > > >
> > > > Thanks,
> > > > Robert
> > > >
> > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.com>
> wrote:
> > > >
> > > > > Thank you all.
> > > > > To be frank I was using Solr in the begining half a month ago. The
> > > > > problem[rather bug] with solr was creation of new index on the fly.
> > > > Though
> > > > > they have a restful method for teh same, but it was not working. If
> I
> > > > > remember properly one of Solr commiter "Noble Paul"[I dont know his
> > > real
> > > > > name] was trying to help me. I tried many nightly builds and
> spending
> > a
> > > > > couple of days stuck at that made me think of lucene and I switched
> > to
> > > > it.
> > > > > Now after working with lucene which gives you full control of
> > > everything
> > > > I
> > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is similar to
> > > > > Window$:Linux, its my view only, though]. Coming back to the point
> as
> > > Uwe
> > > > > mentioned that we can do the same thing in lucene as well, what is
> > > > > available
> > > > > in Solr, Solr is based on Lucene only, right?
> > > > > I request Uwe to give me some more ideas on using the analyzers
> from
> > > solr
> > > > > that will do the job for me, handling a mix of both english and
> > > > non-english
> > > > > content.
> > > > > Muir, can you give me a bit detail description of how to use the
> > > > > WordDelimiteFilter to do my job.
> > > > > On a side note, I was thingking of writing a simple analyzer that
> > will
> > > do
> > > > > the following,
> > > > > #. If the webpage fragment is non-english[for me its some indian
> > > > language]
> > > > > then index them as such, no stemming/ stop word removal to begin
> > with.
> > > As
> > > > I
> > > > > know its in UCN unicode something like
> \u0021\u0012\u34ae\u0031[just
> > a
> > > > > sample]
> > > > > # If the fragment is english then apply standard anlyzing process
> for
> > > > > english content. I've not thought of quering in the same way as of
> > now
> > > > i.e
> > > > > mix of non-english and engish words.
> > > > > Now to get all this,
> > > > >  #1. I need some sort of way which will let me know if the content
> is
> > > > > english or not. If not english just add the tokens to the document.
> > Do
> > > we
> > > > > really need language identifiers, as i dont have any other content
> > that
> > > > > uses
> > > > > the same script as english other than those \u1234 things for my
> > indian
> > > > > language content. Any smart hack/trick for the same?
> > > > >  #2. If the its english apply all normal process and add the
> stemmed
> > > > token
> > > > > to document.
> > > > > For all this I was thinking of iterating earch word of the web page
> > and
> > > > > apply the above procedure. And finallyadd  the newly created
> document
> > > to
> > > > > the
> > > > > index.
> > > > >
> > > > > I would like some one to guide me in this direction. I'm pretty
> > people
> > > > must
> > > > > have done similar/same thing earlier, I request them to guide me/
> > point
> > > > me
> > > > > to some tutorials for the same.
> > > > > Else help me out writing a custom analyzer only if thats not going
> to
> > > be
> > > > > too
> > > > > complex. LOL, I'm a new user to lucene and know basics of Java
> > coding.
> > > > > Thank you very much.
> > > > >
> > > > > --KK.
> > > > >
> > > > >
> > > > >
> > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
> > wrote:
> > > > >
> > > > > > yes this is true. for starters KK, might be good to startup solr
> > and
> > > > look
> > > > > > at
> > > > > > http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> > > > > >
> > > > > > if you want to stick with lucene, the WordDelimiterFilter is the
> > > piece
> > > > > you
> > > > > > will want for your text, mainly for punctuation but also for
> format
> > > > > > characters such as ZWJ/ZWNJ.
> > > > > >
> > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <uwe@thetaphi.de>
> > > wrote:
> > > > > >
> > > > > > > You can also re-use the solr analyzers, as far as I found out.
> > > There
> > > > is
> > > > > > an
> > > > > > > issue in jIRA/discussion on java-dev to merge them.
> > > > > > >
> > > > > > > -----
> > > > > > > Uwe Schindler
> > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > > > > http://www.thetaphi.de
> > > > > > > eMail: uwe@thetaphi.de
> > > > > > >
> > > > > > >
> > > > > > > > -----Original Message-----
> > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > > > > > To: java-user@lucene.apache.org
> > > > > > > > Subject: Re: How to support stemming and case folding for
> > english
> > > > > > content
> > > > > > > > mixed with non-english content?
> > > > > > > >
> > > > > > > > KK, ok, so you only really want to stem the english. This is
> > > good.
> > > > > > > >
> > > > > > > > Is it possible for you to consider using solr? solr's default
> > > > > analyzer
> > > > > > > for
> > > > > > > > type 'text' will be good for your case. it will do the
> > following
> > > > > > > > 1. tokenize on whitespace
> > > > > > > > 2. handle both indian language and english punctuation
> > > > > > > > 3. lowercase the english.
> > > > > > > > 4. stem the english.
> > > > > > > >
> > > > > > > > try a nightly build,
> > > > > > > http://people.apache.org/builds/lucene/solr/nightly/
> > > > > > > >
> > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
> dioxide.software@gmail.com
> > >
> > > > > wrote:
> > > > > > > >
> > > > > > > > > Muir, thanks for your response.
> > > > > > > > > I'm indexing indian language web pages which has got
> descent
> > > > amount
> > > > > > of
> > > > > > > > > english content mixed with therein. For the time being I'm
> > not
> > > > > going
> > > > > > to
> > > > > > > > use
> > > > > > > > > any stemmers as we don't have standard stemmers for indian
> > > > > languages
> > > > > > .
> > > > > > > > So
> > > > > > > > > what I want to do is like this,
> > > > > > > > > Say I've a web page having hindi content with 5% english
> > > content.
> > > > > > Then
> > > > > > > > for
> > > > > > > > > hindi I want to use the basic white space analyzer as we
> dont
> > > > have
> > > > > > > > stemmers
> > > > > > > > > for this as I mentioned earlier and whereever english
> appears
> > I
> > > > > want
> > > > > > > > them
> > > > > > > > > to
> > > > > > > > > be stemmed tokenized etc[the standard process used for
> > english
> > > > > > > content].
> > > > > > > > As
> > > > > > > > > of now I'm using whitespace analyzer for the full content
> > which
> > > > > > doesnot
> > > > > > > > > support case folding, stemming etc for teh content. So if
> > there
> > > > is
> > > > > an
> > > > > > > > > english word say "Detection" indexed as such then searching
> > for
> > > > > > > > detection
> > > > > > > > > or
> > > > > > > > > detect is not giving any results, which is the expected
> > > behavior,
> > > > > but
> > > > > > I
> > > > > > > > > want
> > > > > > > > > this kind of queries to give results.
> > > > > > > > > I hope I made it clear. Let me know any ideas on doing the
> > > same.
> > > > > And
> > > > > > > one
> > > > > > > > > more thing, I'm storing the full webpage content under a
> > single
> > > > > > field,
> > > > > > > I
> > > > > > > > > hope this will not make any difference, right?
> > > > > > > > > It seems I've to use language identifiers, but do we really
> > > need
> > > > > > that?
> > > > > > > > > Because we've only non-english content mixed with
> english[and
> > > not
> > > > > > > french
> > > > > > > > or
> > > > > > > > > russian etc].
> > > > > > > > >
> > > > > > > > > What is the best way of approaching the problem? Any
> > thoughts!
> > > > > > > > >
> > > > > > > > > Thanks,
> > > > > > > > > KK.
> > > > > > > > >
> > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> > rcmuir@gmail.com>
> > > > > > wrote:
> > > > > > > > >
> > > > > > > > > > KK, is all of your latin script text actually english? Is
> > > there
> > > > > > stuff
> > > > > > > > > like
> > > > > > > > > > german or french mixed in?
> > > > > > > > > >
> > > > > > > > > > And for your non-english content (your examples have been
> > > > indian
> > > > > > > > writing
> > > > > > > > > > systems), is it generally true that if you had
> devanagari,
> > > you
> > > > > can
> > > > > > > > assume
> > > > > > > > > > its hindi? or is there stuff like marathi mixed in?
> > > > > > > > > >
> > > > > > > > > > Reason I say this is to invoke the right stemmers, you
> > really
> > > > > need
> > > > > > > > some
> > > > > > > > > > language detection, but perhaps in your case you can
> cheat
> > > and
> > > > > > detect
> > > > > > > > > this
> > > > > > > > > > based on scripts...
> > > > > > > > > >
> > > > > > > > > > Thanks,
> > > > > > > > > > Robert
> > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> > > > dioxide.software@gmail.com>
> > > > > > > > wrote:
> > > > > > > > > >
> > > > > > > > > > > Hi All,
> > > > > > > > > > > I'm indexing some non-english content. But the page
> also
> > > > > contains
> > > > > > > > > english
> > > > > > > > > > > content. As of now I'm using WhitespaceAnalyzer for all
> > > > content
> > > > > > and
> > > > > > > > I'm
> > > > > > > > > > > storing the full webpage content under a single filed.
> > Now
> > > we
> > > > > > > > require
> > > > > > > > > to
> > > > > > > > > > > support case folding and stemmming for the english
> > content
> > > > > > > > intermingled
> > > > > > > > > > > with
> > > > > > > > > > > non-english content. I must metion that we dont have
> > > stemming
> > > > > and
> > > > > > > > case
> > > > > > > > > > > folding for these non-english content. I'm stuck with
> > this.
> > > > > Some
> > > > > > > one
> > > > > > > > do
> > > > > > > > > > let
> > > > > > > > > > > me know how to proceed for fixing this issue.
> > > > > > > > > > >
> > > > > > > > > > > Thanks,
> > > > > > > > > > > KK.
> > > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > > --
> > > > > > > > > > Robert Muir
> > > > > > > > > > rcmuir@gmail.com
> > > > > > > > > >
> > > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > > --
> > > > > > > > Robert Muir
> > > > > > > > rcmuir@gmail.com
> > > > > > >
> > > > > > >
> > > > > > >
> > > ---------------------------------------------------------------------
> > > > > > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > > > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > > > > > >
> > > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Robert Muir
> > > > > > rcmuir@gmail.com
> > > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > > >
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>



-- 
Robert Muir
rcmuir@gmail.com

--0016369201d0962df3046b98a48d--

From java-user-return-40626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 12:05:53 2009
Return-Path: <java-user-return-40626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10403 invoked from network); 5 Jun 2009 12:05:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 12:05:52 -0000
Received: (qmail 54066 invoked by uid 500); 5 Jun 2009 12:06:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54027 invoked by uid 500); 5 Jun 2009 12:06:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54017 invoked by uid 99); 5 Jun 2009 12:06:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 12:06:02 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.216.172 as permitted sender)
Received: from [209.85.216.172] (HELO mail-px0-f172.google.com) (209.85.216.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 12:05:50 +0000
Received: by pxi2 with SMTP id 2so23743pxi.29
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 05:05:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=u0FlmO7Up8OgqIh/+29rqvBuVSypcli221cwfv5hGYA=;
        b=EOJJ6lQewgrJdGHmU5oKGS3c2Jj/gPi52AvJE/dLAO+VAsJ3uum1Hby7xvjGtty43r
         2LMQBIhzZ4kTYushRahf/bRJYIdmgk11hpFYWwiuNTPbY9x9RVSoqcavRdW8O93DQot6
         83sojVYfwnNjJtrgkx8YCYjYgMkzdkFs9e9sc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=fEpAWiIUwAaXK8GWWP0OalH1rofeBVD2QMVCQuURpoSr1vZnZKVpfKdK5TwSwCmhSn
         2ZN8XTLqOPx0E7MCqM5XkENQUagHRymRyML707+PGFU+O1Oy0DmUBc9FnHqBcsAfaWSk
         KKl7jwjrazp/c4Fe4OmP7P6n2RXkuRHj9WE4E=
MIME-Version: 1.0
Received: by 10.142.76.15 with SMTP id y15mr1178051wfa.263.1244203525099; Fri, 
	05 Jun 2009 05:05:25 -0700 (PDT)
In-Reply-To: <8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8f0ad1f30906040418i1577b66em72563e4817549b6@mail.gmail.com> 
	<ED1D56A848EF4BE6A4C5398C2782F470@VEGA> <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com> 
	<8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com> 
	<8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com> 
	<8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com> 
	<8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com> 
	<8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com> 
	<8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Fri, 5 Jun 2009 17:35:05 +0530
Message-ID: <8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e1fd0124503c046b98b53c
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e1fd0124503c046b98b53c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks Robert. This is exactly what I did and  its working but delimiter is
missing I'm going to add that from solr-nightly.jar

/**
 * Analyzer for Indian language.
 */
public class IndicAnalyzer extends Analyzer {
  public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream ts = new WhitespaceTokenizer(reader);
    ts = new PorterStemFilter(ts);
    ts = new LowerCaseFilter(ts);
    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
    return ts;
  }
}

Its able to do stemming/case-folding and supports search for both english
and indic texts. let me try out the delimiter. Will update you on that.

Thanks a lot.
KK

On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com> wrote:

> i think you are on the right track... once you build your analyzer, put it
> in your classpath and play around with it in luke and see if it does what
> you want.
>
> On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com> wrote:
>
> > Hi Robert,
> > This is what I copied from ThaiAnalyzer @ lucene contrib
> >
> > public class ThaiAnalyzer extends Analyzer {
> >  public TokenStream tokenStream(String fieldName, Reader reader) {
> >      TokenStream ts = new StandardTokenizer(reader);
> >    ts = new StandardFilter(ts);
> >    ts = new ThaiWordFilter(ts);
> >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >    return ts;
> >  }
> > }
> >
> > Now as you said, I've to use whitespacetokenizer
> > withworddelimitefilter[solr
> > nightly.jar] stop wordremoval, porter stemmer etc , so it is something
> like
> > this,
> > public class IndicAnalyzer extends Analyzer {
> >  public TokenStream tokenStream(String fieldName, Reader reader) {
> >   TokenStream ts = new WhiteSpaceTokenizer(reader);
> >   ts = new WordDelimiterFilter(ts);
> >   ts = new LowerCaseFilter(ts);
> >   ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS)   // english
> > stop filter, is this the default one?
> >   ts = new PorterFilter(ts);
> >   return ts;
> >  }
> > }
> >
> > Does this sound OK? I think it will do the job...let me try it out..
> > I dont need custom filter as per my requirement, at least not for these
> > basic things I'm doing? I think so...
> >
> > Thanks,
> > KK.
> >
> >
> > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> > > KK well you can always get some good examples from the lucene contrib
> > > codebase.
> > > For example, look at the DutchAnalyzer, especially:
> > >
> > > TokenStream tokenStream(String fieldName, Reader reader)
> > >
> > > See how it combines a specified tokenizer with various filters? this is
> > > what
> > > you want to do, except of course you want to use different tokenizer
> and
> > > filters.
> > >
> > > On Thu, Jun 4, 2009 at 8:53 AM, KK <dioxide.software@gmail.com> wrote:
> > >
> > > > Thanks Muir.
> > > > Thanks for letting me know that I dont need language identifiers.
> > > >  I'll have a look and will try to write the analyzer. For my case I
> > think
> > > > it
> > > > wont be that difficult.
> > > > BTW, can you point me to some sample codes/tutorials writing custom
> > > > analyzers. I could not find something in LIA2ndEdn. Is something
> htere?
> > > do
> > > > let me know.
> > > >
> > > > Thanks,
> > > > KK.
> > > >
> > > >
> > > >
> > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> > > >
> > > > > KK, for your case, you don't really need to go to the effort of
> > > detecting
> > > > > whether fragments are english or not.
> > > > > Because the English stemmers in lucene will not modify your Indic
> > text,
> > > > and
> > > > > neither will the LowerCaseFilter.
> > > > >
> > > > > what you want to do is create a custom analyzer that works like
> this
> > > > >
> > > > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr nightly
> > jar],
> > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> > > > >
> > > > > Thanks,
> > > > > Robert
> > > > >
> > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.com>
> > wrote:
> > > > >
> > > > > > Thank you all.
> > > > > > To be frank I was using Solr in the begining half a month ago.
> The
> > > > > > problem[rather bug] with solr was creation of new index on the
> fly.
> > > > > Though
> > > > > > they have a restful method for teh same, but it was not working.
> If
> > I
> > > > > > remember properly one of Solr commiter "Noble Paul"[I dont know
> his
> > > > real
> > > > > > name] was trying to help me. I tried many nightly builds and
> > spending
> > > a
> > > > > > couple of days stuck at that made me think of lucene and I
> switched
> > > to
> > > > > it.
> > > > > > Now after working with lucene which gives you full control of
> > > > everything
> > > > > I
> > > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is similar
> to
> > > > > > Window$:Linux, its my view only, though]. Coming back to the
> point
> > as
> > > > Uwe
> > > > > > mentioned that we can do the same thing in lucene as well, what
> is
> > > > > > available
> > > > > > in Solr, Solr is based on Lucene only, right?
> > > > > > I request Uwe to give me some more ideas on using the analyzers
> > from
> > > > solr
> > > > > > that will do the job for me, handling a mix of both english and
> > > > > non-english
> > > > > > content.
> > > > > > Muir, can you give me a bit detail description of how to use the
> > > > > > WordDelimiteFilter to do my job.
> > > > > > On a side note, I was thingking of writing a simple analyzer that
> > > will
> > > > do
> > > > > > the following,
> > > > > > #. If the webpage fragment is non-english[for me its some indian
> > > > > language]
> > > > > > then index them as such, no stemming/ stop word removal to begin
> > > with.
> > > > As
> > > > > I
> > > > > > know its in UCN unicode something like
> > \u0021\u0012\u34ae\u0031[just
> > > a
> > > > > > sample]
> > > > > > # If the fragment is english then apply standard anlyzing process
> > for
> > > > > > english content. I've not thought of quering in the same way as
> of
> > > now
> > > > > i.e
> > > > > > mix of non-english and engish words.
> > > > > > Now to get all this,
> > > > > >  #1. I need some sort of way which will let me know if the
> content
> > is
> > > > > > english or not. If not english just add the tokens to the
> document.
> > > Do
> > > > we
> > > > > > really need language identifiers, as i dont have any other
> content
> > > that
> > > > > > uses
> > > > > > the same script as english other than those \u1234 things for my
> > > indian
> > > > > > language content. Any smart hack/trick for the same?
> > > > > >  #2. If the its english apply all normal process and add the
> > stemmed
> > > > > token
> > > > > > to document.
> > > > > > For all this I was thinking of iterating earch word of the web
> page
> > > and
> > > > > > apply the above procedure. And finallyadd  the newly created
> > document
> > > > to
> > > > > > the
> > > > > > index.
> > > > > >
> > > > > > I would like some one to guide me in this direction. I'm pretty
> > > people
> > > > > must
> > > > > > have done similar/same thing earlier, I request them to guide me/
> > > point
> > > > > me
> > > > > > to some tutorials for the same.
> > > > > > Else help me out writing a custom analyzer only if thats not
> going
> > to
> > > > be
> > > > > > too
> > > > > > complex. LOL, I'm a new user to lucene and know basics of Java
> > > coding.
> > > > > > Thank you very much.
> > > > > >
> > > > > > --KK.
> > > > > >
> > > > > >
> > > > > >
> > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
> > > wrote:
> > > > > >
> > > > > > > yes this is true. for starters KK, might be good to startup
> solr
> > > and
> > > > > look
> > > > > > > at
> > > > > > > http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> > > > > > >
> > > > > > > if you want to stick with lucene, the WordDelimiterFilter is
> the
> > > > piece
> > > > > > you
> > > > > > > will want for your text, mainly for punctuation but also for
> > format
> > > > > > > characters such as ZWJ/ZWNJ.
> > > > > > >
> > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <uwe@thetaphi.de
> >
> > > > wrote:
> > > > > > >
> > > > > > > > You can also re-use the solr analyzers, as far as I found
> out.
> > > > There
> > > > > is
> > > > > > > an
> > > > > > > > issue in jIRA/discussion on java-dev to merge them.
> > > > > > > >
> > > > > > > > -----
> > > > > > > > Uwe Schindler
> > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > > > > > http://www.thetaphi.de
> > > > > > > > eMail: uwe@thetaphi.de
> > > > > > > >
> > > > > > > >
> > > > > > > > > -----Original Message-----
> > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > > > > > > To: java-user@lucene.apache.org
> > > > > > > > > Subject: Re: How to support stemming and case folding for
> > > english
> > > > > > > content
> > > > > > > > > mixed with non-english content?
> > > > > > > > >
> > > > > > > > > KK, ok, so you only really want to stem the english. This
> is
> > > > good.
> > > > > > > > >
> > > > > > > > > Is it possible for you to consider using solr? solr's
> default
> > > > > > analyzer
> > > > > > > > for
> > > > > > > > > type 'text' will be good for your case. it will do the
> > > following
> > > > > > > > > 1. tokenize on whitespace
> > > > > > > > > 2. handle both indian language and english punctuation
> > > > > > > > > 3. lowercase the english.
> > > > > > > > > 4. stem the english.
> > > > > > > > >
> > > > > > > > > try a nightly build,
> > > > > > > > http://people.apache.org/builds/lucene/solr/nightly/
> > > > > > > > >
> > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
> > dioxide.software@gmail.com
> > > >
> > > > > > wrote:
> > > > > > > > >
> > > > > > > > > > Muir, thanks for your response.
> > > > > > > > > > I'm indexing indian language web pages which has got
> > descent
> > > > > amount
> > > > > > > of
> > > > > > > > > > english content mixed with therein. For the time being
> I'm
> > > not
> > > > > > going
> > > > > > > to
> > > > > > > > > use
> > > > > > > > > > any stemmers as we don't have standard stemmers for
> indian
> > > > > > languages
> > > > > > > .
> > > > > > > > > So
> > > > > > > > > > what I want to do is like this,
> > > > > > > > > > Say I've a web page having hindi content with 5% english
> > > > content.
> > > > > > > Then
> > > > > > > > > for
> > > > > > > > > > hindi I want to use the basic white space analyzer as we
> > dont
> > > > > have
> > > > > > > > > stemmers
> > > > > > > > > > for this as I mentioned earlier and whereever english
> > appears
> > > I
> > > > > > want
> > > > > > > > > them
> > > > > > > > > > to
> > > > > > > > > > be stemmed tokenized etc[the standard process used for
> > > english
> > > > > > > > content].
> > > > > > > > > As
> > > > > > > > > > of now I'm using whitespace analyzer for the full content
> > > which
> > > > > > > doesnot
> > > > > > > > > > support case folding, stemming etc for teh content. So if
> > > there
> > > > > is
> > > > > > an
> > > > > > > > > > english word say "Detection" indexed as such then
> searching
> > > for
> > > > > > > > > detection
> > > > > > > > > > or
> > > > > > > > > > detect is not giving any results, which is the expected
> > > > behavior,
> > > > > > but
> > > > > > > I
> > > > > > > > > > want
> > > > > > > > > > this kind of queries to give results.
> > > > > > > > > > I hope I made it clear. Let me know any ideas on doing
> the
> > > > same.
> > > > > > And
> > > > > > > > one
> > > > > > > > > > more thing, I'm storing the full webpage content under a
> > > single
> > > > > > > field,
> > > > > > > > I
> > > > > > > > > > hope this will not make any difference, right?
> > > > > > > > > > It seems I've to use language identifiers, but do we
> really
> > > > need
> > > > > > > that?
> > > > > > > > > > Because we've only non-english content mixed with
> > english[and
> > > > not
> > > > > > > > french
> > > > > > > > > or
> > > > > > > > > > russian etc].
> > > > > > > > > >
> > > > > > > > > > What is the best way of approaching the problem? Any
> > > thoughts!
> > > > > > > > > >
> > > > > > > > > > Thanks,
> > > > > > > > > > KK.
> > > > > > > > > >
> > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> > > rcmuir@gmail.com>
> > > > > > > wrote:
> > > > > > > > > >
> > > > > > > > > > > KK, is all of your latin script text actually english?
> Is
> > > > there
> > > > > > > stuff
> > > > > > > > > > like
> > > > > > > > > > > german or french mixed in?
> > > > > > > > > > >
> > > > > > > > > > > And for your non-english content (your examples have
> been
> > > > > indian
> > > > > > > > > writing
> > > > > > > > > > > systems), is it generally true that if you had
> > devanagari,
> > > > you
> > > > > > can
> > > > > > > > > assume
> > > > > > > > > > > its hindi? or is there stuff like marathi mixed in?
> > > > > > > > > > >
> > > > > > > > > > > Reason I say this is to invoke the right stemmers, you
> > > really
> > > > > > need
> > > > > > > > > some
> > > > > > > > > > > language detection, but perhaps in your case you can
> > cheat
> > > > and
> > > > > > > detect
> > > > > > > > > > this
> > > > > > > > > > > based on scripts...
> > > > > > > > > > >
> > > > > > > > > > > Thanks,
> > > > > > > > > > > Robert
> > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> > > > > dioxide.software@gmail.com>
> > > > > > > > > wrote:
> > > > > > > > > > >
> > > > > > > > > > > > Hi All,
> > > > > > > > > > > > I'm indexing some non-english content. But the page
> > also
> > > > > > contains
> > > > > > > > > > english
> > > > > > > > > > > > content. As of now I'm using WhitespaceAnalyzer for
> all
> > > > > content
> > > > > > > and
> > > > > > > > > I'm
> > > > > > > > > > > > storing the full webpage content under a single
> filed.
> > > Now
> > > > we
> > > > > > > > > require
> > > > > > > > > > to
> > > > > > > > > > > > support case folding and stemmming for the english
> > > content
> > > > > > > > > intermingled
> > > > > > > > > > > > with
> > > > > > > > > > > > non-english content. I must metion that we dont have
> > > > stemming
> > > > > > and
> > > > > > > > > case
> > > > > > > > > > > > folding for these non-english content. I'm stuck with
> > > this.
> > > > > > Some
> > > > > > > > one
> > > > > > > > > do
> > > > > > > > > > > let
> > > > > > > > > > > > me know how to proceed for fixing this issue.
> > > > > > > > > > > >
> > > > > > > > > > > > Thanks,
> > > > > > > > > > > > KK.
> > > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > > > --
> > > > > > > > > > > Robert Muir
> > > > > > > > > > > rcmuir@gmail.com
> > > > > > > > > > >
> > > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > --
> > > > > > > > > Robert Muir
> > > > > > > > > rcmuir@gmail.com
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > ---------------------------------------------------------------------
> > > > > > > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > > > > > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > --
> > > > > > > Robert Muir
> > > > > > > rcmuir@gmail.com
> > > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Robert Muir
> > > > > rcmuir@gmail.com
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

--001636e1fd0124503c046b98b53c--

From java-user-return-40627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 12:18:53 2009
Return-Path: <java-user-return-40627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13746 invoked from network); 5 Jun 2009 12:18:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 12:18:53 -0000
Received: (qmail 74486 invoked by uid 500); 5 Jun 2009 12:19:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74438 invoked by uid 500); 5 Jun 2009 12:19:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74428 invoked by uid 99); 5 Jun 2009 12:19:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 12:19:03 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 12:18:50 +0000
Received: by yw-out-2324.google.com with SMTP id 2so674436ywt.5
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 05:18:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=KWJwhzcX+jfDudMVVg+Xklv/2ZDI3yTC8XPinnVsWVs=;
        b=X56LQvouVkhcyH5N4MQF2rlR3pT1FpNSE0x9lGZbt+vE3+JP7Ojtj2QQhEb2nO0893
         uY4ChJqzK6/I0MP9y2T6rhtzPKynDsC1FYgueWfkyRjktsAKSlc4JUkUi8hNGZMLnAqX
         sF1SiFcq8ULAs9oxMNxxTBHKy6nAa5VI0uQhM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WSbL0WAJYDpJugKgY+tEIvpJKTmWF8YOvGPERl+B0KCjTmvqh7Vc/foj8Z9MOYjnmf
         BsjtA/F6ESucTTOOom5BbIQm3ShH5ZZRHagyfjk6WDOK8YdtAwrf25QIrEzRlvAAqJSE
         Lc439nZDYLVguDiF33Iaxt/ot4NHpHOnqBf6k=
MIME-Version: 1.0
Received: by 10.100.208.8 with SMTP id f8mr3825307ang.64.1244204308363; Fri, 
	05 Jun 2009 05:18:28 -0700 (PDT)
In-Reply-To: <8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <ED1D56A848EF4BE6A4C5398C2782F470@VEGA>
	 <8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com>
	 <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
	 <8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com>
	 <8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com>
	 <8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
	 <8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com>
	 <8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com>
	 <8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com>
Date: Fri, 5 Jun 2009 08:18:28 -0400
Message-ID: <8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636af022ed3fdd0046b98e3b2
X-Virus-Checked: Checked by ClamAV on apache.org

--001636af022ed3fdd0046b98e3b2
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

KK, you got the right idea.

though I think you might want to change the order, move the stopfilter
before the porter stem filter... otherwise it might not work correctly.

On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com> wrote:

> Thanks Robert. This is exactly what I did and  its working but delimiter is
> missing I'm going to add that from solr-nightly.jar
>
> /**
>  * Analyzer for Indian language.
>  */
> public class IndicAnalyzer extends Analyzer {
>  public TokenStream tokenStream(String fieldName, Reader reader) {
>     TokenStream ts = new WhitespaceTokenizer(reader);
>    ts = new PorterStemFilter(ts);
>    ts = new LowerCaseFilter(ts);
>    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
>    return ts;
>  }
> }
>
> Its able to do stemming/case-folding and supports search for both english
> and indic texts. let me try out the delimiter. Will update you on that.
>
> Thanks a lot.
> KK
>
> On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > i think you are on the right track... once you build your analyzer, put
> it
> > in your classpath and play around with it in luke and see if it does what
> > you want.
> >
> > On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com> wrote:
> >
> > > Hi Robert,
> > > This is what I copied from ThaiAnalyzer @ lucene contrib
> > >
> > > public class ThaiAnalyzer extends Analyzer {
> > >  public TokenStream tokenStream(String fieldName, Reader reader) {
> > >      TokenStream ts = new StandardTokenizer(reader);
> > >    ts = new StandardFilter(ts);
> > >    ts = new ThaiWordFilter(ts);
> > >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> > >    return ts;
> > >  }
> > > }
> > >
> > > Now as you said, I've to use whitespacetokenizer
> > > withworddelimitefilter[solr
> > > nightly.jar] stop wordremoval, porter stemmer etc , so it is something
> > like
> > > this,
> > > public class IndicAnalyzer extends Analyzer {
> > >  public TokenStream tokenStream(String fieldName, Reader reader) {
> > >   TokenStream ts = new WhiteSpaceTokenizer(reader);
> > >   ts = new WordDelimiterFilter(ts);
> > >   ts = new LowerCaseFilter(ts);
> > >   ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS)   // english
> > > stop filter, is this the default one?
> > >   ts = new PorterFilter(ts);
> > >   return ts;
> > >  }
> > > }
> > >
> > > Does this sound OK? I think it will do the job...let me try it out..
> > > I dont need custom filter as per my requirement, at least not for these
> > > basic things I'm doing? I think so...
> > >
> > > Thanks,
> > > KK.
> > >
> > >
> > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com> wrote:
> > >
> > > > KK well you can always get some good examples from the lucene contrib
> > > > codebase.
> > > > For example, look at the DutchAnalyzer, especially:
> > > >
> > > > TokenStream tokenStream(String fieldName, Reader reader)
> > > >
> > > > See how it combines a specified tokenizer with various filters? this
> is
> > > > what
> > > > you want to do, except of course you want to use different tokenizer
> > and
> > > > filters.
> > > >
> > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <dioxide.software@gmail.com>
> wrote:
> > > >
> > > > > Thanks Muir.
> > > > > Thanks for letting me know that I dont need language identifiers.
> > > > >  I'll have a look and will try to write the analyzer. For my case I
> > > think
> > > > > it
> > > > > wont be that difficult.
> > > > > BTW, can you point me to some sample codes/tutorials writing custom
> > > > > analyzers. I could not find something in LIA2ndEdn. Is something
> > htere?
> > > > do
> > > > > let me know.
> > > > >
> > > > > Thanks,
> > > > > KK.
> > > > >
> > > > >
> > > > >
> > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.com>
> > wrote:
> > > > >
> > > > > > KK, for your case, you don't really need to go to the effort of
> > > > detecting
> > > > > > whether fragments are english or not.
> > > > > > Because the English stemmers in lucene will not modify your Indic
> > > text,
> > > > > and
> > > > > > neither will the LowerCaseFilter.
> > > > > >
> > > > > > what you want to do is create a custom analyzer that works like
> > this
> > > > > >
> > > > > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr nightly
> > > jar],
> > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> > > > > >
> > > > > > Thanks,
> > > > > > Robert
> > > > > >
> > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.com>
> > > wrote:
> > > > > >
> > > > > > > Thank you all.
> > > > > > > To be frank I was using Solr in the begining half a month ago.
> > The
> > > > > > > problem[rather bug] with solr was creation of new index on the
> > fly.
> > > > > > Though
> > > > > > > they have a restful method for teh same, but it was not
> working.
> > If
> > > I
> > > > > > > remember properly one of Solr commiter "Noble Paul"[I dont know
> > his
> > > > > real
> > > > > > > name] was trying to help me. I tried many nightly builds and
> > > spending
> > > > a
> > > > > > > couple of days stuck at that made me think of lucene and I
> > switched
> > > > to
> > > > > > it.
> > > > > > > Now after working with lucene which gives you full control of
> > > > > everything
> > > > > > I
> > > > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is similar
> > to
> > > > > > > Window$:Linux, its my view only, though]. Coming back to the
> > point
> > > as
> > > > > Uwe
> > > > > > > mentioned that we can do the same thing in lucene as well, what
> > is
> > > > > > > available
> > > > > > > in Solr, Solr is based on Lucene only, right?
> > > > > > > I request Uwe to give me some more ideas on using the analyzers
> > > from
> > > > > solr
> > > > > > > that will do the job for me, handling a mix of both english and
> > > > > > non-english
> > > > > > > content.
> > > > > > > Muir, can you give me a bit detail description of how to use
> the
> > > > > > > WordDelimiteFilter to do my job.
> > > > > > > On a side note, I was thingking of writing a simple analyzer
> that
> > > > will
> > > > > do
> > > > > > > the following,
> > > > > > > #. If the webpage fragment is non-english[for me its some
> indian
> > > > > > language]
> > > > > > > then index them as such, no stemming/ stop word removal to
> begin
> > > > with.
> > > > > As
> > > > > > I
> > > > > > > know its in UCN unicode something like
> > > \u0021\u0012\u34ae\u0031[just
> > > > a
> > > > > > > sample]
> > > > > > > # If the fragment is english then apply standard anlyzing
> process
> > > for
> > > > > > > english content. I've not thought of quering in the same way as
> > of
> > > > now
> > > > > > i.e
> > > > > > > mix of non-english and engish words.
> > > > > > > Now to get all this,
> > > > > > >  #1. I need some sort of way which will let me know if the
> > content
> > > is
> > > > > > > english or not. If not english just add the tokens to the
> > document.
> > > > Do
> > > > > we
> > > > > > > really need language identifiers, as i dont have any other
> > content
> > > > that
> > > > > > > uses
> > > > > > > the same script as english other than those \u1234 things for
> my
> > > > indian
> > > > > > > language content. Any smart hack/trick for the same?
> > > > > > >  #2. If the its english apply all normal process and add the
> > > stemmed
> > > > > > token
> > > > > > > to document.
> > > > > > > For all this I was thinking of iterating earch word of the web
> > page
> > > > and
> > > > > > > apply the above procedure. And finallyadd  the newly created
> > > document
> > > > > to
> > > > > > > the
> > > > > > > index.
> > > > > > >
> > > > > > > I would like some one to guide me in this direction. I'm pretty
> > > > people
> > > > > > must
> > > > > > > have done similar/same thing earlier, I request them to guide
> me/
> > > > point
> > > > > > me
> > > > > > > to some tutorials for the same.
> > > > > > > Else help me out writing a custom analyzer only if thats not
> > going
> > > to
> > > > > be
> > > > > > > too
> > > > > > > complex. LOL, I'm a new user to lucene and know basics of Java
> > > > coding.
> > > > > > > Thank you very much.
> > > > > > >
> > > > > > > --KK.
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
> > > > wrote:
> > > > > > >
> > > > > > > > yes this is true. for starters KK, might be good to startup
> > solr
> > > > and
> > > > > > look
> > > > > > > > at
> > > > > > > > http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> > > > > > > >
> > > > > > > > if you want to stick with lucene, the WordDelimiterFilter is
> > the
> > > > > piece
> > > > > > > you
> > > > > > > > will want for your text, mainly for punctuation but also for
> > > format
> > > > > > > > characters such as ZWJ/ZWNJ.
> > > > > > > >
> > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <
> uwe@thetaphi.de
> > >
> > > > > wrote:
> > > > > > > >
> > > > > > > > > You can also re-use the solr analyzers, as far as I found
> > out.
> > > > > There
> > > > > > is
> > > > > > > > an
> > > > > > > > > issue in jIRA/discussion on java-dev to merge them.
> > > > > > > > >
> > > > > > > > > -----
> > > > > > > > > Uwe Schindler
> > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > > > > > > http://www.thetaphi.de
> > > > > > > > > eMail: uwe@thetaphi.de
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > > -----Original Message-----
> > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > > > > > > > To: java-user@lucene.apache.org
> > > > > > > > > > Subject: Re: How to support stemming and case folding for
> > > > english
> > > > > > > > content
> > > > > > > > > > mixed with non-english content?
> > > > > > > > > >
> > > > > > > > > > KK, ok, so you only really want to stem the english. This
> > is
> > > > > good.
> > > > > > > > > >
> > > > > > > > > > Is it possible for you to consider using solr? solr's
> > default
> > > > > > > analyzer
> > > > > > > > > for
> > > > > > > > > > type 'text' will be good for your case. it will do the
> > > > following
> > > > > > > > > > 1. tokenize on whitespace
> > > > > > > > > > 2. handle both indian language and english punctuation
> > > > > > > > > > 3. lowercase the english.
> > > > > > > > > > 4. stem the english.
> > > > > > > > > >
> > > > > > > > > > try a nightly build,
> > > > > > > > > http://people.apache.org/builds/lucene/solr/nightly/
> > > > > > > > > >
> > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
> > > dioxide.software@gmail.com
> > > > >
> > > > > > > wrote:
> > > > > > > > > >
> > > > > > > > > > > Muir, thanks for your response.
> > > > > > > > > > > I'm indexing indian language web pages which has got
> > > descent
> > > > > > amount
> > > > > > > > of
> > > > > > > > > > > english content mixed with therein. For the time being
> > I'm
> > > > not
> > > > > > > going
> > > > > > > > to
> > > > > > > > > > use
> > > > > > > > > > > any stemmers as we don't have standard stemmers for
> > indian
> > > > > > > languages
> > > > > > > > .
> > > > > > > > > > So
> > > > > > > > > > > what I want to do is like this,
> > > > > > > > > > > Say I've a web page having hindi content with 5%
> english
> > > > > content.
> > > > > > > > Then
> > > > > > > > > > for
> > > > > > > > > > > hindi I want to use the basic white space analyzer as
> we
> > > dont
> > > > > > have
> > > > > > > > > > stemmers
> > > > > > > > > > > for this as I mentioned earlier and whereever english
> > > appears
> > > > I
> > > > > > > want
> > > > > > > > > > them
> > > > > > > > > > > to
> > > > > > > > > > > be stemmed tokenized etc[the standard process used for
> > > > english
> > > > > > > > > content].
> > > > > > > > > > As
> > > > > > > > > > > of now I'm using whitespace analyzer for the full
> content
> > > > which
> > > > > > > > doesnot
> > > > > > > > > > > support case folding, stemming etc for teh content. So
> if
> > > > there
> > > > > > is
> > > > > > > an
> > > > > > > > > > > english word say "Detection" indexed as such then
> > searching
> > > > for
> > > > > > > > > > detection
> > > > > > > > > > > or
> > > > > > > > > > > detect is not giving any results, which is the expected
> > > > > behavior,
> > > > > > > but
> > > > > > > > I
> > > > > > > > > > > want
> > > > > > > > > > > this kind of queries to give results.
> > > > > > > > > > > I hope I made it clear. Let me know any ideas on doing
> > the
> > > > > same.
> > > > > > > And
> > > > > > > > > one
> > > > > > > > > > > more thing, I'm storing the full webpage content under
> a
> > > > single
> > > > > > > > field,
> > > > > > > > > I
> > > > > > > > > > > hope this will not make any difference, right?
> > > > > > > > > > > It seems I've to use language identifiers, but do we
> > really
> > > > > need
> > > > > > > > that?
> > > > > > > > > > > Because we've only non-english content mixed with
> > > english[and
> > > > > not
> > > > > > > > > french
> > > > > > > > > > or
> > > > > > > > > > > russian etc].
> > > > > > > > > > >
> > > > > > > > > > > What is the best way of approaching the problem? Any
> > > > thoughts!
> > > > > > > > > > >
> > > > > > > > > > > Thanks,
> > > > > > > > > > > KK.
> > > > > > > > > > >
> > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> > > > rcmuir@gmail.com>
> > > > > > > > wrote:
> > > > > > > > > > >
> > > > > > > > > > > > KK, is all of your latin script text actually
> english?
> > Is
> > > > > there
> > > > > > > > stuff
> > > > > > > > > > > like
> > > > > > > > > > > > german or french mixed in?
> > > > > > > > > > > >
> > > > > > > > > > > > And for your non-english content (your examples have
> > been
> > > > > > indian
> > > > > > > > > > writing
> > > > > > > > > > > > systems), is it generally true that if you had
> > > devanagari,
> > > > > you
> > > > > > > can
> > > > > > > > > > assume
> > > > > > > > > > > > its hindi? or is there stuff like marathi mixed in?
> > > > > > > > > > > >
> > > > > > > > > > > > Reason I say this is to invoke the right stemmers,
> you
> > > > really
> > > > > > > need
> > > > > > > > > > some
> > > > > > > > > > > > language detection, but perhaps in your case you can
> > > cheat
> > > > > and
> > > > > > > > detect
> > > > > > > > > > > this
> > > > > > > > > > > > based on scripts...
> > > > > > > > > > > >
> > > > > > > > > > > > Thanks,
> > > > > > > > > > > > Robert
> > > > > > > > > > > >
> > > > > > > > > > > >
> > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> > > > > > dioxide.software@gmail.com>
> > > > > > > > > > wrote:
> > > > > > > > > > > >
> > > > > > > > > > > > > Hi All,
> > > > > > > > > > > > > I'm indexing some non-english content. But the page
> > > also
> > > > > > > contains
> > > > > > > > > > > english
> > > > > > > > > > > > > content. As of now I'm using WhitespaceAnalyzer for
> > all
> > > > > > content
> > > > > > > > and
> > > > > > > > > > I'm
> > > > > > > > > > > > > storing the full webpage content under a single
> > filed.
> > > > Now
> > > > > we
> > > > > > > > > > require
> > > > > > > > > > > to
> > > > > > > > > > > > > support case folding and stemmming for the english
> > > > content
> > > > > > > > > > intermingled
> > > > > > > > > > > > > with
> > > > > > > > > > > > > non-english content. I must metion that we dont
> have
> > > > > stemming
> > > > > > > and
> > > > > > > > > > case
> > > > > > > > > > > > > folding for these non-english content. I'm stuck
> with
> > > > this.
> > > > > > > Some
> > > > > > > > > one
> > > > > > > > > > do
> > > > > > > > > > > > let
> > > > > > > > > > > > > me know how to proceed for fixing this issue.
> > > > > > > > > > > > >
> > > > > > > > > > > > > Thanks,
> > > > > > > > > > > > > KK.
> > > > > > > > > > > > >
> > > > > > > > > > > >
> > > > > > > > > > > >
> > > > > > > > > > > >
> > > > > > > > > > > > --
> > > > > > > > > > > > Robert Muir
> > > > > > > > > > > > rcmuir@gmail.com
> > > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > > --
> > > > > > > > > > Robert Muir
> > > > > > > > > > rcmuir@gmail.com
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > > > > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > > > > > > > For additional commands, e-mail:
> > > > java-user-help@lucene.apache.org
> > > > > > > > >
> > > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > > --
> > > > > > > > Robert Muir
> > > > > > > > rcmuir@gmail.com
> > > > > > > >
> > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Robert Muir
> > > > > > rcmuir@gmail.com
> > > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > > >
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>



-- 
Robert Muir
rcmuir@gmail.com

--001636af022ed3fdd0046b98e3b2--

From java-user-return-40628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 13:13:38 2009
Return-Path: <java-user-return-40628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37536 invoked from network); 5 Jun 2009 13:13:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 13:13:38 -0000
Received: (qmail 46457 invoked by uid 500); 5 Jun 2009 13:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46381 invoked by uid 500); 5 Jun 2009 13:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46371 invoked by uid 99); 5 Jun 2009 13:13:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 13:13:48 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.216.172 as permitted sender)
Received: from [209.85.216.172] (HELO mail-px0-f172.google.com) (209.85.216.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 13:13:35 +0000
Received: by pxi2 with SMTP id 2so46578pxi.29
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 06:13:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=mayEztaEMF6Pq/mLfzqREIdNsF4bx2sLhUwDOf2fT3c=;
        b=Qxxpkqpn4dOonLOZ0YDl8k4rcgtJ+w70tsyDJLi5lNfCJ4RKlhCsUQ4opN0avnZi28
         573m4/6OrCb+MWotnBx/u0Sa9eFxA1RkLTLz1oNOnMg1AD2aDBXLHFpQtqHEE9V5BqKj
         d0yJJU4PguVkKkcWeJ4zYl5OzdhLTycLCJzyQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rm7F3B/AOBj3ytC24vgc6jOZX3LkDynLGhlQmcGifAxNjfEYl43DlOBaQMxLVLsTC1
         dnzMxoLFXI7nDg/TxSoJb2jWlpfsFzxhFkuamXQsZjM/OcCqDKQLJH4dzqBI6ikUq1pP
         aOU6LjprqDCc86CGrGi6HcYjW2/W1lHPR5uTE=
MIME-Version: 1.0
Received: by 10.142.237.20 with SMTP id k20mr1488856wfh.8.1244207593103; Fri, 
	05 Jun 2009 06:13:13 -0700 (PDT)
In-Reply-To: <8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8f0ad1f30906040500q38d4b92bsf5dc03bf70ff98d3@mail.gmail.com> 
	<8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com> 
	<8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com> 
	<8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com> 
	<8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com> 
	<8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com> 
	<8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com> 
	<8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com> 
	<8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Fri, 5 Jun 2009 18:42:53 +0530
Message-ID: <8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32e0a9d244b046b99a7a3
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd32e0a9d244b046b99a7a3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks Robert. There is one problem though, I'm able to plugin the word
delimiter filter from solr-nightly jar file. When I tried to do something
like,
 TokenStream ts = new WhitespaceTokenizer(reader);
   ts = new WordDelimiterFilter(ts);
   ts = new PorterStemmerFilter(ts);
   ...rest as in the last mail...

It gave me an error saying that

org.apache.solr.analysis.WordDelimiterFilter is not public in
org.apache.solr.analysis; cannot be accessed from outside package
import org.apache.solr.analysis.WordDelimiterFilter;
                               ^
solrSearch/IndicAnalyzer.java:38: cannot find symbol
symbol  : class WordDelimiterFilter
location: class solrSearch.IndicAnalyzer
    ts = new WordDelimiterFilter(ts);
             ^
2 errors

Then i tried to see the code for worddelimitefiter from solrnightly src and
found that there are many deprecated constructors though they require a lot
of parameters alongwith tokenstream. I went through the solr wiki for
worddelimiterfilterfactory here,
http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b83870ca7890cd73b193cefed83c283339089
and say that there also its specified that we've to mention the parameters
and both are different for indexing and querying.
I'm kind of stuck here, how do I make use of worddelimiterfilter in my
custom analyzer, I've to use it anyway.
In my code I've to make use of worddelimiterfilter and not
worddelimiterfilterfactory, right? I don't know whats the use of the other
one. Anyway can you guide me getting rid of the above error. And yes I'll
change the order of applying the filters as you said.

Thanks,
KK.







On Fri, Jun 5, 2009 at 5:48 PM, Robert Muir <rcmuir@gmail.com> wrote:

> KK, you got the right idea.
>
> though I think you might want to change the order, move the stopfilter
> before the porter stem filter... otherwise it might not work correctly.
>
> On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com> wrote:
>
> > Thanks Robert. This is exactly what I did and  its working but delimiter
> is
> > missing I'm going to add that from solr-nightly.jar
> >
> > /**
> >  * Analyzer for Indian language.
> >  */
> > public class IndicAnalyzer extends Analyzer {
> >  public TokenStream tokenStream(String fieldName, Reader reader) {
> >     TokenStream ts = new WhitespaceTokenizer(reader);
> >    ts = new PorterStemFilter(ts);
> >    ts = new LowerCaseFilter(ts);
> >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >    return ts;
> >  }
> > }
> >
> > Its able to do stemming/case-folding and supports search for both english
> > and indic texts. let me try out the delimiter. Will update you on that.
> >
> > Thanks a lot.
> > KK
> >
> > On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> > > i think you are on the right track... once you build your analyzer, put
> > it
> > > in your classpath and play around with it in luke and see if it does
> what
> > > you want.
> > >
> > > On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com> wrote:
> > >
> > > > Hi Robert,
> > > > This is what I copied from ThaiAnalyzer @ lucene contrib
> > > >
> > > > public class ThaiAnalyzer extends Analyzer {
> > > >  public TokenStream tokenStream(String fieldName, Reader reader) {
> > > >      TokenStream ts = new StandardTokenizer(reader);
> > > >    ts = new StandardFilter(ts);
> > > >    ts = new ThaiWordFilter(ts);
> > > >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> > > >    return ts;
> > > >  }
> > > > }
> > > >
> > > > Now as you said, I've to use whitespacetokenizer
> > > > withworddelimitefilter[solr
> > > > nightly.jar] stop wordremoval, porter stemmer etc , so it is
> something
> > > like
> > > > this,
> > > > public class IndicAnalyzer extends Analyzer {
> > > >  public TokenStream tokenStream(String fieldName, Reader reader) {
> > > >   TokenStream ts = new WhiteSpaceTokenizer(reader);
> > > >   ts = new WordDelimiterFilter(ts);
> > > >   ts = new LowerCaseFilter(ts);
> > > >   ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS)   //
> english
> > > > stop filter, is this the default one?
> > > >   ts = new PorterFilter(ts);
> > > >   return ts;
> > > >  }
> > > > }
> > > >
> > > > Does this sound OK? I think it will do the job...let me try it out..
> > > > I dont need custom filter as per my requirement, at least not for
> these
> > > > basic things I'm doing? I think so...
> > > >
> > > > Thanks,
> > > > KK.
> > > >
> > > >
> > > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> > > >
> > > > > KK well you can always get some good examples from the lucene
> contrib
> > > > > codebase.
> > > > > For example, look at the DutchAnalyzer, especially:
> > > > >
> > > > > TokenStream tokenStream(String fieldName, Reader reader)
> > > > >
> > > > > See how it combines a specified tokenizer with various filters?
> this
> > is
> > > > > what
> > > > > you want to do, except of course you want to use different
> tokenizer
> > > and
> > > > > filters.
> > > > >
> > > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <dioxide.software@gmail.com>
> > wrote:
> > > > >
> > > > > > Thanks Muir.
> > > > > > Thanks for letting me know that I dont need language identifiers.
> > > > > >  I'll have a look and will try to write the analyzer. For my case
> I
> > > > think
> > > > > > it
> > > > > > wont be that difficult.
> > > > > > BTW, can you point me to some sample codes/tutorials writing
> custom
> > > > > > analyzers. I could not find something in LIA2ndEdn. Is something
> > > htere?
> > > > > do
> > > > > > let me know.
> > > > > >
> > > > > > Thanks,
> > > > > > KK.
> > > > > >
> > > > > >
> > > > > >
> > > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.com>
> > > wrote:
> > > > > >
> > > > > > > KK, for your case, you don't really need to go to the effort of
> > > > > detecting
> > > > > > > whether fragments are english or not.
> > > > > > > Because the English stemmers in lucene will not modify your
> Indic
> > > > text,
> > > > > > and
> > > > > > > neither will the LowerCaseFilter.
> > > > > > >
> > > > > > > what you want to do is create a custom analyzer that works like
> > > this
> > > > > > >
> > > > > > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr
> nightly
> > > > jar],
> > > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> > > > > > >
> > > > > > > Thanks,
> > > > > > > Robert
> > > > > > >
> > > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.com
> >
> > > > wrote:
> > > > > > >
> > > > > > > > Thank you all.
> > > > > > > > To be frank I was using Solr in the begining half a month
> ago.
> > > The
> > > > > > > > problem[rather bug] with solr was creation of new index on
> the
> > > fly.
> > > > > > > Though
> > > > > > > > they have a restful method for teh same, but it was not
> > working.
> > > If
> > > > I
> > > > > > > > remember properly one of Solr commiter "Noble Paul"[I dont
> know
> > > his
> > > > > > real
> > > > > > > > name] was trying to help me. I tried many nightly builds and
> > > > spending
> > > > > a
> > > > > > > > couple of days stuck at that made me think of lucene and I
> > > switched
> > > > > to
> > > > > > > it.
> > > > > > > > Now after working with lucene which gives you full control of
> > > > > > everything
> > > > > > > I
> > > > > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is
> similar
> > > to
> > > > > > > > Window$:Linux, its my view only, though]. Coming back to the
> > > point
> > > > as
> > > > > > Uwe
> > > > > > > > mentioned that we can do the same thing in lucene as well,
> what
> > > is
> > > > > > > > available
> > > > > > > > in Solr, Solr is based on Lucene only, right?
> > > > > > > > I request Uwe to give me some more ideas on using the
> analyzers
> > > > from
> > > > > > solr
> > > > > > > > that will do the job for me, handling a mix of both english
> and
> > > > > > > non-english
> > > > > > > > content.
> > > > > > > > Muir, can you give me a bit detail description of how to use
> > the
> > > > > > > > WordDelimiteFilter to do my job.
> > > > > > > > On a side note, I was thingking of writing a simple analyzer
> > that
> > > > > will
> > > > > > do
> > > > > > > > the following,
> > > > > > > > #. If the webpage fragment is non-english[for me its some
> > indian
> > > > > > > language]
> > > > > > > > then index them as such, no stemming/ stop word removal to
> > begin
> > > > > with.
> > > > > > As
> > > > > > > I
> > > > > > > > know its in UCN unicode something like
> > > > \u0021\u0012\u34ae\u0031[just
> > > > > a
> > > > > > > > sample]
> > > > > > > > # If the fragment is english then apply standard anlyzing
> > process
> > > > for
> > > > > > > > english content. I've not thought of quering in the same way
> as
> > > of
> > > > > now
> > > > > > > i.e
> > > > > > > > mix of non-english and engish words.
> > > > > > > > Now to get all this,
> > > > > > > >  #1. I need some sort of way which will let me know if the
> > > content
> > > > is
> > > > > > > > english or not. If not english just add the tokens to the
> > > document.
> > > > > Do
> > > > > > we
> > > > > > > > really need language identifiers, as i dont have any other
> > > content
> > > > > that
> > > > > > > > uses
> > > > > > > > the same script as english other than those \u1234 things for
> > my
> > > > > indian
> > > > > > > > language content. Any smart hack/trick for the same?
> > > > > > > >  #2. If the its english apply all normal process and add the
> > > > stemmed
> > > > > > > token
> > > > > > > > to document.
> > > > > > > > For all this I was thinking of iterating earch word of the
> web
> > > page
> > > > > and
> > > > > > > > apply the above procedure. And finallyadd  the newly created
> > > > document
> > > > > > to
> > > > > > > > the
> > > > > > > > index.
> > > > > > > >
> > > > > > > > I would like some one to guide me in this direction. I'm
> pretty
> > > > > people
> > > > > > > must
> > > > > > > > have done similar/same thing earlier, I request them to guide
> > me/
> > > > > point
> > > > > > > me
> > > > > > > > to some tutorials for the same.
> > > > > > > > Else help me out writing a custom analyzer only if thats not
> > > going
> > > > to
> > > > > > be
> > > > > > > > too
> > > > > > > > complex. LOL, I'm a new user to lucene and know basics of
> Java
> > > > > coding.
> > > > > > > > Thank you very much.
> > > > > > > >
> > > > > > > > --KK.
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <
> rcmuir@gmail.com>
> > > > > wrote:
> > > > > > > >
> > > > > > > > > yes this is true. for starters KK, might be good to startup
> > > solr
> > > > > and
> > > > > > > look
> > > > > > > > > at
> > > > > > > > > http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> > > > > > > > >
> > > > > > > > > if you want to stick with lucene, the WordDelimiterFilter
> is
> > > the
> > > > > > piece
> > > > > > > > you
> > > > > > > > > will want for your text, mainly for punctuation but also
> for
> > > > format
> > > > > > > > > characters such as ZWJ/ZWNJ.
> > > > > > > > >
> > > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <
> > uwe@thetaphi.de
> > > >
> > > > > > wrote:
> > > > > > > > >
> > > > > > > > > > You can also re-use the solr analyzers, as far as I found
> > > out.
> > > > > > There
> > > > > > > is
> > > > > > > > > an
> > > > > > > > > > issue in jIRA/discussion on java-dev to merge them.
> > > > > > > > > >
> > > > > > > > > > -----
> > > > > > > > > > Uwe Schindler
> > > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > > > > > > > http://www.thetaphi.de
> > > > > > > > > > eMail: uwe@thetaphi.de
> > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > > > -----Original Message-----
> > > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > > > > > > > > To: java-user@lucene.apache.org
> > > > > > > > > > > Subject: Re: How to support stemming and case folding
> for
> > > > > english
> > > > > > > > > content
> > > > > > > > > > > mixed with non-english content?
> > > > > > > > > > >
> > > > > > > > > > > KK, ok, so you only really want to stem the english.
> This
> > > is
> > > > > > good.
> > > > > > > > > > >
> > > > > > > > > > > Is it possible for you to consider using solr? solr's
> > > default
> > > > > > > > analyzer
> > > > > > > > > > for
> > > > > > > > > > > type 'text' will be good for your case. it will do the
> > > > > following
> > > > > > > > > > > 1. tokenize on whitespace
> > > > > > > > > > > 2. handle both indian language and english punctuation
> > > > > > > > > > > 3. lowercase the english.
> > > > > > > > > > > 4. stem the english.
> > > > > > > > > > >
> > > > > > > > > > > try a nightly build,
> > > > > > > > > > http://people.apache.org/builds/lucene/solr/nightly/
> > > > > > > > > > >
> > > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
> > > > dioxide.software@gmail.com
> > > > > >
> > > > > > > > wrote:
> > > > > > > > > > >
> > > > > > > > > > > > Muir, thanks for your response.
> > > > > > > > > > > > I'm indexing indian language web pages which has got
> > > > descent
> > > > > > > amount
> > > > > > > > > of
> > > > > > > > > > > > english content mixed with therein. For the time
> being
> > > I'm
> > > > > not
> > > > > > > > going
> > > > > > > > > to
> > > > > > > > > > > use
> > > > > > > > > > > > any stemmers as we don't have standard stemmers for
> > > indian
> > > > > > > > languages
> > > > > > > > > .
> > > > > > > > > > > So
> > > > > > > > > > > > what I want to do is like this,
> > > > > > > > > > > > Say I've a web page having hindi content with 5%
> > english
> > > > > > content.
> > > > > > > > > Then
> > > > > > > > > > > for
> > > > > > > > > > > > hindi I want to use the basic white space analyzer as
> > we
> > > > dont
> > > > > > > have
> > > > > > > > > > > stemmers
> > > > > > > > > > > > for this as I mentioned earlier and whereever english
> > > > appears
> > > > > I
> > > > > > > > want
> > > > > > > > > > > them
> > > > > > > > > > > > to
> > > > > > > > > > > > be stemmed tokenized etc[the standard process used
> for
> > > > > english
> > > > > > > > > > content].
> > > > > > > > > > > As
> > > > > > > > > > > > of now I'm using whitespace analyzer for the full
> > content
> > > > > which
> > > > > > > > > doesnot
> > > > > > > > > > > > support case folding, stemming etc for teh content.
> So
> > if
> > > > > there
> > > > > > > is
> > > > > > > > an
> > > > > > > > > > > > english word say "Detection" indexed as such then
> > > searching
> > > > > for
> > > > > > > > > > > detection
> > > > > > > > > > > > or
> > > > > > > > > > > > detect is not giving any results, which is the
> expected
> > > > > > behavior,
> > > > > > > > but
> > > > > > > > > I
> > > > > > > > > > > > want
> > > > > > > > > > > > this kind of queries to give results.
> > > > > > > > > > > > I hope I made it clear. Let me know any ideas on
> doing
> > > the
> > > > > > same.
> > > > > > > > And
> > > > > > > > > > one
> > > > > > > > > > > > more thing, I'm storing the full webpage content
> under
> > a
> > > > > single
> > > > > > > > > field,
> > > > > > > > > > I
> > > > > > > > > > > > hope this will not make any difference, right?
> > > > > > > > > > > > It seems I've to use language identifiers, but do we
> > > really
> > > > > > need
> > > > > > > > > that?
> > > > > > > > > > > > Because we've only non-english content mixed with
> > > > english[and
> > > > > > not
> > > > > > > > > > french
> > > > > > > > > > > or
> > > > > > > > > > > > russian etc].
> > > > > > > > > > > >
> > > > > > > > > > > > What is the best way of approaching the problem? Any
> > > > > thoughts!
> > > > > > > > > > > >
> > > > > > > > > > > > Thanks,
> > > > > > > > > > > > KK.
> > > > > > > > > > > >
> > > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> > > > > rcmuir@gmail.com>
> > > > > > > > > wrote:
> > > > > > > > > > > >
> > > > > > > > > > > > > KK, is all of your latin script text actually
> > english?
> > > Is
> > > > > > there
> > > > > > > > > stuff
> > > > > > > > > > > > like
> > > > > > > > > > > > > german or french mixed in?
> > > > > > > > > > > > >
> > > > > > > > > > > > > And for your non-english content (your examples
> have
> > > been
> > > > > > > indian
> > > > > > > > > > > writing
> > > > > > > > > > > > > systems), is it generally true that if you had
> > > > devanagari,
> > > > > > you
> > > > > > > > can
> > > > > > > > > > > assume
> > > > > > > > > > > > > its hindi? or is there stuff like marathi mixed in?
> > > > > > > > > > > > >
> > > > > > > > > > > > > Reason I say this is to invoke the right stemmers,
> > you
> > > > > really
> > > > > > > > need
> > > > > > > > > > > some
> > > > > > > > > > > > > language detection, but perhaps in your case you
> can
> > > > cheat
> > > > > > and
> > > > > > > > > detect
> > > > > > > > > > > > this
> > > > > > > > > > > > > based on scripts...
> > > > > > > > > > > > >
> > > > > > > > > > > > > Thanks,
> > > > > > > > > > > > > Robert
> > > > > > > > > > > > >
> > > > > > > > > > > > >
> > > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> > > > > > > dioxide.software@gmail.com>
> > > > > > > > > > > wrote:
> > > > > > > > > > > > >
> > > > > > > > > > > > > > Hi All,
> > > > > > > > > > > > > > I'm indexing some non-english content. But the
> page
> > > > also
> > > > > > > > contains
> > > > > > > > > > > > english
> > > > > > > > > > > > > > content. As of now I'm using WhitespaceAnalyzer
> for
> > > all
> > > > > > > content
> > > > > > > > > and
> > > > > > > > > > > I'm
> > > > > > > > > > > > > > storing the full webpage content under a single
> > > filed.
> > > > > Now
> > > > > > we
> > > > > > > > > > > require
> > > > > > > > > > > > to
> > > > > > > > > > > > > > support case folding and stemmming for the
> english
> > > > > content
> > > > > > > > > > > intermingled
> > > > > > > > > > > > > > with
> > > > > > > > > > > > > > non-english content. I must metion that we dont
> > have
> > > > > > stemming
> > > > > > > > and
> > > > > > > > > > > case
> > > > > > > > > > > > > > folding for these non-english content. I'm stuck
> > with
> > > > > this.
> > > > > > > > Some
> > > > > > > > > > one
> > > > > > > > > > > do
> > > > > > > > > > > > > let
> > > > > > > > > > > > > > me know how to proceed for fixing this issue.
> > > > > > > > > > > > > >
> > > > > > > > > > > > > > Thanks,
> > > > > > > > > > > > > > KK.
> > > > > > > > > > > > > >
> > > > > > > > > > > > >
> > > > > > > > > > > > >
> > > > > > > > > > > > >
> > > > > > > > > > > > > --
> > > > > > > > > > > > > Robert Muir
> > > > > > > > > > > > > rcmuir@gmail.com
> > > > > > > > > > > > >
> > > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > > > --
> > > > > > > > > > > Robert Muir
> > > > > > > > > > > rcmuir@gmail.com
> > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > >
> > > > > >
> > ---------------------------------------------------------------------
> > > > > > > > > > To unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > > > > > > > For additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org
> > > > > > > > > >
> > > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > --
> > > > > > > > > Robert Muir
> > > > > > > > > rcmuir@gmail.com
> > > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > --
> > > > > > > Robert Muir
> > > > > > > rcmuir@gmail.com
> > > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Robert Muir
> > > > > rcmuir@gmail.com
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

--000e0cd32e0a9d244b046b99a7a3--

From java-user-return-40629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 13:31:05 2009
Return-Path: <java-user-return-40629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46466 invoked from network); 5 Jun 2009 13:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 13:31:05 -0000
Received: (qmail 90413 invoked by uid 500); 5 Jun 2009 13:31:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90354 invoked by uid 500); 5 Jun 2009 13:31:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90344 invoked by uid 99); 5 Jun 2009 13:31:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 13:31:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.221.184 as permitted sender)
Received: from [209.85.221.184] (HELO mail-qy0-f184.google.com) (209.85.221.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 13:31:04 +0000
Received: by qyk14 with SMTP id 14so647907qyk.29
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 06:30:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=vO+c4CsFupWtOMdTL/uEd+5GLuTkQNQkcje8ooVawOg=;
        b=dAYNFMpX1AKNhubXdyWwueI9c1eMR/6KMfWvQE2uNQ5RVQeX1pDV698ycBEfuNWBQE
         Y6oQ8wptNBUYevAneE9pzJYaebv2nrL2fwI011X8MKIhP26xB85/G6O23p6bafNnWOBP
         FE1fU18UGrvBR5c53uMfoJiXe36KBOsQ28+zo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=A4n4I3f+qM2HXVqLDZKgdL++9YxbUJC0bXo+76b+IpqdC8BOehkINrk44+2o7nT55c
         iP8kXjnxpyY9yJJjwQlem+TsU2Jrie9Qd4QDn0jpV0OJjmKm881KsPhm+odHioszAb2Z
         Si+tqESjJ+kjYLnEti3K1bBlXfbyIAWScXMjg=
MIME-Version: 1.0
Received: by 10.220.92.205 with SMTP id s13mr2351625vcm.31.1244208643429; Fri, 
	05 Jun 2009 06:30:43 -0700 (PDT)
In-Reply-To: <8c4e68610906050414k33956ccbj391870b3bd74d9cc@mail.gmail.com>
References: <635121.98181.qm@web111818.mail.gq1.yahoo.com>
	 <8c4e68610906050414k33956ccbj391870b3bd74d9cc@mail.gmail.com>
Date: Fri, 5 Jun 2009 09:30:43 -0400
Message-ID: <359a92830906050630v259786do4914b6cc332514da@mail.gmail.com>
Subject: Re: cannot retrieve the values of a field is not stored in the index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163631080537d8a8046b99e6f7
X-Virus-Checked: Checked by ClamAV on apache.org

--00163631080537d8a8046b99e6f7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Enumerating terms will be inefficient compared to getting the stored field.I'd
try soring the fields first until and unless you can demonstrate a problem.
BTW, if you're not going to *search* on the field, there's no reason to
index
it at all.

Why do think you don't want to store the paths? How big is your index?
Are you running into any performance issues?

Best
Erick

On Fri, Jun 5, 2009 at 7:14 AM, Ian Lea <ian.lea@gmail.com> wrote:

> You can't get at the field values from the document hits.
> Field.Store.NO means it isn't stored and what isn't there can't be
> retrieved.
>
> But you should be able to get at the indexed paths via a TermEnum.
> Something like this
>
>        IndexReader reader = IndexReader.open(...);
>        String field = "path".intern();
>        Term st = new Term("path", "");
>        TermEnum te = reader.terms(st);
>        while (true) {
>            Term t = te.term();
>            if (t == null || t.field() != field) {
>                break;
>            }
>            System.out.println(t.text());
>            if (!te.next()) {
>                break;
>            }
>        }
>    }
>
>
> --
> Ian.
>
>
> On Fri, Jun 5, 2009 at 1:18 AM, Alex Steward<alex_lucene@yahoo.com> wrote:
> >
> >
> > Hi,
> >
> >   Is there a way I can retrieve the value of a field that is not stored
> in the Index?
> >
> >
> > private static void indexFile(IndexWriter writer, File f)
> >     throws IOException {
> >
> >     if (f.isHidden() || !f.exists() || !f.canRead()) {
> >       return;
> >     }
> >
> >     System.out.println("Indexing " + f.getCanonicalPath());
> >
> >     Document doc = new Document();
> >
> >     // add contents of file
> >     FileReader fr = new FileReader(f);
> >
> >     doc.add(new Field("contents", fr));
> >
> >     //adding second field which contains the path of the file
> >     doc.add(new Field("path", f.getCanonicalPath(),
> >                 Field.Store.NO,
> >                 Field.Index.NOT_ANALYZED));
> > }
> >
> > Is there a way I can access the value of the field "path" from the
> document hits?
> >
> > Thanks,
> > a
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163631080537d8a8046b99e6f7--

From java-user-return-40630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 14:08:05 2009
Return-Path: <java-user-return-40630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63542 invoked from network); 5 Jun 2009 14:08:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 14:08:03 -0000
Received: (qmail 28127 invoked by uid 500); 5 Jun 2009 14:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27563 invoked by uid 500); 5 Jun 2009 14:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26789 invoked by uid 99); 5 Jun 2009 14:03:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 14:03:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 14:03:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MCa0V-00069E-Dc
	for java-user@lucene.apache.org; Fri, 05 Jun 2009 07:02:55 -0700
Message-ID: <23888815.post@talk.nabble.com>
Date: Fri, 5 Jun 2009 07:02:55 -0700 (PDT)
From: vanshi <nilu.thakur@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Custom sorting!
In-Reply-To: <23876641.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nilu.thakur@gmail.com
References: <23876641.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Can somebody take a look in why I'm not getting the correct alphabetical
order?

I changed last_name field to be 'UN_TOKENIZED' and sorting on only last
name, then network status. But with last name as 'J' in query, I am getting
results like:

JACOBSON
JOHNSON
JAHN

I would expect 'JAHN' to come before 'johnson'.

can somebody suggest wht's going wrong here.

Vanshi


vanshi wrote:
> 
> I am doing custom sorting within lucene using overloaded
> searcher.search(query, sort). First precedence is to sort based on 'last
> name' and then on 'network status', where 'INN' is better than 'OUT'.
> 
> Fields are stored in the indexes like this:
> 
> FIRST_NAME(Field.Store.NO, Field.Index.NO_NORMS)
> LAST_NAME_EXACT(Field.Store.NO, Field.Index.NO_NORMS)
> 
> And analyzer used is 'keyword analyzer' on these fields. And the fields
> are sorted with following lines.
> 
> ArrayList<SortField> sorts = new ArrayList<SortField>();
> sorts.add(new SortField("LAST_NAME_EXACT"));
> sorts.add(new SortField(ProviderFieldInfo.NETWORK.toString(),
> networkComparatorSource));
> super.setSort(sorts.toArray(new SortField[sorts.size()]));
> 
> Now, with the above line my expectation is to see 'last name' sorted
> alphabatically and then if two 'last names' are same then 'network
> status(INN/OUT)' must get precedence and if both 'network status' and
> 'last name' are same then socre will decide the order. Is this expectation
> wrong??
> 
> The result I'm getting is in this order: The query used is a prefix query,
> where 'last name' entered is 'john' and first name is 'p'. 
> 
> JOHNSON, PETER A 	INN
> JOHNSON, PETER B		INN
> JOHNSON, PEGGY A	OUT
> JOHNSON, PHILLIP W	INN
> JOHNSON-STUHR, PAMELA J	OUT
> JOHN, P G		INN
> JOHNSON, PAUL G		INN
> JOHNSON, PETER R		INN
> 
> Can somebody take alook and see what should be done to get expected
> results? 
> 
> Thanks,
> Vanshi
>  
> 

-- 
View this message in context: http://www.nabble.com/Custom-sorting%21-tp23876641p23888815.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 14:08:14 2009
Return-Path: <java-user-return-40631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64389 invoked from network); 5 Jun 2009 14:08:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 14:08:11 -0000
Received: (qmail 28912 invoked by uid 500); 5 Jun 2009 14:07:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27832 invoked by uid 500); 5 Jun 2009 14:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26876 invoked by uid 99); 5 Jun 2009 14:06:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 14:06:41 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 14:06:29 +0000
Received: by an-out-0708.google.com with SMTP id b6so758333ana.5
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 07:06:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ivAK3jPWchl4VmXJbYhBEZyHEIvxQ2D6tXXypRQRNWU=;
        b=acl6AgMUgOO4Vpk0+v1QtqBQYc3i351ZV9C2N7tSbDQ1O5ntuSzv3Gzw9Vsk7Rk1DW
         BcWHlwX0KEAvt9/uejoG+qQ5aKG0xITjz7C7syeQNgC56wtiT2i/hus3KPqBPE4HCtym
         5FssOLMz0YdHrunh40jwBUuCpv/+jYdsmJ4E0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=JOqiZWVG6igyMATPkRs1EgU6bWBSb0J2LDnPt+jJC68B/8fHcdiE40j8nA9DZBx3sc
         MWDkxIpqjt5uGVGehSIrThWE6GpmhKar0IjAR+gTZavzflEzgbewdaNTbweDuJpi9GHF
         BU1C3u6/sl3/zrp6KFZqjxP20q1VX7vzG79A0=
MIME-Version: 1.0
Received: by 10.100.143.17 with SMTP id q17mr3949439and.114.1244210767847; 
	Fri, 05 Jun 2009 07:06:07 -0700 (PDT)
In-Reply-To: <8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8db6d74a0906040528p557c58b6i29153f460b4923e6@mail.gmail.com>
	 <8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com>
	 <8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com>
	 <8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
	 <8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com>
	 <8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com>
	 <8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com>
	 <8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com>
	 <8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com>
Date: Fri, 5 Jun 2009 10:06:07 -0400
Message-ID: <8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

kk as for your first issue, that WordDelimiterFilter is package
protected, one option is to make a copy of the code and change the
class declaration to public.
the other option is to put your entire analyzer in
'org.apache.solr.analysis' package so that you can access it...

for the 2nd issue, yes you need to supply some options to it. the
default options solr applies to type 'text' seemed to work well for me
with indic:

{splitOnCaseChange=3D1, generateNumberParts=3D1, catenateWords=3D1,
generateWordParts=3D1, catenateAll=3D0, catenateNumbers=3D1}

On Fri, Jun 5, 2009 at 9:12 AM, KK <dioxide.software@gmail.com> wrote:
>
> Thanks Robert. There is one problem though, I'm able to plugin the word
> delimiter filter from solr-nightly jar file. When I tried to do something
> like,
> =C2=A0TokenStream ts =3D new WhitespaceTokenizer(reader);
> =C2=A0 ts =3D new WordDelimiterFilter(ts);
> =C2=A0 ts =3D new PorterStemmerFilter(ts);
> =C2=A0 ...rest as in the last mail...
>
> It gave me an error saying that
>
> org.apache.solr.analysis.WordDelimiterFilter is not public in
> org.apache.solr.analysis; cannot be accessed from outside package
> import org.apache.solr.analysis.WordDelimiterFilter;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
> solrSearch/IndicAnalyzer.java:38: cannot find symbol
> symbol =C2=A0: class WordDelimiterFilter
> location: class solrSearch.IndicAnalyzer
> =C2=A0 =C2=A0ts =3D new WordDelimiterFilter(ts);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
> 2 errors
>
> Then i tried to see the code for worddelimitefiter from solrnightly src a=
nd
> found that there are many deprecated constructors though they require a l=
ot
> of parameters alongwith tokenstream. I went through the solr wiki for
> worddelimiterfilterfactory here,
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b8387=
0ca7890cd73b193cefed83c283339089
> and say that there also its specified that we've to mention the parameter=
s
> and both are different for indexing and querying.
> I'm kind of stuck here, how do I make use of worddelimiterfilter in my
> custom analyzer, I've to use it anyway.
> In my code I've to make use of worddelimiterfilter and not
> worddelimiterfilterfactory, right? I don't know whats the use of the othe=
r
> one. Anyway can you guide me getting rid of the above error. And yes I'll
> change the order of applying the filters as you said.
>
> Thanks,
> KK.
>
>
>
>
>
>
>
> On Fri, Jun 5, 2009 at 5:48 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > KK, you got the right idea.
> >
> > though I think you might want to change the order, move the stopfilter
> > before the porter stem filter... otherwise it might not work correctly.
> >
> > On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com> wrote:
> >
> > > Thanks Robert. This is exactly what I did and =C2=A0its working but d=
elimiter
> > is
> > > missing I'm going to add that from solr-nightly.jar
> > >
> > > /**
> > > =C2=A0* Analyzer for Indian language.
> > > =C2=A0*/
> > > public class IndicAnalyzer extends Analyzer {
> > > =C2=A0public TokenStream tokenStream(String fieldName, Reader reader)=
 {
> > > =C2=A0 =C2=A0 TokenStream ts =3D new WhitespaceTokenizer(reader);
> > > =C2=A0 =C2=A0ts =3D new PorterStemFilter(ts);
> > > =C2=A0 =C2=A0ts =3D new LowerCaseFilter(ts);
> > > =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORD=
S);
> > > =C2=A0 =C2=A0return ts;
> > > =C2=A0}
> > > }
> > >
> > > Its able to do stemming/case-folding and supports search for both eng=
lish
> > > and indic texts. let me try out the delimiter. Will update you on tha=
t.
> > >
> > > Thanks a lot.
> > > KK
> > >
> > > On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com> wrote:
> > >
> > > > i think you are on the right track... once you build your analyzer,=
 put
> > > it
> > > > in your classpath and play around with it in luke and see if it doe=
s
> > what
> > > > you want.
> > > >
> > > > On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com> wro=
te:
> > > >
> > > > > Hi Robert,
> > > > > This is what I copied from ThaiAnalyzer @ lucene contrib
> > > > >
> > > > > public class ThaiAnalyzer extends Analyzer {
> > > > > =C2=A0public TokenStream tokenStream(String fieldName, Reader rea=
der) {
> > > > > =C2=A0 =C2=A0 =C2=A0TokenStream ts =3D new StandardTokenizer(read=
er);
> > > > > =C2=A0 =C2=A0ts =3D new StandardFilter(ts);
> > > > > =C2=A0 =C2=A0ts =3D new ThaiWordFilter(ts);
> > > > > =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_=
WORDS);
> > > > > =C2=A0 =C2=A0return ts;
> > > > > =C2=A0}
> > > > > }
> > > > >
> > > > > Now as you said, I've to use whitespacetokenizer
> > > > > withworddelimitefilter[solr
> > > > > nightly.jar] stop wordremoval, porter stemmer etc , so it is
> > something
> > > > like
> > > > > this,
> > > > > public class IndicAnalyzer extends Analyzer {
> > > > > =C2=A0public TokenStream tokenStream(String fieldName, Reader rea=
der) {
> > > > > =C2=A0 TokenStream ts =3D new WhiteSpaceTokenizer(reader);
> > > > > =C2=A0 ts =3D new WordDelimiterFilter(ts);
> > > > > =C2=A0 ts =3D new LowerCaseFilter(ts);
> > > > > =C2=A0 ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS)=
 =C2=A0 //
> > english
> > > > > stop filter, is this the default one?
> > > > > =C2=A0 ts =3D new PorterFilter(ts);
> > > > > =C2=A0 return ts;
> > > > > =C2=A0}
> > > > > }
> > > > >
> > > > > Does this sound OK? I think it will do the job...let me try it ou=
t..
> > > > > I dont need custom filter as per my requirement, at least not for
> > these
> > > > > basic things I'm doing? I think so...
> > > > >
> > > > > Thanks,
> > > > > KK.
> > > > >
> > > > >
> > > > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com>
> > wrote:
> > > > >
> > > > > > KK well you can always get some good examples from the lucene
> > contrib
> > > > > > codebase.
> > > > > > For example, look at the DutchAnalyzer, especially:
> > > > > >
> > > > > > TokenStream tokenStream(String fieldName, Reader reader)
> > > > > >
> > > > > > See how it combines a specified tokenizer with various filters?
> > this
> > > is
> > > > > > what
> > > > > > you want to do, except of course you want to use different
> > tokenizer
> > > > and
> > > > > > filters.
> > > > > >
> > > > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <dioxide.software@gmail.com>
> > > wrote:
> > > > > >
> > > > > > > Thanks Muir.
> > > > > > > Thanks for letting me know that I dont need language identifi=
ers.
> > > > > > > =C2=A0I'll have a look and will try to write the analyzer. Fo=
r my case
> > I
> > > > > think
> > > > > > > it
> > > > > > > wont be that difficult.
> > > > > > > BTW, can you point me to some sample codes/tutorials writing
> > custom
> > > > > > > analyzers. I could not find something in LIA2ndEdn. Is someth=
ing
> > > > htere?
> > > > > > do
> > > > > > > let me know.
> > > > > > >
> > > > > > > Thanks,
> > > > > > > KK.
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.com=
>
> > > > wrote:
> > > > > > >
> > > > > > > > KK, for your case, you don't really need to go to the effor=
t of
> > > > > > detecting
> > > > > > > > whether fragments are english or not.
> > > > > > > > Because the English stemmers in lucene will not modify your
> > Indic
> > > > > text,
> > > > > > > and
> > > > > > > > neither will the LowerCaseFilter.
> > > > > > > >
> > > > > > > > what you want to do is create a custom analyzer that works =
like
> > > > this
> > > > > > > >
> > > > > > > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr
> > nightly
> > > > > jar],
> > > > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> > > > > > > >
> > > > > > > > Thanks,
> > > > > > > > Robert
> > > > > > > >
> > > > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail.=
com
> > >
> > > > > wrote:
> > > > > > > >
> > > > > > > > > Thank you all.
> > > > > > > > > To be frank I was using Solr in the begining half a month
> > ago.
> > > > The
> > > > > > > > > problem[rather bug] with solr was creation of new index o=
n
> > the
> > > > fly.
> > > > > > > > Though
> > > > > > > > > they have a restful method for teh same, but it was not
> > > working.
> > > > If
> > > > > I
> > > > > > > > > remember properly one of Solr commiter "Noble Paul"[I don=
t
> > know
> > > > his
> > > > > > > real
> > > > > > > > > name] was trying to help me. I tried many nightly builds =
and
> > > > > spending
> > > > > > a
> > > > > > > > > couple of days stuck at that made me think of lucene and =
I
> > > > switched
> > > > > > to
> > > > > > > > it.
> > > > > > > > > Now after working with lucene which gives you full contro=
l of
> > > > > > > everything
> > > > > > > > I
> > > > > > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is
> > similar
> > > > to
> > > > > > > > > Window$:Linux, its my view only, though]. Coming back to =
the
> > > > point
> > > > > as
> > > > > > > Uwe
> > > > > > > > > mentioned that we can do the same thing in lucene as well=
,
> > what
> > > > is
> > > > > > > > > available
> > > > > > > > > in Solr, Solr is based on Lucene only, right?
> > > > > > > > > I request Uwe to give me some more ideas on using the
> > analyzers
> > > > > from
> > > > > > > solr
> > > > > > > > > that will do the job for me, handling a mix of both engli=
sh
> > and
> > > > > > > > non-english
> > > > > > > > > content.
> > > > > > > > > Muir, can you give me a bit detail description of how to =
use
> > > the
> > > > > > > > > WordDelimiteFilter to do my job.
> > > > > > > > > On a side note, I was thingking of writing a simple analy=
zer
> > > that
> > > > > > will
> > > > > > > do
> > > > > > > > > the following,
> > > > > > > > > #. If the webpage fragment is non-english[for me its some
> > > indian
> > > > > > > > language]
> > > > > > > > > then index them as such, no stemming/ stop word removal t=
o
> > > begin
> > > > > > with.
> > > > > > > As
> > > > > > > > I
> > > > > > > > > know its in UCN unicode something like
> > > > > \u0021\u0012\u34ae\u0031[just
> > > > > > a
> > > > > > > > > sample]
> > > > > > > > > # If the fragment is english then apply standard anlyzing
> > > process
> > > > > for
> > > > > > > > > english content. I've not thought of quering in the same =
way
> > as
> > > > of
> > > > > > now
> > > > > > > > i.e
> > > > > > > > > mix of non-english and engish words.
> > > > > > > > > Now to get all this,
> > > > > > > > > =C2=A0#1. I need some sort of way which will let me know =
if the
> > > > content
> > > > > is
> > > > > > > > > english or not. If not english just add the tokens to the
> > > > document.
> > > > > > Do
> > > > > > > we
> > > > > > > > > really need language identifiers, as i dont have any othe=
r
> > > > content
> > > > > > that
> > > > > > > > > uses
> > > > > > > > > the same script as english other than those \u1234 things=
 for
> > > my
> > > > > > indian
> > > > > > > > > language content. Any smart hack/trick for the same?
> > > > > > > > > =C2=A0#2. If the its english apply all normal process and=
 add the
> > > > > stemmed
> > > > > > > > token
> > > > > > > > > to document.
> > > > > > > > > For all this I was thinking of iterating earch word of th=
e
> > web
> > > > page
> > > > > > and
> > > > > > > > > apply the above procedure. And finallyadd =C2=A0the newly=
 created
> > > > > document
> > > > > > > to
> > > > > > > > > the
> > > > > > > > > index.
> > > > > > > > >
> > > > > > > > > I would like some one to guide me in this direction. I'm
> > pretty
> > > > > > people
> > > > > > > > must
> > > > > > > > > have done similar/same thing earlier, I request them to g=
uide
> > > me/
> > > > > > point
> > > > > > > > me
> > > > > > > > > to some tutorials for the same.
> > > > > > > > > Else help me out writing a custom analyzer only if thats =
not
> > > > going
> > > > > to
> > > > > > > be
> > > > > > > > > too
> > > > > > > > > complex. LOL, I'm a new user to lucene and know basics of
> > Java
> > > > > > coding.
> > > > > > > > > Thank you very much.
> > > > > > > > >
> > > > > > > > > --KK.
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <
> > rcmuir@gmail.com>
> > > > > > wrote:
> > > > > > > > >
> > > > > > > > > > yes this is true. for starters KK, might be good to sta=
rtup
> > > > solr
> > > > > > and
> > > > > > > > look
> > > > > > > > > > at
> > > > > > > > > > http://localhost:8983/solr/admin/analysis.jsp?highlight=
=3Don
> > > > > > > > > >
> > > > > > > > > > if you want to stick with lucene, the WordDelimiterFilt=
er
> > is
> > > > the
> > > > > > > piece
> > > > > > > > > you
> > > > > > > > > > will want for your text, mainly for punctuation but als=
o
> > for
> > > > > format
> > > > > > > > > > characters such as ZWJ/ZWNJ.
> > > > > > > > > >
> > > > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <
> > > uwe@thetaphi.de
> > > > >
> > > > > > > wrote:
> > > > > > > > > >
> > > > > > > > > > > You can also re-use the solr analyzers, as far as I f=
ound
> > > > out.
> > > > > > > There
> > > > > > > > is
> > > > > > > > > > an
> > > > > > > > > > > issue in jIRA/discussion on java-dev to merge them.
> > > > > > > > > > >
> > > > > > > > > > > -----
> > > > > > > > > > > Uwe Schindler
> > > > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > > > > > > > > http://www.thetaphi.de
> > > > > > > > > > > eMail: uwe@thetaphi.de
> > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > > > > -----Original Message-----
> > > > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> > > > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> > > > > > > > > > > > To: java-user@lucene.apache.org
> > > > > > > > > > > > Subject: Re: How to support stemming and case foldi=
ng
> > for
> > > > > > english
> > > > > > > > > > content
> > > > > > > > > > > > mixed with non-english content?
> > > > > > > > > > > >
> > > > > > > > > > > > KK, ok, so you only really want to stem the english=
.
> > This
> > > > is
> > > > > > > good.
> > > > > > > > > > > >
> > > > > > > > > > > > Is it possible for you to consider using solr? solr=
's
> > > > default
> > > > > > > > > analyzer
> > > > > > > > > > > for
> > > > > > > > > > > > type 'text' will be good for your case. it will do =
the
> > > > > > following
> > > > > > > > > > > > 1. tokenize on whitespace
> > > > > > > > > > > > 2. handle both indian language and english punctuat=
ion
> > > > > > > > > > > > 3. lowercase the english.
> > > > > > > > > > > > 4. stem the english.
> > > > > > > > > > > >
> > > > > > > > > > > > try a nightly build,
> > > > > > > > > > > http://people.apache.org/builds/lucene/solr/nightly/
> > > > > > > > > > > >
> > > > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
> > > > > dioxide.software@gmail.com
> > > > > > >
> > > > > > > > > wrote:
> > > > > > > > > > > >
> > > > > > > > > > > > > Muir, thanks for your response.
> > > > > > > > > > > > > I'm indexing indian language web pages which has =
got
> > > > > descent
> > > > > > > > amount
> > > > > > > > > > of
> > > > > > > > > > > > > english content mixed with therein. For the time
> > being
> > > > I'm
> > > > > > not
> > > > > > > > > going
> > > > > > > > > > to
> > > > > > > > > > > > use
> > > > > > > > > > > > > any stemmers as we don't have standard stemmers f=
or
> > > > indian
> > > > > > > > > languages
> > > > > > > > > > .
> > > > > > > > > > > > So
> > > > > > > > > > > > > what I want to do is like this,
> > > > > > > > > > > > > Say I've a web page having hindi content with 5%
> > > english
> > > > > > > content.
> > > > > > > > > > Then
> > > > > > > > > > > > for
> > > > > > > > > > > > > hindi I want to use the basic white space analyze=
r as
> > > we
> > > > > dont
> > > > > > > > have
> > > > > > > > > > > > stemmers
> > > > > > > > > > > > > for this as I mentioned earlier and whereever eng=
lish
> > > > > appears
> > > > > > I
> > > > > > > > > want
> > > > > > > > > > > > them
> > > > > > > > > > > > > to
> > > > > > > > > > > > > be stemmed tokenized etc[the standard process use=
d
> > for
> > > > > > english
> > > > > > > > > > > content].
> > > > > > > > > > > > As
> > > > > > > > > > > > > of now I'm using whitespace analyzer for the full
> > > content
> > > > > > which
> > > > > > > > > > doesnot
> > > > > > > > > > > > > support case folding, stemming etc for teh conten=
t.
> > So
> > > if
> > > > > > there
> > > > > > > > is
> > > > > > > > > an
> > > > > > > > > > > > > english word say "Detection" indexed as such then
> > > > searching
> > > > > > for
> > > > > > > > > > > > detection
> > > > > > > > > > > > > or
> > > > > > > > > > > > > detect is not giving any results, which is the
> > expected
> > > > > > > behavior,
> > > > > > > > > but
> > > > > > > > > > I
> > > > > > > > > > > > > want
> > > > > > > > > > > > > this kind of queries to give results.
> > > > > > > > > > > > > I hope I made it clear. Let me know any ideas on
> > doing
> > > > the
> > > > > > > same.
> > > > > > > > > And
> > > > > > > > > > > one
> > > > > > > > > > > > > more thing, I'm storing the full webpage content
> > under
> > > a
> > > > > > single
> > > > > > > > > > field,
> > > > > > > > > > > I
> > > > > > > > > > > > > hope this will not make any difference, right?
> > > > > > > > > > > > > It seems I've to use language identifiers, but do=
 we
> > > > really
> > > > > > > need
> > > > > > > > > > that?
> > > > > > > > > > > > > Because we've only non-english content mixed with
> > > > > english[and
> > > > > > > not
> > > > > > > > > > > french
> > > > > > > > > > > > or
> > > > > > > > > > > > > russian etc].
> > > > > > > > > > > > >
> > > > > > > > > > > > > What is the best way of approaching the problem? =
Any
> > > > > > thoughts!
> > > > > > > > > > > > >
> > > > > > > > > > > > > Thanks,
> > > > > > > > > > > > > KK.
> > > > > > > > > > > > >
> > > > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> > > > > > rcmuir@gmail.com>
> > > > > > > > > > wrote:
> > > > > > > > > > > > >
> > > > > > > > > > > > > > KK, is all of your latin script text actually
> > > english?
> > > > Is
> > > > > > > there
> > > > > > > > > > stuff
> > > > > > > > > > > > > like
> > > > > > > > > > > > > > german or french mixed in?
> > > > > > > > > > > > > >
> > > > > > > > > > > > > > And for your non-english content (your examples
> > have
> > > > been
> > > > > > > > indian
> > > > > > > > > > > > writing
> > > > > > > > > > > > > > systems), is it generally true that if you had
> > > > > devanagari,
> > > > > > > you
> > > > > > > > > can
> > > > > > > > > > > > assume
> > > > > > > > > > > > > > its hindi? or is there stuff like marathi mixed=
 in?
> > > > > > > > > > > > > >
> > > > > > > > > > > > > > Reason I say this is to invoke the right stemme=
rs,
> > > you
> > > > > > really
> > > > > > > > > need
> > > > > > > > > > > > some
> > > > > > > > > > > > > > language detection, but perhaps in your case yo=
u
> > can
> > > > > cheat
> > > > > > > and
> > > > > > > > > > detect
> > > > > > > > > > > > > this
> > > > > > > > > > > > > > based on scripts...
> > > > > > > > > > > > > >
> > > > > > > > > > > > > > Thanks,
> > > > > > > > > > > > > > Robert
> > > > > > > > > > > > > >
> > > > > > > > > > > > > >
> > > > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> > > > > > > > dioxide.software@gmail.com>
> > > > > > > > > > > > wrote:
> > > > > > > > > > > > > >
> > > > > > > > > > > > > > > Hi All,
> > > > > > > > > > > > > > > I'm indexing some non-english content. But th=
e
> > page
> > > > > also
> > > > > > > > > contains
> > > > > > > > > > > > > english
> > > > > > > > > > > > > > > content. As of now I'm using WhitespaceAnalyz=
er
> > for
> > > > all
> > > > > > > > content
> > > > > > > > > > and
> > > > > > > > > > > > I'm
> > > > > > > > > > > > > > > storing the full webpage content under a sing=
le
> > > > filed.
> > > > > > Now
> > > > > > > we
> > > > > > > > > > > > require
> > > > > > > > > > > > > to
> > > > > > > > > > > > > > > support case folding and stemmming for the
> > english
> > > > > > content
> > > > > > > > > > > > intermingled
> > > > > > > > > > > > > > > with
> > > > > > > > > > > > > > > non-english content. I must metion that we do=
nt
> > > have
> > > > > > > stemming
> > > > > > > > > and
> > > > > > > > > > > > case
> > > > > > > > > > > > > > > folding for these non-english content. I'm st=
uck
> > > with
> > > > > > this.
> > > > > > > > > Some
> > > > > > > > > > > one
> > > > > > > > > > > > do
> > > > > > > > > > > > > > let
> > > > > > > > > > > > > > > me know how to proceed for fixing this issue.
> > > > > > > > > > > > > > >
> > > > > > > > > > > > > > > Thanks,
> > > > > > > > > > > > > > > KK.
> > > > > > > > > > > > > > >
> > > > > > > > > > > > > >
> > > > > > > > > > > > > >
> > > > > > > > > > > > > >
> > > > > > > > > > > > > > --
> > > > > > > > > > > > > > Robert Muir
> > > > > > > > > > > > > > rcmuir@gmail.com
> > > > > > > > > > > > > >
> > > > > > > > > > > > >
> > > > > > > > > > > >
> > > > > > > > > > > >
> > > > > > > > > > > >
> > > > > > > > > > > > --
> > > > > > > > > > > > Robert Muir
> > > > > > > > > > > > rcmuir@gmail.com
> > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > > >
> > > > > > >
> > > ---------------------------------------------------------------------
> > > > > > > > > > > To unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > > > > > > > > > > For additional commands, e-mail:
> > > > > > java-user-help@lucene.apache.org
> > > > > > > > > > >
> > > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > >
> > > > > > > > > > --
> > > > > > > > > > Robert Muir
> > > > > > > > > > rcmuir@gmail.com
> > > > > > > > > >
> > > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > > --
> > > > > > > > Robert Muir
> > > > > > > > rcmuir@gmail.com
> > > > > > > >
> > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Robert Muir
> > > > > > rcmuir@gmail.com
> > > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > > >
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >



--
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 14:08:20 2009
Return-Path: <java-user-return-40632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64496 invoked from network); 5 Jun 2009 14:08:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 14:08:12 -0000
Received: (qmail 41459 invoked by uid 500); 5 Jun 2009 14:07:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41424 invoked by uid 500); 5 Jun 2009 14:07:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41397 invoked by uid 99); 5 Jun 2009 14:07:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 14:07:54 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 14:07:43 +0000
Received: by yw-out-2324.google.com with SMTP id 2so704210ywt.5
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 07:07:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=TSCE8/DJqgowqda4NrieG2PT7m2XTBaG8Plv+DpCtAU=;
        b=FYzWxp6Gd24YpvlcBGzBXp3uERgJZ1hRR8t17kWot80RHy+6wy4bj9l5jNFCv+Nt8c
         ly2fIhGH/CZ3Fji3GIbZg9FCJTHZ2UFah1zNrPv6jw2IyDTJnE/SysKwIlWFpVLFIMgG
         0Yi27od5o+Ne0Zcx9cnu/2bwwpYRVmCvEa8k4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Zig40INZuES2Fhz18ac7hsCX58Mqx/w6OOBC2wolvWw73R18i8KVpUJdk3XVYMe2sA
         baZi6FUCixX1bPRHN1bjad7Lj7GiuGEe2CcXPfLDjv64jTI3sOgAxykI8GMDF2F+1nPc
         ryY7GVE6BEe5lh+UMtosAuCKKi3AK7ocAqmCQ=
MIME-Version: 1.0
Received: by 10.100.144.6 with SMTP id r6mr3938877and.121.1244210841881; Fri, 
	05 Jun 2009 07:07:21 -0700 (PDT)
In-Reply-To: <8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8f0ad1f30906040549t75d68edbse13cbb541e14f816@mail.gmail.com>
	 <8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com>
	 <8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
	 <8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com>
	 <8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com>
	 <8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com>
	 <8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com>
	 <8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com>
	 <8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com>
Date: Fri, 5 Jun 2009 10:07:21 -0400
Message-ID: <8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

kk an easier solution to your first problem is to use
worddelimiterfilterfactory if possible... you can get an instance of
worddelimiter filter from that.

thanks,
robert

On Fri, Jun 5, 2009 at 10:06 AM, Robert Muir<rcmuir@gmail.com> wrote:
> kk as for your first issue, that WordDelimiterFilter is package
> protected, one option is to make a copy of the code and change the
> class declaration to public.
> the other option is to put your entire analyzer in
> 'org.apache.solr.analysis' package so that you can access it...
>
> for the 2nd issue, yes you need to supply some options to it. the
> default options solr applies to type 'text' seemed to work well for me
> with indic:
>
> {splitOnCaseChange=3D1, generateNumberParts=3D1, catenateWords=3D1,
> generateWordParts=3D1, catenateAll=3D0, catenateNumbers=3D1}
>
> On Fri, Jun 5, 2009 at 9:12 AM, KK <dioxide.software@gmail.com> wrote:
>>
>> Thanks Robert. There is one problem though, I'm able to plugin the word
>> delimiter filter from solr-nightly jar file. When I tried to do somethin=
g
>> like,
>> =C2=A0TokenStream ts =3D new WhitespaceTokenizer(reader);
>> =C2=A0 ts =3D new WordDelimiterFilter(ts);
>> =C2=A0 ts =3D new PorterStemmerFilter(ts);
>> =C2=A0 ...rest as in the last mail...
>>
>> It gave me an error saying that
>>
>> org.apache.solr.analysis.WordDelimiterFilter is not public in
>> org.apache.solr.analysis; cannot be accessed from outside package
>> import org.apache.solr.analysis.WordDelimiterFilter;
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
>> solrSearch/IndicAnalyzer.java:38: cannot find symbol
>> symbol =C2=A0: class WordDelimiterFilter
>> location: class solrSearch.IndicAnalyzer
>> =C2=A0 =C2=A0ts =3D new WordDelimiterFilter(ts);
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
>> 2 errors
>>
>> Then i tried to see the code for worddelimitefiter from solrnightly src =
and
>> found that there are many deprecated constructors though they require a =
lot
>> of parameters alongwith tokenstream. I went through the solr wiki for
>> worddelimiterfilterfactory here,
>> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b838=
70ca7890cd73b193cefed83c283339089
>> and say that there also its specified that we've to mention the paramete=
rs
>> and both are different for indexing and querying.
>> I'm kind of stuck here, how do I make use of worddelimiterfilter in my
>> custom analyzer, I've to use it anyway.
>> In my code I've to make use of worddelimiterfilter and not
>> worddelimiterfilterfactory, right? I don't know whats the use of the oth=
er
>> one. Anyway can you guide me getting rid of the above error. And yes I'l=
l
>> change the order of applying the filters as you said.
>>
>> Thanks,
>> KK.
>>
>>
>>
>>
>>
>>
>>
>> On Fri, Jun 5, 2009 at 5:48 PM, Robert Muir <rcmuir@gmail.com> wrote:
>>
>> > KK, you got the right idea.
>> >
>> > though I think you might want to change the order, move the stopfilter
>> > before the porter stem filter... otherwise it might not work correctly=
.
>> >
>> > On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com> wrote:
>> >
>> > > Thanks Robert. This is exactly what I did and =C2=A0its working but =
delimiter
>> > is
>> > > missing I'm going to add that from solr-nightly.jar
>> > >
>> > > /**
>> > > =C2=A0* Analyzer for Indian language.
>> > > =C2=A0*/
>> > > public class IndicAnalyzer extends Analyzer {
>> > > =C2=A0public TokenStream tokenStream(String fieldName, Reader reader=
) {
>> > > =C2=A0 =C2=A0 TokenStream ts =3D new WhitespaceTokenizer(reader);
>> > > =C2=A0 =C2=A0ts =3D new PorterStemFilter(ts);
>> > > =C2=A0 =C2=A0ts =3D new LowerCaseFilter(ts);
>> > > =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WOR=
DS);
>> > > =C2=A0 =C2=A0return ts;
>> > > =C2=A0}
>> > > }
>> > >
>> > > Its able to do stemming/case-folding and supports search for both en=
glish
>> > > and indic texts. let me try out the delimiter. Will update you on th=
at.
>> > >
>> > > Thanks a lot.
>> > > KK
>> > >
>> > > On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com> wrote=
:
>> > >
>> > > > i think you are on the right track... once you build your analyzer=
, put
>> > > it
>> > > > in your classpath and play around with it in luke and see if it do=
es
>> > what
>> > > > you want.
>> > > >
>> > > > On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com> wr=
ote:
>> > > >
>> > > > > Hi Robert,
>> > > > > This is what I copied from ThaiAnalyzer @ lucene contrib
>> > > > >
>> > > > > public class ThaiAnalyzer extends Analyzer {
>> > > > > =C2=A0public TokenStream tokenStream(String fieldName, Reader re=
ader) {
>> > > > > =C2=A0 =C2=A0 =C2=A0TokenStream ts =3D new StandardTokenizer(rea=
der);
>> > > > > =C2=A0 =C2=A0ts =3D new StandardFilter(ts);
>> > > > > =C2=A0 =C2=A0ts =3D new ThaiWordFilter(ts);
>> > > > > =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP=
_WORDS);
>> > > > > =C2=A0 =C2=A0return ts;
>> > > > > =C2=A0}
>> > > > > }
>> > > > >
>> > > > > Now as you said, I've to use whitespacetokenizer
>> > > > > withworddelimitefilter[solr
>> > > > > nightly.jar] stop wordremoval, porter stemmer etc , so it is
>> > something
>> > > > like
>> > > > > this,
>> > > > > public class IndicAnalyzer extends Analyzer {
>> > > > > =C2=A0public TokenStream tokenStream(String fieldName, Reader re=
ader) {
>> > > > > =C2=A0 TokenStream ts =3D new WhiteSpaceTokenizer(reader);
>> > > > > =C2=A0 ts =3D new WordDelimiterFilter(ts);
>> > > > > =C2=A0 ts =3D new LowerCaseFilter(ts);
>> > > > > =C2=A0 ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS=
) =C2=A0 //
>> > english
>> > > > > stop filter, is this the default one?
>> > > > > =C2=A0 ts =3D new PorterFilter(ts);
>> > > > > =C2=A0 return ts;
>> > > > > =C2=A0}
>> > > > > }
>> > > > >
>> > > > > Does this sound OK? I think it will do the job...let me try it o=
ut..
>> > > > > I dont need custom filter as per my requirement, at least not fo=
r
>> > these
>> > > > > basic things I'm doing? I think so...
>> > > > >
>> > > > > Thanks,
>> > > > > KK.
>> > > > >
>> > > > >
>> > > > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com>
>> > wrote:
>> > > > >
>> > > > > > KK well you can always get some good examples from the lucene
>> > contrib
>> > > > > > codebase.
>> > > > > > For example, look at the DutchAnalyzer, especially:
>> > > > > >
>> > > > > > TokenStream tokenStream(String fieldName, Reader reader)
>> > > > > >
>> > > > > > See how it combines a specified tokenizer with various filters=
?
>> > this
>> > > is
>> > > > > > what
>> > > > > > you want to do, except of course you want to use different
>> > tokenizer
>> > > > and
>> > > > > > filters.
>> > > > > >
>> > > > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <dioxide.software@gmail.com=
>
>> > > wrote:
>> > > > > >
>> > > > > > > Thanks Muir.
>> > > > > > > Thanks for letting me know that I dont need language identif=
iers.
>> > > > > > > =C2=A0I'll have a look and will try to write the analyzer. F=
or my case
>> > I
>> > > > > think
>> > > > > > > it
>> > > > > > > wont be that difficult.
>> > > > > > > BTW, can you point me to some sample codes/tutorials writing
>> > custom
>> > > > > > > analyzers. I could not find something in LIA2ndEdn. Is somet=
hing
>> > > > htere?
>> > > > > > do
>> > > > > > > let me know.
>> > > > > > >
>> > > > > > > Thanks,
>> > > > > > > KK.
>> > > > > > >
>> > > > > > >
>> > > > > > >
>> > > > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <rcmuir@gmail.co=
m>
>> > > > wrote:
>> > > > > > >
>> > > > > > > > KK, for your case, you don't really need to go to the effo=
rt of
>> > > > > > detecting
>> > > > > > > > whether fragments are english or not.
>> > > > > > > > Because the English stemmers in lucene will not modify you=
r
>> > Indic
>> > > > > text,
>> > > > > > > and
>> > > > > > > > neither will the LowerCaseFilter.
>> > > > > > > >
>> > > > > > > > what you want to do is create a custom analyzer that works=
 like
>> > > > this
>> > > > > > > >
>> > > > > > > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr
>> > nightly
>> > > > > jar],
>> > > > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
>> > > > > > > >
>> > > > > > > > Thanks,
>> > > > > > > > Robert
>> > > > > > > >
>> > > > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <dioxide.software@gmail=
.com
>> > >
>> > > > > wrote:
>> > > > > > > >
>> > > > > > > > > Thank you all.
>> > > > > > > > > To be frank I was using Solr in the begining half a mont=
h
>> > ago.
>> > > > The
>> > > > > > > > > problem[rather bug] with solr was creation of new index =
on
>> > the
>> > > > fly.
>> > > > > > > > Though
>> > > > > > > > > they have a restful method for teh same, but it was not
>> > > working.
>> > > > If
>> > > > > I
>> > > > > > > > > remember properly one of Solr commiter "Noble Paul"[I do=
nt
>> > know
>> > > > his
>> > > > > > > real
>> > > > > > > > > name] was trying to help me. I tried many nightly builds=
 and
>> > > > > spending
>> > > > > > a
>> > > > > > > > > couple of days stuck at that made me think of lucene and=
 I
>> > > > switched
>> > > > > > to
>> > > > > > > > it.
>> > > > > > > > > Now after working with lucene which gives you full contr=
ol of
>> > > > > > > everything
>> > > > > > > > I
>> > > > > > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is
>> > similar
>> > > > to
>> > > > > > > > > Window$:Linux, its my view only, though]. Coming back to=
 the
>> > > > point
>> > > > > as
>> > > > > > > Uwe
>> > > > > > > > > mentioned that we can do the same thing in lucene as wel=
l,
>> > what
>> > > > is
>> > > > > > > > > available
>> > > > > > > > > in Solr, Solr is based on Lucene only, right?
>> > > > > > > > > I request Uwe to give me some more ideas on using the
>> > analyzers
>> > > > > from
>> > > > > > > solr
>> > > > > > > > > that will do the job for me, handling a mix of both engl=
ish
>> > and
>> > > > > > > > non-english
>> > > > > > > > > content.
>> > > > > > > > > Muir, can you give me a bit detail description of how to=
 use
>> > > the
>> > > > > > > > > WordDelimiteFilter to do my job.
>> > > > > > > > > On a side note, I was thingking of writing a simple anal=
yzer
>> > > that
>> > > > > > will
>> > > > > > > do
>> > > > > > > > > the following,
>> > > > > > > > > #. If the webpage fragment is non-english[for me its som=
e
>> > > indian
>> > > > > > > > language]
>> > > > > > > > > then index them as such, no stemming/ stop word removal =
to
>> > > begin
>> > > > > > with.
>> > > > > > > As
>> > > > > > > > I
>> > > > > > > > > know its in UCN unicode something like
>> > > > > \u0021\u0012\u34ae\u0031[just
>> > > > > > a
>> > > > > > > > > sample]
>> > > > > > > > > # If the fragment is english then apply standard anlyzin=
g
>> > > process
>> > > > > for
>> > > > > > > > > english content. I've not thought of quering in the same=
 way
>> > as
>> > > > of
>> > > > > > now
>> > > > > > > > i.e
>> > > > > > > > > mix of non-english and engish words.
>> > > > > > > > > Now to get all this,
>> > > > > > > > > =C2=A0#1. I need some sort of way which will let me know=
 if the
>> > > > content
>> > > > > is
>> > > > > > > > > english or not. If not english just add the tokens to th=
e
>> > > > document.
>> > > > > > Do
>> > > > > > > we
>> > > > > > > > > really need language identifiers, as i dont have any oth=
er
>> > > > content
>> > > > > > that
>> > > > > > > > > uses
>> > > > > > > > > the same script as english other than those \u1234 thing=
s for
>> > > my
>> > > > > > indian
>> > > > > > > > > language content. Any smart hack/trick for the same?
>> > > > > > > > > =C2=A0#2. If the its english apply all normal process an=
d add the
>> > > > > stemmed
>> > > > > > > > token
>> > > > > > > > > to document.
>> > > > > > > > > For all this I was thinking of iterating earch word of t=
he
>> > web
>> > > > page
>> > > > > > and
>> > > > > > > > > apply the above procedure. And finallyadd =C2=A0the newl=
y created
>> > > > > document
>> > > > > > > to
>> > > > > > > > > the
>> > > > > > > > > index.
>> > > > > > > > >
>> > > > > > > > > I would like some one to guide me in this direction. I'm
>> > pretty
>> > > > > > people
>> > > > > > > > must
>> > > > > > > > > have done similar/same thing earlier, I request them to =
guide
>> > > me/
>> > > > > > point
>> > > > > > > > me
>> > > > > > > > > to some tutorials for the same.
>> > > > > > > > > Else help me out writing a custom analyzer only if thats=
 not
>> > > > going
>> > > > > to
>> > > > > > > be
>> > > > > > > > > too
>> > > > > > > > > complex. LOL, I'm a new user to lucene and know basics o=
f
>> > Java
>> > > > > > coding.
>> > > > > > > > > Thank you very much.
>> > > > > > > > >
>> > > > > > > > > --KK.
>> > > > > > > > >
>> > > > > > > > >
>> > > > > > > > >
>> > > > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <
>> > rcmuir@gmail.com>
>> > > > > > wrote:
>> > > > > > > > >
>> > > > > > > > > > yes this is true. for starters KK, might be good to st=
artup
>> > > > solr
>> > > > > > and
>> > > > > > > > look
>> > > > > > > > > > at
>> > > > > > > > > > http://localhost:8983/solr/admin/analysis.jsp?highligh=
t=3Don
>> > > > > > > > > >
>> > > > > > > > > > if you want to stick with lucene, the WordDelimiterFil=
ter
>> > is
>> > > > the
>> > > > > > > piece
>> > > > > > > > > you
>> > > > > > > > > > will want for your text, mainly for punctuation but al=
so
>> > for
>> > > > > format
>> > > > > > > > > > characters such as ZWJ/ZWNJ.
>> > > > > > > > > >
>> > > > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <
>> > > uwe@thetaphi.de
>> > > > >
>> > > > > > > wrote:
>> > > > > > > > > >
>> > > > > > > > > > > You can also re-use the solr analyzers, as far as I =
found
>> > > > out.
>> > > > > > > There
>> > > > > > > > is
>> > > > > > > > > > an
>> > > > > > > > > > > issue in jIRA/discussion on java-dev to merge them.
>> > > > > > > > > > >
>> > > > > > > > > > > -----
>> > > > > > > > > > > Uwe Schindler
>> > > > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > > > > > > > > > > http://www.thetaphi.de
>> > > > > > > > > > > eMail: uwe@thetaphi.de
>> > > > > > > > > > >
>> > > > > > > > > > >
>> > > > > > > > > > > > -----Original Message-----
>> > > > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
>> > > > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
>> > > > > > > > > > > > To: java-user@lucene.apache.org
>> > > > > > > > > > > > Subject: Re: How to support stemming and case fold=
ing
>> > for
>> > > > > > english
>> > > > > > > > > > content
>> > > > > > > > > > > > mixed with non-english content?
>> > > > > > > > > > > >
>> > > > > > > > > > > > KK, ok, so you only really want to stem the englis=
h.
>> > This
>> > > > is
>> > > > > > > good.
>> > > > > > > > > > > >
>> > > > > > > > > > > > Is it possible for you to consider using solr? sol=
r's
>> > > > default
>> > > > > > > > > analyzer
>> > > > > > > > > > > for
>> > > > > > > > > > > > type 'text' will be good for your case. it will do=
 the
>> > > > > > following
>> > > > > > > > > > > > 1. tokenize on whitespace
>> > > > > > > > > > > > 2. handle both indian language and english punctua=
tion
>> > > > > > > > > > > > 3. lowercase the english.
>> > > > > > > > > > > > 4. stem the english.
>> > > > > > > > > > > >
>> > > > > > > > > > > > try a nightly build,
>> > > > > > > > > > > http://people.apache.org/builds/lucene/solr/nightly/
>> > > > > > > > > > > >
>> > > > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
>> > > > > dioxide.software@gmail.com
>> > > > > > >
>> > > > > > > > > wrote:
>> > > > > > > > > > > >
>> > > > > > > > > > > > > Muir, thanks for your response.
>> > > > > > > > > > > > > I'm indexing indian language web pages which has=
 got
>> > > > > descent
>> > > > > > > > amount
>> > > > > > > > > > of
>> > > > > > > > > > > > > english content mixed with therein. For the time
>> > being
>> > > > I'm
>> > > > > > not
>> > > > > > > > > going
>> > > > > > > > > > to
>> > > > > > > > > > > > use
>> > > > > > > > > > > > > any stemmers as we don't have standard stemmers =
for
>> > > > indian
>> > > > > > > > > languages
>> > > > > > > > > > .
>> > > > > > > > > > > > So
>> > > > > > > > > > > > > what I want to do is like this,
>> > > > > > > > > > > > > Say I've a web page having hindi content with 5%
>> > > english
>> > > > > > > content.
>> > > > > > > > > > Then
>> > > > > > > > > > > > for
>> > > > > > > > > > > > > hindi I want to use the basic white space analyz=
er as
>> > > we
>> > > > > dont
>> > > > > > > > have
>> > > > > > > > > > > > stemmers
>> > > > > > > > > > > > > for this as I mentioned earlier and whereever en=
glish
>> > > > > appears
>> > > > > > I
>> > > > > > > > > want
>> > > > > > > > > > > > them
>> > > > > > > > > > > > > to
>> > > > > > > > > > > > > be stemmed tokenized etc[the standard process us=
ed
>> > for
>> > > > > > english
>> > > > > > > > > > > content].
>> > > > > > > > > > > > As
>> > > > > > > > > > > > > of now I'm using whitespace analyzer for the ful=
l
>> > > content
>> > > > > > which
>> > > > > > > > > > doesnot
>> > > > > > > > > > > > > support case folding, stemming etc for teh conte=
nt.
>> > So
>> > > if
>> > > > > > there
>> > > > > > > > is
>> > > > > > > > > an
>> > > > > > > > > > > > > english word say "Detection" indexed as such the=
n
>> > > > searching
>> > > > > > for
>> > > > > > > > > > > > detection
>> > > > > > > > > > > > > or
>> > > > > > > > > > > > > detect is not giving any results, which is the
>> > expected
>> > > > > > > behavior,
>> > > > > > > > > but
>> > > > > > > > > > I
>> > > > > > > > > > > > > want
>> > > > > > > > > > > > > this kind of queries to give results.
>> > > > > > > > > > > > > I hope I made it clear. Let me know any ideas on
>> > doing
>> > > > the
>> > > > > > > same.
>> > > > > > > > > And
>> > > > > > > > > > > one
>> > > > > > > > > > > > > more thing, I'm storing the full webpage content
>> > under
>> > > a
>> > > > > > single
>> > > > > > > > > > field,
>> > > > > > > > > > > I
>> > > > > > > > > > > > > hope this will not make any difference, right?
>> > > > > > > > > > > > > It seems I've to use language identifiers, but d=
o we
>> > > > really
>> > > > > > > need
>> > > > > > > > > > that?
>> > > > > > > > > > > > > Because we've only non-english content mixed wit=
h
>> > > > > english[and
>> > > > > > > not
>> > > > > > > > > > > french
>> > > > > > > > > > > > or
>> > > > > > > > > > > > > russian etc].
>> > > > > > > > > > > > >
>> > > > > > > > > > > > > What is the best way of approaching the problem?=
 Any
>> > > > > > thoughts!
>> > > > > > > > > > > > >
>> > > > > > > > > > > > > Thanks,
>> > > > > > > > > > > > > KK.
>> > > > > > > > > > > > >
>> > > > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
>> > > > > > rcmuir@gmail.com>
>> > > > > > > > > > wrote:
>> > > > > > > > > > > > >
>> > > > > > > > > > > > > > KK, is all of your latin script text actually
>> > > english?
>> > > > Is
>> > > > > > > there
>> > > > > > > > > > stuff
>> > > > > > > > > > > > > like
>> > > > > > > > > > > > > > german or french mixed in?
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > > > And for your non-english content (your example=
s
>> > have
>> > > > been
>> > > > > > > > indian
>> > > > > > > > > > > > writing
>> > > > > > > > > > > > > > systems), is it generally true that if you had
>> > > > > devanagari,
>> > > > > > > you
>> > > > > > > > > can
>> > > > > > > > > > > > assume
>> > > > > > > > > > > > > > its hindi? or is there stuff like marathi mixe=
d in?
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > > > Reason I say this is to invoke the right stemm=
ers,
>> > > you
>> > > > > > really
>> > > > > > > > > need
>> > > > > > > > > > > > some
>> > > > > > > > > > > > > > language detection, but perhaps in your case y=
ou
>> > can
>> > > > > cheat
>> > > > > > > and
>> > > > > > > > > > detect
>> > > > > > > > > > > > > this
>> > > > > > > > > > > > > > based on scripts...
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > > > Thanks,
>> > > > > > > > > > > > > > Robert
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
>> > > > > > > > dioxide.software@gmail.com>
>> > > > > > > > > > > > wrote:
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > > > > Hi All,
>> > > > > > > > > > > > > > > I'm indexing some non-english content. But t=
he
>> > page
>> > > > > also
>> > > > > > > > > contains
>> > > > > > > > > > > > > english
>> > > > > > > > > > > > > > > content. As of now I'm using WhitespaceAnaly=
zer
>> > for
>> > > > all
>> > > > > > > > content
>> > > > > > > > > > and
>> > > > > > > > > > > > I'm
>> > > > > > > > > > > > > > > storing the full webpage content under a sin=
gle
>> > > > filed.
>> > > > > > Now
>> > > > > > > we
>> > > > > > > > > > > > require
>> > > > > > > > > > > > > to
>> > > > > > > > > > > > > > > support case folding and stemmming for the
>> > english
>> > > > > > content
>> > > > > > > > > > > > intermingled
>> > > > > > > > > > > > > > > with
>> > > > > > > > > > > > > > > non-english content. I must metion that we d=
ont
>> > > have
>> > > > > > > stemming
>> > > > > > > > > and
>> > > > > > > > > > > > case
>> > > > > > > > > > > > > > > folding for these non-english content. I'm s=
tuck
>> > > with
>> > > > > > this.
>> > > > > > > > > Some
>> > > > > > > > > > > one
>> > > > > > > > > > > > do
>> > > > > > > > > > > > > > let
>> > > > > > > > > > > > > > > me know how to proceed for fixing this issue=
.
>> > > > > > > > > > > > > > >
>> > > > > > > > > > > > > > > Thanks,
>> > > > > > > > > > > > > > > KK.
>> > > > > > > > > > > > > > >
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > > > --
>> > > > > > > > > > > > > > Robert Muir
>> > > > > > > > > > > > > > rcmuir@gmail.com
>> > > > > > > > > > > > > >
>> > > > > > > > > > > > >
>> > > > > > > > > > > >
>> > > > > > > > > > > >
>> > > > > > > > > > > >
>> > > > > > > > > > > > --
>> > > > > > > > > > > > Robert Muir
>> > > > > > > > > > > > rcmuir@gmail.com
>> > > > > > > > > > >
>> > > > > > > > > > >
>> > > > > > > > > > >
>> > > > > > >
>> > > --------------------------------------------------------------------=
-
>> > > > > > > > > > > To unsubscribe, e-mail:
>> > > > > java-user-unsubscribe@lucene.apache.org
>> > > > > > > > > > > For additional commands, e-mail:
>> > > > > > java-user-help@lucene.apache.org
>> > > > > > > > > > >
>> > > > > > > > > > >
>> > > > > > > > > >
>> > > > > > > > > >
>> > > > > > > > > > --
>> > > > > > > > > > Robert Muir
>> > > > > > > > > > rcmuir@gmail.com
>> > > > > > > > > >
>> > > > > > > > >
>> > > > > > > >
>> > > > > > > >
>> > > > > > > >
>> > > > > > > > --
>> > > > > > > > Robert Muir
>> > > > > > > > rcmuir@gmail.com
>> > > > > > > >
>> > > > > > >
>> > > > > >
>> > > > > >
>> > > > > >
>> > > > > > --
>> > > > > > Robert Muir
>> > > > > > rcmuir@gmail.com
>> > > > > >
>> > > > >
>> > > >
>> > > >
>> > > >
>> > > > --
>> > > > Robert Muir
>> > > > rcmuir@gmail.com
>> > > >
>> > >
>> >
>> >
>> >
>> > --
>> > Robert Muir
>> > rcmuir@gmail.com
>> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 15:21:44 2009
Return-Path: <java-user-return-40633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90826 invoked from network); 5 Jun 2009 15:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 15:21:44 -0000
Received: (qmail 65755 invoked by uid 500); 5 Jun 2009 15:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65695 invoked by uid 500); 5 Jun 2009 15:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65685 invoked by uid 99); 5 Jun 2009 15:21:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 15:21:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 15:21:42 +0000
Received: by fxm3 with SMTP id 3so1710542fxm.5
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 08:21:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=nLawiYG7tEGTAEk5LsxzM0YY1sXDy2Sfouj1Wz7ZIgk=;
        b=W/AKeEcW0b5o7hTFyRA+INM2lENvCpymJfSObGtuLBcC+lhhOAlTMBI0w7U4LvKiwi
         HLNp9Dy9lfUOn5pORp9lzvpL0FeKChcbOkim9OsA+l5/oDzrsty83P9+fXIbw1bjR+qc
         o5O2RMmqjkSQX/4Hio3o+k7EkYC+eGVBG+e+A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=cK8qkRULzER+UnyVu0DYbbFV6MhwGO511RobgIrrmtHr9VEPky61lQqdYp2Y6a2C5s
         X8VJBBKoMZEh/NcuR02OWZvi7oOflT0Scd2SaFe8PE0VJsIwMLeKGWSV+87+9OczDtMj
         HJud8mbsNJV9otD2vmu31a2G2yjtqBRUVpYEU=
MIME-Version: 1.0
Received: by 10.86.36.11 with SMTP id j11mr3988488fgj.22.1244215282093; Fri, 
	05 Jun 2009 08:21:22 -0700 (PDT)
In-Reply-To: <23888815.post@talk.nabble.com>
References: <23876641.post@talk.nabble.com> <23888815.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 5 Jun 2009 16:21:02 +0100
Message-ID: <8c4e68610906050821i75b10732g84b3aa9931fa06b2@mail.gmail.com>
Subject: Re: Custom sorting!
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


One would indeed expect that JAHN would come before JOHNSON.  I can't
spot anything wrong with your code but it isn't all there and the
problem could lie with something not shown.

Why don't you cut it down to a nice short self-contained program or
test case and if that doesn't help you find the problem yourself, post
it here.  But keep it short and simple and with no external
references/dependencies.


--
Ian.


On Fri, Jun 5, 2009 at 3:02 PM, vanshi<nilu.thakur@gmail.com> wrote:
>
> Can somebody take a look in why I'm not getting the correct alphabetical
> order?
>
> I changed last_name field to be 'UN_TOKENIZED' and sorting on only last
> name, then network status. But with last name as 'J' in query, I am getti=
ng
> results like:
>
> JACOBSON
> JOHNSON
> JAHN
>
> I would expect 'JAHN' to come before 'johnson'.
>
> can somebody suggest wht's going wrong here.
>
> Vanshi
>
>
> vanshi wrote:
>>
>> I am doing custom sorting within lucene using overloaded
>> searcher.search(query, sort). First precedence is to sort based on 'last
>> name' and then on 'network status', where 'INN' is better than 'OUT'.
>>
>> Fields are stored in the indexes like this:
>>
>> FIRST_NAME(Field.Store.NO, Field.Index.NO_NORMS)
>> LAST_NAME_EXACT(Field.Store.NO, Field.Index.NO_NORMS)
>>
>> And analyzer used is 'keyword analyzer' on these fields. And the fields
>> are sorted with following lines.
>>
>> ArrayList<SortField> sorts =3D new ArrayList<SortField>();
>> sorts.add(new SortField("LAST_NAME_EXACT"));
>> sorts.add(new SortField(ProviderFieldInfo.NETWORK.toString(),
>> networkComparatorSource));
>> super.setSort(sorts.toArray(new SortField[sorts.size()]));
>>
>> Now, with the above line my expectation is to see 'last name' sorted
>> alphabatically and then if two 'last names' are same then 'network
>> status(INN/OUT)' must get precedence and if both 'network status' and
>> 'last name' are same then socre will decide the order. Is this expectati=
on
>> wrong??
>>
>> The result I'm getting is in this order: The query used is a prefix quer=
y,
>> where 'last name' entered is 'john' and first name is 'p'.
>>
>> JOHNSON, PETER A =A0 =A0 =A0INN
>> JOHNSON, PETER B =A0 =A0 =A0 =A0 =A0 =A0 =A0INN
>> JOHNSON, PEGGY A =A0 =A0 =A0OUT
>> JOHNSON, PHILLIP W =A0 =A0INN
>> JOHNSON-STUHR, PAMELA J =A0 =A0 =A0 OUT
>> JOHN, P G =A0 =A0 =A0 =A0 =A0 =A0 INN
>> JOHNSON, PAUL G =A0 =A0 =A0 =A0 =A0 =A0 =A0 INN
>> JOHNSON, PETER R =A0 =A0 =A0 =A0 =A0 =A0 =A0INN
>>
>> Can somebody take alook and see what should be done to get expected
>> results?
>>
>> Thanks,
>> Vanshi
>>
>>
>
> --
> View this message in context: http://www.nabble.com/Custom-sorting%21-tp2=
3876641p23888815.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 15:45:53 2009
Return-Path: <java-user-return-40634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98169 invoked from network); 5 Jun 2009 15:45:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 15:45:53 -0000
Received: (qmail 2434 invoked by uid 500); 5 Jun 2009 15:46:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2367 invoked by uid 500); 5 Jun 2009 15:46:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2357 invoked by uid 99); 5 Jun 2009 15:46:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 15:46:02 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dioxide.software@gmail.com designates 209.85.216.172 as permitted sender)
Received: from [209.85.216.172] (HELO mail-px0-f172.google.com) (209.85.216.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 15:45:51 +0000
Received: by pxi2 with SMTP id 2so131431pxi.29
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 08:45:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=/f21XMM4wTijXpzqVI9A6mw2ZvrPjGbB9xnVf05uzwY=;
        b=eJbtIH4OHgrkqD0mwO0B67CKmN9nXw2PcfrBHBmCwJE/mHfpKuX7+zec+WhmjnNL93
         cED3hn9CiJxhRwU8eylyy8LANCB5ZXwEqpohFS9bDdHhP1GQy0FWDwQDW97r3bOhD8sB
         pD7n10GDJTY5FKhkqSfQmKH6R1PEXGvZ416b4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=FiPqECA9SIn2QsAh/2miAVpfCzMZZKxvbMsKMRH3E73K3Rsmaim7DAFi04JpElwdKb
         RA6t60iC5XtM7wNATnfxE3WLVdlItVzXHZVr2eCuq48ZwN14r2jJo2o5cPsd79ckmE0H
         5rdlklvAh3xfjpkpI6BkOdaVLU6kzjejrlIb0=
MIME-Version: 1.0
Received: by 10.142.86.4 with SMTP id j4mr1387384wfb.111.1244216731582; Fri, 
	05 Jun 2009 08:45:31 -0700 (PDT)
In-Reply-To: <8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com> 
	<8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com> 
	<8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com> 
	<8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com> 
	<8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com> 
	<8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com> 
	<8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com> 
	<8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com> 
	<8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Fri, 5 Jun 2009 21:15:11 +0530
Message-ID: <8db6d74a0906050845m3ac5b210idd243d38eba8fece@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e9117d4f42d9046b9bc8d3
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e9117d4f42d9046b9bc8d3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Robert, I tried to use the worddelimiterfilterfactory as well, but I faced
the same problem[I saw solr using the factory instead of the filter]. I
think I sould try using the first option[copyting that to local directory]
and use it with the options you mentioned. I'll try it out and will post it
here.

Thanks,
KK.
On Fri, Jun 5, 2009 at 7:37 PM, Robert Muir <rcmuir@gmail.com> wrote:

> kk an easier solution to your first problem is to use
> worddelimiterfilterfactory if possible... you can get an instance of
> worddelimiter filter from that.
>
> thanks,
> robert
>
> On Fri, Jun 5, 2009 at 10:06 AM, Robert Muir<rcmuir@gmail.com> wrote:
> > kk as for your first issue, that WordDelimiterFilter is package
> > protected, one option is to make a copy of the code and change the
> > class declaration to public.
> > the other option is to put your entire analyzer in
> > 'org.apache.solr.analysis' package so that you can access it...
> >
> > for the 2nd issue, yes you need to supply some options to it. the
> > default options solr applies to type 'text' seemed to work well for me
> > with indic:
> >
> > {splitOnCaseChange=1, generateNumberParts=1, catenateWords=1,
> > generateWordParts=1, catenateAll=0, catenateNumbers=1}
> >
> > On Fri, Jun 5, 2009 at 9:12 AM, KK <dioxide.software@gmail.com> wrote:
> >>
> >> Thanks Robert. There is one problem though, I'm able to plugin the word
> >> delimiter filter from solr-nightly jar file. When I tried to do
> something
> >> like,
> >>  TokenStream ts = new WhitespaceTokenizer(reader);
> >>   ts = new WordDelimiterFilter(ts);
> >>   ts = new PorterStemmerFilter(ts);
> >>   ...rest as in the last mail...
> >>
> >> It gave me an error saying that
> >>
> >> org.apache.solr.analysis.WordDelimiterFilter is not public in
> >> org.apache.solr.analysis; cannot be accessed from outside package
> >> import org.apache.solr.analysis.WordDelimiterFilter;
> >>                               ^
> >> solrSearch/IndicAnalyzer.java:38: cannot find symbol
> >> symbol  : class WordDelimiterFilter
> >> location: class solrSearch.IndicAnalyzer
> >>    ts = new WordDelimiterFilter(ts);
> >>             ^
> >> 2 errors
> >>
> >> Then i tried to see the code for worddelimitefiter from solrnightly src
> and
> >> found that there are many deprecated constructors though they require a
> lot
> >> of parameters alongwith tokenstream. I went through the solr wiki for
> >> worddelimiterfilterfactory here,
> >>
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b83870ca7890cd73b193cefed83c283339089
> >> and say that there also its specified that we've to mention the
> parameters
> >> and both are different for indexing and querying.
> >> I'm kind of stuck here, how do I make use of worddelimiterfilter in my
> >> custom analyzer, I've to use it anyway.
> >> In my code I've to make use of worddelimiterfilter and not
> >> worddelimiterfilterfactory, right? I don't know whats the use of the
> other
> >> one. Anyway can you guide me getting rid of the above error. And yes
> I'll
> >> change the order of applying the filters as you said.
> >>
> >> Thanks,
> >> KK.
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >> On Fri, Jun 5, 2009 at 5:48 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >>
> >> > KK, you got the right idea.
> >> >
> >> > though I think you might want to change the order, move the stopfilter
> >> > before the porter stem filter... otherwise it might not work
> correctly.
> >> >
> >> > On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com>
> wrote:
> >> >
> >> > > Thanks Robert. This is exactly what I did and  its working but
> delimiter
> >> > is
> >> > > missing I'm going to add that from solr-nightly.jar
> >> > >
> >> > > /**
> >> > >  * Analyzer for Indian language.
> >> > >  */
> >> > > public class IndicAnalyzer extends Analyzer {
> >> > >  public TokenStream tokenStream(String fieldName, Reader reader) {
> >> > >     TokenStream ts = new WhitespaceTokenizer(reader);
> >> > >    ts = new PorterStemFilter(ts);
> >> > >    ts = new LowerCaseFilter(ts);
> >> > >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >> > >    return ts;
> >> > >  }
> >> > > }
> >> > >
> >> > > Its able to do stemming/case-folding and supports search for both
> english
> >> > > and indic texts. let me try out the delimiter. Will update you on
> that.
> >> > >
> >> > > Thanks a lot.
> >> > > KK
> >> > >
> >> > > On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> >> > >
> >> > > > i think you are on the right track... once you build your
> analyzer, put
> >> > > it
> >> > > > in your classpath and play around with it in luke and see if it
> does
> >> > what
> >> > > > you want.
> >> > > >
> >> > > > On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com>
> wrote:
> >> > > >
> >> > > > > Hi Robert,
> >> > > > > This is what I copied from ThaiAnalyzer @ lucene contrib
> >> > > > >
> >> > > > > public class ThaiAnalyzer extends Analyzer {
> >> > > > >  public TokenStream tokenStream(String fieldName, Reader reader)
> {
> >> > > > >      TokenStream ts = new StandardTokenizer(reader);
> >> > > > >    ts = new StandardFilter(ts);
> >> > > > >    ts = new ThaiWordFilter(ts);
> >> > > > >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >> > > > >    return ts;
> >> > > > >  }
> >> > > > > }
> >> > > > >
> >> > > > > Now as you said, I've to use whitespacetokenizer
> >> > > > > withworddelimitefilter[solr
> >> > > > > nightly.jar] stop wordremoval, porter stemmer etc , so it is
> >> > something
> >> > > > like
> >> > > > > this,
> >> > > > > public class IndicAnalyzer extends Analyzer {
> >> > > > >  public TokenStream tokenStream(String fieldName, Reader reader)
> {
> >> > > > >   TokenStream ts = new WhiteSpaceTokenizer(reader);
> >> > > > >   ts = new WordDelimiterFilter(ts);
> >> > > > >   ts = new LowerCaseFilter(ts);
> >> > > > >   ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS)   //
> >> > english
> >> > > > > stop filter, is this the default one?
> >> > > > >   ts = new PorterFilter(ts);
> >> > > > >   return ts;
> >> > > > >  }
> >> > > > > }
> >> > > > >
> >> > > > > Does this sound OK? I think it will do the job...let me try it
> out..
> >> > > > > I dont need custom filter as per my requirement, at least not
> for
> >> > these
> >> > > > > basic things I'm doing? I think so...
> >> > > > >
> >> > > > > Thanks,
> >> > > > > KK.
> >> > > > >
> >> > > > >
> >> > > > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com>
> >> > wrote:
> >> > > > >
> >> > > > > > KK well you can always get some good examples from the lucene
> >> > contrib
> >> > > > > > codebase.
> >> > > > > > For example, look at the DutchAnalyzer, especially:
> >> > > > > >
> >> > > > > > TokenStream tokenStream(String fieldName, Reader reader)
> >> > > > > >
> >> > > > > > See how it combines a specified tokenizer with various
> filters?
> >> > this
> >> > > is
> >> > > > > > what
> >> > > > > > you want to do, except of course you want to use different
> >> > tokenizer
> >> > > > and
> >> > > > > > filters.
> >> > > > > >
> >> > > > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <
> dioxide.software@gmail.com>
> >> > > wrote:
> >> > > > > >
> >> > > > > > > Thanks Muir.
> >> > > > > > > Thanks for letting me know that I dont need language
> identifiers.
> >> > > > > > >  I'll have a look and will try to write the analyzer. For my
> case
> >> > I
> >> > > > > think
> >> > > > > > > it
> >> > > > > > > wont be that difficult.
> >> > > > > > > BTW, can you point me to some sample codes/tutorials writing
> >> > custom
> >> > > > > > > analyzers. I could not find something in LIA2ndEdn. Is
> something
> >> > > > htere?
> >> > > > > > do
> >> > > > > > > let me know.
> >> > > > > > >
> >> > > > > > > Thanks,
> >> > > > > > > KK.
> >> > > > > > >
> >> > > > > > >
> >> > > > > > >
> >> > > > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <
> rcmuir@gmail.com>
> >> > > > wrote:
> >> > > > > > >
> >> > > > > > > > KK, for your case, you don't really need to go to the
> effort of
> >> > > > > > detecting
> >> > > > > > > > whether fragments are english or not.
> >> > > > > > > > Because the English stemmers in lucene will not modify
> your
> >> > Indic
> >> > > > > text,
> >> > > > > > > and
> >> > > > > > > > neither will the LowerCaseFilter.
> >> > > > > > > >
> >> > > > > > > > what you want to do is create a custom analyzer that works
> like
> >> > > > this
> >> > > > > > > >
> >> > > > > > > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr
> >> > nightly
> >> > > > > jar],
> >> > > > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> >> > > > > > > >
> >> > > > > > > > Thanks,
> >> > > > > > > > Robert
> >> > > > > > > >
> >> > > > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <
> dioxide.software@gmail.com
> >> > >
> >> > > > > wrote:
> >> > > > > > > >
> >> > > > > > > > > Thank you all.
> >> > > > > > > > > To be frank I was using Solr in the begining half a
> month
> >> > ago.
> >> > > > The
> >> > > > > > > > > problem[rather bug] with solr was creation of new index
> on
> >> > the
> >> > > > fly.
> >> > > > > > > > Though
> >> > > > > > > > > they have a restful method for teh same, but it was not
> >> > > working.
> >> > > > If
> >> > > > > I
> >> > > > > > > > > remember properly one of Solr commiter "Noble Paul"[I
> dont
> >> > know
> >> > > > his
> >> > > > > > > real
> >> > > > > > > > > name] was trying to help me. I tried many nightly builds
> and
> >> > > > > spending
> >> > > > > > a
> >> > > > > > > > > couple of days stuck at that made me think of lucene and
> I
> >> > > > switched
> >> > > > > > to
> >> > > > > > > > it.
> >> > > > > > > > > Now after working with lucene which gives you full
> control of
> >> > > > > > > everything
> >> > > > > > > > I
> >> > > > > > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is
> >> > similar
> >> > > > to
> >> > > > > > > > > Window$:Linux, its my view only, though]. Coming back to
> the
> >> > > > point
> >> > > > > as
> >> > > > > > > Uwe
> >> > > > > > > > > mentioned that we can do the same thing in lucene as
> well,
> >> > what
> >> > > > is
> >> > > > > > > > > available
> >> > > > > > > > > in Solr, Solr is based on Lucene only, right?
> >> > > > > > > > > I request Uwe to give me some more ideas on using the
> >> > analyzers
> >> > > > > from
> >> > > > > > > solr
> >> > > > > > > > > that will do the job for me, handling a mix of both
> english
> >> > and
> >> > > > > > > > non-english
> >> > > > > > > > > content.
> >> > > > > > > > > Muir, can you give me a bit detail description of how to
> use
> >> > > the
> >> > > > > > > > > WordDelimiteFilter to do my job.
> >> > > > > > > > > On a side note, I was thingking of writing a simple
> analyzer
> >> > > that
> >> > > > > > will
> >> > > > > > > do
> >> > > > > > > > > the following,
> >> > > > > > > > > #. If the webpage fragment is non-english[for me its
> some
> >> > > indian
> >> > > > > > > > language]
> >> > > > > > > > > then index them as such, no stemming/ stop word removal
> to
> >> > > begin
> >> > > > > > with.
> >> > > > > > > As
> >> > > > > > > > I
> >> > > > > > > > > know its in UCN unicode something like
> >> > > > > \u0021\u0012\u34ae\u0031[just
> >> > > > > > a
> >> > > > > > > > > sample]
> >> > > > > > > > > # If the fragment is english then apply standard
> anlyzing
> >> > > process
> >> > > > > for
> >> > > > > > > > > english content. I've not thought of quering in the same
> way
> >> > as
> >> > > > of
> >> > > > > > now
> >> > > > > > > > i.e
> >> > > > > > > > > mix of non-english and engish words.
> >> > > > > > > > > Now to get all this,
> >> > > > > > > > >  #1. I need some sort of way which will let me know if
> the
> >> > > > content
> >> > > > > is
> >> > > > > > > > > english or not. If not english just add the tokens to
> the
> >> > > > document.
> >> > > > > > Do
> >> > > > > > > we
> >> > > > > > > > > really need language identifiers, as i dont have any
> other
> >> > > > content
> >> > > > > > that
> >> > > > > > > > > uses
> >> > > > > > > > > the same script as english other than those \u1234
> things for
> >> > > my
> >> > > > > > indian
> >> > > > > > > > > language content. Any smart hack/trick for the same?
> >> > > > > > > > >  #2. If the its english apply all normal process and add
> the
> >> > > > > stemmed
> >> > > > > > > > token
> >> > > > > > > > > to document.
> >> > > > > > > > > For all this I was thinking of iterating earch word of
> the
> >> > web
> >> > > > page
> >> > > > > > and
> >> > > > > > > > > apply the above procedure. And finallyadd  the newly
> created
> >> > > > > document
> >> > > > > > > to
> >> > > > > > > > > the
> >> > > > > > > > > index.
> >> > > > > > > > >
> >> > > > > > > > > I would like some one to guide me in this direction. I'm
> >> > pretty
> >> > > > > > people
> >> > > > > > > > must
> >> > > > > > > > > have done similar/same thing earlier, I request them to
> guide
> >> > > me/
> >> > > > > > point
> >> > > > > > > > me
> >> > > > > > > > > to some tutorials for the same.
> >> > > > > > > > > Else help me out writing a custom analyzer only if thats
> not
> >> > > > going
> >> > > > > to
> >> > > > > > > be
> >> > > > > > > > > too
> >> > > > > > > > > complex. LOL, I'm a new user to lucene and know basics
> of
> >> > Java
> >> > > > > > coding.
> >> > > > > > > > > Thank you very much.
> >> > > > > > > > >
> >> > > > > > > > > --KK.
> >> > > > > > > > >
> >> > > > > > > > >
> >> > > > > > > > >
> >> > > > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <
> >> > rcmuir@gmail.com>
> >> > > > > > wrote:
> >> > > > > > > > >
> >> > > > > > > > > > yes this is true. for starters KK, might be good to
> startup
> >> > > > solr
> >> > > > > > and
> >> > > > > > > > look
> >> > > > > > > > > > at
> >> > > > > > > > > >
> http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> >> > > > > > > > > >
> >> > > > > > > > > > if you want to stick with lucene, the
> WordDelimiterFilter
> >> > is
> >> > > > the
> >> > > > > > > piece
> >> > > > > > > > > you
> >> > > > > > > > > > will want for your text, mainly for punctuation but
> also
> >> > for
> >> > > > > format
> >> > > > > > > > > > characters such as ZWJ/ZWNJ.
> >> > > > > > > > > >
> >> > > > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <
> >> > > uwe@thetaphi.de
> >> > > > >
> >> > > > > > > wrote:
> >> > > > > > > > > >
> >> > > > > > > > > > > You can also re-use the solr analyzers, as far as I
> found
> >> > > > out.
> >> > > > > > > There
> >> > > > > > > > is
> >> > > > > > > > > > an
> >> > > > > > > > > > > issue in jIRA/discussion on java-dev to merge them.
> >> > > > > > > > > > >
> >> > > > > > > > > > > -----
> >> > > > > > > > > > > Uwe Schindler
> >> > > > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> >> > > > > > > > > > > http://www.thetaphi.de
> >> > > > > > > > > > > eMail: uwe@thetaphi.de
> >> > > > > > > > > > >
> >> > > > > > > > > > >
> >> > > > > > > > > > > > -----Original Message-----
> >> > > > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> >> > > > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> >> > > > > > > > > > > > To: java-user@lucene.apache.org
> >> > > > > > > > > > > > Subject: Re: How to support stemming and case
> folding
> >> > for
> >> > > > > > english
> >> > > > > > > > > > content
> >> > > > > > > > > > > > mixed with non-english content?
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > KK, ok, so you only really want to stem the
> english.
> >> > This
> >> > > > is
> >> > > > > > > good.
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > Is it possible for you to consider using solr?
> solr's
> >> > > > default
> >> > > > > > > > > analyzer
> >> > > > > > > > > > > for
> >> > > > > > > > > > > > type 'text' will be good for your case. it will do
> the
> >> > > > > > following
> >> > > > > > > > > > > > 1. tokenize on whitespace
> >> > > > > > > > > > > > 2. handle both indian language and english
> punctuation
> >> > > > > > > > > > > > 3. lowercase the english.
> >> > > > > > > > > > > > 4. stem the english.
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > try a nightly build,
> >> > > > > > > > > > >
> http://people.apache.org/builds/lucene/solr/nightly/
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
> >> > > > > dioxide.software@gmail.com
> >> > > > > > >
> >> > > > > > > > > wrote:
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > > Muir, thanks for your response.
> >> > > > > > > > > > > > > I'm indexing indian language web pages which has
> got
> >> > > > > descent
> >> > > > > > > > amount
> >> > > > > > > > > > of
> >> > > > > > > > > > > > > english content mixed with therein. For the time
> >> > being
> >> > > > I'm
> >> > > > > > not
> >> > > > > > > > > going
> >> > > > > > > > > > to
> >> > > > > > > > > > > > use
> >> > > > > > > > > > > > > any stemmers as we don't have standard stemmers
> for
> >> > > > indian
> >> > > > > > > > > languages
> >> > > > > > > > > > .
> >> > > > > > > > > > > > So
> >> > > > > > > > > > > > > what I want to do is like this,
> >> > > > > > > > > > > > > Say I've a web page having hindi content with 5%
> >> > > english
> >> > > > > > > content.
> >> > > > > > > > > > Then
> >> > > > > > > > > > > > for
> >> > > > > > > > > > > > > hindi I want to use the basic white space
> analyzer as
> >> > > we
> >> > > > > dont
> >> > > > > > > > have
> >> > > > > > > > > > > > stemmers
> >> > > > > > > > > > > > > for this as I mentioned earlier and whereever
> english
> >> > > > > appears
> >> > > > > > I
> >> > > > > > > > > want
> >> > > > > > > > > > > > them
> >> > > > > > > > > > > > > to
> >> > > > > > > > > > > > > be stemmed tokenized etc[the standard process
> used
> >> > for
> >> > > > > > english
> >> > > > > > > > > > > content].
> >> > > > > > > > > > > > As
> >> > > > > > > > > > > > > of now I'm using whitespace analyzer for the
> full
> >> > > content
> >> > > > > > which
> >> > > > > > > > > > doesnot
> >> > > > > > > > > > > > > support case folding, stemming etc for teh
> content.
> >> > So
> >> > > if
> >> > > > > > there
> >> > > > > > > > is
> >> > > > > > > > > an
> >> > > > > > > > > > > > > english word say "Detection" indexed as such
> then
> >> > > > searching
> >> > > > > > for
> >> > > > > > > > > > > > detection
> >> > > > > > > > > > > > > or
> >> > > > > > > > > > > > > detect is not giving any results, which is the
> >> > expected
> >> > > > > > > behavior,
> >> > > > > > > > > but
> >> > > > > > > > > > I
> >> > > > > > > > > > > > > want
> >> > > > > > > > > > > > > this kind of queries to give results.
> >> > > > > > > > > > > > > I hope I made it clear. Let me know any ideas on
> >> > doing
> >> > > > the
> >> > > > > > > same.
> >> > > > > > > > > And
> >> > > > > > > > > > > one
> >> > > > > > > > > > > > > more thing, I'm storing the full webpage content
> >> > under
> >> > > a
> >> > > > > > single
> >> > > > > > > > > > field,
> >> > > > > > > > > > > I
> >> > > > > > > > > > > > > hope this will not make any difference, right?
> >> > > > > > > > > > > > > It seems I've to use language identifiers, but
> do we
> >> > > > really
> >> > > > > > > need
> >> > > > > > > > > > that?
> >> > > > > > > > > > > > > Because we've only non-english content mixed
> with
> >> > > > > english[and
> >> > > > > > > not
> >> > > > > > > > > > > french
> >> > > > > > > > > > > > or
> >> > > > > > > > > > > > > russian etc].
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > > > What is the best way of approaching the problem?
> Any
> >> > > > > > thoughts!
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > > > Thanks,
> >> > > > > > > > > > > > > KK.
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> >> > > > > > rcmuir@gmail.com>
> >> > > > > > > > > > wrote:
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > > > > KK, is all of your latin script text actually
> >> > > english?
> >> > > > Is
> >> > > > > > > there
> >> > > > > > > > > > stuff
> >> > > > > > > > > > > > > like
> >> > > > > > > > > > > > > > german or french mixed in?
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > And for your non-english content (your
> examples
> >> > have
> >> > > > been
> >> > > > > > > > indian
> >> > > > > > > > > > > > writing
> >> > > > > > > > > > > > > > systems), is it generally true that if you had
> >> > > > > devanagari,
> >> > > > > > > you
> >> > > > > > > > > can
> >> > > > > > > > > > > > assume
> >> > > > > > > > > > > > > > its hindi? or is there stuff like marathi
> mixed in?
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > Reason I say this is to invoke the right
> stemmers,
> >> > > you
> >> > > > > > really
> >> > > > > > > > > need
> >> > > > > > > > > > > > some
> >> > > > > > > > > > > > > > language detection, but perhaps in your case
> you
> >> > can
> >> > > > > cheat
> >> > > > > > > and
> >> > > > > > > > > > detect
> >> > > > > > > > > > > > > this
> >> > > > > > > > > > > > > > based on scripts...
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > Thanks,
> >> > > > > > > > > > > > > > Robert
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> >> > > > > > > > dioxide.software@gmail.com>
> >> > > > > > > > > > > > wrote:
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > > Hi All,
> >> > > > > > > > > > > > > > > I'm indexing some non-english content. But
> the
> >> > page
> >> > > > > also
> >> > > > > > > > > contains
> >> > > > > > > > > > > > > english
> >> > > > > > > > > > > > > > > content. As of now I'm using
> WhitespaceAnalyzer
> >> > for
> >> > > > all
> >> > > > > > > > content
> >> > > > > > > > > > and
> >> > > > > > > > > > > > I'm
> >> > > > > > > > > > > > > > > storing the full webpage content under a
> single
> >> > > > filed.
> >> > > > > > Now
> >> > > > > > > we
> >> > > > > > > > > > > > require
> >> > > > > > > > > > > > > to
> >> > > > > > > > > > > > > > > support case folding and stemmming for the
> >> > english
> >> > > > > > content
> >> > > > > > > > > > > > intermingled
> >> > > > > > > > > > > > > > > with
> >> > > > > > > > > > > > > > > non-english content. I must metion that we
> dont
> >> > > have
> >> > > > > > > stemming
> >> > > > > > > > > and
> >> > > > > > > > > > > > case
> >> > > > > > > > > > > > > > > folding for these non-english content. I'm
> stuck
> >> > > with
> >> > > > > > this.
> >> > > > > > > > > Some
> >> > > > > > > > > > > one
> >> > > > > > > > > > > > do
> >> > > > > > > > > > > > > > let
> >> > > > > > > > > > > > > > > me know how to proceed for fixing this
> issue.
> >> > > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > > Thanks,
> >> > > > > > > > > > > > > > > KK.
> >> > > > > > > > > > > > > > >
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > --
> >> > > > > > > > > > > > > > Robert Muir
> >> > > > > > > > > > > > > > rcmuir@gmail.com
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > >
> >> > > > > > > > > > > >
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > --
> >> > > > > > > > > > > > Robert Muir
> >> > > > > > > > > > > > rcmuir@gmail.com
> >> > > > > > > > > > >
> >> > > > > > > > > > >
> >> > > > > > > > > > >
> >> > > > > > >
> >> > >
> ---------------------------------------------------------------------
> >> > > > > > > > > > > To unsubscribe, e-mail:
> >> > > > > java-user-unsubscribe@lucene.apache.org
> >> > > > > > > > > > > For additional commands, e-mail:
> >> > > > > > java-user-help@lucene.apache.org
> >> > > > > > > > > > >
> >> > > > > > > > > > >
> >> > > > > > > > > >
> >> > > > > > > > > >
> >> > > > > > > > > > --
> >> > > > > > > > > > Robert Muir
> >> > > > > > > > > > rcmuir@gmail.com
> >> > > > > > > > > >
> >> > > > > > > > >
> >> > > > > > > >
> >> > > > > > > >
> >> > > > > > > >
> >> > > > > > > > --
> >> > > > > > > > Robert Muir
> >> > > > > > > > rcmuir@gmail.com
> >> > > > > > > >
> >> > > > > > >
> >> > > > > >
> >> > > > > >
> >> > > > > >
> >> > > > > > --
> >> > > > > > Robert Muir
> >> > > > > > rcmuir@gmail.com
> >> > > > > >
> >> > > > >
> >> > > >
> >> > > >
> >> > > >
> >> > > > --
> >> > > > Robert Muir
> >> > > > rcmuir@gmail.com
> >> > > >
> >> > >
> >> >
> >> >
> >> >
> >> > --
> >> > Robert Muir
> >> > rcmuir@gmail.com
> >> >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e9117d4f42d9046b9bc8d3--

From java-user-return-40635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 05 17:15:34 2009
Return-Path: <java-user-return-40635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23903 invoked from network); 5 Jun 2009 17:15:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jun 2009 17:15:34 -0000
Received: (qmail 48477 invoked by uid 500); 5 Jun 2009 17:15:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48396 invoked by uid 500); 5 Jun 2009 17:15:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48385 invoked by uid 99); 5 Jun 2009 17:15:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 17:15:44 +0000
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [151.190.254.12] (HELO edge.itt.com) (151.190.254.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jun 2009 17:15:36 +0000
Received: from fwexhub3.itt.net (10.32.76.113) by edge.itt.com (10.32.16.12)
 with Microsoft SMTP Server (TLS) id 8.1.358.0; Fri, 5 Jun 2009 13:14:49 -0400
Received: from IIWCBO-EHUB1.iiw.de.ittind.com (10.244.2.24) by
 fwexhub3.itt.net (10.32.76.113) with Microsoft SMTP Server (TLS) id
 8.1.358.0; Fri, 5 Jun 2009 13:15:31 -0400
Received: from iiwcbo-emb1.iiw.de.ittind.com ([10.244.2.29]) by
 IIWCBO-Ehub1.iiw.de.ittind.com ([::1]) with mapi; Fri, 5 Jun 2009 13:15:30
 -0400
From: "Newman, Billy" <Billy.Newman@itt.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Fri, 5 Jun 2009 13:15:13 -0400
Subject: Debugging file lock problem
Thread-Topic: Debugging file lock problem
Thread-Index: AcnmATAGu3Igyy/6TemCLhncfAotdA==
Message-ID: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA2D368AB849@IIWCBO-EMB1.iiw.de.ittind.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_F0DB6EA8DC0F594B83F2CA60C7E4E8BA2D368AB849IIWCBOEMB1iiw_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_F0DB6EA8DC0F594B83F2CA60C7E4E8BA2D368AB849IIWCBOEMB1iiw_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am having a problem where I am getting lock timeouts when trying to write=
 to my index file.  It would be nice if I could turn on logging to see whic=
h server/application has the lock and when.  Is there a way to see the lock=
 information without changing code?

Thanks,
Billy

________________________________
This e-mail and any files transmitted with it may be proprietary and are in=
tended solely for the use of the individual or entity to whom they are addr=
essed. If you have received this e-mail in error please notify the sender.
Please note that any views or opinions presented in this e-mail are solely =
those of the author and do not necessarily represent those of ITT Corporati=
on. The recipient should check this e-mail and any attachments for the pres=
ence of viruses. ITT accepts no liability for any damage caused by any viru=
s transmitted by this e-mail.

--_000_F0DB6EA8DC0F594B83F2CA60C7E4E8BA2D368AB849IIWCBOEMB1iiw_--

From java-user-return-40636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 06 01:31:08 2009
Return-Path: <java-user-return-40636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6078 invoked from network); 6 Jun 2009 01:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jun 2009 01:31:08 -0000
Received: (qmail 68246 invoked by uid 500); 6 Jun 2009 01:31:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68160 invoked by uid 500); 6 Jun 2009 01:31:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68150 invoked by uid 99); 6 Jun 2009 01:31:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 01:31:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of listanand@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 01:31:07 +0000
Received: by yw-out-2324.google.com with SMTP id 2so888058ywt.5
        for <java-user@lucene.apache.org>; Fri, 05 Jun 2009 18:30:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=2nW1fr6PAXYBlWhMg4vEIRRzMUeFKbCq+pT4ZXy3vFo=;
        b=JsUeuA+lOARrcMWTSXBCpjak6Y6OGw7hRkEHCJobFLMF2dFwn19/jt9Mjhz2EHdHh9
         PKzRi+ilo6QjO70WW37KVorkksPb5GF52101icnUTHQUBaazgm2PRmWyK+i4YOSFKGso
         qBWmV/Q54WNwgVLiEJBg6LhwAGHzfsKhB28yE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=iuBI9MWtGY6welYipsQ69TCP+7hjB8UQMDHk+muRmSGCQhJI7jKRG/yILSObHkgeOc
         TbVXzTwpZ6y6C8FBsL9NwUb3R3SzvWLi1QSFSJkRZjKpoUvLKxOqOMaGf2LDuyjgB5jf
         2h79YNdL573/9VJ2x1gFzDPtM3lN9cV08UlqU=
MIME-Version: 1.0
Received: by 10.231.35.13 with SMTP id n13mr1124019ibd.24.1244251845925; Fri, 
	05 Jun 2009 18:30:45 -0700 (PDT)
In-Reply-To: <4A27134C.50607@littlebunch.com>
References: <80152b9d0906031603t743c464ao49159f9c98f269ef@mail.gmail.com>
	 <4A27134C.50607@littlebunch.com>
Date: Fri, 5 Jun 2009 18:30:45 -0700
Message-ID: <80152b9d0906051830j62f561c2vbefbc5c4a80e764b@mail.gmail.com>
Subject: Re: Lucene Website Integration
From: " \	listanand@gmail.com" <listanand@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Gary,

Yes, that certainly helped. Thanks for your reply.

Personally for me, it is interesting to hear about Grails, Ruby etc. I
usually only see folks using PHP, CGI etc. But, maybe it's just me. I
felt like I was being a little anachronistic in using JSP/Servlets.

Thanks again.
Anand



On Wed, Jun 3, 2009 at 5:20 PM, Gary Moore <gary@littlebunch.com> wrote:
>
> I would suggest you take a look at Solr -- http://lucene.apache.org/solr =
-- which requires essentially no Java knowledge to use. =A0It has a Python =
client which at the very least might help with the learning curve. =A0 If y=
ou want to try an alternative to JSP/Servlets for your web framework, there=
's Grails/Groovy (http://grails.org/) which for me is a heck of a lot of fu=
n. =A0 BTW, there's a Grails plugin available which uses =A0Compass/Lucene.=
 =A0 Who knows, it might be enough for you. =A0 A lot of folks are using Ra=
ils/Ruby/Solr which is also worth checking out.
> HTH
> Gary
> listanand@gmail.com wrote:
>>
>> Hi all,
>>
>> I need to develop a website that allows for searching and browsing the
>> underlying documents collection. I am going to be using Lucene as the
>> underlying search engine. I am however not very familiar with web
>> development, and am new to Lucene as well. I have used JSP/Servlets
>> before, and since Lucene is written in Java I am guessing that that
>> will be the way forward this time as well.
>>
>> My question is, is using JSP/Servlet an appropriate approach for what
>> I am trying to do? Also, I am more familiar with Perl and Python than
>> with Java. So, should I consider using any other Lucene implementation
>> (Plucene/PyLucene) etc.and go the CGI route instead?
>>
>> Thanks in advance.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 06 08:14:40 2009
Return-Path: <java-user-return-40637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40918 invoked from network); 6 Jun 2009 08:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jun 2009 08:14:39 -0000
Received: (qmail 26283 invoked by uid 500); 6 Jun 2009 08:14:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26186 invoked by uid 500); 6 Jun 2009 08:14:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26176 invoked by uid 99); 6 Jun 2009 08:14:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 08:14:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yeminjiao@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 08:14:38 +0000
Received: by rv-out-0506.google.com with SMTP id l9so911939rvb.5
        for <java-user@lucene.apache.org>; Sat, 06 Jun 2009 01:14:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=db/RU2PTqQYOfTmiFe4cOpFmf5tBl5BaXLB4CWdxAWE=;
        b=L8x9gsvyw092AdbtoRLDtTrIaVDQ8/ytwLxBTX64eijy9aZbCaHVlZVJjGcSEzvqgp
         +ny9NDvGJ8i+tFCZWDfUfOgm5R5RFPSS+7ESEdSevYxujEPx38sr5TKncwcOgjNmSzpn
         b1U/80wAgcdi+1E8ZvMk2mizEbsrdBh0JZniE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ia8ADlhS9f6e6qqkMHlcexjHfq1QYMg6BoGuWpRBhNTt1/LUTmD1n0BQKv1Ffhus9P
         yIMu5wAQ8WhP8QU98LMPC8eW+ybu2hm5kpO7Q3UayKdiM116asGpKtBDADgXZlhnsK4T
         Gevj1Y5fEZstLD8mHJxz8PcdRkgx8WTB8yYLc=
MIME-Version: 1.0
Received: by 10.142.99.13 with SMTP id w13mr1609313wfb.18.1244276057074; Sat, 
	06 Jun 2009 01:14:17 -0700 (PDT)
In-Reply-To: <4d19a3630906050335sac1f8b3xb0163484e807fa0@mail.gmail.com>
References: <4d19a3630906040503t166bf687i8475c35a0547badc@mail.gmail.com>
	 <488992.27252.qm@web50301.mail.re2.yahoo.com>
	 <c8c898a40906041830i14bbcab4p6aaea3f4bd50507a@mail.gmail.com>
	 <4d19a3630906050335sac1f8b3xb0163484e807fa0@mail.gmail.com>
Date: Sat, 6 Jun 2009 16:14:17 +0800
Message-ID: <c8c898a40906060114r4f2760edoc3aac8599fce454@mail.gmail.com>
Subject: Re: P2P Lucene
From: Ye Minjiao <yeminjiao@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502c913626aef046ba9985f
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502c913626aef046ba9985f
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Your idea about leveraging a user's current networks is very good.

That could make the data sharing be more specific, more focus on some common
interests shared in those networks.

I'll write to you off-list.

Ye Minjiao
eO0o.

Steven Wright<http://www.brainyquote.com/quotes/authors/s/steven_wright.html>
- "It's a small world, but I wouldn't want to have to paint it."

On Fri, Jun 5, 2009 at 6:35 PM, Shashi Kant <shashi.mit@gmail.com> wrote:

> Thanks for the up Otis. I will give this some more thought, prototype
> some, and possibly put in a proposal for the Apache Incubator.
>
> Ye,
>
> I am not aware of Sixearch, but there are several P2P applications
> e.g. WiredReach, Grub, Neurogrid etc.
> However, my idea is quite a bit different from the existing apps.
>
> It differs because it leverages a user's current networks (IM buddies,
> social networks, Organizations/Institutes etc.)  instead of
> any-to-any. There are several other differences, which I will flesh
> out once I have given it more thought.
>
>
> thanks for responding and email me off-list if you wish.
>
> shashi
> skant@alum.mit.edu
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502c913626aef046ba9985f--

From java-user-return-40638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 06 13:42:57 2009
Return-Path: <java-user-return-40638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40314 invoked from network); 6 Jun 2009 13:42:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jun 2009 13:42:55 -0000
Received: (qmail 83656 invoked by uid 500); 6 Jun 2009 13:43:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83588 invoked by uid 500); 6 Jun 2009 13:43:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83578 invoked by uid 99); 6 Jun 2009 13:43:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 13:43:04 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dioxide.software@gmail.com designates 209.85.216.190 as permitted sender)
Received: from [209.85.216.190] (HELO mail-px0-f190.google.com) (209.85.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 13:42:53 +0000
Received: by pxi28 with SMTP id 28so208648pxi.29
        for <java-user@lucene.apache.org>; Sat, 06 Jun 2009 06:42:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=t9vke3PZcBoPwY+sGTyHyq4LHS1SCKHqXs8CCz1vprU=;
        b=hxbVEdNeyq8f4DrCEvdKWNOqkVnjzW6OjwPwy+17y5x+h10jIt/j4bvIH2hIDIAweB
         6ZC1EHm/AU1MnbBPW5LM2o4C+0yMhXY6bKGbySEG+J7M8uAtHvBwf+lI1+i60uJYES6r
         MOVeqkcrIaqguYkSDSZeCVzZJXAK37RncrxVk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=hTxh+AY7UQRnEqcQwt28+hZ//dTTA2kEYG6BTvP1qxg1ZyBMgkSMiSPZItR9KR9hl/
         jH/X5gfHOZlQh2fXIKV/Y6GCnXpfO4QwUrekQI/6NsJThxSPrpdS9qAHw7PHekkwEu+p
         b0lBkxe8YQaGUbCt4p9pz0Sjd3HTuzMsmhsgg=
MIME-Version: 1.0
Received: by 10.142.225.11 with SMTP id x11mr345737wfg.210.1244295753100; Sat, 
	06 Jun 2009 06:42:33 -0700 (PDT)
In-Reply-To: <8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8db6d74a0906040553j365a9efdk99f61efa34512fd0@mail.gmail.com> 
	<8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com> 
	<8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com> 
	<8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com> 
	<8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com> 
	<8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com> 
	<8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com> 
	<8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com> 
	<8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Sat, 6 Jun 2009 19:12:13 +0530
Message-ID: <8db6d74a0906060642g23eb5aefv2d9e9bc3e50bdb04@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd29b9e5bef3d046bae2e04
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29b9e5bef3d046bae2e04
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Robert, I tried to use worddelimiterfilter from solr-nightly by putting it
in my working directory for this project, I set the parameters as you told
me. I must accept that its splitting words around those chars[like . @
etc]but alongwith that its messing with other non-english/unicode contents
and thats creating nuisance. I dont want worddelimiterfilter to fiddle
around with my non-english content.
This is what I'm doing,
/**
 * Analyzer for Indian language.
 */
public class IndicAnalyzer extends Analyzer {
  public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream ts = new WhitespaceTokenizer(reader);
    ts = new WordDelimiterFilter(ts, 1, 1, 1, 1, 0);
    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
    ts = new LowerCaseFilter(ts);
    ts = new PorterStemFilter(ts);
    return ts;
  }
}

I've to use the deprecated API for setting 5 values, thats fine, but somehow
its messing with unicode content. How to get rid of that? Any thougts? It
seems setting those values is some proper way might fix the problem, I'm not
sure, though.

Thanks,
KK.


On Fri, Jun 5, 2009 at 7:37 PM, Robert Muir <rcmuir@gmail.com> wrote:

> kk an easier solution to your first problem is to use
> worddelimiterfilterfactory if possible... you can get an instance of
> worddelimiter filter from that.
>
> thanks,
> robert
>
> On Fri, Jun 5, 2009 at 10:06 AM, Robert Muir<rcmuir@gmail.com> wrote:
> > kk as for your first issue, that WordDelimiterFilter is package
> > protected, one option is to make a copy of the code and change the
> > class declaration to public.
> > the other option is to put your entire analyzer in
> > 'org.apache.solr.analysis' package so that you can access it...
> >
> > for the 2nd issue, yes you need to supply some options to it. the
> > default options solr applies to type 'text' seemed to work well for me
> > with indic:
> >
> > {splitOnCaseChange=1, generateNumberParts=1, catenateWords=1,
> > generateWordParts=1, catenateAll=0, catenateNumbers=1}
> >
> > On Fri, Jun 5, 2009 at 9:12 AM, KK <dioxide.software@gmail.com> wrote:
> >>
> >> Thanks Robert. There is one problem though, I'm able to plugin the word
> >> delimiter filter from solr-nightly jar file. When I tried to do
> something
> >> like,
> >>  TokenStream ts = new WhitespaceTokenizer(reader);
> >>   ts = new WordDelimiterFilter(ts);
> >>   ts = new PorterStemmerFilter(ts);
> >>   ...rest as in the last mail...
> >>
> >> It gave me an error saying that
> >>
> >> org.apache.solr.analysis.WordDelimiterFilter is not public in
> >> org.apache.solr.analysis; cannot be accessed from outside package
> >> import org.apache.solr.analysis.WordDelimiterFilter;
> >>                               ^
> >> solrSearch/IndicAnalyzer.java:38: cannot find symbol
> >> symbol  : class WordDelimiterFilter
> >> location: class solrSearch.IndicAnalyzer
> >>    ts = new WordDelimiterFilter(ts);
> >>             ^
> >> 2 errors
> >>
> >> Then i tried to see the code for worddelimitefiter from solrnightly src
> and
> >> found that there are many deprecated constructors though they require a
> lot
> >> of parameters alongwith tokenstream. I went through the solr wiki for
> >> worddelimiterfilterfactory here,
> >>
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b83870ca7890cd73b193cefed83c283339089
> >> and say that there also its specified that we've to mention the
> parameters
> >> and both are different for indexing and querying.
> >> I'm kind of stuck here, how do I make use of worddelimiterfilter in my
> >> custom analyzer, I've to use it anyway.
> >> In my code I've to make use of worddelimiterfilter and not
> >> worddelimiterfilterfactory, right? I don't know whats the use of the
> other
> >> one. Anyway can you guide me getting rid of the above error. And yes
> I'll
> >> change the order of applying the filters as you said.
> >>
> >> Thanks,
> >> KK.
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >> On Fri, Jun 5, 2009 at 5:48 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >>
> >> > KK, you got the right idea.
> >> >
> >> > though I think you might want to change the order, move the stopfilter
> >> > before the porter stem filter... otherwise it might not work
> correctly.
> >> >
> >> > On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com>
> wrote:
> >> >
> >> > > Thanks Robert. This is exactly what I did and  its working but
> delimiter
> >> > is
> >> > > missing I'm going to add that from solr-nightly.jar
> >> > >
> >> > > /**
> >> > >  * Analyzer for Indian language.
> >> > >  */
> >> > > public class IndicAnalyzer extends Analyzer {
> >> > >  public TokenStream tokenStream(String fieldName, Reader reader) {
> >> > >     TokenStream ts = new WhitespaceTokenizer(reader);
> >> > >    ts = new PorterStemFilter(ts);
> >> > >    ts = new LowerCaseFilter(ts);
> >> > >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >> > >    return ts;
> >> > >  }
> >> > > }
> >> > >
> >> > > Its able to do stemming/case-folding and supports search for both
> english
> >> > > and indic texts. let me try out the delimiter. Will update you on
> that.
> >> > >
> >> > > Thanks a lot.
> >> > > KK
> >> > >
> >> > > On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> >> > >
> >> > > > i think you are on the right track... once you build your
> analyzer, put
> >> > > it
> >> > > > in your classpath and play around with it in luke and see if it
> does
> >> > what
> >> > > > you want.
> >> > > >
> >> > > > On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com>
> wrote:
> >> > > >
> >> > > > > Hi Robert,
> >> > > > > This is what I copied from ThaiAnalyzer @ lucene contrib
> >> > > > >
> >> > > > > public class ThaiAnalyzer extends Analyzer {
> >> > > > >  public TokenStream tokenStream(String fieldName, Reader reader)
> {
> >> > > > >      TokenStream ts = new StandardTokenizer(reader);
> >> > > > >    ts = new StandardFilter(ts);
> >> > > > >    ts = new ThaiWordFilter(ts);
> >> > > > >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >> > > > >    return ts;
> >> > > > >  }
> >> > > > > }
> >> > > > >
> >> > > > > Now as you said, I've to use whitespacetokenizer
> >> > > > > withworddelimitefilter[solr
> >> > > > > nightly.jar] stop wordremoval, porter stemmer etc , so it is
> >> > something
> >> > > > like
> >> > > > > this,
> >> > > > > public class IndicAnalyzer extends Analyzer {
> >> > > > >  public TokenStream tokenStream(String fieldName, Reader reader)
> {
> >> > > > >   TokenStream ts = new WhiteSpaceTokenizer(reader);
> >> > > > >   ts = new WordDelimiterFilter(ts);
> >> > > > >   ts = new LowerCaseFilter(ts);
> >> > > > >   ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS)   //
> >> > english
> >> > > > > stop filter, is this the default one?
> >> > > > >   ts = new PorterFilter(ts);
> >> > > > >   return ts;
> >> > > > >  }
> >> > > > > }
> >> > > > >
> >> > > > > Does this sound OK? I think it will do the job...let me try it
> out..
> >> > > > > I dont need custom filter as per my requirement, at least not
> for
> >> > these
> >> > > > > basic things I'm doing? I think so...
> >> > > > >
> >> > > > > Thanks,
> >> > > > > KK.
> >> > > > >
> >> > > > >
> >> > > > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com>
> >> > wrote:
> >> > > > >
> >> > > > > > KK well you can always get some good examples from the lucene
> >> > contrib
> >> > > > > > codebase.
> >> > > > > > For example, look at the DutchAnalyzer, especially:
> >> > > > > >
> >> > > > > > TokenStream tokenStream(String fieldName, Reader reader)
> >> > > > > >
> >> > > > > > See how it combines a specified tokenizer with various
> filters?
> >> > this
> >> > > is
> >> > > > > > what
> >> > > > > > you want to do, except of course you want to use different
> >> > tokenizer
> >> > > > and
> >> > > > > > filters.
> >> > > > > >
> >> > > > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <
> dioxide.software@gmail.com>
> >> > > wrote:
> >> > > > > >
> >> > > > > > > Thanks Muir.
> >> > > > > > > Thanks for letting me know that I dont need language
> identifiers.
> >> > > > > > >  I'll have a look and will try to write the analyzer. For my
> case
> >> > I
> >> > > > > think
> >> > > > > > > it
> >> > > > > > > wont be that difficult.
> >> > > > > > > BTW, can you point me to some sample codes/tutorials writing
> >> > custom
> >> > > > > > > analyzers. I could not find something in LIA2ndEdn. Is
> something
> >> > > > htere?
> >> > > > > > do
> >> > > > > > > let me know.
> >> > > > > > >
> >> > > > > > > Thanks,
> >> > > > > > > KK.
> >> > > > > > >
> >> > > > > > >
> >> > > > > > >
> >> > > > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <
> rcmuir@gmail.com>
> >> > > > wrote:
> >> > > > > > >
> >> > > > > > > > KK, for your case, you don't really need to go to the
> effort of
> >> > > > > > detecting
> >> > > > > > > > whether fragments are english or not.
> >> > > > > > > > Because the English stemmers in lucene will not modify
> your
> >> > Indic
> >> > > > > text,
> >> > > > > > > and
> >> > > > > > > > neither will the LowerCaseFilter.
> >> > > > > > > >
> >> > > > > > > > what you want to do is create a custom analyzer that works
> like
> >> > > > this
> >> > > > > > > >
> >> > > > > > > > -WhitespaceTokenizer with WordDelimiterFilter [from Solr
> >> > nightly
> >> > > > > jar],
> >> > > > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> >> > > > > > > >
> >> > > > > > > > Thanks,
> >> > > > > > > > Robert
> >> > > > > > > >
> >> > > > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <
> dioxide.software@gmail.com
> >> > >
> >> > > > > wrote:
> >> > > > > > > >
> >> > > > > > > > > Thank you all.
> >> > > > > > > > > To be frank I was using Solr in the begining half a
> month
> >> > ago.
> >> > > > The
> >> > > > > > > > > problem[rather bug] with solr was creation of new index
> on
> >> > the
> >> > > > fly.
> >> > > > > > > > Though
> >> > > > > > > > > they have a restful method for teh same, but it was not
> >> > > working.
> >> > > > If
> >> > > > > I
> >> > > > > > > > > remember properly one of Solr commiter "Noble Paul"[I
> dont
> >> > know
> >> > > > his
> >> > > > > > > real
> >> > > > > > > > > name] was trying to help me. I tried many nightly builds
> and
> >> > > > > spending
> >> > > > > > a
> >> > > > > > > > > couple of days stuck at that made me think of lucene and
> I
> >> > > > switched
> >> > > > > > to
> >> > > > > > > > it.
> >> > > > > > > > > Now after working with lucene which gives you full
> control of
> >> > > > > > > everything
> >> > > > > > > > I
> >> > > > > > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene is
> >> > similar
> >> > > > to
> >> > > > > > > > > Window$:Linux, its my view only, though]. Coming back to
> the
> >> > > > point
> >> > > > > as
> >> > > > > > > Uwe
> >> > > > > > > > > mentioned that we can do the same thing in lucene as
> well,
> >> > what
> >> > > > is
> >> > > > > > > > > available
> >> > > > > > > > > in Solr, Solr is based on Lucene only, right?
> >> > > > > > > > > I request Uwe to give me some more ideas on using the
> >> > analyzers
> >> > > > > from
> >> > > > > > > solr
> >> > > > > > > > > that will do the job for me, handling a mix of both
> english
> >> > and
> >> > > > > > > > non-english
> >> > > > > > > > > content.
> >> > > > > > > > > Muir, can you give me a bit detail description of how to
> use
> >> > > the
> >> > > > > > > > > WordDelimiteFilter to do my job.
> >> > > > > > > > > On a side note, I was thingking of writing a simple
> analyzer
> >> > > that
> >> > > > > > will
> >> > > > > > > do
> >> > > > > > > > > the following,
> >> > > > > > > > > #. If the webpage fragment is non-english[for me its
> some
> >> > > indian
> >> > > > > > > > language]
> >> > > > > > > > > then index them as such, no stemming/ stop word removal
> to
> >> > > begin
> >> > > > > > with.
> >> > > > > > > As
> >> > > > > > > > I
> >> > > > > > > > > know its in UCN unicode something like
> >> > > > > \u0021\u0012\u34ae\u0031[just
> >> > > > > > a
> >> > > > > > > > > sample]
> >> > > > > > > > > # If the fragment is english then apply standard
> anlyzing
> >> > > process
> >> > > > > for
> >> > > > > > > > > english content. I've not thought of quering in the same
> way
> >> > as
> >> > > > of
> >> > > > > > now
> >> > > > > > > > i.e
> >> > > > > > > > > mix of non-english and engish words.
> >> > > > > > > > > Now to get all this,
> >> > > > > > > > >  #1. I need some sort of way which will let me know if
> the
> >> > > > content
> >> > > > > is
> >> > > > > > > > > english or not. If not english just add the tokens to
> the
> >> > > > document.
> >> > > > > > Do
> >> > > > > > > we
> >> > > > > > > > > really need language identifiers, as i dont have any
> other
> >> > > > content
> >> > > > > > that
> >> > > > > > > > > uses
> >> > > > > > > > > the same script as english other than those \u1234
> things for
> >> > > my
> >> > > > > > indian
> >> > > > > > > > > language content. Any smart hack/trick for the same?
> >> > > > > > > > >  #2. If the its english apply all normal process and add
> the
> >> > > > > stemmed
> >> > > > > > > > token
> >> > > > > > > > > to document.
> >> > > > > > > > > For all this I was thinking of iterating earch word of
> the
> >> > web
> >> > > > page
> >> > > > > > and
> >> > > > > > > > > apply the above procedure. And finallyadd  the newly
> created
> >> > > > > document
> >> > > > > > > to
> >> > > > > > > > > the
> >> > > > > > > > > index.
> >> > > > > > > > >
> >> > > > > > > > > I would like some one to guide me in this direction. I'm
> >> > pretty
> >> > > > > > people
> >> > > > > > > > must
> >> > > > > > > > > have done similar/same thing earlier, I request them to
> guide
> >> > > me/
> >> > > > > > point
> >> > > > > > > > me
> >> > > > > > > > > to some tutorials for the same.
> >> > > > > > > > > Else help me out writing a custom analyzer only if thats
> not
> >> > > > going
> >> > > > > to
> >> > > > > > > be
> >> > > > > > > > > too
> >> > > > > > > > > complex. LOL, I'm a new user to lucene and know basics
> of
> >> > Java
> >> > > > > > coding.
> >> > > > > > > > > Thank you very much.
> >> > > > > > > > >
> >> > > > > > > > > --KK.
> >> > > > > > > > >
> >> > > > > > > > >
> >> > > > > > > > >
> >> > > > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <
> >> > rcmuir@gmail.com>
> >> > > > > > wrote:
> >> > > > > > > > >
> >> > > > > > > > > > yes this is true. for starters KK, might be good to
> startup
> >> > > > solr
> >> > > > > > and
> >> > > > > > > > look
> >> > > > > > > > > > at
> >> > > > > > > > > >
> http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> >> > > > > > > > > >
> >> > > > > > > > > > if you want to stick with lucene, the
> WordDelimiterFilter
> >> > is
> >> > > > the
> >> > > > > > > piece
> >> > > > > > > > > you
> >> > > > > > > > > > will want for your text, mainly for punctuation but
> also
> >> > for
> >> > > > > format
> >> > > > > > > > > > characters such as ZWJ/ZWNJ.
> >> > > > > > > > > >
> >> > > > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <
> >> > > uwe@thetaphi.de
> >> > > > >
> >> > > > > > > wrote:
> >> > > > > > > > > >
> >> > > > > > > > > > > You can also re-use the solr analyzers, as far as I
> found
> >> > > > out.
> >> > > > > > > There
> >> > > > > > > > is
> >> > > > > > > > > > an
> >> > > > > > > > > > > issue in jIRA/discussion on java-dev to merge them.
> >> > > > > > > > > > >
> >> > > > > > > > > > > -----
> >> > > > > > > > > > > Uwe Schindler
> >> > > > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> >> > > > > > > > > > > http://www.thetaphi.de
> >> > > > > > > > > > > eMail: uwe@thetaphi.de
> >> > > > > > > > > > >
> >> > > > > > > > > > >
> >> > > > > > > > > > > > -----Original Message-----
> >> > > > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> >> > > > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> >> > > > > > > > > > > > To: java-user@lucene.apache.org
> >> > > > > > > > > > > > Subject: Re: How to support stemming and case
> folding
> >> > for
> >> > > > > > english
> >> > > > > > > > > > content
> >> > > > > > > > > > > > mixed with non-english content?
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > KK, ok, so you only really want to stem the
> english.
> >> > This
> >> > > > is
> >> > > > > > > good.
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > Is it possible for you to consider using solr?
> solr's
> >> > > > default
> >> > > > > > > > > analyzer
> >> > > > > > > > > > > for
> >> > > > > > > > > > > > type 'text' will be good for your case. it will do
> the
> >> > > > > > following
> >> > > > > > > > > > > > 1. tokenize on whitespace
> >> > > > > > > > > > > > 2. handle both indian language and english
> punctuation
> >> > > > > > > > > > > > 3. lowercase the english.
> >> > > > > > > > > > > > 4. stem the english.
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > try a nightly build,
> >> > > > > > > > > > >
> http://people.apache.org/builds/lucene/solr/nightly/
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
> >> > > > > dioxide.software@gmail.com
> >> > > > > > >
> >> > > > > > > > > wrote:
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > > Muir, thanks for your response.
> >> > > > > > > > > > > > > I'm indexing indian language web pages which has
> got
> >> > > > > descent
> >> > > > > > > > amount
> >> > > > > > > > > > of
> >> > > > > > > > > > > > > english content mixed with therein. For the time
> >> > being
> >> > > > I'm
> >> > > > > > not
> >> > > > > > > > > going
> >> > > > > > > > > > to
> >> > > > > > > > > > > > use
> >> > > > > > > > > > > > > any stemmers as we don't have standard stemmers
> for
> >> > > > indian
> >> > > > > > > > > languages
> >> > > > > > > > > > .
> >> > > > > > > > > > > > So
> >> > > > > > > > > > > > > what I want to do is like this,
> >> > > > > > > > > > > > > Say I've a web page having hindi content with 5%
> >> > > english
> >> > > > > > > content.
> >> > > > > > > > > > Then
> >> > > > > > > > > > > > for
> >> > > > > > > > > > > > > hindi I want to use the basic white space
> analyzer as
> >> > > we
> >> > > > > dont
> >> > > > > > > > have
> >> > > > > > > > > > > > stemmers
> >> > > > > > > > > > > > > for this as I mentioned earlier and whereever
> english
> >> > > > > appears
> >> > > > > > I
> >> > > > > > > > > want
> >> > > > > > > > > > > > them
> >> > > > > > > > > > > > > to
> >> > > > > > > > > > > > > be stemmed tokenized etc[the standard process
> used
> >> > for
> >> > > > > > english
> >> > > > > > > > > > > content].
> >> > > > > > > > > > > > As
> >> > > > > > > > > > > > > of now I'm using whitespace analyzer for the
> full
> >> > > content
> >> > > > > > which
> >> > > > > > > > > > doesnot
> >> > > > > > > > > > > > > support case folding, stemming etc for teh
> content.
> >> > So
> >> > > if
> >> > > > > > there
> >> > > > > > > > is
> >> > > > > > > > > an
> >> > > > > > > > > > > > > english word say "Detection" indexed as such
> then
> >> > > > searching
> >> > > > > > for
> >> > > > > > > > > > > > detection
> >> > > > > > > > > > > > > or
> >> > > > > > > > > > > > > detect is not giving any results, which is the
> >> > expected
> >> > > > > > > behavior,
> >> > > > > > > > > but
> >> > > > > > > > > > I
> >> > > > > > > > > > > > > want
> >> > > > > > > > > > > > > this kind of queries to give results.
> >> > > > > > > > > > > > > I hope I made it clear. Let me know any ideas on
> >> > doing
> >> > > > the
> >> > > > > > > same.
> >> > > > > > > > > And
> >> > > > > > > > > > > one
> >> > > > > > > > > > > > > more thing, I'm storing the full webpage content
> >> > under
> >> > > a
> >> > > > > > single
> >> > > > > > > > > > field,
> >> > > > > > > > > > > I
> >> > > > > > > > > > > > > hope this will not make any difference, right?
> >> > > > > > > > > > > > > It seems I've to use language identifiers, but
> do we
> >> > > > really
> >> > > > > > > need
> >> > > > > > > > > > that?
> >> > > > > > > > > > > > > Because we've only non-english content mixed
> with
> >> > > > > english[and
> >> > > > > > > not
> >> > > > > > > > > > > french
> >> > > > > > > > > > > > or
> >> > > > > > > > > > > > > russian etc].
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > > > What is the best way of approaching the problem?
> Any
> >> > > > > > thoughts!
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > > > Thanks,
> >> > > > > > > > > > > > > KK.
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> >> > > > > > rcmuir@gmail.com>
> >> > > > > > > > > > wrote:
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > > > > KK, is all of your latin script text actually
> >> > > english?
> >> > > > Is
> >> > > > > > > there
> >> > > > > > > > > > stuff
> >> > > > > > > > > > > > > like
> >> > > > > > > > > > > > > > german or french mixed in?
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > And for your non-english content (your
> examples
> >> > have
> >> > > > been
> >> > > > > > > > indian
> >> > > > > > > > > > > > writing
> >> > > > > > > > > > > > > > systems), is it generally true that if you had
> >> > > > > devanagari,
> >> > > > > > > you
> >> > > > > > > > > can
> >> > > > > > > > > > > > assume
> >> > > > > > > > > > > > > > its hindi? or is there stuff like marathi
> mixed in?
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > Reason I say this is to invoke the right
> stemmers,
> >> > > you
> >> > > > > > really
> >> > > > > > > > > need
> >> > > > > > > > > > > > some
> >> > > > > > > > > > > > > > language detection, but perhaps in your case
> you
> >> > can
> >> > > > > cheat
> >> > > > > > > and
> >> > > > > > > > > > detect
> >> > > > > > > > > > > > > this
> >> > > > > > > > > > > > > > based on scripts...
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > Thanks,
> >> > > > > > > > > > > > > > Robert
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> >> > > > > > > > dioxide.software@gmail.com>
> >> > > > > > > > > > > > wrote:
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > > Hi All,
> >> > > > > > > > > > > > > > > I'm indexing some non-english content. But
> the
> >> > page
> >> > > > > also
> >> > > > > > > > > contains
> >> > > > > > > > > > > > > english
> >> > > > > > > > > > > > > > > content. As of now I'm using
> WhitespaceAnalyzer
> >> > for
> >> > > > all
> >> > > > > > > > content
> >> > > > > > > > > > and
> >> > > > > > > > > > > > I'm
> >> > > > > > > > > > > > > > > storing the full webpage content under a
> single
> >> > > > filed.
> >> > > > > > Now
> >> > > > > > > we
> >> > > > > > > > > > > > require
> >> > > > > > > > > > > > > to
> >> > > > > > > > > > > > > > > support case folding and stemmming for the
> >> > english
> >> > > > > > content
> >> > > > > > > > > > > > intermingled
> >> > > > > > > > > > > > > > > with
> >> > > > > > > > > > > > > > > non-english content. I must metion that we
> dont
> >> > > have
> >> > > > > > > stemming
> >> > > > > > > > > and
> >> > > > > > > > > > > > case
> >> > > > > > > > > > > > > > > folding for these non-english content. I'm
> stuck
> >> > > with
> >> > > > > > this.
> >> > > > > > > > > Some
> >> > > > > > > > > > > one
> >> > > > > > > > > > > > do
> >> > > > > > > > > > > > > > let
> >> > > > > > > > > > > > > > > me know how to proceed for fixing this
> issue.
> >> > > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > > Thanks,
> >> > > > > > > > > > > > > > > KK.
> >> > > > > > > > > > > > > > >
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > > > --
> >> > > > > > > > > > > > > > Robert Muir
> >> > > > > > > > > > > > > > rcmuir@gmail.com
> >> > > > > > > > > > > > > >
> >> > > > > > > > > > > > >
> >> > > > > > > > > > > >
> >> > > > > > > > > > > >
> >> > > > > > > > > > > >
> >> > > > > > > > > > > > --
> >> > > > > > > > > > > > Robert Muir
> >> > > > > > > > > > > > rcmuir@gmail.com
> >> > > > > > > > > > >
> >> > > > > > > > > > >
> >> > > > > > > > > > >
> >> > > > > > >
> >> > >
> ---------------------------------------------------------------------
> >> > > > > > > > > > > To unsubscribe, e-mail:
> >> > > > > java-user-unsubscribe@lucene.apache.org
> >> > > > > > > > > > > For additional commands, e-mail:
> >> > > > > > java-user-help@lucene.apache.org
> >> > > > > > > > > > >
> >> > > > > > > > > > >
> >> > > > > > > > > >
> >> > > > > > > > > >
> >> > > > > > > > > > --
> >> > > > > > > > > > Robert Muir
> >> > > > > > > > > > rcmuir@gmail.com
> >> > > > > > > > > >
> >> > > > > > > > >
> >> > > > > > > >
> >> > > > > > > >
> >> > > > > > > >
> >> > > > > > > > --
> >> > > > > > > > Robert Muir
> >> > > > > > > > rcmuir@gmail.com
> >> > > > > > > >
> >> > > > > > >
> >> > > > > >
> >> > > > > >
> >> > > > > >
> >> > > > > > --
> >> > > > > > Robert Muir
> >> > > > > > rcmuir@gmail.com
> >> > > > > >
> >> > > > >
> >> > > >
> >> > > >
> >> > > >
> >> > > > --
> >> > > > Robert Muir
> >> > > > rcmuir@gmail.com
> >> > > >
> >> > >
> >> >
> >> >
> >> >
> >> > --
> >> > Robert Muir
> >> > rcmuir@gmail.com
> >> >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd29b9e5bef3d046bae2e04--

From java-user-return-40639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 06 16:15:46 2009
Return-Path: <java-user-return-40639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83049 invoked from network); 6 Jun 2009 16:15:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jun 2009 16:15:46 -0000
Received: (qmail 71145 invoked by uid 500); 6 Jun 2009 16:15:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71071 invoked by uid 500); 6 Jun 2009 16:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71060 invoked by uid 99); 6 Jun 2009 16:15:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 16:15:55 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 16:15:43 +0000
Received: by an-out-0708.google.com with SMTP id b6so1113810ana.5
        for <java-user@lucene.apache.org>; Sat, 06 Jun 2009 09:15:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ErC0RRjXj77SehqU/QKbUTg5Hxvd5noMAVlni8vMy9Q=;
        b=GyFCHCtgUEP6nQfyTadlZa7tQiBewjN7GcRia8HhWPogz/uw4pqXEPc4pAekCKN9LX
         WgFHZ3FvvNClNlLGRfEtSs/yzmWhzxn6XPJPBlj/C0BvkqzdlzT2psZMdttJnLd7PkBI
         g68Ip/lpjaCG9xctzSsGzdcMFjBb+G6rufCK4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=g7gcFMcoysMF86GaH0IbKNjViDdSjDTwJ0LSmb7ZFnrP4yVK/Hcbfx6xRsfPqE/6Le
         1Kr4CLrKLa3kHa/LeKgqMHzEGzHGMFQeOI1FtvoHyZ/nJLG6dBZqrxzi7Wz0SfR9jPCx
         KFgt+gN0OcSj6V97J2xgaE/HL6rw3Zd5XPb+w=
MIME-Version: 1.0
Received: by 10.100.249.5 with SMTP id w5mr5031254anh.28.1244304921736; Sat, 
	06 Jun 2009 09:15:21 -0700 (PDT)
In-Reply-To: <8db6d74a0906060642g23eb5aefv2d9e9bc3e50bdb04@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8f0ad1f30906040606n18e8517fw44feb69cc0e26349@mail.gmail.com>
	 <8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com>
	 <8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com>
	 <8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com>
	 <8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com>
	 <8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com>
	 <8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com>
	 <8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com>
	 <8db6d74a0906060642g23eb5aefv2d9e9bc3e50bdb04@mail.gmail.com>
Date: Sat, 6 Jun 2009 12:15:18 -0400
Message-ID: <8f0ad1f30906060915sfa8cde9u2ecf8edbe4dca1f6@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

kk, i haven't had that experience with worddelimiterfilter on indian
languages, is it possible you could provide me an example of how its
creating nuisance?

On Sat, Jun 6, 2009 at 9:42 AM, KK<dioxide.software@gmail.com> wrote:
> Robert, I tried to use worddelimiterfilter from solr-nightly by putting i=
t
> in my working directory for this project, I set the parameters as you tol=
d
> me. I must accept that its splitting words around those chars[like . @
> etc]but alongwith that its messing with other non-english/unicode content=
s
> and thats creating nuisance. I dont want worddelimiterfilter to fiddle
> around with my non-english content.
> This is what I'm doing,
> /**
> =C2=A0* Analyzer for Indian language.
> =C2=A0*/
> public class IndicAnalyzer extends Analyzer {
> =C2=A0public TokenStream tokenStream(String fieldName, Reader reader) {
> =C2=A0 =C2=A0TokenStream ts =3D new WhitespaceTokenizer(reader);
> =C2=A0 =C2=A0ts =3D new WordDelimiterFilter(ts, 1, 1, 1, 1, 0);
> =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> =C2=A0 =C2=A0ts =3D new LowerCaseFilter(ts);
> =C2=A0 =C2=A0ts =3D new PorterStemFilter(ts);
> =C2=A0 =C2=A0return ts;
> =C2=A0}
> }
>
> I've to use the deprecated API for setting 5 values, thats fine, but some=
how
> its messing with unicode content. How to get rid of that? Any thougts? It
> seems setting those values is some proper way might fix the problem, I'm =
not
> sure, though.
>
> Thanks,
> KK.
>
>
> On Fri, Jun 5, 2009 at 7:37 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
>> kk an easier solution to your first problem is to use
>> worddelimiterfilterfactory if possible... you can get an instance of
>> worddelimiter filter from that.
>>
>> thanks,
>> robert
>>
>> On Fri, Jun 5, 2009 at 10:06 AM, Robert Muir<rcmuir@gmail.com> wrote:
>> > kk as for your first issue, that WordDelimiterFilter is package
>> > protected, one option is to make a copy of the code and change the
>> > class declaration to public.
>> > the other option is to put your entire analyzer in
>> > 'org.apache.solr.analysis' package so that you can access it...
>> >
>> > for the 2nd issue, yes you need to supply some options to it. the
>> > default options solr applies to type 'text' seemed to work well for me
>> > with indic:
>> >
>> > {splitOnCaseChange=3D1, generateNumberParts=3D1, catenateWords=3D1,
>> > generateWordParts=3D1, catenateAll=3D0, catenateNumbers=3D1}
>> >
>> > On Fri, Jun 5, 2009 at 9:12 AM, KK <dioxide.software@gmail.com> wrote:
>> >>
>> >> Thanks Robert. There is one problem though, I'm able to plugin the wo=
rd
>> >> delimiter filter from solr-nightly jar file. When I tried to do
>> something
>> >> like,
>> >> =C2=A0TokenStream ts =3D new WhitespaceTokenizer(reader);
>> >> =C2=A0 ts =3D new WordDelimiterFilter(ts);
>> >> =C2=A0 ts =3D new PorterStemmerFilter(ts);
>> >> =C2=A0 ...rest as in the last mail...
>> >>
>> >> It gave me an error saying that
>> >>
>> >> org.apache.solr.analysis.WordDelimiterFilter is not public in
>> >> org.apache.solr.analysis; cannot be accessed from outside package
>> >> import org.apache.solr.analysis.WordDelimiterFilter;
>> >> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
>> >> solrSearch/IndicAnalyzer.java:38: cannot find symbol
>> >> symbol =C2=A0: class WordDelimiterFilter
>> >> location: class solrSearch.IndicAnalyzer
>> >> =C2=A0 =C2=A0ts =3D new WordDelimiterFilter(ts);
>> >> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
>> >> 2 errors
>> >>
>> >> Then i tried to see the code for worddelimitefiter from solrnightly s=
rc
>> and
>> >> found that there are many deprecated constructors though they require=
 a
>> lot
>> >> of parameters alongwith tokenstream. I went through the solr wiki for
>> >> worddelimiterfilterfactory here,
>> >>
>> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b838=
70ca7890cd73b193cefed83c283339089
>> >> and say that there also its specified that we've to mention the
>> parameters
>> >> and both are different for indexing and querying.
>> >> I'm kind of stuck here, how do I make use of worddelimiterfilter in m=
y
>> >> custom analyzer, I've to use it anyway.
>> >> In my code I've to make use of worddelimiterfilter and not
>> >> worddelimiterfilterfactory, right? I don't know whats the use of the
>> other
>> >> one. Anyway can you guide me getting rid of the above error. And yes
>> I'll
>> >> change the order of applying the filters as you said.
>> >>
>> >> Thanks,
>> >> KK.
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> On Fri, Jun 5, 2009 at 5:48 PM, Robert Muir <rcmuir@gmail.com> wrote:
>> >>
>> >> > KK, you got the right idea.
>> >> >
>> >> > though I think you might want to change the order, move the stopfil=
ter
>> >> > before the porter stem filter... otherwise it might not work
>> correctly.
>> >> >
>> >> > On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com>
>> wrote:
>> >> >
>> >> > > Thanks Robert. This is exactly what I did and =C2=A0its working b=
ut
>> delimiter
>> >> > is
>> >> > > missing I'm going to add that from solr-nightly.jar
>> >> > >
>> >> > > /**
>> >> > > =C2=A0* Analyzer for Indian language.
>> >> > > =C2=A0*/
>> >> > > public class IndicAnalyzer extends Analyzer {
>> >> > > =C2=A0public TokenStream tokenStream(String fieldName, Reader rea=
der) {
>> >> > > =C2=A0 =C2=A0 TokenStream ts =3D new WhitespaceTokenizer(reader);
>> >> > > =C2=A0 =C2=A0ts =3D new PorterStemFilter(ts);
>> >> > > =C2=A0 =C2=A0ts =3D new LowerCaseFilter(ts);
>> >> > > =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_=
WORDS);
>> >> > > =C2=A0 =C2=A0return ts;
>> >> > > =C2=A0}
>> >> > > }
>> >> > >
>> >> > > Its able to do stemming/case-folding and supports search for both
>> english
>> >> > > and indic texts. let me try out the delimiter. Will update you on
>> that.
>> >> > >
>> >> > > Thanks a lot.
>> >> > > KK
>> >> > >
>> >> > > On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
>> wrote:
>> >> > >
>> >> > > > i think you are on the right track... once you build your
>> analyzer, put
>> >> > > it
>> >> > > > in your classpath and play around with it in luke and see if it
>> does
>> >> > what
>> >> > > > you want.
>> >> > > >
>> >> > > > On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com>
>> wrote:
>> >> > > >
>> >> > > > > Hi Robert,
>> >> > > > > This is what I copied from ThaiAnalyzer @ lucene contrib
>> >> > > > >
>> >> > > > > public class ThaiAnalyzer extends Analyzer {
>> >> > > > > =C2=A0public TokenStream tokenStream(String fieldName, Reader=
 reader)
>> {
>> >> > > > > =C2=A0 =C2=A0 =C2=A0TokenStream ts =3D new StandardTokenizer(=
reader);
>> >> > > > > =C2=A0 =C2=A0ts =3D new StandardFilter(ts);
>> >> > > > > =C2=A0 =C2=A0ts =3D new ThaiWordFilter(ts);
>> >> > > > > =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_S=
TOP_WORDS);
>> >> > > > > =C2=A0 =C2=A0return ts;
>> >> > > > > =C2=A0}
>> >> > > > > }
>> >> > > > >
>> >> > > > > Now as you said, I've to use whitespacetokenizer
>> >> > > > > withworddelimitefilter[solr
>> >> > > > > nightly.jar] stop wordremoval, porter stemmer etc , so it is
>> >> > something
>> >> > > > like
>> >> > > > > this,
>> >> > > > > public class IndicAnalyzer extends Analyzer {
>> >> > > > > =C2=A0public TokenStream tokenStream(String fieldName, Reader=
 reader)
>> {
>> >> > > > > =C2=A0 TokenStream ts =3D new WhiteSpaceTokenizer(reader);
>> >> > > > > =C2=A0 ts =3D new WordDelimiterFilter(ts);
>> >> > > > > =C2=A0 ts =3D new LowerCaseFilter(ts);
>> >> > > > > =C2=A0 ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WO=
RDS) =C2=A0 //
>> >> > english
>> >> > > > > stop filter, is this the default one?
>> >> > > > > =C2=A0 ts =3D new PorterFilter(ts);
>> >> > > > > =C2=A0 return ts;
>> >> > > > > =C2=A0}
>> >> > > > > }
>> >> > > > >
>> >> > > > > Does this sound OK? I think it will do the job...let me try i=
t
>> out..
>> >> > > > > I dont need custom filter as per my requirement, at least not
>> for
>> >> > these
>> >> > > > > basic things I'm doing? I think so...
>> >> > > > >
>> >> > > > > Thanks,
>> >> > > > > KK.
>> >> > > > >
>> >> > > > >
>> >> > > > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <rcmuir@gmail.com=
>
>> >> > wrote:
>> >> > > > >
>> >> > > > > > KK well you can always get some good examples from the luce=
ne
>> >> > contrib
>> >> > > > > > codebase.
>> >> > > > > > For example, look at the DutchAnalyzer, especially:
>> >> > > > > >
>> >> > > > > > TokenStream tokenStream(String fieldName, Reader reader)
>> >> > > > > >
>> >> > > > > > See how it combines a specified tokenizer with various
>> filters?
>> >> > this
>> >> > > is
>> >> > > > > > what
>> >> > > > > > you want to do, except of course you want to use different
>> >> > tokenizer
>> >> > > > and
>> >> > > > > > filters.
>> >> > > > > >
>> >> > > > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <
>> dioxide.software@gmail.com>
>> >> > > wrote:
>> >> > > > > >
>> >> > > > > > > Thanks Muir.
>> >> > > > > > > Thanks for letting me know that I dont need language
>> identifiers.
>> >> > > > > > > =C2=A0I'll have a look and will try to write the analyzer=
. For my
>> case
>> >> > I
>> >> > > > > think
>> >> > > > > > > it
>> >> > > > > > > wont be that difficult.
>> >> > > > > > > BTW, can you point me to some sample codes/tutorials writ=
ing
>> >> > custom
>> >> > > > > > > analyzers. I could not find something in LIA2ndEdn. Is
>> something
>> >> > > > htere?
>> >> > > > > > do
>> >> > > > > > > let me know.
>> >> > > > > > >
>> >> > > > > > > Thanks,
>> >> > > > > > > KK.
>> >> > > > > > >
>> >> > > > > > >
>> >> > > > > > >
>> >> > > > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <
>> rcmuir@gmail.com>
>> >> > > > wrote:
>> >> > > > > > >
>> >> > > > > > > > KK, for your case, you don't really need to go to the
>> effort of
>> >> > > > > > detecting
>> >> > > > > > > > whether fragments are english or not.
>> >> > > > > > > > Because the English stemmers in lucene will not modify
>> your
>> >> > Indic
>> >> > > > > text,
>> >> > > > > > > and
>> >> > > > > > > > neither will the LowerCaseFilter.
>> >> > > > > > > >
>> >> > > > > > > > what you want to do is create a custom analyzer that wo=
rks
>> like
>> >> > > > this
>> >> > > > > > > >
>> >> > > > > > > > -WhitespaceTokenizer with WordDelimiterFilter [from Sol=
r
>> >> > nightly
>> >> > > > > jar],
>> >> > > > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
>> >> > > > > > > >
>> >> > > > > > > > Thanks,
>> >> > > > > > > > Robert
>> >> > > > > > > >
>> >> > > > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <
>> dioxide.software@gmail.com
>> >> > >
>> >> > > > > wrote:
>> >> > > > > > > >
>> >> > > > > > > > > Thank you all.
>> >> > > > > > > > > To be frank I was using Solr in the begining half a
>> month
>> >> > ago.
>> >> > > > The
>> >> > > > > > > > > problem[rather bug] with solr was creation of new ind=
ex
>> on
>> >> > the
>> >> > > > fly.
>> >> > > > > > > > Though
>> >> > > > > > > > > they have a restful method for teh same, but it was n=
ot
>> >> > > working.
>> >> > > > If
>> >> > > > > I
>> >> > > > > > > > > remember properly one of Solr commiter "Noble Paul"[I
>> dont
>> >> > know
>> >> > > > his
>> >> > > > > > > real
>> >> > > > > > > > > name] was trying to help me. I tried many nightly bui=
lds
>> and
>> >> > > > > spending
>> >> > > > > > a
>> >> > > > > > > > > couple of days stuck at that made me think of lucene =
and
>> I
>> >> > > > switched
>> >> > > > > > to
>> >> > > > > > > > it.
>> >> > > > > > > > > Now after working with lucene which gives you full
>> control of
>> >> > > > > > > everything
>> >> > > > > > > > I
>> >> > > > > > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene =
is
>> >> > similar
>> >> > > > to
>> >> > > > > > > > > Window$:Linux, its my view only, though]. Coming back=
 to
>> the
>> >> > > > point
>> >> > > > > as
>> >> > > > > > > Uwe
>> >> > > > > > > > > mentioned that we can do the same thing in lucene as
>> well,
>> >> > what
>> >> > > > is
>> >> > > > > > > > > available
>> >> > > > > > > > > in Solr, Solr is based on Lucene only, right?
>> >> > > > > > > > > I request Uwe to give me some more ideas on using the
>> >> > analyzers
>> >> > > > > from
>> >> > > > > > > solr
>> >> > > > > > > > > that will do the job for me, handling a mix of both
>> english
>> >> > and
>> >> > > > > > > > non-english
>> >> > > > > > > > > content.
>> >> > > > > > > > > Muir, can you give me a bit detail description of how=
 to
>> use
>> >> > > the
>> >> > > > > > > > > WordDelimiteFilter to do my job.
>> >> > > > > > > > > On a side note, I was thingking of writing a simple
>> analyzer
>> >> > > that
>> >> > > > > > will
>> >> > > > > > > do
>> >> > > > > > > > > the following,
>> >> > > > > > > > > #. If the webpage fragment is non-english[for me its
>> some
>> >> > > indian
>> >> > > > > > > > language]
>> >> > > > > > > > > then index them as such, no stemming/ stop word remov=
al
>> to
>> >> > > begin
>> >> > > > > > with.
>> >> > > > > > > As
>> >> > > > > > > > I
>> >> > > > > > > > > know its in UCN unicode something like
>> >> > > > > \u0021\u0012\u34ae\u0031[just
>> >> > > > > > a
>> >> > > > > > > > > sample]
>> >> > > > > > > > > # If the fragment is english then apply standard
>> anlyzing
>> >> > > process
>> >> > > > > for
>> >> > > > > > > > > english content. I've not thought of quering in the s=
ame
>> way
>> >> > as
>> >> > > > of
>> >> > > > > > now
>> >> > > > > > > > i.e
>> >> > > > > > > > > mix of non-english and engish words.
>> >> > > > > > > > > Now to get all this,
>> >> > > > > > > > > =C2=A0#1. I need some sort of way which will let me k=
now if
>> the
>> >> > > > content
>> >> > > > > is
>> >> > > > > > > > > english or not. If not english just add the tokens to
>> the
>> >> > > > document.
>> >> > > > > > Do
>> >> > > > > > > we
>> >> > > > > > > > > really need language identifiers, as i dont have any
>> other
>> >> > > > content
>> >> > > > > > that
>> >> > > > > > > > > uses
>> >> > > > > > > > > the same script as english other than those \u1234
>> things for
>> >> > > my
>> >> > > > > > indian
>> >> > > > > > > > > language content. Any smart hack/trick for the same?
>> >> > > > > > > > > =C2=A0#2. If the its english apply all normal process=
 and add
>> the
>> >> > > > > stemmed
>> >> > > > > > > > token
>> >> > > > > > > > > to document.
>> >> > > > > > > > > For all this I was thinking of iterating earch word o=
f
>> the
>> >> > web
>> >> > > > page
>> >> > > > > > and
>> >> > > > > > > > > apply the above procedure. And finallyadd =C2=A0the n=
ewly
>> created
>> >> > > > > document
>> >> > > > > > > to
>> >> > > > > > > > > the
>> >> > > > > > > > > index.
>> >> > > > > > > > >
>> >> > > > > > > > > I would like some one to guide me in this direction. =
I'm
>> >> > pretty
>> >> > > > > > people
>> >> > > > > > > > must
>> >> > > > > > > > > have done similar/same thing earlier, I request them =
to
>> guide
>> >> > > me/
>> >> > > > > > point
>> >> > > > > > > > me
>> >> > > > > > > > > to some tutorials for the same.
>> >> > > > > > > > > Else help me out writing a custom analyzer only if th=
ats
>> not
>> >> > > > going
>> >> > > > > to
>> >> > > > > > > be
>> >> > > > > > > > > too
>> >> > > > > > > > > complex. LOL, I'm a new user to lucene and know basic=
s
>> of
>> >> > Java
>> >> > > > > > coding.
>> >> > > > > > > > > Thank you very much.
>> >> > > > > > > > >
>> >> > > > > > > > > --KK.
>> >> > > > > > > > >
>> >> > > > > > > > >
>> >> > > > > > > > >
>> >> > > > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <
>> >> > rcmuir@gmail.com>
>> >> > > > > > wrote:
>> >> > > > > > > > >
>> >> > > > > > > > > > yes this is true. for starters KK, might be good to
>> startup
>> >> > > > solr
>> >> > > > > > and
>> >> > > > > > > > look
>> >> > > > > > > > > > at
>> >> > > > > > > > > >
>> http://localhost:8983/solr/admin/analysis.jsp?highlight=3Don
>> >> > > > > > > > > >
>> >> > > > > > > > > > if you want to stick with lucene, the
>> WordDelimiterFilter
>> >> > is
>> >> > > > the
>> >> > > > > > > piece
>> >> > > > > > > > > you
>> >> > > > > > > > > > will want for your text, mainly for punctuation but
>> also
>> >> > for
>> >> > > > > format
>> >> > > > > > > > > > characters such as ZWJ/ZWNJ.
>> >> > > > > > > > > >
>> >> > > > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <
>> >> > > uwe@thetaphi.de
>> >> > > > >
>> >> > > > > > > wrote:
>> >> > > > > > > > > >
>> >> > > > > > > > > > > You can also re-use the solr analyzers, as far as=
 I
>> found
>> >> > > > out.
>> >> > > > > > > There
>> >> > > > > > > > is
>> >> > > > > > > > > > an
>> >> > > > > > > > > > > issue in jIRA/discussion on java-dev to merge the=
m.
>> >> > > > > > > > > > >
>> >> > > > > > > > > > > -----
>> >> > > > > > > > > > > Uwe Schindler
>> >> > > > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> > > > > > > > > > > http://www.thetaphi.de
>> >> > > > > > > > > > > eMail: uwe@thetaphi.de
>> >> > > > > > > > > > >
>> >> > > > > > > > > > >
>> >> > > > > > > > > > > > -----Original Message-----
>> >> > > > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
>> >> > > > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
>> >> > > > > > > > > > > > To: java-user@lucene.apache.org
>> >> > > > > > > > > > > > Subject: Re: How to support stemming and case
>> folding
>> >> > for
>> >> > > > > > english
>> >> > > > > > > > > > content
>> >> > > > > > > > > > > > mixed with non-english content?
>> >> > > > > > > > > > > >
>> >> > > > > > > > > > > > KK, ok, so you only really want to stem the
>> english.
>> >> > This
>> >> > > > is
>> >> > > > > > > good.
>> >> > > > > > > > > > > >
>> >> > > > > > > > > > > > Is it possible for you to consider using solr?
>> solr's
>> >> > > > default
>> >> > > > > > > > > analyzer
>> >> > > > > > > > > > > for
>> >> > > > > > > > > > > > type 'text' will be good for your case. it will=
 do
>> the
>> >> > > > > > following
>> >> > > > > > > > > > > > 1. tokenize on whitespace
>> >> > > > > > > > > > > > 2. handle both indian language and english
>> punctuation
>> >> > > > > > > > > > > > 3. lowercase the english.
>> >> > > > > > > > > > > > 4. stem the english.
>> >> > > > > > > > > > > >
>> >> > > > > > > > > > > > try a nightly build,
>> >> > > > > > > > > > >
>> http://people.apache.org/builds/lucene/solr/nightly/
>> >> > > > > > > > > > > >
>> >> > > > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
>> >> > > > > dioxide.software@gmail.com
>> >> > > > > > >
>> >> > > > > > > > > wrote:
>> >> > > > > > > > > > > >
>> >> > > > > > > > > > > > > Muir, thanks for your response.
>> >> > > > > > > > > > > > > I'm indexing indian language web pages which =
has
>> got
>> >> > > > > descent
>> >> > > > > > > > amount
>> >> > > > > > > > > > of
>> >> > > > > > > > > > > > > english content mixed with therein. For the t=
ime
>> >> > being
>> >> > > > I'm
>> >> > > > > > not
>> >> > > > > > > > > going
>> >> > > > > > > > > > to
>> >> > > > > > > > > > > > use
>> >> > > > > > > > > > > > > any stemmers as we don't have standard stemme=
rs
>> for
>> >> > > > indian
>> >> > > > > > > > > languages
>> >> > > > > > > > > > .
>> >> > > > > > > > > > > > So
>> >> > > > > > > > > > > > > what I want to do is like this,
>> >> > > > > > > > > > > > > Say I've a web page having hindi content with=
 5%
>> >> > > english
>> >> > > > > > > content.
>> >> > > > > > > > > > Then
>> >> > > > > > > > > > > > for
>> >> > > > > > > > > > > > > hindi I want to use the basic white space
>> analyzer as
>> >> > > we
>> >> > > > > dont
>> >> > > > > > > > have
>> >> > > > > > > > > > > > stemmers
>> >> > > > > > > > > > > > > for this as I mentioned earlier and whereever
>> english
>> >> > > > > appears
>> >> > > > > > I
>> >> > > > > > > > > want
>> >> > > > > > > > > > > > them
>> >> > > > > > > > > > > > > to
>> >> > > > > > > > > > > > > be stemmed tokenized etc[the standard process
>> used
>> >> > for
>> >> > > > > > english
>> >> > > > > > > > > > > content].
>> >> > > > > > > > > > > > As
>> >> > > > > > > > > > > > > of now I'm using whitespace analyzer for the
>> full
>> >> > > content
>> >> > > > > > which
>> >> > > > > > > > > > doesnot
>> >> > > > > > > > > > > > > support case folding, stemming etc for teh
>> content.
>> >> > So
>> >> > > if
>> >> > > > > > there
>> >> > > > > > > > is
>> >> > > > > > > > > an
>> >> > > > > > > > > > > > > english word say "Detection" indexed as such
>> then
>> >> > > > searching
>> >> > > > > > for
>> >> > > > > > > > > > > > detection
>> >> > > > > > > > > > > > > or
>> >> > > > > > > > > > > > > detect is not giving any results, which is th=
e
>> >> > expected
>> >> > > > > > > behavior,
>> >> > > > > > > > > but
>> >> > > > > > > > > > I
>> >> > > > > > > > > > > > > want
>> >> > > > > > > > > > > > > this kind of queries to give results.
>> >> > > > > > > > > > > > > I hope I made it clear. Let me know any ideas=
 on
>> >> > doing
>> >> > > > the
>> >> > > > > > > same.
>> >> > > > > > > > > And
>> >> > > > > > > > > > > one
>> >> > > > > > > > > > > > > more thing, I'm storing the full webpage cont=
ent
>> >> > under
>> >> > > a
>> >> > > > > > single
>> >> > > > > > > > > > field,
>> >> > > > > > > > > > > I
>> >> > > > > > > > > > > > > hope this will not make any difference, right=
?
>> >> > > > > > > > > > > > > It seems I've to use language identifiers, bu=
t
>> do we
>> >> > > > really
>> >> > > > > > > need
>> >> > > > > > > > > > that?
>> >> > > > > > > > > > > > > Because we've only non-english content mixed
>> with
>> >> > > > > english[and
>> >> > > > > > > not
>> >> > > > > > > > > > > french
>> >> > > > > > > > > > > > or
>> >> > > > > > > > > > > > > russian etc].
>> >> > > > > > > > > > > > >
>> >> > > > > > > > > > > > > What is the best way of approaching the probl=
em?
>> Any
>> >> > > > > > thoughts!
>> >> > > > > > > > > > > > >
>> >> > > > > > > > > > > > > Thanks,
>> >> > > > > > > > > > > > > KK.
>> >> > > > > > > > > > > > >
>> >> > > > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
>> >> > > > > > rcmuir@gmail.com>
>> >> > > > > > > > > > wrote:
>> >> > > > > > > > > > > > >
>> >> > > > > > > > > > > > > > KK, is all of your latin script text actual=
ly
>> >> > > english?
>> >> > > > Is
>> >> > > > > > > there
>> >> > > > > > > > > > stuff
>> >> > > > > > > > > > > > > like
>> >> > > > > > > > > > > > > > german or french mixed in?
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > > And for your non-english content (your
>> examples
>> >> > have
>> >> > > > been
>> >> > > > > > > > indian
>> >> > > > > > > > > > > > writing
>> >> > > > > > > > > > > > > > systems), is it generally true that if you =
had
>> >> > > > > devanagari,
>> >> > > > > > > you
>> >> > > > > > > > > can
>> >> > > > > > > > > > > > assume
>> >> > > > > > > > > > > > > > its hindi? or is there stuff like marathi
>> mixed in?
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > > Reason I say this is to invoke the right
>> stemmers,
>> >> > > you
>> >> > > > > > really
>> >> > > > > > > > > need
>> >> > > > > > > > > > > > some
>> >> > > > > > > > > > > > > > language detection, but perhaps in your cas=
e
>> you
>> >> > can
>> >> > > > > cheat
>> >> > > > > > > and
>> >> > > > > > > > > > detect
>> >> > > > > > > > > > > > > this
>> >> > > > > > > > > > > > > > based on scripts...
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > > Thanks,
>> >> > > > > > > > > > > > > > Robert
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
>> >> > > > > > > > dioxide.software@gmail.com>
>> >> > > > > > > > > > > > wrote:
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > > > Hi All,
>> >> > > > > > > > > > > > > > > I'm indexing some non-english content. Bu=
t
>> the
>> >> > page
>> >> > > > > also
>> >> > > > > > > > > contains
>> >> > > > > > > > > > > > > english
>> >> > > > > > > > > > > > > > > content. As of now I'm using
>> WhitespaceAnalyzer
>> >> > for
>> >> > > > all
>> >> > > > > > > > content
>> >> > > > > > > > > > and
>> >> > > > > > > > > > > > I'm
>> >> > > > > > > > > > > > > > > storing the full webpage content under a
>> single
>> >> > > > filed.
>> >> > > > > > Now
>> >> > > > > > > we
>> >> > > > > > > > > > > > require
>> >> > > > > > > > > > > > > to
>> >> > > > > > > > > > > > > > > support case folding and stemmming for th=
e
>> >> > english
>> >> > > > > > content
>> >> > > > > > > > > > > > intermingled
>> >> > > > > > > > > > > > > > > with
>> >> > > > > > > > > > > > > > > non-english content. I must metion that w=
e
>> dont
>> >> > > have
>> >> > > > > > > stemming
>> >> > > > > > > > > and
>> >> > > > > > > > > > > > case
>> >> > > > > > > > > > > > > > > folding for these non-english content. I'=
m
>> stuck
>> >> > > with
>> >> > > > > > this.
>> >> > > > > > > > > Some
>> >> > > > > > > > > > > one
>> >> > > > > > > > > > > > do
>> >> > > > > > > > > > > > > > let
>> >> > > > > > > > > > > > > > > me know how to proceed for fixing this
>> issue.
>> >> > > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > > > Thanks,
>> >> > > > > > > > > > > > > > > KK.
>> >> > > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > > > --
>> >> > > > > > > > > > > > > > Robert Muir
>> >> > > > > > > > > > > > > > rcmuir@gmail.com
>> >> > > > > > > > > > > > > >
>> >> > > > > > > > > > > > >
>> >> > > > > > > > > > > >
>> >> > > > > > > > > > > >
>> >> > > > > > > > > > > >
>> >> > > > > > > > > > > > --
>> >> > > > > > > > > > > > Robert Muir
>> >> > > > > > > > > > > > rcmuir@gmail.com
>> >> > > > > > > > > > >
>> >> > > > > > > > > > >
>> >> > > > > > > > > > >
>> >> > > > > > >
>> >> > >
>> ---------------------------------------------------------------------
>> >> > > > > > > > > > > To unsubscribe, e-mail:
>> >> > > > > java-user-unsubscribe@lucene.apache.org
>> >> > > > > > > > > > > For additional commands, e-mail:
>> >> > > > > > java-user-help@lucene.apache.org
>> >> > > > > > > > > > >
>> >> > > > > > > > > > >
>> >> > > > > > > > > >
>> >> > > > > > > > > >
>> >> > > > > > > > > > --
>> >> > > > > > > > > > Robert Muir
>> >> > > > > > > > > > rcmuir@gmail.com
>> >> > > > > > > > > >
>> >> > > > > > > > >
>> >> > > > > > > >
>> >> > > > > > > >
>> >> > > > > > > >
>> >> > > > > > > > --
>> >> > > > > > > > Robert Muir
>> >> > > > > > > > rcmuir@gmail.com
>> >> > > > > > > >
>> >> > > > > > >
>> >> > > > > >
>> >> > > > > >
>> >> > > > > >
>> >> > > > > > --
>> >> > > > > > Robert Muir
>> >> > > > > > rcmuir@gmail.com
>> >> > > > > >
>> >> > > > >
>> >> > > >
>> >> > > >
>> >> > > >
>> >> > > > --
>> >> > > > Robert Muir
>> >> > > > rcmuir@gmail.com
>> >> > > >
>> >> > >
>> >> >
>> >> >
>> >> >
>> >> > --
>> >> > Robert Muir
>> >> > rcmuir@gmail.com
>> >> >
>> >
>> >
>> >
>> > --
>> > Robert Muir
>> > rcmuir@gmail.com
>> >
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 06 22:26:31 2009
Return-Path: <java-user-return-40640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55617 invoked from network); 6 Jun 2009 22:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jun 2009 22:26:31 -0000
Received: (qmail 79817 invoked by uid 500); 6 Jun 2009 22:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79743 invoked by uid 500); 6 Jun 2009 22:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79733 invoked by uid 99); 6 Jun 2009 22:26:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 22:26:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of deliprao@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jun 2009 22:26:33 +0000
Received: by gxk11 with SMTP id 11so711061gxk.5
        for <java-user@lucene.apache.org>; Sat, 06 Jun 2009 15:26:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=9fdPzCPf7QwajpjA9BC4rgme9+vC6kfubMMbNJzKYfU=;
        b=nVvHA09P5Hy+qkljP4zsC67ItHn3Itexgg2U+3qhnMsMNu/7EchpUA9m7HabVGBW2K
         Ksw2yZoQtzORn+xVUVrqHnOTkGjHoHFOR8Cr3D8CYNtdF4lO/r1oI2/rREGMfEZMVWBP
         1T/1ws6TLuqmgkhqcJIdHneReP+ZxlA8s7oc4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=FjsOayDFmyE/ZXxwh9ctojNR0Y4sFsJc02bJJYYgBHC+9tCcgjLuaIFBYtWnvQLq01
         xOlloZ+hyKgYk3BS/sn1a9z5xOXqDpliN7vAhuKCiVVbiZw0asfVLnAUbdZPl3G741zk
         oRngbZMAaK5ypCNcUwxAmrh2ui19TiMN/LC+Q=
MIME-Version: 1.0
Received: by 10.231.35.66 with SMTP id o2mr1314052ibd.41.1244327172049; Sat, 
	06 Jun 2009 15:26:12 -0700 (PDT)
From: Delip Rao <deliprao@gmail.com>
Date: Sat, 6 Jun 2009 18:25:52 -0400
Message-ID: <da9a0cdf0906061525n7ff3608av59c1c32f6108762@mail.gmail.com>
Subject: Search fails every time
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325573806130c5a046bb57f13
X-Virus-Checked: Checked by ClamAV on apache.org

--000325573806130c5a046bb57f13
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

Mentioned below are snippets from my indexing and searching code. For some
reason, I get zero hits all the time even for terms present in the document
collection. Can somebody point out where I'm going wrong? I'm using
lucene-core-2.4.0.jar.

Thanks!
Delip


-----------------------
Indexer.java

Directory dir = FSDirectory.getDirectory(path);
indexWriter = new IndexWriter(dir, new KeywordAnalyzer(),
     true, IndexWriter.MaxFieldLength.UNLIMITED);

// initialize docid and fileContents (in a loop)
...

currentDocument = new Document();
currentDocument.add(new Field("id", docid,
Field.Store.YES, Field.Index.NOT_ANALYZED));
currentDocument.add(new Field("content", fileContents,
Field.Store.YES, Field.Index.ANALYZED));

indexWriter.addDocument(currentDocument);


----------------------
Searcher.java

indexSearcher = new IndexSearcher(indexPath);
queryParser = new QueryParser("content", new KeywordAnalyzer());

Query query = queryParser.parse(queryString);
TopDocCollector collector = new TopDocCollector(100);
indexSearcher.search(query, collector);
System.err.println("Hits: " + collector.getTotalHits());

--000325573806130c5a046bb57f13--

From java-user-return-40641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 07 06:02:54 2009
Return-Path: <java-user-return-40641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90767 invoked from network); 7 Jun 2009 06:02:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jun 2009 06:02:54 -0000
Received: (qmail 37876 invoked by uid 500); 7 Jun 2009 06:03:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37788 invoked by uid 500); 7 Jun 2009 06:03:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37778 invoked by uid 99); 7 Jun 2009 06:03:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 06:03:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mohit.verma.in@gmail.com designates 209.85.222.177 as permitted sender)
Received: from [209.85.222.177] (HELO mail-pz0-f177.google.com) (209.85.222.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 06:02:54 +0000
Received: by pzk7 with SMTP id 7so437388pzk.29
        for <java-user@lucene.apache.org>; Sat, 06 Jun 2009 23:02:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=cGb9yVaG7jN17xx9voJ6gzrjDMEHgOKsC1pjPQWelfU=;
        b=Q/ajfgPxEhloU5xoIgn7hPxU1uaATHYP2rFqfGwv3ARolDZ5UzH/Wksmalj3bqFl3E
         Lo8OtNgNYPkWA9PyZ2vypw3aSslcnhLdopxQCgh/EULHaMHnpnGvx8oeOhULngWzorL8
         fpdg4FANPkKuVW8V5p4bsikX+/i4feCirJl/k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=f8wVJ3GL5VbWdSCYDco5y0BqVeGSFm64fqe4xHuLpOWhHgqBg/wYhAUQTBiP+QBYtf
         XIMulVstOOR/pvZ+QjaIUjfxzS2bIok/1rvgJmRQf0vSxMLzn2Ab171HHe2ZA5ccWzRM
         IwTYENaXiK7bf8Xp38qcEgCaiu4ouxhyyqenI=
MIME-Version: 1.0
Received: by 10.142.13.14 with SMTP id 14mr1809539wfm.275.1244354553290; Sat, 
	06 Jun 2009 23:02:33 -0700 (PDT)
Date: Sun, 7 Jun 2009 11:32:33 +0530
Message-ID: <a2bf3b4a0906062302q2ad07a63tfccfc35db97de144@mail.gmail.com>
Subject: looking for some help
From: Mohit Verma <mohit.verma.in@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I am currently working on a project where I need a desktop search API
in Java, I looked around and found a lot of high level java projects
based on Lucene, I got a lot of links pointing to one "Lucene Desktop"
- Java based project to compete with Google Desktop, but those links
are not working now, and Lucene Desktop seems to be a project written
in C# for Windows platform.

I wanted to know if the Lucene Desktop (Java) project which is
multi-platform still active with a different name? If not, then can I
use any of the other Lucene sub-projects for the same? And yeah btw,
is there a Java API for beagle or strigi?

Thanks a lot,

-- 
Mohit Verma
BITS Pilani-Goa Campus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 07 06:09:38 2009
Return-Path: <java-user-return-40642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92866 invoked from network); 7 Jun 2009 06:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jun 2009 06:09:38 -0000
Received: (qmail 40345 invoked by uid 500); 7 Jun 2009 06:09:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40279 invoked by uid 500); 7 Jun 2009 06:09:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40269 invoked by uid 99); 7 Jun 2009 06:09:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 06:09:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mohit.verma.in@gmail.com designates 209.85.216.190 as permitted sender)
Received: from [209.85.216.190] (HELO mail-px0-f190.google.com) (209.85.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 06:09:38 +0000
Received: by pxi28 with SMTP id 28so418785pxi.29
        for <java-user@lucene.apache.org>; Sat, 06 Jun 2009 23:09:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=cGb9yVaG7jN17xx9voJ6gzrjDMEHgOKsC1pjPQWelfU=;
        b=Q/ajfgPxEhloU5xoIgn7hPxU1uaATHYP2rFqfGwv3ARolDZ5UzH/Wksmalj3bqFl3E
         Lo8OtNgNYPkWA9PyZ2vypw3aSslcnhLdopxQCgh/EULHaMHnpnGvx8oeOhULngWzorL8
         fpdg4FANPkKuVW8V5p4bsikX+/i4feCirJl/k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=f8wVJ3GL5VbWdSCYDco5y0BqVeGSFm64fqe4xHuLpOWhHgqBg/wYhAUQTBiP+QBYtf
         XIMulVstOOR/pvZ+QjaIUjfxzS2bIok/1rvgJmRQf0vSxMLzn2Ab171HHe2ZA5ccWzRM
         IwTYENaXiK7bf8Xp38qcEgCaiu4ouxhyyqenI=
MIME-Version: 1.0
Received: by 10.142.13.14 with SMTP id 14mr1809539wfm.275.1244354553290; Sat, 
	06 Jun 2009 23:02:33 -0700 (PDT)
Date: Sun, 7 Jun 2009 11:32:33 +0530
Message-ID: <a2bf3b4a0906062302q2ad07a63tfccfc35db97de144@mail.gmail.com>
Subject: looking for some help
From: Mohit Verma <mohit.verma.in@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I am currently working on a project where I need a desktop search API
in Java, I looked around and found a lot of high level java projects
based on Lucene, I got a lot of links pointing to one "Lucene Desktop"
- Java based project to compete with Google Desktop, but those links
are not working now, and Lucene Desktop seems to be a project written
in C# for Windows platform.

I wanted to know if the Lucene Desktop (Java) project which is
multi-platform still active with a different name? If not, then can I
use any of the other Lucene sub-projects for the same? And yeah btw,
is there a Java API for beagle or strigi?

Thanks a lot,

-- 
Mohit Verma
BITS Pilani-Goa Campus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 07 16:40:53 2009
Return-Path: <java-user-return-40643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98352 invoked from network); 7 Jun 2009 16:40:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jun 2009 16:40:53 -0000
Received: (qmail 44889 invoked by uid 500); 7 Jun 2009 16:41:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44851 invoked by uid 500); 7 Jun 2009 16:41:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44841 invoked by uid 99); 7 Jun 2009 16:41:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 16:41:03 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 16:40:51 +0000
Received: from [192.168.0.105] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 751F55B52C
	for <java-user@lucene.apache.org>; Sun,  7 Jun 2009 09:40:29 -0700 (PDT)
Message-Id: <3D10555A-9719-47A0-B912-F1C35E5E7F22@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <da9a0cdf0906061525n7ff3608av59c1c32f6108762@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Search fails every time
Date: Sun, 7 Jun 2009 12:40:27 -0400
References: <da9a0cdf0906061525n7ff3608av59c1c32f6108762@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

If I had to guess, I'd say you have some type of Analysis mismatch  
between what you are indexing and what you are searching.  Do you  
really want to use the KeywordAnalyzer?

You might use Luke (http://www.getopt.org/luke) to have a look at your  
index and see if that sheds some light.

Also have a look at the Lucene FAQ: http://wiki.apache.org/lucene-java/LuceneFAQ

-Grant


On Jun 6, 2009, at 6:25 PM, Delip Rao wrote:

> Hi,
>
> Mentioned below are snippets from my indexing and searching code.  
> For some
> reason, I get zero hits all the time even for terms present in the  
> document
> collection. Can somebody point out where I'm going wrong? I'm using
> lucene-core-2.4.0.jar.
>
> Thanks!
> Delip
>
>
> -----------------------
> Indexer.java
>
> Directory dir = FSDirectory.getDirectory(path);
> indexWriter = new IndexWriter(dir, new KeywordAnalyzer(),
>     true, IndexWriter.MaxFieldLength.UNLIMITED);
>
> // initialize docid and fileContents (in a loop)
> ...
>
> currentDocument = new Document();
> currentDocument.add(new Field("id", docid,
> Field.Store.YES, Field.Index.NOT_ANALYZED));
> currentDocument.add(new Field("content", fileContents,
> Field.Store.YES, Field.Index.ANALYZED));
>
> indexWriter.addDocument(currentDocument);
>
>
> ----------------------
> Searcher.java
>
> indexSearcher = new IndexSearcher(indexPath);
> queryParser = new QueryParser("content", new KeywordAnalyzer());
>
> Query query = queryParser.parse(queryString);
> TopDocCollector collector = new TopDocCollector(100);
> indexSearcher.search(query, collector);
> System.err.println("Hits: " + collector.getTotalHits());

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 07 16:52:06 2009
Return-Path: <java-user-return-40644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99496 invoked from network); 7 Jun 2009 16:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jun 2009 16:52:06 -0000
Received: (qmail 55582 invoked by uid 500); 7 Jun 2009 16:52:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55509 invoked by uid 500); 7 Jun 2009 16:52:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55499 invoked by uid 99); 7 Jun 2009 16:52:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 16:52:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 16:52:04 +0000
Received: by an-out-0708.google.com with SMTP id b6so1431544ana.5
        for <java-user@lucene.apache.org>; Sun, 07 Jun 2009 09:51:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=7giUQjWnlUc1tlZql8doxynmI/BKG7+MABmpc4dACBE=;
        b=a2Wn/IAthEPTdUEjWs2YWAxbDQSADfh9ScvZM5z6jwR4VVN0S+3ckBZYS170SSdg8E
         k6kI8MbI23BrXxxaexYW/SxfcsmQcmBwqSd3B0iJ4Q7quCYxzZVEo/7vR+GfeIsXCJGX
         12sH94vcwHRufbTFO01q2xMMjuMhA90BhnSnU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=gAm0WWLM8uXgnSHRLJQiQUWrJ5pF+Y4SLF/oohqs1yJ1L8ODBUkfYimrTktmqfLB++
         ER2KLpkVWSUZ73z3hO49DAZP5U2zCvfdT5B/3nXwABB7dnUvH6pgMmXvM5OiwYhc42Qs
         ENTqau7wp77lada+uWmNWT3IPkyR36ifO0Nw0=
MIME-Version: 1.0
Received: by 10.100.164.12 with SMTP id m12mr5463240ane.131.1244393502888; 
	Sun, 07 Jun 2009 09:51:42 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <3D10555A-9719-47A0-B912-F1C35E5E7F22@apache.org>
References: <da9a0cdf0906061525n7ff3608av59c1c32f6108762@mail.gmail.com>
	 <3D10555A-9719-47A0-B912-F1C35E5E7F22@apache.org>
Date: Sun, 7 Jun 2009 18:51:42 +0200
Message-ID: <f18c9dde0906070951j49535584y9074c7f756ad3832@mail.gmail.com>
Subject: Re: Search fails every time
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Another question,
do you commit your indexwriter before you open your searcher. You
could also check how many docs in the index using IndexReader#numDocs
and pass the index reader to the indexsearchers constructor.

Just a guess too...

simon

On Sun, Jun 7, 2009 at 6:40 PM, Grant Ingersoll<gsingers@apache.org> wrote:
> If I had to guess, I'd say you have some type of Analysis mismatch betwee=
n
> what you are indexing and what you are searching. =C2=A0Do you really wan=
t to use
> the KeywordAnalyzer?
>
> You might use Luke (http://www.getopt.org/luke) to have a look at your in=
dex
> and see if that sheds some light.
>
> Also have a look at the Lucene FAQ:
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
> -Grant
>
>
> On Jun 6, 2009, at 6:25 PM, Delip Rao wrote:
>
>> Hi,
>>
>> Mentioned below are snippets from my indexing and searching code. For so=
me
>> reason, I get zero hits all the time even for terms present in the
>> document
>> collection. Can somebody point out where I'm going wrong? I'm using
>> lucene-core-2.4.0.jar.
>>
>> Thanks!
>> Delip
>>
>>
>> -----------------------
>> Indexer.java
>>
>> Directory dir =3D FSDirectory.getDirectory(path);
>> indexWriter =3D new IndexWriter(dir, new KeywordAnalyzer(),
>> =C2=A0 =C2=A0true, IndexWriter.MaxFieldLength.UNLIMITED);
>>
>> // initialize docid and fileContents (in a loop)
>> ...
>>
>> currentDocument =3D new Document();
>> currentDocument.add(new Field("id", docid,
>> Field.Store.YES, Field.Index.NOT_ANALYZED));
>> currentDocument.add(new Field("content", fileContents,
>> Field.Store.YES, Field.Index.ANALYZED));
>>
>> indexWriter.addDocument(currentDocument);
>>
>>
>> ----------------------
>> Searcher.java
>>
>> indexSearcher =3D new IndexSearcher(indexPath);
>> queryParser =3D new QueryParser("content", new KeywordAnalyzer());
>>
>> Query query =3D queryParser.parse(queryString);
>> TopDocCollector collector =3D new TopDocCollector(100);
>> indexSearcher.search(query, collector);
>> System.err.println("Hits: " + collector.getTotalHits());
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
> Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) using
> Solr/Lucene:
> http://www.lucidimagination.com/search
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 07 21:33:32 2009
Return-Path: <java-user-return-40645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4047 invoked from network); 7 Jun 2009 21:33:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jun 2009 21:33:32 -0000
Received: (qmail 41304 invoked by uid 500); 7 Jun 2009 21:33:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41224 invoked by uid 500); 7 Jun 2009 21:33:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41214 invoked by uid 99); 7 Jun 2009 21:33:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 21:33:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of deliprao@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jun 2009 21:33:25 +0000
Received: by gxk11 with SMTP id 11so1460234gxk.5
        for <java-user@lucene.apache.org>; Sun, 07 Jun 2009 14:33:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=U9JJGpEjPpQrJOY2R+pZbnN1gDdlfcpQLvYZDm1XsYA=;
        b=qu0Y8NA1PgiMG3Ar7NZr7tFlErvIU6fKdt7mAT5wIiCwqrxPRGb71TzHV0Zs/0rDke
         bLsGtdx6IHzfHP2UACTuUbc4OJ9gpPxLdPFY0Z/Ut+r+RvLq3sLLepJLq/Oc0gPdfnAm
         FVHUGpnS5/BCuOwcoR3dKYG3fmpXtMarfsSCM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Lzxamap98FqQSt5HLXUo0WPIEAlWQvSBV1VBRhgqxLjTStwyIO54T0cY93xQ77NwKZ
         QiUhHWWh8h+HR2B2ExNqf80k8ZHrQ8xZqovzNeU1KIBk108SUni3uwELapGR/k5Ui1rB
         xqfMsiSk3N3ikP127OZ/rlT045/4m9Sgd0ceU=
MIME-Version: 1.0
Received: by 10.231.35.75 with SMTP id o11mr1591955ibd.6.1244410384318; Sun, 
	07 Jun 2009 14:33:04 -0700 (PDT)
In-Reply-To: <f18c9dde0906070951j49535584y9074c7f756ad3832@mail.gmail.com>
References: <da9a0cdf0906061525n7ff3608av59c1c32f6108762@mail.gmail.com> 
	<3D10555A-9719-47A0-B912-F1C35E5E7F22@apache.org> <f18c9dde0906070951j49535584y9074c7f756ad3832@mail.gmail.com>
From: Delip Rao <deliprao@gmail.com>
Date: Sun, 7 Jun 2009 17:32:44 -0400
Message-ID: <da9a0cdf0906071432o79cd7541u551a31d4976480e1@mail.gmail.com>
Subject: Re: Search fails every time
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=000325579db2e98302046bc8debf
X-Virus-Checked: Checked by ClamAV on apache.org

--000325579db2e98302046bc8debf
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks Simon & Grant.

Yes, the indexWriter was close()'d before searching. As Grant pointed out,
the issue really was with the Analyzer. Everything worked when I replaced
the KeywordAnalyzer with a SimpleAnalyzer.

Luke seems to be god-sent (no pun) -- With a KeywordAnalyzer, the entire
"content" field is stored as a blob of text even after adding it with
Field.Index.ANALYZED option while SimpleAnalyzer nicely lowercases and
tokenizes the text.

Cheers,
Delip

On Sun, Jun 7, 2009 at 12:51 PM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> Another question,
> do you commit your indexwriter before you open your searcher. You
> could also check how many docs in the index using IndexReader#numDocs
> and pass the index reader to the indexsearchers constructor.
>
> Just a guess too...
>
> simon
>
> On Sun, Jun 7, 2009 at 6:40 PM, Grant Ingersoll<gsingers@apache.org>
> wrote:
> > If I had to guess, I'd say you have some type of Analysis mismatch
> between
> > what you are indexing and what you are searching.  Do you really want to
> use
> > the KeywordAnalyzer?
> >
> > You might use Luke (http://www.getopt.org/luke) to have a look at your
> index
> > and see if that sheds some light.
> >
> > Also have a look at the Lucene FAQ:
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> > -Grant
> >
> >
> > On Jun 6, 2009, at 6:25 PM, Delip Rao wrote:
> >
> >> Hi,
> >>
> >> Mentioned below are snippets from my indexing and searching code. For
> some
> >> reason, I get zero hits all the time even for terms present in the
> >> document
> >> collection. Can somebody point out where I'm going wrong? I'm using
> >> lucene-core-2.4.0.jar.
> >>
> >> Thanks!
> >> Delip
> >>
> >>
> >> -----------------------
> >> Indexer.java
> >>
> >> Directory dir = FSDirectory.getDirectory(path);
> >> indexWriter = new IndexWriter(dir, new KeywordAnalyzer(),
> >>    true, IndexWriter.MaxFieldLength.UNLIMITED);
> >>
> >> // initialize docid and fileContents (in a loop)
> >> ...
> >>
> >> currentDocument = new Document();
> >> currentDocument.add(new Field("id", docid,
> >> Field.Store.YES, Field.Index.NOT_ANALYZED));
> >> currentDocument.add(new Field("content", fileContents,
> >> Field.Store.YES, Field.Index.ANALYZED));
> >>
> >> indexWriter.addDocument(currentDocument);
> >>
> >>
> >> ----------------------
> >> Searcher.java
> >>
> >> indexSearcher = new IndexSearcher(indexPath);
> >> queryParser = new QueryParser("content", new KeywordAnalyzer());
> >>
> >> Query query = queryParser.parse(queryString);
> >> TopDocCollector collector = new TopDocCollector(100);
> >> indexSearcher.search(query, collector);
> >> System.err.println("Hits: " + collector.getTotalHits());
> >
> > --------------------------
> > Grant Ingersoll
> > http://www.lucidimagination.com/
> >
> > Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) using
> > Solr/Lucene:
> > http://www.lucidimagination.com/search
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000325579db2e98302046bc8debf--

From java-user-return-40646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 00:14:41 2009
Return-Path: <java-user-return-40646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49700 invoked from network); 8 Jun 2009 00:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 00:14:41 -0000
Received: (qmail 93417 invoked by uid 500); 8 Jun 2009 00:14:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93333 invoked by uid 500); 8 Jun 2009 00:14:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93323 invoked by uid 99); 8 Jun 2009 00:14:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 00:14:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.188] (HELO n55.bullet.mail.sp1.yahoo.com) (98.136.44.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jun 2009 00:14:40 +0000
Received: from [216.252.122.219] by n55.bullet.mail.sp1.yahoo.com with NNFMP; 08 Jun 2009 00:14:17 -0000
Received: from [69.147.65.164] by t4.bullet.sp1.yahoo.com with NNFMP; 08 Jun 2009 00:14:17 -0000
Received: from [127.0.0.1] by omp409.mail.sp1.yahoo.com with NNFMP; 08 Jun 2009 00:14:17 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 910591.90863.bm@omp409.mail.sp1.yahoo.com
Received: (qmail 37874 invoked by uid 60001); 8 Jun 2009 00:14:17 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1244420057; bh=lneUqeQoHNjfrUCV4PSSR0LDeXAoQcnwdxneeb/SgpM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=tun5dxrAnROEWi8YTTCjObey20YuOSkNBumDBw3waUw2I90VTiqJLu29McMUev0FA1tJyUoZHYds+vUCo9T9JGH99i0RLrqVZvzrk250JQdEPq/AeLn1iJLRrlrM0YB6yURdaDoyfoNeImPMm0cZFhIGXjlq+PeLQakboMr+cKo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=asKiFuWbjyAoKKm+nvdYMDRdq87/idSSUmzbT1uOYsuHAJ1Cx0GXGoguSVudCXsG5pyAb9+FYfl8VtU3We89bAdfQ1Fwek0zFWgLF9EWDLNAi41IAlKSTzrrLQ0ecDjl2uNJXfF3jBF2DCUytwFVi4PFXyT0Iwlhm24Bs6XRCp0=;
Message-ID: <780692.37408.qm@web45302.mail.sp1.yahoo.com>
X-YMail-OSG: 7NezCxkVM1kex1GfCLgQfxIjx1BQ8wGO2xWRsHOfqFd5Ajt8o9hPW.V4Pcj9Nqe9rraNe35d.ar3yxcJkwUYQ01hIBtvZRFlX5FUKSh5THlQWE6.95PXhweVAABQaYtKOg.D3HSBL7BF_GHEqfFnXSuxfH2GgA4HpBvplvhfvBQq6S6yWnQA364dW5h8vyFvZzHRPxxWlsDNSnztbyIoWjdz3jSSd58jD7uX7J1zm2n8TqQn6PvTea0XCoC9cycPinIeRli1lCPZs4oh_6Fe
Received: from [128.122.140.112] by web45302.mail.sp1.yahoo.com via HTTP; Sun, 07 Jun 2009 17:14:17 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
Date: Sun, 7 Jun 2009 17:14:17 -0700 (PDT)
From: House Less <houselessinnewyork@yahoo.com>
Subject: Retrieving the term vectors of a document in Nutch
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Hello everyone,

I am quite new to development with Nutch, so you must forgive my question if it is amateurish.

After some reading of Luke's source code, I found to my dismay that obtaining the TermFreqVector of a document via the IndexReader resulted in no vectors at all. A mailing list entry found via Google said that Nutch does not store the contents of a page in its Lucene indices. This makes sense.

I then read the Nutch source code and figured out that one could use NutchBean to reconstruct the parsed text of an indexed page.

However, this still left the nagging problem of retrieving the TermFreqVector for the parsed text of a page. I tried MoreLikeThis to retrieve the set of terms but that did not work either; it was simply empty. The source code to MoreLikeThis suggests certain assumptions made on the Lucene indices being accessed.

At the end of the day, I simply decided to reconstruct the term frequency vector of a page by referring to TermDocs in the IndexReader. This is not very efficient since I have to do this for every page iterated over the Lucene document index.

I wonder whether it is possible to retrieve previously computed TermFreqVector[] of a document in Nutch's Lucene indices? Could it be that this is not possible because Nutch does not store the TermFreqVector[]? Your insights on the matter will help.

House



      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 00:58:54 2009
Return-Path: <java-user-return-40647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67914 invoked from network); 8 Jun 2009 00:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 00:58:54 -0000
Received: (qmail 13833 invoked by uid 500); 8 Jun 2009 00:59:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13739 invoked by uid 500); 8 Jun 2009 00:59:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13729 invoked by uid 99); 8 Jun 2009 00:59:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 00:59:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.43] (HELO n59.bullet.mail.sp1.yahoo.com) (98.136.44.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jun 2009 00:58:53 +0000
Received: from [216.252.122.217] by n59.bullet.mail.sp1.yahoo.com with NNFMP; 08 Jun 2009 00:58:32 -0000
Received: from [69.147.65.164] by t2.bullet.sp1.yahoo.com with NNFMP; 08 Jun 2009 00:58:32 -0000
Received: from [127.0.0.1] by omp409.mail.sp1.yahoo.com with NNFMP; 08 Jun 2009 00:58:32 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 293687.91719.bm@omp409.mail.sp1.yahoo.com
Received: (qmail 27993 invoked by uid 60001); 8 Jun 2009 00:58:32 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1244422712; bh=YsdSF69/j6HuIITyzcy0p41Q6tDoush6E/Cjsis3xAA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=iKwLFxMcrqyGxxNT7sN4aj0Ty5GxtA03wCUUTHEv17zlh2uQOKK0pM3Ft/b9ZeH+V+WOuQaSnmLXJDRFiKhfSj7OG/HWDSuQqiGcvLb9ucgQeuXw5Au8AQnujBOXUXhgsZwSJJ8EHjylpF2ilr4DC39e6RGKb0qyLMnQY9ueqTI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=gE4Up/EqRfQi/aFwhfmvf5lpm1hkj6UfprfqZDiSlRvQufjNifs3aYMEKi5SZdQx9sD5HWyapCvlwF1UPdzpuF59tinzyN+2UnynRJbGrG5RaMo8VfY9e2kESPWynh9CGYFEmVxjdoxIUw6xqfjygdkxGmRnk1I3tnb1mvkn9nU=;
Message-ID: <101538.27115.qm@web45308.mail.sp1.yahoo.com>
X-YMail-OSG: syMVcfMVM1nRfNWT_XTmX0oUzlOKhYa0Yusl7wV2FX0hgT7aUg.rmzZ65dJqG7ycx9c4A.1CpuFZKjR3bGexf2gHB4qZjxVlZ56bKSXLMcDAPqvoRuuwXJGzEaFyAJNgcSvL9OSDJkZ0AI6VhHITbEWO6l2MM7XHTH8zHmL9gy1.HtO9GfvCKWMhZZnqV4KCPFZuXp.EUMf8Ck0kUXGKYYQKLakSCZjFPg1Elt6_f.jmkGLsJCsI5FF95.OTCKpwGIVQKbQ61E9mtH8qAQvd
Received: from [128.122.140.112] by web45308.mail.sp1.yahoo.com via HTTP; Sun, 07 Jun 2009 17:58:32 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
References: <780692.37408.qm@web45302.mail.sp1.yahoo.com>
Date: Sun, 7 Jun 2009 17:58:32 -0700 (PDT)
From: House Less <houselessinnewyork@yahoo.com>
Subject: Re: Retrieving the term vectors of a document in Nutch
To: java-user@lucene.apache.org
In-Reply-To: <780692.37408.qm@web45302.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


In retrospect, pardon my stupidity: surely it cannot be right that the term frequency vector for a page is not present within Nutch, for it needs this to compute the score for a page given a query. I would appreciate it if you would tell me where I may find it given a document number. Thank you.



      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 05:04:34 2009
Return-Path: <java-user-return-40648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66281 invoked from network); 8 Jun 2009 05:04:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 05:04:34 -0000
Received: (qmail 34870 invoked by uid 500); 8 Jun 2009 05:04:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34791 invoked by uid 500); 8 Jun 2009 05:04:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34781 invoked by uid 99); 8 Jun 2009 05:04:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 05:04:43 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.222.181 as permitted sender)
Received: from [209.85.222.181] (HELO mail-pz0-f181.google.com) (209.85.222.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 05:04:29 +0000
Received: by pzk11 with SMTP id 11so7368pzk.29
        for <java-user@lucene.apache.org>; Sun, 07 Jun 2009 22:04:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=9JcsQhnX15r0rR+5+fmmCvKHqkHk4Bzjq5rWAdSTkrc=;
        b=e/HTcjmylggE1oBO5xfKBg1L7tM9eNSuHS1RDI9URLyIl6Um/PoI3htwXLy/AdINwE
         ZGVSaXArlyJQgmpU9GBToM5K+qBWjkeTVq1AHCpVTjrEHUiDXaY9DKFbHY+KBLQWZpfp
         v9gZf5yRG9umXZAia8t5nNki+bPImnj8whiGU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=HhWUitu8b4AAtv12gjRsT2GOOkI9QC6rH92Oq40qym0ZcoN732Lto/lzNxaLQRwRcS
         AwtsXBMYBwUNmT+43ELd0TX88zF0Oftcl9ZX4Rkp83RTTEhmnxM7UAgNRLK7W+ITQob2
         OyqVQKIN3YGrpieJrpbbri9ci0KJFfRPHRJRk=
MIME-Version: 1.0
Received: by 10.142.242.11 with SMTP id p11mr2071040wfh.199.1244437447108; 
	Sun, 07 Jun 2009 22:04:07 -0700 (PDT)
In-Reply-To: <8f0ad1f30906060915sfa8cde9u2ecf8edbe4dca1f6@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8db6d74a0906050019u11dd39f9s76c2a7dbf4e5eb54@mail.gmail.com> 
	<8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com> 
	<8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com> 
	<8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com> 
	<8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com> 
	<8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com> 
	<8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com> 
	<8db6d74a0906060642g23eb5aefv2d9e9bc3e50bdb04@mail.gmail.com> 
	<8f0ad1f30906060915sfa8cde9u2ecf8edbe4dca1f6@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Mon, 8 Jun 2009 10:33:47 +0530
Message-ID: <8db6d74a0906072203n77e51df8i40266e1f92608415@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32f98fae88f046bcf2b44
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd32f98fae88f046bcf2b44
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Robert,
The problem is that worddelimiterfilter is doing its job for english content
but for non-english indian content which are unicoded it highlights the
searched word but alongwith that it also highlights the characters of that
word which was not hapenning without worddelimfilter, thats my concern. Say
for example I searched for a hindi word say "xyz ab" [assume these are in
hindi]  then in the search results it highlights these words but it also
highlights x/y/z/a/b whereever these letters appear which is obiviously
sounds bad. it should only highlight words not the letters therein. I hope I
made it clear. What could be the reason for this? Any idea on fixing the
same.

Thanks,
KK

On Sat, Jun 6, 2009 at 9:45 PM, Robert Muir <rcmuir@gmail.com> wrote:

> kk, i haven't had that experience with worddelimiterfilter on indian
> languages, is it possible you could provide me an example of how its
> creating nuisance?
>
> On Sat, Jun 6, 2009 at 9:42 AM, KK<dioxide.software@gmail.com> wrote:
> > Robert, I tried to use worddelimiterfilter from solr-nightly by putting
> it
> > in my working directory for this project, I set the parameters as you
> told
> > me. I must accept that its splitting words around those chars[like . @
> > etc]but alongwith that its messing with other non-english/unicode
> contents
> > and thats creating nuisance. I dont want worddelimiterfilter to fiddle
> > around with my non-english content.
> > This is what I'm doing,
> > /**
> >  * Analyzer for Indian language.
> >  */
> > public class IndicAnalyzer extends Analyzer {
> >  public TokenStream tokenStream(String fieldName, Reader reader) {
> >    TokenStream ts = new WhitespaceTokenizer(reader);
> >    ts = new WordDelimiterFilter(ts, 1, 1, 1, 1, 0);
> >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >    ts = new LowerCaseFilter(ts);
> >    ts = new PorterStemFilter(ts);
> >    return ts;
> >  }
> > }
> >
> > I've to use the deprecated API for setting 5 values, thats fine, but
> somehow
> > its messing with unicode content. How to get rid of that? Any thougts? It
> > seems setting those values is some proper way might fix the problem, I'm
> not
> > sure, though.
> >
> > Thanks,
> > KK.
> >
> >
> > On Fri, Jun 5, 2009 at 7:37 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> >> kk an easier solution to your first problem is to use
> >> worddelimiterfilterfactory if possible... you can get an instance of
> >> worddelimiter filter from that.
> >>
> >> thanks,
> >> robert
> >>
> >> On Fri, Jun 5, 2009 at 10:06 AM, Robert Muir<rcmuir@gmail.com> wrote:
> >> > kk as for your first issue, that WordDelimiterFilter is package
> >> > protected, one option is to make a copy of the code and change the
> >> > class declaration to public.
> >> > the other option is to put your entire analyzer in
> >> > 'org.apache.solr.analysis' package so that you can access it...
> >> >
> >> > for the 2nd issue, yes you need to supply some options to it. the
> >> > default options solr applies to type 'text' seemed to work well for me
> >> > with indic:
> >> >
> >> > {splitOnCaseChange=1, generateNumberParts=1, catenateWords=1,
> >> > generateWordParts=1, catenateAll=0, catenateNumbers=1}
> >> >
> >> > On Fri, Jun 5, 2009 at 9:12 AM, KK <dioxide.software@gmail.com>
> wrote:
> >> >>
> >> >> Thanks Robert. There is one problem though, I'm able to plugin the
> word
> >> >> delimiter filter from solr-nightly jar file. When I tried to do
> >> something
> >> >> like,
> >> >>  TokenStream ts = new WhitespaceTokenizer(reader);
> >> >>   ts = new WordDelimiterFilter(ts);
> >> >>   ts = new PorterStemmerFilter(ts);
> >> >>   ...rest as in the last mail...
> >> >>
> >> >> It gave me an error saying that
> >> >>
> >> >> org.apache.solr.analysis.WordDelimiterFilter is not public in
> >> >> org.apache.solr.analysis; cannot be accessed from outside package
> >> >> import org.apache.solr.analysis.WordDelimiterFilter;
> >> >>                               ^
> >> >> solrSearch/IndicAnalyzer.java:38: cannot find symbol
> >> >> symbol  : class WordDelimiterFilter
> >> >> location: class solrSearch.IndicAnalyzer
> >> >>    ts = new WordDelimiterFilter(ts);
> >> >>             ^
> >> >> 2 errors
> >> >>
> >> >> Then i tried to see the code for worddelimitefiter from solrnightly
> src
> >> and
> >> >> found that there are many deprecated constructors though they require
> a
> >> lot
> >> >> of parameters alongwith tokenstream. I went through the solr wiki for
> >> >> worddelimiterfilterfactory here,
> >> >>
> >>
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b83870ca7890cd73b193cefed83c283339089
> >> >> and say that there also its specified that we've to mention the
> >> parameters
> >> >> and both are different for indexing and querying.
> >> >> I'm kind of stuck here, how do I make use of worddelimiterfilter in
> my
> >> >> custom analyzer, I've to use it anyway.
> >> >> In my code I've to make use of worddelimiterfilter and not
> >> >> worddelimiterfilterfactory, right? I don't know whats the use of the
> >> other
> >> >> one. Anyway can you guide me getting rid of the above error. And yes
> >> I'll
> >> >> change the order of applying the filters as you said.
> >> >>
> >> >> Thanks,
> >> >> KK.
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >> On Fri, Jun 5, 2009 at 5:48 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> >> >>
> >> >> > KK, you got the right idea.
> >> >> >
> >> >> > though I think you might want to change the order, move the
> stopfilter
> >> >> > before the porter stem filter... otherwise it might not work
> >> correctly.
> >> >> >
> >> >> > On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com>
> >> wrote:
> >> >> >
> >> >> > > Thanks Robert. This is exactly what I did and  its working but
> >> delimiter
> >> >> > is
> >> >> > > missing I'm going to add that from solr-nightly.jar
> >> >> > >
> >> >> > > /**
> >> >> > >  * Analyzer for Indian language.
> >> >> > >  */
> >> >> > > public class IndicAnalyzer extends Analyzer {
> >> >> > >  public TokenStream tokenStream(String fieldName, Reader reader)
> {
> >> >> > >     TokenStream ts = new WhitespaceTokenizer(reader);
> >> >> > >    ts = new PorterStemFilter(ts);
> >> >> > >    ts = new LowerCaseFilter(ts);
> >> >> > >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >> >> > >    return ts;
> >> >> > >  }
> >> >> > > }
> >> >> > >
> >> >> > > Its able to do stemming/case-folding and supports search for both
> >> english
> >> >> > > and indic texts. let me try out the delimiter. Will update you on
> >> that.
> >> >> > >
> >> >> > > Thanks a lot.
> >> >> > > KK
> >> >> > >
> >> >> > > On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
> >> wrote:
> >> >> > >
> >> >> > > > i think you are on the right track... once you build your
> >> analyzer, put
> >> >> > > it
> >> >> > > > in your classpath and play around with it in luke and see if it
> >> does
> >> >> > what
> >> >> > > > you want.
> >> >> > > >
> >> >> > > > On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.com
> >
> >> wrote:
> >> >> > > >
> >> >> > > > > Hi Robert,
> >> >> > > > > This is what I copied from ThaiAnalyzer @ lucene contrib
> >> >> > > > >
> >> >> > > > > public class ThaiAnalyzer extends Analyzer {
> >> >> > > > >  public TokenStream tokenStream(String fieldName, Reader
> reader)
> >> {
> >> >> > > > >      TokenStream ts = new StandardTokenizer(reader);
> >> >> > > > >    ts = new StandardFilter(ts);
> >> >> > > > >    ts = new ThaiWordFilter(ts);
> >> >> > > > >    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >> >> > > > >    return ts;
> >> >> > > > >  }
> >> >> > > > > }
> >> >> > > > >
> >> >> > > > > Now as you said, I've to use whitespacetokenizer
> >> >> > > > > withworddelimitefilter[solr
> >> >> > > > > nightly.jar] stop wordremoval, porter stemmer etc , so it is
> >> >> > something
> >> >> > > > like
> >> >> > > > > this,
> >> >> > > > > public class IndicAnalyzer extends Analyzer {
> >> >> > > > >  public TokenStream tokenStream(String fieldName, Reader
> reader)
> >> {
> >> >> > > > >   TokenStream ts = new WhiteSpaceTokenizer(reader);
> >> >> > > > >   ts = new WordDelimiterFilter(ts);
> >> >> > > > >   ts = new LowerCaseFilter(ts);
> >> >> > > > >   ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS)
> //
> >> >> > english
> >> >> > > > > stop filter, is this the default one?
> >> >> > > > >   ts = new PorterFilter(ts);
> >> >> > > > >   return ts;
> >> >> > > > >  }
> >> >> > > > > }
> >> >> > > > >
> >> >> > > > > Does this sound OK? I think it will do the job...let me try
> it
> >> out..
> >> >> > > > > I dont need custom filter as per my requirement, at least not
> >> for
> >> >> > these
> >> >> > > > > basic things I'm doing? I think so...
> >> >> > > > >
> >> >> > > > > Thanks,
> >> >> > > > > KK.
> >> >> > > > >
> >> >> > > > >
> >> >> > > > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <
> rcmuir@gmail.com>
> >> >> > wrote:
> >> >> > > > >
> >> >> > > > > > KK well you can always get some good examples from the
> lucene
> >> >> > contrib
> >> >> > > > > > codebase.
> >> >> > > > > > For example, look at the DutchAnalyzer, especially:
> >> >> > > > > >
> >> >> > > > > > TokenStream tokenStream(String fieldName, Reader reader)
> >> >> > > > > >
> >> >> > > > > > See how it combines a specified tokenizer with various
> >> filters?
> >> >> > this
> >> >> > > is
> >> >> > > > > > what
> >> >> > > > > > you want to do, except of course you want to use different
> >> >> > tokenizer
> >> >> > > > and
> >> >> > > > > > filters.
> >> >> > > > > >
> >> >> > > > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <
> >> dioxide.software@gmail.com>
> >> >> > > wrote:
> >> >> > > > > >
> >> >> > > > > > > Thanks Muir.
> >> >> > > > > > > Thanks for letting me know that I dont need language
> >> identifiers.
> >> >> > > > > > >  I'll have a look and will try to write the analyzer. For
> my
> >> case
> >> >> > I
> >> >> > > > > think
> >> >> > > > > > > it
> >> >> > > > > > > wont be that difficult.
> >> >> > > > > > > BTW, can you point me to some sample codes/tutorials
> writing
> >> >> > custom
> >> >> > > > > > > analyzers. I could not find something in LIA2ndEdn. Is
> >> something
> >> >> > > > htere?
> >> >> > > > > > do
> >> >> > > > > > > let me know.
> >> >> > > > > > >
> >> >> > > > > > > Thanks,
> >> >> > > > > > > KK.
> >> >> > > > > > >
> >> >> > > > > > >
> >> >> > > > > > >
> >> >> > > > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <
> >> rcmuir@gmail.com>
> >> >> > > > wrote:
> >> >> > > > > > >
> >> >> > > > > > > > KK, for your case, you don't really need to go to the
> >> effort of
> >> >> > > > > > detecting
> >> >> > > > > > > > whether fragments are english or not.
> >> >> > > > > > > > Because the English stemmers in lucene will not modify
> >> your
> >> >> > Indic
> >> >> > > > > text,
> >> >> > > > > > > and
> >> >> > > > > > > > neither will the LowerCaseFilter.
> >> >> > > > > > > >
> >> >> > > > > > > > what you want to do is create a custom analyzer that
> works
> >> like
> >> >> > > > this
> >> >> > > > > > > >
> >> >> > > > > > > > -WhitespaceTokenizer with WordDelimiterFilter [from
> Solr
> >> >> > nightly
> >> >> > > > > jar],
> >> >> > > > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> >> >> > > > > > > >
> >> >> > > > > > > > Thanks,
> >> >> > > > > > > > Robert
> >> >> > > > > > > >
> >> >> > > > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <
> >> dioxide.software@gmail.com
> >> >> > >
> >> >> > > > > wrote:
> >> >> > > > > > > >
> >> >> > > > > > > > > Thank you all.
> >> >> > > > > > > > > To be frank I was using Solr in the begining half a
> >> month
> >> >> > ago.
> >> >> > > > The
> >> >> > > > > > > > > problem[rather bug] with solr was creation of new
> index
> >> on
> >> >> > the
> >> >> > > > fly.
> >> >> > > > > > > > Though
> >> >> > > > > > > > > they have a restful method for teh same, but it was
> not
> >> >> > > working.
> >> >> > > > If
> >> >> > > > > I
> >> >> > > > > > > > > remember properly one of Solr commiter "Noble Paul"[I
> >> dont
> >> >> > know
> >> >> > > > his
> >> >> > > > > > > real
> >> >> > > > > > > > > name] was trying to help me. I tried many nightly
> builds
> >> and
> >> >> > > > > spending
> >> >> > > > > > a
> >> >> > > > > > > > > couple of days stuck at that made me think of lucene
> and
> >> I
> >> >> > > > switched
> >> >> > > > > > to
> >> >> > > > > > > > it.
> >> >> > > > > > > > > Now after working with lucene which gives you full
> >> control of
> >> >> > > > > > > everything
> >> >> > > > > > > > I
> >> >> > > > > > > > > don't want to switch to Solr.[LOL, to me Solr:Lucene
> is
> >> >> > similar
> >> >> > > > to
> >> >> > > > > > > > > Window$:Linux, its my view only, though]. Coming back
> to
> >> the
> >> >> > > > point
> >> >> > > > > as
> >> >> > > > > > > Uwe
> >> >> > > > > > > > > mentioned that we can do the same thing in lucene as
> >> well,
> >> >> > what
> >> >> > > > is
> >> >> > > > > > > > > available
> >> >> > > > > > > > > in Solr, Solr is based on Lucene only, right?
> >> >> > > > > > > > > I request Uwe to give me some more ideas on using the
> >> >> > analyzers
> >> >> > > > > from
> >> >> > > > > > > solr
> >> >> > > > > > > > > that will do the job for me, handling a mix of both
> >> english
> >> >> > and
> >> >> > > > > > > > non-english
> >> >> > > > > > > > > content.
> >> >> > > > > > > > > Muir, can you give me a bit detail description of how
> to
> >> use
> >> >> > > the
> >> >> > > > > > > > > WordDelimiteFilter to do my job.
> >> >> > > > > > > > > On a side note, I was thingking of writing a simple
> >> analyzer
> >> >> > > that
> >> >> > > > > > will
> >> >> > > > > > > do
> >> >> > > > > > > > > the following,
> >> >> > > > > > > > > #. If the webpage fragment is non-english[for me its
> >> some
> >> >> > > indian
> >> >> > > > > > > > language]
> >> >> > > > > > > > > then index them as such, no stemming/ stop word
> removal
> >> to
> >> >> > > begin
> >> >> > > > > > with.
> >> >> > > > > > > As
> >> >> > > > > > > > I
> >> >> > > > > > > > > know its in UCN unicode something like
> >> >> > > > > \u0021\u0012\u34ae\u0031[just
> >> >> > > > > > a
> >> >> > > > > > > > > sample]
> >> >> > > > > > > > > # If the fragment is english then apply standard
> >> anlyzing
> >> >> > > process
> >> >> > > > > for
> >> >> > > > > > > > > english content. I've not thought of quering in the
> same
> >> way
> >> >> > as
> >> >> > > > of
> >> >> > > > > > now
> >> >> > > > > > > > i.e
> >> >> > > > > > > > > mix of non-english and engish words.
> >> >> > > > > > > > > Now to get all this,
> >> >> > > > > > > > >  #1. I need some sort of way which will let me know
> if
> >> the
> >> >> > > > content
> >> >> > > > > is
> >> >> > > > > > > > > english or not. If not english just add the tokens to
> >> the
> >> >> > > > document.
> >> >> > > > > > Do
> >> >> > > > > > > we
> >> >> > > > > > > > > really need language identifiers, as i dont have any
> >> other
> >> >> > > > content
> >> >> > > > > > that
> >> >> > > > > > > > > uses
> >> >> > > > > > > > > the same script as english other than those \u1234
> >> things for
> >> >> > > my
> >> >> > > > > > indian
> >> >> > > > > > > > > language content. Any smart hack/trick for the same?
> >> >> > > > > > > > >  #2. If the its english apply all normal process and
> add
> >> the
> >> >> > > > > stemmed
> >> >> > > > > > > > token
> >> >> > > > > > > > > to document.
> >> >> > > > > > > > > For all this I was thinking of iterating earch word
> of
> >> the
> >> >> > web
> >> >> > > > page
> >> >> > > > > > and
> >> >> > > > > > > > > apply the above procedure. And finallyadd  the newly
> >> created
> >> >> > > > > document
> >> >> > > > > > > to
> >> >> > > > > > > > > the
> >> >> > > > > > > > > index.
> >> >> > > > > > > > >
> >> >> > > > > > > > > I would like some one to guide me in this direction.
> I'm
> >> >> > pretty
> >> >> > > > > > people
> >> >> > > > > > > > must
> >> >> > > > > > > > > have done similar/same thing earlier, I request them
> to
> >> guide
> >> >> > > me/
> >> >> > > > > > point
> >> >> > > > > > > > me
> >> >> > > > > > > > > to some tutorials for the same.
> >> >> > > > > > > > > Else help me out writing a custom analyzer only if
> thats
> >> not
> >> >> > > > going
> >> >> > > > > to
> >> >> > > > > > > be
> >> >> > > > > > > > > too
> >> >> > > > > > > > > complex. LOL, I'm a new user to lucene and know
> basics
> >> of
> >> >> > Java
> >> >> > > > > > coding.
> >> >> > > > > > > > > Thank you very much.
> >> >> > > > > > > > >
> >> >> > > > > > > > > --KK.
> >> >> > > > > > > > >
> >> >> > > > > > > > >
> >> >> > > > > > > > >
> >> >> > > > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <
> >> >> > rcmuir@gmail.com>
> >> >> > > > > > wrote:
> >> >> > > > > > > > >
> >> >> > > > > > > > > > yes this is true. for starters KK, might be good to
> >> startup
> >> >> > > > solr
> >> >> > > > > > and
> >> >> > > > > > > > look
> >> >> > > > > > > > > > at
> >> >> > > > > > > > > >
> >> http://localhost:8983/solr/admin/analysis.jsp?highlight=on
> >> >> > > > > > > > > >
> >> >> > > > > > > > > > if you want to stick with lucene, the
> >> WordDelimiterFilter
> >> >> > is
> >> >> > > > the
> >> >> > > > > > > piece
> >> >> > > > > > > > > you
> >> >> > > > > > > > > > will want for your text, mainly for punctuation but
> >> also
> >> >> > for
> >> >> > > > > format
> >> >> > > > > > > > > > characters such as ZWJ/ZWNJ.
> >> >> > > > > > > > > >
> >> >> > > > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <
> >> >> > > uwe@thetaphi.de
> >> >> > > > >
> >> >> > > > > > > wrote:
> >> >> > > > > > > > > >
> >> >> > > > > > > > > > > You can also re-use the solr analyzers, as far as
> I
> >> found
> >> >> > > > out.
> >> >> > > > > > > There
> >> >> > > > > > > > is
> >> >> > > > > > > > > > an
> >> >> > > > > > > > > > > issue in jIRA/discussion on java-dev to merge
> them.
> >> >> > > > > > > > > > >
> >> >> > > > > > > > > > > -----
> >> >> > > > > > > > > > > Uwe Schindler
> >> >> > > > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> >> >> > > > > > > > > > > http://www.thetaphi.de
> >> >> > > > > > > > > > > eMail: uwe@thetaphi.de
> >> >> > > > > > > > > > >
> >> >> > > > > > > > > > >
> >> >> > > > > > > > > > > > -----Original Message-----
> >> >> > > > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
> >> >> > > > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> >> >> > > > > > > > > > > > To: java-user@lucene.apache.org
> >> >> > > > > > > > > > > > Subject: Re: How to support stemming and case
> >> folding
> >> >> > for
> >> >> > > > > > english
> >> >> > > > > > > > > > content
> >> >> > > > > > > > > > > > mixed with non-english content?
> >> >> > > > > > > > > > > >
> >> >> > > > > > > > > > > > KK, ok, so you only really want to stem the
> >> english.
> >> >> > This
> >> >> > > > is
> >> >> > > > > > > good.
> >> >> > > > > > > > > > > >
> >> >> > > > > > > > > > > > Is it possible for you to consider using solr?
> >> solr's
> >> >> > > > default
> >> >> > > > > > > > > analyzer
> >> >> > > > > > > > > > > for
> >> >> > > > > > > > > > > > type 'text' will be good for your case. it will
> do
> >> the
> >> >> > > > > > following
> >> >> > > > > > > > > > > > 1. tokenize on whitespace
> >> >> > > > > > > > > > > > 2. handle both indian language and english
> >> punctuation
> >> >> > > > > > > > > > > > 3. lowercase the english.
> >> >> > > > > > > > > > > > 4. stem the english.
> >> >> > > > > > > > > > > >
> >> >> > > > > > > > > > > > try a nightly build,
> >> >> > > > > > > > > > >
> >> http://people.apache.org/builds/lucene/solr/nightly/
> >> >> > > > > > > > > > > >
> >> >> > > > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
> >> >> > > > > dioxide.software@gmail.com
> >> >> > > > > > >
> >> >> > > > > > > > > wrote:
> >> >> > > > > > > > > > > >
> >> >> > > > > > > > > > > > > Muir, thanks for your response.
> >> >> > > > > > > > > > > > > I'm indexing indian language web pages which
> has
> >> got
> >> >> > > > > descent
> >> >> > > > > > > > amount
> >> >> > > > > > > > > > of
> >> >> > > > > > > > > > > > > english content mixed with therein. For the
> time
> >> >> > being
> >> >> > > > I'm
> >> >> > > > > > not
> >> >> > > > > > > > > going
> >> >> > > > > > > > > > to
> >> >> > > > > > > > > > > > use
> >> >> > > > > > > > > > > > > any stemmers as we don't have standard
> stemmers
> >> for
> >> >> > > > indian
> >> >> > > > > > > > > languages
> >> >> > > > > > > > > > .
> >> >> > > > > > > > > > > > So
> >> >> > > > > > > > > > > > > what I want to do is like this,
> >> >> > > > > > > > > > > > > Say I've a web page having hindi content with
> 5%
> >> >> > > english
> >> >> > > > > > > content.
> >> >> > > > > > > > > > Then
> >> >> > > > > > > > > > > > for
> >> >> > > > > > > > > > > > > hindi I want to use the basic white space
> >> analyzer as
> >> >> > > we
> >> >> > > > > dont
> >> >> > > > > > > > have
> >> >> > > > > > > > > > > > stemmers
> >> >> > > > > > > > > > > > > for this as I mentioned earlier and whereever
> >> english
> >> >> > > > > appears
> >> >> > > > > > I
> >> >> > > > > > > > > want
> >> >> > > > > > > > > > > > them
> >> >> > > > > > > > > > > > > to
> >> >> > > > > > > > > > > > > be stemmed tokenized etc[the standard process
> >> used
> >> >> > for
> >> >> > > > > > english
> >> >> > > > > > > > > > > content].
> >> >> > > > > > > > > > > > As
> >> >> > > > > > > > > > > > > of now I'm using whitespace analyzer for the
> >> full
> >> >> > > content
> >> >> > > > > > which
> >> >> > > > > > > > > > doesnot
> >> >> > > > > > > > > > > > > support case folding, stemming etc for teh
> >> content.
> >> >> > So
> >> >> > > if
> >> >> > > > > > there
> >> >> > > > > > > > is
> >> >> > > > > > > > > an
> >> >> > > > > > > > > > > > > english word say "Detection" indexed as such
> >> then
> >> >> > > > searching
> >> >> > > > > > for
> >> >> > > > > > > > > > > > detection
> >> >> > > > > > > > > > > > > or
> >> >> > > > > > > > > > > > > detect is not giving any results, which is
> the
> >> >> > expected
> >> >> > > > > > > behavior,
> >> >> > > > > > > > > but
> >> >> > > > > > > > > > I
> >> >> > > > > > > > > > > > > want
> >> >> > > > > > > > > > > > > this kind of queries to give results.
> >> >> > > > > > > > > > > > > I hope I made it clear. Let me know any ideas
> on
> >> >> > doing
> >> >> > > > the
> >> >> > > > > > > same.
> >> >> > > > > > > > > And
> >> >> > > > > > > > > > > one
> >> >> > > > > > > > > > > > > more thing, I'm storing the full webpage
> content
> >> >> > under
> >> >> > > a
> >> >> > > > > > single
> >> >> > > > > > > > > > field,
> >> >> > > > > > > > > > > I
> >> >> > > > > > > > > > > > > hope this will not make any difference,
> right?
> >> >> > > > > > > > > > > > > It seems I've to use language identifiers,
> but
> >> do we
> >> >> > > > really
> >> >> > > > > > > need
> >> >> > > > > > > > > > that?
> >> >> > > > > > > > > > > > > Because we've only non-english content mixed
> >> with
> >> >> > > > > english[and
> >> >> > > > > > > not
> >> >> > > > > > > > > > > french
> >> >> > > > > > > > > > > > or
> >> >> > > > > > > > > > > > > russian etc].
> >> >> > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > What is the best way of approaching the
> problem?
> >> Any
> >> >> > > > > > thoughts!
> >> >> > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > Thanks,
> >> >> > > > > > > > > > > > > KK.
> >> >> > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Muir <
> >> >> > > > > > rcmuir@gmail.com>
> >> >> > > > > > > > > > wrote:
> >> >> > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > > KK, is all of your latin script text
> actually
> >> >> > > english?
> >> >> > > > Is
> >> >> > > > > > > there
> >> >> > > > > > > > > > stuff
> >> >> > > > > > > > > > > > > like
> >> >> > > > > > > > > > > > > > german or french mixed in?
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > > And for your non-english content (your
> >> examples
> >> >> > have
> >> >> > > > been
> >> >> > > > > > > > indian
> >> >> > > > > > > > > > > > writing
> >> >> > > > > > > > > > > > > > systems), is it generally true that if you
> had
> >> >> > > > > devanagari,
> >> >> > > > > > > you
> >> >> > > > > > > > > can
> >> >> > > > > > > > > > > > assume
> >> >> > > > > > > > > > > > > > its hindi? or is there stuff like marathi
> >> mixed in?
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > > Reason I say this is to invoke the right
> >> stemmers,
> >> >> > > you
> >> >> > > > > > really
> >> >> > > > > > > > > need
> >> >> > > > > > > > > > > > some
> >> >> > > > > > > > > > > > > > language detection, but perhaps in your
> case
> >> you
> >> >> > can
> >> >> > > > > cheat
> >> >> > > > > > > and
> >> >> > > > > > > > > > detect
> >> >> > > > > > > > > > > > > this
> >> >> > > > > > > > > > > > > > based on scripts...
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > > Thanks,
> >> >> > > > > > > > > > > > > > Robert
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> >> >> > > > > > > > dioxide.software@gmail.com>
> >> >> > > > > > > > > > > > wrote:
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > > > Hi All,
> >> >> > > > > > > > > > > > > > > I'm indexing some non-english content.
> But
> >> the
> >> >> > page
> >> >> > > > > also
> >> >> > > > > > > > > contains
> >> >> > > > > > > > > > > > > english
> >> >> > > > > > > > > > > > > > > content. As of now I'm using
> >> WhitespaceAnalyzer
> >> >> > for
> >> >> > > > all
> >> >> > > > > > > > content
> >> >> > > > > > > > > > and
> >> >> > > > > > > > > > > > I'm
> >> >> > > > > > > > > > > > > > > storing the full webpage content under a
> >> single
> >> >> > > > filed.
> >> >> > > > > > Now
> >> >> > > > > > > we
> >> >> > > > > > > > > > > > require
> >> >> > > > > > > > > > > > > to
> >> >> > > > > > > > > > > > > > > support case folding and stemmming for
> the
> >> >> > english
> >> >> > > > > > content
> >> >> > > > > > > > > > > > intermingled
> >> >> > > > > > > > > > > > > > > with
> >> >> > > > > > > > > > > > > > > non-english content. I must metion that
> we
> >> dont
> >> >> > > have
> >> >> > > > > > > stemming
> >> >> > > > > > > > > and
> >> >> > > > > > > > > > > > case
> >> >> > > > > > > > > > > > > > > folding for these non-english content.
> I'm
> >> stuck
> >> >> > > with
> >> >> > > > > > this.
> >> >> > > > > > > > > Some
> >> >> > > > > > > > > > > one
> >> >> > > > > > > > > > > > do
> >> >> > > > > > > > > > > > > > let
> >> >> > > > > > > > > > > > > > > me know how to proceed for fixing this
> >> issue.
> >> >> > > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > > > Thanks,
> >> >> > > > > > > > > > > > > > > KK.
> >> >> > > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > > > --
> >> >> > > > > > > > > > > > > > Robert Muir
> >> >> > > > > > > > > > > > > > rcmuir@gmail.com
> >> >> > > > > > > > > > > > > >
> >> >> > > > > > > > > > > > >
> >> >> > > > > > > > > > > >
> >> >> > > > > > > > > > > >
> >> >> > > > > > > > > > > >
> >> >> > > > > > > > > > > > --
> >> >> > > > > > > > > > > > Robert Muir
> >> >> > > > > > > > > > > > rcmuir@gmail.com
> >> >> > > > > > > > > > >
> >> >> > > > > > > > > > >
> >> >> > > > > > > > > > >
> >> >> > > > > > >
> >> >> > >
> >> ---------------------------------------------------------------------
> >> >> > > > > > > > > > > To unsubscribe, e-mail:
> >> >> > > > > java-user-unsubscribe@lucene.apache.org
> >> >> > > > > > > > > > > For additional commands, e-mail:
> >> >> > > > > > java-user-help@lucene.apache.org
> >> >> > > > > > > > > > >
> >> >> > > > > > > > > > >
> >> >> > > > > > > > > >
> >> >> > > > > > > > > >
> >> >> > > > > > > > > > --
> >> >> > > > > > > > > > Robert Muir
> >> >> > > > > > > > > > rcmuir@gmail.com
> >> >> > > > > > > > > >
> >> >> > > > > > > > >
> >> >> > > > > > > >
> >> >> > > > > > > >
> >> >> > > > > > > >
> >> >> > > > > > > > --
> >> >> > > > > > > > Robert Muir
> >> >> > > > > > > > rcmuir@gmail.com
> >> >> > > > > > > >
> >> >> > > > > > >
> >> >> > > > > >
> >> >> > > > > >
> >> >> > > > > >
> >> >> > > > > > --
> >> >> > > > > > Robert Muir
> >> >> > > > > > rcmuir@gmail.com
> >> >> > > > > >
> >> >> > > > >
> >> >> > > >
> >> >> > > >
> >> >> > > >
> >> >> > > > --
> >> >> > > > Robert Muir
> >> >> > > > rcmuir@gmail.com
> >> >> > > >
> >> >> > >
> >> >> >
> >> >> >
> >> >> >
> >> >> > --
> >> >> > Robert Muir
> >> >> > rcmuir@gmail.com
> >> >> >
> >> >
> >> >
> >> >
> >> > --
> >> > Robert Muir
> >> > rcmuir@gmail.com
> >> >
> >>
> >>
> >>
> >> --
> >> Robert Muir
> >> rcmuir@gmail.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd32f98fae88f046bcf2b44--

From java-user-return-40649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 07:51:02 2009
Return-Path: <java-user-return-40649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46338 invoked from network); 8 Jun 2009 07:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 07:51:02 -0000
Received: (qmail 73178 invoked by uid 500); 8 Jun 2009 07:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73103 invoked by uid 500); 8 Jun 2009 07:51:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73092 invoked by uid 99); 8 Jun 2009 07:51:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 07:51:09 +0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=MIME_BASE64_TEXT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.85.12] (HELO smtp125.mail.mud.yahoo.com) (209.191.85.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jun 2009 07:50:56 +0000
Received: (qmail 14347 invoked from network); 8 Jun 2009 07:50:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=Uz9S0fHUkJS0WYMMzTap9Q0PFy54Vu9QNUYae7Iq5+8gZO7koXo0eaLOEBtRz1NW5hbH4ArEWCy5WUhveOw2wWoELjGIGKz18iCaXw1zrqCZ/G/7O0uTlJzxyQyRxYNRYvZbfXn44CpkHk2E0+6P0FrNSNqUfp6GWhiC1hnO0Ow=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp125.mail.mud.yahoo.com with SMTP; 8 Jun 2009 07:50:33 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: u7CDmP0VM1mv_i2EiMvYOMIS8TRTWhu9jZ8C1vX7j9E69IlcfmgpW2NBC.MBjl4iMuzVrd5WqOvgUPCCDH0hOeJO9g4Nih_9LbGNa7QxfINbdRXI5F6rpBj6WuSyrTbXYcaUqPBtTo6kBzdSst2iTVy.RvnQH4BIeYLcb6komjTLFrArrPemhc3km2jMXONNTfVWzZ9LbYK1hpYHCGHPIj1b5PW6mZROochARn24ACfFWTJjZag8y43q2Gj4LBkc54hNL0BTNTmcDraQvwZOous0BMZgqMReStifcxKKk_qzXxDD1OQa
X-Yahoo-Newman-Property: ymail-3
Message-ID: <005b01c9e80d$cd8a46a0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <a2bf3b4a0906062302q2ad07a63tfccfc35db97de144@mail.gmail.com>
Subject: Re: looking for some help
Date: Mon, 8 Jun 2009 13:20:29 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

THVjZW5lIEphdmEgaXMgdGhlIGJhc2UgZm9yIGFsbC4gaHR0cDovL2x1Y2VuZS5hcGFjaGUub3Jn
L2phdmEvZG9jcy9pbmRleC5odG1sDQoNClJlZ2FyZHMNCkdhbmVzaA0KDQotLS0tLSBPcmlnaW5h
bCBNZXNzYWdlIC0tLS0tIA0KRnJvbTogIk1vaGl0IFZlcm1hIiA8bW9oaXQudmVybWEuaW5AZ21h
aWwuY29tPg0KVG86IDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+DQpTZW50OiBTdW5kYXks
IEp1bmUgMDcsIDIwMDkgMTE6MzIgQU0NClN1YmplY3Q6IGxvb2tpbmcgZm9yIHNvbWUgaGVscA0K
DQoNCj4gSGksDQo+IEkgYW0gY3VycmVudGx5IHdvcmtpbmcgb24gYSBwcm9qZWN0IHdoZXJlIEkg
bmVlZCBhIGRlc2t0b3Agc2VhcmNoIEFQSQ0KPiBpbiBKYXZhLCBJIGxvb2tlZCBhcm91bmQgYW5k
IGZvdW5kIGEgbG90IG9mIGhpZ2ggbGV2ZWwgamF2YSBwcm9qZWN0cw0KPiBiYXNlZCBvbiBMdWNl
bmUsIEkgZ290IGEgbG90IG9mIGxpbmtzIHBvaW50aW5nIHRvIG9uZSAiTHVjZW5lIERlc2t0b3Ai
DQo+IC0gSmF2YSBiYXNlZCBwcm9qZWN0IHRvIGNvbXBldGUgd2l0aCBHb29nbGUgRGVza3RvcCwg
YnV0IHRob3NlIGxpbmtzDQo+IGFyZSBub3Qgd29ya2luZyBub3csIGFuZCBMdWNlbmUgRGVza3Rv
cCBzZWVtcyB0byBiZSBhIHByb2plY3Qgd3JpdHRlbg0KPiBpbiBDIyBmb3IgV2luZG93cyBwbGF0
Zm9ybS4NCj4gDQo+IEkgd2FudGVkIHRvIGtub3cgaWYgdGhlIEx1Y2VuZSBEZXNrdG9wIChKYXZh
KSBwcm9qZWN0IHdoaWNoIGlzDQo+IG11bHRpLXBsYXRmb3JtIHN0aWxsIGFjdGl2ZSB3aXRoIGEg
ZGlmZmVyZW50IG5hbWU/IElmIG5vdCwgdGhlbiBjYW4gSQ0KPiB1c2UgYW55IG9mIHRoZSBvdGhl
ciBMdWNlbmUgc3ViLXByb2plY3RzIGZvciB0aGUgc2FtZT8gQW5kIHllYWggYnR3LA0KPiBpcyB0
aGVyZSBhIEphdmEgQVBJIGZvciBiZWFnbGUgb3Igc3RyaWdpPw0KPiANCj4gVGhhbmtzIGEgbG90
LA0KPiANCj4gLS0gDQo+IE1vaGl0IFZlcm1hDQo+IEJJVFMgUGlsYW5pLUdvYSBDYW1wdXMNCj4g
DQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUt
bWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4=

Send instant messages to your online friends http://in.messenger.yahoo.com 


From java-user-return-40650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 09:22:22 2009
Return-Path: <java-user-return-40650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70831 invoked from network); 8 Jun 2009 09:22:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 09:22:22 -0000
Received: (qmail 58866 invoked by uid 500); 8 Jun 2009 09:22:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58786 invoked by uid 500); 8 Jun 2009 09:22:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58767 invoked by uid 99); 8 Jun 2009 09:22:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 09:22:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dioxide.software@gmail.com designates 209.85.222.181 as permitted sender)
Received: from [209.85.222.181] (HELO mail-pz0-f181.google.com) (209.85.222.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 09:22:21 +0000
Received: by pzk11 with SMTP id 11so124741pzk.29
        for <multiple recipients>; Mon, 08 Jun 2009 02:22:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=Dqto8S75N7jPEUsRjYnNwJZ5wr585XoOvLe2Y26IxHw=;
        b=o8UVC5EYe6xSnQQ9Tu7uWaB0HoP3xmq38EN0suf2DqU9JrcGkPMn+6BH+n118inJ9V
         NoyruMAhDB5hDHvwtaLHRUWQtTi74wWv+tiUY5zkbQRxm+j2EYv7jbT4ylRkuwM7d6Qj
         4GVvzuZ3HyivZPwquTUjPv6N7Bg6NAL2QTJqE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=NTYb9D2P/k4CAqxqfUzPPvTDDE6hZbJQoLcVEDq55Xx+sFm57fyvh53ditLKe5Jt9Y
         hnQcAoClCAp279jEFUAFhGWMMpmQBaGO3waDF8t2ifoH2rVPsMYiNq/m053faxiSG59O
         5aMOhaB4bCYuAOVLlpXnDCkBz9sX+wEmQHTjs=
MIME-Version: 1.0
Received: by 10.142.177.13 with SMTP id z13mr2375829wfe.79.1244452921293; Mon, 
	08 Jun 2009 02:22:01 -0700 (PDT)
From: KK <dioxide.software@gmail.com>
Date: Mon, 8 Jun 2009 14:51:41 +0530
Message-ID: <8db6d74a0906080221j3b589bcbh9f2790d6d3100f76@mail.gmail.com>
Subject: How to make wordDelimiterFilter[pulled from Solr nighly] to not break 
	non-english words in a wrong way in lucene indexing/searching?
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd173d2503d6a046bd2c630
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd173d2503d6a046bd2c630
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi All,
I'm trying to index some indian web page content which are basically a mix
of indian and say 5% of english content in the same page itself. For all
this I can not use standard or simple analyzer as they break the non-english
words in a wrong places say[because the isLetter(ch) happens to be false for
them, even if they are part of a word]. So I wrote/extended the anayzer that
does the following,
public class IndicAnalyzer extends Analyzer {
  public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream ts = new WhitespaceTokenizer(reader);
    //ts = new WordDelimiterFilter(ts, 1, 1, 1, 1, 0);
    ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
    ts = new LowerCaseFilter(ts);
    ts = new PorterStemFilter(ts);
    return ts;
  }
}
This is working fine to some extent when the line commented above is left as
such, but its not able to give me the results when the documtnt contains a
string say "hello@how.com" and the searched query is hello, this is expected
as the above code doesnot do any word delimiting around these basic
characters [like @ . , etc ].
Now the problem is when I'm trying to use wordDelimiterFilter[hte commented
out line, this filter I got from solr] it is breaking say hindi words around
some characters which are actually part of a word. After going through the
code for this filter I found that it is using the isLetter() standard
fuction of java which I think returns false for those hindi characters
around which it is breaking the words. As per javadoc isLetter() is Unicode
compliant, right? so can't we say that it is aware of the above characters
that they are word delimiters, then why is this breaking around those
characters. I'm stuck and dont know how to get rid of the problem. And
because of this problem when I search for say a hindi word "helo" , assuming
its hindi, it highlights this word but alognwith that it also highlights the
letters of this word h/e/l/o whereever it finds it which it should not do,
right?
I request both Solr and Lucene users to guide me in fixing this issue. BTW,
do we need to do some sort of normalization for the content before sending
it to lucene indexer? just a thought, i don know whats the way out?

--000e0cd173d2503d6a046bd2c630--

From java-user-return-40651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 10:05:11 2009
Return-Path: <java-user-return-40651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 877 invoked from network); 8 Jun 2009 10:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 10:05:11 -0000
Received: (qmail 22937 invoked by uid 500); 8 Jun 2009 10:05:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22859 invoked by uid 500); 8 Jun 2009 10:05:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22849 invoked by uid 99); 8 Jun 2009 10:05:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 10:05:20 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 10:05:09 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1426056ywt.5
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 03:04:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=XdqqG78ZtgmfNWmmtshYkEoYAG7Vu/vcTNPtrwTURow=;
        b=FXBxba9DfF5l32PoYy6xEWFPLpdz7mQwGmGXett8O0hE3C6iEl91JnBM2gDfVAIqDF
         VmNL9272c4M6mr/meCvwvhyss3alqe/PFT/w1Z+5rtyrAlLD3XVgL0wHwe1EUJ9d/fuG
         UzIKwvx6L/WXwrCxoqS6QzH4eWaqcA85xsO2A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Tiq5kJI7yEuw5Hzm07ZUXsN3t+8U0pnBUPV4UIV8FeCllkxbVIqmncDPEatTrBRuol
         PAjEFpj5vlddDKwbIqYCzqbAAnp3MuBtSJhU29QzVAYWaHr5QDtoEe5Vdk+ju5oXZbvc
         3fK74pNbzcrhpZ9PpEJKLqhoUpTUIM+YRI33A=
MIME-Version: 1.0
Received: by 10.100.171.13 with SMTP id t13mr822244ane.29.1244455488530; Mon, 
	08 Jun 2009 03:04:48 -0700 (PDT)
In-Reply-To: <8db6d74a0906072203n77e51df8i40266e1f92608415@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8f0ad1f30906050500s34a0d2b8xd1581ad7208e80e9@mail.gmail.com>
	 <8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com>
	 <8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com>
	 <8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com>
	 <8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com>
	 <8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com>
	 <8db6d74a0906060642g23eb5aefv2d9e9bc3e50bdb04@mail.gmail.com>
	 <8f0ad1f30906060915sfa8cde9u2ecf8edbe4dca1f6@mail.gmail.com>
	 <8db6d74a0906072203n77e51df8i40266e1f92608415@mail.gmail.com>
Date: Mon, 8 Jun 2009 06:04:48 -0400
Message-ID: <8f0ad1f30906080304w2fb90b31l5763adc1c4438928@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

KK can you give me an example of some indian text for which it is doing thi=
s?

Thanks!

On Mon, Jun 8, 2009 at 1:03 AM, KK<dioxide.software@gmail.com> wrote:
> Hi Robert,
> The problem is that worddelimiterfilter is doing its job for english cont=
ent
> but for non-english indian content which are unicoded it highlights the
> searched word but alongwith that it also highlights the characters of tha=
t
> word which was not hapenning without worddelimfilter, thats my concern. S=
ay
> for example I searched for a hindi word say "xyz ab" [assume these are in
> hindi] =C2=A0then in the search results it highlights these words but it =
also
> highlights x/y/z/a/b whereever these letters appear which is obiviously
> sounds bad. it should only highlight words not the letters therein. I hop=
e I
> made it clear. What could be the reason for this? Any idea on fixing the
> same.
>
> Thanks,
> KK
>
> On Sat, Jun 6, 2009 at 9:45 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
>> kk, i haven't had that experience with worddelimiterfilter on indian
>> languages, is it possible you could provide me an example of how its
>> creating nuisance?
>>
>> On Sat, Jun 6, 2009 at 9:42 AM, KK<dioxide.software@gmail.com> wrote:
>> > Robert, I tried to use worddelimiterfilter from solr-nightly by puttin=
g
>> it
>> > in my working directory for this project, I set the parameters as you
>> told
>> > me. I must accept that its splitting words around those chars[like . @
>> > etc]but alongwith that its messing with other non-english/unicode
>> contents
>> > and thats creating nuisance. I dont want worddelimiterfilter to fiddle
>> > around with my non-english content.
>> > This is what I'm doing,
>> > /**
>> > =C2=A0* Analyzer for Indian language.
>> > =C2=A0*/
>> > public class IndicAnalyzer extends Analyzer {
>> > =C2=A0public TokenStream tokenStream(String fieldName, Reader reader) =
{
>> > =C2=A0 =C2=A0TokenStream ts =3D new WhitespaceTokenizer(reader);
>> > =C2=A0 =C2=A0ts =3D new WordDelimiterFilter(ts, 1, 1, 1, 1, 0);
>> > =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS=
);
>> > =C2=A0 =C2=A0ts =3D new LowerCaseFilter(ts);
>> > =C2=A0 =C2=A0ts =3D new PorterStemFilter(ts);
>> > =C2=A0 =C2=A0return ts;
>> > =C2=A0}
>> > }
>> >
>> > I've to use the deprecated API for setting 5 values, thats fine, but
>> somehow
>> > its messing with unicode content. How to get rid of that? Any thougts?=
 It
>> > seems setting those values is some proper way might fix the problem, I=
'm
>> not
>> > sure, though.
>> >
>> > Thanks,
>> > KK.
>> >
>> >
>> > On Fri, Jun 5, 2009 at 7:37 PM, Robert Muir <rcmuir@gmail.com> wrote:
>> >
>> >> kk an easier solution to your first problem is to use
>> >> worddelimiterfilterfactory if possible... you can get an instance of
>> >> worddelimiter filter from that.
>> >>
>> >> thanks,
>> >> robert
>> >>
>> >> On Fri, Jun 5, 2009 at 10:06 AM, Robert Muir<rcmuir@gmail.com> wrote:
>> >> > kk as for your first issue, that WordDelimiterFilter is package
>> >> > protected, one option is to make a copy of the code and change the
>> >> > class declaration to public.
>> >> > the other option is to put your entire analyzer in
>> >> > 'org.apache.solr.analysis' package so that you can access it...
>> >> >
>> >> > for the 2nd issue, yes you need to supply some options to it. the
>> >> > default options solr applies to type 'text' seemed to work well for=
 me
>> >> > with indic:
>> >> >
>> >> > {splitOnCaseChange=3D1, generateNumberParts=3D1, catenateWords=3D1,
>> >> > generateWordParts=3D1, catenateAll=3D0, catenateNumbers=3D1}
>> >> >
>> >> > On Fri, Jun 5, 2009 at 9:12 AM, KK <dioxide.software@gmail.com>
>> wrote:
>> >> >>
>> >> >> Thanks Robert. There is one problem though, I'm able to plugin the
>> word
>> >> >> delimiter filter from solr-nightly jar file. When I tried to do
>> >> something
>> >> >> like,
>> >> >> =C2=A0TokenStream ts =3D new WhitespaceTokenizer(reader);
>> >> >> =C2=A0 ts =3D new WordDelimiterFilter(ts);
>> >> >> =C2=A0 ts =3D new PorterStemmerFilter(ts);
>> >> >> =C2=A0 ...rest as in the last mail...
>> >> >>
>> >> >> It gave me an error saying that
>> >> >>
>> >> >> org.apache.solr.analysis.WordDelimiterFilter is not public in
>> >> >> org.apache.solr.analysis; cannot be accessed from outside package
>> >> >> import org.apache.solr.analysis.WordDelimiterFilter;
>> >> >> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
>> >> >> solrSearch/IndicAnalyzer.java:38: cannot find symbol
>> >> >> symbol =C2=A0: class WordDelimiterFilter
>> >> >> location: class solrSearch.IndicAnalyzer
>> >> >> =C2=A0 =C2=A0ts =3D new WordDelimiterFilter(ts);
>> >> >> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
>> >> >> 2 errors
>> >> >>
>> >> >> Then i tried to see the code for worddelimitefiter from solrnightl=
y
>> src
>> >> and
>> >> >> found that there are many deprecated constructors though they requ=
ire
>> a
>> >> lot
>> >> >> of parameters alongwith tokenstream. I went through the solr wiki =
for
>> >> >> worddelimiterfilterfactory here,
>> >> >>
>> >>
>> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b838=
70ca7890cd73b193cefed83c283339089
>> >> >> and say that there also its specified that we've to mention the
>> >> parameters
>> >> >> and both are different for indexing and querying.
>> >> >> I'm kind of stuck here, how do I make use of worddelimiterfilter i=
n
>> my
>> >> >> custom analyzer, I've to use it anyway.
>> >> >> In my code I've to make use of worddelimiterfilter and not
>> >> >> worddelimiterfilterfactory, right? I don't know whats the use of t=
he
>> >> other
>> >> >> one. Anyway can you guide me getting rid of the above error. And y=
es
>> >> I'll
>> >> >> change the order of applying the filters as you said.
>> >> >>
>> >> >> Thanks,
>> >> >> KK.
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >> On Fri, Jun 5, 2009 at 5:48 PM, Robert Muir <rcmuir@gmail.com>
>> wrote:
>> >> >>
>> >> >> > KK, you got the right idea.
>> >> >> >
>> >> >> > though I think you might want to change the order, move the
>> stopfilter
>> >> >> > before the porter stem filter... otherwise it might not work
>> >> correctly.
>> >> >> >
>> >> >> > On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com>
>> >> wrote:
>> >> >> >
>> >> >> > > Thanks Robert. This is exactly what I did and =C2=A0its workin=
g but
>> >> delimiter
>> >> >> > is
>> >> >> > > missing I'm going to add that from solr-nightly.jar
>> >> >> > >
>> >> >> > > /**
>> >> >> > > =C2=A0* Analyzer for Indian language.
>> >> >> > > =C2=A0*/
>> >> >> > > public class IndicAnalyzer extends Analyzer {
>> >> >> > > =C2=A0public TokenStream tokenStream(String fieldName, Reader =
reader)
>> {
>> >> >> > > =C2=A0 =C2=A0 TokenStream ts =3D new WhitespaceTokenizer(reade=
r);
>> >> >> > > =C2=A0 =C2=A0ts =3D new PorterStemFilter(ts);
>> >> >> > > =C2=A0 =C2=A0ts =3D new LowerCaseFilter(ts);
>> >> >> > > =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_ST=
OP_WORDS);
>> >> >> > > =C2=A0 =C2=A0return ts;
>> >> >> > > =C2=A0}
>> >> >> > > }
>> >> >> > >
>> >> >> > > Its able to do stemming/case-folding and supports search for b=
oth
>> >> english
>> >> >> > > and indic texts. let me try out the delimiter. Will update you=
 on
>> >> that.
>> >> >> > >
>> >> >> > > Thanks a lot.
>> >> >> > > KK
>> >> >> > >
>> >> >> > > On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.com>
>> >> wrote:
>> >> >> > >
>> >> >> > > > i think you are on the right track... once you build your
>> >> analyzer, put
>> >> >> > > it
>> >> >> > > > in your classpath and play around with it in luke and see if=
 it
>> >> does
>> >> >> > what
>> >> >> > > > you want.
>> >> >> > > >
>> >> >> > > > On Fri, Jun 5, 2009 at 3:19 AM, KK <dioxide.software@gmail.c=
om
>> >
>> >> wrote:
>> >> >> > > >
>> >> >> > > > > Hi Robert,
>> >> >> > > > > This is what I copied from ThaiAnalyzer @ lucene contrib
>> >> >> > > > >
>> >> >> > > > > public class ThaiAnalyzer extends Analyzer {
>> >> >> > > > > =C2=A0public TokenStream tokenStream(String fieldName, Rea=
der
>> reader)
>> >> {
>> >> >> > > > > =C2=A0 =C2=A0 =C2=A0TokenStream ts =3D new StandardTokeniz=
er(reader);
>> >> >> > > > > =C2=A0 =C2=A0ts =3D new StandardFilter(ts);
>> >> >> > > > > =C2=A0 =C2=A0ts =3D new ThaiWordFilter(ts);
>> >> >> > > > > =C2=A0 =C2=A0ts =3D new StopFilter(ts, StopAnalyzer.ENGLIS=
H_STOP_WORDS);
>> >> >> > > > > =C2=A0 =C2=A0return ts;
>> >> >> > > > > =C2=A0}
>> >> >> > > > > }
>> >> >> > > > >
>> >> >> > > > > Now as you said, I've to use whitespacetokenizer
>> >> >> > > > > withworddelimitefilter[solr
>> >> >> > > > > nightly.jar] stop wordremoval, porter stemmer etc , so it =
is
>> >> >> > something
>> >> >> > > > like
>> >> >> > > > > this,
>> >> >> > > > > public class IndicAnalyzer extends Analyzer {
>> >> >> > > > > =C2=A0public TokenStream tokenStream(String fieldName, Rea=
der
>> reader)
>> >> {
>> >> >> > > > > =C2=A0 TokenStream ts =3D new WhiteSpaceTokenizer(reader);
>> >> >> > > > > =C2=A0 ts =3D new WordDelimiterFilter(ts);
>> >> >> > > > > =C2=A0 ts =3D new LowerCaseFilter(ts);
>> >> >> > > > > =C2=A0 ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP=
_WORDS)
>> //
>> >> >> > english
>> >> >> > > > > stop filter, is this the default one?
>> >> >> > > > > =C2=A0 ts =3D new PorterFilter(ts);
>> >> >> > > > > =C2=A0 return ts;
>> >> >> > > > > =C2=A0}
>> >> >> > > > > }
>> >> >> > > > >
>> >> >> > > > > Does this sound OK? I think it will do the job...let me tr=
y
>> it
>> >> out..
>> >> >> > > > > I dont need custom filter as per my requirement, at least =
not
>> >> for
>> >> >> > these
>> >> >> > > > > basic things I'm doing? I think so...
>> >> >> > > > >
>> >> >> > > > > Thanks,
>> >> >> > > > > KK.
>> >> >> > > > >
>> >> >> > > > >
>> >> >> > > > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <
>> rcmuir@gmail.com>
>> >> >> > wrote:
>> >> >> > > > >
>> >> >> > > > > > KK well you can always get some good examples from the
>> lucene
>> >> >> > contrib
>> >> >> > > > > > codebase.
>> >> >> > > > > > For example, look at the DutchAnalyzer, especially:
>> >> >> > > > > >
>> >> >> > > > > > TokenStream tokenStream(String fieldName, Reader reader)
>> >> >> > > > > >
>> >> >> > > > > > See how it combines a specified tokenizer with various
>> >> filters?
>> >> >> > this
>> >> >> > > is
>> >> >> > > > > > what
>> >> >> > > > > > you want to do, except of course you want to use differe=
nt
>> >> >> > tokenizer
>> >> >> > > > and
>> >> >> > > > > > filters.
>> >> >> > > > > >
>> >> >> > > > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <
>> >> dioxide.software@gmail.com>
>> >> >> > > wrote:
>> >> >> > > > > >
>> >> >> > > > > > > Thanks Muir.
>> >> >> > > > > > > Thanks for letting me know that I dont need language
>> >> identifiers.
>> >> >> > > > > > > =C2=A0I'll have a look and will try to write the analy=
zer. For
>> my
>> >> case
>> >> >> > I
>> >> >> > > > > think
>> >> >> > > > > > > it
>> >> >> > > > > > > wont be that difficult.
>> >> >> > > > > > > BTW, can you point me to some sample codes/tutorials
>> writing
>> >> >> > custom
>> >> >> > > > > > > analyzers. I could not find something in LIA2ndEdn. Is
>> >> something
>> >> >> > > > htere?
>> >> >> > > > > > do
>> >> >> > > > > > > let me know.
>> >> >> > > > > > >
>> >> >> > > > > > > Thanks,
>> >> >> > > > > > > KK.
>> >> >> > > > > > >
>> >> >> > > > > > >
>> >> >> > > > > > >
>> >> >> > > > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <
>> >> rcmuir@gmail.com>
>> >> >> > > > wrote:
>> >> >> > > > > > >
>> >> >> > > > > > > > KK, for your case, you don't really need to go to th=
e
>> >> effort of
>> >> >> > > > > > detecting
>> >> >> > > > > > > > whether fragments are english or not.
>> >> >> > > > > > > > Because the English stemmers in lucene will not modi=
fy
>> >> your
>> >> >> > Indic
>> >> >> > > > > text,
>> >> >> > > > > > > and
>> >> >> > > > > > > > neither will the LowerCaseFilter.
>> >> >> > > > > > > >
>> >> >> > > > > > > > what you want to do is create a custom analyzer that
>> works
>> >> like
>> >> >> > > > this
>> >> >> > > > > > > >
>> >> >> > > > > > > > -WhitespaceTokenizer with WordDelimiterFilter [from
>> Solr
>> >> >> > nightly
>> >> >> > > > > jar],
>> >> >> > > > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
>> >> >> > > > > > > >
>> >> >> > > > > > > > Thanks,
>> >> >> > > > > > > > Robert
>> >> >> > > > > > > >
>> >> >> > > > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <
>> >> dioxide.software@gmail.com
>> >> >> > >
>> >> >> > > > > wrote:
>> >> >> > > > > > > >
>> >> >> > > > > > > > > Thank you all.
>> >> >> > > > > > > > > To be frank I was using Solr in the begining half =
a
>> >> month
>> >> >> > ago.
>> >> >> > > > The
>> >> >> > > > > > > > > problem[rather bug] with solr was creation of new
>> index
>> >> on
>> >> >> > the
>> >> >> > > > fly.
>> >> >> > > > > > > > Though
>> >> >> > > > > > > > > they have a restful method for teh same, but it wa=
s
>> not
>> >> >> > > working.
>> >> >> > > > If
>> >> >> > > > > I
>> >> >> > > > > > > > > remember properly one of Solr commiter "Noble Paul=
"[I
>> >> dont
>> >> >> > know
>> >> >> > > > his
>> >> >> > > > > > > real
>> >> >> > > > > > > > > name] was trying to help me. I tried many nightly
>> builds
>> >> and
>> >> >> > > > > spending
>> >> >> > > > > > a
>> >> >> > > > > > > > > couple of days stuck at that made me think of luce=
ne
>> and
>> >> I
>> >> >> > > > switched
>> >> >> > > > > > to
>> >> >> > > > > > > > it.
>> >> >> > > > > > > > > Now after working with lucene which gives you full
>> >> control of
>> >> >> > > > > > > everything
>> >> >> > > > > > > > I
>> >> >> > > > > > > > > don't want to switch to Solr.[LOL, to me Solr:Luce=
ne
>> is
>> >> >> > similar
>> >> >> > > > to
>> >> >> > > > > > > > > Window$:Linux, its my view only, though]. Coming b=
ack
>> to
>> >> the
>> >> >> > > > point
>> >> >> > > > > as
>> >> >> > > > > > > Uwe
>> >> >> > > > > > > > > mentioned that we can do the same thing in lucene =
as
>> >> well,
>> >> >> > what
>> >> >> > > > is
>> >> >> > > > > > > > > available
>> >> >> > > > > > > > > in Solr, Solr is based on Lucene only, right?
>> >> >> > > > > > > > > I request Uwe to give me some more ideas on using =
the
>> >> >> > analyzers
>> >> >> > > > > from
>> >> >> > > > > > > solr
>> >> >> > > > > > > > > that will do the job for me, handling a mix of bot=
h
>> >> english
>> >> >> > and
>> >> >> > > > > > > > non-english
>> >> >> > > > > > > > > content.
>> >> >> > > > > > > > > Muir, can you give me a bit detail description of =
how
>> to
>> >> use
>> >> >> > > the
>> >> >> > > > > > > > > WordDelimiteFilter to do my job.
>> >> >> > > > > > > > > On a side note, I was thingking of writing a simpl=
e
>> >> analyzer
>> >> >> > > that
>> >> >> > > > > > will
>> >> >> > > > > > > do
>> >> >> > > > > > > > > the following,
>> >> >> > > > > > > > > #. If the webpage fragment is non-english[for me i=
ts
>> >> some
>> >> >> > > indian
>> >> >> > > > > > > > language]
>> >> >> > > > > > > > > then index them as such, no stemming/ stop word
>> removal
>> >> to
>> >> >> > > begin
>> >> >> > > > > > with.
>> >> >> > > > > > > As
>> >> >> > > > > > > > I
>> >> >> > > > > > > > > know its in UCN unicode something like
>> >> >> > > > > \u0021\u0012\u34ae\u0031[just
>> >> >> > > > > > a
>> >> >> > > > > > > > > sample]
>> >> >> > > > > > > > > # If the fragment is english then apply standard
>> >> anlyzing
>> >> >> > > process
>> >> >> > > > > for
>> >> >> > > > > > > > > english content. I've not thought of quering in th=
e
>> same
>> >> way
>> >> >> > as
>> >> >> > > > of
>> >> >> > > > > > now
>> >> >> > > > > > > > i.e
>> >> >> > > > > > > > > mix of non-english and engish words.
>> >> >> > > > > > > > > Now to get all this,
>> >> >> > > > > > > > > =C2=A0#1. I need some sort of way which will let m=
e know
>> if
>> >> the
>> >> >> > > > content
>> >> >> > > > > is
>> >> >> > > > > > > > > english or not. If not english just add the tokens=
 to
>> >> the
>> >> >> > > > document.
>> >> >> > > > > > Do
>> >> >> > > > > > > we
>> >> >> > > > > > > > > really need language identifiers, as i dont have a=
ny
>> >> other
>> >> >> > > > content
>> >> >> > > > > > that
>> >> >> > > > > > > > > uses
>> >> >> > > > > > > > > the same script as english other than those \u1234
>> >> things for
>> >> >> > > my
>> >> >> > > > > > indian
>> >> >> > > > > > > > > language content. Any smart hack/trick for the sam=
e?
>> >> >> > > > > > > > > =C2=A0#2. If the its english apply all normal proc=
ess and
>> add
>> >> the
>> >> >> > > > > stemmed
>> >> >> > > > > > > > token
>> >> >> > > > > > > > > to document.
>> >> >> > > > > > > > > For all this I was thinking of iterating earch wor=
d
>> of
>> >> the
>> >> >> > web
>> >> >> > > > page
>> >> >> > > > > > and
>> >> >> > > > > > > > > apply the above procedure. And finallyadd =C2=A0th=
e newly
>> >> created
>> >> >> > > > > document
>> >> >> > > > > > > to
>> >> >> > > > > > > > > the
>> >> >> > > > > > > > > index.
>> >> >> > > > > > > > >
>> >> >> > > > > > > > > I would like some one to guide me in this directio=
n.
>> I'm
>> >> >> > pretty
>> >> >> > > > > > people
>> >> >> > > > > > > > must
>> >> >> > > > > > > > > have done similar/same thing earlier, I request th=
em
>> to
>> >> guide
>> >> >> > > me/
>> >> >> > > > > > point
>> >> >> > > > > > > > me
>> >> >> > > > > > > > > to some tutorials for the same.
>> >> >> > > > > > > > > Else help me out writing a custom analyzer only if
>> thats
>> >> not
>> >> >> > > > going
>> >> >> > > > > to
>> >> >> > > > > > > be
>> >> >> > > > > > > > > too
>> >> >> > > > > > > > > complex. LOL, I'm a new user to lucene and know
>> basics
>> >> of
>> >> >> > Java
>> >> >> > > > > > coding.
>> >> >> > > > > > > > > Thank you very much.
>> >> >> > > > > > > > >
>> >> >> > > > > > > > > --KK.
>> >> >> > > > > > > > >
>> >> >> > > > > > > > >
>> >> >> > > > > > > > >
>> >> >> > > > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <
>> >> >> > rcmuir@gmail.com>
>> >> >> > > > > > wrote:
>> >> >> > > > > > > > >
>> >> >> > > > > > > > > > yes this is true. for starters KK, might be good=
 to
>> >> startup
>> >> >> > > > solr
>> >> >> > > > > > and
>> >> >> > > > > > > > look
>> >> >> > > > > > > > > > at
>> >> >> > > > > > > > > >
>> >> http://localhost:8983/solr/admin/analysis.jsp?highlight=3Don
>> >> >> > > > > > > > > >
>> >> >> > > > > > > > > > if you want to stick with lucene, the
>> >> WordDelimiterFilter
>> >> >> > is
>> >> >> > > > the
>> >> >> > > > > > > piece
>> >> >> > > > > > > > > you
>> >> >> > > > > > > > > > will want for your text, mainly for punctuation =
but
>> >> also
>> >> >> > for
>> >> >> > > > > format
>> >> >> > > > > > > > > > characters such as ZWJ/ZWNJ.
>> >> >> > > > > > > > > >
>> >> >> > > > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler <
>> >> >> > > uwe@thetaphi.de
>> >> >> > > > >
>> >> >> > > > > > > wrote:
>> >> >> > > > > > > > > >
>> >> >> > > > > > > > > > > You can also re-use the solr analyzers, as far=
 as
>> I
>> >> found
>> >> >> > > > out.
>> >> >> > > > > > > There
>> >> >> > > > > > > > is
>> >> >> > > > > > > > > > an
>> >> >> > > > > > > > > > > issue in jIRA/discussion on java-dev to merge
>> them.
>> >> >> > > > > > > > > > >
>> >> >> > > > > > > > > > > -----
>> >> >> > > > > > > > > > > Uwe Schindler
>> >> >> > > > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> >> > > > > > > > > > > http://www.thetaphi.de
>> >> >> > > > > > > > > > > eMail: uwe@thetaphi.de
>> >> >> > > > > > > > > > >
>> >> >> > > > > > > > > > >
>> >> >> > > > > > > > > > > > -----Original Message-----
>> >> >> > > > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com]
>> >> >> > > > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
>> >> >> > > > > > > > > > > > To: java-user@lucene.apache.org
>> >> >> > > > > > > > > > > > Subject: Re: How to support stemming and cas=
e
>> >> folding
>> >> >> > for
>> >> >> > > > > > english
>> >> >> > > > > > > > > > content
>> >> >> > > > > > > > > > > > mixed with non-english content?
>> >> >> > > > > > > > > > > >
>> >> >> > > > > > > > > > > > KK, ok, so you only really want to stem the
>> >> english.
>> >> >> > This
>> >> >> > > > is
>> >> >> > > > > > > good.
>> >> >> > > > > > > > > > > >
>> >> >> > > > > > > > > > > > Is it possible for you to consider using sol=
r?
>> >> solr's
>> >> >> > > > default
>> >> >> > > > > > > > > analyzer
>> >> >> > > > > > > > > > > for
>> >> >> > > > > > > > > > > > type 'text' will be good for your case. it w=
ill
>> do
>> >> the
>> >> >> > > > > > following
>> >> >> > > > > > > > > > > > 1. tokenize on whitespace
>> >> >> > > > > > > > > > > > 2. handle both indian language and english
>> >> punctuation
>> >> >> > > > > > > > > > > > 3. lowercase the english.
>> >> >> > > > > > > > > > > > 4. stem the english.
>> >> >> > > > > > > > > > > >
>> >> >> > > > > > > > > > > > try a nightly build,
>> >> >> > > > > > > > > > >
>> >> http://people.apache.org/builds/lucene/solr/nightly/
>> >> >> > > > > > > > > > > >
>> >> >> > > > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
>> >> >> > > > > dioxide.software@gmail.com
>> >> >> > > > > > >
>> >> >> > > > > > > > > wrote:
>> >> >> > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > Muir, thanks for your response.
>> >> >> > > > > > > > > > > > > I'm indexing indian language web pages whi=
ch
>> has
>> >> got
>> >> >> > > > > descent
>> >> >> > > > > > > > amount
>> >> >> > > > > > > > > > of
>> >> >> > > > > > > > > > > > > english content mixed with therein. For th=
e
>> time
>> >> >> > being
>> >> >> > > > I'm
>> >> >> > > > > > not
>> >> >> > > > > > > > > going
>> >> >> > > > > > > > > > to
>> >> >> > > > > > > > > > > > use
>> >> >> > > > > > > > > > > > > any stemmers as we don't have standard
>> stemmers
>> >> for
>> >> >> > > > indian
>> >> >> > > > > > > > > languages
>> >> >> > > > > > > > > > .
>> >> >> > > > > > > > > > > > So
>> >> >> > > > > > > > > > > > > what I want to do is like this,
>> >> >> > > > > > > > > > > > > Say I've a web page having hindi content w=
ith
>> 5%
>> >> >> > > english
>> >> >> > > > > > > content.
>> >> >> > > > > > > > > > Then
>> >> >> > > > > > > > > > > > for
>> >> >> > > > > > > > > > > > > hindi I want to use the basic white space
>> >> analyzer as
>> >> >> > > we
>> >> >> > > > > dont
>> >> >> > > > > > > > have
>> >> >> > > > > > > > > > > > stemmers
>> >> >> > > > > > > > > > > > > for this as I mentioned earlier and wheree=
ver
>> >> english
>> >> >> > > > > appears
>> >> >> > > > > > I
>> >> >> > > > > > > > > want
>> >> >> > > > > > > > > > > > them
>> >> >> > > > > > > > > > > > > to
>> >> >> > > > > > > > > > > > > be stemmed tokenized etc[the standard proc=
ess
>> >> used
>> >> >> > for
>> >> >> > > > > > english
>> >> >> > > > > > > > > > > content].
>> >> >> > > > > > > > > > > > As
>> >> >> > > > > > > > > > > > > of now I'm using whitespace analyzer for t=
he
>> >> full
>> >> >> > > content
>> >> >> > > > > > which
>> >> >> > > > > > > > > > doesnot
>> >> >> > > > > > > > > > > > > support case folding, stemming etc for teh
>> >> content.
>> >> >> > So
>> >> >> > > if
>> >> >> > > > > > there
>> >> >> > > > > > > > is
>> >> >> > > > > > > > > an
>> >> >> > > > > > > > > > > > > english word say "Detection" indexed as su=
ch
>> >> then
>> >> >> > > > searching
>> >> >> > > > > > for
>> >> >> > > > > > > > > > > > detection
>> >> >> > > > > > > > > > > > > or
>> >> >> > > > > > > > > > > > > detect is not giving any results, which is
>> the
>> >> >> > expected
>> >> >> > > > > > > behavior,
>> >> >> > > > > > > > > but
>> >> >> > > > > > > > > > I
>> >> >> > > > > > > > > > > > > want
>> >> >> > > > > > > > > > > > > this kind of queries to give results.
>> >> >> > > > > > > > > > > > > I hope I made it clear. Let me know any id=
eas
>> on
>> >> >> > doing
>> >> >> > > > the
>> >> >> > > > > > > same.
>> >> >> > > > > > > > > And
>> >> >> > > > > > > > > > > one
>> >> >> > > > > > > > > > > > > more thing, I'm storing the full webpage
>> content
>> >> >> > under
>> >> >> > > a
>> >> >> > > > > > single
>> >> >> > > > > > > > > > field,
>> >> >> > > > > > > > > > > I
>> >> >> > > > > > > > > > > > > hope this will not make any difference,
>> right?
>> >> >> > > > > > > > > > > > > It seems I've to use language identifiers,
>> but
>> >> do we
>> >> >> > > > really
>> >> >> > > > > > > need
>> >> >> > > > > > > > > > that?
>> >> >> > > > > > > > > > > > > Because we've only non-english content mix=
ed
>> >> with
>> >> >> > > > > english[and
>> >> >> > > > > > > not
>> >> >> > > > > > > > > > > french
>> >> >> > > > > > > > > > > > or
>> >> >> > > > > > > > > > > > > russian etc].
>> >> >> > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > What is the best way of approaching the
>> problem?
>> >> Any
>> >> >> > > > > > thoughts!
>> >> >> > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > Thanks,
>> >> >> > > > > > > > > > > > > KK.
>> >> >> > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert Mui=
r <
>> >> >> > > > > > rcmuir@gmail.com>
>> >> >> > > > > > > > > > wrote:
>> >> >> > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > > KK, is all of your latin script text
>> actually
>> >> >> > > english?
>> >> >> > > > Is
>> >> >> > > > > > > there
>> >> >> > > > > > > > > > stuff
>> >> >> > > > > > > > > > > > > like
>> >> >> > > > > > > > > > > > > > german or french mixed in?
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > > And for your non-english content (your
>> >> examples
>> >> >> > have
>> >> >> > > > been
>> >> >> > > > > > > > indian
>> >> >> > > > > > > > > > > > writing
>> >> >> > > > > > > > > > > > > > systems), is it generally true that if y=
ou
>> had
>> >> >> > > > > devanagari,
>> >> >> > > > > > > you
>> >> >> > > > > > > > > can
>> >> >> > > > > > > > > > > > assume
>> >> >> > > > > > > > > > > > > > its hindi? or is there stuff like marath=
i
>> >> mixed in?
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > > Reason I say this is to invoke the right
>> >> stemmers,
>> >> >> > > you
>> >> >> > > > > > really
>> >> >> > > > > > > > > need
>> >> >> > > > > > > > > > > > some
>> >> >> > > > > > > > > > > > > > language detection, but perhaps in your
>> case
>> >> you
>> >> >> > can
>> >> >> > > > > cheat
>> >> >> > > > > > > and
>> >> >> > > > > > > > > > detect
>> >> >> > > > > > > > > > > > > this
>> >> >> > > > > > > > > > > > > > based on scripts...
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > > Thanks,
>> >> >> > > > > > > > > > > > > > Robert
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
>> >> >> > > > > > > > dioxide.software@gmail.com>
>> >> >> > > > > > > > > > > > wrote:
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > > > Hi All,
>> >> >> > > > > > > > > > > > > > > I'm indexing some non-english content.
>> But
>> >> the
>> >> >> > page
>> >> >> > > > > also
>> >> >> > > > > > > > > contains
>> >> >> > > > > > > > > > > > > english
>> >> >> > > > > > > > > > > > > > > content. As of now I'm using
>> >> WhitespaceAnalyzer
>> >> >> > for
>> >> >> > > > all
>> >> >> > > > > > > > content
>> >> >> > > > > > > > > > and
>> >> >> > > > > > > > > > > > I'm
>> >> >> > > > > > > > > > > > > > > storing the full webpage content under=
 a
>> >> single
>> >> >> > > > filed.
>> >> >> > > > > > Now
>> >> >> > > > > > > we
>> >> >> > > > > > > > > > > > require
>> >> >> > > > > > > > > > > > > to
>> >> >> > > > > > > > > > > > > > > support case folding and stemmming for
>> the
>> >> >> > english
>> >> >> > > > > > content
>> >> >> > > > > > > > > > > > intermingled
>> >> >> > > > > > > > > > > > > > > with
>> >> >> > > > > > > > > > > > > > > non-english content. I must metion tha=
t
>> we
>> >> dont
>> >> >> > > have
>> >> >> > > > > > > stemming
>> >> >> > > > > > > > > and
>> >> >> > > > > > > > > > > > case
>> >> >> > > > > > > > > > > > > > > folding for these non-english content.
>> I'm
>> >> stuck
>> >> >> > > with
>> >> >> > > > > > this.
>> >> >> > > > > > > > > Some
>> >> >> > > > > > > > > > > one
>> >> >> > > > > > > > > > > > do
>> >> >> > > > > > > > > > > > > > let
>> >> >> > > > > > > > > > > > > > > me know how to proceed for fixing this
>> >> issue.
>> >> >> > > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > > > Thanks,
>> >> >> > > > > > > > > > > > > > > KK.
>> >> >> > > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > > > --
>> >> >> > > > > > > > > > > > > > Robert Muir
>> >> >> > > > > > > > > > > > > > rcmuir@gmail.com
>> >> >> > > > > > > > > > > > > >
>> >> >> > > > > > > > > > > > >
>> >> >> > > > > > > > > > > >
>> >> >> > > > > > > > > > > >
>> >> >> > > > > > > > > > > >
>> >> >> > > > > > > > > > > > --
>> >> >> > > > > > > > > > > > Robert Muir
>> >> >> > > > > > > > > > > > rcmuir@gmail.com
>> >> >> > > > > > > > > > >
>> >> >> > > > > > > > > > >
>> >> >> > > > > > > > > > >
>> >> >> > > > > > >
>> >> >> > >
>> >> ---------------------------------------------------------------------
>> >> >> > > > > > > > > > > To unsubscribe, e-mail:
>> >> >> > > > > java-user-unsubscribe@lucene.apache.org
>> >> >> > > > > > > > > > > For additional commands, e-mail:
>> >> >> > > > > > java-user-help@lucene.apache.org
>> >> >> > > > > > > > > > >
>> >> >> > > > > > > > > > >
>> >> >> > > > > > > > > >
>> >> >> > > > > > > > > >
>> >> >> > > > > > > > > > --
>> >> >> > > > > > > > > > Robert Muir
>> >> >> > > > > > > > > > rcmuir@gmail.com
>> >> >> > > > > > > > > >
>> >> >> > > > > > > > >
>> >> >> > > > > > > >
>> >> >> > > > > > > >
>> >> >> > > > > > > >
>> >> >> > > > > > > > --
>> >> >> > > > > > > > Robert Muir
>> >> >> > > > > > > > rcmuir@gmail.com
>> >> >> > > > > > > >
>> >> >> > > > > > >
>> >> >> > > > > >
>> >> >> > > > > >
>> >> >> > > > > >
>> >> >> > > > > > --
>> >> >> > > > > > Robert Muir
>> >> >> > > > > > rcmuir@gmail.com
>> >> >> > > > > >
>> >> >> > > > >
>> >> >> > > >
>> >> >> > > >
>> >> >> > > >
>> >> >> > > > --
>> >> >> > > > Robert Muir
>> >> >> > > > rcmuir@gmail.com
>> >> >> > > >
>> >> >> > >
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > --
>> >> >> > Robert Muir
>> >> >> > rcmuir@gmail.com
>> >> >> >
>> >> >
>> >> >
>> >> >
>> >> > --
>> >> > Robert Muir
>> >> > rcmuir@gmail.com
>> >> >
>> >>
>> >>
>> >>
>> >> --
>> >> Robert Muir
>> >> rcmuir@gmail.com
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 10:23:55 2009
Return-Path: <java-user-return-40652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12005 invoked from network); 8 Jun 2009 10:23:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 10:23:55 -0000
Received: (qmail 44797 invoked by uid 500); 8 Jun 2009 10:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44722 invoked by uid 500); 8 Jun 2009 10:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44712 invoked by uid 99); 8 Jun 2009 10:24:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 10:24:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mateuszb@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 10:23:55 +0000
Received: by fg-out-1718.google.com with SMTP id l27so578581fgb.4
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 03:23:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=8khEBWkB21AEyut7whvputCFRVvH54xI7cMVIZOT5gk=;
        b=Sf2hkSv0Akwfy3E9NMX+r9AQy4LdNGqI0EnlJ9ngxPxnPdpYOgUT+/JC8u8Z1I/B/U
         NljdIHGZnSHvXpn4wi/xqxzbUa7O3WrZqY4PpHo68UpmsKTKonAIgSDclPLHI6j0l7xX
         nED3IINz/QzAHMagohPggvjD/vSxfIIgoGgKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=cvt3N5I68pz9soLZNfgxbyd869Zu9sMgofwblMDJNt9l7EMHXTWtEkZRvsbadMcg6I
         mLfIBysZXh7ELSjQmqrVj66VuBfilKrkQwvXrVGZXsa5Vgiu+0t0pbL3ABMInk2dblXE
         9isq/1CD0cYZ4i3+alqCafRwOghb5o56bTfUM=
MIME-Version: 1.0
Received: by 10.86.36.4 with SMTP id j4mr6989028fgj.63.1244456615054; Mon, 08 
	Jun 2009 03:23:35 -0700 (PDT)
From: Mateusz Berezecki <mateuszb@gmail.com>
Date: Mon, 8 Jun 2009 12:23:15 +0200
Message-ID: <aec8d6fc0906080323n5e8ab35cjbe9441259d7f36b1@mail.gmail.com>
Subject: indexing performance problems
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi list,

I'm having a trouble with achieving good performance when indexing XML
wikipedia dump.
The indexing process works as follows

1. setup FSDirectory
2. setup IndexWriter
3. setup custom analyzer chaining wikipediatokenizer, lowercasefilter,
porterstemmer, stopfilter and lengthfilter
3. create XMLStreamReader that reads from XML file
4. run the parser and get <text> tag contents as well as <title>
contents and insert them into Document
5. add document to the index

the options for the writer are
- compound file is turned off
- merge factor set to 150
- ram buffer size is set to 300 MB

in addition to that the XML stream is read using bufferedfilereader
with buffer size of 100 MB

This all works good for the first couple of minutes indexing extracted
articles very quickly but later on some problems start to show. The
symptoms are:
- the CPU is at 100% and the stream reading and indexing seems to be stopped
- the application seems to be dead
- it resumes after some time (anywhere between 1 to 40 minutes)

 I've double checked my code for any problems and even rewritten it a
couple of times so this makes me think that there's some problem in
lucene itself. The problem is persistent in both 2.4.1 and 2.9-dev
versions.

Is there any known bug related to long running batch indexing
processes that operate on large documents? In my case the single XML
file is 20 GB and I'm just surprised how quickly the performance of
the indexer degrades.

Do you have any suggestions?

best,
Mateusz Berezecki

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 10:31:08 2009
Return-Path: <java-user-return-40653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17867 invoked from network); 8 Jun 2009 10:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 10:31:08 -0000
Received: (qmail 52916 invoked by uid 500); 8 Jun 2009 10:31:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52844 invoked by uid 500); 8 Jun 2009 10:31:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52834 invoked by uid 99); 8 Jun 2009 10:31:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 10:31:17 +0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=MIME_BASE64_TEXT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.218] (HELO smtp108.mail.mud.yahoo.com) (209.191.85.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jun 2009 10:31:06 +0000
Received: (qmail 48217 invoked from network); 8 Jun 2009 10:30:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=rkjVeoUSNCGklB+VG70m9pDHjlW/uDm4BdOaYbZOJBqlvHGUvdh+weieMUgcxZkta2nwBc43FtP4lBsqO8qpHv7Thl67miFvpJA5rkZT0PY5uYhhfUNS6OSdmyt7lTH2gPI8di0Tt0VNT9QHIWJxPDVfPW9ZBUyOpCKbr443FGY=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp108.mail.mud.yahoo.com with SMTP; 8 Jun 2009 10:30:42 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: kUDtm4IVM1kDxVXnH7YUDOLIPMNMKomOsl46RvvdFicR7FIoDtfzLlQi0kyn1VCOofebSTZ405MDzLg551pJELMzJQhkqxNr9z9x5eBOJO1JuooU5kWyaiMHDyW7snniozIA1NFPusUjhve_GvwD5Crke41MhBKWae02rFQWtAKBHL3uv1MSMUO_Cqqcc3axZvxWGzY147qM5hHlLM2ejYutkmAm9.mh4U7TF48nwqSHCYCNB01U6wSXZabbuOmTeenXm.j861Di6ZdZ6dZrcwj3WoEJJUo2D3xQV2weTm8dpI33LvBuRhTihIuDzEVsMU5IV6MEKq7Jma7q8sE-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <006f01c9e824$2d534b70$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <025d01c9ddcd$4168c830$710bc30a@sv.us.sonicwall.com> <4A1C2926.9060000@cisco.com>
Subject: Re: Most frequently indexed term
Date: Mon, 8 Jun 2009 16:00:32 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

VGhhbmtzLiBUaGlzIHdvcmtzIHdlbGwuDQoNClRoZSBsb2dpYyBpcyANCjEuIERvIHRoZSBzZWFy
Y2gsIEZvciBldmVyeSBkb2N1bWVudCBnZXQgdGhlIGxpc3Qgb2YgdGVybXMgYW5kIGl0cyBmcmVx
dWVuY3kuIA0KMi4gVXNlIFNvcnRlZFRlcm1WZWN0b3JNYXBwZXIgdG8gZ2VuZXJhdGUgYSBsaXN0
IG9mIHVuaXF1ZSB0ZXJtcyBhbmQgaXRzIGZyZXF1ZW5jeS4gDQoyLiBTb3J0IHRoZW0gdG8gZ2V0
IHRoZSBsaXN0IG9mIHRvcCBudW1iZXJlZCBmcmVxdWVudGx5IGluZGV4ZWQgdGVybXMgaW4gYSBn
aXZlbiBkYXRlIHJhbmdlIChhbnkgZ2l2ZW4gY3JpdGVyaWEpLg0KDQpNeSBRdWVzdGlvbiBpczoN
CkkgbmVlZCB0byBnZXQgdGhlIHRvcCAyMCBoaWdobHkgaW5kZXhlZCB0ZXJtIGluIGEgZGF5LiAx
IG1pbGxpb24gZG9jdW1lbnRzIGNvdWxkIGJlIGluZGV4ZWQgaW4gYSBkYXkuIEkgbmVlZCB0byB0
cmF2ZXJzZSB0aGUgMSBtaWxsaW9uIHJlY29yZHMgYW5kIHN0b3JlIHRoZSB1bmlxdWUgdGVybXMg
YW5kIGl0cyBmcmVxdWVuY2llcy4gSXQgbWF5IGNvbnN1bWUgaHVnZSBhbW91bnQgb2YgbWVtb3J5
LiBJcyB0aGVyZSBhbnkgb3RoZXIgd2F5IG91dD8gV2l0aCBvdXQgdXNpbmcgdGVybSB2ZWN0b3Is
IGkgY291bGQgZ2V0IHRoZSBsaXN0IG9mIG1vc3QgZnJlcXVlbnRseSBpbmRleGVkIHRlcm0gaW4g
YSBkYXRhYmFzZS4gU2ltaWxhcmx5IGlzIHRoZXJlIGFueSBvdGhlciB3YXkgdG8gZ2V0IHRoZSBs
aXN0IG9mIG1vc3QgZnJlcXVlbnRseSBpbmRleGVkIHRlcm0gaW4gYSBkYXRlIHJhbmdlIG9yIGEg
c3Vic2V0IG9mIGRhdGFiYXNlLg0KDQpSZWdhcmRzDQpHYW5lc2ggDQoNCg0KDQotLS0tLSBPcmln
aW5hbCBNZXNzYWdlIC0tLS0tIA0KRnJvbTogIlByZWV0aGFtIEthamVrYXIiIDxwcmVldGhhbUBj
aXNjby5jb20+DQpUbzogPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClNlbnQ6IFR1ZXNk
YXksIE1heSAyNiwgMjAwOSAxMTowOCBQTQ0KU3ViamVjdDogUmU6IE1vc3QgZnJlcXVlbnRseSBp
bmRleGVkIHRlcm0NCg0KDQo+IEhhdmUgYSBsb29rIGF0DQo+IGh0dHA6Ly9zdGFja292ZXJmbG93
LmNvbS9xdWVzdGlvbnMvMTk1NDM0L2hvdy1jYW4taS1nZXQtdG9wLXRlcm1zLWZvci1hLXN1YnNl
dC1vZi1kb2N1bWVudHMtaW4tYS1sdWNlbmUtaW5kZXgNCj4gDQo+IChJIGhhdmUgbm90IHRyaWVk
IHRoZSBhYm92ZSBvdXQpDQo+IA0KPiBHYW5lc2ggd3JvdGU6DQo+PiBIZWxsbyBBbGwsDQo+Pg0K
Pj4gSSBuZWVkIHRvIGJ1aWxkIHNvbWUgc3RhdHMuIEkgbmVlZCB0byBrbm93IFRvcCA1IGZyZXF1
ZW50bHkgaW5kZXhlZCB0ZXJtIGluIGEgZGF0ZSByYW5nZSAoSW4gYSBkYXkgb3IgYSBNb250aCku
DQo+Pg0KPj4gQW55IGlkZWEgb2YgaG93IHRvIGFjaGlldmUgdGhpcy4NCj4+DQo+PiBSZWdhcmRz
DQo+PiBHYW5lc2hJ6d2Key1qe2Z6yxqB6y2jKi6uieWKd5+uJ6d2yG22n/+KeZ6yx6eB6vJqGihj
b209DQo+IA0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11
c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+

Send instant messages to your online friends http://in.messenger.yahoo.com 


From java-user-return-40654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 10:52:40 2009
Return-Path: <java-user-return-40654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27052 invoked from network); 8 Jun 2009 10:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 10:52:40 -0000
Received: (qmail 75688 invoked by uid 500); 8 Jun 2009 10:52:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75627 invoked by uid 500); 8 Jun 2009 10:52:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75617 invoked by uid 99); 8 Jun 2009 10:52:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 10:52:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.237.170.35] (HELO mzex01.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 10:52:40 +0000
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Most frequently indexed term
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
Date: Mon, 8 Jun 2009 12:52:14 +0200
Message-ID: <D7206503EB5BE94497458AF4FE4AE8AB0123402D@owamz.healy-hudson.com>
In-Reply-To: <006f01c9e824$2d534b70$710bc30a@sv.us.sonicwall.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Most frequently indexed term
thread-index: AcnoJDuDjEm6SnzyS2eGON3s3R4/UAAAgBPQ
References: <025d01c9ddcd$4168c830$710bc30a@sv.us.sonicwall.com> <4A1C2926.9060000@cisco.com> <006f01c9e824$2d534b70$710bc30a@sv.us.sonicwall.com>
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Ganesh,

What about  making a seperate index for each day, get your analysis and =
merge thereafter that index.

I am not sure but I think this might work. Use MultiSearcher for the =
search.

Regards

Uwe Goetzke


-----Urspr=C3=BCngliche Nachricht-----
Von: Ganesh [mailto:emailgane@yahoo.co.in]=20
Gesendet: Montag, 8. Juni 2009 12:31
An: java-user@lucene.apache.org
Betreff: Re: Most frequently indexed term

Thanks. This works well.

The logic is=20
1. Do the search, For every document get the list of terms and its =
frequency.=20
2. Use SortedTermVectorMapper to generate a list of unique terms and its =
frequency.=20
2. Sort them to get the list of top numbered frequently indexed terms in =
a given date range (any given criteria).

My Question is:
I need to get the top 20 highly indexed term in a day. 1 million =
documents could be indexed in a day. I need to traverse the 1 million =
records and store the unique terms and its frequencies. It may consume =
huge amount of memory. Is there any other way out? With out using term =
vector, i could get the list of most frequently indexed term in a =
database. Similarly is there any other way to get the list of most =
frequently indexed term in a date range or a subset of database.

Regards
Ganesh=20



----- Original Message -----=20
From: "Preetham Kajekar" <preetham@cisco.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, May 26, 2009 11:08 PM
Subject: Re: Most frequently indexed term


> Have a look at
> =
http://stackoverflow.com/questions/195434/how-can-i-get-top-terms-for-a-s=
ubset-of-documents-in-a-lucene-index
>=20
> (I have not tried the above out)
>=20
> Ganesh wrote:
>> Hello All,
>>
>> I need to build some stats. I need to know Top 5 frequently indexed =
term in a date range (In a day or a Month).
>>
>> Any idea of how to achieve this.
>>
>> Regards
>> =
GaneshI=C3=A9=C3=9D=C5=A0{-j{fz=C3=8B=1A=C2=81=C3=AB-=C2=A3*.=C2=AE=E2=80=
=B0=C3=A5=C5=A0w=C5=B8=C2=AE'=C2=A7v=C3=88m=C2=B6=C5=B8=C3=BF=C5=A0y=C5=BE=
=C2=B2=C3=87=C2=A7=C2=81=C3=AA=C3=B2j=1A(com=3D
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>I=C3=A9=C3=9D=C5=A0{-j{fz=C3=8B=1A=C2=81=C3=AB-=C2=A3*.=C2=AE=E2=80=B0=C3=
=A5=C5=A0w=C5=B8=C2=AE'=C2=A7v=C3=88m=C2=B6=C5=B8=C3=BF=C5=A0y=C5=BE=C2=B2=
=C3=87=C2=A7=C2=81=C3=AA=C3=B2j=1A(

-----------------------------------------------------------------------
Healy Hudson GmbH - D-55252 Mainz Kastel
Gesch=C3=A4ftsf=C3=BChrer Christian Konh=C3=A4user - Amtsgericht =
Wiesbaden HRB 12076

Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =
Empf=C3=A4nger sind, d=C3=BCrfen Sie die Informationen nicht offen legen =
oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, =
teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den =
Absender zur=C3=BCckschicken. Bitte l=C3=B6schen Sie danach diese Email.
This email is confidential. If you are not the intended recipient, you =
must not disclose or use this information contained in it. If you have =
received this email in error please tell us immediately by return email =
and delete the document.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 11:03:38 2009
Return-Path: <java-user-return-40655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33023 invoked from network); 8 Jun 2009 11:03:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 11:03:37 -0000
Received: (qmail 91415 invoked by uid 500); 8 Jun 2009 11:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91350 invoked by uid 500); 8 Jun 2009 11:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91339 invoked by uid 99); 8 Jun 2009 11:03:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 11:03:47 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 11:03:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MDcdH-0002Lu-S6
	for java-user@lucene.apache.org; Mon, 08 Jun 2009 04:03:15 -0700
Message-ID: <23922023.post@talk.nabble.com>
Date: Mon, 8 Jun 2009 04:03:15 -0700 (PDT)
From: Rupesh1mb <rupesh1mb@hotmail.com>
To: java-user@lucene.apache.org
Subject: =?UTF-8?Q?problem_with_A_cap_circum_followed_by_space(=C3=82_)?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: rupesh1mb@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,=20

I have a problem when i enumerate wildcard in a index then i get two terms
'the'.
Actually what was the cause was one was 'the' and another was 'the ' i.e.
'the' followed by =C3=82 followed by space.=20

What is this =C3=82 followed by space and why is this being treated as a si=
ngle
character? How am i going to search for the documents that contains this
special character case.

Thanks in advance

--=20
View this message in context: http://www.nabble.com/problem-with-A-cap-circ=
um-followed-by-space%28%C3%82-%29-tp23922023p23922023.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 11:28:10 2009
Return-Path: <java-user-return-40656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37551 invoked from network); 8 Jun 2009 11:28:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 11:28:10 -0000
Received: (qmail 17148 invoked by uid 500); 8 Jun 2009 11:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17096 invoked by uid 500); 8 Jun 2009 11:28:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17086 invoked by uid 99); 8 Jun 2009 11:28:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 11:28:19 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 11:28:10 +0000
Received: by gxk11 with SMTP id 11so2035761gxk.5
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 04:27:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.73.1 with SMTP id a1mr2472490ybl.95.1244460467445; Mon, 08 
	Jun 2009 04:27:47 -0700 (PDT)
In-Reply-To: <aec8d6fc0906080323n5e8ab35cjbe9441259d7f36b1@mail.gmail.com>
References: <aec8d6fc0906080323n5e8ab35cjbe9441259d7f36b1@mail.gmail.com>
Date: Mon, 8 Jun 2009 07:27:47 -0400
Message-ID: <9ac0c6aa0906080427lc8ec517icc50028bd1e69a78@mail.gmail.com>
Subject: Re: indexing performance problems
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This isn't normal.

A mergeFactor of 150 is way too high; I'd put that back to 10 and see
if the problem persists.  Also make sure you're using
autoCommit=3Dfalse, and try the suggestions here:

    http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

You're sure the JRE's heap size is big enough?

If the problem persists... can you turn on IndexWriter's infoStream
and post the resulting output leading up to the 100% CPU?  You might
also try "kill -QUIT" when the 100% CPU problem is happening, to catch
the stack trace of all threads, and post that too...

Mike

On Mon, Jun 8, 2009 at 6:23 AM, Mateusz Berezecki<mateuszb@gmail.com> wrote=
:
> Hi list,
>
> I'm having a trouble with achieving good performance when indexing XML
> wikipedia dump.
> The indexing process works as follows
>
> 1. setup FSDirectory
> 2. setup IndexWriter
> 3. setup custom analyzer chaining wikipediatokenizer, lowercasefilter,
> porterstemmer, stopfilter and lengthfilter
> 3. create XMLStreamReader that reads from XML file
> 4. run the parser and get <text> tag contents as well as <title>
> contents and insert them into Document
> 5. add document to the index
>
> the options for the writer are
> - compound file is turned off
> - merge factor set to 150
> - ram buffer size is set to 300 MB
>
> in addition to that the XML stream is read using bufferedfilereader
> with buffer size of 100 MB
>
> This all works good for the first couple of minutes indexing extracted
> articles very quickly but later on some problems start to show. The
> symptoms are:
> - the CPU is at 100% and the stream reading and indexing seems to be stop=
ped
> - the application seems to be dead
> - it resumes after some time (anywhere between 1 to 40 minutes)
>
> =A0I've double checked my code for any problems and even rewritten it a
> couple of times so this makes me think that there's some problem in
> lucene itself. The problem is persistent in both 2.4.1 and 2.9-dev
> versions.
>
> Is there any known bug related to long running batch indexing
> processes that operate on large documents? In my case the single XML
> file is 20 GB and I'm just surprised how quickly the performance of
> the indexer degrades.
>
> Do you have any suggestions?
>
> best,
> Mateusz Berezecki
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 11:55:32 2009
Return-Path: <java-user-return-40657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45265 invoked from network); 8 Jun 2009 11:55:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 11:55:32 -0000
Received: (qmail 58927 invoked by uid 500); 8 Jun 2009 11:55:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58883 invoked by uid 500); 8 Jun 2009 11:55:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58873 invoked by uid 99); 8 Jun 2009 11:55:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 11:55:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mateuszb@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 11:55:33 +0000
Received: by fg-out-1718.google.com with SMTP id l27so596016fgb.4
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 04:55:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=PydAgibu35Xt3v6troGDw0yF7MLNSpuLFhmJNorOJ7g=;
        b=c3UZlvvYvofCpTn9WT6ryWR52e2CDwiEi6PJpkRprVDjh9nKSdsqtoeN/dy2AoHseq
         EP/Cv6Pkq68XdQlDt2wqzbq0vy19jVHcu83WNG+jFet/6w/MA8dZ+parfkPI9iraKdCH
         fGWkUYamdgxvS1fGGJhJTB4qhz7Xi4hTZoASM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=TL/itpnH7UJO7OBfZoQdWzYdeGnid7+Mfvxa+bUqx90VImAzerhj6jXCdldCdTNLDI
         dRmHRirpAvZqKkCSz8VkTcAGtwtf5D508RzmhT57/dm+2DnNA+WKjJcuyerjkNEIhvTN
         KD0DfqUh97gvB13kf/gDVrOres9nZ+Pzaza8g=
MIME-Version: 1.0
Received: by 10.86.30.19 with SMTP id d19mr7120667fgd.70.1244462112585; Mon, 
	08 Jun 2009 04:55:12 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906080427lc8ec517icc50028bd1e69a78@mail.gmail.com>
References: <aec8d6fc0906080323n5e8ab35cjbe9441259d7f36b1@mail.gmail.com> 
	<9ac0c6aa0906080427lc8ec517icc50028bd1e69a78@mail.gmail.com>
From: Mateusz Berezecki <mateuszb@gmail.com>
Date: Mon, 8 Jun 2009 13:54:51 +0200
Message-ID: <aec8d6fc0906080454q7e647537i6bde0b72a76172fb@mail.gmail.com>
Subject: Re: indexing performance problems
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael

Thanks for a prompt response.

On Mon, Jun 8, 2009 at 1:27 PM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> This isn't normal.
>
> A mergeFactor of 150 is way too high; I'd put that back to 10 and see
> if the problem persists. =C2=A0Also make sure you're using
> autoCommit=3Dfalse, and try the suggestions here:
>
> =C2=A0 =C2=A0http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

I've set mergeFactor to 10, 15 and 20 before trying out 150 and the
problem persisted, although I have to admit that 2.9 gives some
serious speed improvements as compared to 2.4.1 which I believe is a
good sign, i.e. it reaches the same document that causes deadlock much
faster than 2.4.1 does

>
> You're sure the JRE's heap size is big enough?

I've set it to 3.8 GB and I'm running it on a desktop with 4 GB of RAM.

> If the problem persists... can you turn on IndexWriter's infoStream
> and post the resulting output leading up to the 100% CPU? =C2=A0You might
> also try "kill -QUIT" when the 100% CPU problem is happening, to catch
> the stack trace of all threads, and post that too...

Not sure how do I turn on the infoStream and autoCommit? WRT to
autoCommit I did not use the deprecated API with autoCommit flags in
constructors, so assuming I used the recommended API is the autoCommit
on/off by default?

thanks!
Mateusz

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 12:13:39 2009
Return-Path: <java-user-return-40658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53080 invoked from network); 8 Jun 2009 12:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 12:13:39 -0000
Received: (qmail 87056 invoked by uid 500); 8 Jun 2009 12:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86999 invoked by uid 500); 8 Jun 2009 12:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86989 invoked by uid 99); 8 Jun 2009 12:13:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 12:13:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 12:13:40 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1451972ywt.5
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 05:13:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.121.12 with SMTP id y12mr12513048ybm.26.1244463197914; 
	Mon, 08 Jun 2009 05:13:17 -0700 (PDT)
In-Reply-To: <aec8d6fc0906080454q7e647537i6bde0b72a76172fb@mail.gmail.com>
References: <aec8d6fc0906080323n5e8ab35cjbe9441259d7f36b1@mail.gmail.com>
	 <9ac0c6aa0906080427lc8ec517icc50028bd1e69a78@mail.gmail.com>
	 <aec8d6fc0906080454q7e647537i6bde0b72a76172fb@mail.gmail.com>
Date: Mon, 8 Jun 2009 08:13:17 -0400
Message-ID: <9ac0c6aa0906080513l123c59afgd07e0111f1ad74cc@mail.gmail.com>
Subject: Re: indexing performance problems
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jun 8, 2009 at 7:54 AM, Mateusz Berezecki<mateuszb@gmail.com> wrote=
:

> Thanks for a prompt response.

You're welcome!

>> A mergeFactor of 150 is way too high; I'd put that back to 10 and see
>> if the problem persists. =A0Also make sure you're using
>> autoCommit=3Dfalse, and try the suggestions here:
>>
>> =A0 =A0http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>
> I've set mergeFactor to 10, 15 and 20 before trying out 150 and the
> problem persisted, although I have to admit that 2.9 gives some
> serious speed improvements as compared to 2.4.1 which I believe is a
> good sign, i.e. it reaches the same document that causes deadlock much
> faster than 2.4.1 does

Hmm: do you know for certain that a particular document causes this?
If you make a standalone test indexing only that document, does the
problem happen?

>> You're sure the JRE's heap size is big enough?
>
> I've set it to 3.8 GB and I'm running it on a desktop with 4 GB of RAM.

OK sounds like plenty, though likely the OS won't give you 3.8 GB (if
the JRE is 32-bit).

>> If the problem persists... can you turn on IndexWriter's infoStream
>> and post the resulting output leading up to the 100% CPU? =A0You might
>> also try "kill -QUIT" when the 100% CPU problem is happening, to catch
>> the stack trace of all threads, and post that too...
>
> Not sure how do I turn on the infoStream and autoCommit? WRT to
> autoCommit I did not use the deprecated API with autoCommit flags in
> constructors, so assuming I used the recommended API is the autoCommit
> on/off by default?

For infoStream, eg:  IndexWriter.setInfoStream(System.out);

And, yes, since you're using a non-deprecated ctor of IndexWriter, you
are getting autoCommit=3Dfalse, so that's good.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 12:59:55 2009
Return-Path: <java-user-return-40659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77464 invoked from network); 8 Jun 2009 12:59:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 12:59:55 -0000
Received: (qmail 55740 invoked by uid 500); 8 Jun 2009 13:00:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55662 invoked by uid 500); 8 Jun 2009 13:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55652 invoked by uid 99); 8 Jun 2009 13:00:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 13:00:04 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 12:59:54 +0000
Received: from [192.168.0.105] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 294543BA05
	for <java-user@lucene.apache.org>; Mon,  8 Jun 2009 05:59:32 -0700 (PDT)
Message-Id: <6228ED4B-A9EE-4D61-BF0A-7C186471BE1D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <101538.27115.qm@web45308.mail.sp1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Retrieving the term vectors of a document in Nutch
Date: Mon, 8 Jun 2009 08:59:30 -0400
References: <780692.37408.qm@web45302.mail.sp1.yahoo.com> <101538.27115.qm@web45308.mail.sp1.yahoo.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I'd ask on the nutch-user@lucene.apache.org mailing list.  While  
Lucene can do all of these things, it is not clear how Nutch exposes,  
if at all, any of this information.  You should be able to get results  
there.

Note, however, that Term Vecs must be created during indexing by  
creating the Field properly.  You could likely modify the Nutch code  
where it creates the Lucene Document and Fields to add in Term Vector  
capabilities.

-Grant


On Jun 7, 2009, at 8:58 PM, House Less wrote:

>
> In retrospect, pardon my stupidity: surely it cannot be right that  
> the term frequency vector for a page is not present within Nutch,  
> for it needs this to compute the score for a page given a query. I  
> would appreciate it if you would tell me where I may find it given a  
> document number. Thank you.
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 13:28:26 2009
Return-Path: <java-user-return-40660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89889 invoked from network); 8 Jun 2009 13:28:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 13:28:26 -0000
Received: (qmail 8902 invoked by uid 500); 8 Jun 2009 13:28:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8851 invoked by uid 500); 8 Jun 2009 13:28:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8841 invoked by uid 99); 8 Jun 2009 13:28:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 13:28:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mateuszb@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 13:28:27 +0000
Received: by fxm3 with SMTP id 3so3268193fxm.5
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 06:28:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=I6IgXQyy6reBcD+G3MoehskE3hRLqWUXbi4kdGhQJnQ=;
        b=XGda+LkqQ3qjbdswFHUJ6eh7Eyi99oNehQOiHb5vjUWDi+1J5G6dQET2m5lMIJMMj1
         bjhV661bMRppXLmonT1AnKtq9Za/agVH2ECzk3UFn++7kOHkodvkVKb7ZvKDtBbPkBHf
         kji6PDJYKdSXLPSIr3LBom7/if8Ef8XfYEQP0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=l1PfsrLUGR8iqwZsr6wbd9SiYCF1uw+CYyfJW1hpW/N4kLZ4RRpRQKN/X77pRGk1Zx
         /E+FzayyVzKO/qm+O3zxc5xhxmaICJj9XREHgh8LrNsf2dB9v/+KqbMxYvtTMdUo104W
         lSrqqVhGZYWDl+DfB93msGWu5Sl/+46i8Nk4g=
MIME-Version: 1.0
Received: by 10.86.93.19 with SMTP id q19mr7204873fgb.55.1244467686338; Mon, 
	08 Jun 2009 06:28:06 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906080513l123c59afgd07e0111f1ad74cc@mail.gmail.com>
References: <aec8d6fc0906080323n5e8ab35cjbe9441259d7f36b1@mail.gmail.com> 
	<9ac0c6aa0906080427lc8ec517icc50028bd1e69a78@mail.gmail.com> 
	<aec8d6fc0906080454q7e647537i6bde0b72a76172fb@mail.gmail.com> 
	<9ac0c6aa0906080513l123c59afgd07e0111f1ad74cc@mail.gmail.com>
From: Mateusz Berezecki <mateuszb@gmail.com>
Date: Mon, 8 Jun 2009 15:27:46 +0200
Message-ID: <aec8d6fc0906080627i3e272157o43aad55aca80da5a@mail.gmail.com>
Subject: Re: indexing performance problems
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,

Thanks a lot for a hint. I'll test it out in a few hours and get back
to you and/or the list.

best,
Mateusz

On Mon, Jun 8, 2009 at 2:13 PM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> On Mon, Jun 8, 2009 at 7:54 AM, Mateusz Berezecki<mateuszb@gmail.com> wro=
te:
>
>> Thanks for a prompt response.
>
> You're welcome!
>
>>> A mergeFactor of 150 is way too high; I'd put that back to 10 and see
>>> if the problem persists. =C2=A0Also make sure you're using
>>> autoCommit=3Dfalse, and try the suggestions here:
>>>
>>> =C2=A0 =C2=A0http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>>
>> I've set mergeFactor to 10, 15 and 20 before trying out 150 and the
>> problem persisted, although I have to admit that 2.9 gives some
>> serious speed improvements as compared to 2.4.1 which I believe is a
>> good sign, i.e. it reaches the same document that causes deadlock much
>> faster than 2.4.1 does
>
> Hmm: do you know for certain that a particular document causes this?
> If you make a standalone test indexing only that document, does the
> problem happen?
>
>>> You're sure the JRE's heap size is big enough?
>>
>> I've set it to 3.8 GB and I'm running it on a desktop with 4 GB of RAM.
>
> OK sounds like plenty, though likely the OS won't give you 3.8 GB (if
> the JRE is 32-bit).
>
>>> If the problem persists... can you turn on IndexWriter's infoStream
>>> and post the resulting output leading up to the 100% CPU? =C2=A0You mig=
ht
>>> also try "kill -QUIT" when the 100% CPU problem is happening, to catch
>>> the stack trace of all threads, and post that too...
>>
>> Not sure how do I turn on the infoStream and autoCommit? WRT to
>> autoCommit I did not use the deprecated API with autoCommit flags in
>> constructors, so assuming I used the recommended API is the autoCommit
>> on/off by default?
>
> For infoStream, eg: =C2=A0IndexWriter.setInfoStream(System.out);
>
> And, yes, since you're using a non-deprecated ctor of IndexWriter, you
> are getting autoCommit=3Dfalse, so that's good.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 20:51:51 2009
Return-Path: <java-user-return-40661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9271 invoked from network); 8 Jun 2009 20:51:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 20:51:51 -0000
Received: (qmail 94992 invoked by uid 500); 8 Jun 2009 20:52:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94940 invoked by uid 500); 8 Jun 2009 20:52:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94930 invoked by uid 99); 8 Jun 2009 20:52:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 20:52:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jamilmfjunior@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-px0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 20:51:51 +0000
Received: by pxi6 with SMTP id 6so349841pxi.29
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 13:51:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=Fsen2tMgeTMqXuN4EjQ2EyvZS6NOyW3/3rgVsqi8VfA=;
        b=skE4o3s6K2nUlklrTy6V/6akc1UdSuVI71hsVjT4byhuolO3WJEGjOTnR7i6zSFuYB
         qYzxLX862J33zR6Ue6+TujYczXiWTMjJu4FsepZVTau0ToPZ51y4eUTiNgbugR6Zyjqv
         uN85s30gprSAYJQlTn43lXqhtH49DuSp9x02c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=hkmfGA5AHFGyfF1hvUGTyQKvLzULnrYX44t6RaWDcIyZzDzjMuzsvzl9S0cPNybLfz
         a9sEVupWM+J/6A0Gebr4ddlkI4yBffVIViWifcr3Z7xCEvbgLKeiJXCqgbue2Jp05ZQt
         zCOe22hedL3J88G1ZfaIyyc9x3cDOkktFRlqQ=
MIME-Version: 1.0
Received: by 10.220.85.205 with SMTP id p13mr4190611vcl.1.1244494289124; Mon, 
	08 Jun 2009 13:51:29 -0700 (PDT)
Date: Mon, 8 Jun 2009 17:51:29 -0300
Message-ID: <5f30506c0906081351h66a18d4bidbae2fe782756839@mail.gmail.com>
Subject: How to know in the returned documents of a query had match in a 
	specific field
From: Jamil Marques Figueira Junior <jamilmfjunior@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64713ee073c66046bdc684b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64713ee073c66046bdc684b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello,

    I wold like to know if any document returned from my search query had
match in a specific field. Example:

Documents:
Field 1 - Company Name
Field 2 - Street

Document1 (CompanyName = "metalpack corp", Street = "Route 66")
Document2 (CompanyName = "ibi Bank", Street = "metalpack")

If I create a query like this:
BooleanQuery bq = new BooleanQuery();
TermQuery companyNameTermQuery = new TermQuery(new Term("CompanyName",
"metalpack"))
TermQuery streetTermQuery = new TermQuery(new Term("Street", "metalpack"))
bq.add(companyNameTermQuery, BooleanClause.Occur.SHOULD);
bq.add(streetTermQuery , BooleanClause.Occur.SHOULD);
IndexSearcher is = new IndexSearcher(myRAMDirectory);
is.search(bq);

the query above will return both document of my index, but how can I know if
the result has documents that the matching field was the CompanyName without
read all the document results?


-- 
tks,

Jamil

--0016e64713ee073c66046bdc684b--

From java-user-return-40662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 21:28:41 2009
Return-Path: <java-user-return-40662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24888 invoked from network); 8 Jun 2009 21:28:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 21:28:41 -0000
Received: (qmail 48232 invoked by uid 500); 8 Jun 2009 21:28:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48162 invoked by uid 500); 8 Jun 2009 21:28:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48152 invoked by uid 99); 8 Jun 2009 21:28:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 21:28:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.180.197.186] (HELO web45316.mail.sp1.yahoo.com) (68.180.197.186)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jun 2009 21:28:41 +0000
Received: (qmail 83520 invoked by uid 60001); 8 Jun 2009 21:28:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1244496500; bh=eiqgF3t+VxLoC59KGfifIwd6fa5lNJgB1Wssioqr4oQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=Iph6cg2HBSY/OUcOUHA3UgqCEeXekGsg6aFytE312QN0ajmtYmErpKOhzHgLP+DN/wowxGYSeQcMrh3a1ThVAfgoByWbggvg0LCbFaVrOiTCsJ+wzCkXa+LXwH6potF1hQeHHaW/P71AjkugL97UreWwoG3wDuLOmHR6pmM67F4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=VXkP2Dp7vBfXp2Nhcr0RZJhqQqjnorKrIfckS5I7lAvttK25jqiYRT51NRn2ebiMJrddzXiZQqgNPdrxNAlmKUn8t6eRquLwwZRdQ7Aq9y2dTGnliFQWm0GlHzUMmtPOtwv8CVYpTHULrgCTc+56eT8/mxUZLygMHvmBZK5h2PQ=;
Message-ID: <643356.82056.qm@web45316.mail.sp1.yahoo.com>
X-YMail-OSG: BPkgkI8VM1kf.Z94r5TovXrhjWSRboBunvoI6BC3DlrhbTFc_toHATl_rDL5LkeukAoLhJQkJLkn_IrBqzB1sTyYk6YDsuictNFIVMGzPq1icxXia_2hyBh8F1zNMkvFhXreFj4lc3A67f02.BBU0XxrE0CMXMkO_wJKiMQ7Udhz7Sq5C_e2sMPwJX4XGH4Mc2DM5q7cT8QrNaC6xFYdIOvpDYM7uU_YT98nO_c_u2H11deDQ0KE84LI1DwaAQ4xrYdH7vsNp3yf.bw8g9dU2DbpjFsFz9qig8rRArv8KFQbci2hhE5id6g-
Received: from [128.122.140.119] by web45316.mail.sp1.yahoo.com via HTTP; Mon, 08 Jun 2009 14:28:20 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
References: <780692.37408.qm@web45302.mail.sp1.yahoo.com> <101538.27115.qm@web45308.mail.sp1.yahoo.com> <6228ED4B-A9EE-4D61-BF0A-7C186471BE1D@apache.org>
Date: Mon, 8 Jun 2009 14:28:20 -0700 (PDT)
From: House Less <houselessinnewyork@yahoo.com>
Subject: Re: Retrieving the term vectors of a document in Nutch
To: java-user@lucene.apache.org
In-Reply-To: <6228ED4B-A9EE-4D61-BF0A-7C186471BE1D@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Grant,



> I'd ask on the nutch-user@lucene.apache.org mailing list.  While Lucene can do 
> all of these things, it is not clear how Nutch exposes, if at all, any of this 
> information.  You should be able to get results there.

Thanks, I'll be sure to ask them.
 
> Note, however, that Term Vecs must be created during indexing by creating the 
> Field properly.  You could likely modify the Nutch code where it creates the 
> Lucene Document and Fields to add in Term Vector capabilities.

That might work. Thanks again for the pointers!



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 21:55:30 2009
Return-Path: <java-user-return-40663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39247 invoked from network); 8 Jun 2009 21:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 21:55:30 -0000
Received: (qmail 85592 invoked by uid 500); 8 Jun 2009 21:55:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85520 invoked by uid 500); 8 Jun 2009 21:55:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85504 invoked by uid 99); 8 Jun 2009 21:55:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 21:55:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.221.184 as permitted sender)
Received: from [209.85.221.184] (HELO mail-qy0-f184.google.com) (209.85.221.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 21:55:30 +0000
Received: by qyk14 with SMTP id 14so2892579qyk.29
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 14:55:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=F4ZwjaEnH4O+VrRLDKtnQtRCTy1QfV7ygqYZ6kLbWFI=;
        b=Hnp7GcfFuI1hj+AMH++buYQOD3b5Bk2cEO61b96wAU0JFaJeY0KjlyzNhN7SDfW4TN
         0HvGCq5qVXDzy0rWL7H+e3B7ER6RbmW01v1jI65xJF26XCpL9PC5xlfAwF9A42ZZLE6G
         96gm567qowOw+HONoQTXYGxoDKpOpx3NJ2lZQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=nG9lKb/nQtQDPCMuULGigBSXuZOK6zEFmhTBhxfptIt+UeRDG+ycAccw8wiMyAHzDM
         S2Fcb8k+q7FFulyMU9qmJRZ9oXXmsYEB8zqBf41K43nikY44zMZSg6vZfi2BuiBJGDz2
         xVkfctYiLgHSTdIn1nwus1lFKd/qjXvdLzp2M=
MIME-Version: 1.0
Received: by 10.220.77.17 with SMTP id e17mr4216715vck.3.1244498109921; Mon, 
	08 Jun 2009 14:55:09 -0700 (PDT)
Date: Mon, 8 Jun 2009 18:55:09 -0300
Message-ID: <5d53d5770906081455t5ea2017fm3e2235ac1cef64f2@mail.gmail.com>
Subject: Lucene for the Mac
From: Ian Vink <ianvink@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64eabf4c3fab8046bdd4b10
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64eabf4c3fab8046bdd4b10
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Is there a Mac port of the Lucene engine?

--0016e64eabf4c3fab8046bdd4b10--

From java-user-return-40664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 21:57:27 2009
Return-Path: <java-user-return-40664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39741 invoked from network); 8 Jun 2009 21:57:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 21:57:27 -0000
Received: (qmail 88465 invoked by uid 500); 8 Jun 2009 21:57:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88387 invoked by uid 500); 8 Jun 2009 21:57:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88377 invoked by uid 99); 8 Jun 2009 21:57:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 21:57:36 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 21:57:24 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id D995445E7D6
	for <java-user@lucene.apache.org>; Mon,  8 Jun 2009 23:57:03 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id wjhUcsKJ5IXq for <java-user@lucene.apache.org>;
	Mon,  8 Jun 2009 23:56:51 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id E8D6545E7D4
	for <java-user@lucene.apache.org>; Mon,  8 Jun 2009 23:56:50 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <5d53d5770906081455t5ea2017fm3e2235ac1cef64f2@mail.gmail.com>
Subject: RE: Lucene for the Mac
Date: Mon, 8 Jun 2009 23:56:51 +0200
Message-ID: <A17138ABF24D47A5B4FD13881FABE8DE@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acnog+NisQaUWZHPQA2Vsn+A+te6DgAABfeg
In-Reply-To: <5d53d5770906081455t5ea2017fm3e2235ac1cef64f2@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene is written in Java and Java is cross-platform.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ian Vink [mailto:ianvink@gmail.com]
> Sent: Monday, June 08, 2009 11:55 PM
> To: java-user@lucene.apache.org
> Subject: Lucene for the Mac
> 
> Is there a Mac port of the Lucene engine?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 21:57:53 2009
Return-Path: <java-user-return-40665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39970 invoked from network); 8 Jun 2009 21:57:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 21:57:52 -0000
Received: (qmail 90198 invoked by uid 500); 8 Jun 2009 21:58:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90118 invoked by uid 500); 8 Jun 2009 21:58:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90108 invoked by uid 99); 8 Jun 2009 21:58:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 21:58:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 21:57:50 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id A9141312D3
	for <java-user@lucene.apache.org>; Mon,  8 Jun 2009 23:57:28 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 91EB3312B4
	for <java-user@lucene.apache.org>; Mon,  8 Jun 2009 23:57:28 +0200 (CEST)
Received: from [192.168.178.47] (BAH50b3.bah.pppool.de [77.135.80.179])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 39C8E31121
	for <java-user@lucene.apache.org>; Mon,  8 Jun 2009 23:57:28 +0200 (CEST)
Message-Id: <CF28F2C7-00AD-488E-AD22-BEBCF79B3710@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770906081455t5ea2017fm3e2235ac1cef64f2@mail.gmail.com>
Content-Type: multipart/signed; boundary=Apple-Mail-9--96924744; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Lucene for the Mac
Date: Mon, 8 Jun 2009 23:57:27 +0200
References: <5d53d5770906081455t5ea2017fm3e2235ac1cef64f2@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-9--96924744
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable


Le 08-juin-09 =E0 23:55, Ian Vink a =E9crit :
> Is there a Mac port of the Lucene engine?

I don't get it, are you asking whether Lucene java works on MacOSX? =20
answer is yes.
Are you asking for a Cocoa and ObjC port? (don't know)

paul=

--Apple-Mail-9--96924744
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIDDzCCAwsw
ggJ0oAMCAQICECfgYPDm3JFN4mPGdyWyyVgwDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA5MDUyNjA3MzIzNloXDTEwMDUyNjA3MzIz
NlowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDeZiQTdNavFBrVY7WMNWscajCzBRZF
cWhrkQyh2V0CCrwx7ElHEM0asrD/FbmK+eor0aeav4u/3RKj3qOsV/HV8VRiM2zHaaErrp+/boPw
FapmxhPk0TXLceFJAgL5ZA1RsfpcIxGzE/AQ5ic+MqZXp2tZkH6RNeOwoUTURZb2bOZWX5fA1G+L
G+IVs20vAN6i/Kdud3JUe9ElfHWfJTl2eO42Hea5MVLnk2IkmCqzxC3CcEchOgOzIrnEjaj/JLPB
ZZkDv6sTyEouG4qQHr4trSZCe5anTM2HoPVtmAoaz+Acyt2+0cwIUIPGDjk1K0mvrnCbVIOUNlUe
FVJu0svnAgMBAAGjMDAuMB4GA1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/
BAIwADANBgkqhkiG9w0BAQUFAAOBgQDC0P6qlhvM4E2XepLgrDWLj7yp9obwKr2tZBvM3lXGCIyx
edzPOMRQABPH3eBbvhKyMb64AoCttJ0vt+QcBLLtc9TkBxPyHyaRHmi4NUMlJJyy1z6pLNc0Ipec
U+qv5ck7Cl2SUs7ZQps9ZSW++s4LKKrcdsEs9HD4myt1YusWKTGCAxAwggMMAgEBMHYwYjELMAkG
A1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMT
I1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAhAn4GDw5tyRTeJjxnclsslYMAkG
BSsOAwIaBQCgggFvMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA5
MDYwODIxNTcyN1owIwYJKoZIhvcNAQkEMRYEFLWLPrg0Sv3UoIakuxNL3CcKiznbMIGFBgkrBgEE
AYI3EAQxeDB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQJ+Bg
8ObckU3iY8Z3JbLJWDCBhwYLKoZIhvcNAQkQAgsxeKB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQK
ExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwg
RnJlZW1haWwgSXNzdWluZyBDQQIQJ+Bg8ObckU3iY8Z3JbLJWDANBgkqhkiG9w0BAQEFAASCAQCo
j3W7S+CJg3ICwYQpY8hVu5MkFprUetvYpoJLGOtnjJ6xgGwMfjTId4jJ5bONaJECpkl6OraoiNGa
n4BMT642wq2+9djBNojjfJ+kyuMAC5AG6tKmue/AZowbtwqzIDMjStliV9guAGTGXdYgC8Y/EcOm
M8BAD2+VoqrxbY3dpdnXytlYyxgo94cF2vYnaoswdUWW8MR4TJlCHQFgQt7gEB8JfJLtHEb+jGWv
MGwTsUlheuFXRmBoGBmdgUP8ybGoVSb/0vNUcLxKuzlcTnJUTgKpfGRk8NiB4uzsl3nDCdmNWnh/
6rRf3vXtBa3j4ADFGcAQ2B/8JmrLU95r17M+AAAAAAAA

--Apple-Mail-9--96924744--

From java-user-return-40666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 22:05:42 2009
Return-Path: <java-user-return-40666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44486 invoked from network); 8 Jun 2009 22:05:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 22:05:41 -0000
Received: (qmail 97097 invoked by uid 500); 8 Jun 2009 22:05:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97017 invoked by uid 500); 8 Jun 2009 22:05:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97007 invoked by uid 99); 8 Jun 2009 22:05:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 22:05:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.221.184 as permitted sender)
Received: from [209.85.221.184] (HELO mail-qy0-f184.google.com) (209.85.221.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 22:05:41 +0000
Received: by qyk14 with SMTP id 14so2902314qyk.29
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 15:05:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=lEJRjGPus823brXJa/Scq3628qMTNzHMrsWWEn8w0t8=;
        b=wD2zpBkdyPU1X+WrQPsBiZbFoJRMV7j2Ohn+FwKKTuunID+EwdxsyUQHxFAlGIDANh
         Foqz4QNVGrxDOamqIEpDzsEZ7nsA20+o0FjYP5eDYS8jxrcbvsgga7YPAvsdViqgGXaJ
         Po0pARwXaWBr3sy9KBS2DrozRun5W255WkVmA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=aXG7V1Lddkvb1Zh79z+EwHOQ2zmdWkdwfgGQ9egVM2U8klKKc8KddtFyxgaeLT5Nqk
         +IiITemKtcQSEfJUUNJEshLQ9Vyxk5Ppj9W9hD03EFfP38ywOX7hq099VWrSTgfFLBkO
         biOxWymP4RYIdSVvB4eAZpIO2AUJnJG0UFlUc=
MIME-Version: 1.0
Received: by 10.220.84.81 with SMTP id i17mr4232635vcl.12.1244498720795; Mon, 
	08 Jun 2009 15:05:20 -0700 (PDT)
In-Reply-To: <CF28F2C7-00AD-488E-AD22-BEBCF79B3710@activemath.org>
References: <5d53d5770906081455t5ea2017fm3e2235ac1cef64f2@mail.gmail.com>
	 <CF28F2C7-00AD-488E-AD22-BEBCF79B3710@activemath.org>
Date: Mon, 8 Jun 2009 19:05:20 -0300
Message-ID: <5d53d5770906081505qc720504y9491d800453175fb@mail.gmail.com>
Subject: Re: Lucene for the Mac
From: Ian Vink <ianvink@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016362850c82d2e21046bdd707d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016362850c82d2e21046bdd707d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Yes, if there an Objective-C version.
Ian


On Mon, Jun 8, 2009 at 6:57 PM, Paul Libbrecht <paul@activemath.org> wrote:

>
> Le 08-juin-09 =E0 23:55, Ian Vink a =E9crit :
>
>> Is there a Mac port of the Lucene engine?
>>
>
> I don't get it, are you asking whether Lucene java works on MacOSX? answe=
r
> is yes.
> Are you asking for a Cocoa and ObjC port? (don't know)
>
> paul

--0016362850c82d2e21046bdd707d--

From java-user-return-40667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 08 23:44:44 2009
Return-Path: <java-user-return-40667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70931 invoked from network); 8 Jun 2009 23:44:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jun 2009 23:44:44 -0000
Received: (qmail 88939 invoked by uid 500); 8 Jun 2009 23:44:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88874 invoked by uid 500); 8 Jun 2009 23:44:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88858 invoked by uid 99); 8 Jun 2009 23:44:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 23:44:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jun 2009 23:44:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MDoVq-0006E6-Ba
	for java-user@lucene.apache.org; Mon, 08 Jun 2009 16:44:22 -0700
Message-ID: <23934073.post@talk.nabble.com>
Date: Mon, 8 Jun 2009 16:44:22 -0700 (PDT)
From: pof <MelbourneBeerBaron@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to distribute lucene using rsync
In-Reply-To: <067FB7B7-DC78-4103-9872-DCD1F9066D90@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: MelbourneBeerBaron@gmail.com
References: <f504cec00708251852v6b985e08td7362617c6550c75@mail.gmail.com> <067FB7B7-DC78-4103-9872-DCD1F9066D90@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Is their a way to address this without Solr? I was looking at Solr today and
it looks like a lot of piss-farting around just to backup an index. I also
found their explaination on
http://wiki.apache.org/solr/CollectionDistribution poorly explained, so I am
a bit confused with the whole process.


Grant Ingersoll-6 wrote:
> 
> Yes, see Solr.  It takes care of all this, and then some, for you.
> 
> -Grant
> 
> On Aug 25, 2007, at 9:52 PM, varma d wrote:
> 
>> Hi Lucene gurus,
>>    I am newbie and i have a question on transfering index  
>> directories across
>> multiple machines. Whenever i update/add any new documents to the  
>> existing
>> index, then it is generating new .cfs file. Because of this , i  
>> ended up
>> doing complete transfer (instead of diff) as the file names got  
>> changed. Is
>> there any way to make the .cfs file name as fixed. I would like to  
>> know if
>> anyone successfully synced index directories using rsync.
>>
>> Thanks for ur time
>> varma
> 
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-distribute-lucene-using-rsync-tp12331421p23934073.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 01:00:45 2009
Return-Path: <java-user-return-40668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98718 invoked from network); 9 Jun 2009 01:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 01:00:45 -0000
Received: (qmail 39194 invoked by uid 500); 9 Jun 2009 01:00:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39147 invoked by uid 500); 9 Jun 2009 01:00:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39137 invoked by uid 99); 9 Jun 2009 01:00:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 01:00:54 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 01:00:44 +0000
Received: from [192.168.0.105] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 9A40DE24B2
	for <java-user@lucene.apache.org>; Mon,  8 Jun 2009 18:00:23 -0700 (PDT)
Message-Id: <73FDA3EA-DD95-4E86-80CD-72DF55A94850@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770906081505qc720504y9491d800453175fb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Lucene for the Mac
Date: Mon, 8 Jun 2009 21:00:22 -0400
References: <5d53d5770906081455t5ea2017fm3e2235ac1cef64f2@mail.gmail.com> <CF28F2C7-00AD-488E-AD22-BEBCF79B3710@activemath.org> <5d53d5770906081505qc720504y9491d800453175fb@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

http://www.lucidimagination.com/search/?q=3DObjective+C+port+of+Lucene =20=

suggests there is, although I don't know the state of it.

On Jun 8, 2009, at 6:05 PM, Ian Vink wrote:

> Yes, if there an Objective-C version.
> Ian
>
>
> On Mon, Jun 8, 2009 at 6:57 PM, Paul Libbrecht <paul@activemath.org> =20=

> wrote:
>
>>
>> Le 08-juin-09 =E0 23:55, Ian Vink a =E9crit :
>>
>>> Is there a Mac port of the Lucene engine?
>>>
>>
>> I don't get it, are you asking whether Lucene java works on MacOSX? =20=

>> answer
>> is yes.
>> Are you asking for a Cocoa and ObjC port? (don't know)
>>
>> paul

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) =20
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 01:50:57 2009
Return-Path: <java-user-return-40669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26383 invoked from network); 9 Jun 2009 01:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 01:50:57 -0000
Received: (qmail 76788 invoked by uid 500); 9 Jun 2009 01:51:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76711 invoked by uid 500); 9 Jun 2009 01:51:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76701 invoked by uid 99); 9 Jun 2009 01:51:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 01:51:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.221.184 as permitted sender)
Received: from [209.85.221.184] (HELO mail-qy0-f184.google.com) (209.85.221.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 01:50:55 +0000
Received: by qyk14 with SMTP id 14so3069910qyk.29
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 18:50:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=BD2lxbs+vtvrXYfKn+3H/2JxwXIanqUb8/SkjPa5lqI=;
        b=bhD26hJ1u1ePqWWkchAR1CDfHv5T8hO/44MQtzV9uKFwMXOTHyq55GeipLYquosOuP
         HTwomUmk6Wivqh8xsuSe3NBQKkHRs/yTtzpgDDGVc302J+q5OYUvcfTvu5nRXYYm1ciL
         ZjLX6H2QhjdK3yOri35IIW0gpOc2WFJDMdIhk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Wh6yQF+Tm5Sll4e6E12e+RRjfbQSXR4OCZM8vtL3IdismSlFPtTTRGq3mp7vaSGNCW
         8IUpC5QTJbeNDWTUSsYrKxuGRu1IPBaVKDUH/P2BX886CjGiqBM6TwyiN5l6oDmQ30kU
         JqPZApped2T8IfSBlhXxLybPAWEGIP6cGNZJg=
MIME-Version: 1.0
Received: by 10.220.80.134 with SMTP id t6mr4109027vck.108.1244512209966; Mon, 
	08 Jun 2009 18:50:09 -0700 (PDT)
In-Reply-To: <73FDA3EA-DD95-4E86-80CD-72DF55A94850@apache.org>
References: <5d53d5770906081455t5ea2017fm3e2235ac1cef64f2@mail.gmail.com>
	 <CF28F2C7-00AD-488E-AD22-BEBCF79B3710@activemath.org>
	 <5d53d5770906081505qc720504y9491d800453175fb@mail.gmail.com>
	 <73FDA3EA-DD95-4E86-80CD-72DF55A94850@apache.org>
Date: Mon, 8 Jun 2009 22:50:08 -0300
Message-ID: <5d53d5770906081850x4d457704l80667948a6712888@mail.gmail.com>
Subject: Re: Lucene for the Mac
From: Ian Vink <ianvink@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64717bc381979046be094fd
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64717bc381979046be094fd
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Found it:
http://github.com/tcurdt/lucenekit/tree/master

<http://github.com/tcurdt/lucenekit/tree/master>Mac Lucene project. iPhone,
Mac Desktop/Laptop

Great!

On Mon, Jun 8, 2009 at 10:00 PM, Grant Ingersoll <gsingers@apache.org>wrote=
:

> http://www.lucidimagination.com/search/?q=3DObjective+C+port+of+Lucenesug=
gests there is, although I don't know the state of it.
>
>
> On Jun 8, 2009, at 6:05 PM, Ian Vink wrote:
>
>  Yes, if there an Objective-C version.
>> Ian
>>
>>
>> On Mon, Jun 8, 2009 at 6:57 PM, Paul Libbrecht <paul@activemath.org>
>> wrote:
>>
>>
>>> Le 08-juin-09 =E0 23:55, Ian Vink a =E9crit :
>>>
>>>  Is there a Mac port of the Lucene engine?
>>>>
>>>>
>>> I don't get it, are you asking whether Lucene java works on MacOSX?
>>> answer
>>> is yes.
>>> Are you asking for a Cocoa and ObjC port? (don't know)
>>>
>>> paul
>>>
>>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
> Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) using
> Solr/Lucene:
> http://www.lucidimagination.com/search
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64717bc381979046be094fd--

From java-user-return-40670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 02:02:22 2009
Return-Path: <java-user-return-40670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32910 invoked from network); 9 Jun 2009 02:02:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 02:02:22 -0000
Received: (qmail 90452 invoked by uid 500); 9 Jun 2009 02:02:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90375 invoked by uid 500); 9 Jun 2009 02:02:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90365 invoked by uid 99); 9 Jun 2009 02:02:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 02:02:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 02:02:21 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id BEA307CD73
	for <java-user@lucene.apache.org>; Tue,  9 Jun 2009 11:02:00 +0900 (JST)
Message-ID: <4A2DC298.3060802@r.email.ne.jp>
Date: Tue, 09 Jun 2009 11:02:00 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.21 (Macintosh/20090302)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: HitCollectorWrapper
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

CHANGES.txt said that we can use HitCollectorWrapper:

12. LUCENE-1575: HitCollector is now deprecated in favor of a new
Collector abstract class. For easy migration, people can use
HitCollectorWrapper which translates (wraps) HitCollector into
Collector.

But it looks package private?

Thank you,

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 03:53:34 2009
Return-Path: <java-user-return-40671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60584 invoked from network); 9 Jun 2009 03:53:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 03:53:34 -0000
Received: (qmail 52560 invoked by uid 500); 9 Jun 2009 03:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52472 invoked by uid 500); 9 Jun 2009 03:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52462 invoked by uid 99); 9 Jun 2009 03:53:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 03:53:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of unnutz@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 03:53:34 +0000
Received: by bwz27 with SMTP id 27so3754540bwz.5
        for <java-user@lucene.apache.org>; Mon, 08 Jun 2009 20:53:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=xkbFoKlIkKPkHgMEKk3nU9vB9NIUjyW/PZOO3IjNJ7c=;
        b=gELM1coLsFCPBWd7vwMLfQi/zl3UgyvUylrI+8HqQqWkBvEuYH4omuiA32+Heezvwu
         N3TjZaCd/Ics9B9z2XF0BEGBEB7uQRRFFWZqIMEBbz4aMBSPE7bptLgFgf9l5wrn772H
         QAumMk4hKsr+LihcwIwFAjhbXU0kBS+lGNACw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=dmOH6Qh9m0+P1h4Laz2H1CT3L1ImwskjalFvZLRVk8+uiOssumXog8yumPevRDhg4u
         wfuhpe8eBscnvVbYxtSQ0lIb7Y0M4K7cZBDpNz0wcKBX/BOKqXlcVGBNfbroGT+2Vd2Z
         O+Y298Y1z6BCC6vRy0iCch9H00GDMEWtIxGPw=
MIME-Version: 1.0
Received: by 10.103.214.13 with SMTP id r13mr2711874muq.37.1244519593508; Mon, 
	08 Jun 2009 20:53:13 -0700 (PDT)
From: Artyom Sokolov <unnutz@gmail.com>
Date: Tue, 9 Jun 2009 08:52:51 +0500
Message-ID: <edd377170906082052q15b49ad8ncf15e3e8745e3ae7@mail.gmail.com>
Subject: 2.9 javadoc
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Good time of day.

If I understand correctly next release will be 2.9. Where one could
find javadocs for it? I've searched in Hudson a bit but didn't find
anything.

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 08:00:21 2009
Return-Path: <java-user-return-40672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82523 invoked from network); 9 Jun 2009 08:00:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 08:00:20 -0000
Received: (qmail 68453 invoked by uid 500); 9 Jun 2009 08:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68378 invoked by uid 500); 9 Jun 2009 08:00:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68368 invoked by uid 99); 9 Jun 2009 08:00:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 08:00:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shayaksen@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 08:00:22 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1748218ywt.5
        for <java-user@lucene.apache.org>; Tue, 09 Jun 2009 01:00:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=FSSragn2cZPvjwb7vzXY31afL2a4rUTSeqMrVgGIRHo=;
        b=EE+pNTppk2GTTUui5XOmPuXomvcNaYy3SElQDTXaK4pD/E8q5Nk5jh4wOExfk6UEcJ
         aKTNouhJ7OWa5tWDmxS7Vg0cdw625NyUDbLCnfUfJOKB80Y/IYKkGpiQv5yjc70ZSKrx
         kF1kXujrVTMWGjlwad5miXdVESsFLOy6Ote30=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=ssgihJNRvV5w/L9KIPNNDSVi32P6TacGJXhkJFTiTadjDYV/QqWBi8WkDBC9OHGG0O
         5kD9aQxm8tLmHcPxj+1g/B4Kagf9kxvIA3/2/KpPTny/dAiknYtFNHnpzCZcaMyJgjKW
         bmwuiVouLE7FFQy7+M0tk+dSd9gd9hpggHyHU=
MIME-Version: 1.0
Received: by 10.90.118.19 with SMTP id q19mr6666295agc.35.1244534401548; Tue, 
	09 Jun 2009 01:00:01 -0700 (PDT)
Date: Tue, 9 Jun 2009 16:00:01 +0800
Message-ID: <c260f2760906090100h4c9d5304qf6be2b30f6a34e86@mail.gmail.com>
Subject: Lucene Query Field Info
From: Shayak Sen <shayaksen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I construct a boolean query to search a term in each of the field of
the index. Once I retrieve the hits, is it possible to retrieve which
field matched to the particular term.
For example:
I have fields A B C with data a b c.
A B C
a  b a

Then I search for A:a B:a C:a and get a hit.
Can I tell which field(s) the hit occured in?
I could do separate searches as per the field but that would take more
time and also upset my ranking.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 08:17:25 2009
Return-Path: <java-user-return-40673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86731 invoked from network); 9 Jun 2009 08:17:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 08:17:25 -0000
Received: (qmail 1286 invoked by uid 500); 9 Jun 2009 08:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1189 invoked by uid 500); 9 Jun 2009 08:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1179 invoked by uid 99); 9 Jun 2009 08:17:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 08:17:34 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.241.243] (HELO mail192.messagelabs.com) (216.82.241.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Jun 2009 08:17:25 +0000
X-VirusChecked: Checked
X-Env-Sender: RaviK.Thakur@lntinfotech.com
X-Msg-Ref: server-10.tower-192.messagelabs.com!1244535423!43443362!1
X-StarScan-Version: 6.0.0; banners=lntinfotech.com,-,-
X-Originating-IP: [125.17.191.34]
Received: (qmail 1401 invoked from network); 9 Jun 2009 08:17:04 -0000
Received: from unknown (HELO Mailrelay2.pwiodc.lntinfotech.com) (125.17.191.34)
  by server-10.tower-192.messagelabs.com with SMTP; 9 Jun 2009 08:17:04 -0000
Received: from Powai.lntinfotech.com ([172.25.9.2])
          by Mailrelay2.pwiodc.lntinfotech.com (Lotus Domino Release 7.0.2)
          with ESMTP id 2009060913462447-1327823 ;
          Tue, 9 Jun 2009 13:46:24 +0530 
Subject: Using Lucene for Moderate Similarity Check..
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0.2 September 26, 2006
Message-ID: <OFA433B746.CDF7AA2D-ON652575D0.002D6853-652575D0.002D7C07@lntinfotech.com>
From: RaviK Thakur <RaviK.Thakur@lntinfotech.com>
Date: Tue, 9 Jun 2009 13:46:47 +0530
MIME-Version: 1.0
X-MIMETrack: Serialize by Router on POWAI/LNTINFOTECH(Release 7.0.3|September 26, 2007) at
 06/09/2009 01:46:47 PM,
	Itemize by SMTP Server on MAILRELAY2/LNTINFOTECH(Release 7.0.2|September 26, 2006) at
 06/09/2009 01:46:24 PM,
	Serialize by Router on MAILRELAY2/LNTINFOTECH(Release 7.0.2|September 26, 2006) at
 06/09/2009 01:46:40 PM,
	Serialize complete at 06/09/2009 01:46:40 PM
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Hello All,
      I want to check the feasibility of using Lucene for similarity check
between the two flat csv files. The actual requirement is like this: We
have two files each containing the information of customers like their
name, address, pin code etc. Some customers may be in common in both the
files. We want to find the customer that are common in these files. But the
match should be on attribute basis. If the name of the customer matches in
one file to the name of the customer in another file, then match the
address, if it matches then match pin code and so on. But the main
consideration is that this matching is not exact. If the name of customer
matches say 80% then it may be termed as match. For example, if ABDUL is
matched with ABDULLAH, it should be termed as a match. In this fashion each
record of one file will be matched with each record of another file. The
output of this procedure will be another file containing the matched
record.

Can anyone please suggest the applicability of lucene for this requirement.
May in the form of Pros n Cons.

Thanks in advance:-)
Ravi


______________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 09:13:36 2009
Return-Path: <java-user-return-40674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2714 invoked from network); 9 Jun 2009 09:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 09:13:36 -0000
Received: (qmail 77556 invoked by uid 500); 9 Jun 2009 09:13:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77479 invoked by uid 500); 9 Jun 2009 09:13:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77469 invoked by uid 99); 9 Jun 2009 09:13:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:13:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:13:35 +0000
Received: by fxm3 with SMTP id 3so3930625fxm.5
        for <java-user@lucene.apache.org>; Tue, 09 Jun 2009 02:13:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=E5W1rmx02NwOgHaS7nk/EtU9OH2UZiJyuDWf0Sn4TUw=;
        b=vUEqWGgXnTW/pD22kROgBGUHyhHk4Fh30BiyJn6Pv+G8pURgyNHoca3RGycgauku+B
         NlZquHol2K1ljsTNSoCJTIrcUZUCkwkFFE+CLXqg0ma9QSsI9kXzhp7tvl81qaZEDK+Z
         3x/5s3w5m13+TREPTxWj+qAAwT26ugaQxMKIw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=r8epCJZw5XWQnxZRj483V1NhCGQtwyXgWXny3tUfbI5q+bnHtsxzx+sE4OlCGzL77u
         TMDGKi0YXcX4r9MWdvrMK2I0jLuSz4sAmtoUb+ngt4MwStmOYSIMrO8FvQABLR0JgUXF
         Dd7idFv0dw9wGO6ni03MwGglLYW8JEk8MAR34=
MIME-Version: 1.0
Received: by 10.86.30.5 with SMTP id d5mr4385647fgd.26.1244538794272; Tue, 09 
	Jun 2009 02:13:14 -0700 (PDT)
In-Reply-To: <23934073.post@talk.nabble.com>
References: <f504cec00708251852v6b985e08td7362617c6550c75@mail.gmail.com> 
	<067FB7B7-DC78-4103-9872-DCD1F9066D90@apache.org> <23934073.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 9 Jun 2009 10:12:53 +0100
Message-ID: <8c4e68610906090212l7ff7ac4aj941add2fd12a3fd4@mail.gmail.com>
Subject: Re: How to distribute lucene using rsync
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Unless you optimize it or are doing weird things with merge factors
you won't get completely new files every time you update an index.
Some files will change, or be created, or deleted, and some won't.
Then you can just copy them wherever you want using rsync or whatever
you like.  We use rsync, mainly on non compound indexes although also
on compound, and it works well.

$ rsync -av --delete /local/index/dir-or-tree desthost::lucene


--
Ian.


On Tue, Jun 9, 2009 at 12:44 AM, pof<MelbourneBeerBaron@gmail.com> wrote:
>
> Is their a way to address this without Solr? I was looking at Solr today =
and
> it looks like a lot of piss-farting around just to backup an index. I als=
o
> found their explaination on
> http://wiki.apache.org/solr/CollectionDistribution poorly explained, so I=
 am
> a bit confused with the whole process.
>
>
> Grant Ingersoll-6 wrote:
>>
>> Yes, see Solr. =A0It takes care of all this, and then some, for you.
>>
>> -Grant
>>
>> On Aug 25, 2007, at 9:52 PM, varma d wrote:
>>
>>> Hi Lucene gurus,
>>> =A0 =A0I am newbie and i have a question on transfering index
>>> directories across
>>> multiple machines. Whenever i update/add any new documents to the
>>> existing
>>> index, then it is generating new .cfs file. Because of this , i
>>> ended up
>>> doing complete transfer (instead of diff) as the file names got
>>> changed. Is
>>> there any way to make the .cfs file name as fixed. I would like to
>>> know if
>>> anyone successfully synced index directories using rsync.
>>>
>>> Thanks for ur time
>>> varma
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/How-to-distribute-luc=
ene-using-rsync-tp12331421p23934073.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 09:19:45 2009
Return-Path: <java-user-return-40675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3871 invoked from network); 9 Jun 2009 09:19:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 09:19:45 -0000
Received: (qmail 86730 invoked by uid 500); 9 Jun 2009 09:19:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86670 invoked by uid 500); 9 Jun 2009 09:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86660 invoked by uid 99); 9 Jun 2009 09:19:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:19:55 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:19:45 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1761541ywt.5
        for <java-user@lucene.apache.org>; Tue, 09 Jun 2009 02:19:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.73.1 with SMTP id a1mr4675052ybl.95.1244539163881; Tue, 09 
	Jun 2009 02:19:23 -0700 (PDT)
In-Reply-To: <23934073.post@talk.nabble.com>
References: <f504cec00708251852v6b985e08td7362617c6550c75@mail.gmail.com>
	 <067FB7B7-DC78-4103-9872-DCD1F9066D90@apache.org>
	 <23934073.post@talk.nabble.com>
Date: Tue, 9 Jun 2009 05:19:23 -0400
Message-ID: <9ac0c6aa0906090219o35da42cfk48cfff943bf1a87a@mail.gmail.com>
Subject: Re: How to distribute lucene using rsync
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Note that when using rsync, you must first close the IndexWriter, else
the copy can be corrupt.

If having to close IndexWriter (and stop indexing) is a hassle, then
you should use SnapshotDeletionPolicy; it was created exactly for this
reason (to take a backup of the index even while further indexing is
proceeding).

Mike

On Mon, Jun 8, 2009 at 7:44 PM, pof<MelbourneBeerBaron@gmail.com> wrote:
>
> Is their a way to address this without Solr? I was looking at Solr today =
and
> it looks like a lot of piss-farting around just to backup an index. I als=
o
> found their explaination on
> http://wiki.apache.org/solr/CollectionDistribution poorly explained, so I=
 am
> a bit confused with the whole process.
>
>
> Grant Ingersoll-6 wrote:
>>
>> Yes, see Solr. =A0It takes care of all this, and then some, for you.
>>
>> -Grant
>>
>> On Aug 25, 2007, at 9:52 PM, varma d wrote:
>>
>>> Hi Lucene gurus,
>>> =A0 =A0I am newbie and i have a question on transfering index
>>> directories across
>>> multiple machines. Whenever i update/add any new documents to the
>>> existing
>>> index, then it is generating new .cfs file. Because of this , i
>>> ended up
>>> doing complete transfer (instead of diff) as the file names got
>>> changed. Is
>>> there any way to make the .cfs file name as fixed. I would like to
>>> know if
>>> anyone successfully synced index directories using rsync.
>>>
>>> Thanks for ur time
>>> varma
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/How-to-distribute-luc=
ene-using-rsync-tp12331421p23934073.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 09:20:47 2009
Return-Path: <java-user-return-40676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4144 invoked from network); 9 Jun 2009 09:20:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 09:20:47 -0000
Received: (qmail 88796 invoked by uid 500); 9 Jun 2009 09:20:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88735 invoked by uid 500); 9 Jun 2009 09:20:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88725 invoked by uid 99); 9 Jun 2009 09:20:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:20:57 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:20:48 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1761765ywt.5
        for <java-user@lucene.apache.org>; Tue, 09 Jun 2009 02:20:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.49.6 with SMTP id b6mr14651467ybk.306.1244539228134; Tue, 
	09 Jun 2009 02:20:28 -0700 (PDT)
In-Reply-To: <edd377170906082052q15b49ad8ncf15e3e8745e3ae7@mail.gmail.com>
References: <edd377170906082052q15b49ad8ncf15e3e8745e3ae7@mail.gmail.com>
Date: Tue, 9 Jun 2009 05:20:28 -0400
Message-ID: <9ac0c6aa0906090220r7f949f4fub5379f17af481737@mail.gmail.com>
Subject: Re: 2.9 javadoc
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/docs/nightly/

Mike

On Mon, Jun 8, 2009 at 11:52 PM, Artyom Sokolov<unnutz@gmail.com> wrote:
> Good time of day.
>
> If I understand correctly next release will be 2.9. Where one could
> find javadocs for it? I've searched in Hudson a bit but didn't find
> anything.
>
> Thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 09:29:45 2009
Return-Path: <java-user-return-40677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8659 invoked from network); 9 Jun 2009 09:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 09:29:45 -0000
Received: (qmail 3086 invoked by uid 500); 9 Jun 2009 09:29:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3045 invoked by uid 500); 9 Jun 2009 09:29:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3013 invoked by uid 99); 9 Jun 2009 09:29:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:29:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:29:44 +0000
Received: by gxk11 with SMTP id 11so3231150gxk.5
        for <java-user@lucene.apache.org>; Tue, 09 Jun 2009 02:29:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.189.2 with SMTP id m2mr5630ybf.13.1244539762880; Tue, 09 
	Jun 2009 02:29:22 -0700 (PDT)
In-Reply-To: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA2D368AB849@IIWCBO-EMB1.iiw.de.ittind.com>
References: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA2D368AB849@IIWCBO-EMB1.iiw.de.ittind.com>
Date: Tue, 9 Jun 2009 05:29:22 -0400
Message-ID: <9ac0c6aa0906090229x3f838aen38aaca5d0ddec010@mail.gmail.com>
Subject: Re: Debugging file lock problem
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This doesn't exist today, but it'd be straightforward to implement
your own LockFactory that is verbose?

Mike

On Fri, Jun 5, 2009 at 1:15 PM, Newman, Billy<Billy.Newman@itt.com> wrote:
> I am having a problem where I am getting lock timeouts when trying to wri=
te to my index file. =A0It would be nice if I could turn on logging to see =
which server/application has the lock and when. =A0Is there a way to see th=
e lock information without changing code?
>
> Thanks,
> Billy
>
> ________________________________
> This e-mail and any files transmitted with it may be proprietary and are =
intended solely for the use of the individual or entity to whom they are ad=
dressed. If you have received this e-mail in error please notify the sender=
.
> Please note that any views or opinions presented in this e-mail are solel=
y those of the author and do not necessarily represent those of ITT Corpora=
tion. The recipient should check this e-mail and any attachments for the pr=
esence of viruses. ITT accepts no liability for any damage caused by any vi=
rus transmitted by this e-mail.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 09:54:03 2009
Return-Path: <java-user-return-40678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21085 invoked from network); 9 Jun 2009 09:54:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 09:54:03 -0000
Received: (qmail 31375 invoked by uid 500); 9 Jun 2009 09:54:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31302 invoked by uid 500); 9 Jun 2009 09:54:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31292 invoked by uid 99); 9 Jun 2009 09:54:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:54:13 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 09:54:03 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1767427ywt.5
        for <java-user@lucene.apache.org>; Tue, 09 Jun 2009 02:53:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.135.15 with SMTP id i15mr14659922ybd.279.1244541222349; 
	Tue, 09 Jun 2009 02:53:42 -0700 (PDT)
In-Reply-To: <4A2DC298.3060802@r.email.ne.jp>
References: <4A2DC298.3060802@r.email.ne.jp>
Date: Tue, 9 Jun 2009 05:53:42 -0400
Message-ID: <9ac0c6aa0906090253l125e2d74n911668faf5197634@mail.gmail.com>
Subject: Re: HitCollectorWrapper
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Woops, you're right.  I just fixed that (made it public).  Thanks for
raising this!

Mike

2009/6/8 Koji Sekiguchi <koji@r.email.ne.jp>:
> CHANGES.txt said that we can use HitCollectorWrapper:
>
> 12. LUCENE-1575: HitCollector is now deprecated in favor of a new
> Collector abstract class. For easy migration, people can use
> HitCollectorWrapper which translates (wraps) HitCollector into
> Collector.
>
> But it looks package private?
>
> Thank you,
>
> Koji
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 11:49:37 2009
Return-Path: <java-user-return-40679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60597 invoked from network); 9 Jun 2009 11:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 11:49:37 -0000
Received: (qmail 27380 invoked by uid 500); 9 Jun 2009 11:49:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27310 invoked by uid 500); 9 Jun 2009 11:49:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27300 invoked by uid 99); 9 Jun 2009 11:49:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 11:49:46 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 11:49:33 +0000
Received: by wf-out-1314.google.com with SMTP id 24so1481596wfg.20
        for <java-user@lucene.apache.org>; Tue, 09 Jun 2009 04:49:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=zN8gzl0bPZTDTOSA4SkOH40IOz0VuYKKWPdb5enlUy0=;
        b=sIHJOgVqy9zAo0jeZuA+mEZouu3nQ2u57hFR2iQC4gGnPsbvMV5CNqSkjvpXIjE4OL
         /TCkecYOcAUrz0b6ABRyNSSwdhnqyyVZqTy/BMg1ZeWoL35T4kzE1djEElqK6UxuzIyf
         iCWGz/RvIqW9jmqaBNqF2BtmqUg+VMhzVeCxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=OVY6b7MmeGEaNJaaix//RFv4VESgcL1XkBgmLyAhtRrUugL1QEYxgByxshIpkmMhx5
         sPXFnYo2+vWcqMzqZ9RZ2Nvfg2auEDtrkTRiGCmj17DutsZ41lTRUkHlpdECSR33FGKi
         /G/TB6hKiCP8J4JlwvJpzEWYhpFTV9H3sUCdk=
MIME-Version: 1.0
Received: by 10.142.194.1 with SMTP id r1mr9247wff.138.1244548150650; Tue, 09 
	Jun 2009 04:49:10 -0700 (PDT)
In-Reply-To: <8f0ad1f30906080304w2fb90b31l5763adc1c4438928@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8db6d74a0906050505o6aa1863boe6655d6eb0455f16@mail.gmail.com> 
	<8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com> 
	<8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com> 
	<8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com> 
	<8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com> 
	<8db6d74a0906060642g23eb5aefv2d9e9bc3e50bdb04@mail.gmail.com> 
	<8f0ad1f30906060915sfa8cde9u2ecf8edbe4dca1f6@mail.gmail.com> 
	<8db6d74a0906072203n77e51df8i40266e1f92608415@mail.gmail.com> 
	<8f0ad1f30906080304w2fb90b31l5763adc1c4438928@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Tue, 9 Jun 2009 17:18:50 +0530
Message-ID: <8db6d74a0906090448o4ee18b4epc9ded31a5a326af5@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd14ed86ce8c3046be8f272
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd14ed86ce8c3046be8f272
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi Robert, I tried a sample code to check whats the reason. The
worddelimiterfilter uses isLetter() method to tokenize, and for hindi words
some parts of word are not actually letters but just part of the word[but
that doesnot mean they can be used as word delimiters], since they are not
letters isLetter() returns false and the word is getting breaked around
that. This is some sample code with a hindi word pronounced saal[meaning
year in english],

import java.lang.String;

public class HindiUnicodeTest {
    public static void main(String args[]) {
        String hindiStr =3D "=E0=A4=B8=E0=A4=BE=E0=A4=B2";
        int length =3D hindiStr.length();
        System.out.println("str length " + length);
        for (int i=3D0; i<length; i++) {
            System.out.println(hindiStr.charAt(i) + " is " +
Character.isLetter(hindiStr.charAt(i)));
        }

    }
}

Running this gives this output,
str length 3
=E0=A4=B8 is true
=E0=A4=BE is false
=E0=A4=B2 is true

As you can see the second one is false, which says that it is not a letter
but this makes worddelimiterfilter break/tokenize around the word. I even
tried to use my custom parser[which I mentioned earlier] and tried to print
the string that is the output after the query getting parsed, and what I
found is that if I send the above hindi word then the query string after
being parsed is something like this,
Parsed Query string: =E0=A4=B8 =E0=A4=B2
it essentialy removes the non-letter character[the second one], and it seem=
s
it treats them as separate and whenever thse two characters appear adjacent=
,
they are in th top of result set, also whereever these two letters appers i=
n
the doc, it says they are part of the result set [and hence highlights
them].

I hope I made it clear. Do let me if some more information is required.

Thanks,
KK.

On Mon, Jun 8, 2009 at 3:34 PM, Robert Muir <rcmuir@gmail.com> wrote:

> KK can you give me an example of some indian text for which it is doing
> this?
>
> Thanks!
>
> On Mon, Jun 8, 2009 at 1:03 AM, KK<dioxide.software@gmail.com> wrote:
> > Hi Robert,
> > The problem is that worddelimiterfilter is doing its job for english
> content
> > but for non-english indian content which are unicoded it highlights the
> > searched word but alongwith that it also highlights the characters of
> that
> > word which was not hapenning without worddelimfilter, thats my concern.
> Say
> > for example I searched for a hindi word say "xyz ab" [assume these are =
in
> > hindi]  then in the search results it highlights these words but it als=
o
> > highlights x/y/z/a/b whereever these letters appear which is obiviously
> > sounds bad. it should only highlight words not the letters therein. I
> hope I
> > made it clear. What could be the reason for this? Any idea on fixing th=
e
> > same.
> >
> > Thanks,
> > KK
> >
> > On Sat, Jun 6, 2009 at 9:45 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> >> kk, i haven't had that experience with worddelimiterfilter on indian
> >> languages, is it possible you could provide me an example of how its
> >> creating nuisance?
> >>
> >> On Sat, Jun 6, 2009 at 9:42 AM, KK<dioxide.software@gmail.com> wrote:
> >> > Robert, I tried to use worddelimiterfilter from solr-nightly by
> putting
> >> it
> >> > in my working directory for this project, I set the parameters as yo=
u
> >> told
> >> > me. I must accept that its splitting words around those chars[like .=
 @
> >> > etc]but alongwith that its messing with other non-english/unicode
> >> contents
> >> > and thats creating nuisance. I dont want worddelimiterfilter to fidd=
le
> >> > around with my non-english content.
> >> > This is what I'm doing,
> >> > /**
> >> >  * Analyzer for Indian language.
> >> >  */
> >> > public class IndicAnalyzer extends Analyzer {
> >> >  public TokenStream tokenStream(String fieldName, Reader reader) {
> >> >    TokenStream ts =3D new WhitespaceTokenizer(reader);
> >> >    ts =3D new WordDelimiterFilter(ts, 1, 1, 1, 1, 0);
> >> >    ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
> >> >    ts =3D new LowerCaseFilter(ts);
> >> >    ts =3D new PorterStemFilter(ts);
> >> >    return ts;
> >> >  }
> >> > }
> >> >
> >> > I've to use the deprecated API for setting 5 values, thats fine, but
> >> somehow
> >> > its messing with unicode content. How to get rid of that? Any thougt=
s?
> It
> >> > seems setting those values is some proper way might fix the problem,
> I'm
> >> not
> >> > sure, though.
> >> >
> >> > Thanks,
> >> > KK.
> >> >
> >> >
> >> > On Fri, Jun 5, 2009 at 7:37 PM, Robert Muir <rcmuir@gmail.com> wrote=
:
> >> >
> >> >> kk an easier solution to your first problem is to use
> >> >> worddelimiterfilterfactory if possible... you can get an instance o=
f
> >> >> worddelimiter filter from that.
> >> >>
> >> >> thanks,
> >> >> robert
> >> >>
> >> >> On Fri, Jun 5, 2009 at 10:06 AM, Robert Muir<rcmuir@gmail.com>
> wrote:
> >> >> > kk as for your first issue, that WordDelimiterFilter is package
> >> >> > protected, one option is to make a copy of the code and change th=
e
> >> >> > class declaration to public.
> >> >> > the other option is to put your entire analyzer in
> >> >> > 'org.apache.solr.analysis' package so that you can access it...
> >> >> >
> >> >> > for the 2nd issue, yes you need to supply some options to it. the
> >> >> > default options solr applies to type 'text' seemed to work well f=
or
> me
> >> >> > with indic:
> >> >> >
> >> >> > {splitOnCaseChange=3D1, generateNumberParts=3D1, catenateWords=3D=
1,
> >> >> > generateWordParts=3D1, catenateAll=3D0, catenateNumbers=3D1}
> >> >> >
> >> >> > On Fri, Jun 5, 2009 at 9:12 AM, KK <dioxide.software@gmail.com>
> >> wrote:
> >> >> >>
> >> >> >> Thanks Robert. There is one problem though, I'm able to plugin t=
he
> >> word
> >> >> >> delimiter filter from solr-nightly jar file. When I tried to do
> >> >> something
> >> >> >> like,
> >> >> >>  TokenStream ts =3D new WhitespaceTokenizer(reader);
> >> >> >>   ts =3D new WordDelimiterFilter(ts);
> >> >> >>   ts =3D new PorterStemmerFilter(ts);
> >> >> >>   ...rest as in the last mail...
> >> >> >>
> >> >> >> It gave me an error saying that
> >> >> >>
> >> >> >> org.apache.solr.analysis.WordDelimiterFilter is not public in
> >> >> >> org.apache.solr.analysis; cannot be accessed from outside packag=
e
> >> >> >> import org.apache.solr.analysis.WordDelimiterFilter;
> >> >> >>                               ^
> >> >> >> solrSearch/IndicAnalyzer.java:38: cannot find symbol
> >> >> >> symbol  : class WordDelimiterFilter
> >> >> >> location: class solrSearch.IndicAnalyzer
> >> >> >>    ts =3D new WordDelimiterFilter(ts);
> >> >> >>             ^
> >> >> >> 2 errors
> >> >> >>
> >> >> >> Then i tried to see the code for worddelimitefiter from
> solrnightly
> >> src
> >> >> and
> >> >> >> found that there are many deprecated constructors though they
> require
> >> a
> >> >> lot
> >> >> >> of parameters alongwith tokenstream. I went through the solr wik=
i
> for
> >> >> >> worddelimiterfilterfactory here,
> >> >> >>
> >> >>
> >>
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b8387=
0ca7890cd73b193cefed83c283339089
> >> >> >> and say that there also its specified that we've to mention the
> >> >> parameters
> >> >> >> and both are different for indexing and querying.
> >> >> >> I'm kind of stuck here, how do I make use of worddelimiterfilter
> in
> >> my
> >> >> >> custom analyzer, I've to use it anyway.
> >> >> >> In my code I've to make use of worddelimiterfilter and not
> >> >> >> worddelimiterfilterfactory, right? I don't know whats the use of
> the
> >> >> other
> >> >> >> one. Anyway can you guide me getting rid of the above error. And
> yes
> >> >> I'll
> >> >> >> change the order of applying the filters as you said.
> >> >> >>
> >> >> >> Thanks,
> >> >> >> KK.
> >> >> >>
> >> >> >>
> >> >> >>
> >> >> >>
> >> >> >>
> >> >> >>
> >> >> >>
> >> >> >> On Fri, Jun 5, 2009 at 5:48 PM, Robert Muir <rcmuir@gmail.com>
> >> wrote:
> >> >> >>
> >> >> >> > KK, you got the right idea.
> >> >> >> >
> >> >> >> > though I think you might want to change the order, move the
> >> stopfilter
> >> >> >> > before the porter stem filter... otherwise it might not work
> >> >> correctly.
> >> >> >> >
> >> >> >> > On Fri, Jun 5, 2009 at 8:05 AM, KK <dioxide.software@gmail.com=
>
> >> >> wrote:
> >> >> >> >
> >> >> >> > > Thanks Robert. This is exactly what I did and  its working b=
ut
> >> >> delimiter
> >> >> >> > is
> >> >> >> > > missing I'm going to add that from solr-nightly.jar
> >> >> >> > >
> >> >> >> > > /**
> >> >> >> > >  * Analyzer for Indian language.
> >> >> >> > >  */
> >> >> >> > > public class IndicAnalyzer extends Analyzer {
> >> >> >> > >  public TokenStream tokenStream(String fieldName, Reader
> reader)
> >> {
> >> >> >> > >     TokenStream ts =3D new WhitespaceTokenizer(reader);
> >> >> >> > >    ts =3D new PorterStemFilter(ts);
> >> >> >> > >    ts =3D new LowerCaseFilter(ts);
> >> >> >> > >    ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS=
);
> >> >> >> > >    return ts;
> >> >> >> > >  }
> >> >> >> > > }
> >> >> >> > >
> >> >> >> > > Its able to do stemming/case-folding and supports search for
> both
> >> >> english
> >> >> >> > > and indic texts. let me try out the delimiter. Will update y=
ou
> on
> >> >> that.
> >> >> >> > >
> >> >> >> > > Thanks a lot.
> >> >> >> > > KK
> >> >> >> > >
> >> >> >> > > On Fri, Jun 5, 2009 at 5:30 PM, Robert Muir <rcmuir@gmail.co=
m
> >
> >> >> wrote:
> >> >> >> > >
> >> >> >> > > > i think you are on the right track... once you build your
> >> >> analyzer, put
> >> >> >> > > it
> >> >> >> > > > in your classpath and play around with it in luke and see =
if
> it
> >> >> does
> >> >> >> > what
> >> >> >> > > > you want.
> >> >> >> > > >
> >> >> >> > > > On Fri, Jun 5, 2009 at 3:19 AM, KK <
> dioxide.software@gmail.com
> >> >
> >> >> wrote:
> >> >> >> > > >
> >> >> >> > > > > Hi Robert,
> >> >> >> > > > > This is what I copied from ThaiAnalyzer @ lucene contrib
> >> >> >> > > > >
> >> >> >> > > > > public class ThaiAnalyzer extends Analyzer {
> >> >> >> > > > >  public TokenStream tokenStream(String fieldName, Reader
> >> reader)
> >> >> {
> >> >> >> > > > >      TokenStream ts =3D new StandardTokenizer(reader);
> >> >> >> > > > >    ts =3D new StandardFilter(ts);
> >> >> >> > > > >    ts =3D new ThaiWordFilter(ts);
> >> >> >> > > > >    ts =3D new StopFilter(ts,
> StopAnalyzer.ENGLISH_STOP_WORDS);
> >> >> >> > > > >    return ts;
> >> >> >> > > > >  }
> >> >> >> > > > > }
> >> >> >> > > > >
> >> >> >> > > > > Now as you said, I've to use whitespacetokenizer
> >> >> >> > > > > withworddelimitefilter[solr
> >> >> >> > > > > nightly.jar] stop wordremoval, porter stemmer etc , so i=
t
> is
> >> >> >> > something
> >> >> >> > > > like
> >> >> >> > > > > this,
> >> >> >> > > > > public class IndicAnalyzer extends Analyzer {
> >> >> >> > > > >  public TokenStream tokenStream(String fieldName, Reader
> >> reader)
> >> >> {
> >> >> >> > > > >   TokenStream ts =3D new WhiteSpaceTokenizer(reader);
> >> >> >> > > > >   ts =3D new WordDelimiterFilter(ts);
> >> >> >> > > > >   ts =3D new LowerCaseFilter(ts);
> >> >> >> > > > >   ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WO=
RDS)
> >> //
> >> >> >> > english
> >> >> >> > > > > stop filter, is this the default one?
> >> >> >> > > > >   ts =3D new PorterFilter(ts);
> >> >> >> > > > >   return ts;
> >> >> >> > > > >  }
> >> >> >> > > > > }
> >> >> >> > > > >
> >> >> >> > > > > Does this sound OK? I think it will do the job...let me
> try
> >> it
> >> >> out..
> >> >> >> > > > > I dont need custom filter as per my requirement, at leas=
t
> not
> >> >> for
> >> >> >> > these
> >> >> >> > > > > basic things I'm doing? I think so...
> >> >> >> > > > >
> >> >> >> > > > > Thanks,
> >> >> >> > > > > KK.
> >> >> >> > > > >
> >> >> >> > > > >
> >> >> >> > > > > On Thu, Jun 4, 2009 at 6:36 PM, Robert Muir <
> >> rcmuir@gmail.com>
> >> >> >> > wrote:
> >> >> >> > > > >
> >> >> >> > > > > > KK well you can always get some good examples from the
> >> lucene
> >> >> >> > contrib
> >> >> >> > > > > > codebase.
> >> >> >> > > > > > For example, look at the DutchAnalyzer, especially:
> >> >> >> > > > > >
> >> >> >> > > > > > TokenStream tokenStream(String fieldName, Reader reade=
r)
> >> >> >> > > > > >
> >> >> >> > > > > > See how it combines a specified tokenizer with various
> >> >> filters?
> >> >> >> > this
> >> >> >> > > is
> >> >> >> > > > > > what
> >> >> >> > > > > > you want to do, except of course you want to use
> different
> >> >> >> > tokenizer
> >> >> >> > > > and
> >> >> >> > > > > > filters.
> >> >> >> > > > > >
> >> >> >> > > > > > On Thu, Jun 4, 2009 at 8:53 AM, KK <
> >> >> dioxide.software@gmail.com>
> >> >> >> > > wrote:
> >> >> >> > > > > >
> >> >> >> > > > > > > Thanks Muir.
> >> >> >> > > > > > > Thanks for letting me know that I dont need language
> >> >> identifiers.
> >> >> >> > > > > > >  I'll have a look and will try to write the analyzer=
.
> For
> >> my
> >> >> case
> >> >> >> > I
> >> >> >> > > > > think
> >> >> >> > > > > > > it
> >> >> >> > > > > > > wont be that difficult.
> >> >> >> > > > > > > BTW, can you point me to some sample codes/tutorials
> >> writing
> >> >> >> > custom
> >> >> >> > > > > > > analyzers. I could not find something in LIA2ndEdn. =
Is
> >> >> something
> >> >> >> > > > htere?
> >> >> >> > > > > > do
> >> >> >> > > > > > > let me know.
> >> >> >> > > > > > >
> >> >> >> > > > > > > Thanks,
> >> >> >> > > > > > > KK.
> >> >> >> > > > > > >
> >> >> >> > > > > > >
> >> >> >> > > > > > >
> >> >> >> > > > > > > On Thu, Jun 4, 2009 at 6:19 PM, Robert Muir <
> >> >> rcmuir@gmail.com>
> >> >> >> > > > wrote:
> >> >> >> > > > > > >
> >> >> >> > > > > > > > KK, for your case, you don't really need to go to
> the
> >> >> effort of
> >> >> >> > > > > > detecting
> >> >> >> > > > > > > > whether fragments are english or not.
> >> >> >> > > > > > > > Because the English stemmers in lucene will not
> modify
> >> >> your
> >> >> >> > Indic
> >> >> >> > > > > text,
> >> >> >> > > > > > > and
> >> >> >> > > > > > > > neither will the LowerCaseFilter.
> >> >> >> > > > > > > >
> >> >> >> > > > > > > > what you want to do is create a custom analyzer th=
at
> >> works
> >> >> like
> >> >> >> > > > this
> >> >> >> > > > > > > >
> >> >> >> > > > > > > > -WhitespaceTokenizer with WordDelimiterFilter [fro=
m
> >> Solr
> >> >> >> > nightly
> >> >> >> > > > > jar],
> >> >> >> > > > > > > > LowerCaseFilter, StopFilter, and PorterStemFilter-
> >> >> >> > > > > > > >
> >> >> >> > > > > > > > Thanks,
> >> >> >> > > > > > > > Robert
> >> >> >> > > > > > > >
> >> >> >> > > > > > > > On Thu, Jun 4, 2009 at 8:28 AM, KK <
> >> >> dioxide.software@gmail.com
> >> >> >> > >
> >> >> >> > > > > wrote:
> >> >> >> > > > > > > >
> >> >> >> > > > > > > > > Thank you all.
> >> >> >> > > > > > > > > To be frank I was using Solr in the begining hal=
f
> a
> >> >> month
> >> >> >> > ago.
> >> >> >> > > > The
> >> >> >> > > > > > > > > problem[rather bug] with solr was creation of ne=
w
> >> index
> >> >> on
> >> >> >> > the
> >> >> >> > > > fly.
> >> >> >> > > > > > > > Though
> >> >> >> > > > > > > > > they have a restful method for teh same, but it
> was
> >> not
> >> >> >> > > working.
> >> >> >> > > > If
> >> >> >> > > > > I
> >> >> >> > > > > > > > > remember properly one of Solr commiter "Noble
> Paul"[I
> >> >> dont
> >> >> >> > know
> >> >> >> > > > his
> >> >> >> > > > > > > real
> >> >> >> > > > > > > > > name] was trying to help me. I tried many nightl=
y
> >> builds
> >> >> and
> >> >> >> > > > > spending
> >> >> >> > > > > > a
> >> >> >> > > > > > > > > couple of days stuck at that made me think of
> lucene
> >> and
> >> >> I
> >> >> >> > > > switched
> >> >> >> > > > > > to
> >> >> >> > > > > > > > it.
> >> >> >> > > > > > > > > Now after working with lucene which gives you fu=
ll
> >> >> control of
> >> >> >> > > > > > > everything
> >> >> >> > > > > > > > I
> >> >> >> > > > > > > > > don't want to switch to Solr.[LOL, to me
> Solr:Lucene
> >> is
> >> >> >> > similar
> >> >> >> > > > to
> >> >> >> > > > > > > > > Window$:Linux, its my view only, though]. Coming
> back
> >> to
> >> >> the
> >> >> >> > > > point
> >> >> >> > > > > as
> >> >> >> > > > > > > Uwe
> >> >> >> > > > > > > > > mentioned that we can do the same thing in lucen=
e
> as
> >> >> well,
> >> >> >> > what
> >> >> >> > > > is
> >> >> >> > > > > > > > > available
> >> >> >> > > > > > > > > in Solr, Solr is based on Lucene only, right?
> >> >> >> > > > > > > > > I request Uwe to give me some more ideas on usin=
g
> the
> >> >> >> > analyzers
> >> >> >> > > > > from
> >> >> >> > > > > > > solr
> >> >> >> > > > > > > > > that will do the job for me, handling a mix of
> both
> >> >> english
> >> >> >> > and
> >> >> >> > > > > > > > non-english
> >> >> >> > > > > > > > > content.
> >> >> >> > > > > > > > > Muir, can you give me a bit detail description o=
f
> how
> >> to
> >> >> use
> >> >> >> > > the
> >> >> >> > > > > > > > > WordDelimiteFilter to do my job.
> >> >> >> > > > > > > > > On a side note, I was thingking of writing a
> simple
> >> >> analyzer
> >> >> >> > > that
> >> >> >> > > > > > will
> >> >> >> > > > > > > do
> >> >> >> > > > > > > > > the following,
> >> >> >> > > > > > > > > #. If the webpage fragment is non-english[for me
> its
> >> >> some
> >> >> >> > > indian
> >> >> >> > > > > > > > language]
> >> >> >> > > > > > > > > then index them as such, no stemming/ stop word
> >> removal
> >> >> to
> >> >> >> > > begin
> >> >> >> > > > > > with.
> >> >> >> > > > > > > As
> >> >> >> > > > > > > > I
> >> >> >> > > > > > > > > know its in UCN unicode something like
> >> >> >> > > > > \u0021\u0012\u34ae\u0031[just
> >> >> >> > > > > > a
> >> >> >> > > > > > > > > sample]
> >> >> >> > > > > > > > > # If the fragment is english then apply standard
> >> >> anlyzing
> >> >> >> > > process
> >> >> >> > > > > for
> >> >> >> > > > > > > > > english content. I've not thought of quering in
> the
> >> same
> >> >> way
> >> >> >> > as
> >> >> >> > > > of
> >> >> >> > > > > > now
> >> >> >> > > > > > > > i.e
> >> >> >> > > > > > > > > mix of non-english and engish words.
> >> >> >> > > > > > > > > Now to get all this,
> >> >> >> > > > > > > > >  #1. I need some sort of way which will let me
> know
> >> if
> >> >> the
> >> >> >> > > > content
> >> >> >> > > > > is
> >> >> >> > > > > > > > > english or not. If not english just add the toke=
ns
> to
> >> >> the
> >> >> >> > > > document.
> >> >> >> > > > > > Do
> >> >> >> > > > > > > we
> >> >> >> > > > > > > > > really need language identifiers, as i dont have
> any
> >> >> other
> >> >> >> > > > content
> >> >> >> > > > > > that
> >> >> >> > > > > > > > > uses
> >> >> >> > > > > > > > > the same script as english other than those \u12=
34
> >> >> things for
> >> >> >> > > my
> >> >> >> > > > > > indian
> >> >> >> > > > > > > > > language content. Any smart hack/trick for the
> same?
> >> >> >> > > > > > > > >  #2. If the its english apply all normal process
> and
> >> add
> >> >> the
> >> >> >> > > > > stemmed
> >> >> >> > > > > > > > token
> >> >> >> > > > > > > > > to document.
> >> >> >> > > > > > > > > For all this I was thinking of iterating earch
> word
> >> of
> >> >> the
> >> >> >> > web
> >> >> >> > > > page
> >> >> >> > > > > > and
> >> >> >> > > > > > > > > apply the above procedure. And finallyadd  the
> newly
> >> >> created
> >> >> >> > > > > document
> >> >> >> > > > > > > to
> >> >> >> > > > > > > > > the
> >> >> >> > > > > > > > > index.
> >> >> >> > > > > > > > >
> >> >> >> > > > > > > > > I would like some one to guide me in this
> direction.
> >> I'm
> >> >> >> > pretty
> >> >> >> > > > > > people
> >> >> >> > > > > > > > must
> >> >> >> > > > > > > > > have done similar/same thing earlier, I request
> them
> >> to
> >> >> guide
> >> >> >> > > me/
> >> >> >> > > > > > point
> >> >> >> > > > > > > > me
> >> >> >> > > > > > > > > to some tutorials for the same.
> >> >> >> > > > > > > > > Else help me out writing a custom analyzer only =
if
> >> thats
> >> >> not
> >> >> >> > > > going
> >> >> >> > > > > to
> >> >> >> > > > > > > be
> >> >> >> > > > > > > > > too
> >> >> >> > > > > > > > > complex. LOL, I'm a new user to lucene and know
> >> basics
> >> >> of
> >> >> >> > Java
> >> >> >> > > > > > coding.
> >> >> >> > > > > > > > > Thank you very much.
> >> >> >> > > > > > > > >
> >> >> >> > > > > > > > > --KK.
> >> >> >> > > > > > > > >
> >> >> >> > > > > > > > >
> >> >> >> > > > > > > > >
> >> >> >> > > > > > > > > On Thu, Jun 4, 2009 at 5:30 PM, Robert Muir <
> >> >> >> > rcmuir@gmail.com>
> >> >> >> > > > > > wrote:
> >> >> >> > > > > > > > >
> >> >> >> > > > > > > > > > yes this is true. for starters KK, might be go=
od
> to
> >> >> startup
> >> >> >> > > > solr
> >> >> >> > > > > > and
> >> >> >> > > > > > > > look
> >> >> >> > > > > > > > > > at
> >> >> >> > > > > > > > > >
> >> >> http://localhost:8983/solr/admin/analysis.jsp?highlight=3Don
> >> >> >> > > > > > > > > >
> >> >> >> > > > > > > > > > if you want to stick with lucene, the
> >> >> WordDelimiterFilter
> >> >> >> > is
> >> >> >> > > > the
> >> >> >> > > > > > > piece
> >> >> >> > > > > > > > > you
> >> >> >> > > > > > > > > > will want for your text, mainly for punctuatio=
n
> but
> >> >> also
> >> >> >> > for
> >> >> >> > > > > format
> >> >> >> > > > > > > > > > characters such as ZWJ/ZWNJ.
> >> >> >> > > > > > > > > >
> >> >> >> > > > > > > > > > On Thu, Jun 4, 2009 at 7:51 AM, Uwe Schindler =
<
> >> >> >> > > uwe@thetaphi.de
> >> >> >> > > > >
> >> >> >> > > > > > > wrote:
> >> >> >> > > > > > > > > >
> >> >> >> > > > > > > > > > > You can also re-use the solr analyzers, as f=
ar
> as
> >> I
> >> >> found
> >> >> >> > > > out.
> >> >> >> > > > > > > There
> >> >> >> > > > > > > > is
> >> >> >> > > > > > > > > > an
> >> >> >> > > > > > > > > > > issue in jIRA/discussion on java-dev to merg=
e
> >> them.
> >> >> >> > > > > > > > > > >
> >> >> >> > > > > > > > > > > -----
> >> >> >> > > > > > > > > > > Uwe Schindler
> >> >> >> > > > > > > > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> >> >> >> > > > > > > > > > > http://www.thetaphi.de
> >> >> >> > > > > > > > > > > eMail: uwe@thetaphi.de
> >> >> >> > > > > > > > > > >
> >> >> >> > > > > > > > > > >
> >> >> >> > > > > > > > > > > > -----Original Message-----
> >> >> >> > > > > > > > > > > > From: Robert Muir [mailto:rcmuir@gmail.com=
]
> >> >> >> > > > > > > > > > > > Sent: Thursday, June 04, 2009 1:18 PM
> >> >> >> > > > > > > > > > > > To: java-user@lucene.apache.org
> >> >> >> > > > > > > > > > > > Subject: Re: How to support stemming and
> case
> >> >> folding
> >> >> >> > for
> >> >> >> > > > > > english
> >> >> >> > > > > > > > > > content
> >> >> >> > > > > > > > > > > > mixed with non-english content?
> >> >> >> > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > KK, ok, so you only really want to stem th=
e
> >> >> english.
> >> >> >> > This
> >> >> >> > > > is
> >> >> >> > > > > > > good.
> >> >> >> > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > Is it possible for you to consider using
> solr?
> >> >> solr's
> >> >> >> > > > default
> >> >> >> > > > > > > > > analyzer
> >> >> >> > > > > > > > > > > for
> >> >> >> > > > > > > > > > > > type 'text' will be good for your case. it
> will
> >> do
> >> >> the
> >> >> >> > > > > > following
> >> >> >> > > > > > > > > > > > 1. tokenize on whitespace
> >> >> >> > > > > > > > > > > > 2. handle both indian language and english
> >> >> punctuation
> >> >> >> > > > > > > > > > > > 3. lowercase the english.
> >> >> >> > > > > > > > > > > > 4. stem the english.
> >> >> >> > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > try a nightly build,
> >> >> >> > > > > > > > > > >
> >> >> http://people.apache.org/builds/lucene/solr/nightly/
> >> >> >> > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > On Thu, Jun 4, 2009 at 1:12 AM, KK <
> >> >> >> > > > > dioxide.software@gmail.com
> >> >> >> > > > > > >
> >> >> >> > > > > > > > > wrote:
> >> >> >> > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > Muir, thanks for your response.
> >> >> >> > > > > > > > > > > > > I'm indexing indian language web pages
> which
> >> has
> >> >> got
> >> >> >> > > > > descent
> >> >> >> > > > > > > > amount
> >> >> >> > > > > > > > > > of
> >> >> >> > > > > > > > > > > > > english content mixed with therein. For
> the
> >> time
> >> >> >> > being
> >> >> >> > > > I'm
> >> >> >> > > > > > not
> >> >> >> > > > > > > > > going
> >> >> >> > > > > > > > > > to
> >> >> >> > > > > > > > > > > > use
> >> >> >> > > > > > > > > > > > > any stemmers as we don't have standard
> >> stemmers
> >> >> for
> >> >> >> > > > indian
> >> >> >> > > > > > > > > languages
> >> >> >> > > > > > > > > > .
> >> >> >> > > > > > > > > > > > So
> >> >> >> > > > > > > > > > > > > what I want to do is like this,
> >> >> >> > > > > > > > > > > > > Say I've a web page having hindi content
> with
> >> 5%
> >> >> >> > > english
> >> >> >> > > > > > > content.
> >> >> >> > > > > > > > > > Then
> >> >> >> > > > > > > > > > > > for
> >> >> >> > > > > > > > > > > > > hindi I want to use the basic white spac=
e
> >> >> analyzer as
> >> >> >> > > we
> >> >> >> > > > > dont
> >> >> >> > > > > > > > have
> >> >> >> > > > > > > > > > > > stemmers
> >> >> >> > > > > > > > > > > > > for this as I mentioned earlier and
> whereever
> >> >> english
> >> >> >> > > > > appears
> >> >> >> > > > > > I
> >> >> >> > > > > > > > > want
> >> >> >> > > > > > > > > > > > them
> >> >> >> > > > > > > > > > > > > to
> >> >> >> > > > > > > > > > > > > be stemmed tokenized etc[the standard
> process
> >> >> used
> >> >> >> > for
> >> >> >> > > > > > english
> >> >> >> > > > > > > > > > > content].
> >> >> >> > > > > > > > > > > > As
> >> >> >> > > > > > > > > > > > > of now I'm using whitespace analyzer for
> the
> >> >> full
> >> >> >> > > content
> >> >> >> > > > > > which
> >> >> >> > > > > > > > > > doesnot
> >> >> >> > > > > > > > > > > > > support case folding, stemming etc for t=
eh
> >> >> content.
> >> >> >> > So
> >> >> >> > > if
> >> >> >> > > > > > there
> >> >> >> > > > > > > > is
> >> >> >> > > > > > > > > an
> >> >> >> > > > > > > > > > > > > english word say "Detection" indexed as
> such
> >> >> then
> >> >> >> > > > searching
> >> >> >> > > > > > for
> >> >> >> > > > > > > > > > > > detection
> >> >> >> > > > > > > > > > > > > or
> >> >> >> > > > > > > > > > > > > detect is not giving any results, which =
is
> >> the
> >> >> >> > expected
> >> >> >> > > > > > > behavior,
> >> >> >> > > > > > > > > but
> >> >> >> > > > > > > > > > I
> >> >> >> > > > > > > > > > > > > want
> >> >> >> > > > > > > > > > > > > this kind of queries to give results.
> >> >> >> > > > > > > > > > > > > I hope I made it clear. Let me know any
> ideas
> >> on
> >> >> >> > doing
> >> >> >> > > > the
> >> >> >> > > > > > > same.
> >> >> >> > > > > > > > > And
> >> >> >> > > > > > > > > > > one
> >> >> >> > > > > > > > > > > > > more thing, I'm storing the full webpage
> >> content
> >> >> >> > under
> >> >> >> > > a
> >> >> >> > > > > > single
> >> >> >> > > > > > > > > > field,
> >> >> >> > > > > > > > > > > I
> >> >> >> > > > > > > > > > > > > hope this will not make any difference,
> >> right?
> >> >> >> > > > > > > > > > > > > It seems I've to use language identifier=
s,
> >> but
> >> >> do we
> >> >> >> > > > really
> >> >> >> > > > > > > need
> >> >> >> > > > > > > > > > that?
> >> >> >> > > > > > > > > > > > > Because we've only non-english content
> mixed
> >> >> with
> >> >> >> > > > > english[and
> >> >> >> > > > > > > not
> >> >> >> > > > > > > > > > > french
> >> >> >> > > > > > > > > > > > or
> >> >> >> > > > > > > > > > > > > russian etc].
> >> >> >> > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > What is the best way of approaching the
> >> problem?
> >> >> Any
> >> >> >> > > > > > thoughts!
> >> >> >> > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > Thanks,
> >> >> >> > > > > > > > > > > > > KK.
> >> >> >> > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > On Wed, Jun 3, 2009 at 9:42 PM, Robert
> Muir <
> >> >> >> > > > > > rcmuir@gmail.com>
> >> >> >> > > > > > > > > > wrote:
> >> >> >> > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > > KK, is all of your latin script text
> >> actually
> >> >> >> > > english?
> >> >> >> > > > Is
> >> >> >> > > > > > > there
> >> >> >> > > > > > > > > > stuff
> >> >> >> > > > > > > > > > > > > like
> >> >> >> > > > > > > > > > > > > > german or french mixed in?
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > > And for your non-english content (your
> >> >> examples
> >> >> >> > have
> >> >> >> > > > been
> >> >> >> > > > > > > > indian
> >> >> >> > > > > > > > > > > > writing
> >> >> >> > > > > > > > > > > > > > systems), is it generally true that if
> you
> >> had
> >> >> >> > > > > devanagari,
> >> >> >> > > > > > > you
> >> >> >> > > > > > > > > can
> >> >> >> > > > > > > > > > > > assume
> >> >> >> > > > > > > > > > > > > > its hindi? or is there stuff like
> marathi
> >> >> mixed in?
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > > Reason I say this is to invoke the rig=
ht
> >> >> stemmers,
> >> >> >> > > you
> >> >> >> > > > > > really
> >> >> >> > > > > > > > > need
> >> >> >> > > > > > > > > > > > some
> >> >> >> > > > > > > > > > > > > > language detection, but perhaps in you=
r
> >> case
> >> >> you
> >> >> >> > can
> >> >> >> > > > > cheat
> >> >> >> > > > > > > and
> >> >> >> > > > > > > > > > detect
> >> >> >> > > > > > > > > > > > > this
> >> >> >> > > > > > > > > > > > > > based on scripts...
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > > Thanks,
> >> >> >> > > > > > > > > > > > > > Robert
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > > On Wed, Jun 3, 2009 at 10:15 AM, KK <
> >> >> >> > > > > > > > dioxide.software@gmail.com>
> >> >> >> > > > > > > > > > > > wrote:
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > > > Hi All,
> >> >> >> > > > > > > > > > > > > > > I'm indexing some non-english conten=
t.
> >> But
> >> >> the
> >> >> >> > page
> >> >> >> > > > > also
> >> >> >> > > > > > > > > contains
> >> >> >> > > > > > > > > > > > > english
> >> >> >> > > > > > > > > > > > > > > content. As of now I'm using
> >> >> WhitespaceAnalyzer
> >> >> >> > for
> >> >> >> > > > all
> >> >> >> > > > > > > > content
> >> >> >> > > > > > > > > > and
> >> >> >> > > > > > > > > > > > I'm
> >> >> >> > > > > > > > > > > > > > > storing the full webpage content und=
er
> a
> >> >> single
> >> >> >> > > > filed.
> >> >> >> > > > > > Now
> >> >> >> > > > > > > we
> >> >> >> > > > > > > > > > > > require
> >> >> >> > > > > > > > > > > > > to
> >> >> >> > > > > > > > > > > > > > > support case folding and stemmming f=
or
> >> the
> >> >> >> > english
> >> >> >> > > > > > content
> >> >> >> > > > > > > > > > > > intermingled
> >> >> >> > > > > > > > > > > > > > > with
> >> >> >> > > > > > > > > > > > > > > non-english content. I must metion
> that
> >> we
> >> >> dont
> >> >> >> > > have
> >> >> >> > > > > > > stemming
> >> >> >> > > > > > > > > and
> >> >> >> > > > > > > > > > > > case
> >> >> >> > > > > > > > > > > > > > > folding for these non-english conten=
t.
> >> I'm
> >> >> stuck
> >> >> >> > > with
> >> >> >> > > > > > this.
> >> >> >> > > > > > > > > Some
> >> >> >> > > > > > > > > > > one
> >> >> >> > > > > > > > > > > > do
> >> >> >> > > > > > > > > > > > > > let
> >> >> >> > > > > > > > > > > > > > > me know how to proceed for fixing th=
is
> >> >> issue.
> >> >> >> > > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > > > Thanks,
> >> >> >> > > > > > > > > > > > > > > KK.
> >> >> >> > > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > > > --
> >> >> >> > > > > > > > > > > > > > Robert Muir
> >> >> >> > > > > > > > > > > > > > rcmuir@gmail.com
> >> >> >> > > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > >
> >> >> >> > > > > > > > > > > >
> >> >> >> > > > > > > > > > > >
> >> >> >> > > > > > > > > > > >
> >> >> >> > > > > > > > > > > > --
> >> >> >> > > > > > > > > > > > Robert Muir
> >> >> >> > > > > > > > > > > > rcmuir@gmail.com
> >> >> >> > > > > > > > > > >
> >> >> >> > > > > > > > > > >
> >> >> >> > > > > > > > > > >
> >> >> >> > > > > > >
> >> >> >> > >
> >> >> -------------------------------------------------------------------=
--
> >> >> >> > > > > > > > > > > To unsubscribe, e-mail:
> >> >> >> > > > > java-user-unsubscribe@lucene.apache.org
> >> >> >> > > > > > > > > > > For additional commands, e-mail:
> >> >> >> > > > > > java-user-help@lucene.apache.org
> >> >> >> > > > > > > > > > >
> >> >> >> > > > > > > > > > >
> >> >> >> > > > > > > > > >
> >> >> >> > > > > > > > > >
> >> >> >> > > > > > > > > > --
> >> >> >> > > > > > > > > > Robert Muir
> >> >> >> > > > > > > > > > rcmuir@gmail.com
> >> >> >> > > > > > > > > >
> >> >> >> > > > > > > > >
> >> >> >> > > > > > > >
> >> >> >> > > > > > > >
> >> >> >> > > > > > > >
> >> >> >> > > > > > > > --
> >> >> >> > > > > > > > Robert Muir
> >> >> >> > > > > > > > rcmuir@gmail.com
> >> >> >> > > > > > > >
> >> >> >> > > > > > >
> >> >> >> > > > > >
> >> >> >> > > > > >
> >> >> >> > > > > >
> >> >> >> > > > > > --
> >> >> >> > > > > > Robert Muir
> >> >> >> > > > > > rcmuir@gmail.com
> >> >> >> > > > > >
> >> >> >> > > > >
> >> >> >> > > >
> >> >> >> > > >
> >> >> >> > > >
> >> >> >> > > > --
> >> >> >> > > > Robert Muir
> >> >> >> > > > rcmuir@gmail.com
> >> >> >> > > >
> >> >> >> > >
> >> >> >> >
> >> >> >> >
> >> >> >> >
> >> >> >> > --
> >> >> >> > Robert Muir
> >> >> >> > rcmuir@gmail.com
> >> >> >> >
> >> >> >
> >> >> >
> >> >> >
> >> >> > --
> >> >> > Robert Muir
> >> >> > rcmuir@gmail.com
> >> >> >
> >> >>
> >> >>
> >> >>
> >> >> --
> >> >> Robert Muir
> >> >> rcmuir@gmail.com
> >> >>
> >> >> -------------------------------------------------------------------=
--
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >>
> >>
> >> --
> >> Robert Muir
> >> rcmuir@gmail.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd14ed86ce8c3046be8f272--

From java-user-return-40680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 12:51:21 2009
Return-Path: <java-user-return-40680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87524 invoked from network); 9 Jun 2009 12:51:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 12:51:18 -0000
Received: (qmail 98972 invoked by uid 500); 9 Jun 2009 12:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98643 invoked by uid 500); 9 Jun 2009 12:51:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97734 invoked by uid 99); 9 Jun 2009 12:47:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 12:47:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 12:47:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ME0jZ-0004Ea-Q3
	for java-user@lucene.apache.org; Tue, 09 Jun 2009 05:47:21 -0700
Message-ID: <23942165.post@talk.nabble.com>
Date: Tue, 9 Jun 2009 05:47:21 -0700 (PDT)
From: ChristophD <christoph.dietze@kqv.de>
To: java-user@lucene.apache.org
Subject: Re: Using Luke on a Lucene Index in a Database
In-Reply-To: <23630467.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: christoph.dietze@kqv.de
References: <23611846.post@talk.nabble.com> <6f4104d80905190146m1bd39d76k9cbc5fad0ea2a4fc@mail.gmail.com> <23613338.post@talk.nabble.com> <359a92830905190716l5c073d31j8f13777985bbcf4a@mail.gmail.com> <23630467.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Upon a request on the experiences on this issue, I am posting the most
important functions of the program. Every DB record maps directly to one
file. The function that I did not include is "getDataSource()" which
acquires a jdbc datasource to your database.

cheers,
Christoph

	private void run() throws Exception {
		DataSource ds = getDataSource();
		File toDir = new File("outputDir");
		toDir.mkdirs();
		assert toDir.exists();
		assert toDir.isDirectory();

		copyToFilesystem(ds, toDir);
	}

	public void copyToFilesystem(DataSource ds, File toDir)
			throws SQLException, IOException {
		Connection conn = ds.getConnection();
		Statement stmt = conn.createStatement();
		ResultSet rs = stmt
				.executeQuery("select NAME_, VALUE_ from XXXX.XXXX");
		while (rs.next()) {
			String name = rs.getString("NAME_");
			log.info("filename: '" + name + "'");
			InputStream inStream = rs.getBinaryStream("VALUE_");
			File file = new File(toDir, name);
			assert !file.exists();
			boolean ok = file.createNewFile();
			assert ok;
			FileOutputStream outStream = new FileOutputStream(file);

			copyLarge(inStream, outStream);
			inStream.close();
			outStream.close();
		}
		conn.rollback();
	}

	/**
	 * Taken from commons IO
	 * 
	 * @see http://svn.apache.org/viewvc/commons/proper/io/trunk/src/java/org/
	 *      apache/commons/io/IOUtils.java?revision=736890
	 */
	public static long copyLarge(InputStream input, OutputStream output)
			throws IOException {
		byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
		long count = 0;
		int n = 0;
		while (-1 != (n = input.read(buffer))) {
			output.write(buffer, 0, n);
			count += n;
		}
		return count;
	}




ChristophD wrote:
> 
> Ok, so let me clear it up.
> 
> Lucene offers different types of Directories
> (org.apache.lucene.store.Directory) into which it stores the index data.
> Most people probably use the FSDirectory implementation which writes the
> index data as files into the filesystem. However, we use the DbDirectory
> implementation which writes into a specified relational database.
> 
> Now, I was really surprised to see that Luke only offers to open an index
> that was written to the filesystem. I had expected to be able to supply a
> jdbc url.
> 
> The way Lucene writes the index into the DB is really a direct projection
> of the FS version. For every file it creates a record in the DB which has
> a name and a BLOB that contains the file's data.
> 
> So what I did was, I wrote a small program that reads the index from the
> DB and writes it back as files. These files I could open with Luke without
> problems.
> 
> so long,
> Christoph
> 
> 
> Erick Erickson wrote:
>> 
>> Well, you haven't really provided much in the way of details.For
>> instance,
>> what does it mean that your Lucene index is
>> stored in a database"? Did you store it as a BLOB? Your
>> problem statement is very hard to understand, please explain
>> in more detail. Pretend you don't know a thing about your
>> app (as in, you're just a random reader of this list) and imagine
>> you were trying to understand well enough to offer useful
>> responses...
>> 
>> Best
>> Erick
>> 
>> On Tue, May 19, 2009 at 6:12 AM, ChristophD <christoph.dietze@kqv.de>
>> wrote:
>> 
>>>
>>> This isn't really addressing my problem. I already have a running search
>>> system and just want to analyze it.
>>>
>>> cheers,
>>> Christoph
>>>
>>>
>>>
>>> amin1977 wrote:
>>> >
>>> > Are you using an object relational mapping tool like Hibernate?  if
>>> you
>>> > are
>>> > you could use hibernate search to index your persistent entities and
>>> then
>>> > use luke to inspect the indexes.   There may other ways of doing it I
>>> > guess.  Just a thought.
>>> >
>>> >
>>> > Cheers
>>> > Amin
>>> >
>>> > On Tue, May 19, 2009 at 9:23 AM, ChristophD <christoph.dietze@kqv.de>
>>> > wrote:
>>> >
>>> >>
>>> >> Hello,
>>> >>
>>> >> I would like to use Luke to connect to an existing Lucene Index which
>>> is
>>> >> stored in a Database.
>>> >> However, Luke seems only to be able to read file based indexes.
>>> >>
>>> >> What are my options to analyze the DB index?
>>> >>
>>> >> thx,
>>> >> Christoph
>>> >> --
>>> >> View this message in context:
>>> >>
>>> http://www.nabble.com/Using-Luke-on-a-Lucene-Index-in-a-Database-tp23611846p23611846.html
>>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>> >>
>>> >>
>>> >> ---------------------------------------------------------------------
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >
>>> >
>>>
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Using-Luke-on-a-Lucene-Index-in-a-Database-tp23611846p23613338.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Using-Luke-on-a-Lucene-Index-in-a-Database-tp23611846p23942165.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 13:31:45 2009
Return-Path: <java-user-return-40681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6012 invoked from network); 9 Jun 2009 13:31:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 13:31:45 -0000
Received: (qmail 58356 invoked by uid 500); 9 Jun 2009 13:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58276 invoked by uid 500); 9 Jun 2009 13:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58261 invoked by uid 99); 9 Jun 2009 13:31:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 13:31:55 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 13:31:45 +0000
Received: by bwz27 with SMTP id 27so4071583bwz.5
        for <java-user@lucene.apache.org>; Tue, 09 Jun 2009 06:31:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=UO2yhhj8p6U9BALwcD/oK+Sqa42yrl3sIDpf90ZcBtc=;
        b=gHvrJTUQPB2pQGdD7XaZKnO1KWxhe5aghyWidP/4Iq57bYLL94Jj488DqrF3JBcpwM
         n+DhZxgEle2L7EydxWkmREAeQMvLCmRtzYEzYSCAfp5NJ3u6h3OUeH7RCymqUDIopkp2
         bOb4VjxU9p9POvOGKkf443OGMTuyrGw7JhAtA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=az1zZxRAy9UJ6cOqrk0JH25lwqkjUS784fs86zZ1mykL04+4Wtt67PMr4NFwa6EE3j
         2a1b+xriUsAcNqnHsEmqREInYCdXZiVs3p7+OxUBQT9PXAbaXb9w0bzZ1CekkXzZRoRr
         A+6Cp696QDumyZyhfplpXulQzRPNNqXN2tM24=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.11.84 with SMTP id 62mr36111wew.148.1244554284662; Tue, 09 
	Jun 2009 06:31:24 -0700 (PDT)
In-Reply-To: <8db6d74a0906090448o4ee18b4epc9ded31a5a326af5@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com>
	 <8f0ad1f30906050518x1b029837t2796ddf34131e293@mail.gmail.com>
	 <8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com>
	 <8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com>
	 <8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com>
	 <8db6d74a0906060642g23eb5aefv2d9e9bc3e50bdb04@mail.gmail.com>
	 <8f0ad1f30906060915sfa8cde9u2ecf8edbe4dca1f6@mail.gmail.com>
	 <8db6d74a0906072203n77e51df8i40266e1f92608415@mail.gmail.com>
	 <8f0ad1f30906080304w2fb90b31l5763adc1c4438928@mail.gmail.com>
	 <8db6d74a0906090448o4ee18b4epc9ded31a5a326af5@mail.gmail.com>
Date: Tue, 9 Jun 2009 09:31:24 -0400
X-Google-Sender-Auth: 55c0b7c3440f9b51
Message-ID: <c68e39170906090631s41d0a247r4e14823c698c24c3@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I just cut'n'pasted your word into Solr... it worked fine (it didn't
split the word).
Make sure you're using the latest from the trunk version of Solr...
this was fixed since 1.3

http://localhost:8983/solr/select?q=3D=E0=A4=B8=E0=A4=BE=E0=A4=B2&debugQuer=
y=3Dtrue
[...]
<lst name=3D"debug">
  <str name=3D"rawquerystring">=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>
  <str name=3D"querystring">=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>
  <str name=3D"parsedquery">text:=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>
  <str name=3D"parsedquery_toString">text:=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>

-Yonik


On Tue, Jun 9, 2009 at 7:48 AM, KK <dioxide.software@gmail.com> wrote:
> Hi Robert, I tried a sample code to check whats the reason. The
> worddelimiterfilter uses isLetter() method to tokenize, and for hindi wor=
ds
> some parts of word are not actually letters but just part of the word[but
> that doesnot mean they can be used as word delimiters], since they are no=
t
> letters isLetter() returns false and the word is getting breaked around
> that. This is some sample code with a hindi word pronounced saal[meaning
> year in english],
>
> import java.lang.String;
>
> public class HindiUnicodeTest {
> =C2=A0 =C2=A0public static void main(String args[]) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0String hindiStr =3D "=E0=A4=B8=E0=A4=BE=E0=A4=
=B2";
> =C2=A0 =C2=A0 =C2=A0 =C2=A0int length =3D hindiStr.length();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println("str length " + length);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0for (int i=3D0; i<length; i++) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println(hindiStr.char=
At(i) + " is " +
> Character.isLetter(hindiStr.charAt(i)));
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>
> =C2=A0 =C2=A0}
> }
>
> Running this gives this output,
> str length 3
> =E0=A4=B8 is true
> =E0=A4=BE is false
> =E0=A4=B2 is true
>
> As you can see the second one is false, which says that it is not a lette=
r
> but this makes worddelimiterfilter break/tokenize around the word. I even
> tried to use my custom parser[which I mentioned earlier] and tried to pri=
nt
> the string that is the output after the query getting parsed, and what I
> found is that if I send the above hindi word then the query string after
> being parsed is something like this,
> Parsed Query string: =E0=A4=B8 =E0=A4=B2
> it essentialy removes the non-letter character[the second one], and it se=
ems
> it treats them as separate and whenever thse two characters appear adjace=
nt,
> they are in th top of result set, also whereever these two letters appers=
 in
> the doc, it says they are part of the result set [and hence highlights
> them].
>
> I hope I made it clear. Do let me if some more information is required.
>
> Thanks,
> KK.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 14:34:24 2009
Return-Path: <java-user-return-40682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38991 invoked from network); 9 Jun 2009 14:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 14:34:24 -0000
Received: (qmail 64214 invoked by uid 500); 9 Jun 2009 14:34:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64172 invoked by uid 500); 9 Jun 2009 14:34:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64162 invoked by uid 99); 9 Jun 2009 14:34:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 14:34:33 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 14:34:23 +0000
Received: from [192.168.0.105] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id 5BE4A20DBA
	for <java-user@lucene.apache.org>; Tue,  9 Jun 2009 07:34:02 -0700 (PDT)
Message-Id: <DF1BB6F3-8BC9-414F-A415-2F75FFFCEE86@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <OFA433B746.CDF7AA2D-ON652575D0.002D6853-652575D0.002D7C07@lntinfotech.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Using Lucene for Moderate Similarity Check..
Date: Tue, 9 Jun 2009 10:34:01 -0400
References: <OFA433B746.CDF7AA2D-ON652575D0.002D6853-652575D0.002D7C07@lntinfotech.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ravi,

Lucene can enable this, but you will have some work to do on top of  
it.  If you search the archives for record linkage (http://www.lucidimagination.com/search/?q=record+linkage 
) you will find a fair amount of discussion on this.  Also, in  
somewhat shameless marketing mode, my co-author, Tom Morton, is just  
putting the finishing touches on a chapter in our book called Taming  
Text (http://www.manning.com/ingersoll) which discusses some of the  
techniques involved in making this stuff happen.  That chapter should  
be released in the next few weeks.

You likely can get a basic system working pretty quickly with what is  
in Lucene, but then the next level is often more difficult.  You often  
end up with a rules system that can become brittle with this  
approach.  An alternative is to apply some type of machine learning  
approach.  You could also look at this as a clustering problem, which  
Mahout (or other clustering tools) could be helpful in solving.

Finally, just know there will be a human in the loop with any  
approach.  The goal is to minimize the number of matches that a person  
has to check.

Hope this helps,
Grant

On Jun 9, 2009, at 4:16 AM, RaviK Thakur wrote:

>
> Hello All,
>      I want to check the feasibility of using Lucene for similarity  
> check
> between the two flat csv files. The actual requirement is like this:  
> We
> have two files each containing the information of customers like their
> name, address, pin code etc. Some customers may be in common in both  
> the
> files. We want to find the customer that are common in these files.  
> But the
> match should be on attribute basis. If the name of the customer  
> matches in
> one file to the name of the customer in another file, then match the
> address, if it matches then match pin code and so on. But the main
> consideration is that this matching is not exact. If the name of  
> customer
> matches say 80% then it may be termed as match. For example, if  
> ABDUL is
> matched with ABDULLAH, it should be termed as a match. In this  
> fashion each
> record of one file will be matched with each record of another file.  
> The
> output of this procedure will be another file containing the matched
> record.
>
> Can anyone please suggest the applicability of lucene for this  
> requirement.
> May in the form of Pros n Cons.
>
> Thanks in advance:-)
> Ravi
>
>
> ______________________________________________________________________
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 17:59:22 2009
Return-Path: <java-user-return-40683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39435 invoked from network); 9 Jun 2009 17:59:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 17:59:22 -0000
Received: (qmail 51046 invoked by uid 500); 9 Jun 2009 17:59:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50957 invoked by uid 500); 9 Jun 2009 17:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50947 invoked by uid 99); 9 Jun 2009 17:59:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 17:59:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.18.201.145] (HELO mail2.harryfox.com) (69.18.201.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 17:59:21 +0000
X-IronPort-AV: E=Sophos;i="4.41,334,1241409600"; 
   d="scan'208";a="768073"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Reloading RAM Directory from updated FS Directory
Date: Tue, 9 Jun 2009 13:59:00 -0400
Message-ID: <6E43574E3326BB44BD95FDCF2C59827E01503982@HFEXNY1.HARRYFOX.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Reloading RAM Directory from updated FS Directory
Thread-Index: AcnpK/eM4a6eLXK/Q7iTCUz9fL11RQ==
From: "Diamond, Greg" <GDiamond@harryfox.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All -

What is the best way to load a RAM Directory from a FS Directory, and =
periodically reload the RAM Directory to pick up new documents?

The scenario I have is I create several large directories which I create =
to a file system, then load them into ram for faster searching.
They takes several hours to create, so i want to retain a file copy so =
in the event of a service/server crash or reboot, they can load again
in a few seconds.  Once a day I append or recreate the FS Directories =
with new entries, and then reload the RAM Directories to pick up the
new entries.

Problem is, what I am doing seems to cause a memory leak.  The =
directories take ~12 GB of RAM to load, but bloats
to 24 GB (the -Xmx setting) after a few reloads and stays there.

	// Map to hold single instance of the IndexSearcher, 1 per RAM =
Directory, to be reused across requests.
	private static final Map<IndexName, IndexSearcher> searchers =3D new =
HashMap<IndexName, IndexSearcher>();
=09
	// Creates the IndexSearcher and stores it in the static map.
	public static void load(IndexName index, ...) {
		// sync... etc
		RAMDirectory dir =3D new =
RAMDirectory(FSDirectory.getDirectory(directoryPath);
		IndexReader reader =3D IndexReader.open(dir, true);
		IndexSearcher searcher =3D new IndexSearcher(reader);
		searchers.put(index, searcher);
	}
=09
	public static IndexSearcher get(IndexName index, ...) {
		// sync... etc
		return searchers.get(index);
	}
=09
	// After an indexing service appends the existing FS Directory, this =
reloads it.
	public static void reload(IndexName index, ...) {
		// sync... etc
		IndexSearcher searcher =3D searchers.get(index);
		FSDirectory fsDirectory =3D FSDirectory.getDirectory(directoryPath);
		Directory ramDirectory =3D searcher.getIndexReader().directory();
		Directory.copy(fsDirectory, ramDirectory, false);
	}

I've tries some theme and variations on this with the same issue.

TIA!

gd


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 20:03:19 2009
Return-Path: <java-user-return-40684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95894 invoked from network); 9 Jun 2009 20:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 20:03:18 -0000
Received: (qmail 46100 invoked by uid 500); 9 Jun 2009 20:03:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46023 invoked by uid 500); 9 Jun 2009 20:03:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46013 invoked by uid 99); 9 Jun 2009 20:03:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 20:03:27 +0000
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [151.190.254.13] (HELO edge.itt.com) (151.190.254.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 20:03:18 +0000
Received: from fwexhub4.itt.net (10.32.76.114) by edge.itt.com (10.32.16.13)
 with Microsoft SMTP Server (TLS) id 8.1.358.0; Tue, 9 Jun 2009 16:03:19 -0400
Received: from IIWCBO-EHUB1.iiw.de.ittind.com (10.244.2.24) by
 fwexhub4.itt.net (10.32.76.114) with Microsoft SMTP Server (TLS) id
 8.1.358.0; Tue, 9 Jun 2009 16:03:20 -0400
Received: from iiwcbo-emb1.iiw.de.ittind.com ([127.0.0.1]) by
 IIWCBO-Ehub1.iiw.de.ittind.com ([::1]) with mapi; Tue, 9 Jun 2009 16:03:20
 -0400
From: "Newman, Billy" <Billy.Newman@itt.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Tue, 9 Jun 2009 16:02:55 -0400
Subject: Using lucene in a clustered app server
Thread-Topic: Using lucene in a clustered app server
Thread-Index: AcnpPUc7N7mqi6BqRzS76DcShinLdA==
Message-ID: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673@IIWCBO-EMB1.iiw.de.ittind.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673IIWCBOEMB1iiw_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673IIWCBOEMB1iiw_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am trying to figure out the best way to add to a lucene index across a cl=
ustered app server.  I cannot grab an IndexWriter for each node in the clus=
ter, because I would run into lock file problems.  I am not sure if I can s=
hare one IndexWriter across the cluster because what happens when two or mo=
re nodes update the same thing.  Anyone have any insight?

Thanks.

________________________________
This e-mail and any files transmitted with it may be proprietary and are in=
tended solely for the use of the individual or entity to whom they are addr=
essed. If you have received this e-mail in error please notify the sender.
Please note that any views or opinions presented in this e-mail are solely =
those of the author and do not necessarily represent those of ITT Corporati=
on. The recipient should check this e-mail and any attachments for the pres=
ence of viruses. ITT accepts no liability for any damage caused by any viru=
s transmitted by this e-mail.

--_000_F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673IIWCBOEMB1iiw_--

From java-user-return-40685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 22:06:54 2009
Return-Path: <java-user-return-40685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45433 invoked from network); 9 Jun 2009 22:06:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 22:06:53 -0000
Received: (qmail 17262 invoked by uid 500); 9 Jun 2009 22:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17176 invoked by uid 500); 9 Jun 2009 22:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17166 invoked by uid 99); 9 Jun 2009 22:07:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 22:07:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kaykay.unique@gmail.com designates 209.85.221.184 as permitted sender)
Received: from [209.85.221.184] (HELO mail-qy0-f184.google.com) (209.85.221.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 22:06:51 +0000
Received: by qyk14 with SMTP id 14so489978qyk.29
        for <java-user@lucene.apache.org>; Tue, 09 Jun 2009 15:06:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=vrsdjYKQe9xylU6aKD20IvjqCkpOSU1NGame7dAM/Ag=;
        b=ehf73KUc0t6VLGYY/uUCAj84YJNwcsWZS7iF/8w7T4my1V7unZz27qMRZK6gzvz2wl
         Jl41FoxmouLtTER8dtnq7fz9MXkqf1F+wf1jHD+SlH7XwHSiAmnW5Cy9naDu20ee+pHx
         COWwQpwJxWp772UztLh4XAiUbPsZG3GxlNwMU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=OW7jGSc/7OpCnmxp8gBAPVY8LSH0j+OgKwYvFDPqJAvUHOQtMM8SUOWU3NJ/EVKkSe
         rjIwp6p/qHy0wAexiO+hxWYkx1yTkoeDHNlyc9t1ACpXSC0YGRS4oC8zlv/a86heaKfC
         SqWuG8alVGuGTlpkjOagfRRHhJNKhzwmvVtpE=
Received: by 10.224.60.70 with SMTP id o6mr794551qah.7.1244585190337;
        Tue, 09 Jun 2009 15:06:30 -0700 (PDT)
Received: from ?192.168.254.172? ([64.20.188.2])
        by mx.google.com with ESMTPS id 7sm76676qwb.56.2009.06.09.15.06.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 09 Jun 2009 15:06:29 -0700 (PDT)
Message-ID: <4A2EDCE5.5060607@gmail.com>
Date: Tue, 09 Jun 2009 18:06:29 -0400
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Reloading RAM Directory from updated FS Directory
References: <6E43574E3326BB44BD95FDCF2C59827E01503982@HFEXNY1.HARRYFOX.COM>
In-Reply-To: <6E43574E3326BB44BD95FDCF2C59827E01503982@HFEXNY1.HARRYFOX.COM>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Have you checked out solr project that provides a service on top of 
Lucene + caching / warming up facilities similar to what you need.

The IndexReaders are expensive ( and are the underlying data source for 
a given IndexSearcher ) in terms of time and resources , when being 
opened / created anew.

So - having 2 live instances of IndexReaders concurrently might be an 
issue to begin with.

Lucene (IndexSearchers / IndexReaders) has the notion of cache as well 
so you need to check if you really want a 100% replication of 
RAMDirectory / FSDirectory as well concurrently in memory.  Have you 
tested with the FieldCache policies before moving onto the RAMDirectory 
based backup solution.

--
  Karthik.


Diamond, Greg wrote:
> Hi All -
>
> What is the best way to load a RAM Directory from a FS Directory, and periodically reload the RAM Directory to pick up new documents?
>
> The scenario I have is I create several large directories which I create to a file system, then load them into ram for faster searching.
> They takes several hours to create, so i want to retain a file copy so in the event of a service/server crash or reboot, they can load again
> in a few seconds.  Once a day I append or recreate the FS Directories with new entries, and then reload the RAM Directories to pick up the
> new entries.
>
> Problem is, what I am doing seems to cause a memory leak.  The directories take ~12 GB of RAM to load, but bloats
> to 24 GB (the -Xmx setting) after a few reloads and stays there.
>
> 	// Map to hold single instance of the IndexSearcher, 1 per RAM Directory, to be reused across requests.
> 	private static final Map<IndexName, IndexSearcher> searchers = new HashMap<IndexName, IndexSearcher>();
> 	
> 	// Creates the IndexSearcher and stores it in the static map.
> 	public static void load(IndexName index, ...) {
> 		// sync... etc
> 		RAMDirectory dir = new RAMDirectory(FSDirectory.getDirectory(directoryPath);
> 		IndexReader reader = IndexReader.open(dir, true);
> 		IndexSearcher searcher = new IndexSearcher(reader);
> 		searchers.put(index, searcher);
> 	}
> 	
> 	public static IndexSearcher get(IndexName index, ...) {
> 		// sync... etc
> 		return searchers.get(index);
> 	}
> 	
> 	// After an indexing service appends the existing FS Directory, this reloads it.
> 	public static void reload(IndexName index, ...) {
> 		// sync... etc
> 		IndexSearcher searcher = searchers.get(index);
> 		FSDirectory fsDirectory = FSDirectory.getDirectory(directoryPath);
> 		Directory ramDirectory = searcher.getIndexReader().directory();
> 		Directory.copy(fsDirectory, ramDirectory, false);
> 	}
>
> I've tries some theme and variations on this with the same issue.
>
> TIA!
>
> gd
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 09 22:25:00 2009
Return-Path: <java-user-return-40686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54384 invoked from network); 9 Jun 2009 22:25:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jun 2009 22:25:00 -0000
Received: (qmail 33597 invoked by uid 500); 9 Jun 2009 22:25:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33512 invoked by uid 500); 9 Jun 2009 22:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33502 invoked by uid 99); 9 Jun 2009 22:25:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 22:25:09 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jun 2009 22:25:00 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4CE44D36002
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 00:24:38 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id H0+anCGyt6zg for <java-user@lucene.apache.org>;
	Wed, 10 Jun 2009 00:24:34 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B78E5D36001
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 00:24:34 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <6E43574E3326BB44BD95FDCF2C59827E01503982@HFEXNY1.HARRYFOX.COM> <4A2EDCE5.5060607@gmail.com>
Subject: RE: Reloading RAM Directory from updated FS Directory
Date: Wed, 10 Jun 2009 00:24:35 +0200
Message-ID: <19B7BA3DE8EE4F579BE345C7E94B2AFD@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4A2EDCE5.5060607@gmail.com>
Thread-Index: AcnpTqRMhVGZe1pEQhip/wk4PbOt7gAAMrlw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Greg & Kay,

> Lucene (IndexSearchers / IndexReaders) has the notion of cache as well
> so you need to check if you really want a 100% replication of
> RAMDirectory / FSDirectory as well concurrently in memory.  Have you
> tested with the FieldCache policies before moving onto the RAMDirectory
> based backup solution.

As you have so big indexes, I think you use a 64 bit machine and 64 bit JVM.
I would recommend you in this case to use MMapDirectory instead of copying
the contents to a RAMDirectory. MMapDirectory works like FSDirectory, but it
does not read the files via normal RandomAccessFile actions, but it maps the
file into the 64 bit address space. In principle this is like a swap file,
the contents of the file are seen like memory. The operating system kernel
then uses the same strategies to map parts of the index into real RAM, just
like a swap file. For Lucene it looks like a RAMDirectory backed by a file.

Changes to the underlying index can be seen immediately, and changes can
reloaded using IndexReader.reopen(), which is much faster than reopening the
index in complete.

Kay Kay: Instantiating an IndexSearcher on top of a IndexReader costs
nothing (its just a wrapper around the IndexReader). The costly part is
opening the IndexReader. So using reopen() and wrapping this always with a
fresh IndexReader is faster than creating an IndexSearcher using the
directory path.

Uwe

> Diamond, Greg wrote:
> > Hi All -
> >
> > What is the best way to load a RAM Directory from a FS Directory, and
> periodically reload the RAM Directory to pick up new documents?
> >
> > The scenario I have is I create several large directories which I create
> to a file system, then load them into ram for faster searching.
> > They takes several hours to create, so i want to retain a file copy so
> in the event of a service/server crash or reboot, they can load again
> > in a few seconds.  Once a day I append or recreate the FS Directories
> with new entries, and then reload the RAM Directories to pick up the
> > new entries.
> >
> > Problem is, what I am doing seems to cause a memory leak.  The
> directories take ~12 GB of RAM to load, but bloats
> > to 24 GB (the -Xmx setting) after a few reloads and stays there.
> >
> > 	// Map to hold single instance of the IndexSearcher, 1 per RAM
> Directory, to be reused across requests.
> > 	private static final Map<IndexName, IndexSearcher> searchers = new
> HashMap<IndexName, IndexSearcher>();
> >
> > 	// Creates the IndexSearcher and stores it in the static map.
> > 	public static void load(IndexName index, ...) {
> > 		// sync... etc
> > 		RAMDirectory dir = new
> RAMDirectory(FSDirectory.getDirectory(directoryPath);
> > 		IndexReader reader = IndexReader.open(dir, true);
> > 		IndexSearcher searcher = new IndexSearcher(reader);
> > 		searchers.put(index, searcher);
> > 	}
> >
> > 	public static IndexSearcher get(IndexName index, ...) {
> > 		// sync... etc
> > 		return searchers.get(index);
> > 	}
> >
> > 	// After an indexing service appends the existing FS Directory, this
> reloads it.
> > 	public static void reload(IndexName index, ...) {
> > 		// sync... etc
> > 		IndexSearcher searcher = searchers.get(index);
> > 		FSDirectory fsDirectory =
> FSDirectory.getDirectory(directoryPath);
> > 		Directory ramDirectory =
> searcher.getIndexReader().directory();
> > 		Directory.copy(fsDirectory, ramDirectory, false);
> > 	}
> >
> > I've tries some theme and variations on this with the same issue.
> >
> > TIA!
> >
> > gd
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 01:05:25 2009
Return-Path: <java-user-return-40687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99527 invoked from network); 10 Jun 2009 01:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 01:05:25 -0000
Received: (qmail 41213 invoked by uid 500); 10 Jun 2009 01:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41135 invoked by uid 500); 10 Jun 2009 01:05:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41125 invoked by uid 99); 10 Jun 2009 01:05:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 01:05:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=Aem79z=CF=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.134 as permitted sender)
Received: from [65.254.253.134] (HELO mailout16.yourhostingaccount.com) (65.254.253.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 01:05:25 +0000
Received: from mailscan13.yourhostingaccount.com ([10.1.15.13] helo=mailscan13.yourhostingaccount.com)
	by mailout16.yourhostingaccount.com with esmtp (Exim)
	id 1MECFT-0007tm-KJ
	for java-user@lucene.apache.org; Tue, 09 Jun 2009 21:05:03 -0400
Received: from impout03.yourhostingaccount.com ([10.1.55.3] helo=impout03.yourhostingaccount.com)
	by mailscan13.yourhostingaccount.com with esmtp (Exim)
	id 1MECFT-0002aN-Bq
	for java-user@lucene.apache.org; Tue, 09 Jun 2009 21:05:03 -0400
Received: from authsmtp06.yourhostingaccount.com ([10.1.18.6])
	by impout03.yourhostingaccount.com with NO UCE
	id 21521c00707rVmq0000000; Tue, 09 Jun 2009 21:05:02 -0400
X-EN-OrigOutIP: 10.1.18.6
X-EN-IMPSID: 21521c00707rVmq0000000
Received: from adsl-75-36-154-77.dsl.pltn13.sbcglobal.net ([75.36.154.77] helo=[10.0.1.215])
	by authsmtp06.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1MECFS-0001ZF-Ux
	for java-user@lucene.apache.org; Tue, 09 Jun 2009 21:05:03 -0400
Message-Id: <B703B7F0-2552-48DB-A142-6AFBAB1BB65A@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Migrating from Hit/Hits to TopDocs/TopDocCollector
Date: Tue, 9 Jun 2009 18:04:59 -0700
X-Mailer: Apple Mail (2.935.3)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 75.36.154.77
X-EN-OrigHost: adsl-75-36-154-77.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

I have existing code that's like:

	final Term t = /* ... */;
         final Iterator i = searcher.search( new  
TermQuery( t ) ).iterator();
         while ( i.hasNext() ) {
             final Hit hit = (Hit)i.next();
	    // "FILE" is the field that recorded the original file indexed
             final File f = new File( hit.get( "FILE" ) );
	    // ...
         }

It's not clear to me how to rewrite the code using TopDocs/ 
TopDocCollector and how to iterate over the results.

A little help?  Thanks.  :-)

- Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 08:42:54 2009
Return-Path: <java-user-return-40688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48861 invoked from network); 10 Jun 2009 08:42:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 08:42:53 -0000
Received: (qmail 28809 invoked by uid 500); 10 Jun 2009 08:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28737 invoked by uid 500); 10 Jun 2009 08:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28727 invoked by uid 99); 10 Jun 2009 08:43:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 08:43:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mateuszb@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 08:42:53 +0000
Received: by fxm3 with SMTP id 3so592170fxm.5
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 01:42:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:cc:content-type
         :content-transfer-encoding;
        bh=VE091w7I5thEbamwatMxJZJeJL6PS8SVq+dTSl1uOXw=;
        b=RP6xBNeCu0hX3OJbvU+bi3ERH2S0fRFumMIbHV/n9ugM7feUldihMTIUnaPOvn+JCP
         W6/G9A/REGZ/GrHVWF8CeVU5zK6EtLZQ/LV2dIw+cY1oo/RGUcQEpBxwl4moEHkkRdkB
         QEc+WBhokegYL7a61aqeqxX60RbPsgVMzxQxg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type:content-transfer-encoding;
        b=kPo/hoys2eyXu6QpzyaYa1XFn2I9I12QExvDMj+G63las7njKLMLnq22qjiyEW+p5P
         3deT9TD9cyP24m3Yd8OELDssbCU9WwEPwANWxLUjy+c0oP3ki6WeXovARYRBZCt1I5C4
         fd8BsTaafzEfZZ2VMnQy9S73DaX7/bBhwJOgI=
MIME-Version: 1.0
Received: by 10.86.36.11 with SMTP id j11mr906072fgj.56.1244623353062; Wed, 10 
	Jun 2009 01:42:33 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906091731x4c9b6dbdj7c8be5352821dd52@mail.gmail.com>
References: <aec8d6fc0906080323n5e8ab35cjbe9441259d7f36b1@mail.gmail.com> 
	<9ac0c6aa0906080427lc8ec517icc50028bd1e69a78@mail.gmail.com> 
	<aec8d6fc0906080454q7e647537i6bde0b72a76172fb@mail.gmail.com> 
	<9ac0c6aa0906080513l123c59afgd07e0111f1ad74cc@mail.gmail.com> 
	<aec8d6fc0906091532x6b181838jdaf4708da5e326b6@mail.gmail.com> 
	<9ac0c6aa0906091731x4c9b6dbdj7c8be5352821dd52@mail.gmail.com>
From: Mateusz Berezecki <mateuszb@gmail.com>
Date: Wed, 10 Jun 2009 10:42:13 +0200
Message-ID: <aec8d6fc0906100142o336ea8a2ge186b02e090828ee@mail.gmail.com>
Subject: Re: indexing performance problems
To: java-user@lucene.apache.org
Cc: Michael McCandless <lucene@mikemccandless.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi list!

I'm forwarding as somehow I did not put the list in the CC but the
answer I think is noteworthy, so here it is. Please remember to use
StringBuffer before blaming lucene ;-)

Actual time consumed by lucene is now ~130 minutes as opposed to 20
hours which is neat. I can do much more passes during the day.

Mateusz

On Wed, Jun 10, 2009 at 2:31 AM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> Oh actually could you send this response to the full list (so they see
> closure too)? =C2=A0Thanks.
>
> Mike
>
> On Tue, Jun 9, 2009 at 6:32 PM, Mateusz Berezecki<mateuszb@gmail.com> wro=
te:
>> Hi Michael,
>>
>> It took a while but thanks to your suggestions I've started poking
>> around and it turned out that the bottleneck was with GC for JVM and
>> in my use of String instead of StringBuffer. The thing is now over 20
>> times faster !
>>
>> Thanks a lot !
>>
>> Mateusz
>>
>> On Mon, Jun 8, 2009 at 2:13 PM, Michael
>> McCandless<lucene@mikemccandless.com> wrote:
>>> On Mon, Jun 8, 2009 at 7:54 AM, Mateusz Berezecki<mateuszb@gmail.com> w=
rote:
>>>
>>>> Thanks for a prompt response.
>>>
>>> You're welcome!
>>>
>>>>> A mergeFactor of 150 is way too high; I'd put that back to 10 and see
>>>>> if the problem persists. =C2=A0Also make sure you're using
>>>>> autoCommit=3Dfalse, and try the suggestions here:
>>>>>
>>>>> =C2=A0 =C2=A0http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>>>>
>>>> I've set mergeFactor to 10, 15 and 20 before trying out 150 and the
>>>> problem persisted, although I have to admit that 2.9 gives some
>>>> serious speed improvements as compared to 2.4.1 which I believe is a
>>>> good sign, i.e. it reaches the same document that causes deadlock much
>>>> faster than 2.4.1 does
>>>
>>> Hmm: do you know for certain that a particular document causes this?
>>> If you make a standalone test indexing only that document, does the
>>> problem happen?
>>>
>>>>> You're sure the JRE's heap size is big enough?
>>>>
>>>> I've set it to 3.8 GB and I'm running it on a desktop with 4 GB of RAM=
.
>>>
>>> OK sounds like plenty, though likely the OS won't give you 3.8 GB (if
>>> the JRE is 32-bit).
>>>
>>>>> If the problem persists... can you turn on IndexWriter's infoStream
>>>>> and post the resulting output leading up to the 100% CPU? =C2=A0You m=
ight
>>>>> also try "kill -QUIT" when the 100% CPU problem is happening, to catc=
h
>>>>> the stack trace of all threads, and post that too...
>>>>
>>>> Not sure how do I turn on the infoStream and autoCommit? WRT to
>>>> autoCommit I did not use the deprecated API with autoCommit flags in
>>>> constructors, so assuming I used the recommended API is the autoCommit
>>>> on/off by default?
>>>
>>> For infoStream, eg: =C2=A0IndexWriter.setInfoStream(System.out);
>>>
>>> And, yes, since you're using a non-deprecated ctor of IndexWriter, you
>>> are getting autoCommit=3Dfalse, so that's good.
>>>
>>> Mike
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 09:15:42 2009
Return-Path: <java-user-return-40689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56448 invoked from network); 10 Jun 2009 09:15:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 09:15:42 -0000
Received: (qmail 75490 invoked by uid 500); 10 Jun 2009 09:15:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75421 invoked by uid 500); 10 Jun 2009 09:15:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75411 invoked by uid 99); 10 Jun 2009 09:15:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 09:15:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 09:15:41 +0000
Received: by fg-out-1718.google.com with SMTP id e12so169554fga.4
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 02:15:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Kx9ee33MXRBU5sadQ3TkYkSgWcoMSlp6CYz7mR4jdbs=;
        b=r4czrsWJOl/1yjmFEnuKmYDhF+YnA33lz3Nqqs9e6IWllq8PoE4kYUWachDRHqRFRx
         VH4sM5cKKxnUQyj4GU+TT5icmIYNIo65Xqg20JACDk6yrvQ/gu8cxnXEjISqd6DS52bO
         fdX4XPP7UNwKOBqZVjbZTKDSGi3/075b2qipA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=RFk/XIEdvzqxlpch9G9BE7kS+gZwPxiM8ENaLUnbajpWnj+EFH26ZDdfTJqd8xUlTt
         frky5/y6Nf4tF1WERi/ejrCj4Z0y3H6EEKSl5+5AbmIN9kToIYN2/xQYfeWMIzJVhLtN
         WD5caKGGsSuteTl/JpfMOt3fmzPPTsRoBjsrg=
MIME-Version: 1.0
Received: by 10.86.36.4 with SMTP id j4mr922464fgj.63.1244625320087; Wed, 10 
	Jun 2009 02:15:20 -0700 (PDT)
In-Reply-To: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673@IIWCBO-EMB1.iiw.de.ittind.com>
References: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673@IIWCBO-EMB1.iiw.de.ittind.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 10 Jun 2009 10:15:00 +0100
Message-ID: <8c4e68610906100215g1c6dfcfdj90f07bd682653ad8@mail.gmail.com>
Subject: Re: Using lucene in a clustered app server
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I'd recommend using your favourite queueing service to pass all
updates to a central process, the one and only process that updates
the index.  If you don't already have a favourite queueing service,
http://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations
lists several JMS implementations.


--
Ian.

On Tue, Jun 9, 2009 at 9:02 PM, Newman, Billy<Billy.Newman@itt.com> wrote:
> I am trying to figure out the best way to add to a lucene index across a =
clustered app server. =A0I cannot grab an IndexWriter for each node in the =
cluster, because I would run into lock file problems. =A0I am not sure if I=
 can share one IndexWriter across the cluster because what happens when two=
 or more nodes update the same thing. =A0Anyone have any insight?
>
> Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 09:35:56 2009
Return-Path: <java-user-return-40690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68487 invoked from network); 10 Jun 2009 09:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 09:35:56 -0000
Received: (qmail 13727 invoked by uid 500); 10 Jun 2009 09:36:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13681 invoked by uid 500); 10 Jun 2009 09:36:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13671 invoked by uid 99); 10 Jun 2009 09:36:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 09:36:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 09:35:56 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1028190fgb.4
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 02:35:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=V5e2Is7P4NxP3hOFDmbw9mTrTeDkK/So3hgj5euxswY=;
        b=Nrm6c6cqJ+SBUjfm0Iut1NOBd9dWE2LnFZ8ZfGQCIsYv9quYy7E2bzYoFZqAge39Tc
         fSU8+fY63op6SDSgxGr9WizvFxCN0YRIU/cbOvglje4W5ER+AzKuR2Vu5PoQpa070w7n
         87eR9qoDSMkJ+BVAF+SRSn1UGJmlxUbGbOt5Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=T1byt+O82ePhZLOHX5fnSJyvpAy9ixt5R+VP7SfGCrB3X82Dx+Xs24TzoMKrgMN0rF
         nbGEWBDAh1skxjMepRI8sfBYDUeiJGf4LkJcIRPT2ospOZ34DYSzGIqcm03vpsHuW1y5
         h+3fQwjK5jEFlYHiv12xSDIhNN89DpY5wOaVw=
MIME-Version: 1.0
Received: by 10.86.59.18 with SMTP id h18mr918470fga.71.1244626535230; Wed, 10 
	Jun 2009 02:35:35 -0700 (PDT)
In-Reply-To: <B703B7F0-2552-48DB-A142-6AFBAB1BB65A@lucasmail.org>
References: <B703B7F0-2552-48DB-A142-6AFBAB1BB65A@lucasmail.org>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 10 Jun 2009 10:35:15 +0100
Message-ID: <8c4e68610906100235q4d60e42ar327997d48a14add8@mail.gmail.com>
Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


The code below might do the job.  Based on the example at
http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Hits.=
html

Completely uncompiled and untested of course.

TopDocCollector collector =3D new TopDocCollector(hitsPerPage);
final Term t =3D /* ... */;
Query query =3D new TermQuery( t )
searcher.search(query, collector);
ScoreDoc[] hits =3D collector.topDocs().scoreDocs;
for (int i =3D 0; i < hits.length; i++) {
     int docId =3D hits[i].doc;
     Document d =3D searcher.doc(docId);
     final File f =3D new File( d.get( "FILE" ) );
}


--
Ian.


On Wed, Jun 10, 2009 at 2:04 AM, Paul J. Lucas<paul@lucasmail.org> wrote:
> I have existing code that's like:
>
> =A0 =A0 =A0 =A0final Term t =3D /* ... */;
> =A0 =A0 =A0 =A0final Iterator i =3D searcher.search( new TermQuery( t ) )=
.iterator();
> =A0 =A0 =A0 =A0while ( i.hasNext() ) {
> =A0 =A0 =A0 =A0 =A0 =A0final Hit hit =3D (Hit)i.next();
> =A0 =A0 =A0 =A0 =A0 =A0// "FILE" is the field that recorded the original =
file indexed
> =A0 =A0 =A0 =A0 =A0 =A0final File f =3D new File( hit.get( "FILE" ) );
> =A0 =A0 =A0 =A0 =A0 =A0// ...
> =A0 =A0 =A0 =A0}
>
> It's not clear to me how to rewrite the code using TopDocs/TopDocCollecto=
r
> and how to iterate over the results.
>
> A little help? =A0Thanks. =A0:-)
>
> - Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 09:44:18 2009
Return-Path: <java-user-return-40691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72417 invoked from network); 10 Jun 2009 09:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 09:44:16 -0000
Received: (qmail 30038 invoked by uid 500); 10 Jun 2009 09:44:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29983 invoked by uid 500); 10 Jun 2009 09:44:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29973 invoked by uid 99); 10 Jun 2009 09:44:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 09:44:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 09:44:15 +0000
Received: from webmail.xs4all.nl (dovemail2.xs4all.nl [194.109.26.4])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id n5A9htAu035149
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 11:43:55 +0200 (CEST)
	(envelope-from wheijke@xs4all.nl)
Received: from 82.210.249.81
        (SquirrelMail authenticated user wheijke)
        by webmail.xs4all.nl with HTTP;
        Wed, 10 Jun 2009 11:43:55 +0200 (CEST)
Message-ID: <45497.82.210.249.81.1244627035.squirrel@webmail.xs4all.nl>
Date: Wed, 10 Jun 2009 11:43:55 +0200 (CEST)
Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
From: "Wouter Heijke" <wheijke@xs4all.nl>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.11
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


Will this do?

IndexReader indexReader = searcher.getIndexReader();
TopDocs topDocs = searcher.search(Query query, int n);
for (int i = 0; i < topDocs.scoreDocs.length; i++) {
  Document document = indexReader.document( topDocs.scoreDocs[i].doc);
  final File f = new File( document.get( "FILE" ) );
}


> I have existing code that's like:
>
> 	final Term t = /* ... */;
>          final Iterator i = searcher.search( new
> TermQuery( t ) ).iterator();
>          while ( i.hasNext() ) {
>              final Hit hit = (Hit)i.next();
> 	    // "FILE" is the field that recorded the original file indexed
>              final File f = new File( hit.get( "FILE" ) );
> 	    // ...
>          }
>
> It's not clear to me how to rewrite the code using TopDocs/
> TopDocCollector and how to iterate over the results.
>
> A little help?  Thanks.  :-)
>
> - Paul
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 09:55:16 2009
Return-Path: <java-user-return-40692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80441 invoked from network); 10 Jun 2009 09:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 09:55:16 -0000
Received: (qmail 52876 invoked by uid 500); 10 Jun 2009 09:55:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52817 invoked by uid 500); 10 Jun 2009 09:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52807 invoked by uid 99); 10 Jun 2009 09:55:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 09:55:24 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 09:55:14 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 729D045E7A7
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 11:54:52 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id TziySz1o5K2k for <java-user@lucene.apache.org>;
	Wed, 10 Jun 2009 11:54:42 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.74])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 41F1945E772
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 11:54:42 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <45497.82.210.249.81.1244627035.squirrel@webmail.xs4all.nl>
Subject: RE: Migrating from Hit/Hits to TopDocs/TopDocCollector
Date: Wed, 10 Jun 2009 11:54:40 +0200
Message-ID: <C49A95DEE0794A3A8C51AC23CC683DB1@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <45497.82.210.249.81.1244627035.squirrel@webmail.xs4all.nl>
Thread-Index: AcnpsBFEp0a0RpbHTQW5+ySGftBzUwAAL/cQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

This code snipplet would only work, if you want to iterate over e.g. the
first 20 documents (which is n in your code). If he wants to iterate over
all results, he should think about using a custom (Hit)Collector.

The code below will be very slow for large result sets (because retrieving
stored fields is not effective for a large number of documents, look into
the warning about the "inner search loop" in Wiki). To just retrieve e.g. a
Filename, it may really be better to use a FieldCache on the "FILE" field
and inside the HitCollector, use the doc number to get the filename from the
cache. I think the speed improve will be >>10 times as fast!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Wouter Heijke [mailto:wheijke@xs4all.nl]
> Sent: Wednesday, June 10, 2009 11:44 AM
> To: java-user@lucene.apache.org
> Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
> 
> 
> Will this do?
> 
> IndexReader indexReader = searcher.getIndexReader();
> TopDocs topDocs = searcher.search(Query query, int n);
> for (int i = 0; i < topDocs.scoreDocs.length; i++) {
>   Document document = indexReader.document( topDocs.scoreDocs[i].doc);
>   final File f = new File( document.get( "FILE" ) );
> }
> 
> 
> > I have existing code that's like:
> >
> > 	final Term t = /* ... */;
> >          final Iterator i = searcher.search( new
> > TermQuery( t ) ).iterator();
> >          while ( i.hasNext() ) {
> >              final Hit hit = (Hit)i.next();
> > 	    // "FILE" is the field that recorded the original file indexed
> >              final File f = new File( hit.get( "FILE" ) );
> > 	    // ...
> >          }
> >
> > It's not clear to me how to rewrite the code using TopDocs/
> > TopDocCollector and how to iterate over the results.
> >
> > A little help?  Thanks.  :-)
> >
> > - Paul
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 10:10:06 2009
Return-Path: <java-user-return-40693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92808 invoked from network); 10 Jun 2009 10:10:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 10:10:06 -0000
Received: (qmail 72495 invoked by uid 500); 10 Jun 2009 10:10:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72411 invoked by uid 500); 10 Jun 2009 10:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72401 invoked by uid 99); 10 Jun 2009 10:10:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 10:10:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 10:10:04 +0000
Received: from webmail.xs4all.nl (dovemail2.xs4all.nl [194.109.26.4])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id n5AA9ihp044544
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 12:09:44 +0200 (CEST)
	(envelope-from wheijke@xs4all.nl)
Received: from 82.210.249.81
        (SquirrelMail authenticated user wheijke)
        by webmail.xs4all.nl with HTTP;
        Wed, 10 Jun 2009 12:09:44 +0200 (CEST)
Message-ID: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl>
Date: Wed, 10 Jun 2009 12:09:44 +0200 (CEST)
Subject: RE: Migrating from Hit/Hits to TopDocs/TopDocCollector
From: "Wouter Heijke" <wheijke@xs4all.nl>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.11
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

You are wrong.
As the java doc reads: 'Finds the top n hits for query'
You can set n to whatever value you want, 'all' documents (not results!)
indexed in your index if you want, or 10 if you want the top 10.

Anyway, it's just an example to give a direction..

Wouter

> This code snipplet would only work, if you want to iterate over e.g. the
> first 20 documents (which is n in your code). If he wants to iterate over
> all results, he should think about using a custom (Hit)Collector.
>
> The code below will be very slow for large result sets (because retrieving
> stored fields is not effective for a large number of documents, look into
> the warning about the "inner search loop" in Wiki). To just retrieve e.g.
> a
> Filename, it may really be better to use a FieldCache on the "FILE" field
> and inside the HitCollector, use the doc number to get the filename from
> the
> cache. I think the speed improve will be >>10 times as fast!
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>> -----Original Message-----
>> From: Wouter Heijke [mailto:wheijke@xs4all.nl]
>> Sent: Wednesday, June 10, 2009 11:44 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
>>
>>
>> Will this do?
>>
>> IndexReader indexReader = searcher.getIndexReader();
>> TopDocs topDocs = searcher.search(Query query, int n);
>> for (int i = 0; i < topDocs.scoreDocs.length; i++) {
>>   Document document = indexReader.document( topDocs.scoreDocs[i].doc);
>>   final File f = new File( document.get( "FILE" ) );
>> }
>>
>>
>> > I have existing code that's like:
>> >
>> > 	final Term t = /* ... */;
>> >          final Iterator i = searcher.search( new
>> > TermQuery( t ) ).iterator();
>> >          while ( i.hasNext() ) {
>> >              final Hit hit = (Hit)i.next();
>> > 	    // "FILE" is the field that recorded the original file indexed
>> >              final File f = new File( hit.get( "FILE" ) );
>> > 	    // ...
>> >          }
>> >
>> > It's not clear to me how to rewrite the code using TopDocs/
>> > TopDocCollector and how to iterate over the results.
>> >
>> > A little help?  Thanks.  :-)
>> >
>> > - Paul
>> >
>>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 10:17:39 2009
Return-Path: <java-user-return-40694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97411 invoked from network); 10 Jun 2009 10:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 10:17:39 -0000
Received: (qmail 83746 invoked by uid 500); 10 Jun 2009 10:17:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83676 invoked by uid 500); 10 Jun 2009 10:17:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83666 invoked by uid 99); 10 Jun 2009 10:17:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 10:17:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 10:17:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id DB67245E707
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 12:17:15 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id MJUp5Rbaz3e1 for <java-user@lucene.apache.org>;
	Wed, 10 Jun 2009 12:17:02 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.74])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D423A45E6E7
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 12:17:01 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl>
Subject: RE: Migrating from Hit/Hits to TopDocs/TopDocCollector
Date: Wed, 10 Jun 2009 12:17:00 +0200
Message-ID: <55B054A51CE0407DA1B9C7CACF25C67D@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl>
Thread-Index: Acnps7AeWqFowpXIQLiB1gwSurbwQwAAD3jw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

> You are wrong.
> As the java doc reads: 'Finds the top n hits for query'
> You can set n to whatever value you want, 'all' documents (not results!)
> indexed in your index if you want, or 10 if you want the top 10.

You are right, you can, but if you just want to retrieve all hits, this is
ineffective. A HitCollector is the correct way to do this (especially
because the order of hits is mostly not interesting when retrieving all
hits). Hits and TopDocs are intended for paged results lists.

> Anyway, it's just an example to give a direction..

Same here,
I wanted to give Paul a hint, how to do it correctly and effective.

> Wouter
> 
> > This code snipplet would only work, if you want to iterate over e.g. the
> > first 20 documents (which is n in your code). If he wants to iterate
> over
> > all results, he should think about using a custom (Hit)Collector.
> >
> > The code below will be very slow for large result sets (because
> retrieving
> > stored fields is not effective for a large number of documents, look
> into
> > the warning about the "inner search loop" in Wiki). To just retrieve
> e.g.
> > a
> > Filename, it may really be better to use a FieldCache on the "FILE"
> field
> > and inside the HitCollector, use the doc number to get the filename from
> > the
> > cache. I think the speed improve will be >>10 times as fast!
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >> -----Original Message-----
> >> From: Wouter Heijke [mailto:wheijke@xs4all.nl]
> >> Sent: Wednesday, June 10, 2009 11:44 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
> >>
> >>
> >> Will this do?
> >>
> >> IndexReader indexReader = searcher.getIndexReader();
> >> TopDocs topDocs = searcher.search(Query query, int n);
> >> for (int i = 0; i < topDocs.scoreDocs.length; i++) {
> >>   Document document = indexReader.document( topDocs.scoreDocs[i].doc);
> >>   final File f = new File( document.get( "FILE" ) );
> >> }
> >>
> >>
> >> > I have existing code that's like:
> >> >
> >> > 	final Term t = /* ... */;
> >> >          final Iterator i = searcher.search( new
> >> > TermQuery( t ) ).iterator();
> >> >          while ( i.hasNext() ) {
> >> >              final Hit hit = (Hit)i.next();
> >> > 	    // "FILE" is the field that recorded the original file indexed
> >> >              final File f = new File( hit.get( "FILE" ) );
> >> > 	    // ...
> >> >          }
> >> >
> >> > It's not clear to me how to rewrite the code using TopDocs/
> >> > TopDocCollector and how to iterate over the results.
> >> >
> >> > A little help?  Thanks.  :-)
> >> >
> >> > - Paul
> >> >
> >>
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 10:30:26 2009
Return-Path: <java-user-return-40695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6498 invoked from network); 10 Jun 2009 10:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 10:30:25 -0000
Received: (qmail 99613 invoked by uid 500); 10 Jun 2009 10:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99529 invoked by uid 500); 10 Jun 2009 10:30:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99519 invoked by uid 99); 10 Jun 2009 10:30:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 10:30:31 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.34] (HELO web27102.mail.ukl.yahoo.com) (217.146.182.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Jun 2009 10:30:20 +0000
Received: (qmail 85051 invoked by uid 60001); 10 Jun 2009 10:29:58 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1244629798; bh=TARAQI3dhoBgiw8ZGmvLfqZS0mEacl6Co/y1qQ08mR0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=nULZIjL7zf+z/jivVnUp9wUE6yrga1dRDxKeDHZnI25jK0Ybx6F9eFYx09EOwOI25s57gGZet6n6YZaWJawEFU0veNHYJeY9qSdxREDS69gC2Nx3CN2zV3KYItgSlS5x2bjML8gAEPKx5O/rQ3sC/y9gtHk5ier8khCLzGhfHuY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=rgMQhtiqaSYTIIWQpMh/+f4F2XDy5WXxJ9i5kUJGH2TTnIpxiHLCKFi5/Rj2f5yNkPB8VQUai31l5heREq2czccy4ZvF8axIO0LFHvV1aUghf+rHdoz5EBepP877bi5pkI+ao0c0jDrFNFQ10ILnO9EWBFqXL1SH+5QcrCFay50=;
Message-ID: <280261.84721.qm@web27102.mail.ukl.yahoo.com>
X-YMail-OSG: 89Kip48VM1mj9w4yktImzP6LG8bwhGb8By9Xawzubghz7e.1mrq3gH9xrr.EH8JLTxWY8AlVGpdm45JQr5uIdUKHGzomTnxLmiINrlsNot.dZ9sZw23xXf5h1g5ydoK1P_12GEym9ckO6Dnk3FivIEpi86b6oYD_7XVsoxcKM_zUf6TIN.NrABPGcNzkgx.aWf6Ft1lsb9L9AgrbUCBy0skIHDNBHE.xtfDnNWB10.yuFXrlImLuuWqd086m9CQn7vPGY4wcH6g2crcXbIR01Sf5a69Gvf1Y.cdvasEHa9SRMOsmJpbit9JXYsyhtZdnkCCo5vsAAFm2n7ROfgaDU9M-
Received: from [79.240.215.15] by web27102.mail.ukl.yahoo.com via HTTP; Wed, 10 Jun 2009 10:29:57 GMT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
References: <6E43574E3326BB44BD95FDCF2C59827E01503982@HFEXNY1.HARRYFOX.COM> <4A2EDCE5.5060607@gmail.com> <19B7BA3DE8EE4F579BE345C7E94B2AFD@VEGA>
Date: Wed, 10 Jun 2009 10:29:57 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Reloading RAM Directory from updated FS Directory
To: java-user@lucene.apache.org
In-Reply-To: <19B7BA3DE8EE4F579BE345C7E94B2AFD@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


there is one case where MMAP does not beat RAM, initial warm-up after proce=
ss restart. With MMAP it can take a while before you get up to speed. MMAP =
with reopen is the best, if you run without restart.=0A=0A =0A=0A=0A=0A----=
- Original Message ----=0A> From: Uwe Schindler <uwe@thetaphi.de>=0A> To: j=
ava-user@lucene.apache.org=0A> Sent: Wednesday, 10 June, 2009 0:24:35=0A> S=
ubject: RE: Reloading RAM Directory from updated FS Directory=0A> =0A> Hi G=
reg & Kay,=0A> =0A> > Lucene (IndexSearchers / IndexReaders) has the notion=
 of cache as well=0A> > so you need to check if you really want a 100% repl=
ication of=0A> > RAMDirectory / FSDirectory as well concurrently in memory.=
  Have you=0A> > tested with the FieldCache policies before moving onto the=
 RAMDirectory=0A> > based backup solution.=0A> =0A> As you have so big inde=
xes, I think you use a 64 bit machine and 64 bit JVM.=0A> I would recommend=
 you in this case to use MMapDirectory instead of copying=0A> the contents =
to a RAMDirectory. MMapDirectory works like FSDirectory, but it=0A> does no=
t read the files via normal RandomAccessFile actions, but it maps the=0A> f=
ile into the 64 bit address space. In principle this is like a swap file,=
=0A> the contents of the file are seen like memory. The operating system ke=
rnel=0A> then uses the same strategies to map parts of the index into real =
RAM, just=0A> like a swap file. For Lucene it looks like a RAMDirectory bac=
ked by a file.=0A> =0A> Changes to the underlying index can be seen immedia=
tely, and changes can=0A> reloaded using IndexReader.reopen(), which is muc=
h faster than reopening the=0A> index in complete.=0A> =0A> Kay Kay: Instan=
tiating an IndexSearcher on top of a IndexReader costs=0A> nothing (its jus=
t a wrapper around the IndexReader). The costly part is=0A> opening the Ind=
exReader. So using reopen() and wrapping this always with a=0A> fresh Index=
Reader is faster than creating an IndexSearcher using the=0A> directory pat=
h.=0A> =0A> Uwe=0A> =0A> > Diamond, Greg wrote:=0A> > > Hi All -=0A> > >=0A=
> > > What is the best way to load a RAM Directory from a FS Directory, and=
=0A> > periodically reload the RAM Directory to pick up new documents?=0A> =
> >=0A> > > The scenario I have is I create several large directories which=
 I create=0A> > to a file system, then load them into ram for faster search=
ing.=0A> > > They takes several hours to create, so i want to retain a file=
 copy so=0A> > in the event of a service/server crash or reboot, they can l=
oad again=0A> > > in a few seconds.  Once a day I append or recreate the FS=
 Directories=0A> > with new entries, and then reload the RAM Directories to=
 pick up the=0A> > > new entries.=0A> > >=0A> > > Problem is, what I am doi=
ng seems to cause a memory leak.  The=0A> > directories take ~12 GB of RAM =
to load, but bloats=0A> > > to 24 GB (the -Xmx setting) after a few reloads=
 and stays there.=0A> > >=0A> > >     // Map to hold single instance of the=
 IndexSearcher, 1 per RAM=0A> > Directory, to be reused across requests.=0A=
> > >     private static final Mapsearchers =3D new=0A> > HashMap();=0A> > =
>=0A> > >     // Creates the IndexSearcher and stores it in the static map.=
=0A> > >     public static void load(IndexName index, ...) {=0A> > >       =
  // sync... etc=0A> > >         RAMDirectory dir =3D new=0A> > RAMDirector=
y(FSDirectory.getDirectory(directoryPath);=0A> > >         IndexReader read=
er =3D IndexReader.open(dir, true);=0A> > >         IndexSearcher searcher =
=3D new IndexSearcher(reader);=0A> > >         searchers.put(index, searche=
r);=0A> > >     }=0A> > >=0A> > >     public static IndexSearcher get(Index=
Name index, ...) {=0A> > >         // sync... etc=0A> > >         return se=
archers.get(index);=0A> > >     }=0A> > >=0A> > >     // After an indexing =
service appends the existing FS Directory, this=0A> > reloads it.=0A> > >  =
   public static void reload(IndexName index, ...) {=0A> > >         // syn=
c... etc=0A> > >         IndexSearcher searcher =3D searchers.get(index);=
=0A> > >         FSDirectory fsDirectory =3D=0A> > FSDirectory.getDirectory=
(directoryPath);=0A> > >         Directory ramDirectory =3D=0A> > searcher.=
getIndexReader().directory();=0A> > >         Directory.copy(fsDirectory, r=
amDirectory, false);=0A> > >     }=0A> > >=0A> > > I've tries some theme an=
d variations on this with the same issue.=0A> > >=0A> > > TIA!=0A> > >=0A> =
> > gd=0A> > >=0A> > >=0A> > > --------------------------------------------=
-------------------------=0A> > > To unsubscribe, e-mail: java-user-unsubsc=
ribe@lucene.apache.org=0A> > > For additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A> > >=0A> > >=0A> > >=0A> > =0A> > =0A> > =0A> > --=
-------------------------------------------------------------------=0A> > T=
o unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > For ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A> =0A> =0A> =
=0A> ---------------------------------------------------------------------=
=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> Fo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=
      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 10:36:14 2009
Return-Path: <java-user-return-40696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11420 invoked from network); 10 Jun 2009 10:36:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 10:36:14 -0000
Received: (qmail 5954 invoked by uid 500); 10 Jun 2009 10:36:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5901 invoked by uid 500); 10 Jun 2009 10:36:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5891 invoked by uid 99); 10 Jun 2009 10:36:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 10:36:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 10:36:11 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id BBA1345E81B
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 12:35:51 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id A9IYnqbaXJnk for <java-user@lucene.apache.org>;
	Wed, 10 Jun 2009 12:35:43 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.74])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3EBC045E818
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 12:35:43 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <6E43574E3326BB44BD95FDCF2C59827E01503982@HFEXNY1.HARRYFOX.COM> <4A2EDCE5.5060607@gmail.com> <19B7BA3DE8EE4F579BE345C7E94B2AFD@VEGA> <280261.84721.qm@web27102.mail.ukl.yahoo.com>
Subject: RE: Reloading RAM Directory from updated FS Directory
Date: Wed, 10 Jun 2009 12:35:41 +0200
Message-ID: <D2BB8FB042B245E0859F6EB565999D83@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <280261.84721.qm@web27102.mail.ukl.yahoo.com>
Thread-Index: Acnptoh9c4A3NdbfQS64QADG3ogNpwAAEWBw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

There is currently a patch/idea from Earwin around that modifies
MMapDirectory to optionally call MappedByteBuffer.load() after mapping a
file from the directory. MappedByteBuffer.load() tells the operating system
kernel to try to swap as much as possible from the file into physical RAM.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: eks dev [mailto:eksdev@yahoo.co.uk]
> Sent: Wednesday, June 10, 2009 12:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: Reloading RAM Directory from updated FS Directory
> 
> 
> there is one case where MMAP does not beat RAM, initial warm-up after
> process restart. With MMAP it can take a while before you get up to speed.
> MMAP with reopen is the best, if you run without restart.
> 
> 
> 
> 
> 
> ----- Original Message ----
> > From: Uwe Schindler <uwe@thetaphi.de>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, 10 June, 2009 0:24:35
> > Subject: RE: Reloading RAM Directory from updated FS Directory
> >
> > Hi Greg & Kay,
> >
> > > Lucene (IndexSearchers / IndexReaders) has the notion of cache as well
> > > so you need to check if you really want a 100% replication of
> > > RAMDirectory / FSDirectory as well concurrently in memory.  Have you
> > > tested with the FieldCache policies before moving onto the
> RAMDirectory
> > > based backup solution.
> >
> > As you have so big indexes, I think you use a 64 bit machine and 64 bit
> JVM.
> > I would recommend you in this case to use MMapDirectory instead of
> copying
> > the contents to a RAMDirectory. MMapDirectory works like FSDirectory,
> but it
> > does not read the files via normal RandomAccessFile actions, but it maps
> the
> > file into the 64 bit address space. In principle this is like a swap
> file,
> > the contents of the file are seen like memory. The operating system
> kernel
> > then uses the same strategies to map parts of the index into real RAM,
> just
> > like a swap file. For Lucene it looks like a RAMDirectory backed by a
> file.
> >
> > Changes to the underlying index can be seen immediately, and changes can
> > reloaded using IndexReader.reopen(), which is much faster than reopening
> the
> > index in complete.
> >
> > Kay Kay: Instantiating an IndexSearcher on top of a IndexReader costs
> > nothing (its just a wrapper around the IndexReader). The costly part is
> > opening the IndexReader. So using reopen() and wrapping this always with
> a
> > fresh IndexReader is faster than creating an IndexSearcher using the
> > directory path.
> >
> > Uwe
> >
> > > Diamond, Greg wrote:
> > > > Hi All -
> > > >
> > > > What is the best way to load a RAM Directory from a FS Directory,
> and
> > > periodically reload the RAM Directory to pick up new documents?
> > > >
> > > > The scenario I have is I create several large directories which I
> create
> > > to a file system, then load them into ram for faster searching.
> > > > They takes several hours to create, so i want to retain a file copy
> so
> > > in the event of a service/server crash or reboot, they can load again
> > > > in a few seconds.  Once a day I append or recreate the FS
> Directories
> > > with new entries, and then reload the RAM Directories to pick up the
> > > > new entries.
> > > >
> > > > Problem is, what I am doing seems to cause a memory leak.  The
> > > directories take ~12 GB of RAM to load, but bloats
> > > > to 24 GB (the -Xmx setting) after a few reloads and stays there.
> > > >
> > > >     // Map to hold single instance of the IndexSearcher, 1 per RAM
> > > Directory, to be reused across requests.
> > > >     private static final Mapsearchers = new
> > > HashMap();
> > > >
> > > >     // Creates the IndexSearcher and stores it in the static map.
> > > >     public static void load(IndexName index, ...) {
> > > >         // sync... etc
> > > >         RAMDirectory dir = new
> > > RAMDirectory(FSDirectory.getDirectory(directoryPath);
> > > >         IndexReader reader = IndexReader.open(dir, true);
> > > >         IndexSearcher searcher = new IndexSearcher(reader);
> > > >         searchers.put(index, searcher);
> > > >     }
> > > >
> > > >     public static IndexSearcher get(IndexName index, ...) {
> > > >         // sync... etc
> > > >         return searchers.get(index);
> > > >     }
> > > >
> > > >     // After an indexing service appends the existing FS Directory,
> this
> > > reloads it.
> > > >     public static void reload(IndexName index, ...) {
> > > >         // sync... etc
> > > >         IndexSearcher searcher = searchers.get(index);
> > > >         FSDirectory fsDirectory =
> > > FSDirectory.getDirectory(directoryPath);
> > > >         Directory ramDirectory =
> > > searcher.getIndexReader().directory();
> > > >         Directory.copy(fsDirectory, ramDirectory, false);
> > > >     }
> > > >
> > > > I've tries some theme and variations on this with the same issue.
> > > >
> > > > TIA!
> > > >
> > > > gd
> > > >
> > > >
> > > > --------------------------------------------------------------------
> -
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 10:36:41 2009
Return-Path: <java-user-return-40697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11956 invoked from network); 10 Jun 2009 10:36:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 10:36:41 -0000
Received: (qmail 9346 invoked by uid 500); 10 Jun 2009 10:36:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9273 invoked by uid 500); 10 Jun 2009 10:36:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9263 invoked by uid 99); 10 Jun 2009 10:36:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 10:36:50 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 10:36:42 +0000
Received: by gxk11 with SMTP id 11so792679gxk.5
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 03:36:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.133.13 with SMTP id k13mr2431795ybn.51.1244630180845; Wed, 
	10 Jun 2009 03:36:20 -0700 (PDT)
In-Reply-To: <aec8d6fc0906100142o336ea8a2ge186b02e090828ee@mail.gmail.com>
References: <aec8d6fc0906080323n5e8ab35cjbe9441259d7f36b1@mail.gmail.com>
	 <9ac0c6aa0906080427lc8ec517icc50028bd1e69a78@mail.gmail.com>
	 <aec8d6fc0906080454q7e647537i6bde0b72a76172fb@mail.gmail.com>
	 <9ac0c6aa0906080513l123c59afgd07e0111f1ad74cc@mail.gmail.com>
	 <aec8d6fc0906091532x6b181838jdaf4708da5e326b6@mail.gmail.com>
	 <9ac0c6aa0906091731x4c9b6dbdj7c8be5352821dd52@mail.gmail.com>
	 <aec8d6fc0906100142o336ea8a2ge186b02e090828ee@mail.gmail.com>
Date: Wed, 10 Jun 2009 06:36:20 -0400
Message-ID: <9ac0c6aa0906100336h22b16081nbdc5d32fb28a259c@mail.gmail.com>
Subject: Re: indexing performance problems
From: Michael McCandless <lucene@mikemccandless.com>
To: Mateusz Berezecki <mateuszb@gmail.com>
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for bringing closure!

Mike

On Wed, Jun 10, 2009 at 4:42 AM, Mateusz Berezecki<mateuszb@gmail.com> wrot=
e:
> Hi list!
>
> I'm forwarding as somehow I did not put the list in the CC but the
> answer I think is noteworthy, so here it is. Please remember to use
> StringBuffer before blaming lucene ;-)
>
> Actual time consumed by lucene is now ~130 minutes as opposed to 20
> hours which is neat. I can do much more passes during the day.
>
> Mateusz
>
> On Wed, Jun 10, 2009 at 2:31 AM, Michael
> McCandless<lucene@mikemccandless.com> wrote:
>> Oh actually could you send this response to the full list (so they see
>> closure too)? =A0Thanks.
>>
>> Mike
>>
>> On Tue, Jun 9, 2009 at 6:32 PM, Mateusz Berezecki<mateuszb@gmail.com> wr=
ote:
>>> Hi Michael,
>>>
>>> It took a while but thanks to your suggestions I've started poking
>>> around and it turned out that the bottleneck was with GC for JVM and
>>> in my use of String instead of StringBuffer. The thing is now over 20
>>> times faster !
>>>
>>> Thanks a lot !
>>>
>>> Mateusz
>>>
>>> On Mon, Jun 8, 2009 at 2:13 PM, Michael
>>> McCandless<lucene@mikemccandless.com> wrote:
>>>> On Mon, Jun 8, 2009 at 7:54 AM, Mateusz Berezecki<mateuszb@gmail.com> =
wrote:
>>>>
>>>>> Thanks for a prompt response.
>>>>
>>>> You're welcome!
>>>>
>>>>>> A mergeFactor of 150 is way too high; I'd put that back to 10 and se=
e
>>>>>> if the problem persists. =A0Also make sure you're using
>>>>>> autoCommit=3Dfalse, and try the suggestions here:
>>>>>>
>>>>>> =A0 =A0http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>>>>>
>>>>> I've set mergeFactor to 10, 15 and 20 before trying out 150 and the
>>>>> problem persisted, although I have to admit that 2.9 gives some
>>>>> serious speed improvements as compared to 2.4.1 which I believe is a
>>>>> good sign, i.e. it reaches the same document that causes deadlock muc=
h
>>>>> faster than 2.4.1 does
>>>>
>>>> Hmm: do you know for certain that a particular document causes this?
>>>> If you make a standalone test indexing only that document, does the
>>>> problem happen?
>>>>
>>>>>> You're sure the JRE's heap size is big enough?
>>>>>
>>>>> I've set it to 3.8 GB and I'm running it on a desktop with 4 GB of RA=
M.
>>>>
>>>> OK sounds like plenty, though likely the OS won't give you 3.8 GB (if
>>>> the JRE is 32-bit).
>>>>
>>>>>> If the problem persists... can you turn on IndexWriter's infoStream
>>>>>> and post the resulting output leading up to the 100% CPU? =A0You mig=
ht
>>>>>> also try "kill -QUIT" when the 100% CPU problem is happening, to cat=
ch
>>>>>> the stack trace of all threads, and post that too...
>>>>>
>>>>> Not sure how do I turn on the infoStream and autoCommit? WRT to
>>>>> autoCommit I did not use the deprecated API with autoCommit flags in
>>>>> constructors, so assuming I used the recommended API is the autoCommi=
t
>>>>> on/off by default?
>>>>
>>>> For infoStream, eg: =A0IndexWriter.setInfoStream(System.out);
>>>>
>>>> And, yes, since you're using a non-deprecated ctor of IndexWriter, you
>>>> are getting autoCommit=3Dfalse, so that's good.
>>>>
>>>> Mike
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 12:24:51 2009
Return-Path: <java-user-return-40698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54235 invoked from network); 10 Jun 2009 12:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 12:24:48 -0000
Received: (qmail 52895 invoked by uid 500); 10 Jun 2009 12:24:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51433 invoked by uid 500); 10 Jun 2009 12:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50352 invoked by uid 99); 10 Jun 2009 12:17:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 12:17:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.72.192.234] (HELO fmmailgate03.web.de) (217.72.192.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 12:16:58 +0000
Received: from smtp08.web.de (fmsmtp08.dlan.cinetic.de [172.20.5.216])
	by fmmailgate03.web.de (Postfix) with ESMTP id E5A08FF44997
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 14:16:36 +0200 (CEST)
Received: from [92.205.0.203] (helo=localhost)
	by smtp08.web.de with asmtp (TLSv1:AES128-SHA:128)
	(WEB.DE 4.110 #277)
	id 1MEMjM-0004so-00
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 14:16:36 +0200
Date: Wed, 10 Jun 2009 14:23:47 +0200
From: Benedikt Boss <nanoc@web.de>
To: java-user@lucene.apache.org
Subject: Lucene memory usage
Message-ID: <20090610122347.GB5557@kopfschmerz.zuhause>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: mutt-ng/devel-r804 (Linux)
Sender: nanoc@web.de
X-Sender: nanoc@web.de
X-Provags-ID: V01U2FsdGVkX1+/vhXV/D7OeokLLom6hQ1jcINX3GSZ9dLb2xKL
	qGSg4iM3akqFyr88Uv0g/k03QliYwb9zgqeBjKPsryEwTBBpMR
	lU3uBE0sM=
X-Virus-Checked: Checked by ClamAV on apache.org

Hej hej,

i have a question regarding lucenes memory usage
when launching a query. When i execute my query
lucene eats up over 1gig of heap-memory even 
when my result-set is only a single hit. I
found out that this is due to the "ensureIndexIsRead()" 
method-call in the "TermInfosReader" class, which
iterates over all Terms found in the index and saves
them (including all value-strings) in a Term-Array. 
Is it possible to not read all that stuff 
into memory at all?

Im doing the query like in the following pseudo-code:
------------------------------------------------------------------------

TopScoreDocCollector collector = new TopScoreDocCollector(100000);

QueryParser   parser= new QueryParser(field, new WhitespaceAnalyzer() );
Directory     fsDir = new FSDirectory(indexDir, null);
IndexSearcher is    = new IndexSearcher(fsdir);

Query         query = parser.parse(q);

is.search(query, collector);
ScoreDoc[] hits = collector.topDocs();

....... < iterate over hits and print results >


Thanks in advance
Benedikt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 12:40:46 2009
Return-Path: <java-user-return-40699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65423 invoked from network); 10 Jun 2009 12:40:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 12:40:46 -0000
Received: (qmail 16148 invoked by uid 500); 10 Jun 2009 12:40:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16077 invoked by uid 500); 10 Jun 2009 12:40:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16067 invoked by uid 99); 10 Jun 2009 12:40:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 12:40:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 12:40:48 +0000
Received: by gxk11 with SMTP id 11so902274gxk.5
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 05:40:26 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.140.13 with SMTP id n13mr2571554ybd.261.1244637626748; 
	Wed, 10 Jun 2009 05:40:26 -0700 (PDT)
In-Reply-To: <20090610122347.GB5557@kopfschmerz.zuhause>
References: <20090610122347.GB5557@kopfschmerz.zuhause>
Date: Wed, 10 Jun 2009 08:40:26 -0400
Message-ID: <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
Subject: Re: Lucene memory usage
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This (very large number of unique terms) is a problem for Lucene currently.

There are some simple improvements we could make to the terms dict
format to not require so much RAM per term in the terms index...
LUCENE-1458 (flexible indexing) has these improvements, but
unfortunately tied in w/ lots of other changes.  Maybe we should break
out a separate issue for this... this'd be a great contained
improvement, if anyone out there has "the itch" :)

One simple workaround is to call IndexReader.setTermIndexInterval
immediately after opening the reader; this simply loads fewer terms in
the index, using far less RAM, but at the expense of somewhat slower
searching.

Also: you should peek at your index, eg using Luke, to understand why
you have so many terms.  It could be legitimate (indexing a massive
catalog with eg part numbers), or, it could be your document filtering
/ analyzer are accidentally producing garbage terms.

Mike

On Wed, Jun 10, 2009 at 8:23 AM, Benedikt Boss<nanoc@web.de> wrote:
> Hej hej,
>
> i have a question regarding lucenes memory usage
> when launching a query. When i execute my query
> lucene eats up over 1gig of heap-memory even
> when my result-set is only a single hit. I
> found out that this is due to the "ensureIndexIsRead()"
> method-call in the "TermInfosReader" class, which
> iterates over all Terms found in the index and saves
> them (including all value-strings) in a Term-Array.
> Is it possible to not read all that stuff
> into memory at all?
>
> Im doing the query like in the following pseudo-code:
> ------------------------------------------------------------------------
>
> TopScoreDocCollector collector =3D new TopScoreDocCollector(100000);
>
> QueryParser =A0 parser=3D new QueryParser(field, new WhitespaceAnalyzer()=
 );
> Directory =A0 =A0 fsDir =3D new FSDirectory(indexDir, null);
> IndexSearcher is =A0 =A0=3D new IndexSearcher(fsdir);
>
> Query =A0 =A0 =A0 =A0 query =3D parser.parse(q);
>
> is.search(query, collector);
> ScoreDoc[] hits =3D collector.topDocs();
>
> ....... < iterate over hits and print results >
>
>
> Thanks in advance
> Benedikt
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 15:26:07 2009
Return-Path: <java-user-return-40700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64725 invoked from network); 10 Jun 2009 15:26:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 15:26:07 -0000
Received: (qmail 64803 invoked by uid 500); 10 Jun 2009 15:26:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64741 invoked by uid 500); 10 Jun 2009 15:26:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64731 invoked by uid 99); 10 Jun 2009 15:26:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 15:26:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=Aem79z=CF=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.139 as permitted sender)
Received: from [65.254.253.139] (HELO mailout17.yourhostingaccount.com) (65.254.253.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 15:26:06 +0000
Received: from mailscan13.yourhostingaccount.com ([10.1.15.13] helo=mailscan13.yourhostingaccount.com)
	by mailout17.yourhostingaccount.com with esmtp (Exim)
	id 1MEPgP-0000Lq-21
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 11:25:45 -0400
Received: from impout03.yourhostingaccount.com ([10.1.55.3] helo=impout03.yourhostingaccount.com)
	by mailscan13.yourhostingaccount.com with esmtp (Exim)
	id 1MEPgO-00025R-Nz
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 11:25:44 -0400
Received: from authsmtp02.yourhostingaccount.com ([10.1.18.2])
	by impout03.yourhostingaccount.com with NO UCE
	id 2FRk1c00602goRm0000000; Wed, 10 Jun 2009 11:25:44 -0400
X-EN-OrigOutIP: 10.1.18.2
X-EN-IMPSID: 2FRk1c00602goRm0000000
Received: from adsl-76-199-196-251.dsl.pltn13.sbcglobal.net ([76.199.196.251] helo=[10.0.1.215])
	by authsmtp02.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1MEPgO-0006gd-7i
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 11:25:44 -0400
Message-Id: <07567F80-F847-4434-B645-3224A07A3881@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <55B054A51CE0407DA1B9C7CACF25C67D@VEGA>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
Date: Wed, 10 Jun 2009 08:25:41 -0700
References: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl> <55B054A51CE0407DA1B9C7CACF25C67D@VEGA>
X-Mailer: Apple Mail (2.935.3)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.199.196.251
X-EN-OrigHost: adsl-76-199-196-251.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

On Jun 10, 2009, at 3:17 AM, Uwe Schindler wrote:

> A HitCollector is the correct way to do this (especially because the  
> order of hits is mostly not interesting when retrieving all hits).

OK, here's what I came up with:

     Term t = /* ... */
     Collection<File> files = new LinkedList<File>();
     FieldSelector fieldSelector = new FieldSelector() {
         public FieldSelectorResult accept( String fieldName ) {
             if ( fieldName.equals( "FILE" ) )
                 return FieldSelectorResult.LOAD_AND_BREAK;
             return FieldSelectorResult.NO_LOAD;
         }
     };
     HitCollector hitCollector = new HitCollector() {
         public void collect( int docID, float score ) {
             try {
                 Document doc = searcher.doc( docID, fieldSelector );
                 files.add( new File( doc.get( "FILE" ) ) );
             }
             catch ( Exception e ) {
                 // ignore
             }
         }
     };
     searcher.search( new TermQuery( t ), hitCollector );

How's that?

- Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 16:17:31 2009
Return-Path: <java-user-return-40701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81245 invoked from network); 10 Jun 2009 16:17:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 16:17:31 -0000
Received: (qmail 66952 invoked by uid 500); 10 Jun 2009 16:17:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66889 invoked by uid 500); 10 Jun 2009 16:17:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66879 invoked by uid 99); 10 Jun 2009 16:17:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 16:17:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.18.201.145] (HELO mail2.harryfox.com) (69.18.201.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 16:17:30 +0000
X-IronPort-AV: E=Sophos;i="4.41,342,1241409600"; 
   d="scan'208";a="772205"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Reloading RAM Directory from updated FS Directory
Date: Wed, 10 Jun 2009 12:17:07 -0400
Message-ID: <6E43574E3326BB44BD95FDCF2C59827E01503985@HFEXNY1.HARRYFOX.COM>
In-Reply-To: <D2BB8FB042B245E0859F6EB565999D83@VEGA>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Reloading RAM Directory from updated FS Directory
Thread-Index: Acnptoh9c4A3NdbfQS64QADG3ogNpwAAEWBwAAv7e6A=
From: "Diamond, Greg" <GDiamond@harryfox.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the responses.  I am testing it out using MMapDirectory.

Cheers!

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de]
Sent: Wednesday, June 10, 2009 6:36 AM
To: java-user@lucene.apache.org
Subject: RE: Reloading RAM Directory from updated FS Directory


There is currently a patch/idea from Earwin around that modifies
MMapDirectory to optionally call MappedByteBuffer.load() after mapping a
file from the directory. MappedByteBuffer.load() tells the operating =
system
kernel to try to swap as much as possible from the file into physical =
RAM.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: eks dev [mailto:eksdev@yahoo.co.uk]
> Sent: Wednesday, June 10, 2009 12:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: Reloading RAM Directory from updated FS Directory
>=20
>=20
> there is one case where MMAP does not beat RAM, initial warm-up after
> process restart. With MMAP it can take a while before you get up to =
speed.
> MMAP with reopen is the best, if you run without restart.
>=20
>=20
>=20
>=20
>=20
> ----- Original Message ----
> > From: Uwe Schindler <uwe@thetaphi.de>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, 10 June, 2009 0:24:35
> > Subject: RE: Reloading RAM Directory from updated FS Directory
> >
> > Hi Greg & Kay,
> >
> > > Lucene (IndexSearchers / IndexReaders) has the notion of cache as =
well
> > > so you need to check if you really want a 100% replication of
> > > RAMDirectory / FSDirectory as well concurrently in memory.  Have =
you
> > > tested with the FieldCache policies before moving onto the
> RAMDirectory
> > > based backup solution.
> >
> > As you have so big indexes, I think you use a 64 bit machine and 64 =
bit
> JVM.
> > I would recommend you in this case to use MMapDirectory instead of
> copying
> > the contents to a RAMDirectory. MMapDirectory works like =
FSDirectory,
> but it
> > does not read the files via normal RandomAccessFile actions, but it =
maps
> the
> > file into the 64 bit address space. In principle this is like a swap
> file,
> > the contents of the file are seen like memory. The operating system
> kernel
> > then uses the same strategies to map parts of the index into real =
RAM,
> just
> > like a swap file. For Lucene it looks like a RAMDirectory backed by =
a
> file.
> >
> > Changes to the underlying index can be seen immediately, and changes =
can
> > reloaded using IndexReader.reopen(), which is much faster than =
reopening
> the
> > index in complete.
> >
> > Kay Kay: Instantiating an IndexSearcher on top of a IndexReader =
costs
> > nothing (its just a wrapper around the IndexReader). The costly part =
is
> > opening the IndexReader. So using reopen() and wrapping this always =
with
> a
> > fresh IndexReader is faster than creating an IndexSearcher using the
> > directory path.
> >
> > Uwe
> >
> > > Diamond, Greg wrote:
> > > > Hi All -
> > > >
> > > > What is the best way to load a RAM Directory from a FS =
Directory,
> and
> > > periodically reload the RAM Directory to pick up new documents?
> > > >
> > > > The scenario I have is I create several large directories which =
I
> create
> > > to a file system, then load them into ram for faster searching.
> > > > They takes several hours to create, so i want to retain a file =
copy
> so
> > > in the event of a service/server crash or reboot, they can load =
again
> > > > in a few seconds.  Once a day I append or recreate the FS
> Directories
> > > with new entries, and then reload the RAM Directories to pick up =
the
> > > > new entries.
> > > >
> > > > Problem is, what I am doing seems to cause a memory leak.  The
> > > directories take ~12 GB of RAM to load, but bloats
> > > > to 24 GB (the -Xmx setting) after a few reloads and stays there.
> > > >
> > > >     // Map to hold single instance of the IndexSearcher, 1 per =
RAM
> > > Directory, to be reused across requests.
> > > >     private static final Mapsearchers =3D new
> > > HashMap();
> > > >
> > > >     // Creates the IndexSearcher and stores it in the static =
map.
> > > >     public static void load(IndexName index, ...) {
> > > >         // sync... etc
> > > >         RAMDirectory dir =3D new
> > > RAMDirectory(FSDirectory.getDirectory(directoryPath);
> > > >         IndexReader reader =3D IndexReader.open(dir, true);
> > > >         IndexSearcher searcher =3D new IndexSearcher(reader);
> > > >         searchers.put(index, searcher);
> > > >     }
> > > >
> > > >     public static IndexSearcher get(IndexName index, ...) {
> > > >         // sync... etc
> > > >         return searchers.get(index);
> > > >     }
> > > >
> > > >     // After an indexing service appends the existing FS =
Directory,
> this
> > > reloads it.
> > > >     public static void reload(IndexName index, ...) {
> > > >         // sync... etc
> > > >         IndexSearcher searcher =3D searchers.get(index);
> > > >         FSDirectory fsDirectory =3D
> > > FSDirectory.getDirectory(directoryPath);
> > > >         Directory ramDirectory =3D
> > > searcher.getIndexReader().directory();
> > > >         Directory.copy(fsDirectory, ramDirectory, false);
> > > >     }
> > > >
> > > > I've tries some theme and variations on this with the same =
issue.
> > > >
> > > > TIA!
> > > >
> > > > gd
> > > >
> > > >
> > > > =
--------------------------------------------------------------------
> -
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > >
> > >
> > >
> > > =
---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 17:12:06 2009
Return-Path: <java-user-return-40702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98281 invoked from network); 10 Jun 2009 17:12:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 17:12:06 -0000
Received: (qmail 96411 invoked by uid 500); 10 Jun 2009 17:12:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96348 invoked by uid 500); 10 Jun 2009 17:12:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96338 invoked by uid 99); 10 Jun 2009 17:12:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 17:12:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 17:12:03 +0000
Received: by yw-out-2324.google.com with SMTP id 2so480102ywt.5
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 10:11:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=hP4VadboSE29WHFkO0llVTuEISjofp9pFOKl/FEQQnQ=;
        b=R8YVwcI1l9xLfJKDXaOVV97/R0e1tO0dB2uRZg98yyOpGpQZS6rfGF+0/Bg0DiGJTK
         VNuS59TxfOdQF5Fs8h556OOuM6cJg8cn02RzMMVcoMNZ73+UNQNrffwbmbOIyu9TVK7/
         v/yoeMgN2CEx36lghnaeOfbbnZO1EcM/mUecw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=E3u/uEMOim5zyVGm6jCaaQPPcf/VfBodwYb9TtXJDT35lQJZAZ+1wEb+1A+cOI2kYB
         q7pdS72GYaZkuRnv3qw762qW+CkHJLk0vGln8ASAtz7p4YF4no9IFriPEGL84/ASwdgC
         n9Ze+Cdy/dhg4NPymWvcP4k4FIgSbo2vAf1dw=
MIME-Version: 1.0
Received: by 10.100.91.15 with SMTP id o15mr1600697anb.47.1244653901643; Wed, 
	10 Jun 2009 10:11:41 -0700 (PDT)
In-Reply-To: <6E43574E3326BB44BD95FDCF2C59827E01503985@HFEXNY1.HARRYFOX.COM>
References: <D2BB8FB042B245E0859F6EB565999D83@VEGA>
	 <6E43574E3326BB44BD95FDCF2C59827E01503985@HFEXNY1.HARRYFOX.COM>
Date: Wed, 10 Jun 2009 10:11:41 -0700
Message-ID: <652776090906101011u49b8afcfrf5efad3c6c6e4bc6@mail.gmail.com>
Subject: Re: Reloading RAM Directory from updated FS Directory
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Another potential idea would be to break up the index into N indices
such that each index is small enough to fit two in memory and then you
can swap them.
   http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apac=
he/lucene/index/MultiReader.html
This is just an idea, I haven't tried it.

My current solution for the warm up problem is that I use "cat
/path/to/index/* > /dev/null" to force the new index into the disk
cache. Kind of lame but this works for getting a new index into disk
cache if you don't have enough RAM to fit two indices in RAM for the
swap. I'll also mention that I remove the box from the load balancer
while this disk cache warming is occurring.

M



On Wed, Jun 10, 2009 at 9:17 AM, Diamond, Greg<GDiamond@harryfox.com> wrote=
:
> Thanks for the responses. =A0I am testing it out using MMapDirectory.
>
> Cheers!
>
> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Wednesday, June 10, 2009 6:36 AM
> To: java-user@lucene.apache.org
> Subject: RE: Reloading RAM Directory from updated FS Directory
>
>
> There is currently a patch/idea from Earwin around that modifies
> MMapDirectory to optionally call MappedByteBuffer.load() after mapping a
> file from the directory. MappedByteBuffer.load() tells the operating syst=
em
> kernel to try to swap as much as possible from the file into physical RAM=
.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>> -----Original Message-----
>> From: eks dev [mailto:eksdev@yahoo.co.uk]
>> Sent: Wednesday, June 10, 2009 12:30 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Reloading RAM Directory from updated FS Directory
>>
>>
>> there is one case where MMAP does not beat RAM, initial warm-up after
>> process restart. With MMAP it can take a while before you get up to spee=
d.
>> MMAP with reopen is the best, if you run without restart.
>>
>>
>>
>>
>>
>> ----- Original Message ----
>> > From: Uwe Schindler <uwe@thetaphi.de>
>> > To: java-user@lucene.apache.org
>> > Sent: Wednesday, 10 June, 2009 0:24:35
>> > Subject: RE: Reloading RAM Directory from updated FS Directory
>> >
>> > Hi Greg & Kay,
>> >
>> > > Lucene (IndexSearchers / IndexReaders) has the notion of cache as we=
ll
>> > > so you need to check if you really want a 100% replication of
>> > > RAMDirectory / FSDirectory as well concurrently in memory. =A0Have y=
ou
>> > > tested with the FieldCache policies before moving onto the
>> RAMDirectory
>> > > based backup solution.
>> >
>> > As you have so big indexes, I think you use a 64 bit machine and 64 bi=
t
>> JVM.
>> > I would recommend you in this case to use MMapDirectory instead of
>> copying
>> > the contents to a RAMDirectory. MMapDirectory works like FSDirectory,
>> but it
>> > does not read the files via normal RandomAccessFile actions, but it ma=
ps
>> the
>> > file into the 64 bit address space. In principle this is like a swap
>> file,
>> > the contents of the file are seen like memory. The operating system
>> kernel
>> > then uses the same strategies to map parts of the index into real RAM,
>> just
>> > like a swap file. For Lucene it looks like a RAMDirectory backed by a
>> file.
>> >
>> > Changes to the underlying index can be seen immediately, and changes c=
an
>> > reloaded using IndexReader.reopen(), which is much faster than reopeni=
ng
>> the
>> > index in complete.
>> >
>> > Kay Kay: Instantiating an IndexSearcher on top of a IndexReader costs
>> > nothing (its just a wrapper around the IndexReader). The costly part i=
s
>> > opening the IndexReader. So using reopen() and wrapping this always wi=
th
>> a
>> > fresh IndexReader is faster than creating an IndexSearcher using the
>> > directory path.
>> >
>> > Uwe
>> >
>> > > Diamond, Greg wrote:
>> > > > Hi All -
>> > > >
>> > > > What is the best way to load a RAM Directory from a FS Directory,
>> and
>> > > periodically reload the RAM Directory to pick up new documents?
>> > > >
>> > > > The scenario I have is I create several large directories which I
>> create
>> > > to a file system, then load them into ram for faster searching.
>> > > > They takes several hours to create, so i want to retain a file cop=
y
>> so
>> > > in the event of a service/server crash or reboot, they can load agai=
n
>> > > > in a few seconds. =A0Once a day I append or recreate the FS
>> Directories
>> > > with new entries, and then reload the RAM Directories to pick up the
>> > > > new entries.
>> > > >
>> > > > Problem is, what I am doing seems to cause a memory leak. =A0The
>> > > directories take ~12 GB of RAM to load, but bloats
>> > > > to 24 GB (the -Xmx setting) after a few reloads and stays there.
>> > > >
>> > > > =A0 =A0 // Map to hold single instance of the IndexSearcher, 1 per=
 RAM
>> > > Directory, to be reused across requests.
>> > > > =A0 =A0 private static final Mapsearchers =3D new
>> > > HashMap();
>> > > >
>> > > > =A0 =A0 // Creates the IndexSearcher and stores it in the static m=
ap.
>> > > > =A0 =A0 public static void load(IndexName index, ...) {
>> > > > =A0 =A0 =A0 =A0 // sync... etc
>> > > > =A0 =A0 =A0 =A0 RAMDirectory dir =3D new
>> > > RAMDirectory(FSDirectory.getDirectory(directoryPath);
>> > > > =A0 =A0 =A0 =A0 IndexReader reader =3D IndexReader.open(dir, true)=
;
>> > > > =A0 =A0 =A0 =A0 IndexSearcher searcher =3D new IndexSearcher(reade=
r);
>> > > > =A0 =A0 =A0 =A0 searchers.put(index, searcher);
>> > > > =A0 =A0 }
>> > > >
>> > > > =A0 =A0 public static IndexSearcher get(IndexName index, ...) {
>> > > > =A0 =A0 =A0 =A0 // sync... etc
>> > > > =A0 =A0 =A0 =A0 return searchers.get(index);
>> > > > =A0 =A0 }
>> > > >
>> > > > =A0 =A0 // After an indexing service appends the existing FS Direc=
tory,
>> this
>> > > reloads it.
>> > > > =A0 =A0 public static void reload(IndexName index, ...) {
>> > > > =A0 =A0 =A0 =A0 // sync... etc
>> > > > =A0 =A0 =A0 =A0 IndexSearcher searcher =3D searchers.get(index);
>> > > > =A0 =A0 =A0 =A0 FSDirectory fsDirectory =3D
>> > > FSDirectory.getDirectory(directoryPath);
>> > > > =A0 =A0 =A0 =A0 Directory ramDirectory =3D
>> > > searcher.getIndexReader().directory();
>> > > > =A0 =A0 =A0 =A0 Directory.copy(fsDirectory, ramDirectory, false);
>> > > > =A0 =A0 }
>> > > >
>> > > > I've tries some theme and variations on this with the same issue.
>> > > >
>> > > > TIA!
>> > > >
>> > > > gd
>> > > >
>> > > >
>> > > > ------------------------------------------------------------------=
--
>> -
>> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > > >
>> > > >
>> > > >
>> > >
>> > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 17:37:21 2009
Return-Path: <java-user-return-40703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11084 invoked from network); 10 Jun 2009 17:37:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 17:37:21 -0000
Received: (qmail 8884 invoked by uid 500); 10 Jun 2009 17:30:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8864 invoked by uid 500); 10 Jun 2009 17:30:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8854 invoked by uid 99); 10 Jun 2009 17:30:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 17:30:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 17:30:29 +0000
X-ASG-Debug-ID: 1244655007-0a4c00670000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 0060881C84
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 10:30:07 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id eTFk5exnmmtpaOeY for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 10:30:07 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Lucene memory usage
Subject: RE: Lucene memory usage
Date: Wed, 10 Jun 2009 10:30:07 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAE5@rw-ex2003.BROADVISION.COM>
In-Reply-To: <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene memory usage
Thread-Index: AcnpyLRJnXUgZZaYQsGkxJR/IZ4s9gAKBupw
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1244655008
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Does this issue has anything to do with the line:

> TopScoreDocCollector collector =3D new TopScoreDocCollector(100000);

if we do:

> TopScoreDocCollector collector =3D new TopScoreDocCollector(2);

instead (only see top two documents), could memory usage be less?

Best regards, Lisheng

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]
Sent: Wednesday, June 10, 2009 5:40 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene memory usage


This (very large number of unique terms) is a problem for Lucene =
currently.

There are some simple improvements we could make to the terms dict
format to not require so much RAM per term in the terms index...
LUCENE-1458 (flexible indexing) has these improvements, but
unfortunately tied in w/ lots of other changes.  Maybe we should break
out a separate issue for this... this'd be a great contained
improvement, if anyone out there has "the itch" :)

One simple workaround is to call IndexReader.setTermIndexInterval
immediately after opening the reader; this simply loads fewer terms in
the index, using far less RAM, but at the expense of somewhat slower
searching.

Also: you should peek at your index, eg using Luke, to understand why
you have so many terms.  It could be legitimate (indexing a massive
catalog with eg part numbers), or, it could be your document filtering
/ analyzer are accidentally producing garbage terms.

Mike

On Wed, Jun 10, 2009 at 8:23 AM, Benedikt Boss<nanoc@web.de> wrote:
> Hej hej,
>
> i have a question regarding lucenes memory usage
> when launching a query. When i execute my query
> lucene eats up over 1gig of heap-memory even
> when my result-set is only a single hit. I
> found out that this is due to the "ensureIndexIsRead()"
> method-call in the "TermInfosReader" class, which
> iterates over all Terms found in the index and saves
> them (including all value-strings) in a Term-Array.
> Is it possible to not read all that stuff
> into memory at all?
>
> Im doing the query like in the following pseudo-code:
> =
------------------------------------------------------------------------
>
> TopScoreDocCollector collector =3D new TopScoreDocCollector(100000);
>
> QueryParser =A0 parser=3D new QueryParser(field, new =
WhitespaceAnalyzer() );
> Directory =A0 =A0 fsDir =3D new FSDirectory(indexDir, null);
> IndexSearcher is =A0 =A0=3D new IndexSearcher(fsdir);
>
> Query =A0 =A0 =A0 =A0 query =3D parser.parse(q);
>
> is.search(query, collector);
> ScoreDoc[] hits =3D collector.topDocs();
>
> ....... < iterate over hits and print results >
>
>
> Thanks in advance
> Benedikt
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 18:01:46 2009
Return-Path: <java-user-return-40704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23385 invoked from network); 10 Jun 2009 18:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 18:01:43 -0000
Received: (qmail 81333 invoked by uid 500); 10 Jun 2009 17:50:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81258 invoked by uid 500); 10 Jun 2009 17:50:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81103 invoked by uid 99); 10 Jun 2009 17:49:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 17:49:47 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 17:49:36 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 898C845E813
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 19:49:14 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id PN3zWAC4rsbN for <java-user@lucene.apache.org>;
	Wed, 10 Jun 2009 19:49:04 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 51CD545E818
	for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 19:49:04 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl> <55B054A51CE0407DA1B9C7CACF25C67D@VEGA> <07567F80-F847-4434-B645-3224A07A3881@lucasmail.org>
Subject: RE: Migrating from Hit/Hits to TopDocs/TopDocCollector
Date: Wed, 10 Jun 2009 19:49:02 +0200
Message-ID: <007BD53B34F541EEBE3D6B1570C4E430@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
In-Reply-To: <07567F80-F847-4434-B645-3224A07A3881@lucasmail.org>
Thread-Index: Acnp39UpG4lBIdTBQxOTHMAKefZUsgAEtCZw
X-Virus-Checked: Checked by ClamAV on apache.org

That looks good, but contains the inner search loop (looking up the stored
fields from within the main search loop, which is the hit collector). For
few results this is ok, but if you are collecting thousands of hits from a
very large index that does not fit into memory, the collect gets slow
because of a lot of disk seeking (even when you filter out some fields with
fieldselector, the blocks are read from HDD).

To optimize, store the filename not as stored field, but as a non-tokenized,
indexed term. You can then use

arr = FieldCache.getDefault().getStrings(searcher.getIndexReader(),"FILE");

The returned array contains one entry per document id. Inside the search
loop, just use arr[docID] to get the file name. Please note, on large
indexes the initial field cache loading could take some time.

In Lucene 2.9 this gets better with the new Collectors, that directly work
on segments, if you want to use 2.9 just ask, how the same can be achieved
there. The new collector can there be optimized to get the FieldCaches for
each segment inside Collector.setNextReader()

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Paul J. Lucas [mailto:paul@lucasmail.org]
> Sent: Wednesday, June 10, 2009 5:26 PM
> To: java-user@lucene.apache.org
> Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
> 
> On Jun 10, 2009, at 3:17 AM, Uwe Schindler wrote:
> 
> > A HitCollector is the correct way to do this (especially because the
> > order of hits is mostly not interesting when retrieving all hits).
> 
> OK, here's what I came up with:
> 
>      Term t = /* ... */
>      Collection<File> files = new LinkedList<File>();
>      FieldSelector fieldSelector = new FieldSelector() {
>          public FieldSelectorResult accept( String fieldName ) {
>              if ( fieldName.equals( "FILE" ) )
>                  return FieldSelectorResult.LOAD_AND_BREAK;
>              return FieldSelectorResult.NO_LOAD;
>          }
>      };
>      HitCollector hitCollector = new HitCollector() {
>          public void collect( int docID, float score ) {
>              try {
>                  Document doc = searcher.doc( docID, fieldSelector );
>                  files.add( new File( doc.get( "FILE" ) ) );
>              }
>              catch ( Exception e ) {
>                  // ignore
>              }
>          }
>      };
>      searcher.search( new TermQuery( t ), hitCollector );
> 
> How's that?
> 
> - Paul
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 18:06:11 2009
Return-Path: <java-user-return-40705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24895 invoked from network); 10 Jun 2009 18:06:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 18:06:11 -0000
Received: (qmail 84920 invoked by uid 500); 10 Jun 2009 17:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84902 invoked by uid 500); 10 Jun 2009 17:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84892 invoked by uid 99); 10 Jun 2009 17:53:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 17:53:29 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.221.202] (HELO mail-qy0-f202.google.com) (209.85.221.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 17:53:20 +0000
Received: by qyk40 with SMTP id 40so558308qyk.29
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 10:52:58 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.140.13 with SMTP id n13mr3111396ybd.261.1244656377892; 
	Wed, 10 Jun 2009 10:52:57 -0700 (PDT)
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAE5@rw-ex2003.BROADVISION.COM>
References: <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
	 <ED081AC9AEEE0248BBCCDE9989AAE3FC0151FAE5@rw-ex2003.BROADVISION.COM>
Date: Wed, 10 Jun 2009 13:52:57 -0400
Message-ID: <9ac0c6aa0906101052h4d94b531obddae0f2e5e4df70@mail.gmail.com>
Subject: Re: Lucene memory usage
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Asking for top 100K docs will certainly consume more RAM than asking
for top 2, but much less than 1 GB.

More like maybe an added ~2-3 MB or so.

Mike

On Wed, Jun 10, 2009 at 1:30 PM, Zhang,
Lisheng<Lisheng.Zhang@broadvision.com> wrote:
> Hi,
>
> Does this issue has anything to do with the line:
>
>> TopScoreDocCollector collector =3D new TopScoreDocCollector(100000);
>
> if we do:
>
>> TopScoreDocCollector collector =3D new TopScoreDocCollector(2);
>
> instead (only see top two documents), could memory usage be less?
>
> Best regards, Lisheng
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Wednesday, June 10, 2009 5:40 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene memory usage
>
>
> This (very large number of unique terms) is a problem for Lucene currentl=
y.
>
> There are some simple improvements we could make to the terms dict
> format to not require so much RAM per term in the terms index...
> LUCENE-1458 (flexible indexing) has these improvements, but
> unfortunately tied in w/ lots of other changes. =A0Maybe we should break
> out a separate issue for this... this'd be a great contained
> improvement, if anyone out there has "the itch" :)
>
> One simple workaround is to call IndexReader.setTermIndexInterval
> immediately after opening the reader; this simply loads fewer terms in
> the index, using far less RAM, but at the expense of somewhat slower
> searching.
>
> Also: you should peek at your index, eg using Luke, to understand why
> you have so many terms. =A0It could be legitimate (indexing a massive
> catalog with eg part numbers), or, it could be your document filtering
> / analyzer are accidentally producing garbage terms.
>
> Mike
>
> On Wed, Jun 10, 2009 at 8:23 AM, Benedikt Boss<nanoc@web.de> wrote:
>> Hej hej,
>>
>> i have a question regarding lucenes memory usage
>> when launching a query. When i execute my query
>> lucene eats up over 1gig of heap-memory even
>> when my result-set is only a single hit. I
>> found out that this is due to the "ensureIndexIsRead()"
>> method-call in the "TermInfosReader" class, which
>> iterates over all Terms found in the index and saves
>> them (including all value-strings) in a Term-Array.
>> Is it possible to not read all that stuff
>> into memory at all?
>>
>> Im doing the query like in the following pseudo-code:
>> ------------------------------------------------------------------------
>>
>> TopScoreDocCollector collector =3D new TopScoreDocCollector(100000);
>>
>> QueryParser =A0 parser=3D new QueryParser(field, new WhitespaceAnalyzer(=
) );
>> Directory =A0 =A0 fsDir =3D new FSDirectory(indexDir, null);
>> IndexSearcher is =A0 =A0=3D new IndexSearcher(fsdir);
>>
>> Query =A0 =A0 =A0 =A0 query =3D parser.parse(q);
>>
>> is.search(query, collector);
>> ScoreDoc[] hits =3D collector.topDocs();
>>
>> ....... < iterate over hits and print results >
>>
>>
>> Thanks in advance
>> Benedikt
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 18:06:47 2009
Return-Path: <java-user-return-40706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27491 invoked from network); 10 Jun 2009 18:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 18:06:47 -0000
Received: (qmail 87674 invoked by uid 500); 10 Jun 2009 18:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87245 invoked by uid 500); 10 Jun 2009 18:06:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86729 invoked by uid 99); 10 Jun 2009 18:03:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 18:03:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 18:03:15 +0000
Received: by qw-out-2122.google.com with SMTP id 5so608261qwd.53
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 11:02:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=PXyk9xS22ZEu8pUQk1AWHzQjruVflgenGlPMLSyOSio=;
        b=fWCaIxJTqpv4zWOvWT0wZzi6w3KQT06LmozqEvla9F5FiMmki5whgb3su2KWDOy4sZ
         PEWjTbhtG/V+SXG4HbGuhZHSZB6BweXk7aj+TqLJfv6OKXVgRYeI4WCVs+XQcyKmM7J9
         hmJHhlUDj66S1mvrdQlnaooc5XMhvbWKYJDZQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lvnfSn4Wq8XLRMOnFMd+U9n8ZcmXLLr6n46bajqpkTf8RQxCpRt6N35QZCKzUxb8YX
         RdHLjDCgXS693g5+k078gxWDMeHEuDd7mGSxPNgStly9Z47B7TNv/LLF1woZVlfvRO9I
         k7b2EJmCBP7jd2nhZVfQlQLbetjAvp1nnT9kY=
MIME-Version: 1.0
Received: by 10.151.141.15 with SMTP id t15mr3085758ybn.309.1244656974063; 
	Wed, 10 Jun 2009 11:02:54 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
References: <20090610122347.GB5557@kopfschmerz.zuhause>
	 <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
Date: Wed, 10 Jun 2009 11:02:54 -0700
Message-ID: <85d3c3b60906101102v49cc3cc4uedbf473da4350c35@mail.gmail.com>
Subject: Re: Lucene memory usage
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750d968ce6813046c0248ee
X-Virus-Checked: Checked by ClamAV on apache.org

--00151750d968ce6813046c0248ee
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

> LUCENE-1458 (flexible indexing) has these improvements,

Mike, can you explain how it's different?  I looked through the code once
but yeah, it's in with a lot of other changes.

On Wed, Jun 10, 2009 at 5:40 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> This (very large number of unique terms) is a problem for Lucene currently.
>
> There are some simple improvements we could make to the terms dict
> format to not require so much RAM per term in the terms index...
> LUCENE-1458 (flexible indexing) has these improvements, but
> unfortunately tied in w/ lots of other changes.  Maybe we should break
> out a separate issue for this... this'd be a great contained
> improvement, if anyone out there has "the itch" :)
>
> One simple workaround is to call IndexReader.setTermIndexInterval
> immediately after opening the reader; this simply loads fewer terms in
> the index, using far less RAM, but at the expense of somewhat slower
> searching.
>
> Also: you should peek at your index, eg using Luke, to understand why
> you have so many terms.  It could be legitimate (indexing a massive
> catalog with eg part numbers), or, it could be your document filtering
> / analyzer are accidentally producing garbage terms.
>
> Mike
>
> On Wed, Jun 10, 2009 at 8:23 AM, Benedikt Boss<nanoc@web.de> wrote:
> > Hej hej,
> >
> > i have a question regarding lucenes memory usage
> > when launching a query. When i execute my query
> > lucene eats up over 1gig of heap-memory even
> > when my result-set is only a single hit. I
> > found out that this is due to the "ensureIndexIsRead()"
> > method-call in the "TermInfosReader" class, which
> > iterates over all Terms found in the index and saves
> > them (including all value-strings) in a Term-Array.
> > Is it possible to not read all that stuff
> > into memory at all?
> >
> > Im doing the query like in the following pseudo-code:
> > ------------------------------------------------------------------------
> >
> > TopScoreDocCollector collector = new TopScoreDocCollector(100000);
> >
> > QueryParser   parser= new QueryParser(field, new WhitespaceAnalyzer() );
> > Directory     fsDir = new FSDirectory(indexDir, null);
> > IndexSearcher is    = new IndexSearcher(fsdir);
> >
> > Query         query = parser.parse(q);
> >
> > is.search(query, collector);
> > ScoreDoc[] hits = collector.topDocs();
> >
> > ....... < iterate over hits and print results >
> >
> >
> > Thanks in advance
> > Benedikt
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00151750d968ce6813046c0248ee--

From java-user-return-40707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 18:27:06 2009
Return-Path: <java-user-return-40707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51681 invoked from network); 10 Jun 2009 18:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 18:27:06 -0000
Received: (qmail 44150 invoked by uid 500); 10 Jun 2009 18:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44072 invoked by uid 500); 10 Jun 2009 18:27:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44062 invoked by uid 99); 10 Jun 2009 18:27:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 18:27:16 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.204] (HELO mail-yx0-f204.google.com) (209.85.210.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 18:27:07 +0000
Received: by yxe42 with SMTP id 42so34478yxe.29
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 11:26:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.122.9 with SMTP id z9mr3194871ybm.188.1244658406095; Wed, 
	10 Jun 2009 11:26:46 -0700 (PDT)
In-Reply-To: <85d3c3b60906101102v49cc3cc4uedbf473da4350c35@mail.gmail.com>
References: <20090610122347.GB5557@kopfschmerz.zuhause>
	 <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
	 <85d3c3b60906101102v49cc3cc4uedbf473da4350c35@mail.gmail.com>
Date: Wed, 10 Jun 2009 14:26:46 -0400
Message-ID: <9ac0c6aa0906101126m5afc415bu4575cd2bd7caadff@mail.gmail.com>
Subject: Re: Lucene memory usage
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Roughly, the current approach for the default terms dict codec in
LUCENE-1458 is:

  * Create a separate class per-field (the String field in each Term
    is redundant).  This is a big change over Lucene today....

  * That class has String[] indexText and long[] indexPointer, each
    length =3D the number of index terms.  No TermInfo instance nor Term
    instance are used.

  * Modify the tis format to also store its data by field

  * Modify the tis format so that at a seek point (ie an indexed
    term), absolute values are written for freq/prox pointer, but
    continue to delta-code in between indexed terms.  EG this is how
    video codecs work (every so often they write a "key frame" which
    you can seek to & immediately decode w/ no prior context).

  * tii then just stores text/long (delta coded) for all indexed
    terms, and is slurped into the arrays on init.

This is a sizable RAM savings over what's done now because you save 2
objects, 3 pointers, 2 longs, 2 ints (I think), per indexed term.

Mike

On Wed, Jun 10, 2009 at 2:02 PM, Jason
Rutherglen<jason.rutherglen@gmail.com> wrote:
>> LUCENE-1458 (flexible indexing) has these improvements,
>
> Mike, can you explain how it's different? =A0I looked through the code on=
ce
> but yeah, it's in with a lot of other changes.
>
> On Wed, Jun 10, 2009 at 5:40 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> This (very large number of unique terms) is a problem for Lucene current=
ly.
>>
>> There are some simple improvements we could make to the terms dict
>> format to not require so much RAM per term in the terms index...
>> LUCENE-1458 (flexible indexing) has these improvements, but
>> unfortunately tied in w/ lots of other changes. =A0Maybe we should break
>> out a separate issue for this... this'd be a great contained
>> improvement, if anyone out there has "the itch" :)
>>
>> One simple workaround is to call IndexReader.setTermIndexInterval
>> immediately after opening the reader; this simply loads fewer terms in
>> the index, using far less RAM, but at the expense of somewhat slower
>> searching.
>>
>> Also: you should peek at your index, eg using Luke, to understand why
>> you have so many terms. =A0It could be legitimate (indexing a massive
>> catalog with eg part numbers), or, it could be your document filtering
>> / analyzer are accidentally producing garbage terms.
>>
>> Mike
>>
>> On Wed, Jun 10, 2009 at 8:23 AM, Benedikt Boss<nanoc@web.de> wrote:
>> > Hej hej,
>> >
>> > i have a question regarding lucenes memory usage
>> > when launching a query. When i execute my query
>> > lucene eats up over 1gig of heap-memory even
>> > when my result-set is only a single hit. I
>> > found out that this is due to the "ensureIndexIsRead()"
>> > method-call in the "TermInfosReader" class, which
>> > iterates over all Terms found in the index and saves
>> > them (including all value-strings) in a Term-Array.
>> > Is it possible to not read all that stuff
>> > into memory at all?
>> >
>> > Im doing the query like in the following pseudo-code:
>> > ----------------------------------------------------------------------=
--
>> >
>> > TopScoreDocCollector collector =3D new TopScoreDocCollector(100000);
>> >
>> > QueryParser =A0 parser=3D new QueryParser(field, new WhitespaceAnalyze=
r() );
>> > Directory =A0 =A0 fsDir =3D new FSDirectory(indexDir, null);
>> > IndexSearcher is =A0 =A0=3D new IndexSearcher(fsdir);
>> >
>> > Query =A0 =A0 =A0 =A0 query =3D parser.parse(q);
>> >
>> > is.search(query, collector);
>> > ScoreDoc[] hits =3D collector.topDocs();
>> >
>> > ....... < iterate over hits and print results >
>> >
>> >
>> > Thanks in advance
>> > Benedikt
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 19:54:34 2009
Return-Path: <java-user-return-40708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92261 invoked from network); 10 Jun 2009 19:54:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 19:54:34 -0000
Received: (qmail 74059 invoked by uid 500); 10 Jun 2009 19:54:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73970 invoked by uid 500); 10 Jun 2009 19:54:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73960 invoked by uid 99); 10 Jun 2009 19:54:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 19:54:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 19:54:31 +0000
Received: by ewy27 with SMTP id 27so1203200ewy.5
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 12:54:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=tcNat4RQg9IAG0x8FsPHsrgJ0gSsdkkYPLgjW9xWtTA=;
        b=BBekngInPRLOSYU/HiSMpF0PaE14/u03CwEMwJ1VLRVuyZie2xYxt9LmZ/qW8pnnaF
         j8EaR4J4zv47wxl0cd8TczMD80syg9us1QO06PQaiN21yfL1/xM/vOUNwcOPh1GV8Eta
         a8FiTY32NqTstpt9Am+M/FUmROtt6O7D+yu3I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=ONr5nwFxBd5cHZN1RLNyewkqdzzTeB4FZGQ8o4i/nrkFbsAvk9Je17mw20KabptIz0
         u5zLygSlJm1NXbRyxavMO6NkI35566a7K9sNzz3IBSIPEaMGE2t9YOEIOO54kjB/fuIL
         lgTHEdc+5CyV/oFhovKiwgZGjIuf5GFano888=
Received: by 10.210.34.5 with SMTP id h5mr4551492ebh.5.1244663650811;
        Wed, 10 Jun 2009 12:54:10 -0700 (PDT)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 10sm79433eyz.51.2009.06.10.12.54.09
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 10 Jun 2009 12:54:09 -0700 (PDT)
Message-ID: <4A300F60.1020207@gmail.com>
Date: Wed, 10 Jun 2009 15:54:08 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene 2.9 Release
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
>So... how about we try to wrap up 2.9/3.0 and ship with what we have,
>now? It's been 8 months since 2.4.0 was released, and 2.9's got plenty
>of new stuff, and we are all itching to remove these deprecated APIs,
>switch to Java 1.5, etc.
>
>We should try to finish the issues that are open and underway... but I
>think many of the issues marked 2.9 now, especially those not even
>started, should not in fact block 2.9.
>
>Mike



We would all, I think, like Lucene 2.9 to release soon.

Unfortunately, there are 56 open issues assigned to 2.9. They won't all 
likely make it.

We have got to start pruning down the list.

If you are not going to be able to get to / finish an issue in a very 
near time frame, could you help us all out and move the issue to 3.0?

Trying to finish any issues that are close would also be great 
obviously, but as a beginning, if we could just get a better handle (eg 
less issues to consider)
on what we have to finish off, that would be great.

I'm going to go though a bit and see if their are any obvious candidates 
to push off soon.

I suppose, if there is something that you really want to be sure is in 
2.9, and its not likely to be finished shortly, you should probably 
speak up too.

-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 20:14:19 2009
Return-Path: <java-user-return-40709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98979 invoked from network); 10 Jun 2009 20:14:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 20:14:19 -0000
Received: (qmail 18349 invoked by uid 500); 10 Jun 2009 20:14:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18234 invoked by uid 500); 10 Jun 2009 20:14:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18216 invoked by uid 99); 10 Jun 2009 20:14:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 20:14:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 20:14:16 +0000
Received: by gxk11 with SMTP id 11so1361527gxk.5
        for <multiple recipients>; Wed, 10 Jun 2009 13:13:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=jIuD5XDY5yhAcPtsAk9xbupnfkrTjeTpavsvN0RSK94=;
        b=itlI+MOWwA7nxdUGnR0vg5pS6l4CkSUpdvo3Rtnhjx6pbmyI9e+dtvnJ1FDVq0bLbW
         WsxlrBY9Pmake7Wp1Cu4K5PDugXyzx+0f/8WFCE51MpI3i26sC3tZquj13NX6zm1tKoc
         eVxV5rGMi0WiZWA4/AD3tDGLGfIj3EHyVCwWw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wRM1u4QEHgHNlekQG7zsXQ6sbqbHTzdeRYzHuU4atY+AQq7oaizzZOGx8CAhcHJmeX
         gLcD5CqB0VskiNxIPQRyIGfH+0miLZB4G5BsieaMbDLX2p/16rkvLYkOewv3IcZp/Y5+
         CPMHsvK56HOkrXSD/CcIKaHVkX18G4KNPxf8o=
MIME-Version: 1.0
Received: by 10.151.141.15 with SMTP id t15mr3311717ybn.309.1244664835553; 
	Wed, 10 Jun 2009 13:13:55 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906101126m5afc415bu4575cd2bd7caadff@mail.gmail.com>
References: <20090610122347.GB5557@kopfschmerz.zuhause>
	 <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
	 <85d3c3b60906101102v49cc3cc4uedbf473da4350c35@mail.gmail.com>
	 <9ac0c6aa0906101126m5afc415bu4575cd2bd7caadff@mail.gmail.com>
Date: Wed, 10 Jun 2009 13:13:55 -0700
Message-ID: <85d3c3b60906101313t77d8b16atc4a2644ecd158e9@mail.gmail.com>
Subject: Re: Lucene memory usage
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750d9686376d9046c041d28
X-Virus-Checked: Checked by ClamAV on apache.org

--00151750d9686376d9046c041d28
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Great! If I understand correctly it looks like RAM savings? Will
there be an improvement in lookup speed? (We're using binary
search here?).

Is there a precedence in database systems for what was mentioned
about placing the term dict, delDocs, and filters onto disk and
reading them from there (with the IO cache taking care of
keeping the data in RAM)? (Would there be a future advantage to
this approach when SSDs are more prevalent?) It seems like we
could have some generalized pluggable system where one could try
out this or the current heap approach, and benchmark.

Given our continued inability to properly measure Java RAM
usage, this approach may be a good one for Lucene? Where heap
based LRU caches are a shot in the dark when it comes to mem
size, as we never really know how much they're using.

Once we generalize delDocs, filters, and field caches
(LUCENE-831?), then perhaps CSF is a good place to test out this
approach? We could have a generic class that handles the
underlying IO that simply returns values based on a position or
iteration.

On Wed, Jun 10, 2009 at 11:26 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Roughly, the current approach for the default terms dict codec in
> LUCENE-1458 is:
>
>  * Create a separate class per-field (the String field in each Term
>    is redundant).  This is a big change over Lucene today....
>
>  * That class has String[] indexText and long[] indexPointer, each
>    length = the number of index terms.  No TermInfo instance nor Term
>    instance are used.
>
>  * Modify the tis format to also store its data by field
>
>  * Modify the tis format so that at a seek point (ie an indexed
>    term), absolute values are written for freq/prox pointer, but
>    continue to delta-code in between indexed terms.  EG this is how
>    video codecs work (every so often they write a "key frame" which
>    you can seek to & immediately decode w/ no prior context).
>
>  * tii then just stores text/long (delta coded) for all indexed
>    terms, and is slurped into the arrays on init.
>
> This is a sizable RAM savings over what's done now because you save 2
> objects, 3 pointers, 2 longs, 2 ints (I think), per indexed term.
>
> Mike
>
> On Wed, Jun 10, 2009 at 2:02 PM, Jason
> Rutherglen<jason.rutherglen@gmail.com> wrote:
> >> LUCENE-1458 (flexible indexing) has these improvements,
> >
> > Mike, can you explain how it's different?  I looked through the code once
> > but yeah, it's in with a lot of other changes.
> >
> > On Wed, Jun 10, 2009 at 5:40 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> This (very large number of unique terms) is a problem for Lucene
> currently.
> >>
> >> There are some simple improvements we could make to the terms dict
> >> format to not require so much RAM per term in the terms index...
> >> LUCENE-1458 (flexible indexing) has these improvements, but
> >> unfortunately tied in w/ lots of other changes.  Maybe we should break
> >> out a separate issue for this... this'd be a great contained
> >> improvement, if anyone out there has "the itch" :)
> >>
> >> One simple workaround is to call IndexReader.setTermIndexInterval
> >> immediately after opening the reader; this simply loads fewer terms in
> >> the index, using far less RAM, but at the expense of somewhat slower
> >> searching.
> >>
> >> Also: you should peek at your index, eg using Luke, to understand why
> >> you have so many terms.  It could be legitimate (indexing a massive
> >> catalog with eg part numbers), or, it could be your document filtering
> >> / analyzer are accidentally producing garbage terms.
> >>
> >> Mike
> >>
> >> On Wed, Jun 10, 2009 at 8:23 AM, Benedikt Boss<nanoc@web.de> wrote:
> >> > Hej hej,
> >> >
> >> > i have a question regarding lucenes memory usage
> >> > when launching a query. When i execute my query
> >> > lucene eats up over 1gig of heap-memory even
> >> > when my result-set is only a single hit. I
> >> > found out that this is due to the "ensureIndexIsRead()"
> >> > method-call in the "TermInfosReader" class, which
> >> > iterates over all Terms found in the index and saves
> >> > them (including all value-strings) in a Term-Array.
> >> > Is it possible to not read all that stuff
> >> > into memory at all?
> >> >
> >> > Im doing the query like in the following pseudo-code:
> >> >
> ------------------------------------------------------------------------
> >> >
> >> > TopScoreDocCollector collector = new TopScoreDocCollector(100000);
> >> >
> >> > QueryParser   parser= new QueryParser(field, new WhitespaceAnalyzer()
> );
> >> > Directory     fsDir = new FSDirectory(indexDir, null);
> >> > IndexSearcher is    = new IndexSearcher(fsdir);
> >> >
> >> > Query         query = parser.parse(q);
> >> >
> >> > is.search(query, collector);
> >> > ScoreDoc[] hits = collector.topDocs();
> >> >
> >> > ....... < iterate over hits and print results >
> >> >
> >> >
> >> > Thanks in advance
> >> > Benedikt
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00151750d9686376d9046c041d28--

From java-user-return-40710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 23:44:32 2009
Return-Path: <java-user-return-40710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81291 invoked from network); 10 Jun 2009 23:44:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 23:44:32 -0000
Received: (qmail 91138 invoked by uid 500); 10 Jun 2009 23:44:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91086 invoked by uid 500); 10 Jun 2009 23:44:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91076 invoked by uid 99); 10 Jun 2009 23:44:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 23:44:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=Aem79z=CF=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.57 as permitted sender)
Received: from [65.254.253.57] (HELO mailout07.yourhostingaccount.com) (65.254.253.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 23:44:32 +0000
Received: from mailscan20.yourhostingaccount.com ([10.1.15.20] helo=mailscan20.yourhostingaccount.com)
	by mailout07.yourhostingaccount.com with esmtp (Exim)
	id 1MEXSl-0002HI-OP
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 19:44:11 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan20.yourhostingaccount.com with esmtp (Exim)
	id 1MEXSl-0003T0-ID
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 19:44:11 -0400
Received: from authsmtp01.yourhostingaccount.com ([10.1.18.1])
	by impout02.yourhostingaccount.com with NO UCE
	id 2PkA1c00301P85W0000000; Wed, 10 Jun 2009 19:44:10 -0400
X-EN-OrigOutIP: 10.1.18.1
X-EN-IMPSID: 2PkA1c00301P85W0000000
Received: from adsl-76-199-196-251.dsl.pltn13.sbcglobal.net ([76.199.196.251] helo=[10.0.1.203])
	by authsmtp01.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1MEXSk-0008Sc-P1
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 19:44:11 -0400
Message-Id: <80ED10A1-E4DD-4A3F-B708-B2BC1D1C09ED@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <007BD53B34F541EEBE3D6B1570C4E430@VEGA>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
Date: Wed, 10 Jun 2009 16:44:07 -0700
References: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl> <55B054A51CE0407DA1B9C7CACF25C67D@VEGA> <07567F80-F847-4434-B645-3224A07A3881@lucasmail.org> <007BD53B34F541EEBE3D6B1570C4E430@VEGA>
X-Mailer: Apple Mail (2.935.3)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.199.196.251
X-EN-OrigHost: adsl-76-199-196-251.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

On Jun 10, 2009, at 10:49 AM, Uwe Schindler wrote:

> To optimize, store the filename not as stored field, but as a non- 
> tokenized,
> indexed term.

How do you do that?

- Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 10 23:58:36 2009
Return-Path: <java-user-return-40711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85729 invoked from network); 10 Jun 2009 23:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jun 2009 23:58:36 -0000
Received: (qmail 5059 invoked by uid 500); 10 Jun 2009 23:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4988 invoked by uid 500); 10 Jun 2009 23:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4978 invoked by uid 99); 10 Jun 2009 23:58:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 23:58:45 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.216.176] (HELO mail-px0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jun 2009 23:58:35 +0000
Received: by pxi6 with SMTP id 6so1196531pxi.29
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 16:58:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.114.111.1 with SMTP id j1mr2972295wac.216.1244678292516; Wed, 
	10 Jun 2009 16:58:12 -0700 (PDT)
In-Reply-To: <55B054A51CE0407DA1B9C7CACF25C67D@VEGA>
References: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl>
	 <55B054A51CE0407DA1B9C7CACF25C67D@VEGA>
Date: Thu, 11 Jun 2009 09:58:12 +1000
Message-ID: <bb132a4a0906101658x60d291e8p3dfb1d0412d50e97@mail.gmail.com>
Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jun 10, 2009 at 20:17, Uwe Schindler<uwe@thetaphi.de> wrote:
> You are right, you can, but if you just want to retrieve all hits, this is
> ineffective. A HitCollector is the correct way to do this (especially
> because the order of hits is mostly not interesting when retrieving all
> hits). Hits and TopDocs are intended for paged results lists.

As a relevant note, what I have noticed about using HitCollector alone
is that the code effectively loses control of the loop (you get the
same problem with any API where you hand it a callback and let it do
all the work, e.g. SAX.)  The callback is good if you have a
relatively small number of results and/or a relatively fast operation
to perform with each one, but if the process as a whole takes a long
time and the user wants to be able to cancel it, then it isn't great.
It also isn't great if you want to wrap an Iterator or some other
existing API around it.

Our workaround for this is a HitCollector which populates a BitSet
(relatively fast), and then do the slow operation when iterating over
the BitSet.  This also has drawbacks in terms of memory usage, but
that doesn't become a huge problem until you have a very large number
of documents in the index.

It's a shame we don't have an inverted kind of HitCollector where we
can say "give me the next hit", so that we can get the best of both
worlds (like what StAX gives us in the XML world.)

Daniel

-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 00:02:43 2009
Return-Path: <java-user-return-40712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86901 invoked from network); 11 Jun 2009 00:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 00:02:43 -0000
Received: (qmail 9408 invoked by uid 500); 11 Jun 2009 00:02:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9338 invoked by uid 500); 11 Jun 2009 00:02:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9328 invoked by uid 99); 11 Jun 2009 00:02:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 00:02:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 00:02:42 +0000
Received: by ewy27 with SMTP id 27so1374664ewy.5
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 17:02:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=RllIbJqY1EtpCtqzCSJ+ZRk1FUZ0epjdiy6LVkDoEXs=;
        b=gstnJaS2NXdIXxpR57mmIsNDUDJgkZPkiEBL1Jcfn1KT3lxg+pZGwstPDtiB5fInHh
         VBczdq44uE5OghG31NgCEPryn1Lek1W8sRA2+mKreJFCWsygzNZSbkVYkq8M2JCXQHv7
         od4CAj5+ReeuFHAFjvzKRwYw335bJe9WWRGy4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=PAIr6x57katN+b39SSFuZwJXnhjbT46EF02wL1mg0Njsaof8nzv6+D4bwsrxe2BY0S
         KvYhfJGK1B6XuIqTNYxoisY90ETVdLEKNbvtyG50fBAGNtLqlir7eYWBeLeuLRf+40MI
         LQGuhKp4kQd+5g/GYxg0ljOodKzZ1sQaBBlk8=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.19.130 with SMTP id n2mr719962wen.151.1244678542199; Wed, 
	10 Jun 2009 17:02:22 -0700 (PDT)
In-Reply-To: <bb132a4a0906101658x60d291e8p3dfb1d0412d50e97@mail.gmail.com>
References: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl>
	 <55B054A51CE0407DA1B9C7CACF25C67D@VEGA>
	 <bb132a4a0906101658x60d291e8p3dfb1d0412d50e97@mail.gmail.com>
Date: Wed, 10 Jun 2009 20:02:22 -0400
X-Google-Sender-Auth: f37e7bc3a6cc1ede
Message-ID: <c68e39170906101702v68dac123l6c2de6c50c40b18b@mail.gmail.com>
Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jun 10, 2009 at 7:58 PM, Daniel Noll <daniel@nuix.com> wrote:
> It's a shame we don't have an inverted kind of HitCollector where we
> can say "give me the next hit", so that we can get the best of both
> worlds (like what StAX gives us in the XML world.)

You can get a scorer and call next() yourself.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 00:18:26 2009
Return-Path: <java-user-return-40713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91598 invoked from network); 11 Jun 2009 00:18:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 00:18:26 -0000
Received: (qmail 24863 invoked by uid 500); 11 Jun 2009 00:18:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24817 invoked by uid 500); 11 Jun 2009 00:18:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24807 invoked by uid 99); 11 Jun 2009 00:18:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 00:18:34 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.216.176] (HELO mail-px0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 00:18:24 +0000
Received: by pxi6 with SMTP id 6so1204791pxi.29
        for <java-user@lucene.apache.org>; Wed, 10 Jun 2009 17:18:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.114.108.10 with SMTP id g10mr2957002wac.78.1244679483287; Wed, 
	10 Jun 2009 17:18:03 -0700 (PDT)
In-Reply-To: <39f63ad30906050431j5e78e4c5v25dba006c236089f@mail.gmail.com>
References: <39f63ad30906050431j5e78e4c5v25dba006c236089f@mail.gmail.com>
Date: Thu, 11 Jun 2009 10:18:03 +1000
Message-ID: <bb132a4a0906101718u2ee3982j8a6f117ea0514c5d@mail.gmail.com>
Subject: Re: Phrase search
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jun 5, 2009 at 21:31, Abhi<abhirama.bhat@gmail.com> wrote:
> Say I have indexed the following strings:
>
> 1. "cool gaming laptop"
> 2. "cool gaming lappy"
> 3. "gaming laptop cool"
>
> Now when I search with a query say "cool gaming computer", I want string 1
> and 2 to appear on top (where search terms are closer to each other)
> followed by 3.
>
> I can use a Term query to search but, the problem is that word proximity
> does not come into picture. All 3 document get an even score. The behaviour
> that I want is documents that have "cool" and "gaming" and "computer" (these
> words might be present or not in the indexed document) as close to each
> other as possible should get a higher score.
>
> I can use a Phrase query so that proximity of search terms affect scoring
> but, I do not get any result because string "computer" is not present in any
> of the indexed documents.
>
> Is there a way to achieve the above?

I would rewrite it to this:

cool gaming computer "cool gaming" "gaming computer" "cool gaming computer"

Naively assuming a score of 1.0 for each hit, you would get something like...
 1. "cool gaming laptop"    => 3 (cool, gaming, "cool gaming")
 2. "cool gaming lappy"    => 3 (cool, gaming, "cool gaming")
 3. "gaming laptop cool"    => 2 (cool, gaming)

And of course if it actually finds "cool gaming computer" it would get 6.

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 00:39:07 2009
Return-Path: <java-user-return-40714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5324 invoked from network); 11 Jun 2009 00:39:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 00:39:07 -0000
Received: (qmail 44971 invoked by uid 500); 11 Jun 2009 00:39:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44881 invoked by uid 500); 11 Jun 2009 00:39:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44870 invoked by uid 99); 11 Jun 2009 00:39:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 00:39:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=wHEFdd=CG=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.45 as permitted sender)
Received: from [65.254.253.45] (HELO mailout05.yourhostingaccount.com) (65.254.253.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 00:39:05 +0000
Received: from mailscan04.yourhostingaccount.com ([10.1.15.4] helo=mailscan04.yourhostingaccount.com)
	by mailout05.yourhostingaccount.com with esmtp (Exim)
	id 1MEYJY-0003Qs-5l
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 20:38:44 -0400
Received: from impout03.yourhostingaccount.com ([10.1.55.3] helo=impout03.yourhostingaccount.com)
	by mailscan04.yourhostingaccount.com with esmtp (Exim)
	id 1MEYJX-0001RT-SN
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 20:38:43 -0400
Received: from authsmtp01.yourhostingaccount.com ([10.1.18.1])
	by impout03.yourhostingaccount.com with NO UCE
	id 2Qeg1c00601P85W0000000; Wed, 10 Jun 2009 20:38:43 -0400
X-EN-OrigOutIP: 10.1.18.1
X-EN-IMPSID: 2Qeg1c00601P85W0000000
Received: from adsl-76-199-196-251.dsl.pltn13.sbcglobal.net ([76.199.196.251] helo=[10.0.1.203])
	by authsmtp01.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1MEYJU-0005ya-Cm
	for java-user@lucene.apache.org; Wed, 10 Jun 2009 20:38:40 -0400
Message-Id: <E062E4E7-F098-4D55-B354-7FB56028739F@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170906101702v68dac123l6c2de6c50c40b18b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
Date: Wed, 10 Jun 2009 17:38:35 -0700
References: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl> <55B054A51CE0407DA1B9C7CACF25C67D@VEGA> <bb132a4a0906101658x60d291e8p3dfb1d0412d50e97@mail.gmail.com> <c68e39170906101702v68dac123l6c2de6c50c40b18b@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.199.196.251
X-EN-OrigHost: adsl-76-199-196-251.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

On Jun 10, 2009, at 5:02 PM, Yonik Seeley wrote:

> On Wed, Jun 10, 2009 at 7:58 PM, Daniel Noll <daniel@nuix.com> wrote:
>> It's a shame we don't have an inverted kind of HitCollector where we
>> can say "give me the next hit", so that we can get the best of both
>> worlds (like what StAX gives us in the XML world.)
>
> You can get a scorer and call next() yourself.

Example code, please?

- Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 07:12:27 2009
Return-Path: <java-user-return-40715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38749 invoked from network); 11 Jun 2009 07:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 07:12:27 -0000
Received: (qmail 61233 invoked by uid 500); 11 Jun 2009 07:12:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61150 invoked by uid 500); 11 Jun 2009 07:12:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60933 invoked by uid 99); 11 Jun 2009 07:12:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 07:12:34 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dioxide.software@gmail.com designates 209.85.222.204 as permitted sender)
Received: from [209.85.222.204] (HELO mail-pz0-f204.google.com) (209.85.222.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 07:12:26 +0000
Received: by pzk42 with SMTP id 42so289324pzk.29
        for <multiple recipients>; Thu, 11 Jun 2009 00:12:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=PBtGY55w6NMU16MnPxb7SSTBCnmEF+CJmr5fHPQ+xIE=;
        b=QCRYacDvMmUW1upbC5DT3OH4AR9aNv49NLfy68xAkyyuqA1Vp/Dk8gixJz7RO7c586
         mgUX3yk/Z0q+XdzP7i+g9XWn3KsBwOJH8ZYdyQa90qAzb9HubW1oSJzvwZln39ZT7aG8
         XPCGxnkVX1qa9fTu9BjAwUTkjs5K98gDBND94=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ZVs8l0oNUbraSUSm+n3xGw4nF2uLa486cMN9YphjUpYd0owPBwUOwWJP73tNHa4lp4
         Z1bQyC/0CAXuktefCNTR+aV9YMyWeH2mNQqo4c8qy+tpd8gcCNK7RVwyzlwwRv0My8Wr
         qGkYn9cbHSdZqJgkdR7Y1tzVCYSp0CNqcOZks=
MIME-Version: 1.0
Received: by 10.143.3.16 with SMTP id f16mr874692wfi.60.1244704326066; Thu, 11 
	Jun 2009 00:12:06 -0700 (PDT)
In-Reply-To: <c68e39170906090631s41d0a247r4e14823c698c24c3@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com> 
	<8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com> 
	<8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com> 
	<8db6d74a0906060642g23eb5aefv2d9e9bc3e50bdb04@mail.gmail.com> 
	<8f0ad1f30906060915sfa8cde9u2ecf8edbe4dca1f6@mail.gmail.com> 
	<8db6d74a0906072203n77e51df8i40266e1f92608415@mail.gmail.com> 
	<8f0ad1f30906080304w2fb90b31l5763adc1c4438928@mail.gmail.com> 
	<8db6d74a0906090448o4ee18b4epc9ded31a5a326af5@mail.gmail.com> 
	<c68e39170906090631s41d0a247r4e14823c698c24c3@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Thu, 11 Jun 2009 12:41:46 +0530
Message-ID: <8db6d74a0906110011x7f5545beqa9a0a94625e4e96d@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e9106534a560046c0d4f86
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e9106534a560046c0d4f86
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Note: I request Solr users to go through this mail and let me thier ideas.

Thanks Yonik, you rightly pointed it out. That clearly says that the way I'=
m
trying to mimic the default behaviour of Solr indexing/searching in Lucene
is wrong, right?.
 I downloaded the latest version of solr nightly on may20[at that time I wa=
s
using Solr, now switched to Lucene]. I hope the issue must have been fixed
with that version.Anyway I'm going to download the latest nightly build
today and try it out. I hope using the nightly build instead of getting the
src from latest trunk is more or less same[provided I donwload the latest
nightly build, right?]as I don't know much about getting/compiling the src
from solr trunk. Do let me know if I've to use the trunk anyway, in that
case I'm ready to spend time to get that done.
BTW, Yonik, as per the basic Solr schema.xml file, the analyzers/filters
used by default are these ones, correct me if I'm wrong,
this is the code snip  that mentions the filters used for indexing in Solr
------------------------------------

<fieldType name=3D"text" class=3D"solr.TextField" positionIncrementGap=3D"1=
00">
      <analyzer type=3D"index">
        <tokenizer class=3D"solr.WhitespaceTokenizerFactory"/>
        <!-- in this example, we will only use synonyms at query time
        <filter class=3D"solr.SynonymFilterFactory"
synonyms=3D"index_synonyms.txt" ignoreCase=3D"true" expand=3D"false"/>
        -->
        <!-- Case insensitive stop word removal.
             enablePositionIncrements=3Dtrue ensures that a 'gap' is left t=
o
             allow for accurate phrase queries.
        -->
        <filter class=3D"solr.StopFilterFactory"
                ignoreCase=3D"true"
                words=3D"stopwords.txt"
                enablePositionIncrements=3D"true"
                />
        <filter class=3D"solr.WordDelimiterFilterFactory"
generateWordParts=3D"1" generateNumberParts=3D"1" catenateWords=3D"1"
catenateNumbers=3D"1" catenateAll=3D"0" splitOnCaseChange=3D"1"/>
        <filter class=3D"solr.LowerCaseFilterFactory"/>
        <filter class=3D"solr.EnglishPorterFilterFactory"
protected=3D"protwords.txt"/>
        <filter class=3D"solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
----------------------------------------
and this is the part used for Solr querying,

<analyzer type=3D"query">
        <tokenizer class=3D"solr.WhitespaceTokenizerFactory"/>
        <filter class=3D"solr.SynonymFilterFactory" synonyms=3D"synonyms.tx=
t"
ignoreCase=3D"true" expand=3D"true"/>
        <filter class=3D"solr.StopFilterFactory" ignoreCase=3D"true"
words=3D"stopwords.txt"/>
        <filter class=3D"solr.WordDelimiterFilterFactory"
generateWordParts=3D"1" generateNumberParts=3D"1" catenateWords=3D"0"
catenateNumbers=3D"0" catenateAll=3D"0" splitOnCaseChange=3D"1"/>
        <filter class=3D"solr.LowerCaseFilterFactory"/>
        <filter class=3D"solr.EnglishPorterFilterFactory"
protected=3D"protwords.txt"/>
        <filter class=3D"solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
    </fieldType>

To summarize the names are like this,
Indexing:
1. solr.WhitespaceTokenizerFactory  -- tokenizer and the followings filters
as is clear from the name itself
2. solr.SynonymFilterFactory
3. solr.StopFilterFactory
4. solr.WordDelimiterFilterFactory  (with the options as,
generateWordParts=3D"1" generateNumberParts=3D"1" catenateWords=3D"1"
catenateNumbers=3D"1" catenateAll=3D"0" splitOnCaseChange=3D"1")

5. solr.LowerCaseFilterFactory
6. solr.EnglishPorterFilterFactory
7. solr.RemoveDuplicatesTokenFilterFactory

Querying:
1. solr.WhitespaceTokenizerFactory
2. solr.SynonymFilterFactory
3. solr.StopFilterFactory
4. solr.WordDelimiterFilterFactory( options are: generateWordParts=3D"1"
generateNumberParts=3D"1" catenateWords=3D"0" catenateNumbers=3D"0"
catenateAll=3D"0" splitOnCaseChange=3D"1")

5. solr.LowerCaseFilterFactory
6. solr.EnglishPorterFilterFactory
7. solr.RemoveDuplicatesTokenFilterFactory

Now the filters/analyzers I used that tried to mimic the above behavior of
Solr [in Lucene] is as show below.
I pulled out the whitespacedelimiterfilter from Solr and my custom analyzer
for indexing is like this,
/**
 * Analyzer for Indian language.
 */
public class IndicAnalyzerIndex extends Analyzer {
  public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream ts =3D new WhitespaceTokenizer(reader);
     ts =3D new WordDelimiterFilter(ts, 1, 1, 1, 1, 0);  // I tried using
...(ts, 1, 1, 1, 1, 0, 1) 7 params, but no constructor found for that, I
didn't try to modify the code to add this feature though, then used this
with 6 params, that uses the constructor for which the last option for
splitOnCaseChange is set to 1 so we're doing the same thing even in this
way...
    ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
    ts =3D new LowerCaseFilter(ts);
    ts =3D new PorterStemFilter(ts);
    return ts;
  }
}

and for querying this is teh code
/**
 * Analyzer for Indian language.
 */
public class IndicAnalyzerQuery extends Analyzer {
  public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream ts =3D new WhitespaceTokenizer(reader);
    ts =3D new WordDelimiterFilter(ts, 1, 1, 0, 0, 0);
    ts =3D new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
    ts =3D new LowerCaseFilter(ts);
    ts =3D new PorterStemFilter(ts);
    return ts;
  }
}

The only difference for both is just the worddelimiterfilter with different
options... Comparing the analyzers/filters used by Solr and the above custo=
m
analyzer we can see that I'm not using synonymfilter and
removeduplicatefilter. I hope these make sense for english content only and
using/skipping them will not make any differece to my non-english content.
Can someone with knowledge of Solr/Lulcene source code point me what exactl=
y
is going wrong in my case whn I'm trying to do the same thing in Lucene. It
seems I'm missing some minor yet important thing...hence my custom
IndicAnalyzer is not behaving the way Solr's default anlyzer works and this
is clearly shown  by Yonik that Solr is smart enough to detect unicoded wor=
d
endings and behaving as expected.
Any idea on this issue is welcome. Help me fix the issue. BTW, lucene ppl
when is that basic worddelimiterfilter going to be added to Lucene as well?
Any idea?

Thanks,
KK.

On Tue, Jun 9, 2009 at 7:01 PM, Yonik Seeley <yonik@lucidimagination.com>wr=
ote:

> I just cut'n'pasted your word into Solr... it worked fine (it didn't
> split the word).
> Make sure you're using the latest from the trunk version of Solr...
> this was fixed since 1.3
>
> http://localhost:8983/solr/select?q=3D=E0=A4=B8=E0=A4=BE=E0=A4=B2&debugQu=
ery=3Dtrue
> [...]
> <lst name=3D"debug">
>  <str name=3D"rawquerystring">=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>
>  <str name=3D"querystring">=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>
>  <str name=3D"parsedquery">text:=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>
>  <str name=3D"parsedquery_toString">text:=E0=A4=B8=E0=A4=BE=E0=A4=B2</str=
>
>
> -Yonik
>
>
> On Tue, Jun 9, 2009 at 7:48 AM, KK <dioxide.software@gmail.com> wrote:
> > Hi Robert, I tried a sample code to check whats the reason. The
> > worddelimiterfilter uses isLetter() method to tokenize, and for hindi
> words
> > some parts of word are not actually letters but just part of the word[b=
ut
> > that doesnot mean they can be used as word delimiters], since they are
> not
> > letters isLetter() returns false and the word is getting breaked around
> > that. This is some sample code with a hindi word pronounced saal[meanin=
g
> > year in english],
> >
> > import java.lang.String;
> >
> > public class HindiUnicodeTest {
> >    public static void main(String args[]) {
> >        String hindiStr =3D "=E0=A4=B8=E0=A4=BE=E0=A4=B2";
> >        int length =3D hindiStr.length();
> >        System.out.println("str length " + length);
> >        for (int i=3D0; i<length; i++) {
> >            System.out.println(hindiStr.charAt(i) + " is " +
> > Character.isLetter(hindiStr.charAt(i)));
> >        }
> >
> >    }
> > }
> >
> > Running this gives this output,
> > str length 3
> > =E0=A4=B8 is true
> > =E0=A4=BE is false
> > =E0=A4=B2 is true
> >
> > As you can see the second one is false, which says that it is not a
> letter
> > but this makes worddelimiterfilter break/tokenize around the word. I ev=
en
> > tried to use my custom parser[which I mentioned earlier] and tried to
> print
> > the string that is the output after the query getting parsed, and what =
I
> > found is that if I send the above hindi word then the query string afte=
r
> > being parsed is something like this,
> > Parsed Query string: =E0=A4=B8 =E0=A4=B2
> > it essentialy removes the non-letter character[the second one], and it
> seems
> > it treats them as separate and whenever thse two characters appear
> adjacent,
> > they are in th top of result set, also whereever these two letters appe=
rs
> in
> > the doc, it says they are part of the result set [and hence highlights
> > them].
> >
> > I hope I made it clear. Do let me if some more information is required.
> >
> > Thanks,
> > KK.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e9106534a560046c0d4f86--

From java-user-return-40716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 08:04:54 2009
Return-Path: <java-user-return-40716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57088 invoked from network); 11 Jun 2009 08:04:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 08:04:54 -0000
Received: (qmail 17638 invoked by uid 500); 11 Jun 2009 08:05:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17552 invoked by uid 500); 11 Jun 2009 08:05:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17542 invoked by uid 99); 11 Jun 2009 08:05:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 08:05:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 08:04:52 +0000
Received: by ewy27 with SMTP id 27so1594280ewy.5
        for <java-user@lucene.apache.org>; Thu, 11 Jun 2009 01:04:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CwiFTYC7nPKOloLPdu2nWWwwZAq7FL2nNW17sgXkCxk=;
        b=XWzdEtPq8rH9RqlLMmjY0CYAlfIZzdb1RCd46UfpB++id9C5/Ml7c6n6l0gWvhmBzW
         g6XCem9Fnowm/5L7RevuEAsgSLR5iDG3vbXirATA413JkbI6WmQYpFUiN9EXUVBXZQb4
         rkGG461kNhoISIu3Zt9f5GOHokn8w0g3DdvGI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=O5d/xq+zJtYCjDXGk82iWY8RgLh0qLLhiMySBhfcRZJWVG9pFiSl8wMdYAH1WW/co8
         NqwXZvxv4gmDWxMS3gYVnaNBrNah5l7rdCNXaTtf6C8LDkFDemtFV4BQOao9j3NPfRME
         X6VU+PSxKXlVCcD60S9t10czM3KHlveNWQF2A=
MIME-Version: 1.0
Received: by 10.216.1.202 with SMTP id 52mr841408wed.15.1244707472416; Thu, 11 
	Jun 2009 01:04:32 -0700 (PDT)
In-Reply-To: <8c4e68610906100215g1c6dfcfdj90f07bd682653ad8@mail.gmail.com>
References: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673@IIWCBO-EMB1.iiw.de.ittind.com>
	 <8c4e68610906100215g1c6dfcfdj90f07bd682653ad8@mail.gmail.com>
Date: Thu, 11 Jun 2009 09:04:32 +0100
Message-ID: <6f4104d80906110104g680d82f2i9ce149d6dd44827e@mail.gmail.com>
Subject: Re: Using lucene in a clustered app server
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646db76be2428046c0e0a42
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646db76be2428046c0e0a42
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

we are thinking of implementing a solution like this.  All nodes on the
cluster has a local index from which searches are performed.  Once an update
on the index needs to happen the work is sent to a queue where there is a
master who is responsible for updating the central index.  The master is
then responsible for propagating/notifying other nodes in the cluster that
their local index is not in sync.  The local index worker can perform an
update against the master index.

We haven't implemented this yet but its the approach we'll take inorder to
deal with clustering.  If anyone has any ideas which could improve this or a
better approach your thoughts will be appreciated.

Cheers
Amin

On Wed, Jun 10, 2009 at 10:15 AM, Ian Lea <ian.lea@gmail.com> wrote:

> I'd recommend using your favourite queueing service to pass all
> updates to a central process, the one and only process that updates
> the index.  If you don't already have a favourite queueing service,
> http://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations
> lists several JMS implementations.
>
>
> --
> Ian.
>
> On Tue, Jun 9, 2009 at 9:02 PM, Newman, Billy<Billy.Newman@itt.com> wrote:
> > I am trying to figure out the best way to add to a lucene index across a
> clustered app server.  I cannot grab an IndexWriter for each node in the
> cluster, because I would run into lock file problems.  I am not sure if I
> can share one IndexWriter across the cluster because what happens when two
> or more nodes update the same thing.  Anyone have any insight?
> >
> > Thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163646db76be2428046c0e0a42--

From java-user-return-40717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 08:26:06 2009
Return-Path: <java-user-return-40717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65186 invoked from network); 11 Jun 2009 08:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 08:26:06 -0000
Received: (qmail 49255 invoked by uid 500); 11 Jun 2009 08:26:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49204 invoked by uid 500); 11 Jun 2009 08:26:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49194 invoked by uid 99); 11 Jun 2009 08:26:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 08:26:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of savvas.andreas.moysidis@googlemail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 08:26:04 +0000
Received: by fxm3 with SMTP id 3so1377709fxm.5
        for <java-user@lucene.apache.org>; Thu, 11 Jun 2009 01:25:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=MTNIGSM8RQ+yOO4O/q8/L7olpv14tyJKZidlk0rkjeA=;
        b=amqGxk8/EQli85wQnGyRglGTP87LbOPGvSw6asmHTRefEo6BDemlJCh0jGpd/75flq
         3dCsCbYxaMDNt6c1kGvQb0yLW1MvGyjdK9NRBsyh7kmf9hRxlyoAXcxmkGyr9Ftq1wGw
         RuRKYJ53PgiAWtiGQrPdd1cqytH4c5Mii5YXk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=pH2Tavq7fYzYAiCtKuvA52qeyLILj18yYa74ab3x5m47O7HLgFGVmJb12x2nRukT4E
         E3hXMSc+YJru2tvssL2FKHq8yKVF7p68mYNf76nmzCuSjBP0SsWYe5hGMrNzV58rEjqD
         mcZG33suMuHwpMB031JA/7IW5UP6NbJFNE1ZI=
MIME-Version: 1.0
Received: by 10.204.60.72 with SMTP id o8mr2218188bkh.184.1244708742642; Thu, 
	11 Jun 2009 01:25:42 -0700 (PDT)
In-Reply-To: <bb132a4a0906101718u2ee3982j8a6f117ea0514c5d@mail.gmail.com>
References: <39f63ad30906050431j5e78e4c5v25dba006c236089f@mail.gmail.com>
	 <bb132a4a0906101718u2ee3982j8a6f117ea0514c5d@mail.gmail.com>
Date: Thu, 11 Jun 2009 09:25:42 +0100
Message-ID: <eac5aec20906110125k212706f6k9db40d866c2fda71@mail.gmail.com>
Subject: Re: Phrase search
From: Savvas-Andreas Moysidis <savvas.andreas.moysidis@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5abdb743be3046c0e56a3
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5abdb743be3046c0e56a3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello,

You could use a PhraseQuery with the terms "cool" and "gaming" and
"computer" and set the slop factor you reckon is right. Then could assign a
boost to this query only, which will make it bubble up the list.
I don't think you can get away without specifying a slop factor though(like
in the proximity scenario you mention).

Regards,
Savvas


2009/6/11 Daniel Noll <daniel@nuix.com>

> On Fri, Jun 5, 2009 at 21:31, Abhi<abhirama.bhat@gmail.com> wrote:
> > Say I have indexed the following strings:
> >
> > 1. "cool gaming laptop"
> > 2. "cool gaming lappy"
> > 3. "gaming laptop cool"
> >
> > Now when I search with a query say "cool gaming computer", I want string
> 1
> > and 2 to appear on top (where search terms are closer to each other)
> > followed by 3.
> >
> > I can use a Term query to search but, the problem is that word proximity
> > does not come into picture. All 3 document get an even score. The
> behaviour
> > that I want is documents that have "cool" and "gaming" and "computer"
> (these
> > words might be present or not in the indexed document) as close to each
> > other as possible should get a higher score.
> >
> > I can use a Phrase query so that proximity of search terms affect scoring
> > but, I do not get any result because string "computer" is not present in
> any
> > of the indexed documents.
> >
> > Is there a way to achieve the above?
>
> I would rewrite it to this:
>
> cool gaming computer "cool gaming" "gaming computer" "cool gaming computer"
>
> Naively assuming a score of 1.0 for each hit, you would get something
> like...
>  1. "cool gaming laptop"    => 3 (cool, gaming, "cool gaming")
>  2. "cool gaming lappy"    => 3 (cool, gaming, "cool gaming")
>  3. "gaming laptop cool"    => 2 (cool, gaming)
>
> And of course if it actually finds "cool gaming computer" it would get 6.
>
> Daniel
>
>
> --
> Daniel Noll                            Forensic and eDiscovery Software
> Senior Developer                              The world's most advanced
> Nuix                                                email data analysis
> http://nuix.com/                                and eDiscovery software
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636c5abdb743be3046c0e56a3--

From java-user-return-40718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 08:49:57 2009
Return-Path: <java-user-return-40718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74910 invoked from network); 11 Jun 2009 08:49:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 08:49:57 -0000
Received: (qmail 76226 invoked by uid 500); 11 Jun 2009 08:50:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76147 invoked by uid 500); 11 Jun 2009 08:50:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76137 invoked by uid 99); 11 Jun 2009 08:50:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 08:50:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 08:49:58 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1250143fgb.4
        for <java-user@lucene.apache.org>; Thu, 11 Jun 2009 01:49:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=pG6w9/DZAWm31nfyIvhP5XwO/klyDGzqYJgKOfwKGpA=;
        b=mytuC+z9zrgcIIjAWdnVYEf+dt/wrVKqSR8g7taHyFRZYiAq6ExWAp3pQukhoxNOT3
         QYUQypbXuHCdY0VWf3iD/PbHFs8U2Mdnn6zi5pYd5NQrZU6TEtYT+bhTwvapAS9pnVpm
         ILTJlAyzAXwpRZFk8xQ6ubeYu8iE+2zRQsJLU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=xstTKzZcjiGLO4zCkiAtghLcnJcSJHfcmkC8V/fJtGD6c7RSEpDlPT9aPe8SWD1sjm
         pu1RzLGoufXAP5h+d3qwv/J4rBb5xZP3lGgoE7NnL7hlUOXWICxRkb0+YNVi+aMIV998
         UtumoQyF0KR99HoKt9wK6zHV7bsc2Gh0eh5Lg=
MIME-Version: 1.0
Received: by 10.86.25.10 with SMTP id 10mr1966868fgy.79.1244710177282; Thu, 11 
	Jun 2009 01:49:37 -0700 (PDT)
In-Reply-To: <E062E4E7-F098-4D55-B354-7FB56028739F@lucasmail.org>
References: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl> 
	<55B054A51CE0407DA1B9C7CACF25C67D@VEGA> <bb132a4a0906101658x60d291e8p3dfb1d0412d50e97@mail.gmail.com> 
	<c68e39170906101702v68dac123l6c2de6c50c40b18b@mail.gmail.com> 
	<E062E4E7-F098-4D55-B354-7FB56028739F@lucasmail.org>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 11 Jun 2009 09:49:17 +0100
Message-ID: <8c4e68610906110149v65512985y7e657106d349d5f@mail.gmail.com>
Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This thread seems to be veering well away from your original
straightforward question on how to convert your straighforward code.
If you want or need these advanced solutions, fine, but if your
existing code was fast enough the modified versions suggested earlier
are probably fast enough too.

--
Ian.

On Thu, Jun 11, 2009 at 1:38 AM, Paul J. Lucas<paul@lucasmail.org> wrote:
> On Jun 10, 2009, at 5:02 PM, Yonik Seeley wrote:
>
>> On Wed, Jun 10, 2009 at 7:58 PM, Daniel Noll <daniel@nuix.com> wrote:
>>>
>>> It's a shame we don't have an inverted kind of HitCollector where we
>>> can say "give me the next hit", so that we can get the best of both
>>> worlds (like what StAX gives us in the XML world.)
>>
>> You can get a scorer and call next() yourself.
>
> Example code, please?
>
> - Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 09:05:06 2009
Return-Path: <java-user-return-40719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78983 invoked from network); 11 Jun 2009 09:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 09:05:05 -0000
Received: (qmail 97989 invoked by uid 500); 11 Jun 2009 09:05:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97918 invoked by uid 500); 11 Jun 2009 09:05:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97908 invoked by uid 99); 11 Jun 2009 09:05:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 09:05:15 +0000
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.222.204 as permitted sender)
Received: from [209.85.222.204] (HELO mail-pz0-f204.google.com) (209.85.222.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 09:05:05 +0000
Received: by pzk42 with SMTP id 42so348239pzk.29
        for <java-user@lucene.apache.org>; Thu, 11 Jun 2009 02:04:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=SO/UkZ6ch2riQ1UdUsiLhAE8dIT+7d9nBnI211N5kdg=;
        b=wfLiLlxSkPxglJodVymd7aukGiNmlJi5Rm2MEeTHh6YCSYrMcQLbZjSP4yI4HwTJkn
         q9fwkY2CIC6+/mJluOo63awtLBO0NDchXczRrlgwcVBEyBZIdrsPT+GlaDfYxs13hL7f
         Sp9ApYz7zwfqe6fuVshpLbmL8VTW4GULsfqik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=tWg7Io3upMv2ztP0sfWLtPz4PJ9PCRKJeBS9zPMoP9w3t3/PnyarPBZ7fSEwWPIzVN
         F4XfM4loXJ5OQloTyfwIreKrXiWCslISA3bpVz4qwZ2RUuBC6thvTQrViRJsBMSbPits
         ILFc4nARoBr/QRivd3b1OuY85iKCEINQH5XNk=
MIME-Version: 1.0
Received: by 10.142.135.13 with SMTP id i13mr891945wfd.133.1244711084093; Thu, 
	11 Jun 2009 02:04:44 -0700 (PDT)
In-Reply-To: <c68e39170906090631s41d0a247r4e14823c698c24c3@mail.gmail.com>
References: <8db6d74a0906030715s7d34d5c5j76c1815631f1418a@mail.gmail.com> 
	<8db6d74a0906050612v7e9c51b6i4fe13bec2858dfff@mail.gmail.com> 
	<8f0ad1f30906050706t1069612o6ce22de8151dd66f@mail.gmail.com> 
	<8f0ad1f30906050707r3f2b3185o73f72e1477ec4055@mail.gmail.com> 
	<8db6d74a0906060642g23eb5aefv2d9e9bc3e50bdb04@mail.gmail.com> 
	<8f0ad1f30906060915sfa8cde9u2ecf8edbe4dca1f6@mail.gmail.com> 
	<8db6d74a0906072203n77e51df8i40266e1f92608415@mail.gmail.com> 
	<8f0ad1f30906080304w2fb90b31l5763adc1c4438928@mail.gmail.com> 
	<8db6d74a0906090448o4ee18b4epc9ded31a5a326af5@mail.gmail.com> 
	<c68e39170906090631s41d0a247r4e14823c698c24c3@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Thu, 11 Jun 2009 14:34:24 +0530
Message-ID: <8db6d74a0906110204v17c32faaob63007c74c03a3ae@mail.gmail.com>
Subject: Re: How to support stemming and case folding for english content 
	mixed with non-english content?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd22a1403f0f8046c0ee2c2
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd22a1403f0f8046c0ee2c2
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thank you very much Yonik. I downloaded the latest Solr build, pulled the
WordDelimiterFilter and used it with the same option as used by Solr defaul=
t
and it worked like a charm.  Thanks to Robert also.

Thanks,
KK

On Tue, Jun 9, 2009 at 7:01 PM, Yonik Seeley <yonik@lucidimagination.com>wr=
ote:

> I just cut'n'pasted your word into Solr... it worked fine (it didn't
> split the word).
> Make sure you're using the latest from the trunk version of Solr...
> this was fixed since 1.3
>
> http://localhost:8983/solr/select?q=3D=E0=A4=B8=E0=A4=BE=E0=A4=B2&debugQu=
ery=3Dtrue
> [...]
> <lst name=3D"debug">
>  <str name=3D"rawquerystring">=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>
>  <str name=3D"querystring">=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>
>  <str name=3D"parsedquery">text:=E0=A4=B8=E0=A4=BE=E0=A4=B2</str>
>  <str name=3D"parsedquery_toString">text:=E0=A4=B8=E0=A4=BE=E0=A4=B2</str=
>
>
> -Yonik
>
>
> On Tue, Jun 9, 2009 at 7:48 AM, KK <dioxide.software@gmail.com> wrote:
> > Hi Robert, I tried a sample code to check whats the reason. The
> > worddelimiterfilter uses isLetter() method to tokenize, and for hindi
> words
> > some parts of word are not actually letters but just part of the word[b=
ut
> > that doesnot mean they can be used as word delimiters], since they are
> not
> > letters isLetter() returns false and the word is getting breaked around
> > that. This is some sample code with a hindi word pronounced saal[meanin=
g
> > year in english],
> >
> > import java.lang.String;
> >
> > public class HindiUnicodeTest {
> >    public static void main(String args[]) {
> >        String hindiStr =3D "=E0=A4=B8=E0=A4=BE=E0=A4=B2";
> >        int length =3D hindiStr.length();
> >        System.out.println("str length " + length);
> >        for (int i=3D0; i<length; i++) {
> >            System.out.println(hindiStr.charAt(i) + " is " +
> > Character.isLetter(hindiStr.charAt(i)));
> >        }
> >
> >    }
> > }
> >
> > Running this gives this output,
> > str length 3
> > =E0=A4=B8 is true
> > =E0=A4=BE is false
> > =E0=A4=B2 is true
> >
> > As you can see the second one is false, which says that it is not a
> letter
> > but this makes worddelimiterfilter break/tokenize around the word. I ev=
en
> > tried to use my custom parser[which I mentioned earlier] and tried to
> print
> > the string that is the output after the query getting parsed, and what =
I
> > found is that if I send the above hindi word then the query string afte=
r
> > being parsed is something like this,
> > Parsed Query string: =E0=A4=B8 =E0=A4=B2
> > it essentialy removes the non-letter character[the second one], and it
> seems
> > it treats them as separate and whenever thse two characters appear
> adjacent,
> > they are in th top of result set, also whereever these two letters appe=
rs
> in
> > the doc, it says they are part of the result set [and hence highlights
> > them].
> >
> > I hope I made it clear. Do let me if some more information is required.
> >
> > Thanks,
> > KK.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd22a1403f0f8046c0ee2c2--

From java-user-return-40720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 12:42:19 2009
Return-Path: <java-user-return-40720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82212 invoked from network); 11 Jun 2009 12:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 12:42:19 -0000
Received: (qmail 78889 invoked by uid 500); 11 Jun 2009 12:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78791 invoked by uid 500); 11 Jun 2009 12:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78748 invoked by uid 99); 11 Jun 2009 12:42:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 12:42:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 12:42:12 +0000
Received: by qw-out-2122.google.com with SMTP id 5so930840qwd.53
        for <java-user@lucene.apache.org>; Thu, 11 Jun 2009 05:41:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=pf6v3MF/dSsQ8dstsPwjkCYrCTQIoP6dQR9RL9ubFlM=;
        b=C+3MHol4PKEqnYt4aYQw87yPvahhNDhblfZaY8JJFuWlqJF6xABmFYDgIvLuqyADle
         HDNJyEhhx9z+1l/TNR+aMtj4FeDEAXA9etXnRIMWwv3fsD5pC+TXRoRwBufrlq5057hF
         AJCYh1hK4MiZUhcMGs32XA09vqje7D2yxbE6o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=n9bifE8afGfDTFCrC7ByRZ0X6TdeLUNSZWEEXo+LrR61svILgpifzIxVTFzkiUhQOZ
         3ZH/UdzzwMNbal6sSPMxPRDSjEAkCnAVgHiZgYKOYx4b51nZ7l4F+3hndMAgi9I+1OX7
         LyodyRrMB0PlzjpfO4dr5VuboGHiTsdE2wzqg=
Received: by 10.224.20.71 with SMTP id e7mr3076768qab.92.1244724111619;
        Thu, 11 Jun 2009 05:41:51 -0700 (PDT)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 8sm1684577qwj.34.2009.06.11.05.41.50
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 11 Jun 2009 05:41:51 -0700 (PDT)
Message-ID: <4A30FB8F.7010400@gmail.com>
Date: Thu, 11 Jun 2009 08:41:51 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.9 Release
References: <4A300F60.1020207@gmail.com>
In-Reply-To: <4A300F60.1020207@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Okay, its only been a short time and we have already whittled the list 
down from 56 to 42. I think we have covered most of the easy calls. If 
you know an issue your involved in won't likely be done soon, please 
help us out and take off the version or push it to 3.1.

Next time I go through, I'm going to concentrate on pushing back on 
those issues that have yet to find an assignee. Please assign yourself 
if you plan on fishing an unassigned issue off for 2.9.

Ill wait a few days at least.

- Mark


Mark Miller wrote:
>
>>
>> So... how about we try to wrap up 2.9/3.0 and ship with what we have,
>> now? It's been 8 months since 2.4.0 was released, and 2.9's got plenty
>> of new stuff, and we are all itching to remove these deprecated APIs,
>> switch to Java 1.5, etc.
>>
>> We should try to finish the issues that are open and underway... but I
>> think many of the issues marked 2.9 now, especially those not even
>> started, should not in fact block 2.9.
>>
>> Mike
>
>
>
> We would all, I think, like Lucene 2.9 to release soon.
>
> Unfortunately, there are 56 open issues assigned to 2.9. They won't 
> all likely make it.
>
> We have got to start pruning down the list.
>
> If you are not going to be able to get to / finish an issue in a very 
> near time frame, could you help us all out and move the issue to 3.0?
>
> Trying to finish any issues that are close would also be great 
> obviously, but as a beginning, if we could just get a better handle 
> (eg less issues to consider)
> on what we have to finish off, that would be great.
>
> I'm going to go though a bit and see if their are any obvious 
> candidates to push off soon.
>
> I suppose, if there is something that you really want to be sure is in 
> 2.9, and its not likely to be finished shortly, you should probably 
> speak up too.
>


-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 14:40:48 2009
Return-Path: <java-user-return-40721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64753 invoked from network); 11 Jun 2009 14:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 14:40:48 -0000
Received: (qmail 15373 invoked by uid 500); 11 Jun 2009 14:40:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15293 invoked by uid 500); 11 Jun 2009 14:40:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15283 invoked by uid 99); 11 Jun 2009 14:40:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 14:40:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=wHEFdd=CG=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.36 as permitted sender)
Received: from [65.254.253.36] (HELO mailout04.yourhostingaccount.com) (65.254.253.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 14:40:47 +0000
Received: from mailscan20.yourhostingaccount.com ([10.1.15.20] helo=mailscan20.yourhostingaccount.com)
	by mailout04.yourhostingaccount.com with esmtp (Exim)
	id 1MElS6-0002rs-2M
	for java-user@lucene.apache.org; Thu, 11 Jun 2009 10:40:26 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan20.yourhostingaccount.com with esmtp (Exim)
	id 1MElS5-000248-Iz
	for java-user@lucene.apache.org; Thu, 11 Jun 2009 10:40:25 -0400
Received: from authsmtp02.yourhostingaccount.com ([10.1.18.2])
	by impout02.yourhostingaccount.com with NO UCE
	id 2egR1c00202goRm0000000; Thu, 11 Jun 2009 10:40:25 -0400
X-EN-OrigOutIP: 10.1.18.2
X-EN-IMPSID: 2egR1c00202goRm0000000
Received: from adsl-76-199-196-251.dsl.pltn13.sbcglobal.net ([76.199.196.251] helo=[10.0.1.203])
	by authsmtp02.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1MElS4-0007KL-ON
	for java-user@lucene.apache.org; Thu, 11 Jun 2009 10:40:25 -0400
Message-Id: <02F20242-D41A-4578-BC5F-337EBE89AACB@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610906110149v65512985y7e657106d349d5f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Migrating from Hit/Hits to TopDocs/TopDocCollector
Date: Thu, 11 Jun 2009 07:40:21 -0700
References: <18580.82.210.249.81.1244628584.squirrel@webmail.xs4all.nl>  <55B054A51CE0407DA1B9C7CACF25C67D@VEGA> <bb132a4a0906101658x60d291e8p3dfb1d0412d50e97@mail.gmail.com>  <c68e39170906101702v68dac123l6c2de6c50c40b18b@mail.gmail.com>  <E062E4E7-F098-4D55-B354-7FB56028739F@lucasmail.org> <8c4e68610906110149v65512985y7e657106d349d5f@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.199.196.251
X-EN-OrigHost: adsl-76-199-196-251.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

On Jun 11, 2009, at 1:49 AM, Ian Lea wrote:

> This thread seems to be veering well away from your original
> straightforward question on how to convert your straighforward code.

So what?  It's about Lucene and hence on-topic.  Why do you care?

> If you want or need these advanced solutions, fine, but if your
> existing code was fast enough the modified versions suggested earlier
> are probably fast enough too.

I never claimed the original code was fast enough.  I'd like to  
optimize it now to future-proof it rather than forget about it and  
never get around to it.

But, again, why do you care?

- Paul

P.S.: My "Why do you care?" questions are rhetorical.  I really don't  
care what your answer is.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 16:30:33 2009
Return-Path: <java-user-return-40722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35921 invoked from network); 11 Jun 2009 16:30:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 16:30:33 -0000
Received: (qmail 37878 invoked by uid 500); 11 Jun 2009 16:30:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37835 invoked by uid 500); 11 Jun 2009 16:30:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37788 invoked by uid 99); 11 Jun 2009 16:30:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 16:30:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tarandeep@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 16:30:29 +0000
Received: by ewy27 with SMTP id 27so1962781ewy.5
        for <java-user@lucene.apache.org>; Thu, 11 Jun 2009 09:30:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=MRfCVmny/ygXXuQOVU43GXXUMP0xPQrjpyI/6iiqfjg=;
        b=CCadXIq2T3odhGVcZuO/uaLFuGCMsV0WJrdVQmBKXNOrfiEpQWI7yU6Or+3aOYDFfz
         Yh3sQxORmWMPwuGagHCa7IrsQUa8FcvcaobbMOkRP68djHVu2+VBzaU71XbgLqyAnsml
         0AIEO0EMDO+At43SbA9VGiNRXlf0I7RgHDXtI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=iVoM0NxDNi+M/XVBjUn2ucdLqOMIzwQr3Gio/vPunrd2cE9GePaqkpyueBQwNmoxSn
         zkRPI7x+lK9stvthXWVN7t3Lr7CpM8lKEZ/kJ7piQv5BdPsiouQbJshipDrNsnui1dl2
         x23JmR5iSHMqz7keRXR2irsUBiC5E7Kg+HqiU=
MIME-Version: 1.0
Received: by 10.210.82.13 with SMTP id f13mr8950750ebb.46.1244737809389; Thu, 
	11 Jun 2009 09:30:09 -0700 (PDT)
In-Reply-To: <6f4104d80906110104g680d82f2i9ce149d6dd44827e@mail.gmail.com>
References: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673@IIWCBO-EMB1.iiw.de.ittind.com> 
	<8c4e68610906100215g1c6dfcfdj90f07bd682653ad8@mail.gmail.com> 
	<6f4104d80906110104g680d82f2i9ce149d6dd44827e@mail.gmail.com>
From: Tarandeep Singh <tarandeep@gmail.com>
Date: Thu, 11 Jun 2009 09:29:49 -0700
Message-ID: <e75c02ef0906110929o47fdd4b7u5e6cae049467f594@mail.gmail.com>
Subject: Re: Using lucene in a clustered app server
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c17b4f79864046c151a90
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c17b4f79864046c151a90
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Amin,

I am also working on similar implementation. But right now I am working on
building Lucene Index in parallel using Hadoop.

How are you building your Lucene index (or indexes) ? Have you tried Hadoop?
If yes, we can share some design issues.

Also, for serving Lucene indexes over cluster, you might be interested in
Katta project-
katta.sourceforge.net

-Tarandeep

On Thu, Jun 11, 2009 at 1:04 AM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
> we are thinking of implementing a solution like this.  All nodes on the
> cluster has a local index from which searches are performed.  Once an
> update
> on the index needs to happen the work is sent to a queue where there is a
> master who is responsible for updating the central index.  The master is
> then responsible for propagating/notifying other nodes in the cluster that
> their local index is not in sync.  The local index worker can perform an
> update against the master index.
>
> We haven't implemented this yet but its the approach we'll take inorder to
> deal with clustering.  If anyone has any ideas which could improve this or
> a
> better approach your thoughts will be appreciated.
>
> Cheers
> Amin
>
> On Wed, Jun 10, 2009 at 10:15 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
> > I'd recommend using your favourite queueing service to pass all
> > updates to a central process, the one and only process that updates
> > the index.  If you don't already have a favourite queueing service,
> >
> http://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations
> > lists several JMS implementations.
> >
> >
> > --
> > Ian.
> >
> > On Tue, Jun 9, 2009 at 9:02 PM, Newman, Billy<Billy.Newman@itt.com>
> wrote:
> > > I am trying to figure out the best way to add to a lucene index across
> a
> > clustered app server.  I cannot grab an IndexWriter for each node in the
> > cluster, because I would run into lock file problems.  I am not sure if I
> > can share one IndexWriter across the cluster because what happens when
> two
> > or more nodes update the same thing.  Anyone have any insight?
> > >
> > > Thanks.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--0015174c17b4f79864046c151a90--

From java-user-return-40723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 11 22:57:35 2009
Return-Path: <java-user-return-40723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25987 invoked from network); 11 Jun 2009 22:57:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jun 2009 22:57:35 -0000
Received: (qmail 50855 invoked by uid 500); 11 Jun 2009 22:45:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50835 invoked by uid 500); 11 Jun 2009 22:45:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50825 invoked by uid 99); 11 Jun 2009 22:45:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 22:45:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of psjaison@gmail.com designates 209.85.221.176 as permitted sender)
Received: from [209.85.221.176] (HELO mail-qy0-f176.google.com) (209.85.221.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jun 2009 22:45:27 +0000
Received: by qyk6 with SMTP id 6so34165qyk.29
        for <java-user@lucene.apache.org>; Thu, 11 Jun 2009 15:45:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/usigYihupnBoNVEMgpVhnnYUJIfQgS5EKNZ6OMM/0w=;
        b=axIIsDLu/ZJzA5PPXveRMAGKhE4xBOPrIYhMdHBdziSfuWud7hGTymiBctdfAXStSF
         Z806tAzdlKTOd9TiFI8EXxcBgiaLSO7fDHlyF1LSd5XkwAjaKpHYcFD2nikeujOqrCmK
         fMKgp/bnk8LsBkqSqHqQMfnHCHswAIDUVhBU8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OtLjr6FvVJFcD8y85Rggjw9J/pFkX2fpEPbwVcMgcxYVDBX2EHUGoaBhyK0up67bJA
         FmSy4u1v/Q7szrPKokjBezeXrgMidz7rhRf3M+dT/AtdZ1PMbIyMYAlRWUNH5hDHZ3aM
         qbRqpxclBP1bBw4iuZxvxpYw24RO1lDBHCFfM=
MIME-Version: 1.0
Received: by 10.220.91.213 with SMTP id o21mr2815034vcm.117.1244760306515; 
	Thu, 11 Jun 2009 15:45:06 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906101126m5afc415bu4575cd2bd7caadff@mail.gmail.com>
References: <20090610122347.GB5557@kopfschmerz.zuhause>
	 <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
	 <85d3c3b60906101102v49cc3cc4uedbf473da4350c35@mail.gmail.com>
	 <9ac0c6aa0906101126m5afc415bu4575cd2bd7caadff@mail.gmail.com>
Date: Fri, 12 Jun 2009 04:15:06 +0530
Message-ID: <810098340906111545td9ca9dby5ae89ca1004b23a8@mail.gmail.com>
Subject: Re: Lucene memory usage
From: Jaison Sunny <psjaison@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6469a40e67eec046c1a579d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6469a40e67eec046c1a579d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

how to run lucene on eclipse

--0016e6469a40e67eec046c1a579d--

From java-user-return-40724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 11:55:00 2009
Return-Path: <java-user-return-40724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34774 invoked from network); 12 Jun 2009 11:55:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 11:55:00 -0000
Received: (qmail 8841 invoked by uid 500); 12 Jun 2009 11:55:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8763 invoked by uid 500); 12 Jun 2009 11:55:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8681 invoked by uid 99); 12 Jun 2009 11:55:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 11:55:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 11:54:53 +0000
Received: by ewy27 with SMTP id 27so2642724ewy.5
        for <java-user@lucene.apache.org>; Fri, 12 Jun 2009 04:54:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=yh6Gwhx3QFYbLMHa9A6EEglQveMagXq+44V/+qqSE4c=;
        b=x0t6kQ9aMfB2cEaUZXXPGwsdZySh20HiFGirl/CD6doPADhK8/BQV2wJfDFkBK0EFL
         UUbNLjDRqkHjOKp9RYfzPHjzw4J/32cd0g7jcz+v3dgLHB5tyAig+uSGr5DS+UHoSt3E
         IulN6vPCNKYMT4nuipFZZP/P9jGs5H8Q3orS0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=CE1Ts/Wo2vuqcsHUidyVopfkFckG33f36ArUPozPiE1iq+JG/GrCFoo7LaHOpMojeH
         ToV5suZPi+kze8GWCCPNSo58ClmtFDOBJAmhql0nhw9TwlF2OpOYrZlNlucNvZZfi2Rw
         g+5XP2HJE+5FzANra+SJ4Pjza1Ges+VzZXFvk=
MIME-Version: 1.0
Received: by 10.216.29.210 with SMTP id i60mr1269544wea.84.1244807670987; Fri, 
	12 Jun 2009 04:54:30 -0700 (PDT)
In-Reply-To: <dba8f29c0905280851t5e2674ffp85c7ef642d2718a6@mail.gmail.com>
References: <dba8f29c0905280851t5e2674ffp85c7ef642d2718a6@mail.gmail.com>
Date: Fri, 12 Jun 2009 12:54:30 +0100
Message-ID: <dba8f29c0906120454ic0eb60ai3b55f9ef0892ccb3@mail.gmail.com>
Subject: Re: London Open Source Search meetup - Mon 15th June
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Just a quick reminder that this is happening on Monday.

Rich


2009/5/28 Richard Marr <richard.marr@gmail.com>:
> Hi all,
>
> I'm organising another open source search social evening (OSSSE?) in
> London on Monday the 15th of June, this time with the able assistance
> of Ren=E9 Kriegler.
>
> The plan is to get together and chat about search technology, from
> Lucene to Solr, Hadoop, Mahout, Ferret and the like. We are planning
> on making this a regular event, bringing together people from across
> the field to discuss ideas and ask questions over a quiet drink.
>
> Please come along if you can.
>
> Rich
>
>
>
> Public notice:
> http://richmarr.wordpress.com/2009/05/28/open-source-search-social/
>
> Yahoo event page:
> http://upcoming.yahoo.com/event/2788561/
>
> --
> Richard Marr
> richard.marr@gmail.com
> 07976 910 515
>



--=20
Richard Marr
richard.marr@gmail.com
07976 910 515

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 12:10:27 2009
Return-Path: <java-user-return-40725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42766 invoked from network); 12 Jun 2009 12:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 12:10:26 -0000
Received: (qmail 32040 invoked by uid 500); 12 Jun 2009 12:10:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31963 invoked by uid 500); 12 Jun 2009 12:10:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31953 invoked by uid 99); 12 Jun 2009 12:10:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 12:10:36 +0000
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=RCVD_IN_DNSWL_LOW,RCVD_NUMERIC_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 12:10:26 +0000
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1MF5a6-0003DH-Gm
	for java-user@lucene.apache.org; Fri, 12 Jun 2009 12:10:02 +0000
Received: from 203.81.199.20 ([203.81.199.20])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 12 Jun 2009 12:10:02 +0000
Received: from momin by 203.81.199.20 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 12 Jun 2009 12:10:02 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Muhammad Momin Rashid <momin@abdere.com>
Subject:  How to filter data based on dates?
Date:  Fri, 12 Jun 2009 17:00:59 +0500
Lines: 11
Message-ID: <h0tchj$umm$1@ger.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: 203.81.199.20
User-Agent: Thunderbird 2.0.0.21 (Windows/20090302)
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Everyone,

I need to filter records based on whether current system date is between 
startDate and endDate of a record.  Could someone guide me on this one?

(Current Date >= startDate)
and
(endDate == null || Current Date <= endDate)

Regards,
Muhammad Momin Rashid.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 14:03:38 2009
Return-Path: <java-user-return-40726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 151 invoked from network); 12 Jun 2009 14:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 14:03:38 -0000
Received: (qmail 10169 invoked by uid 500); 12 Jun 2009 14:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10104 invoked by uid 500); 12 Jun 2009 14:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10094 invoked by uid 99); 12 Jun 2009 14:03:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 14:03:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 14:03:39 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1385316qwd.53
        for <java-user@lucene.apache.org>; Fri, 12 Jun 2009 07:03:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=rzFiFGlL7eIrlXENOvu1Y7yUZQgPrDnhWycPiP4BCvw=;
        b=mpFSMTRebm3bNIPJVEVnOxPKf4Ezt+7Oesa6VURcp4JfL1n0MJ3Zmn+8/xlPyPAKsz
         6H/wjJLiWGgoCIjUP4SZdLJgHTlY7gcdYZXRAXC++gEVk1Db/fpXnATIDjoYPM1Cyo39
         CMmseeWu0e9KiugMATjWRUa8M4Y/VlNM5YOF4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lNNPNN1eDShQOFb/ucSMgRShg+WuMnjoX6gKLkD5kAP5/D12hswvufptRkpvMxJIlo
         Xj0knTdwVgIe+CE5GN6/HICG0Q+Iq5Gbzm9t3BVSsUXoGu9edTfJbfXsfSqNUngkpIRj
         pHCdMH28IXfXaEPt5fXUE9PNW/85C7Jdofn4A=
MIME-Version: 1.0
Received: by 10.220.96.13 with SMTP id f13mr3138604vcn.118.1244815398491; Fri, 
	12 Jun 2009 07:03:18 -0700 (PDT)
In-Reply-To: <h0tchj$umm$1@ger.gmane.org>
References: <h0tchj$umm$1@ger.gmane.org>
Date: Fri, 12 Jun 2009 15:03:18 +0100
Message-ID: <359a92830906120703v4727dc12t333e21bbf84da30@mail.gmail.com>
Subject: Re: How to filter data based on dates?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6464766a35e0c046c272baf
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6464766a35e0c046c272baf
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Why wouldn't two RangeQuerys work for this? Essentially something expressing
startdate[0 TO Systemtime] AND enddate[Systemtime TO infinity]?

Best
Erick


On Fri, Jun 12, 2009 at 1:00 PM, Muhammad Momin Rashid <momin@abdere.com>wrote:

> Hello Everyone,
>
> I need to filter records based on whether current system date is between
> startDate and endDate of a record.  Could someone guide me on this one?
>
> (Current Date >= startDate)
> and
> (endDate == null || Current Date <= endDate)
>
> Regards,
> Muhammad Momin Rashid.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6464766a35e0c046c272baf--

From java-user-return-40727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 15:12:29 2009
Return-Path: <java-user-return-40727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57694 invoked from network); 12 Jun 2009 15:12:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 15:12:29 -0000
Received: (qmail 46381 invoked by uid 500); 12 Jun 2009 15:12:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46317 invoked by uid 500); 12 Jun 2009 15:12:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46307 invoked by uid 99); 12 Jun 2009 15:12:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 15:12:38 +0000
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [151.190.254.13] (HELO edge.itt.com) (151.190.254.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 15:12:28 +0000
Received: from fwexhub4.itt.net (10.32.76.114) by edge.itt.com (10.32.16.13)
 with Microsoft SMTP Server (TLS) id 8.1.358.0; Fri, 12 Jun 2009 11:12:30
 -0400
Received: from IIWCBO-EHUB1.iiw.de.ittind.com (10.244.2.24) by
 fwexhub4.itt.net (10.32.76.114) with Microsoft SMTP Server (TLS) id
 8.1.358.0; Fri, 12 Jun 2009 11:12:35 -0400
Received: from iiwcbo-emb1.iiw.de.ittind.com ([127.0.0.1]) by
 IIWCBO-Ehub1.iiw.de.ittind.com ([::1]) with mapi; Fri, 12 Jun 2009 11:12:34
 -0400
From: "Newman, Billy" <Billy.Newman@itt.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Fri, 12 Jun 2009 11:12:30 -0400
Subject: Too many files open issue
Thread-Topic: Too many files open issue
Thread-Index: AcnrcDSAs+WmvGz8QF2ywoH5+9wXlQ==
Message-ID: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E73A@IIWCBO-EMB1.iiw.de.ittind.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: Aid3 Bhkd CB7T CaJW DwLy DwU4 Eeph E+yl FCTT Ff8n FiEO
 Fsu9 GwfI JRDe JsG+
 KTs3;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{5FA9D4E8-260F-4ACC-A44F-50EB661FC2C7};YgBpAGwAbAB5AC4AbgBlAHcAbQBhAG4AQABpAHQAdAAuAGMAbwBtAA==;Fri,
 12 Jun 2009 15:12:30
 GMT;VABvAG8AIABtAGEAbgB5ACAAZgBpAGwAZQBzACAAbwBwAGUAbgAgAGkAcwBzAHUAZQA=
x-cr-puzzleid: {5FA9D4E8-260F-4ACC-A44F-50EB661FC2C7}
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E73AIIWCBOEMB1iiw_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E73AIIWCBOEMB1iiw_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I know this has been covered a number of time before but I am still confuse=
d.

I am using all the default values for IndexWriter when writing my index.

I loop over all my documents 1000 at a time.  For each 1000 I open an index=
 writer, write each document, optimize the index, then close the index writ=
er.  The problems comes about in the second 1000.  Somewhere in writing the=
 second 1000 I start to get a Too many files open exception.  What I don't =
understand is why I can write the first 1000 with no problem, optimize and =
close the writer and then have a problem the next time around.

As an aside I am running redhat and I run 'limit descriptor' and see that i=
t is set to 1024.  Anyone have any idea if this is to low or if there is a =
recommended value?

Thanks.

________________________________
This e-mail and any files transmitted with it may be proprietary and are in=
tended solely for the use of the individual or entity to whom they are addr=
essed. If you have received this e-mail in error please notify the sender.
Please note that any views or opinions presented in this e-mail are solely =
those of the author and do not necessarily represent those of ITT Corporati=
on. The recipient should check this e-mail and any attachments for the pres=
ence of viruses. ITT accepts no liability for any damage caused by any viru=
s transmitted by this e-mail.

--_000_F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E73AIIWCBOEMB1iiw_--

From java-user-return-40728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 15:19:17 2009
Return-Path: <java-user-return-40728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59679 invoked from network); 12 Jun 2009 15:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 15:19:17 -0000
Received: (qmail 55274 invoked by uid 500); 12 Jun 2009 15:19:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55199 invoked by uid 500); 12 Jun 2009 15:19:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55189 invoked by uid 99); 12 Jun 2009 15:19:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 15:19:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 15:19:15 +0000
Received: by fxm3 with SMTP id 3so2322422fxm.5
        for <java-user@lucene.apache.org>; Fri, 12 Jun 2009 08:18:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:in-reply-to
         :references:date:x-google-sender-auth:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=paGr8p1kYUe8gCeP0ybUoP1ggSjRbx+he4tV69qjYt0=;
        b=hHbWrV0idKM59dYB2GDvhquNnC5WlgWHSGGFDfWJ5rfK95HZGv8rW+1SQf6z4b/XM4
         +dPZMWIqX8gSoebC7tc2PjIsEBFbVRza3+dVUvqueRZawy2zPVYkkLs8ZkMh+J/rw6NY
         QeDqkhTDfqzxhjr2SoVb5G1FjT4fZ6oj3No7k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=OmtQ2J1n/jXhGAvIr/7wC2Dx7ARmc+MX80wFagzXGMcTXtsiinvrs9FSa4gnB+NPlW
         NAr7u9mDDvRBk+/JgceGBPLmWfOKBrFe+e0ozcGLAWvAURfRR0VGlLA6BRhGxPc/uLKm
         kTiCZg5NRw7tz4IIQNohZtNOIc9Bn3n5rtUWc=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Received: by 10.216.48.1 with SMTP id u1mr1310207web.189.1244819935084; Fri, 
	12 Jun 2009 08:18:55 -0700 (PDT)
In-Reply-To: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E73A@IIWCBO-EMB1.iiw.de.ittind.com>
References: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E73A@IIWCBO-EMB1.iiw.de.ittind.com>
Date: Fri, 12 Jun 2009 11:18:55 -0400
X-Google-Sender-Auth: c42cff6c1205ef49
Message-ID: <c68e39170906120818g201ef77eo9e9749707bea0278@mail.gmail.com>
Subject: Re: Too many files open issue
From: Yonik Seeley <yonik.seeley@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jun 12, 2009 at 11:12 AM, Newman, Billy<Billy.Newman@itt.com> wrote=
:
> I know this has been covered a number of time before but I am still confu=
sed.
>
> I am using all the default values for IndexWriter when writing my index.
>
> I loop over all my documents 1000 at a time. =A0For each 1000 I open an i=
ndex writer, write each document, optimize the index, then close the index =
writer. =A0The problems comes about in the second 1000. =A0Somewhere in wri=
ting the second 1000 I start to get a Too many files open exception. =A0Wha=
t I don't understand is why I can write the first 1000 with no problem, opt=
imize and close the writer and then have a problem the next time around.


At some point, adding the second batch probably forces a merge with
the first big segment you created.  Merges are now done in the
background so you can keep adding documents.  Bigger merges will take
longer, and the increase in concurrency means more descriptors are
necessary.

> As an aside I am running redhat and I run 'limit descriptor' and see that=
 it is set to 1024. =A0Anyone have any idea if this is to low or if there i=
s a recommended value?

That's low for the default merge factor... lower the merge factor,
increase your descriptors (a lot), or use the compound file format.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 15:48:08 2009
Return-Path: <java-user-return-40729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76021 invoked from network); 12 Jun 2009 15:48:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 15:48:08 -0000
Received: (qmail 17165 invoked by uid 500); 12 Jun 2009 15:48:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17096 invoked by uid 500); 12 Jun 2009 15:48:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17086 invoked by uid 99); 12 Jun 2009 15:48:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 15:48:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.18.201.145] (HELO mail2.harryfox.com) (69.18.201.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 15:48:07 +0000
X-IronPort-AV: E=Sophos;i="4.42,210,1243828800"; 
   d="scan'208";a="780937"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Reloading RAM Directory from updated FS Directory
Date: Fri, 12 Jun 2009 11:47:46 -0400
Message-ID: <6E43574E3326BB44BD95FDCF2C59827E01503988@HFEXNY1.HARRYFOX.COM>
In-Reply-To: <19B7BA3DE8EE4F579BE345C7E94B2AFD@VEGA>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Reloading RAM Directory from updated FS Directory
Thread-Index: AcnpTqRMhVGZe1pEQhip/wk4PbOt7gAAMrlwAIk28WA=
From: "Diamond, Greg" <GDiamond@harryfox.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Uwe -

MMapDirectory worked like a charm (using Linux 64-Bit JVM).  =
Applications have the same performance as when using the RAM Directory, =
and was able to refactor quite a bit of code as well.

Thanks!


-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de]
Sent: Tuesday, June 09, 2009 6:25 PM
To: java-user@lucene.apache.org
Subject: RE: Reloading RAM Directory from updated FS Directory


Hi Greg & Kay,

> Lucene (IndexSearchers / IndexReaders) has the notion of cache as well
> so you need to check if you really want a 100% replication of
> RAMDirectory / FSDirectory as well concurrently in memory.  Have you
> tested with the FieldCache policies before moving onto the =
RAMDirectory
> based backup solution.

As you have so big indexes, I think you use a 64 bit machine and 64 bit =
JVM.
I would recommend you in this case to use MMapDirectory instead of =
copying
the contents to a RAMDirectory. MMapDirectory works like FSDirectory, =
but it
does not read the files via normal RandomAccessFile actions, but it maps =
the
file into the 64 bit address space. In principle this is like a swap =
file,
the contents of the file are seen like memory. The operating system =
kernel
then uses the same strategies to map parts of the index into real RAM, =
just
like a swap file. For Lucene it looks like a RAMDirectory backed by a =
file.

Changes to the underlying index can be seen immediately, and changes can
reloaded using IndexReader.reopen(), which is much faster than reopening =
the
index in complete.

Kay Kay: Instantiating an IndexSearcher on top of a IndexReader costs
nothing (its just a wrapper around the IndexReader). The costly part is
opening the IndexReader. So using reopen() and wrapping this always with =
a
fresh IndexReader is faster than creating an IndexSearcher using the
directory path.

Uwe

> Diamond, Greg wrote:
> > Hi All -
> >
> > What is the best way to load a RAM Directory from a FS Directory, =
and
> periodically reload the RAM Directory to pick up new documents?
> >
> > The scenario I have is I create several large directories which I =
create
> to a file system, then load them into ram for faster searching.
> > They takes several hours to create, so i want to retain a file copy =
so
> in the event of a service/server crash or reboot, they can load again
> > in a few seconds.  Once a day I append or recreate the FS =
Directories
> with new entries, and then reload the RAM Directories to pick up the
> > new entries.
> >
> > Problem is, what I am doing seems to cause a memory leak.  The
> directories take ~12 GB of RAM to load, but bloats
> > to 24 GB (the -Xmx setting) after a few reloads and stays there.
> >
> > 	// Map to hold single instance of the IndexSearcher, 1 per RAM
> Directory, to be reused across requests.
> > 	private static final Map<IndexName, IndexSearcher> searchers =3D =
new
> HashMap<IndexName, IndexSearcher>();
> >
> > 	// Creates the IndexSearcher and stores it in the static map.
> > 	public static void load(IndexName index, ...) {
> > 		// sync... etc
> > 		RAMDirectory dir =3D new
> RAMDirectory(FSDirectory.getDirectory(directoryPath);
> > 		IndexReader reader =3D IndexReader.open(dir, true);
> > 		IndexSearcher searcher =3D new IndexSearcher(reader);
> > 		searchers.put(index, searcher);
> > 	}
> >
> > 	public static IndexSearcher get(IndexName index, ...) {
> > 		// sync... etc
> > 		return searchers.get(index);
> > 	}
> >
> > 	// After an indexing service appends the existing FS Directory, =
this
> reloads it.
> > 	public static void reload(IndexName index, ...) {
> > 		// sync... etc
> > 		IndexSearcher searcher =3D searchers.get(index);
> > 		FSDirectory fsDirectory =3D
> FSDirectory.getDirectory(directoryPath);
> > 		Directory ramDirectory =3D
> searcher.getIndexReader().directory();
> > 		Directory.copy(fsDirectory, ramDirectory, false);
> > 	}
> >
> > I've tries some theme and variations on this with the same issue.
> >
> > TIA!
> >
> > gd
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 17:55:51 2009
Return-Path: <java-user-return-40730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59405 invoked from network); 12 Jun 2009 17:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 17:55:50 -0000
Received: (qmail 9259 invoked by uid 500); 12 Jun 2009 17:55:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9189 invoked by uid 500); 12 Jun 2009 17:55:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9179 invoked by uid 99); 12 Jun 2009 17:55:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 17:55:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of radha84@gmail.com designates 209.85.222.204 as permitted sender)
Received: from [209.85.222.204] (HELO mail-pz0-f204.google.com) (209.85.222.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 17:55:50 +0000
Received: by pzk42 with SMTP id 42so1317163pzk.29
        for <java-user@lucene.apache.org>; Fri, 12 Jun 2009 10:55:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=WIgCiO6Y6o6yrhlv5WyFVo6peF/s8cUSItzJvIs5iVw=;
        b=vmnCsk/OmSBx25RX5UVJ2K+xfX+SmJVGJTG5wV8j9VEviUSbvUvuu5dwVA1mlQoZXo
         Jwxmoc9hmCg6TRpAbFm/QDlr+vFSzNCIVn2NSO/QCjE9gJfB95XjXTiw86ISJzcXihS8
         yQmoN0NV2roB0K/jyfkg2rFnGn94sDiwdDRI8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=CpNocYKQMde/bS+vvpcCU15P22XasYknmijyYyJpCA1qg72rAaCKotpGhFrnmizgK9
         UMbrbnxkB6Tm1XQRNStAI/FLWER3qdP7o6XzwKAofgWr56DqMopNDHQ5RHLOXhfL8MRN
         GbBYRRSLcmt9muYnq2/cNNjbw12YM1zHeV8ds=
MIME-Version: 1.0
Received: by 10.142.177.5 with SMTP id z5mr1484137wfe.32.1244829328530; Fri, 
	12 Jun 2009 10:55:28 -0700 (PDT)
Date: Fri, 12 Jun 2009 23:25:25 +0530
Message-ID: <45e5f8bb0906121055m5e3d73b4t282cd1fb95ca7604@mail.gmail.com>
Subject: Highlight - SimpleSpanFragment
From: Radha Sreedharan <radha84@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd14eeeeefb10046c2a698c
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd14eeeeefb10046c2a698c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all,

I am using *SimpleSpanFragment *to find the words a few positions around the
match.

I am specifying the number of characters, which is the second parameter of
the *SimpleSpanFragment *constructor .

However, it always gives the words to the right of the match and does not
give me the words to the left. ( I need both sides ie around the match ).

On searching through the existing material on the forum, I can gather that
getting the words around the match is possible. But, the examples I saw were
for SimpleFragmenter

Is the issue because I am using *SimpleSpanFragment ?  *Why shouldnt it work
for *SimpleSpanFragment  ?
*
Any help will be deeply appreciated..*
*
Regards,
Radha

--000e0cd14eeeeefb10046c2a698c--

From java-user-return-40731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 19:13:17 2009
Return-Path: <java-user-return-40731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15457 invoked from network); 12 Jun 2009 19:13:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 19:13:17 -0000
Received: (qmail 11575 invoked by uid 500); 12 Jun 2009 19:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11530 invoked by uid 500); 12 Jun 2009 19:13:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11515 invoked by uid 99); 12 Jun 2009 19:13:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 19:13:26 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.177] (HELO mail-yx0-f177.google.com) (209.85.210.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 19:13:17 +0000
Received: by yxe7 with SMTP id 7so496649yxe.29
        for <java-user@lucene.apache.org>; Fri, 12 Jun 2009 12:12:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.134.21 with SMTP id h21mr8120306ybd.142.1244833975625; 
	Fri, 12 Jun 2009 12:12:55 -0700 (PDT)
In-Reply-To: <4A30FB8F.7010400@gmail.com>
References: <4A300F60.1020207@gmail.com> <4A30FB8F.7010400@gmail.com>
Date: Fri, 12 Jun 2009 15:12:55 -0400
Message-ID: <9ac0c6aa0906121212u32efccb8i3eabe661d7acf0c4@mail.gmail.com>
Subject: Re: Lucene 2.9 Release
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Also, conversely, if you know of important issues that should be fixed
for 2.9, please go and check that the "Fix Version" in Jira is in fact
set to 2.9...

Mike

On Thu, Jun 11, 2009 at 8:41 AM, Mark Miller<markrmiller@gmail.com> wrote:
> Okay, its only been a short time and we have already whittled the list down
> from 56 to 42. I think we have covered most of the easy calls. If you know
> an issue your involved in won't likely be done soon, please help us out and
> take off the version or push it to 3.1.
>
> Next time I go through, I'm going to concentrate on pushing back on those
> issues that have yet to find an assignee. Please assign yourself if you plan
> on fishing an unassigned issue off for 2.9.
>
> Ill wait a few days at least.
>
> - Mark
>
>
> Mark Miller wrote:
>>
>>>
>>> So... how about we try to wrap up 2.9/3.0 and ship with what we have,
>>> now? It's been 8 months since 2.4.0 was released, and 2.9's got plenty
>>> of new stuff, and we are all itching to remove these deprecated APIs,
>>> switch to Java 1.5, etc.
>>>
>>> We should try to finish the issues that are open and underway... but I
>>> think many of the issues marked 2.9 now, especially those not even
>>> started, should not in fact block 2.9.
>>>
>>> Mike
>>
>>
>>
>> We would all, I think, like Lucene 2.9 to release soon.
>>
>> Unfortunately, there are 56 open issues assigned to 2.9. They won't all
>> likely make it.
>>
>> We have got to start pruning down the list.
>>
>> If you are not going to be able to get to / finish an issue in a very near
>> time frame, could you help us all out and move the issue to 3.0?
>>
>> Trying to finish any issues that are close would also be great obviously,
>> but as a beginning, if we could just get a better handle (eg less issues to
>> consider)
>> on what we have to finish off, that would be great.
>>
>> I'm going to go though a bit and see if their are any obvious candidates
>> to push off soon.
>>
>> I suppose, if there is something that you really want to be sure is in
>> 2.9, and its not likely to be finished shortly, you should probably speak up
>> too.
>>
>
>
> --
> - Mark
>
> http://www.lucidimagination.com
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 22:09:41 2009
Return-Path: <java-user-return-40732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26145 invoked from network); 12 Jun 2009 22:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 22:09:41 -0000
Received: (qmail 59216 invoked by uid 500); 12 Jun 2009 22:09:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59137 invoked by uid 500); 12 Jun 2009 22:09:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59127 invoked by uid 99); 12 Jun 2009 22:09:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 22:09:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 22:09:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MFEw3-0001DU-Rn
	for java-user@lucene.apache.org; Fri, 12 Jun 2009 15:09:19 -0700
Message-ID: <24006806.post@talk.nabble.com>
Date: Fri, 12 Jun 2009 15:09:19 -0700 (PDT)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: memory leak with CustomComparatorSource class variables
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey there,
I have noticed I am experiencing sort of a memory leak with a
CustomComparatorSource (wich implements SortComparatorSource).
I have a HashMap declared as variable of class in CustomComparatorSource:

final HashMap<String,Integer> docs_to_modify

This HashMap contains ids of documents and priorities used for sorting (the
HashMap is assigned in the constructor).
Normally the HashMap will have different values depending on the query
string requested and normally will have a size of 5000 elements.

I have noticed that this HashMap causes a memory leak. GC will always leave
some memory in use because of this structure. The more requests the more
memory that keeps in use (after lots of debugging and tracing I know the
memory leak is that HasMap) until I get a Tomcat heap space
OutOfMemoryException.

Looks like class variables from a CustomComparatorSource are never freed. I
have thought this could happen if IndexSeracher keeps an instance of
CustomComparatorSource and never frees it...

Any clue why this happens?

My Comparator looks like:
class CustomComparatorSource implements SortComparatorSource 
{
  private final HashMap<String,Integer> docs_to_modify;
  
  public CustomComparatorSource( HashMap<String,Integer> docs_map) {
    this.docs_to_modify = docs_map;
  }
  
  public ScoreDocComparator newComparator(final IndexReader index_reader,
String fieldname) throws IOException 
  {

    final FieldCache.StringIndex index =
FieldCache.DEFAULT.getStringIndex(index_reader, fieldname);
  
    return new ScoreDocComparator () 
    {
      public final int compare (final ScoreDoc d0, final ScoreDoc d1) {
        //... algorithm used to compare
        
        return value_A - value_B;
      }
  
      public Comparable sortValue (final ScoreDoc d0) {
        //... algorithm used to sort value     
        return new Integer( value_A );
      }
  
      public int sortType() {
        return SortField.CUSTOM;
      }
    };
  }
}

And it's called from:
new Sort( new SortField[] { new SortField(idField, new
CustomComparatorSource(docs_map), false )}

Thanks in advance!

-- 
View this message in context: http://www.nabble.com/memory-leak-with-CustomComparatorSource-class-variables-tp24006806p24006806.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 12 22:11:10 2009
Return-Path: <java-user-return-40733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27289 invoked from network); 12 Jun 2009 22:11:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jun 2009 22:11:10 -0000
Received: (qmail 61907 invoked by uid 500); 12 Jun 2009 22:11:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61828 invoked by uid 500); 12 Jun 2009 22:11:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61818 invoked by uid 99); 12 Jun 2009 22:11:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 22:11:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ro.franchini@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jun 2009 22:11:10 +0000
Received: by bwz27 with SMTP id 27so2526605bwz.5
        for <java-user@lucene.apache.org>; Fri, 12 Jun 2009 15:10:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=o6mSr3Gjqo71Jp9O02Rtzv64YakOT7lMFMO13FB/5dE=;
        b=s+FExk9vWcd0YAyLofy9WRi27Z3iI8OKQuNamSR7mNElUjRcKvHOgBGIdrozFlDzo3
         Em5OaWWlKtR/jN46mwzBx7ntsrQfIugXOIbSUuJU7VNheD5PkbGS9LpJdCI7UXgzkJa+
         YTONdUgzL/66tGyYjch/hjQPMBy+8BtEraX/A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=CIgaaco31lQ8S4LmGg8l0X/fw7kNDiYX6zMtrwE5rs1G78+ZpUigIxSVjsX0L0sTQ3
         M1u4rCHaYeG++EW2l4YRidbRLxq4mFQzf9ZSMUHIRm358MBaToXdWG8mbjJWdBAUXTfk
         nEozr6fkezcYWUR21YT+LKNIpwoIuxMTinctI=
MIME-Version: 1.0
Received: by 10.204.31.196 with SMTP id z4mr4095945bkc.73.1244844647602; Fri, 
	12 Jun 2009 15:10:47 -0700 (PDT)
In-Reply-To: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E73A@IIWCBO-EMB1.iiw.de.ittind.com>
References: <AcnrcDSAs+WmvGz8QF2ywoH5+9wXlQ==>
	 <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E73A@IIWCBO-EMB1.iiw.de.ittind.com>
Date: Sat, 13 Jun 2009 00:10:47 +0200
Message-ID: <63e2e4460906121510t6640d57fh79870369d23c828d@mail.gmail.com>
Subject: Re: Too many files open issue
From: Roberto Franchini <ro.franchini@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jun 12, 2009 at 5:12 PM, Newman, Billy<Billy.Newman@itt.com> wrote:
> I know this has been covered a number of time before but I am still confu=
sed.
>
> I am using all the default values for IndexWriter when writing my index.
>
> I loop over all my documents 1000 at a time. =A0For each 1000 I open an i=
ndex writer, write each document, optimize the index, then close the index =
writer. =A0The problems comes about in the second 1000. =A0Somewhere in wri=
ting the second 1000 I start to get a Too many files open exception. =A0Wha=
t I don't understand is why I can write the first 1000 with no problem, opt=
imize and close the writer and then have a problem the next time around.
>
> As an aside I am running redhat and I run 'limit descriptor' and see that=
 it is set to 1024. =A0Anyone have any idea if this is to low or if there i=
s a recommended value?

1024 is too low. For a desktop machine too! So increase it.
R.



--=20
Roberto Franchini
http://www.celi.it
http://www.blogmeter.it
http://www.memesphere.it
Tel +39-011-6600814
jabber:ro.franchini@gmail.com skype:ro.franchini

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 13 06:47:17 2009
Return-Path: <java-user-return-40734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86071 invoked from network); 13 Jun 2009 06:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jun 2009 06:47:16 -0000
Received: (qmail 47890 invoked by uid 500); 13 Jun 2009 06:47:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47836 invoked by uid 500); 13 Jun 2009 06:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47826 invoked by uid 99); 13 Jun 2009 06:47:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 06:47:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 06:47:14 +0000
Received: by ewy27 with SMTP id 27so3276314ewy.5
        for <java-user@lucene.apache.org>; Fri, 12 Jun 2009 23:46:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=o+uY3Jx/l95cUVAu967hKC1DuQQhjBvztLeNVtqoppk=;
        b=Yux0Jg9E7+bul6n4BDz3Qsmzwl95TyhUUQB2w1IiVnoet2EtQKHXaCejgeK9jDAFEH
         EhMstMgGnLLUTRjTFWtZ0uS58UKObm7iVMqvvIcci83gHLR17IGlnwSYaSjn9dD3d0CD
         mKpD/DkFfzvcJMEeHmB6rwLsV1P50fZUyY77A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g76mvEzF6VkYS51T+YNVL4cwTYmrZu3LtxjIYa7m2Bw559i2QID+5AAQVYadR1owAj
         QH0XHiYB2ZmQMUFY/R8F0gIDqvWudlJJVTRx/yvv+AGEsCr7W5vjZjDCoFagaecsRxSH
         lueu/BtDygf2wZCN7rIJDgzw7+Le/x1hbguNE=
MIME-Version: 1.0
Received: by 10.216.11.200 with SMTP id 50mr1586895wex.183.1244875613803; Fri, 
	12 Jun 2009 23:46:53 -0700 (PDT)
In-Reply-To: <e75c02ef0906110929o47fdd4b7u5e6cae049467f594@mail.gmail.com>
References: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673@IIWCBO-EMB1.iiw.de.ittind.com>
	 <8c4e68610906100215g1c6dfcfdj90f07bd682653ad8@mail.gmail.com>
	 <6f4104d80906110104g680d82f2i9ce149d6dd44827e@mail.gmail.com>
	 <e75c02ef0906110929o47fdd4b7u5e6cae049467f594@mail.gmail.com>
Date: Sat, 13 Jun 2009 07:46:53 +0100
Message-ID: <6f4104d80906122346l34329a4bt8b40272778fa525c@mail.gmail.com>
Subject: Re: Using lucene in a clustered app server
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d25cbc0165b046c353095
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364d25cbc0165b046c353095
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi
Thanks for getting back to me.  I have briefly looked at Hadoop.  It looks
interesting but I haven't thought about using it for indexing.  But I think
it might be on the plan.  I am doing the initial investigation and
technology frameworks.  I would be very interested to get an idea of how you
are designing your cluster indexing.  I have been doing a documentation
which I would be happy to show you.


Cheers
Amin

On Thu, Jun 11, 2009 at 5:29 PM, Tarandeep Singh <tarandeep@gmail.com>wrote:

> Hi Amin,
>
> I am also working on similar implementation. But right now I am working on
> building Lucene Index in parallel using Hadoop.
>
> How are you building your Lucene index (or indexes) ? Have you tried
> Hadoop?
> If yes, we can share some design issues.
>
> Also, for serving Lucene indexes over cluster, you might be interested in
> Katta project-
> katta.sourceforge.net
>
> -Tarandeep
>
> On Thu, Jun 11, 2009 at 1:04 AM, Amin Mohammed-Coleman <aminmc@gmail.com
> >wrote:
>
> > Hi
> >
> > we are thinking of implementing a solution like this.  All nodes on the
> > cluster has a local index from which searches are performed.  Once an
> > update
> > on the index needs to happen the work is sent to a queue where there is a
> > master who is responsible for updating the central index.  The master is
> > then responsible for propagating/notifying other nodes in the cluster
> that
> > their local index is not in sync.  The local index worker can perform an
> > update against the master index.
> >
> > We haven't implemented this yet but its the approach we'll take inorder
> to
> > deal with clustering.  If anyone has any ideas which could improve this
> or
> > a
> > better approach your thoughts will be appreciated.
> >
> > Cheers
> > Amin
> >
> > On Wed, Jun 10, 2009 at 10:15 AM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > > I'd recommend using your favourite queueing service to pass all
> > > updates to a central process, the one and only process that updates
> > > the index.  If you don't already have a favourite queueing service,
> > >
> >
> http://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations
> > > lists several JMS implementations.
> > >
> > >
> > > --
> > > Ian.
> > >
> > > On Tue, Jun 9, 2009 at 9:02 PM, Newman, Billy<Billy.Newman@itt.com>
> > wrote:
> > > > I am trying to figure out the best way to add to a lucene index
> across
> > a
> > > clustered app server.  I cannot grab an IndexWriter for each node in
> the
> > > cluster, because I would run into lock file problems.  I am not sure if
> I
> > > can share one IndexWriter across the cluster because what happens when
> > two
> > > or more nodes update the same thing.  Anyone have any insight?
> > > >
> > > > Thanks.
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

--0016364d25cbc0165b046c353095--

From java-user-return-40735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 13 10:51:00 2009
Return-Path: <java-user-return-40735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36739 invoked from network); 13 Jun 2009 10:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jun 2009 10:50:59 -0000
Received: (qmail 26233 invoked by uid 500); 13 Jun 2009 10:51:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26153 invoked by uid 500); 13 Jun 2009 10:51:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26143 invoked by uid 99); 13 Jun 2009 10:51:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 10:51:08 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.177] (HELO mail-yx0-f177.google.com) (209.85.210.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 10:50:59 +0000
Received: by yxe7 with SMTP id 7so724327yxe.29
        for <java-user@lucene.apache.org>; Sat, 13 Jun 2009 03:50:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.136.13 with SMTP id o13mr9341659ybn.100.1244890237028; 
	Sat, 13 Jun 2009 03:50:37 -0700 (PDT)
In-Reply-To: <24006806.post@talk.nabble.com>
References: <24006806.post@talk.nabble.com>
Date: Sat, 13 Jun 2009 06:50:35 -0400
Message-ID: <9ac0c6aa0906130350o4e408ed3o2e4e3225af8ee03e@mail.gmail.com>
Subject: Re: memory leak with CustomComparatorSource class variables
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jun 12, 2009 at 6:09 PM, Marc Sturlese<marc.sturlese@gmail.com> wrote:

> I have noticed I am experiencing sort of a memory leak with a
> CustomComparatorSource (wich implements SortComparatorSource).
> I have a HashMap declared as variable of class in CustomComparatorSource:

This is unfortunately a known and rather horrific trap, in Lucene.

Lucene's field sorting implementation (FieldSortedHitQueue) caches the
comparators use during sorting (in its static package private
Comparators field).  They are weakly keyed by IndexReader, so that
when the IndexReader is closed, the cache entries are cleared.  When
sorting by field this is normally OK since we hold a single entry for
that field.

But when you provide a SortComparatorSource, it's included in the
cache key.  So, if you don't implement hashCode/equals (correctly), or
using a singleton or restricted set of instances (say), then suddenly
every new instance of your SortComparatorSource will enter the cache
and not be cleared until you close that reader.  It easily results in
a catastrophic, extremely unexpected memory leak.

Lucene 2.9 has fixed this, as a side effect of the move to per-segment
field sorting.  SortComparatorSource is replaced by
FieldComparatorSource, and this caching of comparators is no longer
done.  Another reason to get 2.9 out sooner rather than later!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 13 13:30:33 2009
Return-Path: <java-user-return-40736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69722 invoked from network); 13 Jun 2009 13:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jun 2009 13:30:30 -0000
Received: (qmail 11514 invoked by uid 500); 13 Jun 2009 13:30:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11441 invoked by uid 500); 13 Jun 2009 13:30:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11431 invoked by uid 99); 13 Jun 2009 13:30:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 13:30:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 13:30:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MFTJB-0008AY-1l
	for java-user@lucene.apache.org; Sat, 13 Jun 2009 06:30:09 -0700
Message-ID: <24012496.post@talk.nabble.com>
Date: Sat, 13 Jun 2009 06:30:09 -0700 (PDT)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: memory leak with CustomComparatorSource class variables
In-Reply-To: <9ac0c6aa0906130350o4e408ed3o2e4e3225af8ee03e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
References: <24006806.post@talk.nabble.com> <9ac0c6aa0906130350o4e408ed3o2e4e3225af8ee03e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mike, really useful info. I have dowloaded the latest Lucene 2.9-dev
to test the implementation of a FieldComparatorSource but the API
documentation doesn't seem to be availabe. 

I can access to the class MissingStringLastComparatorSource:
http://lucene.apache.org/solr/api/org/apache/solr/search/MissingStringLastComparatorSource.html
>From there I try to link to org.apache.lucene.search.FieldComparatorSource
but get a 404 error.
Any idea how can I get access to that documentation?

Thanks in advance!


Michael McCandless-2 wrote:
> 
> On Fri, Jun 12, 2009 at 6:09 PM, Marc Sturlese<marc.sturlese@gmail.com>
> wrote:
> 
>> I have noticed I am experiencing sort of a memory leak with a
>> CustomComparatorSource (wich implements SortComparatorSource).
>> I have a HashMap declared as variable of class in CustomComparatorSource:
> 
> This is unfortunately a known and rather horrific trap, in Lucene.
> 
> Lucene's field sorting implementation (FieldSortedHitQueue) caches the
> comparators use during sorting (in its static package private
> Comparators field).  They are weakly keyed by IndexReader, so that
> when the IndexReader is closed, the cache entries are cleared.  When
> sorting by field this is normally OK since we hold a single entry for
> that field.
> 
> But when you provide a SortComparatorSource, it's included in the
> cache key.  So, if you don't implement hashCode/equals (correctly), or
> using a singleton or restricted set of instances (say), then suddenly
> every new instance of your SortComparatorSource will enter the cache
> and not be cleared until you close that reader.  It easily results in
> a catastrophic, extremely unexpected memory leak.
> 
> Lucene 2.9 has fixed this, as a side effect of the move to per-segment
> field sorting.  SortComparatorSource is replaced by
> FieldComparatorSource, and this caching of comparators is no longer
> done.  Another reason to get 2.9 out sooner rather than later!
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/memory-leak-with-CustomComparatorSource-class-variables-tp24006806p24012496.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 13 13:32:59 2009
Return-Path: <java-user-return-40737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71135 invoked from network); 13 Jun 2009 13:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jun 2009 13:32:58 -0000
Received: (qmail 13448 invoked by uid 500); 13 Jun 2009 13:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13363 invoked by uid 500); 13 Jun 2009 13:33:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13353 invoked by uid 99); 13 Jun 2009 13:33:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 13:33:07 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.177] (HELO mail-yx0-f177.google.com) (209.85.210.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 13:32:56 +0000
Received: by yxe7 with SMTP id 7so754636yxe.29
        for <java-user@lucene.apache.org>; Sat, 13 Jun 2009 06:32:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.143.6 with SMTP id v6mr9426405ybn.346.1244899955430; Sat, 
	13 Jun 2009 06:32:35 -0700 (PDT)
In-Reply-To: <24012496.post@talk.nabble.com>
References: <24006806.post@talk.nabble.com>
	 <9ac0c6aa0906130350o4e408ed3o2e4e3225af8ee03e@mail.gmail.com>
	 <24012496.post@talk.nabble.com>
Date: Sat, 13 Jun 2009 09:32:35 -0400
Message-ID: <9ac0c6aa0906130632j43dd33a2pc0598fa1e07abf8e@mail.gmail.com>
Subject: Re: memory leak with CustomComparatorSource class variables
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It's here:

  http://lucene.apache.org/java/docs/nightly/

But remember this is trunk code, ie not yet released, so stuff is
still changing.

Mike

On Sat, Jun 13, 2009 at 9:30 AM, Marc Sturlese<marc.sturlese@gmail.com> wro=
te:
>
> Thanks Mike, really useful info. I have dowloaded the latest Lucene 2.9-d=
ev
> to test the implementation of a FieldComparatorSource but the API
> documentation doesn't seem to be availabe.
>
> I can access to the class MissingStringLastComparatorSource:
> http://lucene.apache.org/solr/api/org/apache/solr/search/MissingStringLas=
tComparatorSource.html
> From there I try to link to org.apache.lucene.search.FieldComparatorSourc=
e
> but get a 404 error.
> Any idea how can I get access to that documentation?
>
> Thanks in advance!
>
>
> Michael McCandless-2 wrote:
>>
>> On Fri, Jun 12, 2009 at 6:09 PM, Marc Sturlese<marc.sturlese@gmail.com>
>> wrote:
>>
>>> I have noticed I am experiencing sort of a memory leak with a
>>> CustomComparatorSource (wich implements SortComparatorSource).
>>> I have a HashMap declared as variable of class in CustomComparatorSourc=
e:
>>
>> This is unfortunately a known and rather horrific trap, in Lucene.
>>
>> Lucene's field sorting implementation (FieldSortedHitQueue) caches the
>> comparators use during sorting (in its static package private
>> Comparators field). =A0They are weakly keyed by IndexReader, so that
>> when the IndexReader is closed, the cache entries are cleared. =A0When
>> sorting by field this is normally OK since we hold a single entry for
>> that field.
>>
>> But when you provide a SortComparatorSource, it's included in the
>> cache key. =A0So, if you don't implement hashCode/equals (correctly), or
>> using a singleton or restricted set of instances (say), then suddenly
>> every new instance of your SortComparatorSource will enter the cache
>> and not be cleared until you close that reader. =A0It easily results in
>> a catastrophic, extremely unexpected memory leak.
>>
>> Lucene 2.9 has fixed this, as a side effect of the move to per-segment
>> field sorting. =A0SortComparatorSource is replaced by
>> FieldComparatorSource, and this caching of comparators is no longer
>> done. =A0Another reason to get 2.9 out sooner rather than later!
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/memory-leak-with-Cust=
omComparatorSource-class-variables-tp24006806p24012496.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 13 13:39:26 2009
Return-Path: <java-user-return-40738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74976 invoked from network); 13 Jun 2009 13:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jun 2009 13:39:26 -0000
Received: (qmail 17362 invoked by uid 500); 13 Jun 2009 13:39:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17288 invoked by uid 500); 13 Jun 2009 13:39:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17278 invoked by uid 99); 13 Jun 2009 13:39:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 13:39:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jun 2009 13:39:24 +0000
Received: by fxm3 with SMTP id 3so2761290fxm.5
        for <java-user@lucene.apache.org>; Sat, 13 Jun 2009 06:39:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=g59Uz+V5VI1m/rnpkKkjQHCEzZi7EW5XQulZosQPYwg=;
        b=L2hz0LzZcjBYXfG3hy8+tJFoKh32rIFwq77t9RoAqUJvpqgs/XrPr/GqXoyf4zCeZo
         FBMTrcrCw3FQOYeSe2iuoA4fDWo0z9YBT7EdCGAGwpvdVMLDDgfbj0zP86uwPfceCO/t
         RxT96wpRUuQTEomJ3WAEpiCJH9ITeLbnFJLDc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=Nkb4PF365eRGFoOQ8xB2qf+j0cD89qzxXQLUBjuF8oJBgQenyJS6Il9HZauPYTCJjY
         rFW63ay2S1p0z2zh6ZwFNPUYGnTLgDtfYuTQMImvQt/qjsFWxdaYny2mhNGP65a8f5EC
         xZaaaALy6K0cVIxnjocMm0x/Sw+8fdJadlF4M=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.223.115.146 with SMTP id i18mr3244133faq.6.1244900343684; Sat, 
	13 Jun 2009 06:39:03 -0700 (PDT)
In-Reply-To: <24012496.post@talk.nabble.com>
References: <24006806.post@talk.nabble.com>
	 <9ac0c6aa0906130350o4e408ed3o2e4e3225af8ee03e@mail.gmail.com>
	 <24012496.post@talk.nabble.com>
Date: Sat, 13 Jun 2009 09:39:03 -0400
X-Google-Sender-Auth: e63ff3cdb608845b
Message-ID: <c68e39170906130639p733f8a98wa72334233b4c357@mail.gmail.com>
Subject: Re: memory leak with CustomComparatorSource class variables
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

When implementing your own, it also helps to look at the existing
implementations in the FieldComparator class:

http://svn.apache.org/viewvc/lucene/java/trunk/src/java/org/apache/lucene/s=
earch/FieldComparator.java?revision=3D764551

-Yonik
http://www.lucidimagination.com


On Sat, Jun 13, 2009 at 9:30 AM, Marc Sturlese<marc.sturlese@gmail.com> wro=
te:
>
> Thanks Mike, really useful info. I have dowloaded the latest Lucene 2.9-d=
ev
> to test the implementation of a FieldComparatorSource but the API
> documentation doesn't seem to be availabe.
>
> I can access to the class MissingStringLastComparatorSource:
> http://lucene.apache.org/solr/api/org/apache/solr/search/MissingStringLas=
tComparatorSource.html
> From there I try to link to org.apache.lucene.search.FieldComparatorSourc=
e
> but get a 404 error.
> Any idea how can I get access to that documentation?
>
> Thanks in advance!
>
>
> Michael McCandless-2 wrote:
>>
>> On Fri, Jun 12, 2009 at 6:09 PM, Marc Sturlese<marc.sturlese@gmail.com>
>> wrote:
>>
>>> I have noticed I am experiencing sort of a memory leak with a
>>> CustomComparatorSource (wich implements SortComparatorSource).
>>> I have a HashMap declared as variable of class in CustomComparatorSourc=
e:
>>
>> This is unfortunately a known and rather horrific trap, in Lucene.
>>
>> Lucene's field sorting implementation (FieldSortedHitQueue) caches the
>> comparators use during sorting (in its static package private
>> Comparators field). =A0They are weakly keyed by IndexReader, so that
>> when the IndexReader is closed, the cache entries are cleared. =A0When
>> sorting by field this is normally OK since we hold a single entry for
>> that field.
>>
>> But when you provide a SortComparatorSource, it's included in the
>> cache key. =A0So, if you don't implement hashCode/equals (correctly), or
>> using a singleton or restricted set of instances (say), then suddenly
>> every new instance of your SortComparatorSource will enter the cache
>> and not be cleared until you close that reader. =A0It easily results in
>> a catastrophic, extremely unexpected memory leak.
>>
>> Lucene 2.9 has fixed this, as a side effect of the move to per-segment
>> field sorting. =A0SortComparatorSource is replaced by
>> FieldComparatorSource, and this caching of comparators is no longer
>> done. =A0Another reason to get 2.9 out sooner rather than later!
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/memory-leak-with-Cust=
omComparatorSource-class-variables-tp24006806p24012496.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 14 01:57:32 2009
Return-Path: <java-user-return-40739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82074 invoked from network); 14 Jun 2009 01:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jun 2009 01:57:32 -0000
Received: (qmail 80534 invoked by uid 500); 14 Jun 2009 01:57:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80482 invoked by uid 500); 14 Jun 2009 01:57:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80472 invoked by uid 99); 14 Jun 2009 01:57:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jun 2009 01:57:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of radha84@gmail.com designates 209.85.222.204 as permitted sender)
Received: from [209.85.222.204] (HELO mail-pz0-f204.google.com) (209.85.222.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jun 2009 01:57:31 +0000
Received: by pzk42 with SMTP id 42so1955229pzk.29
        for <java-user@lucene.apache.org>; Sat, 13 Jun 2009 18:57:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zLvFV7MLFLH+/cI3HWz74tZhqM3QXjSQtt9UhxW2g1A=;
        b=i2FleG6+q9sY6v1B8XdmRKSqGBRPQS0oFqsPnjxpQcrlmZK4WtMKUOBV7Li0brHBJv
         Y+BZpqAS+MUaGMAXLPSuU5UYtQ2VQV4ilpozyV01WotkA9tVlk5chvyaLWTDs6WrmtU2
         sNxaNz8T7ek29ps69CQJgJnPm+/Zqt1Bigims=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=s5aS9xXiMNrwd4soXf+cS/3yulQctqxhehoqBNcibEzwzSmv8uSCMPtErBS7M+nPAC
         hN8NWp66Vaj60Prk59wLX0WN49aOHUTCsJsWzWGGUinC7jNRnp54Ss/8w+/VsNIqH5na
         aoFIFtwFH9JyzevQ2y0xV+D7QAQq9yTf4WMw0=
MIME-Version: 1.0
Received: by 10.142.200.3 with SMTP id x3mr2213164wff.219.1244944189738; Sat, 
	13 Jun 2009 18:49:49 -0700 (PDT)
In-Reply-To: <45e5f8bb0906121055m5e3d73b4t282cd1fb95ca7604@mail.gmail.com>
References: <45e5f8bb0906121055m5e3d73b4t282cd1fb95ca7604@mail.gmail.com>
Date: Sun, 14 Jun 2009 07:19:49 +0530
Message-ID: <45e5f8bb0906131849m7f5b2b25k2c6dba83b14f6163@mail.gmail.com>
Subject: Re: Highlight - SimpleSpanFragment
From: Radha Sreedharan <radha84@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2583031d1b5046c4528b2
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2583031d1b5046c4528b2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Currently I am following a long drawn approach where
1) I find index of the matching text in the original
2) For a list of words to the left of index and to the right of index+length
of matching text
3) Then a pick some words from the 1st list and prepend to my  matching text
text and from my second list and append to my  matching text


However I really feel that I am doing something redundant and that Lucene
should be returning me  the matching text !!!

Pls Do help me out in this .

On Fri, Jun 12, 2009 at 11:25 PM, Radha Sreedharan <radha84@gmail.com>wrote:

> Hi all,
>
> I am using *SimpleSpanFragment *to find the words a few positions around
> the match.
>
> I am specifying the number of characters, which is the second parameter of
> the *SimpleSpanFragment *constructor .
>
> However, it always gives the words to the right of the match and does not
> give me the words to the left. ( I need both sides ie around the match ).
>
> On searching through the existing material on the forum, I can gather that
> getting the words around the match is possible. But, the examples I saw were
> for SimpleFragmenter
>
> Is the issue because I am using *SimpleSpanFragment ?  *Why shouldnt it
> work for *SimpleSpanFragment  ?
> *
> Any help will be deeply appreciated..*
> *
> Regards,
> Radha
>

--000e0cd2583031d1b5046c4528b2--

From java-user-return-40740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 08:04:42 2009
Return-Path: <java-user-return-40740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75466 invoked from network); 15 Jun 2009 08:04:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 08:04:42 -0000
Received: (qmail 62708 invoked by uid 500); 15 Jun 2009 08:04:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62618 invoked by uid 500); 15 Jun 2009 08:04:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62608 invoked by uid 99); 15 Jun 2009 08:04:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 08:04:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 08:04:39 +0000
Received: by ey-out-2122.google.com with SMTP id d26so65294eyd.53
        for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 01:04:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=r27GQArwUkJazCXrJaOobFrGpvgdEy16N6f7p/cxg54=;
        b=iREI/1y3UE8UR4goKOU8BfcdXP737ZJ4GihX+0rxinWF5Z3bcCRuxvXGu16yJ4cqGV
         cW09MlPvTRa50Bi+NWdmHp19LNRFDBhVzdX136kHJv+rhgw3+h8TpOLJltRRDtbg92mC
         RSp6RI2EJ0tWEkQAn32ZcvEf6O08TrCQcyUYU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rDcN4xCJ2Eev/f3oWhK6bkrAazn/AssZB9mk/clC29Yc4EKrSPuOikd5zLVDg3pzDA
         CQ0fLGlJQC2uCXg6ULmDguE/yBAKmoCsa2v9aysKbU1UTsoBXZnT+5nRWMmpMBxTT8xA
         b7pTNifLjRjpv+ks7e/Pac408BKSRToBokAFg=
MIME-Version: 1.0
Received: by 10.216.73.197 with SMTP id v47mr2223305wed.12.1245053059368; Mon, 
	15 Jun 2009 01:04:19 -0700 (PDT)
In-Reply-To: <6f4104d80906122346l34329a4bt8b40272778fa525c@mail.gmail.com>
References: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673@IIWCBO-EMB1.iiw.de.ittind.com>
	 <8c4e68610906100215g1c6dfcfdj90f07bd682653ad8@mail.gmail.com>
	 <6f4104d80906110104g680d82f2i9ce149d6dd44827e@mail.gmail.com>
	 <e75c02ef0906110929o47fdd4b7u5e6cae049467f594@mail.gmail.com>
	 <6f4104d80906122346l34329a4bt8b40272778fa525c@mail.gmail.com>
Date: Mon, 15 Jun 2009 09:04:19 +0100
Message-ID: <6f4104d80906150104w2b59527fsb358f498eae7e28a@mail.gmail.com>
Subject: Re: Using lucene in a clustered app server
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502ca0e548708046c5e81f8
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502ca0e548708046c5e81f8
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

I'm looking at Hadoop and Katta and I was wondering if some may be able
clarify the following:

1) Is Katta replacing the Hadoop Lucene contribution
2) Are people still using Hadoop Lucene to perform indexing


Cheers
Amin

On Sat, Jun 13, 2009 at 7:46 AM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
> Thanks for getting back to me.  I have briefly looked at Hadoop.  It looks
> interesting but I haven't thought about using it for indexing.  But I think
> it might be on the plan.  I am doing the initial investigation and
> technology frameworks.  I would be very interested to get an idea of how you
> are designing your cluster indexing.  I have been doing a documentation
> which I would be happy to show you.
>
>
> Cheers
> Amin
>
>
> On Thu, Jun 11, 2009 at 5:29 PM, Tarandeep Singh <tarandeep@gmail.com>wrote:
>
>> Hi Amin,
>>
>> I am also working on similar implementation. But right now I am working on
>> building Lucene Index in parallel using Hadoop.
>>
>> How are you building your Lucene index (or indexes) ? Have you tried
>> Hadoop?
>> If yes, we can share some design issues.
>>
>> Also, for serving Lucene indexes over cluster, you might be interested in
>> Katta project-
>> katta.sourceforge.net
>>
>> -Tarandeep
>>
>> On Thu, Jun 11, 2009 at 1:04 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>> >wrote:
>>
>> > Hi
>> >
>> > we are thinking of implementing a solution like this.  All nodes on the
>> > cluster has a local index from which searches are performed.  Once an
>> > update
>> > on the index needs to happen the work is sent to a queue where there is
>> a
>> > master who is responsible for updating the central index.  The master is
>> > then responsible for propagating/notifying other nodes in the cluster
>> that
>> > their local index is not in sync.  The local index worker can perform an
>> > update against the master index.
>> >
>> > We haven't implemented this yet but its the approach we'll take inorder
>> to
>> > deal with clustering.  If anyone has any ideas which could improve this
>> or
>> > a
>> > better approach your thoughts will be appreciated.
>> >
>> > Cheers
>> > Amin
>> >
>> > On Wed, Jun 10, 2009 at 10:15 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> >
>> > > I'd recommend using your favourite queueing service to pass all
>> > > updates to a central process, the one and only process that updates
>> > > the index.  If you don't already have a favourite queueing service,
>> > >
>> >
>> http://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations
>> > > lists several JMS implementations.
>> > >
>> > >
>> > > --
>> > > Ian.
>> > >
>> > > On Tue, Jun 9, 2009 at 9:02 PM, Newman, Billy<Billy.Newman@itt.com>
>> > wrote:
>> > > > I am trying to figure out the best way to add to a lucene index
>> across
>> > a
>> > > clustered app server.  I cannot grab an IndexWriter for each node in
>> the
>> > > cluster, because I would run into lock file problems.  I am not sure
>> if I
>> > > can share one IndexWriter across the cluster because what happens when
>> > two
>> > > or more nodes update the same thing.  Anyone have any insight?
>> > > >
>> > > > Thanks.
>> > >
>> > > ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>>
>
>

--00504502ca0e548708046c5e81f8--

From java-user-return-40741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 08:57:37 2009
Return-Path: <java-user-return-40741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1391 invoked from network); 15 Jun 2009 08:57:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 08:57:37 -0000
Received: (qmail 39015 invoked by uid 500); 15 Jun 2009 08:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38939 invoked by uid 500); 15 Jun 2009 08:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38929 invoked by uid 99); 15 Jun 2009 08:57:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 08:57:45 +0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DATE_IN_PAST_12_24,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [79.170.194.127] (HELO mail.roo10.com) (79.170.194.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 08:57:34 +0000
Received: from [192.168.60.74] (78-105-13-3.dsl.cnl.uk.net [78.105.13.3])
	by mail.roo10.com (Postfix) with ESMTP id 008794610294
	for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 09:57:09 +0100 (BST)
Subject: Re: London Open Source Search meetup - Mon 15th June
From: Joel Halbert <joel@su3analytics.com>
To: java-user@lucene.apache.org
In-Reply-To: <dba8f29c0906120454ic0eb60ai3b55f9ef0892ccb3@mail.gmail.com>
References: <dba8f29c0905280851t5e2674ffp85c7ef642d2718a6@mail.gmail.com>
	 <dba8f29c0906120454ic0eb60ai3b55f9ef0892ccb3@mail.gmail.com>
Content-Type: text/plain; charset=utf-8
Organization: SU3 Analytics
Date: Sun, 14 Jun 2009 10:18:20 +0100
Message-Id: <1244971100.10502.3.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Rich - from what time?


-----Original Message-----
From: Richard Marr <richard.marr@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: London Open Source Search meetup - Mon 15th June
Date: Fri, 12 Jun 2009 12:54:30 +0100

Hi all,

Just a quick reminder that this is happening on Monday.

Rich


2009/5/28 Richard Marr <richard.marr@gmail.com>:
> Hi all,
>
> I'm organising another open source search social evening (OSSSE?) in
> London on Monday the 15th of June, this time with the able assistance
> of Ren Kriegler.
>
> The plan is to get together and chat about search technology, from
> Lucene to Solr, Hadoop, Mahout, Ferret and the like. We are planning
> on making this a regular event, bringing together people from across
> the field to discuss ideas and ask questions over a quiet drink.
>
> Please come along if you can.
>
> Rich
>
>
>
> Public notice:
> http://richmarr.wordpress.com/2009/05/28/open-source-search-social/
>
> Yahoo event page:
> http://upcoming.yahoo.com/event/2788561/
>
> --
> Richard Marr
> richard.marr@gmail.com
> 07976 910 515
>





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 09:33:30 2009
Return-Path: <java-user-return-40742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16053 invoked from network); 15 Jun 2009 09:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 09:33:29 -0000
Received: (qmail 89917 invoked by uid 500); 15 Jun 2009 09:33:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89861 invoked by uid 500); 15 Jun 2009 09:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89851 invoked by uid 99); 15 Jun 2009 09:33:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 09:33:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tarandeep@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 09:33:27 +0000
Received: by ewy27 with SMTP id 27so4504942ewy.5
        for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 02:33:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=C4/HCnZowyed0bMLeRdcPTW+PeFR+9L6qG/BSQoKI3E=;
        b=myH7BCtvgasz9tdoe67uzUdN4dRcsXloTlz7ifiIUDZEXtz7UGQGYEZjZO9GrfYhsq
         Q4sMEjlLiv9yfZwuFLY5AyLqM+XdbYM9BV3JiM6nvqZ0WP7njI7f3QK+ILZsro2BCcYh
         lesDYE3eTCfrwCmLdFZvikZZ8ZH5R8MF1nWJE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=K4bx1uVVIegXlFOnXPUyRjUpjkuTyV+1DLRHBmvusuUqHASCK5EwuDpZ359H/wraxw
         BCATo8XBFIwdbrE78UVrOqRikY1o5G/TC7GMtFhER490Wl2aJ7n8192zKmuPmxvXBMep
         zc+U1jRvQhmJ0OAwc+KXGaACHo9Z1WKUGUiA8=
MIME-Version: 1.0
Received: by 10.211.168.5 with SMTP id v5mr4330557ebo.15.1245058387123; Mon, 
	15 Jun 2009 02:33:07 -0700 (PDT)
In-Reply-To: <6f4104d80906150104w2b59527fsb358f498eae7e28a@mail.gmail.com>
References: <F0DB6EA8DC0F594B83F2CA60C7E4E8BA342892E673@IIWCBO-EMB1.iiw.de.ittind.com> 
	<8c4e68610906100215g1c6dfcfdj90f07bd682653ad8@mail.gmail.com> 
	<6f4104d80906110104g680d82f2i9ce149d6dd44827e@mail.gmail.com> 
	<e75c02ef0906110929o47fdd4b7u5e6cae049467f594@mail.gmail.com> 
	<6f4104d80906122346l34329a4bt8b40272778fa525c@mail.gmail.com> 
	<6f4104d80906150104w2b59527fsb358f498eae7e28a@mail.gmail.com>
From: Tarandeep Singh <tarandeep@gmail.com>
Date: Mon, 15 Jun 2009 02:32:47 -0700
Message-ID: <e75c02ef0906150232kce5a35cv59978acd92878841@mail.gmail.com>
Subject: Re: Using lucene in a clustered app server
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174bdc10e39d57046c5fbe55
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174bdc10e39d57046c5fbe55
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Mon, Jun 15, 2009 at 1:04 AM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
> I'm looking at Hadoop and Katta and I was wondering if some may be able
> clarify the following:
>
> 1) Is Katta replacing the Hadoop Lucene contribution


You mean the index package in Hadoop's contrib folder?
So far what I have understood is Katta is geared more towards Index shards
management and serving. Katta is not bothered how you created your index
shards. Although it provides tools to create index using Hadoop.


> 2) Are people still using Hadoop Lucene to perform indexing


Not sure of that but it also depends on your needs. Best would be to index a
subset of your documents and see if it meets yoru requirements, else either
modify the code or write your own code. I am creating my own map reduce jobs
to index documents.

-Tarandeep


>
>
>
> Cheers
> Amin
>
> On Sat, Jun 13, 2009 at 7:46 AM, Amin Mohammed-Coleman <aminmc@gmail.com
> >wrote:
>
> > Hi
> > Thanks for getting back to me.  I have briefly looked at Hadoop.  It
> looks
> > interesting but I haven't thought about using it for indexing.  But I
> think
> > it might be on the plan.  I am doing the initial investigation and
> > technology frameworks.  I would be very interested to get an idea of how
> you
> > are designing your cluster indexing.  I have been doing a documentation
> > which I would be happy to show you.
> >
> >
> > Cheers
> > Amin
> >
> >
> > On Thu, Jun 11, 2009 at 5:29 PM, Tarandeep Singh <tarandeep@gmail.com
> >wrote:
> >
> >> Hi Amin,
> >>
> >> I am also working on similar implementation. But right now I am working
> on
> >> building Lucene Index in parallel using Hadoop.
> >>
> >> How are you building your Lucene index (or indexes) ? Have you tried
> >> Hadoop?
> >> If yes, we can share some design issues.
> >>
> >> Also, for serving Lucene indexes over cluster, you might be interested
> in
> >> Katta project-
> >> katta.sourceforge.net
> >>
> >> -Tarandeep
> >>
> >> On Thu, Jun 11, 2009 at 1:04 AM, Amin Mohammed-Coleman <
> aminmc@gmail.com
> >> >wrote:
> >>
> >> > Hi
> >> >
> >> > we are thinking of implementing a solution like this.  All nodes on
> the
> >> > cluster has a local index from which searches are performed.  Once an
> >> > update
> >> > on the index needs to happen the work is sent to a queue where there
> is
> >> a
> >> > master who is responsible for updating the central index.  The master
> is
> >> > then responsible for propagating/notifying other nodes in the cluster
> >> that
> >> > their local index is not in sync.  The local index worker can perform
> an
> >> > update against the master index.
> >> >
> >> > We haven't implemented this yet but its the approach we'll take
> inorder
> >> to
> >> > deal with clustering.  If anyone has any ideas which could improve
> this
> >> or
> >> > a
> >> > better approach your thoughts will be appreciated.
> >> >
> >> > Cheers
> >> > Amin
> >> >
> >> > On Wed, Jun 10, 2009 at 10:15 AM, Ian Lea <ian.lea@gmail.com> wrote:
> >> >
> >> > > I'd recommend using your favourite queueing service to pass all
> >> > > updates to a central process, the one and only process that updates
> >> > > the index.  If you don't already have a favourite queueing service,
> >> > >
> >> >
> >>
> http://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations
> >> > > lists several JMS implementations.
> >> > >
> >> > >
> >> > > --
> >> > > Ian.
> >> > >
> >> > > On Tue, Jun 9, 2009 at 9:02 PM, Newman, Billy<Billy.Newman@itt.com>
> >> > wrote:
> >> > > > I am trying to figure out the best way to add to a lucene index
> >> across
> >> > a
> >> > > clustered app server.  I cannot grab an IndexWriter for each node in
> >> the
> >> > > cluster, because I would run into lock file problems.  I am not sure
> >> if I
> >> > > can share one IndexWriter across the cluster because what happens
> when
> >> > two
> >> > > or more nodes update the same thing.  Anyone have any insight?
> >> > > >
> >> > > > Thanks.
> >> > >
> >> > >
> ---------------------------------------------------------------------
> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > >
> >> > >
> >> >
> >>
> >
> >
>

--0015174bdc10e39d57046c5fbe55--

From java-user-return-40743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 11:14:44 2009
Return-Path: <java-user-return-40743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55909 invoked from network); 15 Jun 2009 11:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 11:14:44 -0000
Received: (qmail 48799 invoked by uid 500); 15 Jun 2009 11:14:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48766 invoked by uid 500); 15 Jun 2009 11:14:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48756 invoked by uid 99); 15 Jun 2009 11:14:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 11:14:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of richard.marr@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 11:14:42 +0000
Received: by ewy27 with SMTP id 27so4578638ewy.5
        for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 04:14:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ZkawVx0i2bnwdWjc3qRNl5K6097L8gUCNof979XvZPE=;
        b=vD9hpaKR0VGY6vXS4pbqYZguZRyPjouXsWzuoBeK2o09dkztZtkh9D/pa2OcdI2jJ0
         MobUJL6R1QHbZ/Rt3jn1Eb8QBwsBFSd0u3azE3QFF9iRuojTgaNhA2McpUqzBVpATMiA
         JkUitWhAmucyCjP2dR0pJvOFR/g4CC6IfsiyI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=E6WiAIeJUTnvCSDy3Up7Le59/ZiqbHqqolM2JiNWkP0rEvVRDjeP8PBrme+9UcXcXQ
         /bDuoq00jOGGdwIRQ1A7rHs3I3S5HkSj/+5xPa6Nd7x56FiF4NDliv9rvgJKhkzU6D0B
         7wdWXKqpLV3vV2NlXbie8lAgAMlJnMfFfSLsI=
MIME-Version: 1.0
Received: by 10.216.10.208 with SMTP id 58mr2254532wev.82.1245064461825; Mon, 
	15 Jun 2009 04:14:21 -0700 (PDT)
In-Reply-To: <1244971100.10502.3.camel@bohr>
References: <dba8f29c0905280851t5e2674ffp85c7ef642d2718a6@mail.gmail.com>
	 <dba8f29c0906120454ic0eb60ai3b55f9ef0892ccb3@mail.gmail.com>
	 <1244971100.10502.3.camel@bohr>
Date: Mon, 15 Jun 2009 12:14:21 +0100
Message-ID: <dba8f29c0906150414i1b3f434ek4af3c18165d41cf2@mail.gmail.com>
Subject: Re: London Open Source Search meetup - Mon 15th June
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Joel, good point.

We'll definitely be there by 7pm but may be a little earlier if the
will to continue working is elusive.



2009/6/14 Joel Halbert <joel@su3analytics.com>:
> Hi Rich - from what time?
>
>
> -----Original Message-----
> From: Richard Marr <richard.marr@gmail.com>
> Reply-To: java-user@lucene.apache.org
> To: java-user@lucene.apache.org
> Subject: Re: London Open Source Search meetup - Mon 15th June
> Date: Fri, 12 Jun 2009 12:54:30 +0100
>
> Hi all,
>
> Just a quick reminder that this is happening on Monday.
>
> Rich
>
>
> 2009/5/28 Richard Marr <richard.marr@gmail.com>:
>> Hi all,
>>
>> I'm organising another open source search social evening (OSSSE?) in
>> London on Monday the 15th of June, this time with the able assistance
>> of Ren=E9 Kriegler.
>>
>> The plan is to get together and chat about search technology, from
>> Lucene to Solr, Hadoop, Mahout, Ferret and the like. We are planning
>> on making this a regular event, bringing together people from across
>> the field to discuss ideas and ask questions over a quiet drink.
>>
>> Please come along if you can.
>>
>> Rich
>>
>>
>>
>> Public notice:
>> http://richmarr.wordpress.com/2009/05/28/open-source-search-social/
>>
>> Yahoo event page:
>> http://upcoming.yahoo.com/event/2788561/
>>
>> --
>> Richard Marr
>> richard.marr@gmail.com
>> 07976 910 515
>>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Richard Marr
richard.marr@gmail.com
07976 910 515

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 14:19:39 2009
Return-Path: <java-user-return-40744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50765 invoked from network); 15 Jun 2009 14:19:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 14:19:39 -0000
Received: (qmail 70717 invoked by uid 500); 15 Jun 2009 14:19:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70639 invoked by uid 500); 15 Jun 2009 14:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70629 invoked by uid 99); 15 Jun 2009 14:19:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 14:19:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.177] (HELO moutng.kundenserver.de) (212.227.126.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 14:19:38 +0000
Received: from [172.20.41.160] (p5B207FBB.dip.t-dialin.net [91.32.127.187])
	by mrelayeu.kundenserver.de (node=mreu0) with ESMTP (Nemesis)
	id 0MKuxg-1MGD1p0T2n-000cAB; Mon, 15 Jun 2009 16:19:17 +0200
Message-ID: <4A365864.5080003@intland.com>
Date: Mon, 15 Jun 2009 16:19:16 +0200
From: Zsolt Koppany <zkoppanylist@intland.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Fuzzy vs Prefix query Performance
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: V01U2FsdGVkX19nOUfYrqIQbSM83DxPZ8oDR4wznJ9l/feFLHh
 6s7knmGt8Wg4jVu10ING9sskWo4C1WHjXtVUxsLaeNaq0nvedJ
 +Y/4Xq3IBjP8K8oqf4nXTUjW+nJMYwH
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

on 99470 documents (I mean Lucene documents) a FuzzyQuery needs approx 
30 seconds but PrefixQuery less than one.

All Lucene files need 65MB together.

I'm bit surprised of that. Is that possible?

Zsolt

Zsolt Koppany
Phone: +49-711-67400-679

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 14:34:40 2009
Return-Path: <java-user-return-40745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63332 invoked from network); 15 Jun 2009 14:34:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 14:34:40 -0000
Received: (qmail 93618 invoked by uid 500); 15 Jun 2009 14:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93542 invoked by uid 500); 15 Jun 2009 14:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93526 invoked by uid 99); 15 Jun 2009 14:34:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 14:34:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.221.176 as permitted sender)
Received: from [209.85.221.176] (HELO mail-qy0-f176.google.com) (209.85.221.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 14:34:39 +0000
Received: by qyk6 with SMTP id 6so213094qyk.29
        for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 07:34:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=S6z+DOoT3Y+yXhhBUiZSmRIjTzpmudhvWGwebE9kpEQ=;
        b=tp4TjhyQIQW1deE2E22nF2vl2XE5gNBQiMvOr+jq9xmdGxD7LPVqN22uR9OqDnNdqk
         w4KShxxBFDBqXg9tNookNlKsIsTH6OK8fHID4aCyqfQrz+IWGkNrksU43eGkJN3osH7j
         3FIESS60mL+imSosSBwuXoop+BuGtakt3/uy8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WDCFOzz+dXEqZ9ZPJwy5CkJmQo5m0lHOdEK9tF7MY5q54S6iB4evGZEl8RYIuRNtu9
         Fxp1U587mnpsYns16TcFo1K82PddJoFHZwL/DYCJ7QQvSHiUVb5ETd7GiBD7inennYZ3
         YcOOTimebJB+98nKSEccodSGyw6O7WoQPBV4A=
MIME-Version: 1.0
Received: by 10.220.71.20 with SMTP id f20mr4596816vcj.70.1245076458389; Mon, 
	15 Jun 2009 07:34:18 -0700 (PDT)
In-Reply-To: <4A365864.5080003@intland.com>
References: <4A365864.5080003@intland.com>
Date: Mon, 15 Jun 2009 15:34:18 +0100
Message-ID: <359a92830906150734u19123368v999b97d3a65ebad6@mail.gmail.com>
Subject: Re: Fuzzy vs Prefix query Performance
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6475d180541db046c63f4df
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6475d180541db046c63f4df
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Well, if you're seeing it, it's possible <G>....

But the first question is always "what were you measuring?" Be aware
that when you open a searcher, the first few queries can fill caches, etc
and
may take an anomalously long time, especially if you're sorting. So could
you give more details of your test setup?

Best
Erick

On Mon, Jun 15, 2009 at 3:19 PM, Zsolt Koppany <zkoppanylist@intland.com>wrote:

> Hi,
>
> on 99470 documents (I mean Lucene documents) a FuzzyQuery needs approx 30
> seconds but PrefixQuery less than one.
>
> All Lucene files need 65MB together.
>
> I'm bit surprised of that. Is that possible?
>
> Zsolt
>
> Zsolt Koppany
> Phone: +49-711-67400-679
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6475d180541db046c63f4df--

From java-user-return-40746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 15:23:43 2009
Return-Path: <java-user-return-40746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93762 invoked from network); 15 Jun 2009 15:23:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 15:23:42 -0000
Received: (qmail 72247 invoked by uid 500); 15 Jun 2009 15:23:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72114 invoked by uid 500); 15 Jun 2009 15:23:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72070 invoked by uid 99); 15 Jun 2009 15:23:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 15:23:47 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.126.187] (HELO moutng.kundenserver.de) (212.227.126.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 15:23:37 +0000
Received: from [172.20.41.160] (p5B207FBB.dip.t-dialin.net [91.32.127.187])
	by mrelayeu.kundenserver.de (node=mreu2) with ESMTP (Nemesis)
	id 0MKv5w-1MGE1l0Nzz-0001Bs; Mon, 15 Jun 2009 17:23:17 +0200
Message-ID: <4A366764.90802@intland.com>
Date: Mon, 15 Jun 2009 17:23:16 +0200
From: Zsolt Koppany <zkoppanylist@intland.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fuzzy vs Prefix query Performance
References: <4A365864.5080003@intland.com> <359a92830906150734u19123368v999b97d3a65ebad6@mail.gmail.com>
In-Reply-To: <359a92830906150734u19123368v999b97d3a65ebad6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: V01U2FsdGVkX1+pHTywvPBLOya0SawZs9yfaOCeduH7hgcxcls
 MfDDHfC1OPSK2rlJIP3a57wB6tDL+gRPe9fh88GGVC7Z0UPKtD
 8Han1vijBgFDdaJwmyNQSpC7a3hNwDy
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,

this a web application running 24 hours a day thus caching cannot be the 
reason. I get the same result after I re-start the same search.

Zsolt

Erick Erickson wrote:
> Well, if you're seeing it, it's possible <G>....
> 
> But the first question is always "what were you measuring?" Be aware
> that when you open a searcher, the first few queries can fill caches, etc
> and
> may take an anomalously long time, especially if you're sorting. So could
> you give more details of your test setup?
> 
> Best
> Erick
> 
> On Mon, Jun 15, 2009 at 3:19 PM, Zsolt Koppany <zkoppanylist@intland.com>wrote:
> 
>> Hi,
>>
>> on 99470 documents (I mean Lucene documents) a FuzzyQuery needs approx 30
>> seconds but PrefixQuery less than one.
>>
>> All Lucene files need 65MB together.
>>
>> I'm bit surprised of that. Is that possible?
>>
>> Zsolt
>>
>> Zsolt Koppany
>> Phone: +49-711-67400-679
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 15:24:36 2009
Return-Path: <java-user-return-40747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94999 invoked from network); 15 Jun 2009 15:24:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 15:24:34 -0000
Received: (qmail 78714 invoked by uid 500); 15 Jun 2009 15:24:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78650 invoked by uid 500); 15 Jun 2009 15:24:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78640 invoked by uid 99); 15 Jun 2009 15:24:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 15:24:43 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.82.104.180] (HELO web24707.mail.ird.yahoo.com) (212.82.104.180)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Jun 2009 15:24:32 +0000
Received: (qmail 95885 invoked by uid 60001); 15 Jun 2009 15:24:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1245079450; bh=F0SIa8cjaiSottxCusCRnOz7CdJ3Wq79+wJECSMrDaQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=JF94ozBTmCd/gHpoWbSlGtB+x/voBQwNconHQQHIOuk9Xh+KZ+HlB5PDW3Zkarl3kCdukgYpLGl3q4KmSpifZIqUvFdgS+7dMH+3R4AyuHn7WoA1f85zzHzeNOjVZUHbpuUYBPF2YAfKQLcT2PYShkB0OhadHX0vF7wgg1lB9mI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=c+gKtjWuZKLk+whfqJKo4Ly7ZZ8zv/WH7ZslQq172O2VijE3S+6FyG3IOvcmtN+uunIJxTyLelLVj1NnmEl8vUkF/cT4WXUgND8oV2damo1zJEjHvqLMeRXQPHYVVnQzI1g5uXidPwAKzZXC9eieIXsIVh40/PiJaidic0L30Go=;
Message-ID: <963020.94905.qm@web24707.mail.ird.yahoo.com>
X-YMail-OSG: KuAMTJkVM1n3nXt7Fo0wY_8EPwMGgoqSt.Ka2zpILtRgS9cjIlolLHJm4xQn0YnZxlgtd7WhB8qJuKsMKS01RyG_VJVQIU.deFl2ZmG571W2d_8A_c.Gv41G6SVUpSQLFOEV8A3srfZ2YtzdngJEmF7O6T2O_Z6PazFlro96oJkZ4SbbMT4Zq8JgTCjZ_ie9gv8Dj5kV0zwDunKfZyatkKmyN8YCz_rDF.p7DCykS7JwvkLd.f1lvaArUlDikkPb6dWeMek8CiEa_bN7coMS36OisPyX3_yiJBAqKuDSDbWS0k65osvOhvaadg22j1hQ.m6xbe14WTLHIvQstiXYsQtx.qLFqmhnKYCRUSRI
Received: from [193.36.230.96] by web24707.mail.ird.yahoo.com via HTTP; Mon, 15 Jun 2009 08:24:10 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
References: <4A365864.5080003@intland.com> <359a92830906150734u19123368v999b97d3a65ebad6@mail.gmail.com>
Date: Mon, 15 Jun 2009 08:24:10 -0700 (PDT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Fuzzy vs Prefix query Performance
To: java-user@lucene.apache.org
In-Reply-To: <359a92830906150734u19123368v999b97d3a65ebad6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


FuzzyQuery performance is related to number of unique terms in the index no=
t the number of documents e.g. a single "telephone directory" document coul=
d contain millions of terms.=0AEach term considered is compared using an "e=
dit distance" algo which is CPU intensive.=0A=0AThe FuzzyQuery prefix lengt=
h setting dictates if the fuzzy edit distance comparisons are done from A t=
o Z (prefix length=3D0) or just those terms sharing the first n characters =
of the input term. Obviously this can make a huge difference in number of t=
erms compared (prefix length of 1 would reduce search space to 1/26th of pr=
efix length =3D0 assuming even distribution of words in the alphabet).=0A=
=0AYour prefix query does a simpler operation - the equivalent of String.st=
artsWith(..) and will typically operate on fewer terms.=0A=0ACheers=0AMark=
=0A=0A=0A=0A----- Original Message ----=0AFrom: Erick Erickson <erickericks=
on@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Monday, 15 June, 20=
09 15:34:18=0ASubject: Re: Fuzzy vs Prefix query Performance=0A=0AWell, if =
you're seeing it, it's possible <G>....=0A=0ABut the first question is alwa=
ys "what were you measuring?" Be aware=0Athat when you open a searcher, the=
 first few queries can fill caches, etc=0Aand=0Amay take an anomalously lon=
g time, especially if you're sorting. So could=0Ayou give more details of y=
our test setup?=0A=0ABest=0AErick=0A=0AOn Mon, Jun 15, 2009 at 3:19 PM, Zso=
lt Koppany <zkoppanylist@intland.com>wrote:=0A=0A> Hi,=0A>=0A> on 99470 doc=
uments (I mean Lucene documents) a FuzzyQuery needs approx 30=0A> seconds b=
ut PrefixQuery less than one.=0A>=0A> All Lucene files need 65MB together.=
=0A>=0A> I'm bit surprised of that. Is that possible?=0A>=0A> Zsolt=0A>=0A>=
 Zsolt Koppany=0A> Phone: +49-711-67400-679=0A>=0A> -----------------------=
----------------------------------------------=0A> To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail=
: java-user-help@lucene.apache.org=0A>=0A>=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 17:11:02 2009
Return-Path: <java-user-return-40748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44259 invoked from network); 15 Jun 2009 17:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 17:11:02 -0000
Received: (qmail 73239 invoked by uid 500); 15 Jun 2009 17:11:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73169 invoked by uid 500); 15 Jun 2009 17:11:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73149 invoked by uid 99); 15 Jun 2009 17:11:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 17:11:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.229 as permitted sender)
Received: from [65.54.246.229] (HELO bay0-omc3-s29.bay0.hotmail.com) (65.54.246.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 17:10:59 +0000
Received: from BAY119-DS9 ([207.46.9.26]) by bay0-omc3-s29.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 15 Jun 2009 10:10:38 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>
From: "OBender Hotmail" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Lucene and multi-lingual Unicode - advice needed  
Date: Mon, 15 Jun 2009 13:10:31 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0153_01C9EDBA.AC5D5EB0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acnt3DBhl9BZhLSCSa2S6g/gPbjLXA==
Content-Language: en-us
X-OriginalArrivalTime: 15 Jun 2009 17:10:38.0386 (UTC) FILETIME=[345CE120:01C9EDDC]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0153_01C9EDBA.AC5D5EB0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All!

 

I'm new to Lucene so forgive me if this question was asked before.

I have a database with records in the same table in many different languages
(up to 70) it includes all W-European, Arabic, Eastern, CJK, Cyrillic, etc.
you name it. 
I've looked at what people say about Lucene and it looks like for the most
part standard analyzers should do fine with most Unicode languages but there
are quite a few exceptions.
Here is some recently updated Lucene Jira thread:
https://issues.apache.org/jira/browse/LUCENE-1488

My question is, what would be the safest bet for me in terms of
analyzers/tokenizers? 
Do I really have to write my own ones for the bunch of languages that are
not supported?
Did anyone already solve the problem similar to mine? I'm sure someone
already did :)

And yes, I looked at the Lucene sandbox analyzers. It just adds more
confusion. For example why there analyzers for DE and FR? Wouldn't the
standard analyzer (which is Unicode complaint as I understood) deal with EU
languages just fine?

Thanks in advance for advices :)


------=_NextPart_000_0153_01C9EDBA.AC5D5EB0--

From java-user-return-40749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 17:14:39 2009
Return-Path: <java-user-return-40749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45222 invoked from network); 15 Jun 2009 17:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 17:14:39 -0000
Received: (qmail 79651 invoked by uid 500); 15 Jun 2009 17:14:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79599 invoked by uid 500); 15 Jun 2009 17:14:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79589 invoked by uid 99); 15 Jun 2009 17:14:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 17:14:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 17:14:41 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1943391ywt.5
        for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 10:14:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=7qj/VkvYpNITVBJ80le8HaBzejPze/XF7/ulcz3ANf0=;
        b=sBc2F+X+H2BtKIHfTrfjV/X59UphZrXMTJSOuw7WPV0q6ciiSitn/BTcCuJ5wcmXJW
         4zubS+QpTTuT5dBdCk+HY0h+ka5CZ4KgRS+ga2rfEX5FVBDL/hg12NNdu6sUR4Ub5+Di
         2L+JGmSVJvoOYy4rrPqSNnKLkv4xusNdo0ah8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=PQl1xQMjjSNbfUW4kVVPAMZ59PzymQYZGHZf3uHetjOrVvmkm29ENXVEPlYvmTMisb
         Y93MoYb2hx4WBhqGEu4Y0xMnoYW/higW2is3ACCE6REm1ySXs3NxpNuLjMLiXIuVqzsC
         Ata4+afgkGlCJreuxAul9ZA2jLlvPbAXf4qwM=
MIME-Version: 1.0
Received: by 10.100.38.5 with SMTP id l5mr9102492anl.183.1245086059986; Mon, 
	15 Jun 2009 10:14:19 -0700 (PDT)
In-Reply-To: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>
Date: Mon, 15 Jun 2009 13:14:19 -0400
Message-ID: <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
Subject: Re: Lucene and multi-lingual Unicode - advice needed
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

(Since this is an issue you brought up on the Compass forums)

I wonder what stage you are in the development process?
Have you considered SolR, or does compass provide some other
functionality that you need?

The reason I say this, is because the easiest solution might be to use
a nightly SolR for your application.

I'm not personally biased one way or the other for any particular
framework, but recently there has been some improvements added to SolR
so that the default type 'text' is pretty good for multilingual
processing.

In fact I hope in the future it will be improved in lucene so that
your decision is really based upon other application needs...

On Mon, Jun 15, 2009 at 1:10 PM, OBender Hotmail<osya_bender@hotmail.com> wrote:
> Hi All!
>
>
>
> I'm new to Lucene so forgive me if this question was asked before.
>
> I have a database with records in the same table in many different languages
> (up to 70) it includes all W-European, Arabic, Eastern, CJK, Cyrillic, etc.
> you name it.
> I've looked at what people say about Lucene and it looks like for the most
> part standard analyzers should do fine with most Unicode languages but there
> are quite a few exceptions.
> Here is some recently updated Lucene Jira thread:
> https://issues.apache.org/jira/browse/LUCENE-1488
>
> My question is, what would be the safest bet for me in terms of
> analyzers/tokenizers?
> Do I really have to write my own ones for the bunch of languages that are
> not supported?
> Did anyone already solve the problem similar to mine? I'm sure someone
> already did :)
>
> And yes, I looked at the Lucene sandbox analyzers. It just adds more
> confusion. For example why there analyzers for DE and FR? Wouldn't the
> standard analyzer (which is Unicode complaint as I understood) deal with EU
> languages just fine?
>
> Thanks in advance for advices :)
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 17:47:43 2009
Return-Path: <java-user-return-40750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65107 invoked from network); 15 Jun 2009 17:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 17:47:43 -0000
Received: (qmail 32920 invoked by uid 500); 15 Jun 2009 17:47:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32847 invoked by uid 500); 15 Jun 2009 17:47:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32837 invoked by uid 99); 15 Jun 2009 17:47:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 17:47:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 17:47:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MGGHB-0004nS-AN
	for java-user@lucene.apache.org; Mon, 15 Jun 2009 10:47:21 -0700
Message-ID: <24039468.post@talk.nabble.com>
Date: Mon, 15 Jun 2009 10:47:21 -0700 (PDT)
From: faisalloe <faisalloe@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene highligher snowball analyzer highlight stem words
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: faisalloe@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am having the following method to highlight the terms.

 public static String getHighlighter(String colName, Highlighter
highlighter,IndexSearcher searcher,int id, Analyzer analyzer) throws
IOException {
		  String highlightTerm;
		  TokenStream tokenStream; 		
		  Document doc;
		  doc = searcher.doc(id);//document id
		  highlighter.setTextFragmenter(fragmenter);												     
		  String text =  doc.get(colName);//doc.get("all_attributes");
		  //tokenStream =
TokenSources.getAnyTokenStream(searcher.getIndexReader(), id,
"all_attributes", analyzer);
		  tokenStream = TokenSources.getAnyTokenStream(searcher.getIndexReader(),
id, colName, new StandardAnalyzer());
		  highlightTerm = highlighter.getBestFragments(tokenStream, text, 1,
"...");		  
		  return highlightTerm;
	  }

i am using snowball analyzer to search stem words, i wonder stem words could
not be highlighted.

Please guide me how to proceed. if i use standranalyzer for  highlighting
terms it works fine.

-- 
View this message in context: http://www.nabble.com/lucene-highligher-snowball-analyzer-highlight-stem-words-tp24039468p24039468.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 20:19:50 2009
Return-Path: <java-user-return-40751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70827 invoked from network); 15 Jun 2009 20:19:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 20:19:50 -0000
Received: (qmail 62713 invoked by uid 500); 15 Jun 2009 20:19:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62652 invoked by uid 500); 15 Jun 2009 20:19:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62642 invoked by uid 99); 15 Jun 2009 20:19:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 20:19:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.230 as permitted sender)
Received: from [65.54.246.230] (HELO bay0-omc3-s30.bay0.hotmail.com) (65.54.246.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 20:19:49 +0000
Received: from BAY119-DS6 ([207.46.9.23]) by bay0-omc3-s30.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 15 Jun 2009 13:19:29 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl>
From: "OBender Hotmail" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl> <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
In-Reply-To: <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
Subject: RE: Lucene and multi-lingual Unicode - advice needed
Date: Mon, 15 Jun 2009 16:19:27 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acnt3MruVMd/fweWTwy+90fXBnV11gAGTdrw
Content-Language: en-us
X-OriginalArrivalTime: 15 Jun 2009 20:19:29.0086 (UTC) FILETIME=[95FC7DE0:01C9EDF6]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

My goal is to find a framework that encapsulates as much low level =
indexing/search technology as possible and have it integrate nicely with =
Spring.
It looked like Compass was/is a good encapsulation of the functionality. =
I'll take a look at SolR though, thanks for the pointer.=20

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, June 15, 2009 1:14 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene and multi-lingual Unicode - advice needed

Hi,

(Since this is an issue you brought up on the Compass forums)

I wonder what stage you are in the development process?
Have you considered SolR, or does compass provide some other
functionality that you need?

The reason I say this, is because the easiest solution might be to use
a nightly SolR for your application.

I'm not personally biased one way or the other for any particular
framework, but recently there has been some improvements added to SolR
so that the default type 'text' is pretty good for multilingual
processing.

In fact I hope in the future it will be improved in lucene so that
your decision is really based upon other application needs...

On Mon, Jun 15, 2009 at 1:10 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
> Hi All!
>
>
>
> I'm new to Lucene so forgive me if this question was asked before.
>
> I have a database with records in the same table in many different =
languages
> (up to 70) it includes all W-European, Arabic, Eastern, CJK, Cyrillic, =
etc.
> you name it.
> I've looked at what people say about Lucene and it looks like for the =
most
> part standard analyzers should do fine with most Unicode languages but =
there
> are quite a few exceptions.
> Here is some recently updated Lucene Jira thread:
> https://issues.apache.org/jira/browse/LUCENE-1488
>
> My question is, what would be the safest bet for me in terms of
> analyzers/tokenizers?
> Do I really have to write my own ones for the bunch of languages that =
are
> not supported?
> Did anyone already solve the problem similar to mine? I'm sure someone
> already did :)
>
> And yes, I looked at the Lucene sandbox analyzers. It just adds more
> confusion. For example why there analyzers for DE and FR? Wouldn't the
> standard analyzer (which is Unicode complaint as I understood) deal =
with EU
> languages just fine?
>
> Thanks in advance for advices :)
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 20:51:40 2009
Return-Path: <java-user-return-40752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79524 invoked from network); 15 Jun 2009 20:51:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 20:51:40 -0000
Received: (qmail 9212 invoked by uid 500); 15 Jun 2009 20:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9135 invoked by uid 500); 15 Jun 2009 20:51:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9125 invoked by uid 99); 15 Jun 2009 20:51:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 20:51:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 20:51:40 +0000
Received: by an-out-0708.google.com with SMTP id b6so3380785ana.5
        for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 13:51:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=2IUklOlEYzesiqXVo5V4MBe5hOPwke3rzHKPhqWC2UI=;
        b=pUctKUYDNphvDB/r/2V9syfW6KHKexhUljsyAh5NLuZS+RDLdm8wL3cHShqaj2IGEt
         ormPaZ/lpuVOwDtOc1I0bR0N6nJLlGRJlrhsWM4Z7TxZL0FhSgpBUayt5SQJ8juZrwfU
         ESig9v5gkXuTtTfCVEO3TwhlQr5P9TYivxoNQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=qhl+UFqJB72RJmfmThlJzlxYAwdNSSwWN6EmxEK4l+vlhlEsFuyIydwJghCP+S3nod
         uKxMcyjAvyw70byKzYj6RZ0abzeQfrRQ/X2Jb+C5YugTKbw0vpmveoYN8edySa7mIB9L
         6Z3YaE9iRf/UWINEb3LoEk8RdAyK5HVXjSnQ0=
MIME-Version: 1.0
Received: by 10.100.32.13 with SMTP id f13mr9526698anf.36.1245099078995; Mon, 
	15 Jun 2009 13:51:18 -0700 (PDT)
In-Reply-To: <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>
	 <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
	 <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl>
Date: Mon, 15 Jun 2009 16:51:18 -0400
Message-ID: <8f0ad1f30906151351obb93193v7c5049fe59c29aeb@mail.gmail.com>
Subject: Re: Lucene and multi-lingual Unicode - advice needed
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Well just reply back if SolR is inappropriate for your needs.

In that case, you will need to build a custom analyzer (its not too
bad), so that you can use compass.

On Mon, Jun 15, 2009 at 4:19 PM, OBender Hotmail<osya_bender@hotmail.com> wrote:
> Hi,
>
> My goal is to find a framework that encapsulates as much low level indexing/search technology as possible and have it integrate nicely with Spring.
> It looked like Compass was/is a good encapsulation of the functionality. I'll take a look at SolR though, thanks for the pointer.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, June 15, 2009 1:14 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>
> Hi,
>
> (Since this is an issue you brought up on the Compass forums)
>
> I wonder what stage you are in the development process?
> Have you considered SolR, or does compass provide some other
> functionality that you need?
>
> The reason I say this, is because the easiest solution might be to use
> a nightly SolR for your application.
>
> I'm not personally biased one way or the other for any particular
> framework, but recently there has been some improvements added to SolR
> so that the default type 'text' is pretty good for multilingual
> processing.
>
> In fact I hope in the future it will be improved in lucene so that
> your decision is really based upon other application needs...
>
> On Mon, Jun 15, 2009 at 1:10 PM, OBender Hotmail<osya_bender@hotmail.com> wrote:
>> Hi All!
>>
>>
>>
>> I'm new to Lucene so forgive me if this question was asked before.
>>
>> I have a database with records in the same table in many different languages
>> (up to 70) it includes all W-European, Arabic, Eastern, CJK, Cyrillic, etc.
>> you name it.
>> I've looked at what people say about Lucene and it looks like for the most
>> part standard analyzers should do fine with most Unicode languages but there
>> are quite a few exceptions.
>> Here is some recently updated Lucene Jira thread:
>> https://issues.apache.org/jira/browse/LUCENE-1488
>>
>> My question is, what would be the safest bet for me in terms of
>> analyzers/tokenizers?
>> Do I really have to write my own ones for the bunch of languages that are
>> not supported?
>> Did anyone already solve the problem similar to mine? I'm sure someone
>> already did :)
>>
>> And yes, I looked at the Lucene sandbox analyzers. It just adds more
>> confusion. For example why there analyzers for DE and FR? Wouldn't the
>> standard analyzer (which is Unicode complaint as I understood) deal with EU
>> languages just fine?
>>
>> Thanks in advance for advices :)
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 21:39:48 2009
Return-Path: <java-user-return-40753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2997 invoked from network); 15 Jun 2009 21:39:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 21:39:48 -0000
Received: (qmail 81770 invoked by uid 500); 15 Jun 2009 21:39:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81704 invoked by uid 500); 15 Jun 2009 21:39:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81694 invoked by uid 99); 15 Jun 2009 21:39:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 21:39:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.227 as permitted sender)
Received: from [65.54.246.227] (HELO bay0-omc3-s27.bay0.hotmail.com) (65.54.246.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 21:39:47 +0000
Received: from BAY119-DS10 ([207.46.9.27]) by bay0-omc3-s27.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 15 Jun 2009 14:39:27 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS10EB6FD7ACD6105BE93ED68E3E0@phx.gbl>
From: "OBender Hotmail" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>	 <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>	 <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl> <8f0ad1f30906151351obb93193v7c5049fe59c29aeb@mail.gmail.com>
In-Reply-To: <8f0ad1f30906151351obb93193v7c5049fe59c29aeb@mail.gmail.com>
Subject: RE: Lucene and multi-lingual Unicode - advice needed
Date: Mon, 15 Jun 2009 17:39:26 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acnt+xwNyz4HU/YeRiupy6yNyeE1owABnBig
Content-Language: en-us
X-OriginalArrivalTime: 15 Jun 2009 21:39:27.0099 (UTC) FILETIME=[C1D32CB0:01C9EE01]
X-Virus-Checked: Checked by ClamAV on apache.org

I've looked over SolR quickly, it is a bit too heavy for my project.
So what is required (at a minimum) to build an analyzer, sandbox has a =
few of them varying in complexity.

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, June 15, 2009 4:51 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene and multi-lingual Unicode - advice needed

Well just reply back if SolR is inappropriate for your needs.

In that case, you will need to build a custom analyzer (its not too
bad), so that you can use compass.

On Mon, Jun 15, 2009 at 4:19 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
> Hi,
>
> My goal is to find a framework that encapsulates as much low level =
indexing/search technology as possible and have it integrate nicely with =
Spring.
> It looked like Compass was/is a good encapsulation of the =
functionality. I'll take a look at SolR though, thanks for the pointer.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, June 15, 2009 1:14 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>
> Hi,
>
> (Since this is an issue you brought up on the Compass forums)
>
> I wonder what stage you are in the development process?
> Have you considered SolR, or does compass provide some other
> functionality that you need?
>
> The reason I say this, is because the easiest solution might be to use
> a nightly SolR for your application.
>
> I'm not personally biased one way or the other for any particular
> framework, but recently there has been some improvements added to SolR
> so that the default type 'text' is pretty good for multilingual
> processing.
>
> In fact I hope in the future it will be improved in lucene so that
> your decision is really based upon other application needs...
>
> On Mon, Jun 15, 2009 at 1:10 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>> Hi All!
>>
>>
>>
>> I'm new to Lucene so forgive me if this question was asked before.
>>
>> I have a database with records in the same table in many different =
languages
>> (up to 70) it includes all W-European, Arabic, Eastern, CJK, =
Cyrillic, etc.
>> you name it.
>> I've looked at what people say about Lucene and it looks like for the =
most
>> part standard analyzers should do fine with most Unicode languages =
but there
>> are quite a few exceptions.
>> Here is some recently updated Lucene Jira thread:
>> https://issues.apache.org/jira/browse/LUCENE-1488
>>
>> My question is, what would be the safest bet for me in terms of
>> analyzers/tokenizers?
>> Do I really have to write my own ones for the bunch of languages that =
are
>> not supported?
>> Did anyone already solve the problem similar to mine? I'm sure =
someone
>> already did :)
>>
>> And yes, I looked at the Lucene sandbox analyzers. It just adds more
>> confusion. For example why there analyzers for DE and FR? Wouldn't =
the
>> standard analyzer (which is Unicode complaint as I understood) deal =
with EU
>> languages just fine?
>>
>> Thanks in advance for advices :)
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 15 21:56:00 2009
Return-Path: <java-user-return-40754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15369 invoked from network); 15 Jun 2009 21:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jun 2009 21:56:00 -0000
Received: (qmail 7866 invoked by uid 500); 15 Jun 2009 21:56:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7788 invoked by uid 500); 15 Jun 2009 21:56:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7771 invoked by uid 99); 15 Jun 2009 21:56:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 21:56:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.210.180 as permitted sender)
Received: from [209.85.210.180] (HELO mail-yx0-f180.google.com) (209.85.210.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jun 2009 21:56:01 +0000
Received: by yxe10 with SMTP id 10so35817yxe.29
        for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 14:55:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=effRaD9S6Mno99pzvUUtLtuz7Lc2dZPjsT/MORKdvqo=;
        b=L4OlDqdWjuh7W3nReZJcV7dbkQMagOpstJl79t2E3ywjWMq1oBfJ1ZRN5+cCmGHLy5
         trPHUrDsdGGvPwQarmjeJL7SMKtL/iXCf2W/kOkiBHKRN4cGSJ0zWa/niIa4SlNFuGtH
         pGvjrdPpo5bwOoO6rOVaQV+p0tBu96WXS4INU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=KfVUi7qZvi14lz1mipaW7L+zwrBtC0NutYjJfsEBSY2hQYRxaaA8xI91kUPrfiYTL6
         SfzhHdKFAJf84EHFXKnnSGCTWLHsfDazfEX9NF42uvkNYnVFpy181YvxWxka9Psoj/SM
         cfV9R9F/vnW7lupWV1Ceg9u/GxZXuBAVCP868=
MIME-Version: 1.0
Received: by 10.100.95.11 with SMTP id s11mr9388142anb.118.1245102940591; Mon, 
	15 Jun 2009 14:55:40 -0700 (PDT)
In-Reply-To: <BAY119-DS10EB6FD7ACD6105BE93ED68E3E0@phx.gbl>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>
	 <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
	 <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl>
	 <8f0ad1f30906151351obb93193v7c5049fe59c29aeb@mail.gmail.com>
	 <BAY119-DS10EB6FD7ACD6105BE93ED68E3E0@phx.gbl>
Date: Mon, 15 Jun 2009 17:55:40 -0400
Message-ID: <8f0ad1f30906151455o3b8c0dafu7a70d52fa4469d6@mail.gmail.com>
Subject: Re: Lucene and multi-lingual Unicode - advice needed
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

its not too bad, here would be a simple one that only breaks words on
whitespace and lowercases:

public class Example extends Analyzer {
 public TokenStream tokenStream(String fieldName, Reader reader) {
   TokenStream ts = new WhitespaceTokenizer(reader);
   ts = new LowerCaseFilter(ts);
   return ts;
 }
}

can you give a better idea as to what languages you have and what your
search requirements are (accent marks, punctuation, etc etc) ?

On Mon, Jun 15, 2009 at 5:39 PM, OBender Hotmail<osya_bender@hotmail.com> wrote:
> I've looked over SolR quickly, it is a bit too heavy for my project.
> So what is required (at a minimum) to build an analyzer, sandbox has a few of them varying in complexity.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, June 15, 2009 4:51 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>
> Well just reply back if SolR is inappropriate for your needs.
>
> In that case, you will need to build a custom analyzer (its not too
> bad), so that you can use compass.
>
> On Mon, Jun 15, 2009 at 4:19 PM, OBender Hotmail<osya_bender@hotmail.com> wrote:
>> Hi,
>>
>> My goal is to find a framework that encapsulates as much low level indexing/search technology as possible and have it integrate nicely with Spring.
>> It looked like Compass was/is a good encapsulation of the functionality. I'll take a look at SolR though, thanks for the pointer.
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, June 15, 2009 1:14 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>
>> Hi,
>>
>> (Since this is an issue you brought up on the Compass forums)
>>
>> I wonder what stage you are in the development process?
>> Have you considered SolR, or does compass provide some other
>> functionality that you need?
>>
>> The reason I say this, is because the easiest solution might be to use
>> a nightly SolR for your application.
>>
>> I'm not personally biased one way or the other for any particular
>> framework, but recently there has been some improvements added to SolR
>> so that the default type 'text' is pretty good for multilingual
>> processing.
>>
>> In fact I hope in the future it will be improved in lucene so that
>> your decision is really based upon other application needs...
>>
>> On Mon, Jun 15, 2009 at 1:10 PM, OBender Hotmail<osya_bender@hotmail.com> wrote:
>>> Hi All!
>>>
>>>
>>>
>>> I'm new to Lucene so forgive me if this question was asked before.
>>>
>>> I have a database with records in the same table in many different languages
>>> (up to 70) it includes all W-European, Arabic, Eastern, CJK, Cyrillic, etc.
>>> you name it.
>>> I've looked at what people say about Lucene and it looks like for the most
>>> part standard analyzers should do fine with most Unicode languages but there
>>> are quite a few exceptions.
>>> Here is some recently updated Lucene Jira thread:
>>> https://issues.apache.org/jira/browse/LUCENE-1488
>>>
>>> My question is, what would be the safest bet for me in terms of
>>> analyzers/tokenizers?
>>> Do I really have to write my own ones for the bunch of languages that are
>>> not supported?
>>> Did anyone already solve the problem similar to mine? I'm sure someone
>>> already did :)
>>>
>>> And yes, I looked at the Lucene sandbox analyzers. It just adds more
>>> confusion. For example why there analyzers for DE and FR? Wouldn't the
>>> standard analyzer (which is Unicode complaint as I understood) deal with EU
>>> languages just fine?
>>>
>>> Thanks in advance for advices :)
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 01:19:00 2009
Return-Path: <java-user-return-40755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98781 invoked from network); 16 Jun 2009 01:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 01:19:00 -0000
Received: (qmail 23587 invoked by uid 500); 16 Jun 2009 01:19:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23507 invoked by uid 500); 16 Jun 2009 01:19:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23492 invoked by uid 99); 16 Jun 2009 01:19:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 01:19:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.155 as permitted sender)
Received: from [65.54.246.155] (HELO bay0-omc2-s19.bay0.hotmail.com) (65.54.246.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 01:18:57 +0000
Received: from hotmail.com ([207.46.9.15]) by bay0-omc2-s19.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 15 Jun 2009 18:18:37 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 15 Jun 2009 18:18:36 -0700
Message-ID: <BAY119-DAV578F44A4C25369C7C7BEB8E3F0@phx.gbl>
Received: from 24.61.92.31 by BAY119-DAV5.phx.gbl with DAV;
	Tue, 16 Jun 2009 01:18:36 +0000
X-Originating-IP: [24.61.92.31]
X-Originating-Email: [osya_bender@hotmail.com]
X-Sender: osya_bender@hotmail.com
From: "OBender Hotmail" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl> <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com> <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl> <8f0ad1f30906151351obb93193v7c5049fe59c29aeb@mail.gmail.com> <BAY119-DS10EB6FD7ACD6105BE93ED68E3E0@phx.gbl> <8f0ad1f30906151455o3b8c0dafu7a70d52fa4469d6@mail.gmail.com>
Subject: RE: Lucene and multi-lingual Unicode - advice needed
Date: Mon, 15 Jun 2009 21:18:37 -0400
Message-ID: <BC302D276E654959933B59B7EB79CB14@VELADEV>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
thread-index: AcnuBBjKcxj00TzpTZiLi0BUInFAlwAGw67w
In-Reply-To: <8f0ad1f30906151455o3b8c0dafu7a70d52fa4469d6@mail.gmail.com>
X-OriginalArrivalTime: 16 Jun 2009 01:18:36.0833 (UTC) FILETIME=[5FAD5910:01C9EE20]
X-Virus-Checked: Checked by ClamAV on apache.org

Here is the list of possible languages. Don't laugh :) I know those are =
almost all world languages but it is a true requirement. Well, actual =
number will be closer to 70 not 100 but still I don't really know which =
ones from the list below will end up in the DB.

-------
Afrikaans  Albanian Arabic Armenian Austrian Aymara Azerbaijani
Basque Belorussian Bemba Bengali Blackfoot Bosnian Breton Bulgarian     =
Canadian French  Catalan Cebuano Chamorro Chinese Chechen Cornish =
Croatian Czech
Danish Dutch
Ecuadorian Quechua  English  English-Portuguese Esperanto Estonian
Faroese Farsi Finnish Flemish French Frisian=20
Galician Georgian German Greek Guarani
Haitian Creole  Hausa Hawaiian Hebrew Hindi Hungarian Icelandic =
Indonesian     Inuktitut Irish Italian
Japanese
Kazakh Kongo Korean
Latin Latvian Lithuanian Luganda Luxembourgish
Macedonian Malagasy Malay Maori Maya Mohawk Mongolian
Nahuatl Norwegian
Papago Pashto Pidgin English Polish Portuguese (European)=20
Portuguese (Brazilian) Proven=C3=A7al
Quechua
Romanian Romansch Romany Ruanda Russian
Samoan Scottish Sepedi Serbian Shona Sicilian Slovak Slovene Somali    =
Sorbian Sotho Spanish Swahili Swazi Swedish
Tagalog Tahitian Thai Tongan Tswana Turkish Turkmen Tuvan
Ukrainian Urdu Uzbek Vietnamese
Welsh Wolof
Xhosa
Yiddish Yoruba
Zulu

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, June 15, 2009 5:56 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene and multi-lingual Unicode - advice needed

its not too bad, here would be a simple one that only breaks words on
whitespace and lowercases:

public class Example extends Analyzer {
 public TokenStream tokenStream(String fieldName, Reader reader) {
   TokenStream ts =3D new WhitespaceTokenizer(reader);
   ts =3D new LowerCaseFilter(ts);
   return ts;
 }
}

can you give a better idea as to what languages you have and what your
search requirements are (accent marks, punctuation, etc etc) ?

On Mon, Jun 15, 2009 at 5:39 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
> I've looked over SolR quickly, it is a bit too heavy for my project.
> So what is required (at a minimum) to build an analyzer, sandbox has a =
few of them varying in complexity.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, June 15, 2009 4:51 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>
> Well just reply back if SolR is inappropriate for your needs.
>
> In that case, you will need to build a custom analyzer (its not too
> bad), so that you can use compass.
>
> On Mon, Jun 15, 2009 at 4:19 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>> Hi,
>>
>> My goal is to find a framework that encapsulates as much low level =
indexing/search technology as possible and have it integrate nicely with =
Spring.
>> It looked like Compass was/is a good encapsulation of the =
functionality. I'll take a look at SolR though, thanks for the pointer.
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, June 15, 2009 1:14 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>
>> Hi,
>>
>> (Since this is an issue you brought up on the Compass forums)
>>
>> I wonder what stage you are in the development process?
>> Have you considered SolR, or does compass provide some other
>> functionality that you need?
>>
>> The reason I say this, is because the easiest solution might be to =
use
>> a nightly SolR for your application.
>>
>> I'm not personally biased one way or the other for any particular
>> framework, but recently there has been some improvements added to =
SolR
>> so that the default type 'text' is pretty good for multilingual
>> processing.
>>
>> In fact I hope in the future it will be improved in lucene so that
>> your decision is really based upon other application needs...
>>
>> On Mon, Jun 15, 2009 at 1:10 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>>> Hi All!
>>>
>>>
>>>
>>> I'm new to Lucene so forgive me if this question was asked before.
>>>
>>> I have a database with records in the same table in many different =
languages
>>> (up to 70) it includes all W-European, Arabic, Eastern, CJK, =
Cyrillic, etc.
>>> you name it.
>>> I've looked at what people say about Lucene and it looks like for =
the most
>>> part standard analyzers should do fine with most Unicode languages =
but there
>>> are quite a few exceptions.
>>> Here is some recently updated Lucene Jira thread:
>>> https://issues.apache.org/jira/browse/LUCENE-1488
>>>
>>> My question is, what would be the safest bet for me in terms of
>>> analyzers/tokenizers?
>>> Do I really have to write my own ones for the bunch of languages =
that are
>>> not supported?
>>> Did anyone already solve the problem similar to mine? I'm sure =
someone
>>> already did :)
>>>
>>> And yes, I looked at the Lucene sandbox analyzers. It just adds more
>>> confusion. For example why there analyzers for DE and FR? Wouldn't =
the
>>> standard analyzer (which is Unicode complaint as I understood) deal =
with EU
>>> languages just fine?
>>>
>>> Thanks in advance for advices :)
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


No virus found in this incoming message.
Checked by AVG - www.avg.com=20
Version: 8.5.339 / Virus Database: 270.12.62/2168 - Release Date: =
06/15/09 17:54:00


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 01:52:16 2009
Return-Path: <java-user-return-40756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14140 invoked from network); 16 Jun 2009 01:52:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 01:52:15 -0000
Received: (qmail 44455 invoked by uid 500); 16 Jun 2009 01:52:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44383 invoked by uid 500); 16 Jun 2009 01:52:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44373 invoked by uid 99); 16 Jun 2009 01:52:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 01:52:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 01:52:14 +0000
Received: by an-out-0708.google.com with SMTP id b6so3473451ana.5
        for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 18:51:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=bwj+M8zUydWnxLqdePXp2+SMl3Ok2H6ntUxwWZSKf88=;
        b=OnMefUwAhKJotfJBHLht3vAK3ZPhl/iKXUAK7W/Alk1T3rNeRJkRkfIUTK8HH5JMMj
         OCspijCNIbTv9p5Rg+oYTnJ9jfkcVK3O2YmMQO0hzPfDUm/4URFJH2w093dam7fd/Xv5
         JXFn4sVA8qSNNNQSE8UCUJYhq+NPqljtDZPn8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=BUmtPZfImdJRQXfI1JrALajWX6WoXjfbd7dmMjHqyhH+/oWy+kzSSiMn51nNeSId48
         fxJlNzG4iAZomatflz5puXdpNCeO4JQckudsDh7n53imoY9/2HjKAqr6LJGRpW+eh9ra
         7i5j5YhBCX6clLm9F/LsiII9hv4ap+XHUypeU=
MIME-Version: 1.0
Received: by 10.100.126.19 with SMTP id y19mr9838789anc.46.1245117112024; Mon, 
	15 Jun 2009 18:51:52 -0700 (PDT)
In-Reply-To: <BAY119-DAV578F44A4C25369C7C7BEB8E3F0@phx.gbl>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>
	 <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
	 <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl>
	 <8f0ad1f30906151351obb93193v7c5049fe59c29aeb@mail.gmail.com>
	 <BAY119-DS10EB6FD7ACD6105BE93ED68E3E0@phx.gbl>
	 <8f0ad1f30906151455o3b8c0dafu7a70d52fa4469d6@mail.gmail.com>
	 <BAY119-DAV578F44A4C25369C7C7BEB8E3F0@phx.gbl>
Date: Mon, 15 Jun 2009 21:51:48 -0400
Message-ID: <8f0ad1f30906151851p561f797elcb737f3eb558f750@mail.gmail.com>
Subject: Re: Lucene and multi-lingual Unicode - advice needed
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Really, you have a requirement that the system should search written Cornis=
h?

I think you might have larger problems!

On Mon, Jun 15, 2009 at 9:18 PM, OBender Hotmail<osya_bender@hotmail.com> w=
rote:
> Here is the list of possible languages. Don't laugh :) I know those are a=
lmost all world languages but it is a true requirement. Well, actual number=
 will be closer to 70 not 100 but still I don't really know which ones from=
 the list below will end up in the DB.
>
> -------
> Afrikaans =C2=A0Albanian Arabic Armenian Austrian Aymara Azerbaijani
> Basque Belorussian Bemba Bengali Blackfoot Bosnian Breton Bulgarian =C2=
=A0 =C2=A0 Canadian French =C2=A0Catalan Cebuano Chamorro Chinese Chechen C=
ornish Croatian Czech
> Danish Dutch
> Ecuadorian Quechua =C2=A0English =C2=A0English-Portuguese Esperanto Eston=
ian
> Faroese Farsi Finnish Flemish French Frisian
> Galician Georgian German Greek Guarani
> Haitian Creole =C2=A0Hausa Hawaiian Hebrew Hindi Hungarian Icelandic Indo=
nesian =C2=A0 =C2=A0 Inuktitut Irish Italian
> Japanese
> Kazakh Kongo Korean
> Latin Latvian Lithuanian Luganda Luxembourgish
> Macedonian Malagasy Malay Maori Maya Mohawk Mongolian
> Nahuatl Norwegian
> Papago Pashto Pidgin English Polish Portuguese (European)
> Portuguese (Brazilian) Proven=C3=A7al
> Quechua
> Romanian Romansch Romany Ruanda Russian
> Samoan Scottish Sepedi Serbian Shona Sicilian Slovak Slovene Somali =C2=
=A0 =C2=A0Sorbian Sotho Spanish Swahili Swazi Swedish
> Tagalog Tahitian Thai Tongan Tswana Turkish Turkmen Tuvan
> Ukrainian Urdu Uzbek Vietnamese
> Welsh Wolof
> Xhosa
> Yiddish Yoruba
> Zulu
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, June 15, 2009 5:56 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>
> its not too bad, here would be a simple one that only breaks words on
> whitespace and lowercases:
>
> public class Example extends Analyzer {
> =C2=A0public TokenStream tokenStream(String fieldName, Reader reader) {
> =C2=A0 TokenStream ts =3D new WhitespaceTokenizer(reader);
> =C2=A0 ts =3D new LowerCaseFilter(ts);
> =C2=A0 return ts;
> =C2=A0}
> }
>
> can you give a better idea as to what languages you have and what your
> search requirements are (accent marks, punctuation, etc etc) ?
>
> On Mon, Jun 15, 2009 at 5:39 PM, OBender Hotmail<osya_bender@hotmail.com>=
 wrote:
>> I've looked over SolR quickly, it is a bit too heavy for my project.
>> So what is required (at a minimum) to build an analyzer, sandbox has a f=
ew of them varying in complexity.
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, June 15, 2009 4:51 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>
>> Well just reply back if SolR is inappropriate for your needs.
>>
>> In that case, you will need to build a custom analyzer (its not too
>> bad), so that you can use compass.
>>
>> On Mon, Jun 15, 2009 at 4:19 PM, OBender Hotmail<osya_bender@hotmail.com=
> wrote:
>>> Hi,
>>>
>>> My goal is to find a framework that encapsulates as much low level inde=
xing/search technology as possible and have it integrate nicely with Spring=
.
>>> It looked like Compass was/is a good encapsulation of the functionality=
. I'll take a look at SolR though, thanks for the pointer.
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, June 15, 2009 1:14 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>>
>>> Hi,
>>>
>>> (Since this is an issue you brought up on the Compass forums)
>>>
>>> I wonder what stage you are in the development process?
>>> Have you considered SolR, or does compass provide some other
>>> functionality that you need?
>>>
>>> The reason I say this, is because the easiest solution might be to use
>>> a nightly SolR for your application.
>>>
>>> I'm not personally biased one way or the other for any particular
>>> framework, but recently there has been some improvements added to SolR
>>> so that the default type 'text' is pretty good for multilingual
>>> processing.
>>>
>>> In fact I hope in the future it will be improved in lucene so that
>>> your decision is really based upon other application needs...
>>>
>>> On Mon, Jun 15, 2009 at 1:10 PM, OBender Hotmail<osya_bender@hotmail.co=
m> wrote:
>>>> Hi All!
>>>>
>>>>
>>>>
>>>> I'm new to Lucene so forgive me if this question was asked before.
>>>>
>>>> I have a database with records in the same table in many different lan=
guages
>>>> (up to 70) it includes all W-European, Arabic, Eastern, CJK, Cyrillic,=
 etc.
>>>> you name it.
>>>> I've looked at what people say about Lucene and it looks like for the =
most
>>>> part standard analyzers should do fine with most Unicode languages but=
 there
>>>> are quite a few exceptions.
>>>> Here is some recently updated Lucene Jira thread:
>>>> https://issues.apache.org/jira/browse/LUCENE-1488
>>>>
>>>> My question is, what would be the safest bet for me in terms of
>>>> analyzers/tokenizers?
>>>> Do I really have to write my own ones for the bunch of languages that =
are
>>>> not supported?
>>>> Did anyone already solve the problem similar to mine? I'm sure someone
>>>> already did :)
>>>>
>>>> And yes, I looked at the Lucene sandbox analyzers. It just adds more
>>>> confusion. For example why there analyzers for DE and FR? Wouldn't the
>>>> standard analyzer (which is Unicode complaint as I understood) deal wi=
th EU
>>>> languages just fine?
>>>>
>>>> Thanks in advance for advices :)
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> No virus found in this incoming message.
> Checked by AVG - www.avg.com
> Version: 8.5.339 / Virus Database: 270.12.62/2168 - Release Date: 06/15/0=
9 17:54:00
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 02:30:41 2009
Return-Path: <java-user-return-40757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39132 invoked from network); 16 Jun 2009 02:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 02:30:41 -0000
Received: (qmail 80986 invoked by uid 500); 16 Jun 2009 02:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80913 invoked by uid 500); 16 Jun 2009 02:30:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80903 invoked by uid 99); 16 Jun 2009 02:30:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 02:30:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.226 as permitted sender)
Received: from [65.54.246.226] (HELO bay0-omc3-s26.bay0.hotmail.com) (65.54.246.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 02:30:36 +0000
Received: from hotmail.com ([207.46.9.13]) by bay0-omc3-s26.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 15 Jun 2009 19:30:15 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 15 Jun 2009 19:30:15 -0700
Message-ID: <BAY119-DAV3201A75E61A0F045C77AA8E3F0@phx.gbl>
Received: from 24.61.92.31 by BAY119-DAV3.phx.gbl with DAV;
	Tue, 16 Jun 2009 02:30:13 +0000
X-Originating-IP: [24.61.92.31]
X-Originating-Email: [osya_bender@hotmail.com]
X-Sender: osya_bender@hotmail.com
From: "OBender Hotmail" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl> <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com> <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl> <8f0ad1f30906151351obb93193v7c5049fe59c29aeb@mail.gmail.com> <BAY119-DS10EB6FD7ACD6105BE93ED68E3E0@phx.gbl> <8f0ad1f30906151455o3b8c0dafu7a70d52fa4469d6@mail.gmail.com> <BAY119-DAV578F44A4C25369C7C7BEB8E3F0@phx.gbl> <8f0ad1f30906151851p561f797elcb737f3eb558f750@mail.gmail.com>
Subject: RE: Lucene and multi-lingual Unicode - advice needed
Date: Mon, 15 Jun 2009 22:30:14 -0400
Message-ID: <2DDFAF4456DA48C1BB20090F1989F529@VELADEV>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
thread-index: AcnuJRnArI/YOxycRZiPU6rpRmGEfwABMBeQ
In-Reply-To: <8f0ad1f30906151851p561f797elcb737f3eb558f750@mail.gmail.com>
X-OriginalArrivalTime: 16 Jun 2009 02:30:15.0253 (UTC) FILETIME=[61BC3050:01C9EE2A]
X-Virus-Checked: Checked by ClamAV on apache.org

That's the thing there is no actual requirement.
I've been presented with all the languages that company theoretically =
provides.
My guess is that what I'm going to end up with is all western languages, =
good share of Arabic family, complete set of Eastern and Eastern =
European ones and of course CJK.

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, June 15, 2009 9:52 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene and multi-lingual Unicode - advice needed

Really, you have a requirement that the system should search written =
Cornish?

I think you might have larger problems!

On Mon, Jun 15, 2009 at 9:18 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
> Here is the list of possible languages. Don't laugh :) I know those =
are almost all world languages but it is a true requirement. Well, =
actual number will be closer to 70 not 100 but still I don't really know =
which ones from the list below will end up in the DB.
>
> -------
> Afrikaans  Albanian Arabic Armenian Austrian Aymara Azerbaijani
> Basque Belorussian Bemba Bengali Blackfoot Bosnian Breton Bulgarian    =
 Canadian French  Catalan Cebuano Chamorro Chinese Chechen Cornish =
Croatian Czech
> Danish Dutch
> Ecuadorian Quechua  English  English-Portuguese Esperanto Estonian
> Faroese Farsi Finnish Flemish French Frisian
> Galician Georgian German Greek Guarani
> Haitian Creole  Hausa Hawaiian Hebrew Hindi Hungarian Icelandic =
Indonesian     Inuktitut Irish Italian
> Japanese
> Kazakh Kongo Korean
> Latin Latvian Lithuanian Luganda Luxembourgish
> Macedonian Malagasy Malay Maori Maya Mohawk Mongolian
> Nahuatl Norwegian
> Papago Pashto Pidgin English Polish Portuguese (European)
> Portuguese (Brazilian) Provencal
> Quechua
> Romanian Romansch Romany Ruanda Russian
> Samoan Scottish Sepedi Serbian Shona Sicilian Slovak Slovene Somali    =
Sorbian Sotho Spanish Swahili Swazi Swedish
> Tagalog Tahitian Thai Tongan Tswana Turkish Turkmen Tuvan
> Ukrainian Urdu Uzbek Vietnamese
> Welsh Wolof
> Xhosa
> Yiddish Yoruba
> Zulu
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, June 15, 2009 5:56 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>
> its not too bad, here would be a simple one that only breaks words on
> whitespace and lowercases:
>
> public class Example extends Analyzer {
>  public TokenStream tokenStream(String fieldName, Reader reader) {
>   TokenStream ts =3D new WhitespaceTokenizer(reader);
>   ts =3D new LowerCaseFilter(ts);
>   return ts;
>  }
> }
>
> can you give a better idea as to what languages you have and what your
> search requirements are (accent marks, punctuation, etc etc) ?
>
> On Mon, Jun 15, 2009 at 5:39 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>> I've looked over SolR quickly, it is a bit too heavy for my project.
>> So what is required (at a minimum) to build an analyzer, sandbox has =
a few of them varying in complexity.
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, June 15, 2009 4:51 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>
>> Well just reply back if SolR is inappropriate for your needs.
>>
>> In that case, you will need to build a custom analyzer (its not too
>> bad), so that you can use compass.
>>
>> On Mon, Jun 15, 2009 at 4:19 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>>> Hi,
>>>
>>> My goal is to find a framework that encapsulates as much low level =
indexing/search technology as possible and have it integrate nicely with =
Spring.
>>> It looked like Compass was/is a good encapsulation of the =
functionality. I'll take a look at SolR though, thanks for the pointer.
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, June 15, 2009 1:14 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>>
>>> Hi,
>>>
>>> (Since this is an issue you brought up on the Compass forums)
>>>
>>> I wonder what stage you are in the development process?
>>> Have you considered SolR, or does compass provide some other
>>> functionality that you need?
>>>
>>> The reason I say this, is because the easiest solution might be to =
use
>>> a nightly SolR for your application.
>>>
>>> I'm not personally biased one way or the other for any particular
>>> framework, but recently there has been some improvements added to =
SolR
>>> so that the default type 'text' is pretty good for multilingual
>>> processing.
>>>
>>> In fact I hope in the future it will be improved in lucene so that
>>> your decision is really based upon other application needs...
>>>
>>> On Mon, Jun 15, 2009 at 1:10 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>>>> Hi All!
>>>>
>>>>
>>>>
>>>> I'm new to Lucene so forgive me if this question was asked before.
>>>>
>>>> I have a database with records in the same table in many different =
languages
>>>> (up to 70) it includes all W-European, Arabic, Eastern, CJK, =
Cyrillic, etc.
>>>> you name it.
>>>> I've looked at what people say about Lucene and it looks like for =
the most
>>>> part standard analyzers should do fine with most Unicode languages =
but there
>>>> are quite a few exceptions.
>>>> Here is some recently updated Lucene Jira thread:
>>>> https://issues.apache.org/jira/browse/LUCENE-1488
>>>>
>>>> My question is, what would be the safest bet for me in terms of
>>>> analyzers/tokenizers?
>>>> Do I really have to write my own ones for the bunch of languages =
that are
>>>> not supported?
>>>> Did anyone already solve the problem similar to mine? I'm sure =
someone
>>>> already did :)
>>>>
>>>> And yes, I looked at the Lucene sandbox analyzers. It just adds =
more
>>>> confusion. For example why there analyzers for DE and FR? Wouldn't =
the
>>>> standard analyzer (which is Unicode complaint as I understood) deal =
with EU
>>>> languages just fine?
>>>>
>>>> Thanks in advance for advices :)
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> No virus found in this incoming message.
> Checked by AVG - www.avg.com
> Version: 8.5.339 / Virus Database: 270.12.62/2168 - Release Date: =
06/15/09 17:54:00
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 02:45:33 2009
Return-Path: <java-user-return-40758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48663 invoked from network); 16 Jun 2009 02:45:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 02:45:33 -0000
Received: (qmail 91376 invoked by uid 500); 16 Jun 2009 02:45:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91284 invoked by uid 500); 16 Jun 2009 02:45:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91268 invoked by uid 99); 16 Jun 2009 02:45:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 02:45:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 02:45:29 +0000
Received: by an-out-0708.google.com with SMTP id b6so3489136ana.5
        for <java-user@lucene.apache.org>; Mon, 15 Jun 2009 19:45:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=IuBSiVBmbOugBrAIdBI7MFHJ0OqxaMdVHdeFP2BwMLc=;
        b=UuQOW9yo7pLA7cHWPdTiNJMFdMAe+id/DGAkBRHBIjw43shbhlHHYJVbvs97Mn3BaQ
         Y/cisT330vZ1FE1R5MZWnA6j7flGI3VUGkMbJo+lFL/vOkfvs9PfXfYsySPyat3jglfq
         AFjWmlsoq7Ef9UEj3+JnDJKlhP+GRfbaK4LBY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=h5HqCA0PWGZStKlGqzhKWEHb7tpNdzELTfeyRt6Z68zabDMRBfscXGlgI0TB03vYbu
         41I3/z8RUmR5ZVXcMBPK3frOWoROj+pp5VvXCvcKQDEeF690yq5GczCHsvSdrLPnmFAI
         cbGiD1nyKSEtEBq1zu2+ytldBAmtQISvYn2Ug=
MIME-Version: 1.0
Received: by 10.100.229.12 with SMTP id b12mr9828321anh.26.1245120307979; Mon, 
	15 Jun 2009 19:45:07 -0700 (PDT)
In-Reply-To: <BAY119-DAV3201A75E61A0F045C77AA8E3F0@phx.gbl>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>
	 <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
	 <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl>
	 <8f0ad1f30906151351obb93193v7c5049fe59c29aeb@mail.gmail.com>
	 <BAY119-DS10EB6FD7ACD6105BE93ED68E3E0@phx.gbl>
	 <8f0ad1f30906151455o3b8c0dafu7a70d52fa4469d6@mail.gmail.com>
	 <BAY119-DAV578F44A4C25369C7C7BEB8E3F0@phx.gbl>
	 <8f0ad1f30906151851p561f797elcb737f3eb558f750@mail.gmail.com>
	 <BAY119-DAV3201A75E61A0F045C77AA8E3F0@phx.gbl>
Date: Mon, 15 Jun 2009 22:45:07 -0400
Message-ID: <8f0ad1f30906151945w2c3ce5b5sc9bd6556aad3e433@mail.gmail.com>
Subject: Re: Lucene and multi-lingual Unicode - advice needed
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

ok, well at first i thought you must be playing a joke on me or something..=
.

Maybe you want to create a lucene analyzer that mimic's solr defaults.

Search the mail archives for this recent thread, and KK posted his code:
Re: How to support stemming and case folding for english content mixed
with non-english content?

Then again, maybe the sample code i gave you (whitespace + lowercase)
is good enough. By the time the company in question manages to get its
Chamorro, Cornish, Blackfoot, and Pashto testers together to evaluate
the search you will be retired :)


On Mon, Jun 15, 2009 at 10:30 PM, OBender
Hotmail<osya_bender@hotmail.com> wrote:
> That's the thing there is no actual requirement.
> I've been presented with all the languages that company theoretically pro=
vides.
> My guess is that what I'm going to end up with is all western languages, =
good share of Arabic family, complete set of Eastern and Eastern European o=
nes and of course CJK.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, June 15, 2009 9:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>
> Really, you have a requirement that the system should search written Corn=
ish?
>
> I think you might have larger problems!
>
> On Mon, Jun 15, 2009 at 9:18 PM, OBender Hotmail<osya_bender@hotmail.com>=
 wrote:
>> Here is the list of possible languages. Don't laugh :) I know those are =
almost all world languages but it is a true requirement. Well, actual numbe=
r will be closer to 70 not 100 but still I don't really know which ones fro=
m the list below will end up in the DB.
>>
>> -------
>> Afrikaans =C2=A0Albanian Arabic Armenian Austrian Aymara Azerbaijani
>> Basque Belorussian Bemba Bengali Blackfoot Bosnian Breton Bulgarian =C2=
=A0 =C2=A0 Canadian French =C2=A0Catalan Cebuano Chamorro Chinese Chechen C=
ornish Croatian Czech
>> Danish Dutch
>> Ecuadorian Quechua =C2=A0English =C2=A0English-Portuguese Esperanto Esto=
nian
>> Faroese Farsi Finnish Flemish French Frisian
>> Galician Georgian German Greek Guarani
>> Haitian Creole =C2=A0Hausa Hawaiian Hebrew Hindi Hungarian Icelandic Ind=
onesian =C2=A0 =C2=A0 Inuktitut Irish Italian
>> Japanese
>> Kazakh Kongo Korean
>> Latin Latvian Lithuanian Luganda Luxembourgish
>> Macedonian Malagasy Malay Maori Maya Mohawk Mongolian
>> Nahuatl Norwegian
>> Papago Pashto Pidgin English Polish Portuguese (European)
>> Portuguese (Brazilian) Provencal
>> Quechua
>> Romanian Romansch Romany Ruanda Russian
>> Samoan Scottish Sepedi Serbian Shona Sicilian Slovak Slovene Somali =C2=
=A0 =C2=A0Sorbian Sotho Spanish Swahili Swazi Swedish
>> Tagalog Tahitian Thai Tongan Tswana Turkish Turkmen Tuvan
>> Ukrainian Urdu Uzbek Vietnamese
>> Welsh Wolof
>> Xhosa
>> Yiddish Yoruba
>> Zulu
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, June 15, 2009 5:56 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>
>> its not too bad, here would be a simple one that only breaks words on
>> whitespace and lowercases:
>>
>> public class Example extends Analyzer {
>> =C2=A0public TokenStream tokenStream(String fieldName, Reader reader) {
>> =C2=A0 TokenStream ts =3D new WhitespaceTokenizer(reader);
>> =C2=A0 ts =3D new LowerCaseFilter(ts);
>> =C2=A0 return ts;
>> =C2=A0}
>> }
>>
>> can you give a better idea as to what languages you have and what your
>> search requirements are (accent marks, punctuation, etc etc) ?
>>
>> On Mon, Jun 15, 2009 at 5:39 PM, OBender Hotmail<osya_bender@hotmail.com=
> wrote:
>>> I've looked over SolR quickly, it is a bit too heavy for my project.
>>> So what is required (at a minimum) to build an analyzer, sandbox has a =
few of them varying in complexity.
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, June 15, 2009 4:51 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>>
>>> Well just reply back if SolR is inappropriate for your needs.
>>>
>>> In that case, you will need to build a custom analyzer (its not too
>>> bad), so that you can use compass.
>>>
>>> On Mon, Jun 15, 2009 at 4:19 PM, OBender Hotmail<osya_bender@hotmail.co=
m> wrote:
>>>> Hi,
>>>>
>>>> My goal is to find a framework that encapsulates as much low level ind=
exing/search technology as possible and have it integrate nicely with Sprin=
g.
>>>> It looked like Compass was/is a good encapsulation of the functionalit=
y. I'll take a look at SolR though, thanks for the pointer.
>>>>
>>>> -----Original Message-----
>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>> Sent: Monday, June 15, 2009 1:14 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>>>
>>>> Hi,
>>>>
>>>> (Since this is an issue you brought up on the Compass forums)
>>>>
>>>> I wonder what stage you are in the development process?
>>>> Have you considered SolR, or does compass provide some other
>>>> functionality that you need?
>>>>
>>>> The reason I say this, is because the easiest solution might be to use
>>>> a nightly SolR for your application.
>>>>
>>>> I'm not personally biased one way or the other for any particular
>>>> framework, but recently there has been some improvements added to SolR
>>>> so that the default type 'text' is pretty good for multilingual
>>>> processing.
>>>>
>>>> In fact I hope in the future it will be improved in lucene so that
>>>> your decision is really based upon other application needs...
>>>>
>>>> On Mon, Jun 15, 2009 at 1:10 PM, OBender Hotmail<osya_bender@hotmail.c=
om> wrote:
>>>>> Hi All!
>>>>>
>>>>>
>>>>>
>>>>> I'm new to Lucene so forgive me if this question was asked before.
>>>>>
>>>>> I have a database with records in the same table in many different la=
nguages
>>>>> (up to 70) it includes all W-European, Arabic, Eastern, CJK, Cyrillic=
, etc.
>>>>> you name it.
>>>>> I've looked at what people say about Lucene and it looks like for the=
 most
>>>>> part standard analyzers should do fine with most Unicode languages bu=
t there
>>>>> are quite a few exceptions.
>>>>> Here is some recently updated Lucene Jira thread:
>>>>> https://issues.apache.org/jira/browse/LUCENE-1488
>>>>>
>>>>> My question is, what would be the safest bet for me in terms of
>>>>> analyzers/tokenizers?
>>>>> Do I really have to write my own ones for the bunch of languages that=
 are
>>>>> not supported?
>>>>> Did anyone already solve the problem similar to mine? I'm sure someon=
e
>>>>> already did :)
>>>>>
>>>>> And yes, I looked at the Lucene sandbox analyzers. It just adds more
>>>>> confusion. For example why there analyzers for DE and FR? Wouldn't th=
e
>>>>> standard analyzer (which is Unicode complaint as I understood) deal w=
ith EU
>>>>> languages just fine?
>>>>>
>>>>> Thanks in advance for advices :)
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG - www.avg.com
>> Version: 8.5.339 / Virus Database: 270.12.62/2168 - Release Date: 06/15/=
09 17:54:00
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 09:03:54 2009
Return-Path: <java-user-return-40759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83727 invoked from network); 16 Jun 2009 09:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 09:03:54 -0000
Received: (qmail 95196 invoked by uid 500); 16 Jun 2009 09:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95111 invoked by uid 500); 16 Jun 2009 09:04:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95099 invoked by uid 99); 16 Jun 2009 09:04:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 09:04:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of galaio.silva@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 09:03:53 +0000
Received: by fxm3 with SMTP id 3so4229528fxm.5
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 02:03:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=vu0wp34shVRyp1VXSyCW+r7SPFTZI2ojsnXrRnkz55A=;
        b=bSzLlL5immRXRq1NJJttFQINCnlyCKI+/1xBXmAHRCD79N98BDdQAV5+dvHCkOrV4u
         NtK34+MLOW6obnKJgJtCSx+Jf6ICNHUOwa8OriYOlnx3F/bzGpZSTMsqu7DkSvSLAurt
         /hGIq5iBxAk2cXgltdzOmYN0+fKCp0QpZEBYo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=fgkFEvgk7NUJ+hqqbyS9uQNCGzwCYuUUV9MvpDrrEOjUiz9wVXGxUmxfm7VINwuK9h
         DW6W69jagk9zzilYcvmCk/wYrPD+LvadWowPGup3kE0xk368Jr7iyuDErltVYKuzDTkP
         ydBzczWRMlOa7FZ7oKkBjc8TNgnzpKevkzhn4=
MIME-Version: 1.0
Received: by 10.223.122.141 with SMTP id l13mr4994088far.99.1245143013561; 
	Tue, 16 Jun 2009 02:03:33 -0700 (PDT)
Date: Tue, 16 Jun 2009 10:03:33 +0100
Message-ID: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
Subject: Index Concurrent access
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c59879049591046c7373dc
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c59879049591046c7373dc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,
how can i access the index in a concurrently way,
so i can perform add/update/delete documents concurrently?

Cheers,
Jo=E3o

--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--001636c59879049591046c7373dc--

From java-user-return-40760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 09:21:36 2009
Return-Path: <java-user-return-40760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90197 invoked from network); 16 Jun 2009 09:21:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 09:21:36 -0000
Received: (qmail 26158 invoked by uid 500); 16 Jun 2009 09:21:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26090 invoked by uid 500); 16 Jun 2009 09:21:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26080 invoked by uid 99); 16 Jun 2009 09:21:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 09:21:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mjoshi@zedo.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 09:21:35 +0000
Received: by an-out-0708.google.com with SMTP id b6so3569179ana.5
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 02:21:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.141.16 with SMTP id o16mr10184375and.182.1245144070650; 
	Tue, 16 Jun 2009 02:21:10 -0700 (PDT)
In-Reply-To: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
References: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
Date: Tue, 16 Jun 2009 14:51:10 +0530
Message-ID: <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
Subject: Re: Index Concurrent access
From: Manish Joshi <mjoshi@zedo.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f87456068232046c73b2e1
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f87456068232046c73b2e1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Concurrently adding updating deleting may not be good idea.It may corrupt
the index
-Manish B. Joshi

On Tue, Jun 16, 2009 at 2:33 PM, Jo=E3o Silva <galaio.silva@gmail.com> wrot=
e:

> Hi,
> how can i access the index in a concurrently way,
> so i can perform add/update/delete documents concurrently?
>
> Cheers,
> Jo=E3o
>
> --
> Cumprimentos,
> Jo=E3o Carlos Galaio da Silva
>



--=20
Manish Joshi
Adserving Team
Zedo India

--001485f87456068232046c73b2e1--

From java-user-return-40761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 09:59:59 2009
Return-Path: <java-user-return-40761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12459 invoked from network); 16 Jun 2009 09:59:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 09:59:59 -0000
Received: (qmail 86459 invoked by uid 500); 16 Jun 2009 10:00:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86394 invoked by uid 500); 16 Jun 2009 10:00:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86384 invoked by uid 99); 16 Jun 2009 10:00:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:00:07 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 09:59:58 +0000
Received: by gxk11 with SMTP id 11so6830728gxk.5
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 02:59:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.130.11 with SMTP id h11mr15356464ybn.122.1245146376189; 
	Tue, 16 Jun 2009 02:59:36 -0700 (PDT)
In-Reply-To: <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
References: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
	 <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
Date: Tue, 16 Jun 2009 05:59:36 -0400
Message-ID: <9ac0c6aa0906160259l60f2b34q4d5171446878f95f@mail.gmail.com>
Subject: Re: Index Concurrent access
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Concurrency using multiple threads in a single JRE is perfectly fine
and strongly encouraged, since modern hardware is very concurrent.

But, concurrent access via different JREs is not supported by Lucene.
Lucene's write lock will protect the index against such cases, but if
you bypass the write lock then you will easily corrupt the index if
two writers are opened at once.

Mike

On Tue, Jun 16, 2009 at 5:21 AM, Manish Joshi<mjoshi@zedo.com> wrote:
> Concurrently adding updating deleting may not be good idea.It may corrupt
> the index
> -Manish B. Joshi
>
> On Tue, Jun 16, 2009 at 2:33 PM, Jo=E3o Silva <galaio.silva@gmail.com> wr=
ote:
>
>> Hi,
>> how can i access the index in a concurrently way,
>> so i can perform add/update/delete documents concurrently?
>>
>> Cheers,
>> Jo=E3o
>>
>> --
>> Cumprimentos,
>> Jo=E3o Carlos Galaio da Silva
>>
>
>
>
> --
> Manish Joshi
> Adserving Team
> Zedo India
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 10:01:47 2009
Return-Path: <java-user-return-40762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13768 invoked from network); 16 Jun 2009 10:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 10:01:47 -0000
Received: (qmail 90346 invoked by uid 500); 16 Jun 2009 10:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90295 invoked by uid 500); 16 Jun 2009 10:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90285 invoked by uid 99); 16 Jun 2009 10:01:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:01:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.200] (HELO mail-yx0-f200.google.com) (209.85.210.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:01:47 +0000
Received: by yxe38 with SMTP id 38so7799yxe.29
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 03:01:26 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.69.9 with SMTP id w9mr15342233ybk.29.1245146486307; Tue, 
	16 Jun 2009 03:01:26 -0700 (PDT)
In-Reply-To: <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>
	 <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
Date: Tue, 16 Jun 2009 06:01:26 -0400
Message-ID: <9ac0c6aa0906160301y77f854d4tc79105663cd6461f@mail.gmail.com>
Subject: Re: Lucene and multi-lingual Unicode - advice needed
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jun 15, 2009 at 1:14 PM, Robert Muir<rcmuir@gmail.com> wrote:

> I'm not personally biased one way or the other for any particular
> framework, but recently there has been some improvements added to SolR
> so that the default type 'text' is pretty good for multilingual
> processing.

Robert can you describe what these changes are/were, and how one could
do the same thing as Solr's "text" field, directly with Lucene?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 10:02:59 2009
Return-Path: <java-user-return-40763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14630 invoked from network); 16 Jun 2009 10:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 10:02:57 -0000
Received: (qmail 93063 invoked by uid 500); 16 Jun 2009 10:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93022 invoked by uid 500); 16 Jun 2009 10:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93012 invoked by uid 99); 16 Jun 2009 10:03:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:03:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of galaio.silva@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:02:57 +0000
Received: by fxm3 with SMTP id 3so4263925fxm.5
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 03:02:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=hq87X62iXifcROcqHI8LjUxLUJw4FmRQwrJvr86S8x0=;
        b=YFLzstPRQ4Kw7hrHruqeXn5/6CWDHbczKopTiW5uNb+55GbS0x3qVSGGa+W8yRLTw6
         uvaixNbHA1FyAZxtENerzOiWMXU2mp/HXc7bVt/i99PW1/CLF17JHXbMNFGEckgmNPcD
         jTo+uEZ1LRfOjLJqRzBdMsjNXg+eY3snKTZ5g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MefB2tPmBf69dpmTND2Il014/SOoQO7oPbuAb+ChDsmrlhA1etnKzaIjkdNPOIw3v1
         afgtEXbF4WXii8j0arO/ocDheED0fIov7SHH8yShYTc32KZIXdMRQ+bQkLaTILCvlWoD
         +yhp1aMRASRDGRH9LMAL1ma4dni6z8EyxVfKg=
MIME-Version: 1.0
Received: by 10.223.126.10 with SMTP id a10mr5121972fas.17.1245146555922; Tue, 
	16 Jun 2009 03:02:35 -0700 (PDT)
In-Reply-To: <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
References: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
	 <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
Date: Tue, 16 Jun 2009 11:02:35 +0100
Message-ID: <fddb43f90906160302j6d16ad0eg74194a194e284310@mail.gmail.com>
Subject: Re: Index Concurrent access
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5ab4028bf44046c744628
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5ab4028bf44046c744628
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks Manish for your fast answer.
I trying to implement a web tool for uploading documents,
for now i'm implementing basic operations, to upload the
and retrieve the users files, so it can read  and/or
modify/delete them.
Imagine tha i have several users performing that operations,
is there any implementation(pool,threading, etc) in lucene
to perform that kindo of operations.

I already seen the Lucene-1026 that initially implemented some
kind of that functionality, but it was abandoned.

Is there any following implementations of that ticket?


Thanks,
Jo=E3o



On Tue, Jun 16, 2009 at 10:21 AM, Manish Joshi <mjoshi@zedo.com> wrote:

> Concurrently adding updating deleting may not be good idea.It may corrupt
> the index
> -Manish B. Joshi
>
> On Tue, Jun 16, 2009 at 2:33 PM, Jo=E3o Silva <galaio.silva@gmail.com>
> wrote:
>
> > Hi,
> > how can i access the index in a concurrently way,
> > so i can perform add/update/delete documents concurrently?
> >
> > Cheers,
> > Jo=E3o
> >
> > --
> > Cumprimentos,
> > Jo=E3o Carlos Galaio da Silva
> >
>
>
>
> --
> Manish Joshi
> Adserving Team
> Zedo India
>



--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--001636c5ab4028bf44046c744628--

From java-user-return-40764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 10:04:06 2009
Return-Path: <java-user-return-40764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16066 invoked from network); 16 Jun 2009 10:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 10:04:06 -0000
Received: (qmail 97505 invoked by uid 500); 16 Jun 2009 10:04:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97457 invoked by uid 500); 16 Jun 2009 10:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97447 invoked by uid 99); 16 Jun 2009 10:04:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:04:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:04:05 +0000
Received: by yw-out-2324.google.com with SMTP id 2so2145207ywt.5
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 03:03:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=MVSVOVzOSpbFpBjGkbB/swEQKKv7bRSLNG9EsgyU1vw=;
        b=uyoRI8PvLZL4uHsAckYBjekh0Ey9+YGzY1+mk9mD+975qHCFw+8I6CDMwHd11Q6oCp
         Lww7CVTDhLYhP4jDQnOTyf241xfheN4oenGQVjhC3/9MtNGokrHDE5lKGJyRrku7i4rO
         4ZIyZqGTAipaVX+BIUtLKyL88P0uQmUmWWC38=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=cZ3iWsUsx1HVuMxrSRkInkAVCAHXBC3z7D5lLt+etelJASBeqcbHMA9PuQ65oy+sf3
         YawiMsa/rPnF9c6zUivrXlJaH1GMQu1c0OXjMP9mbykUlrUMjSKEUuYmbrl/1+CX2TW4
         KUb3smK2PthsNeczxHLlLNl/GdF6Ahm4F8KBc=
MIME-Version: 1.0
Received: by 10.100.154.17 with SMTP id b17mr10344824ane.45.1245146624606; 
	Tue, 16 Jun 2009 03:03:44 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <9ac0c6aa0906160259l60f2b34q4d5171446878f95f@mail.gmail.com>
References: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
	 <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
	 <9ac0c6aa0906160259l60f2b34q4d5171446878f95f@mail.gmail.com>
Date: Tue, 16 Jun 2009 12:03:44 +0200
Message-ID: <f18c9dde0906160303t6c282975ie7c21cf6a7f9b7a2@mail.gmail.com>
Subject: Re: Index Concurrent access
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jun 16, 2009 at 11:59 AM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> Concurrency using multiple threads in a single JRE is perfectly fine
> and strongly encouraged, since modern hardware is very concurrent.
>
> But, concurrent access via different JREs is not supported by Lucene.
> Lucene's write lock will protect the index against such cases, but if
> you bypass the write lock then you will easily corrupt the index if
> two writers are opened at once.
>
> Mike
Mike I guess you mean a single VM (JRE rather refers to a version or
vendor) - Just wanna clarify.

simon
>
> On Tue, Jun 16, 2009 at 5:21 AM, Manish Joshi<mjoshi@zedo.com> wrote:
>> Concurrently adding updating deleting may not be good idea.It may corrup=
t
>> the index
>> -Manish B. Joshi
>>
>> On Tue, Jun 16, 2009 at 2:33 PM, Jo=C3=A3o Silva <galaio.silva@gmail.com=
> wrote:
>>
>>> Hi,
>>> how can i access the index in a concurrently way,
>>> so i can perform add/update/delete documents concurrently?
>>>
>>> Cheers,
>>> Jo=C3=A3o
>>>
>>> --
>>> Cumprimentos,
>>> Jo=C3=A3o Carlos Galaio da Silva
>>>
>>
>>
>>
>> --
>> Manish Joshi
>> Adserving Team
>> Zedo India
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 10:07:28 2009
Return-Path: <java-user-return-40765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19153 invoked from network); 16 Jun 2009 10:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 10:07:27 -0000
Received: (qmail 6987 invoked by uid 500); 16 Jun 2009 10:07:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6933 invoked by uid 500); 16 Jun 2009 10:07:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6923 invoked by uid 99); 16 Jun 2009 10:07:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:07:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:07:26 +0000
Received: by gxk11 with SMTP id 11so6834144gxk.5
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 03:07:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.136.13 with SMTP id o13mr15353722ybn.100.1245146824223; 
	Tue, 16 Jun 2009 03:07:04 -0700 (PDT)
In-Reply-To: <f18c9dde0906160303t6c282975ie7c21cf6a7f9b7a2@mail.gmail.com>
References: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
	 <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
	 <9ac0c6aa0906160259l60f2b34q4d5171446878f95f@mail.gmail.com>
	 <f18c9dde0906160303t6c282975ie7c21cf6a7f9b7a2@mail.gmail.com>
Date: Tue, 16 Jun 2009 06:07:04 -0400
Message-ID: <9ac0c6aa0906160307y2b4099d4g1eecd17466d56ee6@mail.gmail.com>
Subject: Re: Index Concurrent access
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jun 16, 2009 at 6:03 AM, Simon
Willnauer<simon.willnauer@googlemail.com> wrote:

> Mike I guess you mean a single VM (JRE rather refers to a version or
> vendor) - Just wanna clarify.

Right, I meant a "single java process", so I guess an instance of a JVM?

Within that instance, many threads can be doing writing against an index.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 10:11:01 2009
Return-Path: <java-user-return-40766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22173 invoked from network); 16 Jun 2009 10:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 10:11:01 -0000
Received: (qmail 13055 invoked by uid 500); 16 Jun 2009 10:11:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12979 invoked by uid 500); 16 Jun 2009 10:11:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12969 invoked by uid 99); 16 Jun 2009 10:11:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:11:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of galaio.silva@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:11:02 +0000
Received: by bwz27 with SMTP id 27so4259256bwz.5
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 03:10:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=dVqldKsrAspO3pfMUD5HJMBASAg+SM8nsZFE3JQGOgg=;
        b=SeKLkq3xi80dGQTLkC8JLSKx1wYwSa1CDh8GdWAqdV7/Pb7QHQ0nqqry6CLKP5I7wG
         s9YRh1XfXGy7HPQG/TVvzIr43A+Y96aOf5Z7W6a9Y51KIHINcADnkw7TuqKgppATQzeI
         sXGtWkOWi8zoPoCqRxcxztByTMkuaY9BtE6rI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kfnWAIVI1GQ5Jq/fdv8I9vGWAYn3ITbkZpr09tkAGOif1Fjo9DFdi1w6R3fY5wT6eY
         QmRrBFklOMtjpNcNIXnghttJSBnV17pnNAYy4+tGRJGppaWT3L/2ZL7bxm3DmAOLgpKa
         pk7CEZepd3CREc2sH7GgmadWJoCCl12FUVxeo=
MIME-Version: 1.0
Received: by 10.223.103.207 with SMTP id l15mr5175336fao.2.1245147041262; Tue, 
	16 Jun 2009 03:10:41 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906160307y2b4099d4g1eecd17466d56ee6@mail.gmail.com>
References: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
	 <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
	 <9ac0c6aa0906160259l60f2b34q4d5171446878f95f@mail.gmail.com>
	 <f18c9dde0906160303t6c282975ie7c21cf6a7f9b7a2@mail.gmail.com>
	 <9ac0c6aa0906160307y2b4099d4g1eecd17466d56ee6@mail.gmail.com>
Date: Tue, 16 Jun 2009 11:10:41 +0100
Message-ID: <fddb43f90906160310h7eb12a86m87abc978e60181bc@mail.gmail.com>
Subject: Re: Index Concurrent access
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b3ff166e2e046c7463af
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5b3ff166e2e046c7463af
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I mike, thanks.

I rewrite my problem:

I trying to implement a web tool for uploading documents,
for now i'm implementing basic operations, to upload the
and retrieve the users files, so it can read  and/or
modify/delete them.
Imagine tha i have several users performing that operations,
is there any implementation(pool,threading, etc) in lucene
to perform that kindo of operations.

I already seen the Lucene-1026 that initially implemented some
kind of that functionality, but it was abandoned.

Is there any following implementations of that ticket?

Its a single jvm and tool will work in a webserver.


Thanks,
jo=E3o





On Tue, Jun 16, 2009 at 11:07 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> On Tue, Jun 16, 2009 at 6:03 AM, Simon
> Willnauer<simon.willnauer@googlemail.com> wrote:
>
> > Mike I guess you mean a single VM (JRE rather refers to a version or
> > vendor) - Just wanna clarify.
>
> Right, I meant a "single java process", so I guess an instance of a JVM?
>
> Within that instance, many threads can be doing writing against an index.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--001636c5b3ff166e2e046c7463af--

From java-user-return-40767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 10:25:24 2009
Return-Path: <java-user-return-40767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33299 invoked from network); 16 Jun 2009 10:25:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 10:25:19 -0000
Received: (qmail 38979 invoked by uid 500); 16 Jun 2009 10:25:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38930 invoked by uid 500); 16 Jun 2009 10:25:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38920 invoked by uid 99); 16 Jun 2009 10:25:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:25:28 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,MSGID_MULTIPLE_AT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [64.13.253.17] (HELO guavus.com) (64.13.253.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:25:17 +0000
Received: (qmail 26135 invoked from network); 16 Jun 2009 03:24:56 -0700
Received: from isp-net67.spectranet.com (HELO station151) (@125.63.71.67)
  by guavus.com with SMTP; 16 Jun 2009 03:24:55 -0700
From: "Sumanta Bhowmik" <sumanta.bhowmik@guavus.com>
To: <java-user@lucene.apache.org>
References: 
In-Reply-To: 
Subject: Problem with NOT and OR Query
Date: Tue, 16 Jun 2009 15:54:48 +0530
Message-ID: <000601c9ee6c$b1dcb540$15961fc0$@bhowmik@guavus.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0007_01C9EE9A.CB94F140"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcnuYPTpNHsUrMm1Q86COV/tvHpDIQAC4U6g
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0007_01C9EE9A.CB94F140
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi

 

I found that a query "NOT num_pkts:1024  OR src_port:80" behaves the same as
"NOT num_pkts:1024  AND src_port:80". The actual query is

 

(start_utc:[1230748200 TO 1230768000] OR end_utc:[1230748200 TO 1230768000])
AND (num_pkts:1024  OR NOT num_bytes:40960) but it behaves as if it is

 

(start_utc:[1230748200 TO 1230768000] OR end_utc:[1230748200 TO 1230768000])
AND (num_pkts:1024  AND NOT num_bytes:40960).

 

Is this a known issue?

 

 

Is there a workaround to this problem?

 

Thanks

Sumanta


------=_NextPart_000_0007_01C9EE9A.CB94F140--


From java-user-return-40768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 10:53:58 2009
Return-Path: <java-user-return-40768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53767 invoked from network); 16 Jun 2009 10:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 10:53:58 -0000
Received: (qmail 81406 invoked by uid 500); 16 Jun 2009 10:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81357 invoked by uid 500); 16 Jun 2009 10:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81347 invoked by uid 99); 16 Jun 2009 10:54:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:54:07 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.200] (HELO mail-yx0-f200.google.com) (209.85.210.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 10:53:58 +0000
Received: by yxe38 with SMTP id 38so34966yxe.29
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 03:53:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.228.2 with SMTP id a2mr15431232ybh.92.1245149616862; Tue, 
	16 Jun 2009 03:53:36 -0700 (PDT)
In-Reply-To: <fddb43f90906160310h7eb12a86m87abc978e60181bc@mail.gmail.com>
References: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
	 <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
	 <9ac0c6aa0906160259l60f2b34q4d5171446878f95f@mail.gmail.com>
	 <f18c9dde0906160303t6c282975ie7c21cf6a7f9b7a2@mail.gmail.com>
	 <9ac0c6aa0906160307y2b4099d4g1eecd17466d56ee6@mail.gmail.com>
	 <fddb43f90906160310h7eb12a86m87abc978e60181bc@mail.gmail.com>
Date: Tue, 16 Jun 2009 06:53:36 -0400
Message-ID: <9ac0c6aa0906160353l190feb57r5d22f800c48687ba@mail.gmail.com>
Subject: Re: Index Concurrent access
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried the patch on LUCENE-1026?  It's rather standalone from
Lucene's core -- it adds a convenience layer (for interleaving
reads/writes) on a single index.

Or, code it up yourself.  As of 2.9 (not yet released -- available on
trunk now), near real-time search makes this particularly simple.
You'd keep a writer open indefinitely, to do deletes/adds, then call
writer.getReader() to get a new IndexReader that sees all changes done
against that writer.  You can then separately call writer.commit() to
make all changes permanent (written to stable storage) in the index,
as your app requires.

Multiple users making changes should be simple, since IndexWriter is
thread safe..

Mike

On Tue, Jun 16, 2009 at 6:10 AM, Jo=E3o Silva<galaio.silva@gmail.com> wrote=
:
> I mike, thanks.
>
> I rewrite my problem:
>
> I trying to implement a web tool for uploading documents,
> for now i'm implementing basic operations, to upload the
> and retrieve the users files, so it can read =A0and/or
> modify/delete them.
> Imagine tha i have several users performing that operations,
> is there any implementation(pool,threading, etc) in lucene
> to perform that kindo of operations.
>
> I already seen the Lucene-1026 that initially implemented some
> kind of that functionality, but it was abandoned.
>
> Is there any following implementations of that ticket?
>
> Its a single jvm and tool will work in a webserver.
>
>
> Thanks,
> jo=E3o
>
>
>
>
>
> On Tue, Jun 16, 2009 at 11:07 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> On Tue, Jun 16, 2009 at 6:03 AM, Simon
>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>
>> > Mike I guess you mean a single VM (JRE rather refers to a version or
>> > vendor) - Just wanna clarify.
>>
>> Right, I meant a "single java process", so I guess an instance of a JVM?
>>
>> Within that instance, many threads can be doing writing against an index=
.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Cumprimentos,
> Jo=E3o Carlos Galaio da Silva
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 11:09:07 2009
Return-Path: <java-user-return-40769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61506 invoked from network); 16 Jun 2009 11:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 11:09:07 -0000
Received: (qmail 1509 invoked by uid 500); 16 Jun 2009 11:09:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1436 invoked by uid 500); 16 Jun 2009 11:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1426 invoked by uid 99); 16 Jun 2009 11:09:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 11:09:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of galaio.silva@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 11:09:08 +0000
Received: by fxm3 with SMTP id 3so4304802fxm.5
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 04:08:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ADmX605J93yV1mbylvj6dTnfU04Qi7LpADkDw8TgkwA=;
        b=BblpX843CrxFCODtOcZgxaQYEtF+f11UhbouTpnv5y7LXtQOo6am4nDuvj9hEFYyT+
         77gp5aP6L/pzfFdI8iZdyHKaK+Xnq6t3Rq4Aud/KOu5hI16y2kik4Op7oXSC/dUqT4/e
         wx/Zcwmz3ZCKPszL0ewYpaQnn6kFo3SCYAjfs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g7pxrmT2HI+ZfO92KZ4dsM/Yv9cW36WwaQh4uDjMSmFcuGx0eye13T1JG9OAL1hzlV
         ptlYDYIvg6SelALRrjHyP3RJ+CY9UmuFL8CjY2ZFVJIfzaI3QT/OJNRz/biV/555eYQ7
         QdQi9QxgOEnIhwOAFyPyYDE0B+3Vhc4EiAQn4=
MIME-Version: 1.0
Received: by 10.223.126.69 with SMTP id b5mr5188246fas.107.1245150527367; Tue, 
	16 Jun 2009 04:08:47 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906160353l190feb57r5d22f800c48687ba@mail.gmail.com>
References: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
	 <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
	 <9ac0c6aa0906160259l60f2b34q4d5171446878f95f@mail.gmail.com>
	 <f18c9dde0906160303t6c282975ie7c21cf6a7f9b7a2@mail.gmail.com>
	 <9ac0c6aa0906160307y2b4099d4g1eecd17466d56ee6@mail.gmail.com>
	 <fddb43f90906160310h7eb12a86m87abc978e60181bc@mail.gmail.com>
	 <9ac0c6aa0906160353l190feb57r5d22f800c48687ba@mail.gmail.com>
Date: Tue, 16 Jun 2009 12:08:47 +0100
Message-ID: <fddb43f90906160408h125a4eb9i5ca3666fd8dceaaa@mail.gmail.com>
Subject: Re: Index Concurrent access
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a82fe03461046c753275
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a82fe03461046c753275
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks mike, i will see that.
The ticket for that functionallity is the Lucene-1313?

Thanks,
Jo=E3o



On Tue, Jun 16, 2009 at 11:53 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Have you tried the patch on LUCENE-1026?  It's rather standalone from
> Lucene's core -- it adds a convenience layer (for interleaving
> reads/writes) on a single index.
>
> Or, code it up yourself.  As of 2.9 (not yet released -- available on
> trunk now), near real-time search makes this particularly simple.
> You'd keep a writer open indefinitely, to do deletes/adds, then call
> writer.getReader() to get a new IndexReader that sees all changes done
> against that writer.  You can then separately call writer.commit() to
> make all changes permanent (written to stable storage) in the index,
> as your app requires.
>
> Multiple users making changes should be simple, since IndexWriter is
> thread safe..
>
> Mike
>
> On Tue, Jun 16, 2009 at 6:10 AM, Jo=E3o Silva<galaio.silva@gmail.com> wro=
te:
> > I mike, thanks.
> >
> > I rewrite my problem:
> >
> > I trying to implement a web tool for uploading documents,
> > for now i'm implementing basic operations, to upload the
> > and retrieve the users files, so it can read  and/or
> > modify/delete them.
> > Imagine tha i have several users performing that operations,
> > is there any implementation(pool,threading, etc) in lucene
> > to perform that kindo of operations.
> >
> > I already seen the Lucene-1026 that initially implemented some
> > kind of that functionality, but it was abandoned.
> >
> > Is there any following implementations of that ticket?
> >
> > Its a single jvm and tool will work in a webserver.
> >
> >
> > Thanks,
> > jo=E3o
> >
> >
> >
> >
> >
> > On Tue, Jun 16, 2009 at 11:07 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> On Tue, Jun 16, 2009 at 6:03 AM, Simon
> >> Willnauer<simon.willnauer@googlemail.com> wrote:
> >>
> >> > Mike I guess you mean a single VM (JRE rather refers to a version or
> >> > vendor) - Just wanna clarify.
> >>
> >> Right, I meant a "single java process", so I guess an instance of a JV=
M?
> >>
> >> Within that instance, many threads can be doing writing against an
> index.
> >>
> >> Mike
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Cumprimentos,
> > Jo=E3o Carlos Galaio da Silva
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--001636c5a82fe03461046c753275--

From java-user-return-40770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 11:44:54 2009
Return-Path: <java-user-return-40770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76395 invoked from network); 16 Jun 2009 11:44:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 11:44:54 -0000
Received: (qmail 66347 invoked by uid 500); 16 Jun 2009 11:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66286 invoked by uid 500); 16 Jun 2009 11:45:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66276 invoked by uid 99); 16 Jun 2009 11:45:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 11:45:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.232 as permitted sender)
Received: from [65.54.246.232] (HELO bay0-omc3-s32.bay0.hotmail.com) (65.54.246.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 11:44:51 +0000
Received: from hotmail.com ([207.46.9.17]) by bay0-omc3-s32.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 16 Jun 2009 04:44:31 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 16 Jun 2009 04:44:30 -0700
Message-ID: <BAY119-DAV7D87888D50A7632C925C18E3F0@phx.gbl>
Received: from 24.61.92.31 by BAY119-DAV7.phx.gbl with DAV;
	Tue, 16 Jun 2009 11:44:28 +0000
X-Originating-IP: [24.61.92.31]
X-Originating-Email: [osya_bender@hotmail.com]
X-Sender: osya_bender@hotmail.com
From: "OBender Hotmail" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl> <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com> <BAY119-DS6A442C60F4458ACA17BF18E3E0@phx.gbl> <8f0ad1f30906151351obb93193v7c5049fe59c29aeb@mail.gmail.com> <BAY119-DS10EB6FD7ACD6105BE93ED68E3E0@phx.gbl> <8f0ad1f30906151455o3b8c0dafu7a70d52fa4469d6@mail.gmail.com> <BAY119-DAV578F44A4C25369C7C7BEB8E3F0@phx.gbl> <8f0ad1f30906151851p561f797elcb737f3eb558f750@mail.gmail.com> <BAY119-DAV3201A75E61A0F045C77AA8E3F0@phx.gbl> <8f0ad1f30906151945w2c3ce5b5sc9bd6556aad3e433@mail.gmail.com>
Subject: RE: Lucene and multi-lingual Unicode - advice needed
Date: Tue, 16 Jun 2009 07:44:30 -0400
Message-ID: <400B4A15612844869B30995AAA46A189@VELADEV>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
thread-index: AcnuLIvoU093VqzFTbWpYEdGqzinmwASyBEQ
In-Reply-To: <8f0ad1f30906151945w2c3ce5b5sc9bd6556aad3e433@mail.gmail.com>
X-OriginalArrivalTime: 16 Jun 2009 11:44:30.0850 (UTC) FILETIME=[CF9D9620:01C9EE77]
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, thanks! I'll start with a simple one as you described and test on =
the languages we have at the moment.

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, June 15, 2009 10:45 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene and multi-lingual Unicode - advice needed

ok, well at first i thought you must be playing a joke on me or =
something...

Maybe you want to create a lucene analyzer that mimic's solr defaults.

Search the mail archives for this recent thread, and KK posted his code:
Re: How to support stemming and case folding for english content mixed
with non-english content?

Then again, maybe the sample code i gave you (whitespace + lowercase)
is good enough. By the time the company in question manages to get its
Chamorro, Cornish, Blackfoot, and Pashto testers together to evaluate
the search you will be retired :)


On Mon, Jun 15, 2009 at 10:30 PM, OBender
Hotmail<osya_bender@hotmail.com> wrote:
> That's the thing there is no actual requirement.
> I've been presented with all the languages that company theoretically =
provides.
> My guess is that what I'm going to end up with is all western =
languages, good share of Arabic family, complete set of Eastern and =
Eastern European ones and of course CJK.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, June 15, 2009 9:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>
> Really, you have a requirement that the system should search written =
Cornish?
>
> I think you might have larger problems!
>
> On Mon, Jun 15, 2009 at 9:18 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>> Here is the list of possible languages. Don't laugh :) I know those =
are almost all world languages but it is a true requirement. Well, =
actual number will be closer to 70 not 100 but still I don't really know =
which ones from the list below will end up in the DB.
>>
>> -------
>> Afrikaans  Albanian Arabic Armenian Austrian Aymara Azerbaijani
>> Basque Belorussian Bemba Bengali Blackfoot Bosnian Breton Bulgarian   =
  Canadian French  Catalan Cebuano Chamorro Chinese Chechen Cornish =
Croatian Czech
>> Danish Dutch
>> Ecuadorian Quechua  English  English-Portuguese Esperanto Estonian
>> Faroese Farsi Finnish Flemish French Frisian
>> Galician Georgian German Greek Guarani
>> Haitian Creole  Hausa Hawaiian Hebrew Hindi Hungarian Icelandic =
Indonesian     Inuktitut Irish Italian
>> Japanese
>> Kazakh Kongo Korean
>> Latin Latvian Lithuanian Luganda Luxembourgish
>> Macedonian Malagasy Malay Maori Maya Mohawk Mongolian
>> Nahuatl Norwegian
>> Papago Pashto Pidgin English Polish Portuguese (European)
>> Portuguese (Brazilian) Provencal
>> Quechua
>> Romanian Romansch Romany Ruanda Russian
>> Samoan Scottish Sepedi Serbian Shona Sicilian Slovak Slovene Somali   =
 Sorbian Sotho Spanish Swahili Swazi Swedish
>> Tagalog Tahitian Thai Tongan Tswana Turkish Turkmen Tuvan
>> Ukrainian Urdu Uzbek Vietnamese
>> Welsh Wolof
>> Xhosa
>> Yiddish Yoruba
>> Zulu
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, June 15, 2009 5:56 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>
>> its not too bad, here would be a simple one that only breaks words on
>> whitespace and lowercases:
>>
>> public class Example extends Analyzer {
>>  public TokenStream tokenStream(String fieldName, Reader reader) {
>>   TokenStream ts =3D new WhitespaceTokenizer(reader);
>>   ts =3D new LowerCaseFilter(ts);
>>   return ts;
>>  }
>> }
>>
>> can you give a better idea as to what languages you have and what =
your
>> search requirements are (accent marks, punctuation, etc etc) ?
>>
>> On Mon, Jun 15, 2009 at 5:39 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>>> I've looked over SolR quickly, it is a bit too heavy for my project.
>>> So what is required (at a minimum) to build an analyzer, sandbox has =
a few of them varying in complexity.
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, June 15, 2009 4:51 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>>
>>> Well just reply back if SolR is inappropriate for your needs.
>>>
>>> In that case, you will need to build a custom analyzer (its not too
>>> bad), so that you can use compass.
>>>
>>> On Mon, Jun 15, 2009 at 4:19 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>>>> Hi,
>>>>
>>>> My goal is to find a framework that encapsulates as much low level =
indexing/search technology as possible and have it integrate nicely with =
Spring.
>>>> It looked like Compass was/is a good encapsulation of the =
functionality. I'll take a look at SolR though, thanks for the pointer.
>>>>
>>>> -----Original Message-----
>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>> Sent: Monday, June 15, 2009 1:14 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Lucene and multi-lingual Unicode - advice needed
>>>>
>>>> Hi,
>>>>
>>>> (Since this is an issue you brought up on the Compass forums)
>>>>
>>>> I wonder what stage you are in the development process?
>>>> Have you considered SolR, or does compass provide some other
>>>> functionality that you need?
>>>>
>>>> The reason I say this, is because the easiest solution might be to =
use
>>>> a nightly SolR for your application.
>>>>
>>>> I'm not personally biased one way or the other for any particular
>>>> framework, but recently there has been some improvements added to =
SolR
>>>> so that the default type 'text' is pretty good for multilingual
>>>> processing.
>>>>
>>>> In fact I hope in the future it will be improved in lucene so that
>>>> your decision is really based upon other application needs...
>>>>
>>>> On Mon, Jun 15, 2009 at 1:10 PM, OBender =
Hotmail<osya_bender@hotmail.com> wrote:
>>>>> Hi All!
>>>>>
>>>>>
>>>>>
>>>>> I'm new to Lucene so forgive me if this question was asked before.
>>>>>
>>>>> I have a database with records in the same table in many different =
languages
>>>>> (up to 70) it includes all W-European, Arabic, Eastern, CJK, =
Cyrillic, etc.
>>>>> you name it.
>>>>> I've looked at what people say about Lucene and it looks like for =
the most
>>>>> part standard analyzers should do fine with most Unicode languages =
but there
>>>>> are quite a few exceptions.
>>>>> Here is some recently updated Lucene Jira thread:
>>>>> https://issues.apache.org/jira/browse/LUCENE-1488
>>>>>
>>>>> My question is, what would be the safest bet for me in terms of
>>>>> analyzers/tokenizers?
>>>>> Do I really have to write my own ones for the bunch of languages =
that are
>>>>> not supported?
>>>>> Did anyone already solve the problem similar to mine? I'm sure =
someone
>>>>> already did :)
>>>>>
>>>>> And yes, I looked at the Lucene sandbox analyzers. It just adds =
more
>>>>> confusion. For example why there analyzers for DE and FR? Wouldn't =
the
>>>>> standard analyzer (which is Unicode complaint as I understood) =
deal with EU
>>>>> languages just fine?
>>>>>
>>>>> Thanks in advance for advices :)
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG - www.avg.com
>> Version: 8.5.339 / Virus Database: 270.12.62/2168 - Release Date: =
06/15/09 17:54:00
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


No virus found in this incoming message.
Checked by AVG - www.avg.com=20
Version: 8.5.339 / Virus Database: 270.12.62/2168 - Release Date: =
06/15/09 17:54:00


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 12:05:29 2009
Return-Path: <java-user-return-40771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82461 invoked from network); 16 Jun 2009 12:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 12:05:29 -0000
Received: (qmail 5943 invoked by uid 500); 16 Jun 2009 12:05:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5874 invoked by uid 500); 16 Jun 2009 12:05:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5864 invoked by uid 99); 16 Jun 2009 12:05:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 12:05:38 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.200] (HELO mail-yx0-f200.google.com) (209.85.210.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 12:05:30 +0000
Received: by yxe38 with SMTP id 38so81556yxe.29
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 05:05:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.9.17 with SMTP id m17mr15548953ybi.23.1245153906865; Tue, 
	16 Jun 2009 05:05:06 -0700 (PDT)
In-Reply-To: <fddb43f90906160408h125a4eb9i5ca3666fd8dceaaa@mail.gmail.com>
References: <fddb43f90906160203n1c8769b2k9d16fd63086a6a7b@mail.gmail.com>
	 <78fe96070906160221w284bcb62ge7ca330555ea692c@mail.gmail.com>
	 <9ac0c6aa0906160259l60f2b34q4d5171446878f95f@mail.gmail.com>
	 <f18c9dde0906160303t6c282975ie7c21cf6a7f9b7a2@mail.gmail.com>
	 <9ac0c6aa0906160307y2b4099d4g1eecd17466d56ee6@mail.gmail.com>
	 <fddb43f90906160310h7eb12a86m87abc978e60181bc@mail.gmail.com>
	 <9ac0c6aa0906160353l190feb57r5d22f800c48687ba@mail.gmail.com>
	 <fddb43f90906160408h125a4eb9i5ca3666fd8dceaaa@mail.gmail.com>
Date: Tue, 16 Jun 2009 08:05:06 -0400
Message-ID: <9ac0c6aa0906160505k47bbeaafoa1640e7a259c8951@mail.gmail.com>
Subject: Re: Index Concurrent access
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

LUCENE-1313 is just an enhancement to near real-time search that won't
make it into 2.9 at this point (we are "gunning" to get 2.9 out the
door...).

Ie, near real-time search was already committed to trunk, under LUCENE-1516=
.

Mike

On Tue, Jun 16, 2009 at 7:08 AM, Jo=E3o Silva<galaio.silva@gmail.com> wrote=
:
> Thanks mike, i will see that.
> The ticket for that functionallity is the Lucene-1313?
>
> Thanks,
> Jo=E3o
>
>
>
> On Tue, Jun 16, 2009 at 11:53 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> Have you tried the patch on LUCENE-1026? =A0It's rather standalone from
>> Lucene's core -- it adds a convenience layer (for interleaving
>> reads/writes) on a single index.
>>
>> Or, code it up yourself. =A0As of 2.9 (not yet released -- available on
>> trunk now), near real-time search makes this particularly simple.
>> You'd keep a writer open indefinitely, to do deletes/adds, then call
>> writer.getReader() to get a new IndexReader that sees all changes done
>> against that writer. =A0You can then separately call writer.commit() to
>> make all changes permanent (written to stable storage) in the index,
>> as your app requires.
>>
>> Multiple users making changes should be simple, since IndexWriter is
>> thread safe..
>>
>> Mike
>>
>> On Tue, Jun 16, 2009 at 6:10 AM, Jo=E3o Silva<galaio.silva@gmail.com> wr=
ote:
>> > I mike, thanks.
>> >
>> > I rewrite my problem:
>> >
>> > I trying to implement a web tool for uploading documents,
>> > for now i'm implementing basic operations, to upload the
>> > and retrieve the users files, so it can read =A0and/or
>> > modify/delete them.
>> > Imagine tha i have several users performing that operations,
>> > is there any implementation(pool,threading, etc) in lucene
>> > to perform that kindo of operations.
>> >
>> > I already seen the Lucene-1026 that initially implemented some
>> > kind of that functionality, but it was abandoned.
>> >
>> > Is there any following implementations of that ticket?
>> >
>> > Its a single jvm and tool will work in a webserver.
>> >
>> >
>> > Thanks,
>> > jo=E3o
>> >
>> >
>> >
>> >
>> >
>> > On Tue, Jun 16, 2009 at 11:07 AM, Michael McCandless <
>> > lucene@mikemccandless.com> wrote:
>> >
>> >> On Tue, Jun 16, 2009 at 6:03 AM, Simon
>> >> Willnauer<simon.willnauer@googlemail.com> wrote:
>> >>
>> >> > Mike I guess you mean a single VM (JRE rather refers to a version o=
r
>> >> > vendor) - Just wanna clarify.
>> >>
>> >> Right, I meant a "single java process", so I guess an instance of a J=
VM?
>> >>
>> >> Within that instance, many threads can be doing writing against an
>> index.
>> >>
>> >> Mike
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> > --
>> > Cumprimentos,
>> > Jo=E3o Carlos Galaio da Silva
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Cumprimentos,
> Jo=E3o Carlos Galaio da Silva
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 12:24:42 2009
Return-Path: <java-user-return-40772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94296 invoked from network); 16 Jun 2009 12:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 12:24:42 -0000
Received: (qmail 40004 invoked by uid 500); 16 Jun 2009 12:24:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39956 invoked by uid 500); 16 Jun 2009 12:24:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39945 invoked by uid 99); 16 Jun 2009 12:24:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 12:24:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.210.200 as permitted sender)
Received: from [209.85.210.200] (HELO mail-yx0-f200.google.com) (209.85.210.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 12:24:43 +0000
Received: by yxe38 with SMTP id 38so97062yxe.29
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 05:24:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=e4ck7skMcZhKx+13w4j4fjpk3acOA2If/RvGzYUX/bo=;
        b=onxjKZAAPxTiVsT6ulYPf0VaeCsZOohQiETKfuzMUf5jmDCQPrf9pWP02GUyI4lmzx
         IzM9D2ol1dHCWZhNee5ww6rwRd9lneXF/evNgtTzJCJR/UnX33KzBa0wPi0Foald8T5r
         8zEymEZpOxJ7qa/dp1r9DHmjcgCGvKC9qh4ew=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=fPAg+RMyEu7Gt5hlO2zgGm18thimRQwRoLh4i7qcuSx/nGOPrfBYvf73rwZMpC3PlE
         R/CCfpIfc0/YyLF6MYzrNLc3c1Be/yKh3HhpQ9qZYrFsVJENaA8K+8mkbuX9BwmY+5h4
         kTCoHp4gx3YVCYWQ9ByCrKuaa/F5YgY4jLsIQ=
MIME-Version: 1.0
Received: by 10.100.247.4 with SMTP id u4mr10473620anh.9.1245155062396; Tue, 
	16 Jun 2009 05:24:22 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906160301y77f854d4tc79105663cd6461f@mail.gmail.com>
References: <BAY119-DS91847777C76C54BFA61548E3E0@phx.gbl>
	 <8f0ad1f30906151014n2563ab94l789951b0f33612cd@mail.gmail.com>
	 <9ac0c6aa0906160301y77f854d4tc79105663cd6461f@mail.gmail.com>
Date: Tue, 16 Jun 2009 08:24:22 -0400
Message-ID: <8f0ad1f30906160524m28e715cbic7f250aca1410694@mail.gmail.com>
Subject: Re: Lucene and multi-lingual Unicode - advice needed
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael, here is the Solr change:
http://issues.apache.org/jira/browse/SOLR-1078

Here is the issue to import it into lucene.
http://issues.apache.org/jira/browse/LUCENE-1377


On Tue, Jun 16, 2009 at 6:01 AM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> On Mon, Jun 15, 2009 at 1:14 PM, Robert Muir<rcmuir@gmail.com> wrote:
>
>> I'm not personally biased one way or the other for any particular
>> framework, but recently there has been some improvements added to SolR
>> so that the default type 'text' is pretty good for multilingual
>> processing.
>
> Robert can you describe what these changes are/were, and how one could
> do the same thing as Solr's "text" field, directly with Lucene?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 15:46:49 2009
Return-Path: <java-user-return-40773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21898 invoked from network); 16 Jun 2009 15:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 15:46:49 -0000
Received: (qmail 51698 invoked by uid 500); 16 Jun 2009 15:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51648 invoked by uid 500); 16 Jun 2009 15:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51638 invoked by uid 99); 16 Jun 2009 15:46:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 15:46:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 15:46:50 +0000
Received: by qw-out-2122.google.com with SMTP id 5so2834361qwd.53
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 08:46:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=djtJUgP+SrptbTuF+16tcKVgGvTpFkMTm1AgnYBAIOQ=;
        b=KmpaZWFvRZ4sQT3R1zOChhN0tE+dU0seupq1jIkXaycnU3e/l/jcNc4vyWtk+hs869
         0wJ2h6JBB8/8FSOSmfs2gylW/y2lSGfne16LM6h69U27F3hlRwxtS7QS3dOYBrIgKmuc
         VBDGE6LRxvYxLn3YK0ILAOpREMnAjHXKRXHHc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IAfAsqx5DlqxdGijXaQB4aYxmCONot02Iyp35ln6cQlCJF2kp6L1LKRwL8t8QUL6xN
         0tBDl6wWwHMU1cHXm8aEvy/UIxEkZkseDM2l+xe7l0/fBzFXPN0fmqot8pGVhYZwSIJA
         cuO6H1fovTENjvi8tgpLLTeZTqPGB/zgEahx4=
MIME-Version: 1.0
Received: by 10.220.85.81 with SMTP id n17mr5826682vcl.54.1245167189279; Tue, 
	16 Jun 2009 08:46:29 -0700 (PDT)
In-Reply-To: <-5249559488363393072@unknownmsgid>
References: <-5249559488363393072@unknownmsgid>
Date: Tue, 16 Jun 2009 16:46:29 +0100
Message-ID: <359a92830906160846s7e399accycff2cfbac5d0ec3@mail.gmail.com>
Subject: Re: Problem with NOT and OR Query
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e646121800c402046c7914e1
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e646121800c402046c7914e1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

NOT isn't a boolean operator, which is a source of continuous confusion.
See:
http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#NOT

for a part of the explanation, and
http://wiki.apache.org/lucene-java/BooleanQuerySyntax

Best
Erick

On Tue, Jun 16, 2009 at 11:24 AM, Sumanta Bhowmik <
sumanta.bhowmik@guavus.com> wrote:

> Hi
>
>
>
> I found that a query "NOT num_pkts:1024  OR src_port:80" behaves the same
> as
> "NOT num_pkts:1024  AND src_port:80". The actual query is
>
>
>
> (start_utc:[1230748200 TO 1230768000] OR end_utc:[1230748200 TO
> 1230768000])
> AND (num_pkts:1024  OR NOT num_bytes:40960) but it behaves as if it is
>
>
>
> (start_utc:[1230748200 TO 1230768000] OR end_utc:[1230748200 TO
> 1230768000])
> AND (num_pkts:1024  AND NOT num_bytes:40960).
>
>
>
> Is this a known issue?
>
>
>
>
>
> Is there a workaround to this problem?
>
>
>
> Thanks
>
> Sumanta
>
>

--0016e646121800c402046c7914e1--

From java-user-return-40774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 22:36:29 2009
Return-Path: <java-user-return-40774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25942 invoked from network); 16 Jun 2009 22:36:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 22:36:28 -0000
Received: (qmail 22056 invoked by uid 500); 16 Jun 2009 22:36:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22001 invoked by uid 500); 16 Jun 2009 22:36:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21991 invoked by uid 99); 16 Jun 2009 22:36:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 22:36:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 22:36:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 55B401B008
	for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 16:36:09 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id qJQ--CgQReKb for <java-user@lucene.apache.org>;
	Tue, 16 Jun 2009 16:36:08 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 551B219020
	for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 16:36:08 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9EED2.D7631F42"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Determining lucene version programmatically
Date: Tue, 16 Jun 2009 16:36:06 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB40508F18F@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Determining lucene version programmatically
Thread-Index: Acnu0ta60Uge1wIXQHWtlFnvzpfIrA==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9EED2.D7631F42
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is there any way to programmatically determine the version of lucene
being loaded?

=20


------_=_NextPart_001_01C9EED2.D7631F42--

From java-user-return-40775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 22:47:16 2009
Return-Path: <java-user-return-40775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31659 invoked from network); 16 Jun 2009 22:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 22:47:16 -0000
Received: (qmail 36991 invoked by uid 500); 16 Jun 2009 22:47:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36923 invoked by uid 500); 16 Jun 2009 22:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36913 invoked by uid 99); 16 Jun 2009 22:47:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 22:47:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of galaio.silva@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 22:47:17 +0000
Received: by bwz27 with SMTP id 27so4797146bwz.5
        for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 15:46:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=co7GG5/uqaclOj1UfyZ6vyD2oC4NaN7G/7OXrk+P67A=;
        b=pX8+bH8IF9JIAwmCu2gsro7D6nk0EizCw3NsNZL8KOrDlR1F2mllqdM05uN6TKNHpp
         PH5CJil3az1ge7yxaooSaHwSPNCWMEp6Wyq20lGdfe9NOxxeakMpRM1XiUJSyWv2rqxO
         wwi+FNrFuepmLM0PG5oTH3kz9iPRNQLZAaXJc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=k6wIAdNNAzxfLsXlIJjiKxi8IcPVJexD0SGgS0SZ/6U3RkcdDuzO+EkLx6MAZ33rXe
         EFB5ek/u1QkZ7xmEAsganGkqe4JWfhi/5zAuTI/0g5ibF/CEBs/pTb9x0uqWEkxmyYAW
         rsco7PwtOqSkmTLZbJcjPYF0OPnmsUtvn1RAg=
MIME-Version: 1.0
Received: by 10.223.113.199 with SMTP id b7mr5923702faq.82.1245192415965; Tue, 
	16 Jun 2009 15:46:55 -0700 (PDT)
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB40508F18F@exchange.slc.mainstreamdata.com>
References: <55F9EF953014514EB6BEE1F5198CEEB40508F18F@exchange.slc.mainstreamdata.com>
Date: Tue, 16 Jun 2009 23:46:55 +0100
Message-ID: <fddb43f90906161546l2d92cc30h55a196e97b7335b4@mail.gmail.com>
Subject: Re: Determining lucene version programmatically
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c597b8a170a0046c7ef300
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c597b8a170a0046c7ef300
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

hi ssmith,
is this what you need?

  LucenePackage.get().getImplementationVersion();

cheers,
Jo=E3o


On Tue, Jun 16, 2009 at 11:36 PM, Scott Smith <ssmith@mainstreamdata.com>wr=
ote:

> Is there any way to programmatically determine the version of lucene
> being loaded?
>
>
>
>


--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--001636c597b8a170a0046c7ef300--

From java-user-return-40776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 16 23:41:47 2009
Return-Path: <java-user-return-40776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54938 invoked from network); 16 Jun 2009 23:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jun 2009 23:41:47 -0000
Received: (qmail 87527 invoked by uid 500); 16 Jun 2009 23:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87450 invoked by uid 500); 16 Jun 2009 23:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87440 invoked by uid 99); 16 Jun 2009 23:41:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 23:41:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jun 2009 23:41:48 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id DB37F4B009
	for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 17:41:27 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6GsV0TrJ0gGy for <java-user@lucene.apache.org>;
	Tue, 16 Jun 2009 17:41:26 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 82C0349031
	for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 17:41:26 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9EEDB.F6EF324A"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Getting results for a specific date
Date: Tue, 16 Jun 2009 17:41:25 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB40508F19D@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Getting results for a specific date
Thread-Index: Acnu2/Z7/aiwcokFThyiRP9gR4fWVQ==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9EEDB.F6EF324A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Mostly, our users want to see search results in reverse date order
(newer hits first).  I know how to do that with a Sort object and it
works fine.

=20

However, sometimes our users want to do a search and get results in date
order starting at a certain date.  Say for example, they want to start
their search with documents on June 10.  That wouldn't be a big deal
except that once they display the first page of results for June 10,
they may page in either direction.  What I mean by this is that they may
continue looking at older stories from June 10 or (the problematic case)
they might page to look at newer stories on June 9.

=20

So, a single date range query doesn't seem to me to quite cut it.  My
solution has been to set up two queries-one with the date range of "June
10 or older" and one with a date range of "newer than June 10".  I think
that will work, but it's a bit of a juggling act.

=20

Does anyone have a better solution?


------_=_NextPart_001_01C9EEDB.F6EF324A--

From java-user-return-40777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 00:09:07 2009
Return-Path: <java-user-return-40777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67477 invoked from network); 17 Jun 2009 00:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 00:09:07 -0000
Received: (qmail 14602 invoked by uid 500); 17 Jun 2009 00:09:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14529 invoked by uid 500); 17 Jun 2009 00:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14519 invoked by uid 99); 17 Jun 2009 00:09:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 00:09:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 00:09:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id B0BBC1101A
	for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 18:08:48 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5bIjmtuYq79U for <java-user@lucene.apache.org>;
	Tue, 16 Jun 2009 18:08:47 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 8F12211016
	for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 18:08:47 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Determining lucene version programmatically
Date: Tue, 16 Jun 2009 18:08:47 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB40508F1A0@exchange.slc.mainstreamdata.com>
In-Reply-To: <fddb43f90906161546l2d92cc30h55a196e97b7335b4@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Determining lucene version programmatically
Thread-Index: Acnu1HSMbIZp5abyQnagLJrJ3zaARQAC0q+A
References: <55F9EF953014514EB6BEE1F5198CEEB40508F18F@exchange.slc.mainstreamdata.com> <fddb43f90906161546l2d92cc30h55a196e97b7335b4@mail.gmail.com>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Exactly.  Thanks.

-----Original Message-----
From: Jo=E3o Silva [mailto:galaio.silva@gmail.com]=20
Sent: Tuesday, June 16, 2009 4:47 PM
To: java-user@lucene.apache.org
Subject: Re: Determining lucene version programmatically

hi ssmith,
is this what you need?

  LucenePackage.get().getImplementationVersion();

cheers,
Jo=E3o


On Tue, Jun 16, 2009 at 11:36 PM, Scott Smith =
<ssmith@mainstreamdata.com>wrote:

> Is there any way to programmatically determine the version of lucene
> being loaded?
>
>
>
>


--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 00:15:02 2009
Return-Path: <java-user-return-40778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69607 invoked from network); 17 Jun 2009 00:15:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 00:15:02 -0000
Received: (qmail 20333 invoked by uid 500); 17 Jun 2009 00:15:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20254 invoked by uid 500); 17 Jun 2009 00:15:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20244 invoked by uid 99); 17 Jun 2009 00:15:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 00:15:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 00:15:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id E2D34F01D
	for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 18:14:39 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cEUUYuOMNdjp for <java-user@lucene.apache.org>;
	Tue, 16 Jun 2009 18:14:38 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 12431F01A
	for <java-user@lucene.apache.org>; Tue, 16 Jun 2009 18:14:38 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9EEE0.99F64F86"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Queries and Filters
Date: Tue, 16 Jun 2009 18:14:36 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB40508F1A3@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Queries and Filters
Thread-Index: Acnu4Jku9bIv13wIShayk7l73hdEMQ==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9EEE0.99F64F86
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

The last few versions of lucene have deprecated several of the
interfaces we were using and this is necessitating a fairly major
upgrade of our code (which hasn't had much done to it for several
years).  I'm not complaining; the changes are probably necessary.

=20

In reading LIA2, I've learned about filters and realized that several of
the things we do with queries should probably be done with filters
(queries where the boost was set to 0.0 was the clue).  But I'm having
trouble making them work.

=20

Currently, the code that builds the user's query calls several other
classes and "asks" if they want to add something to the query.  These
classes return a BooleanClause if they do, null if they don't.  The main
query code will add the BooleanClause to a BooleanQuery object (ignoring
null returns).  The BooleanQuery object gets passed to the
Searcher.search() method.  This works fine

=20

So, I did a similar thing for filters.  That is, I created a routine
that called the classes and asks if they have a FilterClause they want
to contribute.  If I get one back, then I add it to a BooleanFilter
object.  The BooleanFilter gets passed to the Searcher.search() method
(unless no one contributes a BooleanFilter object; then the filter
passed is null).

=20

The first class I tried to migrate from providing a query to providing a
filter was the class that defined the categories of information the user
was interested in (it's called "sources" in the code).  Unfortunately,
it doesn't work.  Here's a snippet from the class:

=20

    public BooleanClause getQuery()

    {

        if (!_doQuery) return null;

       =20

        ArrayList<String> sources =3D _optimizedSources;

       =20

        BooleanQuery bquery =3D new BooleanQuery();=20

        for (int i =3D 0 ; i < sources.size() ; i++)

        {

            TermQuery tq =3D new TermQuery(

                new Term( LuceneField.SOURCES,=20

                        sources.get(i).toLowerCase()));

            bquery.add(tq, BooleanClause.Occur.SHOULD);

        }

        bquery.setBoost(0.0f);

       =20

        return new BooleanClause(bquery, BooleanClause.Occur.MUST);

    }

=20

    public FilterClause getFilter()

    {

        if (_doQuery) return null;

       =20

        ArrayList<String> sources =3D _optimizedSources;

       =20

        TermsFilter termFilter =3D new TermsFilter();=20

        for (int i =3D 0 ; i < sources.size() ; i++)

        {

            Term t =3D new Term(LuceneField.SOURCES,=20

                        sources.get(i).toLowerCase());

            termFilter.addTerm(t);

        }

=20

        return new FilterClause(termFilter, BooleanClause.Occur.MUST);

    }

=20

The _doQuery simply defines whether the sources are added to the query
or to the filter object(I added this simply for debugging).  If _doQuery
is true, then everything works fine.  If it is false (meaning the
getFilters() routine return a FilterClause), then the unit tests fail
(no hits are returned).  The test case has a single source and in the
case where the filter is invoked, this FilterClause will be the only
thing added to the BooleanFilter.

=20

I've been staring at this code for two days and don't see what the issue
is.  Based on my understanding, I thought these would provide the same
result.  I'm probably missing something obvious or I don't understand
filters as well as I think I do.

=20

Can anyone suggest what the problem is?

=20

=20

=20

=20

=20


------_=_NextPart_001_01C9EEE0.99F64F86--

From java-user-return-40779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 06:34:15 2009
Return-Path: <java-user-return-40779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74761 invoked from network); 17 Jun 2009 06:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 06:34:15 -0000
Received: (qmail 38132 invoked by uid 500); 17 Jun 2009 06:34:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38052 invoked by uid 500); 17 Jun 2009 06:34:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38042 invoked by uid 99); 17 Jun 2009 06:34:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 06:34:24 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 06:34:13 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 61EE545E966
	for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 08:33:51 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id RyoTJyRmIAa3 for <java-user@lucene.apache.org>;
	Wed, 17 Jun 2009 08:33:41 +0200 (CEST)
Received: from VEGA (unknown [82.113.106.160])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 8B8DF45E963
	for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 08:33:40 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <55F9EF953014514EB6BEE1F5198CEEB40508F1A3@exchange.slc.mainstreamdata.com>
Subject: RE: Queries and Filters
Date: Wed, 17 Jun 2009 08:33:25 +0200
Message-ID: <3FB013E893BA4088A35BEEEF3B922505@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB40508F1A3@exchange.slc.mainstreamdata.com>
Thread-Index: Acnu4Jku9bIv13wIShayk7l73hdEMQANCRzg
X-Virus-Checked: Checked by ClamAV on apache.org

If you are only using filters and no Query (esp. pass an empty BooleanQuery
to search()) it would return no documents. An empty BooleanQuery never
returns result, so there is nothing to filter.

You have two possibilities: if there are no query clauses, add a
MatchAllDocsQuery() to hit all and filter then.

Or alternative: Just wrap all filters with ConstantScoreQuery() and add them
to the BooleanClause as before, so all Filters get normal Queries and can
used as your queries before, and leave BooleanFilter away. The only good
thing of BooleanFilter is, that it optimizes the combining of multiple
filters, so only one scorer is needed. 

By the way: A TermFilter around one term only is not effective, a TermQuery
is better. Only if you add multiple terms to the Filter.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Scott Smith [mailto:ssmith@mainstreamdata.com]
> Sent: Wednesday, June 17, 2009 2:15 AM
> To: java-user@lucene.apache.org
> Subject: Queries and Filters
> 
> The last few versions of lucene have deprecated several of the
> interfaces we were using and this is necessitating a fairly major
> upgrade of our code (which hasn't had much done to it for several
> years).  I'm not complaining; the changes are probably necessary.
> 
> 
> 
> In reading LIA2, I've learned about filters and realized that several of
> the things we do with queries should probably be done with filters
> (queries where the boost was set to 0.0 was the clue).  But I'm having
> trouble making them work.
> 
> 
> 
> Currently, the code that builds the user's query calls several other
> classes and "asks" if they want to add something to the query.  These
> classes return a BooleanClause if they do, null if they don't.  The main
> query code will add the BooleanClause to a BooleanQuery object (ignoring
> null returns).  The BooleanQuery object gets passed to the
> Searcher.search() method.  This works fine
> 
> 
> 
> So, I did a similar thing for filters.  That is, I created a routine
> that called the classes and asks if they have a FilterClause they want
> to contribute.  If I get one back, then I add it to a BooleanFilter
> object.  The BooleanFilter gets passed to the Searcher.search() method
> (unless no one contributes a BooleanFilter object; then the filter
> passed is null).
> 
> 
> 
> The first class I tried to migrate from providing a query to providing a
> filter was the class that defined the categories of information the user
> was interested in (it's called "sources" in the code).  Unfortunately,
> it doesn't work.  Here's a snippet from the class:
> 
> 
> 
>     public BooleanClause getQuery()
> 
>     {
> 
>         if (!_doQuery) return null;
> 
> 
> 
>         ArrayList<String> sources = _optimizedSources;
> 
> 
> 
>         BooleanQuery bquery = new BooleanQuery();
> 
>         for (int i = 0 ; i < sources.size() ; i++)
> 
>         {
> 
>             TermQuery tq = new TermQuery(
> 
>                 new Term( LuceneField.SOURCES,
> 
>                         sources.get(i).toLowerCase()));
> 
>             bquery.add(tq, BooleanClause.Occur.SHOULD);
> 
>         }
> 
>         bquery.setBoost(0.0f);
> 
> 
> 
>         return new BooleanClause(bquery, BooleanClause.Occur.MUST);
> 
>     }
> 
> 
> 
>     public FilterClause getFilter()
> 
>     {
> 
>         if (_doQuery) return null;
> 
> 
> 
>         ArrayList<String> sources = _optimizedSources;
> 
> 
> 
>         TermsFilter termFilter = new TermsFilter();
> 
>         for (int i = 0 ; i < sources.size() ; i++)
> 
>         {
> 
>             Term t = new Term(LuceneField.SOURCES,
> 
>                         sources.get(i).toLowerCase());
> 
>             termFilter.addTerm(t);
> 
>         }
> 
> 
> 
>         return new FilterClause(termFilter, BooleanClause.Occur.MUST);
> 
>     }
> 
> 
> 
> The _doQuery simply defines whether the sources are added to the query
> or to the filter object(I added this simply for debugging).  If _doQuery
> is true, then everything works fine.  If it is false (meaning the
> getFilters() routine return a FilterClause), then the unit tests fail
> (no hits are returned).  The test case has a single source and in the
> case where the filter is invoked, this FilterClause will be the only
> thing added to the BooleanFilter.
> 
> 
> 
> I've been staring at this code for two days and don't see what the issue
> is.  Based on my understanding, I thought these would provide the same
> result.  I'm probably missing something obvious or I don't understand
> filters as well as I think I do.
> 
> 
> 
> Can anyone suggest what the problem is?
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 07:10:13 2009
Return-Path: <java-user-return-40780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96520 invoked from network); 17 Jun 2009 07:10:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 07:10:05 -0000
Received: (qmail 87106 invoked by uid 500); 17 Jun 2009 07:10:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87034 invoked by uid 500); 17 Jun 2009 07:10:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87024 invoked by uid 99); 17 Jun 2009 07:10:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 07:10:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 07:10:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 31DE51600F
	for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 01:09:44 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id M3Fq3op-h5Aj for <java-user@lucene.apache.org>;
	Wed, 17 Jun 2009 01:09:42 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id B81CB1600E
	for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 01:09:42 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Getting results for a specific date
Date: Wed, 17 Jun 2009 01:06:54 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB402BBD35D@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Getting results for a specific date
Thread-Index: Acnu2/Z7/aiwcokFThyiRP9gR4fWVQAPjt6y
References: <55F9EF953014514EB6BEE1F5198CEEB40508F19D@exchange.slc.mainstreamdata.com>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>,
	<java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Clarification: Obviously, I should have said "June 11" when I talked of =
a newer date.

________________________________

From: Scott Smith [mailto:ssmith@mainstreamdata.com]
Sent: Tue 6/16/2009 5:41 PM
To: java-user@lucene.apache.org
Subject: Getting results for a specific date



Mostly, our users want to see search results in reverse date order
(newer hits first).  I know how to do that with a Sort object and it
works fine.



However, sometimes our users want to do a search and get results in date
order starting at a certain date.  Say for example, they want to start
their search with documents on June 10.  That wouldn't be a big deal
except that once they display the first page of results for June 10,
they may page in either direction.  What I mean by this is that they may
continue looking at older stories from June 10 or (the problematic case)
they might page to look at newer stories on June 9.



So, a single date range query doesn't seem to me to quite cut it.  My
solution has been to set up two queries-one with the date range of "June
10 or older" and one with a date range of "newer than June 10".  I think
that will work, but it's a bit of a juggling act.



Does anyone have a better solution?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 07:41:42 2009
Return-Path: <java-user-return-40781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13214 invoked from network); 17 Jun 2009 07:41:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 07:41:41 -0000
Received: (qmail 38275 invoked by uid 500); 17 Jun 2009 07:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38109 invoked by uid 500); 17 Jun 2009 07:41:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38008 invoked by uid 99); 17 Jun 2009 07:41:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 07:41:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 07:41:37 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 5185451020
	for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 01:41:17 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id fVWLnx-FGeb0 for <java-user@lucene.apache.org>;
	Wed, 17 Jun 2009 01:41:15 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id B49C751026
	for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 01:41:15 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Queries and Filters
Date: Wed, 17 Jun 2009 01:41:15 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB402BBD35E@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Queries and Filters
Thread-Index: Acnu4Jku9bIv13wIShayk7l73hdEMQANCRzgAAJQ1Wg=
References: <55F9EF953014514EB6BEE1F5198CEEB40508F1A3@exchange.slc.mainstreamdata.com> <3FB013E893BA4088A35BEEEF3B922505@VEGA>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>,
	<java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I thought of that.  However, I verified that there are queries.  The =
query code also does what you suggest with MatchAllDocsQuery() if there =
were no queries, but the test case doesn't need this since there are =
queries.
=20
I'd really like to understand why the code doesn't work before I try the =
ConstantScoreQuery solution.
=20
What is the reasoning behind your TermFilter comment?

________________________________

From: Uwe Schindler [mailto:uwe@thetaphi.de]
Sent: Wed 6/17/2009 12:33 AM
To: java-user@lucene.apache.org
Subject: RE: Queries and Filters



If you are only using filters and no Query (esp. pass an empty =
BooleanQuery
to search()) it would return no documents. An empty BooleanQuery never
returns result, so there is nothing to filter.

You have two possibilities: if there are no query clauses, add a
MatchAllDocsQuery() to hit all and filter then.

Or alternative: Just wrap all filters with ConstantScoreQuery() and add =
them
to the BooleanClause as before, so all Filters get normal Queries and =
can
used as your queries before, and leave BooleanFilter away. The only good
thing of BooleanFilter is, that it optimizes the combining of multiple
filters, so only one scorer is needed.

By the way: A TermFilter around one term only is not effective, a =
TermQuery
is better. Only if you add multiple terms to the Filter.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de <http://www.thetaphi.de/>=20
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Scott Smith [mailto:ssmith@mainstreamdata.com]
> Sent: Wednesday, June 17, 2009 2:15 AM
> To: java-user@lucene.apache.org
> Subject: Queries and Filters
>
> The last few versions of lucene have deprecated several of the
> interfaces we were using and this is necessitating a fairly major
> upgrade of our code (which hasn't had much done to it for several
> years).  I'm not complaining; the changes are probably necessary.
>
>
>
> In reading LIA2, I've learned about filters and realized that several =
of
> the things we do with queries should probably be done with filters
> (queries where the boost was set to 0.0 was the clue).  But I'm having
> trouble making them work.
>
>
>
> Currently, the code that builds the user's query calls several other
> classes and "asks" if they want to add something to the query.  These
> classes return a BooleanClause if they do, null if they don't.  The =
main
> query code will add the BooleanClause to a BooleanQuery object =
(ignoring
> null returns).  The BooleanQuery object gets passed to the
> Searcher.search() method.  This works fine
>
>
>
> So, I did a similar thing for filters.  That is, I created a routine
> that called the classes and asks if they have a FilterClause they want
> to contribute.  If I get one back, then I add it to a BooleanFilter
> object.  The BooleanFilter gets passed to the Searcher.search() method
> (unless no one contributes a BooleanFilter object; then the filter
> passed is null).
>
>
>
> The first class I tried to migrate from providing a query to providing =
a
> filter was the class that defined the categories of information the =
user
> was interested in (it's called "sources" in the code).  Unfortunately,
> it doesn't work.  Here's a snippet from the class:
>
>
>
>     public BooleanClause getQuery()
>
>     {
>
>         if (!_doQuery) return null;
>
>
>
>         ArrayList<String> sources =3D _optimizedSources;
>
>
>
>         BooleanQuery bquery =3D new BooleanQuery();
>
>         for (int i =3D 0 ; i < sources.size() ; i++)
>
>         {
>
>             TermQuery tq =3D new TermQuery(
>
>                 new Term( LuceneField.SOURCES,
>
>                         sources.get(i).toLowerCase()));
>
>             bquery.add(tq, BooleanClause.Occur.SHOULD);
>
>         }
>
>         bquery.setBoost(0.0f);
>
>
>
>         return new BooleanClause(bquery, BooleanClause.Occur.MUST);
>
>     }
>
>
>
>     public FilterClause getFilter()
>
>     {
>
>         if (_doQuery) return null;
>
>
>
>         ArrayList<String> sources =3D _optimizedSources;
>
>
>
>         TermsFilter termFilter =3D new TermsFilter();
>
>         for (int i =3D 0 ; i < sources.size() ; i++)
>
>         {
>
>             Term t =3D new Term(LuceneField.SOURCES,
>
>                         sources.get(i).toLowerCase());
>
>             termFilter.addTerm(t);
>
>         }
>
>
>
>         return new FilterClause(termFilter, BooleanClause.Occur.MUST);
>
>     }
>
>
>
> The _doQuery simply defines whether the sources are added to the query
> or to the filter object(I added this simply for debugging).  If =
_doQuery
> is true, then everything works fine.  If it is false (meaning the
> getFilters() routine return a FilterClause), then the unit tests fail
> (no hits are returned).  The test case has a single source and in the
> case where the filter is invoked, this FilterClause will be the only
> thing added to the BooleanFilter.
>
>
>
> I've been staring at this code for two days and don't see what the =
issue
> is.  Based on my understanding, I thought these would provide the same
> result.  I'm probably missing something obvious or I don't understand
> filters as well as I think I do.
>
>
>
> Can anyone suggest what the problem is?
>
>
>
>
>
>
>
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 08:51:04 2009
Return-Path: <java-user-return-40782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49463 invoked from network); 17 Jun 2009 08:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 08:51:04 -0000
Received: (qmail 71185 invoked by uid 500); 17 Jun 2009 08:51:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71119 invoked by uid 500); 17 Jun 2009 08:51:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71109 invoked by uid 99); 17 Jun 2009 08:51:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 08:51:13 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.193] (HELO mail-yx0-f193.google.com) (209.85.210.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 08:51:05 +0000
Received: by yxe31 with SMTP id 31so146206yxe.29
        for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 01:50:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.69.6 with SMTP id w6mr710734ybk.234.1245228643730; Wed, 17 
	Jun 2009 01:50:43 -0700 (PDT)
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB40508F18F@exchange.slc.mainstreamdata.com>
References: <55F9EF953014514EB6BEE1F5198CEEB40508F18F@exchange.slc.mainstreamdata.com>
Date: Wed, 17 Jun 2009 04:50:43 -0400
Message-ID: <9ac0c6aa0906170150x257a434dgced3aa0b975982fc@mail.gmail.com>
Subject: Re: Determining lucene version programmatically
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

As of 2.9, org.apache.lucene.util.Constants.LUCENE_VERSION is a good
way to get this.

That constant is set by first looking at the implementation version,
and then making sure the version Lucene thinks it is (2.9 on trunk
now) is contained in the resulting string.  It also takes care of a
null implementation version (returning 2.9).

Mike

On Tue, Jun 16, 2009 at 6:36 PM, Scott Smith<ssmith@mainstreamdata.com> wrote:
> Is there any way to programmatically determine the version of lucene
> being loaded?
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 15:48:25 2009
Return-Path: <java-user-return-40783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20124 invoked from network); 17 Jun 2009 15:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 15:48:25 -0000
Received: (qmail 12691 invoked by uid 500); 17 Jun 2009 15:48:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12657 invoked by uid 500); 17 Jun 2009 15:48:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12647 invoked by uid 99); 17 Jun 2009 15:48:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 15:48:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 15:48:25 +0000
Received: from MSG-BOX.basistech.net ([::1]) by MSG-BOX.basistech.net ([::1])
 with mapi; Wed, 17 Jun 2009 11:48:00 -0400
From: Teruhiko Kurosaka <Kuro@basistech.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 17 Jun 2009 11:47:59 -0400
Subject: Lucene performance: is search time linear to the index size?
Thread-Topic: Lucene performance: is search time linear to the index size?
Thread-Index: AQHJ72L9/4l50j0dWk+jMSXa7r5alw==
Message-ID: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I am seeing my Lucene application's search time grows pretty much linearly =
to the number of Documents.
Is this how Lucene is supposed to work, or does it depend on the nature of =
query?=20

I am not using FuzzyQuery that was the subject of the recent discussion by =
the way.

-Kuro

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 15:57:57 2009
Return-Path: <java-user-return-40784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26848 invoked from network); 17 Jun 2009 15:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 15:57:57 -0000
Received: (qmail 41208 invoked by uid 500); 17 Jun 2009 15:58:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41171 invoked by uid 500); 17 Jun 2009 15:58:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41161 invoked by uid 99); 17 Jun 2009 15:58:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 15:58:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 15:57:57 +0000
Received: by fg-out-1718.google.com with SMTP id e12so142151fga.4
        for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 08:57:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=2+TjjicQRzJpEdIHZKrcW92QWCx90p984lZFDZs3jUA=;
        b=ao0228Y3ZjddcAY74Qsf+3m6lo44DyJmYspiJY7v+zzGqLSjd9H8hRSMx7cPEBHlvA
         8QHaQ1E2gJ7GzQ4osixIfm2plrOakk2BeHW1pTXgUQeC09gCewEEFJUawyacOmTMg0nz
         Nqwf0Js+BVlaVZUh0mEkRjW14q8ewwAkaolm4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=uB7d7k9rAuZsAEMV0gTZTyg754pOXDqCiFMvR4gdnKGGC8rOjuAdi9cInjsAyMrx5/
         M8uwBQKFXpkbnl0R+Fx/K5jW6Sovr5+cL4hTAG7CRjTAC0JTZ+FbcVvBRM9vREbrFZjK
         Ne0HQ7FabyiYTr6J/810aDubAONNT49SzOcwQ=
MIME-Version: 1.0
Received: by 10.86.60.15 with SMTP id i15mr681830fga.5.1245254256069; Wed, 17 
	Jun 2009 08:57:36 -0700 (PDT)
In-Reply-To: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 17 Jun 2009 16:57:16 +0100
Message-ID: <8c4e68610906170857w48dcd24h399bdf4c809fbb4d@mail.gmail.com>
Subject: Re: Lucene performance: is search time linear to the index size?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd34100968c72046c8d5937
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd34100968c72046c8d5937
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

It depends on lots of things, but the time to execute a search would not
typically grow linearly with the number of documents.  But the time to
retrieve data from all the hits might, if the number of hits is growing in
line with the number of documents.  Are you doing that by any chance, as
opposed to getting data for the top n hits, regardless of the number of
hits?


--
Ian.


On Wed, Jun 17, 2009 at 4:47 PM, Teruhiko Kurosaka <Kuro@basistech.com>wrote:

> I am seeing my Lucene application's search time grows pretty much linearly
> to the number of Documents.
> Is this how Lucene is supposed to work, or does it depend on the nature of
> query?
>
> I am not using FuzzyQuery that was the subject of the recent discussion by
> the way.
>
> -Kuro
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd34100968c72046c8d5937--

From java-user-return-40785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 16:09:28 2009
Return-Path: <java-user-return-40785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37453 invoked from network); 17 Jun 2009 16:09:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 16:09:28 -0000
Received: (qmail 69725 invoked by uid 500); 17 Jun 2009 16:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69677 invoked by uid 500); 17 Jun 2009 16:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69667 invoked by uid 99); 17 Jun 2009 16:09:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 16:09:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.221.193 as permitted sender)
Received: from [209.85.221.193] (HELO mail-qy0-f193.google.com) (209.85.221.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 16:09:27 +0000
Received: by qyk31 with SMTP id 31so450413qyk.29
        for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 09:09:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zlrY11PY7e0fVkRwkL8jNrdrmeTND3NTkeXtDL/pxpU=;
        b=dkpRkAyVkTlTCiYJ9bjdu/6BpY7HnbScSJx/T0fb6AN7PhvW8yzvs/hjSu942To3HX
         9R0wfv1X1q+H7eDjIitIsF+0hybXGYfGUIVtWOAyH38DlxrgD66WTERkkPoym2CFS+zS
         gbbFYjs21uUsw91+G4z3P4AdbcwMZQ2x0pFfM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SvEGI1QRRPbvZzIkJFeLaFEcCg0oagvI+oH8rqACKzrA9ES3ufvkCGPNiXuKdAbOED
         zLwCgTlRx2YG+A3/NxMfRS4ByQKXy6tVXOkFVK1bysV1Gkcn/hVVgEqU2wcFlpdTP+7m
         5TUvZ+eKaOS/jFCkSEfiNLJFgDQ1bMvrrpgYI=
MIME-Version: 1.0
Received: by 10.220.75.73 with SMTP id x9mr423671vcj.56.1245254946742; Wed, 17 
	Jun 2009 09:09:06 -0700 (PDT)
In-Reply-To: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
Date: Wed, 17 Jun 2009 17:09:06 +0100
Message-ID: <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com>
Subject: Re: Lucene performance: is search time linear to the index size?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64f5f4cc16169046c8d82c5
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64f5f4cc16169046c8d82c5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Are you measuring search time *only* or are you measuring total response
time
including assembling whatever you assemble? If you're measuring total
response
time, everything from network latency to what you're doing with each hit may
affect response time.

This is especially true if you're iterating over a Hits object.

It would be helpful if you showed us the snippet that you use to measure.

Best
Erick

On Wed, Jun 17, 2009 at 4:47 PM, Teruhiko Kurosaka <Kuro@basistech.com>wrote:

> I am seeing my Lucene application's search time grows pretty much linearly
> to the number of Documents.
> Is this how Lucene is supposed to work, or does it depend on the nature of
> query?
>
> I am not using FuzzyQuery that was the subject of the recent discussion by
> the way.
>
> -Kuro
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64f5f4cc16169046c8d82c5--

From java-user-return-40786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 17:18:47 2009
Return-Path: <java-user-return-40786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86476 invoked from network); 17 Jun 2009 17:18:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 17:18:47 -0000
Received: (qmail 38361 invoked by uid 500); 17 Jun 2009 17:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38317 invoked by uid 500); 17 Jun 2009 17:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38306 invoked by uid 99); 17 Jun 2009 17:18:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 17:18:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 17:18:46 +0000
Received: from MSG-BOX.basistech.net ([::1]) by MSG-BOX.basistech.net ([::1])
 with mapi; Wed, 17 Jun 2009 13:18:25 -0400
From: Teruhiko Kurosaka <Kuro@basistech.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 17 Jun 2009 13:18:18 -0400
Subject: RE: Lucene performance: is search time linear to the index size?
Thread-Topic: Lucene performance: is search time linear to the index size?
Thread-Index: AcnvZgmGKahRn/YeRT6reNXqoiK65wAB8mMA
Message-ID: <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net>
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
 <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com>
In-Reply-To: <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you, Ian and Erick,

This is a stand-alone search application that runs a query
and exits, as opposed to the typical web-based search program.


The query is consists of combination of SpanQuery, TermQuery,
BooleanClause, SpanNearQuery, and SpanTermQuery.
I get the top 50 hits at most and no fancy assembly of output is done.
I'm measuring the time from the start to finish of this application,
and the profile result shows the most time is spent inside Lucene.


-kuro =20

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]=20
> Sent: Wednesday, June 17, 2009 9:09 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene performance: is search time linear to the=20
> index size?
>=20
> Are you measuring search time *only* or are you measuring=20
> total response time including assembling whatever you=20
> assemble? If you're measuring total response time, everything=20
> from network latency to what you're doing with each hit may=20
> affect response time.
>=20
> This is especially true if you're iterating over a Hits object.
>=20
> It would be helpful if you showed us the snippet that you use=20
> to measure.
>=20
> Best
> Erick
>=20
> On Wed, Jun 17, 2009 at 4:47 PM, Teruhiko Kurosaka=20
> <Kuro@basistech.com>wrote:
>=20
> > I am seeing my Lucene application's search time grows pretty much=20
> > linearly to the number of Documents.
> > Is this how Lucene is supposed to work, or does it depend on the=20
> > nature of query?
> >
> > I am not using FuzzyQuery that was the subject of the recent=20
> > discussion by the way.
> >
> > -Kuro
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> =

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 19:17:02 2009
Return-Path: <java-user-return-40787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6733 invoked from network); 17 Jun 2009 19:17:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 19:17:01 -0000
Received: (qmail 22103 invoked by uid 500); 17 Jun 2009 19:17:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22057 invoked by uid 500); 17 Jun 2009 19:17:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22047 invoked by uid 99); 17 Jun 2009 19:17:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 19:17:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 19:16:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MH0cg-0005DL-OW
	for java-user@lucene.apache.org; Wed, 17 Jun 2009 12:16:38 -0700
Message-ID: <24080152.post@talk.nabble.com>
Date: Wed, 17 Jun 2009 12:16:38 -0700 (PDT)
From: vanshi <nilu.thakur@gmail.com>
To: java-user@lucene.apache.org
Subject: how to deal with too many clause error in boolean query.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nilu.thakur@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello all,

I have a situation where a field is indexed like this
(FAC_NAME(Field.Store.NO, Field.Index.NO_NORMS)) and keyword analyzer is
used on this field. Although, I'm aware that NO_NORMS doesn't use any
analyzer.

Now, the query +(FAC_NAME:fa*) is failing with 'Too many clause exception'
in my application. I tried to query the index directly through 'Luke; and it
is coming up with same exception. If I change the query to have three
letters like +(FAC_NAME:fai*) then it is returning results.

What could be the cause of errror? Is it due to 'NO_NORMS' field?? 
-- 
View this message in context: http://www.nabble.com/how-to-deal-with-too-many-clause-error-in-boolean-query.-tp24080152p24080152.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 19:41:55 2009
Return-Path: <java-user-return-40788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22189 invoked from network); 17 Jun 2009 19:41:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 19:41:50 -0000
Received: (qmail 66744 invoked by uid 500); 17 Jun 2009 19:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62600 invoked by uid 500); 17 Jun 2009 19:40:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61499 invoked by uid 99); 17 Jun 2009 19:32:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 19:32:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of williamstw@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 19:32:48 +0000
Received: by yxe34 with SMTP id 34so719777yxe.20
        for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 12:32:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=DRmfd2Ebh+PhwSAyaLUmlSJ9uGyPCPARWlj06IrU2G0=;
        b=QjXXyty+CX/6NhxWlDpti6gIV6IbBzDo0Ypk+FfyHCgF34bTuLdyWxQ+ICPOukue9B
         9B8YHEkZKvvQxv+A7AzAKVza8amjU3q4PP4HS7WdD2UxXEzbBpuHgXoGL0QvdjIZUeQy
         T37hQ3pSMjQc+WxTPnlRMyP0WviDhFxwRwY/A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=RoYDBHsBlR/dioEfgesO/Bm0XxujCnQupTRByhvrPqNh59/K60nwDM7qjs1i68kNlw
         C8cMdsqF+3Y82CyaMlhB1UTEUlrScBbMYPSmaBrqcfhse1HRqayHzK34YrlHMfrs1Eq5
         +YH5XlpavOsKPsoliQbIhBWAAobOxsAnKxSco=
MIME-Version: 1.0
Received: by 10.151.27.12 with SMTP id e12mr1814609ybj.282.1245267147597; Wed, 
	17 Jun 2009 12:32:27 -0700 (PDT)
In-Reply-To: <24080152.post@talk.nabble.com>
References: <24080152.post@talk.nabble.com>
Date: Wed, 17 Jun 2009 15:32:27 -0400
Message-ID: <499888440906171232g1344bd9byf37ed3bb97ab5308@mail.gmail.com>
Subject: Re: how to deal with too many clause error in boolean query.
From: Tim Williams <williamstw@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jun 17, 2009 at 3:16 PM, vanshi<nilu.thakur@gmail.com> wrote:
>
> Hello all,
>
> I have a situation where a field is indexed like this
> (FAC_NAME(Field.Store.NO, Field.Index.NO_NORMS)) and keyword analyzer is
> used on this field. Although, I'm aware that NO_NORMS doesn't use any
> analyzer.
>
> Now, the query +(FAC_NAME:fa*) is failing with 'Too many clause exception'
> in my application. I tried to query the index directly through 'Luke; and it
> is coming up with same exception. If I change the query to have three
> letters like +(FAC_NAME:fai*) then it is returning results.
>
> What could be the cause of errror? Is it due to 'NO_NORMS' field??

Wildcards work by term expansion see:

http://markmail.org/message/s6ruhvpnxhemu3ms

--tim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 20:02:21 2009
Return-Path: <java-user-return-40789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39297 invoked from network); 17 Jun 2009 20:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 20:02:20 -0000
Received: (qmail 45463 invoked by uid 500); 17 Jun 2009 20:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45415 invoked by uid 500); 17 Jun 2009 20:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45405 invoked by uid 99); 17 Jun 2009 20:02:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 20:02:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 20:02:19 +0000
Received: by ey-out-2122.google.com with SMTP id 25so94395eya.53
        for <java-user@lucene.apache.org>; Wed, 17 Jun 2009 13:01:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CRzzNpX2EgZCkhHY4nh0o2ak106ktfvM39Lxb0zlbSQ=;
        b=WcmHWi+/Cv30eyEmSz3Cp+yxgWQyh2g/2qZC1PxkrhdGE7b50kYCv49RNo2VIAkFhk
         e3aoJxmX4tuJRSAAS2Ilk3Puq3if+gpNxrZS8mavKx/82mqFaLRuZrglsPgsqdynLSWU
         ++62NDLH4pm2O6ALSdQvul7Beca6mbFQJn6eU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CmTFleond4wuOa/szG6+DPwvJikPU+iShwRAMwq9lCrBr+VWI9JaPlrX36AEbGkdhc
         evTOqY0a3K9Z08u5Gf/mF9owJQEcvTjpWaSrA6miLsfWe5RZr66SqCZSieDAyvVfB76o
         GCxEMnX15cBttryQS8fvvEYu+AM4oiZCqfp74=
MIME-Version: 1.0
Received: by 10.210.33.3 with SMTP id g3mr698987ebg.41.1245268917861; Wed, 17 
	Jun 2009 13:01:57 -0700 (PDT)
In-Reply-To: <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net>
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
	 <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com>
	 <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net>
Date: Wed, 17 Jun 2009 16:01:57 -0400
Message-ID: <e994873a0906171301n13af7b31naf95672b18a5658b@mail.gmail.com>
Subject: Re: Lucene performance: is search time linear to the index size?
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c19827fbee0046c90c32f
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c19827fbee0046c90c32f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

There is a similar discussion on this topic here:

http://www.gossamer-threads.com/lists/lucene/java-user/42824?search_string=Lucene%20search%20performance%3A%20linear%3F;#42824

or: *http://tinyurl.com/lpp3hf*

On Wed, Jun 17, 2009 at 1:18 PM, Teruhiko Kurosaka <Kuro@basistech.com>wrote:

> Thank you, Ian and Erick,
>
> This is a stand-alone search application that runs a query
> and exits, as opposed to the typical web-based search program.
>
>
> The query is consists of combination of SpanQuery, TermQuery,
> BooleanClause, SpanNearQuery, and SpanTermQuery.
> I get the top 50 hits at most and no fancy assembly of output is done.
> I'm measuring the time from the start to finish of this application,
> and the profile result shows the most time is spent inside Lucene.
>
>
> -kuro
>
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Wednesday, June 17, 2009 9:09 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene performance: is search time linear to the
> > index size?
> >
> > Are you measuring search time *only* or are you measuring
> > total response time including assembling whatever you
> > assemble? If you're measuring total response time, everything
> > from network latency to what you're doing with each hit may
> > affect response time.
> >
> > This is especially true if you're iterating over a Hits object.
> >
> > It would be helpful if you showed us the snippet that you use
> > to measure.
> >
> > Best
> > Erick
> >
> > On Wed, Jun 17, 2009 at 4:47 PM, Teruhiko Kurosaka
> > <Kuro@basistech.com>wrote:
> >
> > > I am seeing my Lucene application's search time grows pretty much
> > > linearly to the number of Documents.
> > > Is this how Lucene is supposed to work, or does it depend on the
> > > nature of query?
> > >
> > > I am not using FuzzyQuery that was the subject of the recent
> > > discussion by the way.
> > >
> > > -Kuro
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174c19827fbee0046c90c32f--

From java-user-return-40790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 17 23:49:37 2009
Return-Path: <java-user-return-40790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51905 invoked from network); 17 Jun 2009 23:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jun 2009 23:49:37 -0000
Received: (qmail 15048 invoked by uid 500); 17 Jun 2009 23:49:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14982 invoked by uid 500); 17 Jun 2009 23:49:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14972 invoked by uid 99); 17 Jun 2009 23:49:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 23:49:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jun 2009 23:49:36 +0000
Received: from MSG-BOX.basistech.net ([::1]) by MSG-BOX.basistech.net ([::1])
 with mapi; Wed, 17 Jun 2009 19:49:15 -0400
From: Teruhiko Kurosaka <Kuro@basistech.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 17 Jun 2009 19:49:14 -0400
Subject: RE: Lucene performance: is search time linear to the index size?
Thread-Topic: Lucene performance: is search time linear to the index size?
Thread-Index: AcnvZgmGKahRn/YeRT6reNXqoiK65wAB8mMAAA31YZA=
Message-ID: <CAE8639A6FAB3D4AA7973D5897B3251824D1039187@MSG-BOX.basistech.net>
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
 <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com>
 <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net>
In-Reply-To: <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I've written a test program that uses the simplest form of search,
TermQuery and measure the time it takes to search a term in a field
on indices of various sizes.

The result is a very linear growth of search time vs the index size in
terms of # of Documents, not # of unique terms in that field.

-kuro =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 05:30:35 2009
Return-Path: <java-user-return-40791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73817 invoked from network); 18 Jun 2009 05:30:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 05:30:35 -0000
Received: (qmail 7280 invoked by uid 500); 18 Jun 2009 05:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7206 invoked by uid 500); 18 Jun 2009 05:30:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7196 invoked by uid 99); 18 Jun 2009 05:30:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 05:30:43 +0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=MIME_BASE64_TEXT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.15] (HELO smtp128.mail.mud.yahoo.com) (209.191.85.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Jun 2009 05:30:33 +0000
Received: (qmail 74096 invoked from network); 18 Jun 2009 05:30:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=j6C+FOfgR78GDapbAvJ9aW9doOjY9cktxxcxrl4hNk31kwagH8VTrwAIPQduVJAJI9UDg7A1AJs9jam4glvaipiQ6Iev3smW6gc+ZuWFtDS2k/lRXok5SV0+kJdvEj2qYVzTtLu6/PTJVMr2srrsDM2NBMrF6tkNW8pgHxGJKvM=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp128.mail.mud.yahoo.com with SMTP; 18 Jun 2009 05:30:10 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: 2qowP74VM1le6c.eiRRYYJn9x1X_5WD5HcusFIvfxEXCQt3IA7jbYvwETClQGqZ2GWNSv.eiThiUuTZ6_.Gu81r4prtTRW2ZVRtn7F7ceXtL1NAQJT.4Ttcnw3HQg1UPXBCDBp7toDWw2ytPMts_HQOC_8h0oIICm7xwshPh1YabHHMvB4yVXUFJg7VHvijAN6CJ8jMhrmRReVfmygwFJEflGnvbi8.QD1amKV9CDPUa8Qx_B6SfWL.m5ld_gn8sZOyyffylJcDgxo2PUQMgF7Msm66dgSTTEkrUUwYZuRaVHu_ojfYB
X-Yahoo-Newman-Property: ymail-3
Message-ID: <202a01c9efd5$d92ff0c0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <059101c9755e$556e2ff0$710bc30a@sv.us.sonicwall.com> <359a92830901130547uf0c2507j56f9d807d84b4524@mail.gmail.com>
Subject: Re: Best way to do date sort
Date: Thu, 18 Jun 2009 11:00:07 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

SSBhbSBoYXZpbmcgYSBtaWxsaW9uIG9mIGRvY3VtZW50cyBwZXIgZGF5IHRvIGluZGV4LiBEYXRl
VGltZSBmaWVsZCBpcyB3aXRoIG1pbnV0ZSByZXNvbHV0aW9uLiANCg0KSG93IG11Y2ggbWVtb3J5
IGkgc2F2ZSBieSBzcGxpdHRpbmcgdGhpcyB0byBtdWx0aXBsZSBmaWVsZHMgKG9uZSBmaWVsZCBj
b250YWluaW50ZyBZWVlZTU1ERCwgb25lIGZpZWxkIHdpdGggSEggYW5kIG9uZSB3aXRoIE1NKS4g
DQoNCkNvdWxkIGFueW9uZSBwcm92aWRlIG1lIHNvbWUgY2FsY3VsYXRpb24gb2YgY2FsY3VsYXRp
bmcgbWVtb3J5IGZvciBzb3J0aW5nIGluIGNhc2Ugb2YgbXVsdGlwbGUgZmllbGRzLiBJIHRoaW5r
IGZpZWxkY2FjaGUgd2lsbCBsb2FkIGFsbCB1bmlxdWUgdGVybXMgYW5kIGl0IHdpbGwgaGF2ZSBh
IHBvaW50ZXIgdG8gdGhlIGFsbCByZXNwZWN0aXZlIGRvY3VtZW50cy4gSWYgaXQgc28gdGhlbiBz
cGxpdHRpbmcgdGhlIGRhdGUgZmllbGQgd2lsbCBjb25zdW1lIG1vcmUgbWVtb3J5LiAgIA0KDQpS
ZWdhcmRzDQpHYW5lc2gNCg0KLS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tLSANCkZyb206ICJF
cmljayBFcmlja3NvbiIgPGVyaWNrZXJpY2tzb25AZ21haWwuY29tPg0KVG86IDxqYXZhLXVzZXJA
bHVjZW5lLmFwYWNoZS5vcmc+DQpTZW50OiBUdWVzZGF5LCBKYW51YXJ5IDEzLCAyMDA5IDc6MTcg
UE0NClN1YmplY3Q6IFJlOiBCZXN0IHdheSB0byBkbyBkYXRlIHNvcnQNCg0KDQo+IFRoaXMgcXVl
c3Rpb24sIGFsb25nIHdpdGggbWFueSBwb3NzaWJsZSBhbnN3ZXJzIGhhcyBiZWVuDQo+IGRpc2N1
c3NlZCBtYW55IHRpbWVzLCBzbyB0aGVyZSdzIGEgd2VhbHRoIG9mIGluZm9ybWF0aW9uDQo+IGlu
IHRoZSBzZWFyY2hhYmxlIGFyY2hpdmUuDQo+IA0KPiBUaGUgc2hvcnQgZm9ybSBpcyAiaXQgZGVw
ZW5kcyIuIERvIHlvdSB3YW50IHRvIHNvcnQ/IEluDQo+IHRoYXQgY2FzZSBzdG9yaW5nIGEgc2lu
Z2xlIGZpZWxkIHdpbGwgY29zdCB5b3Ugd2hlbiBzb3J0aW5nLg0KPiBTdG9yZSB0aGUgY29hcnNl
c3QgZ3JhbnVsYXJpdHkgeW91IGNhbi4gQ29uc2lkZXIgYnJlYWtpbmcNCj4gdXAgdGhlIGRhdGUg
ZmllbGQgKGkuZS4gb25lIGZpZWxkIGNvbnRhaW5pbnRnIFlZWVlNTURELA0KPiBwZXJoYXBzIG9u
ZSBmaWVsZCBjb250YWluaW5nIEhITU0gb3IgZXZlbiBvbmUgZmllbGQNCj4gd2l0aCBISCBhbmQg
b25lIHdpdGggTU0pLg0KPiANCj4gVGhpcyBraW5kIG9mIHN0cmF0ZWd5IHdpbGwgc2F2ZSB5b3Ug
ZmFyIG1vcmUgc3BhY2UgdGhhbiB3b3JyeWluZw0KPiBhYm91dCBzdHJpbmdzIHZzIG51bWJlci4g
QW5kIHdpbGwgc29ydCBmYXN0ZXIuIGV0Yy4NCj4gDQo+IEJlc3QNCj4gRXJpY2sNCj4gDQo+IE9u
IFR1ZSwgSmFuIDEzLCAyMDA5IGF0IDQ6MDcgQU0sIEdhbmVzaCA8ZW1haWxnYW5lQHlhaG9vLmNv
LmluPiB3cm90ZToNCj4gDQo+PiBJIGFtIGluZGV4aW5nIGFuZCBzdG9yaW5nIGRhdGUgdGltZSB3
aXRoIG1pbnV0ZSByZXNvbHV0aW9uLiBJIG5lZWQgdG8gZG8NCj4+IGRhdGUgcmFuZ2UgcXVlcnkg
YW5kIGFsc28gZG8gc29ydGluZyBvbiB0aGlzIGZpZWxkLiBJIGFtIGhhdmluZyBhbG1vc3QgMzAN
Cj4+IG1pbGxpb24gcmVjb3JkcyBzcHJlYWQgYWNyb3NzIDIwIGRhdGFiYXNlLg0KPj4NCj4+IG9w
dGlvbjE6DQo+PiBUbyBpbmRleCB0aGUgZGF0ZSB0aW1lIGFzIHN0cmluZw0KPj4NCj4+IG9wdGlv
bjI6DQo+PiBUbyBpbmRleCBkYXRlLCBob3VyIGFuZCBtaW51dGUgc2VwYXJhdGVseSBhcyBudW1i
ZXIuDQo+Pg0KPj4gV2hpY2ggb3B0aW9uIHdpbGwgY29uc3VtZSBsZXNzZXIgbWVtb3J5Pw0KPj4N
Cj4+IFdoZXRoZXIgZGF0ZSByYW5nZSBxdWVyeSB3aWxsIGFsc28gbG9hZCBhbGwgZGF0YSB1c2lu
ZyBGaWVsZEltcGw/DQo+Pg0KPj4gUmVnYXJkcw0KPj4gR2FuZXNoDQo+PiBTZW5kIGluc3RhbnQg
bWVzc2FnZXMgdG8geW91ciBvbmxpbmUgZnJpZW5kcyBodHRwOi8vaW4ubWVzc2VuZ2VyLnlhaG9v
LmNvbQ0KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IEZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pg0KPj4NCj4=

Send instant messages to your online friends http://in.messenger.yahoo.com 


From java-user-return-40792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 07:44:28 2009
Return-Path: <java-user-return-40792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28063 invoked from network); 18 Jun 2009 07:44:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 07:44:27 -0000
Received: (qmail 56412 invoked by uid 500); 18 Jun 2009 07:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56369 invoked by uid 500); 18 Jun 2009 07:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56359 invoked by uid 99); 18 Jun 2009 07:44:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 07:44:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.221.193 as permitted sender)
Received: from [209.85.221.193] (HELO mail-qy0-f193.google.com) (209.85.221.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 07:44:28 +0000
Received: by qyk31 with SMTP id 31so1130850qyk.29
        for <java-user@lucene.apache.org>; Thu, 18 Jun 2009 00:44:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=RwoMR+u8d37gnSjSQfAK5e3oMVg1x8QJeEKmxxfvJRY=;
        b=VhvWQDKqhUCmKvby4AY/WoE3w/7flaMZPPfeUOmmWGlNPcJQsaurW8VcfhOD/6zeFG
         6NnLq/FOrLVofjD0Nwj1Z2Wj3qUeY/yBr+AuhyDbGye6njCnxvkgAz35jN5fICpLlAri
         Eg5/XU/tbaEbBz0CYVf7J70iEIMg/4qJDoRHk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=e/9ORgKt+fS2alKkfzQuOr677nDvwSKrQPgt1b4qaS4nQpjDrctgckXBGn2jdqsDOA
         lck9eiNfYgU257L2+Mq9cgMjZns5JtNS9wtYgWj+Kh3FLjtSS1uvDb3JlZMj1QmTGzv1
         6maP/FvWKA/3NU7IlpWYDXJ6AKcjmpsxBVHNM=
MIME-Version: 1.0
Received: by 10.220.96.204 with SMTP id i12mr1181065vcn.94.1245311047522; Thu, 
	18 Jun 2009 00:44:07 -0700 (PDT)
In-Reply-To: <CAE8639A6FAB3D4AA7973D5897B3251824D1039187@MSG-BOX.basistech.net>
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
	 <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com>
	 <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net>
	 <CAE8639A6FAB3D4AA7973D5897B3251824D1039187@MSG-BOX.basistech.net>
Date: Thu, 18 Jun 2009 08:44:07 +0100
Message-ID: <359a92830906180044s7dd5ae1aie65630045b5c8fea@mail.gmail.com>
Subject: Re: Lucene performance: is search time linear to the index size?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64607c09f5a3a046c9a92e6
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64607c09f5a3a046c9a92e6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Opening a searcher and doing the first query incurs a significant amount of
overhead, cache loading, etc. Inferring search times relative to index size
with a program like you describe is unreliable.

Try firing a few queries at the index without measuring, *then* measure the
time it takes for subsequent queries and you'll get a much better picture of
actual response time.

The fact that a program that fires a single query at a newly opened reader
has near-linear performance isn't as surprising as all that. I'd be more
concerned if, say, queries 10 through 100 *on the same underlying reader*
displayed this behavior.

See:

http://wiki.apache.org/lucene-java/ImproveSearchingSpeed?highlight=(warming)

especially the questions around:
*When measuring performance, disregard the first query

Best
Erick
*
On Thu, Jun 18, 2009 at 12:49 AM, Teruhiko Kurosaka <Kuro@basistech.com>wrote:

> I've written a test program that uses the simplest form of search,
> TermQuery and measure the time it takes to search a term in a field
> on indices of various sizes.
>
> The result is a very linear growth of search time vs the index size in
> terms of # of Documents, not # of unique terms in that field.
>
> -kuro
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64607c09f5a3a046c9a92e6--

From java-user-return-40793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 09:43:25 2009
Return-Path: <java-user-return-40793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74233 invoked from network); 18 Jun 2009 09:43:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 09:43:23 -0000
Received: (qmail 593 invoked by uid 500); 18 Jun 2009 09:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 511 invoked by uid 500); 18 Jun 2009 09:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 501 invoked by uid 99); 18 Jun 2009 09:43:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 09:43:31 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 09:43:21 +0000
Received: by gxk11 with SMTP id 11so1343496gxk.5
        for <java-user@lucene.apache.org>; Thu, 18 Jun 2009 02:43:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.73.1 with SMTP id a1mr3222831ybl.95.1245318180272; Thu, 18 
	Jun 2009 02:43:00 -0700 (PDT)
In-Reply-To: <499888440906171232g1344bd9byf37ed3bb97ab5308@mail.gmail.com>
References: <24080152.post@talk.nabble.com>
	 <499888440906171232g1344bd9byf37ed3bb97ab5308@mail.gmail.com>
Date: Thu, 18 Jun 2009 05:43:00 -0400
Message-ID: <9ac0c6aa0906180243s656f276cvf3ce4ff66d94cdb4@mail.gmail.com>
Subject: Re: how to deal with too many clause error in boolean query.
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jun 17, 2009 at 3:32 PM, Tim Williams<williamstw@gmail.com> wrote:
> On Wed, Jun 17, 2009 at 3:16 PM, vanshi<nilu.thakur@gmail.com> wrote:
>>
>> Hello all,
>>
>> I have a situation where a field is indexed like this
>> (FAC_NAME(Field.Store.NO, Field.Index.NO_NORMS)) and keyword analyzer is
>> used on this field. Although, I'm aware that NO_NORMS doesn't use any
>> analyzer.
>>
>> Now, the query +(FAC_NAME:fa*) is failing with 'Too many clause exception'
>> in my application. I tried to query the index directly through 'Luke; and it
>> is coming up with same exception. If I change the query to have three
>> letters like +(FAC_NAME:fai*) then it is returning results.
>>
>> What could be the cause of errror? Is it due to 'NO_NORMS' field??
>
> Wildcards work by term expansion see:
>
> http://markmail.org/message/s6ruhvpnxhemu3ms

And so if you expand to too many clauses, you'll hit that exception.

In 2.9 (trunk, not yet released) WildcardQuery has a
setConstantScoreRewrite method, which if you set to true will
internally rewrite to a filter instead of expanding to a many-Term'd
BooleanQuery.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 15:19:18 2009
Return-Path: <java-user-return-40794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52011 invoked from network); 18 Jun 2009 15:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 15:19:18 -0000
Received: (qmail 69998 invoked by uid 500); 18 Jun 2009 15:19:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69948 invoked by uid 500); 18 Jun 2009 15:19:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69938 invoked by uid 99); 18 Jun 2009 15:19:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 15:19:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.69] (HELO elasmtp-mealy.atl.sa.earthlink.net) (209.86.89.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 15:19:17 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=GcYldLd2guRn6IUsB+4UEViJEmZ4Ct1c6lLvVaYYRnT7DSD+nzMieaQM/D4O5y7Z;
  h=Received:From:To:Subject:Date:Message-ID:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE:Importance:X-ELNK-Trace:X-Originating-IP;
Received: from [67.121.115.213] (helo=sys2a)
	by elasmtp-mealy.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <bedouglas@earthlink.net>)
	id 1MHJOC-0006KU-4g
	for java-user@lucene.apache.org; Thu, 18 Jun 2009 11:18:56 -0400
From: "bruce" <bedouglas@earthlink.net>
To: <java-user@lucene.apache.org>
Subject: gui based app/user interface apps..
Date: Thu, 18 Jun 2009 08:18:54 -0700
Message-ID: <07d101c9f028$185a29d0$0301a8c0@tmesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1933
Importance: Normal
X-ELNK-Trace: 37ffaa9bc7b967c00cc1426638a40ef67e972de0d01da9404b5787abbc39b8a2bf2cc68d6729104e350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 67.121.115.213
X-Virus-Checked: Checked by ClamAV on apache.org

hi list...

sorry to post here, but i figured you might be able to help...

i'm working on a project, that deals with building a crawler, and i'm
working out the details for the mgmt app for the crawler. i'm currently
looking at how to deal with the status/actions of the crawler, and how the
different components of what i call a job would be compiled, and reported
back to the batabase.

i'm wondering.. is there a good gui/web based UI app for managing
lucene/nutch that I could look at for ideas/thoughts. Or, is there anyone on
this list that i might be able to email with, talk to about this.. while
i've got a few ideas, never hurts to be able to talk/share thoughts with
others..

basically:
 my methodology is that i create a batchfile
  (the batchfile consists of the underlying apps that do the crawling)
 each batchfile can be run by multiple jobs (as required)
 i'm creating the piece of the mgmt app that will track/manage the jobs
 i'm lookin at being able to track the health of the 'jobs' as they run

 i'm considering the 'actions' as well as the 'status'

 i'm thinking of:
 	disable/enable
	stop/restart
	waiting to start
	running
	complete/finished

 status might have things like:
	success/complete (no errs at all)
	complete/errs (ran through all the scripts, but some had errs)
	failed (didn't complete all the scripts)
	etc...


 i'm looking for someone i might be able to talk to, or exchange a few
ideas/emails with on this..

thanks much!



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 16:17:13 2009
Return-Path: <java-user-return-40795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74749 invoked from network); 18 Jun 2009 16:17:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 16:17:13 -0000
Received: (qmail 357 invoked by uid 500); 18 Jun 2009 16:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 204 invoked by uid 500); 18 Jun 2009 16:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 187 invoked by uid 99); 18 Jun 2009 16:17:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 16:17:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.83.156.225] (HELO lnx500.hrz.tu-darmstadt.de) (130.83.156.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 16:17:11 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx500.hrz.tu-darmstadt.de (8.14.2/8.14.2/HRZ/PMX) with ESMTP id n5IGGntd023425
	for <java-user@lucene.apache.org>; Thu, 18 Jun 2009 18:16:49 +0200
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9F030.2FDF45C0"
Subject: Same score for different fields
Date: Thu, 18 Jun 2009 18:16:49 +0200
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F039CD593@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Same score for different fields
Thread-Index: AcnwMC7062Qja9MRSYGkzA4fU4iNTA==
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX-TU: seen v0.62 by 5.5.3.366731, Antispam-Engine: 2.7.0.366912, Antispam-Data: 2009.6.18.160315
X-PMX-SPAMCHECK: outgoing mail
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F030.2FDF45C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I have created a Lucene index with two fields.=20

Let's take this example entry from my index as displayed by Luke: =20

=20

Field               |   Norm      |        Value

--------------------------------------------

<term>         |  0.375        |     average

<term>         |  0.375        |     salary

<term>         |  0.375        |     professional

<term>         |  0.375        |     baseball

<term>         |  0.375        |     player

<term>         |  0.375        |     of

<seq>            |  0.625        |     average salary

<seq>            |  0.625        |     baseball player

=20

When I run the search, documents that contain hits of the field with
the highest norm (or score : is it the same?), in this case the field
"seq", are ranked in the top.=20

How can I give similar scores for both fields?

=20

Thank you.

Nada=20


------_=_NextPart_001_01C9F030.2FDF45C0--

From java-user-return-40796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 17:14:15 2009
Return-Path: <java-user-return-40796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90556 invoked from network); 18 Jun 2009 17:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 17:14:15 -0000
Received: (qmail 89985 invoked by uid 500); 18 Jun 2009 17:14:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89937 invoked by uid 500); 18 Jun 2009 17:14:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89927 invoked by uid 99); 18 Jun 2009 17:14:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 17:14:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Jun 2009 17:14:14 +0000
Received: (qmail 61380 invoked by uid 60001); 18 Jun 2009 17:13:53 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245345233; bh=+nX7NmpV+la1kLSUbmhCbIpTKL8xei/s8CB9a0cpIAM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=2OukqXomLR8iW5/OKgQWgLgQFCuIe96q9/T5apejLfsisQd4IJv9BmkgRt6y/4cMnSiXsoyPC87nKde5qaPiBhtLdzBOMahcEtyhW3qFI/yxQzx9/inmel0aOR1OxzI54ExfWH+88IUGsyo2Hq7xfI/LKkbpXhDzyUVdd2r5UBc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Gl89clyI3mJ9iewg2xzMBGZMIyINx8gxyw+k2YD2QT9Gms2x83i/l28v7+Nn+4zEkcVd7hjx2SX+HHH3AVyxUUfAsiebP313ZFzcG4fzEEFDWNOGZ9TWrqx5eyOsdI9J5v4kJwtIq7Pp6c56xSorOQy/OVjS4PmTmk4VXsuvGwQ=;
Message-ID: <317568.59696.qm@web50308.mail.re2.yahoo.com>
X-YMail-OSG: xel_XUcVM1nt4QvAKCY7IB63OYs9rgCRs0dqUXM2lDTlsgZpc0lsG7YbpvCNY.sMGvXkhJDCAC_8epZlYv_yFDJPgYFHdwq7vjLxYj88_faAeuu8aguyK0JPF7QXObbx4O8bdqDykK4hnZKUILo0xXwEwtBltJf0c0HiDwh3g8YwMcycihWGoqnY6soPzKgUm.sYk2UkIJQTWfQCIAB6Ko10YRbxqkTlEcGbnAuDmv8P1s0Lf0fTjVTaX70ZA4_ZMAldPN_IdRZfcwkS2XDOPuHR488rj7vjdlaup6dZhPHkuyH4sY0Hi63aN0pUXNJLOMv6e3oMYoXe
Received: from [167.206.188.3] by web50308.mail.re2.yahoo.com via HTTP; Thu, 18 Jun 2009 10:13:53 PDT
X-Mailer: YahooMailRC/1357.18 YahooMailWebService/0.7.289.15
References: <0DBCCB475CDE864F8F6086D69BFC5D9F039CD593@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Date: Thu, 18 Jun 2009 10:13:53 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Same score for different fields
To: java-user@lucene.apache.org
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F039CD593@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Nada,

Scores and norms are two different things.  If you look for the Lucene class called DefaultSimilarity you will see how norms are computed:

  public float computeNorm(String field, FieldInvertState state) {
    final int numTerms;
    if (discountOverlaps)
      numTerms = state.getLength() - state.getNumOverlap();
    else
      numTerms = state.getLength();
    return (float) (state.getBoost() * lengthNorm(field, numTerms));
  }


So that's how two different fields can still have the same norms value.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Nada Mimouni <mimouni@tk.informatik.tu-darmstadt.de>
> To: java-user@lucene.apache.org
> Sent: Thursday, June 18, 2009 12:16:49 PM
> Subject: Same score for different fields
> 
> Hi,
> 
> 
> 
> I have created a Lucene index with two fields. 
> 
> Let's take this example entry from my index as displayed by Luke:  
> 
> 
> 
> Field               |   Norm      |        Value
> 
> --------------------------------------------
> 
>          |  0.375        |     average
> 
>          |  0.375        |     salary
> 
>          |  0.375        |     professional
> 
>          |  0.375        |     baseball
> 
>          |  0.375        |     player
> 
>          |  0.375        |     of
> 
>             |  0.625        |     average salary
> 
>             |  0.625        |     baseball player
> 
> 
> 
> When I run the search, documents that contain hits of the field with
> the highest norm (or score : is it the same?), in this case the field
> "seq", are ranked in the top. 
> 
> How can I give similar scores for both fields?
> 
> 
> 
> Thank you.
> 
> Nada 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 17:15:33 2009
Return-Path: <java-user-return-40797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91191 invoked from network); 18 Jun 2009 17:15:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 17:15:33 -0000
Received: (qmail 96163 invoked by uid 500); 18 Jun 2009 17:15:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96098 invoked by uid 500); 18 Jun 2009 17:15:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96088 invoked by uid 99); 18 Jun 2009 17:15:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 17:15:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Jun 2009 17:15:30 +0000
Received: (qmail 33013 invoked by uid 60001); 18 Jun 2009 17:15:08 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245345308; bh=e3ysJm1onz75X4nXc2JKZMD4UlXmDFVrqb5rR90oHL8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=XptX3gWFGR4Nq2WgWTRmHHEsh2qR9Wwyzlowm/s/0KBp5wB4AhF8erRZGszkWt1Dwhan9xHqoDcm9iwQxMOuIFQpR5WEzgMvONkXNU3YLDcmvfPiqRHq2iZ0DkF6cR/HNhI4PvC5vJdALQVzsLKszBia7eVz2WreGesvs4QVet0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Y0PwC6qCJppV9fcX3nu+tOeg37IJKASEZ60hANjO8C8mwtzjbiQ53rK6HcsfYtPXEA6ghtAmbWSTTzes9b+4MEwlWThQqeEeNEIxCgLSGz1iimwg5eHlryr7MYkG+AOrvZh5xfEnnM8jo8ZxAN85s4hjnfnO718JtA76mLvVWLM=;
Message-ID: <706568.32292.qm@web50306.mail.re2.yahoo.com>
X-YMail-OSG: 1JGLwbwVM1nidt.WKFZdBLY8E1NEkowMTsdrJMOgcjgrV_NrURUUmYU4PxKqI6CpsBxcqoyPE4jVVgoqtD.wC34ojR6eH7jUKYGNaJww1Uo7dzjgcQRM4eXke.7FIBDCV7hAu08EqTHJ25soU4WZy52T7f2dgJvMLE.bdG0mGH99DZ6xaampC0aTp4MziXq_TLt5HZKR4PcRmFGkT.tjXsX6esJrw9MO6ZIPH4VHm4Dehtg3_6FGjKDN8pZ2sQ8iska90qcgBQKz0ns_fHSISzHqahix2kNlVGiklm1nt0loNVmkpovJgxS9FL.XINLQFj_zCLaX9dC4
Received: from [167.206.188.3] by web50306.mail.re2.yahoo.com via HTTP; Thu, 18 Jun 2009 10:15:08 PDT
X-Mailer: YahooMailRC/1357.18 YahooMailWebService/0.7.289.15
References: <07d101c9f028$185a29d0$0301a8c0@tmesa.com>
Date: Thu, 18 Jun 2009 10:15:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: gui based app/user interface apps..
To: java-user@lucene.apache.org
In-Reply-To: <07d101c9f028$185a29d0$0301a8c0@tmesa.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Bruce,

I think you should ask on nutch-user instead on this java-user Lucene list.
You will see a link to a Windows app for managing Nutch on the Nutch Wiki.
Nutch used to have a UI, but I'm afraid Nutch 1.0 no longer has it.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: bruce <bedouglas@earthlink.net>
> To: java-user@lucene.apache.org
> Sent: Thursday, June 18, 2009 11:18:54 AM
> Subject: gui based app/user interface apps..
> 
> hi list...
> 
> sorry to post here, but i figured you might be able to help...
> 
> i'm working on a project, that deals with building a crawler, and i'm
> working out the details for the mgmt app for the crawler. i'm currently
> looking at how to deal with the status/actions of the crawler, and how the
> different components of what i call a job would be compiled, and reported
> back to the batabase.
> 
> i'm wondering.. is there a good gui/web based UI app for managing
> lucene/nutch that I could look at for ideas/thoughts. Or, is there anyone on
> this list that i might be able to email with, talk to about this.. while
> i've got a few ideas, never hurts to be able to talk/share thoughts with
> others..
> 
> basically:
> my methodology is that i create a batchfile
>   (the batchfile consists of the underlying apps that do the crawling)
> each batchfile can be run by multiple jobs (as required)
> i'm creating the piece of the mgmt app that will track/manage the jobs
> i'm lookin at being able to track the health of the 'jobs' as they run
> 
> i'm considering the 'actions' as well as the 'status'
> 
> i'm thinking of:
>     disable/enable
>     stop/restart
>     waiting to start
>     running
>     complete/finished
> 
> status might have things like:
>     success/complete (no errs at all)
>     complete/errs (ran through all the scripts, but some had errs)
>     failed (didn't complete all the scripts)
>     etc...
> 
> 
> i'm looking for someone i might be able to talk to, or exchange a few
> ideas/emails with on this..
> 
> thanks much!
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 18:56:54 2009
Return-Path: <java-user-return-40798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64702 invoked from network); 18 Jun 2009 18:56:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 18:56:54 -0000
Received: (qmail 6799 invoked by uid 500); 18 Jun 2009 18:57:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6716 invoked by uid 500); 18 Jun 2009 18:57:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6706 invoked by uid 99); 18 Jun 2009 18:57:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 18:57:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 18:56:54 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 2EC7871C1BD; Thu, 18 Jun 2009 11:56:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 2BE4A71C1B9
	for <java-user@lucene.apache.org>; Thu, 18 Jun 2009 11:56:33 -0700 (PDT)
Date: Thu, 18 Jun 2009 11:56:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Query rewriting/optimization
In-Reply-To: <9ac0c6aa0905211146h4dcf8900n84cea229a375f736@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0906181151330.5143@radix.cryptio.net>
References: <4A158A03.8020408@cisco.com> <9ac0c6aa0905211146h4dcf8900n84cea229a375f736@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > ((Src:Testing Dst:Test) (Src:Test2 Port:http)).
: > In this case, would Lucene optimize to remove the unwanted BooleanQueries ?

: Alas, Lucene in general does not do such structural optimization (and
: I agree, we should).  EG we could do it during Query.rewrite().

Except that flattening BooleanQueries wouldn't be an optimization -- it 
would be a restructuring that would actually change the scores computed 
(based on the effect of the coord function).

"((A B) (C D))" is a fundementally different query from "(A B C D)" .. the 
client code should controll which gets built.

: There are certain corner cases that are handled, eg a BooleanQuery
: with a single BooleanClause, or BooleanQuery where
: minimumNumberShouldMatch exceeds the number of SHOULD clauses
: immediately returns no matches, etc.

...for the record, these *are* genuiune optimizations, the scores produced 
are the same as if they weren't there.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 19:55:17 2009
Return-Path: <java-user-return-40799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96752 invoked from network); 18 Jun 2009 19:55:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 19:55:15 -0000
Received: (qmail 1998 invoked by uid 500); 18 Jun 2009 19:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1933 invoked by uid 500); 18 Jun 2009 19:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1923 invoked by uid 99); 18 Jun 2009 19:55:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 19:55:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 19:55:15 +0000
Received: from MSG-BOX.basistech.net ([::1]) by MSG-BOX.basistech.net ([::1])
 with mapi; Thu, 18 Jun 2009 15:54:53 -0400
From: Teruhiko Kurosaka <Kuro@basistech.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 18 Jun 2009 15:54:51 -0400
Subject: RE: Lucene performance: is search time linear to the index size?
Thread-Topic: Lucene performance: is search time linear to the index size?
Thread-Index: Acnv6KYYcZohRmr7T1K52il7J9c7/gAZLLuw
Message-ID: <CAE8639A6FAB3D4AA7973D5897B3251824D5742391@MSG-BOX.basistech.net>
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
	 <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com>
	 <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net>
	 <CAE8639A6FAB3D4AA7973D5897B3251824D1039187@MSG-BOX.basistech.net>
 <359a92830906180044s7dd5ae1aie65630045b5c8fea@mail.gmail.com>
In-Reply-To: <359a92830906180044s7dd5ae1aie65630045b5c8fea@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Erik,
The way I test this program is by issuing 1000 queries and
I have profiled it to make sure the start up cost is negligible.

I ran a further test and discovered that the search time is actually
proportional to the number of potential hits.  (I am saying
"potential hits" because I am limiting the number of hits
by specifing "n" parameter in search method.)

Because the number of hits was proportinoal to the number=20
of Documents in the index in my previous test, I came
to a wrong conclusion that the search time is proportional=20
to the index size.  If I have only one Document that can=20
matches with a query, the search time remains constant no=20
matter how large the index is.

-kuro =20

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]=20
> Sent: Thursday, June 18, 2009 12:44 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene performance: is search time linear to the=20
> index size?
>=20
> Opening a searcher and doing the first query incurs a=20
> significant amount of overhead, cache loading, etc. Inferring=20
> search times relative to index size with a program like you=20
> describe is unreliable.
>=20
> Try firing a few queries at the index without measuring,=20
> *then* measure the time it takes for subsequent queries and=20
> you'll get a much better picture of actual response time.
>=20
> The fact that a program that fires a single query at a newly=20
> opened reader has near-linear performance isn't as surprising=20
> as all that. I'd be more concerned if, say, queries 10=20
> through 100 *on the same underlying reader* displayed this behavior.
>=20
> See:
>=20
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed?highl
> ight=3D(warming)
>=20
> especially the questions around:
> *When measuring performance, disregard the first query
>=20
> Best
> Erick
> *
> On Thu, Jun 18, 2009 at 12:49 AM, Teruhiko Kurosaka=20
> <Kuro@basistech.com>wrote:
>=20
> > I've written a test program that uses the simplest form of search,=20
> > TermQuery and measure the time it takes to search a term in=20
> a field on=20
> > indices of various sizes.
> >
> > The result is a very linear growth of search time vs the=20
> index size in=20
> > terms of # of Documents, not # of unique terms in that field.
> >
> > -kuro
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> =

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 22:09:21 2009
Return-Path: <java-user-return-40800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65262 invoked from network); 18 Jun 2009 22:09:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 22:09:21 -0000
Received: (qmail 61425 invoked by uid 500); 18 Jun 2009 22:09:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61361 invoked by uid 500); 18 Jun 2009 22:09:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61351 invoked by uid 99); 18 Jun 2009 22:09:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 22:09:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [38.117.159.162] (HELO exchange.wgen.net) (38.117.159.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 22:09:20 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
x-cr-hashedpuzzle: AHqv A8SA Bfz0 Bmrg CBnV E8aZ FH5Z FQgJ FYIU GC3n Gr31 H2Xo IJ3M I9Pg JgGP Jsg+;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{54C8DD9D-881C-46C7-9993-7C12DA97D699};agBiAG8AbwB0AGgAQAB3AGcAZQBuAC4AbgBlAHQA;Thu, 18 Jun 2009 22:08:50 GMT;UgBFADoAIABMAHUAYwBlAG4AZQAgAHAAZQByAGYAbwByAG0AYQBuAGMAZQA6ACAAaQBzACAAcwBlAGEAcgBjAGgAIAB0AGkAbQBlACAAbABpAG4AZQBhAHIAIAB0AG8AIAB0AGgAZQAgAGkAbgBkAGUAeAAgAHMAaQB6AGUAPwA=
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
x-cr-puzzleid: {54C8DD9D-881C-46C7-9993-7C12DA97D699}
Content-class: urn:content-classes:message
Subject: RE: Lucene performance: is search time linear to the index size?
Date: Thu, 18 Jun 2009 18:08:50 -0400
Message-ID: <C11CD502DF4DC0419A4174FBBE908A2103FC5998@wgexch05.wgenhq.net>
In-Reply-To: <CAE8639A6FAB3D4AA7973D5897B3251824D5742391@MSG-BOX.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene performance: is search time linear to the index size?
Thread-Index: Acnv6KYYcZohRmr7T1K52il7J9c7/gAZLLuwAATws2A=
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net> <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com> <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net> <CAE8639A6FAB3D4AA7973D5897B3251824D1039187@MSG-BOX.basistech.net> <359a92830906180044s7dd5ae1aie65630045b5c8fea@mail.gmail.com> <CAE8639A6FAB3D4AA7973D5897B3251824D5742391@MSG-BOX.basistech.net>
From: "Jay Booth" <jbooth@wgen.net>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Are you fetching all of the results for your search?  If so, you're
actually measuring the time to pull n stored documents out of the index,
not to search over an index of n documents.  Which would of course be
linear, most of your cost there will be the i/o to actually pull the
document from disk, not the search time.=20

-----Original Message-----
From: Teruhiko Kurosaka [mailto:Kuro@basistech.com]=20
Sent: Thursday, June 18, 2009 2:55 PM
To: java-user@lucene.apache.org
Subject: RE: Lucene performance: is search time linear to the index
size?

Erik,
The way I test this program is by issuing 1000 queries and
I have profiled it to make sure the start up cost is negligible.

I ran a further test and discovered that the search time is actually
proportional to the number of potential hits.  (I am saying
"potential hits" because I am limiting the number of hits
by specifing "n" parameter in search method.)

Because the number of hits was proportinoal to the number=20
of Documents in the index in my previous test, I came
to a wrong conclusion that the search time is proportional=20
to the index size.  If I have only one Document that can=20
matches with a query, the search time remains constant no=20
matter how large the index is.

-kuro =20

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]=20
> Sent: Thursday, June 18, 2009 12:44 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene performance: is search time linear to the=20
> index size?
>=20
> Opening a searcher and doing the first query incurs a=20
> significant amount of overhead, cache loading, etc. Inferring=20
> search times relative to index size with a program like you=20
> describe is unreliable.
>=20
> Try firing a few queries at the index without measuring,=20
> *then* measure the time it takes for subsequent queries and=20
> you'll get a much better picture of actual response time.
>=20
> The fact that a program that fires a single query at a newly=20
> opened reader has near-linear performance isn't as surprising=20
> as all that. I'd be more concerned if, say, queries 10=20
> through 100 *on the same underlying reader* displayed this behavior.
>=20
> See:
>=20
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed?highl
> ight=3D(warming)
>=20
> especially the questions around:
> *When measuring performance, disregard the first query
>=20
> Best
> Erick
> *
> On Thu, Jun 18, 2009 at 12:49 AM, Teruhiko Kurosaka=20
> <Kuro@basistech.com>wrote:
>=20
> > I've written a test program that uses the simplest form of search,=20
> > TermQuery and measure the time it takes to search a term in=20
> a field on=20
> > indices of various sizes.
> >
> > The result is a very linear growth of search time vs the=20
> index size in=20
> > terms of # of Documents, not # of unique terms in that field.
> >
> > -kuro
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 22:20:58 2009
Return-Path: <java-user-return-40801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75806 invoked from network); 18 Jun 2009 22:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 22:20:58 -0000
Received: (qmail 81078 invoked by uid 500); 18 Jun 2009 22:21:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81008 invoked by uid 500); 18 Jun 2009 22:21:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80998 invoked by uid 99); 18 Jun 2009 22:21:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 22:21:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of galaio.silva@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 22:20:59 +0000
Received: by fxm3 with SMTP id 3so1518866fxm.5
        for <java-user@lucene.apache.org>; Thu, 18 Jun 2009 15:20:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=cne/rLZa6FvSIhfxJffRGXJorUgrjeFOw8Fo4OTFmDI=;
        b=foEZfLzxBAnzwNYF0vJesNHUBXMXveFDuamcLzUsWmcyu023K4jowMI+NGsT9wuEA+
         nGh5+SJYLXZFarL0Ug45dTTTwpsBHX9pswrcMLaC2wClwT67HuAUT8AkrU1bPz6xR6Cy
         rtm3Lqw765d8eUVR9hGZ7RFyf0ioGH2SVX548=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=blt3TzHnJfecT/6/aAMkrVgXB4OLY+02PKSysvh/39IZM68suIrHUqZtTEFe5wQr9f
         U5afaXJOf75TS2YB94QcFTUi2DqytbYL2Il78gZw7ijkMLbD74ffD3z1SktfrrWsR8NY
         1D8nGWJU2Ci+xRDXZ9NSySzNu2eBxSVN/uCK0=
MIME-Version: 1.0
Received: by 10.223.104.74 with SMTP id n10mr1805580fao.5.1245363638298; Thu, 
	18 Jun 2009 15:20:38 -0700 (PDT)
Date: Thu, 18 Jun 2009 23:20:38 +0100
Message-ID: <fddb43f90906181520t627d3fe1gf900497ce3c15c47@mail.gmail.com>
Subject: update a specific document
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b1c746e851046ca6d180
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5b1c746e851046ca6d180
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,
I want to update a specific document,
but i didn't found updateDocument(Query)
or updateDocument(Term[]), so to make
a update, i will need to have a term with an
unique id, so a retrieve a u)nique document,
There's any way of access the internal document
id?
For example, imagine that i have the id of document
to update, and i want to update(Term,Document) but passing
the internal id as Term.

cheers,
Jo=E3o


--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--001636c5b1c746e851046ca6d180--

From java-user-return-40802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 18 22:27:51 2009
Return-Path: <java-user-return-40802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81591 invoked from network); 18 Jun 2009 22:27:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Jun 2009 22:27:51 -0000
Received: (qmail 97363 invoked by uid 500); 18 Jun 2009 22:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97313 invoked by uid 500); 18 Jun 2009 22:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97303 invoked by uid 99); 18 Jun 2009 22:28:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 22:28:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jun 2009 22:27:51 +0000
Received: by ewy27 with SMTP id 27so1745913ewy.5
        for <java-user@lucene.apache.org>; Thu, 18 Jun 2009 15:27:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=sJY7UDyr9UENMkFDB5ROi9pZs7/7hjXFEKGqWji2V8M=;
        b=DD6igDARAfiGWGQOwWdnVI8m1YyvdkMSpekSiJK21FKqGZpKGfnAqxtqYfNTwM5FjP
         RgX9KMKr9N2EXN1ORjR+FKieIjJjCmVjizDppoQzMNvJu8HFDpOMDv/DVhfQPZGfNRad
         MMwAyrSWsByLzMOF5wj6M3Ql1FUUddKHvTNro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=LIgtNkLHNZ5EVfuZb0UdlsvjOA2K3cFihHldPUr7h8n+vU2Ptu3252Ywg/u+OJVQzk
         AdPY5rmWV/hXxaONU9KxLOdIkcF7BrPLFXdbSFsWpxTJwfDsjsA/zdYOYRC6T+J7MR/W
         bRfoHorifMROgKLDMhIBD1ClrEaUHFOZ9JsXQ=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.70.205 with SMTP id p55mr705232wed.55.1245364049634; Thu, 
	18 Jun 2009 15:27:29 -0700 (PDT)
In-Reply-To: <CAE8639A6FAB3D4AA7973D5897B3251824D5742391@MSG-BOX.basistech.net>
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
	 <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com>
	 <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net>
	 <CAE8639A6FAB3D4AA7973D5897B3251824D1039187@MSG-BOX.basistech.net>
	 <359a92830906180044s7dd5ae1aie65630045b5c8fea@mail.gmail.com>
	 <CAE8639A6FAB3D4AA7973D5897B3251824D5742391@MSG-BOX.basistech.net>
Date: Thu, 18 Jun 2009 18:27:29 -0400
X-Google-Sender-Auth: 9c715ed20cf24e1e
Message-ID: <c68e39170906181527s94e15f8g8a2f8e2c5795026d@mail.gmail.com>
Subject: Re: Lucene performance: is search time linear to the index size?
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jun 18, 2009 at 3:54 PM, Teruhiko Kurosaka<Kuro@basistech.com> wrot=
e:
> Because the number of hits was proportinoal to the number
> of Documents in the index in my previous test, I came
> to a wrong conclusion that the search time is proportional
> to the index size. =A0If I have only one Document that can
> matches with a query, the search time remains constant no
> matter how large the index is.

Right. An inverted index contains a list of documents that match each
term, so ignoring other overhead and effects, search time is
proportional to the number of documents matching the various clauses
of the query.

-Yonik
http://www.lucidimagination.com

> -kuro
>
>> -----Original Message-----
>> From: Erick Erickson [mailto:erickerickson@gmail.com]
>> Sent: Thursday, June 18, 2009 12:44 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene performance: is search time linear to the
>> index size?
>>
>> Opening a searcher and doing the first query incurs a
>> significant amount of overhead, cache loading, etc. Inferring
>> search times relative to index size with a program like you
>> describe is unreliable.
>>
>> Try firing a few queries at the index without measuring,
>> *then* measure the time it takes for subsequent queries and
>> you'll get a much better picture of actual response time.
>>
>> The fact that a program that fires a single query at a newly
>> opened reader has near-linear performance isn't as surprising
>> as all that. I'd be more concerned if, say, queries 10
>> through 100 *on the same underlying reader* displayed this behavior.
>>
>> See:
>>
>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed?highl
>> ight=3D(warming)
>>
>> especially the questions around:
>> *When measuring performance, disregard the first query
>>
>> Best
>> Erick
>> *
>> On Thu, Jun 18, 2009 at 12:49 AM, Teruhiko Kurosaka
>> <Kuro@basistech.com>wrote:
>>
>> > I've written a test program that uses the simplest form of search,
>> > TermQuery and measure the time it takes to search a term in
>> a field on
>> > indices of various sizes.
>> >
>> > The result is a very linear growth of search time vs the
>> index size in
>> > terms of # of Documents, not # of unique terms in that field.
>> >
>> > -kuro
>> >
>> >
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 00:17:44 2009
Return-Path: <java-user-return-40803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34848 invoked from network); 19 Jun 2009 00:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 00:17:44 -0000
Received: (qmail 33463 invoked by uid 500); 19 Jun 2009 00:17:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33384 invoked by uid 500); 19 Jun 2009 00:17:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33373 invoked by uid 99); 19 Jun 2009 00:17:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 00:17:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 00:17:43 +0000
Received: from MSG-BOX.basistech.net ([::1]) by MSG-BOX.basistech.net ([::1])
 with mapi; Thu, 18 Jun 2009 20:17:22 -0400
From: Teruhiko Kurosaka <Kuro@basistech.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 18 Jun 2009 20:17:20 -0400
Subject: RE: Lucene performance: is search time linear to the index size?
Thread-Topic: Lucene performance: is search time linear to the index size?
Thread-Index: Acnv6KYYcZohRmr7T1K52il7J9c7/gAZLLuwAATws2AABGW44A==
Message-ID: <CAE8639A6FAB3D4AA7973D5897B3251824D57423B2@MSG-BOX.basistech.net>
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net>
 <359a92830906170909w2d18d0c4g780e0064841a8249@mail.gmail.com>
 <CAE8639A6FAB3D4AA7973D5897B3251824D1039145@MSG-BOX.basistech.net>
 <CAE8639A6FAB3D4AA7973D5897B3251824D1039187@MSG-BOX.basistech.net>
 <359a92830906180044s7dd5ae1aie65630045b5c8fea@mail.gmail.com>
 <CAE8639A6FAB3D4AA7973D5897B3251824D5742391@MSG-BOX.basistech.net>
 <C11CD502DF4DC0419A4174FBBE908A2103FC5998@wgexch05.wgenhq.net>
In-Reply-To: <C11CD502DF4DC0419A4174FBBE908A2103FC5998@wgexch05.wgenhq.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> From: Jay Booth [mailto:jbooth@wgen.net] =20
> Are you fetching all of the results for your search?=20

No, I'm not doing anything on the search results.
This is essentially what I do:

	searcher =3D new IndexSearcher(IndexReader.open(indexFileDir));
      query =3D new TermQuery(new Term(fieldName, queryTerm));
	for (int i=3D0; i<1000; ++i){
        TopDocs td =3D searcher.search(query, null, 50, Sort.RELEVANCE);
	  // td is not used and the results are thrown away.
	}
-kuro  =

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 02:15:33 2009
Return-Path: <java-user-return-40804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98898 invoked from network); 19 Jun 2009 02:15:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 02:15:33 -0000
Received: (qmail 28882 invoked by uid 500); 19 Jun 2009 02:15:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28799 invoked by uid 500); 19 Jun 2009 02:15:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28784 invoked by uid 99); 19 Jun 2009 02:15:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 02:15:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gupta.neha@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 02:15:33 +0000
Received: by yw-out-2324.google.com with SMTP id 2so583301ywt.5
        for <java-user@lucene.apache.org>; Thu, 18 Jun 2009 19:15:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=SdAPZxRWVWlvQplsrGI37pdvP7Y94jR+7L1AlcGftvk=;
        b=D2WgVJhZV78nZHIHs4RjSLLaPGrjUKUZLpT8Ztdkg0JBoibbNRWoXm/qbT3LRZclFW
         0OOjIX5NtJah5OOidTPspUg1DemvaTQuBud7znMXmL1FrVrpmWj0wBSZucdn4Ofv7vJC
         gbSzgDBloKLOkEBFUY3gqXaztwchDpm8YEa8g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=lkEG8YKtnv1G3U7IbDiPpdzUXhiVjUSMnHoG8GVtKvGM/IKofMMRq0jFlIiFmRn64q
         weRUHy1xY5A2YcpaB5VbiHPtU3kB/h4bYSDfAP8LP3VW1qnO7lg3WQjlWaNSqktudGJD
         8hXhkmmCWjc71E3OdfjV7FkWFClxYWnlKTW5I=
MIME-Version: 1.0
Received: by 10.150.49.16 with SMTP id w16mr4698715ybw.328.1245377712130; Thu, 
	18 Jun 2009 19:15:12 -0700 (PDT)
Date: Thu, 18 Jun 2009 22:15:12 -0400
Message-ID: <c68167800906181915r3108f8c1y5034fb4b290ed6ac@mail.gmail.com>
Subject: n-gram word support
From: Neha Gupta <gupta.neha@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6aa58248a33046caa18bf
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6aa58248a33046caa18bf
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hey,

I was wondering if there is a way to read the index and generate n-grams of
words for a document in lucene? I am quite new to it and am using pylucene.

Thanks,
Neha

--000e0cd6aa58248a33046caa18bf--

From java-user-return-40805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 03:06:47 2009
Return-Path: <java-user-return-40805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19131 invoked from network); 19 Jun 2009 03:06:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 03:06:42 -0000
Received: (qmail 58114 invoked by uid 500); 19 Jun 2009 03:06:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57457 invoked by uid 500); 19 Jun 2009 03:06:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57204 invoked by uid 99); 19 Jun 2009 03:02:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 03:02:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of maggon@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 03:02:08 +0000
Received: by gxk11 with SMTP id 11so2206670gxk.5
        for <java-user@lucene.apache.org>; Thu, 18 Jun 2009 20:01:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=x3sHAAa+qccvjzcLLzaghHWEdGVZe+k6CPpSvcrcV8E=;
        b=YIf4nYaJUYr6tj2XBK7YjLSLy++V2Im+Edf7QauMX1ld76jBUJdcrfCBMoc4Ev47Qc
         Sb84oSYcsnf39uQFqDmhV9uSLDzK0DLhbZm7V4EcoQQEGu+otwhSSO1BUpRWQxli3iHC
         gkhK1/tq7DxMUJ/JPYOUHAPFB53Do7VjIrSic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Tt1gXXwfUd4+ux5cI9rmFqsTiXrgXRbQ3uc280Ufk53kyXO7oGkIJWYokXyXIdR7hH
         9fR/XzfdznIyKkOpQiq2TT5flKRewGW9SVsnWyC4Y3FdNRvZSV0N4Xc+wGTrMX4kleAr
         CmeC3k3pcziyXHoskhU3vKCwn0MgAoanAfpyc=
MIME-Version: 1.0
Received: by 10.150.228.2 with SMTP id a2mr4778830ybh.92.1245380505815; Thu, 
	18 Jun 2009 20:01:45 -0700 (PDT)
In-Reply-To: <c68167800906181915r3108f8c1y5034fb4b290ed6ac@mail.gmail.com>
References: <c68167800906181915r3108f8c1y5034fb4b290ed6ac@mail.gmail.com>
Date: Thu, 18 Jun 2009 20:01:45 -0700
Message-ID: <f7b4a8840906182001n379ea4c3m6eb72e2054a71245@mail.gmail.com>
Subject: Re: n-gram word support
From: Sameer Maggon <maggon@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd47c7ea8caaf046caabedf
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd47c7ea8caaf046caabedf
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Yeah, look at the spellcheck component in Solr. They are doing something
similar.

Sameer.

On Thu, Jun 18, 2009 at 7:15 PM, Neha Gupta <gupta.neha@gmail.com> wrote:

> Hey,
>
> I was wondering if there is a way to read the index and generate n-grams of
> words for a document in lucene? I am quite new to it and am using pylucene.
>
> Thanks,
> Neha
>



-- 
http://www.productification.com
(310) 266-6587 (cell)

--000e0cd47c7ea8caaf046caabedf--

From java-user-return-40806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 04:11:04 2009
Return-Path: <java-user-return-40806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32294 invoked from network); 19 Jun 2009 04:11:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 04:11:03 -0000
Received: (qmail 15971 invoked by uid 500); 19 Jun 2009 04:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15896 invoked by uid 500); 19 Jun 2009 04:11:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15886 invoked by uid 99); 19 Jun 2009 04:11:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 04:11:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 04:11:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MHVR4-0001L8-VN
	for java-user@lucene.apache.org; Thu, 18 Jun 2009 21:10:42 -0700
Message-ID: <24105223.post@talk.nabble.com>
Date: Thu, 18 Jun 2009 21:10:42 -0700 (PDT)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: Synchronizing Lucene indexes across 2 application servers
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I've a web application which uses Lucene for search functionality. Lucene
search requests are served by web services sitting on 2 application servers
(IIS 7).The 2 application servers are Load balanced using "netscaler". 

Both these servers have a batch job running which updates search indexes on
the respective servers in the night on a daily basis. 

I need to synchronize search indexes on these 2 servers so that at any point
of time both the servers have uptodate indexes. I was thinking what could be
the best architecture/design strategy to do so given the fact that any of
the 2 application servers could be serving search request depending upon its
availability. 

Any inputs please? 

Thanks for reading!

-- 
View this message in context: http://www.nabble.com/Synchronizing-Lucene-indexes-across-2-application-servers-tp24105223p24105223.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 04:32:31 2009
Return-Path: <java-user-return-40807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37683 invoked from network); 19 Jun 2009 04:32:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 04:32:31 -0000
Received: (qmail 33547 invoked by uid 500); 19 Jun 2009 04:32:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33464 invoked by uid 500); 19 Jun 2009 04:32:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33454 invoked by uid 99); 19 Jun 2009 04:32:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 04:32:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 04:32:30 +0000
Received: by yw-out-2324.google.com with SMTP id 2so604848ywt.5
        for <java-user@lucene.apache.org>; Thu, 18 Jun 2009 21:32:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=gFvaEdcAPomcMUExZZB7Ak6jTaA9zO8Aw1b3HQLaCzE=;
        b=iC9tP721MutGpGTGHnlDmYUQtPw+0M22LL6m0cqdMSIH5gYHljoYnGQavevDk8llwV
         9vO2b/3YdJVI/J233cX+RGniexWPiR/uU5TH7O95wfU/MmGL8HSk56ZFPFqOZTNut5aG
         KYKcEelyK8AZStgilrHnVXbc/1wuv0V6bwkyQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CPnut2Q0NABvuv1hvaMzkLu/whiLfCENpNPLHOqY73dFbVEhtFtamdRUpGnWW1qWXc
         QU/hkVi+EzRBvIXXW3Gi22U4K28ab7TGLYDwKxHu3pmfC2cmr4sd21AkSQtOTeDXhdV3
         ua4NtwtYdCga+ho5QrVFUWSB4xkcyYcYef+9A=
MIME-Version: 1.0
Received: by 10.100.107.17 with SMTP id f17mr3276152anc.82.1245385929873; Thu, 
	18 Jun 2009 21:32:09 -0700 (PDT)
In-Reply-To: <fddb43f90906181520t627d3fe1gf900497ce3c15c47@mail.gmail.com>
References: <fddb43f90906181520t627d3fe1gf900497ce3c15c47@mail.gmail.com>
Date: Fri, 19 Jun 2009 10:02:09 +0530
Message-ID: <867513fe0906182132h15ae2decpa8c40f39210866f6@mail.gmail.com>
Subject: Re: update a specific document
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e644d504f558b6046cac0155
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e644d504f558b6046cac0155
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

HI Galaio,
To update a document in lucene this way, you'd have to first delete the
document
using indexReader's delete document and then readd the document (thereby
changing the internal docId as well).
You may use:
http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexReader=
.html#deleteDocument(int)


--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Jun 19, 2009 at 3:50 AM, Jo=E3o Silva <galaio.silva@gmail.com> wrot=
e:

> Hi,
> I want to update a specific document,
> but i didn't found updateDocument(Query)
> or updateDocument(Term[]), so to make
> a update, i will need to have a term with an
> unique id, so a retrieve a u)nique document,
> There's any way of access the internal document
> id?
> For example, imagine that i have the id of document
> to update, and i want to update(Term,Document) but passing
> the internal id as Term.
>
> cheers,
> Jo=E3o
>
>
> --
> Cumprimentos,
> Jo=E3o Carlos Galaio da Silva
>

--0016e644d504f558b6046cac0155--

From java-user-return-40808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 06:58:45 2009
Return-Path: <java-user-return-40808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29572 invoked from network); 19 Jun 2009 06:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 06:58:45 -0000
Received: (qmail 58418 invoked by uid 500); 19 Jun 2009 06:58:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58338 invoked by uid 500); 19 Jun 2009 06:58:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58328 invoked by uid 99); 19 Jun 2009 06:58:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 06:58:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 06:58:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MHY3L-0007N0-AY
	for java-user@lucene.apache.org; Thu, 18 Jun 2009 23:58:23 -0700
Message-ID: <24106458.post@talk.nabble.com>
Date: Thu, 18 Jun 2009 23:58:23 -0700 (PDT)
From: saurabhs_iitk <saurabhsharma1981@gmail.com>
To: java-user@lucene.apache.org
Subject: Multi Field AND Search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: saurabhsharma1981@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi
I have indexed 8 fileds with different boost. Now i have given a
searchstring which consists of a words and phrases. Now i want to do AND
search of that searchString on four fields and show the result based on
boost. For me searchString should occur completely in one of the field and
then the boosts come into picture. I know i can index combination of four
fields in one and then search in that but then the boost will not work.

Regards
Saurabh
-- 
View this message in context: http://www.nabble.com/Multi-Field-AND-Search-tp24106458p24106458.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 07:16:03 2009
Return-Path: <java-user-return-40809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34045 invoked from network); 19 Jun 2009 07:16:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 07:16:02 -0000
Received: (qmail 73077 invoked by uid 500); 19 Jun 2009 07:16:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72999 invoked by uid 500); 19 Jun 2009 07:16:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72989 invoked by uid 99); 19 Jun 2009 07:16:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 07:16:11 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.27.42.2] (HELO smtp2-g21.free.fr) (212.27.42.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 07:16:01 +0000
Received: from smtp2-g21.free.fr (localhost [127.0.0.1])
	by smtp2-g21.free.fr (Postfix) with ESMTP id 51FC74B01B5
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 09:15:37 +0200 (CEST)
Received: from [192.168.123.11] (che33-2-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by smtp2-g21.free.fr (Postfix) with ESMTP id 690A14B0105
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 09:15:35 +0200 (CEST)
Message-ID: <4A3B3B04.1010700@ajlsm.com>
Date: Fri, 19 Jun 2009 09:15:16 +0200
From: Malo Pichot <malo.pichot@ajlsm.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: windows locking file problem
X-Enigmail-Version: 0.95.7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I know a similar subject has been discussed in this list and this is not
a "windows file system" list ;-) But may be someone have encountered the
"thing"... and perhaps solved it !

I have a web application that index many documents so I have a quite
large Lucene (2.2) index (~ 350 Mo) managed by a FSDirectory. The
indexation (I mean writing in indeces) is done by batches. Each batch
works first in a RAMDirectory, wich is merged with the main index in a
third one (a temporary FSDirectory). When the merge is done, the
application have to replace the main index (untouched until this time).
Here comes the problem ! To replace, the application close the searcher,
then the FSDirectory itself. After that, the application delete all
files of the main index and then copy all files of the temporary index
in place, before re-open the FSDirectory, generate searcher, etc.

All that is good in Linux environment, and in Windows most of the time.
Yeap ! sometimes, windows FS refuses the deletion of the main index
files. Th only way I found to force windows FS unlocking those files is
to stop the servlets server (Tomcat). I can't shutdown Tomcat during the
indexation work.

I don't know how to solved that :-(

Does anyone get inspiration ?

Malo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 07:57:26 2009
Return-Path: <java-user-return-40810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43104 invoked from network); 19 Jun 2009 07:57:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 07:57:26 -0000
Received: (qmail 37679 invoked by uid 500); 19 Jun 2009 07:57:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37629 invoked by uid 500); 19 Jun 2009 07:57:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37619 invoked by uid 99); 19 Jun 2009 07:57:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 07:57:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of d.de.wit@o3spaces.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 07:57:25 +0000
Received: by ewy27 with SMTP id 27so1994653ewy.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 00:57:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.54.207 with SMTP id i57mr922064wec.114.1245398225171; Fri, 
	19 Jun 2009 00:57:05 -0700 (PDT)
In-Reply-To: <867513fe0906182132h15ae2decpa8c40f39210866f6@mail.gmail.com>
References: <fddb43f90906181520t627d3fe1gf900497ce3c15c47@mail.gmail.com> 
	<867513fe0906182132h15ae2decpa8c40f39210866f6@mail.gmail.com>
From: Daan de Wit <d.de.wit@o3spaces.com>
Date: Fri, 19 Jun 2009 09:56:45 +0200
Message-ID: <bb2875c50906190056m77a78bf7i5a28e0933b255231@mail.gmail.com>
Subject: Re: update a specific document
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

There's also IndexWriter#updateDocument(Term, Document) now, to use
that one you need to be able to uniquely identify a document using a
term (probably with an application-specific id field or something).
This method does also delete and readd the document, but it is a
somewhat cleaner api.

Daan

2009/6/19 Anshum <anshumg@gmail.com>:
> HI Galaio,
> To update a document in lucene this way, you'd have to first delete the
> document
> using indexReader's delete document and then readd the document (thereby
> changing the internal docId as well).
> You may use:
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRead=
er.html#deleteDocument(int)
>
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Fri, Jun 19, 2009 at 3:50 AM, Jo=E3o Silva <galaio.silva@gmail.com> wr=
ote:
>
>> Hi,
>> I want to update a specific document,
>> but i didn't found updateDocument(Query)
>> or updateDocument(Term[]), so to make
>> a update, i will need to have a term with an
>> unique id, so a retrieve a u)nique document,
>> There's any way of access the internal document
>> id?
>> For example, imagine that i have the id of document
>> to update, and i want to update(Term,Document) but passing
>> the internal id as Term.
>>
>> cheers,
>> Jo=E3o
>>
>>
>> --
>> Cumprimentos,
>> Jo=E3o Carlos Galaio da Silva
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 08:09:33 2009
Return-Path: <java-user-return-40811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46410 invoked from network); 19 Jun 2009 08:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 08:09:33 -0000
Received: (qmail 55869 invoked by uid 500); 19 Jun 2009 08:09:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55803 invoked by uid 500); 19 Jun 2009 08:09:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55793 invoked by uid 99); 19 Jun 2009 08:09:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:09:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:09:33 +0000
Received: by an-out-0708.google.com with SMTP id b6so692188ana.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 01:09:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=P1LNtTBro5ZX+u1b6aVDOuXUctKQP1oWD5ssouosZTc=;
        b=U3KRaNTSiFM3vtufTgqILvVOg1e7B+TpFsh0i24ZEu/93Nsi5iKIuhe7nMKGH++OJM
         1qsSGkiheXQDBSOCQmcE10cO0a3Kni47t5/EEeBa+bkSCj+vkWy/QW9GyKa/3T2Yuahv
         qAJ8ntTqWPdUEPOfaa5glPczqLFrl1TtvJ5Ms=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=HpF7OBt7BgrzvuZQuA4fuOl26Th5dueDqoklbW7hbM1DMpzmN3ibdMJvq+6g5Uzxa+
         e/QjpTM5EbfY2d/j1UisTj+uGHzscUqSMqGFE5qwV/urjBSwZ3bWz+52fit0hkbjIRT/
         yPdD/5bty/w3ECvw9NV7gSp3EZZBaSKSX1w0E=
MIME-Version: 1.0
Received: by 10.100.107.17 with SMTP id f17mr3474742anc.82.1245398952731; Fri, 
	19 Jun 2009 01:09:12 -0700 (PDT)
In-Reply-To: <bb2875c50906190056m77a78bf7i5a28e0933b255231@mail.gmail.com>
References: <fddb43f90906181520t627d3fe1gf900497ce3c15c47@mail.gmail.com>
	 <867513fe0906182132h15ae2decpa8c40f39210866f6@mail.gmail.com>
	 <bb2875c50906190056m77a78bf7i5a28e0933b255231@mail.gmail.com>
Date: Fri, 19 Jun 2009 13:39:12 +0530
Message-ID: <867513fe0906190109w657b9b3as4b0972d62e652ac3@mail.gmail.com>
Subject: Re: update a specific document
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e644d5042e6523046caf0a1b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e644d5042e6523046caf0a1b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Exactly, its cleaner but you wouldn't be able to delete on the basis of
Lucene Document ID.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Jun 19, 2009 at 1:26 PM, Daan de Wit <d.de.wit@o3spaces.com> wrote:

> There's also IndexWriter#updateDocument(Term, Document) now, to use
> that one you need to be able to uniquely identify a document using a
> term (probably with an application-specific id field or something).
> This method does also delete and readd the document, but it is a
> somewhat cleaner api.
>
> Daan
>
> 2009/6/19 Anshum <anshumg@gmail.com>:
> > HI Galaio,
> > To update a document in lucene this way, you'd have to first delete the
> > document
> > using indexReader's delete document and then readd the document (thereb=
y
> > changing the internal docId as well).
> > You may use:
> >
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRead=
er.html#deleteDocument(int)<http://lucene.apache.org/java/2_4_1/api/org/apa=
che/lucene/index/IndexReader.html#deleteDocument%28int%29>
> >
> >
> > --
> > Anshum Gupta
> > Naukri Labs!
> > http://ai-cafe.blogspot.com
> >
> > The facts expressed here belong to everybody, the opinions to me. The
> > distinction is yours to draw............
> >
> >
> > On Fri, Jun 19, 2009 at 3:50 AM, Jo=E3o Silva <galaio.silva@gmail.com>
> wrote:
> >
> >> Hi,
> >> I want to update a specific document,
> >> but i didn't found updateDocument(Query)
> >> or updateDocument(Term[]), so to make
> >> a update, i will need to have a term with an
> >> unique id, so a retrieve a u)nique document,
> >> There's any way of access the internal document
> >> id?
> >> For example, imagine that i have the id of document
> >> to update, and i want to update(Term,Document) but passing
> >> the internal id as Term.
> >>
> >> cheers,
> >> Jo=E3o
> >>
> >>
> >> --
> >> Cumprimentos,
> >> Jo=E3o Carlos Galaio da Silva
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e644d5042e6523046caf0a1b--

From java-user-return-40812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 08:18:45 2009
Return-Path: <java-user-return-40812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47863 invoked from network); 19 Jun 2009 08:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 08:18:45 -0000
Received: (qmail 62822 invoked by uid 500); 19 Jun 2009 08:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62744 invoked by uid 500); 19 Jun 2009 08:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62734 invoked by uid 99); 19 Jun 2009 08:18:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:18:54 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.132.130.152] (HELO mail.o2.co.uk) (82.132.130.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:18:43 +0000
Received: from bohr.lan (78.86.54.189) by mail.o2.co.uk (8.0.013.3) (authenticated as joelhalbert)
        id 4A084AE80CE0EAD1 for java-user@lucene.apache.org; Fri, 19 Jun 2009 09:18:15 +0100
From: Joel Halbert <joel@su3analytics.com>
Organization: SU3 Analytics Ltd
To: java-user@lucene.apache.org
Subject: Re: Lucene performance: is search time linear to the index size?
Date: Fri, 19 Jun 2009 09:18:15 +0100
User-Agent: KMail/1.9.10
References: <CAE8639A6FAB3D4AA7973D5897B3251824D10ADB37@MSG-BOX.basistech.net> <CAE8639A6FAB3D4AA7973D5897B3251824D5742391@MSG-BOX.basistech.net> <c68e39170906181527s94e15f8g8a2f8e2c5795026d@mail.gmail.com>
In-Reply-To: <c68e39170906181527s94e15f8g8a2f8e2c5795026d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200906190918.15447.joel@su3analytics.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kuro,

How did you generate your second , larger, test data set?
Did you simply copy the original data set multiple times? Or did you use ne=
w=20
pseudo-random data (words). If the first then you would expect a linear=20
increase in search time as the number of indexed terms has not changed, jus=
t=20
the number of matching documents. If you used additional words (with pseudo=
=20
random data) then the number of terms should increase (up to a point) givin=
g=20
you non linear search time increases (until you max out on the number of=20
unique dictionary words).

Rgs
Joel

On Thursday 18 June 2009 23:27:29 Yonik Seeley wrote:
> On Thu, Jun 18, 2009 at 3:54 PM, Teruhiko Kurosaka<Kuro@basistech.com>=20
wrote:
> > Because the number of hits was proportinoal to the number
> > of Documents in the index in my previous test, I came
> > to a wrong conclusion that the search time is proportional
> > to the index size. =A0If I have only one Document that can
> > matches with a query, the search time remains constant no
> > matter how large the index is.
>
> Right. An inverted index contains a list of documents that match each
> term, so ignoring other overhead and effects, search time is
> proportional to the number of documents matching the various clauses
> of the query.
>
> -Yonik
> http://www.lucidimagination.com
>
> > -kuro
> >
> >> -----Original Message-----
> >> From: Erick Erickson [mailto:erickerickson@gmail.com]
> >> Sent: Thursday, June 18, 2009 12:44 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Lucene performance: is search time linear to the
> >> index size?
> >>
> >> Opening a searcher and doing the first query incurs a
> >> significant amount of overhead, cache loading, etc. Inferring
> >> search times relative to index size with a program like you
> >> describe is unreliable.
> >>
> >> Try firing a few queries at the index without measuring,
> >> *then* measure the time it takes for subsequent queries and
> >> you'll get a much better picture of actual response time.
> >>
> >> The fact that a program that fires a single query at a newly
> >> opened reader has near-linear performance isn't as surprising
> >> as all that. I'd be more concerned if, say, queries 10
> >> through 100 *on the same underlying reader* displayed this behavior.
> >>
> >> See:
> >>
> >> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed?highl
> >> ight=3D(warming)
> >>
> >> especially the questions around:
> >> *When measuring performance, disregard the first query
> >>
> >> Best
> >> Erick
> >> *
> >> On Thu, Jun 18, 2009 at 12:49 AM, Teruhiko Kurosaka
> >>
> >> <Kuro@basistech.com>wrote:
> >> > I've written a test program that uses the simplest form of search,
> >> > TermQuery and measure the time it takes to search a term in
> >>
> >> a field on
> >>
> >> > indices of various sizes.
> >> >
> >> > The result is a very linear growth of search time vs the
> >>
> >> index size in
> >>
> >> > terms of # of Documents, not # of unique terms in that field.
> >> >
> >> > -kuro
> >>
> >> ---------------------------------------------------------------------
> >>
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



=2D-=20
Joel Halbert
020 3051 8637
075 2501 0825
joel@su3analytics.com
www.su3analytics.com
www.storequery.com
SU3 Analytics Ltd, The Print House, 18 Ashwin St, London E8 3DL.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 08:24:02 2009
Return-Path: <java-user-return-40813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48860 invoked from network); 19 Jun 2009 08:24:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 08:24:02 -0000
Received: (qmail 67777 invoked by uid 500); 19 Jun 2009 08:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67712 invoked by uid 500); 19 Jun 2009 08:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67700 invoked by uid 99); 19 Jun 2009 08:24:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:24:10 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.132.130.150] (HELO mail.o2.co.uk) (82.132.130.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:24:00 +0000
Received: from bohr.lan (78.86.54.189) by mail.o2.co.uk (8.0.013.3) (authenticated as joelhalbert)
        id 4A140CD00988FD8A for java-user@lucene.apache.org; Fri, 19 Jun 2009 09:23:32 +0100
From: Joel Halbert <joel@su3analytics.com>
Organization: SU3 Analytics Ltd
To: java-user@lucene.apache.org
Subject: Re: Synchronizing Lucene indexes across 2 application servers
Date: Fri, 19 Jun 2009 09:23:32 +0100
User-Agent: KMail/1.9.10
References: <24105223.post@talk.nabble.com>
In-Reply-To: <24105223.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200906190923.32657.joel@su3analytics.com>
X-Virus-Checked: Checked by ClamAV on apache.org

do they have to be kept in synch in real time?
does each server handle writes to its own index which then need to be=20
propagated to the other server's index?

=46rom a simplicity point of view, to minimise the amount of self consisten=
cy=20
checking that needs to happen I would suggest even having a third, master=20
index, to which all writes happen. As writes are applied to the master they=
=20
are then propagated to the 2 servers. You then just need to keep a track of=
=20
the latest document written to each of the two "slave" servers, and in vcas=
e=20
of failure/recovery on either you just request all deltas since the last=20
known record on each.

On Friday 19 June 2009 05:10:42 mitu2009 wrote:
> I've a web application which uses Lucene for search functionality. Lucene
> search requests are served by web services sitting on 2 application serve=
rs
> (IIS 7).The 2 application servers are Load balanced using "netscaler".
>
> Both these servers have a batch job running which updates search indexes =
on
> the respective servers in the night on a daily basis.
>
> I need to synchronize search indexes on these 2 servers so that at any
> point of time both the servers have uptodate indexes. I was thinking what
> could be the best architecture/design strategy to do so given the fact th=
at
> any of the 2 application servers could be serving search request depending
> upon its availability.
>
> Any inputs please?
>
> Thanks for reading!



=2D-=20
Joel Halbert
020 3051 8637
075 2501 0825
joel@su3analytics.com
www.su3analytics.com
www.storequery.com
SU3 Analytics Ltd, The Print House, 18 Ashwin St, London E8 3DL.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 08:28:21 2009
Return-Path: <java-user-return-40814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50135 invoked from network); 19 Jun 2009 08:28:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 08:28:19 -0000
Received: (qmail 74119 invoked by uid 500); 19 Jun 2009 08:28:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74063 invoked by uid 500); 19 Jun 2009 08:28:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74053 invoked by uid 99); 19 Jun 2009 08:28:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:28:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of galaio.silva@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:28:20 +0000
Received: by fxm3 with SMTP id 3so1709008fxm.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 01:27:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=MvpcEx0GzIkWKuW3cL29C/BrRBYw4G54iF3few0QkYc=;
        b=cudOqLkZEvz/8VgtCi7cohoco3+jAi2rLSKgS2CbqpxcRDlsTJp0MUyMwdw1Ms2TcG
         kTuqpyzOtMdKw9KFEPoc9tL0mxlwz/4e8B+u06UnXGL4yZI/OdKGIQDtcPaHgwMe+XB5
         aOHhV0x/hn9c+SAbyh4oaUfT13TvIn2ICF7Ec=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mmWvtHGlATQDYotdhDVRgcuwCbW/N8PmIMCMfhv8pB6GvK3eIQ5Y4E5oNFXTX9MxEc
         eQF1/CPCy/us44OdzVN29fM91hAVhKKRcWAmLSnM0ikamR5xEqXjG7srbgAUNFZZ+ovq
         A5KQ2iYTaw4jr4UkCOGQBr1CVsQKE/9JxW7Ns=
MIME-Version: 1.0
Received: by 10.223.108.78 with SMTP id e14mr1965389fap.88.1245400078562; Fri, 
	19 Jun 2009 01:27:58 -0700 (PDT)
In-Reply-To: <867513fe0906190109w657b9b3as4b0972d62e652ac3@mail.gmail.com>
References: <fddb43f90906181520t627d3fe1gf900497ce3c15c47@mail.gmail.com>
	 <867513fe0906182132h15ae2decpa8c40f39210866f6@mail.gmail.com>
	 <bb2875c50906190056m77a78bf7i5a28e0933b255231@mail.gmail.com>
	 <867513fe0906190109w657b9b3as4b0972d62e652ac3@mail.gmail.com>
Date: Fri, 19 Jun 2009 09:27:58 +0100
Message-ID: <fddb43f90906190127p5dfd6c3r5d673d10bcdbd18@mail.gmail.com>
Subject: Re: update a specific document
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502d6c44936f4046caf4d22
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502d6c44936f4046caf4d22
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,
thank you all for your answers. I already done the strategies you mencioned
by delete first and update or using the internal api updateDocument(term,
document).
If there was  a updateDocument(internalid, theNewDocument) present
in the api, this clarified more the process.

Thanks again, for your fast answers,
i will do with a specific application id in one term.

--
Galaio da Silva


On Fri, Jun 19, 2009 at 9:09 AM, Anshum <anshumg@gmail.com> wrote:

> Exactly, its cleaner but you wouldn't be able to delete on the basis of
> Lucene Document ID.
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Fri, Jun 19, 2009 at 1:26 PM, Daan de Wit <d.de.wit@o3spaces.com>
> wrote:
>
> > There's also IndexWriter#updateDocument(Term, Document) now, to use
> > that one you need to be able to uniquely identify a document using a
> > term (probably with an application-specific id field or something).
> > This method does also delete and readd the document, but it is a
> > somewhat cleaner api.
> >
> > Daan
> >
> > 2009/6/19 Anshum <anshumg@gmail.com>:
> > > HI Galaio,
> > > To update a document in lucene this way, you'd have to first delete t=
he
> > > document
> > > using indexReader's delete document and then readd the document
> (thereby
> > > changing the internal docId as well).
> > > You may use:
> > >
> >
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRead=
er.html#deleteDocument(int)<http://lucene.apache.org/java/2_4_1/api/org/apa=
che/lucene/index/IndexReader.html#deleteDocument%28int%29>
> <
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRead=
er.html#deleteDocument%28int%29
> >
> > >
> > >
> > > --
> > > Anshum Gupta
> > > Naukri Labs!
> > > http://ai-cafe.blogspot.com
> > >
> > > The facts expressed here belong to everybody, the opinions to me. The
> > > distinction is yours to draw............
> > >
> > >
> > > On Fri, Jun 19, 2009 at 3:50 AM, Jo=E3o Silva <galaio.silva@gmail.com=
>
> > wrote:
> > >
> > >> Hi,
> > >> I want to update a specific document,
> > >> but i didn't found updateDocument(Query)
> > >> or updateDocument(Term[]), so to make
> > >> a update, i will need to have a term with an
> > >> unique id, so a retrieve a u)nique document,
> > >> There's any way of access the internal document
> > >> id?
> > >> For example, imagine that i have the id of document
> > >> to update, and i want to update(Term,Document) but passing
> > >> the internal id as Term.
> > >>
> > >> cheers,
> > >> Jo=E3o
> > >>
> > >>
> > >> --
> > >> Cumprimentos,
> > >> Jo=E3o Carlos Galaio da Silva
> > >>
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--00504502d6c44936f4046caf4d22--

From java-user-return-40815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 08:49:20 2009
Return-Path: <java-user-return-40815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56788 invoked from network); 19 Jun 2009 08:49:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 08:49:20 -0000
Received: (qmail 99534 invoked by uid 500); 19 Jun 2009 08:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99502 invoked by uid 500); 19 Jun 2009 08:49:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99492 invoked by uid 99); 19 Jun 2009 08:49:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:49:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 08:49:19 +0000
Received: by fxm3 with SMTP id 3so1719707fxm.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 01:48:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=DM/h8YEXVCdNvAJxnnJt4Uzbw6dqJxuUx4nrMOF/HMw=;
        b=oqhNRnOofrKaBs/lavVyGZBLkR051J63Nb7EASTIu5YXfIhKJ3AH8gZyZi31V3vo/h
         dlJDwvPFwrdfVavts0IAAl7oU5EQNgUA6e0fkzOnjfIIyipjqUwSGZeQAMu7AySRrOQk
         gKbC+0g8KTSFrz2wpopzDn8CAMwQmfGjteVmw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=cT7QQikSmmchhR8jNctStEKfU6gSbcREPrfrIJl/G59VkJJFsotrwoH826NozjCQgR
         a4Qj1a3TqhoDLgA8RCabMISB0qduSRnyYJ5CkBfclPYSgwc058+aIBC9Oeq/o6HZcMjD
         uxg8i1b1cQQ0jlHlYwl17jDp1iFZ9ZUEBPYNc=
MIME-Version: 1.0
Received: by 10.86.51.2 with SMTP id y2mr3010924fgy.3.1245401337152; Fri, 19 
	Jun 2009 01:48:57 -0700 (PDT)
In-Reply-To: <200906190923.32657.joel@su3analytics.com>
References: <24105223.post@talk.nabble.com> <200906190923.32657.joel@su3analytics.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 19 Jun 2009 09:48:36 +0100
Message-ID: <8c4e68610906190148o40df0b51u499492131af32e54@mail.gmail.com>
Subject: Re: Synchronizing Lucene indexes across 2 application servers
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd244d04dda75046caf986c
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd244d04dda75046caf986c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Or have a third master index, as Joel suggests, apply all updates to that
index, only, then at the end of each batch index update run, use rsync or
equivalent to push the master index out to the 2 search servers and then
tell them to reopen their indexes.


--
Ian.


On Fri, Jun 19, 2009 at 9:23 AM, Joel Halbert <joel@su3analytics.com> wrote:

> do they have to be kept in synch in real time?
> does each server handle writes to its own index which then need to be
> propagated to the other server's index?
>
> From a simplicity point of view, to minimise the amount of self consistency
> checking that needs to happen I would suggest even having a third, master
> index, to which all writes happen. As writes are applied to the master they
> are then propagated to the 2 servers. You then just need to keep a track of
> the latest document written to each of the two "slave" servers, and in
> vcase
> of failure/recovery on either you just request all deltas since the last
> known record on each.
>
> On Friday 19 June 2009 05:10:42 mitu2009 wrote:
> > I've a web application which uses Lucene for search functionality. Lucene
> > search requests are served by web services sitting on 2 application
> servers
> > (IIS 7).The 2 application servers are Load balanced using "netscaler".
> >
> > Both these servers have a batch job running which updates search indexes
> on
> > the respective servers in the night on a daily basis.
> >
> > I need to synchronize search indexes on these 2 servers so that at any
> > point of time both the servers have uptodate indexes. I was thinking what
> > could be the best architecture/design strategy to do so given the fact
> that
> > any of the 2 application servers could be serving search request
> depending
> > upon its availability.
> >
> > Any inputs please?
> >
> > Thanks for reading!
>
>
>
> --
> Joel Halbert
> 020 3051 8637
> 075 2501 0825
> joel@su3analytics.com
> www.su3analytics.com
> www.storequery.com
> SU3 Analytics Ltd, The Print House, 18 Ashwin St, London E8 3DL.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd244d04dda75046caf986c--

From java-user-return-40816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 09:06:29 2009
Return-Path: <java-user-return-40816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60713 invoked from network); 19 Jun 2009 09:06:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 09:06:29 -0000
Received: (qmail 25461 invoked by uid 500); 19 Jun 2009 09:06:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25433 invoked by uid 500); 19 Jun 2009 09:06:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25423 invoked by uid 99); 19 Jun 2009 09:06:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 09:06:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of d.de.wit@o3spaces.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 09:06:28 +0000
Received: by ewy27 with SMTP id 27so2039466ewy.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 02:06:08 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.51.202 with SMTP id b52mr953370wec.38.1245402368352; Fri, 
	19 Jun 2009 02:06:08 -0700 (PDT)
In-Reply-To: <867513fe0906190109w657b9b3as4b0972d62e652ac3@mail.gmail.com>
References: <fddb43f90906181520t627d3fe1gf900497ce3c15c47@mail.gmail.com> 
	<867513fe0906182132h15ae2decpa8c40f39210866f6@mail.gmail.com> 
	<bb2875c50906190056m77a78bf7i5a28e0933b255231@mail.gmail.com> 
	<867513fe0906190109w657b9b3as4b0972d62e652ac3@mail.gmail.com>
From: Daan de Wit <d.de.wit@o3spaces.com>
Date: Fri, 19 Jun 2009 11:05:48 +0200
Message-ID: <bb2875c50906190205k2e8ff4d4mb60239c3181a9196@mail.gmail.com>
Subject: Re: update a specific document
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Oops, didn't read the OP quite well...

2009/6/19 Anshum <anshumg@gmail.com>:
> Exactly, its cleaner but you wouldn't be able to delete on the basis of
> Lucene Document ID.
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Fri, Jun 19, 2009 at 1:26 PM, Daan de Wit <d.de.wit@o3spaces.com> wrot=
e:
>
>> There's also IndexWriter#updateDocument(Term, Document) now, to use
>> that one you need to be able to uniquely identify a document using a
>> term (probably with an application-specific id field or something).
>> This method does also delete and readd the document, but it is a
>> somewhat cleaner api.
>>
>> Daan
>>
>> 2009/6/19 Anshum <anshumg@gmail.com>:
>> > HI Galaio,
>> > To update a document in lucene this way, you'd have to first delete th=
e
>> > document
>> > using indexReader's delete document and then readd the document (there=
by
>> > changing the internal docId as well).
>> > You may use:
>> >
>> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRea=
der.html#deleteDocument(int)<http://lucene.apache.org/java/2_4_1/api/org/ap=
ache/lucene/index/IndexReader.html#deleteDocument%28int%29>
>> >
>> >
>> > --
>> > Anshum Gupta
>> > Naukri Labs!
>> > http://ai-cafe.blogspot.com
>> >
>> > The facts expressed here belong to everybody, the opinions to me. The
>> > distinction is yours to draw............
>> >
>> >
>> > On Fri, Jun 19, 2009 at 3:50 AM, Jo=E3o Silva <galaio.silva@gmail.com>
>> wrote:
>> >
>> >> Hi,
>> >> I want to update a specific document,
>> >> but i didn't found updateDocument(Query)
>> >> or updateDocument(Term[]), so to make
>> >> a update, i will need to have a term with an
>> >> unique id, so a retrieve a u)nique document,
>> >> There's any way of access the internal document
>> >> id?
>> >> For example, imagine that i have the id of document
>> >> to update, and i want to update(Term,Document) but passing
>> >> the internal id as Term.
>> >>
>> >> cheers,
>> >> Jo=E3o
>> >>
>> >>
>> >> --
>> >> Cumprimentos,
>> >> Jo=E3o Carlos Galaio da Silva
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 09:21:44 2009
Return-Path: <java-user-return-40817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63435 invoked from network); 19 Jun 2009 09:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 09:21:44 -0000
Received: (qmail 41816 invoked by uid 500); 19 Jun 2009 09:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41746 invoked by uid 500); 19 Jun 2009 09:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41736 invoked by uid 99); 19 Jun 2009 09:21:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 09:21:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.186] (HELO mail-yx0-f186.google.com) (209.85.210.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 09:21:44 +0000
Received: by yxe16 with SMTP id 16so187384yxe.29
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 02:21:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.129.5 with SMTP id g5mr5376571ybn.84.1245403282045; Fri, 
	19 Jun 2009 02:21:22 -0700 (PDT)
In-Reply-To: <4A3B3B04.1010700@ajlsm.com>
References: <4A3B3B04.1010700@ajlsm.com>
Date: Fri, 19 Jun 2009 05:21:22 -0400
Message-ID: <9ac0c6aa0906190221x60c659c8o7e4ee612641d1511@mail.gmail.com>
Subject: Re: windows locking file problem
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It's best to let IndexWriter manage the deletion of files (for exactly
this reason).

It turns out, it's perfectly fine to open an IndexWriter with
"create=true" even when IndexReaders are reading that same index.
Those open IndexReaders continue to search their point-in-time
snapshot, and then when they reopen they'll switch to the "reset"
index.

So, assuming you have enough free disk space, you could leave your
searcher open, create an IndexWriter with create=true, call
addIndexesNoOptimize passing in your RAMDir (or, skip RAMDir and
simply add your docs directly to this writer), then commit or close
the writer and reopen the searcher.

Because Lucene is transactional, and assuming you use autoCommit=false
when opening the writer, you can make all of your index updates and
the searcher, even if reopened, will see none of these changes, until
you've called commit/close from the writer.

Mike

On Fri, Jun 19, 2009 at 3:15 AM, Malo Pichot<malo.pichot@ajlsm.com> wrote:
> Hi,
>
> I know a similar subject has been discussed in this list and this is not
> a "windows file system" list ;-) But may be someone have encountered the
> "thing"... and perhaps solved it !
>
> I have a web application that index many documents so I have a quite
> large Lucene (2.2) index (~ 350 Mo) managed by a FSDirectory. The
> indexation (I mean writing in indeces) is done by batches. Each batch
> works first in a RAMDirectory, wich is merged with the main index in a
> third one (a temporary FSDirectory). When the merge is done, the
> application have to replace the main index (untouched until this time).
> Here comes the problem ! To replace, the application close the searcher,
> then the FSDirectory itself. After that, the application delete all
> files of the main index and then copy all files of the temporary index
> in place, before re-open the FSDirectory, generate searcher, etc.
>
> All that is good in Linux environment, and in Windows most of the time.
> Yeap ! sometimes, windows FS refuses the deletion of the main index
> files. Th only way I found to force windows FS unlocking those files is
> to stop the servlets server (Tomcat). I can't shutdown Tomcat during the
> indexation work.
>
> I don't know how to solved that :-(
>
> Does anyone get inspiration ?
>
> Malo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 10:57:53 2009
Return-Path: <java-user-return-40818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7647 invoked from network); 19 Jun 2009 10:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 10:57:53 -0000
Received: (qmail 57778 invoked by uid 500); 19 Jun 2009 10:58:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57710 invoked by uid 500); 19 Jun 2009 10:58:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57700 invoked by uid 99); 19 Jun 2009 10:58:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 10:58:02 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of galaio.silva@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 10:57:52 +0000
Received: by bwz27 with SMTP id 27so1778124bwz.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 03:57:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=eL8ReAF6RRCnCuxpudDy8PtlJNNJzepzZMGPVtvmNE0=;
        b=q5FlD15+fxOWPHpgDvAjsp58fF/CJry81JWmfhSzGRTRYULdjoRntfDpVKCiKTeX5e
         zy/IjduJZfr4zdTxExHE4ARnnpwpOF22Zaj+pTFMDSS9oc+OP8aRYyXWfYxYWqJdqSYR
         eXgecgDxGmBj+nZMxBz38fYW1VzW69ZISZU/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=cml3DsWKbBubELP8Mq4vc1wqKWhoUHLf4axT0/6JRNzjZeXxLLuTTY4rh/t801+OCS
         xare6KoWL1/uZeKqvknexTuco6SmdrStvdZ6pxgof7owLIczS6vBRIA1nRfGHUHd7g0L
         c5NcXIOlsvY43B58tCZtlH3PDtWjImHAh8tqo=
MIME-Version: 1.0
Received: by 10.223.105.72 with SMTP id s8mr2134309fao.9.1245409052483; Fri, 
	19 Jun 2009 03:57:32 -0700 (PDT)
Date: Fri, 19 Jun 2009 11:57:32 +0100
Message-ID: <fddb43f90906190357l24732dc8h2c94dde9095e4285@mail.gmail.com>
Subject: Collector Pagination
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d27c902c6293046cb164a1
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d27c902c6293046cb164a1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,
is there any api form of Hits pagination?
for example, if i want to retreve the hits between
an interval.

--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--0016e6d27c902c6293046cb164a1--

From java-user-return-40819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 11:37:31 2009
Return-Path: <java-user-return-40819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17711 invoked from network); 19 Jun 2009 11:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 11:37:31 -0000
Received: (qmail 14408 invoked by uid 500); 19 Jun 2009 11:37:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14316 invoked by uid 500); 19 Jun 2009 11:37:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14306 invoked by uid 99); 19 Jun 2009 11:37:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 11:37:40 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 11:37:28 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C0ED345E6C5
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 13:37:07 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id zQweoVg0snvk for <java-user@lucene.apache.org>;
	Fri, 19 Jun 2009 13:36:56 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BBC2845E6BF
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 13:36:56 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <fddb43f90906190357l24732dc8h2c94dde9095e4285@mail.gmail.com>
Subject: RE: Collector Pagination
Date: Fri, 19 Jun 2009 13:36:53 +0200
Message-ID: <9C522819695C4CD2A7781CC0B9365810@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcnwzNcgUVWawYY8Riak57RffrRkAgAAd7zA
In-Reply-To: <fddb43f90906190357l24732dc8h2c94dde9095e4285@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Hallo,

Just retrieve the TopDocs for the first n documents, where n =3D =
offset+count,
where offset is the first hit on the page (0-based) and count the number =
per
page.
To display the results you would then just start at offset in TopDocs =
and
retrieve the stored field from there to offset+count.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Jo=E3o Silva [mailto:galaio.silva@gmail.com]
> Sent: Friday, June 19, 2009 12:58 PM
> To: java-user@lucene.apache.org
> Subject: Collector Pagination
>=20
> Hi,
> is there any api form of Hits pagination?
> for example, if i want to retreve the hits between
> an interval.
>=20
> --
> Cumprimentos,
> Jo=E3o Carlos Galaio da Silva


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 11:57:50 2009
Return-Path: <java-user-return-40820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29190 invoked from network); 19 Jun 2009 11:57:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 11:57:50 -0000
Received: (qmail 62068 invoked by uid 500); 19 Jun 2009 11:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62015 invoked by uid 500); 19 Jun 2009 11:57:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62005 invoked by uid 99); 19 Jun 2009 11:57:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 11:57:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of galaio.silva@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 11:57:47 +0000
Received: by bwz27 with SMTP id 27so1810880bwz.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 04:57:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=IxJjI+SP54C9CPU1E93v0MFRpTHuwJY8/ALop248Rpg=;
        b=eeVGYuI5y1eocXyB5TwqNhKTUl72s6NN4Q/a8/NHlgK7ihb+m5EDRSJpXFzDCpd5wv
         yC7ayHcLOJNXNIXgkSvGPZEgu2rhaa12u+1hZTJrWXPid66615MxiCPFkMjGjI9t0cOU
         CvUbvv8f3RpWfIzGbXa7wKKMqhmFM5Jjws1CQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=N8VD32VV+YNeLkITPoyElV9O2dZCpCkEzGSAYsy4F3YKipZxfY/mV5g/OSVhNwSFXh
         oNbhgpuWHwi+deyEhttkWXT2aRg8EkIivBWDm2QvQJSMVPb0cn0CUUpWyktw2i9UOi+I
         XNDNjXvdeOoXxhQrk4f/XisgWdRfpJO444Vco=
MIME-Version: 1.0
Received: by 10.223.113.136 with SMTP id a8mr2164227faq.101.1245412647419; 
	Fri, 19 Jun 2009 04:57:27 -0700 (PDT)
In-Reply-To: <9C522819695C4CD2A7781CC0B9365810@VEGA>
References: <fddb43f90906190357l24732dc8h2c94dde9095e4285@mail.gmail.com>
	 <9C522819695C4CD2A7781CC0B9365810@VEGA>
Date: Fri, 19 Jun 2009 12:57:27 +0100
Message-ID: <fddb43f90906190457n20e502e4y65af4f25dbf71752@mail.gmail.com>
Subject: Re: Collector Pagination
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5ac7a72c07c046cb23a16
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5ac7a72c07c046cb23a16
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks Uwe, I will see that.

Galaio



On Fri, Jun 19, 2009 at 12:36 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hallo,
>
> Just retrieve the TopDocs for the first n documents, where n =3D
> offset+count,
> where offset is the first hit on the page (0-based) and count the number
> per
> page.
> To display the results you would then just start at offset in TopDocs and
> retrieve the stored field from there to offset+count.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Jo=E3o Silva [mailto:galaio.silva@gmail.com]
> > Sent: Friday, June 19, 2009 12:58 PM
> > To: java-user@lucene.apache.org
> > Subject: Collector Pagination
> >
> > Hi,
> > is there any api form of Hits pagination?
> > for example, if i want to retreve the hits between
> > an interval.
> >
> > --
> > Cumprimentos,
> > Jo=E3o Carlos Galaio da Silva
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--001636c5ac7a72c07c046cb23a16--

From java-user-return-40821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 12:10:18 2009
Return-Path: <java-user-return-40821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35839 invoked from network); 19 Jun 2009 12:10:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 12:10:18 -0000
Received: (qmail 84912 invoked by uid 500); 19 Jun 2009 12:10:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84849 invoked by uid 500); 19 Jun 2009 12:10:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84829 invoked by uid 99); 19 Jun 2009 12:10:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 12:10:26 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 12:10:16 +0000
Received: from [192.168.0.105] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 0172A87088
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 05:09:54 -0700 (PDT)
Message-Id: <D1EE7F44-A4D5-4CFE-822E-C4A0A3D752C0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <c68167800906181915r3108f8c1y5034fb4b290ed6ac@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: n-gram word support
Date: Fri, 19 Jun 2009 08:09:54 -0400
References: <c68167800906181915r3108f8c1y5034fb4b290ed6ac@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

The contrib/analyzers has several n-gram based tokenization and token  
filter options.

On Jun 18, 2009, at 10:15 PM, Neha Gupta wrote:

> Hey,
>
> I was wondering if there is a way to read the index and generate n- 
> grams of
> words for a document in lucene? I am quite new to it and am using  
> pylucene.
>
> Thanks,
> Neha

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 12:17:40 2009
Return-Path: <java-user-return-40822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39050 invoked from network); 19 Jun 2009 12:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 12:17:40 -0000
Received: (qmail 97976 invoked by uid 500); 19 Jun 2009 12:17:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97920 invoked by uid 500); 19 Jun 2009 12:17:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97910 invoked by uid 99); 19 Jun 2009 12:17:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 12:17:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of galaio.silva@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 12:17:37 +0000
Received: by bwz27 with SMTP id 27so1822767bwz.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 05:17:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zVHwZNcciAbtHzbOew9mdFiDJSjNVGKscTLZUmXx5bI=;
        b=jlup8o8AU2wnX09yODDWPDvN3HFcGShgre9uX+TwjJWIKlyhwTQz9PvhgZ3ZZT5qb7
         j0BuSev1JQ6sfoSY/xZmD1uzabnc2Sfl70cYx38LIFwAYFyAE8i5EGo9hArqyRMtyvHX
         AAyyop7IrVKNmTrG4z+68WnzWbU/RvkpHrV2g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ljgzizeUuP0xV73HXB0AW7uPAor/oT1LiOTOC75CtmbJ5Pq4dIBIGBjCl7ef+QFWuT
         W9JPcgH3NUBCvGvSaAreRON3OPSGqfDjkxIeh1Vq/9ppc+8vapy8oa8GwVePV9CVhsUQ
         HOSbPk03qCNHL0HXQJ54LCkZi+2PnmuBvX15M=
MIME-Version: 1.0
Received: by 10.223.106.14 with SMTP id v14mr2229399fao.49.1245413836624; Fri, 
	19 Jun 2009 05:17:16 -0700 (PDT)
In-Reply-To: <fddb43f90906190457n20e502e4y65af4f25dbf71752@mail.gmail.com>
References: <fddb43f90906190357l24732dc8h2c94dde9095e4285@mail.gmail.com>
	 <9C522819695C4CD2A7781CC0B9365810@VEGA>
	 <fddb43f90906190457n20e502e4y65af4f25dbf71752@mail.gmail.com>
Date: Fri, 19 Jun 2009 13:17:16 +0100
Message-ID: <fddb43f90906190517k73b0fa1bvf4b288866733d230@mail.gmail.com>
Subject: Re: Collector Pagination
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502ba455492a5046cb2819e
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502ba455492a5046cb2819e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

well,

i have somthing like that:

 int hitsPerPage =3D 10;
            IndexSearcher searcher =3D new IndexSearcher(this.indexPath);
            TopDocCollector collector =3D new TopDocCollector(hitsPerPage);
            Query query =3D new QueryParser("",
this.analizer).parse(DocumentRepositoryEntry.Fields.ID.toString() + ":"
                    + id);
            searcher.search(query, collector);

            ScoreDoc[] hits =3D collector.topDocs().scoreDocs;

i know that the colector have all docs in the query, how do i navigate
between the next pages?


thanks,
Galaio



On Fri, Jun 19, 2009 at 12:57 PM, Jo=E3o Silva <galaio.silva@gmail.com> wro=
te:

> Thanks Uwe, I will see that.
>
> Galaio
>
>
>
>
> On Fri, Jun 19, 2009 at 12:36 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>> Hallo,
>>
>> Just retrieve the TopDocs for the first n documents, where n =3D
>> offset+count,
>> where offset is the first hit on the page (0-based) and count the number
>> per
>> page.
>> To display the results you would then just start at offset in TopDocs an=
d
>> retrieve the stored field from there to offset+count.
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>> > -----Original Message-----
>> > From: Jo=E3o Silva [mailto:galaio.silva@gmail.com]
>> > Sent: Friday, June 19, 2009 12:58 PM
>> > To: java-user@lucene.apache.org
>> > Subject: Collector Pagination
>> >
>> > Hi,
>> > is there any api form of Hits pagination?
>> > for example, if i want to retreve the hits between
>> > an interval.
>> >
>> > --
>> > Cumprimentos,
>> > Jo=E3o Carlos Galaio da Silva
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Cumprimentos,
> Jo=E3o Carlos Galaio da Silva
>



--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--00504502ba455492a5046cb2819e--

From java-user-return-40823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 12:33:44 2009
Return-Path: <java-user-return-40823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52226 invoked from network); 19 Jun 2009 12:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 12:33:44 -0000
Received: (qmail 15926 invoked by uid 500); 19 Jun 2009 12:33:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15877 invoked by uid 500); 19 Jun 2009 12:33:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15867 invoked by uid 99); 19 Jun 2009 12:33:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 12:33:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 12:33:41 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0214F45E6AD
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 14:33:19 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id O+eRfztvri9t for <java-user@lucene.apache.org>;
	Fri, 19 Jun 2009 14:33:08 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id CD80E45E5F0
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 14:33:08 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <fddb43f90906190357l24732dc8h2c94dde9095e4285@mail.gmail.com> <9C522819695C4CD2A7781CC0B9365810@VEGA> <fddb43f90906190457n20e502e4y65af4f25dbf71752@mail.gmail.com> <fddb43f90906190517k73b0fa1bvf4b288866733d230@mail.gmail.com>
Subject: RE: Collector Pagination
Date: Fri, 19 Jun 2009 14:33:06 +0200
Message-ID: <526786C231244E86850B3E93FA1BCB20@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <fddb43f90906190517k73b0fa1bvf4b288866733d230@mail.gmail.com>
Thread-Index: Acnw1/7JJ0WPu44SREmWU/uW9fBJIQAAVQQw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

To get the second page,=20
Take:
int hitsPerPage =3D 10;
int pageOffset =3D 10;
TopDocCollector collector =3D new TopDocCollector(hitsPerPage + =
pageOffset);

For page third page take int pageOffset =3D 20; and so on

After that your results are in hits[], for the first page in [0] to [9], =
the
second page in [10] to [19] and so on:

To display use something like:
For (int i=3DpageOffset; Math.min(hitsPerPage + pageOffset,
collector.topDocs().totalhits); i++)

In general, you cannot retrieve a range directly, you can only retrieve =
the
top docs. As most people will not go beyond say page 10 when searching, =
you
have no memory problem, as scoreDocs will contain at most 100 doc ids.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Jo=E3o Silva [mailto:galaio.silva@gmail.com]
> Sent: Friday, June 19, 2009 2:17 PM
> To: java-user@lucene.apache.org
> Subject: Re: Collector Pagination
>=20
> well,
>=20
> i have somthing like that:
>=20
>  int hitsPerPage =3D 10;
>             IndexSearcher searcher =3D new =
IndexSearcher(this.indexPath);
>             TopDocCollector collector =3D new =
TopDocCollector(hitsPerPage);
>             Query query =3D new QueryParser("",
> this.analizer).parse(DocumentRepositoryEntry.Fields.ID.toString() + =
":"
>                     + id);
>             searcher.search(query, collector);
>=20
>             ScoreDoc[] hits =3D collector.topDocs().scoreDocs;
>=20
> i know that the colector have all docs in the query, how do i navigate
> between the next pages?
>=20
>=20
> thanks,
> Galaio
>=20
>=20
>=20
> On Fri, Jun 19, 2009 at 12:57 PM, Jo=E3o Silva =
<galaio.silva@gmail.com>
> wrote:
>=20
> > Thanks Uwe, I will see that.
> >
> > Galaio
> >
> >
> >
> >
> > On Fri, Jun 19, 2009 at 12:36 PM, Uwe Schindler <uwe@thetaphi.de> =
wrote:
> >
> >> Hallo,
> >>
> >> Just retrieve the TopDocs for the first n documents, where n =3D
> >> offset+count,
> >> where offset is the first hit on the page (0-based) and count the
> number
> >> per
> >> page.
> >> To display the results you would then just start at offset in =
TopDocs
> and
> >> retrieve the stored field from there to offset+count.
> >>
> >> Uwe
> >>
> >> -----
> >> Uwe Schindler
> >> H.-H.-Meier-Allee 63, D-28213 Bremen
> >> http://www.thetaphi.de
> >> eMail: uwe@thetaphi.de
> >>
> >>
> >> > -----Original Message-----
> >> > From: Jo=E3o Silva [mailto:galaio.silva@gmail.com]
> >> > Sent: Friday, June 19, 2009 12:58 PM
> >> > To: java-user@lucene.apache.org
> >> > Subject: Collector Pagination
> >> >
> >> > Hi,
> >> > is there any api form of Hits pagination?
> >> > for example, if i want to retreve the hits between
> >> > an interval.
> >> >
> >> > --
> >> > Cumprimentos,
> >> > Jo=E3o Carlos Galaio da Silva
> >>
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Cumprimentos,
> > Jo=E3o Carlos Galaio da Silva
> >
>=20
>=20
>=20
> --
> Cumprimentos,
> Jo=E3o Carlos Galaio da Silva


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 13:22:23 2009
Return-Path: <java-user-return-40824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86738 invoked from network); 19 Jun 2009 13:22:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 13:22:22 -0000
Received: (qmail 34534 invoked by uid 500); 19 Jun 2009 13:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34500 invoked by uid 500); 19 Jun 2009 13:22:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34490 invoked by uid 99); 19 Jun 2009 13:22:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 13:22:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of galaio.silva@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 13:22:21 +0000
Received: by bwz27 with SMTP id 27so1863316bwz.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 06:21:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=1sErATWQMHliCTgByj1gLYGBtIYKSvW8gpO8P/mFHI8=;
        b=kwOt4l0K9bkovH1qCDsJfG8N1ybmvlGzMUjn9X8yebPlYP6VbqCzA8Havii+IG+DrJ
         5s/Apj7nxg5USK1b8NeVKZ+mL3Omvm7r13//d2HeHDtIjuWcfLJCusAynsGCjLWgSh1Q
         QQxlN+T7yDQV0Q3kvslHxvv3pdjJPqxOX5fyc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=eE8w5Bw4iuOyIQwKzQKPBhEFaeyMKGXH3Uj+VbUbM2mqbtotcUHTC9RwFtImzUjC7V
         jEOqhHFVDHN3Y4Dgwp+ESdW5Kn5vISyyd/VoZKFDHgf+Wh4QwPaeB1T6nIPcN/Y48/lG
         sUL3/klGsL80GQv/TZ5f9vUcLUt4h9r4mFwCU=
MIME-Version: 1.0
Received: by 10.223.108.140 with SMTP id f12mr2258794fap.69.1245417719551; 
	Fri, 19 Jun 2009 06:21:59 -0700 (PDT)
In-Reply-To: <526786C231244E86850B3E93FA1BCB20@VEGA>
References: <fddb43f90906190357l24732dc8h2c94dde9095e4285@mail.gmail.com>
	 <9C522819695C4CD2A7781CC0B9365810@VEGA>
	 <fddb43f90906190457n20e502e4y65af4f25dbf71752@mail.gmail.com>
	 <fddb43f90906190517k73b0fa1bvf4b288866733d230@mail.gmail.com>
	 <526786C231244E86850B3E93FA1BCB20@VEGA>
Date: Fri, 19 Jun 2009 14:21:59 +0100
Message-ID: <fddb43f90906190621p6dcfa8fcwb5f390728709c6d7@mail.gmail.com>
Subject: Re: Collector Pagination
From: =?ISO-8859-1?Q?Jo=E3o_Silva?= <galaio.silva@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5acf8c55845046cb368ed
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5acf8c55845046cb368ed
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Nice Uwe,
i'll try this.

Thanks,
Galaio

On Fri, Jun 19, 2009 at 1:33 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> To get the second page,
> Take:
> int hitsPerPage =3D 10;
> int pageOffset =3D 10;
> TopDocCollector collector =3D new TopDocCollector(hitsPerPage + pageOffse=
t);
>
> For page third page take int pageOffset =3D 20; and so on
>
> After that your results are in hits[], for the first page in [0] to [9],
> the
> second page in [10] to [19] and so on:
>
> To display use something like:
> For (int i=3DpageOffset; Math.min(hitsPerPage + pageOffset,
> collector.topDocs().totalhits); i++)
>
> In general, you cannot retrieve a range directly, you can only retrieve t=
he
> top docs. As most people will not go beyond say page 10 when searching, y=
ou
> have no memory problem, as scoreDocs will contain at most 100 doc ids.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Jo=E3o Silva [mailto:galaio.silva@gmail.com]
> > Sent: Friday, June 19, 2009 2:17 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Collector Pagination
> >
> > well,
> >
> > i have somthing like that:
> >
> >  int hitsPerPage =3D 10;
> >             IndexSearcher searcher =3D new IndexSearcher(this.indexPath=
);
> >             TopDocCollector collector =3D new TopDocCollector(hitsPerPa=
ge);
> >             Query query =3D new QueryParser("",
> > this.analizer).parse(DocumentRepositoryEntry.Fields.ID.toString() + ":"
> >                     + id);
> >             searcher.search(query, collector);
> >
> >             ScoreDoc[] hits =3D collector.topDocs().scoreDocs;
> >
> > i know that the colector have all docs in the query, how do i navigate
> > between the next pages?
> >
> >
> > thanks,
> > Galaio
> >
> >
> >
> > On Fri, Jun 19, 2009 at 12:57 PM, Jo=E3o Silva <galaio.silva@gmail.com>
> > wrote:
> >
> > > Thanks Uwe, I will see that.
> > >
> > > Galaio
> > >
> > >
> > >
> > >
> > > On Fri, Jun 19, 2009 at 12:36 PM, Uwe Schindler <uwe@thetaphi.de>
> wrote:
> > >
> > >> Hallo,
> > >>
> > >> Just retrieve the TopDocs for the first n documents, where n =3D
> > >> offset+count,
> > >> where offset is the first hit on the page (0-based) and count the
> > number
> > >> per
> > >> page.
> > >> To display the results you would then just start at offset in TopDoc=
s
> > and
> > >> retrieve the stored field from there to offset+count.
> > >>
> > >> Uwe
> > >>
> > >> -----
> > >> Uwe Schindler
> > >> H.-H.-Meier-Allee 63, D-28213 Bremen
> > >> http://www.thetaphi.de
> > >> eMail: uwe@thetaphi.de
> > >>
> > >>
> > >> > -----Original Message-----
> > >> > From: Jo=E3o Silva [mailto:galaio.silva@gmail.com]
> > >> > Sent: Friday, June 19, 2009 12:58 PM
> > >> > To: java-user@lucene.apache.org
> > >> > Subject: Collector Pagination
> > >> >
> > >> > Hi,
> > >> > is there any api form of Hits pagination?
> > >> > for example, if i want to retreve the hits between
> > >> > an interval.
> > >> >
> > >> > --
> > >> > Cumprimentos,
> > >> > Jo=E3o Carlos Galaio da Silva
> > >>
> > >>
> > >> --------------------------------------------------------------------=
-
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> > >
> > > --
> > > Cumprimentos,
> > > Jo=E3o Carlos Galaio da Silva
> > >
> >
> >
> >
> > --
> > Cumprimentos,
> > Jo=E3o Carlos Galaio da Silva
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Cumprimentos,
Jo=E3o Carlos Galaio da Silva

--001636c5acf8c55845046cb368ed--

From java-user-return-40825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 15:37:32 2009
Return-Path: <java-user-return-40825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98288 invoked from network); 19 Jun 2009 15:37:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 15:37:32 -0000
Received: (qmail 17298 invoked by uid 500); 19 Jun 2009 15:37:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17255 invoked by uid 500); 19 Jun 2009 15:37:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17245 invoked by uid 99); 19 Jun 2009 15:37:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 15:37:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [83.149.198.201] (HELO smtp.ispras.ru) (83.149.198.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 15:37:31 +0000
Received: from ispserv.ispras.ru (ispserv.ispras.ru [83.149.198.72])
	by smtp.ispras.ru (Postfix) with ESMTP id D2CBF5D414A
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 19:09:31 +0400 (MSD)
Received: from fiona (fiona.ispras.ru [83.149.198.76])
	by ispserv.ispras.ru (Postfix) with SMTP id 625FA3FC48
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 19:37:10 +0400 (MSD)
Message-ID: <0d5801c9f0f3$8b3f4b30$4cc69553@fiona>
From: "Dmitry Lizorkin" <lizorkin@ispras.ru>
To: <java-user@lucene.apache.org>
Subject: getting all Lucene internal IDs
Date: Fri, 19 Jun 2009 19:35:15 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="koi8-r";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

What is the appropriate way to obtain Lucene internal IDs for _all_ the 
tuples stored in a Lucene index?

Thank you for your help
Dmitry


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 16:01:42 2009
Return-Path: <java-user-return-40826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7294 invoked from network); 19 Jun 2009 16:01:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 16:01:42 -0000
Received: (qmail 66527 invoked by uid 500); 19 Jun 2009 16:01:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66476 invoked by uid 500); 19 Jun 2009 16:01:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66466 invoked by uid 99); 19 Jun 2009 16:01:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 16:01:51 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 16:01:42 +0000
Received: by yxe34 with SMTP id 34so2663925yxe.20
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 09:01:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.129.5 with SMTP id g5mr6068994ybn.84.1245427279369; Fri, 
	19 Jun 2009 09:01:19 -0700 (PDT)
In-Reply-To: <0d5801c9f0f3$8b3f4b30$4cc69553@fiona>
References: <0d5801c9f0f3$8b3f4b30$4cc69553@fiona>
Date: Fri, 19 Jun 2009 12:01:19 -0400
Message-ID: <9ac0c6aa0906190901s7c6c2f9r92f2cca1e2ca871a@mail.gmail.com>
Subject: Re: getting all Lucene internal IDs
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Assuming your goal is to exclude deleted docs, in 2.9 (not yet
released) you can do this:

  TermDocs td = IndexReader.termDocs(null);

and then iterate through them.

Mike

2009/6/19 Dmitry Lizorkin <lizorkin@ispras.ru>:
> Hello!
>
> What is the appropriate way to obtain Lucene internal IDs for _all_ the
> tuples stored in a Lucene index?
>
> Thank you for your help
> Dmitry
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 16:45:34 2009
Return-Path: <java-user-return-40827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25067 invoked from network); 19 Jun 2009 16:45:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 16:45:34 -0000
Received: (qmail 54389 invoked by uid 500); 19 Jun 2009 16:45:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54321 invoked by uid 500); 19 Jun 2009 16:45:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54311 invoked by uid 99); 19 Jun 2009 16:45:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 16:45:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [83.149.198.201] (HELO smtp.ispras.ru) (83.149.198.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 16:45:32 +0000
Received: from ispserv.ispras.ru (ispserv.ispras.ru [83.149.198.72])
	by smtp.ispras.ru (Postfix) with ESMTP id 3B1425D418B
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 20:17:33 +0400 (MSD)
Received: from fiona (fiona.ispras.ru [83.149.198.76])
	by ispserv.ispras.ru (Postfix) with SMTP id ECEFB3FC48
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 20:45:11 +0400 (MSD)
Message-ID: <0d7a01c9f0fd$0c138dd0$4cc69553@fiona>
From: "Dmitry Lizorkin" <lizorkin@ispras.ru>
To: <java-user@lucene.apache.org>
References: <0d5801c9f0f3$8b3f4b30$4cc69553@fiona> <9ac0c6aa0906190901s7c6c2f9r92f2cca1e2ca871a@mail.gmail.com>
Subject: Re: getting all Lucene internal IDs
Date: Fri, 19 Jun 2009 20:43:17 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="ISO-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

> Assuming your goal is to exclude deleted docs
Yes, precisely.

>  TermDocs td = IndexReader.termDocs(null);

That looks exactly what we need! We'll be looking forward to the release of 
v. 2.9.

In the meantime, does there exist any workaround for the current version 
2.4.1 we're using?

Thank you for your prompt reply
Dmitry


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 16:48:21 2009
Return-Path: <java-user-return-40828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25717 invoked from network); 19 Jun 2009 16:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 16:48:21 -0000
Received: (qmail 61872 invoked by uid 500); 19 Jun 2009 16:48:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61823 invoked by uid 500); 19 Jun 2009 16:48:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61797 invoked by uid 99); 19 Jun 2009 16:48:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 16:48:18 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 16:48:10 +0000
Received: by yw-out-2324.google.com with SMTP id 2so730006ywt.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 09:47:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.129.5 with SMTP id g5mr6149627ybn.84.1245430068358; Fri, 
	19 Jun 2009 09:47:48 -0700 (PDT)
In-Reply-To: <0d7a01c9f0fd$0c138dd0$4cc69553@fiona>
References: <0d5801c9f0f3$8b3f4b30$4cc69553@fiona>
	 <9ac0c6aa0906190901s7c6c2f9r92f2cca1e2ca871a@mail.gmail.com>
	 <0d7a01c9f0fd$0c138dd0$4cc69553@fiona>
Date: Fri, 19 Jun 2009 12:47:46 -0400
Message-ID: <9ac0c6aa0906190947n5b894ca1k9508059297fa1ab3@mail.gmail.com>
Subject: Re: getting all Lucene internal IDs
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jun 19, 2009 at 12:43 PM, Dmitry Lizorkin<lizorkin@ispras.ru> wrote:

> In the meantime, does there exist any workaround for the current version
> 2.4.1 we're using?

Iterate over all ints from 0 .. IndexReader.maxDoc() (exclusive) and
call IndexReader.isDeleted?

Open a read-only IndexReader if possible, so isDeleted won't be synchronized.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 17:51:21 2009
Return-Path: <java-user-return-40829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60386 invoked from network); 19 Jun 2009 17:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 17:51:21 -0000
Received: (qmail 53405 invoked by uid 500); 19 Jun 2009 17:51:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53309 invoked by uid 500); 19 Jun 2009 17:51:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53298 invoked by uid 99); 19 Jun 2009 17:51:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 17:51:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [83.149.198.201] (HELO smtp.ispras.ru) (83.149.198.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 17:51:19 +0000
Received: from ispserv.ispras.ru (ispserv.ispras.ru [83.149.198.72])
	by smtp.ispras.ru (Postfix) with ESMTP id 415605D417E
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 21:23:19 +0400 (MSD)
Received: from fiona (fiona.ispras.ru [83.149.198.76])
	by ispserv.ispras.ru (Postfix) with SMTP id 2DDC53FC57
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 21:50:58 +0400 (MSD)
Message-ID: <0daf01c9f106$3c371370$4cc69553@fiona>
From: "Dmitry Lizorkin" <lizorkin@ispras.ru>
To: <java-user@lucene.apache.org>
References: <0d5801c9f0f3$8b3f4b30$4cc69553@fiona> <9ac0c6aa0906190901s7c6c2f9r92f2cca1e2ca871a@mail.gmail.com> <0d7a01c9f0fd$0c138dd0$4cc69553@fiona> <9ac0c6aa0906190947n5b894ca1k9508059297fa1ab3@mail.gmail.com>
Subject: Re: getting all Lucene internal IDs
Date: Fri, 19 Jun 2009 21:49:03 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="ISO-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

> Iterate over all ints from 0 .. IndexReader.maxDoc() (exclusive) and
> call IndexReader.isDeleted?

Excellent, works perfect for us!

Michael, thank you very much for your help!

Best regards,
  Dmitry


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 17:56:07 2009
Return-Path: <java-user-return-40830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62651 invoked from network); 19 Jun 2009 17:56:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 17:56:06 -0000
Received: (qmail 59229 invoked by uid 500); 19 Jun 2009 17:56:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59139 invoked by uid 500); 19 Jun 2009 17:56:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59129 invoked by uid 99); 19 Jun 2009 17:56:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 17:56:14 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 17:56:05 +0000
Received: by yw-out-2324.google.com with SMTP id 2so747886ywt.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 10:55:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.73.1 with SMTP id a1mr6277804ybl.95.1245434143643; Fri, 19 
	Jun 2009 10:55:43 -0700 (PDT)
In-Reply-To: <0daf01c9f106$3c371370$4cc69553@fiona>
References: <0d5801c9f0f3$8b3f4b30$4cc69553@fiona>
	 <9ac0c6aa0906190901s7c6c2f9r92f2cca1e2ca871a@mail.gmail.com>
	 <0d7a01c9f0fd$0c138dd0$4cc69553@fiona>
	 <9ac0c6aa0906190947n5b894ca1k9508059297fa1ab3@mail.gmail.com>
	 <0daf01c9f106$3c371370$4cc69553@fiona>
Date: Fri, 19 Jun 2009 13:55:43 -0400
Message-ID: <9ac0c6aa0906191055q19d49b31rb994950ed70ce499@mail.gmail.com>
Subject: Re: getting all Lucene internal IDs
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You're welcome!

Mike

On Fri, Jun 19, 2009 at 1:49 PM, Dmitry Lizorkin<lizorkin@ispras.ru> wrote:
>> Iterate over all ints from 0 .. IndexReader.maxDoc() (exclusive) and
>> call IndexReader.isDeleted?
>
> Excellent, works perfect for us!
>
> Michael, thank you very much for your help!
>
> Best regards,
> =A0Dmitry
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 18:40:54 2009
Return-Path: <java-user-return-40831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92774 invoked from network); 19 Jun 2009 18:40:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 18:40:54 -0000
Received: (qmail 16876 invoked by uid 500); 19 Jun 2009 18:41:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16841 invoked by uid 500); 19 Jun 2009 18:41:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16831 invoked by uid 99); 19 Jun 2009 18:41:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 18:41:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 18:40:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id CF3A77500A
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 12:40:34 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id sqZgguGy9K9a for <java-user@lucene.apache.org>;
	Fri, 19 Jun 2009 12:40:33 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 6EB1973006
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 12:40:33 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9F10D.6D9E1601"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: caching an indexreader
Date: Fri, 19 Jun 2009 12:40:26 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB40508F663@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: caching an indexreader
Thread-Index: AcnxDWlWWytK+XCFSeOSt3wnDuvieA==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F10D.6D9E1601
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

In my environment, one of the concerns is that new documents are
constantly being added (and some documents may be deleted).  This means
that when a user does a search and pages through results, it is possible
that there are new items coming in which affect the search-thus changing
where items are in relation to the pages displayed to the user. =20

=20

It seems to me that one solution would be to cache the Searcher for the
duration of the user's search session so that the user's view of the
available documents doesn't change.  As I understand it, the user won't
see any changes to the index until a new Searcher is created.  However,
I'm very sensitive to the amount of session context memory that caching
the searcher might take up.  How much memory will caching the searcher
cost?  Are there other tradeoff's I need to consider?=20

=20

Is this a viable option or does anyone have an alternative suggestion?


------_=_NextPart_001_01C9F10D.6D9E1601--

From java-user-return-40832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 18:45:33 2009
Return-Path: <java-user-return-40832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93394 invoked from network); 19 Jun 2009 18:45:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 18:45:32 -0000
Received: (qmail 19736 invoked by uid 500); 19 Jun 2009 18:45:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19664 invoked by uid 500); 19 Jun 2009 18:45:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19653 invoked by uid 99); 19 Jun 2009 18:45:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 18:45:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 18:45:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id F09A2F024
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 12:45:09 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id f1+mdVYH5jSq for <java-user@lucene.apache.org>;
	Fri, 19 Jun 2009 12:45:08 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id B677CF01D
	for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 12:45:08 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9F10E.11B77089"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Filters vs Queries - revisited
Date: Fri, 19 Jun 2009 12:45:02 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB40508F666@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Filters vs Queries - revisited
Thread-Index: AcnxDg4gRJ8x7U+CQZ6CtxJD5HxPbg==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F10E.11B77089
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

As I read about Filters, it seems to me that a filter is preferred for
any portion of the query string where you are setting the boost to 0
(meaning you don't want it to contribute to the relevancy score). =20

=20

But, relevancy is only interesting if you are displaying the documents
in relevancy order.

=20

Is it too simplistic to say that if you are displaying results in some
order other than relevancy (e.g., in date order), that you should simply
use filters and ignore queries (use MatchAllDocsQuery)?


------_=_NextPart_001_01C9F10E.11B77089--

From java-user-return-40833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 19:06:35 2009
Return-Path: <java-user-return-40833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1957 invoked from network); 19 Jun 2009 19:06:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 19:06:35 -0000
Received: (qmail 37671 invoked by uid 500); 19 Jun 2009 19:06:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37607 invoked by uid 500); 19 Jun 2009 19:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37597 invoked by uid 99); 19 Jun 2009 19:06:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 19:06:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 19:06:34 +0000
Received: by wa-out-1112.google.com with SMTP id l35so625922waf.5
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 12:06:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=k3D1JE1dmqnLL4Ec0uqYJhqAfT4+NdTChanSwtTKBLw=;
        b=bjNRaTofl8OaWNhQWEdvT5WQA4jq/N2gT0Pvs8VlDWOChkBg1E3/jlvejfpi26q771
         kTj2JRfcC4biJO2/iWGHSqUWj7GBxHxhakzRf7DPPqPie9vW94/fY2O5NxMJl8FNScvK
         siHjIbnWSM9QN05zv6VvtMQFCeOwWH9ucvPOg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Vii+JVJ3zl8IE+D6CYwrhNEUoosTvrMAmqj5Hv9MLMwtk9g4xDa5L3MSuHlvkxK/W5
         xzFDK3cEb2xCMBVjNJykyKTeS12kZ+9UZTJ9PlMpdoYiRd3K3epv2IFH0ikSRwxTPBS5
         xjDd9JSgtKTI7Mg2V3+doO8VxJivG5vC4Mj+w=
MIME-Version: 1.0
Received: by 10.114.73.14 with SMTP id v14mr4466058waa.104.1245438373477; Fri, 
	19 Jun 2009 12:06:13 -0700 (PDT)
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB40508F663@exchange.slc.mainstreamdata.com>
References: <55F9EF953014514EB6BEE1F5198CEEB40508F663@exchange.slc.mainstreamdata.com>
Date: Fri, 19 Jun 2009 12:06:13 -0700
Message-ID: <85d3c3b60906191206p30b8ce01s7008ef2a540ca151@mail.gmail.com>
Subject: Re: caching an indexreader
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163645731ed73d63046cb837d5
X-Virus-Checked: Checked by ClamAV on apache.org

--00163645731ed73d63046cb837d5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

> As I understand it, the user won't see any changes to the
index until a new Searcher is created.

Correct.

> How much memory will caching the searcher cost? Are there
other tradeoff's I need to consider?

If you're updating the index frequently (every N seconds) and
the searcher/reader is closed reasonably quickly (under 5
minutes) then it should work. There will be files left around a
little longer than usual, which depends on their size and your
disk capacity (usually won't matter).

With things like LUCENE-1313 coming up, the incoming updates
wouldn't be creating small segments on disk, meaning only larger
segments are written to disk and keeping a searcher open (while
eating more RAM, under the specified limit) will happen, extra
largish disk files hanging around won't happen.

When doing distributed search in something like SOLR I wonder
how this solution would work. Maybe it would simply use HTTP
sessions ids as well.

On Fri, Jun 19, 2009 at 11:40 AM, Scott Smith <ssmith@mainstreamdata.com>wrote:

> In my environment, one of the concerns is that new documents are
> constantly being added (and some documents may be deleted).  This means
> that when a user does a search and pages through results, it is possible
> that there are new items coming in which affect the search-thus changing
> where items are in relation to the pages displayed to the user.
>
>
>
> It seems to me that one solution would be to cache the Searcher for the
> duration of the user's search session so that the user's view of the
> available documents doesn't change.  As I understand it, the user won't
> see any changes to the index until a new Searcher is created.  However,
> I'm very sensitive to the amount of session context memory that caching
> the searcher might take up.  How much memory will caching the searcher
> cost?  Are there other tradeoff's I need to consider?
>
>
>
> Is this a viable option or does anyone have an alternative suggestion?
>
>

--00163645731ed73d63046cb837d5--

From java-user-return-40834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 19:12:03 2009
Return-Path: <java-user-return-40834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4643 invoked from network); 19 Jun 2009 19:12:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 19:12:03 -0000
Received: (qmail 43176 invoked by uid 500); 19 Jun 2009 19:12:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43098 invoked by uid 500); 19 Jun 2009 19:12:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43087 invoked by uid 99); 19 Jun 2009 19:12:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 19:12:12 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 19:12:02 +0000
Received: by yxe34 with SMTP id 34so2857435yxe.20
        for <java-user@lucene.apache.org>; Fri, 19 Jun 2009 12:11:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.121.11 with SMTP id y11mr6373046ybm.125.1245438700484; 
	Fri, 19 Jun 2009 12:11:40 -0700 (PDT)
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB40508F663@exchange.slc.mainstreamdata.com>
References: <55F9EF953014514EB6BEE1F5198CEEB40508F663@exchange.slc.mainstreamdata.com>
Date: Fri, 19 Jun 2009 15:11:40 -0400
Message-ID: <9ac0c6aa0906191211u687a8459qa81b29292d933c0b@mail.gmail.com>
Subject: Re: caching an indexreader
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jun 19, 2009 at 2:40 PM, Scott Smith<ssmith@mainstreamdata.com> wro=
te:
> In my environment, one of the concerns is that new documents are
> constantly being added (and some documents may be deleted). =A0This means
> that when a user does a search and pages through results, it is possible
> that there are new items coming in which affect the search-thus changing
> where items are in relation to the pages displayed to the user.

This is a very real problem that most search apps simply ignore.

> It seems to me that one solution would be to cache the Searcher for the
> duration of the user's search session so that the user's view of the
> available documents doesn't change. =A0As I understand it, the user won't
> see any changes to the index until a new Searcher is created. =A0However,
> I'm very sensitive to the amount of session context memory that caching
> the searcher might take up. =A0How much memory will caching the searcher
> cost? =A0Are there other tradeoff's I need to consider?

Caching the reader & reader affinity (re-using the same reader when
user pages) is the right approach.

Prior to 2.9 (not yet released) the RAM requirements of multiple
readers were high, if you sort by field or use the FieldCache
directly, because a new FieldCache entry is created for the entire
index, per reader.  It was also slow to reopen for this reason (on a
large index).

With 2.9, the FieldCache entries are stored per segment, so that a
newly opened reader only adds entries for new segments in the index.
Often this is a tiny amount of added RAM, but if a big merge has just
finished it could be alot of RAM.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 19:50:41 2009
Return-Path: <java-user-return-40835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24167 invoked from network); 19 Jun 2009 19:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 19:50:40 -0000
Received: (qmail 96324 invoked by uid 500); 19 Jun 2009 19:50:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96203 invoked by uid 500); 19 Jun 2009 19:50:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96185 invoked by uid 99); 19 Jun 2009 19:50:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 19:50:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 19:50:40 +0000
Received: by wa-out-1112.google.com with SMTP id l35so632159waf.5
        for <multiple recipients>; Fri, 19 Jun 2009 12:50:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=nZW9NeinkV9BUTB2ALQUeFx6wLmG+ewTsxw9FOvHfAE=;
        b=i+LTsYviB8oItuBpWhumdfyx7SIoodYIfRP8bgz7TJkrSF7VSmbZS7sV3cf+ZM+vV8
         hHrFZu/FVoAOja3IQMcgiTWvI0G7H9dI77hi9zc5eO5tlRnCFfy1JM4g2xZLxLSQ3+CL
         shWFyU3MbkuQLji4gK7ki7PCl5oy6Xw+pGz64=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XnxONsk2rDstgWuky4BpfgxAwgigUsu9hq+eWJ8YZ0XiA+OY4bfy1hPNfWjj+92ye5
         cx3Avc036tx7g5lWomjeNh4T+u+rHVEkrM5ZMEdl7bD/UblENCRifXqZEKQRWxVZ6GNr
         20wvTVwHLZ+W+VithonoTF2z8BWXpXJc1/v9w=
MIME-Version: 1.0
Received: by 10.115.54.7 with SMTP id g7mr4540801wak.86.1245441019710; Fri, 19 
	Jun 2009 12:50:19 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906191211u687a8459qa81b29292d933c0b@mail.gmail.com>
References: <55F9EF953014514EB6BEE1F5198CEEB40508F663@exchange.slc.mainstreamdata.com>
	 <9ac0c6aa0906191211u687a8459qa81b29292d933c0b@mail.gmail.com>
Date: Fri, 19 Jun 2009 12:50:19 -0700
Message-ID: <85d3c3b60906191250w513488c0i5a917fa07d84b726@mail.gmail.com>
Subject: Re: caching an indexreader
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636457594918d95046cb8d52f
X-Virus-Checked: Checked by ClamAV on apache.org

--001636457594918d95046cb8d52f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On the topic of RAM consumption, it seems like field caches
could return estimated RAM usage (given they're arrays of
standard Java types)? There's methods of calculating per
platform (I believe relatively accurately).

On Fri, Jun 19, 2009 at 12:11 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> On Fri, Jun 19, 2009 at 2:40 PM, Scott Smith<ssmith@mainstreamdata.com>
> wrote:
> > In my environment, one of the concerns is that new documents are
> > constantly being added (and some documents may be deleted).  This means
> > that when a user does a search and pages through results, it is possible
> > that there are new items coming in which affect the search-thus changing
> > where items are in relation to the pages displayed to the user.
>
> This is a very real problem that most search apps simply ignore.
>
> > It seems to me that one solution would be to cache the Searcher for the
> > duration of the user's search session so that the user's view of the
> > available documents doesn't change.  As I understand it, the user won't
> > see any changes to the index until a new Searcher is created.  However,
> > I'm very sensitive to the amount of session context memory that caching
> > the searcher might take up.  How much memory will caching the searcher
> > cost?  Are there other tradeoff's I need to consider?
>
> Caching the reader & reader affinity (re-using the same reader when
> user pages) is the right approach.
>
> Prior to 2.9 (not yet released) the RAM requirements of multiple
> readers were high, if you sort by field or use the FieldCache
> directly, because a new FieldCache entry is created for the entire
> index, per reader.  It was also slow to reopen for this reason (on a
> large index).
>
> With 2.9, the FieldCache entries are stored per segment, so that a
> newly opened reader only adds entries for new segments in the index.
> Often this is a tiny amount of added RAM, but if a big merge has just
> finished it could be alot of RAM.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636457594918d95046cb8d52f--

From java-user-return-40836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 19 22:19:09 2009
Return-Path: <java-user-return-40836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18257 invoked from network); 19 Jun 2009 22:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jun 2009 22:19:07 -0000
Received: (qmail 44096 invoked by uid 500); 19 Jun 2009 22:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44014 invoked by uid 500); 19 Jun 2009 22:19:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43998 invoked by uid 99); 19 Jun 2009 22:19:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 22:19:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jun 2009 22:19:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 17C7251026;
	Fri, 19 Jun 2009 16:18:46 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XBhKpX9ttLSW; Fri, 19 Jun 2009 16:18:44 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id B3BA351025;
	Fri, 19 Jun 2009 16:18:44 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: caching an indexreader
Date: Fri, 19 Jun 2009 16:18:43 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB40508F6D8@exchange.slc.mainstreamdata.com>
In-Reply-To: <85d3c3b60906191250w513488c0i5a917fa07d84b726@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: caching an indexreader
Thread-Index: AcnxF0djAGwfHE8gQsGjBw/RF/+mhAAFIxbg
References: <55F9EF953014514EB6BEE1F5198CEEB40508F663@exchange.slc.mainstreamdata.com> <9ac0c6aa0906191211u687a8459qa81b29292d933c0b@mail.gmail.com> <85d3c3b60906191250w513488c0i5a917fa07d84b726@mail.gmail.com>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>,
	<java-dev@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the comments.  Sounds like I will probably be ok.

-----Original Message-----
From: Jason Rutherglen [mailto:jason.rutherglen@gmail.com]=20
Sent: Friday, June 19, 2009 1:50 PM
To: java-user@lucene.apache.org; java-dev@lucene.apache.org
Subject: Re: caching an indexreader

On the topic of RAM consumption, it seems like field caches
could return estimated RAM usage (given they're arrays of
standard Java types)? There's methods of calculating per
platform (I believe relatively accurately).

On Fri, Jun 19, 2009 at 12:11 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> On Fri, Jun 19, 2009 at 2:40 PM, Scott
Smith<ssmith@mainstreamdata.com>
> wrote:
> > In my environment, one of the concerns is that new documents are
> > constantly being added (and some documents may be deleted).  This
means
> > that when a user does a search and pages through results, it is
possible
> > that there are new items coming in which affect the search-thus
changing
> > where items are in relation to the pages displayed to the user.
>
> This is a very real problem that most search apps simply ignore.
>
> > It seems to me that one solution would be to cache the Searcher for
the
> > duration of the user's search session so that the user's view of the
> > available documents doesn't change.  As I understand it, the user
won't
> > see any changes to the index until a new Searcher is created.
However,
> > I'm very sensitive to the amount of session context memory that
caching
> > the searcher might take up.  How much memory will caching the
searcher
> > cost?  Are there other tradeoff's I need to consider?
>
> Caching the reader & reader affinity (re-using the same reader when
> user pages) is the right approach.
>
> Prior to 2.9 (not yet released) the RAM requirements of multiple
> readers were high, if you sort by field or use the FieldCache
> directly, because a new FieldCache entry is created for the entire
> index, per reader.  It was also slow to reopen for this reason (on a
> large index).
>
> With 2.9, the FieldCache entries are stored per segment, so that a
> newly opened reader only adds entries for new segments in the index.
> Often this is a tiny amount of added RAM, but if a big merge has just
> finished it could be alot of RAM.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 20 04:29:01 2009
Return-Path: <java-user-return-40837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34737 invoked from network); 20 Jun 2009 04:29:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jun 2009 04:29:01 -0000
Received: (qmail 89769 invoked by uid 500); 20 Jun 2009 04:29:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89717 invoked by uid 500); 20 Jun 2009 04:29:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89707 invoked by uid 99); 20 Jun 2009 04:29:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jun 2009 04:29:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 20 Jun 2009 04:29:00 +0000
Received: (qmail 93868 invoked by uid 60001); 20 Jun 2009 04:28:39 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245472119; bh=3Y2XRUdGplq51YHch3Kz/E8RU5LRZeplJoy4d0BaB6g=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=rcjuL0tjzLeETytowAWU7qs205GRnGxw7o/l3bnYtjuMwLXAbYDFqaXXDug2aH7rKeCV5gKdhEf5GtuDdDnZbXAhIuoqVE2QLdYaXPjEg96ZvyCPSSwAMloWxoqKk4EuHu0f85prz5qCxN1qPE9rJMN/4cn6FNpB0mKjnnhv/AA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=gnqLDJKhGPFyR039vpwyTpF5ZTf41tB41JTsT3ss233UKWViZaQUxuVBmWXPhmoamxFCI0MFLAWFpvjiDz4GR5DzxiYTZYCnifuVHuCvEjVq7YsXWDQw9cQ7rQynsISERJw2jLK3QOEm+RKfUF5ksGWLZPkA7ZrD0cQCg2ZXOvc=;
Message-ID: <176246.93790.qm@web50302.mail.re2.yahoo.com>
X-YMail-OSG: 9_MJF14VM1kCrMji_Y8yq.lG1ZJwARamjeaptMtgwr81_UpJFA_n5mvjq85YZ.bsu1qO3aC8IYGe89vLXUXMW0FGrfD3PSeuAYHnpZ1.s1Xli7jMV5vj0uyDfFDkC9mfz4s083yeGyCMoVzH6MLadgjurgHDfruFN9_OsZSycIzhHPVTcGQGHBghq5E3zk_6vGGdtl32CArLwdzJYx1NUOd4NTRX9iFSFOyOz6yxPGRARzoPDqU6m7dGYihfMys4ZVCMZC_u3aR47dvZkan08ps2X.Ldytg6ws4t.zEaozkNFpa6HWnamFDIcQYMTRp33wBl3nBKpQGw3XtcGSiU1mkAIC7EC0qNHh7s
Received: from [24.90.13.131] by web50302.mail.re2.yahoo.com via HTTP; Fri, 19 Jun 2009 21:28:38 PDT
X-Mailer: YahooMailRC/1357.18 YahooMailWebService/0.7.289.15
References: <24105223.post@talk.nabble.com>
Date: Fri, 19 Jun 2009 21:28:38 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Synchronizing Lucene indexes across 2 application servers
To: java-user@lucene.apache.org
In-Reply-To: <24105223.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

You may want to look at Lucene's younger brother named Solr: http://lucene.apache.org/solr/

 Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: mitu2009 <musicfreaque@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, June 19, 2009 12:10:42 AM
> Subject: Synchronizing Lucene indexes across 2 application servers
> 
> 
> I've a web application which uses Lucene for search functionality. Lucene
> search requests are served by web services sitting on 2 application servers
> (IIS 7).The 2 application servers are Load balanced using "netscaler". 
> 
> Both these servers have a batch job running which updates search indexes on
> the respective servers in the night on a daily basis. 
> 
> I need to synchronize search indexes on these 2 servers so that at any point
> of time both the servers have uptodate indexes. I was thinking what could be
> the best architecture/design strategy to do so given the fact that any of
> the 2 application servers could be serving search request depending upon its
> availability. 
> 
> Any inputs please? 
> 
> Thanks for reading!
> 
> -- 
> View this message in context: 
> http://www.nabble.com/Synchronizing-Lucene-indexes-across-2-application-servers-tp24105223p24105223.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 20 04:29:53 2009
Return-Path: <java-user-return-40838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34989 invoked from network); 20 Jun 2009 04:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jun 2009 04:29:53 -0000
Received: (qmail 92088 invoked by uid 500); 20 Jun 2009 04:30:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92014 invoked by uid 500); 20 Jun 2009 04:30:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92004 invoked by uid 99); 20 Jun 2009 04:30:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jun 2009 04:30:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 20 Jun 2009 04:29:50 +0000
Received: (qmail 11471 invoked by uid 60001); 20 Jun 2009 04:29:29 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245472169; bh=HqH5fSGbl9l1BhnVbUtf83HCipH90Xg5w3mkL5CgOO4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=pbwydc34ogAfBLKyyQudpL19lg2p6cP0pF0bCHfJRUxxyRIK+uzmeO5o2QHYruurnBHMTk/3mvluK5/ii5R5FZggQ5l4UfZcx2IpCwoD49euhCMtgGsb4CPV2jTTf1nx/EXHXv9W5+im3htBR9mJ8o6uZjpuYRbBsFmmwU6iNcY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=tFEStUFZkElvg2s5LOBGXGlAh1VGsVWRNMOA3vz+hOL5kvfFnRhsYxnRx9Hz3WKX8t/GIAQjq7FLmZrUMwiYKsg+lj3ExculjEBqDZsy0hoToH1FCtaGuNBjbfTnLXHkRfjv59cFQ+7jZT3X2y8+APlu3/neRApVXowN/+3nzNE=;
Message-ID: <334475.10134.qm@web50305.mail.re2.yahoo.com>
X-YMail-OSG: j7vxdyIVM1nM9WpohFtNmR2pCKdo5D._qkhOZjeYwtO_4T_QjdtPRWLPZ1ZcO1wlAnDls2UISOMlmqZ31w1ja3_KUflJ.PjfBq9qz6vtw8xDzoxLcpbBq7WidIqFNH0jT2v9gl6JQfnlC2w7sosT_STZ8KNY7Qoqd5mzWEX.294qRCLAR14XcrZwaS9RRCwMJCfAziMWfQKYjT4G4Ti0vJjvucvfUAtGkjX1dZY3G6IHeFleiBk6oY0yKphqHGnpE7OXvBlOEqgVpiBJfiR0NUFs6WQGwJFVfJpDXwMNqRobX1nkxt.PItFxIHZrTtVXakedNd9y2yU-
Received: from [24.90.13.131] by web50305.mail.re2.yahoo.com via HTTP; Fri, 19 Jun 2009 21:29:29 PDT
X-Mailer: YahooMailRC/1357.18 YahooMailWebService/0.7.289.15
References: <c68167800906181915r3108f8c1y5034fb4b290ed6ac@mail.gmail.com>
Date: Fri, 19 Jun 2009 21:29:29 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: n-gram word support
To: java-user@lucene.apache.org
In-Reply-To: <c68167800906181915r3108f8c1y5034fb4b290ed6ac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Here it is:

http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/analysis/shingle/ShingleMatrixFilter.html

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Neha Gupta <gupta.neha@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, June 18, 2009 10:15:12 PM
> Subject: n-gram word support
> 
> Hey,
> 
> I was wondering if there is a way to read the index and generate n-grams of
> words for a document in lucene? I am quite new to it and am using pylucene.
> 
> Thanks,
> Neha


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 20 17:32:40 2009
Return-Path: <java-user-return-40839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4486 invoked from network); 20 Jun 2009 17:32:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jun 2009 17:32:39 -0000
Received: (qmail 38949 invoked by uid 500); 20 Jun 2009 17:32:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38876 invoked by uid 500); 20 Jun 2009 17:32:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38866 invoked by uid 99); 20 Jun 2009 17:32:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jun 2009 17:32:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.227 as permitted sender)
Received: from [209.85.219.227] (HELO mail-ew0-f227.google.com) (209.85.219.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jun 2009 17:32:38 +0000
Received: by ewy27 with SMTP id 27so3048967ewy.5
        for <java-user@lucene.apache.org>; Sat, 20 Jun 2009 10:32:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=vUsmLrQNa2pS5ekZ9ztYALSncRFAAuRtGIm/JRX3xFg=;
        b=UTAubPoPIiRZTnH+3G7vsiKJ5xhYH7xxplKj9HIAGPpozVr7CEqeXbHhMl3lW5sEDj
         mtu4PfAxekzOlHX7QDDHd9afWP3XBKaF4LeOJkrnS192nFJoWnXcWpR+3AmNlGZfqmon
         vM8xiumdCJw6TdkFKc1lE2QeFVxaQb3AZHAjw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=owWWGV+b8wIF0KBfcVNtAnGLbMmmk+qCwr6uoZupxWnwJoP55rbEZ3kBLYZ9qYNk5Y
         mm39TOVcS9I7DRpWgJ4+anJCWTQmC7s0HMbv537ekhu7rVnEbx79ceNK0d6Eg1pSx3qY
         xx/aQYCq81cxkEwp0rjMzd2SWShfJAKremS10=
MIME-Version: 1.0
Received: by 10.216.36.80 with SMTP id v58mr1525735wea.193.1245519138469; Sat, 
	20 Jun 2009 10:32:18 -0700 (PDT)
Date: Sat, 20 Jun 2009 18:32:18 +0100
Message-ID: <6f4104d80906201032r6c1042ei679fca7ac0ec71d1@mail.gmail.com>
Subject: Lucene directory copy - master copy to local index
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367b6af2cf374b046ccb053f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367b6af2cf374b046ccb053f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi
I am prototyping the following situation:

1) Multiple nodes in a cluster
2) Each node has a local index
3) Search requests are maded against the local index
4) Index updates are sent to a JMS where a master process adds document to
index
5) Each node is configured to check whether the local index is out of date
and needs to copy from master index.

I have created a class that will be configured (quartz job) to copy master
directory files to the local directory.  I was wondering if I could get
advice on whether this is the best way to copy master directory changes to
the local.

public class LocalIndexProvider {

 private Directory masterDirectory;

private Directory localDirectory;

private final Logger LOGGER = Logger.getLogger(getClass());

 public LocalIndexProvider(Directory masterDirectory, Directory
localDirectory) {

this.masterDirectory  = masterDirectory;

this.localDirectory = localDirectory;

}

 public void updateLocalIndex() throws Exception {

StopWatch stopWatch = new StopWatch("copy-time");

stopWatch.start();

String[] masterFiles = masterDirectory.list();

String[] localFiles = localDirectory.list();

Lock lock = localDirectory.getLockFactory().makeLock("test");

lock.obtain();

try {

if (localFiles.length != masterFiles.length) {

Directory.copy(masterDirectory, localDirectory, false);

}

}finally {

lock.release();

}

stopWatch.stop();

LOGGER.debug("total time taken :" + stopWatch.getTotalTimeMillis());

}

 }



The above is just a proof of concept and I am open to any comments about it.
 It may be inefficient or it may be.  I have looked at the source code from
hibernate search and it seems as though they copy each file from the
directory (master to local).  I'm not sure whether this is something I need
to do or the above (with more refinement) would be enough.

Any help would be highly appreciated.

Cheers
Amin

--0016367b6af2cf374b046ccb053f--

From java-user-return-40840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 20 18:02:26 2009
Return-Path: <java-user-return-40840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18346 invoked from network); 20 Jun 2009 18:02:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jun 2009 18:02:26 -0000
Received: (qmail 58260 invoked by uid 500); 20 Jun 2009 18:02:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58223 invoked by uid 500); 20 Jun 2009 18:02:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58195 invoked by uid 99); 20 Jun 2009 18:02:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jun 2009 18:02:32 +0000
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DATE_IN_PAST_06_12,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.177.145.93] (HELO prxy.net) (209.177.145.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jun 2009 18:02:23 +0000
X-Scanned-By: RAE MPP/ClamAV http://raeinternet.com/mpp
X-Scanned-By: This message was scanned by MPP Free Edition (www.messagepartners.com)!
Received: from [75.26.161.99] (account ken@krugler.org HELO [10.0.1.3])
  by prxy.net (CommuniGate Pro SMTP 4.2.10)
  with ESMTP-TLS id 106705928 for java-user@lucene.apache.org; Sat, 20 Jun 2009 11:03:26 -0700
Mime-Version: 1.0
Message-Id: <p06240800c6625fbbd0a9@[172.16.31.76]>
In-Reply-To: <24105223.post@talk.nabble.com>
References: <24105223.post@talk.nabble.com>
Date: Sat, 20 Jun 2009 02:51:43 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Synchronizing Lucene indexes across 2 application servers
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org

>I've a web application which uses Lucene for search functionality. Lucene
>search requests are served by web services sitting on 2 application servers
>(IIS 7).The 2 application servers are Load balanced using "netscaler".
>
>Both these servers have a batch job running which updates search indexes on
>the respective servers in the night on a daily basis.
>
>I need to synchronize search indexes on these 2 servers so that at any point
>of time both the servers have uptodate indexes. I was thinking what could be
>the best architecture/design strategy to do so given the fact that any of
>the 2 application servers could be serving search request depending upon its
>availability.

You could use Katta for this, as another option - it's an open source 
distributed Lucene search system.

Under the hood Katta uses ZooKeeper to handle distribution of data to 
multiple servers. Once Katta has added an index to both systems, then 
you can switch to it (and eventually remove the old index).

The fact that you'd need two Katta "masters" makes things a bit more 
interesting, as you'd have to coordinate when they both decide to 
switch to using the new index(es).

-- Ken
-- 
Ken Krugler
+1 530-210-6378

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 21 03:32:36 2009
Return-Path: <java-user-return-40841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91806 invoked from network); 21 Jun 2009 03:32:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jun 2009 03:32:36 -0000
Received: (qmail 17141 invoked by uid 500); 21 Jun 2009 03:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17062 invoked by uid 500); 21 Jun 2009 03:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17052 invoked by uid 99); 21 Jun 2009 03:32:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jun 2009 03:32:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 21 Jun 2009 03:32:34 +0000
Received: (qmail 12025 invoked by uid 60001); 21 Jun 2009 03:32:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245555131; bh=/UT64rQIkXV3pswD9lSmNQJaheP4T+4Y7Ho9yIXa6WY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=kN5DFXXSOW2aYfn85nuCaiCmVw049FJU1fG8OZgLVYdkKeKR1cXSRr8LHDB/msv7t6tIJ71kk+3o/iBk+3iOaJfGMZXQGk5c0/460YV2aVlgsWTU9/WetCJ554Q5miVgphAno7oRkkW4bHPAz2wJttEPGilxg5rzLqavHAeglKo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=VAYIQyCbV5u2vuZq+CpF3wXj6VYNy4mnJTeQE1RBM9928Qr4LgXaa+PaPy19nKsDh13C2aHQdfrSE4KguQexPdtse0/pOGnVcVFVdwlN3S+jLKLA8QoF5cQ5ZHMD/AYBZBbAXduUf3ZYL/n/rZ0h6byn3EsUSNYIAOCFDS3QUqI=;
Message-ID: <539635.10299.qm@web50306.mail.re2.yahoo.com>
X-YMail-OSG: XnL._qYVM1kMHptPfsglfq3NCI5uYV4aeU6MjIq93d7DZcMk_dE6eFTRDxy11Cae6u_zpqIfQhjXQUnFiml_wP788xW_gdxL.ogo..Ne._ij7QwkylXA5kNJuBWZLHQjt0TFGJMTJcIDRg51TMSc1_o5NCn_8NRgJ_cgFaVOtEc6IinQYuuQpJ4Ajo2MZISvJPjt8gs_XheIGM6hV0qY.lxZ61kxtQ1jQtCEqqbsyUWCEol9_enbCtM.6cTwZYmeq5xxCsHZ.QXew3pTB1_mpjNF3yObF5XVNOWCkdOxtP1ORls6EUQUYCGXeixKn2DkaKsF3.2R70Y-
Received: from [24.90.13.131] by web50306.mail.re2.yahoo.com via HTTP; Sat, 20 Jun 2009 20:32:11 PDT
X-Mailer: YahooMailRC/1357.18 YahooMailWebService/0.7.289.15
References: <6f4104d80906201032r6c1042ei679fca7ac0ec71d1@mail.gmail.com>
Date: Sat, 20 Jun 2009 20:32:11 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene directory copy - master copy to local index
To: java-user@lucene.apache.org
In-Reply-To: <6f4104d80906201032r6c1042ei679fca7ac0ec71d1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Amin,

Have a look at Solr, it may be what you are after: http://lucene.apache.org/solr/
 
Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Amin Mohammed-Coleman <aminmc@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, June 20, 2009 1:32:18 PM
> Subject: Lucene directory copy - master copy to local index
> 
> Hi
> I am prototyping the following situation:
> 
> 1) Multiple nodes in a cluster
> 2) Each node has a local index
> 3) Search requests are maded against the local index
> 4) Index updates are sent to a JMS where a master process adds document to
> index
> 5) Each node is configured to check whether the local index is out of date
> and needs to copy from master index.
> 
> I have created a class that will be configured (quartz job) to copy master
> directory files to the local directory.  I was wondering if I could get
> advice on whether this is the best way to copy master directory changes to
> the local.
> 
> public class LocalIndexProvider {
> 
> private Directory masterDirectory;
> 
> private Directory localDirectory;
> 
> private final Logger LOGGER = Logger.getLogger(getClass());
> 
> public LocalIndexProvider(Directory masterDirectory, Directory
> localDirectory) {
> 
> this.masterDirectory  = masterDirectory;
> 
> this.localDirectory = localDirectory;
> 
> }
> 
> public void updateLocalIndex() throws Exception {
> 
> StopWatch stopWatch = new StopWatch("copy-time");
> 
> stopWatch.start();
> 
> String[] masterFiles = masterDirectory.list();
> 
> String[] localFiles = localDirectory.list();
> 
> Lock lock = localDirectory.getLockFactory().makeLock("test");
> 
> lock.obtain();
> 
> try {
> 
> if (localFiles.length != masterFiles.length) {
> 
> Directory.copy(masterDirectory, localDirectory, false);
> 
> }
> 
> }finally {
> 
> lock.release();
> 
> }
> 
> stopWatch.stop();
> 
> LOGGER.debug("total time taken :" + stopWatch.getTotalTimeMillis());
> 
> }
> 
> }
> 
> 
> 
> The above is just a proof of concept and I am open to any comments about it.
> It may be inefficient or it may be.  I have looked at the source code from
> hibernate search and it seems as though they copy each file from the
> directory (master to local).  I'm not sure whether this is something I need
> to do or the above (with more refinement) would be enough.
> 
> Any help would be highly appreciated.
> 
> Cheers
> Amin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 22 09:09:51 2009
Return-Path: <java-user-return-40842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68709 invoked from network); 22 Jun 2009 09:09:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jun 2009 09:09:51 -0000
Received: (qmail 43173 invoked by uid 500); 22 Jun 2009 09:10:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43105 invoked by uid 500); 22 Jun 2009 09:10:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43095 invoked by uid 99); 22 Jun 2009 09:10:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 09:10:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 09:09:49 +0000
Received: by fg-out-1718.google.com with SMTP id l27so481234fgb.4
        for <java-user@lucene.apache.org>; Mon, 22 Jun 2009 02:09:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=QOFohB1m9vnYHahHM+WMU8AnAL4TyYhRGVWuj0Ey94c=;
        b=PmQmoe6d65hF+mm8kCUSfw6rQwMTrVyTkiSWIVfNcqCekhUw/yqj9qtidda9KH3CjG
         cAty2W5vg4Ud8MVhe7EnUdXEsxfO9LVaG00ntyjnOdKLLjLlxUpT8a8h//+4W/fYoTwY
         03H2iksGTbLG7mP5IzJfeA9W4N6QCSt8b+X7Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=PZ8bwHeaQYA7ulLM8uVU57r1aoZyUUrfrCK4cjr2c7E5/DeMw4wa2zRveSuP7iXMKN
         Rk/6caMZO5bZDf6IEJS3pjYWZz38fxWcO6uJjcDnaYaVJd1ElljvgymSUcbI/UgWzSBx
         p+KEoVKI4L7Lj4YY/XFo0amyXtqUhBVk6lUoA=
MIME-Version: 1.0
Received: by 10.86.4.14 with SMTP id 14mr6395100fgd.12.1245661769339; Mon, 22 
	Jun 2009 02:09:29 -0700 (PDT)
In-Reply-To: <539635.10299.qm@web50306.mail.re2.yahoo.com>
References: <6f4104d80906201032r6c1042ei679fca7ac0ec71d1@mail.gmail.com> 
	<539635.10299.qm@web50306.mail.re2.yahoo.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 22 Jun 2009 10:09:09 +0100
Message-ID: <8c4e68610906220209l132febeew5210f021cac4669f@mail.gmail.com>
Subject: Re: Lucene directory copy - master copy to local index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd29b4c45948d046cec3b69
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29b4c45948d046cec3b69
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Or if you don't want to use Solr, rsync is very good for this.  Only takes
changes, takes care of deletions, very robust.  That is what Solr uses.

See http://wiki.apache.org/solr/CollectionDistribution for details or ideas.


--
Ian.

On Sun, Jun 21, 2009 at 4:32 AM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

>
> Hi Amin,
>
> Have a look at Solr, it may be what you are after:
> http://lucene.apache.org/solr/
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
> > From: Amin Mohammed-Coleman <aminmc@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Saturday, June 20, 2009 1:32:18 PM
> > Subject: Lucene directory copy - master copy to local index
> >
> > Hi
> > I am prototyping the following situation:
> >
> > 1) Multiple nodes in a cluster
> > 2) Each node has a local index
> > 3) Search requests are maded against the local index
> > 4) Index updates are sent to a JMS where a master process adds document
> to
> > index
> > 5) Each node is configured to check whether the local index is out of
> date
> > and needs to copy from master index.
> >
> > I have created a class that will be configured (quartz job) to copy
> master
> > directory files to the local directory.  I was wondering if I could get
> > advice on whether this is the best way to copy master directory changes
> to
> > the local.
> >
> > public class LocalIndexProvider {
> >
> > private Directory masterDirectory;
> >
> > private Directory localDirectory;
> >
> > private final Logger LOGGER = Logger.getLogger(getClass());
> >
> > public LocalIndexProvider(Directory masterDirectory, Directory
> > localDirectory) {
> >
> > this.masterDirectory  = masterDirectory;
> >
> > this.localDirectory = localDirectory;
> >
> > }
> >
> > public void updateLocalIndex() throws Exception {
> >
> > StopWatch stopWatch = new StopWatch("copy-time");
> >
> > stopWatch.start();
> >
> > String[] masterFiles = masterDirectory.list();
> >
> > String[] localFiles = localDirectory.list();
> >
> > Lock lock = localDirectory.getLockFactory().makeLock("test");
> >
> > lock.obtain();
> >
> > try {
> >
> > if (localFiles.length != masterFiles.length) {
> >
> > Directory.copy(masterDirectory, localDirectory, false);
> >
> > }
> >
> > }finally {
> >
> > lock.release();
> >
> > }
> >
> > stopWatch.stop();
> >
> > LOGGER.debug("total time taken :" + stopWatch.getTotalTimeMillis());
> >
> > }
> >
> > }
> >
> >
> >
> > The above is just a proof of concept and I am open to any comments about
> it.
> > It may be inefficient or it may be.  I have looked at the source code
> from
> > hibernate search and it seems as though they copy each file from the
> > directory (master to local).  I'm not sure whether this is something I
> need
> > to do or the above (with more refinement) would be enough.
> >
> > Any help would be highly appreciated.
> >
> > Cheers
> > Amin
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd29b4c45948d046cec3b69--

From java-user-return-40843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 22 09:24:44 2009
Return-Path: <java-user-return-40843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74718 invoked from network); 22 Jun 2009 09:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jun 2009 09:24:44 -0000
Received: (qmail 74725 invoked by uid 500); 22 Jun 2009 09:24:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74682 invoked by uid 500); 22 Jun 2009 09:24:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74672 invoked by uid 99); 22 Jun 2009 09:24:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 09:24:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 09:24:42 +0000
Received: by gxk11 with SMTP id 11so4590039gxk.5
        for <java-user@lucene.apache.org>; Mon, 22 Jun 2009 02:24:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.131.2 with SMTP id i2mr10985964ybn.18.1245662660433; Mon, 
	22 Jun 2009 02:24:20 -0700 (PDT)
In-Reply-To: <8c4e68610906220209l132febeew5210f021cac4669f@mail.gmail.com>
References: <6f4104d80906201032r6c1042ei679fca7ac0ec71d1@mail.gmail.com>
	 <539635.10299.qm@web50306.mail.re2.yahoo.com>
	 <8c4e68610906220209l132febeew5210f021cac4669f@mail.gmail.com>
Date: Mon, 22 Jun 2009 05:24:20 -0400
Message-ID: <9ac0c6aa0906220224v156bf2f0va8021bbbc4557b5b@mail.gmail.com>
Subject: Re: Lucene directory copy - master copy to local index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Solr (as of 1.4) is moving to Java only implementation for replication
(http://wiki.apache.org/solr/SolrReplication).

If you roll your own, make sure to only run rsync at "proper" times
according to the master, eg, it's probably simplest to close the
writer on the master before running rsync.  If you don't want to pause
indexing when copying, then you should use SnapshotDeletionPolicy to
get the list of files that need copying and pass that list to rsync.
If you simply rsync whenever you want to, and a writer is open on the
index, it's easy to get a corrupt copy.

Mike

On Mon, Jun 22, 2009 at 5:09 AM, Ian Lea<ian.lea@gmail.com> wrote:
> Or if you don't want to use Solr, rsync is very good for this. =A0Only ta=
kes
> changes, takes care of deletions, very robust. =A0That is what Solr uses.
>
> See http://wiki.apache.org/solr/CollectionDistribution for details or ide=
as.
>
>
> --
> Ian.
>
> On Sun, Jun 21, 2009 at 4:32 AM, Otis Gospodnetic <
> otis_gospodnetic@yahoo.com> wrote:
>
>>
>> Hi Amin,
>>
>> Have a look at Solr, it may be what you are after:
>> http://lucene.apache.org/solr/
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>>
>>
>> ----- Original Message ----
>> > From: Amin Mohammed-Coleman <aminmc@gmail.com>
>> > To: java-user@lucene.apache.org
>> > Sent: Saturday, June 20, 2009 1:32:18 PM
>> > Subject: Lucene directory copy - master copy to local index
>> >
>> > Hi
>> > I am prototyping the following situation:
>> >
>> > 1) Multiple nodes in a cluster
>> > 2) Each node has a local index
>> > 3) Search requests are maded against the local index
>> > 4) Index updates are sent to a JMS where a master process adds documen=
t
>> to
>> > index
>> > 5) Each node is configured to check whether the local index is out of
>> date
>> > and needs to copy from master index.
>> >
>> > I have created a class that will be configured (quartz job) to copy
>> master
>> > directory files to the local directory. =A0I was wondering if I could =
get
>> > advice on whether this is the best way to copy master directory change=
s
>> to
>> > the local.
>> >
>> > public class LocalIndexProvider {
>> >
>> > private Directory masterDirectory;
>> >
>> > private Directory localDirectory;
>> >
>> > private final Logger LOGGER =3D Logger.getLogger(getClass());
>> >
>> > public LocalIndexProvider(Directory masterDirectory, Directory
>> > localDirectory) {
>> >
>> > this.masterDirectory =A0=3D masterDirectory;
>> >
>> > this.localDirectory =3D localDirectory;
>> >
>> > }
>> >
>> > public void updateLocalIndex() throws Exception {
>> >
>> > StopWatch stopWatch =3D new StopWatch("copy-time");
>> >
>> > stopWatch.start();
>> >
>> > String[] masterFiles =3D masterDirectory.list();
>> >
>> > String[] localFiles =3D localDirectory.list();
>> >
>> > Lock lock =3D localDirectory.getLockFactory().makeLock("test");
>> >
>> > lock.obtain();
>> >
>> > try {
>> >
>> > if (localFiles.length !=3D masterFiles.length) {
>> >
>> > Directory.copy(masterDirectory, localDirectory, false);
>> >
>> > }
>> >
>> > }finally {
>> >
>> > lock.release();
>> >
>> > }
>> >
>> > stopWatch.stop();
>> >
>> > LOGGER.debug("total time taken :" + stopWatch.getTotalTimeMillis());
>> >
>> > }
>> >
>> > }
>> >
>> >
>> >
>> > The above is just a proof of concept and I am open to any comments abo=
ut
>> it.
>> > It may be inefficient or it may be. =A0I have looked at the source cod=
e
>> from
>> > hibernate search and it seems as though they copy each file from the
>> > directory (master to local). =A0I'm not sure whether this is something=
 I
>> need
>> > to do or the above (with more refinement) would be enough.
>> >
>> > Any help would be highly appreciated.
>> >
>> > Cheers
>> > Amin
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 22 10:10:45 2009
Return-Path: <java-user-return-40844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 642 invoked from network); 22 Jun 2009 10:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jun 2009 10:10:45 -0000
Received: (qmail 59124 invoked by uid 500); 22 Jun 2009 10:10:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59048 invoked by uid 500); 22 Jun 2009 10:10:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59038 invoked by uid 99); 22 Jun 2009 10:10:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 10:10:54 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.27.42.2] (HELO smtp2-g21.free.fr) (212.27.42.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 10:10:44 +0000
Received: from smtp2-g21.free.fr (localhost [127.0.0.1])
	by smtp2-g21.free.fr (Postfix) with ESMTP id 61F614B0131
	for <java-user@lucene.apache.org>; Mon, 22 Jun 2009 12:10:20 +0200 (CEST)
Received: from [192.168.123.11] (che33-2-82-225-177-85.fbx.proxad.net [82.225.177.85])
	by smtp2-g21.free.fr (Postfix) with ESMTP id 6FA1F4B00E4
	for <java-user@lucene.apache.org>; Mon, 22 Jun 2009 12:10:18 +0200 (CEST)
Message-ID: <4A3F5869.8040506@ajlsm.com>
Date: Mon, 22 Jun 2009 12:09:45 +0200
From: Malo Pichot <malo.pichot@ajlsm.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: windows locking file problem
References: <4A3B3B04.1010700@ajlsm.com> <9ac0c6aa0906190221x60c659c8o7e4ee612641d1511@mail.gmail.com>
In-Reply-To: <9ac0c6aa0906190221x60c659c8o7e4ee612641d1511@mail.gmail.com>
X-Enigmail-Version: 0.95.7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Thank you for help, Micheal. It works fine now. Next time I will trust
Lucene a little bit more ;-)

Malo



Michael McCandless a crit :
> It's best to let IndexWriter manage the deletion of files (for exactly
> this reason).
> 
> It turns out, it's perfectly fine to open an IndexWriter with
> "create=true" even when IndexReaders are reading that same index.
> Those open IndexReaders continue to search their point-in-time
> snapshot, and then when they reopen they'll switch to the "reset"
> index.
> 
> So, assuming you have enough free disk space, you could leave your
> searcher open, create an IndexWriter with create=true, call
> addIndexesNoOptimize passing in your RAMDir (or, skip RAMDir and
> simply add your docs directly to this writer), then commit or close
> the writer and reopen the searcher.
> 
> Because Lucene is transactional, and assuming you use autoCommit=false
> when opening the writer, you can make all of your index updates and
> the searcher, even if reopened, will see none of these changes, until
> you've called commit/close from the writer.
> 
> Mike
> 
> On Fri, Jun 19, 2009 at 3:15 AM, Malo Pichot<malo.pichot@ajlsm.com> wrote:
>> Hi,
>>
>> I know a similar subject has been discussed in this list and this is not
>> a "windows file system" list ;-) But may be someone have encountered the
>> "thing"... and perhaps solved it !
>>
>> I have a web application that index many documents so I have a quite
>> large Lucene (2.2) index (~ 350 Mo) managed by a FSDirectory. The
>> indexation (I mean writing in indeces) is done by batches. Each batch
>> works first in a RAMDirectory, wich is merged with the main index in a
>> third one (a temporary FSDirectory). When the merge is done, the
>> application have to replace the main index (untouched until this time).
>> Here comes the problem ! To replace, the application close the searcher,
>> then the FSDirectory itself. After that, the application delete all
>> files of the main index and then copy all files of the temporary index
>> in place, before re-open the FSDirectory, generate searcher, etc.
>>
>> All that is good in Linux environment, and in Windows most of the time.
>> Yeap ! sometimes, windows FS refuses the deletion of the main index
>> files. Th only way I found to force windows FS unlocking those files is
>> to stop the servlets server (Tomcat). I can't shutdown Tomcat during the
>> indexation work.
>>
>> I don't know how to solved that :-(
>>
>> Does anyone get inspiration ?
>>
>> Malo


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 22 22:33:57 2009
Return-Path: <java-user-return-40845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45111 invoked from network); 22 Jun 2009 22:33:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jun 2009 22:33:57 -0000
Received: (qmail 63322 invoked by uid 500); 22 Jun 2009 22:34:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63266 invoked by uid 500); 22 Jun 2009 22:34:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63252 invoked by uid 99); 22 Jun 2009 22:34:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 22:34:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.229.153.74] (HELO nussmtp01.ironmtn.com) (216.229.153.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 22:33:58 +0000
Received: from ([10.130.4.165])
	by nussmtp01.ironmtn.com with ESMTP  id 7XMF5H1.40297416;
	Mon, 22 Jun 2009 18:33:35 -0400
Received: from NUMEVP06.na.imtn.com ([10.130.44.27]) by NUMEVP04.na.imtn.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 22 Jun 2009 18:32:53 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Transfer-Encoding: quoted-printable
Subject: SegmentReader retaining memory
Date: Mon, 22 Jun 2009 18:32:50 -0400
Message-ID: <7A5CB4A7BBCE0C40B81C5145C326C31301A62971@NUMEVP06.na.imtn.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SegmentReader retaining memory
Thread-Index: AcnziWAOpexpyTzrSU+8qRzQeH2CGg==
From: "Groose, Brian" <Brian.Groose@ironmountain.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Jun 2009 22:32:53.0167 (UTC) FILETIME=[61AE93F0:01C9F389]
Content-Type: text/plain;
	charset="us-ascii"
X-Virus-Checked: Checked by ClamAV on apache.org

In the application I'm working on, I'm opening a new index every 15-20=0D=
=0Aminutes=2E  This is done by opening the new index and then closing the o=
ld=0D=0Aindex=2E=0D=0A=0D=0AOpening one of these indexes, about 58GB on dis=
k, appears to use about=0D=0A700MB of memory based on some simple testing=
=2E I am passing -Xmx3072m to=0D=0Athe JVM=2E=0D=0A=0D=0AI've run into some=
 OutOfMemoryErrors, and looking at the heap dump that=0D=0Awas generated, I=
 see three ReadOnlyMultiSegmentReaders, each one=0D=0Areferencing roughly 7=
00MB of heap:=0D=0A- One is referenced as the currently in-use index=2E=0D=
=0A- One is being opened and a simple query is running to force the terms=
=0D=0Ato be cached in RAM=2E=0D=0A- One is only referenced by the Finalizer=
 thread=2E=0D=0A=0D=0AI definitely have an issue where GC isn't keeping up,=
 but I'm a bit=0D=0Aconcerned that a class (DirectoryIndexReader) that has =
a finalize()=0D=0Amethod is referencing so much memory and delaying GC of t=
hat memory=0D=0Auntil the finalizer can get around to it=2E  Has anyone els=
e run into an=0D=0Aissue like this?=0D=0A=0D=0AIt seems like SegmentReader=
=2EdoClose() could null out its TermInfosReader=0D=0Ato make the large amou=
nt of cached terms available for GC much sooner=0D=0Aand not reliant on the=
 finalizer=2E=0D=0A=0D=0AI'm using Lucene 2=2E4=2E1 with Sun's JDK 6 update=
 12, 64-bit, on Debian=0D=0ALenny=2E=0D=0A=0D=0AThanks,=0D=0ABrian=0D=0AThe=
 information contained in this email message and its attachments=0Ais inten=
ded=0D=0Aonly for the private and confidential use of the recipient(s) name=
d=0Aabove, unless the sender expressly agrees otherwise=2E Transmission=0Ao=
f email over the Internet=0D=0A is not a secure communications medium=2E If=
 you are requesting or=0Ahave requested=0D=0Athe transmittal of personal da=
ta, as defined in applicable privacy=0Alaws by means=0D=0A of email or in a=
n attachment to email you must select a more=0Asecure alternate means of tr=
ansmittal that supports your=0Aobligations to protect such personal data=2E=
 If the reader of this=0Amessage is not the intended recipient and/or you h=
ave received this=0Aemail in error, you must take no action based on the in=
formation in=0Athis email and you are hereby notified that any disseminatio=
n,=0Amisuse, copying, or disclosure of this communication is strictly=0Apro=
hibited=2E If you have received=0D=0Athis communication in error, please no=
tify us immediately by email=0Aand delete the original message=2E

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 22 22:36:56 2009
Return-Path: <java-user-return-40846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45492 invoked from network); 22 Jun 2009 22:36:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jun 2009 22:36:56 -0000
Received: (qmail 66624 invoked by uid 500); 22 Jun 2009 22:37:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66557 invoked by uid 500); 22 Jun 2009 22:37:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66547 invoked by uid 99); 22 Jun 2009 22:37:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 22:37:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lafadev@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jun 2009 22:36:54 +0000
Received: by qw-out-2122.google.com with SMTP id 5so2113635qwd.53
        for <java-user@lucene.apache.org>; Mon, 22 Jun 2009 15:36:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=xtRgJ8ruQwK1UhIaqqBvcz5iz6AUpTcMc58r4PqIq/A=;
        b=LcjCkwMowrc2ffPGJb3xDBbYFWQgFF2//5mrv3/TeBL4KWH7byIdARwKqORmyCinHT
         dfXRfC4vDszH3/Vgg0Gzd2pE8g1QmJGnnf3QltBylhXcGH22TD8AKzfgODNzLXiKQAvg
         TFvL9SXOzAN3xVaeuQ0U4+3oGRpxOVf4xFBTM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=mJqPdRKZzw5R5LVATMHioKOi+n1oBaurDm6LQkioA0FS3csINeCc3i3yiarvobOPDs
         kMNe6YjhUCso9Hp7k9YgUh2uKTWBfZmjUY0rBvhE0LMO9vCNImBUm9rmdoPiHLfEu/YM
         Ou58BYHnrPJipVvW8g/M6KT8BeY1rYYQcWlpI=
Received: by 10.224.61.7 with SMTP id r7mr2767083qah.226.1245710193338;
        Mon, 22 Jun 2009 15:36:33 -0700 (PDT)
Received: from ?9.30.38.143? ([32.97.110.56])
        by mx.google.com with ESMTPS id 2sm1049229qwi.53.2009.06.22.15.36.31
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 22 Jun 2009 15:36:32 -0700 (PDT)
Message-ID: <4A40076E.3000802@gmail.com>
Date: Mon, 22 Jun 2009 15:36:30 -0700
From: Luis Alves <lafadev@gmail.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query rewriting/optimization
References: <4A158A03.8020408@cisco.com>
In-Reply-To: <4A158A03.8020408@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

look at http://issues.apache.org/jira/browse/LUCENE-1567 (New flexible 
query parser)

This new parser allows for internally rewrites/optimizes Query, and it 
is backward compatible.


Preetham Kajekar wrote:
> Hi,
> I am wondering if Lucene internally rewrites/optimizes Query. I am 
> programatically generating Query based on various user options, and 
> quite often I have BooleanQueri'es wrapped inside BooleanQueries etc.
> Like,
> ((Src:Testing Dst:Test) (Src:Test2 Port:http)).
> In this case, would Lucene optimize to remove the unwanted 
> BooleanQueries ? Or more importantly, would these extra BooleanQueries 
> cause any performance problems and should I fix my code to have a 
> better Query ?
>
> Thanks,
> ~preetham
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
-Lafa



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 09:13:32 2009
Return-Path: <java-user-return-40847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27323 invoked from network); 23 Jun 2009 09:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 09:13:31 -0000
Received: (qmail 88538 invoked by uid 500); 23 Jun 2009 09:13:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88467 invoked by uid 500); 23 Jun 2009 09:13:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88457 invoked by uid 99); 23 Jun 2009 09:13:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 09:13:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 09:13:28 +0000
Received: by fxm3 with SMTP id 3so4190806fxm.5
        for <java-user@lucene.apache.org>; Tue, 23 Jun 2009 02:13:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=t6EhtjNKkDyv5j2v4oQy0wa7XAOExM/d8SjfcVEi/2E=;
        b=nzUBNQ6oawydfpf5Xtc9H0kXOv/m3WnGbi5IgrxbTiEduCHkXDtxViE3QyGcFRSTnW
         DVqJgCBzazr6aBTa5YakDUshx5aw4CAUJE5/AxeUS+A3N76hZmkN7Br8sBCXyaV9MYY9
         DnwUI7K09Ii5oDirDahRNbJNOZlHaP0gLuNCg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=A5JoEGUHvO+XqCIAvuqzc2U6q/qEqjjTqmJzA+jtT2YucwbvjMmkbWdjVeAyuMkisV
         7wFrkbbMq8jDJszboJOWKK0HawABbT4PAKtsdifRdM4HGfbdhNcqEJNt8hOV1JDaPNn2
         Tk/0ow/TyIoCcNb7fQjI6PmkBM0cMWOVCbjyc=
MIME-Version: 1.0
Received: by 10.204.71.15 with SMTP id f15mr6954796bkj.113.1245748387878; Tue, 
	23 Jun 2009 02:13:07 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906220224v156bf2f0va8021bbbc4557b5b@mail.gmail.com>
References: <6f4104d80906201032r6c1042ei679fca7ac0ec71d1@mail.gmail.com>
	 <539635.10299.qm@web50306.mail.re2.yahoo.com>
	 <8c4e68610906220209l132febeew5210f021cac4669f@mail.gmail.com>
	 <9ac0c6aa0906220224v156bf2f0va8021bbbc4557b5b@mail.gmail.com>
Date: Tue, 23 Jun 2009 10:13:07 +0100
Message-ID: <6f4104d80906230213w192f351fr8862c177aeefe898@mail.gmail.com>
Subject: Re: Lucene directory copy - master copy to local index
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6de003323961d046d0066c6
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6de003323961d046d0066c6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

Thanks for your replies.  Is there any documentation that I can look at for
using rsync?  I am thinking of creating my own solution (early days) I might
come back to Solr.


Cheers
Amin

On Mon, Jun 22, 2009 at 10:24 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Solr (as of 1.4) is moving to Java only implementation for replication
> (http://wiki.apache.org/solr/SolrReplication).
>
> If you roll your own, make sure to only run rsync at "proper" times
> according to the master, eg, it's probably simplest to close the
> writer on the master before running rsync.  If you don't want to pause
> indexing when copying, then you should use SnapshotDeletionPolicy to
> get the list of files that need copying and pass that list to rsync.
> If you simply rsync whenever you want to, and a writer is open on the
> index, it's easy to get a corrupt copy.
>
> Mike
>
> On Mon, Jun 22, 2009 at 5:09 AM, Ian Lea<ian.lea@gmail.com> wrote:
> > Or if you don't want to use Solr, rsync is very good for this.  Only
> takes
> > changes, takes care of deletions, very robust.  That is what Solr uses.
> >
> > See http://wiki.apache.org/solr/CollectionDistribution for details or
> ideas.
> >
> >
> > --
> > Ian.
> >
> > On Sun, Jun 21, 2009 at 4:32 AM, Otis Gospodnetic <
> > otis_gospodnetic@yahoo.com> wrote:
> >
> >>
> >> Hi Amin,
> >>
> >> Have a look at Solr, it may be what you are after:
> >> http://lucene.apache.org/solr/
> >>
> >> Otis
> >> --
> >> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >>
> >>
> >>
> >> ----- Original Message ----
> >> > From: Amin Mohammed-Coleman <aminmc@gmail.com>
> >> > To: java-user@lucene.apache.org
> >> > Sent: Saturday, June 20, 2009 1:32:18 PM
> >> > Subject: Lucene directory copy - master copy to local index
> >> >
> >> > Hi
> >> > I am prototyping the following situation:
> >> >
> >> > 1) Multiple nodes in a cluster
> >> > 2) Each node has a local index
> >> > 3) Search requests are maded against the local index
> >> > 4) Index updates are sent to a JMS where a master process adds
> document
> >> to
> >> > index
> >> > 5) Each node is configured to check whether the local index is out of
> >> date
> >> > and needs to copy from master index.
> >> >
> >> > I have created a class that will be configured (quartz job) to copy
> >> master
> >> > directory files to the local directory.  I was wondering if I could
> get
> >> > advice on whether this is the best way to copy master directory
> changes
> >> to
> >> > the local.
> >> >
> >> > public class LocalIndexProvider {
> >> >
> >> > private Directory masterDirectory;
> >> >
> >> > private Directory localDirectory;
> >> >
> >> > private final Logger LOGGER = Logger.getLogger(getClass());
> >> >
> >> > public LocalIndexProvider(Directory masterDirectory, Directory
> >> > localDirectory) {
> >> >
> >> > this.masterDirectory  = masterDirectory;
> >> >
> >> > this.localDirectory = localDirectory;
> >> >
> >> > }
> >> >
> >> > public void updateLocalIndex() throws Exception {
> >> >
> >> > StopWatch stopWatch = new StopWatch("copy-time");
> >> >
> >> > stopWatch.start();
> >> >
> >> > String[] masterFiles = masterDirectory.list();
> >> >
> >> > String[] localFiles = localDirectory.list();
> >> >
> >> > Lock lock = localDirectory.getLockFactory().makeLock("test");
> >> >
> >> > lock.obtain();
> >> >
> >> > try {
> >> >
> >> > if (localFiles.length != masterFiles.length) {
> >> >
> >> > Directory.copy(masterDirectory, localDirectory, false);
> >> >
> >> > }
> >> >
> >> > }finally {
> >> >
> >> > lock.release();
> >> >
> >> > }
> >> >
> >> > stopWatch.stop();
> >> >
> >> > LOGGER.debug("total time taken :" + stopWatch.getTotalTimeMillis());
> >> >
> >> > }
> >> >
> >> > }
> >> >
> >> >
> >> >
> >> > The above is just a proof of concept and I am open to any comments
> about
> >> it.
> >> > It may be inefficient or it may be.  I have looked at the source code
> >> from
> >> > hibernate search and it seems as though they copy each file from the
> >> > directory (master to local).  I'm not sure whether this is something I
> >> need
> >> > to do or the above (with more refinement) would be enough.
> >> >
> >> > Any help would be highly appreciated.
> >> >
> >> > Cheers
> >> > Amin
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6de003323961d046d0066c6--

From java-user-return-40848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 09:38:05 2009
Return-Path: <java-user-return-40848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36951 invoked from network); 23 Jun 2009 09:38:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 09:38:05 -0000
Received: (qmail 97295 invoked by uid 500); 23 Jun 2009 09:28:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97275 invoked by uid 500); 23 Jun 2009 09:28:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97264 invoked by uid 99); 23 Jun 2009 09:28:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 09:28:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.201] (HELO web110301.mail.gq1.yahoo.com) (67.195.8.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Jun 2009 09:28:01 +0000
Received: (qmail 64131 invoked by uid 60001); 23 Jun 2009 09:27:39 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245749259; bh=E/QjFRknqkEa/tAopr2MggGr7ix3Z6qncwg+eAS8HTs=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=WoLIGMBtAAPvwiDGJC4XJxUqcIButG5ysnUom5HiBlECeA1LQWn4hqNrRIgSUB3ppHFUxCT+eEdD4KwPld6AFY0YzpD7skRPrXlj911ZELZlWaTKbKj76uV6SgmDiF6bbm0QnNrI+sFc3ekNM29/8dIinKi3V9F2Py4RGAq6xiE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=evxloHiECc4d71HITJgR292YRHcIIOBpr4kUnDMsc4vdpolXlxIxIM55lSCn4Si1u8CMfdg23i/yQ5PabyNo4Cta/jeKaxDhjUg0OQJ4vOMQdoM5U4CLCz/LbdspbKrCziMX2UwD+fsIav+PqH5wBncp9kFif/n+kaVqSzvyzgI=;
Message-ID: <754804.63080.qm@web110301.mail.gq1.yahoo.com>
X-YMail-OSG: h5sKTRwVM1kN3Wwo6pTWizuMQ69vtp_t3hHR9RYtYOCIMCcv.gplzrxtRYXWieX3whVKuxV1IXu.mQ3Fua6MqNfv.1R1MPoTqFs1_GEIkUekXDBhqQ.sFvuOF4xxO0aRxGF1OO5g3chcJC9kJnQldbCHCyYp0lMY0a2mS6c8xf_4C2BzAsdwP_bDVSKqeuyjuhRZGhdFVnZHpRRRwx6WLqnzleSbuLernVdpwXzJAvCzgPwuwFWU5AYU3oVzEIRf709969ILJkNRfh4.wUuQg7IlnxC8RjEpbuNDZgggJqmQ3NvicsP.IBHp24u624aLPYhiitN2xC85
Received: from [116.197.178.83] by web110301.mail.gq1.yahoo.com via HTTP; Tue, 23 Jun 2009 02:27:39 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
Date: Tue, 23 Jun 2009 02:27:39 -0700 (PDT)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Subject: Similarity
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Of the late I started using Lucene as main search library for all documents in our intranet. It works extremely well. I am trying to use similarity kinda functionality to find similarity between two sentences/documents and trying to use Wordnet in our searching solution. I have used wordnet contrib package and it really works well to expand queries with synonyms and get results. But I can get handicap when searching for documents with query like "Steve Jobs" and documents containing "apple" should be returned. In the same way "pirated" and "willfull downloading copyrighted material". This comes finding meaning of a word wrt its context. Has anybody done any kind of such context based indexing that means while tokenization based on context of each word/token and searching the same after expanding the query using synonyms. I have come across some sf projects like http://wn-similarity.sourceforge.net/  to semantically relating words using wordnet but I am
 still kinda confused on how to move ahead with such kind of context based search. Appreciate your help. I understand that this might not be directly related to Lucene but somehow this falls in the same domain search solution. 

- RB


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 09:38:16 2009
Return-Path: <java-user-return-40849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38619 invoked from network); 23 Jun 2009 09:38:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 09:38:15 -0000
Received: (qmail 2955 invoked by uid 500); 23 Jun 2009 09:37:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2789 invoked by uid 500); 23 Jun 2009 09:37:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2734 invoked by uid 99); 23 Jun 2009 09:36:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 09:36:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 09:36:10 +0000
Received: by fxm3 with SMTP id 3so4212845fxm.5
        for <java-user@lucene.apache.org>; Tue, 23 Jun 2009 02:35:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=xkMT4WHEMfjFuCB08NaBs2wP3L2izmqKM9liMRc+CqQ=;
        b=h96w9N8xdBhnuKyyEHghqSjXC/E/ja+a7iKvVUAzfnpYg7G/Tdeauzieko+E2Q9qy1
         y5MyYf4hZOuq1TP3w2DFBSQgi/A76wtpWRmzIimzbUdHm9Zim6ufSyNTDiYrZ8BodWMC
         YDMCxlPDa8/QWBx3hZvsZkMLocX1nuLBq5PxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lwPjK88K7/T4CsVLhBg3Afjg6DEX3kfQcqJ3+dnaBQKJxAHRSoWSYIGS613jgcudU/
         dup0kYgtsb45q/Hu9lvc7jhLIjqdikf1Y9jyGJw9Tut7swCWbPH2uMMTenO7YQ38YPA/
         D5SNbjmNVXfzsUGoUG5whe+RA3GCmdcCkBRZ4=
MIME-Version: 1.0
Received: by 10.204.116.69 with SMTP id l5mr7038280bkq.102.1245749749124; Tue, 
	23 Jun 2009 02:35:49 -0700 (PDT)
In-Reply-To: <6f4104d80906230213w192f351fr8862c177aeefe898@mail.gmail.com>
References: <6f4104d80906201032r6c1042ei679fca7ac0ec71d1@mail.gmail.com>
	 <539635.10299.qm@web50306.mail.re2.yahoo.com>
	 <8c4e68610906220209l132febeew5210f021cac4669f@mail.gmail.com>
	 <9ac0c6aa0906220224v156bf2f0va8021bbbc4557b5b@mail.gmail.com>
	 <6f4104d80906230213w192f351fr8862c177aeefe898@mail.gmail.com>
Date: Tue, 23 Jun 2009 10:35:49 +0100
Message-ID: <6f4104d80906230235m7b707b1ex1c0912cd53673c92@mail.gmail.com>
Subject: Re: Lucene directory copy - master copy to local index
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d460b8468ef2046d00b716
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d460b8468ef2046d00b716
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

Sorry for sending the below..what I meant to say was is there any
documentation that I can be pointed to with using lucene and rsync?  I been
up since 2am so brain slowing down really quickly...

Cheers
Amin

On Tue, Jun 23, 2009 at 10:13 AM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
> Thanks for your replies.  Is there any documentation that I can look at for
> using rsync?  I am thinking of creating my own solution (early days) I might
> come back to Solr.
>
>
> Cheers
> Amin
>
>
> On Mon, Jun 22, 2009 at 10:24 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> Solr (as of 1.4) is moving to Java only implementation for replication
>> (http://wiki.apache.org/solr/SolrReplication).
>>
>> If you roll your own, make sure to only run rsync at "proper" times
>> according to the master, eg, it's probably simplest to close the
>> writer on the master before running rsync.  If you don't want to pause
>> indexing when copying, then you should use SnapshotDeletionPolicy to
>> get the list of files that need copying and pass that list to rsync.
>> If you simply rsync whenever you want to, and a writer is open on the
>> index, it's easy to get a corrupt copy.
>>
>> Mike
>>
>> On Mon, Jun 22, 2009 at 5:09 AM, Ian Lea<ian.lea@gmail.com> wrote:
>> > Or if you don't want to use Solr, rsync is very good for this.  Only
>> takes
>> > changes, takes care of deletions, very robust.  That is what Solr uses.
>> >
>> > See http://wiki.apache.org/solr/CollectionDistribution for details or
>> ideas.
>> >
>> >
>> > --
>> > Ian.
>> >
>> > On Sun, Jun 21, 2009 at 4:32 AM, Otis Gospodnetic <
>> > otis_gospodnetic@yahoo.com> wrote:
>> >
>> >>
>> >> Hi Amin,
>> >>
>> >> Have a look at Solr, it may be what you are after:
>> >> http://lucene.apache.org/solr/
>> >>
>> >> Otis
>> >> --
>> >> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>> >>
>> >>
>> >>
>> >> ----- Original Message ----
>> >> > From: Amin Mohammed-Coleman <aminmc@gmail.com>
>> >> > To: java-user@lucene.apache.org
>> >> > Sent: Saturday, June 20, 2009 1:32:18 PM
>> >> > Subject: Lucene directory copy - master copy to local index
>> >> >
>> >> > Hi
>> >> > I am prototyping the following situation:
>> >> >
>> >> > 1) Multiple nodes in a cluster
>> >> > 2) Each node has a local index
>> >> > 3) Search requests are maded against the local index
>> >> > 4) Index updates are sent to a JMS where a master process adds
>> document
>> >> to
>> >> > index
>> >> > 5) Each node is configured to check whether the local index is out of
>> >> date
>> >> > and needs to copy from master index.
>> >> >
>> >> > I have created a class that will be configured (quartz job) to copy
>> >> master
>> >> > directory files to the local directory.  I was wondering if I could
>> get
>> >> > advice on whether this is the best way to copy master directory
>> changes
>> >> to
>> >> > the local.
>> >> >
>> >> > public class LocalIndexProvider {
>> >> >
>> >> > private Directory masterDirectory;
>> >> >
>> >> > private Directory localDirectory;
>> >> >
>> >> > private final Logger LOGGER = Logger.getLogger(getClass());
>> >> >
>> >> > public LocalIndexProvider(Directory masterDirectory, Directory
>> >> > localDirectory) {
>> >> >
>> >> > this.masterDirectory  = masterDirectory;
>> >> >
>> >> > this.localDirectory = localDirectory;
>> >> >
>> >> > }
>> >> >
>> >> > public void updateLocalIndex() throws Exception {
>> >> >
>> >> > StopWatch stopWatch = new StopWatch("copy-time");
>> >> >
>> >> > stopWatch.start();
>> >> >
>> >> > String[] masterFiles = masterDirectory.list();
>> >> >
>> >> > String[] localFiles = localDirectory.list();
>> >> >
>> >> > Lock lock = localDirectory.getLockFactory().makeLock("test");
>> >> >
>> >> > lock.obtain();
>> >> >
>> >> > try {
>> >> >
>> >> > if (localFiles.length != masterFiles.length) {
>> >> >
>> >> > Directory.copy(masterDirectory, localDirectory, false);
>> >> >
>> >> > }
>> >> >
>> >> > }finally {
>> >> >
>> >> > lock.release();
>> >> >
>> >> > }
>> >> >
>> >> > stopWatch.stop();
>> >> >
>> >> > LOGGER.debug("total time taken :" + stopWatch.getTotalTimeMillis());
>> >> >
>> >> > }
>> >> >
>> >> > }
>> >> >
>> >> >
>> >> >
>> >> > The above is just a proof of concept and I am open to any comments
>> about
>> >> it.
>> >> > It may be inefficient or it may be.  I have looked at the source code
>> >> from
>> >> > hibernate search and it seems as though they copy each file from the
>> >> > directory (master to local).  I'm not sure whether this is something
>> I
>> >> need
>> >> > to do or the above (with more refinement) would be enough.
>> >> >
>> >> > Any help would be highly appreciated.
>> >> >
>> >> > Cheers
>> >> > Amin
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--0016e6d460b8468ef2046d00b716--

From java-user-return-40850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 09:50:56 2009
Return-Path: <java-user-return-40850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45187 invoked from network); 23 Jun 2009 09:50:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 09:50:56 -0000
Received: (qmail 36470 invoked by uid 500); 23 Jun 2009 09:51:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36437 invoked by uid 500); 23 Jun 2009 09:51:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36427 invoked by uid 99); 23 Jun 2009 09:51:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 09:51:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shashi.mit@gmail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 09:50:56 +0000
Received: by yxe12 with SMTP id 12so283229yxe.29
        for <java-user@lucene.apache.org>; Tue, 23 Jun 2009 02:50:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=R75ZRf7UGLW4RMlwTpgv2thSjqR4ZcEm68d0FT3ztOo=;
        b=eRi7+T4sYDRT9FrTBBvAM3NJt6FlCGNz/tLF9yNx0tXCLDEPuZxOUB+15gRHrH8BiL
         9p8OIm3SFzdjGp61/4UXWc1yvC47mq0Dr2tozL1A8NJghldzEMLpGgvVZlOBo1HjBP+j
         LtZEXFWx5wUFtHZi0AXIaSUnaovoTl/PAmI+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=msT9S+SplKIUTVf6w/ZUbroYGsmasx39cppoN1z9jIWrr1yx7SO/pOplXVi5y69DHz
         gpdgCHwMARpsHqRm5AX7LhFurBCjFF7JTfHPdnCpi6ubjQ6YUZibaGKY16U8q8W6qFwB
         8YdYxfT1VW5JgMKR1mk9qS7DzhyeRiJhpsA5M=
MIME-Version: 1.0
Received: by 10.150.152.3 with SMTP id z3mr13341582ybd.90.1245750636069; Tue, 
	23 Jun 2009 02:50:36 -0700 (PDT)
In-Reply-To: <754804.63080.qm@web110301.mail.gq1.yahoo.com>
References: <754804.63080.qm@web110301.mail.gq1.yahoo.com>
From: Shashi Kant <shashi.mit@gmail.com>
Date: Tue, 23 Jun 2009 05:50:16 -0400
Message-ID: <4d19a3630906230250t4febd49arffacb33e750995b2@mail.gmail.com>
Subject: Re: Similarity
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd3f8ac24451c046d00ec48
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd3f8ac24451c046d00ec48
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I suspect what you are looking for is "Latent Semantics" - it can
algorithmically infer that "iPod~iPhone" or "Apple~Steve Jobs". Google for
"Latent Semantic Indexing" or "Latent Semantic Analysis" - you can apply
some of those approaches using the TermVectors in Lucene index.
Ontologies such as WordNet are very generic, hence if you have a domain
specific corpus, you would need to generate some kind of Latent Semantic
Index to extract the relations therein.




On Tue, Jun 23, 2009 at 5:27 AM, Cool The Breezer
<techcool.kumar@yahoo.com>wrote:

>
> Of the late I started using Lucene as main search library for all documents
> in our intranet. It works extremely well. I am trying to use similarity
> kinda functionality to find similarity between two sentences/documents and
> trying to use Wordnet in our searching solution. I have used wordnet contrib
> package and it really works well to expand queries with synonyms and get
> results. But I can get handicap when searching for documents with query like
> "Steve Jobs" and documents containing "apple" should be returned. In the
> same way "pirated" and "willfull downloading copyrighted material". This
> comes finding meaning of a word wrt its context. Has anybody done any kind
> of such context based indexing that means while tokenization based on
> context of each word/token and searching the same after expanding the query
> using synonyms. I have come across some sf projects like
> http://wn-similarity.sourceforge.net/  to semantically relating words
> using wordnet but I am
>  still kinda confused on how to move ahead with such kind of context based
> search. Appreciate your help. I understand that this might not be directly
> related to Lucene but somehow this falls in the same domain search solution.
>
> - RB
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd3f8ac24451c046d00ec48--

From java-user-return-40851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 10:09:29 2009
Return-Path: <java-user-return-40851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53511 invoked from network); 23 Jun 2009 10:09:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 10:09:29 -0000
Received: (qmail 58962 invoked by uid 500); 23 Jun 2009 10:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58895 invoked by uid 500); 23 Jun 2009 10:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58885 invoked by uid 99); 23 Jun 2009 10:09:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 10:09:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 10:09:28 +0000
Received: by fg-out-1718.google.com with SMTP id l27so812028fgb.4
        for <java-user@lucene.apache.org>; Tue, 23 Jun 2009 03:09:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=duwuVUmp8RRNC3fT2DPrEkhz7pE4ZCrvIoM3+84bz9o=;
        b=dNOzkG3piGQikq+F7REBrDv/Ni/0Pvjq2lI5rvQHzgPB40+wp0GTSh2bIQyCxUVgkr
         R+kfabm9NMDr2zYiuXYlE38INMQe7TMarimM+bCZz5X/oB9vJ1+sBSfwaHETVYUOlw3P
         scJFPoV+HzOYSZYHb1GbrV6hstyw7VePLIC24=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rwQFbm/nqaEJvj9MeTDcGQJIjYL0LfSy6V4IfykEkjGT6OQVAhGPw3pCB+Yvy7U6ed
         Rdl31W1qI0qN/9kx3qOVh8bVEdzeMMlgVsK8cNvvWZ0d/5eBxQSXE95kNGFjxEGNN2Wo
         egEq5Ei9v+F886aqLNhZKLL5/fyx90AWORna8=
MIME-Version: 1.0
Received: by 10.86.3.11 with SMTP id 11mr8137193fgc.11.1245751746414; Tue, 23 
	Jun 2009 03:09:06 -0700 (PDT)
In-Reply-To: <6f4104d80906230235m7b707b1ex1c0912cd53673c92@mail.gmail.com>
References: <6f4104d80906201032r6c1042ei679fca7ac0ec71d1@mail.gmail.com> 
	<539635.10299.qm@web50306.mail.re2.yahoo.com> <8c4e68610906220209l132febeew5210f021cac4669f@mail.gmail.com> 
	<9ac0c6aa0906220224v156bf2f0va8021bbbc4557b5b@mail.gmail.com> 
	<6f4104d80906230213w192f351fr8862c177aeefe898@mail.gmail.com> 
	<6f4104d80906230235m7b707b1ex1c0912cd53673c92@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 23 Jun 2009 11:08:46 +0100
Message-ID: <8c4e68610906230308s384c8756q345caf2a0eae7fc@mail.gmail.com>
Subject: Re: Lucene directory copy - master copy to local index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd247a452c8dd046d012ef8
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd247a452c8dd046d012ef8
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi


You could look at the Solr scripts, I guess (the ones that use rsync, not
new java only method).

But it isn't that hard.  See the rsync docs for options and how to get it up
and running (email me off list if you like - that has nothing to do with
lucene) then you need to fire off an rsync copy at the right time.  Mike is
right of course in that you need to tie it in with your indexing job so that
you only copy indexes in known, consistent states.

One way would be for your master updater process to close the index writer
after every n updates or every x minutes or y hours, or whatever makes sense
for you, run rsync, then start updating again.  Your search slaves can check
index version or be notified directly or, again, whatever makes sense for
you.

Hope that helps.


--
Ian.

On Tue, Jun 23, 2009 at 10:35 AM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

Hi

>
> Sorry for sending the below..what I meant to say was is there any
> documentation that I can be pointed to with using lucene and rsync?  I been
> up since 2am so brain slowing down really quickly...
>
> Cheers
> Amin
>
> On Tue, Jun 23, 2009 at 10:13 AM, Amin Mohammed-Coleman <aminmc@gmail.com
> >wrote:
>
> > Hi
> >
> > Thanks for your replies.  Is there any documentation that I can look at
> for
> > using rsync?  I am thinking of creating my own solution (early days) I
> might
> > come back to Solr.
> >
> >
> > Cheers
> > Amin
> >
> >
> > On Mon, Jun 22, 2009 at 10:24 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> Solr (as of 1.4) is moving to Java only implementation for replication
> >> (http://wiki.apache.org/solr/SolrReplication).
> >>
> >> If you roll your own, make sure to only run rsync at "proper" times
> >> according to the master, eg, it's probably simplest to close the
> >> writer on the master before running rsync.  If you don't want to pause
> >> indexing when copying, then you should use SnapshotDeletionPolicy to
> >> get the list of files that need copying and pass that list to rsync.
> >> If you simply rsync whenever you want to, and a writer is open on the
> >> index, it's easy to get a corrupt copy.
> >>
> >> Mike
> >>
> >> On Mon, Jun 22, 2009 at 5:09 AM, Ian Lea<ian.lea@gmail.com> wrote:
> >> > Or if you don't want to use Solr, rsync is very good for this.  Only
> >> takes
> >> > changes, takes care of deletions, very robust.  That is what Solr
> uses.
> >> >
> >> > See http://wiki.apache.org/solr/CollectionDistribution for details or
> >> ideas.
> >> >
> >> >
> >> > --
> >> > Ian.
> >> >
> >> > On Sun, Jun 21, 2009 at 4:32 AM, Otis Gospodnetic <
> >> > otis_gospodnetic@yahoo.com> wrote:
> >> >
> >> >>
> >> >> Hi Amin,
> >> >>
> >> >> Have a look at Solr, it may be what you are after:
> >> >> http://lucene.apache.org/solr/
> >> >>
> >> >> Otis
> >> >> --
> >> >> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >> >>
> >> >>
> >> >>
> >> >> ----- Original Message ----
> >> >> > From: Amin Mohammed-Coleman <aminmc@gmail.com>
> >> >> > To: java-user@lucene.apache.org
> >> >> > Sent: Saturday, June 20, 2009 1:32:18 PM
> >> >> > Subject: Lucene directory copy - master copy to local index
> >> >> >
> >> >> > Hi
> >> >> > I am prototyping the following situation:
> >> >> >
> >> >> > 1) Multiple nodes in a cluster
> >> >> > 2) Each node has a local index
> >> >> > 3) Search requests are maded against the local index
> >> >> > 4) Index updates are sent to a JMS where a master process adds
> >> document
> >> >> to
> >> >> > index
> >> >> > 5) Each node is configured to check whether the local index is out
> of
> >> >> date
> >> >> > and needs to copy from master index.
> >> >> >
> >> >> > I have created a class that will be configured (quartz job) to copy
> >> >> master
> >> >> > directory files to the local directory.  I was wondering if I could
> >> get
> >> >> > advice on whether this is the best way to copy master directory
> >> changes
> >> >> to
> >> >> > the local.
> >> >> >
> >> >> > public class LocalIndexProvider {
> >> >> >
> >> >> > private Directory masterDirectory;
> >> >> >
> >> >> > private Directory localDirectory;
> >> >> >
> >> >> > private final Logger LOGGER = Logger.getLogger(getClass());
> >> >> >
> >> >> > public LocalIndexProvider(Directory masterDirectory, Directory
> >> >> > localDirectory) {
> >> >> >
> >> >> > this.masterDirectory  = masterDirectory;
> >> >> >
> >> >> > this.localDirectory = localDirectory;
> >> >> >
> >> >> > }
> >> >> >
> >> >> > public void updateLocalIndex() throws Exception {
> >> >> >
> >> >> > StopWatch stopWatch = new StopWatch("copy-time");
> >> >> >
> >> >> > stopWatch.start();
> >> >> >
> >> >> > String[] masterFiles = masterDirectory.list();
> >> >> >
> >> >> > String[] localFiles = localDirectory.list();
> >> >> >
> >> >> > Lock lock = localDirectory.getLockFactory().makeLock("test");
> >> >> >
> >> >> > lock.obtain();
> >> >> >
> >> >> > try {
> >> >> >
> >> >> > if (localFiles.length != masterFiles.length) {
> >> >> >
> >> >> > Directory.copy(masterDirectory, localDirectory, false);
> >> >> >
> >> >> > }
> >> >> >
> >> >> > }finally {
> >> >> >
> >> >> > lock.release();
> >> >> >
> >> >> > }
> >> >> >
> >> >> > stopWatch.stop();
> >> >> >
> >> >> > LOGGER.debug("total time taken :" +
> stopWatch.getTotalTimeMillis());
> >> >> >
> >> >> > }
> >> >> >
> >> >> > }
> >> >> >
> >> >> >
> >> >> >
> >> >> > The above is just a proof of concept and I am open to any comments
> >> about
> >> >> it.
> >> >> > It may be inefficient or it may be.  I have looked at the source
> code
> >> >> from
> >> >> > hibernate search and it seems as though they copy each file from
> the
> >> >> > directory (master to local).  I'm not sure whether this is
> something
> >> I
> >> >> need
> >> >> > to do or the above (with more refinement) would be enough.
> >> >> >
> >> >> > Any help would be highly appreciated.
> >> >> >
> >> >> > Cheers
> >> >> > Amin
> >> >>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>

--000e0cd247a452c8dd046d012ef8--

From java-user-return-40852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 10:38:58 2009
Return-Path: <java-user-return-40852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67302 invoked from network); 23 Jun 2009 10:38:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 10:38:58 -0000
Received: (qmail 93457 invoked by uid 500); 23 Jun 2009 10:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93368 invoked by uid 500); 23 Jun 2009 10:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93358 invoked by uid 99); 23 Jun 2009 10:39:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 10:39:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 10:38:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MJ3Oe-0005KY-1a
	for java-user@lucene.apache.org; Tue, 23 Jun 2009 03:38:36 -0700
Message-ID: <24163558.post@talk.nabble.com>
Date: Tue, 23 Jun 2009 03:38:36 -0700 (PDT)
From: Raimon Bosch <raimon.bosch@gmail.com>
To: java-user@lucene.apache.org
Subject: ScoreDocComparator to FieldComparator
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: raimon.bosch@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org



Hi!

We are doing a migration from ScoreDocComparator to FieldComparator in order
to get better performance and try its new features. I was wondering how we
can acces to ScoreDoc's of a document inside FieldComparator. Can we use 
FieldComparator as ScoreDocComparator?

Thanks in advance,
Raimon Bosch.
-- 
View this message in context: http://www.nabble.com/ScoreDocComparator-to-FieldComparator-tp24163558p24163558.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 10:56:15 2009
Return-Path: <java-user-return-40853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70209 invoked from network); 23 Jun 2009 10:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 10:56:15 -0000
Received: (qmail 9269 invoked by uid 500); 23 Jun 2009 10:56:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9194 invoked by uid 500); 23 Jun 2009 10:56:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9184 invoked by uid 99); 23 Jun 2009 10:56:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 10:56:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 10:56:15 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1538375ywt.5
        for <java-user@lucene.apache.org>; Tue, 23 Jun 2009 03:55:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.121.13 with SMTP id y13mr13444982ybm.211.1245754554435; 
	Tue, 23 Jun 2009 03:55:54 -0700 (PDT)
In-Reply-To: <7A5CB4A7BBCE0C40B81C5145C326C31301A62971@NUMEVP06.na.imtn.com>
References: <7A5CB4A7BBCE0C40B81C5145C326C31301A62971@NUMEVP06.na.imtn.com>
Date: Tue, 23 Jun 2009 06:55:54 -0400
Message-ID: <9ac0c6aa0906230355j3d5a7484p58373099a9ba961e@mail.gmail.com>
Subject: Re: SegmentReader retaining memory
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I agree we should do something about this.  Actually I think we should
simply remove finalize() from Directory[Index]Reader.

Can you open a Jira issue?  Thanks.

Mike

On Mon, Jun 22, 2009 at 6:32 PM, Groose,
Brian<Brian.Groose@ironmountain.com> wrote:
> In the application I'm working on, I'm opening a new index every 15-20
> minutes. =A0This is done by opening the new index and then closing the ol=
d
> index.
>
> Opening one of these indexes, about 58GB on disk, appears to use about
> 700MB of memory based on some simple testing. I am passing -Xmx3072m to
> the JVM.
>
> I've run into some OutOfMemoryErrors, and looking at the heap dump that
> was generated, I see three ReadOnlyMultiSegmentReaders, each one
> referencing roughly 700MB of heap:
> - One is referenced as the currently in-use index.
> - One is being opened and a simple query is running to force the terms
> to be cached in RAM.
> - One is only referenced by the Finalizer thread.
>
> I definitely have an issue where GC isn't keeping up, but I'm a bit
> concerned that a class (DirectoryIndexReader) that has a finalize()
> method is referencing so much memory and delaying GC of that memory
> until the finalizer can get around to it. =A0Has anyone else run into an
> issue like this?
>
> It seems like SegmentReader.doClose() could null out its TermInfosReader
> to make the large amount of cached terms available for GC much sooner
> and not reliant on the finalizer.
>
> I'm using Lucene 2.4.1 with Sun's JDK 6 update 12, 64-bit, on Debian
> Lenny.
>
> Thanks,
> Brian
> The information contained in this email message and its attachments
> is intended
> only for the private and confidential use of the recipient(s) named
> above, unless the sender expressly agrees otherwise. Transmission
> of email over the Internet
> =A0is not a secure communications medium. If you are requesting or
> have requested
> the transmittal of personal data, as defined in applicable privacy
> laws by means
> =A0of email or in an attachment to email you must select a more
> secure alternate means of transmittal that supports your
> obligations to protect such personal data. If the reader of this
> message is not the intended recipient and/or you have received this
> email in error, you must take no action based on the information in
> this email and you are hereby notified that any dissemination,
> misuse, copying, or disclosure of this communication is strictly
> prohibited. If you have received
> this communication in error, please notify us immediately by email
> and delete the original message.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 10:56:23 2009
Return-Path: <java-user-return-40854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70250 invoked from network); 23 Jun 2009 10:56:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 10:56:19 -0000
Received: (qmail 10914 invoked by uid 500); 23 Jun 2009 10:56:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10871 invoked by uid 500); 23 Jun 2009 10:56:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10861 invoked by uid 99); 23 Jun 2009 10:56:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 10:56:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.212] (HELO web110312.mail.gq1.yahoo.com) (67.195.8.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Jun 2009 10:56:18 +0000
Received: (qmail 92183 invoked by uid 60001); 23 Jun 2009 10:55:57 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245754557; bh=g1Lwi/QU7ps+KBYMs/UBD/QIkMAYQxst1PNyXhX7O2E=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=wWl/gJca2Yr+RZ3jTftrBY3/3ZzyXpLhHh3Gh1hrwJk7X7cGzGo+6Ex8kcDmT6nLfuXIUrgDto6+NqN8etfrVbfhM0ghiIGNYBke1ZMn1O8MO/EQcwDCL+pBq/zKz0czQK7LIypsPs1kfGCTztrneoDIoeqSIAKjsnItZksoP5o=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=pzn8COKKFv/tpcMpcpRbffQ9xmOsWDp3sT3nd82/jkTUec1kTgo3IS+yQFzTyd3w9gI0Eqntl7XB42oIHYsyy9tyye/4Xe5EQ08vZGUsqqzWpN/LE4UcY/gZes7dzY4uQIpZ4OR7wvpGRl0odjiQqoccpMf41hBf/RMmPlsSnG4=;
Message-ID: <332894.91357.qm@web110312.mail.gq1.yahoo.com>
X-YMail-OSG: nB8aXmkVM1m0XS7hD0_krMxJLn5uFXgKeIzst51tqdQerxzvou9BLMdR4xt8_DaDx9UJAoAb0PhdYYvf5Klg85UG_Yasqt.RSyA0ajD_g_iqPeiGi1V8RiqPJbmbeY6f2yuG2DXIlHXemttTREFg06lVFR5K6dHr2IFJsxZgtoSpC3t05kjdp6QBFBxQTfk1YMdmgAgZ_mOZ5no24x_QICRSCdDowNmwzofAUwtoTphmQYn82Q0BXQ7bUNltLFcng6KmtRPCEf3e9lKprDUiHBOdbP.aRE.Sy4l42favFgrXj7mWMleoh.Fgx1VX1Sz6en9kIhFg8hmrYIlp8ovVoYJ1mkqD8rW9EbzIQ7kkk3F3DGUP
Received: from [116.197.178.83] by web110312.mail.gq1.yahoo.com via HTTP; Tue, 23 Jun 2009 03:55:57 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
References: <754804.63080.qm@web110301.mail.gq1.yahoo.com> <4d19a3630906230250t4febd49arffacb33e750995b2@mail.gmail.com>
Date: Tue, 23 Jun 2009 03:55:57 -0700 (PDT)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Subject: Re: Similarity
To: java-user@lucene.apache.org
In-Reply-To: <4d19a3630906230250t4febd49arffacb33e750995b2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Shashi,
          I think I am planning or intended to do the same thing as implemented in LSI methodology. It seems from your meesage, you or somebody might have used the LSI approach in lucene. So can you share some of your work. I am more interested to know any library or package or paper used for analyzing terms semantically and constrcuting vector space.

- RB


----- Original Message ----
From: Shashi Kant <shashi.mit@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, June 23, 2009 3:20:16 PM
Subject: Re: Similarity

I suspect what you are looking for is "Latent Semantics" - it can
algorithmically infer that "iPod~iPhone" or "Apple~Steve Jobs". Google for
"Latent Semantic Indexing" or "Latent Semantic Analysis" - you can apply
some of those approaches using the TermVectors in Lucene index.
Ontologies such as WordNet are very generic, hence if you have a domain
specific corpus, you would need to generate some kind of Latent Semantic
Index to extract the relations therein.




On Tue, Jun 23, 2009 at 5:27 AM, Cool The Breezer
<techcool.kumar@yahoo.com>wrote:

>
> Of the late I started using Lucene as main search library for all documents
> in our intranet. It works extremely well. I am trying to use similarity
> kinda functionality to find similarity between two sentences/documents and
> trying to use Wordnet in our searching solution. I have used wordnet contrib
> package and it really works well to expand queries with synonyms and get
> results. But I can get handicap when searching for documents with query like
> "Steve Jobs" and documents containing "apple" should be returned. In the
> same way "pirated" and "willfull downloading copyrighted material". This
> comes finding meaning of a word wrt its context. Has anybody done any kind
> of such context based indexing that means while tokenization based on
> context of each word/token and searching the same after expanding the query
> using synonyms. I have come across some sf projects like
> http://wn-similarity.sourceforge.net/  to semantically relating words
> using wordnet but I am
>  still kinda confused on how to move ahead with such kind of context based
> search. Appreciate your help. I understand that this might not be directly
> related to Lucene but somehow this falls in the same domain search solution.
>
> - RB
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 11:23:56 2009
Return-Path: <java-user-return-40855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76177 invoked from network); 23 Jun 2009 11:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 11:23:56 -0000
Received: (qmail 40112 invoked by uid 500); 23 Jun 2009 11:24:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40041 invoked by uid 500); 23 Jun 2009 11:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40031 invoked by uid 99); 23 Jun 2009 11:24:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 11:24:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shashi.mit@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 11:23:56 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1542982ywt.5
        for <java-user@lucene.apache.org>; Tue, 23 Jun 2009 04:23:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=TY9JFJx2mDQ8tMJSqcLCJDm9KGZgGlfVTdkEpxK0T64=;
        b=oXy4bOBzhszRCisLXTCotPUbs5EmgkcYful17CAIsPRsEFPYLCQVuVv6/Psn/Rmti6
         TgWbjyPdFc5J4ygOaYGYJEfwQIsJE2RAgAfB5NzAKA13H8MjLMx92ILMVXxU4MdA8BC9
         WmyWmGcpKsZbJaNmKT5AAPDic16u+gl+QNUEY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Z7Z1kZh8zT4/GKxaUZ3W6TZX6mxTLD/JOIrVP4GyQ6K3DmdTj3QW0EMQAtzMnBiAQw
         wMrlGuerOEgWsrwm2AAYVoGKSNraaLF6V27M8OANHmrVb27bmTK38ZEoURN6X5lmGqt8
         DTf5jo7OstHUs7DQtkHTbRdLqbz4gdTdy2Wkk=
MIME-Version: 1.0
Received: by 10.151.130.11 with SMTP id h11mr13471275ybn.247.1245755841051; 
	Tue, 23 Jun 2009 04:17:21 -0700 (PDT)
In-Reply-To: <332894.91357.qm@web110312.mail.gq1.yahoo.com>
References: <754804.63080.qm@web110301.mail.gq1.yahoo.com> 
	<4d19a3630906230250t4febd49arffacb33e750995b2@mail.gmail.com> 
	<332894.91357.qm@web110312.mail.gq1.yahoo.com>
From: Shashi Kant <shashi.mit@gmail.com>
Date: Tue, 23 Jun 2009 07:17:01 -0400
Message-ID: <4d19a3630906230417q5394db77u166a57a6f2733396@mail.gmail.com>
Subject: Re: Similarity
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

http://code.google.com/p/semanticvectors/

If you search the archives of this mailing-list, there have been
plenty of discussions in the past about LSI/LSA & Lucene.



On Tue, Jun 23, 2009 at 6:55 AM, Cool The
Breezer<techcool.kumar@yahoo.com> wrote:
>
> Shashi,
> =A0 =A0 =A0 =A0 =A0I think I am planning or intended to do the same thing=
 as implemented in LSI methodology. It seems from your meesage, you or some=
body might have used the LSI approach in lucene. So can you share some of y=
our work. I am more interested to know any library or package or paper used=
 for analyzing terms semantically and constrcuting vector space.
>
> - RB
>
>
> ----- Original Message ----
> From: Shashi Kant <shashi.mit@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, June 23, 2009 3:20:16 PM
> Subject: Re: Similarity
>
> I suspect what you are looking for is "Latent Semantics" - it can
> algorithmically infer that "iPod~iPhone" or "Apple~Steve Jobs". Google fo=
r
> "Latent Semantic Indexing" or "Latent Semantic Analysis" - you can apply
> some of those approaches using the TermVectors in Lucene index.
> Ontologies such as WordNet are very generic, hence if you have a domain
> specific corpus, you would need to generate some kind of Latent Semantic
> Index to extract the relations therein.
>
>
>
>
> On Tue, Jun 23, 2009 at 5:27 AM, Cool The Breezer
> <techcool.kumar@yahoo.com>wrote:
>
>>
>> Of the late I started using Lucene as main search library for all docume=
nts
>> in our intranet. It works extremely well. I am trying to use similarity
>> kinda functionality to find similarity between two sentences/documents a=
nd
>> trying to use Wordnet in our searching solution. I have used wordnet con=
trib
>> package and it really works well to expand queries with synonyms and get
>> results. But I can get handicap when searching for documents with query =
like
>> "Steve Jobs" and documents containing "apple" should be returned. In the
>> same way "pirated" and "willfull downloading copyrighted material". This
>> comes finding meaning of a word wrt its context. Has anybody done any ki=
nd
>> of such context based indexing that means while tokenization based on
>> context of each word/token and searching the same after expanding the qu=
ery
>> using synonyms. I have come across some sf projects like
>> http://wn-similarity.sourceforge.net/ =A0to semantically relating words
>> using wordnet but I am
>> =A0still kinda confused on how to move ahead with such kind of context b=
ased
>> search. Appreciate your help. I understand that this might not be direct=
ly
>> related to Lucene but somehow this falls in the same domain search solut=
ion.
>>
>> - RB
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 16:39:02 2009
Return-Path: <java-user-return-40856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31672 invoked from network); 23 Jun 2009 16:39:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 16:39:02 -0000
Received: (qmail 2468 invoked by uid 500); 23 Jun 2009 16:39:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2388 invoked by uid 500); 23 Jun 2009 16:39:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2378 invoked by uid 99); 23 Jun 2009 16:39:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 16:39:10 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 16:39:01 +0000
Received: by yw-out-2324.google.com with SMTP id 2so78435ywt.5
        for <java-user@lucene.apache.org>; Tue, 23 Jun 2009 09:38:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.217.21 with SMTP id p21mr526083ybg.265.1245775119614; Tue, 
	23 Jun 2009 09:38:39 -0700 (PDT)
In-Reply-To: <24163558.post@talk.nabble.com>
References: <24163558.post@talk.nabble.com>
Date: Tue, 23 Jun 2009 12:38:39 -0400
Message-ID: <9ac0c6aa0906230938w6a592fcvec0dc12b9cfe5d85@mail.gmail.com>
Subject: Re: ScoreDocComparator to FieldComparator
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Probably starting from RelevanceComparator (in FieldComparator.java,
in Lucene's sources) is a good starting point?

Basically you have to hold onto the scorer, and ask it for the score
of each doc, and then record the scores (& docIDs, and anything else
you need to do your comparison) privately.

Mike

On Tue, Jun 23, 2009 at 6:38 AM, Raimon Bosch<raimon.bosch@gmail.com> wrote:
>
>
> Hi!
>
> We are doing a migration from ScoreDocComparator to FieldComparator in order
> to get better performance and try its new features. I was wondering how we
> can acces to ScoreDoc's of a document inside FieldComparator. Can we use
> FieldComparator as ScoreDocComparator?
>
> Thanks in advance,
> Raimon Bosch.
> --
> View this message in context: http://www.nabble.com/ScoreDocComparator-to-FieldComparator-tp24163558p24163558.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 20:53:30 2009
Return-Path: <java-user-return-40857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38348 invoked from network); 23 Jun 2009 20:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 20:53:30 -0000
Received: (qmail 30494 invoked by uid 500); 23 Jun 2009 20:53:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30457 invoked by uid 500); 23 Jun 2009 20:53:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30447 invoked by uid 99); 23 Jun 2009 20:53:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 20:53:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.227 as permitted sender)
Received: from [209.85.218.227] (HELO mail-bw0-f227.google.com) (209.85.218.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 20:53:29 +0000
Received: by bwz27 with SMTP id 27so372568bwz.5
        for <java-user@lucene.apache.org>; Tue, 23 Jun 2009 13:53:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=XUe5quM1A46Xk0KIz8zz+506fZg5NsPYOkuroCuK6AA=;
        b=UNheGN5yJV83jHILk67TsfDr2Ou/GpFUX1w78sf3PHlYEy6ETF0cNNSXzg8kCWhaW7
         aWClDuWviJ1Bq/W/YEs0Mv1Y6DAT3Mq4jbPkCjyVR5KRDOuPPza9legp+PrBlk4hqr/d
         aQk+sz4LtAAvILJ3PjLqe1EQmyKNIP90j30Oc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=FTqcS/idVQm+B2zU3WU98YuJys4rBBUmLut0Cx2yOLwCJZGJR/sJNTZyn3mdkiwYSt
         nTOvDr02dtqBHZubIyd5Q6RiuCPctObmrgCDttF6wpNo1MyXEo4P/1WHx1o/8wsEHI0f
         rBfn1YcUW3FwhIl9OtlEQZ+TVAWwCf7MjGKRg=
MIME-Version: 1.0
Received: by 10.204.51.210 with SMTP id e18mr458550bkg.38.1245790389195; Tue, 
	23 Jun 2009 13:53:09 -0700 (PDT)
Date: Tue, 23 Jun 2009 16:53:09 -0400
Message-ID: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
Subject: Analyzing performance and memory consumption for boolean queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a69c9cd630046d0a2d25
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a69c9cd630046d0a2d25
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Our query performance is surprisingly inconsistent, and I'm trying to figure
out why.  I've realized that I need to better understand what's going on
internally in Lucene when we're searching.  I'd be grateful for any answers
(including pointers to existing docs, if any).

Our situation is this: We have roughly 250 million docs spread across four
indexes.  Each doc has about a dozen fields, all stored and most indexed.
(They're the usual document things like author, date, title, contents,
etc.)  Queries differ in complexity but always have at least a few terms in
boolean combination, up to some larger queries with dozens or even hundreds
of terms combined with ands, ors, nots, and parens.  There's no sorting,
even by relevance: we just want to know what matches.  Query performance is
often sub-second, but not infrequently it can take over 20 seconds (we the
time-limited hit collector, so anything over 20 seconds is stopped).
Obviously the more complex queries are slower on average, but a given query
can sometimes be much slower or much faster.

My assumption is that we're having memory problems or disk utilization
problems or both.  Our app has a 5gb JVM heap on an 8gb server with no other
user processes running, so we shouldn't be paging and should have some room
for Linux disk cache.  The server is lightly loaded and concurrent queries
are the exception rather than the norm.  Two of the four indexes are updated
a few times a day via rsync and subsequently closed and re-opened, but poor
query performance doesn't seem to be correlated with these times.

So, getting to some specific questions:

1) How is the inverted index for a given field structured in terms of what's
in memory and what's on disk?  Is it dynamic, based on available memory, or
tuneable, or fixed?  Is there a rule of thumb that could be used to estimate
how much memory is required per indexed field, based on the number of terms
and documents?  Likewise, is there a rule of thumb to estimate how many disk
accesses are required to retrieve the hits for that field?  (I'm thinking,
by perhaps false analogy, of how a database maintains a b-tree structure
that may reside partially in RAM cache and partially in disk pages.)

2) When boolean queries are searched, is it as simple as iterating the hits
for each ANDed or ORed term and applying the appropriate logical operators
to the results?  For example, is searching for "foo AND bar" pretty much the
same resource-wise as doing two separate searches, and therefore should the
query performance be a linear function of the number the number of search
terms?  Or is there some other caching and/or decision logic (perhaps kind
of like a database's query optimizer) at work here that makes the I/O and
RAM requirements more difficult to model from the query?  (Remember that
we're not doing any sorting.)

I'm hoping that with some of this knowledge, I'll be able to better model
the RAM and I/O usage of the indexes and queries, and thus eventually
understand why things are slow or fast.

Thanks,
Chris

--001636c5a69c9cd630046d0a2d25--

From java-user-return-40858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 23 22:17:25 2009
Return-Path: <java-user-return-40858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78072 invoked from network); 23 Jun 2009 22:17:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jun 2009 22:17:23 -0000
Received: (qmail 13284 invoked by uid 500); 23 Jun 2009 22:17:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13219 invoked by uid 500); 23 Jun 2009 22:17:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13209 invoked by uid 99); 23 Jun 2009 22:17:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 22:17:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.177.145.93] (HELO prxy.net) (209.177.145.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jun 2009 22:17:21 +0000
X-Scanned-By: RAE MPP/ClamAV http://raeinternet.com/mpp
X-Scanned-By: This message was scanned by MPP Free Edition (www.messagepartners.com)!
Received: from [75.26.161.99] (account ken@krugler.org HELO [192.168.1.43])
  by prxy.net (CommuniGate Pro SMTP 4.2.10)
  with ESMTP-TLS id 106885538 for java-user@lucene.apache.org; Tue, 23 Jun 2009 15:18:31 -0700
Mime-Version: 1.0
Message-Id: <p06240809c6670270c70a@[192.168.1.43]>
In-Reply-To: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
Date: Tue, 23 Jun 2009 15:15:40 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Analyzing performance and memory consumption for boolean
 queries
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris,

Others on this list will be able to provide much better optimization 
suggestions, but based on my experience with some large indexes...

1. For search time to vary from < 1 second => 20 seconds, the only 
two things I've seen are:

* Serious JVM garbage collection problems.
* You're in Linux swap hell.

We tracked similar issued down by creating a testbed that let us run 
a set of real-world queries, such that we could trigger these types 
of problems when we had appropriate instrumentation on and recording.

2. 250M/4 = 60M docs/index. The old rule of thumb was 10M docs/index 
as a reasonable size. You might just need more hardware.

3. We had better luck running more JVMs per system, versus one JVM 
with lots of memory. E.g. run 3 32-bit JVMs with 1.5GB/JVM. Though 
this assumes you've got one drive/JVM, to avoid disk contention.

4. I'm assuming, since you don't care about scoring, that you've 
turned of field norms. There are other optimizations you can do to 
speed up query-style searches (find all docs that match X) when you 
don't care about scores, but others on the list are much better 
qualified to provide input in this area.

5. It seems like storing content outside the index helps with 
performance, though I can't say for certain what the impact might be. 
E.g. only store a single unique ID field in the index, and use that 
to access the content (say, from a MapFile) when you're processing 
the matched entries.

6. Having most of the index loaded into the OS cache was the biggest 
single performance win. So if you've got 3 GB of unused memory on a 
server, limiting the size of the index to some low multiple of 3GB 
would be a good target.

-- Ken

>Our query performance is surprisingly inconsistent, and I'm trying to figure
>out why.  I've realized that I need to better understand what's going on
>internally in Lucene when we're searching.  I'd be grateful for any answers
>(including pointers to existing docs, if any).
>
>Our situation is this: We have roughly 250 million docs spread across four
>indexes.  Each doc has about a dozen fields, all stored and most indexed.
>(They're the usual document things like author, date, title, contents,
>etc.)  Queries differ in complexity but always have at least a few terms in
>boolean combination, up to some larger queries with dozens or even hundreds
>of terms combined with ands, ors, nots, and parens.  There's no sorting,
>even by relevance: we just want to know what matches.  Query performance is
>often sub-second, but not infrequently it can take over 20 seconds (we the
>time-limited hit collector, so anything over 20 seconds is stopped).
>Obviously the more complex queries are slower on average, but a given query
>can sometimes be much slower or much faster.
>
>My assumption is that we're having memory problems or disk utilization
>problems or both.  Our app has a 5gb JVM heap on an 8gb server with no other
>user processes running, so we shouldn't be paging and should have some room
>for Linux disk cache.  The server is lightly loaded and concurrent queries
>are the exception rather than the norm.  Two of the four indexes are updated
>a few times a day via rsync and subsequently closed and re-opened, but poor
>query performance doesn't seem to be correlated with these times.
>
>So, getting to some specific questions:
>
>1) How is the inverted index for a given field structured in terms of what's
>in memory and what's on disk?  Is it dynamic, based on available memory, or
>tuneable, or fixed?  Is there a rule of thumb that could be used to estimate
>how much memory is required per indexed field, based on the number of terms
>and documents?  Likewise, is there a rule of thumb to estimate how many disk
>accesses are required to retrieve the hits for that field?  (I'm thinking,
>by perhaps false analogy, of how a database maintains a b-tree structure
>that may reside partially in RAM cache and partially in disk pages.)
>
>2) When boolean queries are searched, is it as simple as iterating the hits
>for each ANDed or ORed term and applying the appropriate logical operators
>to the results?  For example, is searching for "foo AND bar" pretty much the
>same resource-wise as doing two separate searches, and therefore should the
>query performance be a linear function of the number the number of search
>terms?  Or is there some other caching and/or decision logic (perhaps kind
>of like a database's query optimizer) at work here that makes the I/O and
>RAM requirements more difficult to model from the query?  (Remember that
>we're not doing any sorting.)
>
>I'm hoping that with some of this knowledge, I'll be able to better model
>the RAM and I/O usage of the indexes and queries, and thus eventually
>understand why things are slow or fast.
>
>Thanks,
>Chris


-- 
Ken Krugler
+1 530-210-6378

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 03:16:41 2009
Return-Path: <java-user-return-40859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71164 invoked from network); 24 Jun 2009 03:16:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 03:16:41 -0000
Received: (qmail 18183 invoked by uid 500); 24 Jun 2009 03:16:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18038 invoked by uid 500); 24 Jun 2009 03:16:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18028 invoked by uid 99); 24 Jun 2009 03:16:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 03:16:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 03:16:38 +0000
Received: (qmail 54875 invoked by uid 60001); 24 Jun 2009 03:16:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245813376; bh=IVtYWnlafDpIAGT9tJ3WmUDFWnNt+hHXH6+Nh/7Tdzo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=wcsyQ9A4ZIZUr545cJXqik8CPlT9enuP+dZujje69BWhDzdqnYQExEWi9rmUH/0TUvS0JRhmArdPW/QM4knsiwUoegFwDEk7fpqdUqIKbSc+G+X7wBcLusuAs+FBUQ2qRSr/gMgwQGb2ggFu/fsDicQbOb7zxWtu5WzgTZrdk4E=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=xwEolzmcierj1bK9uQ8WSfVYE6ynWaXM5tLlFVr6l8gk0Pnhuc/4/dXlQElF3BPnoXkckRs+hz4OHQiS6sOsp9uRSvKtVpA3q3zc/F6ll2nuKisG8iW2OSOOF7n6VpN/ej5FbuS1Lzz+Bcnddb9fxVV0hT4X4DI2e0r2LqBP3No=;
Message-ID: <788989.53474.qm@web50302.mail.re2.yahoo.com>
X-YMail-OSG: A6lp4GEVM1krzI73k0rgo4tsvMonm.v1Q0JB3ZiWWSO20H65Ks34Mryj6wZaZJaF3aO_n4wm3HL5XmnbdQr.678sTYB8AJSoBieDf8wX.fFU44uo9Dpm5YRaYQbIaRofY8TuhYrosOnAsNUyyB3LSAKpWdut0WCgXlm2ap0srFofFglWGGI7rydKaQ5Cz3OqzsV_3R.Nd4lm6TruG3gOkGEB3TseQFanf7cXTteiKsdsOjFHxNO296MJeSifq9mh33s1agkCGmRG_coYgx8QT99cNPgTou64U5tT86XGK3iWIbaIsiAI64g8QEHc8AYC9NCML.1eKA--
Received: from [74.73.30.59] by web50302.mail.re2.yahoo.com via HTTP; Tue, 23 Jun 2009 20:16:16 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
Date: Tue, 23 Jun 2009 20:16:16 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Analyzing performance and memory consumption for boolean queries
To: java-user@lucene.apache.org
In-Reply-To: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Nigel,

Based on the description, I'd suspect unnecessarily(?) large JVM heap and insufficient RAM for caching the actual index.  Run vmstat while querying the index and watch columns: bi, bo, si, so, wa, and id. :)  If what I said above is correct, then you should see more data loaded from disk during those clow queries and probably a jump in the wa column if you are running multiple concurrent queries.

 Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Nigel <nigelspleen@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, June 23, 2009 4:53:09 PM
> Subject: Analyzing performance and memory consumption for boolean queries
> 
> Our query performance is surprisingly inconsistent, and I'm trying to figure
> out why.  I've realized that I need to better understand what's going on
> internally in Lucene when we're searching.  I'd be grateful for any answers
> (including pointers to existing docs, if any).
> 
> Our situation is this: We have roughly 250 million docs spread across four
> indexes.  Each doc has about a dozen fields, all stored and most indexed.
> (They're the usual document things like author, date, title, contents,
> etc.)  Queries differ in complexity but always have at least a few terms in
> boolean combination, up to some larger queries with dozens or even hundreds
> of terms combined with ands, ors, nots, and parens.  There's no sorting,
> even by relevance: we just want to know what matches.  Query performance is
> often sub-second, but not infrequently it can take over 20 seconds (we the
> time-limited hit collector, so anything over 20 seconds is stopped).
> Obviously the more complex queries are slower on average, but a given query
> can sometimes be much slower or much faster.
> 
> My assumption is that we're having memory problems or disk utilization
> problems or both.  Our app has a 5gb JVM heap on an 8gb server with no other
> user processes running, so we shouldn't be paging and should have some room
> for Linux disk cache.  The server is lightly loaded and concurrent queries
> are the exception rather than the norm.  Two of the four indexes are updated
> a few times a day via rsync and subsequently closed and re-opened, but poor
> query performance doesn't seem to be correlated with these times.
> 
> So, getting to some specific questions:
> 
> 1) How is the inverted index for a given field structured in terms of what's
> in memory and what's on disk?  Is it dynamic, based on available memory, or
> tuneable, or fixed?  Is there a rule of thumb that could be used to estimate
> how much memory is required per indexed field, based on the number of terms
> and documents?  Likewise, is there a rule of thumb to estimate how many disk
> accesses are required to retrieve the hits for that field?  (I'm thinking,
> by perhaps false analogy, of how a database maintains a b-tree structure
> that may reside partially in RAM cache and partially in disk pages.)
> 
> 2) When boolean queries are searched, is it as simple as iterating the hits
> for each ANDed or ORed term and applying the appropriate logical operators
> to the results?  For example, is searching for "foo AND bar" pretty much the
> same resource-wise as doing two separate searches, and therefore should the
> query performance be a linear function of the number the number of search
> terms?  Or is there some other caching and/or decision logic (perhaps kind
> of like a database's query optimizer) at work here that makes the I/O and
> RAM requirements more difficult to model from the query?  (Remember that
> we're not doing any sorting.)
> 
> I'm hoping that with some of this knowledge, I'll be able to better model
> the RAM and I/O usage of the indexes and queries, and thus eventually
> understand why things are slow or fast.
> 
> Thanks,
> Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 07:33:40 2009
Return-Path: <java-user-return-40860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48851 invoked from network); 24 Jun 2009 07:33:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 07:33:40 -0000
Received: (qmail 6906 invoked by uid 500); 24 Jun 2009 07:33:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6820 invoked by uid 500); 24 Jun 2009 07:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6809 invoked by uid 99); 24 Jun 2009 07:33:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 07:33:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 07:33:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id DCD9645E886
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 09:33:14 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id nbb3NAquKhiA for <java-user@lucene.apache.org>;
	Wed, 24 Jun 2009 09:33:11 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A413A45E885
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 09:33:11 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com> <p06240809c6670270c70a@[192.168.1.43]>
Subject: RE: Analyzing performance and memory consumption for boolean queries
Date: Wed, 24 Jun 2009 09:33:08 +0200
Message-ID: <5A007EE2ACD1449297B14DEB2CE02C9B@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <p06240809c6670270c70a@[192.168.1.43]>
Thread-Index: Acn0UG/6es5uefT0Q/CI9Sf0pDz0aQAS/kZQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

> 1. For search time to vary from < 1 second => 20 seconds, the only
> two things I've seen are:
> 
> * Serious JVM garbage collection problems.
> * You're in Linux swap hell.
> 
> We tracked similar issued down by creating a testbed that let us run
> a set of real-world queries, such that we could trigger these types
> of problems when we had appropriate instrumentation on and recording.

I had similar problems with our configuration, too. Suddenly sometimes the
server even did not respond. The problem was (I think is the same here): the
GC. The standard Java GC is not multithreaded, so if you have lots of
traffic at some time, the JVM halts all threads and starts to GC, which can
take very long time with so big heap sizes.

On our server with indexes of similar disk space size (not documents), I
changed the JVM options to use:

-Xms4096M -Xmx8192M -XX:MaxPermSize=512M -Xrs -XX:+UseConcMarkSweepGC
-XX:+UseParNewGC -verbosegc -XX:+PrintGCDetails -XX:+UseLargePages

This also turns on GC debugging and the ParNewGC and ConcMarkSweepGC works
much better here (but please do not simply copy these settings, read about
them in the JVM docs, exact settings depend on your use-case!). I had no
hangs anymore since this change. The JVM prints information about garbage
collection to stderr (which you should study, there is a paper from sun
about it). Our web server (Sun Java System Webserver 7.0, Solaris 10 x64)
also reports the time used in complete for GC, during a server uptime of 11
days it used about 4 hours to GC in parallel threads. This config works good
with multiple CPUs, in our case, one could say: "one CPU is GCing the whole
time" :-)

There is also a howto on the lucid imagination page about different GCs and
Lucene.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 08:09:08 2009
Return-Path: <java-user-return-40861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59849 invoked from network); 24 Jun 2009 08:09:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 08:09:05 -0000
Received: (qmail 57877 invoked by uid 500); 24 Jun 2009 08:09:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57793 invoked by uid 500); 24 Jun 2009 08:09:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57783 invoked by uid 99); 24 Jun 2009 08:09:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 08:09:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 08:09:05 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 10:08:42 +0200
Content-class: urn:content-classes:message
Subject: OutOfMemoryError using IndexWriter
Date: Wed, 24 Jun 2009 10:08:43 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
X-MS-Has-Attach: 
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0ov3xSSJwWA3lSMeUA7HWxG99HQ==
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am using Lucene 2.4.1 to index a database with less than a million =
records. The resulting index is about 50MB in size.
I keep getting an OutOfMemory Error if I re-use the same IndexWriter to =
index the complete database. This is though=20
recommended in the performance hints.
What I now do is, every 10000 Objects I close the index (and every 50 =
close actions optimize it) and create a new
IndexWriter to continue. This process works fine, but to me seems hardly =
the recommended way to go.
I've been using jhat/jmap as well as Netbeans profiler and am fairly =
sure that this is a problem related to Lucene.

Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory =
postings but they all seem closed in Version 2.4.1.

Thanks,

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 08:46:31 2009
Return-Path: <java-user-return-40862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67060 invoked from network); 24 Jun 2009 08:46:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 08:46:31 -0000
Received: (qmail 99479 invoked by uid 500); 24 Jun 2009 08:46:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99402 invoked by uid 500); 24 Jun 2009 08:46:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99392 invoked by uid 99); 24 Jun 2009 08:46:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 08:46:39 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.35] (HELO web27103.mail.ukl.yahoo.com) (217.146.182.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 08:46:30 +0000
Received: (qmail 79700 invoked by uid 60001); 24 Jun 2009 08:46:07 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1245833167; bh=DOr1IFOLP9frWLm7ksqQAdljSYe+16e2Te8Twh03n7Q=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=ByoJBO+kY/jzbDCc0HgO3YWfL4DvBubMv6O1GrB+Man5iUaiLqc+UjB0oLRhtUxkQTjwOv0IYkwJZLGjEQziGBx1CxoHs4Xc2PmnyzZhCOVLMOpque9VcNQuGosFu2zk5TLC6lW/lg5lJtWGfgtQQkgv7BNxryIn4VuqITr4oNc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ZaDv4M1TSgPYXVIDK8PmIqjRQUKISYFXB6WyMM9oaH/a7ya7/ha4ymkcuZIVTNDATIxYQ+7qFJg/3ydA00RtgFdHO28N18EC+cUjZf3In9CuaaLfjAu95OWfcgDJIY4Bg0+P/ykYk1j5Nzy3VwPSPlnYF8wiVeFT5on1X0r6jN8=;
Message-ID: <239745.77275.qm@web27103.mail.ukl.yahoo.com>
X-YMail-OSG: StloJd0VM1kpva2hacIoWuzum2DGcRSWMQYQY7LqjUxJ4Pc3bW9Q1cHKI8yGbpIDNYd0Jd59CIwqh1BEBSehSa8AvtrZm3FAKyhRpTC.vsA6QOq3F6s2qybUPCxpmxKDMFa.GM4jwyvDAaP.Tk46hpkXvLZQfZWoQQlPpS0Et3Ui2hYcYRgTBTzr2KBUkNuHDT527YuEdYN3ArPR_4sCM94gMlvM1f167o2jCh2PQjA8a5jDDELxG6QlErx.55.eGI72l.CC6UBpggKEES_TOzBS2tyyxyxRyucVSiNjIUzH0apMSBk74XCca1F1PoyPhAWnY0i.uqJr4aI.DTnqDOLr
Received: from [62.154.222.235] by web27103.mail.ukl.yahoo.com via HTTP; Wed, 24 Jun 2009 08:46:06 GMT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com> <p06240809c6670270c70a@[192.168.1.43]> <5A007EE2ACD1449297B14DEB2CE02C9B@VEGA>
Date: Wed, 24 Jun 2009 08:46:06 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Analyzing performance and memory consumption for boolean queries
To: java-user@lucene.apache.org
In-Reply-To: <5A007EE2ACD1449297B14DEB2CE02C9B@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


We've also had the same Problem on 150Mio doc setup (Win 2003, java 1.6). A=
fter monitoring response time distribution over time for couple of weeks, i=
t was clear that such long running response times were due to bad warming-u=
p. There were peeks short after index reload (even comprehensive warming-up=
 did not help?! Maybe we did something wrong) ... We did not use relaod(). =
  After loading index into RAMDisk the problems disapeared (proof that this=
 was not gc() related). We have tried MMAP as well, but MMAP had the same p=
roblems (you cannot force OS to load as much as possible into RaM, will soo=
n be possible ). =0A=0AWhat helped us a lot before "RAM luxury" was to give=
 less memory to jvm in order to leave more for OS, lucene is fine with less=
 memory.=0A=0Aremaining long runners happen selten, could be that these are=
 due to the gc()...=0A=0Aas you do not care about scoring, I guess you set =
omitNorms() and omitTf() during indexing for all fields? If not, try this. =
It helps a lot =0A=0Agood luck, =0Aeks =0A=0A=0A=0A=0A----- Original Messag=
e ----=0A> From: Uwe Schindler <uwe@thetaphi.de>=0A> To: java-user@lucene.a=
pache.org=0A> Sent: Wednesday, 24 June, 2009 9:33:08=0A> Subject: RE: Analy=
zing performance and memory consumption for boolean queries=0A> =0A> > 1. F=
or search time to vary from < 1 second =3D> 20 seconds, the only=0A> > two =
things I've seen are:=0A> > =0A> > * Serious JVM garbage collection problem=
s.=0A> > * You're in Linux swap hell.=0A> > =0A> > We tracked similar issue=
d down by creating a testbed that let us run=0A> > a set of real-world quer=
ies, such that we could trigger these types=0A> > of problems when we had a=
ppropriate instrumentation on and recording.=0A> =0A> I had similar problem=
s with our configuration, too. Suddenly sometimes the=0A> server even did n=
ot respond. The problem was (I think is the same here): the=0A> GC. The sta=
ndard Java GC is not multithreaded, so if you have lots of=0A> traffic at s=
ome time, the JVM halts all threads and starts to GC, which can=0A> take ve=
ry long time with so big heap sizes.=0A> =0A> On our server with indexes of=
 similar disk space size (not documents), I=0A> changed the JVM options to =
use:=0A> =0A> -Xms4096M -Xmx8192M -XX:MaxPermSize=3D512M -Xrs -XX:+UseConcM=
arkSweepGC=0A> -XX:+UseParNewGC -verbosegc -XX:+PrintGCDetails -XX:+UseLarg=
ePages=0A> =0A> This also turns on GC debugging and the ParNewGC and ConcMa=
rkSweepGC works=0A> much better here (but please do not simply copy these s=
ettings, read about=0A> them in the JVM docs, exact settings depend on your=
 use-case!). I had no=0A> hangs anymore since this change. The JVM prints i=
nformation about garbage=0A> collection to stderr (which you should study, =
there is a paper from sun=0A> about it). Our web server (Sun Java System We=
bserver 7.0, Solaris 10 x64)=0A> also reports the time used in complete for=
 GC, during a server uptime of 11=0A> days it used about 4 hours to GC in p=
arallel threads. This config works good=0A> with multiple CPUs, in our case=
, one could say: "one CPU is GCing the whole=0A> time" :-)=0A> =0A> There i=
s also a howto on the lucid imagination page about different GCs and=0A> Lu=
cene.=0A> =0A> Uwe=0A> =0A> =0A> ------------------------------------------=
---------------------------=0A> To unsubscribe, e-mail: java-user-unsubscri=
be@lucene.apache.org=0A> For additional commands, e-mail: java-user-help@lu=
cene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 08:49:20 2009
Return-Path: <java-user-return-40863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67707 invoked from network); 24 Jun 2009 08:49:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 08:49:20 -0000
Received: (qmail 8066 invoked by uid 500); 24 Jun 2009 08:49:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8011 invoked by uid 500); 24 Jun 2009 08:49:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8001 invoked by uid 99); 24 Jun 2009 08:49:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 08:49:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 08:49:19 +0000
Received: by gxk11 with SMTP id 11so956693gxk.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 01:48:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.38.19 with SMTP id q19mr2069667ybj.76.1245833337907; Wed, 
	24 Jun 2009 01:48:57 -0700 (PDT)
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
Date: Wed, 24 Jun 2009 04:48:57 -0400
Message-ID: <9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

How large is the RAM buffer that you're giving IndexWriter?  How large
a heap size do you give to JVM?

Can you post one of the OOM exceptions you're hitting?

Mike

On Wed, Jun 24, 2009 at 4:08 AM, stefan<stefan@intermediate.de> wrote:
> Hi,
>
> I am using Lucene 2.4.1 to index a database with less than a million records. The resulting index is about 50MB in size.
> I keep getting an OutOfMemory Error if I re-use the same IndexWriter to index the complete database. This is though
> recommended in the performance hints.
> What I now do is, every 10000 Objects I close the index (and every 50 close actions optimize it) and create a new
> IndexWriter to continue. This process works fine, but to me seems hardly the recommended way to go.
> I've been using jhat/jmap as well as Netbeans profiler and am fairly sure that this is a problem related to Lucene.
>
> Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory postings but they all seem closed in Version 2.4.1.
>
> Thanks,
>
> Stefan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 09:04:29 2009
Return-Path: <java-user-return-40864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73369 invoked from network); 24 Jun 2009 09:04:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 09:04:29 -0000
Received: (qmail 36537 invoked by uid 500); 24 Jun 2009 09:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36480 invoked by uid 500); 24 Jun 2009 09:04:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36470 invoked by uid 99); 24 Jun 2009 09:04:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 09:04:38 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 09:04:28 +0000
Received: (qmail 43453 invoked by uid 60001); 24 Jun 2009 09:04:06 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1245834246; bh=EoZa0hyXb1JuY/9j4UfPVfnuXMz7XlZou7tlNjVbDnQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=GVnybyazpXFlAa/2KlCpchJ/PiF+SLHYeJoU0/D2PM8yEPeDTQUS8nauMX3s31DVennR4Qfrny6std2Bswg7Wz2/sDcf853EZnX5+vGXetXPWfxo/3ip2lCKTETTqhGZx+MauuIQQp5sPyz8NtlMv7FuarkD2h4Zoy2c8YLAhco=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=OKeDSbe8q0jsSvOYvDvCv8NzPDBtkmbHQAeZTxo2zz8rpSfGNIDQ/2SdJ2EKaBqJ0EwPf3wXsosUWk2ml4FD3nNYdZ7n4LSgd2nSdwEAomAHaQKh77uL1YLnx/UVQMwRxTb6PTses9+rwki0R5Sk8Y6FT1e/zu6KiffDAO2pZKk=;
Message-ID: <166718.40323.qm@web27104.mail.ukl.yahoo.com>
X-YMail-OSG: tZ_TEsMVM1l5GfkmAj4e8sib0nWEMlq7QKw1b_yi2GayacdGjH0tvmkfi_hbDDvg3XRZdDpv2cjKkrupOYPCpqcJUoDBYLAxjoPOgpdcpNO9fqnh2h3jnaS1HZVvssuUyL8PZ8.R3VnkqYUpvktxHQbfaqY25ZbLswqNsma0wG60fPHFzQ4n5.3g2_jd8.THbfXYNYVsUE_lmAp1KmmgrseFrknAxAPpe7KB7ZeIvwotZFB2m2QFDs3nFj8XzxirTxsCgrtkTZAvFO4tX_nBlAUAxp7is8C2zhzbrASc0yhDyhrojuJgw1x7HElgqGYdBwE3DVsjOkpLoSD3vDbo0Q--
Received: from [62.225.37.69] by web27104.mail.ukl.yahoo.com via HTTP; Wed, 24 Jun 2009 09:04:05 GMT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com> <p06240809c6670270c70a@[192.168.1.43]>
Date: Wed, 24 Jun 2009 09:04:05 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Analyzing performance and memory consumption for boolean queries
To: java-user@lucene.apache.org
In-Reply-To: <p06240809c6670270c70a@[192.168.1.43]>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


=0Aanother performance tip, waht helps "a lot" is collection sorting before=
 you index. =0A=0Aif you can somehow logically partition your index, you ca=
n improve locality of reference by sorting. =0A=0AWhat I mean by this:=0Aim=
agine index with following fields: zip,  user_group, some text  =0A=0Aif ty=
pical query on this index contains ZIP and user_group as a MUST fields,  by=
 sorting on ZIP, user_group before indexing, you will get an index where Lu=
cene does not have to seek back and forth during search, reducing disk cont=
ention. It is quite ok to sort once in a while... that is a standard trick =
database admins use.=0A=0AThis improved our average response times by almos=
t factor 2 on FSDisk. Of course, depends on your index distribution, but if=
 you have a lot of categorical variables that segment your collection logic=
ally, it is worth trying. =0A=0A=0A =0A=0A> =0A> >Our query performance is =
surprisingly inconsistent, and I'm trying to figure=0A> >out why.  I've rea=
lized that I need to better understand what's going on=0A> >internally in L=
ucene when we're searching.  I'd be grateful for any answers=0A> >(includin=
g pointers to existing docs, if any).=0A> >=0A> >Our situation is this: We =
have roughly 250 million docs spread across four=0A> >indexes.  Each doc ha=
s about a dozen fields, all stored and most indexed.=0A> >(They're the usua=
l document things like author, date, title, contents,=0A> >etc.)  Queries d=
iffer in complexity but always have at least a few terms in=0A> >boolean co=
mbination, up to some larger queries with dozens or even hundreds=0A> >of t=
erms combined with ands, ors, nots, and parens.  There's no sorting,=0A> >e=
ven by relevance: we just want to know what matches.  Query performance is=
=0A> >often sub-second, but not infrequently it can take over 20 seconds (w=
e the=0A> >time-limited hit collector, so anything over 20 seconds is stopp=
ed).=0A> >Obviously the more complex queries are slower on average, but a g=
iven query=0A> >can sometimes be much slower or much faster.=0A> >=0A> >My =
assumption is that we're having memory problems or disk utilization=0A> >pr=
oblems or both.  Our app has a 5gb JVM heap on an 8gb server with no other=
=0A> >user processes running, so we shouldn't be paging and should have som=
e room=0A> >for Linux disk cache.  The server is lightly loaded and concurr=
ent queries=0A> >are the exception rather than the norm.  Two of the four i=
ndexes are updated=0A> >a few times a day via rsync and subsequently closed=
 and re-opened, but poor=0A> >query performance doesn't seem to be correlat=
ed with these times.=0A> >=0A> >So, getting to some specific questions:=0A>=
 >=0A> >1) How is the inverted index for a given field structured in terms =
of what's=0A> >in memory and what's on disk?  Is it dynamic, based on avail=
able memory, or=0A> >tuneable, or fixed?  Is there a rule of thumb that cou=
ld be used to estimate=0A> >how much memory is required per indexed field, =
based on the number of terms=0A> >and documents?  Likewise, is there a rule=
 of thumb to estimate how many disk=0A> >accesses are required to retrieve =
the hits for that field?  (I'm thinking,=0A> >by perhaps false analogy, of =
how a database maintains a b-tree structure=0A> >that may reside partially =
in RAM cache and partially in disk pages.)=0A> >=0A> >2) When boolean queri=
es are searched, is it as simple as iterating the hits=0A> >for each ANDed =
or ORed term and applying the appropriate logical operators=0A> >to the res=
ults?  For example, is searching for "foo AND bar" pretty much the=0A> >sam=
e resource-wise as doing two separate searches, and therefore should the=0A=
> >query performance be a linear function of the number the number of searc=
h=0A> >terms?  Or is there some other caching and/or decision logic (perhap=
s kind=0A> >of like a database's query optimizer) at work here that makes t=
he I/O and=0A> >RAM requirements more difficult to model from the query?  (=
Remember that=0A> >we're not doing any sorting.)=0A> >=0A> >I'm hoping that=
 with some of this knowledge, I'll be able to better model=0A> >the RAM and=
 I/O usage of the indexes and queries, and thus eventually=0A> >understand =
why things are slow or fast.=0A> >=0A> >Thanks,=0A> >Chris=0A> =0A> =0A> --=
 =0A> Ken Krugler=0A> +1 530-210-6378=0A> =0A> ----------------------------=
-----------------------------------------=0A> To unsubscribe, e-mail: java-=
user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: jav=
a-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 09:06:49 2009
Return-Path: <java-user-return-40865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74122 invoked from network); 24 Jun 2009 09:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 09:06:49 -0000
Received: (qmail 43407 invoked by uid 500); 24 Jun 2009 09:06:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43361 invoked by uid 500); 24 Jun 2009 09:06:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43351 invoked by uid 99); 24 Jun 2009 09:06:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 09:06:58 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 09:06:47 +0000
Received: by yxe1 with SMTP id 1so836038yxe.29
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 02:06:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.135.1 with SMTP id m1mr2101206ybn.124.1245834385593; Wed, 
	24 Jun 2009 02:06:25 -0700 (PDT)
In-Reply-To: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
Date: Wed, 24 Jun 2009 05:06:25 -0400
Message-ID: <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
Subject: Re: Analyzing performance and memory consumption for boolean queries
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Is it possible the occasional large merge is clearing out the IO cache
(thus "unwarming" your searcher)?  (Though since you're rsync'ing your
updates in, it sounds like a separate machine is building the index).

Or... linux will happily swap out a process's core in favor of IO
cache (though I'd expect this effect to be much less spikey).  You can
tune "swappiness" to have it not do that:

    http://kerneltrap.org/node/3000

Maybe Lucene's norms/deleted docs/field cache were getting swapped out?

Lucene's postings reside entirely on disk (ie, Lucene doesn't cache
those in RAM; we rely on the OS's IO cache).  Lucene does a linear
scan through the terms in the query... Linux will readahead, though,
if things are fragmented this could mean lots of seeking.

Have you tried putting the index on an SSD instead of a spinning magnetic d=
isk?

Mike

On Tue, Jun 23, 2009 at 4:53 PM, Nigel<nigelspleen@gmail.com> wrote:
> Our query performance is surprisingly inconsistent, and I'm trying to fig=
ure
> out why. =A0I've realized that I need to better understand what's going o=
n
> internally in Lucene when we're searching. =A0I'd be grateful for any ans=
wers
> (including pointers to existing docs, if any).
>
> Our situation is this: We have roughly 250 million docs spread across fou=
r
> indexes. =A0Each doc has about a dozen fields, all stored and most indexe=
d.
> (They're the usual document things like author, date, title, contents,
> etc.) =A0Queries differ in complexity but always have at least a few term=
s in
> boolean combination, up to some larger queries with dozens or even hundre=
ds
> of terms combined with ands, ors, nots, and parens. =A0There's no sorting=
,
> even by relevance: we just want to know what matches. =A0Query performanc=
e is
> often sub-second, but not infrequently it can take over 20 seconds (we th=
e
> time-limited hit collector, so anything over 20 seconds is stopped).
> Obviously the more complex queries are slower on average, but a given que=
ry
> can sometimes be much slower or much faster.
>
> My assumption is that we're having memory problems or disk utilization
> problems or both. =A0Our app has a 5gb JVM heap on an 8gb server with no =
other
> user processes running, so we shouldn't be paging and should have some ro=
om
> for Linux disk cache. =A0The server is lightly loaded and concurrent quer=
ies
> are the exception rather than the norm. =A0Two of the four indexes are up=
dated
> a few times a day via rsync and subsequently closed and re-opened, but po=
or
> query performance doesn't seem to be correlated with these times.
>
> So, getting to some specific questions:
>
> 1) How is the inverted index for a given field structured in terms of wha=
t's
> in memory and what's on disk? =A0Is it dynamic, based on available memory=
, or
> tuneable, or fixed? =A0Is there a rule of thumb that could be used to est=
imate
> how much memory is required per indexed field, based on the number of ter=
ms
> and documents? =A0Likewise, is there a rule of thumb to estimate how many=
 disk
> accesses are required to retrieve the hits for that field? =A0(I'm thinki=
ng,
> by perhaps false analogy, of how a database maintains a b-tree structure
> that may reside partially in RAM cache and partially in disk pages.)
>
> 2) When boolean queries are searched, is it as simple as iterating the hi=
ts
> for each ANDed or ORed term and applying the appropriate logical operator=
s
> to the results? =A0For example, is searching for "foo AND bar" pretty muc=
h the
> same resource-wise as doing two separate searches, and therefore should t=
he
> query performance be a linear function of the number the number of search
> terms? =A0Or is there some other caching and/or decision logic (perhaps k=
ind
> of like a database's query optimizer) at work here that makes the I/O and
> RAM requirements more difficult to model from the query? =A0(Remember tha=
t
> we're not doing any sorting.)
>
> I'm hoping that with some of this knowledge, I'll be able to better model
> the RAM and I/O usage of the indexes and queries, and thus eventually
> understand why things are slow or fast.
>
> Thanks,
> Chris
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 09:37:27 2009
Return-Path: <java-user-return-40866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89753 invoked from network); 24 Jun 2009 09:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 09:37:26 -0000
Received: (qmail 76092 invoked by uid 500); 24 Jun 2009 09:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76027 invoked by uid 500); 24 Jun 2009 09:37:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76017 invoked by uid 99); 24 Jun 2009 09:37:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 09:37:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 09:37:27 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 11:37:03 +0200
Content-class: urn:content-classes:message
Subject: AW: OutOfMemoryError using IndexWriter
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 24 Jun 2009 11:37:04 +0200
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0qLGdLHssQUoYTCmQha4IwrN6vgABCJtw
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de> <9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>,
	<java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I do not set a RAM Buffer size, I assume default is 16MB.
My server runs with 80MB heap size, before starting lucene about 50MB is =
used. In a production environment I run in this problem with heap size =
set to 750MB with no other activity on the server (nighttime), though =
since then I diagnosed some problem with my code as well. I just =
reproduced it with 80MB but I guess I can reproduce it with 100MB heap =
as well, just takes longer.

Here is the stack, I keep the dump for
java.lang.OutOfMemoryError: Java heap space
Dumping heap to c:\auto_heap_intern.prof ...
Heap dump file created [97173841 bytes in 3.534 secs]
ERROR lucene.SearchManager       - Failure in index daemon:=20
java.lang.OutOfMemoryError: Java heap space
        at java.util.HashSet.<init>(HashSet.java:86)
        at =
org.apache.lucene.index.DocumentsWriter.initFlushState(DocumentsWriter.ja=
va:540)
        at =
org.apache.lucene.index.DocumentsWriter.closeDocStore(DocumentsWriter.jav=
a:367)
        at =
org.apache.lucene.index.IndexWriter.flushDocStores(IndexWriter.java:1703)=

        at =
org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3534)
        at =
org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3450)
        at =
org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1638)
        at =
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1602)
        at =
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1578)

Heap Histogram shows:
class org.apache.lucene.index.FreqProxTermsWriter$PostingList 	116736 =
(instances) 	3268608 (size)

Well, something I should do differently ?

Stefan

-----Urspr=FCngliche Nachricht-----
Von: Michael McCandless [mailto:lucene@mikemccandless.com]
Gesendet: Mi 24.06.2009 10:48
An: java-user@lucene.apache.org
Betreff: Re: OutOfMemoryError using IndexWriter
=20
How large is the RAM buffer that you're giving IndexWriter?  How large
a heap size do you give to JVM?

Can you post one of the OOM exceptions you're hitting?

Mike

On Wed, Jun 24, 2009 at 4:08 AM, stefan<stefan@intermediate.de> wrote:
> Hi,
>
> I am using Lucene 2.4.1 to index a database with less than a million =
records. The resulting index is about 50MB in size.
> I keep getting an OutOfMemory Error if I re-use the same IndexWriter =
to index the complete database. This is though
> recommended in the performance hints.
> What I now do is, every 10000 Objects I close the index (and every 50 =
close actions optimize it) and create a new
> IndexWriter to continue. This process works fine, but to me seems =
hardly the recommended way to go.
> I've been using jhat/jmap as well as Netbeans profiler and am fairly =
sure that this is a problem related to Lucene.
>
> Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory =
postings but they all seem closed in Version 2.4.1.
>
> Thanks,
>
> Stefan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 09:53:01 2009
Return-Path: <java-user-return-40867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97783 invoked from network); 24 Jun 2009 09:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 09:53:01 -0000
Received: (qmail 90411 invoked by uid 500); 24 Jun 2009 09:53:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90360 invoked by uid 500); 24 Jun 2009 09:53:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90350 invoked by uid 99); 24 Jun 2009 09:53:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 09:53:10 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 09:53:01 +0000
Received: by gxk11 with SMTP id 11so992043gxk.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 02:52:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.146.16 with SMTP id y16mr2078392ybn.330.1245837160197; 
	Wed, 24 Jun 2009 02:52:40 -0700 (PDT)
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
	 <9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
Date: Wed, 24 Jun 2009 05:52:40 -0400
Message-ID: <9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm -- I think your test env (80 MB heap, 50 MB used by app + 16 MB
IndexWriter RAM buffer) is a bit too tight.  The 16 MB buffer for IW
is not a hard upper bound on how much RAM it may use.  EG when merges
are running, more RAM will be required, if a large doc brought it over
the 16 MB limit it will consume more, etc.

~3 MB used by PostingList is reasonable.

If after fixing the problem in your code, with a larger heap size
you're still running out of RAM, then please post the full histogram
from the resulting heap dump at which point the offender will be
obvious.

Or, can you make the problem happen with a smallish test case?

Mike

On Wed, Jun 24, 2009 at 5:37 AM, stefan<stefan@intermediate.de> wrote:
> Hi,
>
> I do not set a RAM Buffer size, I assume default is 16MB.
> My server runs with 80MB heap size, before starting lucene about 50MB is =
used. In a production environment I run in this problem with heap size set =
to 750MB with no other activity on the server (nighttime), though since the=
n I diagnosed some problem with my code as well. I just reproduced it with =
80MB but I guess I can reproduce it with 100MB heap as well, just takes lon=
ger.
>
> Here is the stack, I keep the dump for
> java.lang.OutOfMemoryError: Java heap space
> Dumping heap to c:\auto_heap_intern.prof ...
> Heap dump file created [97173841 bytes in 3.534 secs]
> ERROR lucene.SearchManager =A0 =A0 =A0 - Failure in index daemon:
> java.lang.OutOfMemoryError: Java heap space
> =A0 =A0 =A0 =A0at java.util.HashSet.<init>(HashSet.java:86)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.DocumentsWriter.initFlushState(=
DocumentsWriter.java:540)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.DocumentsWriter.closeDocStore(D=
ocumentsWriter.java:367)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.flushDocStores(Inde=
xWriter.java:1703)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter=
.java:3534)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.flush(IndexWriter.j=
ava:3450)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.closeInternal(Index=
Writer.java:1638)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.close(IndexWriter.j=
ava:1602)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.close(IndexWriter.j=
ava:1578)
>
> Heap Histogram shows:
> class org.apache.lucene.index.FreqProxTermsWriter$PostingList =A0 116736 =
(instances) =A0 =A0 =A03268608 (size)
>
> Well, something I should do differently ?
>
> Stefan
>
> -----Urspr=FCngliche Nachricht-----
> Von: Michael McCandless [mailto:lucene@mikemccandless.com]
> Gesendet: Mi 24.06.2009 10:48
> An: java-user@lucene.apache.org
> Betreff: Re: OutOfMemoryError using IndexWriter
>
> How large is the RAM buffer that you're giving IndexWriter? =A0How large
> a heap size do you give to JVM?
>
> Can you post one of the OOM exceptions you're hitting?
>
> Mike
>
> On Wed, Jun 24, 2009 at 4:08 AM, stefan<stefan@intermediate.de> wrote:
>> Hi,
>>
>> I am using Lucene 2.4.1 to index a database with less than a million rec=
ords. The resulting index is about 50MB in size.
>> I keep getting an OutOfMemory Error if I re-use the same IndexWriter to =
index the complete database. This is though
>> recommended in the performance hints.
>> What I now do is, every 10000 Objects I close the index (and every 50 cl=
ose actions optimize it) and create a new
>> IndexWriter to continue. This process works fine, but to me seems hardly=
 the recommended way to go.
>> I've been using jhat/jmap as well as Netbeans profiler and am fairly sur=
e that this is a problem related to Lucene.
>>
>> Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory post=
ings but they all seem closed in Version 2.4.1.
>>
>> Thanks,
>>
>> Stefan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 11:43:50 2009
Return-Path: <java-user-return-40868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33035 invoked from network); 24 Jun 2009 11:43:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 11:43:50 -0000
Received: (qmail 2802 invoked by uid 500); 24 Jun 2009 11:43:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2748 invoked by uid 500); 24 Jun 2009 11:43:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2738 invoked by uid 99); 24 Jun 2009 11:43:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 11:43:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 11:43:50 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 13:43:27 +0200
Content-class: urn:content-classes:message
Subject: AW: OutOfMemoryError using IndexWriter
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F4C0.FD8641D3"
Date: Wed, 24 Jun 2009 13:43:28 +0200
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0sZdlnmxW6keVTFuVSacLhXAUCwADqJRg
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de><9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de> <9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F4C0.FD8641D3
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,

I tried with 100MB heap size and got the Error as well, it runs fine =
with 120MB.

Here is the histogram (application classes marked with --)

Heap Histogram

All Classes (excluding platform)
Class 	Instance Count 	Total Size
class [C 	234200 	30245722
class [B 	1087565 	25999145
class [[B 	28430 	4890060
class java.lang.String 	232351 	3717616
class org.apache.lucene.index.FreqProxTermsWriter$PostingList 	99584 	=
2788352
class java.util.HashMap$Entry 	171031 	2736496
class [Ljava.util.HashMap$Entry; 	9563 	2371256
class [Ljava.lang.Object; 	31820 	1820224
class --- 	4474 	1753808
class [I 	4337 	1567796
class java.lang.reflect.Method 	19774 	1364406
class org.apache.lucene.index.Term 	117982 	943856
class [Lorg.apache.lucene.index.RawPostingList; 	12 	770012
class --- 	1837 	490479
class org.apache.lucene.index.BufferedDeletes$Num 	117303 	469212=20

The --- as well was the reflect.Method are part of the app's data.

Why is it, that creating a new Index Writer will let the indexing run =
fine with 80MB, but keeping it will create an
OutOfMemoryException running with 100MB heap size ?

Stefan


-----Urspr=FCngliche Nachricht-----
Von: Michael McCandless [mailto:lucene@mikemccandless.com]
Gesendet: Mi 24.06.2009 11:52
An: java-user@lucene.apache.org
Betreff: Re: OutOfMemoryError using IndexWriter
=20
Hmm -- I think your test env (80 MB heap, 50 MB used by app + 16 MB
IndexWriter RAM buffer) is a bit too tight.  The 16 MB buffer for IW
is not a hard upper bound on how much RAM it may use.  EG when merges
are running, more RAM will be required, if a large doc brought it over
the 16 MB limit it will consume more, etc.

~3 MB used by PostingList is reasonable.

If after fixing the problem in your code, with a larger heap size
you're still running out of RAM, then please post the full histogram
from the resulting heap dump at which point the offender will be
obvious.

Or, can you make the problem happen with a smallish test case?

Mike

On Wed, Jun 24, 2009 at 5:37 AM, stefan<stefan@intermediate.de> wrote:
> Hi,
>
> I do not set a RAM Buffer size, I assume default is 16MB.
> My server runs with 80MB heap size, before starting lucene about 50MB =
is used. In a production environment I run in this problem with heap =
size set to 750MB with no other activity on the server (nighttime), =
though since then I diagnosed some problem with my code as well. I just =
reproduced it with 80MB but I guess I can reproduce it with 100MB heap =
as well, just takes longer.
>
> Here is the stack, I keep the dump for
> java.lang.OutOfMemoryError: Java heap space
> Dumping heap to c:\auto_heap_intern.prof ...
> Heap dump file created [97173841 bytes in 3.534 secs]
> ERROR lucene.SearchManager =A0 =A0 =A0 - Failure in index daemon:
> java.lang.OutOfMemoryError: Java heap space
> =A0 =A0 =A0 =A0at java.util.HashSet.<init>(HashSet.java:86)
> =A0 =A0 =A0 =A0at =
org.apache.lucene.index.DocumentsWriter.initFlushState(DocumentsWriter.ja=
va:540)
> =A0 =A0 =A0 =A0at =
org.apache.lucene.index.DocumentsWriter.closeDocStore(DocumentsWriter.jav=
a:367)
> =A0 =A0 =A0 =A0at =
org.apache.lucene.index.IndexWriter.flushDocStores(IndexWriter.java:1703)=

> =A0 =A0 =A0 =A0at =
org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3534)
> =A0 =A0 =A0 =A0at =
org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3450)
> =A0 =A0 =A0 =A0at =
org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1638)
> =A0 =A0 =A0 =A0at =
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1602)
> =A0 =A0 =A0 =A0at =
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1578)
>
> Heap Histogram shows:
> class org.apache.lucene.index.FreqProxTermsWriter$PostingList =A0 =
116736 (instances) =A0 =A0 =A03268608 (size)
>
> Well, something I should do differently ?
>
> Stefan
>
> -----Urspr=FCngliche Nachricht-----
> Von: Michael McCandless [mailto:lucene@mikemccandless.com]
> Gesendet: Mi 24.06.2009 10:48
> An: java-user@lucene.apache.org
> Betreff: Re: OutOfMemoryError using IndexWriter
>
> How large is the RAM buffer that you're giving IndexWriter? =A0How =
large
> a heap size do you give to JVM?
>
> Can you post one of the OOM exceptions you're hitting?
>
> Mike
>
> On Wed, Jun 24, 2009 at 4:08 AM, stefan<stefan@intermediate.de> wrote:
>> Hi,
>>
>> I am using Lucene 2.4.1 to index a database with less than a million =
records. The resulting index is about 50MB in size.
>> I keep getting an OutOfMemory Error if I re-use the same IndexWriter =
to index the complete database. This is though
>> recommended in the performance hints.
>> What I now do is, every 10000 Objects I close the index (and every 50 =
close actions optimize it) and create a new
>> IndexWriter to continue. This process works fine, but to me seems =
hardly the recommended way to go.
>> I've been using jhat/jmap as well as Netbeans profiler and am fairly =
sure that this is a problem related to Lucene.
>>
>> Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory =
postings but they all seem closed in Version 2.4.1.
>>
>> Thanks,
>>
>> Stefan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C9F4C0.FD8641D3
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F4C0.FD8641D3--

From java-user-return-40869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 12:22:34 2009
Return-Path: <java-user-return-40869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54481 invoked from network); 24 Jun 2009 12:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 12:22:34 -0000
Received: (qmail 53566 invoked by uid 500); 24 Jun 2009 12:22:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53492 invoked by uid 500); 24 Jun 2009 12:22:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53482 invoked by uid 99); 24 Jun 2009 12:22:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 12:22:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 12:22:32 +0000
Received: (qmail 24238 invoked by uid 60001); 24 Jun 2009 12:22:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245846131; bh=wjHfb28M8IzBhlmZ+CuxPiHQnB0A+34XuystHc0JKwk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=f+2VNMs2giyA8s2U/7VXCR+LGNmaAPfvwEvwjeiAVyiBwHjX6GJ3eWYzOggM06X+hA38MpGa2gr4qKRgbF6oyi/4f/4QZ9Kb1r/pZv91lKHIJ/rAY1QFUIlVLZscZ1O+gmgYTHHFge6wiNsd0byglqBz/BYVNM4btvlD2xHVMHI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=nnNMFNFlV+OenapXpunGevHwf3rbTHH5jlb3UFe4dnDt5hYvopT+K0J5gq0Psx3NentUkUw+OvaWYN6VA9XuvAQAHRtd2NpxEQx2GTfounGLzgTS65bojhsen0eGdcjCw5wIF3bLTpL3NgBHCy0ePuy8Z/55yBGp5RTC9oerWRg=;
Message-ID: <130969.55385.qm@web50311.mail.re2.yahoo.com>
X-YMail-OSG: WlmyxBoVM1lGY2DHmSaxMXhIah7quEZo2Od25AJXpPkqBJkmVeSYB8b6oFXU3rYyepbOoZyDGTIm7nt5EHCRu3wpdZ8_XoGSPDr4Yv0SrJOszeylhZtJBKAvQ5R9B_E9cxLTnxse7dMBOtInpxjKOQrOh3R53tSvufCD38_xgOVx91yoTWjuR0lY2gescUgveJVExymoKrOSx0E9FH0PIfWm78I_6SFCWBV7ciXc_AFC5mgavoC3OaXv2PWv5prX7zr.f_dd3gYf7gKCEXu4EF3kjpDZvjZ8Zbwyj12mF6r6hv6OEeIL5Z64Q6em39eQv3eWtkTEP4Q5RDx42noebX3Iqp36l5ErTM6g7g--
Received: from [74.73.30.59] by web50311.mail.re2.yahoo.com via HTTP; Wed, 24 Jun 2009 05:22:10 PDT
X-Mailer: YahooMailRC/1357.22 YahooMailWebService/0.7.289.15
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
Date: Wed, 24 Jun 2009 05:22:10 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: OutOfMemoryError using IndexWriter
To: java-user@lucene.apache.org
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Stefan,

While not directly th source of your problem, I have a feeling you are optimizing too frequently (and wasting time/CPU by doing so).  Is there a reason you optimize so often?  Try optimizing only at the end, when you know you won't be adding any more documents to the index for a while.

I'm also wondering why you close/open the IndeWriter, as it looks like you are doing batch indexing.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: stefan <stefan@intermediate.de>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 24, 2009 4:08:43 AM
> Subject: OutOfMemoryError using IndexWriter
> 
> Hi,
> 
> I am using Lucene 2.4.1 to index a database with less than a million records. 
> The resulting index is about 50MB in size.
> I keep getting an OutOfMemory Error if I re-use the same IndexWriter to index 
> the complete database. This is though 
> recommended in the performance hints.
> What I now do is, every 10000 Objects I close the index (and every 50 close 
> actions optimize it) and create a new
> IndexWriter to continue. This process works fine, but to me seems hardly the 
> recommended way to go.
> I've been using jhat/jmap as well as Netbeans profiler and am fairly sure that 
> this is a problem related to Lucene.
> 
> Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory postings but 
> they all seem closed in Version 2.4.1.
> 
> Thanks,
> 
> Stefan
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 12:57:59 2009
Return-Path: <java-user-return-40870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68500 invoked from network); 24 Jun 2009 12:57:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 12:57:59 -0000
Received: (qmail 18492 invoked by uid 500); 24 Jun 2009 12:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18456 invoked by uid 500); 24 Jun 2009 12:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18446 invoked by uid 99); 24 Jun 2009 12:58:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 12:58:08 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 12:58:00 +0000
Received: by yxe1 with SMTP id 1so1018643yxe.29
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 05:57:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.38.19 with SMTP id q19mr2480605ybj.76.1245848258730; Wed, 
	24 Jun 2009 05:57:38 -0700 (PDT)
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
	 <9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
	 <9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
Date: Wed, 24 Jun 2009 08:57:38 -0400
Message-ID: <9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jun 24, 2009 at 7:43 AM, stefan<stefan@intermediate.de> wrote:

> I tried with 100MB heap size and got the Error as well, it runs fine with=
 120MB.

OK so this means it's not a leak, and instead it's just that stuff is
consuming more RAM than expected.

> Here is the histogram (application classes marked with --)
>
> Heap Histogram
>
> All Classes (excluding platform)
> Class =A0 Instance Count =A0Total Size
> class [C =A0 =A0 =A0 =A0234200 =A030245722
> class [B =A0 =A0 =A0 =A01087565 =A0 =A0 =A0 =A0 25999145
> class [[B =A0 =A0 =A0 28430 =A0 4890060
> class java.lang.String =A0232351 =A03717616
> class org.apache.lucene.index.FreqProxTermsWriter$PostingList =A0 99584 =
=A0 2788352
> class java.util.HashMap$Entry =A0 171031 =A02736496
> class [Ljava.util.HashMap$Entry; =A0 =A0 =A0 =A09563 =A0 =A02371256
> class [Ljava.lang.Object; =A0 =A0 =A0 31820 =A0 1820224
> class --- =A0 =A0 =A0 4474 =A0 =A01753808
> class [I =A0 =A0 =A0 =A04337 =A0 =A01567796
> class java.lang.reflect.Method =A019774 =A0 1364406
> class org.apache.lucene.index.Term =A0 =A0 =A0117982 =A0943856
> class [Lorg.apache.lucene.index.RawPostingList; =A0 =A0 =A0 =A0 12 =A0 =
=A0 =A0770012
> class --- =A0 =A0 =A0 1837 =A0 =A0490479
> class org.apache.lucene.index.BufferedDeletes$Num =A0 =A0 =A0 117303 =A04=
69212
>
> The --- as well was the reflect.Method are part of the app's data.

Hmm -- there are quite a few buffered deletes pending.  It could be we
are under-accounting for RAM used by buffered deletes.  I'll dig on
that.

Also, your char[]'s are taking ~30 MB, byte[] ~26MB, which is odd if
your RAM buffer is 16MB.  Does your app create these?

> Why is it, that creating a new Index Writer will let the indexing run fin=
e with 80MB, but keeping it will create an
> OutOfMemoryException running with 100MB heap size ?

Could be because you are buffering so many deletes (if indeed Lucene
doesn't account for that RAM consumption properly)...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 13:55:51 2009
Return-Path: <java-user-return-40871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2699 invoked from network); 24 Jun 2009 13:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 13:55:51 -0000
Received: (qmail 26127 invoked by uid 500); 24 Jun 2009 13:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26050 invoked by uid 500); 24 Jun 2009 13:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26040 invoked by uid 99); 24 Jun 2009 13:56:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 13:56:00 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 13:55:52 +0000
X-SBRS: None
X-MID: 125595881
Received: from fmd3tj001.fda.gov ([10.160.10.76])
  by ironport5.fda.gov with ESMTP; 24 Jun 2009 09:55:29 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.61]) by FMD3TJ001.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Jun 2009 09:55:29 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: OutOfMemoryError using IndexWriter
Date: Wed, 24 Jun 2009 09:55:29 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73C3F@FMD3VS012.fda.gov>
In-reply-to: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0ov3xSSJwWA3lSMeUA7HWxG99HQAMCa5Q
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Jun 2009 13:55:29.0574 (UTC) FILETIME=[6F15B460:01C9F4D3]
X-Virus-Checked: Checked by ClamAV on apache.org


 Hi Stefan,

Are you using Windows 32 bit? If so, sometimes, if the index file before
optimizations crosses your jvm memory usage settings (if say 512MB),
there is a possibility of this happening.=20

Increase JVM memory settings if that is the case.=20


Sincerely,
Sithu D Sudarsan

Off: 301-796-2587

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: stefan [mailto:stefan@intermediate.de]=20
Sent: Wednesday, June 24, 2009 4:09 AM
To: java-user@lucene.apache.org
Subject: OutOfMemoryError using IndexWriter

Hi,

I am using Lucene 2.4.1 to index a database with less than a million
records. The resulting index is about 50MB in size.
I keep getting an OutOfMemory Error if I re-use the same IndexWriter to
index the complete database. This is though=20
recommended in the performance hints.
What I now do is, every 10000 Objects I close the index (and every 50
close actions optimize it) and create a new
IndexWriter to continue. This process works fine, but to me seems hardly
the recommended way to go.
I've been using jhat/jmap as well as Netbeans profiler and am fairly
sure that this is a problem related to Lucene.

Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory
postings but they all seem closed in Version 2.4.1.

Thanks,

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 14:02:29 2009
Return-Path: <java-user-return-40872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7290 invoked from network); 24 Jun 2009 14:02:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 14:02:29 -0000
Received: (qmail 38326 invoked by uid 500); 24 Jun 2009 14:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38252 invoked by uid 500); 24 Jun 2009 14:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38242 invoked by uid 99); 24 Jun 2009 14:02:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:02:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 14:02:27 +0000
Received: (qmail 75045 invoked by uid 60001); 24 Jun 2009 14:02:05 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245852125; bh=0WLsBIIzsJdzr4WxedY7wfMJMzsWBlTosrez9yTEHoY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=LHWO4ZR0n2i2qRwDbeBgU/wIE3DJBceev7M8nVCoIAmQb3nTp9EtYcNBj4mKwrb27Gz6Xk9Q9wm1f3ywBt/EWeEQ6qjkwYFiXexJzgnasxwqmTMqCRQom42fLXxkSMfgy+SVECq92UDE36ZtOd+wmx9di20zzbMNfee0WdKXlUQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=pNqzyLaJoJFzp+gmLrCLQtcQDhJb4cMQ/lZoUwMXr5SC1PMvGaqfPLKxczsUtn/P8qmx/sA71gPi5pJ10u/duIa2TK6L1l78lKz1sG3FBf6SldZwMeYv1MDdtRdcCHNhnTtwa9jgThzWAHwX1V7z4buS2fPxX+HnWQhvQ03RCzs=;
Message-ID: <831976.74805.qm@web50312.mail.re2.yahoo.com>
X-YMail-OSG: l2WstK4VM1nFPjdJ38M5tZV8xZO_x2DEawGlCH74z0VYYRwnKhg0.Ox5UkSVfVvQylnR8kyF573wPdKH02Iz5qCktMpdNwhlh2fzBho8JAI6P07v2um2LxpOlpBdjzEeToypPx66JajRdZUykzjkY4FvDgb89N0GS1QFy6nSIL3nUBfLIeQsSfacb3VUfV9Oj114o6EtXYVnFnzqMa_Ob40vhr1TCAFos_Pk_a_CEYqw.atifFLRdplfgkPJ.f5kehOdWdf89vItfaZFSVQfk3XBJGwFpLDX_x8Wl7p1M6rmizLONzxLB5CQk8jpPug60.w2TrACg5zLIdQU9SsSz8328BCsZyk-
Received: from [167.206.188.3] by web50312.mail.re2.yahoo.com via HTTP; Wed, 24 Jun 2009 07:02:05 PDT
X-Mailer: YahooMailRC/1357.22 YahooMailWebService/0.7.289.15
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com> <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
Date: Wed, 24 Jun 2009 07:02:05 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Setting swappiness
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Stealing this thread/idea, but changing subject, so we can branch and I don't look like a thread thief.


I never played with /proc/sys/vm/swappiness, but I wonder if there are points in the lifetime of an index where this number should be changed.  For example, does it make sense to in/decrease that number once we know the index is going to be read-only for a while?  Does it make sense to in/decrease it during merges or optimizations?

Thanks,
Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Michael McCandless <lucene@mikemccandless.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 24, 2009 5:06:25 AM
> Subject: Re: Analyzing performance and memory consumption for boolean queries
> 
> Is it possible the occasional large merge is clearing out the IO cache
> (thus "unwarming" your searcher)?  (Though since you're rsync'ing your
> updates in, it sounds like a separate machine is building the index).
> 
> Or... linux will happily swap out a process's core in favor of IO
> cache (though I'd expect this effect to be much less spikey).  You can
> tune "swappiness" to have it not do that:
> 
>     http://kerneltrap.org/node/3000
> 
> Maybe Lucene's norms/deleted docs/field cache were getting swapped out?
> 
> Lucene's postings reside entirely on disk (ie, Lucene doesn't cache
> those in RAM; we rely on the OS's IO cache).  Lucene does a linear
> scan through the terms in the query... Linux will readahead, though,
> if things are fragmented this could mean lots of seeking.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 14:06:50 2009
Return-Path: <java-user-return-40873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10014 invoked from network); 24 Jun 2009 14:06:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 14:06:50 -0000
Received: (qmail 44045 invoked by uid 500); 24 Jun 2009 14:06:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43957 invoked by uid 500); 24 Jun 2009 14:06:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43947 invoked by uid 99); 24 Jun 2009 14:06:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:06:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 14:06:48 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 16:06:26 +0200
Content-class: urn:content-classes:message
Subject: AW: OutOfMemoryError using IndexWriter
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F4D4.F71DE275"
Date: Wed, 24 Jun 2009 16:06:27 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BD9@mail.intermediate.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BD9@mail.intermediate.de>
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0xnsnH3dKDUZ1RKik0rmh8v5gbwADMd9n
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de> <130969.55385.qm@web50311.mail.re2.yahoo.com>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F4D4.F71DE275
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,

there seems to be a little misunderstanding. The index will only be =
optimized if the IndexWriter is to be closed and then only with a =
probability of 2% (meaning occasionaly).
In other words, I only close the IndexWriter (and thus optimize) to =
avoid the OOMError.=20
When I keep the same IndexWriter for the complete indexing operation, I =
do not call optimize but get an OOMError.

Stefan



-----Urspr=FCngliche Nachricht-----
Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Gesendet: Mi 24.06.2009 14:22
An: java-user@lucene.apache.org
Betreff: Re: OutOfMemoryError using IndexWriter
=20

Hi Stefan,

While not directly th source of your problem, I have a feeling you are =
optimizing too frequently (and wasting time/CPU by doing so).  Is there =
a reason you optimize so often?  Try optimizing only at the end, when =
you know you won't be adding any more documents to the index for a =
while.

I'm also wondering why you close/open the IndeWriter, as it looks like =
you are doing batch indexing.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: stefan <stefan@intermediate.de>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 24, 2009 4:08:43 AM
> Subject: OutOfMemoryError using IndexWriter
>=20
> Hi,
>=20
> I am using Lucene 2.4.1 to index a database with less than a million =
records.=20
> The resulting index is about 50MB in size.
> I keep getting an OutOfMemory Error if I re-use the same IndexWriter =
to index=20
> the complete database. This is though=20
> recommended in the performance hints.
> What I now do is, every 10000 Objects I close the index (and every 50 =
close=20
> actions optimize it) and create a new
> IndexWriter to continue. This process works fine, but to me seems =
hardly the=20
> recommended way to go.
> I've been using jhat/jmap as well as Netbeans profiler and am fairly =
sure that=20
> this is a problem related to Lucene.
>=20
> Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory =
postings but=20
> they all seem closed in Version 2.4.1.
>=20
> Thanks,
>=20
> Stefan
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C9F4D4.F71DE275
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F4D4.F71DE275--

From java-user-return-40874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 14:10:14 2009
Return-Path: <java-user-return-40874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11425 invoked from network); 24 Jun 2009 14:10:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 14:10:14 -0000
Received: (qmail 50007 invoked by uid 500); 24 Jun 2009 14:10:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49924 invoked by uid 500); 24 Jun 2009 14:10:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49914 invoked by uid 99); 24 Jun 2009 14:10:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:10:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 14:10:13 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 16:09:52 +0200
Content-class: urn:content-classes:message
Subject: AW: OutOfMemoryError using IndexWriter
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F4D5.71AC89FD"
Date: Wed, 24 Jun 2009 16:08:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BDA@mail.intermediate.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BDA@mail.intermediate.de>
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0ov3xSSJwWA3lSMeUA7HWxG99HQAMCa5QAACD5/A=
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de> <F8A04958BB57B64096F9BE6B9572564304C73C3F@FMD3VS012.fda.gov>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F4D5.71AC89FD
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,

I do use Win32.

What do you mean by "the index file before
optimizations crosses your jvm memory usage settings (if say 512MB)" ?

Could you please further explain this ?

Stefan

-----Urspr=FCngliche Nachricht-----
Von: Sudarsan, Sithu D. [mailto:Sithu.Sudarsan@fda.hhs.gov]
Gesendet: Mi 24.06.2009 15:55
An: java-user@lucene.apache.org
Betreff: RE: OutOfMemoryError using IndexWriter
=20

 Hi Stefan,

Are you using Windows 32 bit? If so, sometimes, if the index file before
optimizations crosses your jvm memory usage settings (if say 512MB),
there is a possibility of this happening.=20

Increase JVM memory settings if that is the case.=20


Sincerely,
Sithu D Sudarsan

Off: 301-796-2587

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: stefan [mailto:stefan@intermediate.de]=20
Sent: Wednesday, June 24, 2009 4:09 AM
To: java-user@lucene.apache.org
Subject: OutOfMemoryError using IndexWriter

Hi,

I am using Lucene 2.4.1 to index a database with less than a million
records. The resulting index is about 50MB in size.
I keep getting an OutOfMemory Error if I re-use the same IndexWriter to
index the complete database. This is though=20
recommended in the performance hints.
What I now do is, every 10000 Objects I close the index (and every 50
close actions optimize it) and create a new
IndexWriter to continue. This process works fine, but to me seems hardly
the recommended way to go.
I've been using jhat/jmap as well as Netbeans profiler and am fairly
sure that this is a problem related to Lucene.

Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory
postings but they all seem closed in Version 2.4.1.

Thanks,

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C9F4D5.71AC89FD
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F4D5.71AC89FD--

From java-user-return-40875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 14:18:58 2009
Return-Path: <java-user-return-40875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17985 invoked from network); 24 Jun 2009 14:18:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 14:18:58 -0000
Received: (qmail 71872 invoked by uid 500); 24 Jun 2009 14:19:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71821 invoked by uid 500); 24 Jun 2009 14:19:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71811 invoked by uid 99); 24 Jun 2009 14:19:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:19:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 14:18:57 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 16:18:36 +0200
Content-class: urn:content-classes:message
Subject: AW: OutOfMemoryError using IndexWriter
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F4D6.AA1E3119"
Date: Wed, 24 Jun 2009 16:18:37 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de>
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0y27fb8h8WF+aS3e6lzUBHBrzegACgxb3
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de><9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de><9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de> <9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F4D6.AA1E3119
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,


>OK so this means it's not a leak, and instead it's just that stuff is
>consuming more RAM than expected.
Or that my test db is smaller than the production db which is indeed the =
case.

>Hmm -- there are quite a few buffered deletes pending.  It could be we
>are under-accounting for RAM used by buffered deletes.  I'll dig on
>that.
That sounds promising to me, how does a delete happen, we are talking of =
complete new re-indexing, no deletes at all should be happening. Are you =
saying that I remove docs from the index ?


>Also, your char[]'s are taking ~30 MB, byte[] ~26MB, which is odd if
>your RAM buffer is 16MB.  Does your app create these?
A fair amount is created by my app - I histogram without indexing shows =
about 10MB chars created by my App:
class [C 	132399 	9457148,
though a few more could be created during indexing.

> Why is it, that creating a new Index Writer will let the indexing run =
fine with 80MB, but keeping it will create an
> OutOfMemoryException running with 100MB heap size ?

Please explain those buffered deletes in a few more details.

Thanks,

Stefan


------_=_NextPart_001_01C9F4D6.AA1E3119
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F4D6.AA1E3119--

From java-user-return-40876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 14:19:06 2009
Return-Path: <java-user-return-40876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18161 invoked from network); 24 Jun 2009 14:19:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 14:19:06 -0000
Received: (qmail 73980 invoked by uid 500); 24 Jun 2009 14:19:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73930 invoked by uid 500); 24 Jun 2009 14:19:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73920 invoked by uid 99); 24 Jun 2009 14:19:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:19:14 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:19:05 +0000
X-SBRS: None
X-MID: 125601484
Received: from fmd3tj001.fda.gov ([10.160.10.76])
  by ironport5.fda.gov with ESMTP; 24 Jun 2009 10:18:43 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.61]) by FMD3TJ001.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Jun 2009 10:18:42 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: OutOfMemoryError using IndexWriter
Date: Wed, 24 Jun 2009 10:18:42 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73C41@FMD3VS012.fda.gov>
In-reply-to: <E28B87DDBA121F45B476C053B2171F0E596BDA@mail.intermediate.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0ov3xSSJwWA3lSMeUA7HWxG99HQAMCa5QAACD5/AAADukMA==
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de> <F8A04958BB57B64096F9BE6B9572564304C73C3F@FMD3VS012.fda.gov> <E28B87DDBA121F45B476C053B2171F0E596BDA@mail.intermediate.de>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Jun 2009 14:18:42.0699 (UTC) FILETIME=[AD73B5B0:01C9F4D6]
X-Virus-Checked: Checked by ClamAV on apache.org

When the segments are merged, but not optimized. It happened at 1.8GB to =
our program, and now we develop and test in Win32 but run the code on =
Linux, which seems to be handling atleast upto 3GB of index.=20

In fact, if the index size if beyond 1.8GB even, Luke throws Java Heap =
Error, if I try to open.

Please post your results/views.


Sincerely,
Sithu=20
-----Original Message-----
From: stefan [mailto:stefan@intermediate.de]=20
Sent: Wednesday, June 24, 2009 10:08 AM
To: java-user@lucene.apache.org
Subject: AW: OutOfMemoryError using IndexWriter


Hi,

I do use Win32.

What do you mean by "the index file before
optimizations crosses your jvm memory usage settings (if say 512MB)" ?

Could you please further explain this ?

Stefan

-----Urspr=FCngliche Nachricht-----
Von: Sudarsan, Sithu D. [mailto:Sithu.Sudarsan@fda.hhs.gov]
Gesendet: Mi 24.06.2009 15:55
An: java-user@lucene.apache.org
Betreff: RE: OutOfMemoryError using IndexWriter
=20

 Hi Stefan,

Are you using Windows 32 bit? If so, sometimes, if the index file before
optimizations crosses your jvm memory usage settings (if say 512MB),
there is a possibility of this happening.=20

Increase JVM memory settings if that is the case.=20


Sincerely,
Sithu D Sudarsan

Off: 301-796-2587

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: stefan [mailto:stefan@intermediate.de]=20
Sent: Wednesday, June 24, 2009 4:09 AM
To: java-user@lucene.apache.org
Subject: OutOfMemoryError using IndexWriter

Hi,

I am using Lucene 2.4.1 to index a database with less than a million
records. The resulting index is about 50MB in size.
I keep getting an OutOfMemory Error if I re-use the same IndexWriter to
index the complete database. This is though=20
recommended in the performance hints.
What I now do is, every 10000 Objects I close the index (and every 50
close actions optimize it) and create a new
IndexWriter to continue. This process works fine, but to me seems hardly
the recommended way to go.
I've been using jhat/jmap as well as Netbeans profiler and am fairly
sure that this is a problem related to Lucene.

Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory
postings but they all seem closed in Version 2.4.1.

Thanks,

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 14:28:08 2009
Return-Path: <java-user-return-40877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24317 invoked from network); 24 Jun 2009 14:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 14:28:08 -0000
Received: (qmail 97219 invoked by uid 500); 24 Jun 2009 14:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97149 invoked by uid 500); 24 Jun 2009 14:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97139 invoked by uid 99); 24 Jun 2009 14:28:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:28:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jun 2009 14:28:07 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 16:27:45 +0200
Content-class: urn:content-classes:message
Subject: AW: OutOfMemoryError using IndexWriter
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F4D7.F1BCEAF5"
Date: Wed, 24 Jun 2009 16:23:08 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BDC@mail.intermediate.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BDC@mail.intermediate.de>
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0ov3xSSJwWA3lSMeUA7HWxG99HQAMCa5QAACD5/AAADukMAAASk6o
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de> <F8A04958BB57B64096F9BE6B9572564304C73C3F@FMD3VS012.fda.gov> <E28B87DDBA121F45B476C053B2171F0E596BDA@mail.intermediate.de> <F8A04958BB57B64096F9BE6B9572564304C73C41@FMD3VS012.fda.gov>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F4D7.F1BCEAF5
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,

does Lucene keep the complete index in memory ?
As stated before the result index is 50MB, this would correlate with the =
memory footprint required by Lucene as seen in my app:
jvm 120MB - 50MB(Lucene) - 50MB(my App) =3D something left
jvm 100MB - 50MB(Lucene) - 50MB(my App) =3D OOError

though some hint, whether this is the case, from the programming side =
would be appreciated ...

Stefan


-----Urspr=FCngliche Nachricht-----
Von: Sudarsan, Sithu D. [mailto:Sithu.Sudarsan@fda.hhs.gov]
Gesendet: Mi 24.06.2009 16:18
An: java-user@lucene.apache.org
Betreff: RE: OutOfMemoryError using IndexWriter
=20
When the segments are merged, but not optimized. It happened at 1.8GB to =
our program, and now we develop and test in Win32 but run the code on =
Linux, which seems to be handling atleast upto 3GB of index.=20

In fact, if the index size if beyond 1.8GB even, Luke throws Java Heap =
Error, if I try to open.

Please post your results/views.


Sincerely,
Sithu=20
-----Original Message-----
From: stefan [mailto:stefan@intermediate.de]=20
Sent: Wednesday, June 24, 2009 10:08 AM
To: java-user@lucene.apache.org
Subject: AW: OutOfMemoryError using IndexWriter


Hi,

I do use Win32.

What do you mean by "the index file before
optimizations crosses your jvm memory usage settings (if say 512MB)" ?

Could you please further explain this ?

Stefan

-----Urspr=FCngliche Nachricht-----
Von: Sudarsan, Sithu D. [mailto:Sithu.Sudarsan@fda.hhs.gov]
Gesendet: Mi 24.06.2009 15:55
An: java-user@lucene.apache.org
Betreff: RE: OutOfMemoryError using IndexWriter
=20

 Hi Stefan,

Are you using Windows 32 bit? If so, sometimes, if the index file before
optimizations crosses your jvm memory usage settings (if say 512MB),
there is a possibility of this happening.=20

Increase JVM memory settings if that is the case.=20


Sincerely,
Sithu D Sudarsan

Off: 301-796-2587

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: stefan [mailto:stefan@intermediate.de]=20
Sent: Wednesday, June 24, 2009 4:09 AM
To: java-user@lucene.apache.org
Subject: OutOfMemoryError using IndexWriter

Hi,

I am using Lucene 2.4.1 to index a database with less than a million
records. The resulting index is about 50MB in size.
I keep getting an OutOfMemory Error if I re-use the same IndexWriter to
index the complete database. This is though=20
recommended in the performance hints.
What I now do is, every 10000 Objects I close the index (and every 50
close actions optimize it) and create a new
IndexWriter to continue. This process works fine, but to me seems hardly
the recommended way to go.
I've been using jhat/jmap as well as Netbeans profiler and am fairly
sure that this is a problem related to Lucene.

Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory
postings but they all seem closed in Version 2.4.1.

Thanks,

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C9F4D7.F1BCEAF5
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F4D7.F1BCEAF5--

From java-user-return-40878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 14:44:28 2009
Return-Path: <java-user-return-40878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30685 invoked from network); 24 Jun 2009 14:44:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 14:44:28 -0000
Received: (qmail 25917 invoked by uid 500); 24 Jun 2009 14:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25863 invoked by uid 500); 24 Jun 2009 14:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25853 invoked by uid 99); 24 Jun 2009 14:44:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:44:36 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport4.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:44:28 +0000
X-SBRS: None
X-MID: 137477224
Received: from fmd3tj002.fda.gov ([10.160.10.77])
  by ironport4.fda.gov with ESMTP; 24 Jun 2009 10:44:07 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.61]) by FMD3TJ002.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Jun 2009 10:44:07 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: OutOfMemoryError using IndexWriter
Date: Wed, 24 Jun 2009 10:44:01 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73C42@FMD3VS012.fda.gov>
In-reply-to: <E28B87DDBA121F45B476C053B2171F0E596BDC@mail.intermediate.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn0ov3xSSJwWA3lSMeUA7HWxG99HQAMCa5QAACD5/AAADukMAAASk6oAACFZyA=
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de> <F8A04958BB57B64096F9BE6B9572564304C73C3F@FMD3VS012.fda.gov> <E28B87DDBA121F45B476C053B2171F0E596BDA@mail.intermediate.de> <F8A04958BB57B64096F9BE6B9572564304C73C41@FMD3VS012.fda.gov> <E28B87DDBA121F45B476C053B2171F0E596BDC@mail.intermediate.de>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Jun 2009 14:44:07.0483 (UTC) FILETIME=[3A4B48B0:01C9F4DA]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
Hi Stefan,

Generally, I run the memory monitor and see how much of it is being =
used. The total memory usage by application, is what we see on the =
monitor. So long as it is less that 1.8GB things are fine.=20

In your case, you are assuming that the program takes only 50MB, which =
may be actually very different from the actual usage. In my =
observations, memory usage by the application rarely caused issues. The =
only thing that affected us was the Lucene index file(s). Our physical =
memory is 4GB (even though JVM sees only about 1.8GB).

Sincerely,
Sithu=20
-----Original Message-----
From: stefan [mailto:stefan@intermediate.de]=20
Sent: Wednesday, June 24, 2009 10:23 AM
To: java-user@lucene.apache.org
Subject: AW: OutOfMemoryError using IndexWriter


Hi,

does Lucene keep the complete index in memory ?
As stated before the result index is 50MB, this would correlate with the =
memory footprint required by Lucene as seen in my app:
jvm 120MB - 50MB(Lucene) - 50MB(my App) =3D something left
jvm 100MB - 50MB(Lucene) - 50MB(my App) =3D OOError

though some hint, whether this is the case, from the programming side =
would be appreciated ...

Stefan


-----Urspr=FCngliche Nachricht-----
Von: Sudarsan, Sithu D. [mailto:Sithu.Sudarsan@fda.hhs.gov]
Gesendet: Mi 24.06.2009 16:18
An: java-user@lucene.apache.org
Betreff: RE: OutOfMemoryError using IndexWriter
=20
When the segments are merged, but not optimized. It happened at 1.8GB to =
our program, and now we develop and test in Win32 but run the code on =
Linux, which seems to be handling atleast upto 3GB of index.=20

In fact, if the index size if beyond 1.8GB even, Luke throws Java Heap =
Error, if I try to open.

Please post your results/views.


Sincerely,
Sithu=20
-----Original Message-----
From: stefan [mailto:stefan@intermediate.de]=20
Sent: Wednesday, June 24, 2009 10:08 AM
To: java-user@lucene.apache.org
Subject: AW: OutOfMemoryError using IndexWriter


Hi,

I do use Win32.

What do you mean by "the index file before
optimizations crosses your jvm memory usage settings (if say 512MB)" ?

Could you please further explain this ?

Stefan

-----Urspr=FCngliche Nachricht-----
Von: Sudarsan, Sithu D. [mailto:Sithu.Sudarsan@fda.hhs.gov]
Gesendet: Mi 24.06.2009 15:55
An: java-user@lucene.apache.org
Betreff: RE: OutOfMemoryError using IndexWriter
=20

 Hi Stefan,

Are you using Windows 32 bit? If so, sometimes, if the index file before
optimizations crosses your jvm memory usage settings (if say 512MB),
there is a possibility of this happening.=20

Increase JVM memory settings if that is the case.=20


Sincerely,
Sithu D Sudarsan

Off: 301-796-2587

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: stefan [mailto:stefan@intermediate.de]=20
Sent: Wednesday, June 24, 2009 4:09 AM
To: java-user@lucene.apache.org
Subject: OutOfMemoryError using IndexWriter

Hi,

I am using Lucene 2.4.1 to index a database with less than a million
records. The resulting index is about 50MB in size.
I keep getting an OutOfMemory Error if I re-use the same IndexWriter to
index the complete database. This is though=20
recommended in the performance hints.
What I now do is, every 10000 Objects I close the index (and every 50
close actions optimize it) and create a new
IndexWriter to continue. This process works fine, but to me seems hardly
the recommended way to go.
I've been using jhat/jmap as well as Netbeans profiler and am fairly
sure that this is a problem related to Lucene.

Any Ideas - or post this to Jira ? Jira has quite a few OutOfMemory
postings but they all seem closed in Version 2.4.1.

Thanks,

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 14:46:57 2009
Return-Path: <java-user-return-40879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31304 invoked from network); 24 Jun 2009 14:46:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 14:46:57 -0000
Received: (qmail 35981 invoked by uid 500); 24 Jun 2009 14:47:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35928 invoked by uid 500); 24 Jun 2009 14:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35918 invoked by uid 99); 24 Jun 2009 14:47:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:47:05 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 14:46:55 +0000
Received: by yxe1 with SMTP id 1so1136823yxe.29
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 07:46:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.135.1 with SMTP id m1mr2676195ybn.124.1245854794210; Wed, 
	24 Jun 2009 07:46:34 -0700 (PDT)
In-Reply-To: <831976.74805.qm@web50312.mail.re2.yahoo.com>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
	 <831976.74805.qm@web50312.mail.re2.yahoo.com>
Date: Wed, 24 Jun 2009 10:46:34 -0400
Message-ID: <9ac0c6aa0906240746o9e112d9w41046dee2603456a@mail.gmail.com>
Subject: Re: Setting swappiness
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

My opinion is swappiness should generally be set to zero, thus turning
off "swap core out in favor of IO cache".

I don't think the OS's simplistic LRU policy is smart enough to know
which RAM (that Lucene had allocated & filled) are OK to move to
disk.  EG you see the OS evict stuff because Lucene does a big segment
merge (because from Java we can't inform the OS *not* to cache those
bytes).

Lucene loads the terms index, deleted docs bit vector, norms and
FieldCache's into RAM.  Just because my search app hasn't been used in
a while doesn't mean the OS should up and swap stuff out, because then
when a query finally does come along, that query pays a massive
swapfest price.

So highish swappiness (the default in many linux distros) can really
kill a search app that has 1) a big index, and 2) relatively slow
query rate.  If the query rate is fast, it should keep the pages hot
and the OS shouldn't swap them out too badly.

I don't like swappiness in a desktop setting either: I hate coming
back to a unix desktop to discover say my web browser and mail program
were 100% swapped out because say my mencoder was reading & writing
lots of bytes (OK, so mencoder should have called
madvise/posix_fadvise so that the OS wouldn't put those bytes into the
IO cache in the first place, but it doesn't seem to... and other IO
intensive programs seem not to as well).  You then wait for a looong
time while a swapfest ensues, to get those pages back in RAM, just to
check your email.  I don't like waiting ;) I've disabled swapping
entirely on my desktop for this reason.

Windows (at least Server 2003) has an "Adjust for best performance of
Programs vs System Cache" as well, which I'm guessing is the same
thing as swappiness.

Even as we all switch to SSDs, which'll make swapping back in alot
faster, it's still far slower than had things not been swapped out in
the first place.

I'll add "check your swappiness" to the ImproveSearchPerformance page!

Mike


On Wed, Jun 24, 2009 at 10:02 AM, Otis
Gospodnetic<otis_gospodnetic@yahoo.com> wrote:
>
> Stealing this thread/idea, but changing subject, so we can branch and I d=
on't look like a thread thief.
>
>
> I never played with /proc/sys/vm/swappiness, but I wonder if there are po=
ints in the lifetime of an index where this number should be changed. =A0Fo=
r example, does it make sense to in/decrease that number once we know the i=
ndex is going to be read-only for a while? =A0Does it make sense to in/decr=
ease it during merges or optimizations?
>
> Thanks,
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Michael McCandless <lucene@mikemccandless.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, June 24, 2009 5:06:25 AM
>> Subject: Re: Analyzing performance and memory consumption for boolean qu=
eries
>>
>> Is it possible the occasional large merge is clearing out the IO cache
>> (thus "unwarming" your searcher)? =A0(Though since you're rsync'ing your
>> updates in, it sounds like a separate machine is building the index).
>>
>> Or... linux will happily swap out a process's core in favor of IO
>> cache (though I'd expect this effect to be much less spikey). =A0You can
>> tune "swappiness" to have it not do that:
>>
>> =A0 =A0 http://kerneltrap.org/node/3000
>>
>> Maybe Lucene's norms/deleted docs/field cache were getting swapped out?
>>
>> Lucene's postings reside entirely on disk (ie, Lucene doesn't cache
>> those in RAM; we rely on the OS's IO cache). =A0Lucene does a linear
>> scan through the terms in the query... Linux will readahead, though,
>> if things are fragmented this could mean lots of seeking.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 15:51:04 2009
Return-Path: <java-user-return-40880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53276 invoked from network); 24 Jun 2009 15:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 15:51:04 -0000
Received: (qmail 79296 invoked by uid 500); 24 Jun 2009 15:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79232 invoked by uid 500); 24 Jun 2009 15:51:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79222 invoked by uid 99); 24 Jun 2009 15:51:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 15:51:12 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 15:51:04 +0000
Received: by gxk11 with SMTP id 11so1313616gxk.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 08:50:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.38.19 with SMTP id q19mr2782540ybj.76.1245858642880; Wed, 
	24 Jun 2009 08:50:42 -0700 (PDT)
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
	 <9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
	 <9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
	 <9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de>
Date: Wed, 24 Jun 2009 11:50:41 -0400
Message-ID: <9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jun 24, 2009 at 10:18 AM, stefan<stefan@intermediate.de> wrote:
>
> Hi,
>
>
>>OK so this means it's not a leak, and instead it's just that stuff is
>>consuming more RAM than expected.
> Or that my test db is smaller than the production db which is indeed the case.

But a "leak" would keep leaking over time, right?  Ie even a 1 GB heap
on your test db should eventually throw OOME if there's really a leak.

> Please explain those buffered deletes in a few more details.

Are you calling updateDocument (which deletes then adds)?

Deletes (the Term or Query you pass to updateDocument or
deleteDocuments) are buffered in a HashMap and then that buffer is
materialized into actual deleted doc IDs when IndexWriter decides to
do so.  I think IndexWriter isn't properly flushing the deletes when
they use too much RAM.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 15:53:53 2009
Return-Path: <java-user-return-40881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53647 invoked from network); 24 Jun 2009 15:53:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 15:53:53 -0000
Received: (qmail 83883 invoked by uid 500); 24 Jun 2009 15:54:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83818 invoked by uid 500); 24 Jun 2009 15:54:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83800 invoked by uid 99); 24 Jun 2009 15:54:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 15:54:01 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 15:53:53 +0000
Received: by yxe1 with SMTP id 1so1210130yxe.29
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 08:53:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.139.8 with SMTP id r8mr2777545ybn.117.1245858811432; Wed, 
	24 Jun 2009 08:53:31 -0700 (PDT)
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BDC@mail.intermediate.de>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
	 <F8A04958BB57B64096F9BE6B9572564304C73C3F@FMD3VS012.fda.gov>
	 <E28B87DDBA121F45B476C053B2171F0E596BDA@mail.intermediate.de>
	 <F8A04958BB57B64096F9BE6B9572564304C73C41@FMD3VS012.fda.gov>
	 <E28B87DDBA121F45B476C053B2171F0E596BDC@mail.intermediate.de>
Date: Wed, 24 Jun 2009 11:53:31 -0400
Message-ID: <9ac0c6aa0906240853g1d3a009esfdf70d47cbe29ed1@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jun 24, 2009 at 10:23 AM, stefan<stefan@intermediate.de> wrote:

> does Lucene keep the complete index in memory ?

No.

Certain things (deleted docs, norms, field cache, terms index) are
loaded into memory, but these are tiny compared to what's not loaded
into memory (postings, stored docs, term vectors).

> As stated before the result index is 50MB, this would correlate with the memory footprint required by Lucene as seen in my app:
> jvm 120MB - 50MB(Lucene) - 50MB(my App) = something left
> jvm 100MB - 50MB(Lucene) - 50MB(my App) = OOError

I think this is just coincidence.

MIke

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 16:53:52 2009
Return-Path: <java-user-return-40882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71680 invoked from network); 24 Jun 2009 16:53:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 16:53:52 -0000
Received: (qmail 93302 invoked by uid 500); 24 Jun 2009 16:54:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93247 invoked by uid 500); 24 Jun 2009 16:54:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93237 invoked by uid 99); 24 Jun 2009 16:54:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 16:54:00 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.208.4.194] (HELO mout.perfora.net) (74.208.4.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 16:53:50 +0000
Received: from [192.168.0.4] (c-98-247-68-154.hsd1.wa.comcast.net [98.247.68.154])
	by mrelay.perfora.net (node=mrus0) with ESMTP (Nemesis)
	id 0MKp8S-1MJVix3eJ4-000SdP; Wed, 24 Jun 2009 12:53:29 -0400
Message-ID: <4A425A1A.7080303@imcsoftware.com>
Date: Wed, 24 Jun 2009 09:53:46 -0700
From: Kris Leite <kleite@imcsoftware.com>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: updateDocument and high Memory Usage
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: V01U2FsdGVkX18L0qDH9q1YcTY2vISyBxekF9PIUQolO88QcXg
 NOzAySZsT/UCBE1aurW/J4LkE3CDtxDpJxSJuQ5nd0A+XRs0tw
 s7hbia1gS0Kq0cngHwTZw==
X-Virus-Checked: Checked by ClamAV on apache.org

I was wondering if anybody else that has been using updateDocument 
noticed it uses a large amount of memory when updating an existing document.

For example, when using updateDocument on an empty Lucene directory, the 
resulting 12K documents creates a 3MB index, the amount of memory the 
program uses is 270MB.  When the program is executed again, this time 
updating all 12K documents with the same exact same data, the program 
will take all available memory allocated to the JVM.  The largest I used 
was 1024MB.  No out of memory errors occurred but the memory also was 
not released after closing all the readers and writers.

I was extremely surprised by this.  By running the program multiple 
times making sure that the code path does not change when deleting the 
Lucene directory to effectively add verses update.  I get very 
consistent results.  Adding is very stable at 270MB, but updating 
existing documents maxes out the JVM memory allocation.

Is there a configuration option that can be used to adjust the memory 
usage? 

I have tried doing separate delete/add code and get similar results so 
it appears to be more of a Lucene delete document issue?

Any help would be greatly appreciated.

Thanks,
Kris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 17:30:46 2009
Return-Path: <java-user-return-40883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89674 invoked from network); 24 Jun 2009 17:30:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 17:30:45 -0000
Received: (qmail 61185 invoked by uid 500); 24 Jun 2009 17:30:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61127 invoked by uid 500); 24 Jun 2009 17:30:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61117 invoked by uid 99); 24 Jun 2009 17:30:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 17:30:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of radha84@gmail.com designates 209.85.222.197 as permitted sender)
Received: from [209.85.222.197] (HELO mail-pz0-f197.google.com) (209.85.222.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 17:30:45 +0000
Received: by pzk35 with SMTP id 35so880453pzk.29
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 10:30:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=nqyqI0rMD6SZHhIs028+UHguM5Kl3H/Z5Umigf10cFU=;
        b=WaNz4guwlUjydQl+n6e35S26Kj4CiC8xCjOsTAqPBhwIsKG3IPoaQGKRTdTK9GnswN
         C3dEEyI1pZZ6ajonZ/X50HJq0MAi7geW1j9CM+GrMRkIghqAXK52ip31/8WeIq0qiReV
         FsKsFo0TdbFMt1qdBWhsTj9VtkUb1Q4s4ulME=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Lu7O2QBexhHUDzfm+rbBhrPBdrZqp0Oz6OxKfU4gjg4ETAQ5QvTqKipZdXe0b0J1hZ
         Uzvlh+cgQMLYQnc4tPpbyjRu68PiXSDx7mgxFsar7uJEYrp8tTEaRcPsOriqj3aSDizR
         VQS4BX45wa1peOjgEoIdYZPLfV474lrwhQDQA=
MIME-Version: 1.0
Received: by 10.142.140.6 with SMTP id n6mr465586wfd.212.1245864623951; Wed, 
	24 Jun 2009 10:30:23 -0700 (PDT)
Date: Wed, 24 Jun 2009 23:00:23 +0530
Message-ID: <45e5f8bb0906241030v60c20834g5c7a4344b0cf4f8e@mail.gmail.com>
Subject: Searching for a special character
From: Radha Sreedharan <radha84@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2dc585950c1046d1b76e4
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2dc585950c1046d1b76e4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all,

I am using a Standard analyzer on both my search field and my query.
I use a  SpanNearQuery to search on the search field.
One of the query terms has  special characters like ( - round open bracket
and ) - round close bracket  : How does Lucene handle this?
Also, the search field has ( and  ) : How does Lucene handle this? Is it
treated as white space and ignored?

Is it possible to search for special characters ? ie if my query has ) then
it should search for it and only if my search field has ) , it should give
me a hit.

Regards,
Radha

--000e0cd2dc585950c1046d1b76e4--

From java-user-return-40884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 17:35:40 2009
Return-Path: <java-user-return-40884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92980 invoked from network); 24 Jun 2009 17:35:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 17:35:40 -0000
Received: (qmail 75151 invoked by uid 500); 24 Jun 2009 17:35:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75111 invoked by uid 500); 24 Jun 2009 17:35:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75101 invoked by uid 99); 24 Jun 2009 17:35:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 17:35:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 17:35:41 +0000
Received: by bwz22 with SMTP id 22so51303bwz.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 10:35:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=O4O++en1+8g1jgJxzUn+/65zmHrq20DbzKHr3TYjDvY=;
        b=BQV5CfxZ0Q4D93iUSoZiMHssuiTzmmKcnlpeW5YBA+B4eSlBWQWQQBM+6pGPWvO0Q2
         fodpO5o1seTUVIjECsxEGlbOwcsKWMY6JRRJNErR/q26QDX6eHajy6R1ouwk1wtNdv7R
         Ayx3F88S6hctcgmDHVK+1pN6T9N8CmluAFdf4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=pRrH5UYJ2mW40YXePMwNQGunUvCMnpvBapxvPwFlus8SIgFP+1yTReQk1q7j/nw7Bb
         lFqZQNSxr9Oah4TVR+NcjtXDUlmytEntCnEo68xC6ZpBblExmtyMsAGfW2dPPf5xghAm
         AhIEE+ZgbhrbNqoyGN86wziHwnbkJdCb2C43s=
MIME-Version: 1.0
Received: by 10.204.77.78 with SMTP id f14mr1521100bkk.76.1245864919679; Wed, 
	24 Jun 2009 10:35:19 -0700 (PDT)
In-Reply-To: <p06240809c6670270c70a@192.168.1.43>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <p06240809c6670270c70a@192.168.1.43>
Date: Wed, 24 Jun 2009 13:35:19 -0400
Message-ID: <843920a30906241035w2825984cq647ccde83cd339ee@mail.gmail.com>
Subject: Re: Analyzing performance and memory consumption for boolean queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f79470f9c46b046d1b87be
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f79470f9c46b046d1b87be
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Ken,

Thanks for your reply.  I agree that your overall diagnosis (GC problems
and/or swapping) sounds likely.  To follow up on some the specific things
you mentioned:

2. 250M/4 = 60M docs/index. The old rule of thumb was 10M docs/index as a
> reasonable size. You might just need more hardware.


I'm curious if there's any practical difference in terms of memory overhead
between several smaller indexes vs. fewer bigger indexes.  For example, if
we had 25 indexes of 10M docs each on the same server, would it be more or
less efficient than 4 indexes of 60M docs each?  (Assuming that they're
partitioned so that a given search doesn't have to aggregate results from
many indexes.)


> 3. We had better luck running more JVMs per system, versus one JVM with
> lots of memory. E.g. run 3 32-bit JVMs with 1.5GB/JVM. Though this assumes
> you've got one drive/JVM, to avoid disk contention.


Good point; I've run into this approach before when dealing with very large
heap sizes and lots of GC.  My impression is that GC improvements in the JVM
over the years has made this less beneficial than it used to be.  I wonder
in this case whether the benefit was really the separate disks rather than
the separate JVMs.

4. I'm assuming, since you don't care about scoring, that you've turned of
> field norms. There are other optimizations you can do to speed up
> query-style searches (find all docs that match X) when you don't care about
> scores, but others on the list are much better qualified to provide input in
> this area.


That's correct; we don't store norms.  I've read up on some of the other
techniques, such as cached filters, but that seems most appropriate when
you're doing the same or similar queries frequently, and in our case the
queries are fairly different.  Also, more caching could just lead to more GC
and swapping issues.


> 5. It seems like storing content outside the index helps with performance,
> though I can't say for certain what the impact might be. E.g. only store a
> single unique ID field in the index, and use that to access the content
> (say, from a MapFile) when you're processing the matched entries.


I've thought about this as well, and I know people sometimes store the docs
themselves in things like Berkeley DB.  But, since in Lucene the stored
fields are not cached in memory (apart from OS caching), it doesn't seem
like storing things in Lucene should make searching itself slower.  In other
words, if you're going to load the doc from disk somehow (Lucene or BDB or
flat file or whatever), it might as well be in Lucene to keep things
architecturally simpler.  Of course, it could be more efficient to move the
document store to a different server, but a similar benefit could be
achieved by moving some of the Lucene indexes to a different server.

Thanks,
Chris

--001485f79470f9c46b046d1b87be--

From java-user-return-40885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 18:11:40 2009
Return-Path: <java-user-return-40885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11725 invoked from network); 24 Jun 2009 18:11:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 18:11:40 -0000
Received: (qmail 18660 invoked by uid 500); 24 Jun 2009 18:11:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18584 invoked by uid 500); 24 Jun 2009 18:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18574 invoked by uid 99); 24 Jun 2009 18:11:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 18:11:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 18:11:40 +0000
Received: by qw-out-2122.google.com with SMTP id 5so287992qwi.53
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 11:11:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=VZQc+bEWGXKPZAy2FHU5lcCMkR6cRjyd1J5siKo8V/E=;
        b=KL1lCIwATLqL6JuxzLbkQ99fHGLWpqzdSi7zToPfSOJOKNSJlW39TO7zGzxFPPeDma
         VHsV8hOj4Yb+JkDHwGMEGPwxvfyP/O8Kjnkz5GfyzKCUrzbVvzAH9WegFib8rw2HP02e
         P0/4JOLzDoxbUU/2N2zRJXvuVY8ciW6mrj7s0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=A48NInWQLYnBEya/hbMd0zdoCsxgvQg0BdJLk5CtX3yLX1TYXDRgup+Php+hevkxPX
         IjMPBF5g448csmYeOoYrAwgg0ZZJiy4DCfbAIlTA8fH3krQcTvt2S6crE0HP5sfge2ni
         1OxN8xrEvM6gesaLPV5pv5iPuEM2na8nKlURI=
MIME-Version: 1.0
Received: by 10.220.100.194 with SMTP id z2mr1844875vcn.38.1245867079615; Wed, 
	24 Jun 2009 11:11:19 -0700 (PDT)
In-Reply-To: <45e5f8bb0906241030v60c20834g5c7a4344b0cf4f8e@mail.gmail.com>
References: <45e5f8bb0906241030v60c20834g5c7a4344b0cf4f8e@mail.gmail.com>
Date: Wed, 24 Jun 2009 14:11:19 -0400
Message-ID: <359a92830906241111x2e506e3bp95ab0c0ab66c72eb@mail.gmail.com>
Subject: Re: Searching for a special character
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64f6a66b7ca17046d1c0815
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64f6a66b7ca17046d1c0815
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

First, I highly, highly recommend you get a copy of Luke to examineyour
index. It'll also help you understand the role of Analyzers.

Your first problem is that StandardAnalyzer probably removes
the open and close parens. See:
http://lucene.apache.org/java/2_4_1/api/index.html
so you can't search on them *even if* you escape the
terms in your query parsing correctly, see:
http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Escaping Special
Characters

You want to understand the implications of whatever
analyzer you choose, or progress will be...er...difficult <G>.

Luke will allow you to try different Analyzers and see the results of
parsing
queries, which will be a fine place to start...

Best
Erick

On Wed, Jun 24, 2009 at 1:30 PM, Radha Sreedharan <radha84@gmail.com> wrote:

> Hi all,
>
> I am using a Standard analyzer on both my search field and my query.
> I use a  SpanNearQuery to search on the search field.
> One of the query terms has  special characters like ( - round open bracket
> and ) - round close bracket  : How does Lucene handle this?
> Also, the search field has ( and  ) : How does Lucene handle this? Is it
> treated as white space and ignored?
>
> Is it possible to search for special characters ? ie if my query has ) then
> it should search for it and only if my search field has ) , it should give
> me a hit.
>
> Regards,
> Radha
>

--0016e64f6a66b7ca17046d1c0815--

From java-user-return-40886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 18:24:50 2009
Return-Path: <java-user-return-40886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26407 invoked from network); 24 Jun 2009 18:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 18:24:50 -0000
Received: (qmail 31094 invoked by uid 500); 24 Jun 2009 18:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31032 invoked by uid 500); 24 Jun 2009 18:24:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31022 invoked by uid 99); 24 Jun 2009 18:24:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 18:24:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 18:24:47 +0000
Received: by an-out-0708.google.com with SMTP id b6so440582ana.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 11:24:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=YhRMW6BN72TbHtmeUEscPeoBfhMn5hRGvstmgVivXto=;
        b=SfF7h7ZYk+MZIz7phffzBIFaf14PW4rb3wK32ks6s0PX8nAWdU3GvP/JICwp2qPOPY
         rkPFm7U30tSxDEanmxCLvlQJcw0r6yW7lCDZ2lxPC5gilzsKxicAk2IR/O9ob0zOXfeT
         3ZYRVpksqddf0wiUgTF9s6Uo4zNYPRRXudDtI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=EFEXa0eSrSHMkFrSqqx4FjrHRX+l2E3Nwe9ceYP2eiSQa/SdEYVlwP44iAHcvOeu/b
         3gN8zDOUHKinMTA0DPIDrjdE+0eOgZHJcmpE7jeQ9ixjJdtFhSQA4aEq6sjwMC+/WSNg
         j4g+ghwBTN3XKgjIqM8o3Kr4q8bfm3Yiwz8P0=
MIME-Version: 1.0
Received: by 10.100.248.16 with SMTP id v16mr2170574anh.60.1245867866781; Wed, 
	24 Jun 2009 11:24:26 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <359a92830906241111x2e506e3bp95ab0c0ab66c72eb@mail.gmail.com>
References: <45e5f8bb0906241030v60c20834g5c7a4344b0cf4f8e@mail.gmail.com>
	 <359a92830906241111x2e506e3bp95ab0c0ab66c72eb@mail.gmail.com>
Date: Wed, 24 Jun 2009 20:24:26 +0200
Message-ID: <f18c9dde0906241124w292a945dife9d67b3952aac7e@mail.gmail.com>
Subject: Re: Searching for a special character
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Beside choosing the right analyzer you could run into problems if you
use a query parser as it will interpret you parentesis.

simon

On Wed, Jun 24, 2009 at 8:11 PM, Erick Erickson<erickerickson@gmail.com> wr=
ote:
> First, I highly, highly recommend you get a copy of Luke to examineyour
> index. It'll also help you understand the role of Analyzers.
>
> Your first problem is that StandardAnalyzer probably removes
> the open and close parens. See:
> http://lucene.apache.org/java/2_4_1/api/index.html
> so you can't search on them *even if* you escape the
> terms in your query parsing correctly, see:
> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Escaping Speci=
al
> Characters
>
> You want to understand the implications of whatever
> analyzer you choose, or progress will be...er...difficult <G>.
>
> Luke will allow you to try different Analyzers and see the results of
> parsing
> queries, which will be a fine place to start...
>
> Best
> Erick
>
> On Wed, Jun 24, 2009 at 1:30 PM, Radha Sreedharan <radha84@gmail.com> wro=
te:
>
>> Hi all,
>>
>> I am using a Standard analyzer on both my search field and my query.
>> I use a =C2=A0SpanNearQuery to search on the search field.
>> One of the query terms has =C2=A0special characters like ( - round open =
bracket
>> and ) - round close bracket =C2=A0: How does Lucene handle this?
>> Also, the search field has ( and =C2=A0) : How does Lucene handle this? =
Is it
>> treated as white space and ignored?
>>
>> Is it possible to search for special characters ? ie if my query has ) t=
hen
>> it should search for it and only if my search field has ) , it should gi=
ve
>> me a hit.
>>
>> Regards,
>> Radha
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 18:42:45 2009
Return-Path: <java-user-return-40887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33094 invoked from network); 24 Jun 2009 18:42:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 18:42:45 -0000
Received: (qmail 46841 invoked by uid 500); 24 Jun 2009 18:42:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46773 invoked by uid 500); 24 Jun 2009 18:42:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46763 invoked by uid 99); 24 Jun 2009 18:42:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 18:42:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 18:42:44 +0000
Received: by bwz22 with SMTP id 22so92684bwz.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 11:42:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=e+9mvJtILHOgV93SzIIUCfBt99iMJOLGYqhzfhSMb5A=;
        b=v2WNj4H8naPKaJVxYRys9F3rI6FPdeUeiHMrTE+E87zGLuBEvpyJ7/Iph+LG6L1AQQ
         189XlMK7SubGY4HrICvigRptNRtLv7AfvLEpKf27PFk6uurdaixwVZyguVGBUhGphcsO
         hJ4Xc1z6APDn4jRSlAAuBxG75lVwsxaSPVnf0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ubwm3k4oNrWDQZ395DOmH6OwPs8XNfxHAAGYylT1pgmaAAP5YvtbCJsnEME+qhdrBx
         AX140VWcXzYtNXcc6VtvSaSoQKzTBYtOZL7KL4PhiHnHbuI95Gn9OocT0OpdvCD4KaBF
         Y6s1djkYlJ889Va7q2a2yFSqm6hnHoAHrzlJk=
MIME-Version: 1.0
Received: by 10.204.31.82 with SMTP id x18mr1581637bkc.5.1245868943308; Wed, 
	24 Jun 2009 11:42:23 -0700 (PDT)
In-Reply-To: <788989.53474.qm@web50302.mail.re2.yahoo.com>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <788989.53474.qm@web50302.mail.re2.yahoo.com>
Date: Wed, 24 Jun 2009 14:42:23 -0400
Message-ID: <843920a30906241142n121d4257n830a750f36600d9c@mail.gmail.com>
Subject: Re: Analyzing performance and memory consumption for boolean queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f772b8cd7a0a046d1c7733
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f772b8cd7a0a046d1c7733
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks Otis -- I'll give that a try.  I think this relates to the first
question in my original message, which was what (if any) of the inverted
index structure is explicitly cached by Lucene in the JVM.  Clearly there's
something, since a large JVM heap is required to avoid running out of
memory, but it can't be everything, otherwise OS caching would have no
effect.

Thanks,
Chris

On Tue, Jun 23, 2009 at 11:16 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

>
> Nigel,
>
> Based on the description, I'd suspect unnecessarily(?) large JVM heap and
> insufficient RAM for caching the actual index.  Run vmstat while querying
> the index and watch columns: bi, bo, si, so, wa, and id. :)  If what I said
> above is correct, then you should see more data loaded from disk during
> those clow queries and probably a jump in the wa column if you are running
> multiple concurrent queries.
>
>  Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>

--001485f772b8cd7a0a046d1c7733--

From java-user-return-40888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 18:54:25 2009
Return-Path: <java-user-return-40888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37290 invoked from network); 24 Jun 2009 18:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 18:54:24 -0000
Received: (qmail 65525 invoked by uid 500); 24 Jun 2009 18:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65475 invoked by uid 500); 24 Jun 2009 18:54:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65465 invoked by uid 99); 24 Jun 2009 18:54:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 18:54:33 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 18:54:23 +0000
Received: by bwz22 with SMTP id 22so99577bwz.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 11:54:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ht4r0tYIPgintjDAol9m6N0bz+nWfJ1LjmduTIZbTvo=;
        b=TeudajD/sqHFzqF7z5N0ZNBYI0o5DGPI20dllVGGlFf8zcbUGBjKg3F/ZlZPI47BBa
         nz/5g0gc8S3dcuqnpx6GYTBpaDZ3lLZAxzBEmG5h/h6xRgS9yOJzFp+VEzzF4jZuAi1W
         OgH3hp4M3/K6izop/vH/HwD7xANdfgkAyJCeg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=i5JGioK03iPvl8ci+a2f45OFMUWpQokdaJNsVH63J8GJECY7nAxXjr9ctfbjv9nXuZ
         59/OETWQkeFantNpVfkHraqLTvCng3thTmX128NrmLQwTIusva+h8Ypl18UCHiRC6Wn5
         O7lm8BKg74Z5U6qirZrMh5N9DEeiqeFjXCot4=
MIME-Version: 1.0
Received: by 10.204.55.140 with SMTP id u12mr1534368bkg.127.1245869643357; 
	Wed, 24 Jun 2009 11:54:03 -0700 (PDT)
In-Reply-To: <5A007EE2ACD1449297B14DEB2CE02C9B@VEGA>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <p06240809c6670270c70a@192.168.1.43>
	 <5A007EE2ACD1449297B14DEB2CE02C9B@VEGA>
Date: Wed, 24 Jun 2009 14:54:03 -0400
Message-ID: <843920a30906241154m66f477f1n970aad5cc75e6371@mail.gmail.com>
Subject: Re: Analyzing performance and memory consumption for boolean queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c924d9875d3b046d1ca1c4
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c924d9875d3b046d1ca1c4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Uwe,

Good points, thank you.  The obvious place where GC really has to work hard
is when index changes are rsync'd over and we have to open the new index and
close the old one.  Our slow performance times don't seem to be directly
correlated with the index rotation, but maybe it just appears that way,
since it may take a little while before GC kicks in to try to recover the
objects used by the closed index.

Chris

On Wed, Jun 24, 2009 at 3:33 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> I had similar problems with our configuration, too. Suddenly sometimes the
> server even did not respond. The problem was (I think is the same here):
> the
> GC. The standard Java GC is not multithreaded, so if you have lots of
> traffic at some time, the JVM halts all threads and starts to GC, which can
> take very long time with so big heap sizes.
>
> On our server with indexes of similar disk space size (not documents), I
> changed the JVM options to use:
>
> -Xms4096M -Xmx8192M -XX:MaxPermSize=512M -Xrs -XX:+UseConcMarkSweepGC
> -XX:+UseParNewGC -verbosegc -XX:+PrintGCDetails -XX:+UseLargePages
>
>

--001636c924d9875d3b046d1ca1c4--

From java-user-return-40889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 19:38:31 2009
Return-Path: <java-user-return-40889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52192 invoked from network); 24 Jun 2009 19:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 19:38:31 -0000
Received: (qmail 11861 invoked by uid 500); 24 Jun 2009 19:38:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11812 invoked by uid 500); 24 Jun 2009 19:38:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11802 invoked by uid 99); 24 Jun 2009 19:38:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 19:38:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 19:38:28 +0000
Received: by bwz22 with SMTP id 22so125478bwz.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 12:38:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=r53gQeL+tn9//K4spMTnTwendyPYCazdpPwUEHn4WLQ=;
        b=ijvA/5BzAQalCQdxYGsFks44u8mN5wpcrJYmJAcPu2qlBUcJl1z4bSmweiarok5BFi
         bF1y5RZAUXdwS8NTVyDL6TC+zLnGi0YIaUilo5Mqum75mTfPvTM7SWMhbazgyOEAmnCP
         8IpG8PNm/AirIB1gFZyUGGwAOs0t+Gbt6Cdvk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PDnoJxHtp2e/fw9iCKIqszwVkwaxWhhBoUGukQE7Zb7dIygS9Jq+jQeOgNc5ZhXigb
         LUOfmi0r4oWCKEemCkiznvlwzDOGNTGRNprY7FCw/XdiyGGqvh3C7zknpekFUS2jaI8d
         S1TKiVv5vju06UDATkJpwzdGIAWiBO8G6zCo0=
MIME-Version: 1.0
Received: by 10.204.55.15 with SMTP id s15mr1615239bkg.53.1245872287771; Wed, 
	24 Jun 2009 12:38:07 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
Date: Wed, 24 Jun 2009 15:38:07 -0400
Message-ID: <843920a30906241238g2a7c1ffes93384ee00788b391@mail.gmail.com>
Subject: Re: Analyzing performance and memory consumption for boolean queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5990b25ee6d046d1d3f9f
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5990b25ee6d046d1d3f9f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Mike,

Yes, we're indexing on a separate server, and rsyncing from index snapshots
there to the search servers.  Usually rsync has to copy just a few small
.cfs files, but every once in a while merging will product a big one.  I'm
going to try to limit this by setting maxMergeMB, but of course that's a
trade-off with having more segments.

It sounds like surely any swapping out of the JVM memory could cause big and
unpredictable performance drops.  As I just mentioned in reply to Uwe, our
poor performance times don't always directly correlate with index updates,
but it may be that the damage is done and the effects are only seen sometime
later.

We don't store norms (since we don't care about sort order), and we don't
have any deleted docs (since the index is read-only on the search servers).
What exactly is stored in the field cache?

p.s. I haven't tried SSDs yet, or for that matter faster disks of any sort.
First I'd like to get a better understanding of what I/O is required and
when during the search process, ideally to be able to have an approximate
model that predicts I/O based on the query (the way a DBA might do when
estimating how a SQL query would work with certain tables and indexes).

Thanks,
Chris

On Wed, Jun 24, 2009 at 5:06 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Is it possible the occasional large merge is clearing out the IO cache
> (thus "unwarming" your searcher)?  (Though since you're rsync'ing your
> updates in, it sounds like a separate machine is building the index).
>
> Or... linux will happily swap out a process's core in favor of IO
> cache (though I'd expect this effect to be much less spikey).  You can
> tune "swappiness" to have it not do that:
>
>    http://kerneltrap.org/node/3000
>
> Maybe Lucene's norms/deleted docs/field cache were getting swapped out?
>
> Lucene's postings reside entirely on disk (ie, Lucene doesn't cache
> those in RAM; we rely on the OS's IO cache).  Lucene does a linear
> scan through the terms in the query... Linux will readahead, though,
> if things are fragmented this could mean lots of seeking.
>
> Have you tried putting the index on an SSD instead of a spinning magnetic
> disk?
>
> Mike
>

--001636c5990b25ee6d046d1d3f9f--

From java-user-return-40890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 19:54:33 2009
Return-Path: <java-user-return-40890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55820 invoked from network); 24 Jun 2009 19:54:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 19:54:33 -0000
Received: (qmail 34436 invoked by uid 500); 24 Jun 2009 19:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34372 invoked by uid 500); 24 Jun 2009 19:54:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34362 invoked by uid 99); 24 Jun 2009 19:54:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 19:54:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.220.207 as permitted sender)
Received: from [209.85.220.207] (HELO mail-fx0-f207.google.com) (209.85.220.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 19:54:32 +0000
Received: by fxm3 with SMTP id 3so1074653fxm.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 12:54:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=l/0vQl5dgKPgb9NC6IgR6M54AaS8v0Lz1mYhIMmLKo8=;
        b=jyg3ok1/HuP/A8/JbeFgWquCGh9UCMtRBmTSPYnrGSDM+FRMu8yMrYMRzomqSIBbiv
         Buv9SZ0vV7WMoPi1HXBBfMp2Q+3q2II0IKxV652CrUN3R+GG+m1KPhggRmqe9O4Td5nd
         qry0NtgPdL6J6lsCu8d4zPSac26/Ia5Mt5Z08=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lWbVYm/XVdegMO2/TKZe5nH8QQEWnAtfJAOw2WNOLtu8ObLspR2qwPROMCc0AetbHp
         soOkBvbbJ9WvTDRCN4pNv2chghztvLBnuparJ6VMBUaQpWKvothkPUfKBoCYCVoB4U0F
         97l+EmNJAZq0dXDCPHGIyDFU1Hi42pJxGUjlI=
MIME-Version: 1.0
Received: by 10.204.52.146 with SMTP id i18mr1632664bkg.82.1245873252109; Wed, 
	24 Jun 2009 12:54:12 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906240746o9e112d9w41046dee2603456a@mail.gmail.com>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
	 <831976.74805.qm@web50312.mail.re2.yahoo.com>
	 <9ac0c6aa0906240746o9e112d9w41046dee2603456a@mail.gmail.com>
Date: Wed, 24 Jun 2009 15:54:11 -0400
Message-ID: <843920a30906241254l4e1d6dbcjd15496f035d68576@mail.gmail.com>
Subject: Re: Setting swappiness
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5abdfa0aaed046d1d78a9
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5abdfa0aaed046d1d78a9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

This is interesting, and counter-intuitive: more queries could actually
improve overall performance.

The big-index-and-slow-query-rate does describe our situation.  I'll try
running some tests that run queries at various rates concurrent with
occasional big I/O operations that use the disk cache.  (And then set
swappiness to zero if it looks like it will help.)

Thanks,
Chris

On Wed, Jun 24, 2009 at 10:46 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> So highish swappiness (the default in many linux distros) can really
> kill a search app that has 1) a big index, and 2) relatively slow
> query rate.  If the query rate is fast, it should keep the pages hot
> and the OS shouldn't swap them out too badly.
>

--001636c5abdfa0aaed046d1d78a9--

From java-user-return-40891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 20:48:36 2009
Return-Path: <java-user-return-40891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69181 invoked from network); 24 Jun 2009 20:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 20:48:36 -0000
Received: (qmail 13474 invoked by uid 500); 24 Jun 2009 20:48:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13401 invoked by uid 500); 24 Jun 2009 20:48:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13391 invoked by uid 99); 24 Jun 2009 20:48:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 20:48:45 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 20:48:34 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 647EA45E7AB
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 22:48:12 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mpklkfxNFhQe for <java-user@lucene.apache.org>;
	Wed, 24 Jun 2009 22:48:02 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 6912B45E7C6
	for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 22:48:02 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com> <p06240809c6670270c70a@192.168.1.43> <5A007EE2ACD1449297B14DEB2CE02C9B@VEGA> <843920a30906241154m66f477f1n970aad5cc75e6371@mail.gmail.com>
Subject: RE: Analyzing performance and memory consumption for boolean queries
Date: Wed, 24 Jun 2009 22:47:58 +0200
Message-ID: <DBFB98812FD649B59286F7CE7DA2BA27@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <843920a30906241154m66f477f1n970aad5cc75e6371@mail.gmail.com>
Thread-Index: Acn0/UK34t6Oq25wQ/utZNyDU1Z8dwADx7XA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried out, if GC affects you? A first step would be to turn on GC
logging with -verbosegc -XX:+PrintGCDetails

If you see some relation between query time and gc messages, you should try
to use a better parallelized GC and change the perm size and so on (se docs
about GC tuning).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Nigel [mailto:nigelspleen@gmail.com]
> Sent: Wednesday, June 24, 2009 8:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: Analyzing performance and memory consumption for boolean
> queries
> 
> Hi Uwe,
> 
> Good points, thank you.  The obvious place where GC really has to work
> hard
> is when index changes are rsync'd over and we have to open the new index
> and
> close the old one.  Our slow performance times don't seem to be directly
> correlated with the index rotation, but maybe it just appears that way,
> since it may take a little while before GC kicks in to try to recover the
> objects used by the closed index.
> 
> Chris
> 
> On Wed, Jun 24, 2009 at 3:33 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> 
> > I had similar problems with our configuration, too. Suddenly sometimes
> the
> > server even did not respond. The problem was (I think is the same here):
> > the
> > GC. The standard Java GC is not multithreaded, so if you have lots of
> > traffic at some time, the JVM halts all threads and starts to GC, which
> can
> > take very long time with so big heap sizes.
> >
> > On our server with indexes of similar disk space size (not documents), I
> > changed the JVM options to use:
> >
> > -Xms4096M -Xmx8192M -XX:MaxPermSize=512M -Xrs -XX:+UseConcMarkSweepGC
> > -XX:+UseParNewGC -verbosegc -XX:+PrintGCDetails -XX:+UseLargePages
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 22:26:58 2009
Return-Path: <java-user-return-40892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8369 invoked from network); 24 Jun 2009 22:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 22:26:58 -0000
Received: (qmail 44317 invoked by uid 500); 24 Jun 2009 22:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44237 invoked by uid 500); 24 Jun 2009 22:27:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44227 invoked by uid 99); 24 Jun 2009 22:27:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 22:27:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 22:26:57 +0000
Received: by gxk11 with SMTP id 11so1719825gxk.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 15:26:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.200.8 with SMTP id x8mr3391503ybf.269.1245882394310; Wed, 
	24 Jun 2009 15:26:34 -0700 (PDT)
In-Reply-To: <843920a30906241238g2a7c1ffes93384ee00788b391@mail.gmail.com>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
	 <843920a30906241238g2a7c1ffes93384ee00788b391@mail.gmail.com>
Date: Wed, 24 Jun 2009 18:26:33 -0400
Message-ID: <9ac0c6aa0906241526w489deb36l74cda676580f5692@mail.gmail.com>
Subject: Re: Analyzing performance and memory consumption for boolean queries
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jun 24, 2009 at 3:38 PM, Nigel<nigelspleen@gmail.com> wrote:

> Yes, we're indexing on a separate server, and rsyncing from index snapsho=
ts
> there to the search servers. =A0Usually rsync has to copy just a few smal=
l
> .cfs files, but every once in a while merging will product a big one. =A0=
I'm
> going to try to limit this by setting maxMergeMB, but of course that's a
> trade-off with having more segments.

OK.

> It sounds like surely any swapping out of the JVM memory could cause big =
and
> unpredictable performance drops. =A0As I just mentioned in reply to Uwe, =
our
> poor performance times don't always directly correlate with index updates=
,
> but it may be that the damage is done and the effects are only seen somet=
ime
> later.

OK... I wonder whether the bytes written by rsync go into the IO
cache.  I would assume they do.  But in your case that might be OK
since presumably you'll then cutover to those new files, so, they've
been pre-warmed by rsync.

> We don't store norms (since we don't care about sort order), and we don't
> have any deleted docs (since the index is read-only on the search servers=
).

Ahh excellent.

> What exactly is stored in the field cache?

FieldCache is used when sorting by field (not relevance) and by
function queries, or, if you directly load values, eg
FieldCache.DEFAULT.getInts(...).

> p.s. I haven't tried SSDs yet, or for that matter faster disks of any sor=
t.
> First I'd like to get a better understanding of what I/O is required and
> when during the search process, ideally to be able to have an approximate
> model that predicts I/O based on the query (the way a DBA might do when
> estimating how a SQL query would work with certain tables and indexes).

Sounds like a good plan!!  And, after that, upgrade ;)  There's no
going back once you make the switch...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 22:29:08 2009
Return-Path: <java-user-return-40893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8768 invoked from network); 24 Jun 2009 22:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 22:29:08 -0000
Received: (qmail 47419 invoked by uid 500); 24 Jun 2009 22:29:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47348 invoked by uid 500); 24 Jun 2009 22:29:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47338 invoked by uid 99); 24 Jun 2009 22:29:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 22:29:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 22:29:07 +0000
Received: by gxk11 with SMTP id 11so1721787gxk.5
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 15:28:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.85.6 with SMTP id n6mr3387110ybl.329.1245882525565; Wed, 
	24 Jun 2009 15:28:45 -0700 (PDT)
In-Reply-To: <843920a30906241254l4e1d6dbcjd15496f035d68576@mail.gmail.com>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
	 <831976.74805.qm@web50312.mail.re2.yahoo.com>
	 <9ac0c6aa0906240746o9e112d9w41046dee2603456a@mail.gmail.com>
	 <843920a30906241254l4e1d6dbcjd15496f035d68576@mail.gmail.com>
Date: Wed, 24 Jun 2009 18:28:45 -0400
Message-ID: <9ac0c6aa0906241528p2bb00dd5qc09d14977b191a64@mail.gmail.com>
Subject: Re: Setting swappiness
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You can also run vmstat or iostat and watch if the high latency
queries correspond to lots of swap-ins.

Mike

On Wed, Jun 24, 2009 at 3:54 PM, Nigel<nigelspleen@gmail.com> wrote:
> This is interesting, and counter-intuitive: more queries could actually
> improve overall performance.
>
> The big-index-and-slow-query-rate does describe our situation. =A0I'll tr=
y
> running some tests that run queries at various rates concurrent with
> occasional big I/O operations that use the disk cache. =A0(And then set
> swappiness to zero if it looks like it will help.)
>
> Thanks,
> Chris
>
> On Wed, Jun 24, 2009 at 10:46 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> So highish swappiness (the default in many linux distros) can really
>> kill a search app that has 1) a big index, and 2) relatively slow
>> query rate. =A0If the query rate is fast, it should keep the pages hot
>> and the OS shouldn't swap them out too badly.
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 22:50:39 2009
Return-Path: <java-user-return-40894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11166 invoked from network); 24 Jun 2009 22:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 22:50:39 -0000
Received: (qmail 53106 invoked by uid 500); 24 Jun 2009 22:32:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53087 invoked by uid 500); 24 Jun 2009 22:32:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53077 invoked by uid 99); 24 Jun 2009 22:32:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 22:32:39 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 22:32:31 +0000
Received: by yxe1 with SMTP id 1so1632338yxe.29
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 15:32:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.135.1 with SMTP id m1mr3476502ybn.124.1245882729699; Wed, 
	24 Jun 2009 15:32:09 -0700 (PDT)
In-Reply-To: <4A425A1A.7080303@imcsoftware.com>
References: <4A425A1A.7080303@imcsoftware.com>
Date: Wed, 24 Jun 2009 18:32:09 -0400
Message-ID: <9ac0c6aa0906241532x574a555cnf281d0609428e63d@mail.gmail.com>
Subject: Re: updateDocument and high Memory Usage
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Likely this is because under the hood when IndexWriter flushes your
deletes, it opens readers.  It closes the readers as soon as the
deletes are done, thus creating a fair amount of garbage (which looks
like memory used by the JVM).

How are you measuring the memory usage?  Likely it's mostly garbage,
ie, the JVM is taking advantage of the large heap by waiting longer
before collecting.  If you gave it a smallish heap (not so small that
you hit OOMs) then it should run just fine within that footprint, just
running GC more often.

It also looks like Lucene may not flush soon enough when lots of
deletes are buffered (there's another thread going on about this,
now), but I'm not sure that's having an appreciable effect in your
case.

Mike

On Wed, Jun 24, 2009 at 12:53 PM, Kris Leite<kleite@imcsoftware.com> wrote:
> I was wondering if anybody else that has been using updateDocument notice=
d
> it uses a large amount of memory when updating an existing document.
>
> For example, when using updateDocument on an empty Lucene directory, the
> resulting 12K documents creates a 3MB index, the amount of memory the
> program uses is 270MB. =A0When the program is executed again, this time
> updating all 12K documents with the same exact same data, the program wil=
l
> take all available memory allocated to the JVM. =A0The largest I used was
> 1024MB. =A0No out of memory errors occurred but the memory also was not
> released after closing all the readers and writers.
>
> I was extremely surprised by this. =A0By running the program multiple tim=
es
> making sure that the code path does not change when deleting the Lucene
> directory to effectively add verses update. =A0I get very consistent resu=
lts.
> =A0Adding is very stable at 270MB, but updating existing documents maxes =
out
> the JVM memory allocation.
>
> Is there a configuration option that can be used to adjust the memory usa=
ge?
> I have tried doing separate delete/add code and get similar results so it
> appears to be more of a Lucene delete document issue?
>
> Any help would be greatly appreciated.
>
> Thanks,
> Kris
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 22:51:07 2009
Return-Path: <java-user-return-40895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11718 invoked from network); 24 Jun 2009 22:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 22:51:06 -0000
Received: (qmail 53900 invoked by uid 500); 24 Jun 2009 22:37:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53880 invoked by uid 500); 24 Jun 2009 22:37:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53865 invoked by uid 99); 24 Jun 2009 22:37:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 22:37:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.150.248.188] (HELO srv5.tophost.ch) (194.150.248.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 22:37:43 +0000
Received: from [84.73.25.185] (helo=lovebone.localnet)
	by srv5.tophost.ch with esmtp (Exim 4.69)
	(envelope-from <timon.roth@digitalforce.ch>)
	id 1MJb5m-0002RO-Iu
	for java-user@lucene.apache.org; Thu, 25 Jun 2009 00:37:22 +0200
From: Timon Roth <timon.roth@digitalforce.ch>
Organization: digitalforce.ch
To: java-user@lucene.apache.org
Subject: wheres the word
Date: Thu, 25 Jun 2009 00:48:38 +0200
User-Agent: KMail/1.11.2 (Linux/2.6.26-2-686; KDE/4.2.2; i686; ; )
X-Face: 3g[Lw=dsrA^H%%tl)ug^KaSvBtt#kmR;v$iW/()=g^,w%R<MEj*7as.W&"`I$NCbb)
 =?utf-8?q?K=5EVZ=0A=09JO?=>;BhyoOI[#_)e>pE%!Na:Kc96MfJn?==J4YTZU/yk1`@/l&p!&`$
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_G1qQK43x+fjvV4O"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200906250048.38202.timon.roth@digitalforce.ch>
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - srv5.tophost.ch
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - digitalforce.ch
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_G1qQK43x+fjvV4O
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit

hello list

im figgering about the following problem. in my index i cant find the word BE, 
but it exists in two documents. im usinglucene 2.4 with the standardanalyzer.

other querys with words like de, et or de la works good. any ideas?

gruess,
timon

--Boundary-00=_G1qQK43x+fjvV4O--

From java-user-return-40896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 24 23:28:40 2009
Return-Path: <java-user-return-40896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20091 invoked from network); 24 Jun 2009 23:28:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jun 2009 23:28:39 -0000
Received: (qmail 12711 invoked by uid 500); 24 Jun 2009 23:28:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12631 invoked by uid 500); 24 Jun 2009 23:28:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12621 invoked by uid 99); 24 Jun 2009 23:28:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 23:28:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.210.171 as permitted sender)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jun 2009 23:28:37 +0000
Received: by yxe1 with SMTP id 1so1688072yxe.29
        for <java-user@lucene.apache.org>; Wed, 24 Jun 2009 16:28:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=0GicIq83C5/YpQKF+V+f0ke1UEmCgeoPgkUzDKmrf+E=;
        b=WKCIRPY3ercMJ1sNHrNR9FDAYw01RKC5R23XPUcGObgXGtouKa8kidI+Zi6NuD/yRo
         eWXAS3bf8D/j3utNCsxpXOmsfE53iqIYeCSt4EBhkU3PpPyxLxtlBKciAoPPk6y0wMzU
         NRb2XbkP+m80C4cmFDwthIqjcIA6pm5n2aIo4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Vz0uWaaFj9MDsDUvL6ok8QigIvg+T0FILA9B3o2crhynp+pg2ydmpT96qvL9kvwqT0
         fHCqhdeRh/D8FLBQgh5iB4Km+Lel6OJAT6z+z27fp87xLGLTjLbIwY1fd/uqbM4FZm8u
         kRu6XejL/Zfn3N5tZM7C2T3OYEbALJgLMO1rU=
Received: by 10.90.118.8 with SMTP id q8mr1485085agc.95.1245886096117;
        Wed, 24 Jun 2009 16:28:16 -0700 (PDT)
Received: from ?192.168.1.102? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 10sm222232agb.76.2009.06.24.16.28.15
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 24 Jun 2009 16:28:15 -0700 (PDT)
Message-ID: <4A42B68F.7060604@gmail.com>
Date: Wed, 24 Jun 2009 19:28:15 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: wheres the word
References: <200906250048.38202.timon.roth@digitalforce.ch>
In-Reply-To: <200906250048.38202.timon.roth@digitalforce.ch>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Timon Roth wrote:
> hello list
>
> im figgering about the following problem. in my index i cant find the word BE, 
> but it exists in two documents. im usinglucene 2.4 with the standardanalyzer.
>
> other querys with words like de, et or de la works good. any ideas?
>
> gruess,
> timon
>
>   
be is a stopword. Do yourself a favor and turn off stopwords. Best to 
remove them at query time if you really need to.

-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 07:06:41 2009
Return-Path: <java-user-return-40897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65833 invoked from network); 25 Jun 2009 07:06:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 07:06:41 -0000
Received: (qmail 19256 invoked by uid 500); 25 Jun 2009 07:06:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19183 invoked by uid 500); 25 Jun 2009 07:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19173 invoked by uid 99); 25 Jun 2009 07:06:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 07:06:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 07:06:37 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 72B263164E
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 09:02:38 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 476A9314E2
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 09:02:38 +0200 (CEST)
Received: from bledsoe.dfki.uni-sb.de (bledsoe.dfki.uni-sb.de [134.96.184.151])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id DA4CB310AC
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 09:06:15 +0200 (CEST)
Message-Id: <82587F82-C781-44C5-A3C5-84BCF244FC8A@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <4A42B68F.7060604@gmail.com>
Content-Type: multipart/signed; boundary=Apple-Mail-116--829082166; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: wheres the word
Date: Thu, 25 Jun 2009 09:06:13 +0200
References: <200906250048.38202.timon.roth@digitalforce.ch> <4A42B68F.7060604@gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-116--829082166
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable



Le 25-juin-09 =E0 01:28, Mark Miller a =E9crit :
>> im figgering about the following problem. in my index i cant find =20
>> the word BE, but it exists in two documents. im usinglucene 2.4 =20
>> with the standardanalyzer.
>> other querys with words like de, et or de la works good. any ideas?
> be is a stopword. Do yourself a favor and turn off stopwords. Best =20
> to remove them at query time if you really need to.

Timon, you spotted it: the analyzer. You need to care to take the =20
right analyzer and, if that language token (?) is a different field, =20
you neeeeed to use a different analyzer, e.g. whitespaceanalyzer...

paul=

--Apple-Mail-116--829082166
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIDDzCCAwsw
ggJ0oAMCAQICECfgYPDm3JFN4mPGdyWyyVgwDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA5MDUyNjA3MzIzNloXDTEwMDUyNjA3MzIz
NlowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDeZiQTdNavFBrVY7WMNWscajCzBRZF
cWhrkQyh2V0CCrwx7ElHEM0asrD/FbmK+eor0aeav4u/3RKj3qOsV/HV8VRiM2zHaaErrp+/boPw
FapmxhPk0TXLceFJAgL5ZA1RsfpcIxGzE/AQ5ic+MqZXp2tZkH6RNeOwoUTURZb2bOZWX5fA1G+L
G+IVs20vAN6i/Kdud3JUe9ElfHWfJTl2eO42Hea5MVLnk2IkmCqzxC3CcEchOgOzIrnEjaj/JLPB
ZZkDv6sTyEouG4qQHr4trSZCe5anTM2HoPVtmAoaz+Acyt2+0cwIUIPGDjk1K0mvrnCbVIOUNlUe
FVJu0svnAgMBAAGjMDAuMB4GA1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/
BAIwADANBgkqhkiG9w0BAQUFAAOBgQDC0P6qlhvM4E2XepLgrDWLj7yp9obwKr2tZBvM3lXGCIyx
edzPOMRQABPH3eBbvhKyMb64AoCttJ0vt+QcBLLtc9TkBxPyHyaRHmi4NUMlJJyy1z6pLNc0Ipec
U+qv5ck7Cl2SUs7ZQps9ZSW++s4LKKrcdsEs9HD4myt1YusWKTGCAxAwggMMAgEBMHYwYjELMAkG
A1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMT
I1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAhAn4GDw5tyRTeJjxnclsslYMAkG
BSsOAwIaBQCgggFvMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA5
MDYyNTA3MDYxNFowIwYJKoZIhvcNAQkEMRYEFHMKQbDyd+20D+ijFAOg+nclmqI2MIGFBgkrBgEE
AYI3EAQxeDB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQJ+Bg
8ObckU3iY8Z3JbLJWDCBhwYLKoZIhvcNAQkQAgsxeKB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQK
ExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwg
RnJlZW1haWwgSXNzdWluZyBDQQIQJ+Bg8ObckU3iY8Z3JbLJWDANBgkqhkiG9w0BAQEFAASCAQCG
COgj8et5cyhGSQF/Yarlw0EO7Q+EO48cPp+6iCbi2lIat9LhlaxN4e/pzjESF+A4zey7V3+zwDXV
FCyYoJ2z2vHXsWjlXSqijcxhzuaGjjLSb70MyA2IX6QcVUaZz/Sas750la74C80tK0AiQEI7kTXy
Xf0QRpjjBQeNoWi6Su+0fgimB/hsaBcLb4iB0QyZ4kLiRe599j4jEDez3scTHArRBru1gRydAAP1
RL3tJHaiGw/l4ic+2mp7QzJrv0HHZ+hLcNPudHKTyljVS+eIM5wmSO9uikd/3x687Qd6/W40phwp
cl1MokKqo8TBiseAO+/Rpx7cAGzED8z4lRcLAAAAAAAA

--Apple-Mail-116--829082166--

From java-user-return-40898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 07:06:52 2009
Return-Path: <java-user-return-40898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65883 invoked from network); 25 Jun 2009 07:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 07:06:51 -0000
Received: (qmail 20969 invoked by uid 500); 25 Jun 2009 07:07:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20896 invoked by uid 500); 25 Jun 2009 07:07:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20886 invoked by uid 99); 25 Jun 2009 07:07:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 07:07:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jun 2009 07:06:51 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 09:06:30 +0200
Subject: AW: OutOfMemoryError using IndexWriter
Date: Thu, 25 Jun 2009 09:02:47 +0200
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F563.76CB14A2"
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BDD@mail.intermediate.de>
X-MS-Has-Attach: 
Content-class: urn:content-classes:message
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BDD@mail.intermediate.de>
X-MimeOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn045w2WaPva72KTxOd/ZxY0lTuAgAf1XK9
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de><9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de><9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de><9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de> <9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F563.76CB14A2
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,

>But a "leak" would keep leaking over time, right?  Ie even a 1 GB heap
>on your test db should eventually throw OOME if there's really a leak.
No not necessarily, since I stop indexing ones everything is indexed - I =
shall try repeated runs with 120MB.

>Are you calling updateDocument (which deletes then adds)?
Yes I do, I do not know in my code whether the document is already =
indexed or not. In my test case I do delete the
complete index before the run, so all documents should be new to the =
index. I still use update though, since I
this piece of code is generic.

I shall post my results.

Stefan



------_=_NextPart_001_01C9F563.76CB14A2
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F563.76CB14A2--

From java-user-return-40899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 07:11:19 2009
Return-Path: <java-user-return-40899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67030 invoked from network); 25 Jun 2009 07:11:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 07:11:19 -0000
Received: (qmail 29613 invoked by uid 500); 25 Jun 2009 07:11:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29537 invoked by uid 500); 25 Jun 2009 07:11:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29527 invoked by uid 99); 25 Jun 2009 07:11:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 07:11:27 +0000
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=SPF_NEUTRAL,TRACKER_ID
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.13] (HELO smtp126.mail.mud.yahoo.com) (209.191.85.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jun 2009 07:11:16 +0000
Received: (qmail 76044 invoked from network); 25 Jun 2009 07:10:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=S4qpoZ/UThZpTwdiptoT+eYyyg+QDSs70c+agmZ6UCowJwXv8JQOQVLlKpJsKQj2hhvDaC2JNUIdz610S1jY8FYhwKtarRhgvyjv8grc4oN0/cqQa/KIZ1/0BDy5MY+gntYFGEqyflU2oa0q2+csdB+9QTUDdcGqgO+0gISx6Mg=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp126.mail.mud.yahoo.com with SMTP; 25 Jun 2009 07:10:53 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: dvFMvA8VM1mYYf0wQAe7.QIyPTsWROmarzH6CsbdMTabk7NwA7fCFW.Ev0EbZDFEvZEoOARUVN8F6njj9O2tnlbKag_PciMeAU5RAav_Rhvn9Y5Iy3S7FlnTfVU9se.poouylBPsniAWp.O03Kfe0P2laTbE0rVu553TG0Uj95FERyZ1O2WTvtKqx.MXoMLHsFeGCRL1zXgvDjuxxfn4ZeqNR55RXQbLUrCZfTeSlX2GYZuiclAeoEE95D39x062vm2dPT1zBbjIallAbQ--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: setTermInfosIndexDivisor
Date: Thu, 25 Jun 2009 12:40:49 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I am using Lucene v2.4.1=20

1)
I have build multiple indexes of total 30 million documents. My memory =
limit is 512 MB. In this case i am getting frequently OOME. If i =
increased the memory limit to 1 GB / 1.5 GB then it is working fine. My =
point is it will also will get exhausted when it reaches 60 / 90 million =
documents.=20

I thought to use setTermInfosIndexDivisor, but even then the memory =
consumption is same. This parameter has no effect. Whether this =
parameter should be set while building index? I build the index using =
default value. After hitting OOME i am setting this.=20

Directory dir =3D FSDirectory.getDirectory(indexPath);
IndexReader reader =3D IndexReader.open(dir, true);
reader.setTermInfosIndexDivisor(5);

2)
IndexWriter.setTermIndexInterval  should be set while creating the =
index? If i build the index with default value, After some time if i use =
this parameter, Whether there will be some effect?

Regards
Ganesh

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 07:31:35 2009
Return-Path: <java-user-return-40900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71028 invoked from network); 25 Jun 2009 07:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 07:31:35 -0000
Received: (qmail 56006 invoked by uid 500); 25 Jun 2009 07:31:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55935 invoked by uid 500); 25 Jun 2009 07:31:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55925 invoked by uid 99); 25 Jun 2009 07:31:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 07:31:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.150.248.188] (HELO srv5.tophost.ch) (194.150.248.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 07:31:31 +0000
Received: from [84.73.25.185] (helo=lovebone.localnet)
	by srv5.tophost.ch with esmtp (Exim 4.69)
	(envelope-from <timon.roth@digitalforce.ch>)
	id 1MJjQK-000521-DV
	for java-user@lucene.apache.org; Thu, 25 Jun 2009 09:31:08 +0200
From: Timon Roth <timon.roth@digitalforce.ch>
Organization: digitalforce.ch
To: java-user@lucene.apache.org
Subject: Re: wheres the word
Date: Thu, 25 Jun 2009 09:42:25 +0200
User-Agent: KMail/1.11.2 (Linux/2.6.26-2-686; KDE/4.2.2; i686; ; )
References: <200906250048.38202.timon.roth@digitalforce.ch> <4A42B68F.7060604@gmail.com> <82587F82-C781-44C5-A3C5-84BCF244FC8A@activemath.org>
In-Reply-To: <82587F82-C781-44C5-A3C5-84BCF244FC8A@activemath.org>
X-Face: 3g[Lw=dsrA^H%%tl)ug^KaSvBtt#kmR;v$iW/()=g^,w%R<MEj*7as.W&"`I$NCbb)
 =?iso-8859-1?q?K=5EVZ=0A=09JO?=>;BhyoOI[#_)e>pE%!Na:Kc96MfJn?==J4YTZU/yk1`@/l&p!&`$
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_hpyQKVVImVafipy"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200906250942.25842.timon.roth@digitalforce.ch>
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - srv5.tophost.ch
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - digitalforce.ch
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_hpyQKVVImVafipy
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable

hoi paul

i now tried with the hint from mark miller...disabling all the stopwords fr=
om=20
standardanalyzer...

String stop_words[] =3D new String[0];
=2E..StandardAnalyzer(stop_words);

this works perfect..;-)

gruess,
timon

Am Donnerstag, 25. Juni 2009 schrieb Paul Libbrecht:
>=20
> Le 25-juin-09 =E0 01:28, Mark Miller a =E9crit :
> >> im figgering about the following problem. in my index i cant find =20
> >> the word BE, but it exists in two documents. im usinglucene 2.4 =20
> >> with the standardanalyzer.
> >> other querys with words like de, et or de la works good. any ideas?
> > be is a stopword. Do yourself a favor and turn off stopwords. Best =20
> > to remove them at query time if you really need to.
>=20
> Timon, you spotted it: the analyzer. You need to care to take the =20
> right analyzer and, if that language token (?) is a different field, =20
> you neeeeed to use a different analyzer, e.g. whitespaceanalyzer...
>=20
> paul


=2D-=20
Timon Roth
Triemlistrasse 92
8047 Z=FCrich
=2D-
043 817 40 31
079 636 57 28
=2D-
digitalforce.ch
timon.roth@digitalforce.ch
http://tel.search.ch/zuerich/triemlistrasse-92/timon-roth

--Boundary-00=_hpyQKVVImVafipy--

From java-user-return-40901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 08:41:19 2009
Return-Path: <java-user-return-40901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94013 invoked from network); 25 Jun 2009 08:41:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 08:41:18 -0000
Received: (qmail 41504 invoked by uid 500); 25 Jun 2009 08:41:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41451 invoked by uid 500); 25 Jun 2009 08:41:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41441 invoked by uid 99); 25 Jun 2009 08:41:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 08:41:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.171 as permitted sender)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 08:41:16 +0000
Received: by yxe1 with SMTP id 1so2097059yxe.29
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 01:40:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ZNk3Rb7kurxwIAohPY1T//6PJa/Eh79xLpVHs7SJS1Q=;
        b=gcsBsvcAX1SX1mc7zC6uS4S2JH5EpHIJimnMif4aXCSrwmivX3aAkcr4Qt0tmb9+Kr
         btW262AtcLh1A8q4OhDfCqb5JpnJI5HJBIYUDl7UpIqRI0PQ/vBrtfAROQzqjlsvlLaK
         SDUVK/lwOmLJoZKXc3AFtFrrjimKjW084vo9s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=hHKkwdd9nkppZKs9O8gn+QPohj14pmKtydwmBmGHbvvkgNVidDDItXoOQapIPwNPM8
         9e3gUPsYaRrorFQ1N33M0As/Axhp+TOjbsxH8CsDAjJN2Q0Ekn3Sb61H72+B/W9nyfOj
         oW5oUrYrkvPeGCS9aB+K1Ssh5E0yFbLq4DhXM=
MIME-Version: 1.0
Received: by 10.100.38.5 with SMTP id l5mr2906606anl.183.1245919255650; Thu, 
	25 Jun 2009 01:40:55 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com>
References: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com>
Date: Thu, 25 Jun 2009 10:40:55 +0200
Message-ID: <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com>
Subject: Re: setTermInfosIndexDivisor
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hey there,

On Thu, Jun 25, 2009 at 9:10 AM, Ganesh<emailgane@yahoo.co.in> wrote:
> Hello all,
>
> I am using Lucene v2.4.1
>
> 1)
> I have build multiple indexes of total 30 million documents. My memory li=
mit is 512 MB. In this case i am getting frequently OOME. If i increased th=
e memory limit to 1 GB / 1.5 GB then it is working fine. My point is it wil=
l also will get exhausted when it reaches 60 / 90 million documents.
>
> I thought to use setTermInfosIndexDivisor, but even then the memory consu=
mption is same. This parameter has no effect. Whether this parameter should=
 be set while building index? I build the index using default value. After =
hitting OOME i am setting this.
I would be curious what you do to your index. do you have a lot of
pending deletes? do you call optimize frequently? In which situations
do you hit the OOM?
>
> Directory dir =3D FSDirectory.getDirectory(indexPath);
> IndexReader reader =3D IndexReader.open(dir, true);
> reader.setTermInfosIndexDivisor(5);
Loaded terms might not dominate your memory consumption in side
lucene. Again, you should provide more information of indexing, the
environment and the situation where the error occurs.

simon
>
> 2)
> IndexWriter.setTermIndexInterval =C2=A0should be set while creating the i=
ndex? If i build the index with default value, After some time if i use thi=
s parameter, Whether there will be some effect?
>
> Regards
> Ganesh
>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 09:27:21 2009
Return-Path: <java-user-return-40902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19331 invoked from network); 25 Jun 2009 09:27:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 09:27:21 -0000
Received: (qmail 22543 invoked by uid 500); 25 Jun 2009 09:27:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22473 invoked by uid 500); 25 Jun 2009 09:27:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22461 invoked by uid 99); 25 Jun 2009 09:27:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 09:27:30 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 09:27:22 +0000
Received: by yxe1 with SMTP id 1so2127679yxe.29
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 02:26:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.122.9 with SMTP id z9mr4227419ybm.188.1245922019263; Thu, 
	25 Jun 2009 02:26:59 -0700 (PDT)
In-Reply-To: <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com>
References: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com>
	 <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com>
Date: Thu, 25 Jun 2009 05:26:58 -0400
Message-ID: <9ac0c6aa0906250226j383db2d6oda02dc93658f09fe@mail.gmail.com>
Subject: Re: setTermInfosIndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

setTermIndexInterval only helps appreciably when an index has a truly
immense number of terms (often, "by accident" eg your document
filtering/analysis process accidentally allowed binary terms into the
index); it's meant primarily as a "safety" for such situations.

If you run CheckIndex, it prints the number of unique terms per segment.

The other big things that use RAM while searching are 1) deleted docs
(do you have any deletions?), 2) norms (have you disabled norms for
fields that don't actually require it), and 3) FieldCache (used when
you sort by field instead of relevance).

Mike

On Thu, Jun 25, 2009 at 4:40 AM, Simon
Willnauer<simon.willnauer@googlemail.com> wrote:
> Hey there,
>
> On Thu, Jun 25, 2009 at 9:10 AM, Ganesh<emailgane@yahoo.co.in> wrote:
>> Hello all,
>>
>> I am using Lucene v2.4.1
>>
>> 1)
>> I have build multiple indexes of total 30 million documents. My memory l=
imit is 512 MB. In this case i am getting frequently OOME. If i increased t=
he memory limit to 1 GB / 1.5 GB then it is working fine. My point is it wi=
ll also will get exhausted when it reaches 60 / 90 million documents.
>>
>> I thought to use setTermInfosIndexDivisor, but even then the memory cons=
umption is same. This parameter has no effect. Whether this parameter shoul=
d be set while building index? I build the index using default value. After=
 hitting OOME i am setting this.
> I would be curious what you do to your index. do you have a lot of
> pending deletes? do you call optimize frequently? In which situations
> do you hit the OOM?
>>
>> Directory dir =3D FSDirectory.getDirectory(indexPath);
>> IndexReader reader =3D IndexReader.open(dir, true);
>> reader.setTermInfosIndexDivisor(5);
> Loaded terms might not dominate your memory consumption in side
> lucene. Again, you should provide more information of indexing, the
> environment and the situation where the error occurs.
>
> simon
>>
>> 2)
>> IndexWriter.setTermIndexInterval =A0should be set while creating the ind=
ex? If i build the index with default value, After some time if i use this =
parameter, Whether there will be some effect?
>>
>> Regards
>> Ganesh
>>
>> Send instant messages to your online friends http://in.messenger.yahoo.c=
om
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 09:41:10 2009
Return-Path: <java-user-return-40903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26519 invoked from network); 25 Jun 2009 09:41:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 09:41:10 -0000
Received: (qmail 38999 invoked by uid 500); 25 Jun 2009 09:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38964 invoked by uid 500); 25 Jun 2009 09:41:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38954 invoked by uid 99); 25 Jun 2009 09:41:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 09:41:18 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.76] (HELO smtp119.mail.mud.yahoo.com) (209.191.84.76)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jun 2009 09:41:07 +0000
Received: (qmail 86997 invoked from network); 25 Jun 2009 09:40:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=e+6jfkWb7Db/AFkr0OvOvf1oqhz/2Js2AtQcEQkk1SOGunILz25/XBL8l6dlg8xJ81lyx5DcDjFma0DmAyaSjJYt0htufkenjFa6McJjMqj5Gfpi9ZZ3jbc9WrCkG/Yubp2dgZj9CeiQh3RDFlTAI45HiO5T+FQYzdSeiOCR3IY=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp119.mail.mud.yahoo.com with SMTP; 25 Jun 2009 09:40:43 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: PlUXKJwVM1kmPwWd6w5ka.4YkwhGGvespdgJ3ILRDSIE0be6e8k74J23.ueR8kgvPxKSmKXf2vQGB2sNLdo.xAJeeLPW2mOE9quNH1ZjPGo5J9JNwrolAgNtNinemQUWwfao3_gXdKSYTDTVGFt1wGtkoO2UEGst456OndttnXKsYPlAInkPRKtpKa9YELYwcFOzI51cNUH3WRNLUkFKHWE2wqIUB88XHOk5wdqeJBc73XDyXvUAcgmouGGj0S4R9yYDsJuAqrpMa861BNwhkLC.eTQAtZBTtHJt_y.ui3ksnauI9OlH
X-Yahoo-Newman-Property: ymail-3
Message-ID: <218c01c9f579$028c3200$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>,
	<simon.willnauer@gmail.com>
References: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com> <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com>
Subject: Re: setTermInfosIndexDivisor
Date: Thu, 25 Jun 2009 15:10:33 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am updating status of the documents frequently. There will be huge =
number of deletes. I do optimize the index once in a day.

I want to know the usage for setTermInfosIndexDivisor.=20

Directory dir =3D FSDirectory.getDirectory(indexPath);
IndexReader reader =3D IndexReader.open(dir, true);
reader.setTermInfosIndexDivisor(5);

I reopen the IndexReader whenever there is any document added to Index.  =
Do i need to set setTermInfosIndexDivisor(5); during re-opening of the =
index also. I tried this, first time it accepted and second time onwards =
it throws "terms already loaded" expection.=20

>Loaded terms might not dominate your memory consumption in side
>lucene. Again, you should provide more information of indexing, the
>environment and the situation where the error occurs.
I do indexing with no norms with all default values.=20
As per the documentation, it should subsample the terms loaded in to =
memory.=20

Regards
Ganesh
=20


----- Original Message -----=20
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, June 25, 2009 2:10 PM
Subject: Re: setTermInfosIndexDivisor


Hey there,

On Thu, Jun 25, 2009 at 9:10 AM, Ganesh<emailgane@yahoo.co.in> wrote:
> Hello all,
>
> I am using Lucene v2.4.1
>
> 1)
> I have build multiple indexes of total 30 million documents. My memory =
limit is 512 MB. In this case i am getting frequently OOME. If i =
increased the memory limit to 1 GB / 1.5 GB then it is working fine. My =
point is it will also will get exhausted when it reaches 60 / 90 million =
documents.
>
> I thought to use setTermInfosIndexDivisor, but even then the memory =
consumption is same. This parameter has no effect. Whether this =
parameter should be set while building index? I build the index using =
default value. After hitting OOME i am setting this.
I would be curious what you do to your index. do you have a lot of
pending deletes? do you call optimize frequently? In which situations
do you hit the OOM?
>
> Directory dir =3D FSDirectory.getDirectory(indexPath);
> IndexReader reader =3D IndexReader.open(dir, true);
> reader.setTermInfosIndexDivisor(5);
Loaded terms might not dominate your memory consumption in side
lucene. Again, you should provide more information of indexing, the
environment and the situation where the error occurs.

simon
>
> 2)
> IndexWriter.setTermIndexInterval should be set while creating the =
index? If i build the index with default value, After some time if i use =
this parameter, Whether there will be some effect?
>
> Regards
> Ganesh
>
> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 09:55:23 2009
Return-Path: <java-user-return-40904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35186 invoked from network); 25 Jun 2009 09:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 09:55:22 -0000
Received: (qmail 72279 invoked by uid 500); 25 Jun 2009 09:55:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72239 invoked by uid 500); 25 Jun 2009 09:55:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72229 invoked by uid 99); 25 Jun 2009 09:55:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 09:55:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 09:55:21 +0000
Received: by gxk11 with SMTP id 11so2226380gxk.5
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 02:55:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.132.3 with SMTP id j3mr4320570ybn.96.1245923699963; Thu, 
	25 Jun 2009 02:54:59 -0700 (PDT)
In-Reply-To: <218c01c9f579$028c3200$710bc30a@sv.us.sonicwall.com>
References: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com>
	 <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com>
	 <218c01c9f579$028c3200$710bc30a@sv.us.sonicwall.com>
Date: Thu, 25 Jun 2009 05:54:59 -0400
Message-ID: <9ac0c6aa0906250254p2818b886l5e51d50383f587db@mail.gmail.com>
Subject: Re: setTermInfosIndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jun 25, 2009 at 5:40 AM, Ganesh<emailgane@yahoo.co.in> wrote:
> I am updating status of the documents frequently. There will be huge numb=
er of deletes. I do optimize the index once in a day.

OK

> I want to know the usage for setTermInfosIndexDivisor.
>
> Directory dir =3D FSDirectory.getDirectory(indexPath);
> IndexReader reader =3D IndexReader.open(dir, true);
> reader.setTermInfosIndexDivisor(5);
>
> I reopen the IndexReader whenever there is any document added to Index. =
=A0Do i need to set setTermInfosIndexDivisor(5); during re-opening of the i=
ndex also. I tried this, first time it accepted and second time onwards it =
throws "terms already loaded" expection.

In fact Lucene has a bug here: on reopen, your index divisor is not
properly carried over to the newly opened segments.  Worse, if you
attempt to call setTermInfosIndexDivisor, it'll throw an exception
because the already-opened readers have already loaded their terms
index.  I think the only workaround is to not use reopen.

>>Loaded terms might not dominate your memory consumption in side
>>lucene. Again, you should provide more information of indexing, the
>>environment and the situation where the error occurs.
> I do indexing with no norms with all default values.

OK.  As of 2.9 (not yet released), you should also call
IndexReader.setDisableFakeNorms(true), to prevent the creation of a
full array of "fake" norms.

> As per the documentation, it should subsample the terms loaded in to memo=
ry.

That's what termInfosIndexDivisor does, but if the memory used by your
actual index's terms index is smallish (run CheckIndex to see), this
setting won't help much anyway.

Are you sorting by field for any of your queries?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 10:02:06 2009
Return-Path: <java-user-return-40905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38117 invoked from network); 25 Jun 2009 10:02:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 10:02:05 -0000
Received: (qmail 85147 invoked by uid 500); 25 Jun 2009 10:02:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85081 invoked by uid 500); 25 Jun 2009 10:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85071 invoked by uid 99); 25 Jun 2009 10:02:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 10:02:14 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 10:02:05 +0000
Received: by yxe1 with SMTP id 1so2150416yxe.29
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 03:01:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.132.3 with SMTP id j3mr4331316ybn.96.1245924104205; Thu, 
	25 Jun 2009 03:01:44 -0700 (PDT)
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BDD@mail.intermediate.de>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
	 <9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
	 <9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
	 <9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de>
	 <9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDD@mail.intermediate.de>
Date: Thu, 25 Jun 2009 06:01:44 -0400
Message-ID: <9ac0c6aa0906250301h3de27a64mc12c8ad5fde9d775@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jun 25, 2009 at 3:02 AM, stefan<stefan@intermediate.de> wrote:

>>But a "leak" would keep leaking over time, right? =A0Ie even a 1 GB heap
>>on your test db should eventually throw OOME if there's really a leak.
> No not necessarily, since I stop indexing ones everything is indexed - I =
shall try repeated runs with 120MB.

It indeed looks like IndexWriter doens't account for RAM used by
pending deletes.  I've opened
https://issues.apache.org/jira/browse/LUCENE-1717 for this.  Though
I'd normally expect the amount of extra RAM used to be smallish...

Do you have a high merge factor?  Can you run CheckIndex on your index
(java org.apache.lucene.index.CheckIndex /path/to/index) and post the
output back?

Currently IndexWriter will flush these deletes on kicking off a merge,
or if commit() is called, so one workaround you could try is to call
commit() every so often and see if that improves the RAM usage?

>>Are you calling updateDocument (which deletes then adds)?
> Yes I do, I do not know in my code whether the document is already indexe=
d or not. In my test case I do delete the
> complete index before the run, so all documents should be new to the inde=
x. I still use update though, since I
> this piece of code is generic.

OK that's a good reason to use updateDocument.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 10:09:41 2009
Return-Path: <java-user-return-40906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43289 invoked from network); 25 Jun 2009 10:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 10:09:41 -0000
Received: (qmail 2168 invoked by uid 500); 25 Jun 2009 10:09:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2102 invoked by uid 500); 25 Jun 2009 10:09:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2092 invoked by uid 99); 25 Jun 2009 10:09:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 10:09:49 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.84.76] (HELO smtp119.mail.mud.yahoo.com) (209.191.84.76)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jun 2009 10:09:36 +0000
Received: (qmail 95282 invoked from network); 25 Jun 2009 10:09:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=HSkCwNa7v0qevGu12e89ZKtV/ECVF2ywBIS8azpzIAmdCoEG7HORnkZdF2uUgAtAews3PWL+U693N4XB44NDJKgiSa4KxhQz89JDgTyf1QRnhk1Ag5MfndsKSgEw1ZQIrdgBurq8pTsHkfwFFGTEnbv+fMUGEZ+ObWFAJgc659w=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp119.mail.mud.yahoo.com with SMTP; 25 Jun 2009 10:09:14 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: B6LtGDAVM1mz7ODbYGQ1IJKGssTAzHn2Sf5GFgWe3cJA_1w6VSjhwZykV0xk3j56_PDt.c72D54Lgbl1_dDXqcabEcIvCIDFjh8ShRM5xfqUHPuBZsjRYaji1ztmpT2LgEtnMbQawBQnP8HxYP4q.0HRRRujPvLNLgNzR8nc4.4SyG5muRZvNq_SO0FR30br8Lwnr96QkEirkDSotZg8TxU4ZNhEw7Gs4rzUwYIp3JlU_SfnpXgD3BiNP4H1ZQ.ngRLRfzq38hETUajxY9cVN5pHXY1MCfNVVXl4NUO7q9BBIAAwILvjdNY9FWxXlPQ-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <21aa01c9f57c$fdf82e20$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com> <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com> <9ac0c6aa0906250226j383db2d6oda02dc93658f09fe@mail.gmail.com>
Subject: Re: setTermInfosIndexDivisor
Date: Thu, 25 Jun 2009 15:39:11 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org


What about setTermInfosIndexDivisor??=20

Directory dir =3D FSDirectory.getDirectory(indexPath);
IndexReader reader =3D IndexReader.open(dir, true);
reader.setTermInfosIndexDivisor(5);

It supposed to load only one fifth of the terms available?? But there is =
no difference in memory consumption with / without settings this =
parameter.

I reopen the IndexReader whenever there is any document added to Index.  =
Do i need to set setTermInfosIndexDivisor(5); during re-opening of the =
index also. I tried this, first time it accepted and second time onwards =
it throws "terms already loaded" expection

Regards
Ganesh

----- Original Message -----=20
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>; <simon.willnauer@gmail.com>
Sent: Thursday, June 25, 2009 2:56 PM
Subject: Re: setTermInfosIndexDivisor


setTermIndexInterval only helps appreciably when an index has a truly
immense number of terms (often, "by accident" eg your document
filtering/analysis process accidentally allowed binary terms into the
index); it's meant primarily as a "safety" for such situations.

If you run CheckIndex, it prints the number of unique terms per segment.

The other big things that use RAM while searching are 1) deleted docs
(do you have any deletions?), 2) norms (have you disabled norms for
fields that don't actually require it), and 3) FieldCache (used when
you sort by field instead of relevance).

Mike

On Thu, Jun 25, 2009 at 4:40 AM, Simon
Willnauer<simon.willnauer@googlemail.com> wrote:
> Hey there,
>
> On Thu, Jun 25, 2009 at 9:10 AM, Ganesh<emailgane@yahoo.co.in> wrote:
>> Hello all,
>>
>> I am using Lucene v2.4.1
>>
>> 1)
>> I have build multiple indexes of total 30 million documents. My =
memory limit is 512 MB. In this case i am getting frequently OOME. If i =
increased the memory limit to 1 GB / 1.5 GB then it is working fine. My =
point is it will also will get exhausted when it reaches 60 / 90 million =
documents.
>>
>> I thought to use setTermInfosIndexDivisor, but even then the memory =
consumption is same. This parameter has no effect. Whether this =
parameter should be set while building index? I build the index using =
default value. After hitting OOME i am setting this.
> I would be curious what you do to your index. do you have a lot of
> pending deletes? do you call optimize frequently? In which situations
> do you hit the OOM?
>>
>> Directory dir =3D FSDirectory.getDirectory(indexPath);
>> IndexReader reader =3D IndexReader.open(dir, true);
>> reader.setTermInfosIndexDivisor(5);
> Loaded terms might not dominate your memory consumption in side
> lucene. Again, you should provide more information of indexing, the
> environment and the situation where the error occurs.
>
> simon
>>
>> 2)
>> IndexWriter.setTermIndexInterval should be set while creating the =
index? If i build the index with default value, After some time if i use =
this parameter, Whether there will be some effect?
>>
>> Regards
>> Ganesh
>>
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 10:14:33 2009
Return-Path: <java-user-return-40907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45978 invoked from network); 25 Jun 2009 10:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 10:14:33 -0000
Received: (qmail 9150 invoked by uid 500); 25 Jun 2009 10:14:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9120 invoked by uid 500); 25 Jun 2009 10:14:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9110 invoked by uid 99); 25 Jun 2009 10:14:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 10:14:41 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 10:14:32 +0000
Received: by yxe1 with SMTP id 1so2158446yxe.29
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 03:14:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.131.13 with SMTP id i13mr4280106ybn.233.1245924850739; 
	Thu, 25 Jun 2009 03:14:10 -0700 (PDT)
In-Reply-To: <21aa01c9f57c$fdf82e20$710bc30a@sv.us.sonicwall.com>
References: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com>
	 <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com>
	 <9ac0c6aa0906250226j383db2d6oda02dc93658f09fe@mail.gmail.com>
	 <21aa01c9f57c$fdf82e20$710bc30a@sv.us.sonicwall.com>
Date: Thu, 25 Jun 2009 06:14:10 -0400
Message-ID: <9ac0c6aa0906250314p2209b0edg8f76b21c65dede0c@mail.gmail.com>
Subject: Re: setTermInfosIndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jun 25, 2009 at 6:09 AM, Ganesh<emailgane@yahoo.co.in> wrote:
>
> What about setTermInfosIndexDivisor??
>
> Directory dir =3D FSDirectory.getDirectory(indexPath);
> IndexReader reader =3D IndexReader.open(dir, true);
> reader.setTermInfosIndexDivisor(5);
>
> It supposed to load only one fifth of the terms available?? But there is =
no difference in memory consumption with / without settings this parameter.

No, it's loads 1/5th of the 1/128th of all the terms available.  Ie,
by default Lucene loads every 128th term into RAM for searching.  If
you call setTermInfosIndexDivisor(5), then it loads every 128*5 =3D
every 640 terms.

> I reopen the IndexReader whenever there is any document added to Index. =
=A0Do i need to set setTermInfosIndexDivisor(5); during re-opening of the i=
ndex also. I tried this, first time it accepted and second time onwards it =
throws "terms already loaded" expection

Calling setTermInfosIndexDivisor on a reopened reader won't work,
because of a [just now discovered] bug in Lucene.  The workaround (if
you really must use setTermInfosIndexDivisor) is to not use reopen.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 11:10:44 2009
Return-Path: <java-user-return-40908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63562 invoked from network); 25 Jun 2009 11:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 11:10:44 -0000
Received: (qmail 98409 invoked by uid 500); 25 Jun 2009 11:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98339 invoked by uid 500); 25 Jun 2009 11:10:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98329 invoked by uid 99); 25 Jun 2009 11:10:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 11:10:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jun 2009 11:10:43 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 13:10:23 +0200
Subject: AW: OutOfMemoryError using IndexWriter
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F585.887899D5"
Date: Thu, 25 Jun 2009 13:10:22 +0200
Content-class: urn:content-classes:message
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BDE@mail.intermediate.de>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BDE@mail.intermediate.de>
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn045w2WaPva72KTxOd/ZxY0lTuAgAk1DgM
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de><9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de><9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de><9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de> <9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F585.887899D5
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi Mike,

I just changed my test-code to run in an indefinite loop over the =
database to index everything. Set the jvm to 120MB heap size, all other =
parameters as before.
I got an OOError just as before - so I would say there is a leak =
somewhere.

Here is the histogram.

Heap Histogram

All Classes (excluding platform)
Class 	Instance Count 	Total Size
class [B 	1809102 	41992326
class [C 	200610 	26877068
class [[B 	46117 	9473872
class java.lang.String 	198629 	3178064
class org.apache.lucene.index.FreqProxTermsWriter$PostingList 	100927 	=
2825956
class [Ljava.util.HashMap$Entry; 	11329 	2494312
class java.util.HashMap$Entry 	132578 	2121248
class [I 	5186 	2097300=20

So far I had no success in pinpointing those binary arrays, I will need =
some more time for this.

Stefan

-----Urspr=FCngliche Nachricht-----
Von: Michael McCandless [mailto:lucene@mikemccandless.com]
Gesendet: Mi 24.06.2009 17:50
An: java-user@lucene.apache.org
Betreff: Re: OutOfMemoryError using IndexWriter
=20
On Wed, Jun 24, 2009 at 10:18 AM, stefan<stefan@intermediate.de> wrote:
>
> Hi,
>
>
>>OK so this means it's not a leak, and instead it's just that stuff is
>>consuming more RAM than expected.
> Or that my test db is smaller than the production db which is indeed =
the case.

But a "leak" would keep leaking over time, right?  Ie even a 1 GB heap
on your test db should eventually throw OOME if there's really a leak.

> Please explain those buffered deletes in a few more details.

Are you calling updateDocument (which deletes then adds)?

Deletes (the Term or Query you pass to updateDocument or
deleteDocuments) are buffered in a HashMap and then that buffer is
materialized into actual deleted doc IDs when IndexWriter decides to
do so.  I think IndexWriter isn't properly flushing the deletes when
they use too much RAM.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C9F585.887899D5
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F585.887899D5--

From java-user-return-40909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 11:13:29 2009
Return-Path: <java-user-return-40909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64392 invoked from network); 25 Jun 2009 11:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 11:13:27 -0000
Received: (qmail 6225 invoked by uid 500); 25 Jun 2009 11:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6177 invoked by uid 500); 25 Jun 2009 11:13:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6167 invoked by uid 99); 25 Jun 2009 11:13:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 11:13:36 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 11:13:28 +0000
Received: by gxk11 with SMTP id 11so2282072gxk.5
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 04:13:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.130.2 with SMTP id h2mr4399637ybn.224.1245928386543; Thu, 
	25 Jun 2009 04:13:06 -0700 (PDT)
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BDE@mail.intermediate.de>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
	 <9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
	 <9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
	 <9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de>
	 <9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDE@mail.intermediate.de>
Date: Thu, 25 Jun 2009 07:13:06 -0400
Message-ID: <9ac0c6aa0906250413sa84469co71587e2bf6b61e24@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Can you post your test code?  If you can make it a standalone test,
then I can repro and dig down faster.

Can you try calling IndexWriter.setMaxBufferedDeleteTerms (eg, 1000)
and see if that prevents the OOM?

Mike

On Thu, Jun 25, 2009 at 7:10 AM, stefan<stefan@intermediate.de> wrote:
>
> Hi Mike,
>
> I just changed my test-code to run in an indefinite loop over the databas=
e to index everything. Set the jvm to 120MB heap size, all other parameters=
 as before.
> I got an OOError just as before - so I would say there is a leak somewher=
e.
>
> Here is the histogram.
>
> Heap Histogram
>
> All Classes (excluding platform)
> Class =A0 Instance Count =A0Total Size
> class [B =A0 =A0 =A0 =A01809102 =A0 =A0 =A0 =A0 41992326
> class [C =A0 =A0 =A0 =A0200610 =A026877068
> class [[B =A0 =A0 =A0 46117 =A0 9473872
> class java.lang.String =A0198629 =A03178064
> class org.apache.lucene.index.FreqProxTermsWriter$PostingList =A0 100927 =
=A02825956
> class [Ljava.util.HashMap$Entry; =A0 =A0 =A0 =A011329 =A0 2494312
> class java.util.HashMap$Entry =A0 132578 =A02121248
> class [I =A0 =A0 =A0 =A05186 =A0 =A02097300
>
> So far I had no success in pinpointing those binary arrays, I will need s=
ome more time for this.
>
> Stefan
>
> -----Urspr=FCngliche Nachricht-----
> Von: Michael McCandless [mailto:lucene@mikemccandless.com]
> Gesendet: Mi 24.06.2009 17:50
> An: java-user@lucene.apache.org
> Betreff: Re: OutOfMemoryError using IndexWriter
>
> On Wed, Jun 24, 2009 at 10:18 AM, stefan<stefan@intermediate.de> wrote:
>>
>> Hi,
>>
>>
>>>OK so this means it's not a leak, and instead it's just that stuff is
>>>consuming more RAM than expected.
>> Or that my test db is smaller than the production db which is indeed the=
 case.
>
> But a "leak" would keep leaking over time, right? =A0Ie even a 1 GB heap
> on your test db should eventually throw OOME if there's really a leak.
>
>> Please explain those buffered deletes in a few more details.
>
> Are you calling updateDocument (which deletes then adds)?
>
> Deletes (the Term or Query you pass to updateDocument or
> deleteDocuments) are buffered in a HashMap and then that buffer is
> materialized into actual deleted doc IDs when IndexWriter decides to
> do so. =A0I think IndexWriter isn't properly flushing the deletes when
> they use too much RAM.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 11:18:39 2009
Return-Path: <java-user-return-40910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65688 invoked from network); 25 Jun 2009 11:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 11:18:39 -0000
Received: (qmail 15128 invoked by uid 500); 25 Jun 2009 11:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15068 invoked by uid 500); 25 Jun 2009 11:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15049 invoked by uid 99); 25 Jun 2009 11:18:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 11:18:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.171 as permitted sender)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 11:18:32 +0000
Received: by yxe1 with SMTP id 1so2206452yxe.29
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 04:18:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=nVovfHv5OHkKg4ONfi7zONjcIKrrGd1OJu+CoMxLTVo=;
        b=VcOm2CPBmlN8BIF6yl7ZVX8M3GcXSNBPWISHdDIjo50qYulL+mnsemge5nhj9ExMHo
         hzdSY5D1H6pTXpyca433on3vi2++tESqE+petM3Hfme0HP/kKY/fY8kw/RbGLazpsmBt
         1bUpy7p87B4jny5wu6rP0N3a9s6/LWvR+zOrc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=H1zdQtmr4+4/3k9blH6uqi6mZZQCkgTRoDKH0TQsDpHisipYs9Ky8Atmy1kyW5aY1e
         0GQyUAltDYrIS84Xr9NxMqFr3XTQyEFSdyv2Gj9Wg/hV6AXWihgcjrQGNfswSbXo2faG
         DTigx23wrRAVFMVseCUmVkls88mgOOg59o1mY=
MIME-Version: 1.0
Received: by 10.100.112.8 with SMTP id k8mr3043171anc.174.1245928691861; Thu, 
	25 Jun 2009 04:18:11 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <9ac0c6aa0906250413sa84469co71587e2bf6b61e24@mail.gmail.com>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
	 <9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
	 <9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
	 <9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de>
	 <9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDE@mail.intermediate.de>
	 <9ac0c6aa0906250413sa84469co71587e2bf6b61e24@mail.gmail.com>
Date: Thu, 25 Jun 2009 13:18:11 +0200
Message-ID: <f18c9dde0906250418g6e5b7c20o37c11a2eff299a87@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jun 25, 2009 at 1:13 PM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> Can you post your test code? =C2=A0If you can make it a standalone test,
> then I can repro and dig down faster.
>
> Can you try calling IndexWriter.setMaxBufferedDeleteTerms (eg, 1000)
> and see if that prevents the OOM?
>
> Mike
>
> On Thu, Jun 25, 2009 at 7:10 AM, stefan<stefan@intermediate.de> wrote:
>>
>> Hi Mike,
>>
>> I just changed my test-code to run in an indefinite loop over the databa=
se to index everything. Set the jvm to 120MB heap size, all other parameter=
s as before.
>> I got an OOError just as before - so I would say there is a leak somewhe=
re.
>>
>> Here is the histogram.
>>
>> Heap Histogram
>>
>> All Classes (excluding platform)
>> Class =C2=A0 Instance Count =C2=A0Total Size
>> class [B =C2=A0 =C2=A0 =C2=A0 =C2=A01809102 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
41992326
>> class [C =C2=A0 =C2=A0 =C2=A0 =C2=A0200610 =C2=A026877068
>> class [[B =C2=A0 =C2=A0 =C2=A0 46117 =C2=A0 9473872
>> class java.lang.String =C2=A0198629 =C2=A03178064
>> class org.apache.lucene.index.FreqProxTermsWriter$PostingList =C2=A0 100=
927 =C2=A02825956
>> class [Ljava.util.HashMap$Entry; =C2=A0 =C2=A0 =C2=A0 =C2=A011329 =C2=A0=
 2494312
>> class java.util.HashMap$Entry =C2=A0 132578 =C2=A02121248
>> class [I =C2=A0 =C2=A0 =C2=A0 =C2=A05186 =C2=A0 =C2=A02097300
I would be interested what happens to DocumentsWriter#deletesInRam can
you check if this keeps on growing even after flushes?!

simon
>>
>> So far I had no success in pinpointing those binary arrays, I will need =
some more time for this.
>>
>> Stefan
>>
>> -----Urspr=C3=BCngliche Nachricht-----
>> Von: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Gesendet: Mi 24.06.2009 17:50
>> An: java-user@lucene.apache.org
>> Betreff: Re: OutOfMemoryError using IndexWriter
>>
>> On Wed, Jun 24, 2009 at 10:18 AM, stefan<stefan@intermediate.de> wrote:
>>>
>>> Hi,
>>>
>>>
>>>>OK so this means it's not a leak, and instead it's just that stuff is
>>>>consuming more RAM than expected.
>>> Or that my test db is smaller than the production db which is indeed th=
e case.
>>
>> But a "leak" would keep leaking over time, right? =C2=A0Ie even a 1 GB h=
eap
>> on your test db should eventually throw OOME if there's really a leak.
>>
>>> Please explain those buffered deletes in a few more details.
>>
>> Are you calling updateDocument (which deletes then adds)?
>>
>> Deletes (the Term or Query you pass to updateDocument or
>> deleteDocuments) are buffered in a HashMap and then that buffer is
>> materialized into actual deleted doc IDs when IndexWriter decides to
>> do so. =C2=A0I think IndexWriter isn't properly flushing the deletes whe=
n
>> they use too much RAM.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 11:18:46 2009
Return-Path: <java-user-return-40911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65754 invoked from network); 25 Jun 2009 11:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 11:18:46 -0000
Received: (qmail 16803 invoked by uid 500); 25 Jun 2009 11:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16754 invoked by uid 500); 25 Jun 2009 11:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16744 invoked by uid 99); 25 Jun 2009 11:18:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 11:18:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jun 2009 11:18:45 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 13:18:24 +0200
Subject: AW: OutOfMemoryError using IndexWriter
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F586.A755EC67"
Date: Thu, 25 Jun 2009 13:16:18 +0200
Content-class: urn:content-classes:message
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BDF@mail.intermediate.de>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BDF@mail.intermediate.de>
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn1fAacBZid978rRUO2rluQjZSU9AAClXAO
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de><9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de><9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de><9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de><9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BDD@mail.intermediate.de> <9ac0c6aa0906250301h3de27a64mc12c8ad5fde9d775@mail.gmail.com>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F586.A755EC67
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

Here are the result of CheckIndex. I ran this just after I got the =
OOError.

OK [4 fields]
    test: terms, freq, prox...OK [509534 terms; 9126904 terms/docs =
pairs; 4933036 tokens]
    test: stored fields.......OK [148124 total field count; avg 2 fields =
per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq =
vector fields per doc]

  2 of 7: name=3D_b docCount=3D17724
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D2
    size (MB)=3D4,514
    docStoreOffset=3D0
    docStoreSegment=3D_b
    docStoreIsCompoundFile=3Dtrue
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [4 fields]
    test: terms, freq, prox...OK [122054 terms; 1022477 terms/docs =
pairs; 1560703 tokens]
    test: stored fields.......OK [35448 total field count; avg 2 fields =
per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq =
vector fields per doc]

  3 of 7: name=3D_c docCount=3D15952
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D2
    size (MB)=3D4,539
    docStoreOffset=3D17724
    docStoreSegment=3D_b
    docStoreIsCompoundFile=3Dtrue
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [4 fields]
    test: terms, freq, prox...OK [125512 terms; 1047363 terms/docs =
pairs; 1535701 tokens]
    test: stored fields.......OK [31904 total field count; avg 2 fields =
per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq =
vector fields per doc]

  4 of 7: name=3D_d docCount=3D19975
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D2
    size (MB)=3D5,547
    docStoreOffset=3D33676
    docStoreSegment=3D_b
    docStoreIsCompoundFile=3Dtrue
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [4 fields]
    test: terms, freq, prox...OK [101563 terms; 1327972 terms/docs =
pairs; 2390213 tokens]
    test: stored fields.......OK [39950 total field count; avg 2 fields =
per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq =
vector fields per doc]

  5 of 7: name=3D_e docCount=3D24740
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D2
    size (MB)=3D5,458
    docStoreOffset=3D53651
    docStoreSegment=3D_b
    docStoreIsCompoundFile=3Dtrue
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [4 fields]
    test: terms, freq, prox...OK [94791 terms; 1290085 terms/docs pairs; =
2501794 tokens]
    test: stored fields.......OK [49480 total field count; avg 2 fields =
per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq =
vector fields per doc]

  6 of 7: name=3D_f docCount=3D21584
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D2
    size (MB)=3D5,914
    docStoreOffset=3D0
    docStoreSegment=3D_f
    docStoreIsCompoundFile=3Dtrue
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [4 fields]
    test: terms, freq, prox...OK [92162 terms; 1267882 terms/docs pairs; =
2570682 tokens]
    test: stored fields.......OK [43168 total field count; avg 2 fields =
per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq =
vector fields per doc]

  7 of 7: name=3D_g docCount=3D13600
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D2
    size (MB)=3D1,664
    docStoreOffset=3D21584
    docStoreSegment=3D_f
    docStoreIsCompoundFile=3Dtrue
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [4 fields]
    test: terms, freq, prox...OK [42087 terms; 326152 terms/docs pairs; =
667302 tokens]
    test: stored fields.......OK [27200 total field count; avg 2 fields =
per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq =
vector fields per doc]

No problems were detected with this index.


Stefan


------_=_NextPart_001_01C9F586.A755EC67
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F586.A755EC67--

From java-user-return-40912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 11:26:09 2009
Return-Path: <java-user-return-40912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67271 invoked from network); 25 Jun 2009 11:26:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 11:26:07 -0000
Received: (qmail 32776 invoked by uid 500); 25 Jun 2009 11:26:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32706 invoked by uid 500); 25 Jun 2009 11:26:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32696 invoked by uid 99); 25 Jun 2009 11:26:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 11:26:15 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 11:26:06 +0000
Received: by yxe1 with SMTP id 1so2213352yxe.29
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 04:25:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.69.7 with SMTP id w7mr4488045ybk.69.1245929144104; Thu, 25 
	Jun 2009 04:25:44 -0700 (PDT)
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BDF@mail.intermediate.de>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
	 <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
	 <9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
	 <9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de>
	 <9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDD@mail.intermediate.de>
	 <9ac0c6aa0906250301h3de27a64mc12c8ad5fde9d775@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDF@mail.intermediate.de>
Date: Thu, 25 Jun 2009 07:25:44 -0400
Message-ID: <9ac0c6aa0906250425o6fd1b7e6v48454bd89dfdfbcd@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK it looks like no merging was done.

I think the next step is to call
IndexWriter.setMaxBufferedDeleteTerms(1000) and see if that prevents
the OOM.

Mike

On Thu, Jun 25, 2009 at 7:16 AM, stefan<stefan@intermediate.de> wrote:
> Hi,
>
> Here are the result of CheckIndex. I ran this just after I got the OOErro=
r.
>
> OK [4 fields]
> =A0 =A0test: terms, freq, prox...OK [509534 terms; 9126904 terms/docs pai=
rs; 4933036 tokens]
> =A0 =A0test: stored fields.......OK [148124 total field count; avg 2 fiel=
ds per doc]
> =A0 =A0test: term vectors........OK [0 total vector count; avg 0 term/fre=
q vector fields per doc]
>
> =A02 of 7: name=3D_b docCount=3D17724
> =A0 =A0compound=3Dtrue
> =A0 =A0hasProx=3Dtrue
> =A0 =A0numFiles=3D2
> =A0 =A0size (MB)=3D4,514
> =A0 =A0docStoreOffset=3D0
> =A0 =A0docStoreSegment=3D_b
> =A0 =A0docStoreIsCompoundFile=3Dtrue
> =A0 =A0no deletions
> =A0 =A0test: open reader.........OK
> =A0 =A0test: fields, norms.......OK [4 fields]
> =A0 =A0test: terms, freq, prox...OK [122054 terms; 1022477 terms/docs pai=
rs; 1560703 tokens]
> =A0 =A0test: stored fields.......OK [35448 total field count; avg 2 field=
s per doc]
> =A0 =A0test: term vectors........OK [0 total vector count; avg 0 term/fre=
q vector fields per doc]
>
> =A03 of 7: name=3D_c docCount=3D15952
> =A0 =A0compound=3Dtrue
> =A0 =A0hasProx=3Dtrue
> =A0 =A0numFiles=3D2
> =A0 =A0size (MB)=3D4,539
> =A0 =A0docStoreOffset=3D17724
> =A0 =A0docStoreSegment=3D_b
> =A0 =A0docStoreIsCompoundFile=3Dtrue
> =A0 =A0no deletions
> =A0 =A0test: open reader.........OK
> =A0 =A0test: fields, norms.......OK [4 fields]
> =A0 =A0test: terms, freq, prox...OK [125512 terms; 1047363 terms/docs pai=
rs; 1535701 tokens]
> =A0 =A0test: stored fields.......OK [31904 total field count; avg 2 field=
s per doc]
> =A0 =A0test: term vectors........OK [0 total vector count; avg 0 term/fre=
q vector fields per doc]
>
> =A04 of 7: name=3D_d docCount=3D19975
> =A0 =A0compound=3Dtrue
> =A0 =A0hasProx=3Dtrue
> =A0 =A0numFiles=3D2
> =A0 =A0size (MB)=3D5,547
> =A0 =A0docStoreOffset=3D33676
> =A0 =A0docStoreSegment=3D_b
> =A0 =A0docStoreIsCompoundFile=3Dtrue
> =A0 =A0no deletions
> =A0 =A0test: open reader.........OK
> =A0 =A0test: fields, norms.......OK [4 fields]
> =A0 =A0test: terms, freq, prox...OK [101563 terms; 1327972 terms/docs pai=
rs; 2390213 tokens]
> =A0 =A0test: stored fields.......OK [39950 total field count; avg 2 field=
s per doc]
> =A0 =A0test: term vectors........OK [0 total vector count; avg 0 term/fre=
q vector fields per doc]
>
> =A05 of 7: name=3D_e docCount=3D24740
> =A0 =A0compound=3Dtrue
> =A0 =A0hasProx=3Dtrue
> =A0 =A0numFiles=3D2
> =A0 =A0size (MB)=3D5,458
> =A0 =A0docStoreOffset=3D53651
> =A0 =A0docStoreSegment=3D_b
> =A0 =A0docStoreIsCompoundFile=3Dtrue
> =A0 =A0no deletions
> =A0 =A0test: open reader.........OK
> =A0 =A0test: fields, norms.......OK [4 fields]
> =A0 =A0test: terms, freq, prox...OK [94791 terms; 1290085 terms/docs pair=
s; 2501794 tokens]
> =A0 =A0test: stored fields.......OK [49480 total field count; avg 2 field=
s per doc]
> =A0 =A0test: term vectors........OK [0 total vector count; avg 0 term/fre=
q vector fields per doc]
>
> =A06 of 7: name=3D_f docCount=3D21584
> =A0 =A0compound=3Dtrue
> =A0 =A0hasProx=3Dtrue
> =A0 =A0numFiles=3D2
> =A0 =A0size (MB)=3D5,914
> =A0 =A0docStoreOffset=3D0
> =A0 =A0docStoreSegment=3D_f
> =A0 =A0docStoreIsCompoundFile=3Dtrue
> =A0 =A0no deletions
> =A0 =A0test: open reader.........OK
> =A0 =A0test: fields, norms.......OK [4 fields]
> =A0 =A0test: terms, freq, prox...OK [92162 terms; 1267882 terms/docs pair=
s; 2570682 tokens]
> =A0 =A0test: stored fields.......OK [43168 total field count; avg 2 field=
s per doc]
> =A0 =A0test: term vectors........OK [0 total vector count; avg 0 term/fre=
q vector fields per doc]
>
> =A07 of 7: name=3D_g docCount=3D13600
> =A0 =A0compound=3Dtrue
> =A0 =A0hasProx=3Dtrue
> =A0 =A0numFiles=3D2
> =A0 =A0size (MB)=3D1,664
> =A0 =A0docStoreOffset=3D21584
> =A0 =A0docStoreSegment=3D_f
> =A0 =A0docStoreIsCompoundFile=3Dtrue
> =A0 =A0no deletions
> =A0 =A0test: open reader.........OK
> =A0 =A0test: fields, norms.......OK [4 fields]
> =A0 =A0test: terms, freq, prox...OK [42087 terms; 326152 terms/docs pairs=
; 667302 tokens]
> =A0 =A0test: stored fields.......OK [27200 total field count; avg 2 field=
s per doc]
> =A0 =A0test: term vectors........OK [0 total vector count; avg 0 term/fre=
q vector fields per doc]
>
> No problems were detected with this index.
>
>
> Stefan
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 12:36:04 2009
Return-Path: <java-user-return-40913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94320 invoked from network); 25 Jun 2009 12:36:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 12:36:04 -0000
Received: (qmail 6464 invoked by uid 500); 25 Jun 2009 12:36:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6390 invoked by uid 500); 25 Jun 2009 12:36:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6379 invoked by uid 99); 25 Jun 2009 12:36:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 12:36:12 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.106.56] (HELO smtp145.mail.mud.yahoo.com) (209.191.106.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jun 2009 12:35:59 +0000
Received: (qmail 7645 invoked from network); 25 Jun 2009 12:35:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=SMstccdYgWvPXjTI9eupYh9I3uqvEKq9sxlkj5Erz8ENAfTg5fxff8sAxsFnffXOe4puUWi+GA7QzDEoKP9Pdv3fp2h9Oh6pfUGZ8EtDFAhGEc3gfXFAtm8A+H7e9GjIRZqXqllkc/YsSxFXsd+IWFrxq2KNPkgMOWXuuCbF6nY=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp145.mail.mud.yahoo.com with SMTP; 25 Jun 2009 12:35:36 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: 5QmvUo8VM1mX.sg9WS3DuW8cFpaT86kmrXIRQGOpbOTDaDFzTOzHYNbWE4vCDtptUDM.jev58NkAgPJ3iljfGdv.tQ1nIL__KRHPa.Pp04Xkf389GH20wD5kHMqNF7qKsbwdTV68jSu8IGadCwCS2Or7riZSBC_1vnUwJzKWnOeT7PnqdK4z0.JmsIhz4jcG3b0hcEJ71ZMgLWpAVYiJa.DvMPveacxEEUW6GbsPUO5DxKnkJb4ibOAlge08kwfj2Z_4YIrwsLKGnUuLxheM5B.mSrSVAGOJM4axMbT_P8FxfakVsAABnZhgmCaXX7KKX9Z23LG19oVxOjgcaINuV48Z.Do7NuZYpuM-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <21c801c9f591$70b198c0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com> <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com> <9ac0c6aa0906250226j383db2d6oda02dc93658f09fe@mail.gmail.com> <21aa01c9f57c$fdf82e20$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0906250314p2209b0edg8f76b21c65dede0c@mail.gmail.com>
Subject: Re: setTermInfosIndexDivisor
Date: Thu, 25 Jun 2009 18:05:33 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your immediate response.

The culprit here is sorting. I stopped sorting then memory consumption =
is reduced nearly 50%. Further for Testing purpose i set =
setTermInfosIndexDivisor to 50 then memory consumption is further =
reduced.

Currently i am sorting DateTime with minute resolution as single string. =
If i split it as Date, Hour and Minute then memory consumption in =
sorting will get reduced.

Regards
Ganesh
=20

----- Original Message -----=20
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, June 25, 2009 3:44 PM
Subject: Re: setTermInfosIndexDivisor


On Thu, Jun 25, 2009 at 6:09 AM, Ganesh<emailgane@yahoo.co.in> wrote:
>
> What about setTermInfosIndexDivisor??
>
> Directory dir =3D FSDirectory.getDirectory(indexPath);
> IndexReader reader =3D IndexReader.open(dir, true);
> reader.setTermInfosIndexDivisor(5);
>
> It supposed to load only one fifth of the terms available?? But there =
is no difference in memory consumption with / without settings this =
parameter.

No, it's loads 1/5th of the 1/128th of all the terms available.  Ie,
by default Lucene loads every 128th term into RAM for searching.  If
you call setTermInfosIndexDivisor(5), then it loads every 128*5 =3D
every 640 terms.

> I reopen the IndexReader whenever there is any document added to =
Index. Do i need to set setTermInfosIndexDivisor(5); during re-opening =
of the index also. I tried this, first time it accepted and second time =
onwards it throws "terms already loaded" expection

Calling setTermInfosIndexDivisor on a reopened reader won't work,
because of a [just now discovered] bug in Lucene.  The workaround (if
you really must use setTermInfosIndexDivisor) is to not use reopen.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 12:58:36 2009
Return-Path: <java-user-return-40914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4198 invoked from network); 25 Jun 2009 12:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 12:58:36 -0000
Received: (qmail 55400 invoked by uid 500); 25 Jun 2009 12:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55347 invoked by uid 500); 25 Jun 2009 12:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55337 invoked by uid 99); 25 Jun 2009 12:58:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 12:58:44 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 12:58:34 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 54F0445EA45
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 14:58:12 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id RsfgK7ILtA-D for <java-user@lucene.apache.org>;
	Thu, 25 Jun 2009 14:58:09 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id AA3FF45EA44
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 14:58:09 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com> <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com> <9ac0c6aa0906250226j383db2d6oda02dc93658f09fe@mail.gmail.com> <21aa01c9f57c$fdf82e20$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0906250314p2209b0edg8f76b21c65dede0c@mail.gmail.com> <21c801c9f591$70b198c0$710bc30a@sv.us.sonicwall.com>
Subject: RE: setTermInfosIndexDivisor
Date: Thu, 25 Jun 2009 14:58:09 +0200
Message-ID: <A1C4237B5EA14FE6B60DB42C481E8E0D@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <21c801c9f591$70b198c0$710bc30a@sv.us.sonicwall.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: Acn1kZLgM4ruCnkfTm+G34MZu+XPjwAAlw4g
X-Virus-Checked: Checked by ClamAV on apache.org

> The culprit here is sorting. I stopped sorting then memory consumption is
> reduced nearly 50%. Further for Testing purpose i set
> setTermInfosIndexDivisor to 50 then memory consumption is further reduced.
> 
> Currently i am sorting DateTime with minute resolution as single string.
> If i split it as Date, Hour and Minute then memory consumption in sorting
> will get reduced.

Use NumericRangeQuery from trunk lucene 2.9 by indexing longs from
Date.getTime(). This will help and offers you real numeric ranges very fast
and also the FieldCache only takes 8 bytes per doc (size of long).

Hopefully Lucene 2.9 will be released soon, but you can start to test it.

If you want to do sorting only (with Lucene 2.4), it is also good to simply
index the date as a plain text long number (using
Long.toString(Date.getTime())) and use SortField.LONG to sort (which does
the same). Only RangeQueries are not possible that way.

> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, June 25, 2009 3:44 PM
> Subject: Re: setTermInfosIndexDivisor
> 
> 
> On Thu, Jun 25, 2009 at 6:09 AM, Ganesh<emailgane@yahoo.co.in> wrote:
> >
> > What about setTermInfosIndexDivisor??
> >
> > Directory dir = FSDirectory.getDirectory(indexPath);
> > IndexReader reader = IndexReader.open(dir, true);
> > reader.setTermInfosIndexDivisor(5);
> >
> > It supposed to load only one fifth of the terms available?? But there is
> no difference in memory consumption with / without settings this
> parameter.
> 
> No, it's loads 1/5th of the 1/128th of all the terms available.  Ie,
> by default Lucene loads every 128th term into RAM for searching.  If
> you call setTermInfosIndexDivisor(5), then it loads every 128*5 =
> every 640 terms.
> 
> > I reopen the IndexReader whenever there is any document added to Index.
> Do i need to set setTermInfosIndexDivisor(5); during re-opening of the
> index also. I tried this, first time it accepted and second time onwards
> it throws "terms already loaded" expection
> 
> Calling setTermInfosIndexDivisor on a reopened reader won't work,
> because of a [just now discovered] bug in Lucene.  The workaround (if
> you really must use setTermInfosIndexDivisor) is to not use reopen.
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> Send instant messages to your online friends http://in.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 13:09:04 2009
Return-Path: <java-user-return-40915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9018 invoked from network); 25 Jun 2009 13:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 13:09:04 -0000
Received: (qmail 77645 invoked by uid 500); 25 Jun 2009 13:09:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77590 invoked by uid 500); 25 Jun 2009 13:09:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77556 invoked by uid 99); 25 Jun 2009 13:09:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 13:09:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jun 2009 13:09:00 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 15:08:41 +0200
Subject: AW: OutOfMemoryError using IndexWriter
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F596.0EFB0BE3"
Date: Thu, 25 Jun 2009 15:08:40 +0200
Content-class: urn:content-classes:message
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BE0@mail.intermediate.de>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BE0@mail.intermediate.de>
Thread-Topic: OutOfMemoryError using IndexWriter
Thread-Index: Acn1hf58VkkaCrThQw22omNTAcbxYAADxdDt
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de><9ac0c6aa0906240148ybcd0694ua3b9f7b7788a1c4b@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de><9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de><9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de><9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BDE@mail.intermediate.de> <9ac0c6aa0906250413sa84469co71587e2bf6b61e24@mail.gmail.com>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F596.0EFB0BE3
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I'm afraid my test setup and code this is far too big.
What I use lucene for is fairly simple. I have a database with about 150 =
tables, I iterate all tables and create for each row a String =
representation similar to a toString method containing all database =
data. This string is then fed together with the primary key to lucene. =
Full-text search of my db is then possible. Each document in Lucene =
represents a row in the database.

I tried calling setMaxBufferedDeleteTerms  with 100MB heap size to no =
avail, but calling commit every 10000 documents does help. I assume a =
commit is similar to creating a new IndexWriter.

HTH,

Stefan




-----Urspr=FCngliche Nachricht-----
Von: Michael McCandless [mailto:lucene@mikemccandless.com]
Gesendet: Do 25.06.2009 13:13
An: java-user@lucene.apache.org
Betreff: Re: OutOfMemoryError using IndexWriter
=20
Can you post your test code?  If you can make it a standalone test,
then I can repro and dig down faster.

Can you try calling IndexWriter.setMaxBufferedDeleteTerms (eg, 1000)
and see if that prevents the OOM?

Mike



------_=_NextPart_001_01C9F596.0EFB0BE3
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F596.0EFB0BE3--

From java-user-return-40916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 13:15:39 2009
Return-Path: <java-user-return-40916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12614 invoked from network); 25 Jun 2009 13:15:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 13:15:39 -0000
Received: (qmail 89616 invoked by uid 500); 25 Jun 2009 13:15:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89529 invoked by uid 500); 25 Jun 2009 13:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89386 invoked by uid 99); 25 Jun 2009 13:15:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 13:15:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 13:15:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MJonN-0003IP-4f
	for java-user@lucene.apache.org; Thu, 25 Jun 2009 06:15:17 -0700
Message-ID: <24203054.post@talk.nabble.com>
Date: Thu, 25 Jun 2009 06:15:17 -0700 (PDT)
From: ManjuNadigar <manjunatha.nadigar@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: manjunatha.nadigar@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


In my Application currently I am indexing object with One Field[ID] to Hold
ID of the Object which is stored and attributes of Object into Another
Field[Content] to hold attribute information seperated by space and this
Field is tokenized. When I search for information related to the Object I
get result as ID and using that ID I fetech the information from backend and
I show it as search result.

Now there is requirement like for some user of the application who don't
have access to attributes in Object and search on that attribute
information, then Object should not be included in the result.

Can you please help me how to fix my current Indexing such way that when
search results hits the attribute which user not suppose see it,  then
object should be filtered.




-- 
View this message in context: http://www.nabble.com/Indexing-tp24203054p24203054.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 13:57:23 2009
Return-Path: <java-user-return-40917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35915 invoked from network); 25 Jun 2009 13:57:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 13:57:23 -0000
Received: (qmail 54733 invoked by uid 500); 25 Jun 2009 13:57:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54672 invoked by uid 500); 25 Jun 2009 13:57:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54660 invoked by uid 99); 25 Jun 2009 13:57:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 13:57:31 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 13:57:23 +0000
Received: by gxk11 with SMTP id 11so2443718gxk.5
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 06:57:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.129.7 with SMTP id g7mr4662502ybn.181.1245938222097; Thu, 
	25 Jun 2009 06:57:02 -0700 (PDT)
In-Reply-To: <E28B87DDBA121F45B476C053B2171F0E596BE0@mail.intermediate.de>
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de>
	 <E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de>
	 <9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de>
	 <9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de>
	 <9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BDE@mail.intermediate.de>
	 <9ac0c6aa0906250413sa84469co71587e2bf6b61e24@mail.gmail.com>
	 <E28B87DDBA121F45B476C053B2171F0E596BE0@mail.intermediate.de>
Date: Thu, 25 Jun 2009 09:57:02 -0400
Message-ID: <9ac0c6aa0906250657p56a06b7bk5ae2516bb3008ebc@mail.gmail.com>
Subject: Re: OutOfMemoryError using IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Interesting that excessive deletes buffering is not your problem...

Even if you can't post the resulting test case, if you can simplify it
& run locally, to rule out anything outside Lucene that's allocating
the byte/char/byte[] arrays, that can help to isolate.

Also, profilers can trace where allocations happened, eg YourKit.

Mike

On Thu, Jun 25, 2009 at 9:08 AM, stefan<stefan@intermediate.de> wrote:
> Hi,
>
> I'm afraid my test setup and code this is far too big.
> What I use lucene for is fairly simple. I have a database with about 150 =
tables, I iterate all tables and create for each row a String representatio=
n similar to a toString method containing all database data. This string is=
 then fed together with the primary key to lucene. Full-text search of my d=
b is then possible. Each document in Lucene represents a row in the databas=
e.
>
> I tried calling setMaxBufferedDeleteTerms =A0with 100MB heap size to no a=
vail, but calling commit every 10000 documents does help. I assume a commit=
 is similar to creating a new IndexWriter.
>
> HTH,
>
> Stefan
>
>
>
>
> -----Urspr=FCngliche Nachricht-----
> Von: Michael McCandless [mailto:lucene@mikemccandless.com]
> Gesendet: Do 25.06.2009 13:13
> An: java-user@lucene.apache.org
> Betreff: Re: OutOfMemoryError using IndexWriter
>
> Can you post your test code? =A0If you can make it a standalone test,
> then I can repro and dig down faster.
>
> Can you try calling IndexWriter.setMaxBufferedDeleteTerms (eg, 1000)
> and see if that prevents the OOM?
>
> Mike
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 15:03:39 2009
Return-Path: <java-user-return-40918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64276 invoked from network); 25 Jun 2009 15:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 15:03:39 -0000
Received: (qmail 4893 invoked by uid 500); 25 Jun 2009 15:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4843 invoked by uid 500); 25 Jun 2009 15:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4833 invoked by uid 99); 25 Jun 2009 15:03:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 15:03:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 15:03:38 +0000
Received: by rv-out-0506.google.com with SMTP id k40so31377rvb.5
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 08:03:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=xiksXzB0e1RjqPAzyWDu0gM4sbprPfMKgydBrMQv4Vo=;
        b=YtDehOpYNn6523+HH8k9j/a5DBnO/ISAMJTk6J1wzgUK3BOY4vPYzsQbcgUybgwbr9
         lGvVXiK5x0H7F+hWr3yTmuwwT7+in9kL8Wm/a9D1EGbNX8HMkF3VaeHLZAOeeMfDkwm8
         ji8KiK1ltGBsx7pT9LvWGcCr/8HNe9cPjL6w4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oiQb2GY36C2G41wrmhQyWFxn6D2eCHZ7prGL4F+XqHLxohYwrhS8dhNxkaJZ87N5y+
         cLSma99BJodJKyM60/PCLXOyrvkB7vikqkGMwL5/1SOH1Ej5L/tbrjE4tk8e0/ix/fXL
         sW5Ws+wm2cNPSDg7PZ3L574ubhgKk0LFK0zto=
MIME-Version: 1.0
Received: by 10.220.76.68 with SMTP id b4mr2316497vck.26.1245942196842; Thu, 
	25 Jun 2009 08:03:16 -0700 (PDT)
In-Reply-To: <24203054.post@talk.nabble.com>
References: <24203054.post@talk.nabble.com>
Date: Thu, 25 Jun 2009 11:03:16 -0400
Message-ID: <359a92830906250803o2715b7ewd831b62c27c84aa2@mail.gmail.com>
Subject: Re: Indexing
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64698200db92d046d2d862c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64698200db92d046d2d862c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

This is really a permissions problem, which has been discussed
frequently. I think you'd get farther faster by searching the mail
archive (see this page, near the bottom:
http://lucene.apache.org/java/docs/mailinglists.html
<http://lucene.apache.org/java/docs/mailinglists.html>and see if those
discussions help.

Best
Erick

On Thu, Jun 25, 2009 at 9:15 AM, ManjuNadigar
<manjunatha.nadigar@gmail.com>wrote:

>
> In my Application currently I am indexing object with One Field[ID] to Hold
> ID of the Object which is stored and attributes of Object into Another
> Field[Content] to hold attribute information seperated by space and this
> Field is tokenized. When I search for information related to the Object I
> get result as ID and using that ID I fetech the information from backend
> and
> I show it as search result.
>
> Now there is requirement like for some user of the application who don't
> have access to attributes in Object and search on that attribute
> information, then Object should not be included in the result.
>
> Can you please help me how to fix my current Indexing such way that when
> search results hits the attribute which user not suppose see it,  then
> object should be filtered.
>
>
>
>
> --
> View this message in context:
> http://www.nabble.com/Indexing-tp24203054p24203054.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64698200db92d046d2d862c--

From java-user-return-40919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 19:04:41 2009
Return-Path: <java-user-return-40919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70810 invoked from network); 25 Jun 2009 19:04:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 19:04:41 -0000
Received: (qmail 97848 invoked by uid 500); 25 Jun 2009 19:04:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97768 invoked by uid 500); 25 Jun 2009 19:04:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97757 invoked by uid 99); 25 Jun 2009 19:04:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 19:04:49 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 19:04:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MJuF8-0003dU-AK
	for java-user@lucene.apache.org; Thu, 25 Jun 2009 12:04:18 -0700
Message-ID: <24209288.post@talk.nabble.com>
Date: Thu, 25 Jun 2009 12:04:18 -0700 (PDT)
From: AlexElba <ramalex1@yahoo.com>
To: java-user@lucene.apache.org
Subject: Lucene Judge
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramalex1@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,
I was looking to Judge interface with TrecJudge implementation and I am not
clear how to use it.
What data do I need to pass into constructor.

Anybody have any experience with this class?



Thanks,
Alex
-- 
View this message in context: http://www.nabble.com/Lucene-Judge-tp24209288p24209288.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 20:33:24 2009
Return-Path: <java-user-return-40920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18369 invoked from network); 25 Jun 2009 20:33:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 20:33:24 -0000
Received: (qmail 51620 invoked by uid 500); 25 Jun 2009 20:33:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51572 invoked by uid 500); 25 Jun 2009 20:33:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51562 invoked by uid 99); 25 Jun 2009 20:33:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 20:33:33 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of m4tt_turner@hotmail.com designates 65.55.90.92 as permitted sender)
Received: from [65.55.90.92] (HELO snt0-omc2-s17.snt0.hotmail.com) (65.55.90.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 20:33:20 +0000
Received: from SNT113-W38 ([65.55.90.71]) by snt0-omc2-s17.snt0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 25 Jun 2009 13:32:59 -0700
Message-ID: <SNT113-W38A7D543990BDA3D9B4AA4C3340@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_01c441a4-c4f9-47fb-906d-ede9fda13ca8_"
X-Originating-IP: [82.9.160.250]
From: Matt Turner <m4tt_turner@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Order of fields within a Document in Lucene 2.4+
Date: Thu, 25 Jun 2009 20:32:58 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 25 Jun 2009 20:32:59.0013 (UTC) FILETIME=[20DF0B50:01C9F5D4]
X-Virus-Checked: Checked by ClamAV on apache.org

--_01c441a4-c4f9-47fb-906d-ede9fda13ca8_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


The Lucene FAQ says...
=20
What is the order of fields returned by Document.fields()?
* Fields are returned in the same order they were added to the document.=20
(now getFields() as fields is deprecated)
=20
However I think this may no longer be the case in 2.4=20
=20
We are indexing documents in a specific order so that we can LOAD_AND_BREAK=
 out of our FieldSelector as early as possible.
i.e. we have typically 50 indexed fields for a document=2C but when we are =
loading results with .doc()=2C we know we only need 4 of them.
=20
So=2C our code ensures that these are added to the index first - and once t=
he 4th field is loaded we break out of the selector.
=20
This speeds us up by an order of magnitude.
=20
=20
=20
However=2C we are finding that our field selector is processing fields in a=
lphabetical order=2C not order of addition.  This means that we'd have to r=
ename our fields to 'aaa..' in order to guarantee they'd be processed first=
.
=20
=20
I think=2C but am not sure=2C that this bit of code causes the problem (as =
spotted in http://www.mail-archive.com/java-user@lucene.apache.org/msg24105=
.html).
It seems to have been introduced in version 2.4 (fields are in addition ord=
er in 2.3.2)
=20
DocFieldProcessorPerThread.java:

   // If we are writing vectors then we must visit
   // fields in sorted order so they are written in
   // sorted order.  TODO: we actually only need to
   // sort the subset of fields that have vectors
   // enabled=3B we could save [small amount of] CPU
   // here.
   quickSort(fields=2C 0=2C fieldCount-1)=3B

=20
This appears to sort fields into alphabetical order.
=20
Assuming that implementing the TODO would keep them in order of addition (a=
nd just keep vectors fields themselves sorted) - is it worth raising a JIRA=
 to fix this ?
=20
=20
regards=2C
=20
matt
=20

=20

_________________________________________________________________
Get the best of MSN on your mobile
http://clk.atdmt.com/UKM/go/147991039/direct/01/=

--_01c441a4-c4f9-47fb-906d-ede9fda13ca8_--

From java-user-return-40921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 20:38:39 2009
Return-Path: <java-user-return-40921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21118 invoked from network); 25 Jun 2009 20:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 20:38:39 -0000
Received: (qmail 61508 invoked by uid 500); 25 Jun 2009 20:38:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61473 invoked by uid 500); 25 Jun 2009 20:38:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61463 invoked by uid 99); 25 Jun 2009 20:38:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 20:38:48 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport4.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 20:38:37 +0000
X-SBRS: None
X-MID: 137681486
Received: from fmd3tj002.fda.gov ([10.160.10.77])
  by ironport4.fda.gov with ESMTP; 25 Jun 2009 16:38:15 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.61]) by FMD3TJ002.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 25 Jun 2009 16:38:15 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Order of fields within a Document in Lucene 2.4+
Date: Thu, 25 Jun 2009 16:38:15 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73C44@FMD3VS012.fda.gov>
In-reply-to: <SNT113-W38A7D543990BDA3D9B4AA4C3340@phx.gbl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Order of fields within a Document in Lucene 2.4+
Thread-Index: Acn11Dd5ZJVjuHFJSHKfEBfNoAfUAwAAHTbQ
References: <SNT113-W38A7D543990BDA3D9B4AA4C3340@phx.gbl>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Jun 2009 20:38:15.0082 (UTC) FILETIME=[DD4358A0:01C9F5D4]
X-Virus-Checked: Checked by ClamAV on apache.org

=20

I agree. Using Lucene 2.4.1 doc.getFields() returns in alpha order and
not the order in which they were added.

Sincerely,
Sithu D Sudarsan


-----Original Message-----
From: Matt Turner [mailto:m4tt_turner@hotmail.com]=20
Sent: Thursday, June 25, 2009 4:33 PM
To: java-user@lucene.apache.org
Subject: Order of fields within a Document in Lucene 2.4+


The Lucene FAQ says...
=20
What is the order of fields returned by Document.fields()?
* Fields are returned in the same order they were added to the document.

(now getFields() as fields is deprecated)
=20
However I think this may no longer be the case in 2.4=20
=20
We are indexing documents in a specific order so that we can
LOAD_AND_BREAK out of our FieldSelector as early as possible.
i.e. we have typically 50 indexed fields for a document, but when we are
loading results with .doc(), we know we only need 4 of them.
=20
So, our code ensures that these are added to the index first - and once
the 4th field is loaded we break out of the selector.
=20
This speeds us up by an order of magnitude.
=20
=20
=20
However, we are finding that our field selector is processing fields in
alphabetical order, not order of addition.  This means that we'd have to
rename our fields to 'aaa..' in order to guarantee they'd be processed
first.
=20
=20
I think, but am not sure, that this bit of code causes the problem (as
spotted in
http://www.mail-archive.com/java-user@lucene.apache.org/msg24105.html).
It seems to have been introduced in version 2.4 (fields are in addition
order in 2.3.2)
=20
DocFieldProcessorPerThread.java:

   // If we are writing vectors then we must visit
   // fields in sorted order so they are written in
   // sorted order.  TODO: we actually only need to
   // sort the subset of fields that have vectors
   // enabled; we could save [small amount of] CPU
   // here.
   quickSort(fields, 0, fieldCount-1);

=20
This appears to sort fields into alphabetical order.
=20
Assuming that implementing the TODO would keep them in order of addition
(and just keep vectors fields themselves sorted) - is it worth raising a
JIRA to fix this ?
=20
=20
regards,
=20
matt
=20

=20

_________________________________________________________________
Get the best of MSN on your mobile
http://clk.atdmt.com/UKM/go/147991039/direct/01/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 21:14:07 2009
Return-Path: <java-user-return-40922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33654 invoked from network); 25 Jun 2009 21:14:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 21:14:07 -0000
Received: (qmail 17208 invoked by uid 500); 25 Jun 2009 21:14:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17117 invoked by uid 500); 25 Jun 2009 21:14:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17107 invoked by uid 99); 25 Jun 2009 21:14:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 21:14:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [75.126.81.220] (HELO sl1001v3.webappcabaret.net) (75.126.81.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 21:14:05 +0000
Received: (qmail 9444 invoked from network); 26 Jun 2009 01:13:43 +0400
Received: from e178146076.adsl.alicedsl.de (HELO ?10.0.1.2?) (85.178.146.76)
  by 75.126.81.220 with SMTP; 26 Jun 2009 01:13:43 +0400
Mime-Version: 1.0 (Apple Message framework v753.1)
Content-Transfer-Encoding: 7bit
Message-Id: <CD1CA9AE-3EA2-4860-9A77-C03959A3A111@ulfdittmer.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Ulf Dittmer <ulf@ulfdittmer.com>
Subject: question about (problem with?) use of FieldCache$StringIndex
Date: Thu, 25 Jun 2009 23:13:48 +0200
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello-

We're looking at memory issues we're having with a fair-sized web app  
that uses Lucene for search. While looking at heap dumps, we  
discovered that there were 3 instances of  
org.apache.lucene.search.FieldCache$StringIndex, each about 110MB in  
size (out of a total of 1 GB).

Looking at the javadocs, I'm not real clear what the class does, but  
it doesn't seem to have any settings one could change. So I'm  
wondering: Is it normal to have more than one instance of this? Is it  
necessary? Are there circumstances in which this could be avoided? If  
we can't avoid it being used: are there ways of making it use less  
memory?

Thanks in advance for any clue. The trusted "Lucene In Action"  
doesn't talk about the class, and our code doesn't use it directly,  
so I'm a bit stumped.

Ulf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 21:33:33 2009
Return-Path: <java-user-return-40923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43823 invoked from network); 25 Jun 2009 21:33:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 21:33:32 -0000
Received: (qmail 55565 invoked by uid 500); 25 Jun 2009 21:33:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55487 invoked by uid 500); 25 Jun 2009 21:33:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55477 invoked by uid 99); 25 Jun 2009 21:33:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 21:33:41 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 21:33:29 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id ECEA445E71E
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 23:33:08 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id KHRsg1QRA-6r for <java-user@lucene.apache.org>;
	Thu, 25 Jun 2009 23:32:57 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B604745E718
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 23:32:57 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CD1CA9AE-3EA2-4860-9A77-C03959A3A111@ulfdittmer.com>
Subject: RE: question about (problem with?) use of FieldCache$StringIndex
Date: Thu, 25 Jun 2009 23:32:56 +0200
Message-ID: <AF1331F0F24A4B44BE43602E1571A1DE@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <CD1CA9AE-3EA2-4860-9A77-C03959A3A111@ulfdittmer.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: Acn12es7dvaKJnewSvyqNOGWdUaKFgAAjkhA
X-Virus-Checked: Checked by ClamAV on apache.org

This class is used, when you sort your result against a field, which
contains string values (no numerics). For each field sorted on / index a
separate StringIndex is created, that stays persistens until the index is
closed (because it costs much CPU to build this stringindex, this is why the
first sorted query takes some extra time). You cannot change the size, you
can only disable sorting. Or sort against a better data type like ints or
other numerics (if you can encode you sort order as a number).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ulf Dittmer [mailto:ulf@ulfdittmer.com]
> Sent: Thursday, June 25, 2009 11:14 PM
> To: java-user@lucene.apache.org
> Subject: question about (problem with?) use of FieldCache$StringIndex
> 
> Hello-
> 
> We're looking at memory issues we're having with a fair-sized web app
> that uses Lucene for search. While looking at heap dumps, we
> discovered that there were 3 instances of
> org.apache.lucene.search.FieldCache$StringIndex, each about 110MB in
> size (out of a total of 1 GB).
> 
> Looking at the javadocs, I'm not real clear what the class does, but
> it doesn't seem to have any settings one could change. So I'm
> wondering: Is it normal to have more than one instance of this? Is it
> necessary? Are there circumstances in which this could be avoided? If
> we can't avoid it being used: are there ways of making it use less
> memory?
> 
> Thanks in advance for any clue. The trusted "Lucene In Action"
> doesn't talk about the class, and our code doesn't use it directly,
> so I'm a bit stumped.
> 
> Ulf
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 25 22:54:11 2009
Return-Path: <java-user-return-40924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77065 invoked from network); 25 Jun 2009 22:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jun 2009 22:54:11 -0000
Received: (qmail 47152 invoked by uid 500); 25 Jun 2009 22:54:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47104 invoked by uid 500); 25 Jun 2009 22:54:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47094 invoked by uid 99); 25 Jun 2009 22:54:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 22:54:20 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jun 2009 22:54:09 +0000
Received: from [192.168.0.105] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id 6AB3D129B30
	for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 15:53:49 -0700 (PDT)
Message-Id: <89056194-E435-4219-86AD-B1C6022B1974@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <24209288.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Lucene Judge
Date: Thu, 25 Jun 2009 18:53:47 -0400
References: <24209288.post@talk.nabble.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

See http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/benchmark/quality/package-summary.html 
  where it gives details on running and using TrecJudge and the  
quality benchmark.

On Jun 25, 2009, at 3:04 PM, AlexElba wrote:

>
> Hello,
> I was looking to Judge interface with TrecJudge implementation and I  
> am not
> clear how to use it.
> What data do I need to pass into constructor.
>
> Anybody have any experience with this class?
>
>
>
> Thanks,
> Alex
> -- 
> View this message in context: http://www.nabble.com/Lucene-Judge-tp24209288p24209288.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 01:39:14 2009
Return-Path: <java-user-return-40925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18135 invoked from network); 26 Jun 2009 01:39:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 01:39:14 -0000
Received: (qmail 36234 invoked by uid 500); 26 Jun 2009 01:39:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36156 invoked by uid 500); 26 Jun 2009 01:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36146 invoked by uid 99); 26 Jun 2009 01:39:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 01:39:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 01:39:14 +0000
Received: by bwz22 with SMTP id 22so991567bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 18:38:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ow43aGs24oypRIwRXnIgJy+qIS7OcI6nYOdVGnMv3HE=;
        b=Gp/h/wu0ktJK4jSK6ksNEU3qx4dzsz4Evbd+MypdIi1ZcUrIy+nXJ0U1JE6KUm1iOi
         UKMCBoTbS3SEktaW4zwC3zMURntvoup2c7lIB1p/XJqwvApOZqO47CURehY48wya5yQB
         tMKoGaShoWWDEE5fSiSf+JhIE44t+jvGqY8Rw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lxrU+CyunB9dieACA7qwO95BDSDJOQZAJMsEA3weiAJQdnyiloXXbabSGbeeHli4mf
         1XbQqknT0bOET9MbIEhC/Ox3q8rA6awiee6verl0JJ+0vF/V41LzH0b+LwCl7fGtYuSU
         /K1MfUyjkEr+e771E+H6ht0nTpUY1OPOobtqk=
MIME-Version: 1.0
Received: by 10.204.52.146 with SMTP id i18mr3167814bkg.33.1245980332960; Thu, 
	25 Jun 2009 18:38:52 -0700 (PDT)
In-Reply-To: <DBFB98812FD649B59286F7CE7DA2BA27@VEGA>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <p06240809c6670270c70a@192.168.1.43>
	 <5A007EE2ACD1449297B14DEB2CE02C9B@VEGA>
	 <843920a30906241154m66f477f1n970aad5cc75e6371@mail.gmail.com>
	 <DBFB98812FD649B59286F7CE7DA2BA27@VEGA>
Date: Thu, 25 Jun 2009 21:38:52 -0400
Message-ID: <843920a30906251838n29fde399tad8aa07cc5882d14@mail.gmail.com>
Subject: Re: Analyzing performance and memory consumption for boolean queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5abdf24ab50046d36670f
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5abdf24ab50046d36670f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Wed, Jun 24, 2009 at 4:47 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Have you tried out, if GC affects you? A first step would be to turn on GC
> logging with -verbosegc -XX:+PrintGCDetails
>
> If you see some relation between query time and gc messages, you should try
> to use a better parallelized GC and change the perm size and so on (se docs
> about GC tuning).


I'll definitely try this, and thank you for the GC options details that you
posted previously.  I have a test server that's exactly the same
configuration as our production boxes, which I need to use to try this out
(with the same indexes of course).  It's busy doing some unrelated work at
the moment but next week I should be able to do some tests.

Thanks,
Chris

--001636c5abdf24ab50046d36670f--

From java-user-return-40926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 02:12:14 2009
Return-Path: <java-user-return-40926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32120 invoked from network); 26 Jun 2009 02:12:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 02:12:13 -0000
Received: (qmail 53567 invoked by uid 500); 26 Jun 2009 02:12:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53504 invoked by uid 500); 26 Jun 2009 02:12:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53494 invoked by uid 99); 26 Jun 2009 02:12:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 02:12:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 02:12:14 +0000
Received: by bwz22 with SMTP id 22so1000069bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Jun 2009 19:11:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=fDwGfP372t+fZMfvkZhfmuBLMMHq8fh9eFbXcrtW9YE=;
        b=kvIAG8d7bBCxFvOLuZ4fjjcGLYbWrY33Q8KN4l3OZxLgm1edSRCtRvmtxT5z9ID9cR
         IVbLKC4jtSxH7d60jilgvGuQ6cYQYPG1Sdhhq6W1bYAlBWILW+/o4/oX2F9h6YoxhlYn
         4hbzsdRIIJgRfKWCT85p+T4iuEwKCCupn1vlE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ECUinqga5ehr9EnHMm/aSDWYe5kaiN6tzr3o9Ontf1vHGbYiOFEfTUDCk7eA642mF1
         ZgL0A7Xikc4w5iTtn85+BEDqFkNJhjly+E6ZCbam2TNP/HIX/dcPvmlRkgOLQMkkWoKk
         1PXdG4lgA2gX9AhEpmintwIh08n+QSZRL4j3g=
MIME-Version: 1.0
Received: by 10.204.55.15 with SMTP id s15mr3133637bkg.53.1245982313072; Thu, 
	25 Jun 2009 19:11:53 -0700 (PDT)
Date: Thu, 25 Jun 2009 22:11:53 -0400
Message-ID: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
Subject: Optimizing unordered queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5990b2ac87c046d36ddf2
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5990b2ac87c046d36ddf2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I recently posted some questions about performance problems with large
indexes.  One key thing about our situation is that we don't need sorted
results (either by relevance or any other key).  I've been looking into our
memory usage and tracing through some code, which in combination with the
recent posts about setTermInfosIndexDivisor got me thinking about the best
way to do a query where the order of results doesn't matter.

Currently we're (perhaps naively) doing the equivalent of
query.weight(searcher).scorer(reader).score(collector).  Obviously there's a
certain amount of unnecessary calculation that results from this if you
don't care about sorting.  Are there any general recommendations for
unordered searching?  (We already omit norms.)

(More details: Of particular interest are things that access the TermInfos,
since that's the major source of RAM usage: if a smaller number of TermInfos
were needed then we could perhaps use an aggressive index divisor setting to
save RAM without a performance penalty.  For example, I was thinking about a
custom Similarity implementation that skipped the idf calculations, since
those have to hit the TermInfos.)

Thanks,
Chris

--001636c5990b2ac87c046d36ddf2--

From java-user-return-40927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 03:18:30 2009
Return-Path: <java-user-return-40927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46438 invoked from network); 26 Jun 2009 03:18:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 03:18:29 -0000
Received: (qmail 90281 invoked by uid 500); 26 Jun 2009 03:18:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90064 invoked by uid 500); 26 Jun 2009 03:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90054 invoked by uid 99); 26 Jun 2009 03:18:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 03:18:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jun 2009 03:18:23 +0000
Received: (qmail 33537 invoked by uid 60001); 26 Jun 2009 03:18:00 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1245986280; bh=hvW4eE0MfzYITzka8UpvFkXqPO6PYMq49xhBrkNCo9U=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=ck3hJfSUxqff+CFTn86MVJqt0v6vL2J2HaZrpBf3/yXh3Yeo99HmVehLP+qunEHcJyHXnKKaU0u43QF98KcIo0PpAVO69a+h2Bu41SVZ6f5vEcUh/K8AFml2NdYpn2nme3LzMkBzORq2HhBvWil28udiAB7+RgLcWFVOxFDUI5s=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=SysB71XUtAgD3mfX2/ib88HP1OIOztI1puwABtENUCDP4LVKFY7mhmwXFhiFiLcs0XMb1rEIYh+CJyvj19UafWG2vJ/4JJhAoP2yVhiSR1+xsbTxpCzyQ/rlzxJw3RboSn3Kx026t3hENsclcfsbRg9KpZ2Qcww1dRkyaPhsJsQ=;
Message-ID: <839283.33435.qm@web50301.mail.re2.yahoo.com>
X-YMail-OSG: X.XnN9YVM1l1YR43yRd6nsXBj5KAWqgKOk7j7VuLKT7vRz.peHsKNWE5sjBxbearYQc_DUz7yW_d9TWl5_xWk_kNe8y2duQGM.4ZUgUqhaTdHvfK2O0EZfhGIqb.69kaGNVDkGdb.djvtbsWsDmfzGKZOLFpGT_jLffi.A_uI0M24YxusKgfRUymEIoVY5.uPaNazPkvHB7mIzCGr7Gh_kwVysTcCzY1zkUI7NgKSeeqSFUTm1cOC3_qIZnrDL7FZS.J1uBS6tUMgW0kfTMTHpInloNFPxFeg6xDBT7UhC0c6V6vGwJIlYHyLx1Yt5hbQzXA6IqPv_TRNaP9YaA3clj5TOEN1SI.SXA10g--
Received: from [74.73.30.59] by web50301.mail.re2.yahoo.com via HTTP; Thu, 25 Jun 2009 20:18:00 PDT
X-Mailer: YahooMailRC/1277.43 YahooMailWebService/0.7.289.15
References: <CD1CA9AE-3EA2-4860-9A77-C03959A3A111@ulfdittmer.com>
Date: Thu, 25 Jun 2009 20:18:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: question about (problem with?) use of FieldCache$StringIndex
To: java-user@lucene.apache.org
In-Reply-To: <CD1CA9AE-3EA2-4860-9A77-C03959A3A111@ulfdittmer.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Ah, the trusted LIA... :)

FieldCache class is used for sorting.  Are you sorting by a few different fields by any chance?

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Ulf Dittmer <ulf@ulfdittmer.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, June 25, 2009 5:13:48 PM
> Subject: question about (problem with?) use of FieldCache$StringIndex
> 
> Hello-
> 
> We're looking at memory issues we're having with a fair-sized web app that uses 
> Lucene for search. While looking at heap dumps, we discovered that there were 3 
> instances of org.apache.lucene.search.FieldCache$StringIndex, each about 110MB 
> in size (out of a total of 1 GB).
> 
> Looking at the javadocs, I'm not real clear what the class does, but it doesn't 
> seem to have any settings one could change. So I'm wondering: Is it normal to 
> have more than one instance of this? Is it necessary? Are there circumstances in 
> which this could be avoided? If we can't avoid it being used: are there ways of 
> making it use less memory?
> 
> Thanks in advance for any clue. The trusted "Lucene In Action" doesn't talk 
> about the class, and our code doesn't use it directly, so I'm a bit stumped.
> 
> Ulf
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 04:49:29 2009
Return-Path: <java-user-return-40928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58627 invoked from network); 26 Jun 2009 04:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 04:49:28 -0000
Received: (qmail 42707 invoked by uid 500); 26 Jun 2009 04:49:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42643 invoked by uid 500); 26 Jun 2009 04:49:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42633 invoked by uid 99); 26 Jun 2009 04:49:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 04:49:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [75.126.81.220] (HELO sl1001v3.webappcabaret.net) (75.126.81.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 04:49:26 +0000
Received: (qmail 3379 invoked from network); 26 Jun 2009 08:49:04 +0400
Received: from e178138120.adsl.alicedsl.de (HELO ?10.0.1.2?) (85.178.138.120)
  by 75.126.81.220 with SMTP; 26 Jun 2009 08:49:04 +0400
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <AF1331F0F24A4B44BE43602E1571A1DE@VEGA>
References: <CD1CA9AE-3EA2-4860-9A77-C03959A3A111@ulfdittmer.com> <AF1331F0F24A4B44BE43602E1571A1DE@VEGA>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D5736048-BB52-4537-A779-C55D84C5DCA4@ulfdittmer.com>
Content-Transfer-Encoding: 7bit
From: Ulf Dittmer <ulf@ulfdittmer.com>
Subject: Re: question about (problem with?) use of FieldCache$StringIndex
Date: Fri, 26 Jun 2009 06:49:10 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:

> FieldCache class is used for sorting.  Are you sorting by a few  
> different fields by any chance?

Yes, we're sorting for one or two fields, depending on user settings.


Uwe Schindler wrote:

> This class is used, when you sort your result against a field, which
> contains string values (no numerics). ...
> Or sort against a better data type like ints or
> other numerics (if you can encode you sort order as a number).

Excellent, that's spot on. The field is a date in "yyyyMMddHHmmss"  
format, so I guess using SortField.LONG instead of SortField.STRING  
might work.

I'll give that a try. Thanks!

Ulf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 06:55:08 2009
Return-Path: <java-user-return-40929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11454 invoked from network); 26 Jun 2009 06:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 06:55:08 -0000
Received: (qmail 34470 invoked by uid 500); 26 Jun 2009 06:55:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34389 invoked by uid 500); 26 Jun 2009 06:55:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34377 invoked by uid 99); 26 Jun 2009 06:55:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 06:55:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.110.223.67] (HELO mail.intermediate.de) (217.110.223.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jun 2009 06:55:07 +0000
Received: from [192.168.231.1] (helo=mail.intermediate.de)
	by mail.intermediate.de with AVK MailGateway;
	for <java-user@lucene.apache.org>; Fri, 26 Jun 2009 08:54:33 +0200
Subject: AW: OutOfMemoryError using IndexWriter
Date: Fri, 26 Jun 2009 08:54:44 +0200
Message-ID: <E28B87DDBA121F45B476C053B2171F0E596BE1@mail.intermediate.de>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9F62A.FCEF24FA"
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <E28B87DDBA121F45B476C053B2171F0E596BE1@mail.intermediate.de>
Content-class: urn:content-classes:message
Thread-Topic: OutOfMemoryError using IndexWriter
X-MimeOLE: Produced By Microsoft Exchange V6.5
Thread-Index: Acn1nOT6AF5Q9MMOTKyY7M0zVu/wGgAjCwpG
References: <E28B87DDBA121F45B476C053B2171F0E596BD6@mail.intermediate.de><E28B87DDBA121F45B476C053B2171F0E596BD7@mail.intermediate.de><9ac0c6aa0906240252v36bb1301u6abdd7e0d5ffbd56@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BD8@mail.intermediate.de><9ac0c6aa0906240557l616e9f7ch2b1067398d2f1082@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BDB@mail.intermediate.de><9ac0c6aa0906240850o65fe805dp28caa82b0c790da4@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BDE@mail.intermediate.de><9ac0c6aa0906250413sa84469co71587e2bf6b61e24@mail.gmail.com><E28B87DDBA121F45B476C053B2171F0E596BE0@mail.intermediate.de> <9ac0c6aa0906250657p56a06b7bk5ae2516bb3008ebc@mail.gmail.com>
From: "stefan" <stefan@intermediate.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9F62A.FCEF24FA
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi Mike,

I ran a burn in test overnight with repeatedly indexing the same db in a =
loop. I set the heap size to 120MB and called setMaxBufferedDeleteTerms( =
1000), I did not call commit and used the same index writer.
This test passed  without any errors.

So to wrap this up - I shall call commit every 10000 documents added, =
the performance impact on calling setMaxBufferedDeleteTerms is quite =
significant (I guess somewhere between factor 2-10). I'll check on the =
speed of commit.
Commit seems to be able to free more memory (since it runs with 100MB =
heap size).
I'll have to give up on tracking down those binary references, I spent =
too much time on this already.

Thanks a lot for your insights.

Stefan




-----Urspr=FCngliche Nachricht-----
Von: Michael McCandless [mailto:lucene@mikemccandless.com]
Gesendet: Do 25.06.2009 15:57
An: java-user@lucene.apache.org
Betreff: Re: OutOfMemoryError using IndexWriter
=20
Interesting that excessive deletes buffering is not your problem...

Even if you can't post the resulting test case, if you can simplify it
& run locally, to rule out anything outside Lucene that's allocating
the byte/char/byte[] arrays, that can help to isolate.

Also, profilers can trace where allocations happened, eg YourKit.

Mike

On Thu, Jun 25, 2009 at 9:08 AM, stefan<stefan@intermediate.de> wrote:
> Hi,
>
> I'm afraid my test setup and code this is far too big.
> What I use lucene for is fairly simple. I have a database with about =
150 tables, I iterate all tables and create for each row a String =
representation similar to a toString method containing all database =
data. This string is then fed together with the primary key to lucene. =
Full-text search of my db is then possible. Each document in Lucene =
represents a row in the database.
>
> I tried calling setMaxBufferedDeleteTerms =A0with 100MB heap size to =
no avail, but calling commit every 10000 documents does help. I assume a =
commit is similar to creating a new IndexWriter.
>
> HTH,
>
> Stefan
>
>
>
>
> -----Urspr=FCngliche Nachricht-----
> Von: Michael McCandless [mailto:lucene@mikemccandless.com]
> Gesendet: Do 25.06.2009 13:13
> An: java-user@lucene.apache.org
> Betreff: Re: OutOfMemoryError using IndexWriter
>
> Can you post your test code? =A0If you can make it a standalone test,
> then I can repro and dig down faster.
>
> Can you try calling IndexWriter.setMaxBufferedDeleteTerms (eg, 1000)
> and see if that prevents the OOM?
>
> Mike
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C9F62A.FCEF24FA
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9F62A.FCEF24FA--

From java-user-return-40930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 08:59:31 2009
Return-Path: <java-user-return-40930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40078 invoked from network); 26 Jun 2009 08:59:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 08:59:31 -0000
Received: (qmail 67552 invoked by uid 500); 26 Jun 2009 08:59:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67470 invoked by uid 500); 26 Jun 2009 08:59:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67460 invoked by uid 99); 26 Jun 2009 08:59:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 08:59:39 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 08:59:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MK7H3-0002UL-0r
	for java-user@lucene.apache.org; Fri, 26 Jun 2009 01:59:09 -0700
Message-ID: <24217071.post@talk.nabble.com>
Date: Fri, 26 Jun 2009 01:59:09 -0700 (PDT)
From: B0DYLANG <ramihailat@yahoo.com>
To: java-user@lucene.apache.org
Subject: special Type of indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramihailat@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


dears, 
my problem is that i want to apply a wieght for each word i add to the
lucene document, so that when i want to index a sentence like this "Hello
how you doing" i want to add Hello with a boost equals to 0.75 and how with
boost 0.50 and doing with boost 0.3 is there is a mean of doing that ?
-- 
View this message in context: http://www.nabble.com/special-Type-of-indexing-tp24217071p24217071.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 09:04:51 2009
Return-Path: <java-user-return-40931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42818 invoked from network); 26 Jun 2009 09:04:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 09:04:51 -0000
Received: (qmail 82420 invoked by uid 500); 26 Jun 2009 09:04:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82390 invoked by uid 500); 26 Jun 2009 09:04:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82380 invoked by uid 99); 26 Jun 2009 09:04:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 09:04:59 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 09:04:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MK7MC-0002wL-Io
	for java-user@lucene.apache.org; Fri, 26 Jun 2009 02:04:28 -0700
Message-ID: <24217132.post@talk.nabble.com>
Date: Fri, 26 Jun 2009 02:04:28 -0700 (PDT)
From: B0DYLANG <ramihailat@yahoo.com>
To: java-user@lucene.apache.org
Subject: customizing lucene formula
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramihailat@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dears, 

i want to add some arguments to the lucene formula or override it, is there
a mean of doing so ? thanks for your  response.

-- 
View this message in context: http://www.nabble.com/customizing-lucene-formula-tp24217132p24217132.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 09:14:46 2009
Return-Path: <java-user-return-40932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44776 invoked from network); 26 Jun 2009 09:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 09:14:46 -0000
Received: (qmail 90839 invoked by uid 500); 26 Jun 2009 09:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90758 invoked by uid 500); 26 Jun 2009 09:14:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90747 invoked by uid 99); 26 Jun 2009 09:14:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 09:14:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 09:14:45 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.375.2; Fri, 26 Jun 2009 11:14:24 +0200
Subject: Re: Analyzing performance and memory consumption for boolean
	queries
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <843920a30906241238g2a7c1ffes93384ee00788b391@mail.gmail.com>
References: <843920a30906231353n6021c4bcl4fa7d14512c5f1b2@mail.gmail.com>
	 <9ac0c6aa0906240206wbafcf04u8b88266facbe1a10@mail.gmail.com>
	 <843920a30906241238g2a7c1ffes93384ee00788b391@mail.gmail.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Fri, 26 Jun 2009 11:14:24 +0200
Message-ID: <1246007664.7977.819.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2009-06-24 at 21:38 +0200, Nigel wrote:
> It sounds like surely any swapping out of the JVM memory could cause big and
> unpredictable performance drops.  As I just mentioned in reply to Uwe, our
> poor performance times don't always directly correlate with index updates,
> but it may be that the damage is done and the effects are only seen sometime
> later.

We were hit by GC hell some time ago when we ran JVMs with 5-7GB
allocated. It turned out that using Sun's RMI forces a total garbage
collection once a minute. At least for the version we used at the time.

Some info at http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6200091

> p.s. I haven't tried SSDs yet, or for that matter faster disks of any sort.

We've tested MTRON-SSDs from 2007 vs. 10.000 and 15.000 RPM harddisks in
RAID 0 and 1 on a dual-core Intel Xeon machine. There was no doubt that
the SSDs were substantially faster than the harddisks for searching.
Some related observations was that the need for warm-up and disk-cache
was greatly reduced.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 10:00:56 2009
Return-Path: <java-user-return-40933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67398 invoked from network); 26 Jun 2009 10:00:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 10:00:56 -0000
Received: (qmail 51542 invoked by uid 500); 26 Jun 2009 10:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51483 invoked by uid 500); 26 Jun 2009 10:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51473 invoked by uid 99); 26 Jun 2009 10:01:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 10:01:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.210.171 as permitted sender)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 10:00:55 +0000
Received: by yxe1 with SMTP id 1so3443402yxe.29
        for <java-user@lucene.apache.org>; Fri, 26 Jun 2009 03:00:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=3iHPQ9bUqGKcX/L+DOJXxEhx59Dx/gFFYe0s/jxtxKA=;
        b=anqTag/YRafvPUlWUXqYcLBb1CVmZYTg2N3V6eWPm99JxkJFQySveB8QXZCcRbOCBY
         t2q28uFLLO7PD9zpou503sOQJBMmhwtRVgnxZuJk6RCRVKbNqpTN7K7hogDZLk6GEcRr
         wNmx7xPpxYOVDgxJv8Gp1Gw117eg7Ai5faN24=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sEOR5dTflTXlk02Jl20WRZpxIljzxF2yojS9CpUNlpfpdcdqc5yoUBHh68KED1aEQk
         IkW2ltjnJD5w4j5c/HLqxPOCGsWAKA94Mv3Ay1Ss7nIQum+2a4Vxz9KBGO7O1aVMAxQT
         LtflZ4cbHrIB+5UnLaTw7nDlbeQHAjzyr2G5k=
MIME-Version: 1.0
Received: by 10.100.110.19 with SMTP id i19mr4702653anc.1.1246010434322; Fri, 
	26 Jun 2009 03:00:34 -0700 (PDT)
In-Reply-To: <24217071.post@talk.nabble.com>
References: <24217071.post@talk.nabble.com>
Date: Fri, 26 Jun 2009 15:30:34 +0530
Message-ID: <867513fe0906260300j20175201tddfc76675251d274@mail.gmail.com>
Subject: Re: special Type of indexing
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e642d9d452fff9046d3d69be
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e642d9d452fff9046d3d69be
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Isn't it better for you to for a query at search time with query term
boosts? that way you would have a smaller index (Boost info not getting
stored for each doc-field). Also, you would have the flexibility of changing
your boost without having to reindex the entire data.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Jun 26, 2009 at 2:29 PM, B0DYLANG <ramihailat@yahoo.com> wrote:

>
> dears,
> my problem is that i want to apply a wieght for each word i add to the
> lucene document, so that when i want to index a sentence like this "Hello
> how you doing" i want to add Hello with a boost equals to 0.75 and how with
> boost 0.50 and doing with boost 0.3 is there is a mean of doing that ?
> --
> View this message in context:
> http://www.nabble.com/special-Type-of-indexing-tp24217071p24217071.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e642d9d452fff9046d3d69be--

From java-user-return-40934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 10:14:15 2009
Return-Path: <java-user-return-40934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74500 invoked from network); 26 Jun 2009 10:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 10:14:15 -0000
Received: (qmail 61540 invoked by uid 500); 26 Jun 2009 10:14:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61472 invoked by uid 500); 26 Jun 2009 10:14:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61462 invoked by uid 99); 26 Jun 2009 10:14:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 10:14:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.106.59] (HELO smtp148.mail.mud.yahoo.com) (209.191.106.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jun 2009 10:14:13 +0000
Received: (qmail 46649 invoked from network); 26 Jun 2009 10:13:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=imSJ/JKDHgtfwePWCFpSNv1+BPVxk6HyyRFb8IcFAkRBr/GL9FUlpmfa627USFERvj7crwY1PEQkSYrYQgiWpYUVGfL+g2iR4N9KHMFkZgBcOWe+cj5VnK+8teskKFm6Iqvi3qcEfpsVTpKsSNjCaidCJ16uytlHcePa793N8UY=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp148.mail.mud.yahoo.com with SMTP; 26 Jun 2009 10:13:49 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: CIuRZZcVM1kindpMQASatS4ZwYrDggctT7FSgg6n6uWEb3gfMV1h45R3O761QjILZLBdA6HW9GAagxvfttDYrPFM8HYytrvIyfrmxJBVPDt1988JS_8jBAQdjpZ2Ea2trE7Qvv..BsHlaW_MfOYr1AaD.CTpTmeZOiPbAjBVGE9GtQXfNsfiZ8D1f3Kfg0RQr30oWPfTDHR0jCxb8FoG52YkWoQElkUG.4zVh_PqEWZK14YxDWGfk5bLktMxPkXcGBPeLEpLIBXOH7fbs3gfVVgoJFhP6txoKd906hWp50qzMiqrPHSaM9S4.deLVj1KOHoCeKQ8v.4H6WBjy.KBkOXDdVuDsSxZTQ0-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <220301c9f646$cce5b6c0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <20e801c9f564$13c21130$710bc30a@sv.us.sonicwall.com> <f18c9dde0906250140m44635ae3g91f20d05755493a8@mail.gmail.com> <9ac0c6aa0906250226j383db2d6oda02dc93658f09fe@mail.gmail.com> <21aa01c9f57c$fdf82e20$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0906250314p2209b0edg8f76b21c65dede0c@mail.gmail.com> <21c801c9f591$70b198c0$710bc30a@sv.us.sonicwall.com> <A1C4237B5EA14FE6B60DB42C481E8E0D@VEGA>
Subject: RE: setTermInfosIndexDivisor
Date: Fri, 26 Jun 2009 15:43:45 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Currently In DateTime field I am using ConstantScoreRangeQuery to do =
range query and doing sorting as String. Even i changed the sort field =
as Long then also i don't see much difference in RAM.

When Lucene 2.9 is released? Is there any functionality added for better =
sorting?

Regards
Ganesh

----- Original Message -----=20
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Sent: Thursday, June 25, 2009 6:28 PM
Subject: [Bulk] RE: setTermInfosIndexDivisor


>> The culprit here is sorting. I stopped sorting then memory =
consumption is
>> reduced nearly 50%. Further for Testing purpose i set
>> setTermInfosIndexDivisor to 50 then memory consumption is further =
reduced.
>>=20
>> Currently i am sorting DateTime with minute resolution as single =
string.
>> If i split it as Date, Hour and Minute then memory consumption in =
sorting
>> will get reduced.
>=20
> Use NumericRangeQuery from trunk lucene 2.9 by indexing longs from
> Date.getTime(). This will help and offers you real numeric ranges very =
fast
> and also the FieldCache only takes 8 bytes per doc (size of long).
>=20
> Hopefully Lucene 2.9 will be released soon, but you can start to test =
it.
>=20
> If you want to do sorting only (with Lucene 2.4), it is also good to =
simply
> index the date as a plain text long number (using
> Long.toString(Date.getTime())) and use SortField.LONG to sort (which =
does
> the same). Only RangeQueries are not possible that way.
>=20
>> ----- Original Message -----
>> From: "Michael McCandless" <lucene@mikemccandless.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, June 25, 2009 3:44 PM
>> Subject: Re: setTermInfosIndexDivisor
>>=20
>>=20
>> On Thu, Jun 25, 2009 at 6:09 AM, Ganesh<emailgane@yahoo.co.in> wrote:
>> >
>> > What about setTermInfosIndexDivisor??
>> >
>> > Directory dir =3D FSDirectory.getDirectory(indexPath);
>> > IndexReader reader =3D IndexReader.open(dir, true);
>> > reader.setTermInfosIndexDivisor(5);
>> >
>> > It supposed to load only one fifth of the terms available?? But =
there is
>> no difference in memory consumption with / without settings this
>> parameter.
>>=20
>> No, it's loads 1/5th of the 1/128th of all the terms available.  Ie,
>> by default Lucene loads every 128th term into RAM for searching.  If
>> you call setTermInfosIndexDivisor(5), then it loads every 128*5 =3D
>> every 640 terms.
>>=20
>> > I reopen the IndexReader whenever there is any document added to =
Index.
>> Do i need to set setTermInfosIndexDivisor(5); during re-opening of =
the
>> index also. I tried this, first time it accepted and second time =
onwards
>> it throws "terms already loaded" expection
>>=20
>> Calling setTermInfosIndexDivisor on a reopened reader won't work,
>> because of a [just now discovered] bug in Lucene.  The workaround (if
>> you really must use setTermInfosIndexDivisor) is to not use reopen.
>>=20
>> Mike
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 11:13:54 2009
Return-Path: <java-user-return-40935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94079 invoked from network); 26 Jun 2009 11:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 11:13:54 -0000
Received: (qmail 9991 invoked by uid 500); 26 Jun 2009 11:14:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9942 invoked by uid 500); 26 Jun 2009 11:14:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9932 invoked by uid 99); 26 Jun 2009 11:14:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 11:14:02 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 11:13:52 +0000
Received: from [192.168.0.105] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 9CF0FB6B14
	for <java-user@lucene.apache.org>; Fri, 26 Jun 2009 04:13:31 -0700 (PDT)
Message-Id: <1E4A8C5C-92B8-4C7B-B431-341A16023AE9@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <24217132.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: customizing lucene formula
Date: Fri, 26 Jun 2009 07:13:30 -0400
References: <24217132.post@talk.nabble.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

The source code is freely available.  Take a look at the Similarity  
class and where it is used.

Before you do that, though, perhaps there are other ways to achieve  
your goals.  Feel free to explain what you are trying to do.

-Grant

On Jun 26, 2009, at 5:04 AM, B0DYLANG wrote:

>
> Dears,
>
> i want to add some arguments to the lucene formula or override it,  
> is there
> a mean of doing so ? thanks for your  response.
>
> -- 
> View this message in context: http://www.nabble.com/customizing-lucene-formula-tp24217132p24217132.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 14:15:03 2009
Return-Path: <java-user-return-40936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71979 invoked from network); 26 Jun 2009 14:15:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 14:15:03 -0000
Received: (qmail 44787 invoked by uid 500); 26 Jun 2009 14:15:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44746 invoked by uid 500); 26 Jun 2009 14:15:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44736 invoked by uid 99); 26 Jun 2009 14:15:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 14:15:12 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 14:15:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MKCCO-000856-RX
	for java-user@lucene.apache.org; Fri, 26 Jun 2009 07:14:40 -0700
Message-ID: <24221074.post@talk.nabble.com>
Date: Fri, 26 Jun 2009 07:14:40 -0700 (PDT)
From: B0DYLANG <ramihailat@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: special Type of indexing
In-Reply-To: <867513fe0906260300j20175201tddfc76675251d274@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramihailat@yahoo.com
References: <24217071.post@talk.nabble.com> <867513fe0906260300j20175201tddfc76675251d274@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org






Thanks for your response, i want to explaing more so that you can help me,
the code am writing is as follows
Field termField = new Field("terms",terms, Field.Store.YES,
Field.Index.TOKENIZED);
the terms i indexed consists of a concatenated string looks like
"computer,230#pc,333#lucene,201#"
and i have a special anlyzer to toknize it, of course the numbers appers
after words are the word distance and it leads us to the more relevant
word(not document) as the distance decreases, so when i serarch with a term
lucene once and then search with computer at the second time this doceuemt
is returned in both queries but with high rank on the first time as the
distance is less than the second distance hope every body get it.


Anshum-2 wrote:
> 
> Isn't it better for you to for a query at search time with query term
> boosts? that way you would have a smaller index (Boost info not getting
> stored for each doc-field). Also, you would have the flexibility of
> changing
> your boost without having to reindex the entire data.
> 
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
> 
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
> 
> 
> On Fri, Jun 26, 2009 at 2:29 PM, B0DYLANG <ramihailat@yahoo.com> wrote:
> 
>>
>> dears,
>> my problem is that i want to apply a wieght for each word i add to the
>> lucene document, so that when i want to index a sentence like this "Hello
>> how you doing" i want to add Hello with a boost equals to 0.75 and how
>> with
>> boost 0.50 and doing with boost 0.3 is there is a mean of doing that ?
>> --
>> View this message in context:
>> http://www.nabble.com/special-Type-of-indexing-tp24217071p24217071.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/special-Type-of-indexing-tp24217071p24221074.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 14:52:04 2009
Return-Path: <java-user-return-40937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89924 invoked from network); 26 Jun 2009 14:52:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 14:52:03 -0000
Received: (qmail 8891 invoked by uid 500); 26 Jun 2009 14:52:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8853 invoked by uid 500); 26 Jun 2009 14:52:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8843 invoked by uid 99); 26 Jun 2009 14:52:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 14:52:12 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.38] (HELO web27106.mail.ukl.yahoo.com) (217.146.182.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jun 2009 14:52:02 +0000
Received: (qmail 65653 invoked by uid 60001); 26 Jun 2009 14:51:40 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1246027900; bh=vvRwE4WJl8eZtXBZ2KfFnYIc+XHveRfIKQwHmZX63JM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=GsCHO1E732e02Z0f/mq1HOG68PyvNpNlPSj/PwupJcFnfmIaZOFxYr/HRnCQmzynAiqqotcvulPp4e9hq7ebsDX5p0hZO7Kxu9SsQpSU0MbBcKrbfza3cyXTgkH9+jrGLqKoy3yU+0lSUrwuZF6KJ1jJGH/AIn7TGjUMbZ8HRHc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=3+g2rjh++GKbWKQW4mDiY9Z1MJeVc/1bmQxyaQ1jg56mTD0HWPaycTZrHeZU0wQZmVF4vBoambhZjq0gyxXNhOWk9n+QomL8iU0T9avvHJHXG9/bM+fKWYkepwdQwTTMHFAwbDvhgEzZ2Xk1sJjr2S6jUkGma4gqS7BXLQqNCvg=;
Message-ID: <410844.62913.qm@web27106.mail.ukl.yahoo.com>
X-YMail-OSG: ekwfIekVM1lMfTAYJZUDFT4Q5e7MfO5EdxqIdPrbvX1GqEjdGgNyqrU6HDFEnKYuW_m_zTsIFPdN6CburGQ1bODGxz6TbWQ3A.g9eET8sRI1.5xIOGHmtoLQrJsGoA51IYAFJDoem.BMi1pdmEmg5hSETSSPf6N9o3zmjY0SGjfzrck1fuNihrObJuJwn.Xn53LvkCN3VyAD.QaKZhAIUI.a1jIm_wH39TYzq25v9ZVhf.Y.9Vqmt5bzdtjGBqLJsPhB7KQhJWfxaOCH_locapOrNYePhQjxU8xJt7VYDIttWFguybwh33pyPnqHFLCIo.0mCpeodeNaajnc36cY1Q--
Received: from [194.25.15.12] by web27106.mail.ukl.yahoo.com via HTTP; Fri, 26 Jun 2009 14:51:40 GMT
X-Mailer: YahooMailRC/1357.22 YahooMailWebService/0.7.289.15
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
Date: Fri, 26 Jun 2009 14:51:40 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Optimizing unordered queries
To: java-user@lucene.apache.org
In-Reply-To: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


You omitNorms(), did you also omitTf()? =0A=0Awhen something like https://i=
ssues.apache.org/jira/browse/LUCENE-1345 gets commited, you will have a pos=
ibility to see some benefits (e.g. by packing single postings lists as Filt=
ers). The code there optimises exactly that case as filters contain no Scor=
ing information ...=0A=0A=0Atry:=0A=0A=0A=0A=0A----- Original Message ----=
=0A> From: Nigel <nigelspleen@gmail.com>=0A> To: java-user@lucene.apache.or=
g=0A> Sent: Friday, 26 June, 2009 4:11:53=0A> Subject: Optimizing unordered=
 queries=0A> =0A> I recently posted some questions about performance proble=
ms with large=0A> indexes.  One key thing about our situation is that we do=
n't need sorted=0A> results (either by relevance or any other key).  I've b=
een looking into our=0A> memory usage and tracing through some code, which =
in combination with the=0A> recent posts about setTermInfosIndexDivisor got=
 me thinking about the best=0A> way to do a query where the order of result=
s doesn't matter.=0A> =0A> Currently we're (perhaps naively) doing the equi=
valent of=0A> query.weight(searcher).scorer(reader).score(collector).  Obvi=
ously there's a=0A> certain amount of unnecessary calculation that results =
from this if you=0A> don't care about sorting.  Are there any general recom=
mendations for=0A> unordered searching?  (We already omit norms.)=0A> =0A> =
(More details: Of particular interest are things that access the TermInfos,=
=0A> since that's the major source of RAM usage: if a smaller number of Ter=
mInfos=0A> were needed then we could perhaps use an aggressive index diviso=
r setting to=0A> save RAM without a performance penalty.  For example, I wa=
s thinking about a=0A> custom Similarity implementation that skipped the id=
f calculations, since=0A> those have to hit the TermInfos.)=0A> =0A> Thanks=
,=0A> Chris=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 14:52:35 2009
Return-Path: <java-user-return-40938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90091 invoked from network); 26 Jun 2009 14:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 14:52:35 -0000
Received: (qmail 10750 invoked by uid 500); 26 Jun 2009 14:52:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10716 invoked by uid 500); 26 Jun 2009 14:52:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10706 invoked by uid 99); 26 Jun 2009 14:52:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 14:52:43 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.34] (HELO web27102.mail.ukl.yahoo.com) (217.146.182.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jun 2009 14:52:34 +0000
Received: (qmail 16352 invoked by uid 60001); 26 Jun 2009 14:52:12 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1246027932; bh=PLV2rrd92jjVZFLOblcmDOvY8W1ytWFhqNDo16pv6Uk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=brbcvFkjWdFdKH8m7RieumLJvI+/LLh2bJlgUqKzvYdYb1TxJgrNGdevPtQ/UswJ5CDawdxXrBb1SOzSO771dAwERhlrrzp75+HR8F4RGziqYEOQQoTd9uSsKr5oWzWElaPCYnfZS0yCuE8M7G9Zqoy6tKaFjqqHIKKK3TQHtcI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Tvjcu7YuNuzctou6qZijExpN6Ea4keJAnzSkPHU4HVEFAXzgZIN9Rmf1lY9huGTgXZcDAODKea67phWfJZn+1bUMIxfqFoi6mLi/sKew0x/3wuBRn0p4Ui3XwTvDIgGq94S9YSmgIROaNT8+zipKupmTsg2lE0/rolQJkqS3FgM=;
Message-ID: <342486.16029.qm@web27102.mail.ukl.yahoo.com>
X-YMail-OSG: B7UtfZsVM1nmVahYTTDdAqSbxM1LS6W3xN5tZ_Pd.gOPFWNKp_Kupwb9s5OrqF0FJr41P0JVu0dPotoOARtdMrSH63fSufn0VVcB0yNjXGaNrVbIyoGwBxeOz8MNQ5rfN_j24.ajRq6184l.GcO8H8ZSrQuPFwNU4GP4HhUBtAmpF_Ng4QaxJQM0QpkKsHVnVoiLaau681jafI8GhB2PHmUjbLkLgMfmq3YafhFot9TZkU86khynHNQyPR6CkJjiywt9czllqnoHxPxyXldzj.X4jmSKGrASK8t4XM1QCTHha8PU9w--
Received: from [194.25.15.12] by web27102.mail.ukl.yahoo.com via HTTP; Fri, 26 Jun 2009 14:52:12 GMT
X-Mailer: YahooMailRC/1357.22 YahooMailWebService/0.7.289.15
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
Date: Fri, 26 Jun 2009 14:52:12 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Optimizing unordered queries
To: java-user@lucene.apache.org
In-Reply-To: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


also see, http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/=
BooleanQuery.html#getAllowDocsOutOfOrder()=0A=0A=0A=0A=0A=0A----- Original =
Message ----=0A> From: Nigel <nigelspleen@gmail.com>=0A> To: java-user@luce=
ne.apache.org=0A> Sent: Friday, 26 June, 2009 4:11:53=0A> Subject: Optimizi=
ng unordered queries=0A> =0A> I recently posted some questions about perfor=
mance problems with large=0A> indexes.  One key thing about our situation i=
s that we don't need sorted=0A> results (either by relevance or any other k=
ey).  I've been looking into our=0A> memory usage and tracing through some =
code, which in combination with the=0A> recent posts about setTermInfosInde=
xDivisor got me thinking about the best=0A> way to do a query where the ord=
er of results doesn't matter.=0A> =0A> Currently we're (perhaps naively) do=
ing the equivalent of=0A> query.weight(searcher).scorer(reader).score(colle=
ctor).  Obviously there's a=0A> certain amount of unnecessary calculation t=
hat results from this if you=0A> don't care about sorting.  Are there any g=
eneral recommendations for=0A> unordered searching?  (We already omit norms=
.)=0A> =0A> (More details: Of particular interest are things that access th=
e TermInfos,=0A> since that's the major source of RAM usage: if a smaller n=
umber of TermInfos=0A> were needed then we could perhaps use an aggressive =
index divisor setting to=0A> save RAM without a performance penalty.  For e=
xample, I was thinking about a=0A> custom Similarity implementation that sk=
ipped the idf calculations, since=0A> those have to hit the TermInfos.)=0A>=
 =0A> Thanks,=0A> Chris=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 15:23:48 2009
Return-Path: <java-user-return-40939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1055 invoked from network); 26 Jun 2009 15:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 15:23:47 -0000
Received: (qmail 63806 invoked by uid 500); 26 Jun 2009 15:23:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63659 invoked by uid 500); 26 Jun 2009 15:23:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63386 invoked by uid 99); 26 Jun 2009 15:23:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 15:23:33 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.171] (HELO mail-yx0-f171.google.com) (209.85.210.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 15:06:49 +0000
Received: by yxe1 with SMTP id 1so3730297yxe.29
        for <java-user@lucene.apache.org>; Fri, 26 Jun 2009 08:06:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.133.7 with SMTP id k7mr6901907ybn.180.1246028785701; Fri, 
	26 Jun 2009 08:06:25 -0700 (PDT)
In-Reply-To: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
Date: Fri, 26 Jun 2009 11:06:25 -0400
Message-ID: <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jun 25, 2009 at 10:11 PM, Nigel<nigelspleen@gmail.com> wrote:

> Currently we're (perhaps naively) doing the equivalent of
> query.weight(searcher).scorer(reader).score(collector). =A0Obviously ther=
e's a
> certain amount of unnecessary calculation that results from this if you
> don't care about sorting. =A0Are there any general recommendations for
> unordered searching? =A0(We already omit norms.)

As of 2.9, scoring is optional with the new Collector.  Ie, if your
Collector doesn't call scorer.score() then the score won't be
computed.

Also, 2.9 will enable out-of-docID-order scoring if your
Collector.acceptsDocsOutOfOrder returns true, but currently it's
disjunction only (plus up to 32 prohibited terms) that will see a
speedup from this.

What kind of queries are you running?

I assume your Collector simply aggregates the list of docIDs hit?  Ie
no sorting, priority queue, etc., in it.

> (More details: Of particular interest are things that access the TermInfo=
s,
> since that's the major source of RAM usage: if a smaller number of TermIn=
fos
> were needed then we could perhaps use an aggressive index divisor setting=
 to
> save RAM without a performance penalty. =A0For example, I was thinking ab=
out a
> custom Similarity implementation that skipped the idf calculations, since
> those have to hit the TermInfos.)

Unfortunately the TermInfos must still be hit to look up the
freq/proxOffset in the postings files.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 22:07:09 2009
Return-Path: <java-user-return-40940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58362 invoked from network); 26 Jun 2009 22:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 22:07:09 -0000
Received: (qmail 93403 invoked by uid 500); 26 Jun 2009 22:07:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93350 invoked by uid 500); 26 Jun 2009 22:07:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93340 invoked by uid 99); 26 Jun 2009 22:07:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 22:07:17 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.215] (HELO mail-fx0-f215.google.com) (209.85.220.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 22:07:06 +0000
Received: by fxm11 with SMTP id 11so834405fxm.5
        for <java-user@lucene.apache.org>; Fri, 26 Jun 2009 15:06:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.126.66 with SMTP id b2mr3414390fas.3.1246053641220; Fri, 
	26 Jun 2009 15:00:41 -0700 (PDT)
Date: Sat, 27 Jun 2009 00:00:40 +0200
Message-ID: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
Subject: Scaling out/up or a mix
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a435a7f2c2046d477822
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a435a7f2c2046d477822
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi.

I currently have an index which is 16GB per machine (8 machines = 128GB)
(data is stored externally, not in index) and is growing like crazy (we are
indexing blogs which is crazy by nature) and have only allocated 2GB per
machine to the Lucene app since we are running some other stuff there in
parallell.

Each doc should be roughly the size of a blog post, no more than 20k.

We currently have about 90M documents and it is increasing rapidly so
getting into the G+ document range is not going to be too far away.

Now due to search performance I think I need to move these instances to
dedicated index/search machines (or index on some machines and search on
others). Anyway I would like to get some feedback about two things:

1. What is the most important hardware aspect when it comes to add document
to the index and optimize it.
1.1 Is it disk I|O write throghput ? (sequential or random-io ?)
1.2 Is it RAM ?
1.3 Is is CPU ?

My guess would be disk-io, right, wrong ?

2. What is the most important hardware aspect when it comes to searching
documents in my setup ? (result-set is limited to return only the top 10
matches with page handling)
2.1 Is it disk read throughput ? (sequential or random-io ?)
2.2 Is it RAM ?
2.3 Is is CPU ?

I have no clue since the data might not fit into memory. What is then the
most important factor ? read-performance while scanning the index ? CPU
while comparing fields and collecting results ?

What I'm trying to find out is what I can do to get most bang for the buck
with a limited (aren't we all limited?) budget.

Kindly

//Marcus





-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/

--001636c5a435a7f2c2046d477822--

From java-user-return-40941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 26 22:27:53 2009
Return-Path: <java-user-return-40941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67706 invoked from network); 26 Jun 2009 22:27:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jun 2009 22:27:50 -0000
Received: (qmail 14070 invoked by uid 500); 26 Jun 2009 22:27:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14000 invoked by uid 500); 26 Jun 2009 22:27:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13990 invoked by uid 99); 26 Jun 2009 22:27:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 22:27:59 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jun 2009 22:27:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MKJtI-0005mj-VN
	for java-user@lucene.apache.org; Fri, 26 Jun 2009 15:27:28 -0700
Message-ID: <24228145.post@talk.nabble.com>
Date: Fri, 26 Jun 2009 15:27:28 -0700 (PDT)
From: John Seer <pulsphoto@yahoo.com>
To: java-user@lucene.apache.org
Subject: Lucene Term Encoder
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pulsphoto@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,
Is there any class in lucene which will do encoding for term?


Thanks
-- 
View this message in context: http://www.nabble.com/Lucene-Term-Encoder-tp24228145p24228145.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 27 16:20:47 2009
Return-Path: <java-user-return-40942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40651 invoked from network); 27 Jun 2009 16:20:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Jun 2009 16:20:47 -0000
Received: (qmail 96507 invoked by uid 500); 27 Jun 2009 16:20:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96431 invoked by uid 500); 27 Jun 2009 16:20:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96421 invoked by uid 99); 27 Jun 2009 16:20:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jun 2009 16:20:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mayankjuneja1@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jun 2009 16:20:46 +0000
Received: by rv-out-0506.google.com with SMTP id b25so823335rvf.5
        for <java-user@lucene.apache.org>; Sat, 27 Jun 2009 09:20:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=YtBOwF3sYHsd/8bcbhkh58fNPbCGSB94zk1+SbHEVQ8=;
        b=MIo7OqNpXKOadshomVEGEwtQkKbEwt7qY+pPGv4r3UPpr7J8/uPNueUAmNr9vq2x/b
         LDaSXGC07lpyDMJcf/s4GP7xO8CAElw3FquyxJ7z4LulH6dapspqHFhlF59NHi8E+Jif
         tnVdgovHPkPYoXbpdZWRx7zLo6lExH36YzSUQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=jmCJEo3rM4WsmwzY27dJeCcK017TkxZNmFCeF94nterz/XbdNqODMADcbOPBJBs0yO
         STw1lH9Lm7UjzYM4ehdq9jqdkk3Cy1JwOZYeM6NzfvD3WZFBaVHSjXdftEp8Lfj6UcWp
         rphIpokt/GjAOx1UcJoNT4ukVCUbVHwu0y5YE=
MIME-Version: 1.0
Received: by 10.141.33.19 with SMTP id l19mr362932rvj.121.1246119626758; Sat, 
	27 Jun 2009 09:20:26 -0700 (PDT)
Date: Sat, 27 Jun 2009 21:50:26 +0530
Message-ID: <eced85100906270920y13a20498t127b360c4f0486f6@mail.gmail.com>
Subject: Problem in Running the Lucene web application demo
From: mayank juneja <mayankjuneja1@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1452eb35a83046d56d5e7
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1452eb35a83046d56d5e7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

I am a new user to Lucene.

I tried running the Lucene web application demo provided with the source. I
am able to index the files but I get the following error when I try to
search a query from the browser.

HTTP Status 500 -
------------------------------

*type* Exception report

*message*

*description* *The server encountered an internal error () that prevented it
from fulfilling this request.*

*exception*

org.apache.jasper.JasperException: Unable to compile class for JSP:

An error occurred at line: 10 in the generated java file
Only a type can be imported.
org.apache.lucene.analysis.standard.StandardAnalyzer resolves to a
package

An error occurred at line: 16 in the generated java file
Only a type can be imported. org.apache.lucene.demo.html.Entities
resolves to a package

An error occurred at line: 32 in the jsp file: /luceneweb/results.jsp
IndexSearcher cannot be resolved to a type
29: <%
30:         boolean error = false;                  //used to control
flow for error messages
31:         String indexName = indexLocation;       //local copy of
the configuration variable
32:         IndexSearcher searcher = null;          //the searcher
used to open/search the index
33:         Query query = null;                     //the Query
created by the QueryParser
34:         Hits hits = null;                       //the search results
35:         int startindex = 0;                     //the first index
displayed on this page


An error occurred at line: 33 in the jsp file: /luceneweb/results.jsp
Query cannot be resolved to a type
30:         boolean error = false;                  //used to control
flow for error messages
31:         String indexName = indexLocation;       //local copy of
the configuration variable
32:         IndexSearcher searcher = null;          //the searcher
used to open/search the index
33:         Query query = null;                     //the Query
created by the QueryParser
34:         Hits hits = null;                       //the search results
35:         int startindex = 0;                     //the first index
displayed on this page
36:         int maxpage    = 50;                    //the maximum
items displayed on this page


An error occurred at line: 34 in the jsp file: /luceneweb/results.jsp
Hits cannot be resolved to a type
31:         String indexName = indexLocation;       //local copy of
the configuration variable
32:         IndexSearcher searcher = null;          //the searcher
used to open/search the index
33:         Query query = null;                     //the Query
created by the QueryParser
34:         Hits hits = null;                       //the search results
35:         int startindex = 0;                     //the first index
displayed on this page
36:         int maxpage    = 50;                    //the maximum
items displayed on this page
37:         String queryString = null;              //the query
entered in the previous page


An error occurred at line: 45 in the jsp file: /luceneweb/results.jsp
IndexSearcher cannot be resolved to a type
42:                                                 //less
43:
44:         try {
45:           searcher = new IndexSearcher(indexName);      //create
an indexSearcher for our page
46:                                                         //NOTE:
this operation is slow for large
47:                                                         //indices
(much slower than the search itself)
48:                                                         //so you
might want to keep an IndexSearcher


An error occurred at line: 79 in the jsp file: /luceneweb/results.jsp
Analyzer cannot be resolved to a type
76:
   //query string so you get the
77:
   //treatment
78:
79:                 Analyzer analyzer = new StandardAnalyzer();
   //construct our usual analyzer
80:                 try {
81:                         QueryParser qp = new
QueryParser("contents", analyzer);
82:                         query = qp.parse(queryString); //parse the


An error occurred at line: 79 in the jsp file: /luceneweb/results.jsp
StandardAnalyzer cannot be resolved to a type
76:
   //query string so you get the
77:
   //treatment
78:
79:                 Analyzer analyzer = new StandardAnalyzer();
   //construct our usual analyzer
80:                 try {
81:                         QueryParser qp = new
QueryParser("contents", analyzer);
82:                         query = qp.parse(queryString); //parse the


An error occurred at line: 81 in the jsp file: /luceneweb/results.jsp
QueryParser cannot be resolved to a type
78:
79:                 Analyzer analyzer = new StandardAnalyzer();
   //construct our usual analyzer
80:                 try {
81:                         QueryParser qp = new
QueryParser("contents", analyzer);
82:                         query = qp.parse(queryString); //parse the
83:                 } catch (ParseException e) {
   //query and construct the Query
84:
   //object


An error occurred at line: 81 in the jsp file: /luceneweb/results.jsp
QueryParser cannot be resolved to a type
78:
79:                 Analyzer analyzer = new StandardAnalyzer();
   //construct our usual analyzer
80:                 try {
81:                         QueryParser qp = new
QueryParser("contents", analyzer);
82:                         query = qp.parse(queryString); //parse the
83:                 } catch (ParseException e) {
   //query and construct the Query
84:
   //object


An error occurred at line: 83 in the jsp file: /luceneweb/results.jsp
ParseException cannot be resolved to a type
80:                 try {
81:                         QueryParser qp = new
QueryParser("contents", analyzer);
82:                         query = qp.parse(queryString); //parse the
83:                 } catch (ParseException e) {
   //query and construct the Query
84:
   //object
85:
   //if it's just "operator error"
86:
   //send them a nice error HTML


An error occurred at line: 89 in the jsp file: /luceneweb/results.jsp
e cannot be resolved
86:
   //send them a nice error HTML
87:
88: %>
89:                         <p>Error while parsing query:
<%=escapeHTML(e.getMessage())%></p>
90: <%
91:                         error = true;
   //don't bother with the rest of
92:
   //the page


An error occurred at line: 127 in the jsp file: /luceneweb/results.jsp
Document cannot be resolved to a type
124: %>
125:                 <tr>
126: <%
127:                         Document doc = hits.doc(i);
     //get the next document
128:                         String doctitle = doc.get("title");
     //get its title
129:                         String url = doc.get("path");
     //get its path field
130:                         if (url != null &&
url.startsWith("../webapps/")) { // strip off ../webapps prefix if
present


Stacktrace:
	org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
	org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
	org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:439)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:312)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:299)
	org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:586)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)



Can someone please help me to get through this error. Assistance will be
highly appreciated.

Thanks
Mayank Juneja

--000e0cd1452eb35a83046d56d5e7--

From java-user-return-40943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 27 20:08:26 2009
Return-Path: <java-user-return-40943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4509 invoked from network); 27 Jun 2009 20:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Jun 2009 20:08:26 -0000
Received: (qmail 74900 invoked by uid 500); 27 Jun 2009 20:08:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74811 invoked by uid 500); 27 Jun 2009 20:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74799 invoked by uid 99); 27 Jun 2009 20:08:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jun 2009 20:08:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jun 2009 20:08:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MKeBw-0007Fz-DQ
	for java-user@lucene.apache.org; Sat, 27 Jun 2009 13:08:04 -0700
Message-ID: <24236232.post@talk.nabble.com>
Date: Sat, 27 Jun 2009 13:08:04 -0700 (PDT)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: SpatialQuery for location based search using Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

My lucene index has got latitude and longitudes fields indexed as follows:

    doc.Add(new Field("latitude", latitude.ToString() , Field.Store.YES,
Field.Index.UN_TOKENIZED));
    
    doc.Add(new Field("longitude", longitude.ToString(), Field.Store.YES,
Field.Index.UN_TOKENIZED));

I want to retrieve a set of documents from this index whose lat and long
values are in a given range.

As you already know, Lat and long could be negative values.
Given this,would the approach mentioned below give correct results or is
there any other way to do this?

   

     Term lowerLatitude = new Term("latitude", bounds.South.ToString() );
                    Term upperLatitude = new Term("latitude",
bounds.North.ToString());
                    RangeQuery latitudeRangeQuery = new
RangeQuery(lowerLatitude, upperLatitude, true);
                    findLocationQuery.Add(latitudeRangeQuery,
BooleanClause.Occur.SHOULD);
        
    
    
                    Term lowerLongitude = new Term("longitude",
bounds.West.ToString());
                    Term upperLongitude = new Term("longitude",
bounds.East.ToString());
                    RangeQuery longitudeRangeQuery = new
RangeQuery(lowerLongitude, upperLongitude, true);
                    findLocationQuery.Add(longitudeRangeQuery,
BooleanClause.Occur.SHOULD);


Also,I wanted to know how Lucene's ConstantScoreRangeQuery is better than
RangeQuery  class.


Am facing another problem in this context:
I've one of the documents in the index with the following 3 cities:

 - Lyons, IL
   
   Oak Brook, IL
   
   San Francisco, CA

If i give input as "Lyons, IL" then this record comes up.
But if i give San Francisco, CA as input, then it does not.

However, if i store the cities for this document as follows:

 - San Francisco, CA 
   
   Lyons, IL
   
   Oak Brook, IL

 and when i give San Francisco, CA  as input, then this record shows in the
search results.

What i want here is that if i type any of the 3 cities in input,I should get
this document in the search results.

Please help me achieve this.

Thanks.







-- 
View this message in context: http://www.nabble.com/SpatialQuery-for-location-based-search-using-Lucene-tp24236232p24236232.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 27 21:45:39 2009
Return-Path: <java-user-return-40944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30869 invoked from network); 27 Jun 2009 21:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Jun 2009 21:45:38 -0000
Received: (qmail 6432 invoked by uid 500); 27 Jun 2009 21:45:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6353 invoked by uid 500); 27 Jun 2009 21:45:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6343 invoked by uid 99); 27 Jun 2009 21:45:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jun 2009 21:45:46 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jun 2009 21:45:35 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9940445EA38
	for <java-user@lucene.apache.org>; Sat, 27 Jun 2009 23:45:14 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YtCaXLuXUvZJ for <java-user@lucene.apache.org>;
	Sat, 27 Jun 2009 23:45:12 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 110FD45E97F
	for <java-user@lucene.apache.org>; Sat, 27 Jun 2009 23:45:12 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <24236232.post@talk.nabble.com>
Subject: RE: SpatialQuery for location based search using Lucene
Date: Sat, 27 Jun 2009 23:45:11 +0200
Message-ID: <98D0FBA799FE479ABD4A56D8B276ABC1@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <24236232.post@talk.nabble.com>
Thread-Index: Acn3YxadzkBKgpXHQC6RmQN86tARPAAC7SEA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Hi mitu2009,

For numeric searches the not yet released version 2.9 has new possibilities
for numeric searches. You can index int, long, float or double in a special
field type (NumericField instead of Field) and can query it with
NumericRangeQuery/NumericRangeFilter (see
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/core/org/apac
he/lucene/search/NumericRangeQuery.html). You can download this unreleased
version from svn or the hudson server (see developers resources on the
homepage, download @
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/).

If you want to work with older versions, consult also this Wiki article:
http://wiki.apache.org/lucene-java/SearchNumericalFields

What you should do with older Lucene versions:
- Pad all your numbers, so they sort alphabetically. E.g. index terms like
1,4,6,9,10,11 would not sort in this order and range queries would not work
(they would sort 1,10,11,4,6,9). So the simpliest is to pad the numbers with
zeros in front (what your example does not seem to do), e.g. by using
DecimalFormat (new DecimalFormat("000.000000")):

> My lucene index has got latitude and longitudes fields indexed as follows:
> 
>     doc.Add(new Field("latitude", latitude.ToString() , Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> 
>     doc.Add(new Field("longitude", longitude.ToString(), Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> 
> I want to retrieve a set of documents from this index whose lat and long
> values are in a given range.
> 
> As you already know, Lat and long could be negative values.

The negative values are a problem (not with NumericRangeQuery for 2.9), but
for latitudes longitudes the solution is easy. Just add a constant offset to
all numbers (e.g. 90 or 180). Then they are positive and can be easily
queried (when padding with 0 is on). On the query side you have to add the
offset, too.

[...]

> Also,I wanted to know how Lucene's ConstantScoreRangeQuery is better than
> RangeQuery  class.

ConstantScore is better for numeric Ranges, because, if you have too many
different lat/lon values in your field, the non-constant query will fail
with TooManyClausesExceptions.

> Am facing another problem in this context:
> I've one of the documents in the index with the following 3 cities:
> 
>  - Lyons, IL
> 
>    Oak Brook, IL
> 
>    San Francisco, CA
> 
> If i give input as "Lyons, IL" then this record comes up.
> But if i give San Francisco, CA as input, then it does not.
> 
> However, if i store the cities for this document as follows:
> 
>  - San Francisco, CA
> 
>    Lyons, IL
> 
>    Oak Brook, IL
> 
>  and when i give San Francisco, CA  as input, then this record shows in
> the
> search results.
> 
> What i want here is that if i type any of the 3 cities in input,I should
> get
> this document in the search results.


The question: How did you index those values? If you have done it with
UN_TOKENIZED you must create a TermQuery with the exact text (because the
whole name is the term) in correct case and spelling. For full text engines
to work correctly, you must choose the correct anaylzer to create tokens
from your indexed text and the query parser.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 27 22:58:05 2009
Return-Path: <java-user-return-40945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57170 invoked from network); 27 Jun 2009 22:58:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Jun 2009 22:58:05 -0000
Received: (qmail 30105 invoked by uid 500); 27 Jun 2009 22:58:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30022 invoked by uid 500); 27 Jun 2009 22:58:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30012 invoked by uid 99); 27 Jun 2009 22:58:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jun 2009 22:58:13 +0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.210.175 as permitted sender)
Received: from [209.85.210.175] (HELO mail-yx0-f175.google.com) (209.85.210.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jun 2009 22:58:03 +0000
Received: by yxe5 with SMTP id 5so12764yxe.29
        for <java-user@lucene.apache.org>; Sat, 27 Jun 2009 15:57:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=+a7GW6R3HZ+h5tRYDHw64QWhptwErNYq5FVllyP8RV4=;
        b=Jpl2CnamWwC+3/O10BwfkozpZG7SRYeWT3fntlok57G2euLtT6/RmLMBVZaERmHwAv
         HDMwCz2UMcZE9pc901dSRtXydzUA07X3r/OcgRBZUkn4lCP1Sjf2hrHIYRccf9BFJ5qN
         wYAE6HU0g/GTF25V8FVtiwCG82LtfEAlnGrPE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=EBLMk21uYFtOiy0PJCd89ECmtJDIMCIbeSfy+gu2EC61OBKiXbi6mvdrKsDptmx0nU
         z6p9fM/PECl1wfHIL73+Hiq1EUjZ3wxQSqbW+5/Qz450n9h9ZVgsReY7sBhojabVAbKG
         PTQbzYTBR4J5uujyQNeDvkJNSgir+477Gycrc=
MIME-Version: 1.0
Received: by 10.151.68.12 with SMTP id v12mr9003ybk.186.1246141657361; Sat, 27 
	Jun 2009 15:27:37 -0700 (PDT)
In-Reply-To: <24236232.post@talk.nabble.com>
References: <24236232.post@talk.nabble.com>
Date: Sat, 27 Jun 2009 19:27:37 -0300
Message-ID: <126142c0906271527m1bc3e52t189645dbb1318cf2@mail.gmail.com>
Subject: Re: SpatialQuery for location based search using Lucene
From: Marcelo Ochoa <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi:
  Did you know Local Lucene extension?
http://sourceforge.net/projects/locallucene/
  Some test are similar to your example:
http://locallucene.svn.sourceforge.net/viewvc/locallucene/trunk/locallucene=
/src/java/com/pjaol/search/test/UnitTests/
  Best regards, Marcelo.

On Sat, Jun 27, 2009 at 5:08 PM, mitu2009<musicfreaque@gmail.com> wrote:
>
> Hi,
>
> My lucene index has got latitude and longitudes fields indexed as follows=
:
>
> =A0 =A0doc.Add(new Field("latitude", latitude.ToString() , Field.Store.YE=
S,
> Field.Index.UN_TOKENIZED));
>
> =A0 =A0doc.Add(new Field("longitude", longitude.ToString(), Field.Store.Y=
ES,
> Field.Index.UN_TOKENIZED));
>
> I want to retrieve a set of documents from this index whose lat and long
> values are in a given range.
>
> As you already know, Lat and long could be negative values.
> Given this,would the approach mentioned below give correct results or is
> there any other way to do this?
>
>
>
> =A0 =A0 Term lowerLatitude =3D new Term("latitude", bounds.South.ToString=
() );
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Term upperLatitude =3D new Term("l=
atitude",
> bounds.North.ToString());
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0RangeQuery latitudeRangeQuery =3D =
new
> RangeQuery(lowerLatitude, upperLatitude, true);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0findLocationQuery.Add(latitudeRang=
eQuery,
> BooleanClause.Occur.SHOULD);
>
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Term lowerLongitude =3D new Term("=
longitude",
> bounds.West.ToString());
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Term upperLongitude =3D new Term("=
longitude",
> bounds.East.ToString());
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0RangeQuery longitudeRangeQuery =3D=
 new
> RangeQuery(lowerLongitude, upperLongitude, true);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0findLocationQuery.Add(longitudeRan=
geQuery,
> BooleanClause.Occur.SHOULD);
>
>
> Also,I wanted to know how Lucene's ConstantScoreRangeQuery is better than
> RangeQuery =A0class.
>
>
> Am facing another problem in this context:
> I've one of the documents in the index with the following 3 cities:
>
> =A0- Lyons, IL
>
> =A0 Oak Brook, IL
>
> =A0 San Francisco, CA
>
> If i give input as "Lyons, IL" then this record comes up.
> But if i give San Francisco, CA as input, then it does not.
>
> However, if i store the cities for this document as follows:
>
> =A0- San Francisco, CA
>
> =A0 Lyons, IL
>
> =A0 Oak Brook, IL
>
> =A0and when i give San Francisco, CA =A0as input, then this record shows =
in the
> search results.
>
> What i want here is that if i type any of the 3 cities in input,I should =
get
> this document in the search results.
>
> Please help me achieve this.
>
> Thanks.
>
>
>
>
>
>
>
> --
> View this message in context: http://www.nabble.com/SpatialQuery-for-loca=
tion-based-search-using-Lucene-tp24236232p24236232.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-=
jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 28 09:21:40 2009
Return-Path: <java-user-return-40946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86413 invoked from network); 28 Jun 2009 09:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jun 2009 09:21:40 -0000
Received: (qmail 4218 invoked by uid 500); 28 Jun 2009 09:21:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4146 invoked by uid 500); 28 Jun 2009 09:21:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4136 invoked by uid 99); 28 Jun 2009 09:21:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 09:21:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 09:21:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MKqZY-0005ZP-I0
	for java-user@lucene.apache.org; Sun, 28 Jun 2009 02:21:16 -0700
Message-ID: <24239930.post@talk.nabble.com>
Date: Sun, 28 Jun 2009 02:21:16 -0700 (PDT)
From: Shay Banon <kimchy@gmail.com>
To: java-user@lucene.apache.org
Subject: Delete by docId in IndexWriter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kimchy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I have a case where deleting documents by doc id make sense (I know
before hand the docs I want to delete based on the doc id). I am wondering
why the API is not exposed in the IndexWriter (as it is in IndexReader). I
understand that this API is more "expert" than typical usage, but it allows
for certain optimization on my end (already performed the query for deletion
and I have the doc ids, so I don't want to perform it again...). It looks
like the DocumentsWriter already has support for deleting by document id, so
I was wondering if it is possible to expose it in IndexWriter.

Thanks,
Shay
-- 
View this message in context: http://www.nabble.com/Delete-by-docId-in-IndexWriter-tp24239930p24239930.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 28 12:40:12 2009
Return-Path: <java-user-return-40947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37924 invoked from network); 28 Jun 2009 12:40:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jun 2009 12:40:11 -0000
Received: (qmail 84999 invoked by uid 500); 28 Jun 2009 12:40:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84909 invoked by uid 500); 28 Jun 2009 12:40:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84897 invoked by uid 99); 28 Jun 2009 12:40:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 12:40:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 12:40:10 +0000
Received: by fg-out-1718.google.com with SMTP id l27so292139fgb.4
        for <java-user@lucene.apache.org>; Sun, 28 Jun 2009 05:39:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=ZBNWmImPqRJwI3/3scERymHVUniLRgLlDTZRyY9N87E=;
        b=HV/5yYsE536pcB7b78AFTDHXsW7Jl3apvENCXIUlw9o2DOb9quwBdOrOu+HukkgvMk
         cXpTLqJouEjOAQQvGvSm74FS6vG4BtTda5ZvobXnl1xqXLXWzn2SSMRYsnKdR2ngBTae
         O/5+up9EPNHHu+czTtPkkuBG8B7YHpXipXiJQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=vcPYBO3f4o26GF0es9+qn6YMsv3X0oO5DaeI7BWJxHYoMtNBA2UPtbVU7ROGtGgNvb
         vPIr8TS8MDVcHK/iEgANH7uRwPlWneOFGird+lR/EkwldgkLLUaWyOYeKzi1q3FdndHX
         BPEif7iz1NOiihFFxEfWkVcn0PMq1VBkQTYVE=
MIME-Version: 1.0
Received: by 10.86.31.17 with SMTP id e17mr460381fge.47.1246192790018; Sun, 28 
	Jun 2009 05:39:50 -0700 (PDT)
Date: Sun, 28 Jun 2009 15:39:49 +0300
Message-ID: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
Subject: MultiSegmentReader problems - current is null
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd24442921c66046d67deda
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd24442921c66046d67deda
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

I have an index that is a multi-segment index (how come it is created this
way?)

When I try to get the freq of a term at the following way:
   TermDocs tDocs = this.indexReader.termDocs(term);
   tf = tDocs.freq();
the greq method :
  public int freq()
  {
   return current.freq();
  }
is in MultiSegmentReader.

The current is null, so I get an exception.

Should I initialize current?
How can I avoid this problem?
How can I avoid having a multi-segment index?

Many thanks,
Liat

--000e0cd24442921c66046d67deda--

From java-user-return-40948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 28 17:39:35 2009
Return-Path: <java-user-return-40948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5586 invoked from network); 28 Jun 2009 17:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jun 2009 17:39:35 -0000
Received: (qmail 19708 invoked by uid 500); 28 Jun 2009 17:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19645 invoked by uid 500); 28 Jun 2009 17:39:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19635 invoked by uid 99); 28 Jun 2009 17:39:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 17:39:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 17:39:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MKyLP-0006Xz-SM
	for java-user@lucene.apache.org; Sun, 28 Jun 2009 10:39:11 -0700
Message-ID: <24243647.post@talk.nabble.com>
Date: Sun, 28 Jun 2009 10:39:11 -0700 (PDT)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: Correctly indexing latitude and longitude values in Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Am working on a  "US based nearest city search within a given radius"
functionality using Lucene API.
Am indexing city's lat and long values in Lucene as follows:

    doc.Add(new Field("latitude", paddedLatitude, Field.Store.YES,
Field.Index.UN_TOKENIZED));
    
    doc.Add(new Field("longitude", paddedLongitude, Field.Store.YES,
Field.Index.UN_TOKENIZED));

Since Lucene only understands strings and not numbers, am padding lat and
long values.

For example, if original lat and long are 41.811846 and -87.820628
respectively, after padding,values look like:

paddedLatitude -->"0041.811846" and paddedLongitude-->"-087.820628" 

Am doing the same padding while building the nearest city query(using
Lucene's ConstantScoreRangeQuery class).

Given the fact that lat and long values could be decimal/negative numbers,
is this the right approach to index them so that I would get correct nearest
cities in the search results when lucene would perform a number
Range/comparison operation on these values?

Thanks.

-- 
View this message in context: http://www.nabble.com/Correctly-indexing-latitude-and-longitude-values-in-Lucene-tp24243647p24243647.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 28 17:44:31 2009
Return-Path: <java-user-return-40949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7409 invoked from network); 28 Jun 2009 17:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jun 2009 17:44:31 -0000
Received: (qmail 23275 invoked by uid 500); 28 Jun 2009 17:44:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23193 invoked by uid 500); 28 Jun 2009 17:44:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23183 invoked by uid 99); 28 Jun 2009 17:44:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 17:44:40 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 17:44:29 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1D99E45EA2A;
	Sun, 28 Jun 2009 19:44:05 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id vAD16r2YbIWU; Sun, 28 Jun 2009 19:43:54 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B328D45E97F;
	Sun, 28 Jun 2009 19:43:54 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Cc: "'mitu2009'" <musicfreaque@gmail.com>
References: <24243647.post@talk.nabble.com>
Subject: RE: Correctly indexing latitude and longitude values in Lucene
Date: Sun, 28 Jun 2009 19:43:54 +0200
Message-ID: <9C22432F1401479C935C1EA928DCCD66@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <24243647.post@talk.nabble.com>
Thread-Index: Acn4F3ZVNLxh/PJBRxu/JSB36HOCNAAAHLFQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

I already responded to your eMail and answered all your questions!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: mitu2009 [mailto:musicfreaque@gmail.com]
> Sent: Sunday, June 28, 2009 7:39 PM
> To: java-user@lucene.apache.org
> Subject: Correctly indexing latitude and longitude values in Lucene
> 
> 
> Hi,
> 
> Am working on a  "US based nearest city search within a given radius"
> functionality using Lucene API.
> Am indexing city's lat and long values in Lucene as follows:
> 
>     doc.Add(new Field("latitude", paddedLatitude, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> 
>     doc.Add(new Field("longitude", paddedLongitude, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> 
> Since Lucene only understands strings and not numbers, am padding lat and
> long values.
> 
> For example, if original lat and long are 41.811846 and -87.820628
> respectively, after padding,values look like:
> 
> paddedLatitude -->"0041.811846" and paddedLongitude-->"-087.820628"
> 
> Am doing the same padding while building the nearest city query(using
> Lucene's ConstantScoreRangeQuery class).
> 
> Given the fact that lat and long values could be decimal/negative numbers,
> is this the right approach to index them so that I would get correct
> nearest
> cities in the search results when lucene would perform a number
> Range/comparison operation on these values?
> 
> Thanks.
> 
> --
> View this message in context: http://www.nabble.com/Correctly-indexing-
> latitude-and-longitude-values-in-Lucene-tp24243647p24243647.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 28 18:29:07 2009
Return-Path: <java-user-return-40950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30968 invoked from network); 28 Jun 2009 18:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jun 2009 18:29:06 -0000
Received: (qmail 48560 invoked by uid 500); 28 Jun 2009 18:29:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48485 invoked by uid 500); 28 Jun 2009 18:29:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48475 invoked by uid 99); 28 Jun 2009 18:29:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 18:29:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 18:29:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MKz7M-0008Dr-3I
	for java-user@lucene.apache.org; Sun, 28 Jun 2009 11:28:44 -0700
Message-ID: <24244088.post@talk.nabble.com>
Date: Sun, 28 Jun 2009 11:28:44 -0700 (PDT)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Correctly indexing latitude and longitude values in Lucene
In-Reply-To: <9C22432F1401479C935C1EA928DCCD66@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
References: <24243647.post@talk.nabble.com> <9C22432F1401479C935C1EA928DCCD66@VEGA>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Uwe...but I have not mentioned the padding logic in my earlier
mail.Just wanted to know if that logic would work.

Uwe Schindler wrote:
> 
> I already responded to your eMail and answered all your questions!
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
>> -----Original Message-----
>> From: mitu2009 [mailto:musicfreaque@gmail.com]
>> Sent: Sunday, June 28, 2009 7:39 PM
>> To: java-user@lucene.apache.org
>> Subject: Correctly indexing latitude and longitude values in Lucene
>> 
>> 
>> Hi,
>> 
>> Am working on a  "US based nearest city search within a given radius"
>> functionality using Lucene API.
>> Am indexing city's lat and long values in Lucene as follows:
>> 
>>     doc.Add(new Field("latitude", paddedLatitude, Field.Store.YES,
>> Field.Index.UN_TOKENIZED));
>> 
>>     doc.Add(new Field("longitude", paddedLongitude, Field.Store.YES,
>> Field.Index.UN_TOKENIZED));
>> 
>> Since Lucene only understands strings and not numbers, am padding lat and
>> long values.
>> 
>> For example, if original lat and long are 41.811846 and -87.820628
>> respectively, after padding,values look like:
>> 
>> paddedLatitude -->"0041.811846" and paddedLongitude-->"-087.820628"
>> 
>> Am doing the same padding while building the nearest city query(using
>> Lucene's ConstantScoreRangeQuery class).
>> 
>> Given the fact that lat and long values could be decimal/negative
>> numbers,
>> is this the right approach to index them so that I would get correct
>> nearest
>> cities in the search results when lucene would perform a number
>> Range/comparison operation on these values?
>> 
>> Thanks.
>> 
>> --
>> View this message in context: http://www.nabble.com/Correctly-indexing-
>> latitude-and-longitude-values-in-Lucene-tp24243647p24243647.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Correctly-indexing-latitude-and-longitude-values-in-Lucene-tp24243647p24244088.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 28 21:13:41 2009
Return-Path: <java-user-return-40951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57309 invoked from network); 28 Jun 2009 21:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jun 2009 21:13:41 -0000
Received: (qmail 19835 invoked by uid 500); 28 Jun 2009 21:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19740 invoked by uid 500); 28 Jun 2009 21:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19730 invoked by uid 99); 28 Jun 2009 21:13:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 21:13:49 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.218.228] (HELO mail-bw0-f228.google.com) (209.85.218.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jun 2009 21:13:39 +0000
Received: by bwz28 with SMTP id 28so56124bwz.5
        for <java-user@lucene.apache.org>; Sun, 28 Jun 2009 14:13:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.126.66 with SMTP id b2mr4069157fas.3.1246223592820; Sun, 
	28 Jun 2009 14:13:12 -0700 (PDT)
In-Reply-To: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
Date: Sun, 28 Jun 2009 23:13:12 +0200
Message-ID: <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
Subject: Re: Scaling out/up or a mix
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a4358f90e2046d6f0ad7
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a4358f90e2046d6f0ad7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi. I think I need to be more specific.

What I am trying to find out is if I should aim for:

CPU (2x4 cores, 2.0-3.0Ghz)? or perhaps just a 4 cores is enough.
Fast disk IO: 8 disks, RAID1+0 ? or perhaps 2 disks is enough...
RAM - if the index does not fit into RAM how much RAM should I then buy ?

Please any hints would be appreciated since I am going to invest soon.

//Marcus

On Sat, Jun 27, 2009 at 12:00 AM, Marcus Herou
<marcus.herou@tailsweep.com>wrote:

> Hi.
>
> I currently have an index which is 16GB per machine (8 machines = 128GB)
> (data is stored externally, not in index) and is growing like crazy (we are
> indexing blogs which is crazy by nature) and have only allocated 2GB per
> machine to the Lucene app since we are running some other stuff there in
> parallell.
>
> Each doc should be roughly the size of a blog post, no more than 20k.
>
> We currently have about 90M documents and it is increasing rapidly so
> getting into the G+ document range is not going to be too far away.
>
> Now due to search performance I think I need to move these instances to
> dedicated index/search machines (or index on some machines and search on
> others). Anyway I would like to get some feedback about two things:
>
> 1. What is the most important hardware aspect when it comes to add document
> to the index and optimize it.
> 1.1 Is it disk I|O write throghput ? (sequential or random-io ?)
> 1.2 Is it RAM ?
> 1.3 Is is CPU ?
>
> My guess would be disk-io, right, wrong ?
>
> 2. What is the most important hardware aspect when it comes to searching
> documents in my setup ? (result-set is limited to return only the top 10
> matches with page handling)
> 2.1 Is it disk read throughput ? (sequential or random-io ?)
> 2.2 Is it RAM ?
> 2.3 Is is CPU ?
>
> I have no clue since the data might not fit into memory. What is then the
> most important factor ? read-performance while scanning the index ? CPU
> while comparing fields and collecting results ?
>
> What I'm trying to find out is what I can do to get most bang for the buck
> with a limited (aren't we all limited?) budget.
>
> Kindly
>
> //Marcus
>
>
>
>
>
> --
> Marcus Herou CTO and co-founder Tailsweep AB
> +46702561312
> marcus.herou@tailsweep.com
> http://www.tailsweep.com/
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/

--001636c5a4358f90e2046d6f0ad7--

From java-user-return-40952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 00:55:16 2009
Return-Path: <java-user-return-40952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14400 invoked from network); 29 Jun 2009 00:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 00:55:16 -0000
Received: (qmail 3574 invoked by uid 500); 29 Jun 2009 00:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3510 invoked by uid 500); 29 Jun 2009 00:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3500 invoked by uid 99); 29 Jun 2009 00:55:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 00:55:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.220.215 as permitted sender)
Received: from [209.85.220.215] (HELO mail-fx0-f215.google.com) (209.85.220.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 00:55:16 +0000
Received: by fxm11 with SMTP id 11so1617494fxm.5
        for <java-user@lucene.apache.org>; Sun, 28 Jun 2009 17:54:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=91mbSGp4SVsVqvCnCunh5Gj8wMjhrNfGcaYScnDbeWw=;
        b=RVsNme8Ol6WX7srmyROy9PK3uFOzZwwevvg+fu4LlJp8RMBmNGBygNtDJknhHHjKwU
         ApXVlUwMgtvB/eZjt+UUBFjQ6b7Gp39T48SafjCMxoOdVA95ojg9g1yffxonXC+YFcEd
         Zzz41IER0Wpa8JBLJm5ewkdc3DNzKVwyY1UMw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WzLdQUEH+pU1kdjNHNVooOObF1Nv0VoOpqQZrpqPnKyyWU6e2dqc21+pRH8X6kIqmh
         8XcoV5HlRMtfAnkU8CsWFz35oYmCp/H0Sy0ZATvXSw0ELKqq4C2OavzoREEkePcIBWWI
         w+gGafmtAqcVxExtmsd8l3AqyFWBIxpz4sfBU=
MIME-Version: 1.0
Received: by 10.204.52.146 with SMTP id i18mr6605519bkg.33.1246236895065; Sun, 
	28 Jun 2009 17:54:55 -0700 (PDT)
In-Reply-To: <410844.62913.qm@web27106.mail.ukl.yahoo.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <410844.62913.qm@web27106.mail.ukl.yahoo.com>
Date: Sun, 28 Jun 2009 20:54:55 -0400
Message-ID: <843920a30906281754x55b27d04l440f375e6a38d148@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5abdf6fb4f3046d72236c
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5abdf6fb4f3046d72236c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Fri, Jun 26, 2009 at 10:51 AM, eks dev <eksdev@yahoo.co.uk> wrote:

>
> You omitNorms(), did you also omitTf()?


We did, but had to include TF after all since omitting it also dropped
position information, which we needed for phrase queries.  I didn't think it
was possible to remove just the TFs without the positions, but please let me
know if that's incorrect.

Thanks,
Chris

--001636c5abdf6fb4f3046d72236c--

From java-user-return-40953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 00:56:36 2009
Return-Path: <java-user-return-40953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14556 invoked from network); 29 Jun 2009 00:56:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 00:56:36 -0000
Received: (qmail 5385 invoked by uid 500); 29 Jun 2009 00:56:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5297 invoked by uid 500); 29 Jun 2009 00:56:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5287 invoked by uid 99); 29 Jun 2009 00:56:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 00:56:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.220.215 as permitted sender)
Received: from [209.85.220.215] (HELO mail-fx0-f215.google.com) (209.85.220.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 00:56:35 +0000
Received: by fxm11 with SMTP id 11so1617740fxm.5
        for <java-user@lucene.apache.org>; Sun, 28 Jun 2009 17:56:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=1FItnUnihVYpYprilFaQ+9ILM80w7dclmoOt5Hl5Jkk=;
        b=pPaGUt/SGaAH49Iz8fbdllg39hqmxme56vgx6PUTu43tEZcGJvLonhmO+pxIStyyu5
         PrSehui02vxMQccDA8H7nGF1T2roRonmq+BkttKGJ+g7fZF1SrjmCT9cBZf1P8VIOQc9
         5a4LT6w7gwDsa9Hdn45mmRpQWCnFGu6vR9/mM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ous/NH+NlKlS7mDSV2x2hdFMHMH3f+DcEufF4+zGPV2cz5hmGPudO4gX/2aZaYOOiw
         Z4Gg3moloTHES4BUWCa9zvXTnpY25VbGJYzw3lzsciJmjoB4z6eYotY0I2IV1sXTsyMt
         wUfS0qODLBa4DhVwtkQwphQ9RweBv82URPU50=
MIME-Version: 1.0
Received: by 10.204.116.8 with SMTP id k8mr6533198bkq.117.1246236974955; Sun, 
	28 Jun 2009 17:56:14 -0700 (PDT)
In-Reply-To: <342486.16029.qm@web27102.mail.ukl.yahoo.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <342486.16029.qm@web27102.mail.ukl.yahoo.com>
Date: Sun, 28 Jun 2009 20:56:14 -0400
Message-ID: <843920a30906281756l6f212bfcvd1911b650f9a7088@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a48432be02046d722830
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a48432be02046d722830
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Fri, Jun 26, 2009 at 10:52 AM, eks dev <eksdev@yahoo.co.uk> wrote:

>
> also see,
> http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/BooleanQuery.html#getAllowDocsOutOfOrder()<http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/BooleanQuery.html#getAllowDocsOutOfOrder%28%29>


Interesting, thank you.  I'm not sure how many of our queries will fall into
the category of things that will be improved by this setting, but every
little bit helps.

Chris

--001636c5a48432be02046d722830--

From java-user-return-40954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 01:08:32 2009
Return-Path: <java-user-return-40954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16702 invoked from network); 29 Jun 2009 01:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 01:08:32 -0000
Received: (qmail 8825 invoked by uid 500); 29 Jun 2009 01:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8758 invoked by uid 500); 29 Jun 2009 01:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8748 invoked by uid 99); 29 Jun 2009 01:08:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 01:08:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.228 as permitted sender)
Received: from [209.85.218.228] (HELO mail-bw0-f228.google.com) (209.85.218.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 01:08:31 +0000
Received: by bwz28 with SMTP id 28so115521bwz.5
        for <java-user@lucene.apache.org>; Sun, 28 Jun 2009 18:08:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=2KepLC/7GyuwTVXEcLFE88yzxmM45HBgoDvdbDJcQZg=;
        b=iFTE9x5JBO136uIShyjeD/NvEyiul0fABFgxjMDoNF22JmKvOyULpivW5DwmiolYYD
         f8pebB11DO1OIgtDGQQdCNLiWN1egWoh2R2cbwjGn/c1bclx98PRiBB9hVvrfL92j3sc
         rn2OFgCisU2iAAzA23TIBL1LGyVDpnQLghIXQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bY4NVpeI1HO9V1Z8L7se2yLatlNKkWLVO54QlSmFfCg5Nbv4o+nKpq2UsTQ1ZhQMHz
         wL0CgF27MDdCuXDKr3JwPcp3c72FEJu6sC9yCqMtFYJbcuMf3NQ+sxaYPnww0PUaCok1
         1jt+eeQ+Fp/izrGys/Hj8jkq5WyoWWmOam2Rw=
MIME-Version: 1.0
Received: by 10.204.124.7 with SMTP id s7mr6467762bkr.189.1246237690936; Sun, 
	28 Jun 2009 18:08:10 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
Date: Sun, 28 Jun 2009 21:08:10 -0400
Message-ID: <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c59825dfe7c9046d725202
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c59825dfe7c9046d725202
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Fri, Jun 26, 2009 at 11:06 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> On Thu, Jun 25, 2009 at 10:11 PM, Nigel<nigelspleen@gmail.com> wrote:
>
> > Currently we're (perhaps naively) doing the equivalent of
> > query.weight(searcher).scorer(reader).score(collector).  Obviously
> there's a
> > certain amount of unnecessary calculation that results from this if you
> > don't care about sorting.  Are there any general recommendations for
> > unordered searching?  (We already omit norms.)
>
> As of 2.9, scoring is optional with the new Collector.  Ie, if your
> Collector doesn't call scorer.score() then the score won't be
> computed.
>
> Also, 2.9 will enable out-of-docID-order scoring if your
> Collector.acceptsDocsOutOfOrder returns true, but currently it's
> disjunction only (plus up to 32 prohibited terms) that will see a
> speedup from this.
>
> What kind of queries are you running?


There's quite a mix.  At the simplest they're a conjunction of 3-5 terms.
At the most complex there are sometimes a hundred or more terms in various
nested boolean combinations.  So it looks like 2.9 is where we'll see some
benefits.

I assume your Collector simply aggregates the list of docIDs hit?  Ie
> no sorting, priority queue, etc., in it.
>

Exactly: it just collects all the ids and later we either load all hits or a
random subsample.


> > (More details: Of particular interest are things that access the
> TermInfos,
> > since that's the major source of RAM usage: if a smaller number of
> TermInfos
> > were needed then we could perhaps use an aggressive index divisor setting
> to
> > save RAM without a performance penalty.  For example, I was thinking
> about a
> > custom Similarity implementation that skipped the idf calculations, since
> > those have to hit the TermInfos.)
>
> Unfortunately the TermInfos must still be hit to look up the
> freq/proxOffset in the postings files.


But for that data you only have to hit the TermInfos for the terms you're
searching, correct?  So, assuming that there are vastly more terms in the
index than you ever actually use in a query, we could rely on the LRU cache
to keep the queried TermInfos around, rather than loading all of them
up-front.  This was a hypothesis based on some tracing through the code but
not a lot of knowledge of Lucene internals, so please steer me back to
reality if necessary.  (-:

Thanks,
Chris

--001636c59825dfe7c9046d725202--

From java-user-return-40955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 01:25:07 2009
Return-Path: <java-user-return-40955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21911 invoked from network); 29 Jun 2009 01:25:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 01:25:07 -0000
Received: (qmail 12261 invoked by uid 500); 29 Jun 2009 01:25:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12181 invoked by uid 500); 29 Jun 2009 01:25:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12170 invoked by uid 99); 29 Jun 2009 01:25:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 01:25:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 01:25:04 +0000
Received: by rv-out-0506.google.com with SMTP id b25so1096483rvf.5
        for <java-user@lucene.apache.org>; Sun, 28 Jun 2009 18:24:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=QHfPRkv9cHs16AmVWVKb85pnqvbRhHJAx817MG5mUYg=;
        b=o5pab8DtWaKvzE0uQNj6s53mTvsqcZi+BCPejiqP+FzpiAtefF+cETmJy6lM8oJ+V6
         DcDtpoYQdb9cRHj2w/EegN62xM297sNBSbhvqcYC5M5vOvVeB8o8a6KWUT2NNwxG73cx
         FRaumbfxpoBEr+6eq4EQ6TW9KvR6te8iuOGCU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ClhEdup17/nx2O5CtQG4gEfE3u+0XfDDVXPeS0fAulBo47g7+PWoxwEgRBI0/fxEE7
         HJ+lQ0E+kqEL/1Ednb+vkAbzqgmIl/7FDkj2PVPa2EyTXxqyVr9ba3RX4lmESSksswnS
         FRudAZhBE1s8t6sWA/7p8VmBSCclaTcx/Rf7I=
MIME-Version: 1.0
Received: by 10.140.136.6 with SMTP id j6mr580944rvd.15.1246238683236; Sun, 28 
	Jun 2009 18:24:43 -0700 (PDT)
In-Reply-To: <24239930.post@talk.nabble.com>
References: <24239930.post@talk.nabble.com>
Date: Sun, 28 Jun 2009 18:24:43 -0700
Message-ID: <85d3c3b60906281824p69a3aad8mbaddb6ee400d0e28@mail.gmail.com>
Subject: Re: Delete by docId in IndexWriter
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd254ea050b46046d728e54
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd254ea050b46046d728e54
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

This requires tracking the genealogy of docids as they are merged inside
IndexWriter. It's doable, so if you're particularly interested feel free to
open a jira issue.

On Sun, Jun 28, 2009 at 2:21 AM, Shay Banon <kimchy@gmail.com> wrote:

>
> Hi,
>
>   I have a case where deleting documents by doc id make sense (I know
> before hand the docs I want to delete based on the doc id). I am wondering
> why the API is not exposed in the IndexWriter (as it is in IndexReader). I
> understand that this API is more "expert" than typical usage, but it allows
> for certain optimization on my end (already performed the query for
> deletion
> and I have the doc ids, so I don't want to perform it again...). It looks
> like the DocumentsWriter already has support for deleting by document id,
> so
> I was wondering if it is possible to expose it in IndexWriter.
>
> Thanks,
> Shay
> --
> View this message in context:
> http://www.nabble.com/Delete-by-docId-in-IndexWriter-tp24239930p24239930.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--000e0cd254ea050b46046d728e54--

From java-user-return-40956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 06:53:55 2009
Return-Path: <java-user-return-40956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18181 invoked from network); 29 Jun 2009 06:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 06:53:55 -0000
Received: (qmail 58199 invoked by uid 500); 29 Jun 2009 06:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58124 invoked by uid 500); 29 Jun 2009 06:54:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58114 invoked by uid 99); 29 Jun 2009 06:54:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 06:54:02 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=FUZZY_CPILL,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 06:53:51 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 2C7193820F0
	for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 02:53:30 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Mon, 29 Jun 2009 02:53:30 -0400
X-Sasl-enc: kgve5m1ntL1w59jbFfG4cPHVbo+AUa+NJRQ0kua/YgQp 1246258409
Received: from [192.168.123.210] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 80DC0D516
	for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 02:53:29 -0400 (EDT)
Message-ID: <4A4864E7.3070609@boboco.ie>
Date: Mon, 29 Jun 2009 07:53:27 +0100
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.19 (X11/20090118)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Scaling out/up or a mix
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com> <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
In-Reply-To: <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
X-Enigmail-Version: 0.95.7
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

There is no single answer -- this is always application specific.

Without knowing anything about what you are doing:

1. disk i/o is probably the most critical.  Go SSD or even RAM disk if
you can, if performance is absolutely critical
2. Sometimes CPU can become an issue, but 8 cores is probably enough
unless you are doing especially cpu-bound searches.

Unless you are doing something with hard performance requirements, or
really quite unusual, buying "good" kit is probably good enough, and you
won't really know for sure until you measure.  Lucene is a general
enough tool that there isn't a terribly universal answer to this.  We
were a bit surprised to end up cpu-bound instead of disk i/o-bound, for
instance, but we ended up taking an unusual path.  YMMV.

Marcus Herou wrote:
> Hi. I think I need to be more specific.
>
> What I am trying to find out is if I should aim for:
>
> CPU (2x4 cores, 2.0-3.0Ghz)? or perhaps just a 4 cores is enough.
> Fast disk IO: 8 disks, RAID1+0 ? or perhaps 2 disks is enough...
> RAM - if the index does not fit into RAM how much RAM should I then buy ?
>
> Please any hints would be appreciated since I am going to invest soon.
>
> //Marcus
>
> On Sat, Jun 27, 2009 at 12:00 AM, Marcus Herou
> <marcus.herou@tailsweep.com>wrote:
>
>   
>> Hi.
>>
>> I currently have an index which is 16GB per machine (8 machines = 128GB)
>> (data is stored externally, not in index) and is growing like crazy (we are
>> indexing blogs which is crazy by nature) and have only allocated 2GB per
>> machine to the Lucene app since we are running some other stuff there in
>> parallell.
>>
>> Each doc should be roughly the size of a blog post, no more than 20k.
>>
>> We currently have about 90M documents and it is increasing rapidly so
>> getting into the G+ document range is not going to be too far away.
>>
>> Now due to search performance I think I need to move these instances to
>> dedicated index/search machines (or index on some machines and search on
>> others). Anyway I would like to get some feedback about two things:
>>
>> 1. What is the most important hardware aspect when it comes to add document
>> to the index and optimize it.
>> 1.1 Is it disk I|O write throghput ? (sequential or random-io ?)
>> 1.2 Is it RAM ?
>> 1.3 Is is CPU ?
>>
>> My guess would be disk-io, right, wrong ?
>>
>> 2. What is the most important hardware aspect when it comes to searching
>> documents in my setup ? (result-set is limited to return only the top 10
>> matches with page handling)
>> 2.1 Is it disk read throughput ? (sequential or random-io ?)
>> 2.2 Is it RAM ?
>> 2.3 Is is CPU ?
>>
>> I have no clue since the data might not fit into memory. What is then the
>> most important factor ? read-performance while scanning the index ? CPU
>> while comparing fields and collecting results ?
>>
>> What I'm trying to find out is what I can do to get most bang for the buck
>> with a limited (aren't we all limited?) budget.
>>
>> Kindly
>>
>> //Marcus
>>
>>
>>
>>
>>
>> --
>> Marcus Herou CTO and co-founder Tailsweep AB
>> +46702561312
>> marcus.herou@tailsweep.com
>> http://www.tailsweep.com/
>>
>>
>>     
>
>
>   


-- 
Eric Bowman
Boboco Ltd
ebowman@boboco.ie
http://www.boboco.ie/ebowman/pubkey.pgp
+35318394189/+353872801532


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 07:08:57 2009
Return-Path: <java-user-return-40957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22043 invoked from network); 29 Jun 2009 07:08:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 07:08:57 -0000
Received: (qmail 69647 invoked by uid 500); 29 Jun 2009 07:09:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69562 invoked by uid 500); 29 Jun 2009 07:09:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69552 invoked by uid 99); 29 Jun 2009 07:09:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 07:09:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 07:08:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLAyg-0000Vo-NN
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 00:08:34 -0700
Message-ID: <24249355.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 00:08:34 -0700 (PDT)
From: Shay Banon <kimchy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Delete by docId in IndexWriter
In-Reply-To: <85d3c3b60906281824p69a3aad8mbaddb6ee400d0e28@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kimchy@gmail.com
References: <24239930.post@talk.nabble.com> <85d3c3b60906281824p69a3aad8mbaddb6ee400d0e28@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Agreed, thats the tricky part. I will open a Jira issue. Really hoping to get
some time and maybe also provide a patch...

Thanks,
Shay


Jason Rutherglen-2 wrote:
> 
> This requires tracking the genealogy of docids as they are merged inside
> IndexWriter. It's doable, so if you're particularly interested feel free
> to
> open a jira issue.
> 
> On Sun, Jun 28, 2009 at 2:21 AM, Shay Banon <kimchy@gmail.com> wrote:
> 
>>
>> Hi,
>>
>>   I have a case where deleting documents by doc id make sense (I know
>> before hand the docs I want to delete based on the doc id). I am
>> wondering
>> why the API is not exposed in the IndexWriter (as it is in IndexReader).
>> I
>> understand that this API is more "expert" than typical usage, but it
>> allows
>> for certain optimization on my end (already performed the query for
>> deletion
>> and I have the doc ids, so I don't want to perform it again...). It looks
>> like the DocumentsWriter already has support for deleting by document id,
>> so
>> I was wondering if it is possible to expose it in IndexWriter.
>>
>> Thanks,
>> Shay
>> --
>> View this message in context:
>> http://www.nabble.com/Delete-by-docId-in-IndexWriter-tp24239930p24239930.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Delete-by-docId-in-IndexWriter-tp24239930p24249355.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 07:45:17 2009
Return-Path: <java-user-return-40958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29981 invoked from network); 29 Jun 2009 07:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 07:45:17 -0000
Received: (qmail 93163 invoked by uid 500); 29 Jun 2009 07:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93070 invoked by uid 500); 29 Jun 2009 07:45:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93060 invoked by uid 99); 29 Jun 2009 07:45:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 07:45:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ritu.itzme@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 07:45:16 +0000
Received: by rv-out-0506.google.com with SMTP id b25so1173861rvf.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 00:44:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Da8j6oXgcFtwntGlSMNyQOMMRi+xMZ6tQiAKXgQWHds=;
        b=CPBBIg9zJPhcV7SmJn8oiUflxv6y1GA7MkBBPxtMZuVmfgb+y2OWYsO02czjFmFIIo
         mhHv6+8zrZX5qx/oCM3ibCYUja/9wqH0rWNyaorF7vjrK0gCqh4/rUBxxMwLIz5FAGei
         uSiX5ZY0fL7te0r0KO/wao6cNt/fdtM63MKqY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Rte1kdy3FNDftjrwrlweCB+TzMiKaLZUUntjiznvF3dRkxzN76C34drxvApGKcc95q
         0CPmhy0z5vxcSW5S1uBPWUpmj0E+RWgsDRjfSmwC40Hyz2ChTTZRLhv1CO1hT15e8Hzs
         Y9/VFfT+cInA3sFRDYowK6gq05YkZHsjZ5mm0=
MIME-Version: 1.0
Received: by 10.141.4.3 with SMTP id g3mr510438rvi.218.1246261494807; Mon, 29 
	Jun 2009 00:44:54 -0700 (PDT)
In-Reply-To: <94ea00c20906290031s64c4a37dg41c117f4c724a202@mail.gmail.com>
References: <94ea00c20906290031s64c4a37dg41c117f4c724a202@mail.gmail.com>
Date: Mon, 29 Jun 2009 13:14:54 +0530
Message-ID: <94ea00c20906290044xa5bf868j27b0fb46632e400c@mail.gmail.com>
Subject: highlighting the result within a file
From: Ritu choudhary <ritu.itzme@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/mixed; boundary=000e0cd11232b1fd43046d77ddbf
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd11232b1fd43046d77ddbf
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

hi all,
 I am trying a program that could highlight a searched term and writes
the result into a demo.html file. As of now this demo.html can show
only few pages of the book . Is there any way i can use it show the
whole book. (Can increasing the fragment size upto filesize help?)

        I have attached the program  i am using(please use a large xml
file as it runs fine with shorter ones). F1 F1 F1

Thanks in advance.

--000e0cd11232b1fd43046d77ddbf
Content-Type: text/x-java; charset=US-ASCII; name="PhraseTestFile.java"
Content-Disposition: attachment; filename="PhraseTestFile.java"
Content-Transfer-Encoding: base64
X-Attachment-Id: file0

aW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC4qOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNl
bmUuYW5hbHlzaXMuKjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50Lio7CmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRlcjsKaW1wb3J0IG9yZy5hcGFjaGUu
bHVjZW5lLmFuYWx5c2lzLnN0YW5kYXJkLlN0YW5kYXJkQW5hbHl6ZXI7CgppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuYW5hbHlzaXMuU2ltcGxlQW5hbHl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLmx1
Y2VuZS5pbmRleC5UZXJtOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUucXVlcnlQYXJzZXIuUXVl
cnlQYXJzZXI7CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5EaXJlY3Rvcnk7CmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5GU0RpcmVjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUu
bHVjZW5lLnN0b3JlLlJBTURpcmVjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJj
aC5oaWdobGlnaHQuKjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5zcGFucy5TcGFu
VGVybVF1ZXJ5OwoKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEuaW8uRmlsZUlucHV0
U3RyZWFtOwppbXBvcnQgamF2YS5pby5GaWxlV3JpdGVyOwppbXBvcnQgamF2YS5pby5JbnB1dFN0
cmVhbTsKaW1wb3J0IGphdmEuaW8uUmVhZGVyOwppbXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7
CmltcG9ydCBqYXZhLmlvLlN0cmluZ1dyaXRlcjsKCmltcG9ydCBqYXZheC54bWwucGFyc2Vycy5E
b2N1bWVudEJ1aWxkZXJGYWN0b3J5OwppbXBvcnQgamF2YXgueG1sLnRyYW5zZm9ybS5UcmFuc2Zv
cm1lcjsKaW1wb3J0IGphdmF4LnhtbC50cmFuc2Zvcm0uVHJhbnNmb3JtZXJGYWN0b3J5OwppbXBv
cnQgamF2YXgueG1sLnRyYW5zZm9ybS5kb20uRE9NU291cmNlOwppbXBvcnQgamF2YXgueG1sLnRy
YW5zZm9ybS5zdHJlYW0uU3RyZWFtUmVzdWx0OwoKcHVibGljIGNsYXNzIFBocmFzZVRlc3RGaWxl
IHsKICAgIHByaXZhdGUgSW5kZXhTZWFyY2hlciBzZWFyY2hlcjsKICAgcHJpdmF0ZSBSQU1EaXJl
Y3RvcnkgZGlyZWN0b3J5OwoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJkZXByZWNhdGlvbiIpCglw
dWJsaWMgUGhyYXNlVGVzdEZpbGUoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgIApkaXJlY3Rv
cnkgPSBuZXcgUkFNRGlyZWN0b3J5KCk7CiAgICAgICAgCgogICAgICAgIAogIEFuYWx5emVyIGFu
YWx5emVyID0gbmV3IFN0YW5kYXJkQW5hbHl6ZXIoKSB7CiAgICAgICAgICAgIHB1YmxpYyBUb2tl
blN0cmVhbSB0b2tlblN0cmVhbShTdHJpbmcgZmllbGROYW1lLCBSZWFkZXIgcmVhZGVyKQp7CiAg
ICAgICAgICAgICAgICByZXR1cm4gbmV3IExvd2VyQ2FzZVRva2VuaXplcihyZWFkZXIpOwogICAg
ICAgICAgICB9CgogICAgICAgICAgICBwdWJsaWMgaW50IGdldFBvc2l0aW9uSW5jcmVtZW50R2Fw
KFN0cmluZyBmaWVsZE5hbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAxMDA7CiAgICAgICAg
ICAgIH0KICAgICAgICB9OwoKICAgICAgICBJbmRleFdyaXRlciB3cml0ZXIgPSBuZXcgSW5kZXhX
cml0ZXIoZGlyZWN0b3J5LCBhbmFseXplciwgdHJ1ZSk7CgogICAgICAgIERvY3VtZW50IGRvYyA9
IG5ldyBEb2N1bWVudCgpOwogICAgICAKICAgICAgICBTdHJpbmcgdGV4dD0gY29udmVydFhNTEZp
bGVUb1N0cmluZygiL3Jvb3QvRGVza3RvcC9hbGxkYWlzeWJ1a3MvVGVuX0RheXNfVGhhdF9TaG9v
a190aGVfV29ybGQvVGVuX0RheXNfVGhhdF9TaG9va190aGVfV29ybGRfZjEueG1sIik7CiAgICAg
ICAgU3lzdGVtLm91dC5wcmludGxuKCJUaGUgZmlsZSBzaXplIGlzIDogIisgdGV4dC5sZW5ndGgo
KSApOwogICBkb2MuYWRkKG5ldyBGaWVsZCgiY29udGVudHMiLCB0ZXh0LCBGaWVsZC5TdG9yZS5Z
RVMsRmllbGQuSW5kZXguVE9LRU5JWkVEKSk7CiAgICAgICAgd3JpdGVyLmFkZERvY3VtZW50KGRv
Yyk7CgogICAgICAgIHdyaXRlci5vcHRpbWl6ZSgpOwogICAgICAgIHdyaXRlci5jbG9zZSgpOwoK
ICAgICAgICBzZWFyY2hlciA9IG5ldyBJbmRleFNlYXJjaGVyKGRpcmVjdG9yeSk7CiAgICAgICAg
IFN0cmluZyBzZWFyY2hpdD0iQ29tbWl0dGVlIjsKICAgICAgICAgVGVybSB0PSBuZXcgVGVybSgi
Y29udGVudHMiLHNlYXJjaGl0KTsKCS8vdHJ5aW5nIGZ1enp5IHF1ZXJ5ICAgIAoJCQlRdWVyeSBx
dWVyeT0gbmV3IEZ1enp5UXVlcnkodCk7CgkJCQogICAgICAgCgogICAgICAgIC8vIFRyeSBhIHBh
cnNlZCBxdWVyeQogICAgICAgIFF1ZXJ5IHBhcnNlZFF1ZXJ5ID0gbmV3IFF1ZXJ5UGFyc2VyKCJj
b250ZW50cyIsCmFuYWx5emVyKS5wYXJzZShzZWFyY2hpdCk7CgogICAgICAgIEhpdHMgaGl0cyA9
IHNlYXJjaGVyLnNlYXJjaChwYXJzZWRRdWVyeSk7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxu
KCJXZSBmb3VuZCAiICsgaGl0cy5sZW5ndGgoKSArICIgaGl0cy4iKTsKCiAgICAgICAgLy8gSGln
aGxpZ2h0IHRoZSByZXN1bHRzCiAgICAgICAgQ2FjaGluZ1Rva2VuRmlsdGVyIHRva2VuU3RyZWFt
ID0gbmV3CkNhY2hpbmdUb2tlbkZpbHRlcihhbmFseXplci50b2tlblN0cmVhbSggImNvbnRlbnRz
IiwgbmV3ClN0cmluZ1JlYWRlcih0ZXh0KSkpOwoKICAgICAgICBTaW1wbGVIVE1MRm9ybWF0dGVy
IGZvcm1hdHRlciA9IG5ldyBTaW1wbGVIVE1MRm9ybWF0dGVyKCI8c3BhbiBjbGFzcz1cImhpZ2hs
aWdodFwiPiIsICI8L3NwYW4+Iik7IAogICAgICAgIFNwYW5TY29yZXIgc2MgPSBuZXcgU3BhblNj
b3JlcihwYXJzZWRRdWVyeSwgImNvbnRlbnRzIiwgdG9rZW5TdHJlYW0sImNvbnRlbnRzIik7Cgog
ICAgICAgIEhpZ2hsaWdodGVyIGhpZ2hsaWdodGVyID0gbmV3IEhpZ2hsaWdodGVyKGZvcm1hdHRl
ciwgc2MpOwogICAgICAgIGhpZ2hsaWdodGVyLnNldFRleHRGcmFnbWVudGVyKG5ldyBTaW1wbGVG
cmFnbWVudGVyKHRleHQubGVuZ3RoKCkpKTsvLyhuZXcgU2ltcGxlU3BhbkZyYWdtZW50ZXIoc2Mp
KTsKICAgICAgICB0b2tlblN0cmVhbS5yZXNldCgpOwoKICAgICAgICBTdHJpbmcgcnYgPSBoaWdo
bGlnaHRlci5nZXRCZXN0RnJhZ21lbnRzKHRva2VuU3RyZWFtLCB0ZXh0LCB0ZXh0Lmxlbmd0aCgp
LAoiLi4uIik7CiAgICAgICAgU3RyaW5nIHJ2MT1oaWdobGlnaHRlci5nZXRCZXN0RnJhZ21lbnQo
dG9rZW5TdHJlYW0sdGV4dCk7CiAgICAgIApGaWxlV3JpdGVyIGZ3cml0ZXIgPSBuZXcgRmlsZVdy
aXRlcigiL3Jvb3QvRGVza3RvcC9kZW1vIik7IGZ3cml0ZXIud3JpdGUoIjxodG1sPiIpOyBmd3Jp
dGVyLndyaXRlKCI8c3R5bGU+XG4iICsKCgkJIi5oaWdobGlnaHQge1xuIiArCgoJCSIgYmFja2dy
b3VuZDogb3JhbmdlO1xuIiArICJ9XG4iICsgIjwvc3R5bGU+Iik7IGZ3cml0ZXIud3JpdGUoIjxi
b2R5PiIpOyBmd3JpdGVyLndyaXRlKHJ2KTsgZndyaXRlci53cml0ZSgiPC9ib2R5PjwvaHRtbD4i
KTsgZndyaXRlci5jbG9zZSgpOyAKU3lzdGVtLm91dC5wcmludGxuKHJ2MSk7CiAgICAKICAgIH0K
ICAgIAogICAgCiAgICBwdWJsaWMgU3RyaW5nIGNvbnZlcnRYTUxGaWxlVG9TdHJpbmcoU3RyaW5n
IGZpbGVOYW1lKQogICAgewogICAgICB0cnl7CiAgICAgICAgRG9jdW1lbnRCdWlsZGVyRmFjdG9y
eSBkb2N1bWVudEJ1aWxkZXJGYWN0b3J5ID0gRG9jdW1lbnRCdWlsZGVyRmFjdG9yeS5uZXdJbnN0
YW5jZSgpOwogICAgICAgIElucHV0U3RyZWFtIGlucHV0U3RyZWFtID0gbmV3IEZpbGVJbnB1dFN0
cmVhbShuZXcgRmlsZShmaWxlTmFtZSkpOwogICAgICAgIG9yZy53M2MuZG9tLkRvY3VtZW50IGRv
YyA9IGRvY3VtZW50QnVpbGRlckZhY3RvcnkubmV3RG9jdW1lbnRCdWlsZGVyKCkucGFyc2UoaW5w
dXRTdHJlYW0pOwogICAgICAgIFN0cmluZ1dyaXRlciBzdHcgPSBuZXcgU3RyaW5nV3JpdGVyKCk7
CiAgICAgICAgVHJhbnNmb3JtZXIgc2VyaWFsaXplciA9IFRyYW5zZm9ybWVyRmFjdG9yeS5uZXdJ
bnN0YW5jZSgpLm5ld1RyYW5zZm9ybWVyKCk7CiAgICAgICAgc2VyaWFsaXplci50cmFuc2Zvcm0o
bmV3IERPTVNvdXJjZShkb2MpLCBuZXcgU3RyZWFtUmVzdWx0KHN0dykpOwogICAgICAgIHJldHVy
biBzdHcudG9TdHJpbmcoKTsKCiAgICAgIH0KICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg
ICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwog
ICAgfQogICAgCiAgICAKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3Mp
IHsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlN0YXJ0aW5nLi4uIik7CiAgICAgICAgdHJ5
IHsKICAgICAgICAgICAgIG5ldyBQaHJhc2VUZXN0RmlsZSgpOwogICAgICAgIH0gY2F0Y2goRXhj
ZXB0aW9uIGV4KSB7CiAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0K
ICAgIH0KCgp9Cg==

--000e0cd11232b1fd43046d77ddbf
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--000e0cd11232b1fd43046d77ddbf--

From java-user-return-40959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 07:47:47 2009
Return-Path: <java-user-return-40959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30341 invoked from network); 29 Jun 2009 07:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 07:47:47 -0000
Received: (qmail 95838 invoked by uid 500); 29 Jun 2009 07:47:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95788 invoked by uid 500); 29 Jun 2009 07:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95778 invoked by uid 99); 29 Jun 2009 07:47:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 07:47:55 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.218.228] (HELO mail-bw0-f228.google.com) (209.85.218.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 07:47:43 +0000
Received: by bwz28 with SMTP id 28so216949bwz.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 00:47:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.123.129 with SMTP id p1mr4123057far.29.1246261633232; Mon, 
	29 Jun 2009 00:47:13 -0700 (PDT)
In-Reply-To: <4A4864E7.3070609@boboco.ie>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
	 <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
	 <4A4864E7.3070609@boboco.ie>
Date: Mon, 29 Jun 2009 09:47:13 +0200
Message-ID: <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
Subject: Re: Scaling out/up or a mix
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a9fff22f75046d77e5ba
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a9fff22f75046d77e5ba
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks for the answer.

Don't you think that part 1 of the email would give you a hint of nature of
the index ?

Index size(and growing): 16Gx8 = 128G
Doc size (data): 20k
Num docs: 90M
Num users: Few hundred but most critical is that the admin staff which is
using the index all day long.
Query types: Example: title:"Iphone" OR description:"Iphone" sorted by
publishedDate... = Very simple, no fuzzy searches etc. However since the
dataset is large it will consume memory on sorting I guess.

Could not one draw any conclusions about best-practice in terms of hardware
given the above "specs" ?

Basically I would like to know if I really need 8 cores since machines with
dual-cpu support are the most expensive and I would like to not throw away
money so getting it right is a matter of economy.

I mean it is very simple: Let's say someone gives me a budget of 50 000 USD
and I then want to get the most bang for the buck for my workload.
Should I go for
X machines with quad-core 3.0GHz, 4 disks RAID1+0, 8G RAM costing me 1200USD
a piece (giving me 40 machines: 160 disks, 160 cores, 320G RAM)
or
X machines with dual quad-core 2.0GHz, 4 disks RAID1+0, 36G RAM costing me
3400 USD a piece (giving me 15 machines:  60 disks, 120 cores,  540G RAM)

Basically I would like to know what factors make the workload IO bound vs
CPU bound ?

//Marcus






On Mon, Jun 29, 2009 at 8:53 AM, Eric Bowman <ebowman@boboco.ie> wrote:

> There is no single answer -- this is always application specific.
>
> Without knowing anything about what you are doing:
>
> 1. disk i/o is probably the most critical.  Go SSD or even RAM disk if
> you can, if performance is absolutely critical
> 2. Sometimes CPU can become an issue, but 8 cores is probably enough
> unless you are doing especially cpu-bound searches.
>
> Unless you are doing something with hard performance requirements, or
> really quite unusual, buying "good" kit is probably good enough, and you
> won't really know for sure until you measure.  Lucene is a general
> enough tool that there isn't a terribly universal answer to this.  We
> were a bit surprised to end up cpu-bound instead of disk i/o-bound, for
> instance, but we ended up taking an unusual path.  YMMV.
>
> Marcus Herou wrote:
> > Hi. I think I need to be more specific.
> >
> > What I am trying to find out is if I should aim for:
> >
> > CPU (2x4 cores, 2.0-3.0Ghz)? or perhaps just a 4 cores is enough.
> > Fast disk IO: 8 disks, RAID1+0 ? or perhaps 2 disks is enough...
> > RAM - if the index does not fit into RAM how much RAM should I then buy ?
> >
> > Please any hints would be appreciated since I am going to invest soon.
> >
> > //Marcus
> >
> > On Sat, Jun 27, 2009 at 12:00 AM, Marcus Herou
> > <marcus.herou@tailsweep.com>wrote:
> >
> >
> >> Hi.
> >>
> >> I currently have an index which is 16GB per machine (8 machines = 128GB)
> >> (data is stored externally, not in index) and is growing like crazy (we
> are
> >> indexing blogs which is crazy by nature) and have only allocated 2GB per
> >> machine to the Lucene app since we are running some other stuff there in
> >> parallell.
> >>
> >> Each doc should be roughly the size of a blog post, no more than 20k.
> >>
> >> We currently have about 90M documents and it is increasing rapidly so
> >> getting into the G+ document range is not going to be too far away.
> >>
> >> Now due to search performance I think I need to move these instances to
> >> dedicated index/search machines (or index on some machines and search on
> >> others). Anyway I would like to get some feedback about two things:
> >>
> >> 1. What is the most important hardware aspect when it comes to add
> document
> >> to the index and optimize it.
> >> 1.1 Is it disk I|O write throghput ? (sequential or random-io ?)
> >> 1.2 Is it RAM ?
> >> 1.3 Is is CPU ?
> >>
> >> My guess would be disk-io, right, wrong ?
> >>
> >> 2. What is the most important hardware aspect when it comes to searching
> >> documents in my setup ? (result-set is limited to return only the top 10
> >> matches with page handling)
> >> 2.1 Is it disk read throughput ? (sequential or random-io ?)
> >> 2.2 Is it RAM ?
> >> 2.3 Is is CPU ?
> >>
> >> I have no clue since the data might not fit into memory. What is then
> the
> >> most important factor ? read-performance while scanning the index ? CPU
> >> while comparing fields and collecting results ?
> >>
> >> What I'm trying to find out is what I can do to get most bang for the
> buck
> >> with a limited (aren't we all limited?) budget.
> >>
> >> Kindly
> >>
> >> //Marcus
> >>
> >>
> >>
> >>
> >>
> >> --
> >> Marcus Herou CTO and co-founder Tailsweep AB
> >> +46702561312
> >> marcus.herou@tailsweep.com
> >> http://www.tailsweep.com/
> >>
> >>
> >>
> >
> >
> >
>
>
> --
> Eric Bowman
> Boboco Ltd
> ebowman@boboco.ie
> http://www.boboco.ie/ebowman/pubkey.pgp
> +35318394189/+353872801532<http://www.boboco.ie/ebowman/pubkey.pgp%0A+35318394189/+353872801532>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/

--001636c5a9fff22f75046d77e5ba--

From java-user-return-40960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 07:56:11 2009
Return-Path: <java-user-return-40960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32275 invoked from network); 29 Jun 2009 07:56:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 07:56:11 -0000
Received: (qmail 2426 invoked by uid 500); 29 Jun 2009 07:56:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2365 invoked by uid 500); 29 Jun 2009 07:56:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2355 invoked by uid 99); 29 Jun 2009 07:56:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 07:56:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.220.215 as permitted sender)
Received: from [209.85.220.215] (HELO mail-fx0-f215.google.com) (209.85.220.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 07:56:10 +0000
Received: by fxm11 with SMTP id 11so1726428fxm.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 00:55:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=2PN8JXo7cC8L9tx5lIqSaSIFDJ6vrvWUc4k9Z7Q3YEw=;
        b=dI0A/rhCv6KUPZ6XnspVdSqflyMvSznrtNo7pUCO0eVgXI5mYLqbdhFt1LOysqW9uB
         xy44arrjjIVtxb8V/Hhf106rw/JC6Jlenwyn+YphMvxIVCgnKPI9gzKQIuG0F5HBGqFP
         rtbn8uxH7hEXCD2xYhZ8RIot81inBiF41WzkI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=c0igThFfxhRzQl+rrcIv29w3UKd3PEv2TGirhq9yRr4HZtQcuI6vHn11jeK6KDu/CV
         5j7J0EuEdenFmCSILsFQ9GXwpTOh+qLGhCzWhy8redkmyaMO/fNlbvkUtp46uArI1Zie
         xac/AuBpzWKvGoexvmD4e9azVHqf2n5iCcMJE=
MIME-Version: 1.0
Received: by 10.86.74.6 with SMTP id w6mr1496950fga.50.1246262150038; Mon, 29 
	Jun 2009 00:55:50 -0700 (PDT)
In-Reply-To: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
References: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
Date: Mon, 29 Jun 2009 10:55:50 +0300
Message-ID: <d36c28c30906290055n78dc85b9q70a8a2a647ea162b@mail.gmail.com>
Subject: Re: MultiSegmentReader problems - current is null
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd299ccc006c7046d7804c3
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd299ccc006c7046d7804c3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The full error is:
Exception in thread "main" java.lang.NullPointerException
        at
Priorart.Lucene.Expert.index.MultiSegmentReader$MultiTermDocs.freq(Mu
ltiSegmentReader.java:709)
I looked at issue
LUCENE-781<https://issues.apache.org/jira/browse/LUCENE-781>- it might
relates to this one??
Though it is closed since 2007.

Hope anyone can help with it - even if I try
double totalFreqT = ir.termDocs().freq(); - to get the freq using termDocs
of a multi-segment, I get the same error..

Thanks  alot,
Liat



2009/6/28 liat oren <oren.liat@gmail.com>

>  Hi,
>
> I have an index that is a multi-segment index (how come it is created this
> way?)
>
> When I try to get the freq of a term at the following way:
>    TermDocs tDocs = this.indexReader.termDocs(term);
>    tf = tDocs.freq();
> the greq method :
>   public int freq()
>   {
>    return current.freq();
>   }
> is in MultiSegmentReader.
>
> The current is null, so I get an exception.
>
> Should I initialize current?
> How can I avoid this problem?
> How can I avoid having a multi-segment index?
>
> Many thanks,
> Liat
>

--000e0cd299ccc006c7046d7804c3--

From java-user-return-40961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 08:07:16 2009
Return-Path: <java-user-return-40961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35034 invoked from network); 29 Jun 2009 08:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 08:07:15 -0000
Received: (qmail 13513 invoked by uid 500); 29 Jun 2009 08:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13429 invoked by uid 500); 29 Jun 2009 08:07:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13419 invoked by uid 99); 29 Jun 2009 08:07:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 08:07:24 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FUZZY_CPILL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.35] (HELO web27103.mail.ukl.yahoo.com) (217.146.182.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jun 2009 08:07:13 +0000
Received: (qmail 232 invoked by uid 60001); 29 Jun 2009 08:06:50 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1246262810; bh=hnFeN0hJTyjDh+Br3Qep/1O7D4BirvAS27lXgzPQoHY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=qWckQAtOOEDENo1NmNpyaKfjeBGCHbPoL1xb17CITVSAi5r2lQZFmqEQHx8r3VqzswBrr1f2/xTloghNgHhvUwkoSGz0PiZtwmNwdHeyx7rYju1/+0YfV4WHOpo37dMEZkBdDRwfBxMXXdDwA9zuJiZcxtMWyHzrAH/vO8lXdgg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2xE801dGxcxmlxxeePjbSRn9DeS8TmkIZhJMv/Nu5biiBcHz/2d05k1uRHeK15vVQ67nkECmXcp5N3DBpLDlIzwho4Vhv8j3w3K/ycSprhq58CX5+lEHUHjO9tMbKNgt5NNG88uMNKFJtWZGauDVkqC3yP6zImJJHxc1st5sW9Q=;
Message-ID: <904203.98430.qm@web27103.mail.ukl.yahoo.com>
X-YMail-OSG: uHKbQmEVM1lmg6CEYq1shQAlQpQX.drDQipoBV.rKWlQ6lpE5dUR3.PTfoggmRNBktNaPPR1gMwViB6wA7Td6zUc.JWTiNvKDTfbfphKgmLmUTE6E6tfCXuUn8eXS2EkUCrSrfAlby6ljamHy4CKj9omZCcdJjgX4uFqOx7RSb2DRNN4pbpWJLh0JZdzEoiKcUxvdida7LPVYgrqEGIJefn9aw98VcJnEagahi0.l_R6z.E57PjgxLEgI.QGlDvBYruh0C4W7JBeiTQLITKEwgFvsqTcQ7qCjFvCGe3qmSIpcLHT.DREkW90XEYrRHsw.2rlv3v8DVTicxY.uz6um4L6
Received: from [194.25.15.12] by web27103.mail.ukl.yahoo.com via HTTP; Mon, 29 Jun 2009 08:06:50 GMT
X-Mailer: YahooMailRC/1357.22 YahooMailWebService/0.7.289.15
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>  <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>  <4A4864E7.3070609@boboco.ie> <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
Date: Mon, 29 Jun 2009 08:06:50 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Scaling out/up or a mix
To: java-user@lucene.apache.org
In-Reply-To: <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


depends on your architecture, will you partition your index? What is max ex=
pected size of your index (you said 128G and growing..) what do you mean wi=
th growing? You have in both options enogh memory to load it into RAM...=0A=
=0AI would definitly try to have less machines and alot of memory, so that =
your index fits into ram comfortably...=0A=0AIMO, 8Gig per machine is rathe=
r smalish, but depends heavily on your access patterns... how many document=
s you need to load from disk per query? If this does not create huge on IO,=
 you could try to load everything but stored fields into RAM=0A=0AWhat are =
your requirements on Indexing side (once a day, week, 15 Minutes), how you =
distribute index to all these machines... =0A  =0AYour question: IO or CPU =
bound, depends, if you load it into RAM it becomes Memeory-bus/CPU bound, i=
f it is mainly on disk it will be IO bound=0A=0A=0A=0A=0A=0A=0A----- Origin=
al Message ----=0A> From: Marcus Herou <marcus.herou@tailsweep.com>=0A> To:=
 java-user@lucene.apache.org=0A> Sent: Monday, 29 June, 2009 9:47:13=0A> Su=
bject: Re: Scaling out/up or a mix=0A> =0A> Thanks for the answer.=0A> =0A>=
 Don't you think that part 1 of the email would give you a hint of nature o=
f=0A> the index ?=0A> =0A> Index size(and growing): 16Gx8 =3D 128G=0A> Doc =
size (data): 20k=0A> Num docs: 90M=0A> Num users: Few hundred but most crit=
ical is that the admin staff which is=0A> using the index all day long.=0A>=
 Query types: Example: title:"Iphone" OR description:"Iphone" sorted by=0A>=
 publishedDate... =3D Very simple, no fuzzy searches etc. However since the=
=0A> dataset is large it will consume memory on sorting I guess.=0A> =0A> C=
ould not one draw any conclusions about best-practice in terms of hardware=
=0A> given the above "specs" ?=0A> =0A> Basically I would like to know if I=
 really need 8 cores since machines with=0A> dual-cpu support are the most =
expensive and I would like to not throw away=0A> money so getting it right =
is a matter of economy.=0A> =0A> I mean it is very simple: Let's say someon=
e gives me a budget of 50 000 USD=0A> and I then want to get the most bang =
for the buck for my workload.=0A> Should I go for=0A> X machines with quad-=
core 3.0GHz, 4 disks RAID1+0, 8G RAM costing me 1200USD=0A> a piece (giving=
 me 40 machines: 160 disks, 160 cores, 320G RAM)=0A> or=0A> X machines with=
 dual quad-core 2.0GHz, 4 disks RAID1+0, 36G RAM costing me=0A> 3400 USD a =
piece (giving me 15 machines:  60 disks, 120 cores,  540G RAM)=0A> =0A> Bas=
ically I would like to know what factors make the workload IO bound vs=0A> =
CPU bound ?=0A> =0A> //Marcus=0A> =0A> =0A> =0A> =0A> =0A> =0A> On Mon, Jun=
 29, 2009 at 8:53 AM, Eric Bowman wrote:=0A> =0A> > There is no single answ=
er -- this is always application specific.=0A> >=0A> > Without knowing anyt=
hing about what you are doing:=0A> >=0A> > 1. disk i/o is probably the most=
 critical.  Go SSD or even RAM disk if=0A> > you can, if performance is abs=
olutely critical=0A> > 2. Sometimes CPU can become an issue, but 8 cores is=
 probably enough=0A> > unless you are doing especially cpu-bound searches.=
=0A> >=0A> > Unless you are doing something with hard performance requireme=
nts, or=0A> > really quite unusual, buying "good" kit is probably good enou=
gh, and you=0A> > won't really know for sure until you measure.  Lucene is =
a general=0A> > enough tool that there isn't a terribly universal answer to=
 this.  We=0A> > were a bit surprised to end up cpu-bound instead of disk i=
/o-bound, for=0A> > instance, but we ended up taking an unusual path.  YMMV=
.=0A> >=0A> > Marcus Herou wrote:=0A> > > Hi. I think I need to be more spe=
cific.=0A> > >=0A> > > What I am trying to find out is if I should aim for:=
=0A> > >=0A> > > CPU (2x4 cores, 2.0-3.0Ghz)? or perhaps just a 4 cores is =
enough.=0A> > > Fast disk IO: 8 disks, RAID1+0 ? or perhaps 2 disks is enou=
gh...=0A> > > RAM - if the index does not fit into RAM how much RAM should =
I then buy ?=0A> > >=0A> > > Please any hints would be appreciated since I =
am going to invest soon.=0A> > >=0A> > > //Marcus=0A> > >=0A> > > On Sat, J=
un 27, 2009 at 12:00 AM, Marcus Herou=0A> > > wrote:=0A> > >=0A> > >=0A> > =
>> Hi.=0A> > >>=0A> > >> I currently have an index which is 16GB per machin=
e (8 machines =3D 128GB)=0A> > >> (data is stored externally, not in index)=
 and is growing like crazy (we=0A> > are=0A> > >> indexing blogs which is c=
razy by nature) and have only allocated 2GB per=0A> > >> machine to the Luc=
ene app since we are running some other stuff there in=0A> > >> parallell.=
=0A> > >>=0A> > >> Each doc should be roughly the size of a blog post, no m=
ore than 20k.=0A> > >>=0A> > >> We currently have about 90M documents and i=
t is increasing rapidly so=0A> > >> getting into the G+ document range is n=
ot going to be too far away.=0A> > >>=0A> > >> Now due to search performanc=
e I think I need to move these instances to=0A> > >> dedicated index/search=
 machines (or index on some machines and search on=0A> > >> others). Anyway=
 I would like to get some feedback about two things:=0A> > >>=0A> > >> 1. W=
hat is the most important hardware aspect when it comes to add=0A> > docume=
nt=0A> > >> to the index and optimize it.=0A> > >> 1.1 Is it disk I|O write=
 throghput ? (sequential or random-io ?)=0A> > >> 1.2 Is it RAM ?=0A> > >> =
1.3 Is is CPU ?=0A> > >>=0A> > >> My guess would be disk-io, right, wrong ?=
=0A> > >>=0A> > >> 2. What is the most important hardware aspect when it co=
mes to searching=0A> > >> documents in my setup ? (result-set is limited to=
 return only the top 10=0A> > >> matches with page handling)=0A> > >> 2.1 I=
s it disk read throughput ? (sequential or random-io ?)=0A> > >> 2.2 Is it =
RAM ?=0A> > >> 2.3 Is is CPU ?=0A> > >>=0A> > >> I have no clue since the d=
ata might not fit into memory. What is then=0A> > the=0A> > >> most importa=
nt factor ? read-performance while scanning the index ? CPU=0A> > >> while =
comparing fields and collecting results ?=0A> > >>=0A> > >> What I'm trying=
 to find out is what I can do to get most bang for the=0A> > buck=0A> > >> =
with a limited (aren't we all limited?) budget.=0A> > >>=0A> > >> Kindly=0A=
> > >>=0A> > >> //Marcus=0A> > >>=0A> > >>=0A> > >>=0A> > >>=0A> > >>=0A> >=
 >> --=0A> > >> Marcus Herou CTO and co-founder Tailsweep AB=0A> > >> +4670=
2561312=0A> > >> marcus.herou@tailsweep.com=0A> > >> http://www.tailsweep.c=
om/=0A> > >>=0A> > >>=0A> > >>=0A> > >=0A> > >=0A> > >=0A> >=0A> >=0A> > --=
=0A> > Eric Bowman=0A> > Boboco Ltd=0A> > ebowman@boboco.ie=0A> > http://ww=
w.boboco.ie/ebowman/pubkey.pgp=0A> > =0A> +35318394189/+353872801532=0A> >=
=0A> >=0A> > --------------------------------------------------------------=
-------=0A> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg=0A> > For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A> >=0A> >=0A> =0A> =0A> -- =0A> Marcus Herou CTO and co-founder Tailswee=
p AB=0A> +46702561312=0A> marcus.herou@tailsweep.com=0A> http://www.tailswe=
ep.com/=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 09:41:56 2009
Return-Path: <java-user-return-40962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57192 invoked from network); 29 Jun 2009 09:41:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 09:41:56 -0000
Received: (qmail 77691 invoked by uid 500); 29 Jun 2009 09:42:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77618 invoked by uid 500); 29 Jun 2009 09:42:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77608 invoked by uid 99); 29 Jun 2009 09:42:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 09:42:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 09:41:53 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.375.2; Mon, 29 Jun 2009 11:41:33 +0200
Subject: Re: Scaling out/up or a mix
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Mon, 29 Jun 2009 11:41:33 +0200
Message-ID: <1246268493.7977.878.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, 2009-06-27 at 00:00 +0200, Marcus Herou wrote:
> We currently have about 90M documents and it is increasing rapidly so
> getting into the G+ document range is not going to be too far away.

We've performed fairly extensive tests regarding hardware for searches
and some minor tests on hardware for indexing. The tests were primarily
with regard to cores, RAM and storage (so no focus on CPU-speed or
bus-speed). Our "standard" index was 37GB with 9 million documents,
although we did try our hands with running 40 million documents on a
single machine. 

You might want to take a look at some unordered notes and graphs from
our tests: http://wiki.statsbiblioteket.dk/summa/Hardware

> 2. What is the most important hardware aspect when it comes to searching
> documents in my setup ? (result-set is limited to return only the top 10
> matches with page handling)
> 2.1 Is it disk read throughput ? (sequential or random-io ?)
> 2.2 Is it RAM ?
> 2.3 Is is CPU ?

For searches, random access is king, so go for Solid State Drives. 
As there is a lot of crap our there, be sure to read some reviews. 
The Intel X25 seems like a safe bet right now.

While not quite on par with holding the full index in RAM, SSDs comes
quite close (744 searches/second vs. 951 searches/second in one of our
tests with a standard RAMDirectory). The same test for 2 * 15.000 RPM
conventional harddisks in RAID 1 gave us ~200 searches/second. This is
of course highly dependent of the index.

As opposed to conventional harddisks, SSDs aren't nearly as reliant on
RAM for caching. On the other hand, SSDs are capable of serving larger
indexes than conventional harddisks and as such, more RAM will be needed
for the JVM with the Lucene searcher.

Our pick for the 50 million documents, 150-200GB of indexes per machine
range was 4 core Intel Xeons, 16GB RAM, 4*64GB SSDs for the index
(RAID0ing them does not change the speed significantly, we just do it to
get a single volume) and conventional harddisks for storage.

Just as Eric Bowman discovered, processing power easily becomes the
bottleneck when switching for SSDs. This happened for us too and
triggered a great deal of profiling (VisualVM is free, very_ easy to use
and helps tremendously with this) to pinpoint where the CPUs used their
energy.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 10:11:55 2009
Return-Path: <java-user-return-40963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72075 invoked from network); 29 Jun 2009 10:11:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 10:11:55 -0000
Received: (qmail 4797 invoked by uid 500); 29 Jun 2009 10:12:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4728 invoked by uid 500); 29 Jun 2009 10:12:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4718 invoked by uid 99); 29 Jun 2009 10:12:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:12:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:11:52 +0000
Received: by yxe12 with SMTP id 12so923289yxe.29
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 03:11:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=UiA3EzfPUAo3vAObt3heOxuEZ3z9KSRTqMwta+p2Ulo=;
        b=bormCOYFD3LhnDQcFPiaTl3xVNk5CFt1pE2Boil0sDzM78EspYgyDZzYAHQLIcKwBi
         e15liJIldZ3csW46yyXz3H7iKIzUNesTuEUWt2fZmx3Fpu/RmteZRJ4sK6xHlfRN1a3O
         x0dAqr9f7By1hy4mY0iIpfYWcGtASk0i3yyUs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=wAl506YLdld/U6VtXpHrtiiyqQ7xBb09GaghFAs5s6Kw6bgnVamGEdMPNDVy6ypxlo
         J7Bdp26ADPvY5W57zRcY5qGhozRGaBKQe5FLgtdEibaim9xu3VeXFumWZJQmNTvczr0E
         Ij2jrCJtfnUWF+sjWVdsIIgwADtFrvkpjYg9k=
MIME-Version: 1.0
Received: by 10.100.208.9 with SMTP id f9mr9038335ang.55.1246270291608; Mon, 
	29 Jun 2009 03:11:31 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <d36c28c30906290055n78dc85b9q70a8a2a647ea162b@mail.gmail.com>
References: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
	 <d36c28c30906290055n78dc85b9q70a8a2a647ea162b@mail.gmail.com>
Date: Mon, 29 Jun 2009 12:11:31 +0200
Message-ID: <f18c9dde0906290311i32695bb8xddcbee42a3db9913@mail.gmail.com>
Subject: Re: MultiSegmentReader problems - current is null
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Quick question, which version of lucene do you use?!

simon

On Mon, Jun 29, 2009 at 9:55 AM, liat oren<oren.liat@gmail.com> wrote:
> The full error is:
> Exception in thread "main" java.lang.NullPointerException
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
> Priorart.Lucene.Expert.index.MultiSegmentReader$MultiTermDocs.freq(Mu
> ltiSegmentReader.java:709)
> I looked at issue
> LUCENE-781<https://issues.apache.org/jira/browse/LUCENE-781>- it might
> relates to this one??
> Though it is closed since 2007.
>
> Hope anyone can help with it - even if I try
> double totalFreqT =3D ir.termDocs().freq(); - to get the freq using termD=
ocs
> of a multi-segment, I get the same error..
>
> Thanks =C2=A0alot,
> Liat
>
>
>
> 2009/6/28 liat oren <oren.liat@gmail.com>
>
>> =C2=A0Hi,
>>
>> I have an index that is a multi-segment index (how come it is created th=
is
>> way?)
>>
>> When I try to get the freq of a term at the following way:
>> =C2=A0 =C2=A0TermDocs tDocs =3D this.indexReader.termDocs(term);
>> =C2=A0 =C2=A0tf =3D tDocs.freq();
>> the greq method :
>> =C2=A0 public int freq()
>> =C2=A0 {
>> =C2=A0 =C2=A0return current.freq();
>> =C2=A0 }
>> is in MultiSegmentReader.
>>
>> The current is null, so I get an exception.
>>
>> Should I initialize current?
>> How can I avoid this problem?
>> How can I avoid having a multi-segment index?
>>
>> Many thanks,
>> Liat
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 10:28:31 2009
Return-Path: <java-user-return-40964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81108 invoked from network); 29 Jun 2009 10:28:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 10:28:31 -0000
Received: (qmail 20748 invoked by uid 500); 29 Jun 2009 10:28:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20676 invoked by uid 500); 29 Jun 2009 10:28:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20666 invoked by uid 99); 29 Jun 2009 10:28:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:28:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:28:30 +0000
Received: by gxk11 with SMTP id 11so6183287gxk.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 03:28:08 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.123.7 with SMTP id a7mr4055696ybn.343.1246271288329; Mon, 
	29 Jun 2009 03:28:08 -0700 (PDT)
In-Reply-To: <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
	 <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
Date: Mon, 29 Jun 2009 06:28:08 -0400
Message-ID: <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, Jun 28, 2009 at 9:08 PM, Nigel<nigelspleen@gmail.com> wrote:
>> Unfortunately the TermInfos must still be hit to look up the
>> freq/proxOffset in the postings files.
>
> But for that data you only have to hit the TermInfos for the terms you're
> searching, correct? =A0So, assuming that there are vastly more terms in t=
he
> index than you ever actually use in a query, we could rely on the LRU cac=
he
> to keep the queried TermInfos around, rather than loading all of them
> up-front. =A0This was a hypothesis based on some tracing through the code=
 but
> not a lot of knowledge of Lucene internals, so please steer me back to
> reality if necessary. =A0(-:

Right, it's only the terms in your query that need to be looked up.

There's already an LRU cache for the Term -> TermInfos lookup, in
TermInfosReader (hard wired to size 1024).  It was created as a "short
term" cache so that queries that look up the same term twice (eg once
for idf and once to get freq/prox postings position), would result in
only one real lookup.  You could try privately experimenting w/ that
value to see if you can get a reasonable it rate?

Lucene only loads the "indexed" terms (=3D every 128th) into RAM, by defaul=
t.

Mike

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 10:50:00 2009
Return-Path: <java-user-return-40965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86450 invoked from network); 29 Jun 2009 10:50:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 10:50:00 -0000
Received: (qmail 37477 invoked by uid 500); 29 Jun 2009 10:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37394 invoked by uid 500); 29 Jun 2009 10:50:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37384 invoked by uid 99); 29 Jun 2009 10:50:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:50:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:49:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLEQc-00017t-Nm
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 03:49:38 -0700
Message-ID: <24251993.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 03:49:38 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Read large size index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hello all


        Am doing a search application on lucene, its working fine when my
index size is small, am getting java heap space error when am using large
size index, i came to know about hadoop with lucene to solve this problem ,
but i don't have any idea about hadoop , i've searched thru the net , but i
can't find better solutions , am tired of searching , am very curios if
some1 tell me how to integrate lucene with hadoop , and i'll be very
thankful to you , please any1 help me
-- 
View this message in context: http://www.nabble.com/Read-large-size-index-tp24251993p24251993.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 10:53:58 2009
Return-Path: <java-user-return-40966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87165 invoked from network); 29 Jun 2009 10:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 10:53:58 -0000
Received: (qmail 43233 invoked by uid 500); 29 Jun 2009 10:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43181 invoked by uid 500); 29 Jun 2009 10:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43170 invoked by uid 99); 29 Jun 2009 10:54:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:54:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:53:56 +0000
Received: by an-out-0708.google.com with SMTP id d11so665406and.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 03:53:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=yFoCupK03/trgdBB1ikFIY9T3tk9kdLxtrwB3KN0Yn8=;
        b=kH7AJ3aZdZI8ZMS1OUr2eu9W9tKXLv9omjIqa/yfGNcopLzDYO/jM4jRwyficm2aLp
         kcLOze4coaj+YFjl2pb/BBh3eZ6nsCWiUEaioUplIhe1jr/C3hSJLhibx3v68fQ8Fy1b
         P7895EdAJXkxYEK3HyJWjjIrzo2Kfk34lcc2g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=PAzUMEUBPSeg8bxCg3PQlLzZurIothRIAO5psm5dE3NS/z5BFXXlO/B2ecmrFBjx7L
         uAp4aQyT1O3MCwVj4UmEjsYX+N5y89uM6sFCOIakJITAmgjemERb0wTCNMqRI5Ax007P
         TKRKiul3ME61GwmSa9C17aWU0ogv3v7m6bE+M=
MIME-Version: 1.0
Received: by 10.100.154.14 with SMTP id b14mr8912186ane.142.1246272815666; 
	Mon, 29 Jun 2009 03:53:35 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24221074.post@talk.nabble.com>
References: <24217071.post@talk.nabble.com>
	 <867513fe0906260300j20175201tddfc76675251d274@mail.gmail.com>
	 <24221074.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 12:53:35 +0200
Message-ID: <f18c9dde0906290353g301da98sc46beb518feee98f@mail.gmail.com>
Subject: Re: special Type of indexing
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey there,
currently lucene offers several possibilities to do what you want.
1. Use payloads
you can encode arbitrary values per term you index and affect scoring
by overriding Similarity#scorePayloads.
2. use IndexReader#termPosition(term) inside a query
you can access the actual term position during scoring to change a
score of a document according to the terms position inside a
document.The returned TermDocuments provides you <document, frequency,
<position>* > for each document a term is contained in. To use this
for scoring you must write your own query or rather subclass an
existing one.

hope that helps.

simon

On Fri, Jun 26, 2009 at 4:14 PM, B0DYLANG<ramihailat@yahoo.com> wrote:
>
>
>
>
>
> Thanks for your response, i want to explaing more so that you can help me,
> the code am writing is as follows
> Field termField = new Field("terms",terms, Field.Store.YES,
> Field.Index.TOKENIZED);
> the terms i indexed consists of a concatenated string looks like
> "computer,230#pc,333#lucene,201#"
> and i have a special anlyzer to toknize it, of course the numbers appers
> after words are the word distance and it leads us to the more relevant
> word(not document) as the distance decreases, so when i serarch with a term
> lucene once and then search with computer at the second time this doceuemt
> is returned in both queries but with high rank on the first time as the
> distance is less than the second distance hope every body get it.
>
>
> Anshum-2 wrote:
>>
>> Isn't it better for you to for a query at search time with query term
>> boosts? that way you would have a smaller index (Boost info not getting
>> stored for each doc-field). Also, you would have the flexibility of
>> changing
>> your boost without having to reindex the entire data.
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Fri, Jun 26, 2009 at 2:29 PM, B0DYLANG <ramihailat@yahoo.com> wrote:
>>
>>>
>>> dears,
>>> my problem is that i want to apply a wieght for each word i add to the
>>> lucene document, so that when i want to index a sentence like this "Hello
>>> how you doing" i want to add Hello with a boost equals to 0.75 and how
>>> with
>>> boost 0.50 and doing with boost 0.3 is there is a mean of doing that ?
>>> --
>>> View this message in context:
>>> http://www.nabble.com/special-Type-of-indexing-tp24217071p24217071.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/special-Type-of-indexing-tp24217071p24221074.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 10:57:50 2009
Return-Path: <java-user-return-40967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87849 invoked from network); 29 Jun 2009 10:57:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 10:57:50 -0000
Received: (qmail 46616 invoked by uid 500); 29 Jun 2009 10:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46542 invoked by uid 500); 29 Jun 2009 10:57:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46532 invoked by uid 99); 29 Jun 2009 10:57:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:57:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 10:57:47 +0000
Received: by yxe12 with SMTP id 12so954834yxe.29
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 03:57:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=L7iQSTBnofESsYoDR8G4xLxXHsvQSCIODq46fkkPbqA=;
        b=fXzxY0msaHjC1vfF/8VxwcWYo8AMQRzPevE5Zqf6f7VQxEEfu/5+uYvGXvnAcjD5/m
         0Ar2VtF8gBfeVu9HL/DmCB/Es4feXnBYezoHfopk9pXdpPqMZ+BvSVeN6r+KUwM9nf/m
         TXcZZL6w8hE6VEsKZ/k9tjAY5TBE7V+WLrn2U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=p32oeHW/ahj90ikk89igMtEE2RXjdWM9RQ1lb/D3ml2K01q5LAu6ALWHRQ0DHTI0Ne
         F5ve5hrBJQOJxF0+bgPbpdyp+CMqvGSihiMXePKoVs3RTtemOlID50gbXRwYLyMdQ1DE
         5IhZYqO/lezSXejIzJLnvLX2OGJaQCtICNwFQ=
MIME-Version: 1.0
Received: by 10.101.71.3 with SMTP id y3mr9068856ank.62.1246273046701; Mon, 29 
	Jun 2009 03:57:26 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24251993.post@talk.nabble.com>
References: <24251993.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 12:57:26 +0200
Message-ID: <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hey there,
before going out to use hadoop (hadoop mailing list would help you
better I guess) you could provide more information about you
situation. For instance:
- how big is you index
- version of lucene
- which java vm
- how much heap space
- where does the OOM occure

or maybe there is already an issue that is related to you like this
one: https://issues.apache.org/jira/browse/LUCENE-1566

simon

On Mon, Jun 29, 2009 at 12:49 PM, m.harig<m.harig@gmail.com> wrote:
>
> hello all
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0Am doing a search application on lucene, its w=
orking fine when my
> index size is small, am getting java heap space error when am using large
> size index, i came to know about hadoop with lucene to solve this problem=
 ,
> but i don't have any idea about hadoop , i've searched thru the net , but=
 i
> can't find better solutions , am tired of searching , am very curios if
> some1 tell me how to integrate lucene with hadoop , and i'll be very
> thankful to you , please any1 help me
> --
> View this message in context: http://www.nabble.com/Read-large-size-index=
-tp24251993p24251993.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 11:48:50 2009
Return-Path: <java-user-return-40968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99934 invoked from network); 29 Jun 2009 11:48:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 11:48:50 -0000
Received: (qmail 445 invoked by uid 500); 29 Jun 2009 11:48:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 376 invoked by uid 500); 29 Jun 2009 11:48:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 365 invoked by uid 99); 29 Jun 2009 11:48:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 11:48:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 11:48:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLFLY-0003cu-VU
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 04:48:28 -0700
Message-ID: <24252732.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 04:48:28 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read large size index
In-Reply-To: <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Simon Willnauer wrote:
>=20
> Hey there,
> before going out to use hadoop (hadoop mailing list would help you
> better I guess) you could provide more information about you
> situation. For instance:
> - how big is you index
> - version of lucene
> - which java vm
> - how much heap space
> - where does the OOM occure
>=20
> or maybe there is already an issue that is related to you like this
> one: https://issues.apache.org/jira/browse/LUCENE-1566
>=20
> simon
>=20
> On Mon, Jun 29, 2009 at 12:49 PM, m.harig<m.harig@gmail.com> wrote:
>>
>> hello all
>>
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0Am doing a search application on lucene, its =
working fine when my
>> index size is small, am getting java heap space error when am using larg=
e
>> size index, i came to know about hadoop with lucene to solve this proble=
m
>> ,
>> but i don't have any idea about hadoop , i've searched thru the net , bu=
t
>> i
>> can't find better solutions , am tired of searching , am very curios if
>> some1 tell me how to integrate lucene with hadoop , and i'll be very
>> thankful to you , please any1 help me
>> --
>> View this message in context:
>> http://www.nabble.com/Read-large-size-index-tp24251993p24251993.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20


i've posted a mail at hadoop lucene forum too , but i didn't get any
response. my index size is 1GB , am using lucene 2.3.0 , java 1.6 , am
setting 1024 as java max , when i tried to search a query it gives me java
heap space . please any one help me .=20

--=20
View this message in context: http://www.nabble.com/Read-large-size-index-t=
p24251993p24252732.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 12:16:15 2009
Return-Path: <java-user-return-40969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7638 invoked from network); 29 Jun 2009 12:16:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 12:16:15 -0000
Received: (qmail 21784 invoked by uid 500); 29 Jun 2009 12:16:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21693 invoked by uid 500); 29 Jun 2009 12:16:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21683 invoked by uid 99); 29 Jun 2009 12:16:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:16:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:16:11 +0000
Received: by an-out-0708.google.com with SMTP id d11so683172and.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 05:15:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=kO57kMk3aJDJZBgt0Z5hXD02N/QtSdx24iXxpma6L0s=;
        b=kA0w9iAP1858au02FMHWA/OkOiD1ycQNvqq0zocyClcqzPOTm1KpcagRQBO9F1UH0G
         OGihxB5Wcplz68PIdKPUNGLIcEAp2Q90v2k6v8jjX1Xe6sMlkqtRUcT3QYz2WKsb1qGs
         JfmEQ3DcFAHcu9BtG/ljppNUdKxdl+WXrI8Xk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=HWYVVqFQc1I+oHqwdmIoHJFDqATbwd2zNn7eTlKM64nGBvimj/W8YlMx+5kGrZDFTo
         E6nZVdCuIcRarIgccG4uQ2SHOJ7TeQ9J/J3RAe7tDcyITU5vVYz4YjVSPBHkf/4IJNZU
         Jp7zcEeMgVnBS6Weho71U7T4Kxn0fEagJlSWc=
MIME-Version: 1.0
Received: by 10.100.112.8 with SMTP id k8mr8998830anc.174.1246277751058; Mon, 
	29 Jun 2009 05:15:51 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24252732.post@talk.nabble.com>
References: <24251993.post@talk.nabble.com>
	 <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com>
	 <24252732.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 14:15:51 +0200
Message-ID: <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jun 29, 2009 at 1:48 PM, m.harig<m.harig@gmail.com> wrote:
>
>
>
> Simon Willnauer wrote:
>>
>> Hey there,
>> before going out to use hadoop (hadoop mailing list would help you
>> better I guess) you could provide more information about you
>> situation. For instance:
>> - how big is you index
>> - version of lucene
>> - which java vm
>> - how much heap space
>> - where does the OOM occure
>>
>> or maybe there is already an issue that is related to you like this
>> one: https://issues.apache.org/jira/browse/LUCENE-1566
>>
>> simon
>>
>> On Mon, Jun 29, 2009 at 12:49 PM, m.harig<m.harig@gmail.com> wrote:
>>>
>>> hello all
>>>
>>>
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0Am doing a search application on lucene, its=
 working fine when my
>>> index size is small, am getting java heap space error when am using lar=
ge
>>> size index, i came to know about hadoop with lucene to solve this probl=
em
>>> ,
>>> but i don't have any idea about hadoop , i've searched thru the net , b=
ut
>>> i
>>> can't find better solutions , am tired of searching , am very curios if
>>> some1 tell me how to integrate lucene with hadoop , and i'll be very
>>> thankful to you , please any1 help me
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Read-large-size-index-tp24251993p24251993.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
Hey there,
1GB is not a big index though. What happens when you search? Can you
post the stacktrace where the OOM occurs? Do you do any kind of
sorting in your application?

simon
> i've posted a mail at hadoop lucene forum too , but i didn't get any
> response. my index size is 1GB , am using lucene 2.3.0 , java 1.6 , am
> setting 1024 as java max , when i tried to search a query it gives me jav=
a
> heap space . please any one help me .
>
> --
> View this message in context: http://www.nabble.com/Read-large-size-index=
-tp24251993p24252732.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 12:35:36 2009
Return-Path: <java-user-return-40970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22672 invoked from network); 29 Jun 2009 12:35:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 12:35:36 -0000
Received: (qmail 45809 invoked by uid 500); 29 Jun 2009 12:35:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45744 invoked by uid 500); 29 Jun 2009 12:35:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45734 invoked by uid 99); 29 Jun 2009 12:35:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:35:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:35:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLG4o-0005j5-LR
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 05:35:14 -0700
Message-ID: <24253338.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 05:35:14 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read large size index
In-Reply-To: <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com> <24252732.post@talk.nabble.com> <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Simon Willnauer wrote:
>=20
> On Mon, Jun 29, 2009 at 1:48 PM, m.harig<m.harig@gmail.com> wrote:
>>
>>
>>
>> Simon Willnauer wrote:
>>>
>>> Hey there,
>>> before going out to use hadoop (hadoop mailing list would help you
>>> better I guess) you could provide more information about you
>>> situation. For instance:
>>> - how big is you index
>>> - version of lucene
>>> - which java vm
>>> - how much heap space
>>> - where does the OOM occure
>>>
>>> or maybe there is already an issue that is related to you like this
>>> one: https://issues.apache.org/jira/browse/LUCENE-1566
>>>
>>> simon
>>>
>>> On Mon, Jun 29, 2009 at 12:49 PM, m.harig<m.harig@gmail.com> wrote:
>>>>
>>>> hello all
>>>>
>>>>
>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0Am doing a search application on lucene, it=
s working fine when
>>>> my
>>>> index size is small, am getting java heap space error when am using
>>>> large
>>>> size index, i came to know about hadoop with lucene to solve this
>>>> problem
>>>> ,
>>>> but i don't have any idea about hadoop , i've searched thru the net ,
>>>> but
>>>> i
>>>> can't find better solutions , am tired of searching , am very curios i=
f
>>>> some1 tell me how to integrate lucene with hadoop , and i'll be very
>>>> thankful to you , please any1 help me
>>>> --
>>>> View this message in context:
>>>> http://www.nabble.com/Read-large-size-index-tp24251993p24251993.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
> Hey there,
> 1GB is not a big index though. What happens when you search? Can you
> post the stacktrace where the OOM occurs? Do you do any kind of
> sorting in your application?
>=20
> simon
>> i've posted a mail at hadoop lucene forum too , but i didn't get any
>> response. my index size is 1GB , am using lucene 2.3.0 , java 1.6 , am
>> setting 1024 as java max , when i tried to search a query it gives me
>> java
>> heap space . please any one help me .
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Read-large-size-index-tp24251993p24252732.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20


Thanks Simon,
         Am running my application on tomcat 6.0 , i set java heap max as
256MB for tomcat , when i tried to search a query it just showing me heap
space error.


--=20
View this message in context: http://www.nabble.com/Read-large-size-index-t=
p24251993p24253338.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 12:44:43 2009
Return-Path: <java-user-return-40971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24564 invoked from network); 29 Jun 2009 12:44:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 12:44:43 -0000
Received: (qmail 52332 invoked by uid 500); 29 Jun 2009 12:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52257 invoked by uid 500); 29 Jun 2009 12:44:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52246 invoked by uid 99); 29 Jun 2009 12:44:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:44:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:44:38 +0000
Received: by an-out-0708.google.com with SMTP id d11so690504and.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 05:44:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=IN4r/izRxnFoxc88+fsx9rJEEfE4ySnERZbB7eQGV5I=;
        b=PdhEw3vBohRZPd5Aka4vNmMy1mZKHbTOUMDwbvIxPEuIaEhaEpMUvd2U8R4WK2KN2U
         e3GY/HTInXS+htE4jWvb1p6bp0eZA3Std93WiNrUI/RbqZpHR74j+QnorQcyr7bbzOtE
         bwu3H5Qoizh44lUcSnjhMyHqiueb47AweD6g4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=r3Clc1e52OZ/N9P6oKM+h3xm3QlA71TQDxp55VHe/XmM3wNIY9EreXMy0SPfVjsn3m
         hwxVg1fLVWYSGMP0ZdFQw92HduO+C9HdGac333YKVGr7KjPghLHrLYY5gJm4/wbLufOq
         e2S61trCL9aqNcYuW0rSNn34ZTy4cU6oq5Kpo=
MIME-Version: 1.0
Received: by 10.101.71.3 with SMTP id y3mr9188492ank.62.1246279457406; Mon, 29 
	Jun 2009 05:44:17 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24253338.post@talk.nabble.com>
References: <24251993.post@talk.nabble.com>
	 <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com>
	 <24252732.post@talk.nabble.com>
	 <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com>
	 <24253338.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 14:44:14 +0200
Message-ID: <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Well, with this information I can hardly tell what the cause of the
OOM is. It would be really really helpful if you could figure out
where it happens. Do you get the OOM on the first try? I guess you do
not do any indexing in the background?!
What is your index "layout" I mean what kind of fields do you use for
search and again do you do any sorting. Did you try to run you app
with a bit more memory? Are you able to run you app outside of a
servlet container if you can not find the stacktrace in the logs?! Did
you try a profiler or something similar to figure out where is
happens?

simon

On Mon, Jun 29, 2009 at 2:35 PM, m.harig<m.harig@gmail.com> wrote:
>
>
>
> Simon Willnauer wrote:
>>
>> On Mon, Jun 29, 2009 at 1:48 PM, m.harig<m.harig@gmail.com> wrote:
>>>
>>>
>>>
>>> Simon Willnauer wrote:
>>>>
>>>> Hey there,
>>>> before going out to use hadoop (hadoop mailing list would help you
>>>> better I guess) you could provide more information about you
>>>> situation. For instance:
>>>> - how big is you index
>>>> - version of lucene
>>>> - which java vm
>>>> - how much heap space
>>>> - where does the OOM occure
>>>>
>>>> or maybe there is already an issue that is related to you like this
>>>> one: https://issues.apache.org/jira/browse/LUCENE-1566
>>>>
>>>> simon
>>>>
>>>> On Mon, Jun 29, 2009 at 12:49 PM, m.harig<m.harig@gmail.com> wrote:
>>>>>
>>>>> hello all
>>>>>
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0Am doing a search application on lucene, i=
ts working fine when
>>>>> my
>>>>> index size is small, am getting java heap space error when am using
>>>>> large
>>>>> size index, i came to know about hadoop with lucene to solve this
>>>>> problem
>>>>> ,
>>>>> but i don't have any idea about hadoop , i've searched thru the net ,
>>>>> but
>>>>> i
>>>>> can't find better solutions , am tired of searching , am very curios =
if
>>>>> some1 tell me how to integrate lucene with hadoop , and i'll be very
>>>>> thankful to you , please any1 help me
>>>>> --
>>>>> View this message in context:
>>>>> http://www.nabble.com/Read-large-size-index-tp24251993p24251993.html
>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>> Hey there,
>> 1GB is not a big index though. What happens when you search? Can you
>> post the stacktrace where the OOM occurs? Do you do any kind of
>> sorting in your application?
>>
>> simon
>>> i've posted a mail at hadoop lucene forum too , but i didn't get any
>>> response. my index size is 1GB , am using lucene 2.3.0 , java 1.6 , am
>>> setting 1024 as java max , when i tried to search a query it gives me
>>> java
>>> heap space . please any one help me .
>>>
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Read-large-size-index-tp24251993p24252732.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> Thanks Simon,
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 Am running my application on tomcat 6.0 , i s=
et java heap max as
> 256MB for tomcat , when i tried to search a query it just showing me heap
> space error.
>
>
> --
> View this message in context: http://www.nabble.com/Read-large-size-index=
-tp24251993p24253338.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 12:53:15 2009
Return-Path: <java-user-return-40972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26315 invoked from network); 29 Jun 2009 12:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 12:53:15 -0000
Received: (qmail 60297 invoked by uid 500); 29 Jun 2009 12:53:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60204 invoked by uid 500); 29 Jun 2009 12:53:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60194 invoked by uid 99); 29 Jun 2009 12:53:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:53:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:53:12 +0000
Received: by yxe12 with SMTP id 12so1064185yxe.29
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 05:52:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=2U+WqUcWp2MUQGQEIAf7pYz2DkwDAHAoLw3NLwtYjrM=;
        b=O+yy0ChGZJ0M8m5IYyekC3jfcDmAUqM7kEX+vGcfqkJVP57xTZjAnKHA18T4gdrckd
         HTxdIQOaSOPSTC+l2RH4j1feXuqfEYkdzRJlX1Ggo8nm++jL7l8RbHTVrN8Z39GZm2lE
         CUPZZNXng5wOEQD73gl6sh3xYHSUCH6eJwGEY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=Ik5RAf5PiIDwyYhE4g0jraamA6QFdL5cwH2Gw5iNnVseMj981EFJ9+0VdFHFbNFcai
         O3u8/+v9XLqHL7CiaTbLdBiAf35L8qRp0s2EA7ChyJMvKkoIXdutPJkcTaIkTFZof7Zn
         YwlrhiGKJIG07f/octNiLJdpv3Jbi+hzivp4o=
MIME-Version: 1.0
Received: by 10.101.71.3 with SMTP id y3mr9199061ank.62.1246279970472; Mon, 29 
	Jun 2009 05:52:50 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24228145.post@talk.nabble.com>
References: <24228145.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 14:52:47 +0200
Message-ID: <f18c9dde0906290552h347e09eeh1afd60420b8e11bf@mail.gmail.com>
Subject: Re: Lucene Term Encoder
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi John,

what do you mean by encoding? If you can be more clear about what you
are looking for you might get help easily.

simon
On Sat, Jun 27, 2009 at 12:27 AM, John Seer<pulsphoto@yahoo.com> wrote:
>
> Hello,
> Is there any class in lucene which will do encoding for term?
>
>
> Thanks
> --
> View this message in context: http://www.nabble.com/Lucene-Term-Encoder-tp24228145p24228145.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 12:55:51 2009
Return-Path: <java-user-return-40973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26796 invoked from network); 29 Jun 2009 12:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 12:55:51 -0000
Received: (qmail 63511 invoked by uid 500); 29 Jun 2009 12:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63432 invoked by uid 500); 29 Jun 2009 12:55:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63422 invoked by uid 99); 29 Jun 2009 12:55:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:55:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:55:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLGOQ-0006R5-0z
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 05:55:30 -0700
Message-ID: <24253583.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 05:55:30 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read large size index
In-Reply-To: <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com> <24252732.post@talk.nabble.com> <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com> <24253338.post@talk.nabble.com> <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Simon

           I don't run any application on the tomcat , moreover i restarted
it , am not doing any jobs except searching , we've a 500GB drive , we've
indexed around 100,000 documents , it gives me around 1GB index . When i
tried to search pdf i got the heap space error ,  
-- 
View this message in context: http://www.nabble.com/Read-large-size-index-tp24251993p24253583.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 12:58:53 2009
Return-Path: <java-user-return-40974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28690 invoked from network); 29 Jun 2009 12:58:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 12:58:51 -0000
Received: (qmail 69072 invoked by uid 500); 29 Jun 2009 12:58:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69004 invoked by uid 500); 29 Jun 2009 12:58:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68994 invoked by uid 99); 29 Jun 2009 12:58:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:58:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 12:58:48 +0000
Received: by yxe12 with SMTP id 12so1070481yxe.29
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 05:58:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=97w4Low1xTO3x51GVSXngv3N8UNrjiAALehoZaZikis=;
        b=dAaQt1dZxVHrH3+G/PfZ2+P8MRz0jBOsD0GS8ZMjKz2DIaEgHecWA7bh5SWnoQ09ME
         kSqHRxLdXQRdFP93hRIYxwF3JkQA1WgLpXxvpfCNgvG/boWcshwxrUCaLA8cGYDF0eiN
         UWqj9vPgEo9Ygo3Hei0rZLEvYtgMywhXxKCbs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=aYl33KY4AXnfBsdXvtA3nL1UyiAc+bTpZiPq9cJf/H53dLq/e/HtaIraG7Neaisk8J
         QxrHtCo3kko6LdteWyR9qOjhh41vZZMwnLQFMMuaWF22c7khdPLTb/JgYNSsPkMM+W15
         TXVKzU/EP50rBivkrLuyjlNK5fWbWt2rAnpqA=
MIME-Version: 1.0
Received: by 10.100.154.14 with SMTP id b14mr9051176ane.142.1246280307084; 
	Mon, 29 Jun 2009 05:58:27 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24253583.post@talk.nabble.com>
References: <24251993.post@talk.nabble.com>
	 <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com>
	 <24252732.post@talk.nabble.com>
	 <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com>
	 <24253338.post@talk.nabble.com>
	 <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com>
	 <24253583.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 14:58:27 +0200
Message-ID: <f18c9dde0906290558k2f8ecb0dnfc8b71c1bb6898bc@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jun 29, 2009 at 2:55 PM, m.harig<m.harig@gmail.com> wrote:
>
> Thanks Simon
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 I don't run any application on the tom=
cat , moreover i restarted
> it , am not doing any jobs except searching , we've a 500GB drive , we've
> indexed around 100,000 documents , it gives me around 1GB index . When i
> tried to search pdf i got the heap space error ,

bq.  Am running my application on tomcat 6.0 , i set java heap max as
256MB for tomcat , when i tried to search a query it just showing me heap
space error.
you don't run any app in tomcat?! I'm confused...

Sorry man if you can not provide any details about how you search and
what you do or stack traces it's very tough to give you any help or
advice.
> --
> View this message in context: http://www.nabble.com/Read-large-size-index=
-tp24251993p24253583.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 13:07:31 2009
Return-Path: <java-user-return-40975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31440 invoked from network); 29 Jun 2009 13:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 13:07:31 -0000
Received: (qmail 80560 invoked by uid 500); 29 Jun 2009 13:07:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80486 invoked by uid 500); 29 Jun 2009 13:07:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80472 invoked by uid 99); 29 Jun 2009 13:07:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:07:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:07:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLGZh-0007Aj-TO
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 06:07:09 -0700
Message-ID: <24253760.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 06:07:09 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read large size index
In-Reply-To: <f18c9dde0906290558k2f8ecb0dnfc8b71c1bb6898bc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com> <24252732.post@talk.nabble.com> <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com> <24253338.post@talk.nabble.com> <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com> <24253583.post@talk.nabble.com> <f18c9dde0906290558k2f8ecb0dnfc8b71c1bb6898bc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Simon ,

           This is how am indexing my documents , 


                indexWriter.addDocument(doc, new StopAnalyzer());


		indexWriter.setMergeFactor(10);

		indexWriter.setMaxBufferedDocs(100);

		indexWriter.setMaxMergeDocs(Integer.MAX_VALUE);

		indexWriter.setTermIndexInterval(128);

		indexWriter.setMaxFieldLength(10000);

Do i need improve on this ?? 

>> Sorry man if you can not provide any details about how you search  

What it does mean ?? please let me know...
-- 
View this message in context: http://www.nabble.com/Read-large-size-index-tp24251993p24253760.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 13:16:47 2009
Return-Path: <java-user-return-40976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34147 invoked from network); 29 Jun 2009 13:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 13:16:47 -0000
Received: (qmail 90003 invoked by uid 500); 29 Jun 2009 13:16:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89912 invoked by uid 500); 29 Jun 2009 13:16:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89902 invoked by uid 99); 29 Jun 2009 13:16:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:16:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:16:45 +0000
Received: by yxe12 with SMTP id 12so1090558yxe.29
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 06:16:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=LaXIGV9apEDJXYh4borQa/+6+JYD5rMsZ1QR+LrDCSY=;
        b=nXS0AenzMS47cxPJehiDRBxdOTsSlOBWV40qzUsMLBAaPrwtMqc3xMh2gUUSfQGFct
         xbJLU+w+pki+s74iNLDbQ+wbG1I4YVFErteXu51MWp88BHzMxC0HtFozlIfYmJfdmNem
         W+Un+y/29Kja8XPpsDUPExjYMs56fBzddC3RA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=CTi8HanXmhFHGDCQfCfoCxIW/rot9hYiOuPb2gDoquQsKeY0pLBTI94h37C/N1t80l
         9FLmEw0icyegfJ/h1q/j3+uv00y78olEKYStxqOOL6OkI7xgwJSBupPgliO63+Hem54b
         u+QxjtfsdH8GBmipKVOrQBHXQMS0iFtMpTBUw=
MIME-Version: 1.0
Received: by 10.100.96.9 with SMTP id t9mr9111980anb.106.1246281384738; Mon, 
	29 Jun 2009 06:16:24 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24253760.post@talk.nabble.com>
References: <24251993.post@talk.nabble.com>
	 <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com>
	 <24252732.post@talk.nabble.com>
	 <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com>
	 <24253338.post@talk.nabble.com>
	 <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com>
	 <24253583.post@talk.nabble.com>
	 <f18c9dde0906290558k2f8ecb0dnfc8b71c1bb6898bc@mail.gmail.com>
	 <24253760.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 15:16:24 +0200
Message-ID: <f18c9dde0906290616r7fc957bfm1f657cd8fa8cc7b0@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jun 29, 2009 at 3:07 PM, m.harig<m.harig@gmail.com> wrote:
>
> Thanks Simon ,
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 This is how am indexing my documents ,
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0indexWriter.addDoc=
ument(doc, new StopAnalyzer());
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0indexWriter.setMer=
geFactor(10);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0indexWriter.setMax=
BufferedDocs(100);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0indexWriter.setMax=
MergeDocs(Integer.MAX_VALUE);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0indexWriter.setTer=
mIndexInterval(128);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0indexWriter.setMax=
FieldLength(10000);
>
> Do i need improve on this ??
As you said, the problem occurs when you search right?! so for now I
would not care about indexing too much.
>
>>> Sorry man if you can not provide any details about how you search
>
> What it does mean ?? please let me know...
What I want to know is how does you search look like, for instance:
- do you sort on any field
- which query do you use (e.g. wilidcard searches)

And again, the source of the error is very important :)

simon
> --
> View this message in context: http://www.nabble.com/Read-large-size-index=
-tp24251993p24253760.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 13:32:13 2009
Return-Path: <java-user-return-40977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44903 invoked from network); 29 Jun 2009 13:32:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 13:32:13 -0000
Received: (qmail 18757 invoked by uid 500); 29 Jun 2009 13:32:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18693 invoked by uid 500); 29 Jun 2009 13:32:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18683 invoked by uid 99); 29 Jun 2009 13:32:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:32:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:32:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLGxa-0008Pd-Hz
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 06:31:50 -0700
Message-ID: <24254191.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 06:31:50 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read large size index
In-Reply-To: <f18c9dde0906290616r7fc957bfm1f657cd8fa8cc7b0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com> <24252732.post@talk.nabble.com> <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com> <24253338.post@talk.nabble.com> <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com> <24253583.post@talk.nabble.com> <f18c9dde0906290558k2f8ecb0dnfc8b71c1bb6898bc@mail.gmail.com> <24253760.post@talk.nabble.com> <f18c9dde0906290616r7fc957bfm1f657cd8fa8cc7b0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks again,


       Did i index my files correctly, please need some tips, the following
is the error when i run my keyword , i typed pdf , thats it , because i've
got around 30,000 files named pdf, 


HTTP Status 500 -



type Exception report



message



description The server encountered an internal error () that prevented it
from fulfilling this request.



exception



javax.servlet.ServletException: Servlet execution threw an exception



root cause



java.lang.OutOfMemoryError: Java heap space

	java.util.Arrays.copyOfRange(Unknown Source)

	java.lang.String.<init>(Unknown Source)

	org.apache.lucene.store.IndexInput.readString(IndexInput.java:113)

	org.apache.lucene.index.FieldsReader.addField(FieldsReader.java:324)

	org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:166)

	org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)

	org.apache.lucene.index.IndexReader.document(IndexReader.java:525)

	org.apache.lucene.search.IndexSearcher.doc(IndexSearcher.java:92)

	org.apache.lucene.search.Hits.doc(Hits.java:167)

	com.npedia.liteSearch.helper.SearchHelper.getResults(SearchHelper.java:103)


com.npedia.liteSearch.servlet.SearchServlet.doProcess(SearchServlet.java:164)

	com.npedia.liteSearch.servlet.SearchServlet.doGet(SearchServlet.java:39)

	javax.servlet.http.HttpServlet.service(HttpServlet.java:690)

	javax.servlet.http.HttpServlet.service(HttpServlet.java:803)



note The full stack trace of the root cause is available in the Apache
Tomcat/6.0.10 logs.

Apache Tomcat/6.0.10
-- 
View this message in context: http://www.nabble.com/Read-large-size-index-tp24251993p24254191.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 13:33:45 2009
Return-Path: <java-user-return-40978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46471 invoked from network); 29 Jun 2009 13:33:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 13:33:45 -0000
Received: (qmail 22304 invoked by uid 500); 29 Jun 2009 13:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22221 invoked by uid 500); 29 Jun 2009 13:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22211 invoked by uid 99); 29 Jun 2009 13:33:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:33:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.106.56] (HELO smtp145.mail.mud.yahoo.com) (209.191.106.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jun 2009 13:33:42 +0000
Received: (qmail 59392 invoked from network); 29 Jun 2009 13:33:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=DSG0E0QW+hDt+Ag8Bw1kvdYDoMGHdmSKnf46WFI/wRp+sUgciRKNIUr/NI1C/1hl8+Ma/RgUQ018WESlt7XwlmItrHHChRWNCa5Pb9Zf0S/YeDoY8uKnC8nsExJici43MoNzdzGLMoIGXrsyxiZIzUmW6f2a62mzgk/0z2HWRBY=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp145.mail.mud.yahoo.com with SMTP; 29 Jun 2009 13:33:19 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: Up0ABqgVM1k8hF3C7.x2BqdDAy9GhxYftcKYr7qi10D0gyuwXsYnWyzWeQn7sWW5mJAvEJsbXy0hEScU47AepB49kqNeZ6iP4EPKOfZcyHMPaPn15n8v0k3DFvl8SFGOt.yXJLo.zeGemr_aoWpkpIrpcA4jvykLJ0C0rUtjVyExJcREOYUaGtewVwtQd7AGPNgvNIyyS3k0m.jCOAQ2kbFD2LGiW.ZneZ9K7IKTCiLxYp0cYupg9NA2xJxHNmE5lwlvJKBQFQjwcFz3hor1t50JmCjb.yvTCqCxAwcdrKOWOHUoO7DA
X-Yahoo-Newman-Property: ymail-3
Message-ID: <224f01c9f8be$2aa215f0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <24239930.post@talk.nabble.com> <85d3c3b60906281824p69a3aad8mbaddb6ee400d0e28@mail.gmail.com>
Subject: Re: Delete by docId in IndexWriter
Date: Mon, 29 Jun 2009 19:03:16 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

This issue has been raised earlier. IndexWriter is not providing any =
functionality to delete by doc id. IndexReader does, but it requires =
write permission. In my case, IndexReader and IndexWriter will be opened =
always. IR will be reopened frequently. To delete, i have no other =
option to write a query using IW and delete, evethough i know docid.=20

This feature is a required one.

Regards
Ganesh


----- Original Message -----=20
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, June 29, 2009 6:54 AM
Subject: Re: Delete by docId in IndexWriter


> This requires tracking the genealogy of docids as they are merged =
inside
> IndexWriter. It's doable, so if you're particularly interested feel =
free to
> open a jira issue.
>=20
> On Sun, Jun 28, 2009 at 2:21 AM, Shay Banon <kimchy@gmail.com> wrote:
>=20
>>
>> Hi,
>>
>>   I have a case where deleting documents by doc id make sense (I know
>> before hand the docs I want to delete based on the doc id). I am =
wondering
>> why the API is not exposed in the IndexWriter (as it is in =
IndexReader). I
>> understand that this API is more "expert" than typical usage, but it =
allows
>> for certain optimization on my end (already performed the query for
>> deletion
>> and I have the doc ids, so I don't want to perform it again...). It =
looks
>> like the DocumentsWriter already has support for deleting by document =
id,
>> so
>> I was wondering if it is possible to expose it in IndexWriter.
>>
>> Thanks,
>> Shay
>> --
>> View this message in context:
>> =
http://www.nabble.com/Delete-by-docId-in-IndexWriter-tp24239930p24239930.=
html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 13:33:48 2009
Return-Path: <java-user-return-40979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46554 invoked from network); 29 Jun 2009 13:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 13:33:48 -0000
Received: (qmail 23950 invoked by uid 500); 29 Jun 2009 13:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23912 invoked by uid 500); 29 Jun 2009 13:33:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23902 invoked by uid 99); 29 Jun 2009 13:33:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:33:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.228 as permitted sender)
Received: from [209.85.218.228] (HELO mail-bw0-f228.google.com) (209.85.218.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:33:47 +0000
Received: by bwz28 with SMTP id 28so411119bwz.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 06:33:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=146Lfhy5hTm7cgxxR/Zmhr2sCojcsndsmKkL1e/lTz8=;
        b=dL/Ht8cKD+P/R0K2M9/rBmtNWD02fOOxgf9t77bc/NwhbzDKAIz45U4WLrX6p4Uzqp
         3MW7NfmH78DPNJpLxYkSfX0g1SkH9974NtyUT7aUmIvtizqvtbWYxPbdpdRwE3YGi+3j
         M6hnA4kFKoww8dJoy9ZRHCa7FabTelSrg4MOU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GQuXupSmy+QiobcovLutt7tPLKeyiKOmqWHjfzBPkFEoqwM6zne9rZjLq5Gl/+IU1V
         khfCCf9RzuRMU0jp2zeHFJPd7p9N0I5DIof+FkSkkBBSk8XekjjwlNwfBEzCIocOtHNO
         GcXfneBZ7edOmz/s1Z3LpNI8rNLYuwTnWgpcU=
MIME-Version: 1.0
Received: by 10.204.55.1 with SMTP id s1mr7146864bkg.132.1246282406911; Mon, 
	29 Jun 2009 06:33:26 -0700 (PDT)
In-Reply-To: <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
	 <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
	 <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>
Date: Mon, 29 Jun 2009 09:33:26 -0400
Message-ID: <843920a30906290633g2e3db27cv9c72ad7f9f7e6169@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163605988c276034046d7cbc04
X-Virus-Checked: Checked by ClamAV on apache.org

--00163605988c276034046d7cbc04
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Mon, Jun 29, 2009 at 6:28 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> On Sun, Jun 28, 2009 at 9:08 PM, Nigel<nigelspleen@gmail.com> wrote:
> >> Unfortunately the TermInfos must still be hit to look up the
> >> freq/proxOffset in the postings files.
> >
> > But for that data you only have to hit the TermInfos for the terms you're
> > searching, correct?  So, assuming that there are vastly more terms in the
> > index than you ever actually use in a query, we could rely on the LRU
> cache
> > to keep the queried TermInfos around, rather than loading all of them
> > up-front.  This was a hypothesis based on some tracing through the code
> but
> > not a lot of knowledge of Lucene internals, so please steer me back to
> > reality if necessary.  (-:
>
> Right, it's only the terms in your query that need to be looked up.
>
> There's already an LRU cache for the Term -> TermInfos lookup, in
> TermInfosReader (hard wired to size 1024).  It was created as a "short
> term" cache so that queries that look up the same term twice (eg once
> for idf and once to get freq/prox postings position), would result in
> only one real lookup.  You could try privately experimenting w/ that
> value to see if you can get a reasonable it rate?


Exactly, the TermInfosReader cache is what I was thinking of.  Thanks for
the confirmation; I'll give that a try.

Lucene only loads the "indexed" terms (= every 128th) into RAM, by default.


Ah, I was confused by the index divisor being 1 by default: I thought it
meant that all terms were being loaded.  I see now in SegmentTermEnum that
the every-128th behavior is implemented at a lower level.

But I'm even more confused about why we have so many terms in memory.  A
heap dump shows over 270 million TermInfos, so if that's only 128th of the
total then we REALLY have a lot of terms.  (-:  We do have a lot of docs
(about 250 million), and we do have a couple unique per-document values, but
even so I can't see how we could get to 270 million x 128 terms.  (The heap
dump numbers are stable across the index close-and-reopen cycle, so I don't
think we're leaking.)

Thanks,
Chris

--00163605988c276034046d7cbc04--

From java-user-return-40980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 13:53:56 2009
Return-Path: <java-user-return-40980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59785 invoked from network); 29 Jun 2009 13:53:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 13:53:56 -0000
Received: (qmail 55287 invoked by uid 500); 29 Jun 2009 13:54:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55220 invoked by uid 500); 29 Jun 2009 13:54:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55210 invoked by uid 99); 29 Jun 2009 13:54:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:54:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 13:53:53 +0000
Received: by an-out-0708.google.com with SMTP id d11so710237and.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 06:53:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=2r9s48z9/BzZM4TDSVA2UdUtOoJJJOTPEFnoh4e2ftM=;
        b=bpn8aQiVitlz9jVyVzlgyxqk2uobw9+GiHylQue/cqNQC/m1lf1jfzKaBz30vBmB8d
         Mr36PgoAlP+PO8PNQ1xmHb/w5leBoAAmZ7s9I4K7cfg/66uXSw5br0UWXY6hieEsN9xs
         falC+VLZczZUKsL6GBKKun4puyfFuKOO01+X0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=FKf2QjyMSJ9szMtvuOech9ySeIWArzUeAX45aLrWvSZ0gF/uRGaVjtLA6GpvpsMMIb
         VNXUlLO0hkKXTUMaTGVSYNPOL/m2Zebg7iCInp95VxN68vISHMG+67QXgmZypRzerq9F
         zJZQmsx/HfbnY4OLRAvC9WVctji7K+AiIE5nE=
MIME-Version: 1.0
Received: by 10.100.105.4 with SMTP id d4mr9266255anc.39.1246283612839; Mon, 
	29 Jun 2009 06:53:32 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24254191.post@talk.nabble.com>
References: <24251993.post@talk.nabble.com> <24252732.post@talk.nabble.com>
	 <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com>
	 <24253338.post@talk.nabble.com>
	 <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com>
	 <24253583.post@talk.nabble.com>
	 <f18c9dde0906290558k2f8ecb0dnfc8b71c1bb6898bc@mail.gmail.com>
	 <24253760.post@talk.nabble.com>
	 <f18c9dde0906290616r7fc957bfm1f657cd8fa8cc7b0@mail.gmail.com>
	 <24254191.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 15:53:32 +0200
Message-ID: <f18c9dde0906290653h23686aa4g536e507acf5ef674@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hey there, that makes things easier. :)

ok here are some questions:

Do you iterate over all docs calling hits.doc(i) ?If so do you have to
load all fields to render your results, if not you should not retrieve
all of them?
You use IndexSearchersearch(Query q,...) which returns a Hits object
have you tried to use the new search methods returning TopDocs?

when you search for pdf and get 30k results you load all the "stored"
field content into memory once you call IndexSearcher.doc(i) as it
internally calls IndexReader.document(i, null). This is equivalent to
a "Load All fields" FieldSelector.
You can have a closer look at FieldSelector and the new search methods
which accept them. This is a way to make you retrieval faster and load
only the fields you really need.



On Mon, Jun 29, 2009 at 3:31 PM, m.harig<m.harig@gmail.com> wrote:
>
> Thanks again,
>
>
> =C2=A0 =C2=A0 =C2=A0 Did i index my files correctly, please need some tip=
s, the following
> is the error when i run my keyword , i typed pdf , thats it , because i'v=
e
> got around 30,000 files named pdf,
>
>
> HTTP Status 500 -
>
>
>
> type Exception report
>
>
>
> message
>
>
>
> description The server encountered an internal error () that prevented it
> from fulfilling this request.
>
>
>
> exception
>
>
>
> javax.servlet.ServletException: Servlet execution threw an exception
>
>
>
> root cause
>
>
>
> java.lang.OutOfMemoryError: Java heap space
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0java.util.Arrays.copyOfRange(Unknown Source)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0java.lang.String.<init>(Unknown Source)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.lucene.store.IndexInput.readString(=
IndexInput.java:113)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.lucene.index.FieldsReader.addField(=
FieldsReader.java:324)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.lucene.index.FieldsReader.doc(Field=
sReader.java:166)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.lucene.index.SegmentReader.document=
(SegmentReader.java:659)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.lucene.index.IndexReader.document(I=
ndexReader.java:525)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.lucene.search.IndexSearcher.doc(Ind=
exSearcher.java:92)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.lucene.search.Hits.doc(Hits.java:16=
7)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0com.npedia.liteSearch.helper.SearchHelper.getR=
esults(SearchHelper.java:103)
>
>
> com.npedia.liteSearch.servlet.SearchServlet.doProcess(SearchServlet.java:=
164)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0com.npedia.liteSearch.servlet.SearchServlet.do=
Get(SearchServlet.java:39)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0javax.servlet.http.HttpServlet.service(HttpSer=
vlet.java:690)
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0javax.servlet.http.HttpServlet.service(HttpSer=
vlet.java:803)
>
>
>
> note The full stack trace of the root cause is available in the Apache
> Tomcat/6.0.10 logs.
>
> Apache Tomcat/6.0.10
> --
> View this message in context: http://www.nabble.com/Read-large-size-index=
-tp24251993p24254191.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 14:40:31 2009
Return-Path: <java-user-return-40981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86772 invoked from network); 29 Jun 2009 14:40:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 14:40:30 -0000
Received: (qmail 41723 invoked by uid 500); 29 Jun 2009 14:40:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41655 invoked by uid 500); 29 Jun 2009 14:40:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41645 invoked by uid 99); 29 Jun 2009 14:40:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 14:40:39 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.215] (HELO mail-fx0-f215.google.com) (209.85.220.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 14:40:26 +0000
Received: by fxm11 with SMTP id 11so1963946fxm.5
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 07:40:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.112.130 with SMTP id w2mr4562356fap.65.1246286404313; Mon, 
	29 Jun 2009 07:40:04 -0700 (PDT)
In-Reply-To: <904203.98430.qm@web27103.mail.ukl.yahoo.com>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
	 <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
	 <4A4864E7.3070609@boboco.ie>
	 <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
	 <904203.98430.qm@web27103.mail.ukl.yahoo.com>
Date: Mon, 29 Jun 2009 16:40:04 +0200
Message-ID: <7e536b1f0906290740i664c67c0j5d80e46accbecad0@mail.gmail.com>
Subject: Re: Scaling out/up or a mix
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b1546ae1d5046d7daa19
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5b1546ae1d5046d7daa19
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi thanks for your answer, comments inline.

On Mon, Jun 29, 2009 at 10:06 AM, eks dev <eksdev@yahoo.co.uk> wrote:

>
> depends on your architecture, will you partition your index? What is max
> expected size of your index (you said 128G and growing..) what do you mean
> with growing? You have in both options enogh memory to load it into RAM...

Yes we partition the index, with a simple RoundRobin algo.
The options was just to give the reader some visibility in what kind of
hardware you get depending on which path you choose. I do not really have
that amount of money to spend right now. More like 1/6th of that really.
We crawl blogs... The number of blogs we find is still increasing and we are
not nearly indexing all languages => It will grow at least linear. Let's say
at least 10-20G a month or so ?

>
>
> I would definitly try to have less machines and alot of memory, so that
> your index fits into ram comfortably...

OK, so you mean that one should aim for fitting the shard into RAM...

>
>
> IMO, 8Gig per machine is rather smalish, but depends heavily on your access
> patterns... how many documents you need to load from disk per query? If this
> does not create huge on IO, you could try to load everything but stored
> fields into RAM

We store no fields in the index besides the actual DB id. We load no more
than 50 docs at a time.

>
>
> What are your requirements on Indexing side (once a day, week, 15 Minutes),
> how you distribute index to all these machines...

We index all non office hours.

>
>
> Your question: IO or CPU bound, depends, if you load it into RAM it becomes
> Memeory-bus/CPU bound, if it is mainly on disk it will be IO bound

OK like I suspected, answers my previous question(s).


Final question:

Based on your findings what is the most challenging part to tune ? Sorting
or querying or what else?

//Marcus



>
>
>
>
>
>
> ----- Original Message ----
> > From: Marcus Herou <marcus.herou@tailsweep.com>
> > To: java-user@lucene.apache.org
> > Sent: Monday, 29 June, 2009 9:47:13
> > Subject: Re: Scaling out/up or a mix
> >
> > Thanks for the answer.
> >
> > Don't you think that part 1 of the email would give you a hint of nature
> of
> > the index ?
> >
> > Index size(and growing): 16Gx8 = 128G
> > Doc size (data): 20k
> > Num docs: 90M
> > Num users: Few hundred but most critical is that the admin staff which is
> > using the index all day long.
> > Query types: Example: title:"Iphone" OR description:"Iphone" sorted by
> > publishedDate... = Very simple, no fuzzy searches etc. However since the
> > dataset is large it will consume memory on sorting I guess.
> >
> > Could not one draw any conclusions about best-practice in terms of
> hardware
> > given the above "specs" ?
> >
> > Basically I would like to know if I really need 8 cores since machines
> with
> > dual-cpu support are the most expensive and I would like to not throw
> away
> > money so getting it right is a matter of economy.
> >
> > I mean it is very simple: Let's say someone gives me a budget of 50 000
> USD
> > and I then want to get the most bang for the buck for my workload.
> > Should I go for
> > X machines with quad-core 3.0GHz, 4 disks RAID1+0, 8G RAM costing me
> 1200USD
> > a piece (giving me 40 machines: 160 disks, 160 cores, 320G RAM)
> > or
> > X machines with dual quad-core 2.0GHz, 4 disks RAID1+0, 36G RAM costing
> me
> > 3400 USD a piece (giving me 15 machines:  60 disks, 120 cores,  540G RAM)
> >
> > Basically I would like to know what factors make the workload IO bound vs
> > CPU bound ?
> >
> > //Marcus
> >
> >
> >
> >
> >
> >
> > On Mon, Jun 29, 2009 at 8:53 AM, Eric Bowman wrote:
> >
> > > There is no single answer -- this is always application specific.
> > >
> > > Without knowing anything about what you are doing:
> > >
> > > 1. disk i/o is probably the most critical.  Go SSD or even RAM disk if
> > > you can, if performance is absolutely critical
> > > 2. Sometimes CPU can become an issue, but 8 cores is probably enough
> > > unless you are doing especially cpu-bound searches.
> > >
> > > Unless you are doing something with hard performance requirements, or
> > > really quite unusual, buying "good" kit is probably good enough, and
> you
> > > won't really know for sure until you measure.  Lucene is a general
> > > enough tool that there isn't a terribly universal answer to this.  We
> > > were a bit surprised to end up cpu-bound instead of disk i/o-bound, for
> > > instance, but we ended up taking an unusual path.  YMMV.
> > >
> > > Marcus Herou wrote:
> > > > Hi. I think I need to be more specific.
> > > >
> > > > What I am trying to find out is if I should aim for:
> > > >
> > > > CPU (2x4 cores, 2.0-3.0Ghz)? or perhaps just a 4 cores is enough.
> > > > Fast disk IO: 8 disks, RAID1+0 ? or perhaps 2 disks is enough...
> > > > RAM - if the index does not fit into RAM how much RAM should I then
> buy ?
> > > >
> > > > Please any hints would be appreciated since I am going to invest
> soon.
> > > >
> > > > //Marcus
> > > >
> > > > On Sat, Jun 27, 2009 at 12:00 AM, Marcus Herou
> > > > wrote:
> > > >
> > > >
> > > >> Hi.
> > > >>
> > > >> I currently have an index which is 16GB per machine (8 machines =
> 128GB)
> > > >> (data is stored externally, not in index) and is growing like crazy
> (we
> > > are
> > > >> indexing blogs which is crazy by nature) and have only allocated 2GB
> per
> > > >> machine to the Lucene app since we are running some other stuff
> there in
> > > >> parallell.
> > > >>
> > > >> Each doc should be roughly the size of a blog post, no more than
> 20k.
> > > >>
> > > >> We currently have about 90M documents and it is increasing rapidly
> so
> > > >> getting into the G+ document range is not going to be too far away.
> > > >>
> > > >> Now due to search performance I think I need to move these instances
> to
> > > >> dedicated index/search machines (or index on some machines and
> search on
> > > >> others). Anyway I would like to get some feedback about two things:
> > > >>
> > > >> 1. What is the most important hardware aspect when it comes to add
> > > document
> > > >> to the index and optimize it.
> > > >> 1.1 Is it disk I|O write throghput ? (sequential or random-io ?)
> > > >> 1.2 Is it RAM ?
> > > >> 1.3 Is is CPU ?
> > > >>
> > > >> My guess would be disk-io, right, wrong ?
> > > >>
> > > >> 2. What is the most important hardware aspect when it comes to
> searching
> > > >> documents in my setup ? (result-set is limited to return only the
> top 10
> > > >> matches with page handling)
> > > >> 2.1 Is it disk read throughput ? (sequential or random-io ?)
> > > >> 2.2 Is it RAM ?
> > > >> 2.3 Is is CPU ?
> > > >>
> > > >> I have no clue since the data might not fit into memory. What is
> then
> > > the
> > > >> most important factor ? read-performance while scanning the index ?
> CPU
> > > >> while comparing fields and collecting results ?
> > > >>
> > > >> What I'm trying to find out is what I can do to get most bang for
> the
> > > buck
> > > >> with a limited (aren't we all limited?) budget.
> > > >>
> > > >> Kindly
> > > >>
> > > >> //Marcus
> > > >>
> > > >>
> > > >>
> > > >>
> > > >>
> > > >> --
> > > >> Marcus Herou CTO and co-founder Tailsweep AB
> > > >> +46702561312
> > > >> marcus.herou@tailsweep.com
> > > >> http://www.tailsweep.com/
> > > >>
> > > >>
> > > >>
> > > >
> > > >
> > > >
> > >
> > >
> > > --
> > > Eric Bowman
> > > Boboco Ltd
> > > ebowman@boboco.ie
> > > http://www.boboco.ie/ebowman/pubkey.pgp
> > >
> > +35318394189/+353872801532
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Marcus Herou CTO and co-founder Tailsweep AB
> > +46702561312
> > marcus.herou@tailsweep.com
> > http://www.tailsweep.com/
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/

--001636c5b1546ae1d5046d7daa19--

From java-user-return-40982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 16:36:34 2009
Return-Path: <java-user-return-40982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39350 invoked from network); 29 Jun 2009 16:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 16:36:32 -0000
Received: (qmail 7030 invoked by uid 500); 29 Jun 2009 16:36:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6943 invoked by uid 500); 29 Jun 2009 16:36:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6933 invoked by uid 99); 29 Jun 2009 16:36:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 16:36:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 16:36:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLJpy-0000VY-Om
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 09:36:10 -0700
Message-ID: <24257547.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 09:36:10 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read large size index
In-Reply-To: <f18c9dde0906290653h23686aa4g536e507acf5ef674@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com> <24252732.post@talk.nabble.com> <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com> <24253338.post@talk.nabble.com> <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com> <24253583.post@talk.nabble.com> <f18c9dde0906290558k2f8ecb0dnfc8b71c1bb6898bc@mail.gmail.com> <24253760.post@talk.nabble.com> <f18c9dde0906290616r7fc957bfm1f657cd8fa8cc7b0@mail.gmail.com> <24254191.post@talk.nabble.com> <f18c9dde0906290653h23686aa4g536e507acf5ef674@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Simon , 

Hey there, that makes things easier. :)

ok here are some questions:

>>>Do you iterate over all docs calling hits.doc(i) ?If so do you have to
load all fields to render your results, if not you should not retrieve
all of them?


Yes, am iterating over all docs by calling hits.doc(i) , 



You use IndexSearchersearch(Query q,...) which returns a Hits object
have you tried to use the new search methods returning TopDocs?

Sorry, i didn't , could you please send me a piece of code.

when you search for pdf and get 30k results you load all the "stored"
field content into memory once you call IndexSearcher.doc(i) as it
internally calls IndexReader.document(i, null). This is equivalent to
a "Load All fields" FieldSelector.
You can have a closer look at FieldSelector and the new search methods
which accept them. This is a way to make you retrieval faster and load
only the fields you really need.



-- 
View this message in context: http://www.nabble.com/Read-large-size-index-tp24251993p24257547.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 16:47:18 2009
Return-Path: <java-user-return-40983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41535 invoked from network); 29 Jun 2009 16:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 16:47:18 -0000
Received: (qmail 24365 invoked by uid 500); 29 Jun 2009 16:47:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24324 invoked by uid 500); 29 Jun 2009 16:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24314 invoked by uid 99); 29 Jun 2009 16:47:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 16:47:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 16:47:14 +0000
Received: by yxe12 with SMTP id 12so1326627yxe.29
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 09:46:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=doLRcDp6PMGyAgd1pKin/PuQz5FEDktkHUxKBgRnJ8g=;
        b=FScmgSaqgFSwp4g9U4XMQhb00HtbuCfx8aUi+IGQMOf2QnXOuPNYk0Ll7QXQx4rzwn
         monuOXTN3s9Ekr/eB8PQVhq4PAPAkUE9I8l6v2tO4wy5rnWqF2Ugi/lnuUvr1ME31gKG
         cM0USX3R9FA1dgBCbKklepG8Fg75doldj8V0I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=DlGVK522J+YgN3cerxciHeJKuN9+j930JL9VfunLZGvOxv1o2Da6rO3ZwuQP1Tgu1g
         8WjxsWwhbBsQTPJ2ZBKTvj0Ldk8zS5FHWMz1CtHvAqYbp/F/IpVpizUqhNHrKA0BLs0f
         3O9afeNXoTOJMsARAhM6XSC7Xk+oVaVYnOMv0=
MIME-Version: 1.0
Received: by 10.100.154.14 with SMTP id b14mr9386841ane.142.1246294009370; 
	Mon, 29 Jun 2009 09:46:49 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24257547.post@talk.nabble.com>
References: <24251993.post@talk.nabble.com> <24253338.post@talk.nabble.com>
	 <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com>
	 <24253583.post@talk.nabble.com>
	 <f18c9dde0906290558k2f8ecb0dnfc8b71c1bb6898bc@mail.gmail.com>
	 <24253760.post@talk.nabble.com>
	 <f18c9dde0906290616r7fc957bfm1f657cd8fa8cc7b0@mail.gmail.com>
	 <24254191.post@talk.nabble.com>
	 <f18c9dde0906290653h23686aa4g536e507acf5ef674@mail.gmail.com>
	 <24257547.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 18:46:46 +0200
Message-ID: <f18c9dde0906290946u52359f16o9c9e9913961bf693@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jun 29, 2009 at 6:36 PM, m.harig<m.harig@gmail.com> wrote:
>
> Thanks Simon ,
>
> Hey there, that makes things easier. :)
>
> ok here are some questions:
>
>>>>Do you iterate over all docs calling hits.doc(i) ?If so do you have to
> load all fields to render your results, if not you should not retrieve
> all of them?
>
>
> Yes, am iterating over all docs by calling hits.doc(i) ,
do you really need to get all docs? wouldn't it be enough to fetch
just the top N you want to display or do you want to display all of
them?
>
>
>
> You use IndexSearchersearch(Query q,...) which returns a Hits object
> have you tried to use the new search methods returning TopDocs?
>
> Sorry, i didn't , could you please send me a piece of code.
Example:
  IndexReader open = IndexReader.open("/tmp/testindex/");
    IndexSearcher searcher = new IndexSearcher(open);
    final String fName = "test";
    TopDocs topDocs = searcher.search(new TermQuery(new Term(fName, "lucene")),
        Integer.MAX_VALUE);
    FieldSelector selector = new FieldSelector() {
      public FieldSelectorResult accept(String fieldName) {
        return fieldName == fName ? FieldSelectorResult.LOAD
            : FieldSelectorResult.NO_LOAD;
      }

    };

    final int totalHits = topDocs.totalHits;
    ScoreDoc[] scoreDocs = topDocs.scoreDocs;
    for (int i = 0; i < totalHits; i++) {
      Document doc = searcher.doc(scoreDocs[i].doc, selector);
    }
>
> when you search for pdf and get 30k results you load all the "stored"
> field content into memory once you call IndexSearcher.doc(i) as it
> internally calls IndexReader.document(i, null). This is equivalent to
> a "Load All fields" FieldSelector.
> You can have a closer look at FieldSelector and the new search methods
> which accept them. This is a way to make you retrieval faster and load
> only the fields you really need.
>
>
>
> --
> View this message in context: http://www.nabble.com/Read-large-size-index-tp24251993p24257547.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 17:44:53 2009
Return-Path: <java-user-return-40984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62987 invoked from network); 29 Jun 2009 17:44:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 17:44:53 -0000
Received: (qmail 2436 invoked by uid 500); 29 Jun 2009 17:45:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2376 invoked by uid 500); 29 Jun 2009 17:45:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2366 invoked by uid 99); 29 Jun 2009 17:45:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 17:45:01 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 17:44:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLKu6-0003YI-MO
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 10:44:30 -0700
Message-ID: <24258634.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 10:44:30 -0700 (PDT)
From: John Seer <pulsphoto@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Term Encoder
In-Reply-To: <f18c9dde0906290552h347e09eeh1afd60420b8e11bf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pulsphoto@yahoo.com
References: <24228145.post@talk.nabble.com> <f18c9dde0906290552h347e09eeh1afd60420b8e11bf@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Simon,

I am looking for some class which automaticly will take care of text and
convert it into text which can be used in query. The same way as URLEncoder
encodes string for URL for example:

Term: Las Vegas-Food AND Dining place

After encoding term: Las Vagas(escapedDash)Food and Dining place.

Basilcy my main problem is dash for this moment I don't know how to search
for term which has a dash in it



Thanks



Simon Willnauer wrote:
> 
> Hi John,
> 
> what do you mean by encoding? If you can be more clear about what you
> are looking for you might get help easily.
> 
> simon
> On Sat, Jun 27, 2009 at 12:27 AM, John Seer<pulsphoto@yahoo.com> wrote:
>>
>> Hello,
>> Is there any class in lucene which will do encoding for term?
>>
>>
>> Thanks
>> --
>> View this message in context:
>> http://www.nabble.com/Lucene-Term-Encoder-tp24228145p24228145.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-Term-Encoder-tp24228145p24258634.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 18:41:54 2009
Return-Path: <java-user-return-40985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94587 invoked from network); 29 Jun 2009 18:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 18:41:54 -0000
Received: (qmail 63612 invoked by uid 500); 29 Jun 2009 18:42:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63552 invoked by uid 500); 29 Jun 2009 18:42:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63542 invoked by uid 99); 29 Jun 2009 18:42:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 18:42:02 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.221.198 as permitted sender)
Received: from [209.85.221.198] (HELO mail-qy0-f198.google.com) (209.85.221.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 18:41:51 +0000
Received: by qyk36 with SMTP id 36so5537329qyk.29
        for <java-user@lucene.apache.org>; Mon, 29 Jun 2009 11:41:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=kzMfqfxs3iLsHH19G9BLeSQ1fbsgZIzrfZPtpeLmP4M=;
        b=WHZs21fRHcT9oPRSxUtmERGFWf4KHj3rbA2OWCg9LJvvTRZxFr9V9Hxe7EXVtKxViS
         xnMBSh0s0btFjEoqswiqemsGT9A2lfui+6+SBtmUryZkAObpp6mOOUoheFjNr3uVzX7h
         N2xoB2qvfe4NtX2VnhbdkqEuLLOHYrGLbTs10=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ijoaONBmAEXS6qniws9argiOHtfk7wADT710gMWtqarw73vj75s8Im7KAQPL3Jyjrm
         zJ+5a9oDrfNwUZnymmvwaf2YV5m1WLF5uPLHjMlnsfZoaRCDT3DhF4KVtP0GxvHzROpE
         iTu/cW9Saac4Aeea4kO9ZsgJtfp4I07oVVwm8=
MIME-Version: 1.0
Received: by 10.220.91.133 with SMTP id n5mr2009300vcm.102.1246300886802; Mon, 
	29 Jun 2009 11:41:26 -0700 (PDT)
In-Reply-To: <24258634.post@talk.nabble.com>
References: <24228145.post@talk.nabble.com>
	 <f18c9dde0906290552h347e09eeh1afd60420b8e11bf@mail.gmail.com>
	 <24258634.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 14:41:26 -0400
Message-ID: <359a92830906291141y5fe1c111p7f8639d8568c3469@mail.gmail.com>
Subject: Re: Lucene Term Encoder
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e647622aa4dbc4046d810990
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e647622aa4dbc4046d810990
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

You probably need to make sure you understand analyzers beforeyou think
about escaping/encoding. For instance, if you use
StandardAnalyzer when indexing the text "Las Vegas-Food Dining Place"
would index the tokens
las
vegas
food
dining
place

nary a hyphen to be seen. If you used StandardAnalyzer for querying,
all would be fine.

I strongly recommend you get a copy of Luke to examine the results of
using different analyzers because different analyzers do different things.

A good starting point is to just not worry about this at all and use the
*same* analyzer for indexing and searching, then modify as necessary.

Best
Erick

On Mon, Jun 29, 2009 at 1:44 PM, John Seer <pulsphoto@yahoo.com> wrote:

>
> Hello Simon,
>
> I am looking for some class which automaticly will take care of text and
> convert it into text which can be used in query. The same way as URLEncoder
> encodes string for URL for example:
>
> Term: Las Vegas-Food AND Dining place
>
> After encoding term: Las Vagas(escapedDash)Food and Dining place.
>
> Basilcy my main problem is dash for this moment I don't know how to search
> for term which has a dash in it
>
>
>
> Thanks
>
>
>
> Simon Willnauer wrote:
> >
> > Hi John,
> >
> > what do you mean by encoding? If you can be more clear about what you
> > are looking for you might get help easily.
> >
> > simon
> > On Sat, Jun 27, 2009 at 12:27 AM, John Seer<pulsphoto@yahoo.com> wrote:
> >>
> >> Hello,
> >> Is there any class in lucene which will do encoding for term?
> >>
> >>
> >> Thanks
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Lucene-Term-Encoder-tp24228145p24228145.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Lucene-Term-Encoder-tp24228145p24258634.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e647622aa4dbc4046d810990--

From java-user-return-40986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 19:10:31 2009
Return-Path: <java-user-return-40986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1198 invoked from network); 29 Jun 2009 19:10:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 19:10:31 -0000
Received: (qmail 81018 invoked by uid 500); 29 Jun 2009 19:10:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80951 invoked by uid 500); 29 Jun 2009 19:10:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80941 invoked by uid 99); 29 Jun 2009 19:10:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 19:10:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.252.110.217] (HELO web56208.mail.re3.yahoo.com) (216.252.110.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jun 2009 19:10:28 +0000
Received: (qmail 46514 invoked by uid 60001); 29 Jun 2009 19:10:07 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1246302606; bh=9MesuJOMzGSmJ5U0Y+bNr/lvToxKDdSC+0+otcXdf/U=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=hO6d0ylsf6rwqtlEhRIv+Cf5RN4Dix7VEq7+Mgq3UUjI5YaG9BGJltTpJGj2jP70Yg4SeY3uJ0TmqIuB2fhV4qZiYOYPpCMs4p8t2/IpuX1ktGqrSYZZGmuvILmskLfgW/OdjG/9TEkntHCp1tSnPlwHAiKeRXPVBH8seOIAaPA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=Lq5D/EAT36XWq/MY+7dsKejRjds5DTnwSGpjrMfCGtC2xFTBnNTTGVz7CmaOAS59hQHRLJxUDUMkfh+tZUcX1lhUooPuJziIwUlGYM6Rlub4AJhFnS+9pyAUotilPGjDrHasLahTkaKzpKilc9eXPO56+qapjAUsurDQHqorbkw=;
Message-ID: <887519.41580.qm@web56208.mail.re3.yahoo.com>
X-YMail-OSG: RNwMu1MVM1nFJpd4lqXIElOEukRFJ5t.LRZDFBgJlF2h.6eIlvQCdUxBpQ3vUeKvIQSAYDn71Lp6FK3NPVPi2nWlRLRs3fCdT58Lyw2Bgx2a4IDshVe4HWfXubuxNSQMY9.jWlDoKEf8ptaRaAuYxuLYoapBhp30HhNoNynWe7GIN5aGr7guhQiePKynIavivOu.ZhbrEV4uUIzUMnUxKmMCGQOkACnK2Byu5i8XeX22X900oUMRWBHOVt3FE6MlXqY6QJsuJJ8rP6mi0ic3uHRL0wCbqABpbyhvMYbv
Received: from [82.99.216.85] by web56208.mail.re3.yahoo.com via HTTP; Mon, 29 Jun 2009 12:10:02 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Mon, 29 Jun 2009 12:10:02 -0700 (PDT)
From: Amir Hossein Jadidinejad <amir.jadidi@yahoo.com>
Subject: A simple Vector Space Model and TFIDF usage
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1738430257-1246302602=:41580"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1738430257-1246302602=:41580
Content-Type: text/plain; charset=us-ascii

Hi,
It's my first experiment with Lucene. Please help me.
I'm going to index a set of documents and create a feature vector for each of them. This vector contains all terms belong to the document that weight using TFIDF.
After that I want to compute the cosine similarity between all documents and produce a doc-doc similarity matrix. My document set is large and it's important to have a scalable implementation.
Would you please provide me a guideline or to-do list?
Thank you and kind regards.



      
--0-1738430257-1246302602=:41580--

From java-user-return-40987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 19:14:51 2009
Return-Path: <java-user-return-40987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2389 invoked from network); 29 Jun 2009 19:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 19:14:46 -0000
Received: (qmail 87379 invoked by uid 500); 29 Jun 2009 19:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87287 invoked by uid 500); 29 Jun 2009 19:14:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87277 invoked by uid 99); 29 Jun 2009 19:14:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 19:14:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.252.110.215] (HELO web56206.mail.re3.yahoo.com) (216.252.110.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jun 2009 19:14:45 +0000
Received: (qmail 24512 invoked by uid 60001); 29 Jun 2009 19:14:23 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1246302863; bh=4dev2OejzlJHu4zoQJqvG544iuBRJqRnqwRN+cRFENg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=p38hlEAcAoErfdfWoFEvWPVc5ntZZJAx9NlxNMuW1m8HGXh7Ez9uYFw3vMWwLu4z/5ON9YphhbGhwYlP88lPfOyV5LgdpKLbzwm4zwnZLcPLqAUHEFCC9k2FrSaphou7RZs5BndXojTbm2VDAzBofg0YB4HNIrKCYPk0XIIH0og=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=NYGFD0a7AFBgntQ9dpzqkBiDZXnpmmCHnM5vhHIo9b4G5WpnCofBhcU+JQozg2x/I1o63Nyxiy1DBWwdXKrLaq8rBUXas/TqOurjRiXAAHWNSx9QQ9+gYEwhXZntHKnE4eUCuLPjD3qrMwdF1K8PTE9pwpBL6BMX9vmeJlw0v6U=;
Message-ID: <790461.23823.qm@web56206.mail.re3.yahoo.com>
X-YMail-OSG: NDNBsyMVM1kUihLXxn8rx7nZEO5Tek1IUghWfQ4KWjQ0laMoVpjJ1TGBm5uA2lQNqfwBdyZwdb8jgf48enDCMYInl8HfQOctG2s0OnR736EeKX3wtcmq7eHI9ViNOrFX06Lr.Vc117qN0Nm2OdiFvAMG5zVgb5HFrQnn_FPQgq9tWeprpAwyGADjWixlRAJrV4T2oPLUng.iT3CTKE.OZIUrgb58XDx25pp.khkLwE5XAjACkFs2lAn.h8yHvJOV.xKEGjz8XL.ZFRK_AVwbbHOra4aFn2UDVnR9f8tr5YMeFJuZzlC8thSBnhJ0ZM5fvOma
Received: from [82.99.216.85] by web56206.mail.re3.yahoo.com via HTTP; Mon, 29 Jun 2009 12:14:23 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Mon, 29 Jun 2009 12:14:23 -0700 (PDT)
From: Amir Hossein Jadidinejad <amir.jadidi@yahoo.com>
Subject: Doc-Doc Similarity Matrix Construction
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-653590832-1246302863=:23823"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-653590832-1246302863=:23823
Content-Type: text/plain; charset=us-ascii

Hi,
It's my first experiment with Lucene. Please help me.
I'm
going to index a set of documents and create a feature vector for each
of them. This vector contains all terms belong to the document that
weight using TFIDF.
After that I want to compute the cosine similarity between all documents and produce a doc-doc similarity matrix. My document set is large and it's important to have a scalable implementation.
Would you please provide me a guideline or to-do list?
Thank you and kind regards.


      
--0-653590832-1246302863=:23823--

From java-user-return-40988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 19:23:11 2009
Return-Path: <java-user-return-40988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4313 invoked from network); 29 Jun 2009 19:23:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 19:23:11 -0000
Received: (qmail 98861 invoked by uid 500); 29 Jun 2009 19:23:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98814 invoked by uid 500); 29 Jun 2009 19:23:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98803 invoked by uid 99); 29 Jun 2009 19:23:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 19:23:17 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.184.52] (HELO smtp121.mail.ukl.yahoo.com) (77.238.184.52)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jun 2009 19:23:08 +0000
Received: (qmail 98334 invoked from network); 29 Jun 2009 19:22:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-Id:From:To:In-Reply-To:Content-Type:Content-Transfer-Encoding:Mime-Version:Subject:Date:References:X-Mailer;
  b=guaGg8CnIhGPHts+qKlNA4RXI6ub3L4OXxv44/QSm+SwH01DGdwSF+N6AAe67HMAgN279HBWP70jWQwmu2u/xbGApcbpnXXeGXFLiyG8MyetNuwIqczYcmzmAMN24Us2uE/ynw2AmR4cKeNHZyH3v/tg/WHabHi7U6XhWgQvMaw=  ;
Received: from unknown (HELO ?192.168.2.50?) (markharw00d@194.106.34.5 with plain)
  by smtp121.mail.ukl.yahoo.com with SMTP; 29 Jun 2009 19:22:44 -0000
X-Yahoo-SMTP: zTNABayswBADoI1EHkfx1KN3qDu5p6Ws
X-YMail-OSG: yAlSs1sVM1lltpeTyQeYoaqbA.LWG.7E8MMTNC2wPXVTqfMHsxcaNeB1t2lblZZFZidSyTBbZHCQ4mk4mclAEQS1Z9nCTjubf.G5N2TjoP6zAFK6_ZCUiO_XzKbCALbLDEhdnLm.3NhwZulGzQxVZ4AwMqz.OFrvFGHmWJeVQFd8ckf3Lp6f8ieVCJ6sIRyPwP0lLFMASIt6CBQJCaAo7nC2I.1qN9fvD70eQLRHeNjG53NEmml6ZtcTFliZPRUmKIwHWou16XXY0JF7KAem8Wepqr6mscH.w1G1LiaGeS2D86KauFQQqSO4nomruIovbUnB
X-Yahoo-Newman-Property: ymail-3
Message-Id: <86FBDE94-09AA-4FF3-B239-EAF906CC0E0D@yahoo.co.uk>
From: Mark Harwood <markharw00d@yahoo.co.uk>
To: java-user@lucene.apache.org
In-Reply-To: <790461.23823.qm@web56206.mail.re3.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Doc-Doc Similarity Matrix Construction
Date: Mon, 29 Jun 2009 20:22:43 +0100
References: <790461.23823.qm@web56206.mail.re3.yahoo.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

See MoreLikeThis in the contrib/queries folder. It optimizes the speed  
of similarity comparisons  by taking the most significant words only  
from a document as search terms.




On 29 Jun 2009, at 20:14, Amir Hossein Jadidinejad wrote:

> Hi,
> It's my first experiment with Lucene. Please help me.
> I'm
> going to index a set of documents and create a feature vector for each
> of them. This vector contains all terms belong to the document that
> weight using TFIDF.
> After that I want to compute the cosine similarity between all  
> documents and produce a doc-doc similarity matrix. My document set  
> is large and it's important to have a scalable implementation.
> Would you please provide me a guideline or to-do list?
> Thank you and kind regards.
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 29 20:26:42 2009
Return-Path: <java-user-return-40989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23134 invoked from network); 29 Jun 2009 20:26:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jun 2009 20:26:42 -0000
Received: (qmail 64528 invoked by uid 500); 29 Jun 2009 20:26:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64457 invoked by uid 500); 29 Jun 2009 20:26:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64447 invoked by uid 99); 29 Jun 2009 20:26:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jun 2009 20:26:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.252.110.216] (HELO web56207.mail.re3.yahoo.com) (216.252.110.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jun 2009 20:26:39 +0000
Received: (qmail 5690 invoked by uid 60001); 29 Jun 2009 20:26:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1246307176; bh=621ViUJ9X5vRxTD/To/0HU/ipaGPm6RVBcfn7i8bxgc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=mpIj8gSSFIklUHvq3/Tvp0FWFz2/Ck3tHZjrrN8Cjb7Bc14UVNkv1YE3GI/pQFkOZk87cT6xvS1mbrWoO43zUy056iNVuTKucHFTJVZbSNiVzOfxKCcwqKUFa82AYM16zxvSnfPNCpq/NcTRroD5ECjvCePlrhdaOud8vgpmlJk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=aB2ow8EuYKmdQG3Qj5mRE9t6hnSVo/JY5ny30TMTIWyINdViABW2Do4F6KJk/Oe7FY3eR7O7AdJd4aNEJi1CauRpxhRFRbXQjSLSSR3PBNYTOwB33cBTBN0bHfCBwwVuOiX2Zpm+RrROzwZXtcdzrpDzD4OW+QUWBVqecokHYn4=;
Message-ID: <474887.5663.qm@web56207.mail.re3.yahoo.com>
X-YMail-OSG: h3BzXNkVM1ksQN7iHCPJiFyooMGUYeJFUMdiL.Xqp7bONdJeh2P.OXAFlfl7j_7Z3RyxQ5xXIdx0Ar6tzo3lGAJaDhG0VuxkYzer2Ncbbmssvbq4f8CtqyQG7wMuRnNjfceLfISjL4BcT_NsmM2gEzcq5YB0nT86pwLq5MKlARkp7wV1.AK4mzPUYTJBEoenoB5hV_6lYRTn27yzTBFN8E8iXppxc6G3v7tS6YMW758q4JZobVXKmx1YN4XvQ1dawI5eKAplfOf9hOUugQlTIGDvOCeMdcJpRlrNvTqsyB_VAgBvaGFNfsW.t72MPn7NnTYSWWqfspO3rFZ1QA--
Received: from [82.99.216.47] by web56207.mail.re3.yahoo.com via HTTP; Mon, 29 Jun 2009 13:26:16 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Mon, 29 Jun 2009 13:26:16 -0700 (PDT)
From: Amir Hossein Jadidinejad <amir.jadidi@yahoo.com>
Subject: Re: Doc-Doc Similarity Matrix Construction
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-388220803-1246307176=:5663"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-388220803-1246307176=:5663
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

It's exactly my question: http://www.mail-archive.com/lucene-user@jakarta.a=
pache.org/msg04915.html

--- On Mon, 6/29/09, Amir Hossein Jadidinejad <amir.jadidi@yahoo.com> wrote=
:

From: Amir Hossein Jadidinejad <amir.jadidi@yahoo.com>
Subject: Doc-Doc Similarity Matrix Construction
To: java-user@lucene.apache.org
Date: Monday, June 29, 2009, 3:14 PM

Hi,
It's my first experiment with Lucene. Please help me.
I'm
going to index a set of documents and create a feature vector for each
of them. This vector contains all terms belong to the document that
weight using TFIDF.
After that I want to compute the cosine similarity between all documents an=
d produce a doc-doc similarity matrix. My document set is large and it's im=
portant to have a scalable implementation.
Would you please provide me a guideline or to-do list?
Thank you and kind regards.


=A0 =A0 =A0 =0A=0A=0A      
--0-388220803-1246307176=:5663--

From java-user-return-40990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 05:22:24 2009
Return-Path: <java-user-return-40990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7184 invoked from network); 30 Jun 2009 05:22:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 05:22:24 -0000
Received: (qmail 69166 invoked by uid 500); 30 Jun 2009 05:22:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69084 invoked by uid 500); 30 Jun 2009 05:22:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69072 invoked by uid 99); 30 Jun 2009 05:22:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 05:22:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 05:22:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLVn7-00030R-JK
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 22:22:01 -0700
Message-ID: <24266289.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 22:22:01 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read large size index
In-Reply-To: <f18c9dde0906290946u52359f16o9c9e9913961bf693@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906290357s7309e2d9p27822b17bef3dde0@mail.gmail.com> <24252732.post@talk.nabble.com> <f18c9dde0906290515w7365d81ajf1f33d17ec24f21e@mail.gmail.com> <24253338.post@talk.nabble.com> <f18c9dde0906290544la83384kf7d00158c08c053e@mail.gmail.com> <24253583.post@talk.nabble.com> <f18c9dde0906290558k2f8ecb0dnfc8b71c1bb6898bc@mail.gmail.com> <24253760.post@talk.nabble.com> <f18c9dde0906290616r7fc957bfm1f657cd8fa8cc7b0@mail.gmail.com> <24254191.post@talk.nabble.com> <f18c9dde0906290653h23686aa4g536e507acf5ef674@mail.gmail.com> <24257547.post@talk.nabble.com> <f18c9dde0906290946u52359f16o9c9e9913961bf693@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks SImon ,

Example:

  IndexReader open = IndexReader.open("/tmp/testindex/");
    IndexSearcher searcher = new IndexSearcher(open);
    final String fName = "test";

is fName a field like summary , contents??

    TopDocs topDocs = searcher.search(new TermQuery(new Term(fName,
"lucene")),
        Integer.MAX_VALUE);
am getting an error that search(Query,Filter) method not applicable for
search(TermQuery,int)

    FieldSelector selector = new FieldSelector() {
      public FieldSelectorResult accept(String fieldName) {
        return fieldName == fName ? FieldSelectorResult.LOAD
            : FieldSelectorResult.NO_LOAD;
      }

    };

    final int totalHits = topDocs.totalHits;
    ScoreDoc[] scoreDocs = topDocs.scoreDocs;
    for (int i = 0; i < totalHits; i++) {
      Document doc = searcher.doc(scoreDocs[i].doc, selector);
    }


could you please explain the code , please
-- 
View this message in context: http://www.nabble.com/Read-large-size-index-tp24251993p24266289.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 06:01:49 2009
Return-Path: <java-user-return-40991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26052 invoked from network); 30 Jun 2009 06:01:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 06:01:49 -0000
Received: (qmail 89483 invoked by uid 500); 30 Jun 2009 06:01:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89399 invoked by uid 500); 30 Jun 2009 06:01:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89388 invoked by uid 99); 30 Jun 2009 06:01:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 06:01:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 06:01:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLWPG-0004FA-RM
	for java-user@lucene.apache.org; Mon, 29 Jun 2009 23:01:26 -0700
Message-ID: <24266553.post@talk.nabble.com>
Date: Mon, 29 Jun 2009 23:01:26 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: optimized searching
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hello all,

       i've gone through most of the posts from this forum , i need a code
snippet for searching large index,  currently am iterating ,

       hits = searher.search(query);
      for (int inc = 0; inc < hits.length(); inc++) {

			Document doc = hits.doc(inc);

			String title = doc.get("title");

        ///    etc.......
        }


its not good by the way when you use large index. am running it from tomcat
6 .0 ,  java heap space is 256 MB , 
please any1 help me



-- 
View this message in context: http://www.nabble.com/optimized-searching-tp24266553p24266553.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 07:37:35 2009
Return-Path: <java-user-return-40992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60957 invoked from network); 30 Jun 2009 07:37:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 07:37:35 -0000
Received: (qmail 72227 invoked by uid 500); 30 Jun 2009 07:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72156 invoked by uid 500); 30 Jun 2009 07:37:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72146 invoked by uid 99); 30 Jun 2009 07:37:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 07:37:42 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.127] (HELO smtp144.mail.mud.yahoo.com) (209.191.107.127)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Jun 2009 07:37:31 +0000
Received: (qmail 58999 invoked from network); 30 Jun 2009 07:37:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=QUmM5/zZ5wQIHQsd5hOVcR4//UjQ7lMcgAKO/AH8WI3SnSBJ4K0CVjhuRYsTIhNtcd3951tUD6ePjHAJ8crx1N2PkTK/1iQfpdAuZjKdKVSYVXbMXdCb7NEkpr1gP7zaBtnw6m3DXXf5myivpU+sEdoGGeThqsgUqbfr08ebKEo=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp144.mail.mud.yahoo.com with SMTP; 30 Jun 2009 07:37:09 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: YdLXS20VM1lbbE8bJI02Gbe.y.PbsFDBBZmegauHrlnTlkrmPS5.YREtywQcg1RMure_4UAfRj1RZ1ZlTNRap8MW.Eqx5EQvoGNkzh7qAscrw8t_OEl8UgTSj_eE83JeLnVKfCYkfWOb_OtWgHBOPL0tLVlKYM8VTiGDRbTCL.Owpc6wwQprlznGHmBlNkEcF63FK10xz1DpVgD.Lv72WTe7xwS9dJ89z23zjS2vOdn4C1zDYbxH0Zz903krhHVGr2VK3VqxcuTrBYeT6w--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <227e01c9f955$93544680$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Term Frequency vector consumes memory
Date: Tue, 30 Jun 2009 13:07:06 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

At the end of the day, I used to build the stats of top indexed terms. I =
enabled term frequency for the single field. It is working fine. I could =
able to get the top terms and its frequencies. It consumes huge amount =
of RAM. My index size is 5 GB and has 8 million records. If i didn't =
enable term vector then i could do index up to 17 GB with 40 million =
records.  =20

When IndexReader/ Searcher is opened, whether it will load all term =
vector frequncies?=20

Consider i have enabled this option and indexed say 5GB, Now i don't =
want the Reader / Searcher to load term vector. I want to switch off =
this feature? Is that possible without re-indexing?

Regards
Ganesh
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 08:49:35 2009
Return-Path: <java-user-return-40993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75816 invoked from network); 30 Jun 2009 08:49:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 08:49:34 -0000
Received: (qmail 36458 invoked by uid 500); 30 Jun 2009 08:49:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36399 invoked by uid 500); 30 Jun 2009 08:49:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36389 invoked by uid 99); 30 Jun 2009 08:49:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 08:49:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 08:49:35 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.375.2; Tue, 30 Jun 2009 10:49:13 +0200
Subject: Re: Scaling out/up or a mix
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
	 <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
	 <4A4864E7.3070609@boboco.ie>
	 <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Tue, 30 Jun 2009 10:49:12 +0200
Message-ID: <1246351752.3464.18.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2009-06-29 at 09:47 +0200, Marcus Herou wrote: 
> Index size(and growing): 16Gx8 = 128G
> Doc size (data): 20k
> Num docs: 90M
> Num users: Few hundred but most critical is that the admin staff which is
> using the index all day long.
> Query types: Example: title:"Iphone" OR description:"Iphone" sorted by
> publishedDate... = Very simple, no fuzzy searches etc. However since the
> dataset is large it will consume memory on sorting I guess.
> 
> Could not one draw any conclusions about best-practice in terms of hardware
> given the above "specs" ?

Can you give us an estimate of the number of concurrent searches in
prime time and in what range a satisfactory response time would be?

Going for a fully RAM-based search on a corpus of this size would mean
that each machine holds about 30GB of index (taken from your hardware
suggestion). I would expect that such a machine would be able to serve
something like 500-1000 searches/second (highly dependent on the index
and the searches, but what you're describing sounds simple enough) if we
just measure the raw search time and lookup of one or two fields for the
first 20 hits. It that what you're aiming for?

Wrapping in web services and such lowers the number of searches that can
be performed, which makes the RAM-option even more expensive relative to
a harddisk or SSD solution.

> I mean it is very simple: Let's say someone gives me a budget of 50 000 USD
> and I then want to get the most bang for the buck for my workload.

I am a bit unclear on your overall goal. Do you expect the number of
users to grow significantly?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 09:02:53 2009
Return-Path: <java-user-return-40994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78869 invoked from network); 30 Jun 2009 09:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 09:02:53 -0000
Received: (qmail 50935 invoked by uid 500); 30 Jun 2009 09:03:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50874 invoked by uid 500); 30 Jun 2009 09:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50864 invoked by uid 99); 30 Jun 2009 09:03:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 09:03:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 09:02:51 +0000
Received: by fg-out-1718.google.com with SMTP id l26so1242787fgb.4
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 02:02:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Bp641gcVeO78R5P8xGE3rSszTr7Zq7cwyG/EwYyNTaY=;
        b=CRrjn62VE4v2sgNCuZKQvZT6ahyX3BQlXYKnplUIvvqNxLLTyxgLBSp8T8Q5Ny1DD8
         /H6eC3vv9kCkWKnlj2pNzaGPLN8Af8EjanVAcC7i5P6s0tG3Fwly05A5UBxziE81jXw2
         mZBxyEef95G1PwbrTcWHNioeYVMDeVt/9bK+4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=DhJlIX4aZlpCKCJ6VHlCiYSRXJdrSIHXAuiGexGxXe7B+kvXCmddZFxQM7CufvoPcD
         XTXs0NxFNGl62Mkkjk2OBgLFSGLMpQ1YGzPX1VyWyynKnWZvWTVQuwGGFuZr15jbjenl
         HOtr+NCWXIVM4k1G+zqHtVRKV3eep1lwXCaO4=
MIME-Version: 1.0
Received: by 10.86.81.16 with SMTP id e16mr2500460fgb.78.1246352551188; Tue, 
	30 Jun 2009 02:02:31 -0700 (PDT)
In-Reply-To: <24266553.post@talk.nabble.com>
References: <24266553.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 30 Jun 2009 10:02:11 +0100
Message-ID: <8c4e68610906300202k2b9eed87kd8b4812749a1a59f@mail.gmail.com>
Subject: Re: optimized searching
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

What exactly is the problem?  Are you concerned about the time that
your code snippet takes to run, or how much memory it uses?

If you have a query that matches many documents then iterating through
all of them, as your code does, is inevitably going to take time.  See
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed for
suggestions.

It is unclear why your code snippet would use a lot of memory.  Are
you maybe storing all the titles in memory?


--
Ian.



On Tue, Jun 30, 2009 at 7:01 AM, m.harig<m.harig@gmail.com> wrote:
>
> hello all,
>
> =A0 =A0 =A0 i've gone through most of the posts from this forum , i need =
a code
> snippet for searching large index, =A0currently am iterating ,
>
> =A0 =A0 =A0 hits =3D searher.search(query);
> =A0 =A0 =A0for (int inc =3D 0; inc < hits.length(); inc++) {
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D hits.doc(=
inc);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0String title =3D doc.get("=
title");
>
> =A0 =A0 =A0 =A0/// =A0 =A0etc.......
> =A0 =A0 =A0 =A0}
>
>
> its not good by the way when you use large index. am running it from tomc=
at
> 6 .0 , =A0java heap space is 256 MB ,
> please any1 help me
>
>
>
> --
> View this message in context: http://www.nabble.com/optimized-searching-t=
p24266553p24266553.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 09:19:31 2009
Return-Path: <java-user-return-40995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84564 invoked from network); 30 Jun 2009 09:19:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 09:19:31 -0000
Received: (qmail 74219 invoked by uid 500); 30 Jun 2009 09:19:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74180 invoked by uid 500); 30 Jun 2009 09:19:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74170 invoked by uid 99); 30 Jun 2009 09:19:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 09:19:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 09:19:28 +0000
Received: by an-out-0708.google.com with SMTP id d11so952865and.5
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 02:19:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=4eTarqpNDQZNiBtXPpvwByfNnepX+DXtgue4t3QkhFg=;
        b=Be3GCWTPgn1sw6aWTK5K4yePWqhjk2Qje/5tVY9jt2nQcae01+ab/d0DxDYAfqo0ac
         ehXatVB78J1XjbmRhUbvdbZdQnWK+G1ZY6Ex8vO6ipjsZ7G753dQFuNyFFxTURuIHO09
         +pAh/U3yT2Owm7SCp0Lg98FSCSI1fDDjGW0DM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=ibE9odJHDDiRB86P76gE7/2imeO4geTDtARCWsAUEd3c/p51OmV/h+NmtO0YyVdb3p
         1Jp4SnoQFAtkYLSYx3RKJQj+s8XmyH0da7G/Wv9HlnM4E19vO5HOZdH5Jp4VHxefx0k5
         yjcE0Adm3540HA9jrDaU2O1cc9wPjtQMdgglg=
MIME-Version: 1.0
Received: by 10.100.226.6 with SMTP id y6mr6523248ang.104.1246353547490; Tue, 
	30 Jun 2009 02:19:07 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <32774052.2466751246351296697.JavaMail.nabble@isper.nabble.com>
References: <32774052.2466751246351296697.JavaMail.nabble@isper.nabble.com>
Date: Tue, 30 Jun 2009 11:19:07 +0200
Message-ID: <f18c9dde0906300219mf7852e5x66bc71917b12fb23@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Cc: m.harig@gmail.com
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
X-Virus-Checked: Checked by ClamAV on apache.org

SGV5IHRoZXJlLAoKT24gVHVlLCBKdW4gMzAsIDIwMDkgYXQgMTA6NDEgQU0sIDxtLmhhcmlnQGdt
YWlsLmNvbT4gd3JvdGU6Cj4gVGhhbmtzIFNpbW9uCj4KPiDCoHRoaXMgaXMgbXkgY29kZSAsIGJ1
dCBhbSBnZXR0aW5nIG51bGwgLAo+Cj4gSW5kZXhSZWFkZXIgb3BlbiA9IEluZGV4UmVhZGVyLm9w
ZW4oaW5kZXhEaXIpOwo+Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqBJbmRleFNlYXJjaGVyIHNl
YXJjaGVyID0gbmV3IEluZGV4U2VhcmNoZXIob3Blbik7Cj4KPiDCoCDCoCDCoCDCoCDCoCDCoCDC
oCDCoGZpbmFsIFN0cmluZyBmTmFtZSA9ICJjb250ZW50cyI7Cj4KPiDCoCDCoCDCoCDCoCDCoCDC
oCDCoCDCoFF1ZXJ5UGFyc2VyIHBhcnNlciA9IG5ldyBRdWVyeVBhcnNlcihmTmFtZSwgbmV3IFN0
b3BBbmFseXplcigpKTsKPiDCoCDCoCDCoCDCoCDCoCDCoFF1ZXJ5IHF1ZXJ5ID0gcGFyc2VyLnBh
cnNlKHFyeVN0cik7Cj4Kc29ycnkgSSB3YXMgdXNlZCB0byAyLjQgc2VhcmNoZXIgd2hpY2ggaGFz
IGFuIG92ZXJsb2FkZWQgbWV0aG9kCndpdGhvdXQgYSBmaWx0ZXIuCj4gwqAgwqAgwqAgwqAgwqAg
wqAgwqAgwqBUb3BEb2NzIHRvcERvY3MgPSBzZWFyY2hlci5zZWFyY2gocXVlcnksIChGaWx0ZXIp
IG51bGwsCj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqA1
MDApOy8vIGFtIGdldHRpbmcgbmVnYXRpdmUgYXJyYXkgZXhjZXB0aW9uIGlmIGkgdXNlIEludGVn
ZXIuTUFYX1ZBTFVFOwo+IC8vClNyeSB0aGF0IHdhcyBteSBmYXVsdCEgSSBkaWQgbm90IGV4ZWN1
dGUgdGhlIGNvZGUgYXQgYWxsLiAgOikKPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgRmllbGRT
ZWxlY3RvciBzZWxlY3RvciA9IG5ldyBGaWVsZFNlbGVjdG9yKCkgewo+IMKgIMKgIMKgIMKgIMKg
IMKgIMKgIMKgIMKgIMKgIMKgIMKgcHVibGljIEZpZWxkU2VsZWN0b3JSZXN1bHQgYWNjZXB0KFN0
cmluZyBmaWVsZE5hbWUpIHsKPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDC
oCDCoCDCoCDCoHJldHVybiBmaWVsZE5hbWUgPT0gZk5hbWUgPyBGaWVsZFNlbGVjdG9yUmVzdWx0
LkxPQUQKPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDC
oCDCoCDCoCDCoCDCoCDCoCDCoCDCoDogRmllbGRTZWxlY3RvclJlc3VsdC5OT19MT0FEOwo+IMKg
IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgfQo+Cj4gwqAgwqAgwqAgwqAgwqAgwqAg
wqAgwqB9OwpXaGlsZSBjb21wYXJpbmcgc3RyaW5ncyB3aXRoID09IGlzIGJhZCBwcmFjdGljZSAo
bXkgZmF1bHQgYWdhaW4pIHRoaXMKY29kZSBvbmx5IGxvYWRzIHRoZSBmaWVsZCBmbmFtZSAvICJj
b250ZW50cyIgYW55IG90aGVyIGZpZWxkIGlzIG5vdApsb2FkZWQgYXQgYWxsLiB5b3UgaGF2ZSB0
byBtb2RpZnkgdGhlIHNlbGVjdG9yIGNvZGUgdG8geW91ciBuZWVkcywKbWVhbmluZyB0aGF0IHlv
dSByZXR1cm4gTE9BRCBvciBMQVpZIG9yIHdoYXRldmVyIGZvciBhbGwgZmllbGRzIHlvdQpuZWVk
IHdoZW4gZGlzcGxheWluZyB0aGUgcmVzdWx0cy4KPgo+Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAg
wqBpbnQgdG90YWxIaXRzID0gdG9wRG9jcy50b3RhbEhpdHM7Cj4gwqAgwqAgwqAgwqAgwqAgwqAg
wqAgwqBTY29yZURvY1tdIHNjb3JlRG9jcyA9IHRvcERvY3Muc2NvcmVEb2NzOwo+Cj4gwqAgwqAg
wqAgwqAgwqAgwqAgwqAgwqBTeXN0ZW0ub3V0LnByaW50bG4odG90YWxIaXRzKTsKPgo+IMKgIMKg
IMKgIMKgIMKgIMKgIMKgIMKgZm9yIChpbnQgaSA9IDA7IGkgPCB0b3RhbEhpdHM7IGkrKykgewo+
IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgRG9jdW1lbnQgZG9jID0gb3Blbi5k
b2N1bWVudChpLHNlbGVjdG9yKTsvL3NlYXJjaGVyLmRvYyhzY29yZURvY3NbaV0uZG9jLCBzZWxl
Y3Rvcik7Cj4KPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoFN5c3RlbS5vdXQu
cHJpbnRsbihkb2MuZ2V0KCJwYXRoIikpOy8vLyBhbSBnZXR0aW5nIG51bGwgaGVyZQpUaGlzIHdo
b2xlIGNvZGUgbG9hZHMgb25seSB0aGUgZmllbGQgY2FsbGVkICJjb250ZW50IiBpZiB5b3Ugbm93
CnJlcXVlc3QgZmllbGQgInBhdGgiIHlvdSBnZXQgbnVsbCBhcyBpdCBpcyBub3QgbG9hZGVkLgoK
c2ltb24KPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgfQo+Cj4K


From java-user-return-40996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 09:30:11 2009
Return-Path: <java-user-return-40996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90113 invoked from network); 30 Jun 2009 09:30:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 09:30:10 -0000
Received: (qmail 87778 invoked by uid 500); 30 Jun 2009 09:30:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87730 invoked by uid 500); 30 Jun 2009 09:30:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87720 invoked by uid 99); 30 Jun 2009 09:30:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 09:30:19 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 09:30:09 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 2782C45EB2E;
	Tue, 30 Jun 2009 11:29:47 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SY-x03H6BjYE; Tue, 30 Jun 2009 11:29:47 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id AA17E45EB2C;
	Tue, 30 Jun 2009 11:29:46 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<te@statsbiblioteket.dk>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com> <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com> <4A4864E7.3070609@boboco.ie> <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com> <1246351752.3464.18.camel@pc286>
Subject: RE: Scaling out/up or a mix
Date: Tue, 30 Jun 2009 11:29:45 +0200
Message-ID: <F7AC8300C6054A15B5B63BC66F17763F@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acn5X8Dh7SOFIlB8Qmuz7jWm93RXzgABYh1A
In-Reply-To: <1246351752.3464.18.camel@pc286>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

> On Mon, 2009-06-29 at 09:47 +0200, Marcus Herou wrote:
> > Index size(and growing): 16Gx8 = 128G
> > Doc size (data): 20k
> > Num docs: 90M
> > Num users: Few hundred but most critical is that the admin staff which
> is
> > using the index all day long.
> > Query types: Example: title:"Iphone" OR description:"Iphone" sorted by
> > publishedDate... = Very simple, no fuzzy searches etc. However since the
> > dataset is large it will consume memory on sorting I guess.
> >
> > Could not one draw any conclusions about best-practice in terms of
> hardware
> > given the above "specs" ?
> 
> Can you give us an estimate of the number of concurrent searches in
> prime time and in what range a satisfactory response time would be?
> 
> Going for a fully RAM-based search on a corpus of this size would mean
> that each machine holds about 30GB of index (taken from your hardware
> suggestion). I would expect that such a machine would be able to serve
> something like 500-1000 searches/second (highly dependent on the index
> and the searches, but what you're describing sounds simple enough) if we
> just measure the raw search time and lookup of one or two fields for the
> first 20 hits. It that what you're aiming for?
> 
> Wrapping in web services and such lowers the number of searches that can
> be performed, which makes the RAM-option even more expensive relative to
> a harddisk or SSD solution.

I would never say: "I copy an index into a RAMDirectory or something like
that". I would buy enough RAM to fit as most as possible into RAM and (as we
for sure are on a 64bit platform) use MMapDirectory instead of
SimpleFSDirectory or NIOFSDirectory (I am talking with Lucene 2.9 class
names, where FSDirs can be simply instantiated, as you may have noticed).
MMapDirectory uses the index like a swap file that is mapped into address
space. The OS kernel's will then use the index like RAM and map it into real
RAM as needed. We had the discussion a lot of times in this mailing list
(search for MMapDirectory in the archives). So the simple answer is always:
If 64 bit platform with lots of RAM, use MMapDirectory. On Windows this is
still buggy (but with 2.9 there is a workaround in MMapDirectory). When you
warm your searchers before (I think you will do...), the Operating system
kernel will "swap" in as much as possible from the index.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 09:52:02 2009
Return-Path: <java-user-return-40997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4276 invoked from network); 30 Jun 2009 09:52:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 09:52:02 -0000
Received: (qmail 13654 invoked by uid 500); 30 Jun 2009 09:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13586 invoked by uid 500); 30 Jun 2009 09:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13576 invoked by uid 99); 30 Jun 2009 09:52:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 09:52:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 09:52:02 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.375.2; Tue, 30 Jun 2009 11:51:40 +0200
Subject: RE: Scaling out/up or a mix
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: Uwe Schindler <uschindler@pangaea.de>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <2AA74AED54C84D71A9BD9AA043A911EF@VEGA>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
	 <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
	 <4A4864E7.3070609@boboco.ie>
	 <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
	 <1246351752.3464.18.camel@pc286>  <2AA74AED54C84D71A9BD9AA043A911EF@VEGA>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Tue, 30 Jun 2009 11:51:40 +0200
Message-ID: <1246355500.7977.946.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2009-06-30 at 11:29 +0200, Uwe Schindler wrote:
> So the simple answer is always:
> If 64 bit platform with lots of RAM, use MMapDirectory.

Fair enough. That makes the RAM-focused solution much more scalable.
My point still stands though, as Marcus is currently examining his
hardware options and a lot of RAM is not a given: When we don't know the
performance goal, it is hard to balance a machine.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 10:12:11 2009
Return-Path: <java-user-return-40998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14315 invoked from network); 30 Jun 2009 10:12:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 10:12:11 -0000
Received: (qmail 44483 invoked by uid 500); 30 Jun 2009 10:12:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44419 invoked by uid 500); 30 Jun 2009 10:12:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 86670 invoked by uid 99); 30 Jun 2009 09:29:53 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
From: "Uwe Schindler" <uschindler@pangaea.de>
To: <java-user@lucene.apache.org>,
	<te@statsbiblioteket.dk>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com> <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com> <4A4864E7.3070609@boboco.ie> <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com> <1246351752.3464.18.camel@pc286>
Subject: RE: Scaling out/up or a mix
Date: Tue, 30 Jun 2009 11:29:09 +0200
Message-ID: <2AA74AED54C84D71A9BD9AA043A911EF@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acn5X8Dh7SOFIlB8Qmuz7jWm93RXzgABJG5w
In-Reply-To: <1246351752.3464.18.camel@pc286>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

> On Mon, 2009-06-29 at 09:47 +0200, Marcus Herou wrote:
> > Index size(and growing): 16Gx8 = 128G
> > Doc size (data): 20k
> > Num docs: 90M
> > Num users: Few hundred but most critical is that the admin staff which
> is
> > using the index all day long.
> > Query types: Example: title:"Iphone" OR description:"Iphone" sorted by
> > publishedDate... = Very simple, no fuzzy searches etc. However since the
> > dataset is large it will consume memory on sorting I guess.
> >
> > Could not one draw any conclusions about best-practice in terms of
> hardware
> > given the above "specs" ?
> 
> Can you give us an estimate of the number of concurrent searches in
> prime time and in what range a satisfactory response time would be?
> 
> Going for a fully RAM-based search on a corpus of this size would mean
> that each machine holds about 30GB of index (taken from your hardware
> suggestion). I would expect that such a machine would be able to serve
> something like 500-1000 searches/second (highly dependent on the index
> and the searches, but what you're describing sounds simple enough) if we
> just measure the raw search time and lookup of one or two fields for the
> first 20 hits. It that what you're aiming for?
> 
> Wrapping in web services and such lowers the number of searches that can
> be performed, which makes the RAM-option even more expensive relative to
> a harddisk or SSD solution.

I would never say: "I copy an index into a RAMDirectory or something like
that". I would buy enough RAM to fit as most as possible into RAM and (as we
for sure are on a 64bit platform) use MMapDirectory instead of
SimpleFSDirectory or NIOFSDirectory (I am talking with Lucene 2.9 class
names, where FSDirs can be simply instantiated, as you may have noticed).
MMapDirectory uses the index like a swap file that is mapped into address
space. The OS kernel's will then use the index like RAM and map it into real
RAM as needed. We had the discussion a lot of times in this mailing list
(search for MMapDirectory in the archives). So the simple answer is always:
If 64 bit platform with lots of RAM, use MMapDirectory. On Windows this is
still buggy (but with 2.9 there is a workaround in MMapDirectory). When you
warm your searchers before (I think you will do...), the Operating system
kernel will "swap" in as much as possible from the index.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-40999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 10:41:29 2009
Return-Path: <java-user-return-40999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27234 invoked from network); 30 Jun 2009 10:41:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 10:41:29 -0000
Received: (qmail 87009 invoked by uid 500); 30 Jun 2009 10:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86940 invoked by uid 500); 30 Jun 2009 10:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86930 invoked by uid 99); 30 Jun 2009 10:41:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 10:41:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 10:41:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLalw-0006vP-8H
	for java-user@lucene.apache.org; Tue, 30 Jun 2009 03:41:08 -0700
Message-ID: <24269693.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 03:41:08 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read large size index
In-Reply-To: <f18c9dde0906300219mf7852e5x66bc71917b12fb23@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906300219mf7852e5x66bc71917b12fb23@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Simon , 

          Its working now , thanks a lot , i've a doubt

       i've got 30,000 pdf files indexed ,  but if i use the code which you
sent , returns only 200 results , because am setting   TopDocs topDocs =
searcher.search(query,200);  as i said if use Integer.MAX_VALUE , it returns
java heap space error , even i can't use 300 , 

    here is my code


               IndexReader open = IndexReader.open(indexDir);

		IndexSearcher searcher = new IndexSearcher(open);

		final String fName = "contents";

		QueryParser parser = new QueryParser(fName, new StopAnalyzer());
		Query query = parser.parse(qryStr);

		TopDocs topDocs = searcher.search(query,200);

		FieldSelector selector = new FieldSelector() {
			public FieldSelectorResult accept(String fieldName) {
				return fieldName == fName ? FieldSelectorResult.LOAD
						: FieldSelectorResult.LAZY_LOAD;
			}
			

		};

		final int totalHits = topDocs.totalHits;
		ScoreDoc[] scoreDocs = topDocs.scoreDocs;
		
		for (int i = 0; i < totalHits; i++) {
			Document doc = searcher.doc(scoreDocs[i].doc, selector);

			System.out.println(doc.get("title"));
			System.out.println(doc.get("path"));

		}

		

		searcher.close();


---------------- can you please clear my doubt
-- 
View this message in context: http://www.nabble.com/Read-large-size-index-tp24251993p24269693.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 10:53:12 2009
Return-Path: <java-user-return-41000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29743 invoked from network); 30 Jun 2009 10:53:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 10:53:12 -0000
Received: (qmail 97983 invoked by uid 500); 30 Jun 2009 10:53:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97923 invoked by uid 500); 30 Jun 2009 10:53:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97913 invoked by uid 99); 30 Jun 2009 10:53:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 10:53:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 10:53:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLaxG-0007Jn-TP
	for java-user@lucene.apache.org; Tue, 30 Jun 2009 03:52:50 -0700
Message-ID: <24269846.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 03:52:50 -0700 (PDT)
From: Rads2029 <radha84@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying score based on tf and slop
In-Reply-To: <f18c9dde0905061213u2eaf522ak8dda90713343052d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: radha84@gmail.com
References: <45e5f8bb0905061044i303923aew631e1515254fe936@mail.gmail.com> <f18c9dde0905061213u2eaf522ak8dda90713343052d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Restarting this thread.=20
I did try out the soln mentioned by Simon below, however that did not work.
As changing the tf implementation to return 1, adversely affected by span
scoring . ie, the slop distance does not affect score if i make tf as 1.=20

I had found a work around in some other way, but that has a hole. I really
have no way other than to find a solution for this. :(

To summarize, how to make sure tf does not affect the scoring but the span
should still affect the scoring?=20




Simon Willnauer wrote:
>=20
> Hey,
> If I get you right you wanna make tf not affecting the score at all.
> if so why don't you just return 1.0f by overriding similarity?
> If you just wanna do that for the query you are using you could
> override Query#getSimilarity and return a delegate to the actual
> similarity.
>=20
> Hope that helps.
>=20
> simon
>=20
> On Wed, May 6, 2009 at 7:44 PM, Radha Sreedharan <radha84@gmail.com>
> wrote:
>> Hi all,
>>
>> All I have is a query running on a document with a single field which
>> has some search value. This is all which will be present.
>> No more documents / fields.
>>
>> I have the following specific requirements
>>
>> 1) Length of document should not affect score - Implemented as per
>> lucene documentation using concept of Fair Similairty by making
>> lengthnorm as 1
>>
>> 2) The no of times a term in the query =C2=A0occurs in the search field
>> should not affect the score
>>
>> 3) I am using the spannearquery. Hence the slop should affect the score.
>>
>>
>> I implemented 2) by changing the tf to return 1 if freq >0 .
>>
>> But this adversely affects =C2=A03) as the slop value is factored into t=
he
>> tf ( as per what I can see in the span scorer)
>>
>>
>> How can I ensure the frequency of a certain term does not affect the
>> score while at the same ensuring that the slop does affect it ?
>>
>>
>> Thanks,
>> Radha
>>
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Modifying-score-based-o=
n-tf-and-slop-tp23412168p24269846.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 11:51:03 2009
Return-Path: <java-user-return-41001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50762 invoked from network); 30 Jun 2009 11:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 11:51:03 -0000
Received: (qmail 69308 invoked by uid 500); 30 Jun 2009 11:51:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69264 invoked by uid 500); 30 Jun 2009 11:51:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69254 invoked by uid 99); 30 Jun 2009 11:51:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 11:51:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.212.184 as permitted sender)
Received: from [209.85.212.184] (HELO mail-vw0-f184.google.com) (209.85.212.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 11:51:02 +0000
Received: by vwj14 with SMTP id 14so30543vwj.29
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 04:50:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=SpYuKefwAwUE2YPX10O9JIm/QfwMBL9tdM4gyR3QPrY=;
        b=KWzXjqxzrjwMsXr3HiwYTCQT5Ze5/6lrHyLyujXVrEZsv3/jetfF151nEv6n+zymb+
         UHuXCFinEwSVQZSYRrqJfOJ6MFXezwmxswrgmLBaC0YCW2CRDGgWO6GH5VkETldBtEA+
         XT2JS1vEG1nhkT/yyelKIzSst1S9/6XNb6amo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YfSrZGol2xGb8USP9PzcC3kpwQD3Ngx9pAJaoMm8pC40SDnIefziSCgTqDqHk73Hif
         l6M3dL6Xy1M+A05j3BSvIdbUQlzGZ4toiWS38uISs10U56BWIdhWj0cZapsn3UivIWLY
         TK3RaKT5h1wDpNCdtPVWxCFD8qCtKVzISEAuo=
MIME-Version: 1.0
Received: by 10.220.100.16 with SMTP id w16mr6261240vcn.110.1246362641210; 
	Tue, 30 Jun 2009 04:50:41 -0700 (PDT)
In-Reply-To: <8c4e68610906300202k2b9eed87kd8b4812749a1a59f@mail.gmail.com>
References: <24266553.post@talk.nabble.com>
	 <8c4e68610906300202k2b9eed87kd8b4812749a1a59f@mail.gmail.com>
Date: Tue, 30 Jun 2009 07:50:41 -0400
Message-ID: <359a92830906300450q42b7b475hf67997476c4efdba@mail.gmail.com>
Subject: Re: optimized searching
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64715d47d9e66046d8f6a68
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64715d47d9e66046d8f6a68
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

in Ian's link, particularly see the section "Don't iterate over morehits
than necessary".

A couple of other things:
1> Loading the entire document just to get a field or two isn't
     very efficient, think about lazy loading (See FieldSelector)
2> What do you mean when you say "not very good"? Using too
      much memory? Slow?

Perhaps if you gave us a higher level idea of what you're trying to
accomplish we could make better suggestions.

Best
Erick

On Tue, Jun 30, 2009 at 5:02 AM, Ian Lea <ian.lea@gmail.com> wrote:

> What exactly is the problem?  Are you concerned about the time that
> your code snippet takes to run, or how much memory it uses?
>
> If you have a query that matches many documents then iterating through
> all of them, as your code does, is inevitably going to take time.  See
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed for
> suggestions.
>
> It is unclear why your code snippet would use a lot of memory.  Are
> you maybe storing all the titles in memory?
>
>
> --
> Ian.
>
>
>
> On Tue, Jun 30, 2009 at 7:01 AM, m.harig<m.harig@gmail.com> wrote:
> >
> > hello all,
> >
> >       i've gone through most of the posts from this forum , i need a code
> > snippet for searching large index,  currently am iterating ,
> >
> >       hits = searher.search(query);
> >      for (int inc = 0; inc < hits.length(); inc++) {
> >
> >                        Document doc = hits.doc(inc);
> >
> >                        String title = doc.get("title");
> >
> >        ///    etc.......
> >        }
> >
> >
> > its not good by the way when you use large index. am running it from
> tomcat
> > 6 .0 ,  java heap space is 256 MB ,
> > please any1 help me
> >
> >
> >
> > --
> > View this message in context:
> http://www.nabble.com/optimized-searching-tp24266553p24266553.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64715d47d9e66046d8f6a68--

From java-user-return-41002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 11:59:58 2009
Return-Path: <java-user-return-41002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52298 invoked from network); 30 Jun 2009 11:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 11:59:58 -0000
Received: (qmail 77764 invoked by uid 500); 30 Jun 2009 12:00:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77680 invoked by uid 500); 30 Jun 2009 12:00:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77670 invoked by uid 99); 30 Jun 2009 12:00:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:00:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 11:59:56 +0000
Received: by yxe12 with SMTP id 12so90536yxe.29
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 04:59:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=kwbtaIKTmzbInqHn2xDCMUd4dD6afcHaFCkiHRNLDZM=;
        b=UEyLMLUcSSH/NnhVha80cW4J7/hd/ExQSCDhvuEVUljdgUHb2NPe9PF3kQ6A+/28n/
         fuuNCS/NIT+vmgxdE5KD51d9rkPW9eyEmimW8hd8r6rTYfntRaaS+dIdttJhaJ94GXc9
         /I0WiivbpgRo6fK5m4ccA/Xq3RlDwzo/31kV0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=RLBVXQ5B8XND4ZzXKXZThqE1N+Me3dSxoFzZTG5jjFXDDnWfb5YOOsJu8Y1mue3usr
         V0yilsQPUjy1B5Yes/gV3Rs/zKgwO+wEl8PeSPbKm7MKoUw8K98JR1ImmkvMUGjvXUZ3
         +N52KC5UdH9vVp7rWUunJu4zrMIS88cg6foC0=
MIME-Version: 1.0
Received: by 10.100.105.15 with SMTP id d15mr11103932anc.140.1246363175698; 
	Tue, 30 Jun 2009 04:59:35 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24269693.post@talk.nabble.com>
References: <24251993.post@talk.nabble.com>
	 <f18c9dde0906300219mf7852e5x66bc71917b12fb23@mail.gmail.com>
	 <24269693.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 13:59:35 +0200
Message-ID: <f18c9dde0906300459i14caf3e8t4ab94cbf3ae5d48e@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,

On Tue, Jun 30, 2009 at 12:41 PM, m.harig<m.harig@gmail.com> wrote:
>
> Thanks Simon ,
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Its working now , thanks a lot , i've a=
 doubt
>
> =C2=A0 =C2=A0 =C2=A0 i've got 30,000 pdf files indexed , =C2=A0but if i u=
se the code which you
> sent , returns only 200 results , because am setting =C2=A0 TopDocs topDo=
cs =3D
> searcher.search(query,200); =C2=A0as i said if use Integer.MAX_VALUE , it=
 returns
> java heap space error , even i can't use 300 ,
The Integer.MAX_VALUE was my fault. Internally lucene allocates an
array of the size n (searcher.search(query,n)) even if your query only
returns 1 document. This causes the OOM. Only get as many results as
you need!
In turn is iterating and loading of all those documents necessary?
What is your usecase of lucene where you have to load 30k of
documents? You have to be aware of that if you load 30k docs you need
enough memory for them in you JVM. I have no idea how you index and
what you store in the index but 30k pdf with -Xmx128M is not much :)

simon
>
> =C2=A0 =C2=A0here is my code
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 IndexReader open =3D Ind=
exReader.open(indexDir);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexSearcher sear=
cher =3D new IndexSearcher(open);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0final String fName=
 =3D "contents";
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0QueryParser parser=
 =3D new QueryParser(fName, new StopAnalyzer());
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Query query =3D pa=
rser.parse(qryStr);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0TopDocs topDocs =
=3D searcher.search(query,200);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0FieldSelector sele=
ctor =3D new FieldSelector() {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0public FieldSelectorResult accept(String fieldName) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return fieldName =3D=3D fName ? Field=
SelectorResult.LOAD
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0: FieldSelectorResult.LAZY_LOAD;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0}
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0};
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0final int totalHit=
s =3D topDocs.totalHits;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ScoreDoc[] scoreDo=
cs =3D topDocs.scoreDocs;
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0for (int i =3D 0; =
i < totalHits; i++) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0Document doc =3D searcher.doc(scoreDocs[i].doc, selector);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0System.out.println(doc.get("title"));
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0System.out.println(doc.get("path"));
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0searcher.close();
>
>
> ---------------- can you please clear my doubt
> --
> View this message in context: http://www.nabble.com/Read-large-size-index=
-tp24251993p24269693.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 12:31:03 2009
Return-Path: <java-user-return-41003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69227 invoked from network); 30 Jun 2009 12:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 12:31:02 -0000
Received: (qmail 8130 invoked by uid 500); 30 Jun 2009 12:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8084 invoked by uid 500); 30 Jun 2009 12:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8074 invoked by uid 99); 30 Jun 2009 12:31:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:31:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:31:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLcTx-00032n-9m
	for java-user@lucene.apache.org; Tue, 30 Jun 2009 05:30:41 -0700
Message-ID: <24271025.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 05:30:41 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read large size index
In-Reply-To: <f18c9dde0906300459i14caf3e8t4ab94cbf3ae5d48e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906300219mf7852e5x66bc71917b12fb23@mail.gmail.com> <24269693.post@talk.nabble.com> <f18c9dde0906300459i14caf3e8t4ab94cbf3ae5d48e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Hi there,

On Tue, Jun 30, 2009 at 12:41 PM, m.harig<m.harig@gmail.com> wrote:
>
> Thanks Simon ,
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Its working now , thanks a lot , i've a=
 doubt
>
> =C2=A0 =C2=A0 =C2=A0 i've got 30,000 pdf files indexed , =C2=A0but if i u=
se the code which you
> sent , returns only 200 results , because am setting =C2=A0 TopDocs topDo=
cs =3D
> searcher.search(query,200); =C2=A0as i said if use Integer.MAX_VALUE , it
> returns
> java heap space error , even i can't use 300 ,
The Integer.MAX_VALUE was my fault. Internally lucene allocates an
array of the size n (searcher.search(query,n)) even if your query only
returns 1 document. This causes the OOM. Only get as many results as
you need!

In turn is iterating and loading of all those documents necessary?

no need to iterate all documents , i set searcher.search(query,10000) , am
getting the results ,=20

What is your usecase of lucene where you have to load 30k of
documents? You have to be aware of that if you load 30k docs you need
enough memory for them in you JVM. I have no idea how you index and
what you store in the index but 30k pdf with -Xmx128M is not much :)

is there any way to get the total hits from the index when i search for a
keyword? i mean i set TopDocCollector collector =3D new
TopDocCollector(10000); , so the results will not exceed more than 10k ,
what am asking is i need to display the total hits from the index , it migh=
t
be more than 10k , like google did ,  Results 1 - 10 of about 51,200 , can
you please tell me..

simon

--=20
View this message in context: http://www.nabble.com/Read-large-size-index-t=
p24251993p24271025.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 12:38:18 2009
Return-Path: <java-user-return-41004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71541 invoked from network); 30 Jun 2009 12:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 12:38:17 -0000
Received: (qmail 15261 invoked by uid 500); 30 Jun 2009 12:38:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15171 invoked by uid 500); 30 Jun 2009 12:38:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15161 invoked by uid 99); 30 Jun 2009 12:38:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:38:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:38:15 +0000
Received: by an-out-0708.google.com with SMTP id d11so27823and.5
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 05:37:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=X8eSprZD4lmTUNd+ap6oObRpwBfQk9IaWX2+rQU4Y8c=;
        b=xP8dzWjZ32JaoA3SyQnVsQaMaVg0YMqcgce3s0eDCrFopY+3nQKGx+7DQcuAvNxCLD
         ZVhWJwSjGpRr1IhE5/cw5CDSV7vfhBsRsGfyRU6I6m7LSNxOmi4Y3neBL3G2xjFoXFph
         CNKsO3fLGBgdAlBr89ioH9unib97tULqc6RCw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=eF63qRuSS/WoSQbVHfkofifFe/hfgofzZQR143TeIe5+V/aJtCRC+IrSfL0RLTkayP
         NK+uO9BT6cO9n+2a9nUby/WQ3RIVy4fJceUlyVLL5IzZixVleI8n5qdyp0ezlnLnUt3I
         BUIpomTled+S9mzqmAXSPkl7iRhxdFbdQvWk4=
MIME-Version: 1.0
Received: by 10.100.131.7 with SMTP id e7mr7512503and.132.1246365470123; Tue, 
	30 Jun 2009 05:37:50 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24271025.post@talk.nabble.com>
References: <24251993.post@talk.nabble.com>
	 <f18c9dde0906300219mf7852e5x66bc71917b12fb23@mail.gmail.com>
	 <24269693.post@talk.nabble.com>
	 <f18c9dde0906300459i14caf3e8t4ab94cbf3ae5d48e@mail.gmail.com>
	 <24271025.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 14:37:50 +0200
Message-ID: <f18c9dde0906300537p7088e375o64494b52302501b9@mail.gmail.com>
Subject: Re: Read large size index
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jun 30, 2009 at 2:30 PM, m.harig<m.harig@gmail.com> wrote:
>
>
>
> Hi there,
>
> On Tue, Jun 30, 2009 at 12:41 PM, m.harig<m.harig@gmail.com> wrote:
>>
>> Thanks Simon ,
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Its working now , thanks a lot , i've =
a doubt
>>
>> =C2=A0 =C2=A0 =C2=A0 i've got 30,000 pdf files indexed , =C2=A0but if i =
use the code which you
>> sent , returns only 200 results , because am setting =C2=A0 TopDocs topD=
ocs =3D
>> searcher.search(query,200); =C2=A0as i said if use Integer.MAX_VALUE , i=
t
>> returns
>> java heap space error , even i can't use 300 ,
> The Integer.MAX_VALUE was my fault. Internally lucene allocates an
> array of the size n (searcher.search(query,n)) even if your query only
> returns 1 document. This causes the OOM. Only get as many results as
> you need!
>
> In turn is iterating and loading of all those documents necessary?
>
> no need to iterate all documents , i set searcher.search(query,10000) , a=
m
> getting the results ,
>
> What is your usecase of lucene where you have to load 30k of
> documents? You have to be aware of that if you load 30k docs you need
> enough memory for them in you JVM. I have no idea how you index and
> what you store in the index but 30k pdf with -Xmx128M is not much :)
>
> is there any way to get the total hits from the index when i search for a
> keyword? i mean i set TopDocCollector collector =3D new
> TopDocCollector(10000); , so the results will not exceed more than 10k ,
> what am asking is i need to display the total hits from the index , it mi=
ght
> be more than 10k , like google did , =C2=A0Results 1 - 10 of about 51,200=
 , can
> you please tell me..

TopDoc returned by several Searcher#search methods has a field
TopDocs#totalHits thats the total number of hits for a query!

simon
>
> simon
>
> --
> View this message in context: http://www.nabble.com/Read-large-size-index=
-tp24251993p24271025.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 12:39:20 2009
Return-Path: <java-user-return-41005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71835 invoked from network); 30 Jun 2009 12:39:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 12:39:20 -0000
Received: (qmail 19765 invoked by uid 500); 30 Jun 2009 12:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19690 invoked by uid 500); 30 Jun 2009 12:39:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19680 invoked by uid 99); 30 Jun 2009 12:39:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:39:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:39:18 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLcby-0003Lx-B6
	for java-user@lucene.apache.org; Tue, 30 Jun 2009 05:38:58 -0700
Message-ID: <24271145.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 05:38:58 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: optimized searching
In-Reply-To: <359a92830906300450q42b7b475hf67997476c4efdba@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24266553.post@talk.nabble.com> <8c4e68610906300202k2b9eed87kd8b4812749a1a59f@mail.gmail.com> <359a92830906300450q42b7b475hf67997476c4efdba@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks eric

in Ian's link, particularly see the section "Don't iterate over morehits
than necessary".

A couple of other things:
1> Loading the entire document just to get a field or two isn't
     very efficient, think about lazy loading (See FieldSelector)
   i done it , but have couple of questions

2> What do you mean when you say "not very good"? Using too
      much memory? Slow?
   yes , of course , it went for java heap space .


here is my code

                IndexReader open = IndexReader.open(indexDir);
                IndexSearcher searcher = new IndexSearcher(open);
		final String fName = "title";
		QueryParser parser = new QueryParser("contents", new StopAnalyzer());
		Query query = parser.parse(qryStr);

		TopDocCollector collector = new TopDocCollector(1000);// 
		searcher.search(query, collector);

		FieldSelector selector = new FieldSelector() {
			public FieldSelectorResult accept(String fieldName) {
				return fieldName == fName ? FieldSelectorResult.LOAD
						: FieldSelectorResult.LAZY_LOAD;
			}
			

		};

		final int totalHits = collector.getTotalHits();
		ScoreDoc[] scoreDocs = collector.topDocs().scoreDocs;

		
		for (int i = 0; i < totalHits; i++) {
			Document doc = searcher.doc(scoreDocs[i].doc, selector);

			System.out.println(i+" ) "+doc.get("title"));
			System.out.println(doc.get("path"));

		}
          
can you please tune my code to work it faster and better,  is it possible to
display total hits like google , since am using new TopDocCollector(1000);
it won't allow you to pick total hits ?? am i right???

-- 
View this message in context: http://www.nabble.com/optimized-searching-tp24266553p24271145.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 12:39:22 2009
Return-Path: <java-user-return-41006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71873 invoked from network); 30 Jun 2009 12:39:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 12:39:22 -0000
Received: (qmail 20935 invoked by uid 500); 30 Jun 2009 12:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20893 invoked by uid 500); 30 Jun 2009 12:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20865 invoked by uid 99); 30 Jun 2009 12:39:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:39:29 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:39:18 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1E0DF45EB42
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 14:38:57 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id g7DGRNSUERVr for <java-user@lucene.apache.org>;
	Tue, 30 Jun 2009 14:38:46 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BAEA645EB41
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 14:38:46 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <24251993.post@talk.nabble.com> <f18c9dde0906300219mf7852e5x66bc71917b12fb23@mail.gmail.com> <24269693.post@talk.nabble.com> <f18c9dde0906300459i14caf3e8t4ab94cbf3ae5d48e@mail.gmail.com> <24271025.post@talk.nabble.com>
Subject: RE: Read large size index
Date: Tue, 30 Jun 2009 14:38:44 +0200
Message-ID: <95D339B2C9F447D880AFC9AC4D1D32E5@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <24271025.post@talk.nabble.com>
Thread-index: Acn5fqz5BkAruRb2Q4qxRfF6OFCK5gAAGVEA
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

The correct way to iterate over all results is to use a custom =
HitCollector
(Collector in 2.9) instance. The HitCollector's method collect(docid, =
score)
is called for every hit. No need to allocate arrays then:

e.g.:
searcher.search(query, new HitCollector() {
	@Override public void collect(int docid, float score) {
		// do something with docid
	}
});

TopDocsCollector is used to get a relevance-sorted view on the top =
ranking
hits. It is not for iterating over the whole results (in full text =
search,
nobody would normally do this. E.g. Google does not allow you to go =
beyond
page 100). If you want to display the top 10 results you can use
TopDocCollector(10).

Uwe


-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: m.harig [mailto:m.harig@gmail.com]
> Sent: Tuesday, June 30, 2009 2:31 PM
> To: java-user@lucene.apache.org
> Subject: Re: Read large size index
>=20
>=20
>=20
>=20
> Hi there,
>=20
> On Tue, Jun 30, 2009 at 12:41 PM, m.harig<m.harig@gmail.com> wrote:
> >
> > Thanks Simon ,
> >
> > =A0 =A0 =A0 =A0 =A0Its working now , thanks a lot , i've a doubt
> >
> > =A0 =A0 =A0 i've got 30,000 pdf files indexed , =A0but if i use the =
code which
> you
> > sent , returns only 200 results , because am setting =A0 TopDocs =
topDocs =3D
> > searcher.search(query,200); =A0as i said if use Integer.MAX_VALUE , =
it
> > returns
> > java heap space error , even i can't use 300 ,
> The Integer.MAX_VALUE was my fault. Internally lucene allocates an
> array of the size n (searcher.search(query,n)) even if your query only
> returns 1 document. This causes the OOM. Only get as many results as
> you need!
>=20
> In turn is iterating and loading of all those documents necessary?
>=20
> no need to iterate all documents , i set searcher.search(query,10000) =
, am
> getting the results ,
>=20
> What is your usecase of lucene where you have to load 30k of
> documents? You have to be aware of that if you load 30k docs you need
> enough memory for them in you JVM. I have no idea how you index and
> what you store in the index but 30k pdf with -Xmx128M is not much :)
>=20
> is there any way to get the total hits from the index when i search =
for a
> keyword? i mean i set TopDocCollector collector =3D new
> TopDocCollector(10000); , so the results will not exceed more than 10k =
,
> what am asking is i need to display the total hits from the index , it
> might
> be more than 10k , like google did ,  Results 1 - 10 of about 51,200 , =
can
> you please tell me..
>=20
> simon
>=20
> --
> View this message in context: =
http://www.nabble.com/Read-large-size-index-
> tp24251993p24271025.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 12:45:36 2009
Return-Path: <java-user-return-41007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73262 invoked from network); 30 Jun 2009 12:45:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 12:45:35 -0000
Received: (qmail 30335 invoked by uid 500); 30 Jun 2009 12:45:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30263 invoked by uid 500); 30 Jun 2009 12:45:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30253 invoked by uid 99); 30 Jun 2009 12:45:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:45:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:45:34 +0000
Received: by fg-out-1718.google.com with SMTP id l26so33749fgb.4
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 05:45:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=evpuoxhyPDV1oGKoBGu1CSa8kDMsLe+jW/7OeFV5nYU=;
        b=m2KlsDWOIEhWZeD5nOiLsQVxreJjdwaKeMfly7N1+g4dvSzxbkhKHsX8FvUvZSflcF
         gxIbx4LAcE+U6yZ2K2LWQDnVaH1xIjLfDqPmxVZRcZLJzljLmO8ByU7EmlqhGGL+DFCp
         4EV9+Yq6KT8AWbXxzmi1/BAmplUBTtGTumbXU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=B9cSaJrOKRF/vSNkcITH/mGJ2JBy+/icpHUEKjLy2k+MCZcgIyMhBrCViYWuBw/JXl
         PL2YpPbOiuPAPtc6cDU230XEujrQ775O5tUz2StXAzAt9i/f7J00eAMtXeviq0zhDHMb
         GEUlupYywMvMV3EjKYargbPWH74e+cq54NGOc=
MIME-Version: 1.0
Received: by 10.86.90.2 with SMTP id n2mr2737983fgb.51.1246365912467; Tue, 30 
	Jun 2009 05:45:12 -0700 (PDT)
In-Reply-To: <f18c9dde0906290311i32695bb8xddcbee42a3db9913@mail.gmail.com>
References: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
	 <d36c28c30906290055n78dc85b9q70a8a2a647ea162b@mail.gmail.com>
	 <f18c9dde0906290311i32695bb8xddcbee42a3db9913@mail.gmail.com>
Date: Tue, 30 Jun 2009 15:45:12 +0300
Message-ID: <d36c28c30906300545g6ee985baw1cd58c87173bb46d@mail.gmail.com>
Subject: Re: MultiSegmentReader problems - current is null
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=000e0cd25048790af5046d902df9
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd25048790af5046d902df9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

lucene-2.4.1

Thanks,
Liat

2009/6/29 Simon Willnauer <simon.willnauer@googlemail.com>

> Quick question, which version of lucene do you use?!
>
> simon
>
> On Mon, Jun 29, 2009 at 9:55 AM, liat oren<oren.liat@gmail.com> wrote:
> > The full error is:
> > Exception in thread "main" java.lang.NullPointerException
> >        at
> > Priorart.Lucene.Expert.index.MultiSegmentReader$MultiTermDocs.freq(Mu
> > ltiSegmentReader.java:709)
> > I looked at issue
> > LUCENE-781<https://issues.apache.org/jira/browse/LUCENE-781>- it might
> > relates to this one??
> > Though it is closed since 2007.
> >
> > Hope anyone can help with it - even if I try
> > double totalFreqT = ir.termDocs().freq(); - to get the freq using
> termDocs
> > of a multi-segment, I get the same error..
> >
> > Thanks  alot,
> > Liat
> >
> >
> >
> > 2009/6/28 liat oren <oren.liat@gmail.com>
> >
> >>  Hi,
> >>
> >> I have an index that is a multi-segment index (how come it is created
> this
> >> way?)
> >>
> >> When I try to get the freq of a term at the following way:
> >>    TermDocs tDocs = this.indexReader.termDocs(term);
> >>    tf = tDocs.freq();
> >> the greq method :
> >>   public int freq()
> >>   {
> >>    return current.freq();
> >>   }
> >> is in MultiSegmentReader.
> >>
> >> The current is null, so I get an exception.
> >>
> >> Should I initialize current?
> >> How can I avoid this problem?
> >> How can I avoid having a multi-segment index?
> >>
> >> Many thanks,
> >> Liat
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd25048790af5046d902df9--

From java-user-return-41008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 12:52:33 2009
Return-Path: <java-user-return-41008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74820 invoked from network); 30 Jun 2009 12:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 12:52:33 -0000
Received: (qmail 40360 invoked by uid 500); 30 Jun 2009 12:52:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40301 invoked by uid 500); 30 Jun 2009 12:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40291 invoked by uid 99); 30 Jun 2009 12:52:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:52:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:52:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLcol-0003og-IN
	for java-user@lucene.apache.org; Tue, 30 Jun 2009 05:52:11 -0700
Message-ID: <24271288.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 05:52:11 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Read large size index
In-Reply-To: <95D339B2C9F447D880AFC9AC4D1D32E5@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24251993.post@talk.nabble.com> <f18c9dde0906300219mf7852e5x66bc71917b12fb23@mail.gmail.com> <24269693.post@talk.nabble.com> <f18c9dde0906300459i14caf3e8t4ab94cbf3ae5d48e@mail.gmail.com> <24271025.post@talk.nabble.com> <95D339B2C9F447D880AFC9AC4D1D32E5@VEGA>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Uwe,

            can you please give me a code snippet , so that i can resolve my
issue , please



The correct way to iterate over all results is to use a custom HitCollector
(Collector in 2.9) instance. The HitCollector's method collect(docid, score)
is called for every hit. No need to allocate arrays then:

e.g.:
searcher.search(query, new HitCollector() {
	@Override public void collect(int docid, float score) {
		// do something with docid
	}
});

TopDocsCollector is used to get a relevance-sorted view on the top ranking
hits. It is not for iterating over the whole results (in full text search,
nobody would normally do this. E.g. Google does not allow you to go beyond
page 100). If you want to display the top 10 results you can use
TopDocCollector(10).

Uwe



-- 
View this message in context: http://www.nabble.com/Read-large-size-index-tp24251993p24271288.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 12:53:15 2009
Return-Path: <java-user-return-41009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75132 invoked from network); 30 Jun 2009 12:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 12:53:15 -0000
Received: (qmail 43978 invoked by uid 500); 30 Jun 2009 12:53:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43917 invoked by uid 500); 30 Jun 2009 12:53:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43902 invoked by uid 99); 30 Jun 2009 12:53:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:53:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:53:09 +0000
Received: by yxe12 with SMTP id 12so140871yxe.29
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 05:52:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=sn1n3qNu+PTuURInjWy1UpKgLtnF6VXfKIB7We7jLsM=;
        b=Vqju7+WMswXjx2dQq8clN9SbPw726flifaKOXdlm305K1Lfb0DEZN4AtTgpN4kUAfW
         D06SqNcXZes+tHbcAmlNDnELDAeIBm1I9TWh/6vnRuANrVgB2KeGrixn1PJqCgwZuqTN
         0eKscGDVlSOC16B8S1kAsnsZqxkqECqjKutfU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=YFJqXUW7PR2yvsZAcvSpffSXMLNFn+1BWkpuH4ddrFATu4yipVsM6RMRaN24gJU5Pz
         9fpEJH4T4x8di31kPueF0fYA0fzE/pG2ScKt5w1aXsYqPjhpW413T02KW5JqB7GA7nSk
         ORW4/XdQYLRI19p0Q0h4cU2lFDWZG6pvyPGYI=
MIME-Version: 1.0
Received: by 10.100.209.14 with SMTP id h14mr11190452ang.139.1246366367726; 
	Tue, 30 Jun 2009 05:52:47 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <d36c28c30906290055n78dc85b9q70a8a2a647ea162b@mail.gmail.com>
References: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
	 <d36c28c30906290055n78dc85b9q70a8a2a647ea162b@mail.gmail.com>
Date: Tue, 30 Jun 2009 14:52:46 +0200
Message-ID: <f18c9dde0906300552q6ed1a823s3370bb631855aea@mail.gmail.com>
Subject: Re: MultiSegmentReader problems - current is null
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jun 29, 2009 at 9:55 AM, liat oren<oren.liat@gmail.com> wrote:
> The full error is:
> Exception in thread "main" java.lang.NullPointerException
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
> Priorart.Lucene.Expert.index.MultiSegmentReader$MultiTermDocs.freq(Mu
> ltiSegmentReader.java:709)
> I looked at issue
> LUCENE-781<https://issues.apache.org/jira/browse/LUCENE-781>- it might
> relates to this one??
> Though it is closed since 2007.
>
> Hope anyone can help with it - even if I try
> double totalFreqT =3D ir.termDocs().freq(); - to get the freq using termD=
ocs
you did not call TermDocs#next() did you?!
Try:
  TermDocs docs =3D it.termDocs();
  docs.next();
  int  freq =3D docs.freq();

TermDocs is an enumeration, you have to skip through them to get the
freq of a term within a doc.

simon
> of a multi-segment, I get the same error..
>
> Thanks =C2=A0alot,
> Liat
>
>
>
> 2009/6/28 liat oren <oren.liat@gmail.com>
>
>> =C2=A0Hi,
>>
>> I have an index that is a multi-segment index (how come it is created th=
is
>> way?)
>>
>> When I try to get the freq of a term at the following way:
>> =C2=A0 =C2=A0TermDocs tDocs =3D this.indexReader.termDocs(term);
>> =C2=A0 =C2=A0tf =3D tDocs.freq();
>> the greq method :
>> =C2=A0 public int freq()
>> =C2=A0 {
>> =C2=A0 =C2=A0return current.freq();
>> =C2=A0 }
>> is in MultiSegmentReader.
>>
>> The current is null, so I get an exception.
>>
>> Should I initialize current?
>> How can I avoid this problem?
>> How can I avoid having a multi-segment index?
>>
>> Many thanks,
>> Liat
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 12:55:53 2009
Return-Path: <java-user-return-41010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75965 invoked from network); 30 Jun 2009 12:55:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 12:55:53 -0000
Received: (qmail 48480 invoked by uid 500); 30 Jun 2009 12:56:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48414 invoked by uid 500); 30 Jun 2009 12:56:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48404 invoked by uid 99); 30 Jun 2009 12:56:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:56:01 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 12:55:50 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id E66A445EB44
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 14:55:29 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SZ9PkRBAQCd4 for <java-user@lucene.apache.org>;
	Tue, 30 Jun 2009 14:55:19 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A7BB745EB41
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 14:55:19 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <24251993.post@talk.nabble.com> <f18c9dde0906300219mf7852e5x66bc71917b12fb23@mail.gmail.com> <24269693.post@talk.nabble.com> <f18c9dde0906300459i14caf3e8t4ab94cbf3ae5d48e@mail.gmail.com> <24271025.post@talk.nabble.com> <95D339B2C9F447D880AFC9AC4D1D32E5@VEGA> <24271288.post@talk.nabble.com>
Subject: RE: Read large size index
Date: Tue, 30 Jun 2009 14:55:17 +0200
Message-ID: <CEC6974A64CD442A8643BED3453123E7@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <24271288.post@talk.nabble.com>
Thread-index: Acn5gbKk+SSX2gLmQWOnOLBLlQ47VQAABcKQ
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

There was a code snipplet in my mail, just fill in your code. I cannot do
everything for you. With some programming experience you should understand
what's going on:

> searcher.search(query, new HitCollector() {
> 	@Override public void collect(int docid, float score) {
> 		// do something with docid
> 	}
> });

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: m.harig [mailto:m.harig@gmail.com]
> Sent: Tuesday, June 30, 2009 2:52 PM
> To: java-user@lucene.apache.org
> Subject: RE: Read large size index
> 
> 
> Thanks Uwe,
> 
>             can you please give me a code snippet , so that i can resolve
> my
> issue , please
> 
> 
> 
> The correct way to iterate over all results is to use a custom
> HitCollector
> (Collector in 2.9) instance. The HitCollector's method collect(docid,
> score)
> is called for every hit. No need to allocate arrays then:
> 
> e.g.:
> searcher.search(query, new HitCollector() {
> 	@Override public void collect(int docid, float score) {
> 		// do something with docid
> 	}
> });
> 
> TopDocsCollector is used to get a relevance-sorted view on the top ranking
> hits. It is not for iterating over the whole results (in full text search,
> nobody would normally do this. E.g. Google does not allow you to go beyond
> page 100). If you want to display the top 10 results you can use
> TopDocCollector(10).
> 
> Uwe
> 
> 
> 
> --
> View this message in context: http://www.nabble.com/Read-large-size-index-
> tp24251993p24271288.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 13:01:21 2009
Return-Path: <java-user-return-41011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77212 invoked from network); 30 Jun 2009 13:01:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 13:01:21 -0000
Received: (qmail 53809 invoked by uid 500); 30 Jun 2009 13:01:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53751 invoked by uid 500); 30 Jun 2009 13:01:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53741 invoked by uid 99); 30 Jun 2009 13:01:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 13:01:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 13:01:19 +0000
Received: by fxm28 with SMTP id 28so126962fxm.5
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 06:00:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=1ya3KZxK4hqqJvt2VbjCSm/4LDZgZJ0llP+8XSXy2lA=;
        b=SvZ/76NeXB+nRazsqRGCL52+qvMYYFLzb9BEx0Eb5jLFj/oPfd+l7HTVZQj8eXGzeH
         j5dY6bN0zk5MdJQBdjFBd3AaqVWLFgSey6PNLtaLWHANniwSGfX9bcDjf8DB7EjR85Y2
         557Ce+ljS+C4F83JIUxy0FO9LFQVmBl/ubbcw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ikcTXQDA1CzrGQMtf+07osdzyB40gZtrxKoYMXAzbHc7frt4xZ1Kp5vAs2OsIjRypZ
         HKMVv0YIny6R4feNkd9OpeEUfZvfnYfBWWoA/IKgM99JjccsErPGHJy96wJG7zA3I2Tr
         V2FpVKyZ+5DJZZHMnxe11K6XyXk4MerqOqb7Y=
MIME-Version: 1.0
Received: by 10.86.51.20 with SMTP id y20mr2620783fgy.72.1246366859584; Tue, 
	30 Jun 2009 06:00:59 -0700 (PDT)
In-Reply-To: <f18c9dde0906300552q6ed1a823s3370bb631855aea@mail.gmail.com>
References: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
	 <d36c28c30906290055n78dc85b9q70a8a2a647ea162b@mail.gmail.com>
	 <f18c9dde0906300552q6ed1a823s3370bb631855aea@mail.gmail.com>
Date: Tue, 30 Jun 2009 16:00:59 +0300
Message-ID: <d36c28c30906300600n33d1e98cg3ae60d903746c1aa@mail.gmail.com>
Subject: Re: MultiSegmentReader problems - current is null
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=000e0cd24740ece676046d906505
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd24740ece676046d906505
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Ohh, right. It resolves the problem I mentioned in the second email I sent.

However, in the first mail I sent, the current of the multi-segment reader
is null, which brings that problem.

Thanks
Liat



2009/6/30 Simon Willnauer <simon.willnauer@googlemail.com>

> On Mon, Jun 29, 2009 at 9:55 AM, liat oren<oren.liat@gmail.com> wrote:
> > The full error is:
> > Exception in thread "main" java.lang.NullPointerException
> >        at
> > Priorart.Lucene.Expert.index.MultiSegmentReader$MultiTermDocs.freq(Mu
> > ltiSegmentReader.java:709)
> > I looked at issue
> > LUCENE-781<https://issues.apache.org/jira/browse/LUCENE-781>- it might
> > relates to this one??
> > Though it is closed since 2007.
> >
> > Hope anyone can help with it - even if I try
> > double totalFreqT = ir.termDocs().freq(); - to get the freq using
> termDocs
> you did not call TermDocs#next() did you?!
> Try:
>  TermDocs docs = it.termDocs();
>  docs.next();
>  int  freq = docs.freq();
>
> TermDocs is an enumeration, you have to skip through them to get the
> freq of a term within a doc.
>
> simon
> > of a multi-segment, I get the same error..
> >
> > Thanks  alot,
> > Liat
> >
> >
> >
> > 2009/6/28 liat oren <oren.liat@gmail.com>
> >
> >>  Hi,
> >>
> >> I have an index that is a multi-segment index (how come it is created
> this
> >> way?)
> >>
> >> When I try to get the freq of a term at the following way:
> >>    TermDocs tDocs = this.indexReader.termDocs(term);
> >>    tf = tDocs.freq();
> >> the greq method :
> >>   public int freq()
> >>   {
> >>    return current.freq();
> >>   }
> >> is in MultiSegmentReader.
> >>
> >> The current is null, so I get an exception.
> >>
> >> Should I initialize current?
> >> How can I avoid this problem?
> >> How can I avoid having a multi-segment index?
> >>
> >> Many thanks,
> >> Liat
> >>
> >
>
>  ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd24740ece676046d906505--

From java-user-return-41012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 13:10:46 2009
Return-Path: <java-user-return-41012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79764 invoked from network); 30 Jun 2009 13:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 13:10:46 -0000
Received: (qmail 65412 invoked by uid 500); 30 Jun 2009 13:10:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65341 invoked by uid 500); 30 Jun 2009 13:10:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65331 invoked by uid 99); 30 Jun 2009 13:10:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 13:10:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 13:10:44 +0000
Received: by yxe12 with SMTP id 12so158819yxe.29
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 06:10:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=PGTewRHY6zZU7PG4s0JAB9UjLXwp8i83Z28o/st4wv0=;
        b=HDDfIHkdrdC+G1z12Hm/4E0WbEIc0FbQwQ6IDZm94j+jbWX0iJvOKWfHG3ekKbTMwW
         bXWDehp5R+hhZVNjdiWNmArZP/o/+G7nCvSVnYzg/X+nyfFgKo75Aw4gIqR7sp8/b4JD
         hPT4wtVazTeKPYvkKb9UKGRxrKfP+mxviOTQE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=nXhNGLJ0tn8b0x2TA9ss5Ky+4ahHfH55iXT1GnOx0VWbXBee64+SRhCI+ayvnftRle
         vDa52ansU49V1QnzyaUeP3Ysy+2udB/GhWdP1yoCS16OseAQVJeNCdV63JG6aDJlWj7w
         ZEwPZjUmMI+Nook8uiqvkqIjyfXI/J3FjhV+4=
MIME-Version: 1.0
Received: by 10.100.105.4 with SMTP id d4mr11353603anc.39.1246367423740; Tue, 
	30 Jun 2009 06:10:23 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
References: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
Date: Tue, 30 Jun 2009 15:10:23 +0200
Message-ID: <f18c9dde0906300610g6703b083r11290506741db94a@mail.gmail.com>
Subject: Re: MultiSegmentReader problems - current is null
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
On Sun, Jun 28, 2009 at 2:39 PM, liat oren<oren.liat@gmail.com> wrote:
> Hi,
>
> I have an index that is a multi-segment index (how come it is created thi=
s
> way?)
>
> When I try to get the freq of a term at the following way:
> =C2=A0 TermDocs tDocs =3D this.indexReader.termDocs(term);
> =C2=A0 tf =3D tDocs.freq();
> the greq method :
> =C2=A0public int freq()
> =C2=A0{
> =C2=A0 return current.freq();
> =C2=A0}
> is in MultiSegmentReader.
>
> The current is null, so I get an exception.
same answer as in the last email you must call TermDocs#next() this
will set TermDocs#current

TermDocs tDocs =3D this.indexReader.termDocs(term);
tDocs.next()
 tf =3D tDocs.freq();

simon
>
> Should I initialize current?
> How can I avoid this problem?
> How can I avoid having a multi-segment index?
>
> Many thanks,
> Liat
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 13:22:44 2009
Return-Path: <java-user-return-41013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85365 invoked from network); 30 Jun 2009 13:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 13:22:41 -0000
Received: (qmail 91518 invoked by uid 500); 30 Jun 2009 13:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91467 invoked by uid 500); 30 Jun 2009 13:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91457 invoked by uid 99); 30 Jun 2009 13:22:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 13:22:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 13:22:40 +0000
Received: by fxm28 with SMTP id 28so141711fxm.5
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 06:22:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=K6ZGqJGYsgA+Z6twBOkjq4ioLC9frwHuKmZmFVQhUcM=;
        b=q7QOQWyPyaqe89gsvidqXpLwifsAuK0qy2GhqbTQy/btVzj0DVY/yDIlMrkyRiZ5ii
         BpovHjxTanCFsgQwyeJoHb3MvJerbWEKEPLL0dm2K/qQPGrXXOT2vb6UBiZsXN/RNJAY
         5OgT/fh4JhbShht74hI00yh01+hBpPhxNLnig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=JIutEHTMAY935R1xVqkjvJbjtGNDjMorqk9hEuHMG4QFHxGS/NMjrdl82zV9/CDOio
         YkKSDJxJj15wdqNadgK1A4DM1kh0Wi6aIyF7/L/E3eqR69re0x7wGMEfmXs/qBDeden/
         +1vK7BaZU05BxN1VGNG1OnUrVV7onEF9U3eys=
MIME-Version: 1.0
Received: by 10.86.61.2 with SMTP id j2mr2818998fga.61.1246368139117; Tue, 30 
	Jun 2009 06:22:19 -0700 (PDT)
In-Reply-To: <24271145.post@talk.nabble.com>
References: <24266553.post@talk.nabble.com> <8c4e68610906300202k2b9eed87kd8b4812749a1a59f@mail.gmail.com> 
	<359a92830906300450q42b7b475hf67997476c4efdba@mail.gmail.com> 
	<24271145.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 30 Jun 2009 14:21:59 +0100
Message-ID: <8c4e68610906300621j19f01e35r40b93aac44dbc4fa@mail.gmail.com>
Subject: Re: optimized searching
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Have you read the javadocs? What does collector.getTotalHits() return?
 Does it return the same when you use new TopDocCollector(1000) and
some other number?  Are you asking basically the same questions in 2
different threads at the same time?

You are still iterating over many hits and that will still take longer
than if you iterate over fewer hits.


--
Ian.




On Tue, Jun 30, 2009 at 1:38 PM, m.harig<m.harig@gmail.com> wrote:
>
> Thanks eric
>
> in Ian's link, particularly see the section "Don't iterate over morehits
> than necessary".
>
> A couple of other things:
> 1> Loading the entire document just to get a field or two isn't
> =A0 =A0 very efficient, think about lazy loading (See FieldSelector)
> =A0 i done it , but have couple of questions
>
> 2> What do you mean when you say "not very good"? Using too
> =A0 =A0 =A0much memory? Slow?
> =A0 yes , of course , it went for java heap space .
>
>
> here is my code
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexReader open =3D IndexReader.open(inde=
xDir);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexSearcher searcher =3D new IndexSearch=
er(open);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0final String fName =3D "title";
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0QueryParser parser =3D new QueryParser("co=
ntents", new StopAnalyzer());
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Query query =3D parser.parse(qryStr);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0TopDocCollector collector =3D new TopDocCo=
llector(1000);//
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0searcher.search(query, collector);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0FieldSelector selector =3D new FieldSelect=
or() {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0public FieldSelectorResult=
 accept(String fieldName) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0return fie=
ldName =3D=3D fName ? FieldSelectorResult.LOAD
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0: FieldSelectorResult.LAZY_LOAD;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0};
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0final int totalHits =3D collector.getTotal=
Hits();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ScoreDoc[] scoreDocs =3D collector.topDocs=
().scoreDocs;
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for (int i =3D 0; i < totalHits; i++) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document doc =3D searcher.=
doc(scoreDocs[i].doc, selector);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println(i+" ) "=
+doc.get("title"));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println(doc.get=
("path"));
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> can you please tune my code to work it faster and better, =A0is it possib=
le to
> display total hits like google , since am using new TopDocCollector(1000)=
;
> it won't allow you to pick total hits ?? am i right???
>
> --
> View this message in context: http://www.nabble.com/optimized-searching-t=
p24266553p24271145.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 13:45:52 2009
Return-Path: <java-user-return-41014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98416 invoked from network); 30 Jun 2009 13:45:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 13:45:52 -0000
Received: (qmail 21475 invoked by uid 500); 30 Jun 2009 13:46:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21430 invoked by uid 500); 30 Jun 2009 13:46:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21420 invoked by uid 99); 30 Jun 2009 13:46:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 13:46:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 13:45:51 +0000
Received: by qw-out-2122.google.com with SMTP id 5so70582qwi.51
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 06:45:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=hOHANjPMdYyX0/tC2DIKe4nP09CdWTASLpaDeqoNIrA=;
        b=Ygm2/V88N6bMUKWnjdObWk9CxDTpzHPBSVJlxzBbEg9Sd/2KFxk7X7bYe1joeqysMb
         qxcyt2Ea/WfZ0fSaOBPZaoZTLztq4LU83fcmRy+EDfkOMBc8/q6kFyKk4TZRFrEt/Cyc
         ZvRCNWJM3B108PyMmL3/jv5Wi0mPank5jTKgE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OjpvtVyF/u4JHlSkaSZhqOasm7HlDBKYzwwqojnbA/8B7DOYvnVaS7FQdHfkCpujIp
         axZera/mRwmgRBynUmE5pdM2xeMpn5mQ3czVuhPZZvJbfroDXA9q9IHYgAoidV/R3TEL
         4cxigJwoJNHiHiOFBLFos5uxYML4b3KGuMu60=
MIME-Version: 1.0
Received: by 10.220.74.2 with SMTP id s2mr6339300vcj.37.1246369530278; Tue, 30 
	Jun 2009 06:45:30 -0700 (PDT)
In-Reply-To: <24271145.post@talk.nabble.com>
References: <24266553.post@talk.nabble.com>
	 <8c4e68610906300202k2b9eed87kd8b4812749a1a59f@mail.gmail.com>
	 <359a92830906300450q42b7b475hf67997476c4efdba@mail.gmail.com>
	 <24271145.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 09:45:30 -0400
Message-ID: <359a92830906300645p3ba77a96k1529f52eec44bdc3@mail.gmail.com>
Subject: Re: optimized searching
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163631094f1c760e046d91055f
X-Virus-Checked: Checked by ClamAV on apache.org

--00163631094f1c760e046d91055f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<<<can you please tune my code to work it faster and better>>>

Are you willing to pay me to do your job for you? Sorry to besnarky, but
please be aware that we're volunteers here, it's
pretty presumptuous to ask for this.

You still haven't answered what it is you're trying to do. Why are
you collecting 1,000 titles? What's the purpose? Are you just
experimenting? Because I don't understand your use-case. There's
no point in trying to make code efficient unless you're trying to
solve a real problem.

*Of course* you'll see memory grow until the garbage
collector kicks in. This is what java does. System.out.printlns
are pretty slow. First queries are slow. So unless and until you
clearly state the problem you're trying to solve, there's not much
we can do.

Best
Erick

On Tue, Jun 30, 2009 at 8:38 AM, m.harig <m.harig@gmail.com> wrote:

>
> Thanks eric
>
> in Ian's link, particularly see the section "Don't iterate over morehits
> than necessary".
>
> A couple of other things:
> 1> Loading the entire document just to get a field or two isn't
>     very efficient, think about lazy loading (See FieldSelector)
>    i done it , but have couple of questions
>
> 2> What do you mean when you say "not very good"? Using too
>      much memory? Slow?
>    yes , of course , it went for java heap space .
>
>
> here is my code
>
>                IndexReader open = IndexReader.open(indexDir);
>                IndexSearcher searcher = new IndexSearcher(open);
>                final String fName = "title";
>                QueryParser parser = new QueryParser("contents", new
> StopAnalyzer());
>                Query query = parser.parse(qryStr);
>
>                TopDocCollector collector = new TopDocCollector(1000);//
>                searcher.search(query, collector);
>
>                FieldSelector selector = new FieldSelector() {
>                        public FieldSelectorResult accept(String fieldName)
> {
>                                return fieldName == fName ?
> FieldSelectorResult.LOAD
>                                                :
> FieldSelectorResult.LAZY_LOAD;
>                        }
>
>
>                };
>
>                final int totalHits = collector.getTotalHits();
>                ScoreDoc[] scoreDocs = collector.topDocs().scoreDocs;
>
>
>                for (int i = 0; i < totalHits; i++) {
>                        Document doc = searcher.doc(scoreDocs[i].doc,
> selector);
>
>                        System.out.println(i+" ) "+doc.get("title"));
>                        System.out.println(doc.get("path"));
>
>                }
>
> can you please tune my code to work it faster and better,  is it possible
> to
> display total hits like google , since am using new TopDocCollector(1000);
> it won't allow you to pick total hits ?? am i right???
>
> --
> View this message in context:
> http://www.nabble.com/optimized-searching-tp24266553p24271145.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163631094f1c760e046d91055f--

From java-user-return-41015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 14:23:09 2009
Return-Path: <java-user-return-41015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21579 invoked from network); 30 Jun 2009 14:23:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 14:23:09 -0000
Received: (qmail 65248 invoked by uid 500); 30 Jun 2009 14:23:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65189 invoked by uid 500); 30 Jun 2009 14:23:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65179 invoked by uid 99); 30 Jun 2009 14:23:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 14:23:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 14:23:07 +0000
Received: by an-out-0708.google.com with SMTP id d11so54708and.5
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 07:22:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=MCStGwnRFKfz9lltYrEzNwE5lnSJ2UUMr+r8KfxV54g=;
        b=TAZcoRYbUd2IijugQTdjiTTjL4AJDPa0gndF9Szloj5OEjXadOi50Rve1qSTG0rCyZ
         9CRSMUyCZiZzqk9GdOKxz76rfEgrOj9+wJvEubSBorqPlrJev1Fv+1zdFgMYngtsQbzN
         BWUUwiRvjCDMk7FGna5ktK8yy+ySP79GmtqPk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=dfrUTyVstgIYE90Z85MJOypN8FCNi+/cDguwlZ0zMKrgHnvQTVD9oOHSQxhe3rTw6J
         cVjKpbJC5MNOi4kLGOZQG4UQH2JXrtco+hsK8EcaJsDUvf16S0xk0SlzVo2V0tWe7tJf
         0jCWIlvryp+08U5BgU09g017RGBAIil+93DZY=
MIME-Version: 1.0
Received: by 10.100.112.8 with SMTP id k8mr11298938anc.174.1246371766619; Tue, 
	30 Jun 2009 07:22:46 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <8c4e68610906300621j19f01e35r40b93aac44dbc4fa@mail.gmail.com>
References: <24266553.post@talk.nabble.com>
	 <8c4e68610906300202k2b9eed87kd8b4812749a1a59f@mail.gmail.com>
	 <359a92830906300450q42b7b475hf67997476c4efdba@mail.gmail.com>
	 <24271145.post@talk.nabble.com>
	 <8c4e68610906300621j19f01e35r40b93aac44dbc4fa@mail.gmail.com>
Date: Tue, 30 Jun 2009 16:22:46 +0200
Message-ID: <f18c9dde0906300722o5f932341x980bd0c3f23eab83@mail.gmail.com>
Subject: Re: optimized searching
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jun 30, 2009 at 3:21 PM, Ian Lea<ian.lea@gmail.com> wrote:
> Have you read the javadocs? What does collector.getTotalHits() return?
> =C2=A0Does it return the same when you use new TopDocCollector(1000) and
> some other number? =C2=A0Are you asking basically the same questions in 2
> different threads at the same time?
>
> You are still iterating over many hits and that will still take longer
> than if you iterate over fewer hits.
>
>
> --
> Ian.
>
>
>
>
> On Tue, Jun 30, 2009 at 1:38 PM, m.harig<m.harig@gmail.com> wrote:
>>
>> Thanks eric
>>
>> in Ian's link, particularly see the section "Don't iterate over morehits
>> than necessary".
>>
>> A couple of other things:
>> 1> Loading the entire document just to get a field or two isn't
>> =C2=A0 =C2=A0 very efficient, think about lazy loading (See FieldSelecto=
r)
>> =C2=A0 i done it , but have couple of questions
>>
>> 2> What do you mean when you say "not very good"? Using too
>> =C2=A0 =C2=A0 =C2=A0much memory? Slow?
>> =C2=A0 yes , of course , it went for java heap space .
>>
>>
>> here is my code
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexReader open =
=3D IndexReader.open(indexDir);
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexSearcher sea=
rcher =3D new IndexSearcher(open);
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0final String fNam=
e =3D "title";
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0QueryParser parse=
r =3D new QueryParser("contents", new StopAnalyzer());
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Query query =3D p=
arser.parse(qryStr);
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0TopDocCollector c=
ollector =3D new TopDocCollector(1000);//
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0searcher.search(q=
uery, collector);
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0FieldSelector sel=
ector =3D new FieldSelector() {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0public FieldSelectorResult accept(String fieldName) {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return fieldName =3D=3D fName ? Fi=
eldSelectorResult.LOAD
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0: FieldSelectorResult.LAZY_LOAD;
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0}
>>
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0};
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0final int totalHi=
ts =3D collector.getTotalHits();
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ScoreDoc[] scoreD=
ocs =3D collector.topDocs().scoreDocs;
>>
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0for (int i =3D 0;=
 i < totalHits; i++) {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0Document doc =3D searcher.doc(scoreDocs[i].doc, selector);
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0System.out.println(i+" ) "+doc.get("title"));
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0System.out.println(doc.get("path"));
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}
funny that you past the code I did send you as an example and ask in a
separate thread for tuning :D

simon
>>
>> can you please tune my code to work it faster and better, =C2=A0is it po=
ssible to
>> display total hits like google , since am using new TopDocCollector(1000=
);
>> it won't allow you to pick total hits ?? am i right???
>>
>> --
>> View this message in context: http://www.nabble.com/optimized-searching-=
tp24266553p24271145.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 14:34:20 2009
Return-Path: <java-user-return-41016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26796 invoked from network); 30 Jun 2009 14:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 14:34:20 -0000
Received: (qmail 84342 invoked by uid 500); 30 Jun 2009 14:34:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84301 invoked by uid 500); 30 Jun 2009 14:34:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84291 invoked by uid 99); 30 Jun 2009 14:34:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 14:34:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sake-ginjyo@nifty.com designates 202.248.238.82 as permitted sender)
Received: from [202.248.238.82] (HELO userg502.nifty.com) (202.248.238.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 14:34:16 +0000
Received: from hpcsayama (nttkyo857217.tkyo.nt.ftth.ppp.infoweb.ne.jp [116.83.26.217])by userg502.nifty.com with SMTP id n5UEXmxb018188
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 23:33:48 +0900
DomainKey-Signature: a=rsa-sha1; s=userg502; d=nifty.com; c=nofws; q=dns;
	h=message-id:from:to:subject:date:mime-version:content-type:
	content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
	b=wXGBklwgjJXD+XDRAlTgOeDFbtoHDDvdcHC80TyNvYX/QD3YF+fb+CwuhznXD/fpH
	cDZxtF34+R7VtWLgN0lLg==
X-Nifty-SrcIP: [116.83.26.217]
Message-ID: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama>
From: "k.sayama" <sake-ginjyo@nifty.com>
To: <java-user@lucene.apache.org>
Subject: Highligheter fails using JapaneseAnalyzer 
Date: Tue, 30 Jun 2009 23:16:51 +0900
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-2022-jp";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5512
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

hello.

i've tried to highlight string using Highligheter(2.4.1) and 
JapaneseAnalyzer
but the following code extract show the problem

String F = "f";
String CONTENTS = "AAA :BBB CCC";
JapaneseAnalyzer analyzer = new JapaneseAnalyzer();
QueryParser qp = new QueryParser( F, analyzer );
Query query = qp.parse( "BBB" );
Highlighter h = new Highlighter( new QueryScorer( query, F ) );

System.out.println( h.getBestFragment( analyzer, F,  CONTENTS ) );

The sytsem outputs
<B>AAA</B> :BBB CCC

When you change CONTENTS to "AAA _BBB CCC"
the system outputs

AAA _<B>BBB</B> CCC

Are there any problems?
Thanks in advance

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 14:41:44 2009
Return-Path: <java-user-return-41017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30290 invoked from network); 30 Jun 2009 14:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 14:41:44 -0000
Received: (qmail 815 invoked by uid 500); 30 Jun 2009 14:41:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 738 invoked by uid 500); 30 Jun 2009 14:41:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 728 invoked by uid 99); 30 Jun 2009 14:41:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 14:41:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 14:41:43 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n5UEfJiB003530
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 10:41:20 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A4A240F.7070603@informatics.jax.org>
Date: Tue, 30 Jun 2009 10:41:19 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highligheter fails using JapaneseAnalyzer
References: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama>
In-Reply-To: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.4.371499, Antispam-Engine: 2.7.1.369594, Antispam-Data: 2009.6.30.142415
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_1400_1499 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, LOCALE_JAPANESE 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CHAR_JAPANESE_CT 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_CHARSET_FARAWAY 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Does the same thing happen when you use SimpleAnalyzer, or StandardAnalyzer?

I have a sneaking suspicion that the : in your contents string is what's
causing your issue here, as : is a reserved character that denotes a
field specification. But I could be wrong.

Try swapping analyzers, if you no longer have the same issue with
Simple, try Standard. Assuming the same problem shows up there, I think
you might need to do something about the :.

Matt

k.sayama wrote:
> hello.
>
> i've tried to highlight string using Highligheter(2.4.1) and
> JapaneseAnalyzer
> but the following code extract show the problem
>
> String F = "f";
> String CONTENTS = "AAA :BBB CCC";
> JapaneseAnalyzer analyzer = new JapaneseAnalyzer();
> QueryParser qp = new QueryParser( F, analyzer );
> Query query = qp.parse( "BBB" );
> Highlighter h = new Highlighter( new QueryScorer( query, F ) );
>
> System.out.println( h.getBestFragment( analyzer, F, CONTENTS ) );
>
> The sytsem outputs
> <B>AAA</B> :BBB CCC
>
> When you change CONTENTS to "AAA _BBB CCC"
> the system outputs
>
> AAA _<B>BBB</B> CCC
>
> Are there any problems?
> Thanks in advance
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 16:07:52 2009
Return-Path: <java-user-return-41018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72230 invoked from network); 30 Jun 2009 16:07:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 16:07:51 -0000
Received: (qmail 88842 invoked by uid 500); 30 Jun 2009 16:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88784 invoked by uid 500); 30 Jun 2009 16:08:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88773 invoked by uid 99); 30 Jun 2009 16:08:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 16:08:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goodell@gmail.com designates 209.85.222.198 as permitted sender)
Received: from [209.85.222.198] (HELO mail-pz0-f198.google.com) (209.85.222.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 16:07:47 +0000
Received: by pzk36 with SMTP id 36so267171pzk.29
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 09:07:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=226WtVdtscUydyWk7tMOD88qx/jCkADEeA1XM/W/z5c=;
        b=juXNqowHlx/7X8DsZLheabzogYxuxpmJTswrvfyGyYQ5ngitwrCBqtu7ziDEVVLFQC
         odIKtcTdL2QIruayTNOO3VD9dcWISOsDrzvhaQpx8CN0WQL5yQvOzsNFBsbhws6JsKMM
         aZ0uzQPEcaOn/1K2m93iV2i687/q4Yno781IA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uAMHcBpj1hZWDHz/e4GYG78/NP+GPbqnu7gbUaomXEIIR0VrshDNr6FjdSpbnagUa6
         Pddfb06NEA06UvQld/fkYoXh08JrQ2mHX2gv+CF2CnGr/xkjS3XEdAmOBKngo62iOT+p
         Rl99aVu8YCEOmOXSlHSEdefeTQuG7WwvRNsNE=
MIME-Version: 1.0
Received: by 10.141.40.20 with SMTP id s20mr2522943rvj.164.1246378035807; Tue, 
	30 Jun 2009 09:07:15 -0700 (PDT)
In-Reply-To: <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
	 <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
	 <4A4864E7.3070609@boboco.ie>
	 <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
Date: Tue, 30 Jun 2009 09:07:15 -0700
Message-ID: <55b2c6b90906300907w6635f1f3n1e3edeef1ba843b0@mail.gmail.com>
Subject: Re: Scaling out/up or a mix
From: Andy Goodell <goodell@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1b43e148906046d9300ff
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1b43e148906046d9300ff
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I have improved date-sorted searching performance pretty dramatically by
replacing the two step "search then sort" operation with a one step "use the
date as the score" algorithm.  The main gotcha was making sure to not affect
which results get counted as hits in boolean searches, but overall I only
spent about a week on the project, and got a 60x speed improvement on the
target set. (from minutes to seconds)  YMMV however, since the app requires
the collection of the complete set of results for analysis.

- andy g

On Mon, Jun 29, 2009 at 12:47 AM, Marcus Herou
<marcus.herou@tailsweep.com>wrote:

> Thanks for the answer.
>
> Don't you think that part 1 of the email would give you a hint of nature of
> the index ?
>
> Index size(and growing): 16Gx8 = 128G
> Doc size (data): 20k
> Num docs: 90M
> Num users: Few hundred but most critical is that the admin staff which is
> using the index all day long.
> Query types: Example: title:"Iphone" OR description:"Iphone" sorted by
> publishedDate... = Very simple, no fuzzy searches etc. However since the
> dataset is large it will consume memory on sorting I guess.
>
> Could not one draw any conclusions about best-practice in terms of hardware
> given the above "specs" ?
>
> Basically I would like to know if I really need 8 cores since machines with
> dual-cpu support are the most expensive and I would like to not throw away
> money so getting it right is a matter of economy.
>
> I mean it is very simple: Let's say someone gives me a budget of 50 000 USD
> and I then want to get the most bang for the buck for my workload.
> Should I go for
> X machines with quad-core 3.0GHz, 4 disks RAID1+0, 8G RAM costing me
> 1200USD
> a piece (giving me 40 machines: 160 disks, 160 cores, 320G RAM)
> or
> X machines with dual quad-core 2.0GHz, 4 disks RAID1+0, 36G RAM costing me
> 3400 USD a piece (giving me 15 machines:  60 disks, 120 cores,  540G RAM)
>
> Basically I would like to know what factors make the workload IO bound vs
> CPU bound ?
>
> //Marcus
>
>
>
>
>
>
> On Mon, Jun 29, 2009 at 8:53 AM, Eric Bowman <ebowman@boboco.ie> wrote:
>
> > There is no single answer -- this is always application specific.
> >
> > Without knowing anything about what you are doing:
> >
> > 1. disk i/o is probably the most critical.  Go SSD or even RAM disk if
> > you can, if performance is absolutely critical
> > 2. Sometimes CPU can become an issue, but 8 cores is probably enough
> > unless you are doing especially cpu-bound searches.
> >
> > Unless you are doing something with hard performance requirements, or
> > really quite unusual, buying "good" kit is probably good enough, and you
> > won't really know for sure until you measure.  Lucene is a general
> > enough tool that there isn't a terribly universal answer to this.  We
> > were a bit surprised to end up cpu-bound instead of disk i/o-bound, for
> > instance, but we ended up taking an unusual path.  YMMV.
> >
> > Marcus Herou wrote:
> > > Hi. I think I need to be more specific.
> > >
> > > What I am trying to find out is if I should aim for:
> > >
> > > CPU (2x4 cores, 2.0-3.0Ghz)? or perhaps just a 4 cores is enough.
> > > Fast disk IO: 8 disks, RAID1+0 ? or perhaps 2 disks is enough...
> > > RAM - if the index does not fit into RAM how much RAM should I then buy
> ?
> > >
> > > Please any hints would be appreciated since I am going to invest soon.
> > >
> > > //Marcus
> > >
> > > On Sat, Jun 27, 2009 at 12:00 AM, Marcus Herou
> > > <marcus.herou@tailsweep.com>wrote:
> > >
> > >
> > >> Hi.
> > >>
> > >> I currently have an index which is 16GB per machine (8 machines =
> 128GB)
> > >> (data is stored externally, not in index) and is growing like crazy
> (we
> > are
> > >> indexing blogs which is crazy by nature) and have only allocated 2GB
> per
> > >> machine to the Lucene app since we are running some other stuff there
> in
> > >> parallell.
> > >>
> > >> Each doc should be roughly the size of a blog post, no more than 20k.
> > >>
> > >> We currently have about 90M documents and it is increasing rapidly so
> > >> getting into the G+ document range is not going to be too far away.
> > >>
> > >> Now due to search performance I think I need to move these instances
> to
> > >> dedicated index/search machines (or index on some machines and search
> on
> > >> others). Anyway I would like to get some feedback about two things:
> > >>
> > >> 1. What is the most important hardware aspect when it comes to add
> > document
> > >> to the index and optimize it.
> > >> 1.1 Is it disk I|O write throghput ? (sequential or random-io ?)
> > >> 1.2 Is it RAM ?
> > >> 1.3 Is is CPU ?
> > >>
> > >> My guess would be disk-io, right, wrong ?
> > >>
> > >> 2. What is the most important hardware aspect when it comes to
> searching
> > >> documents in my setup ? (result-set is limited to return only the top
> 10
> > >> matches with page handling)
> > >> 2.1 Is it disk read throughput ? (sequential or random-io ?)
> > >> 2.2 Is it RAM ?
> > >> 2.3 Is is CPU ?
> > >>
> > >> I have no clue since the data might not fit into memory. What is then
> > the
> > >> most important factor ? read-performance while scanning the index ?
> CPU
> > >> while comparing fields and collecting results ?
> > >>
> > >> What I'm trying to find out is what I can do to get most bang for the
> > buck
> > >> with a limited (aren't we all limited?) budget.
> > >>
> > >> Kindly
> > >>
> > >> //Marcus
> > >>
> > >>
> > >>
> > >>
> > >>
> > >> --
> > >> Marcus Herou CTO and co-founder Tailsweep AB
> > >> +46702561312
> > >> marcus.herou@tailsweep.com
> > >> http://www.tailsweep.com/
> > >>
> > >>
> > >>
> > >
> > >
> > >
> >
> >
> > --
> > Eric Bowman
> > Boboco Ltd
> > ebowman@boboco.ie
> > http://www.boboco.ie/ebowman/pubkey.pgp
> > +35318394189/+353872801532<
> http://www.boboco.ie/ebowman/pubkey.pgp%0A+35318394189/+353872801532>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Marcus Herou CTO and co-founder Tailsweep AB
> +46702561312
> marcus.herou@tailsweep.com
> http://www.tailsweep.com/
>

--000e0cd1b43e148906046d9300ff--

From java-user-return-41019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 16:13:47 2009
Return-Path: <java-user-return-41019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75163 invoked from network); 30 Jun 2009 16:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 16:13:46 -0000
Received: (qmail 6807 invoked by uid 500); 30 Jun 2009 16:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6770 invoked by uid 500); 30 Jun 2009 16:13:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6760 invoked by uid 99); 30 Jun 2009 16:13:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 16:13:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 16:13:43 +0000
Received: from [192.168.0.105] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id D252973326
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 09:13:22 -0700 (PDT)
Message-Id: <6422312C-F126-46B3-AF56-CF4F53D7EA1F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <887519.41580.qm@web56208.mail.re3.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: A simple Vector Space Model and TFIDF usage
Date: Tue, 30 Jun 2009 12:13:21 -0400
References: <887519.41580.qm@web56208.mail.re3.yahoo.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 29, 2009, at 3:10 PM, Amir Hossein Jadidinejad wrote:

> Hi,
> It's my first experiment with Lucene. Please help me.
> I'm going to index a set of documents and create a feature vector  
> for each of them. This vector contains all terms belong to the  
> document that weight using TFIDF.
> After that I want to compute the cosine similarity between all  
> documents and produce a doc-doc similarity matrix. My document set  
> is large and it's important to have a scalable implementation.


See Mahout (http://lucene.apache.org/mahout).  In the utils module, is  
a class called LuceneIterable that the o.a.mahout.utils.vectors.Driver  
program can use to convert a Lucene index into a Mahout Vector  
representation, which can then be used to create a d-d similarity  
matrix.  It uses Hadoop, so you can go as big as you want.

See http://cwiki.apache.org/confluence/display/MAHOUT/Creating+Vectors+from+Text

-Grant

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 16:18:43 2009
Return-Path: <java-user-return-41020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77561 invoked from network); 30 Jun 2009 16:18:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 16:18:43 -0000
Received: (qmail 17822 invoked by uid 500); 30 Jun 2009 16:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17757 invoked by uid 500); 30 Jun 2009 16:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17747 invoked by uid 99); 30 Jun 2009 16:18:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 16:18:51 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 16:18:41 +0000
Received: from [192.168.0.105] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 7A5321FCF6
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 09:18:19 -0700 (PDT)
Message-Id: <B4A8E256-B0DE-4AF1-9682-F7C2704A6BDD@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <227e01c9f955$93544680$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Term Frequency vector consumes memory
X-Priority: 3
Date: Tue, 30 Jun 2009 12:18:18 -0400
References: <227e01c9f955$93544680$710bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

In Lucene, a Term Vector is a specific thing that is stored on disk  
when creating a Document and Field.  It is optional and off by  
default.  It is separate from being able to get the term frequencies  
for all the docs in a specific field.  The former is decided at  
indexing time and there is no way to remove it w/o reindexing.   
Furthermore, it is not loaded into memory by the IndexReader.  Term  
Frequencies are accessed via the TermDocs.

Can you clarify a bit more what you are looking to do?  Perhaps some  
sample code will help demonstrate what you'd like to turn off, as I am  
not clear on your question.

Cheers,
Grant

On Jun 30, 2009, at 3:37 AM, Ganesh wrote:

> At the end of the day, I used to build the stats of top indexed  
> terms. I enabled term frequency for the single field. It is working  
> fine. I could able to get the top terms and its frequencies. It  
> consumes huge amount of RAM. My index size is 5 GB and has 8 million  
> records. If i didn't enable term vector then i could do index up to  
> 17 GB with 40 million records.
>
> When IndexReader/ Searcher is opened, whether it will load all term  
> vector frequncies?
>
> Consider i have enabled this option and indexed say 5GB, Now i don't  
> want the Reader / Searcher to load term vector. I want to switch off  
> this feature? Is that possible without re-indexing?
>
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 18:02:41 2009
Return-Path: <java-user-return-41021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28070 invoked from network); 30 Jun 2009 18:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 18:02:41 -0000
Received: (qmail 85671 invoked by uid 500); 30 Jun 2009 18:02:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85622 invoked by uid 500); 30 Jun 2009 18:02:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85583 invoked by uid 99); 30 Jun 2009 18:02:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 18:02:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 18:02:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLhes-0001qj-8s
	for java-user@lucene.apache.org; Tue, 30 Jun 2009 11:02:18 -0700
Message-ID: <24276724.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 11:02:18 -0700 (PDT)
From: chandrakant k <chandrakantk@gmail.com>
To: java-user@lucene.apache.org
Subject: Query which gives high score proportional to 'distinct term
 matches'
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: chandrakantk@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a index which has got fields like 

title :
content :

If I search for, lets say  obama fly ,  then the documents having obama and
fly should be given high scores irrespective of the number of times they may
occur. This requirement is for fields -  title and content.

The implementation which I did with a simple OR query will score high the
documents for e.g.
 having more occurrence of 'obama'  even if it has no occurrence  'fly' word
in it. The tf for 'obama' here in this case is more; so even if 'fly' word
is not present the document is scored higher.

Expected behaviour is that - 
(a)  documents having 'obama' and 'fly' both should be scored higher in
order of their tf .
(b)  documents having either of terms should be given scores but less than
those matched in (a)

I tried by overiding the the coord() in a Custom Similarity implementation
and boosting it if multiple terms match, but what I see is that coord() is
gets boosted even if same word matches in multiple fields (say obama is
present in title: and content: ).

Searching for solutions, I have not got any results which talk about similar
requirement... I guess I am not using right keywords....

Thanks
Chandrakant K.




  
-- 
View this message in context: http://www.nabble.com/Query-which-gives-high-score-proportional-to-%27distinct-term-matches%27-tp24276724p24276724.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 18:44:57 2009
Return-Path: <java-user-return-41022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54067 invoked from network); 30 Jun 2009 18:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 18:44:57 -0000
Received: (qmail 40455 invoked by uid 500); 30 Jun 2009 18:45:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40385 invoked by uid 500); 30 Jun 2009 18:45:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40375 invoked by uid 99); 30 Jun 2009 18:45:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 18:45:06 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.210] (HELO exprod7og127.obsmtp.com) (64.18.2.210)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Jun 2009 18:44:56 +0000
Received: from source ([12.111.23.142]) (using TLSv1) by exprod7ob127.postini.com ([64.18.6.12]) with SMTP
	ID DSNKSkpdCXZ+uYubIZ9uWKhovFTclSqzZNbi@postini.com; Tue, 30 Jun 2009 11:44:36 PDT
Received: from [10.10.1.79] (10.10.1.79) by ALGOMODEXF.ALGOMOD.COM
 (10.10.0.148) with Microsoft SMTP Server id 8.1.358.0; Tue, 30 Jun 2009
 14:41:47 -0400
Message-ID: <4A4A5C6B.6040409@jobdiva.com>
Date: Tue, 30 Jun 2009 14:41:47 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Thunderbird 2.0.0.21 (Windows/20090302)
MIME-Version: 1.0
To: <java-user@lucene.apache.org>
Subject: Lucene 2.9
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

is there an ETA for Lucene 2.9 release?

-siraj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 18:46:18 2009
Return-Path: <java-user-return-41023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54303 invoked from network); 30 Jun 2009 18:46:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 18:46:18 -0000
Received: (qmail 42832 invoked by uid 500); 30 Jun 2009 18:46:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42756 invoked by uid 500); 30 Jun 2009 18:46:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42746 invoked by uid 99); 30 Jun 2009 18:46:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 18:46:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 18:46:17 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n5UIjrMN019945
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 14:45:54 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A4A5D61.2080508@informatics.jax.org>
Date: Tue, 30 Jun 2009 14:45:53 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query which gives high score proportional to 'distinct term matches'
References: <24276724.post@talk.nabble.com>
In-Reply-To: <24276724.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.4.371499, Antispam-Engine: 2.7.1.369594, Antispam-Data: 2009.6.30.183625
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_1900_1999 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Well, we have a very similar requirement here, but for us its for every 
single field that we wanted this kind of behavior.

We got this in by eliminating the TF (Term Frequency) contribution to 
score via a custom Similarity. (Which is very easy to do.)

I... think in the newer versions of lucene you can omit TF more 
programatically at query time, but I don't recall if you could do it on 
a per field basis.  Anyone else want to speak on this a bit better?

Matt

chandrakant k wrote:
> I have a index which has got fields like 
>
> title :
> content :
>
> If I search for, lets say  obama fly ,  then the documents having obama and
> fly should be given high scores irrespective of the number of times they may
> occur. This requirement is for fields -  title and content.
>
> The implementation which I did with a simple OR query will score high the
> documents for e.g.
>  having more occurrence of 'obama'  even if it has no occurrence  'fly' word
> in it. The tf for 'obama' here in this case is more; so even if 'fly' word
> is not present the document is scored higher.
>
> Expected behaviour is that - 
> (a)  documents having 'obama' and 'fly' both should be scored higher in
> order of their tf .
> (b)  documents having either of terms should be given scores but less than
> those matched in (a)
>
> I tried by overiding the the coord() in a Custom Similarity implementation
> and boosting it if multiple terms match, but what I see is that coord() is
> gets boosted even if same word matches in multiple fields (say obama is
> present in title: and content: ).
>
> Searching for solutions, I have not got any results which talk about similar
> requirement... I guess I am not using right keywords....
>
> Thanks
> Chandrakant K.
>
>
>
>
>   
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 18:52:12 2009
Return-Path: <java-user-return-41024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58109 invoked from network); 30 Jun 2009 18:52:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 18:52:12 -0000
Received: (qmail 51610 invoked by uid 500); 30 Jun 2009 18:52:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51544 invoked by uid 500); 30 Jun 2009 18:52:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51534 invoked by uid 99); 30 Jun 2009 18:52:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 18:52:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 18:52:12 +0000
Received: by yxe12 with SMTP id 12so544125yxe.29
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 11:51:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4kBqpfoxiGMpmcNcShFo5KI+eWOVo4FzdpViFmWg7tE=;
        b=p0nHlk7roUjy1gLaUPWXf7jD17HF7cWILp2yrKjpR0EXHBGXhkTUjrItXKtfvew0RQ
         lPXDitOgZJ95KWQSTri57S1BuMQsioz7zWphSbiTx+q2I5t52+YmYGW8N37IK30JS03V
         aK+2EgSg9TBu+6PYvw0POvRiMo+fLUseEp8Oc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=fZnf2qwmQo6Z0wJFKYDhmlApTGb8eQNygZe36ovfWyRkAeBgybdtxiAMKi+JUDkihI
         4v2RTIxiBO0P6qD/2CgyKnZfaGqPzRVksY363I1397nQXQsk5HkHEVRqBKqYUnhDsxTJ
         hr2r2LA1wbybA/dPSmNeRmXn3A5PoJD3+F+0o=
MIME-Version: 1.0
Received: by 10.100.106.13 with SMTP id e13mr11571213anc.190.1246387910132; 
	Tue, 30 Jun 2009 11:51:50 -0700 (PDT)
In-Reply-To: <4A4A5C6B.6040409@jobdiva.com>
References: <4A4A5C6B.6040409@jobdiva.com>
Date: Tue, 30 Jun 2009 14:51:50 -0400
Message-ID: <ab0709bf0906301151h6e5d9149m98d190481d6818b3@mail.gmail.com>
Subject: Re: Lucene 2.9
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e644bc58a2c328046d954c06
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e644bc58a2c328046d954c06
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I hope July. Could easily be August though. I'm kicking and screaming to get
it out soon though. Its been hurting my high brow reputation.

On Tue, Jun 30, 2009 at 2:41 PM, Siraj Haider <siraj@jobdiva.com> wrote:

> is there an ETA for Lucene 2.9 release?
>
> -siraj
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e644bc58a2c328046d954c06--

From java-user-return-41025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 20:27:29 2009
Return-Path: <java-user-return-41025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95436 invoked from network); 30 Jun 2009 20:27:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 20:27:29 -0000
Received: (qmail 90723 invoked by uid 500); 30 Jun 2009 20:27:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90667 invoked by uid 500); 30 Jun 2009 20:27:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90657 invoked by uid 99); 30 Jun 2009 20:27:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 20:27:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oren.liat@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 20:27:29 +0000
Received: by fxm28 with SMTP id 28so431348fxm.5
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 13:27:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=FGqx9202EZy5UC8KtNdqyPn9C9+qTq0jKDDXC1Lb8qw=;
        b=a0XvNnm5fxgYY0GJzDhY4sm4OxqV8AunzW+QkUN8xxIrlpi0HHbUqCe32NWKjgbrDD
         y+ZEYyeqYTVRijYFUX8ZeiFeFeqgHekWBPxk2fsHGyhDhoxH1D4UORvRrz7wUuu50c/7
         VtXMH2bXtaVSsb/9vNIKly80VYoEc4Jj/BF4w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gbU4/LpeUDukNcjUBArsNbOvjiTCm1t/WUeGSiOwlwqkzDZJAP1WKyDhm/Ck5XLys6
         uAthnEgtSyIZv46vutjCkQnkFYDszplaZOIspnjEaoZzFc+oMFsSZzvHmYlYJTKGtynG
         Lb0HSxRDO7HTQm9P4df4TUfJUYf9jAbZGuo5U=
MIME-Version: 1.0
Received: by 10.86.35.18 with SMTP id i18mr2923294fgi.8.1246393628302; Tue, 30 
	Jun 2009 13:27:08 -0700 (PDT)
In-Reply-To: <f18c9dde0906300610g6703b083r11290506741db94a@mail.gmail.com>
References: <d36c28c30906280539o7a34e3ffo10102e10ea162023@mail.gmail.com>
	 <f18c9dde0906300610g6703b083r11290506741db94a@mail.gmail.com>
Date: Tue, 30 Jun 2009 16:27:08 -0400
Message-ID: <d36c28c30906301327y255fdd40o28c0b664a8856c1e@mail.gmail.com>
Subject: Re: MultiSegmentReader problems - current is null
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=000e0cd24216771cb3046d96a187
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd24216771cb3046d96a187
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Ok, thanks a lot - I iwll try that tomorrow

Best,
Liat

2009/6/30 Simon Willnauer <simon.willnauer@googlemail.com>

> Hi,
> On Sun, Jun 28, 2009 at 2:39 PM, liat oren<oren.liat@gmail.com> wrote:
> > Hi,
> >
> > I have an index that is a multi-segment index (how come it is created
> this
> > way?)
> >
> > When I try to get the freq of a term at the following way:
> >   TermDocs tDocs = this.indexReader.termDocs(term);
> >   tf = tDocs.freq();
> > the greq method :
> >  public int freq()
> >  {
> >   return current.freq();
> >  }
> > is in MultiSegmentReader.
> >
> > The current is null, so I get an exception.
> same answer as in the last email you must call TermDocs#next() this
> will set TermDocs#current
>
> TermDocs tDocs = this.indexReader.termDocs(term);
> tDocs.next()
>  tf = tDocs.freq();
>
> simon
> >
> > Should I initialize current?
> > How can I avoid this problem?
> > How can I avoid having a multi-segment index?
> >
> > Many thanks,
> > Liat
> >
>
>  ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd24216771cb3046d96a187--

From java-user-return-41026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 21:00:06 2009
Return-Path: <java-user-return-41026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7077 invoked from network); 30 Jun 2009 21:00:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 21:00:06 -0000
Received: (qmail 27262 invoked by uid 500); 30 Jun 2009 21:00:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27208 invoked by uid 500); 30 Jun 2009 21:00:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27198 invoked by uid 99); 30 Jun 2009 21:00:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 21:00:14 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.218.228] (HELO mail-bw0-f228.google.com) (209.85.218.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 21:00:03 +0000
Received: by bwz28 with SMTP id 28so445028bwz.5
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 13:59:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.111.211 with SMTP id t19mr5674480fap.64.1246395580335; 
	Tue, 30 Jun 2009 13:59:40 -0700 (PDT)
In-Reply-To: <1246351752.3464.18.camel@pc286>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
	 <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
	 <4A4864E7.3070609@boboco.ie>
	 <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
	 <1246351752.3464.18.camel@pc286>
Date: Tue, 30 Jun 2009 22:59:40 +0200
Message-ID: <7e536b1f0906301359g3b7d1259v18987e82466ff48f@mail.gmail.com>
Subject: Re: Scaling out/up or a mix
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Content-Type: multipart/alternative; boundary=0016e6d37661d0c9c7046d9715d0
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d37661d0c9c7046d9715d0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi.

The number of concurrent users today is insignficant but once we push for
the service we will get into trouble... I know that since even one simple
faceting query (which we will use to display trend graphs) can take forever
(talking about SOLR bytw). "Normal" Lucene queries (title:blah OR
description:blah) timing is reasonable for the current hardware but not good
(Currently 8 machines 2GB RAM each serving 130G index). It takes less than
10 secs at all times which of course is very bad user experience.

If someone need to understand more about the nature of this app I think we
are quite alike technorati (if we would show all bling-bling) or twingly.com.
Basically a blogsearch app.

Example of a public query (no sorting on publisheddate but rather on
relevance = faster):
http://blogsearch.tailsweep.com/search.do?wa=test&la=all

And while you are at it, look at our cool BlogSpace:
http://blogsearch.tailsweep.com/showFeed.do?feedId=114799

Sorry not meaning to advertise but I could not help it :)


//Marcus




On Tue, Jun 30, 2009 at 10:49 AM, Toke Eskildsen <te@statsbiblioteket.dk>wrote:

> On Mon, 2009-06-29 at 09:47 +0200, Marcus Herou wrote:
> > Index size(and growing): 16Gx8 = 128G
> > Doc size (data): 20k
> > Num docs: 90M
> > Num users: Few hundred but most critical is that the admin staff which is
> > using the index all day long.
> > Query types: Example: title:"Iphone" OR description:"Iphone" sorted by
> > publishedDate... = Very simple, no fuzzy searches etc. However since the
> > dataset is large it will consume memory on sorting I guess.
> >
> > Could not one draw any conclusions about best-practice in terms of
> hardware
> > given the above "specs" ?
>
> Can you give us an estimate of the number of concurrent searches in
> prime time and in what range a satisfactory response time would be?
>
> Going for a fully RAM-based search on a corpus of this size would mean
> that each machine holds about 30GB of index (taken from your hardware
> suggestion). I would expect that such a machine would be able to serve
> something like 500-1000 searches/second (highly dependent on the index
> and the searches, but what you're describing sounds simple enough) if we
> just measure the raw search time and lookup of one or two fields for the
> first 20 hits. It that what you're aiming for?
>
> Wrapping in web services and such lowers the number of searches that can
> be performed, which makes the RAM-option even more expensive relative to
> a harddisk or SSD solution.
>
> > I mean it is very simple: Let's say someone gives me a budget of 50 000
> USD
> > and I then want to get the most bang for the buck for my workload.
>
> I am a bit unclear on your overall goal. Do you expect the number of
> users to grow significantly?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/

--0016e6d37661d0c9c7046d9715d0--

From java-user-return-41027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 30 21:08:10 2009
Return-Path: <java-user-return-41027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10376 invoked from network); 30 Jun 2009 21:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jun 2009 21:08:10 -0000
Received: (qmail 44036 invoked by uid 500); 30 Jun 2009 21:08:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43966 invoked by uid 500); 30 Jun 2009 21:08:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43956 invoked by uid 99); 30 Jun 2009 21:08:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 21:08:19 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.218.228] (HELO mail-bw0-f228.google.com) (209.85.218.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jun 2009 21:08:08 +0000
Received: by bwz28 with SMTP id 28so449364bwz.5
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 14:07:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.126.66 with SMTP id b2mr5675995fas.3.1246396066182; Tue, 
	30 Jun 2009 14:07:46 -0700 (PDT)
In-Reply-To: <2AA74AED54C84D71A9BD9AA043A911EF@VEGA>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
	 <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
	 <4A4864E7.3070609@boboco.ie>
	 <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
	 <1246351752.3464.18.camel@pc286>
	 <2AA74AED54C84D71A9BD9AA043A911EF@VEGA>
Date: Tue, 30 Jun 2009 23:07:46 +0200
Message-ID: <7e536b1f0906301407u24466aebjf5e467edbf028cbf@mail.gmail.com>
Subject: Re: Scaling out/up or a mix
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Cc: te@statsbiblioteket.dk
Content-Type: multipart/alternative; boundary=001636c5a435c64f4c046d97327a
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a435c64f4c046d97327a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi, like the sound of this.

What I am not familiar with in terms of Lucene is how the index get's
swapped in and out of memory. When it comes to database tables (non
partitionable tables at least) I know that one should have enough memory to
fit the entire index into memory to avoid file-sorts for instance which of
course is slow.

If one operates mostly on the newest added entries will those always be
mapped into a cache or something.

How should I think ?

Hmmm... I think now that I need to create a rotation-partition scheme where
I separate cold (old entries) and warm entries...

/M


On Tue, Jun 30, 2009 at 11:29 AM, Uwe Schindler <uschindler@pangaea.de>wrote:

> > On Mon, 2009-06-29 at 09:47 +0200, Marcus Herou wrote:
> > > Index size(and growing): 16Gx8 = 128G
> > > Doc size (data): 20k
> > > Num docs: 90M
> > > Num users: Few hundred but most critical is that the admin staff which
> > is
> > > using the index all day long.
> > > Query types: Example: title:"Iphone" OR description:"Iphone" sorted by
> > > publishedDate... = Very simple, no fuzzy searches etc. However since
> the
> > > dataset is large it will consume memory on sorting I guess.
> > >
> > > Could not one draw any conclusions about best-practice in terms of
> > hardware
> > > given the above "specs" ?
> >
> > Can you give us an estimate of the number of concurrent searches in
> > prime time and in what range a satisfactory response time would be?
> >
> > Going for a fully RAM-based search on a corpus of this size would mean
> > that each machine holds about 30GB of index (taken from your hardware
> > suggestion). I would expect that such a machine would be able to serve
> > something like 500-1000 searches/second (highly dependent on the index
> > and the searches, but what you're describing sounds simple enough) if we
> > just measure the raw search time and lookup of one or two fields for the
> > first 20 hits. It that what you're aiming for?
> >
> > Wrapping in web services and such lowers the number of searches that can
> > be performed, which makes the RAM-option even more expensive relative to
> > a harddisk or SSD solution.
>
> I would never say: "I copy an index into a RAMDirectory or something like
> that". I would buy enough RAM to fit as most as possible into RAM and (as
> we
> for sure are on a 64bit platform) use MMapDirectory instead of
> SimpleFSDirectory or NIOFSDirectory (I am talking with Lucene 2.9 class
> names, where FSDirs can be simply instantiated, as you may have noticed).
> MMapDirectory uses the index like a swap file that is mapped into address
> space. The OS kernel's will then use the index like RAM and map it into
> real
> RAM as needed. We had the discussion a lot of times in this mailing list
> (search for MMapDirectory in the archives). So the simple answer is always:
> If 64 bit platform with lots of RAM, use MMapDirectory. On Windows this is
> still buggy (but with 2.9 there is a workaround in MMapDirectory). When you
> warm your searchers before (I think you will do...), the Operating system
> kernel will "swap" in as much as possible from the index.
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/

--001636c5a435c64f4c046d97327a--

