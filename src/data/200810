From java-user-return-36430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 07:44:35 2008
Return-Path: <java-user-return-36430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89085 invoked from network); 1 Oct 2008 07:44:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 07:44:35 -0000
Received: (qmail 84077 invoked by uid 500); 1 Oct 2008 07:44:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83008 invoked by uid 500); 1 Oct 2008 07:44:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82997 invoked by uid 99); 1 Oct 2008 07:44:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 00:44:26 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 07:43:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KkwNJ-0005ah-T6
	for java-user@lucene.apache.org; Wed, 01 Oct 2008 00:43:57 -0700
Message-ID: <19755932.post@talk.nabble.com>
Date: Wed, 1 Oct 2008 00:43:57 -0700 (PDT)
From: agatone <zoran.zoki@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene vs. Database
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: zoran.zoki@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 
I asked this question already on "lucene-general" list but also got advised
to ask here too.

I'm working on a project that has big database in the background (some
tables have about 1500000 rows). We decided to use Lucene for "faster"
search. Our search works similar as all searches: you write search string,
get list of hits with detail link. But there is dilemma if we should store
more data into index than it's needed. 

One side of developing team insists that we should use lucene index as
somekind of storage for data so when you get hit, you go onto details and
then again use lucene to find document that matches the selected ID and take
the data from Lucene index. So in the end you end with copying complete
database tables into the lucene index.

Other side insists on storing to index only data that is displayed directly
to the user when showing the search results list and needed for search
criteria. When you go onto details, you have the matching ID so you can
pickup that row from database by that ID rather than search it inside Lucene
index. 

Can someone please describe drawbacks and advantages of both approaches.
Actually can someone write down what's the actual profit, where and when of
the Lucene itself in real production env. 

IT would be great if there is anyone who could write his experience with
indexing and searching large amount of data.


Thank you
-- 
View this message in context: http://www.nabble.com/Lucene-vs.-Database-tp19755932p19755932.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 07:56:50 2008
Return-Path: <java-user-return-36431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95548 invoked from network); 1 Oct 2008 07:56:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 07:56:49 -0000
Received: (qmail 92483 invoked by uid 500); 1 Oct 2008 07:56:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92457 invoked by uid 500); 1 Oct 2008 07:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92446 invoked by uid 99); 1 Oct 2008 07:56:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 00:56:40 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [89.107.64.151] (HELO server1.primetide.net) (89.107.64.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 07:55:35 +0000
Received: from [192.168.0.143] (ip-81-210-201-144.unitymediagroup.de [81.210.201.144])
	(authenticated bits=0)
	by server1.primetide.net (8.14.0/8.14.0) with ESMTP id m919vFMx017875
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 1 Oct 2008 11:57:16 +0200
Message-Id: <DFA17995-743E-4F03-8A5E-47BCEE775862@evenity.net>
From: Sascha Fahl <sascha@evenity.net>
To: java-user@lucene.apache.org
In-Reply-To: <19755932.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene vs. Database
Date: Wed, 1 Oct 2008 09:55:58 +0200
References: <19755932.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
there is a big conceptual difference. Lucene is working with an =20
inverted index what
means that you have a list of words (terms) having a list of all =20
documents that contain
these word (term). Databases usually are working with normal indexes =20
what means
you have a document describing the words (terms) it contains. =46rom my =20=

perspective
you should use a database for the details querys for a very simple =20
reason. Querying
a document by its database id is quite fast. Depending on your DMBS =20
the document
id is the primary key, what means you have a fast datastructure (often =20=

some B-Tree
like stuff) to access the data behind the id. In lucene you had to =20
query the inverted index
that should be organized in a way that you can access it like the B-=20
Tree. But the fact
that your database probably is something written in C makes file =20
access with your
db a lot faster.

So as a conclusion. Use the db. At first the lucene index was not =20
designed for queries like
the id query and secondly file access with your db should give you a =20
better performance.


Am 01.10.2008 um 09:43 schrieb agatone:

>
> Hi,
> I asked this question already on "lucene-general" list but also got =20=

> advised
> to ask here too.
>
> I'm working on a project that has big database in the background (some
> tables have about 1500000 rows). We decided to use Lucene for "faster"
> search. Our search works similar as all searches: you write search =20
> string,
> get list of hits with detail link. But there is dilemma if we should =20=

> store
> more data into index than it's needed.
>
> One side of developing team insists that we should use lucene index as
> somekind of storage for data so when you get hit, you go onto =20
> details and
> then again use lucene to find document that matches the selected ID =20=

> and take
> the data from Lucene index. So in the end you end with copying =20
> complete
> database tables into the lucene index.
>
> Other side insists on storing to index only data that is displayed =20
> directly
> to the user when showing the search results list and needed for search
> criteria. When you go onto details, you have the matching ID so you =20=

> can
> pickup that row from database by that ID rather than search it =20
> inside Lucene
> index.
>
> Can someone please describe drawbacks and advantages of both =20
> approaches.
> Actually can someone write down what's the actual profit, where and =20=

> when of
> the Lucene itself in real production env.
>
> IT would be great if there is anyone who could write his experience =20=

> with
> indexing and searching large amount of data.
>
>
> Thank you
> --=20
> View this message in context: =
http://www.nabble.com/Lucene-vs.-Database-tp19755932p19755932.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

Sascha Fahl
Softwareentwicklung

evenity GmbH
Zu den M=FChlen 19
D-35390 Gie=DFen

Mail: sascha@evenity.net









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 08:09:02 2008
Return-Path: <java-user-return-36432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2925 invoked from network); 1 Oct 2008 08:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 08:09:01 -0000
Received: (qmail 1829 invoked by uid 500); 1 Oct 2008 08:08:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1800 invoked by uid 500); 1 Oct 2008 08:08:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1789 invoked by uid 99); 1 Oct 2008 08:08:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 01:08:53 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 08:07:51 +0000
Received: by rv-out-0506.google.com with SMTP id f6so409492rvb.5
        for <java-user@lucene.apache.org>; Wed, 01 Oct 2008 01:08:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Ue6egysynA3is6Gf7gGLxsSStt2OIN+G5RsQl/VcsnI=;
        b=huq5/eB/0lDaut91Q8S3BNEPKs5FKCRxYFMl5BBz2OqcrtHvWyLBe48c3jcyJVeZXi
         fUr55752LQM03uRSIZXu9odNAXGOZ7MzJCGJ2iU9kkwFGvKwC0oS6GCTGfwif1yd9Fn1
         p4JUmxrGMrDvefnlaiBn5dtrzuHB8RA19tMDQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hXc3wjHDFPgRpRX8SDhunSHstbHKiar1YrbXunBLOgcQcf1CMSIiHSwyh/AUyXQSrT
         4tR11Qp8wo34yNTsSc3KaHO1GWi7Mj18S7rhWffSkjOuY6NtEUkJoPTJjOOYHi8aTXFc
         nucK+3qLlhc5kf1VVFPYetCfJgJxJgGDRXUW4=
Received: by 10.142.88.4 with SMTP id l4mr3236296wfb.238.1222848505763;
        Wed, 01 Oct 2008 01:08:25 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Wed, 1 Oct 2008 01:08:25 -0700 (PDT)
Message-ID: <6e3ae6310810010108p1639833btaf7457dce62e3cd4@mail.gmail.com>
Date: Wed, 1 Oct 2008 01:08:25 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database
In-Reply-To: <19755932.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8094_16950858.1222848505761"
References: <19755932.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8094_16950858.1222848505761
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Since you have a lot of data, it wouldn't be wise to put those extra data
into Lucene index for storage. You will need to keep the data in sync, and
update those extra data in lucene index unnecessarily.
Lucene index is just like B-Tree index in database. It's just an auxiliary
data structure, and it'll consume resources to maintain the data structure.

So basically, using Lucene index as a storage would depend on how often you
data are updated.

The cut-off line usually is to put data that you will need to render search
results into Lucene index. And after user click on one of the search result,
just use database later on. But this isn't always correct. When you have 10
result per page, selecting the details from the database based on ids may
not be that costly at all.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Wed, Oct 1, 2008 at 12:43 AM, agatone <zoran.zoki@gmail.com> wrote:

>
> Hi,
> I asked this question already on "lucene-general" list but also got advised
> to ask here too.
>
> I'm working on a project that has big database in the background (some
> tables have about 1500000 rows). We decided to use Lucene for "faster"
> search. Our search works similar as all searches: you write search string,
> get list of hits with detail link. But there is dilemma if we should store
> more data into index than it's needed.
>
> One side of developing team insists that we should use lucene index as
> somekind of storage for data so when you get hit, you go onto details and
> then again use lucene to find document that matches the selected ID and
> take
> the data from Lucene index. So in the end you end with copying complete
> database tables into the lucene index.
>
> Other side insists on storing to index only data that is displayed directly
> to the user when showing the search results list and needed for search
> criteria. When you go onto details, you have the matching ID so you can
> pickup that row from database by that ID rather than search it inside
> Lucene
> index.
>
> Can someone please describe drawbacks and advantages of both approaches.
> Actually can someone write down what's the actual profit, where and when of
> the Lucene itself in real production env.
>
> IT would be great if there is anyone who could write his experience with
> indexing and searching large amount of data.
>
>
> Thank you
> --
> View this message in context:
> http://www.nabble.com/Lucene-vs.-Database-tp19755932p19755932.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8094_16950858.1222848505761--

From java-user-return-36433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 08:22:57 2008
Return-Path: <java-user-return-36433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7902 invoked from network); 1 Oct 2008 08:22:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 08:22:57 -0000
Received: (qmail 15905 invoked by uid 500); 1 Oct 2008 08:22:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15874 invoked by uid 500); 1 Oct 2008 08:22:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15863 invoked by uid 99); 1 Oct 2008 08:22:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 01:22:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.183.155] (HELO n7a.bullet.ukl.yahoo.com) (217.146.183.155)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Oct 2008 08:21:44 +0000
Received: from [217.12.4.214] by n7.bullet.ukl.yahoo.com with NNFMP; 01 Oct 2008 08:22:16 -0000
Received: from [87.248.111.146] by t1.bullet.ukl.yahoo.com with NNFMP; 01 Oct 2008 08:22:16 -0000
Received: from [127.0.0.1] by omp203.mail.ukl.yahoo.com with NNFMP; 01 Oct 2008 08:22:16 -0000
X-Yahoo-Newman-Id: 503531.61865.bm@omp203.mail.ukl.yahoo.com
Received: (qmail 42803 invoked from network); 1 Oct 2008 08:22:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=GUBmUJrjgHSnIpp78TtQYnuiS1J5V3gcIpSjNnFuT0blBPiCMY5XwmWdrxUWB94DhGo0Lzypo+8yQ/Wy2hVB95azvBdc96kUuoE2kZGsUyqfYElbtuj322tZPJG8h7wXiC0Ypa6O6sN7gRQoi6PI1l/R7I3DwzsP33O+oZdoLb4=  ;
Received: from unknown (HELO ?192.168.2.3?) (markharw00d@194.106.34.5 with plain)
  by smtp145.mail.ukl.yahoo.com with SMTP; 1 Oct 2008 08:22:16 -0000
X-YMail-OSG: Qi37wuoVM1khEeS0IElxrAF_D6s0waYYDuN10tM.DflVVZB_q7cx26xP3rfaQLcpv5l1qflte3TavUrFGjVW_rilWcPIXuhT.P8nCAVDdGyyQAxukGIjv0crXI9_RIBFKYp8n2ph_MGtYqOM7Zu_nNcv
X-Yahoo-Newman-Property: ymail-3
Message-ID: <48E33332.2020708@yahoo.co.uk>
Date: Wed, 01 Oct 2008 09:22:10 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database
References: <19755932.post@talk.nabble.com>
In-Reply-To: <19755932.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Pros of keeping content only in the database
* Need only one stored copy of data (saved disk space)

Pros of storing copy of content in Lucene:

* A match is more easily explained
If you collapse multiple DB fields into a single searchable field e.g. 
customer first name and surname database field into a single Lucene 
"name" field it is easier to get highlighting to work with the actual 
data that was searched ("name") than trying to piece together what this 
was made from in the DB and apply highlighting. Not impossible to 
overcome but just more work to bear in mind.

* A match result is guaranteed consistent -
If there is a time lag between database update and search indexing 
(which there invariably is) then you could match a search on a value 
that is no longer stored in the database.

* Speed of content retrieval
Lucene doc retrievals using internal Lucene doc ids and selective field 
loading may prove to be faster than hitting the DB with "select X from 
table where key in (matchKey1, matchKey2....)". Remember you have to 
read Lucene docs anyway to get the "matchKeyX" value for your SQL statement.
Only benchmarking will tell how much faster this is if at all. It does 
depend on your doc sizes/number of fields shown etc

Cheers
Mark




agatone wrote:
> Hi, 
> I asked this question already on "lucene-general" list but also got advised
> to ask here too.
>
> I'm working on a project that has big database in the background (some
> tables have about 1500000 rows). We decided to use Lucene for "faster"
> search. Our search works similar as all searches: you write search string,
> get list of hits with detail link. But there is dilemma if we should store
> more data into index than it's needed. 
>
> One side of developing team insists that we should use lucene index as
> somekind of storage for data so when you get hit, you go onto details and
> then again use lucene to find document that matches the selected ID and take
> the data from Lucene index. So in the end you end with copying complete
> database tables into the lucene index.
>
> Other side insists on storing to index only data that is displayed directly
> to the user when showing the search results list and needed for search
> criteria. When you go onto details, you have the matching ID so you can
> pickup that row from database by that ID rather than search it inside Lucene
> index. 
>
> Can someone please describe drawbacks and advantages of both approaches.
> Actually can someone write down what's the actual profit, where and when of
> the Lucene itself in real production env. 
>
> IT would be great if there is anyone who could write his experience with
> indexing and searching large amount of data.
>
>
> Thank you
>   
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.173 / Virus Database: 270.7.5/1700 - Release Date: 9/30/2008 11:03 AM
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 09:47:31 2008
Return-Path: <java-user-return-36434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51200 invoked from network); 1 Oct 2008 09:47:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 09:47:31 -0000
Received: (qmail 86640 invoked by uid 500); 1 Oct 2008 09:47:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86607 invoked by uid 500); 1 Oct 2008 09:47:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86596 invoked by uid 99); 1 Oct 2008 09:47:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 02:47:22 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 09:46:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KkyII-0001rR-1S
	for java-user@lucene.apache.org; Wed, 01 Oct 2008 02:46:54 -0700
Message-ID: <19757274.post@talk.nabble.com>
Date: Wed, 1 Oct 2008 02:46:54 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database
In-Reply-To: <19755932.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <19755932.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi agatone,

I agree with markharw00 that highlighting is the main reason to store fields
in lucene.
I want to remind Sascha Fahl that the stored field in lucene are not inside
the inverted index-structure.
The implemention of stored fields is very simple: 
A (.fdt)-file with the pairs "field-name"/"field-value" in order of the
documents with a map "documentID" --> "first pair in file".
("Stored fields" in
http://lucene.apache.org/java/2_3_2/fileformats.html#Fields )
You can search with no stored fields at all.
I agree with chrislusf that you should store least data in lucene as
possible.
If you store large byte-arrays for "full view" you possible will have a lot
more IO even for hit-lists which does not use this byte-array. (you would
have to use FieldSelector, but still with FieldSelector  a hard-drive don't
like to skip this field-data (= seek data)).

So if you have no highlighting at all, you could store a map "lucene
document id"(int) --> "database id"(hopefully also type int) in main memory,
and convert each lucene search result-list to a small select statement.
This is completely ok.
Lucene is very good in searching not in storing data.

Take a look to thread
http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--to18703473.html

In my company we decided to use lucene as storage. But we have now to
index-directories: one for searching and showing hit lists, the other as
storage with ony two fields: "key" & "data".
Performance tests shows that reading the storage is between 5 and 2 times
slower then a solution with database (this was OK for our use-case).

Best regards
  Karsten


agatone wrote:
> 
> Hi, 
> I asked this question already on "lucene-general" list but also got
> advised to ask here too.
> 
> I'm working on a project that has big database in the background (some
> tables have about 1500000 rows). We decided to use Lucene for "faster"
> search. Our search works similar as all searches: you write search string,
> get list of hits with detail link. But there is dilemma if we should store
> more data into index than it's needed. 
> 
> One side of developing team insists that we should use lucene index as
> somekind of storage for data so when you get hit, you go onto details and
> then again use lucene to find document that matches the selected ID and
> take the data from Lucene index. So in the end you end with copying
> complete database tables into the lucene index.
> 
> Other side insists on storing to index only data that is displayed
> directly to the user when showing the search results list and needed for
> search criteria. When you go onto details, you have the matching ID so you
> can pickup that row from database by that ID rather than search it inside
> Lucene index. 
> 
> Can someone please describe drawbacks and advantages of both approaches.
> Actually can someone write down what's the actual profit, where and when
> of the Lucene itself in real production env. 
> 
> IT would be great if there is anyone who could write his experience with
> indexing and searching large amount of data.
> 
> 
> Thank you
> 

-- 
View this message in context: http://www.nabble.com/Lucene-vs.-Database-tp19755932p19757274.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 11:44:43 2008
Return-Path: <java-user-return-36435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6639 invoked from network); 1 Oct 2008 11:44:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 11:44:43 -0000
Received: (qmail 97301 invoked by uid 500); 1 Oct 2008 11:44:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97259 invoked by uid 500); 1 Oct 2008 11:44:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97248 invoked by uid 99); 1 Oct 2008 11:44:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 04:44:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.227.122.98] (HELO mail.garambrogne.net) (82.227.122.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 11:43:31 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.garambrogne.net (Postfix) with ESMTP id 117DE38E395
	for <java-user@lucene.apache.org>; Wed,  1 Oct 2008 13:45:29 +0200 (CEST)
Received: from mail.garambrogne.net ([127.0.0.1])
	by localhost (localhost.localdomain [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dnk7cYwgggi5 for <java-user@lucene.apache.org>;
	Wed,  1 Oct 2008 13:45:28 +0200 (CEST)
Received: by mail.garambrogne.net (Postfix, from userid 33)
	id 7806838E396; Wed,  1 Oct 2008 13:45:28 +0200 (CEST)
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database
MIME-Version: 1.0
Date: Wed, 01 Oct 2008 13:45:28 +0200
From: mathieu <mathieu@garambrogne.net>
Organization: Garambrogne
In-Reply-To: <19755932.post@talk.nabble.com>
References: <19755932.post@talk.nabble.com>
Message-ID: <dde6805bf57d178d13bde6f282d4a140@localhost>
X-Sender: mathieu@garambrogne.net
User-Agent: RoundCube Webmail/0.1b
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


Have a look at Compass : http://www.compass-project.org/
It's one of the easyest way to mix db and lucene.

M.

On Wed, 1 Oct 2008 00:43:57 -0700 (PDT), agatone <zoran.zoki@gmail.com>
wrote:
> 
> Hi, 
> I asked this question already on "lucene-general" list but also got
> advised
> to ask here too.
> 
> I'm working on a project that has big database in the background (some
> tables have about 1500000 rows). We decided to use Lucene for "faster"
> search. Our search works similar as all searches: you write search
string,
> get list of hits with detail link. But there is dilemma if we should
store
> more data into index than it's needed. 
> 
> One side of developing team insists that we should use lucene index as
> somekind of storage for data so when you get hit, you go onto details and
> then again use lucene to find document that matches the selected ID and
> take
> the data from Lucene index. So in the end you end with copying complete
> database tables into the lucene index.
> 
> Other side insists on storing to index only data that is displayed
> directly
> to the user when showing the search results list and needed for search
> criteria. When you go onto details, you have the matching ID so you can
> pickup that row from database by that ID rather than search it inside
> Lucene
> index. 
> 
> Can someone please describe drawbacks and advantages of both approaches.
> Actually can someone write down what's the actual profit, where and when
> of
> the Lucene itself in real production env. 
> 
> IT would be great if there is anyone who could write his experience with
> indexing and searching large amount of data.
> 
> 
> Thank you
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 12:13:22 2008
Return-Path: <java-user-return-36436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26165 invoked from network); 1 Oct 2008 12:13:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 12:13:21 -0000
Received: (qmail 44646 invoked by uid 500); 1 Oct 2008 12:13:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44319 invoked by uid 500); 1 Oct 2008 12:13:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44308 invoked by uid 99); 1 Oct 2008 12:13:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 05:13:12 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 12:12:07 +0000
Received: by gxk6 with SMTP id 6so39506gxk.5
        for <java-user@lucene.apache.org>; Wed, 01 Oct 2008 05:12:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=cq/KVBcsTI2MpQ7SR+In7hR+H/OdUoTmMQffdOBfvLM=;
        b=dIIMdExUMVBQLMnpViOcMTbjtn8QEBxsCuIhyHLUyEQlpstH4BsGjoiEzl2Osl/opC
         G5DWNT08YkDwmBExb/XuE6aG3vcvKRZWXSsVu1ExQP55tvNfI5s9rnJUi7n1oOI4wIF+
         z4Rtz138r3C9SgK2lr95ixgP2Y2/LoeTvgNwc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=sTOtIawEtlNfzfGEN93wdoFL+sRlq5+s2A2CV2ystZ++hGhbbAfS6av1YMGXR8np1b
         0xxfpb5efB7qf2XvTaH6R1AxUZ6k/uy5vHLP60F1YlaamilV9juXIBSfnZ3f0DHD3bAI
         MYHcJkB671dg5xlVXxLDEQNgx0qidGuI8xk6o=
Received: by 10.100.96.9 with SMTP id t9mr7460288anb.66.1222863161677;
        Wed, 01 Oct 2008 05:12:41 -0700 (PDT)
Received: by 10.100.8.18 with HTTP; Wed, 1 Oct 2008 05:12:41 -0700 (PDT)
Message-ID: <126142c0810010512w188f379cqbb3fa307bf6a2dbd@mail.gmail.com>
Date: Wed, 1 Oct 2008 09:12:41 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database
In-Reply-To: <19755932.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19755932.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Zoran:
  One of the biggest issues with Lucene DB integration is the network
traffic consumed as consequence of indexing or updating operation,
apart from transactionalbilty which can be relaxed in some
application.
  During our Oracle Open World presentation we present some of these
issues comparing performance during indexing time (integrated solution
versus middle tier solution), network traffic, executions plans and
others.
  Obviously its based on Oracle databases but the concepts are similar
for any other solutions.
  You can download the complete presentation from:
http://www28.cplan.com/cbo_export/208/PS_S298820_298820_208-1_v1.pdf
http://www28.cplan.com/cbo_export/208/PS_S298820_298820_208-1_v2.pdf
  To download presentations, please enter the following when prompted.
Note the Username and Password are case sensitive.
Username: cboracle
Password: oraclec6
  Or you can see on-line only the Oracle Lucene integration details
using Google docs at:
http://docs.google.com/Presentation?id=ddgw7sjp_156gf9hczxv
  Best regards, Marcelo.

On Wed, Oct 1, 2008 at 4:43 AM, agatone <zoran.zoki@gmail.com> wrote:
>
> Hi,
> I asked this question already on "lucene-general" list but also got advised
> to ask here too.
>
> I'm working on a project that has big database in the background (some
> tables have about 1500000 rows). We decided to use Lucene for "faster"
> search. Our search works similar as all searches: you write search string,
> get list of hits with detail link. But there is dilemma if we should store
> more data into index than it's needed.
>
> One side of developing team insists that we should use lucene index as
> somekind of storage for data so when you get hit, you go onto details and
> then again use lucene to find document that matches the selected ID and take
> the data from Lucene index. So in the end you end with copying complete
> database tables into the lucene index.
>
> Other side insists on storing to index only data that is displayed directly
> to the user when showing the search results list and needed for search
> criteria. When you go onto details, you have the matching ID so you can
> pickup that row from database by that ID rather than search it inside Lucene
> index.
>
> Can someone please describe drawbacks and advantages of both approaches.
> Actually can someone write down what's the actual profit, where and when of
> the Lucene itself in real production env.
>
> IT would be great if there is anyone who could write his experience with
> indexing and searching large amount of data.
>
>
> Thank you
> --
> View this message in context: http://www.nabble.com/Lucene-vs.-Database-tp19755932p19755932.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 12:37:59 2008
Return-Path: <java-user-return-36437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47691 invoked from network); 1 Oct 2008 12:37:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 12:37:59 -0000
Received: (qmail 75503 invoked by uid 500); 1 Oct 2008 12:37:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75452 invoked by uid 500); 1 Oct 2008 12:37:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75432 invoked by uid 99); 1 Oct 2008 12:37:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 05:37:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 12:36:40 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1DDA030EFC18; Wed,  1 Oct 2008 06:37:14 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (va-69-68-188-253.dyn.embarqhsd.net [69.68.188.253])
	by ehatchersolutions.com (Postfix) with ESMTP id C628F30EFC17;
	Wed,  1 Oct 2008 06:37:09 -0600 (MDT)
Message-Id: <C1F99C2C-B8AB-44C9-B993-22BC0C33B784@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org,
 solr-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: case studies
Date: Wed, 1 Oct 2008 08:37:08 -0400
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

Dear Lucene and Solr users -

I'm presenting Lucene/Solr Case Studies at ApacheCon in a month: <http://us.apachecon.com/c/acus2008/sessions/41 
 >

I would like to feature implementations by YOU.  The thing is, my  
slides are due this Friday, so time is short to collect this info.  If  
you have a use of either Lucene or Solr that you'd like me to feature  
in the talk, send me (offline please) some details about your  
application, some stats like number of documents, queries per second,  
faceting uses, and so on, and any public pointers I can include.  If  
your system isn't publicly accessible you may also send me a screenshot.

Thanks for your help!

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 12:38:22 2008
Return-Path: <java-user-return-36438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48097 invoked from network); 1 Oct 2008 12:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 12:38:22 -0000
Received: (qmail 78289 invoked by uid 500); 1 Oct 2008 12:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78265 invoked by uid 500); 1 Oct 2008 12:37:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78233 invoked by uid 99); 1 Oct 2008 12:37:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 05:37:58 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.227.122.98] (HELO mail.garambrogne.net) (82.227.122.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 12:36:55 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.garambrogne.net (Postfix) with ESMTP id 5106338E395
	for <java-user@lucene.apache.org>; Wed,  1 Oct 2008 14:38:26 +0200 (CEST)
Received: from mail.garambrogne.net ([127.0.0.1])
	by localhost (localhost.localdomain [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id P0E9oFqWORyY for <java-user@lucene.apache.org>;
	Wed,  1 Oct 2008 14:38:25 +0200 (CEST)
Received: by mail.garambrogne.net (Postfix, from userid 33)
	id C123E38E396; Wed,  1 Oct 2008 14:38:23 +0200 (CEST)
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database
MIME-Version: 1.0
Date: Wed, 01 Oct 2008 14:38:23 +0200
From: mathieu <mathieu@garambrogne.net>
Organization: Garambrogne
In-Reply-To: <126142c0810010512w188f379cqbb3fa307bf6a2dbd@mail.gmail.com>
References: <19755932.post@talk.nabble.com> <126142c0810010512w188f379cqbb3fa307bf6a2dbd@mail.gmail.com>
Message-ID: <f858e005fc014e72aebe923013a7887c@localhost>
X-Sender: mathieu@garambrogne.net
User-Agent: RoundCube Webmail/0.1b
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


Crawling a DB is not a good idea. Indexing while writing/deleting is
clever.
Doing it inside the DB is a solution.
Java users like ORM. Compass plug Lucene indexation in the ORM's
transaction. If it's wrote or deleted, Lucene is aware.
Compass is opensource.

M.
On Wed, 1 Oct 2008 09:12:41 -0300, "Marcelo Ochoa"
<marcelo.ochoa@gmail.com> wrote:
> Hi Zoran:
>   One of the biggest issues with Lucene DB integration is the network
> traffic consumed as consequence of indexing or updating operation,
> apart from transactionalbilty which can be relaxed in some
> application.
>   During our Oracle Open World presentation we present some of these
> issues comparing performance during indexing time (integrated solution
> versus middle tier solution), network traffic, executions plans and
> others.
>   Obviously its based on Oracle databases but the concepts are similar
> for any other solutions.
>   You can download the complete presentation from:
> http://www28.cplan.com/cbo_export/208/PS_S298820_298820_208-1_v1.pdf
> http://www28.cplan.com/cbo_export/208/PS_S298820_298820_208-1_v2.pdf
>   To download presentations, please enter the following when prompted.
> Note the Username and Password are case sensitive.
> Username: cboracle
> Password: oraclec6
>   Or you can see on-line only the Oracle Lucene integration details
> using Google docs at:
> http://docs.google.com/Presentation?id=ddgw7sjp_156gf9hczxv
>   Best regards, Marcelo.
> 
> On Wed, Oct 1, 2008 at 4:43 AM, agatone <zoran.zoki@gmail.com> wrote:
>>
>> Hi,
>> I asked this question already on "lucene-general" list but also got
> advised
>> to ask here too.
>>
>> I'm working on a project that has big database in the background (some
>> tables have about 1500000 rows). We decided to use Lucene for "faster"
>> search. Our search works similar as all searches: you write search
> string,
>> get list of hits with detail link. But there is dilemma if we should
> store
>> more data into index than it's needed.
>>
>> One side of developing team insists that we should use lucene index as
>> somekind of storage for data so when you get hit, you go onto details
> and
>> then again use lucene to find document that matches the selected ID and
> take
>> the data from Lucene index. So in the end you end with copying complete
>> database tables into the lucene index.
>>
>> Other side insists on storing to index only data that is displayed
> directly
>> to the user when showing the search results list and needed for search
>> criteria. When you go onto details, you have the matching ID so you can
>> pickup that row from database by that ID rather than search it inside
> Lucene
>> index.
>>
>> Can someone please describe drawbacks and advantages of both approaches.
>> Actually can someone write down what's the actual profit, where and when
> of
>> the Lucene itself in real production env.
>>
>> IT would be great if there is anyone who could write his experience with
>> indexing and searching large amount of data.
>>
>>
>> Thank you
>> --
>> View this message in context:
> http://www.nabble.com/Lucene-vs.-Database-tp19755932p19755932.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> 
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 16:14:36 2008
Return-Path: <java-user-return-36439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58715 invoked from network); 1 Oct 2008 16:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 16:14:33 -0000
Received: (qmail 44390 invoked by uid 500); 1 Oct 2008 16:14:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44363 invoked by uid 500); 1 Oct 2008 16:14:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44352 invoked by uid 99); 1 Oct 2008 16:14:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 09:14:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 16:13:20 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m91GDQZM015496
	for <java-user@lucene.apache.org>; Wed, 1 Oct 2008 12:13:26 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48E3A1A5.9000405@informatics.jax.org>
Date: Wed, 01 Oct 2008 12:13:25 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database
References: <19755932.post@talk.nabble.com>
In-Reply-To: <19755932.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.6.353000, Antispam-Engine: 2.6.1.350677, Antispam-Data: 2008.10.1.155228
X-PerlMx-Spam: Gauge=IIIIIII, Probability=8%, Report='BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Another thing you could consider is that rather than meshing all this 
data into a single index, logically break out the data you need for 
searching into one index, and the data you need for display into another 
index.

This is the technique we use here and its been wildly successful for us, 
as compared to going directly into the database.

Our DB is structured for ease of data entry/annotation rather than for 
the ease is display.  So we use our display index to have standard 
realized datafields that are pulled from various tables in the database.

So, when we search we include the unique key that each matched term 
points to, and then use this unique key to pull out our display time 
information. 

Its worked pretty well for us, so its certianly a viable approach.

- Matt

agatone wrote:
> Hi, 
> I asked this question already on "lucene-general" list but also got advised
> to ask here too.
>
> I'm working on a project that has big database in the background (some
> tables have about 1500000 rows). We decided to use Lucene for "faster"
> search. Our search works similar as all searches: you write search string,
> get list of hits with detail link. But there is dilemma if we should store
> more data into index than it's needed. 
>
> One side of developing team insists that we should use lucene index as
> somekind of storage for data so when you get hit, you go onto details and
> then again use lucene to find document that matches the selected ID and take
> the data from Lucene index. So in the end you end with copying complete
> database tables into the lucene index.
>
> Other side insists on storing to index only data that is displayed directly
> to the user when showing the search results list and needed for search
> criteria. When you go onto details, you have the matching ID so you can
> pickup that row from database by that ID rather than search it inside Lucene
> index. 
>
> Can someone please describe drawbacks and advantages of both approaches.
> Actually can someone write down what's the actual profit, where and when of
> the Lucene itself in real production env. 
>
> IT would be great if there is anyone who could write his experience with
> indexing and searching large amount of data.
>
>
> Thank you
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 17:03:15 2008
Return-Path: <java-user-return-36440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92894 invoked from network); 1 Oct 2008 17:03:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 17:03:14 -0000
Received: (qmail 41972 invoked by uid 500); 1 Oct 2008 17:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41812 invoked by uid 500); 1 Oct 2008 17:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41801 invoked by uid 99); 1 Oct 2008 17:03:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 10:03:06 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 17:02:02 +0000
Received: by gxk6 with SMTP id 6so417150gxk.5
        for <java-user@lucene.apache.org>; Wed, 01 Oct 2008 10:02:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=CT6R9eyEiZTuZOy3IYK61wlQIcjKNn34C32XD1rWZ+M=;
        b=jSJm5qFrbh3Q/thC/rpaY2Sa5lgpeVTkHVJcbN4BOxB2nrNe/9pvyuIg3dHX6r7YEV
         GkllJcIiOkWxk8WCfhcHxeuSB0ZeCrwHVL3UO7frV0ac5CTf3c5Qbg3Un22VpQTLTwPN
         4H5TzYmB5dvbGuqoFc3zmw2OmWXGonNcwzn3Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=NchN19tF5JDCFvgNwNNxalIpnk2btKiYRAjYUhhC14iEW+/PGYS0i/z46zuBm8pqGe
         TKjFWwg+ww4loImxEVMqSKIXUOD0pxyS7btN18kHoEgZ7RSzGKKjUrK5F34tjlZ71m21
         K8ojbI8CWe7FkRblm118udPrMpSZiAXpXiVoo=
Received: by 10.100.152.11 with SMTP id z11mr7839725and.112.1222880556000;
        Wed, 01 Oct 2008 10:02:36 -0700 (PDT)
Received: by 10.100.8.18 with HTTP; Wed, 1 Oct 2008 10:02:35 -0700 (PDT)
Message-ID: <126142c0810011002k5abf644dib0451de8afe0c339@mail.gmail.com>
Date: Wed, 1 Oct 2008 14:02:35 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database
In-Reply-To: <f858e005fc014e72aebe923013a7887c@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19755932.post@talk.nabble.com>
	 <126142c0810010512w188f379cqbb3fa307bf6a2dbd@mail.gmail.com>
	 <f858e005fc014e72aebe923013a7887c@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org

Mathieu:
> Crawling a DB is not a good idea. Indexing while writing/deleting is
> clever.
  These operations also consume network traffic in architectures like Solr WS.
  Also there is a waste of network traffic when a query is filtered
against relational data (slides 15 and 18 of Google presentation), for
example:
select  /*+ DOMAIN_INDEX_SORT */
   p.id,p.first_Name,p.last_Name,p.nationality,p.sex,p.type_Document,
   p.number_Document,p.civil_State,p.date_Birth,p.mail,g.organization_id ,
   lscore(1) as suma from person p left join
   (select * from guest where organization_id = 67) g on g.person_id = p.id
     where p.state = 1  and lcontains(p.first_name, 'rownum:[1 TO 20]
AND John~ Doe~',1) > 0
   This kind of filtering (security for example) is very common in
relational world, then there are two possible solutions:
   1) performs a free text search to lookup all the rowid that match
and send it to the database to filter it against the other table
   2) get all the rows from the DB and joins in middle tier with the
rows which match the free text query.
  in both cases there will be a lot of network traffic if the free
text query cardinally is larger than the relational filter.
  Many times the DB optimizer can choose a different execution plan
based on how costly is the operation on the index and this information
is known by the DB only.
> Doing it inside the DB is a solution.
> Java users like ORM. Compass plug Lucene indexation in the ORM's
> transaction. If it's wrote or deleted, Lucene is aware.
  AFAIK now Lucene doesn't support two-phase commit, so what happen if
transaction need to be undoed?
  If you perform an update on Lucene index before a relational delete,
if the delete is rolled back the index will have inconsistently
returning phantom reads.
  Otherwise if you perform the update on Lucene index after a DB
operation which is committed and the index fail there will be rows
which will be not considered as positive hit.
  In Lucene Domain Index both, the DML operation, and the Lucene
storage are transactional and the operation can be secure rolled back.
> Compass is opensource.
  Lucene and Lucene Domain Index too ;) so for Oracle users is an open
source solution.
  Also we are looking for an alternative solution using open sources
database, like H2, but not all databases have and API for creating new
indexes.
>
> M.
  Best regards, Marcelo.
-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 17:50:27 2008
Return-Path: <java-user-return-36441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23332 invoked from network); 1 Oct 2008 17:50:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 17:50:27 -0000
Received: (qmail 5575 invoked by uid 500); 1 Oct 2008 17:50:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5546 invoked by uid 500); 1 Oct 2008 17:50:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5535 invoked by uid 99); 1 Oct 2008 17:50:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 10:50:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of petite_abeille@mac.com designates 17.148.16.95 as permitted sender)
Received: from [17.148.16.95] (HELO asmtpout020.mac.com) (17.148.16.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 17:49:25 +0000
MIME-version: 1.0
Content-type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Received: from [192.168.1.5] ([89.217.199.115])
 by asmtp020.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0K8200GN9MU6QG20@asmtp020.mac.com> for
 java-user@lucene.apache.org; Wed, 01 Oct 2008 10:49:39 -0700 (PDT)
Message-id: <AA0611E0-7736-492A-AF27-0AD6BB2A5525@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <19755932.post@talk.nabble.com>
Content-transfer-encoding: quoted-printable
Subject: Re: Lucene vs. Database
Date: Wed, 01 Oct 2008 19:49:17 +0200
References: <19755932.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Oct 1, 2008, at 9:43 AM, agatone wrote:

> I'm working on a project that has big database in the background (some
> tables have about 1500000 rows). We decided to use Lucene for "faster"
> search. Our search works similar as all searches: you write search =20
> string,
> get list of hits with detail link. But there is dilemma if we should =20=

> store
> more data into index than it's needed.

As mentioned previously, the visual display of your search results is =20=

one rather critical factor in balancing the need to duplicate data or =20=

not...

That said... aside from some rather narrow field of endeavors... and =20
assuming you already have a database... I would personally keep =20
everything in there and not even bother with Lucene in the first =20
place... after all, most databases worth using have "good enough" full =20=

text search facilities already (e.g. MySQL [1], Oracle Text [2], =20
PostgreSQL [3], SQLite FTS [4], etc)...

In other words, do you _really_ need the full fire power of Lucene =20
just to tack on a rather pedestrian text search on top of your small =20
corporate database?

Just my 2=C2=A2.

--
PA.
http://alt.textdrive.com/nanoki/

[1] http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html
[2] http://www.oracle.com/technology/products/text/index.html
[3] http://www.postgresql.org/docs/8.3/static/textsearch.html
[4] http://www.sqlite.org/cvstrac/wiki?p=3DFullTextIndex




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 18:36:41 2008
Return-Path: <java-user-return-36442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59458 invoked from network); 1 Oct 2008 18:36:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 18:36:41 -0000
Received: (qmail 63432 invoked by uid 500); 1 Oct 2008 18:36:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63399 invoked by uid 500); 1 Oct 2008 18:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63388 invoked by uid 99); 1 Oct 2008 18:36:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 11:36:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.15.82.66] (HELO dz7.dailyrazor.com) (67.15.82.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 18:35:29 +0000
Received: from c-76-100-31-215.hsd1.md.comcast.net ([76.100.31.215]:35260 helo=[192.168.169.1])
	by dz7.dailyrazor.com with esmtpa (Exim 4.69)
	(envelope-from <gary@littlebunch.com>)
	id 1Kl6VJ-0006Cw-7l
	for java-user@lucene.apache.org; Wed, 01 Oct 2008 13:32:53 -0500
Message-ID: <48E3D032.7050607@littlebunch.com>
Date: Wed, 01 Oct 2008 14:32:02 -0500
From: Gary Moore <gary@littlebunch.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: 2.3.2 Indexing Performance
References: <489CC880.1030503@littlebunch.com> <E0535E27-1242-4F32-BE6E-9C563D1D0248@mikemccandless.com>
In-Reply-To: <E0535E27-1242-4F32-BE6E-9C563D1D0248@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - dz7.dailyrazor.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - littlebunch.com
X-Virus-Checked: Checked by ClamAV on apache.org

Finally got back to this.  The great bulk of the time is spent 
parsing/tokenizing.  So, using 10 threads parsing/analyzing the 4.5M 
docs and feeding them to an IndexWriter took 106 minutes including a 
final optimization.   The index is 5.6 GB.   I'm tempted to try multiple 
indexing threads but my guess is it won't buy that much since the async 
writer more than kept up with the thread queue.

Now, I'm even more impressed with 2.3!
-Gary
Michael McCandless wrote:
>
> Thanks for the data point!
>
> This is expected -- alot of work went into increasing IndexWriter's 
> throughput in 2.3.
>
> Actually, I'd expect even more speedup, if indeed Lucene is the 
> bottleneck in your app.  You could test how much time just 
> creating/parsing & tokenizing the docs (from whatever is holding them) 
> takes, to see.  Also you might eke more performance out following the 
> suggestions here:
>
>     http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>
> Since you've got 4 CPUs and lots of RAM you should definitely use 
> multiple indexing threads with a large RAM buffer.
>
> Mike
>
> Gary Moore wrote:
>
>> Parsing and indexing 4.5 million MARC/XML bibliographic records was 
>> requiring ~14 hrs. using 2.2.  The same job using 2.3 takes ~ 5 hrs. 
>> on the same platform --  a quad processor Sun V440 w/8GB memory.   
>> I'm using the PerFieldAnalyzerWrapper (StandardAnalyzer and 
>> SnowballAnalyzer).
>>
>> I'm impressed!  Is this typical?
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 19:14:45 2008
Return-Path: <java-user-return-36443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86295 invoked from network); 1 Oct 2008 19:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 19:14:44 -0000
Received: (qmail 28096 invoked by uid 500); 1 Oct 2008 19:14:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28066 invoked by uid 500); 1 Oct 2008 19:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28051 invoked by uid 99); 1 Oct 2008 19:14:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 12:14:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.64] (HELO elasmtp-curtail.atl.sa.earthlink.net) (209.86.89.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 19:13:30 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=jbTM4F2LwclgFgrfS1lrSLx9G3mnxVFpdlXR3XoCOmk59l5tCWtau19OuSLwO8DE;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.38] (helo=elwamui-lapwing.atl.sa.earthlink.net)
	by elasmtp-curtail.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1Kl78p-0000Ph-OU
	for java-user@lucene.apache.org; Wed, 01 Oct 2008 15:13:43 -0400
Received: from 151.205.100.227 by webmail.earthlink.net with HTTP; Wed, 1 Oct 2008 15:13:43 -0400
Message-ID: <11764124.1222888423775.JavaMail.root@elwamui-lapwing.atl.sa.earthlink.net>
Date: Wed, 1 Oct 2008 15:13:43 -0400 (EDT)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org
Subject: bunch of newbie queries, PS
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c260947e28ebc6a914129405a122b808d6fdb350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.38
X-Virus-Checked: Checked by ClamAV on apache.org

OK, after googling around for a while, I found this: 

http://wooga.drbacchus.com/lucene-and-documentation (alas, I agree) 

and then eventually I realized that the download web-page directory has a link to the "archive" where all the old stuff is (probably this is common and obvious, but I kept missing it) -- every link that purports to take me to an old version takes me to http://apache.oc1.mirrors.redwire.net/lucene/java/ -- it would help a lot (and would be easy to do, no?) if all the links to old stuff went to http://apache.oc1.mirrors.redwire.net/lucene/java/archive/ instead. (Not necessarily that particular mirror, of course.) 

-Paul 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 01 19:17:42 2008
Return-Path: <java-user-return-36444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87276 invoked from network); 1 Oct 2008 19:17:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Oct 2008 19:17:42 -0000
Received: (qmail 31878 invoked by uid 500); 1 Oct 2008 19:17:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31850 invoked by uid 500); 1 Oct 2008 19:17:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31839 invoked by uid 99); 1 Oct 2008 19:17:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 12:17:33 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2008 19:16:31 +0000
Received: by yx-out-2324.google.com with SMTP id 3so116082yxj.5
        for <java-user@lucene.apache.org>; Wed, 01 Oct 2008 12:17:04 -0700 (PDT)
Received: by 10.100.163.8 with SMTP id l8mr2790881ane.0.1222888624394;
        Wed, 01 Oct 2008 12:17:04 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b11sm476144ana.36.2008.10.01.12.17.03
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 01 Oct 2008 12:17:04 -0700 (PDT)
Message-Id: <BCCC450F-4249-41D1-9743-5F70AFA780F9@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48E3D032.7050607@littlebunch.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: 2.3.2 Indexing Performance
Date: Wed, 1 Oct 2008 15:17:02 -0400
References: <489CC880.1030503@littlebunch.com> <E0535E27-1242-4F32-BE6E-9C563D1D0248@mikemccandless.com> <48E3D032.7050607@littlebunch.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Awesome!  Thanks for following up.

Mike

Gary Moore wrote:

> Finally got back to this.  The great bulk of the time is spent  
> parsing/tokenizing.  So, using 10 threads parsing/analyzing the 4.5M  
> docs and feeding them to an IndexWriter took 106 minutes including a  
> final optimization.   The index is 5.6 GB.   I'm tempted to try  
> multiple indexing threads but my guess is it won't buy that much  
> since the async writer more than kept up with the thread queue.
>
> Now, I'm even more impressed with 2.3!
> -Gary
> Michael McCandless wrote:
>>
>> Thanks for the data point!
>>
>> This is expected -- alot of work went into increasing IndexWriter's  
>> throughput in 2.3.
>>
>> Actually, I'd expect even more speedup, if indeed Lucene is the  
>> bottleneck in your app.  You could test how much time just creating/ 
>> parsing & tokenizing the docs (from whatever is holding them)  
>> takes, to see.  Also you might eke more performance out following  
>> the suggestions here:
>>
>>    http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>>
>> Since you've got 4 CPUs and lots of RAM you should definitely use  
>> multiple indexing threads with a large RAM buffer.
>>
>> Mike
>>
>> Gary Moore wrote:
>>
>>> Parsing and indexing 4.5 million MARC/XML bibliographic records  
>>> was requiring ~14 hrs. using 2.2.  The same job using 2.3 takes ~  
>>> 5 hrs. on the same platform --  a quad processor Sun V440 w/8GB  
>>> memory.   I'm using the PerFieldAnalyzerWrapper (StandardAnalyzer  
>>> and SnowballAnalyzer).
>>>
>>> I'm impressed!  Is this typical?
>>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 07:42:23 2008
Return-Path: <java-user-return-36445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45843 invoked from network); 2 Oct 2008 07:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 07:42:23 -0000
Received: (qmail 37124 invoked by uid 500); 2 Oct 2008 07:42:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37088 invoked by uid 500); 2 Oct 2008 07:42:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37074 invoked by uid 99); 2 Oct 2008 07:42:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 00:42:13 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 07:41:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KlIok-0002Pm-IH
	for java-user@lucene.apache.org; Thu, 02 Oct 2008 00:41:46 -0700
Message-ID: <19774692.post@talk.nabble.com>
Date: Thu, 2 Oct 2008 00:41:46 -0700 (PDT)
From: agatone <zoran.zoki@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene vs. Database
In-Reply-To: <19755932.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: zoran.zoki@gmail.com
References: <19755932.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you all for your replies.
I didn't expect so many of them - all appreciated.

Now I have to go detailed into every one of them and write down stuff.

Thank you again.

-- 
View this message in context: http://www.nabble.com/Lucene-vs.-Database-tp19755932p19774692.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 09:04:11 2008
Return-Path: <java-user-return-36446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30138 invoked from network); 2 Oct 2008 09:04:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 09:04:11 -0000
Received: (qmail 49933 invoked by uid 500); 2 Oct 2008 09:03:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49660 invoked by uid 500); 2 Oct 2008 09:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49638 invoked by uid 99); 2 Oct 2008 09:03:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 02:03:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 09:02:53 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1900430EFC17; Thu,  2 Oct 2008 03:02:57 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (va-69-68-188-253.dyn.embarqhsd.net [69.68.188.253])
	by ehatchersolutions.com (Postfix) with ESMTP id 0619630EFC17;
	Thu,  2 Oct 2008 03:02:52 -0600 (MDT)
Message-Id: <487883EA-E872-48D6-A993-C5C1681173B0@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org,
 solr-user@lucene.apache.org
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Fwd: CFP open for ApacheCon Europe 2009
Date: Thu, 2 Oct 2008 05:02:51 -0400
References: <20081002082206.GA8370@infiltrator.gizzard.com>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1



Begin forwarded message:

> From: Noirin Shirley <noirin@apache.org>
> Date: October 2, 2008 4:22:06 AM EDT
> To: pmcs@apache.org
> Subject: CFP open for ApacheCon Europe 2009
> Reply-To: private@lucene.apache.org
> Reply-To: noirin@apache.org
>
> PMCs: Please send this on to your users@ lists!
>
> If you only have thirty seconds:
>
> The Call for Papers for ApacheCon Europe 2009, to be held in =20
> Amsterdam, from 23rd to 27th March, is now open! Submit your =20
> proposals at http://eu.apachecon.com/c/aceu2009/cfp/ before 24th =20
> October.
>
> Remember that early bird prices for ApacheCon US 2008, to be held in =20=

> New Orleans, from 3rd to 7th November, will go up this Friday, at =20
> midnight Eastern time!
>
> Sponsorship opportunities for ApacheCon US 2008 and ApacheCon EU =20
> 2009 are still available. If you or your company are interested in =20
> becoming a sponsor, please contact Delia Frees at =20
> delia@apachecon.com for details.
>
> *******
>
> If you want all the details:
>
> ApacheCon Europe 2009 - Leading the Wave of Open Source
> Amsterdam, The Netherlands
> 23rd to 27th March, 2009
>
> Call for Papers Opens for ApacheCon Europe 2009
>
> The Apache Software Foundation (ASF) invites submissions to its =20
> official conference, ApacheCon Europe 2009. To be held 23rd to 27th =20=

> March, 2009 at the M=F6venpick Hotel Amsterdam City Centre, ApacheCon =20=

> serves as a forum for showcasing the ASF's latest developments, =20
> including its projects, membership, and community. ApacheCon offers =20=

> unparalleled educational opportunities, with dedicated =20
> presentations, hands-on trainings, and sessions that address core =20
> technology, development, business/marketing, and licensing issues in =20=

> Open Source.
>
> ApacheCon's wide range of activities are designed to promote the =20
> exchange of ideas amongst ASF Members, innovators, developers, =20
> vendors, and users interested in the future of Open Source =20
> technology. The conference program includes competitively selected =20
> presentations, trainings/workshops, and a small number of invited =20
> speakers. All sessions undergo a peer review process by the =20
> ApacheCon Conference Planning team. The following information =20
> provides presentation category descriptions, and information about =20
> how to submit your
> proposal.
>
> Conference Themes and Topics
>
> APACHECON 2009 - LEADING THE WAVE OF OPEN SOURCE
>
> Building on the success of the last two years, we are excited to =20
> return to Amsterdam in 2009. We'll be continuing to offer our very =20
> popular two-day trainings, including certifications of completion =20
> for those who fulfill all the requirements of these trainings.
>
> The ASF comprises some of the most active and recognized developers =20=

> in the Open Source community. By bringing together the pioneers, =20
> developers, and users of flagship Open Source technologies, =20
> ApacheCon provides an influential platform for dialogue, between the =20=

> speaker and the audience, between project contributors and the =20
> community at large, traversing a wide range of ideas, expertise, and =20=

> personalities.
>
> ApacheCon welcomes submissions from like-minded delegates across =20
> many fields, geographic locations, and areas of development. The =20
> breadth and loosely-structured nature of the Apache community lends =20=

> itself to conference content that is also somewhat loosely-=20
> structured. Common themes of interest address groundbreaking =20
> technologies and emerging trends, successful practices (from =20
> development to deployment), and lessons learned (tips, tools, and =20
> tricks). In addition to technical content, ApacheCon invites =20
> Business Track submissions that address Open Source business, =20
> marketing, and legal/licensing issues.
>
> Topics appropriate for submission to this conference are manifold, =20
> and may include but are not restricted to:
>
> - Apache HTTP server topics such as installation, configuration, and =20=

> migration
> - ASF-wide projects such as Lucene, SpamAssassin, Jackrabbit, and =20
> Maven
> - Scripting languages and dynamic content such as Java, Perl, =20
> Python, Ruby, XSL, and PHP
> - Security and e-commerce
> - Performance tuning, load balancing and high availability
> - New technologies and broader initiatives such as Web Services and =20=

> Web 2.0
> - ASF-Incubated projects such as Sling, UIMA, and Shindig
>
>
> Submission Guidelines
> Submissions must include
> - Title
> - Speaker name, with affiliation and email address
> - Speaker bio (100 words or less)
> - Short description (50 words or less)
> - Full description including abstract and objectives (200 words or
> less)
> - Expertise level (beginner to advanced)
> - Format and duration (trainings vs. general presentation; half-, =20
> full- or two-day workshop, etc.)
> - Intended audience and maximum number of participants (trainings =20
> only)
> - Background knowledge expected of the participants (trainings only)
>
>
> Types of Presentations
>
> - Trainings/Workshops
> - General Sessions
> - Case Studies/Industry Profiles
> - Invited Keynotes/Panels/Speakers
> - Corporate Showcases & Demonstrations
>
> BoF sessions and Fast Feather Track talks will be selected separately
>
> Pre Conference Trainings/Workshops
> Held on the first and second day of the conference =96 2008-03-23 and =20=

> 2008-03-24, Trainings require a registration fee beyond the regular =20=

> conference fee. Proposals may be submitted for half-day (3 hours), =20
> full-day (6 hours), or two-day (12 hours) training sessions, aimed =20
> at providing in-depth, hands-on development experience or related =20
> continuing education. Training submissions are welcome at beginner, =20=

> intermediate, and expert levels.
>
> General Sessions
> General Sessions include presentations on practical development =20
> applications, insight into high-interest projects, best practices =20
> and key advances, overcoming implementation challenges, and industry =20=

> innovations. Especially welcome are submissions that extend =20
> participants' understanding the role of ASF projects and their =20
> influence on the Open Source community at large. General Sessions =20
> are scheduled for 50 minutes and are accessible to all conference =20
> delegates.
>
> Case Study/Industry Profile
> Practitioners are invited to submit presentations that focus on how =20=

> implementing particular ASF technologies led to improved products/=20
> solutions, service offerings, changes in work practices, among other =20=

> successes. Proposals that highlight overcoming interesting =20
> challenges in application design and developing innovative =20
> frameworks using multiple ASF projects are particularly encouraged. =20=

> NOTE: Marketing-oriented submissions aimed at promoting specific =20
> organizations or products will not be accepted.
>
> Invited Keynotes/Panels/Speakers
> Each conference the ApacheCon Planning team invites select =20
> presenters dealing with engaging, dialectical, and challenging =20
> subjects to present in keynote and/or panel formats. Topics include =20=

> cutting-edge technology development, industry leadership, hot or =20
> emerging trends, opinions on controversial issues, insight on =20
> technology paradigms, and contrasting viewpoints in complementary =20
> professional areas. Those interested in suggesting a candidate for =20
> an invited speaker opportunity should submit a brief proposal with =20
> the speaker's name, affiliation, background/bio, overview of topics =20=

> of interest, and contact information.
>
> Important Dates
> Please submit your completed proposal, at =
http://eu.apachecon.com/c/aceu2009/cfp/=20
>  before Friday, 24th October, 2008 Midnight GMT.
>
> About ApacheCon 2009
> ApacheCon is co-produced by the Apache Software Foundation and Stone =20=

> Circle Productions. The ApacheCon Planning team comprises ASF =20
> Members from all over the world working on a wholly-volunteer basis. =20=

> For more information, visit
> http://eu.apachecon.com/c/aceu2009/
>
>
> ----- End forwarded message -----


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 11:39:17 2008
Return-Path: <java-user-return-36447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93448 invoked from network); 2 Oct 2008 11:39:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 11:39:17 -0000
Received: (qmail 29777 invoked by uid 500); 2 Oct 2008 11:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29749 invoked by uid 500); 2 Oct 2008 11:39:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29738 invoked by uid 99); 2 Oct 2008 11:39:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 04:39:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 11:38:02 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Thu, 2 Oct 2008 13:39:35 +0200
From: =?iso-8859-1?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 2 Oct 2008 13:39:46 +0200
Subject: Calculation of fieldNorm causes irritating effect of sort order
Thread-Topic: Calculation of fieldNorm causes irritating effect of sort order
Thread-Index: Ackkg5HMZ2TqY2q3TRqorUTH67DzDg==
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7B503F1@msgint02.mogul.com>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Maybe I have missunderstood the general concept of how search results shoul=
d be scored in regards to the fieldNorm, but the way i see it it causes an =
irritating effect of the sort order for me.

Here's the deal:

I'm building a simple site with documents that represents ideas. Each idea =
can be active or inactive. Our search page have a simple textfield for sear=
ch text input. Other then that, the only thing the user can influence is wh=
ether to search on all ideas, or only active ones. The problem is that if t=
he search for all ideas only had active ideas in the result, the sort order=
 can change if the user then wants to do the same search but for only activ=
e ideas.

Example:

A search for "betyg", where the user doesn't care if the ideas are active o=
r inactive, gives this result:

document-153
document-244

The user then checkes the checkbox "Only active ideas", and clicks the sear=
ch button again. Now the result is:

document-244
document-153

When I turned on debug mode for the lucene part of the 3rd party CMS, I saw=
 the queries that lucene got:

The first query:
+type:idea +alltext:betyg

The second query:
+type:idea +(+alltext:betyg +category:14)

(The category 14 represents the status Active.)


I started Luke, and did the same searches there, and got the same result th=
ere (the results sort order of the first search was the reverse of the resu=
lts sort order of the second search). I then clicked the "Explain" button f=
or each document. There I found that all nodes had the same value for both =
documents, except for the last one, the fieldNorm for the field category.

I then did a quick google search for this fieldNorm, and found this:

http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg06275.html

so the fieldNorm is the product of the field boost for the document and the=
 lengthNorm for the field in the document. I am pretty sure that the boost =
is the same for both documents, so that leaves only the lengthNorm. And acc=
ording to the javadoc for the Similarity class, the lengthNorm value depend=
s on the number of tokens in the field for the particular document. And now=
 the strange behaivor makes sence, because the document 153 has a total of =
6 different tokens for the category field, and the document 244 has only 5.=
 But in this case, this behaivor is not really what I want. Do you have any=
 suggestions on how to solve this? Is it possible to disable the lengthNorm=
 calculation for particular fields?

Regards
/Jimi

mogul | jimi hulleg=E5rd | system developer | hudiksvallsgatan 4, 113 30 st=
ockholm sweden | +46 8 506 66 172 | +46 765 27 19 55 | jimi.hullegard@mogul=
.com | www.mogul.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 12:36:04 2008
Return-Path: <java-user-return-36448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39148 invoked from network); 2 Oct 2008 12:36:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 12:36:04 -0000
Received: (qmail 3676 invoked by uid 500); 2 Oct 2008 12:35:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2700 invoked by uid 500); 2 Oct 2008 12:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2687 invoked by uid 99); 2 Oct 2008 12:35:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 05:35:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 12:34:54 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9EBA930EFC19; Thu,  2 Oct 2008 06:35:28 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (va-69-68-188-253.dyn.embarqhsd.net [69.68.188.253])
	by ehatchersolutions.com (Postfix) with ESMTP id B4F2430EFC17
	for <java-user@lucene.apache.org>; Thu,  2 Oct 2008 06:35:14 -0600 (MDT)
Message-Id: <82F4F6C9-ADA0-494E-A546-BDD94700B1FD@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <D8E6BD3AD2634843B58AFF6A94FE246202D7B503F1@msgint02.mogul.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: Calculation of fieldNorm causes irritating effect of sort order
Date: Thu, 2 Oct 2008 08:35:11 -0400
References: <D8E6BD3AD2634843B58AFF6A94FE246202D7B503F1@msgint02.mogul.com>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Oct 2, 2008, at 7:39 AM, Jimi Hulleg=E5rd wrote:
> Is it possible to disable the lengthNorm calculation for particular =20=

> fields?

Yes, use Field#setOmitNorms(true) when indexing.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 12:46:25 2008
Return-Path: <java-user-return-36449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47909 invoked from network); 2 Oct 2008 12:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 12:46:25 -0000
Received: (qmail 21087 invoked by uid 500); 2 Oct 2008 12:46:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21048 invoked by uid 500); 2 Oct 2008 12:46:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21037 invoked by uid 99); 2 Oct 2008 12:46:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 05:46:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 12:45:13 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Thu, 2 Oct 2008 14:47:08 +0200
From: =?iso-8859-1?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 2 Oct 2008 14:47:20 +0200
Subject: RE: Calculation of fieldNorm causes irritating effect of sort order
Thread-Topic: Calculation of fieldNorm causes irritating effect of sort order
Thread-Index: Ackki58HI8MRzjSoRwyyC377C1ysgAAAQiKQ
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7B5041D@msgint02.mogul.com>
In-Reply-To: <82F4F6C9-ADA0-494E-A546-BDD94700B1FD@ehatchersolutions.com>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Erik wrote:
>
> On Oct 2, 2008, at 7:39 AM, Jimi Hulleg=E5rd wrote:
> > Is it possible to disable the lengthNorm calculation for particular
> > fields?
>
> Yes, use Field#setOmitNorms(true) when indexing.

Ok, thanks. I will just have to look on how to do this the best way (since =
the CMS is handling most of the indexing stuff).

But apparently this setOmitNorms(true) also disables boosting aswell. That =
is ok for now, but what if we want to use boosting in the future? Is there =
no way to disable the length normalization while still keeping the boost ca=
lculation?

/Jimi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 13:14:29 2008
Return-Path: <java-user-return-36450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61023 invoked from network); 2 Oct 2008 13:14:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 13:14:29 -0000
Received: (qmail 59455 invoked by uid 500); 2 Oct 2008 13:14:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59428 invoked by uid 500); 2 Oct 2008 13:14:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59417 invoked by uid 99); 2 Oct 2008 13:14:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 06:14:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 13:13:19 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1025522rvb.5
        for <java-user@lucene.apache.org>; Thu, 02 Oct 2008 06:13:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5I4jbGevrSRwhWsFpls84kJHV5Onz2sIMwANBAk6wUA=;
        b=e7ZwwIFRj7oz4YLbk/8HnSlEEkVoXZ7pcXOyoVHNVXWCWrJFAlxAVr6+Rr1pjZjaU3
         vCpK3PB8AOym9LpeAsJ3yDeYo+1theSmXqBjl2XG4CfsJe1s72IYqnytm4ahwGPuV3rL
         3mb7VdpmbkPkiJ/lMgwKYXVusAFVZ7ICgc0Hg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=D5onJQyKT90LFPeR2D7RE5/dijE9JZU7s0vrJGfgHUQVadMD9hcBy/StLnB1o1loS3
         A44HZR+TDD6qJm2rbqPWuW3vZVXlWAwlW9bbX7cXiZuytvLuv6uMDTesksan6auIJqRe
         bZeFWTcVcdgd/bTaCJIuma8ohkqJOku39HLbA=
Received: by 10.140.226.14 with SMTP id y14mr5256518rvg.123.1222953224419;
        Thu, 02 Oct 2008 06:13:44 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Thu, 2 Oct 2008 06:13:44 -0700 (PDT)
Message-ID: <359a92830810020613i6889e84btafc5555e1c78109a@mail.gmail.com>
Date: Thu, 2 Oct 2008 09:13:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Calculation of fieldNorm causes irritating effect of sort order
In-Reply-To: <D8E6BD3AD2634843B58AFF6A94FE246202D7B5041D@msgint02.mogul.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72485_4557914.1222953224409"
References: <82F4F6C9-ADA0-494E-A546-BDD94700B1FD@ehatchersolutions.com>
	 <D8E6BD3AD2634843B58AFF6A94FE246202D7B5041D@msgint02.mogul.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_72485_4557914.1222953224409
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Another possibility (and I'm not sure it'll work, but what the heck) would
be
to create a Filter for active ideas. So rather than add a "category:14"
clause,
you create a Category14Filter that you send to the query along with your
+type:idea +alltext:betyg clauses. Now, category won't be considered
in scoring (as I understand it, anyway). See the various Searcher.search()
methods that take a Filter.

Filters are pretty inexpensive to create, so if this works for you I'd just
measure the time it takes to create a filter rather than cache them. But
if you do want to cache filters, CachingWrapperFilter may be your friend.

NOTE: I have no clue whether this will do what you want, but I vaguely
remember from wildcard filter discussions that it might. And it would still
allow boosts on the fields you were searching on....

Best
Erick

On Thu, Oct 2, 2008 at 8:47 AM, Jimi Hulleg=E5rd <jimi.hullegard@mogul.com>=
wrote:

> Erik wrote:
> >
> > On Oct 2, 2008, at 7:39 AM, Jimi Hulleg=E5rd wrote:
> > > Is it possible to disable the lengthNorm calculation for particular
> > > fields?
> >
> > Yes, use Field#setOmitNorms(true) when indexing.
>
> Ok, thanks. I will just have to look on how to do this the best way (sinc=
e
> the CMS is handling most of the indexing stuff).
>
> But apparently this setOmitNorms(true) also disables boosting aswell. Tha=
t
> is ok for now, but what if we want to use boosting in the future? Is ther=
e
> no way to disable the length normalization while still keeping the boost
> calculation?
>
> /Jimi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_72485_4557914.1222953224409--

From java-user-return-36451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 13:55:08 2008
Return-Path: <java-user-return-36451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83741 invoked from network); 2 Oct 2008 13:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 13:55:08 -0000
Received: (qmail 26839 invoked by uid 500); 2 Oct 2008 13:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26806 invoked by uid 500); 2 Oct 2008 13:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26795 invoked by uid 99); 2 Oct 2008 13:54:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 06:54:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 13:53:58 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Thu, 2 Oct 2008 15:55:32 +0200
From: =?iso-8859-1?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 2 Oct 2008 15:55:44 +0200
Subject: RE: Calculation of fieldNorm causes irritating effect of sort order
Thread-Topic: Calculation of fieldNorm causes irritating effect of sort order
Thread-Index: AckkkQD8hLwf2YiLTxO0cjsK3aYM2wABHmcA
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7B50461@msgint02.mogul.com>
In-Reply-To: <359a92830810020613i6889e84btafc5555e1c78109a@mail.gmail.com>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Erick wrote:
>
> Another possibility (and I'm not sure it'll work, but what
> the heck) would
> be
> to create a Filter for active ideas. So rather than add a
> "category:14"
> clause,
> you create a Category14Filter that you send to the query
> along with your
> +type:idea +alltext:betyg clauses. Now, category won't be considered
> in scoring (as I understand it, anyway). See the various
> Searcher.search()
> methods that take a Filter.
>
> Filters are pretty inexpensive to create, so if this works
> for you I'd just
> measure the time it takes to create a filter rather than
> cache them. But
> if you do want to cache filters, CachingWrapperFilter may be
> your friend.
>
> NOTE: I have no clue whether this will do what you want, but I vaguely
> remember from wildcard filter discussions that it might. And
> it would still
> allow boosts on the fields you were searching on....

Thanks for the filter suggestion. Filters is something I have not looked in=
to much yet, but I plan to do it soon. For now I tried the setOmitNorms(tru=
e) approach (mostly because I wanted to see how easy it was to do this in a=
 clever way, without hacking the CMS), and it worked like a charm.

So, thanks Erik and Erick, for your suggestions!

/Jimi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 14:21:48 2008
Return-Path: <java-user-return-36452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93798 invoked from network); 2 Oct 2008 14:21:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 14:21:48 -0000
Received: (qmail 64622 invoked by uid 500); 2 Oct 2008 14:21:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64590 invoked by uid 500); 2 Oct 2008 14:21:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64564 invoked by uid 99); 2 Oct 2008 14:21:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 07:21:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 14:20:36 +0000
Received: by nf-out-0910.google.com with SMTP id g16so458271nfd.15
        for <java-user@lucene.apache.org>; Thu, 02 Oct 2008 07:21:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=q7OjtwgGGDlsMfO+4QqEqg2QC0XYISL55yu+NNxutDc=;
        b=WguUuxzK8NfQkPXocKwNYJuawnSRPnZHEolpDspjc0zbw2DE3IOYNFQOA7nia8JmWn
         C5ttGlyWH9XTMsNrgE7mFHQeiPGQhM/shlwuiVlBdFlaUB1qIR081SvncBCs3laRB3YQ
         F5eOoEpCr99q0eKyiSmVD/1dE3CMVuAaHlFC4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=mryNIrP0FD4GwdZAjWFoBXoPUY83E9edkNuvAksU/EbE12dnkKnXc9YB66taUQuaSP
         Ty6AGX7Y70gYMbUBrL0RAYXwqlrSCTT41jQARPlWn41AkbTQC+JweVHkRegfeiL+yb43
         8FDosQaM15T7htn90YMkMM5LB1SGq7/0tKsTc=
Received: by 10.210.109.10 with SMTP id h10mr11522760ebc.22.1222957270258;
        Thu, 02 Oct 2008 07:21:10 -0700 (PDT)
Received: from kodapan.lan (c150-155-70-80.bjare.net [80.70.155.150])
        by mx.google.com with ESMTPS id 34sm7472807nfu.24.2008.10.02.07.21.05
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 02 Oct 2008 07:21:07 -0700 (PDT)
Message-Id: <F9D83DB9-5498-4A9B-9447-0C181B301AD4@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <D8E6BD3AD2634843B58AFF6A94FE246202D7B5041D@msgint02.mogul.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Calculation of fieldNorm causes irritating effect of sort order
Date: Thu, 2 Oct 2008 16:21:04 +0200
References: <D8E6BD3AD2634843B58AFF6A94FE246202D7B5041D@msgint02.mogul.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


2 okt 2008 kl. 14.47 skrev Jimi Hulleg=E5rd:

> But apparently this setOmitNorms(true) also disables boosting =20
> aswell. That is ok for now, but what if we want to use boosting in =20
> the future? Is there no way to disable the length normalization =20
> while still keeping the boost calculation?

You can make Similarity#lengthNorm(String fieldName, int numTokens) =20
return a constant (1f) to turn off length normalization but keep the =20
index time boost.


     kalle=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 14:54:24 2008
Return-Path: <java-user-return-36453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9636 invoked from network); 2 Oct 2008 14:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 14:54:24 -0000
Received: (qmail 15124 invoked by uid 500); 2 Oct 2008 14:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15099 invoked by uid 500); 2 Oct 2008 14:54:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15088 invoked by uid 99); 2 Oct 2008 14:54:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 07:54:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 14:53:14 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Thu, 2 Oct 2008 16:55:09 +0200
From: =?iso-8859-1?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 2 Oct 2008 16:55:21 +0200
Subject: RE: Calculation of fieldNorm causes irritating effect of sort order
Thread-Topic: Calculation of fieldNorm causes irritating effect of sort order
Thread-Index: AckkmmQ8r8ZrW89nTAeDbDSlK5gLrQABEcIw
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7B5049C@msgint02.mogul.com>
In-Reply-To: <F9D83DB9-5498-4A9B-9447-0C181B301AD4@gmail.com>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Karl Wrote:
>
> 2 okt 2008 kl. 14.47 skrev Jimi Hulleg=E5rd:
>
> > But apparently this setOmitNorms(true) also disables boosting
> > aswell. That is ok for now, but what if we want to use boosting in
> > the future? Is there no way to disable the length normalization
> > while still keeping the boost calculation?
>
> You can make Similarity#lengthNorm(String fieldName, int numTokens)
> return a constant (1f) to turn off length normalization but keep the
> index time boost.

Thanks for the suggestion, however the CMS has for some reasoned designed i=
ts search code so that it is more or less impossible to change the Similari=
ty implementation.

/Jimi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 19:14:53 2008
Return-Path: <java-user-return-36454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36012 invoked from network); 2 Oct 2008 19:14:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 19:14:53 -0000
Received: (qmail 52103 invoked by uid 500); 2 Oct 2008 19:14:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52066 invoked by uid 500); 2 Oct 2008 19:14:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 8965 invoked by uid 99); 2 Oct 2008 18:43:30 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Message-ID: <014401c924bf$8cbcd9b0$6e0000c0@carmelo>
From: "Carmelo Saffioti" <csaffi@libero.it>
To: <java-user@lucene.apache.org>
Subject: Concurrent search
Date: Thu, 2 Oct 2008 20:49:06 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0141_01C924D0.4FBDB500"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1933
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1933
X-Antivirus: avast! (VPS 081002-0, 02/10/2008), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0141_01C924D0.4FBDB500
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi everybody,
I'm trying to use the Lucene index on a web application, on which there =
are many concurrent users. How can I share the Lucene index to many =
concurrent users? Some people said that a shared index is accessible =
only by one user at time...


Thank you
Carmelo
------=_NextPart_000_0141_01C924D0.4FBDB500--


From java-user-return-36455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 20:15:26 2008
Return-Path: <java-user-return-36455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62656 invoked from network); 2 Oct 2008 20:15:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 20:15:26 -0000
Received: (qmail 39979 invoked by uid 500); 2 Oct 2008 20:15:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39515 invoked by uid 500); 2 Oct 2008 20:15:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39504 invoked by uid 99); 2 Oct 2008 20:15:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 13:15:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of petite_abeille@mac.com designates 17.148.16.87 as permitted sender)
Received: from [17.148.16.87] (HELO asmtpout012.mac.com) (17.148.16.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 20:14:13 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed
Received: from [192.168.1.5] ([89.217.199.115])
 by asmtp012.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0K84008TIO8EHS30@asmtp012.mac.com> for
 java-user@lucene.apache.org; Thu, 02 Oct 2008 13:14:42 -0700 (PDT)
Message-id: <4BC8B7BB-E858-4E70-BFB4-A2CF9C1A37B9@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <19774692.post@talk.nabble.com>
Subject: Re: Lucene vs. Database
Date: Thu, 02 Oct 2008 22:14:37 +0200
References: <19755932.post@talk.nabble.com> <19774692.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Oct 2, 2008, at 9:41 AM, agatone wrote:

> Now I have to go detailed into every one of them and write down stuff.

Couple of handy guidelines:

http://www.w3.org/DesignIssues/Principles.html

E.g. "Principle of Least Power" :)

Cheers,

--
PA.
http://alt.textdrive.com/nanoki/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 21:24:32 2008
Return-Path: <java-user-return-36456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5209 invoked from network); 2 Oct 2008 21:24:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 21:24:32 -0000
Received: (qmail 45416 invoked by uid 500); 2 Oct 2008 21:24:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45385 invoked by uid 500); 2 Oct 2008 21:24:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45374 invoked by uid 99); 2 Oct 2008 21:24:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 14:24:23 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 21:23:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KlVeN-0001PJ-2J
	for java-user@lucene.apache.org; Thu, 02 Oct 2008 14:23:55 -0700
Message-ID: <19787867.post@talk.nabble.com>
Date: Thu, 2 Oct 2008 14:23:55 -0700 (PDT)
From: "Mathias P.W Nilsson" <mathias@snyltarna.se>
To: java-user@lucene.apache.org
Subject: Advise for Mediabase with Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mathias@snyltarna.se
X-Virus-Checked: Checked by ClamAV on apache.org


Hi!

I'm currently developing a mediabase for 20-100 customers. A Customer can
upload a file, folder via ftp and a file grabber searches the file system
and adds the new file to a mysql database. It also creates thumbnails, adds
search words etc. Now, this mediabase is pretty old and is developed in php
for the web and the server that monitors events on the file system is java
based.

I want to recreate the mediabase with Wicket as web framework and lucene as
file indexer and have Spring manage the File grabber thread. 


This is what I want to do.

1.) Create a file grabber that searches files and folders for new files. 
2. ) Add keywords to the file. ( The folder path, file size, user rights,
index the content in the document )
3.) Make the files and folders searchable. Tree view for all the folders and
when a user clicks on a folder branch the files in that folder will be
visible for the user.

Is Lucene the right tool for me?


-- 
View this message in context: http://www.nabble.com/Advise-for-Mediabase-with-Lucene-tp19787867p19787867.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 21:38:00 2008
Return-Path: <java-user-return-36457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14826 invoked from network); 2 Oct 2008 21:38:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 21:38:00 -0000
Received: (qmail 66107 invoked by uid 500); 2 Oct 2008 21:37:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65703 invoked by uid 500); 2 Oct 2008 21:37:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65692 invoked by uid 99); 2 Oct 2008 21:37:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 14:37:52 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 21:36:49 +0000
Received: by nf-out-0910.google.com with SMTP id g16so558055nfd.15
        for <java-user@lucene.apache.org>; Thu, 02 Oct 2008 14:37:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=eXPb6axk10TngDGyvTIK0KTNvjBWfAwJ/BOSbRGlk7k=;
        b=ON67fZGOTeKkUEuqt3fTBnPu2jwYrSIxe5PLuCEkVvSs/lGO+iYNkoDynX+PkDkxS3
         BSdI8TsOsGfZisMmneCcl9MvLrA9vbkdILEGqGRB25L/cie66s67gnNBn0uBPoQjWJWL
         3kus8h2fSa+G9IMZ3tVng5i4hTb0h/C9e5KVw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XMC0dId8aMrlPTUlNCKibfTcveiB8Y/bnVTQnk3awlH135AsbrNzoTv6dL03NaAfdh
         TvCVlVL9laLJvBeRVAQD5Hm951PhDsOBHvS2jiDCP8F9OeVPAj6qJpxnR7hvaLai1zd6
         5rf8mE/MquwjuA9XK5ES/0YphD3M5TrhYsB08=
Received: by 10.86.76.16 with SMTP id y16mr395290fga.10.1222983426061;
        Thu, 02 Oct 2008 14:37:06 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Thu, 2 Oct 2008 14:37:06 -0700 (PDT)
Message-ID: <359a92830810021437u6223a9c6mcb3edf8113b612c4@mail.gmail.com>
Date: Thu, 2 Oct 2008 17:37:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Advise for Mediabase with Lucene
In-Reply-To: <19787867.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25023_2691571.1222983426063"
References: <19787867.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25023_2691571.1222983426063
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, that depends (tm). What do you expect Lucene to do for you?
Lucene would e a fine tool for creating a keywords index, searching
it, etc. Really, the rest of the stuff in step <2>. Conceptually, you'd
store each file as a document, with several fields. Say
filepath
text
user
rights


then mix-n-match your search queries to allow you to construct the
page you're returning to the user.

You could do the navigation thing by searching for filepaths that
begin with the correct fragment, then display that.

But rendering, moving files around, etc would be up to the rest
of your framework.

Best
Erick

On Thu, Oct 2, 2008 at 5:23 PM, Mathias P.W Nilsson <mathias@snyltarna.se>wrote:

>
> Hi!
>
> I'm currently developing a mediabase for 20-100 customers. A Customer can
> upload a file, folder via ftp and a file grabber searches the file system
> and adds the new file to a mysql database. It also creates thumbnails, adds
> search words etc. Now, this mediabase is pretty old and is developed in php
> for the web and the server that monitors events on the file system is java
> based.
>
> I want to recreate the mediabase with Wicket as web framework and lucene as
> file indexer and have Spring manage the File grabber thread.
>
>
> This is what I want to do.
>
> 1.) Create a file grabber that searches files and folders for new files.
> 2. ) Add keywords to the file. ( The folder path, file size, user rights,
> index the content in the document )
> 3.) Make the files and folders searchable. Tree view for all the folders
> and
> when a user clicks on a folder branch the files in that folder will be
> visible for the user.
>
> Is Lucene the right tool for me?
>
>
> --
> View this message in context:
> http://www.nabble.com/Advise-for-Mediabase-with-Lucene-tp19787867p19787867.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25023_2691571.1222983426063--

From java-user-return-36458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 23:19:07 2008
Return-Path: <java-user-return-36458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69122 invoked from network); 2 Oct 2008 23:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 23:19:07 -0000
Received: (qmail 96170 invoked by uid 500); 2 Oct 2008 23:18:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95586 invoked by uid 500); 2 Oct 2008 23:18:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95575 invoked by uid 99); 2 Oct 2008 23:18:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 16:18:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 23:17:57 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1269141rvb.5
        for <java-user@lucene.apache.org>; Thu, 02 Oct 2008 16:18:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=ZooQm0HhOAuumI1QCZHvhkHErN7Ctt294A6HdvQZNOA=;
        b=JQKibG3CkixlVcDMLym/LQ5ErR+U/KwtNpecZpp8Lx9Ce3FBNTz4YD9UVxBmY4sHx0
         WjmoKhCi5yB+S1kMfxPC2OKfhEkxPG2181tAuiBGqK8/jx+0fE9uVJV7pMLttCWunzkd
         7qpLNRphoL9UB2CIwA74M4u7UMo0lM4tZTQr4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=xGTF6TNem7PnwlFrY1ktmp7YJ1bZJccWFb5pfClqpYJNSwG+YRt0TFvpiAskPPHt/y
         ZwJMfYsy7gSKin9Slh8u6Qb/D2t3uRpxvItLheUuVvpkS9uQP/qf0Q8VG8/Xa/8A1LHc
         RmuoSeRnHyheJ4AT0FH3/bwSTYjSDcEc/yebY=
Received: by 10.142.72.4 with SMTP id u4mr75993wfa.269.1222989502378;
        Thu, 02 Oct 2008 16:18:22 -0700 (PDT)
Received: by 10.142.193.16 with HTTP; Thu, 2 Oct 2008 16:18:22 -0700 (PDT)
Message-ID: <16f8407d0810021618q10294d74w906b73ae33a316fb@mail.gmail.com>
Date: Thu, 2 Oct 2008 16:18:22 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Extracting Dates
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10179_32124761.1222989502375"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10179_32124761.1222989502375
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What should I use if I want to try to extract events (dates/times) out of an
HTML page? I looked at Tika since it's a parsing project. Am I on the right
track or is there something better to use? It also seems like Apache UIMA is
kind of doing that, but I'm not sure. I thought since a lot of these
projects are associated to lucene, someone might know.

David Lee

------=_Part_10179_32124761.1222989502375--

From java-user-return-36459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 23:27:57 2008
Return-Path: <java-user-return-36459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72604 invoked from network); 2 Oct 2008 23:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 23:27:57 -0000
Received: (qmail 4836 invoked by uid 500); 2 Oct 2008 23:27:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4804 invoked by uid 500); 2 Oct 2008 23:27:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4792 invoked by uid 99); 2 Oct 2008 23:27:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 16:27:49 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 23:26:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KlXZp-00065V-BO
	for java-user@lucene.apache.org; Thu, 02 Oct 2008 16:27:21 -0700
Message-ID: <19789539.post@talk.nabble.com>
Date: Thu, 2 Oct 2008 16:27:21 -0700 (PDT)
From: "Mathias P.W Nilsson" <mathias@snyltarna.se>
To: java-user@lucene.apache.org
Subject: Re: Advise for Mediabase with Lucene
In-Reply-To: <359a92830810021437u6223a9c6mcb3edf8113b612c4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mathias@snyltarna.se
References: <19787867.post@talk.nabble.com> <359a92830810021437u6223a9c6mcb3edf8113b612c4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Erick!

I've just bought the book Lucene in action and I will see where that leeds
me.

I'm aware of that lucene doens't do the other magic ;) just what it is made
for. Indexing and searching.
-- 
View this message in context: http://www.nabble.com/Advise-for-Mediabase-with-Lucene-tp19787867p19789539.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 02 23:28:57 2008
Return-Path: <java-user-return-36460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73182 invoked from network); 2 Oct 2008 23:28:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Oct 2008 23:28:57 -0000
Received: (qmail 8096 invoked by uid 500); 2 Oct 2008 23:28:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7800 invoked by uid 500); 2 Oct 2008 23:28:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7789 invoked by uid 99); 2 Oct 2008 23:28:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 16:28:50 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 23:27:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KlXan-00067D-Us
	for java-user@lucene.apache.org; Thu, 02 Oct 2008 16:28:21 -0700
Message-ID: <19789551.post@talk.nabble.com>
Date: Thu, 2 Oct 2008 16:28:21 -0700 (PDT)
From: "Mathias P.W Nilsson" <mathias@snyltarna.se>
To: java-user@lucene.apache.org
Subject: Re: Advise for Mediabase with Lucene
In-Reply-To: <19789539.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mathias@snyltarna.se
References: <19787867.post@talk.nabble.com> <359a92830810021437u6223a9c6mcb3edf8113b612c4@mail.gmail.com> <19789539.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Oh, I forgot. 

Would you save the documents as index on the file system or use Hibernate
search with lucene?
-- 
View this message in context: http://www.nabble.com/Advise-for-Mediabase-with-Lucene-tp19787867p19789551.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 00:17:48 2008
Return-Path: <java-user-return-36461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92983 invoked from network); 3 Oct 2008 00:17:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 00:17:47 -0000
Received: (qmail 35406 invoked by uid 500); 3 Oct 2008 00:17:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35372 invoked by uid 500); 3 Oct 2008 00:17:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35361 invoked by uid 99); 3 Oct 2008 00:17:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 17:17:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 00:16:39 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 5CB2271C3F9; Thu,  2 Oct 2008 17:17:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5934B71C026
	for <java-user@lucene.apache.org>; Thu,  2 Oct 2008 17:17:14 -0700 (PDT)
Date: Thu, 2 Oct 2008 17:17:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Calculation of fieldNorm causes irritating effect of sort order
In-Reply-To: <D8E6BD3AD2634843B58AFF6A94FE246202D7B503F1@msgint02.mogul.com>
Message-ID: <Pine.LNX.4.62.0810021703350.13538@radix.cryptio.net>
References: <D8E6BD3AD2634843B58AFF6A94FE246202D7B503F1@msgint02.mogul.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-ID: <Pine.LNX.4.62.0810021707031.13538@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


If i'm reading your message correctly, you (and everyone who has replied 
so far) have gotten caught in a red herring.  While an "explain" on the 
results from your queryB will most likely show you that the 
fieldNorm is the main differantiator in score between document-153 and 
document-244 that's not what matters.  the fieldNorms are also the same 
in your first query as well -- so you should be asking "what makes the 
score for document-153 in queryA different from queryB?" (and likewise for 
document-244)

if you do that you'll see that the portion of the score coming from the 
"meat" of your query (+alltext:betyg) is greatly reduced between queryA 
and queryB because of the structure of queryB ... which combined with 
tf/idf and fieldNorms for your "type" and "category" fields can change the 
order of results.

As Erick pointed out, what you really want is for your type and category 
clauses to be implemented as a Filter, so that they don't factor into your 
scores at all.  baring that you should at a minimum change the structure 
and boosts of the queries you execute to be something like...

+alltext:betyg +(+type:idea +category:14)^0.00001)



: A search for "betyg", where the user doesn't care if the ideas are 
: active or inactive, gives this result:
: 
: document-153
: document-244
: 
: The user then checkes the checkbox "Only active ideas", and clicks the 
: search button again. Now the result is:
: 
: document-244
: document-153

: The first query:
: +type:idea +alltext:betyg
: 
: The second query:
: +type:idea +(+alltext:betyg +category:14)


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 00:23:48 2008
Return-Path: <java-user-return-36462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2345 invoked from network); 3 Oct 2008 00:23:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 00:23:48 -0000
Received: (qmail 44512 invoked by uid 500); 3 Oct 2008 00:23:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44031 invoked by uid 500); 3 Oct 2008 00:23:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44020 invoked by uid 99); 3 Oct 2008 00:23:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 17:23:40 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 00:22:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1292844rvb.5
        for <java-user@lucene.apache.org>; Thu, 02 Oct 2008 17:23:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=R9UPzPmtv4+C0FbwDupfIEX546Qo2ytCBOUM9kJnrt8=;
        b=Ti/clszSJByjOWwWmTsZ5A6c44Ov95EIAv7FPOLqx4dwLFnvv3gz6K9SX3xTftY9s5
         WnbR+6p7/RWGPCGlrsd3O4IxxpIv0J6Rvlvh48S9kJoGuaa/HRpWiO3M7zS519rkhe5K
         VoDGgYMHjzoRkc3SP3fykPa6J/PMAxD7vWHE4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vbTCpwnNJ2InEWIHuFOfRTkypx3xC538hRlaSLpaZeRFcwxXpEgZBWvqUbWl1n10xT
         AsFGbR+OYsGikipLeF8WVCjffND+3LARjKMKG2MHEL5fWZJWf7SPg6HL9Xa7M/CgBgXy
         +gf4P2NUpB+d3Ky/dycmz7ju0nnYjtNq/t/MI=
Received: by 10.140.161.11 with SMTP id j11mr179156rve.134.1222993391534;
        Thu, 02 Oct 2008 17:23:11 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Thu, 2 Oct 2008 17:23:11 -0700 (PDT)
Message-ID: <359a92830810021723s74974f2cjec78d8321b32b5d5@mail.gmail.com>
Date: Thu, 2 Oct 2008 20:23:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Advise for Mediabase with Lucene
In-Reply-To: <19789551.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_852_27300486.1222993391523"
References: <19787867.post@talk.nabble.com>
	 <359a92830810021437u6223a9c6mcb3edf8113b612c4@mail.gmail.com>
	 <19789539.post@talk.nabble.com> <19789551.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_852_27300486.1222993391523
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not a particular fan of Hibernate, but that may just reflect my
unfamiliarity.

The real question is should you have two separate systems that you tie
together, Lucene as a search engine AND a database for "other stuff". My
*strong* preference is to keep the number of moving parts to a minimum so
I'd start by choosing one or the other.

You almost certainly won't be able to get acceptable performance out
of text-based searching using a database, so I'd go for the Lucene-based
solution first and only add in a database (in whatever form) if you find
yourself unable to do it all in Lucene.

NOTE: you really have to take off your database hat to use lucene. All the
stuff you reflexively want to do about normalizing data goes right out the
window. You do NOT want to try to make Lucene do joins, for instance.
Flatten
the data even if you cringe at the data replication <G>...

Search the user list for "database" and you'll find a lot of discussion...

Best
Erick

On Thu, Oct 2, 2008 at 7:28 PM, Mathias P.W Nilsson <mathias@snyltarna.se>wrote:

>
> Oh, I forgot.
>
> Would you save the documents as index on the file system or use Hibernate
> search with lucene?
> --
> View this message in context:
> http://www.nabble.com/Advise-for-Mediabase-with-Lucene-tp19787867p19789551.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_852_27300486.1222993391523--

From java-user-return-36463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 01:11:59 2008
Return-Path: <java-user-return-36463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34074 invoked from network); 3 Oct 2008 01:11:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 01:11:59 -0000
Received: (qmail 85579 invoked by uid 500); 3 Oct 2008 01:11:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85545 invoked by uid 500); 3 Oct 2008 01:11:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85534 invoked by uid 99); 3 Oct 2008 01:11:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Oct 2008 18:11:50 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 01:10:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KlZCU-0001Ep-K8
	for java-user@lucene.apache.org; Thu, 02 Oct 2008 18:11:22 -0700
Message-ID: <19790605.post@talk.nabble.com>
Date: Thu, 2 Oct 2008 18:11:22 -0700 (PDT)
From: "Mathias P.W Nilsson" <mathias@snyltarna.se>
To: java-user@lucene.apache.org
Subject: Re: Advise for Mediabase with Lucene
In-Reply-To: <359a92830810021723s74974f2cjec78d8321b32b5d5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mathias@snyltarna.se
References: <19787867.post@talk.nabble.com> <359a92830810021437u6223a9c6mcb3edf8113b612c4@mail.gmail.com> <19789539.post@talk.nabble.com> <19789551.post@talk.nabble.com> <359a92830810021723s74974f2cjec78d8321b32b5d5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I don't know if this is going to work.

Let's say I have a root folder that is the startpoint for a client.
The only thing I have in the database is the startPoint

When traversing the child folders I want to check If the folder has changed
since the last time.Can I store this in a lucene index, and How do I compare
the folder with the index? The same is of course true for files.

Check if the file is new( Extract content and add to index )
check if the file is altered ( Extract content and add to index )
how do I check if a file is deleted?

Let's say I want to create thumbnails for a file but the Thumbnail server
takes some time to finish so I would need to get the exact document via a
search. There are many questions and before convincing my boss to use Lucene
I must have those questions answered.

I guess some playing around with lucene should answer some of them. 
-- 
View this message in context: http://www.nabble.com/Advise-for-Mediabase-with-Lucene-tp19787867p19790605.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 07:59:56 2008
Return-Path: <java-user-return-36464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65210 invoked from network); 3 Oct 2008 07:59:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 07:59:55 -0000
Received: (qmail 32657 invoked by uid 500); 3 Oct 2008 07:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32618 invoked by uid 500); 3 Oct 2008 07:59:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32607 invoked by uid 99); 3 Oct 2008 07:59:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 00:59:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 07:58:45 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1575986wfc.20
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 00:59:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PLYchRayEb9KylgveK7CHV4DNWcdXuw+KBSfcb+NuS0=;
        b=YNGh3+iV46Rv/pN2zvJIm43WR4hlR60ZhOj2fI4v4oo4aMJmiwIRtMIh/0t2p5IMlb
         nazJKG7ftrUk4w7nJ88m7S+yCB7p/92BoKz9YLILH0yP3o+6pxQ6cpHySLwNeyzzDqJo
         cF/fc0zwKdJP2B0W/xnNVZF680akvaCa2CvIg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=JqEvUrMWj4M6yBmYaHEqPw21wJ/n0wUzTyHHgFmLsXx5VdVaG1pX7vjsV9x0woy7OA
         KCyqbO8lUQaJpWxtaz6cA/7bdOz5mmhlxTQq6LBWuup5fZpASdesGMRcJiPmVp/rq3tF
         awTVlQzgURQNyBPFv/TtRU9wkFXBWRMoIcDSs=
Received: by 10.142.180.11 with SMTP id c11mr247051wff.113.1223020760528;
        Fri, 03 Oct 2008 00:59:20 -0700 (PDT)
Received: by 10.142.49.5 with HTTP; Fri, 3 Oct 2008 00:59:20 -0700 (PDT)
Message-ID: <867513fe0810030059u34996d54t620faf756c4c85b8@mail.gmail.com>
Date: Fri, 3 Oct 2008 13:29:20 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent search
In-Reply-To: <014401c924bf$8cbcd9b0$6e0000c0@carmelo>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17782_14833298.1223020760536"
References: <014401c924bf$8cbcd9b0$6e0000c0@carmelo>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17782_14833298.1223020760536
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Camello,

It is pretty straight opening index searchers for the same index directory.
In other words just open multiple saerchers to the same index location and
it would work fine.

-- 
--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............

On Fri, Oct 3, 2008 at 12:19 AM, Carmelo Saffioti <csaffi@libero.it> wrote:

> Hi everybody,
> I'm trying to use the Lucene index on a web application, on which there are
> many concurrent users. How can I share the Lucene index to many concurrent
> users? Some people said that a shared index is accessible only by one user
> at time...
>
>
> Thank you
> Carmelo

------=_Part_17782_14833298.1223020760536--

From java-user-return-36465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 08:01:56 2008
Return-Path: <java-user-return-36465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65778 invoked from network); 3 Oct 2008 08:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 08:01:56 -0000
Received: (qmail 36310 invoked by uid 500); 3 Oct 2008 08:01:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36265 invoked by uid 500); 3 Oct 2008 08:01:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36254 invoked by uid 99); 3 Oct 2008 08:01:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 01:01:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 08:00:46 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1105039fgb.27
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 01:01:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=+dwigFI0c0Nvr2Y7Gf2HshFYTDmT1ngjLiVLW5QDAWQ=;
        b=PudORtPq0GCwjWKejW5YUgxbTfPwQXny+qSKDBkZRz9Tw2GdnB9LarIz/GJZP8g78M
         a/gpzCzfMgqQuzOphX/YVaHPMO4dJ9ohOC0VqcCOYSZ3wnnG3ltA/38NxgeqvnGNN4d0
         ZT7NuVxXkxkndS8E1rCy0xVNKluNFVf+8hQe0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Veig5/FWScw1DrhBSUfsKSJH+9J2sR7+xUNYDyiHvbGsHB1n3RAj4Q+xpt/yLA+fkv
         UcHgsuh9+iKS+3qGJQn/GBpf3HxNjtA3Z/Rc5KN1G51tuFOckuyBys6BTBQXLAaat2JO
         2wahXqvDwz/vlsXZOovF44yc3Y5WdZuHtFEu0=
Received: by 10.86.97.7 with SMTP id u7mr756036fgb.51.1223020880075;
        Fri, 03 Oct 2008 01:01:20 -0700 (PDT)
Received: by 10.86.50.20 with HTTP; Fri, 3 Oct 2008 01:01:20 -0700 (PDT)
Message-ID: <a4d7dcf50810030101m125f1a6cs28b2d30d0100ba10@mail.gmail.com>
Date: Fri, 3 Oct 2008 09:01:20 +0100
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent search
In-Reply-To: <014401c924bf$8cbcd9b0$6e0000c0@carmelo>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43035_7874121.1223020880079"
References: <014401c924bf$8cbcd9b0$6e0000c0@carmelo>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43035_7874121.1223020880079
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Carmelo,

Can you clarify what is "index" in your case? Concurrency issues, I believe,
are well explained in:

http://darksleep.com/lucene/
(see "Digression: Thread Safety" chapter).

Regards,
Mindaugas

On Thu, Oct 2, 2008 at 7:49 PM, Carmelo Saffioti <csaffi@libero.it> wrote:

> Hi everybody,
> I'm trying to use the Lucene index on a web application, on which there are
> many concurrent users. How can I share the Lucene index to many concurrent
> users? Some people said that a shared index is accessible only by one user
> at time...
>
>
> Thank you
> Carmelo

------=_Part_43035_7874121.1223020880079--

From java-user-return-36466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 08:27:06 2008
Return-Path: <java-user-return-36466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72188 invoked from network); 3 Oct 2008 08:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 08:27:06 -0000
Received: (qmail 61798 invoked by uid 500); 3 Oct 2008 08:26:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61761 invoked by uid 500); 3 Oct 2008 08:26:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61750 invoked by uid 99); 3 Oct 2008 08:26:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 01:26:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 08:25:57 +0000
Received: by ti-out-0910.google.com with SMTP id b8so708392tic.11
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 01:26:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lwqdVFelvuYMgIaIutnMxFIqzDsw8Pz0wnWdH/kO228=;
        b=D+YAqV/5CBBO66WM1AZhnagcQsFh5N0qFxlKtVH8hEBG31LHRsg/Vv5rkOanzGirCL
         Jc/7UZXwnIFRZDq45SEPth7qDAGiHFreHUn7OV3OhZNDQrZSZO4lon6OSUa/+AUIStEW
         UbvQhlUkNLI2uVVSYOtEbEieo+Ncc5lYpMZCM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=CeRJEq4/0idGCVqljZcu61SWiJcELJpTelYVvPxkSY5l40DpNBWKd3BQp9d0w2D9RB
         1hxD1F7Gg7emSG5ynGnQ02tyOANSXd9Xwli1jM0DXp71jjqDJ1S6tofLFx26VCcmU9d/
         YgjNIYNtoElEn4uRPTbvU159GQpzzdhtJVqcg=
Received: by 10.110.10.16 with SMTP id 16mr218947tij.25.1223022391074;
        Fri, 03 Oct 2008 01:26:31 -0700 (PDT)
Received: by 10.110.50.16 with HTTP; Fri, 3 Oct 2008 01:26:31 -0700 (PDT)
Message-ID: <6fc71b230810030126jde6f6d3v1dbb4467e29c04b2@mail.gmail.com>
Date: Fri, 3 Oct 2008 13:56:31 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Document larger than setRAMBufferSizeMB()
In-Reply-To: <6fc71b230810030105k1b80df91w1d95da5122d309b5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7852_21709116.1223022391090"
References: <6fc71b230810030105k1b80df91w1d95da5122d309b5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7852_21709116.1223022391090
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Everyone,

I have an index which I am opening at one time only. I keep adding the
documents to it until I reach a limit of 500.
After this, I close the index and open it again. (This is done in order to
save time taken by opening and closing the index)
Also, I have set setRAMBufferSizeMB to 16MB.

If the document size itself is greater than 16MB what will happen in this
case??
It is throwing
java.lang.OutOfMemoryError: Java heap space
Now, my query is,
Can we change something in the way we parse/index to make it more memory
friendly so that it doesnt throw this exception.
And, Can it be caught and overcome gracefully?


Thanks a lot
Aditi

------=_Part_7852_21709116.1223022391090--

From java-user-return-36467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 08:43:17 2008
Return-Path: <java-user-return-36467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74830 invoked from network); 3 Oct 2008 08:43:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 08:43:17 -0000
Received: (qmail 74916 invoked by uid 500); 3 Oct 2008 08:43:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74875 invoked by uid 500); 3 Oct 2008 08:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74864 invoked by uid 99); 3 Oct 2008 08:43:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 01:43:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 08:42:05 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1439671rvb.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 01:42:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=joBAPllfp5Agr9Hy8pWEK/ef/Zo9n/42YijQ0zvpP+0=;
        b=eAPLYpoS3wLxZVof+KFw5Ez4S9yWL2fNMyB50ttqMfyhiWDobshvo5bEslC6kHnLNM
         Rx12FoV6H5VlB6KoIlTARR3L3dEd1v4hd8hMrk/7hPZEbe69Ou+u6sjFif4nPJn60TEz
         wV4AG5LueuAOQOEC9EGl5QOS2Dg0S6yjwJge4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=urMJ5ZNm0XCaURP0IqiNF+zv9voLlQr2BLn5jxG5l6Tsh57XRol27iOPjsAJMOcq8q
         hOkOB0tIeta922gJvs8cGXi92DccFWrioVQJ4cGLK16ObhYu1bBCaBKB+fIBLKVDFfGn
         XewQ2kEjezzBRqUgcU+Esw5VZwCdOLd1mop8M=
Received: by 10.142.192.11 with SMTP id p11mr255377wff.276.1223023360551;
        Fri, 03 Oct 2008 01:42:40 -0700 (PDT)
Received: by 10.142.49.5 with HTTP; Fri, 3 Oct 2008 01:42:40 -0700 (PDT)
Message-ID: <867513fe0810030142m17270231l60c027e7845a6000@mail.gmail.com>
Date: Fri, 3 Oct 2008 14:12:40 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document larger than setRAMBufferSizeMB()
In-Reply-To: <6fc71b230810030126jde6f6d3v1dbb4467e29c04b2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18084_4796461.1223023360563"
References: <6fc71b230810030105k1b80df91w1d95da5122d309b5@mail.gmail.com>
	 <6fc71b230810030126jde6f6d3v1dbb4467e29c04b2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18084_4796461.1223023360563
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Aditi,

I guess increasing the buffer size would be a solution here, but in case you
wouldn't know the expected max doc size. I guess the best way to handle that
would be a regular try catch block in which you could commit the current
buffer. At the least you could just continue the loop after doing whatever
you wish to do using an exception handling block.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............

On Fri, Oct 3, 2008 at 1:56 PM, Aditi Goyal <aditigupta20@gmail.com> wrote:

> Hi Everyone,
>
> I have an index which I am opening at one time only. I keep adding the
> documents to it until I reach a limit of 500.
> After this, I close the index and open it again. (This is done in order to
> save time taken by opening and closing the index)
> Also, I have set setRAMBufferSizeMB to 16MB.
>
> If the document size itself is greater than 16MB what will happen in this
> case??
> It is throwing
> java.lang.OutOfMemoryError: Java heap space
> Now, my query is,
> Can we change something in the way we parse/index to make it more memory
> friendly so that it doesnt throw this exception.
> And, Can it be caught and overcome gracefully?
>
>
> Thanks a lot
> Aditi
>

------=_Part_18084_4796461.1223023360563--

From java-user-return-36468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 09:32:57 2008
Return-Path: <java-user-return-36468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91635 invoked from network); 3 Oct 2008 09:32:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 09:32:57 -0000
Received: (qmail 20659 invoked by uid 500); 3 Oct 2008 09:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20628 invoked by uid 500); 3 Oct 2008 09:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20617 invoked by uid 99); 3 Oct 2008 09:32:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 02:32:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.120] (HELO smtp137.mail.mud.yahoo.com) (209.191.107.120)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Oct 2008 09:31:41 +0000
Received: (qmail 27542 invoked from network); 3 Oct 2008 09:31:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=oC+KuKDkRfnDP4xRdKQl9clFcZXNbm9eQPH1wD3Xc6HDKm2qaMhiG0Ihz2pYZQ6azXNJ64lSaeBtgxDkYAuDC7QkfbC2FJKfjoyFJwqS7Nd665T011LLT5REEB/SC5wl7UALhxU0qyROlyeXnEwWtbx0V9rQGTKB4Wcq1qGNymQ=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp137.mail.mud.yahoo.com with SMTP; 3 Oct 2008 09:31:11 -0000
X-YMail-OSG: wjLWXuEVM1m6kUtQPDdzVh8QsBWR7HujUV6pkrZSjqGVa9TwcD5fGvNkSHLCnbvLJQbZRVt9WUzYawTHR68Hgdk47Xfmlvpg6WG6Lfit84pcgyTdwdUzxNzj1TUrDS3hT.a_yBax9u8D_oaff_exARS.niyM
X-Yahoo-Newman-Property: ymail-3
Message-ID: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Single searcher vs Multi Searcher
Date: Fri, 3 Oct 2008 15:01:03 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

My indexing is growing by 1 million records per day and the memory 
consumption of the searcher object is quite high.

There are different opinion in the groups. Few suggest to use single 
database and few to use sharding. My Database has 10 million records now and 
it might go till 30 million or more. I plan to shard the index. but 
Multisearcher will give me benifit.

Regards
Ganesh


Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 09:34:24 2008
Return-Path: <java-user-return-36469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92346 invoked from network); 3 Oct 2008 09:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 09:34:24 -0000
Received: (qmail 23019 invoked by uid 500); 3 Oct 2008 09:34:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22477 invoked by uid 500); 3 Oct 2008 09:34:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22466 invoked by uid 99); 3 Oct 2008 09:34:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 02:34:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 09:33:12 +0000
Received: by ti-out-0910.google.com with SMTP id b8so730390tic.11
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 02:33:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=DgEo/VGbm7MCvANkguCN7sQR4PqcRAkIRIcxFDDJVj8=;
        b=mUYq/BXeuboctTk2h47stmcWUGMPZtMXzAwYksWBpvJGHDaYtzgPP8/Tyi+qMT/3hR
         YvO5e4LizGqolotXVwnE+w9h3Bf3Bpl+wd4LZmJdQhdofL2iUq1YP5KTWe8F4v8kJflk
         OCFUxxtuDMUpDbFGQYyx9CDVotoMO5q4JBo6A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lx4us8ciJBN32zPO/UNNQPbQwRZ42jPJQBSdAP/NM+3sfR5FVat8yt8/6KzOZ8QU/2
         zIEe3u67zuwNEtd+VvG7sGVHzPhTfYBo0lUO9p179aUGo55P+W8mWI20Ia0c4WZa/hB5
         a1a4RCZciMYTRJh6Wgi5QV8cbgPpCVMpCtL5g=
Received: by 10.110.105.10 with SMTP id d10mr270680tic.18.1223026409548;
        Fri, 03 Oct 2008 02:33:29 -0700 (PDT)
Received: by 10.110.50.16 with HTTP; Fri, 3 Oct 2008 02:33:29 -0700 (PDT)
Message-ID: <6fc71b230810030233o5a97acefycffd38b62fd2db86@mail.gmail.com>
Date: Fri, 3 Oct 2008 15:03:29 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document larger than setRAMBufferSizeMB()
In-Reply-To: <867513fe0810030142m17270231l60c027e7845a6000@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9050_31831646.1223026409530"
References: <6fc71b230810030105k1b80df91w1d95da5122d309b5@mail.gmail.com>
	 <6fc71b230810030126jde6f6d3v1dbb4467e29c04b2@mail.gmail.com>
	 <867513fe0810030142m17270231l60c027e7845a6000@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9050_31831646.1223026409530
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Anshum.
Although it raises another query, committing the current buffer will commit
the docs before and what will happen to the current doc which threw an error
while adding a field to it, will that also get committed in the half??

Thanks a lot
Aditi

On Fri, Oct 3, 2008 at 2:12 PM, Anshum <anshumg@gmail.com> wrote:

> Hi Aditi,
>
> I guess increasing the buffer size would be a solution here, but in case
> you
> wouldn't know the expected max doc size. I guess the best way to handle
> that
> would be a regular try catch block in which you could commit the current
> buffer. At the least you could just continue the loop after doing whatever
> you wish to do using an exception handling block.
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
> On Fri, Oct 3, 2008 at 1:56 PM, Aditi Goyal <aditigupta20@gmail.com>
> wrote:
>
> > Hi Everyone,
> >
> > I have an index which I am opening at one time only. I keep adding the
> > documents to it until I reach a limit of 500.
> > After this, I close the index and open it again. (This is done in order
> to
> > save time taken by opening and closing the index)
> > Also, I have set setRAMBufferSizeMB to 16MB.
> >
> > If the document size itself is greater than 16MB what will happen in this
> > case??
> > It is throwing
> > java.lang.OutOfMemoryError: Java heap space
> > Now, my query is,
> > Can we change something in the way we parse/index to make it more memory
> > friendly so that it doesnt throw this exception.
> > And, Can it be caught and overcome gracefully?
> >
> >
> > Thanks a lot
> > Aditi
> >
>

------=_Part_9050_31831646.1223026409530--

From java-user-return-36470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 10:07:32 2008
Return-Path: <java-user-return-36470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10006 invoked from network); 3 Oct 2008 10:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 10:07:31 -0000
Received: (qmail 41895 invoked by uid 500); 3 Oct 2008 10:07:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41854 invoked by uid 500); 3 Oct 2008 10:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41843 invoked by uid 99); 3 Oct 2008 10:07:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 03:07:22 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 10:06:20 +0000
Received: by gxk6 with SMTP id 6so2482160gxk.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 03:05:53 -0700 (PDT)
Received: by 10.90.113.17 with SMTP id l17mr1050966agc.66.1223028353464;
        Fri, 03 Oct 2008 03:05:53 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 20sm3050793agd.35.2008.10.03.03.05.51
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 03 Oct 2008 03:05:52 -0700 (PDT)
Message-Id: <80D8E85F-500E-4961-A5FB-C06F6F14EC2E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6fc71b230810030233o5a97acefycffd38b62fd2db86@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Document larger than setRAMBufferSizeMB()
Date: Fri, 3 Oct 2008 06:05:50 -0400
References: <6fc71b230810030105k1b80df91w1d95da5122d309b5@mail.gmail.com> <6fc71b230810030126jde6f6d3v1dbb4467e29c04b2@mail.gmail.com> <867513fe0810030142m17270231l60c027e7845a6000@mail.gmail.com> <6fc71b230810030233o5a97acefycffd38b62fd2db86@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


First off, IndexWriter's RAM buffer size is "approximate": after each  
doc is added, we check if the RAM consumed is greater than our bugdet,  
and if so, we flush.

When you add a doc that's larger than the RAM buffer size, all that  
will happen is after that doc is indexed, we flush.  In other words,  
that doc will cause IndexWriter to use more RAM that it's budget,  
until it flushes.

IndexWriter never throws OOME itself.  The fact that you're hitting it  
means your JRE is starved for RAM.  You should try increasing it's  
allowed max heap size (eg -Xmx2048M), making sure you have enough  
physical RAM on the machine to not start thrashing.

Second, whenever a document hits an exception during indexing, one of  
two things will happen in response.  If the exception is at a bad  
time, meaning it may have corrupted the internal RAM buffer,  
IndexWriter will abort all buffered documents (since the last flush).   
OOME usually falls into this category.  If instead the exception  
happens at an "OK" time, say when asking for the next Token from the  
TokenStream, then we stop indexing that document and immediately mark  
it as deleted so the "first half" that had been indexed will never be  
visible in the index -- ie, it's "all or none".

Mike

Aditi Goyal wrote:

> Thanks Anshum.
> Although it raises another query, committing the current buffer will  
> commit
> the docs before and what will happen to the current doc which threw  
> an error
> while adding a field to it, will that also get committed in the half??
>
> Thanks a lot
> Aditi
>
> On Fri, Oct 3, 2008 at 2:12 PM, Anshum <anshumg@gmail.com> wrote:
>
>> Hi Aditi,
>>
>> I guess increasing the buffer size would be a solution here, but in  
>> case
>> you
>> wouldn't know the expected max doc size. I guess the best way to  
>> handle
>> that
>> would be a regular try catch block in which you could commit the  
>> current
>> buffer. At the least you could just continue the loop after doing  
>> whatever
>> you wish to do using an exception handling block.
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>> On Fri, Oct 3, 2008 at 1:56 PM, Aditi Goyal <aditigupta20@gmail.com>
>> wrote:
>>
>>> Hi Everyone,
>>>
>>> I have an index which I am opening at one time only. I keep adding  
>>> the
>>> documents to it until I reach a limit of 500.
>>> After this, I close the index and open it again. (This is done in  
>>> order
>> to
>>> save time taken by opening and closing the index)
>>> Also, I have set setRAMBufferSizeMB to 16MB.
>>>
>>> If the document size itself is greater than 16MB what will happen  
>>> in this
>>> case??
>>> It is throwing
>>> java.lang.OutOfMemoryError: Java heap space
>>> Now, my query is,
>>> Can we change something in the way we parse/index to make it more  
>>> memory
>>> friendly so that it doesnt throw this exception.
>>> And, Can it be caught and overcome gracefully?
>>>
>>>
>>> Thanks a lot
>>> Aditi
>>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 10:11:57 2008
Return-Path: <java-user-return-36471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12517 invoked from network); 3 Oct 2008 10:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 10:11:52 -0000
Received: (qmail 48514 invoked by uid 500); 3 Oct 2008 10:11:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48448 invoked by uid 500); 3 Oct 2008 10:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48437 invoked by uid 99); 3 Oct 2008 10:11:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 03:11:42 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.127] (HELO smtp144.mail.mud.yahoo.com) (209.191.107.127)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Oct 2008 10:10:37 +0000
Received: (qmail 66163 invoked from network); 3 Oct 2008 10:11:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=TpWhr4Tjv4a1OHCCjAlMTItb/bF7Bc4vc12rKX01zNGG88Ms8dOl43WN3vI6mjYbfJsYVN9qYZ3zF7kk8XRwtyN7BviHv/65BEdko3ZMkFbzKiAuWtrkIF58Wzo4hMyFPLHSEuezyET/Pf36kxe1jHCVkC0r4Hm2pJafrI6Avl4=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp144.mail.mud.yahoo.com with SMTP; 3 Oct 2008 10:11:09 -0000
X-YMail-OSG: .x8CElMVM1kZ7hPMYkdpPIN9V7hHCD59D6hxRcU.EN_s8fr_aFF5HI2UI4AIsMVgz4sqKlEKkQg7nFEHJCYaJ7myIQagykGsTb_30fjras6TrGtVfAYiymSOzW.hC78rz0P9tRbQlgqX0MD5M44797.hP548DCkSKYcZJOVtbeFZEb0nXA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <030501c92540$5b43bb70$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6fc71b230810030105k1b80df91w1d95da5122d309b5@mail.gmail.com> <6fc71b230810030126jde6f6d3v1dbb4467e29c04b2@mail.gmail.com> <867513fe0810030142m17270231l60c027e7845a6000@mail.gmail.com> <6fc71b230810030233o5a97acefycffd38b62fd2db86@mail.gmail.com>
Subject: Re: Document larger than setRAMBufferSizeMB()
Date: Fri, 3 Oct 2008 15:41:06 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Single document of 16 MB seems to be big. I think you are trying to store 
the entire document content. If it is so drop the stored field and store its 
reference information in the database, which could help to retreive the 
content later.

Regards
Ganesh

----- Original Message ----- 
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, October 03, 2008 3:03 PM
Subject: Re: Document larger than setRAMBufferSizeMB()


> Thanks Anshum.
> Although it raises another query, committing the current buffer will 
> commit
> the docs before and what will happen to the current doc which threw an 
> error
> while adding a field to it, will that also get committed in the half??
>
> Thanks a lot
> Aditi
>
> On Fri, Oct 3, 2008 at 2:12 PM, Anshum <anshumg@gmail.com> wrote:
>
>> Hi Aditi,
>>
>> I guess increasing the buffer size would be a solution here, but in case
>> you
>> wouldn't know the expected max doc size. I guess the best way to handle
>> that
>> would be a regular try catch block in which you could commit the current
>> buffer. At the least you could just continue the loop after doing 
>> whatever
>> you wish to do using an exception handling block.
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>> On Fri, Oct 3, 2008 at 1:56 PM, Aditi Goyal <aditigupta20@gmail.com>
>> wrote:
>>
>> > Hi Everyone,
>> >
>> > I have an index which I am opening at one time only. I keep adding the
>> > documents to it until I reach a limit of 500.
>> > After this, I close the index and open it again. (This is done in order
>> to
>> > save time taken by opening and closing the index)
>> > Also, I have set setRAMBufferSizeMB to 16MB.
>> >
>> > If the document size itself is greater than 16MB what will happen in 
>> > this
>> > case??
>> > It is throwing
>> > java.lang.OutOfMemoryError: Java heap space
>> > Now, my query is,
>> > Can we change something in the way we parse/index to make it more 
>> > memory
>> > friendly so that it doesnt throw this exception.
>> > And, Can it be caught and overcome gracefully?
>> >
>> >
>> > Thanks a lot
>> > Aditi
>> >
>>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 11:28:27 2008
Return-Path: <java-user-return-36472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33263 invoked from network); 3 Oct 2008 11:28:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 11:28:27 -0000
Received: (qmail 14736 invoked by uid 500); 3 Oct 2008 11:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14703 invoked by uid 500); 3 Oct 2008 11:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14692 invoked by uid 99); 3 Oct 2008 11:28:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 04:28:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 11:27:14 +0000
Received: by wx-out-0506.google.com with SMTP id h28so333562wxd.20
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 04:27:37 -0700 (PDT)
Received: by 10.70.34.13 with SMTP id h13mr1057623wxh.81.1223033257873;
        Fri, 03 Oct 2008 04:27:37 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id i34sm4093109wxd.21.2008.10.03.04.27.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 03 Oct 2008 04:27:36 -0700 (PDT)
Message-Id: <6FE65A48-B397-4BB9-95B9-C441D13F69AF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <030501c92540$5b43bb70$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Document larger than setRAMBufferSizeMB()
X-Priority: 3
Date: Fri, 3 Oct 2008 07:27:35 -0400
References: <6fc71b230810030105k1b80df91w1d95da5122d309b5@mail.gmail.com> <6fc71b230810030126jde6f6d3v1dbb4467e29c04b2@mail.gmail.com> <867513fe0810030142m17270231l60c027e7845a6000@mail.gmail.com> <6fc71b230810030233o5a97acefycffd38b62fd2db86@mail.gmail.com> <030501c92540$5b43bb70$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Note that large stored fields do not use up any RAM in IndexWriter's  
RAM buffer because these stored fields are immediately written to the  
directory and not stored in RAM for very long.

Aditi, I'd love to see the full stack trace of the OOME that was  
originally hit if you still have it...

Mike

Ganesh wrote:

> Single document of 16 MB seems to be big. I think you are trying to  
> store the entire document content. If it is so drop the stored field  
> and store its reference information in the database, which could  
> help to retreive the content later.
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Aditi Goyal" <aditigupta20@gmail.com 
> >
> To: <java-user@lucene.apache.org>
> Sent: Friday, October 03, 2008 3:03 PM
> Subject: Re: Document larger than setRAMBufferSizeMB()
>
>
>> Thanks Anshum.
>> Although it raises another query, committing the current buffer  
>> will commit
>> the docs before and what will happen to the current doc which threw  
>> an error
>> while adding a field to it, will that also get committed in the  
>> half??
>>
>> Thanks a lot
>> Aditi
>>
>> On Fri, Oct 3, 2008 at 2:12 PM, Anshum <anshumg@gmail.com> wrote:
>>
>>> Hi Aditi,
>>>
>>> I guess increasing the buffer size would be a solution here, but  
>>> in case
>>> you
>>> wouldn't know the expected max doc size. I guess the best way to  
>>> handle
>>> that
>>> would be a regular try catch block in which you could commit the  
>>> current
>>> buffer. At the least you could just continue the loop after doing  
>>> whatever
>>> you wish to do using an exception handling block.
>>>
>>> --
>>> Anshum Gupta
>>> Naukri Labs!
>>> http://ai-cafe.blogspot.com
>>>
>>> The facts expressed here belong to everybody, the opinions to me.  
>>> The
>>> distinction is yours to draw............
>>>
>>> On Fri, Oct 3, 2008 at 1:56 PM, Aditi Goyal <aditigupta20@gmail.com>
>>> wrote:
>>>
>>> > Hi Everyone,
>>> >
>>> > I have an index which I am opening at one time only. I keep  
>>> adding the
>>> > documents to it until I reach a limit of 500.
>>> > After this, I close the index and open it again. (This is done  
>>> in order
>>> to
>>> > save time taken by opening and closing the index)
>>> > Also, I have set setRAMBufferSizeMB to 16MB.
>>> >
>>> > If the document size itself is greater than 16MB what will  
>>> happen in > this
>>> > case??
>>> > It is throwing
>>> > java.lang.OutOfMemoryError: Java heap space
>>> > Now, my query is,
>>> > Can we change something in the way we parse/index to make it  
>>> more > memory
>>> > friendly so that it doesnt throw this exception.
>>> > And, Can it be caught and overcome gracefully?
>>> >
>>> >
>>> > Thanks a lot
>>> > Aditi
>>> >
>>>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 16:19:44 2008
Return-Path: <java-user-return-36473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9285 invoked from network); 3 Oct 2008 16:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 16:19:44 -0000
Received: (qmail 19552 invoked by uid 500); 3 Oct 2008 16:19:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19496 invoked by uid 500); 3 Oct 2008 16:19:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19468 invoked by uid 99); 3 Oct 2008 16:19:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 09:19:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 16:18:24 +0000
Received: by gxk6 with SMTP id 6so2903320gxk.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 09:18:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8lzidi0yqLHWJD2oYy2Q4dFWiPKOGTkclWei3NXwMxI=;
        b=frjWPYMjhDOHx6xxRObWTuN0NBds2zY3feRVXFzDEnyTCk8k1f3Z1kScigHlqrw2fC
         H7dmRIiE4b5MrYXBdOS7AdZuZLVf4Vx46SRgU5KtcPoQgWwVMNn/S/aQ5u6H8uZlUGDe
         u3tewZ/rfpm8AnwQHRGszn/7Pxl2DIfKAxU/E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=bzeoxDI9vvwecrMGwaYKhBaVWwOf5pzp/H2zK7BEs3tO3059/GATzBMb8lHfwZNAos
         daM5JlaxwWwAXC4XjhT7mm3Jc9hTyAn/l0GkkdITDPKuZQ/OJl8g0/xBLaVtPxmxeiYc
         utYX+Ii5kzcyUBfb+FWwgsHeOEsl8b2DFIXA0=
Received: by 10.142.147.20 with SMTP id u20mr462049wfd.47.1223050737439;
        Fri, 03 Oct 2008 09:18:57 -0700 (PDT)
Received: by 10.142.49.5 with HTTP; Fri, 3 Oct 2008 09:18:57 -0700 (PDT)
Message-ID: <867513fe0810030918m1b3ecd64k98ed01214caaaa5d@mail.gmail.com>
Date: Fri, 3 Oct 2008 21:48:57 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Single searcher vs Multi Searcher
In-Reply-To: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21884_20487011.1223050737452"
References: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21884_20487011.1223050737452
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ganesh,

I have experimented with sharded indexes and they seem to benefit me(atleast
in my case). I would like to know a few things before I answer your
question:
1. Do you have a reasonable criteria ( a calculated one) to shard the
indexes?
2. How do you plan to split the index? Is it going to be document based
(which I guess it should be as otherwise you would have to build a complete
distributed system)
3. Do you plan to put your indexes on the RAM or on (physically) seperate
HDDs?

Though all said and done, sharded indexes are a good approach, if done the
right way.
--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Oct 3, 2008 at 3:01 PM, Ganesh <emailgane@yahoo.co.in> wrote:

> Hello all,
>
> My indexing is growing by 1 million records per day and the memory
> consumption of the searcher object is quite high.
>
> There are different opinion in the groups. Few suggest to use single
> database and few to use sharding. My Database has 10 million records now and
> it might go till 30 million or more. I plan to shard the index. but
> Multisearcher will give me benifit.
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21884_20487011.1223050737452--

From java-user-return-36474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 16:51:36 2008
Return-Path: <java-user-return-36474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18015 invoked from network); 3 Oct 2008 16:51:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 16:51:36 -0000
Received: (qmail 69049 invoked by uid 500); 3 Oct 2008 16:51:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69020 invoked by uid 500); 3 Oct 2008 16:51:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69007 invoked by uid 99); 3 Oct 2008 16:51:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 09:51:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Oct 2008 16:50:24 +0000
Received: (qmail 36408 invoked by uid 60001); 3 Oct 2008 16:49:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=x7ZDWpTeDNehLYlm9hbS+nb1kep+dx6NjqDYelTwwhN+pXAHKRSLWx0P3rhfFv0Y21owBYOR5doY09Bhkwk5zADboy7qYpuy4EvQIGxlJUGVDUN00+fz3dpNRPZ24YuW/KhNuAW/6fbofkAv65Y9CeHFVaU0AM0vzViOPIHOISU=;
X-YMail-OSG: ZTy_zzwVM1n24jYR2bJBwJMX0Ok4ZMJfzSCouRE6iMORG4CtKiSLTWatVIMICj_BijEvBtnbjpJCDfe3gKNhsjAJlh_CO.U9SIVzm4ND3zTfmS3BqtP8_kQu2uwHQu_EkBq7Drjd6pdPYqZEkHGALjJxM4hiAUyXl3criEuWiiti9Ndu
Received: from [167.206.188.3] by web50303.mail.re2.yahoo.com via HTTP; Fri, 03 Oct 2008 09:49:57 PDT
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.218.2
Date: Fri, 3 Oct 2008 09:49:57 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Extracting Dates
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <999046.36339.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

David, this is not really a Lucene issue.
Here is some Perl code that you could either use or rewrite in Java if you need it in Java:

http://search.cpan.org/dist/Date-Extract/

Tika won't help with this, and I believe UIMA itself with not help either, although there may be components for date extraction that plug into UIMA.


Otis 
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: David Lee <davidtlee@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, October 2, 2008 7:18:22 PM
> Subject: Extracting Dates
> 
> What should I use if I want to try to extract events (dates/times) out of an
> HTML page? I looked at Tika since it's a parsing project. Am I on the right
> track or is there something better to use? It also seems like Apache UIMA is
> kind of doing that, but I'm not sure. I thought since a lot of these
> projects are associated to lucene, someone might know.
> 
> David Lee


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 19:40:56 2008
Return-Path: <java-user-return-36475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4931 invoked from network); 3 Oct 2008 19:40:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 19:40:55 -0000
Received: (qmail 92689 invoked by uid 500); 3 Oct 2008 19:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92658 invoked by uid 500); 3 Oct 2008 19:40:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92641 invoked by uid 99); 3 Oct 2008 19:40:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 12:40:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 19:39:45 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1667485rvb.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 12:40:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=2Cw1atL/fVvukY9Pqzw0NF6XgY04uzEXEZpf8sqs1jU=;
        b=vfoCpydyzqCtkD+7e9i0KnSK1RsqZyxegEJm+iYMC5EfjGSy/Mwhwn76qNwoXLIqDp
         x2O32tY0/h/pMy2J7sF6eNpSpn1el75pqL+7AhSUsLX6FoX4PWaFxhv0OiER+ApQlN9X
         l4NH6GR1gWXVOhdVp48PJuPXh98f7JA8Tv408=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Q+OoHkUnDB5tUY+iIQ18stDI4EnZ7fOoUATyq3CXvB2unias7YqHuktaUG5SOuwsmU
         pGK2O0SdVLkSvZWWswvM92UoiJdjd5NtIbE2jBEJ9tuSb7ZUe/k4kKOicy+4yfBg1XL+
         6TwCG2+bePz0A4Fi6jFtQli6/ggFyIC6kDXOI=
Received: by 10.140.163.12 with SMTP id l12mr923837rve.137.1223062810763;
        Fri, 03 Oct 2008 12:40:10 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Fri, 3 Oct 2008 12:40:10 -0700 (PDT)
Message-ID: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com>
Date: Fri, 3 Oct 2008 15:40:10 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: ClassCastException when writing to index writer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12148_25681160.1223062810775"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12148_25681160.1223062810775
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am using lucene 2.3.2 and I encounter the following exception when I try
to insert a object into the index.

Caused by: java.lang.ClassCastException: java.util.Vector cannot be cast to
org.apache.lucene.index.SegmentInfos
at org.apache.lucene.index.SegmentInfos.clone(SegmentInfos.java:321)
at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:715)
at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:666)

Has Anyone seen this problem before?  What seems to be the problem?

Thanks!

------=_Part_12148_25681160.1223062810775--

From java-user-return-36476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 20:42:12 2008
Return-Path: <java-user-return-36476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24612 invoked from network); 3 Oct 2008 20:42:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 20:42:12 -0000
Received: (qmail 2191 invoked by uid 500); 3 Oct 2008 20:41:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2162 invoked by uid 500); 3 Oct 2008 20:41:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2151 invoked by uid 99); 3 Oct 2008 20:41:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 13:41:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 20:40:57 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1689233rvb.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 13:41:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=S8EAxTiIapBzyKq+48neJdGO9XVp+3BHTYrpJzI14bQ=;
        b=qhUaJkfd06nKrH0uwzS28BjxYXdydx3hSVoG2LgRYkX2oEd1UVytrutrRGcY0toA/m
         h9pbEhZm8N1lH60a81lf06xCjuHIdTsrY81tAjHgEV5GqpGLEYqEwdEFIPzeUKXrO5x0
         T09+d1RXaz430MfRjJ8vubuiSU8FWvtCOV0cM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=I1ncbuULmczkNPdXWY5uzGuZuDtz8Kj0aF2m2oPBJdBvAgCoMNHBjnLwUm/Y0qQiHx
         qD5eLrB6yz5b+2JBbzbuGVy0QMuMdnQENbcZQkIqeKTeGrU0+wYqPqaOFPkOyLuGl0t5
         A8PK4jaUynl7sIOtUiriauQ8W5AIAqNuSEHRg=
Received: by 10.141.164.13 with SMTP id r13mr967671rvo.150.1223066483091;
        Fri, 03 Oct 2008 13:41:23 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Fri, 3 Oct 2008 13:41:23 -0700 (PDT)
Message-ID: <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com>
Date: Fri, 3 Oct 2008 16:41:23 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12772_19276672.1223066483102"
References: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12772_19276672.1223066483102
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think I know what the problem is looking at the code:

In SegmentInfos.java (line 321):

class SegmentInfos extends Vector
{
    public Object clone() {
       SegmentInfos sis = (SegmentInfos) super.clone();
       for(int i=0;i<sis.size();i++) {
         sis.setElementAt(((SegmentInfo) sis.elementAt(i)).clone(), i);
       }
       return sis;
    }
}

We see that it is trying to cast a Vector into SegmentInfos which explains
the ClassCastException.  This is definitely a bug.


On Fri, Oct 3, 2008 at 3:40 PM, Paul Chan <wayofdragon@gmail.com> wrote:

> Hi,
>
> I am using lucene 2.3.2 and I encounter the following exception when I try
> to insert a object into the index.
>
> Caused by: java.lang.ClassCastException: java.util.Vector cannot be cast to
> org.apache.lucene.index.SegmentInfos
> at org.apache.lucene.index.SegmentInfos.clone(SegmentInfos.java:321)
> at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:715)
> at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:666)
>
> Has Anyone seen this problem before?  What seems to be the problem?
>
> Thanks!
>

------=_Part_12772_19276672.1223066483102--

From java-user-return-36477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 20:55:33 2008
Return-Path: <java-user-return-36477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29288 invoked from network); 3 Oct 2008 20:55:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 20:55:33 -0000
Received: (qmail 27510 invoked by uid 500); 3 Oct 2008 20:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27478 invoked by uid 500); 3 Oct 2008 20:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27467 invoked by uid 99); 3 Oct 2008 20:55:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 13:55:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 20:54:21 +0000
Received: by yw-out-2324.google.com with SMTP id 3so287366ywj.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 13:54:54 -0700 (PDT)
Received: by 10.100.225.19 with SMTP id x19mr1937598ang.152.1223067294734;
        Fri, 03 Oct 2008 13:54:54 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c16sm6190717anc.31.2008.10.03.13.54.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 03 Oct 2008 13:54:53 -0700 (PDT)
Message-Id: <8717EE55-F146-42DA-B55D-1CEC37F5BC37@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: ClassCastException when writing to index writer
Date: Fri, 3 Oct 2008 16:54:51 -0400
References: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com> <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you describe what led up to this exception?  Ie, what calls you  
made to Lucene before this.

Mike

Paul Chan wrote:

> I think I know what the problem is looking at the code:
>
> In SegmentInfos.java (line 321):
>
> class SegmentInfos extends Vector
> {
>    public Object clone() {
>       SegmentInfos sis = (SegmentInfos) super.clone();
>       for(int i=0;i<sis.size();i++) {
>         sis.setElementAt(((SegmentInfo) sis.elementAt(i)).clone(), i);
>       }
>       return sis;
>    }
> }
>
> We see that it is trying to cast a Vector into SegmentInfos which  
> explains
> the ClassCastException.  This is definitely a bug.
>
>
> On Fri, Oct 3, 2008 at 3:40 PM, Paul Chan <wayofdragon@gmail.com>  
> wrote:
>
>> Hi,
>>
>> I am using lucene 2.3.2 and I encounter the following exception  
>> when I try
>> to insert a object into the index.
>>
>> Caused by: java.lang.ClassCastException: java.util.Vector cannot be  
>> cast to
>> org.apache.lucene.index.SegmentInfos
>> at org.apache.lucene.index.SegmentInfos.clone(SegmentInfos.java:321)
>> at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:715)
>> at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:666)
>>
>> Has Anyone seen this problem before?  What seems to be the problem?
>>
>> Thanks!
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 21:24:54 2008
Return-Path: <java-user-return-36478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39625 invoked from network); 3 Oct 2008 21:24:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 21:24:54 -0000
Received: (qmail 83555 invoked by uid 500); 3 Oct 2008 21:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82942 invoked by uid 500); 3 Oct 2008 21:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82931 invoked by uid 99); 3 Oct 2008 21:24:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 14:24:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 21:23:44 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1704659rvb.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 14:24:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=wJe7GJc5Gz2uHhNRpGCgprvCuwTfCMU5ynhxS/Pk7Bw=;
        b=wEboHqFPaTowBpLVPY96pTr0ujy/naXEqlq//Ef2oaYP1aptV35Q/n+E550Vp4f6Q3
         B32ikCGx2fCqGmxU3yjUCLJUISOhaV1wshkJAgJ5Z+uUIxX9PihTIPvI77aTFUxaZplt
         kgpNIZO+szalb99Db8dIYC9a/nt21x2HZmzro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=reVP8VpQnMOLizLQ5ELXy3EEkYuERDr3fKlyA6gxwvWLiLsLwD+tjHRbP5Eyu9SocW
         BB5IBnlxaWOlSuQPbhLBuTC4llQ5FkRTfuXv+m6OZ+J+7deYrzi5395ykCC255ov1kxE
         bx56MWDIzT+FO0eUJn2T1d3U9+bDgm+xelFHM=
Received: by 10.141.168.7 with SMTP id v7mr999104rvo.95.1223069059190;
        Fri, 03 Oct 2008 14:24:19 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Fri, 3 Oct 2008 14:24:19 -0700 (PDT)
Message-ID: <e9d73d4a0810031424o17a979b9k4011f5e74d8485de@mail.gmail.com>
Date: Fri, 3 Oct 2008 17:24:19 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <8717EE55-F146-42DA-B55D-1CEC37F5BC37@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13319_13013974.1223069059182"
References: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com>
	 <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com>
	 <8717EE55-F146-42DA-B55D-1CEC37F5BC37@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13319_13013974.1223069059182
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Mike,

I am actually using the Compass Search Engine which in turn makes use of
Lucene.  They are doing the following in their code:

        IndexWriter indexWriter = new IndexWriter(dir, autoCommit, analyzer,
create, deletionPolicy);

where autoCommit = false.

In turn, Lucene will do the following:

public class IndexWriter {

      public IndexWriter(Directory d, boolean autoCommit, Analyzer a,
boolean create, IndexDeletionPolicy deletionPolicy)
       throws CorruptIndexException, LockObtainFailedException, IOException
{
          init(d, a, create, false, deletionPolicy, autoCommit);
      }

      private void init(Directory d, Analyzer a, final boolean create,
boolean closeDir,                   IndexDeletionPolicy deletionPolicy,
boolean autoCommit)
      {
         ...
         ..
         if (!autoCommit) {
           rollbackSegmentInfos = (SegmentInfos) segmentInfos.clone();
         }
      }
}

which calls the clone() method that causes the exception because autoCommit
= false.

On Fri, Oct 3, 2008 at 4:54 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Can you describe what led up to this exception?  Ie, what calls you made to
> Lucene before this.
>
> Mike
>
>
> Paul Chan wrote:
>
>  I think I know what the problem is looking at the code:
>>
>> In SegmentInfos.java (line 321):
>>
>> class SegmentInfos extends Vector
>> {
>>   public Object clone() {
>>      SegmentInfos sis = (SegmentInfos) super.clone();
>>      for(int i=0;i<sis.size();i++) {
>>        sis.setElementAt(((SegmentInfo) sis.elementAt(i)).clone(), i);
>>      }
>>      return sis;
>>   }
>> }
>>
>> We see that it is trying to cast a Vector into SegmentInfos which explains
>> the ClassCastException.  This is definitely a bug.
>>
>>
>> On Fri, Oct 3, 2008 at 3:40 PM, Paul Chan <wayofdragon@gmail.com> wrote:
>>
>>  Hi,
>>>
>>> I am using lucene 2.3.2 and I encounter the following exception when I
>>> try
>>> to insert a object into the index.
>>>
>>> Caused by: java.lang.ClassCastException: java.util.Vector cannot be cast
>>> to
>>> org.apache.lucene.index.SegmentInfos
>>> at org.apache.lucene.index.SegmentInfos.clone(SegmentInfos.java:321)
>>> at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:715)
>>> at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:666)
>>>
>>> Has Anyone seen this problem before?  What seems to be the problem?
>>>
>>> Thanks!
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13319_13013974.1223069059182--

From java-user-return-36479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 21:36:18 2008
Return-Path: <java-user-return-36479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46790 invoked from network); 3 Oct 2008 21:36:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 21:36:16 -0000
Received: (qmail 95500 invoked by uid 500); 3 Oct 2008 21:36:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95473 invoked by uid 500); 3 Oct 2008 21:36:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95462 invoked by uid 99); 3 Oct 2008 21:36:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 14:36:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 21:35:05 +0000
Received: by an-out-0708.google.com with SMTP id c37so98192anc.49
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 14:35:39 -0700 (PDT)
Received: by 10.100.3.13 with SMTP id 13mr2097291anc.14.1223069739448;
        Fri, 03 Oct 2008 14:35:39 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c16sm6286697anc.31.2008.10.03.14.35.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 03 Oct 2008 14:35:38 -0700 (PDT)
Message-Id: <9D0CE7F0-1AFA-4B40-9956-E677C64BC2CE@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <e9d73d4a0810031424o17a979b9k4011f5e74d8485de@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: ClassCastException when writing to index writer
Date: Fri, 3 Oct 2008 17:35:36 -0400
References: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com> <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com> <8717EE55-F146-42DA-B55D-1CEC37F5BC37@mikemccandless.com> <e9d73d4a0810031424o17a979b9k4011f5e74d8485de@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Which Java environment are you running?

super.clone() from SegmentInfos should produce a new SegmentInfos  
object.

It seems like in your case it's somehow producing a Vector instead?

Mike

Paul Chan wrote:

> Hi Mike,
>
> I am actually using the Compass Search Engine which in turn makes  
> use of
> Lucene.  They are doing the following in their code:
>
>        IndexWriter indexWriter = new IndexWriter(dir, autoCommit,  
> analyzer,
> create, deletionPolicy);
>
> where autoCommit = false.
>
> In turn, Lucene will do the following:
>
> public class IndexWriter {
>
>      public IndexWriter(Directory d, boolean autoCommit, Analyzer a,
> boolean create, IndexDeletionPolicy deletionPolicy)
>       throws CorruptIndexException, LockObtainFailedException,  
> IOException
> {
>          init(d, a, create, false, deletionPolicy, autoCommit);
>      }
>
>      private void init(Directory d, Analyzer a, final boolean create,
> boolean closeDir,                   IndexDeletionPolicy  
> deletionPolicy,
> boolean autoCommit)
>      {
>         ...
>         ..
>         if (!autoCommit) {
>           rollbackSegmentInfos = (SegmentInfos) segmentInfos.clone();
>         }
>      }
> }
>
> which calls the clone() method that causes the exception because  
> autoCommit
> = false.
>
> On Fri, Oct 3, 2008 at 4:54 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Can you describe what led up to this exception?  Ie, what calls you  
>> made to
>> Lucene before this.
>>
>> Mike
>>
>>
>> Paul Chan wrote:
>>
>> I think I know what the problem is looking at the code:
>>>
>>> In SegmentInfos.java (line 321):
>>>
>>> class SegmentInfos extends Vector
>>> {
>>>  public Object clone() {
>>>     SegmentInfos sis = (SegmentInfos) super.clone();
>>>     for(int i=0;i<sis.size();i++) {
>>>       sis.setElementAt(((SegmentInfo) sis.elementAt(i)).clone(), i);
>>>     }
>>>     return sis;
>>>  }
>>> }
>>>
>>> We see that it is trying to cast a Vector into SegmentInfos which  
>>> explains
>>> the ClassCastException.  This is definitely a bug.
>>>
>>>
>>> On Fri, Oct 3, 2008 at 3:40 PM, Paul Chan <wayofdragon@gmail.com>  
>>> wrote:
>>>
>>> Hi,
>>>>
>>>> I am using lucene 2.3.2 and I encounter the following exception  
>>>> when I
>>>> try
>>>> to insert a object into the index.
>>>>
>>>> Caused by: java.lang.ClassCastException: java.util.Vector cannot  
>>>> be cast
>>>> to
>>>> org.apache.lucene.index.SegmentInfos
>>>> at org.apache.lucene.index.SegmentInfos.clone(SegmentInfos.java: 
>>>> 321)
>>>> at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:715)
>>>> at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:666)
>>>>
>>>> Has Anyone seen this problem before?  What seems to be the problem?
>>>>
>>>> Thanks!
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 22:07:58 2008
Return-Path: <java-user-return-36480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63895 invoked from network); 3 Oct 2008 22:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 22:07:57 -0000
Received: (qmail 24952 invoked by uid 500); 3 Oct 2008 22:07:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24925 invoked by uid 500); 3 Oct 2008 22:07:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24914 invoked by uid 99); 3 Oct 2008 22:07:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 15:07:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 22:06:47 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1719331rvb.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 15:07:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=UJABK12wKiGdgdh1LHcCJ0/qSiENZ1iKNSGJyx3vh8I=;
        b=Rl++YS8njsECzZUVzG3Jpdmoi6GjArkaJXhebHuNnvr19MnKnaQZ/+cCCFmkM9Cf9h
         zSsdVTTptucPXVkODl8ZG+ouzew9Lm6rxKIlGfjPVmdkjO8kelLvJQNcguFWC0ksa7G1
         BiGMm/dmysORBv3bI7SO2qOTfVDAsyDRMpAvs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=veKM98AhSsK/6rOC7A15cXNeD5RaCPJMSCCKbg9JwXJPr4g3vDfG5K5Ia94/0n/Zb5
         rh0k5s99PQhV51ZJC+W7rWqmipm6nojze6JMKvKtoPEs0qlRz41UoxF2JEwhttmsacqV
         mmTSqCngZZllIxm4PTBg5osI9DzM7GOVhsoQg=
Received: by 10.141.141.3 with SMTP id t3mr990244rvn.255.1223071632247;
        Fri, 03 Oct 2008 15:07:12 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Fri, 3 Oct 2008 15:07:12 -0700 (PDT)
Message-ID: <e9d73d4a0810031507y368a0f37u4d60cff35ef99b5e@mail.gmail.com>
Date: Fri, 3 Oct 2008 18:07:12 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <9D0CE7F0-1AFA-4B40-9956-E677C64BC2CE@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13793_27907513.1223071632232"
References: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com>
	 <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com>
	 <8717EE55-F146-42DA-B55D-1CEC37F5BC37@mikemccandless.com>
	 <e9d73d4a0810031424o17a979b9k4011f5e74d8485de@mail.gmail.com>
	 <9D0CE7F0-1AFA-4B40-9956-E677C64BC2CE@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13793_27907513.1223071632232
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am using Java 1.6.0_02.  Is this a problem?

On Fri, Oct 3, 2008 at 5:35 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Which Java environment are you running?
>
> super.clone() from SegmentInfos should produce a new SegmentInfos object.
>
> It seems like in your case it's somehow producing a Vector instead?
>
> Mike
>
>
> Paul Chan wrote:
>
>  Hi Mike,
>>
>> I am actually using the Compass Search Engine which in turn makes use of
>> Lucene.  They are doing the following in their code:
>>
>>       IndexWriter indexWriter = new IndexWriter(dir, autoCommit, analyzer,
>> create, deletionPolicy);
>>
>> where autoCommit = false.
>>
>> In turn, Lucene will do the following:
>>
>> public class IndexWriter {
>>
>>     public IndexWriter(Directory d, boolean autoCommit, Analyzer a,
>> boolean create, IndexDeletionPolicy deletionPolicy)
>>      throws CorruptIndexException, LockObtainFailedException, IOException
>> {
>>         init(d, a, create, false, deletionPolicy, autoCommit);
>>     }
>>
>>     private void init(Directory d, Analyzer a, final boolean create,
>> boolean closeDir,                   IndexDeletionPolicy deletionPolicy,
>> boolean autoCommit)
>>     {
>>        ...
>>        ..
>>        if (!autoCommit) {
>>          rollbackSegmentInfos = (SegmentInfos) segmentInfos.clone();
>>        }
>>     }
>> }
>>
>> which calls the clone() method that causes the exception because
>> autoCommit
>> = false.
>>
>> On Fri, Oct 3, 2008 at 4:54 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>
>>> Can you describe what led up to this exception?  Ie, what calls you made
>>> to
>>> Lucene before this.
>>>
>>> Mike
>>>
>>>
>>> Paul Chan wrote:
>>>
>>> I think I know what the problem is looking at the code:
>>>
>>>>
>>>> In SegmentInfos.java (line 321):
>>>>
>>>> class SegmentInfos extends Vector
>>>> {
>>>>  public Object clone() {
>>>>    SegmentInfos sis = (SegmentInfos) super.clone();
>>>>    for(int i=0;i<sis.size();i++) {
>>>>      sis.setElementAt(((SegmentInfo) sis.elementAt(i)).clone(), i);
>>>>    }
>>>>    return sis;
>>>>  }
>>>> }
>>>>
>>>> We see that it is trying to cast a Vector into SegmentInfos which
>>>> explains
>>>> the ClassCastException.  This is definitely a bug.
>>>>
>>>>
>>>> On Fri, Oct 3, 2008 at 3:40 PM, Paul Chan <wayofdragon@gmail.com>
>>>> wrote:
>>>>
>>>> Hi,
>>>>
>>>>>
>>>>> I am using lucene 2.3.2 and I encounter the following exception when I
>>>>> try
>>>>> to insert a object into the index.
>>>>>
>>>>> Caused by: java.lang.ClassCastException: java.util.Vector cannot be
>>>>> cast
>>>>> to
>>>>> org.apache.lucene.index.SegmentInfos
>>>>> at org.apache.lucene.index.SegmentInfos.clone(SegmentInfos.java:321)
>>>>> at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:715)
>>>>> at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:666)
>>>>>
>>>>> Has Anyone seen this problem before?  What seems to be the problem?
>>>>>
>>>>> Thanks!
>>>>>
>>>>>
>>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13793_27907513.1223071632232--

From java-user-return-36481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 22:16:43 2008
Return-Path: <java-user-return-36481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68076 invoked from network); 3 Oct 2008 22:16:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 22:16:43 -0000
Received: (qmail 30655 invoked by uid 500); 3 Oct 2008 22:16:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30622 invoked by uid 500); 3 Oct 2008 22:16:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30611 invoked by uid 99); 3 Oct 2008 22:16:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 15:16:33 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 22:15:31 +0000
Received: by gxk6 with SMTP id 6so3371129gxk.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 15:16:04 -0700 (PDT)
Received: by 10.100.128.20 with SMTP id a20mr2076695and.153.1223072163970;
        Fri, 03 Oct 2008 15:16:03 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c28sm7095301anc.16.2008.10.03.15.16.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 03 Oct 2008 15:16:03 -0700 (PDT)
Message-Id: <0FAD03BA-50FA-4397-84A6-B74268C9EA58@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <e9d73d4a0810031507y368a0f37u4d60cff35ef99b5e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: ClassCastException when writing to index writer
Date: Fri, 3 Oct 2008 18:16:00 -0400
References: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com> <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com> <8717EE55-F146-42DA-B55D-1CEC37F5BC37@mikemccandless.com> <e9d73d4a0810031424o17a979b9k4011f5e74d8485de@mail.gmail.com> <9D0CE7F0-1AFA-4B40-9956-E677C64BC2CE@mikemccandless.com> <e9d73d4a0810031507y368a0f37u4d60cff35ef99b5e@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


That's Sun's JRE?  That should be fine, unless there's something  
seriously wrong with it's java.util.Vector implementation.

But, this is an exceptionally strange exception.  Maybe try a  
different version of the JRE?

Any odd JARs on your CLASSPATH?

What hardware/OS?

Mike

Paul Chan wrote:

> I am using Java 1.6.0_02.  Is this a problem?
>
> On Fri, Oct 3, 2008 at 5:35 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Which Java environment are you running?
>>
>> super.clone() from SegmentInfos should produce a new SegmentInfos  
>> object.
>>
>> It seems like in your case it's somehow producing a Vector instead?
>>
>> Mike
>>
>>
>> Paul Chan wrote:
>>
>> Hi Mike,
>>>
>>> I am actually using the Compass Search Engine which in turn makes  
>>> use of
>>> Lucene.  They are doing the following in their code:
>>>
>>>      IndexWriter indexWriter = new IndexWriter(dir, autoCommit,  
>>> analyzer,
>>> create, deletionPolicy);
>>>
>>> where autoCommit = false.
>>>
>>> In turn, Lucene will do the following:
>>>
>>> public class IndexWriter {
>>>
>>>    public IndexWriter(Directory d, boolean autoCommit, Analyzer a,
>>> boolean create, IndexDeletionPolicy deletionPolicy)
>>>     throws CorruptIndexException, LockObtainFailedException,  
>>> IOException
>>> {
>>>        init(d, a, create, false, deletionPolicy, autoCommit);
>>>    }
>>>
>>>    private void init(Directory d, Analyzer a, final boolean create,
>>> boolean closeDir,                   IndexDeletionPolicy  
>>> deletionPolicy,
>>> boolean autoCommit)
>>>    {
>>>       ...
>>>       ..
>>>       if (!autoCommit) {
>>>         rollbackSegmentInfos = (SegmentInfos) segmentInfos.clone();
>>>       }
>>>    }
>>> }
>>>
>>> which calls the clone() method that causes the exception because
>>> autoCommit
>>> = false.
>>>
>>> On Fri, Oct 3, 2008 at 4:54 PM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>
>>>> Can you describe what led up to this exception?  Ie, what calls  
>>>> you made
>>>> to
>>>> Lucene before this.
>>>>
>>>> Mike
>>>>
>>>>
>>>> Paul Chan wrote:
>>>>
>>>> I think I know what the problem is looking at the code:
>>>>
>>>>>
>>>>> In SegmentInfos.java (line 321):
>>>>>
>>>>> class SegmentInfos extends Vector
>>>>> {
>>>>> public Object clone() {
>>>>>   SegmentInfos sis = (SegmentInfos) super.clone();
>>>>>   for(int i=0;i<sis.size();i++) {
>>>>>     sis.setElementAt(((SegmentInfo) sis.elementAt(i)).clone(), i);
>>>>>   }
>>>>>   return sis;
>>>>> }
>>>>> }
>>>>>
>>>>> We see that it is trying to cast a Vector into SegmentInfos which
>>>>> explains
>>>>> the ClassCastException.  This is definitely a bug.
>>>>>
>>>>>
>>>>> On Fri, Oct 3, 2008 at 3:40 PM, Paul Chan <wayofdragon@gmail.com>
>>>>> wrote:
>>>>>
>>>>> Hi,
>>>>>
>>>>>>
>>>>>> I am using lucene 2.3.2 and I encounter the following exception  
>>>>>> when I
>>>>>> try
>>>>>> to insert a object into the index.
>>>>>>
>>>>>> Caused by: java.lang.ClassCastException: java.util.Vector  
>>>>>> cannot be
>>>>>> cast
>>>>>> to
>>>>>> org.apache.lucene.index.SegmentInfos
>>>>>> at org.apache.lucene.index.SegmentInfos.clone(SegmentInfos.java: 
>>>>>> 321)
>>>>>> at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:715)
>>>>>> at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java: 
>>>>>> 666)
>>>>>>
>>>>>> Has Anyone seen this problem before?  What seems to be the  
>>>>>> problem?
>>>>>>
>>>>>> Thanks!
>>>>>>
>>>>>>
>>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 03 22:39:06 2008
Return-Path: <java-user-return-36482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72583 invoked from network); 3 Oct 2008 22:39:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Oct 2008 22:39:06 -0000
Received: (qmail 48975 invoked by uid 500); 3 Oct 2008 22:38:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48946 invoked by uid 500); 3 Oct 2008 22:38:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48935 invoked by uid 99); 3 Oct 2008 22:38:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 15:38:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 22:37:56 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1730106rvb.5
        for <java-user@lucene.apache.org>; Fri, 03 Oct 2008 15:38:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lcDNnTxqA2BaK1a2h9S4uIES43PxIZqiywbcYu4qCPs=;
        b=l4ogrljDYSgthmeDmkf1ats7ugkITSL3yw5gl6+wpruC5+U7cuQj2ej+hI+pRLs9OF
         2fYYbuNlbvaqeLL+FOpOiNE6dPfehK2YYFVe5oOXwkA/q7AB4u1dWfVuGp9GsGqyWIIk
         Q0pm8ioyfM7VgMs8JLgyCrn8drj5hFO4QbPPw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ubtctOqTiaxDVQGp2kAoExL+3mnZQuypMCkoXxExPNEXdxD+FgW5VLYv9tCX12SqiQ
         7YETLImhHzTTr3qpT2sSEERZpsLlB+eURfCAvi0VS8as5QQbZ+WbwsBVr0ddNqPs1YM0
         AvpzSrP1iKYsjWT1zgim5Gx1CcXlKvxvLcRak=
Received: by 10.141.88.3 with SMTP id q3mr1023017rvl.94.1223073502023;
        Fri, 03 Oct 2008 15:38:22 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Fri, 3 Oct 2008 15:38:21 -0700 (PDT)
Message-ID: <e9d73d4a0810031538r8171293r356eb9a0f26a780a@mail.gmail.com>
Date: Fri, 3 Oct 2008 18:38:21 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <0FAD03BA-50FA-4397-84A6-B74268C9EA58@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14175_3559666.1223073502023"
References: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com>
	 <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com>
	 <8717EE55-F146-42DA-B55D-1CEC37F5BC37@mikemccandless.com>
	 <e9d73d4a0810031424o17a979b9k4011f5e74d8485de@mail.gmail.com>
	 <9D0CE7F0-1AFA-4B40-9956-E677C64BC2CE@mikemccandless.com>
	 <e9d73d4a0810031507y368a0f37u4d60cff35ef99b5e@mail.gmail.com>
	 <0FAD03BA-50FA-4397-84A6-B74268C9EA58@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14175_3559666.1223073502023
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am using Sun's JRE 1.6.0_02 on Windows XP

Actually...are you sure it would work?  java.util.Vector has the following
clone() method:

public Object <http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html>
*clone*()
{
}

I didn't think you can cast a base class (Vector) to its derived class
(SegmentInfos) in Java?

On Fri, Oct 3, 2008 at 6:16 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> That's Sun's JRE?  That should be fine, unless there's something seriously
> wrong with it's java.util.Vector implementation.
>
> But, this is an exceptionally strange exception.  Maybe try a different
> version of the JRE?
>
> Any odd JARs on your CLASSPATH?
>
> What hardware/OS?
>
>
> Mike
>
> Paul Chan wrote:
>
>  I am using Java 1.6.0_02.  Is this a problem?
>>
>> On Fri, Oct 3, 2008 at 5:35 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>
>>> Which Java environment are you running?
>>>
>>> super.clone() from SegmentInfos should produce a new SegmentInfos object.
>>>
>>> It seems like in your case it's somehow producing a Vector instead?
>>>
>>> Mike
>>>
>>>
>>> Paul Chan wrote:
>>>
>>> Hi Mike,
>>>
>>>>
>>>> I am actually using the Compass Search Engine which in turn makes use of
>>>> Lucene.  They are doing the following in their code:
>>>>
>>>>     IndexWriter indexWriter = new IndexWriter(dir, autoCommit, analyzer,
>>>> create, deletionPolicy);
>>>>
>>>> where autoCommit = false.
>>>>
>>>> In turn, Lucene will do the following:
>>>>
>>>> public class IndexWriter {
>>>>
>>>>   public IndexWriter(Directory d, boolean autoCommit, Analyzer a,
>>>> boolean create, IndexDeletionPolicy deletionPolicy)
>>>>    throws CorruptIndexException, LockObtainFailedException, IOException
>>>> {
>>>>       init(d, a, create, false, deletionPolicy, autoCommit);
>>>>   }
>>>>
>>>>   private void init(Directory d, Analyzer a, final boolean create,
>>>> boolean closeDir,                   IndexDeletionPolicy deletionPolicy,
>>>> boolean autoCommit)
>>>>   {
>>>>      ...
>>>>      ..
>>>>      if (!autoCommit) {
>>>>        rollbackSegmentInfos = (SegmentInfos) segmentInfos.clone();
>>>>      }
>>>>   }
>>>> }
>>>>
>>>> which calls the clone() method that causes the exception because
>>>> autoCommit
>>>> = false.
>>>>
>>>> On Fri, Oct 3, 2008 at 4:54 PM, Michael McCandless <
>>>> lucene@mikemccandless.com> wrote:
>>>>
>>>>
>>>>  Can you describe what led up to this exception?  Ie, what calls you
>>>>> made
>>>>> to
>>>>> Lucene before this.
>>>>>
>>>>> Mike
>>>>>
>>>>>
>>>>> Paul Chan wrote:
>>>>>
>>>>> I think I know what the problem is looking at the code:
>>>>>
>>>>>
>>>>>> In SegmentInfos.java (line 321):
>>>>>>
>>>>>> class SegmentInfos extends Vector
>>>>>> {
>>>>>> public Object clone() {
>>>>>>  SegmentInfos sis = (SegmentInfos) super.clone();
>>>>>>  for(int i=0;i<sis.size();i++) {
>>>>>>    sis.setElementAt(((SegmentInfo) sis.elementAt(i)).clone(), i);
>>>>>>  }
>>>>>>  return sis;
>>>>>> }
>>>>>> }
>>>>>>
>>>>>> We see that it is trying to cast a Vector into SegmentInfos which
>>>>>> explains
>>>>>> the ClassCastException.  This is definitely a bug.
>>>>>>
>>>>>>
>>>>>> On Fri, Oct 3, 2008 at 3:40 PM, Paul Chan <wayofdragon@gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>> Hi,
>>>>>>
>>>>>>
>>>>>>> I am using lucene 2.3.2 and I encounter the following exception when
>>>>>>> I
>>>>>>> try
>>>>>>> to insert a object into the index.
>>>>>>>
>>>>>>> Caused by: java.lang.ClassCastException: java.util.Vector cannot be
>>>>>>> cast
>>>>>>> to
>>>>>>> org.apache.lucene.index.SegmentInfos
>>>>>>> at org.apache.lucene.index.SegmentInfos.clone(SegmentInfos.java:321)
>>>>>>> at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:715)
>>>>>>> at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:666)
>>>>>>>
>>>>>>> Has Anyone seen this problem before?  What seems to be the problem?
>>>>>>>
>>>>>>> Thanks!
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14175_3559666.1223073502023--

From java-user-return-36483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 04 06:09:07 2008
Return-Path: <java-user-return-36483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36737 invoked from network); 4 Oct 2008 06:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Oct 2008 06:09:07 -0000
Received: (qmail 34298 invoked by uid 500); 4 Oct 2008 06:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34261 invoked by uid 500); 4 Oct 2008 06:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34250 invoked by uid 99); 4 Oct 2008 06:08:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 23:08:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Oct 2008 06:07:56 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 20E5071C4D8; Fri,  3 Oct 2008 23:08:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1CE7271C4BF
	for <java-user@lucene.apache.org>; Fri,  3 Oct 2008 23:08:31 -0700 (PDT)
Date: Fri, 3 Oct 2008 23:08:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0810032242040.11076@radix.cryptio.net>
References: <e9d73d4a0810031240q479730d5r68b6270b39b361da@mail.gmail.com>
 <e9d73d4a0810031341s14afe39rc50e9167ab31205c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:        SegmentInfos sis = (SegmentInfos) super.clone();

: We see that it is trying to cast a Vector into SegmentInfos which explains
: the ClassCastException.  This is definitely a bug.

That is in the correct and specified use of clone() ... note the 
javadocs for Object.clone() and the Cloneable interface...

> By convention, the returned object should be obtained by calling
> super.clone. If a class and all of its superclasses (except Object) obey
> this convention, it will be the case that x.clone().getClass() ==
> x.getClass()
	... 
> The method clone for class Object performs a specific cloning operation. 
> First, if the class of this object does not implement the interface
> Cloneable, then a CloneNotSupportedException is thrown. Note that all 
> arrays are considered to implement the interface Cloneable. Otherwise, 
> this method creates a new instance of the class of this object and 
> initializes all its fields with exactly the contents of the ...

I'm really not sure how you could be getting that ClassCastException 
unless there's a really horrific bug in the JRE you are using.

You'll see this in just about every (non-trivial) use of super.clone() ...

http://www.google.com/codesearch?q=super.clone%28%29+lang%3Ajava



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 04 06:13:30 2008
Return-Path: <java-user-return-36484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39383 invoked from network); 4 Oct 2008 06:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Oct 2008 06:13:29 -0000
Received: (qmail 37615 invoked by uid 500); 4 Oct 2008 06:13:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37591 invoked by uid 500); 4 Oct 2008 06:13:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37580 invoked by uid 99); 4 Oct 2008 06:13:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 23:13:20 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [119.160.244.191] (HELO n4a.bullet.tw1.yahoo.com) (119.160.244.191)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 04 Oct 2008 06:12:15 +0000
Received: from [119.160.244.77] by n4.bullet.tw1.yahoo.com with NNFMP; 04 Oct 2008 06:11:33 -0000
Received: from [124.108.115.243] by t2.bullet.tw1.yahoo.com with NNFMP; 04 Oct 2008 06:11:33 -0000
Received: from [124.108.114.81] by t2.bullet.mail.sg1.yahoo.com with NNFMP; 04 Oct 2008 06:11:33 -0000
Received: from [127.0.0.1] by omp101.mail.sg1.yahoo.com with NNFMP; 04 Oct 2008 06:11:33 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 194935.52992.bm@omp101.mail.sg1.yahoo.com
Received: (qmail 23158 invoked by uid 60001); 4 Oct 2008 06:11:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.sg;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=p6oYinPJjuJm5Q5k6vM5VRb1c9IsusisLqCO5iPXv2ZeCeEa9UD3eMKiKLiJu+7syk2+WVGK1cIevZKHeS1RJiDpJFb9jwlQI/XH2xcFhRQ9yRjYNjianWNDMirPYOA1fLzmDi1A88IVOmyY72o9xgQSWbZpJg+I/l05q2Eve3s=;
X-YMail-OSG: yLAuYhMVM1l3VHU_fusR9.oFc6KEqO1hyC4y9bXC5_Ma0XabKXg0mVzkBbzluFmrYA--
Received: from [210.3.19.162] by web76014.mail.sg1.yahoo.com via HTTP; Sat, 04 Oct 2008 14:11:32 CST
Date: Sat, 4 Oct 2008 14:11:32 +0800 (CST)
From: Edwin Lee <edwin11_1979@yahoo.com.sg>
Subject: Re: ClassCastException when writing to index writer
To: java-user@lucene.apache.org
In-Reply-To: <e9d73d4a0810031538r8171293r356eb9a0f26a780a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <33111.23123.qm@web76014.mail.sg1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul,

The clone() in SegmentInfos is correct. The best practice of clone is to
delegate the clone to the super class (if you look at the source code for
Vector, it too delegates to its super class, which is the Object) to create a
shallow copy, and then do a cloning of each of its mutable fields/elements to
get a deep copy.

May sound counter-intuitive, but the delegated call to Vector.clone actually
does return an instance of SegmentInfos. This is because when the clone is
eventually delegated to Object.clone, it is a native call which does a "native
copying" of the instance (in this case, a SegmentInfos instance).

i have tried running a test, and SegmentInfos.clone does work for me. You may
want to try running the following programme using the same classpath settings
that you used with the actual programme:

package org.apache.lucene.index;

public class Test {
    
    public static final void main(String[] args) {
        
        SegmentInfos sis = new SegmentInfos();

        SegmentInfos sis2 = (SegmentInfos) sis.clone();

        System.out.println("done");
    }
}



HTH,
Edwin



--- Paul Chan <wayofdragon@gmail.com> wrote:

> I am using Sun's JRE 1.6.0_02 on Windows XP
> 
> Actually...are you sure it would work?  java.util.Vector has the following
> clone() method:
> 
> public Object <http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html>
> *clone*()
> {
> }
> 
> I didn't think you can cast a base class (Vector) to its derived class
> (SegmentInfos) in Java?
> 
> On Fri, Oct 3, 2008 at 6:16 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
> 
> >
> > That's Sun's JRE?  That should be fine, unless there's something seriously
> > wrong with it's java.util.Vector implementation.
> >
> > But, this is an exceptionally strange exception.  Maybe try a different
> > version of the JRE?
> >
> > Any odd JARs on your CLASSPATH?
> >
> > What hardware/OS?
> >
> >
> > Mike
> >
> > Paul Chan wrote:
> >
> >  I am using Java 1.6.0_02.  Is this a problem?
> >>
> >> On Fri, Oct 3, 2008 at 5:35 PM, Michael McCandless <
> >> lucene@mikemccandless.com> wrote:
> >>
> >>
> >>> Which Java environment are you running?
> >>>
> >>> super.clone() from SegmentInfos should produce a new SegmentInfos object.
> >>>
> >>> It seems like in your case it's somehow producing a Vector instead?
> >>>
> >>> Mike
> >>>
> >>>
> >>> Paul Chan wrote:
> >>>
> >>> Hi Mike,
> >>>
> >>>>
> >>>> I am actually using the Compass Search Engine which in turn makes use of
> >>>> Lucene.  They are doing the following in their code:
> >>>>
> >>>>     IndexWriter indexWriter = new IndexWriter(dir, autoCommit, analyzer,
> >>>> create, deletionPolicy);
> >>>>
> >>>> where autoCommit = false.
> >>>>
> >>>> In turn, Lucene will do the following:
> >>>>
> >>>> public class IndexWriter {
> >>>>
> >>>>   public IndexWriter(Directory d, boolean autoCommit, Analyzer a,
> >>>> boolean create, IndexDeletionPolicy deletionPolicy)
> >>>>    throws CorruptIndexException, LockObtainFailedException, IOException
> >>>> {
> >>>>       init(d, a, create, false, deletionPolicy, autoCommit);
> >>>>   }
> >>>>
> >>>>   private void init(Directory d, Analyzer a, final boolean create,
> >>>> boolean closeDir,                   IndexDeletionPolicy deletionPolicy,
> >>>> boolean autoCommit)
> >>>>   {
> >>>>      ...
> >>>>      ..
> >>>>      if (!autoCommit) {
> >>>>        rollbackSegmentInfos = (SegmentInfos) segmentInfos.clone();
> >>>>      }
> >>>>   }
> >>>> }
> >>>>
> >>>> which calls the clone() method that causes the exception because
> >>>> autoCommit
> >>>> = false.
> >>>>
> >>>> On Fri, Oct 3, 2008 at 4:54 PM, Michael McCandless <
> >>>> lucene@mikemccandless.com> wrote:
> >>>>
> >>>>
> >>>>  Can you describe what led up to this exception?  Ie, what calls you
> >>>>> made
> >>>>> to
> >>>>> Lucene before this.
> >>>>>
> >>>>> Mike
> >>>>>
> >>>>>
> >>>>> Paul Chan wrote:
> >>>>>
> >>>>> I think I know what the problem is looking at the code:
> >>>>>
> >>>>>
> >>>>>> In SegmentInfos.java (line 321):
> >>>>>>
> >>>>>> class SegmentInfos extends Vector
> >>>>>> {
> >>>>>> public Object clone() {
> >>>>>>  SegmentInfos sis = (SegmentInfos) super.clone();
> >>>>>>  for(int i=0;i<sis.size();i++) {
> >>>>>>    sis.setElementAt(((SegmentInfo) sis.elementAt(i)).clone(), i);
> >>>>>>  }
> >>>>>>  return sis;
> >>>>>> }
> >>>>>> }
> >>>>>>
> >>>>>> We see that it is trying to cast a Vector into SegmentInfos which
> >>>>>> explains
> >>>>>> the ClassCastException.  This is definitely a bug.
> >>>>>>
> >>>>>>
> >>>>>> On Fri, Oct 3, 2008 at 3:40 PM, Paul Chan <wayofdragon@gmail.com>
> >>>>>> wrote:
> >>>>>>
> >>>>>> Hi,
> >>>>>>
> >>>>>>
> >>>>>>> I am using lucene 2.3.2 and I encounter the following exception when
> >>>>>>> I
> >>>>>>> try
> >>>>>>> to insert a object into the index.
> >>>>>>>
> >>>>>>> Caused by: java.lang.ClassCastException: java.util.Vector cannot be
> >>>>>>> cast
> >>>>>>> to
> >>>>>>> org.apache.lucene.index.SegmentInfos
> >>>>>>> at org.apache.lucene.index.SegmentInfos.clone(SegmentInfos.java:321)
> >>>>>>> at org.apache.lucene.index.IndexWriter.init(IndexWriter.java:715)
> >>>>>>> at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:666)
> >>>>>>>
> >>>>>>> Has Anyone seen this problem before?  What seems to be the problem?
> >>>>>>>
> >>>>>>> Thanks!
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>> ---------------------------------------------------------------------
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 



      New Email addresses available on Yahoo!
Get the Email name you&#39;ve always wanted on the new @ymail and @rocketmail. 
Hurry before someone else does!
http://mail.promotions.yahoo.com/newdomains/sg/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 04 06:23:36 2008
Return-Path: <java-user-return-36485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50687 invoked from network); 4 Oct 2008 06:23:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Oct 2008 06:23:35 -0000
Received: (qmail 40729 invoked by uid 500); 4 Oct 2008 06:23:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40697 invoked by uid 500); 4 Oct 2008 06:23:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40684 invoked by uid 99); 4 Oct 2008 06:23:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Oct 2008 23:23:27 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [119.160.244.193] (HELO n6a.bullet.tw1.yahoo.com) (119.160.244.193)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 04 Oct 2008 06:22:22 +0000
Received: from [119.160.244.77] by n6.bullet.tw1.yahoo.com with NNFMP; 04 Oct 2008 06:21:41 -0000
Received: from [124.108.115.243] by t2.bullet.tw1.yahoo.com with NNFMP; 04 Oct 2008 06:21:41 -0000
Received: from [124.108.114.82] by t2.bullet.mail.sg1.yahoo.com with NNFMP; 04 Oct 2008 06:21:41 -0000
Received: from [127.0.0.1] by omp102.mail.sg1.yahoo.com with NNFMP; 04 Oct 2008 06:21:41 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 165976.36314.bm@omp102.mail.sg1.yahoo.com
Received: (qmail 3883 invoked by uid 60001); 4 Oct 2008 06:21:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.sg;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=GtOwQC6ZI7dhWpljfRvwN+ChG478Svh+NkzndDcUTkB74k7bzPJzSPBIBwrSz99NC9gJMLsveu8/kw132j4NrmuiUUZYThwPoiCLI17bDA6ogedDRk/bOovcrmNxt2oEjzQCmvjkqA2fdVBS+I9w8SLVraRUcX4AUB+0hidW1GM=;
X-YMail-OSG: ZpLVXagVM1nsHCUeZ14okO3FyblIhkBl5Unmz4jc4eCdxLnTYuSFiVE0cMSPZQ3W98_ttDfoX0ROVfrIY.sMjOp.mckCB.rzzKjalDmTL5UWN6btUvD9iZ9lgq8FEOcKyQtxuZD4UqwChBXaustL9KJs
Received: from [210.3.19.162] by web76001.mail.sg1.yahoo.com via HTTP; Sat, 04 Oct 2008 14:21:40 CST
Date: Sat, 4 Oct 2008 14:21:40 +0800 (CST)
From: Edwin Lee <edwin11_1979@yahoo.com.sg>
Subject: Re: ClassCastException when writing to index writer
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.62.0810032242040.11076@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <963771.3337.qm@web76001.mail.sg1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

i think, very likely, you have another copy of java.util.Vector loaded, and
this one tries to be too clever with its implementation of clone (instantiate a
new Vector instance) instead of delegating to its super class (Object).



HTH,
Edwin



--- Chris Hostetter <hossman_lucene@fucit.org> wrote:

> 
> :        SegmentInfos sis = (SegmentInfos) super.clone();
> 
> : We see that it is trying to cast a Vector into SegmentInfos which explains
> : the ClassCastException.  This is definitely a bug.
> 
> I'm really not sure how you could be getting that ClassCastException 
> unless there's a really horrific bug in the JRE you are using.
> 
> You'll see this in just about every (non-trivial) use of super.clone() ...



      Yahoo! Toolbar is now powered with Search Assist.Download it now!
http://sg.toolbar.yahoo.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 05 11:56:23 2008
Return-Path: <java-user-return-36486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32080 invoked from network); 5 Oct 2008 11:56:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Oct 2008 11:56:23 -0000
Received: (qmail 15387 invoked by uid 500); 5 Oct 2008 11:56:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15346 invoked by uid 500); 5 Oct 2008 11:56:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15335 invoked by uid 99); 5 Oct 2008 11:56:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Oct 2008 04:56:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of petercheng456@gmail.com designates 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Oct 2008 11:55:11 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1367477tic.11
        for <java-user@lucene.apache.org>; Sun, 05 Oct 2008 04:55:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:x-mimeole:thread-index:in-reply-to;
        bh=8n7immX6CWmfXC0Lzy9T5G48s2zJFQj/0s1DTaObXcQ=;
        b=seYDkkXv+Q0Z7hsHPN9q9w7tJeSe7wQWGzTB1nziAqGetKlDKUwguR6uIl7ZxyPaCe
         HuiyRVMLJcg4KphHGnKoeXIVn7I53zOu+Zu/4Ck1UqPTSskjTXjT6SA73OPdyTPNGLK1
         jF/bwiZixJpMlnXyNre+XClVYX27UYYrJwqeg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:x-mimeole
         :thread-index:in-reply-to;
        b=GlisqVHhroB24D1tI1uZsfb3B35l9grk6Z+JutzWRofpuBjxmSZTQLjEBiPACdpAPf
         PnfmEsZc3RcwkhEnm1IpgvI70aKCPfeaKXK8ITRfCOz041MNhnMTaijkkVpZQSLMuSWC
         uLHJsgaXnhKKaiSrimvjENnVxD8s1AAYWM4XE=
Received: by 10.110.92.8 with SMTP id p8mr4236774tib.11.1223207727997;
        Sun, 05 Oct 2008 04:55:27 -0700 (PDT)
Received: from gcheng ([211.65.234.164])
        by mx.google.com with ESMTPS id d7sm16535073tib.7.2008.10.05.04.55.23
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 05 Oct 2008 04:55:25 -0700 (PDT)
From: "Peter Cheng" <petercheng456@gmail.com>
To: <java-user@lucene.apache.org>
References: <02dc01c91671$f813ea20$8c458c0a@gcheng> <6e3ae6310809140703l790d3928x5b28f0e7d825398c@mail.gmail.com> <2DFB7BA9-9357-4F55-AB19-E8BF586458FA@mikemccandless.com>
Subject: RE: Memory eaten up by String, Term and TermInfo?
Date: Sun, 5 Oct 2008 19:55:25 +0800
Message-ID: <644A40A067364E3CA7331E3FB314193E@gcheng>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AckWdl0PQFXQ9rc3RdKl/tcAsL+FGgQamDMw
In-Reply-To: <2DFB7BA9-9357-4F55-AB19-E8BF586458FA@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I have confirmed that the OutOfMemoryError is not Lucene's problem. It's
just because JVM failed to perform GC when necessary, and I don't know why.
To fix this, I started another thread to call GC every six hours, and
problems got solved.

Thank you all.

Gong

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com] 
> Sent: Sunday, September 14, 2008 10:28 PM
> To: java-user@lucene.apache.org
> Subject: Re: Memory eaten up by String, Term and TermInfo?
> 
> 
> Small correction: it was checked in this morning (at least, on the  
> East Coast of the US).
> 
> So you need to either build your own JAR using Lucene's trunk, or,  
> wait for tonite's build to run and then download the build artifacts  
> from here:
> 
>      http://hudson.zones.apache.org/hudson/job/Lucene-trunk
> 
> If possible, please report back if this fixed your OutOfMemoryError.
> 
> 2.4 will include this fix.
> 
> Mike
> 
> Chris Lu wrote:
> 
> > Can you try to update to the latest Lucene svn version, like  
> > yesterday?
> > LUCENE-1383 was checked in yesterday. This patch is 
> addressing a leak
> > problem particular to J2EE applications.
> >
> > -- 
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> > 
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database
> _Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per  
> > request) got
> > 2.6 Million Euro funding!
> >
> > On Sun, Sep 14, 2008 at 6:58 AM, Peter Cheng  
> > <petercheng456@gmail.com>wrote:
> >
> >> Hi the community,
> >>
> >> In a Tomcat application (a keyword-based search engine), I use  
> >> Lucene 2.3.2
> >> to index 60 million documents, but each document is small-sized.  
> >> The total
> >> index size is about 60GB.
> >> After a successful running for a week, Tomcat was down due to  
> >> OutOfMemory.
> >> Then I restarted Tomcat, and after three days, I used jmap 
> and jhat  
> >> to find
> >> out what had eaten up the memory. I found millions of 
> instances of  
> >> String,
> >> Term, and TermInfo. Why?
> >>
> >> In my application, I use a single IndexSearcher object, which is  
> >> shared by
> >> all the requests. It is opened initially, and will never be closed.
> >>
> >> What could have eaten up the memory? What is referring to 
> millions of
> >> instances of Term and TermInfo?
> >>
> >> I can provide any snippets of codes if necessary.
> >> Thank you so much!
> >>
> >> Gong Cheng
> >>
> >>
> >> 
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 02:45:55 2008
Return-Path: <java-user-return-36487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62487 invoked from network); 6 Oct 2008 02:45:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 02:45:55 -0000
Received: (qmail 44662 invoked by uid 500); 6 Oct 2008 02:45:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44636 invoked by uid 500); 6 Oct 2008 02:45:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44625 invoked by uid 99); 6 Oct 2008 02:45:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Oct 2008 19:45:45 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 02:44:44 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2483861rvb.5
        for <java-user@lucene.apache.org>; Sun, 05 Oct 2008 19:45:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=6WKS+2p0cmcL6RuutKaddnEHiDjysV6B4pfiemIa/1s=;
        b=wts61xHGdvLQ8VfTsvmCDfU4c9OHyqV43L570ioWvwx3118SIkwErYkiA/bHQTF8Fp
         93VDCyazGrr0NzngYow7dXxSzE8LxbdCXqzngRH9wC/1IS+TV13CyM5o/Kl9Wzud0kFb
         8Yiew3ty7PzB5bn8EGKG8GF0Zwa+VOE30+/Ag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=EUdScn3ofwO9icLZdzmDPHskVMqebUYhAmZPDG/yNXM5YJmKVDLoFSJnWGEsBI4Y7l
         4lv4LqPJrasxNioSJEAjRJwJLx9SxUqkF6tLiAaPSW7pMVhMXspQ+Aj/vZ7KpQLh6jqJ
         ILkQ6csKspxFRvM+lDhY7jab2VSiC28RNl+FQ=
Received: by 10.141.79.12 with SMTP id g12mr2510413rvl.126.1223261119737;
        Sun, 05 Oct 2008 19:45:19 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Sun, 5 Oct 2008 19:45:19 -0700 (PDT)
Message-ID: <e9d73d4a0810051945y12c4c3cal4d00f8db673b13b2@mail.gmail.com>
Date: Sun, 5 Oct 2008 22:45:19 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <963771.3337.qm@web76001.mail.sg1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32982_18638048.1223261119668"
References: <Pine.LNX.4.62.0810032242040.11076@radix.cryptio.net>
	 <963771.3337.qm@web76001.mail.sg1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32982_18638048.1223261119668
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you all for your input.  However, this is what I have discovered so
far:

   - I tried running the test that Edwin suggested and it failed for me in
   my environment (Lucene 2.3.2, Windows XP, SUN JDK 1.5 or 1.6)

e.g. SegmentInfos sis = new SegmentInfos();
      SegmentInfos sis2 = (SegmentInfos) sis.clone();

   - Interestingly, I tried to create a dummy test class which mimics
   SegmentInfos as follows and it works!:

public class TestVector extends Vector
{
   public TestVector clone()
   {
      TestVector cl = (TestVector)super.clone();
      return cl;
   }
}

         TestVector vector = new TestVector();
         TestVector vClone = (TestVector)vector.clone();

   - This tells me that perhaps there is something wrong with the lucene
   package that I have downloaded (some sort of incompatibility?).  I will try
   to recompile the lucene package in my own environment and see if I can fix
   the problem.


On Sat, Oct 4, 2008 at 2:21 AM, Edwin Lee <edwin11_1979@yahoo.com.sg> wrote:

> i think, very likely, you have another copy of java.util.Vector loaded, and
> this one tries to be too clever with its implementation of clone
> (instantiate a
> new Vector instance) instead of delegating to its super class (Object).
>
>
>
> HTH,
> Edwin
>
>
>
> --- Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> >
> > :        SegmentInfos sis = (SegmentInfos) super.clone();
> >
> > : We see that it is trying to cast a Vector into SegmentInfos which
> explains
> > : the ClassCastException.  This is definitely a bug.
> >
> > I'm really not sure how you could be getting that ClassCastException
> > unless there's a really horrific bug in the JRE you are using.
> >
> > You'll see this in just about every (non-trivial) use of super.clone()
> ...
>
>
>
>       Yahoo! Toolbar is now powered with Search Assist.Download it now!
> http://sg.toolbar.yahoo.com/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_32982_18638048.1223261119668--

From java-user-return-36488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 04:37:31 2008
Return-Path: <java-user-return-36488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2976 invoked from network); 6 Oct 2008 04:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 04:37:31 -0000
Received: (qmail 94641 invoked by uid 500); 6 Oct 2008 04:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94455 invoked by uid 500); 6 Oct 2008 04:37:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94444 invoked by uid 99); 6 Oct 2008 04:37:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Oct 2008 21:37:23 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.224] (HELO smtp121.mail.mud.yahoo.com) (209.191.84.224)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Oct 2008 04:36:18 +0000
Received: (qmail 54112 invoked from network); 6 Oct 2008 04:36:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=H+FKcY/iiKXG/PSk+ivHU1PL+H8Dz50LYKWwHI85meDZrLCb8pbc32Dk1TcIstoBcTqiTDZi5eoXK6MfJl7eWNie3UEnDt1NyQyV7oaKOiHCVL7eWPQhf78Zyya5aX5ebxj8pNAmdBFBqkm9ozrVTvJ2crGLMwip9TGFn/tGQFo=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp121.mail.mud.yahoo.com with SMTP; 6 Oct 2008 04:36:50 -0000
X-YMail-OSG: N.p7WS8VM1n0lQ5I0ce.2u9mqSjShprB.QzHHyOkN.QdXXGa7m0BnPCTmJeWQvj4F9Ccq7bJEHABydAgqV4SduccLdU7RVmVbR5msiRwVHycZDIJF5gdp0VWyyQGyVhZU_SFS6MN4SRZ3dwb1Kv2bt53Nrdp4t6iqJsR7fzi9MBkm1o3cA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <036d01c9276d$268e2c60$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com> <867513fe0810030918m1b3ecd64k98ed01214caaaa5d@mail.gmail.com>
Subject: Re: Single searcher vs Multi Searcher
Date: Mon, 6 Oct 2008 10:06:47 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Anshum,

My index is growing 1 million documents per day. Initially i planned to have 
a single database but the sorting of one or more fields consumes more RAM. 
Whether sharding the index would also consume the same.

My application should co-exist with other application of my product and my 
app could get 1 GB of RAM. Search speed is fine but i need to display the 
result in the sorted order.

I thought to keep 7 days of documents in one index and create one more after 
the 7 days. After 30 days the first index may get deleted. I need to keep 
the documents in the index DB for 30 days. My Index DB is in HDD.

I want to the pros and cons of sharding. I think maintance of the DB becomes 
easier.

It would be very much helpful, if you share some of your thoughts.

Regards
Ganesh


----- Original Message ----- 
From: "Anshum" <anshumg@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, October 03, 2008 9:48 PM
Subject: Re: Single searcher vs Multi Searcher


> Hi Ganesh,
>
> I have experimented with sharded indexes and they seem to benefit 
> me(atleast
> in my case). I would like to know a few things before I answer your
> question:
> 1. Do you have a reasonable criteria ( a calculated one) to shard the
> indexes?
> 2. How do you plan to split the index? Is it going to be document based
> (which I guess it should be as otherwise you would have to build a 
> complete
> distributed system)
> 3. Do you plan to put your indexes on the RAM or on (physically) seperate
> HDDs?
>
> Though all said and done, sharded indexes are a good approach, if done the
> right way.
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Fri, Oct 3, 2008 at 3:01 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> Hello all,
>>
>> My indexing is growing by 1 million records per day and the memory
>> consumption of the searcher object is quite high.
>>
>> There are different opinion in the groups. Few suggest to use single
>> database and few to use sharding. My Database has 10 million records now 
>> and
>> it might go till 30 million or more. I plan to shard the index. but
>> Multisearcher will give me benifit.
>>
>> Regards
>> Ganesh
>>
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 06:17:15 2008
Return-Path: <java-user-return-36489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54819 invoked from network); 6 Oct 2008 06:17:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 06:17:14 -0000
Received: (qmail 53448 invoked by uid 500); 6 Oct 2008 06:17:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53417 invoked by uid 500); 6 Oct 2008 06:17:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53405 invoked by uid 99); 6 Oct 2008 06:17:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Oct 2008 23:17:05 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 06:16:03 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2546978rvb.5
        for <java-user@lucene.apache.org>; Sun, 05 Oct 2008 23:16:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jg3MhhNdaNsSQtrPSi9WQoMAd+MWPymo0N9bw32Bi/I=;
        b=CsV1mrTG/VsYkIlCvHTvoa20vVJi5v44AxwZOkuiWkRHXdEYJj1C/WPSUXVXM2RSsr
         t+rrxmg++6Y9mvoF6RbWGdVQ07kUWJibpz6T5taXL0M6GhssHrMkgoYVUlQjxz3FV6Bp
         Br5LUefx/ND9XTDDQpxeDFKWhUyvlxp29WIbU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RT1Pc39Bw8cat1ozGaYxTs5X/qiuin912Xhrz0VEbyfCCi86ttCBqgxRBCDSqCc5eJ
         2/4xmCqm6hwevqytkeC6BZIo2Gzmfem0dKRQnJ16eBcXpW5XUa2qhS/brKgfK/7pukh4
         tIYNjvu4myTWdbW0F6C4KlcIwl3kPXXhZr5Jg=
Received: by 10.141.136.19 with SMTP id o19mr2590672rvn.281.1223273798704;
        Sun, 05 Oct 2008 23:16:38 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Sun, 5 Oct 2008 23:16:38 -0700 (PDT)
Message-ID: <e9d73d4a0810052316q2484976dme4d6f356e6abcc0e@mail.gmail.com>
Date: Mon, 6 Oct 2008 02:16:38 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <e9d73d4a0810051945y12c4c3cal4d00f8db673b13b2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34831_18225739.1223273798692"
References: <Pine.LNX.4.62.0810032242040.11076@radix.cryptio.net>
	 <963771.3337.qm@web76001.mail.sg1.yahoo.com>
	 <e9d73d4a0810051945y12c4c3cal4d00f8db673b13b2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34831_18225739.1223273798692
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have tried to recompile Lucene 2.3.2 under my environment (SUN JDK 1.6)
and it still doesn't work.  I am beginning to think that maybe there is
something wrong with lucene's build script.  My TestVector class's clone()
method works without a hitch, but SegmentInfos' clone() method doesnt work
at all.  I don't really know what to do at this moment.  Does anyone have
any insight?

On Sun, Oct 5, 2008 at 10:45 PM, Paul Chan <wayofdragon@gmail.com> wrote:

> Thank you all for your input.  However, this is what I have discovered so
> far:
>
>    - I tried running the test that Edwin suggested and it failed for me in
>    my environment (Lucene 2.3.2, Windows XP, SUN JDK 1.5 or 1.6)
>
> e.g. SegmentInfos sis = new SegmentInfos();
>       SegmentInfos sis2 = (SegmentInfos) sis.clone();
>
>    - Interestingly, I tried to create a dummy test class which mimics
>    SegmentInfos as follows and it works!:
>
> public class TestVector extends Vector
> {
>    public TestVector clone()
>    {
>       TestVector cl = (TestVector)super.clone();
>       return cl;
>    }
> }
>
>          TestVector vector = new TestVector();
>          TestVector vClone = (TestVector)vector.clone();
>
>    - This tells me that perhaps there is something wrong with the lucene
>    package that I have downloaded (some sort of incompatibility?).  I will try
>    to recompile the lucene package in my own environment and see if I can fix
>    the problem.
>
>
> On Sat, Oct 4, 2008 at 2:21 AM, Edwin Lee <edwin11_1979@yahoo.com.sg>wrote:
>
>> i think, very likely, you have another copy of java.util.Vector loaded,
>> and
>> this one tries to be too clever with its implementation of clone
>> (instantiate a
>> new Vector instance) instead of delegating to its super class (Object).
>>
>>
>>
>> HTH,
>> Edwin
>>
>>
>>
>> --- Chris Hostetter <hossman_lucene@fucit.org> wrote:
>>
>> >
>> > :        SegmentInfos sis = (SegmentInfos) super.clone();
>> >
>> > : We see that it is trying to cast a Vector into SegmentInfos which
>> explains
>> > : the ClassCastException.  This is definitely a bug.
>> >
>> > I'm really not sure how you could be getting that ClassCastException
>> > unless there's a really horrific bug in the JRE you are using.
>> >
>> > You'll see this in just about every (non-trivial) use of super.clone()
>> ...
>>
>>
>>
>>       Yahoo! Toolbar is now powered with Search Assist.Download it now!
>> http://sg.toolbar.yahoo.com/
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_34831_18225739.1223273798692--

From java-user-return-36490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 08:36:10 2008
Return-Path: <java-user-return-36490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27899 invoked from network); 6 Oct 2008 08:36:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 08:36:10 -0000
Received: (qmail 81476 invoked by uid 500); 6 Oct 2008 08:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81441 invoked by uid 500); 6 Oct 2008 08:36:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81430 invoked by uid 99); 6 Oct 2008 08:36:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 01:36:02 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.133.51.241] (HELO mail.hippo.nl) (213.133.51.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 08:34:56 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Advise for Mediabase with Lucene
Date: Mon, 6 Oct 2008 10:35:08 +0200
Message-ID: <F8E386B54CE3E6408F3A32ABB9A7908A015CAD6B@hai02.hippointern.lan>
In-Reply-To: <19790605.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Advise for Mediabase with Lucene
Thread-Index: Ackk9Qh9oXQIZYz2SDSe9C/qlEij9QCmCZWA
References: <19787867.post@talk.nabble.com> <359a92830810021437u6223a9c6mcb3edf8113b612c4@mail.gmail.com> <19789539.post@talk.nabble.com> <19789551.post@talk.nabble.com> <359a92830810021723s74974f2cjec78d8321b32b5d5@mail.gmail.com> <19790605.post@talk.nabble.com>
From: "Ard Schrijvers" <a.schrijvers@onehippo.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Mathias,=20

IMHO sounds like you are planning to re-invent the wheel while all
things you want (AFAICS) are already largely available as open source
projects, and perhaps more important, open standards.=20

Your hierarchical data storage sounds like jsr-170 and jsr-283 are the
open standard solutions for this, and apache Jackrabbit is the reference
implementation for this. And, all indexing is done out-of-the-box, and
of course, all done with Lucene. Searching can be done by a subset of
SQL or XPATH (see jsr-170), or you can add your own. Furtermore, adding
apache Tika for automatic meta data extraction and Sanselan for
automatic image meta data extraction is really straight forward.=20

Just my 2 cents,

Regards Ard

> I don't know if this is going to work.
>=20
> Let's say I have a root folder that is the startpoint for a client.
> The only thing I have in the database is the startPoint
>=20
> When traversing the child folders I want to check If the=20
> folder has changed since the last time.Can I store this in a=20
> lucene index, and How do I compare the folder with the index?=20
> The same is of course true for files.
>=20
> Check if the file is new( Extract content and add to index )=20
> check if the file is altered ( Extract content and add to=20
> index ) how do I check if a file is deleted?
>=20
> Let's say I want to create thumbnails for a file but the=20
> Thumbnail server takes some time to finish so I would need to=20
> get the exact document via a search. There are many questions=20
> and before convincing my boss to use Lucene I must have those=20
> questions answered.
>=20
> I guess some playing around with lucene should answer some of them.=20
> --
> View this message in context:=20
> http://www.nabble.com/Advise-for-Mediabase-with-Lucene-tp19787
> 867p19790605.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 12:18:36 2008
Return-Path: <java-user-return-36491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5739 invoked from network); 6 Oct 2008 12:18:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 12:18:36 -0000
Received: (qmail 10792 invoked by uid 500); 6 Oct 2008 12:18:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10765 invoked by uid 500); 6 Oct 2008 12:18:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10754 invoked by uid 99); 6 Oct 2008 12:18:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 05:18:27 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 12:17:25 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1769188tic.11
        for <java-user@lucene.apache.org>; Mon, 06 Oct 2008 05:17:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=L2xkPspFEFztNRPl5EA7tj4MrWrMkYezYSdrPrnN1rg=;
        b=d99YYYtMj16n+DMcJhkxGc1qZQpXWZV5C264snIfShogJ/7EeLRXwIGAdqBCBAYGfB
         bn8g0EE8GUtVauSH5Bmoz0QpRknAvr9ayfDrWLDwZ4KOLnD9NHOlu7Wc2h95cz8x436U
         63JKVwZJ+wPXpw6vT9dWhwtk2UbuV4qvmSRSc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LjwX5OF4UkuMbib0JggPnKig5ifqY3NN0+oj0liX9QhwgUVzJZA+sUqAy3DPaJHBwi
         355EButo9HnrAm/Bb0Yp9CZ8SWXLeniGpumyiRt9CinYYOdhnJaeOelxfB/jBWun68iG
         E3BeZgIgbpydLKHUoCW0Hy19QedyLo870mWRY=
Received: by 10.110.39.20 with SMTP id m20mr6250643tim.33.1223295479717;
        Mon, 06 Oct 2008 05:17:59 -0700 (PDT)
Received: by 10.110.50.16 with HTTP; Mon, 6 Oct 2008 05:17:59 -0700 (PDT)
Message-ID: <6fc71b230810060517x1a2cd714h2d44dc8c41de3283@mail.gmail.com>
Date: Mon, 6 Oct 2008 17:47:59 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document larger than setRAMBufferSizeMB()
In-Reply-To: <6FE65A48-B397-4BB9-95B9-C441D13F69AF@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68854_23891409.1223295479728"
References: <6fc71b230810030105k1b80df91w1d95da5122d309b5@mail.gmail.com>
	 <6fc71b230810030126jde6f6d3v1dbb4467e29c04b2@mail.gmail.com>
	 <867513fe0810030142m17270231l60c027e7845a6000@mail.gmail.com>
	 <6fc71b230810030233o5a97acefycffd38b62fd2db86@mail.gmail.com>
	 <030501c92540$5b43bb70$330bc30a@sv.us.sonicwall.com>
	 <6FE65A48-B397-4BB9-95B9-C441D13F69AF@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68854_23891409.1223295479728
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for showing interest Mike.
The OOME comes in the middle of setting a value of one of the field in the
doc. That field has a fairly large value. May be that could have been the
reason.?



On Fri, Oct 3, 2008 at 4:57 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Note that large stored fields do not use up any RAM in IndexWriter's RAM
> buffer because these stored fields are immediately written to the directory
> and not stored in RAM for very long.
>
> Aditi, I'd love to see the full stack trace of the OOME that was originally
> hit if you still have it...
>
> Mike
>
>
> Ganesh wrote:
>
>  Single document of 16 MB seems to be big. I think you are trying to store
>> the entire document content. If it is so drop the stored field and store its
>> reference information in the database, which could help to retreive the
>> content later.
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Aditi Goyal" <aditigupta20@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, October 03, 2008 3:03 PM
>> Subject: Re: Document larger than setRAMBufferSizeMB()
>>
>>
>>  Thanks Anshum.
>>> Although it raises another query, committing the current buffer will
>>> commit
>>> the docs before and what will happen to the current doc which threw an
>>> error
>>> while adding a field to it, will that also get committed in the half??
>>>
>>> Thanks a lot
>>> Aditi
>>>
>>> On Fri, Oct 3, 2008 at 2:12 PM, Anshum <anshumg@gmail.com> wrote:
>>>
>>>  Hi Aditi,
>>>>
>>>> I guess increasing the buffer size would be a solution here, but in case
>>>> you
>>>> wouldn't know the expected max doc size. I guess the best way to handle
>>>> that
>>>> would be a regular try catch block in which you could commit the current
>>>> buffer. At the least you could just continue the loop after doing
>>>> whatever
>>>> you wish to do using an exception handling block.
>>>>
>>>> --
>>>> Anshum Gupta
>>>> Naukri Labs!
>>>> http://ai-cafe.blogspot.com
>>>>
>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>> distinction is yours to draw............
>>>>
>>>> On Fri, Oct 3, 2008 at 1:56 PM, Aditi Goyal <aditigupta20@gmail.com>
>>>> wrote:
>>>>
>>>> > Hi Everyone,
>>>> >
>>>> > I have an index which I am opening at one time only. I keep adding the
>>>> > documents to it until I reach a limit of 500.
>>>> > After this, I close the index and open it again. (This is done in
>>>> order
>>>> to
>>>> > save time taken by opening and closing the index)
>>>> > Also, I have set setRAMBufferSizeMB to 16MB.
>>>> >
>>>> > If the document size itself is greater than 16MB what will happen in >
>>>> this
>>>> > case??
>>>> > It is throwing
>>>> > java.lang.OutOfMemoryError: Java heap space
>>>> > Now, my query is,
>>>> > Can we change something in the way we parse/index to make it more >
>>>> memory
>>>> > friendly so that it doesnt throw this exception.
>>>> > And, Can it be caught and overcome gracefully?
>>>> >
>>>> >
>>>> > Thanks a lot
>>>> > Aditi
>>>> >
>>>>
>>>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_68854_23891409.1223295479728--

From java-user-return-36492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 13:03:06 2008
Return-Path: <java-user-return-36492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21513 invoked from network); 6 Oct 2008 13:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 13:03:06 -0000
Received: (qmail 55658 invoked by uid 500); 6 Oct 2008 13:02:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54887 invoked by uid 500); 6 Oct 2008 13:02:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54876 invoked by uid 99); 6 Oct 2008 13:02:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 06:02:57 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 13:01:53 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Memory eaten up by String, Term and TermInfo?
Date: Mon, 6 Oct 2008 08:48:20 -0400
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA56744DE5@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Memory eaten up by String, Term and TermInfo?
Thread-Index: AckWdl0PQFXQ9rc3RdKl/tcAsL+FGgQamDMwADPnjSA=
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I played around with GC quite a bit in our app and found the following
java settings to help a lot (Used with jboss, but should be good for any
jvm).

set JAVA_OPTS=3D%JAVA_OPTS% -XX:MaxPermSize=3D512M =
-XX:+UseConcMarkSweepGC
-XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled

While these settings did help when the GC starts to get taxed for
keeping throughput better, the biggest thing was getting the heap size
big enough. If the heap's big enough, then everything seems to work well
regardless of the GC algorithm selected.

If the heap size and algorithm are correct, then you shouldn't have to
force GC. Usually the forced GC calls will trigger the total GC which
has a long delay and slows down responsiveness to the app.

I found jstat fairly helpful in monitoring all of this. You can see if
the following article helps at all.

http://java.sun.com/javase/technologies/hotspot/gc/index.jsp

-----Original Message-----
From: Peter Cheng [mailto:petercheng456@gmail.com]=20
Sent: Sunday, October 05, 2008 7:55 AM
To: java-user@lucene.apache.org
Subject: RE: Memory eaten up by String, Term and TermInfo?

I have confirmed that the OutOfMemoryError is not Lucene's problem. It's
just because JVM failed to perform GC when necessary, and I don't know
why.
To fix this, I started another thread to call GC every six hours, and
problems got solved.

Thank you all.

Gong

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
> Sent: Sunday, September 14, 2008 10:28 PM
> To: java-user@lucene.apache.org
> Subject: Re: Memory eaten up by String, Term and TermInfo?
>=20
>=20
> Small correction: it was checked in this morning (at least, on the =20
> East Coast of the US).
>=20
> So you need to either build your own JAR using Lucene's trunk, or, =20
> wait for tonite's build to run and then download the build artifacts =20
> from here:
>=20
>      http://hudson.zones.apache.org/hudson/job/Lucene-trunk
>=20
> If possible, please report back if this fixed your OutOfMemoryError.
>=20
> 2.4 will include this fix.
>=20
> Mike
>=20
> Chris Lu wrote:
>=20
> > Can you try to update to the latest Lucene svn version, like =20
> > yesterday?
> > LUCENE-1383 was checked in yesterday. This patch is=20
> addressing a leak
> > problem particular to J2EE applications.
> >
> > --=20
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >=20
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database
> _Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per =20
> > request) got
> > 2.6 Million Euro funding!
> >
> > On Sun, Sep 14, 2008 at 6:58 AM, Peter Cheng =20
> > <petercheng456@gmail.com>wrote:
> >
> >> Hi the community,
> >>
> >> In a Tomcat application (a keyword-based search engine), I use =20
> >> Lucene 2.3.2
> >> to index 60 million documents, but each document is small-sized. =20
> >> The total
> >> index size is about 60GB.
> >> After a successful running for a week, Tomcat was down due to =20
> >> OutOfMemory.
> >> Then I restarted Tomcat, and after three days, I used jmap=20
> and jhat =20
> >> to find
> >> out what had eaten up the memory. I found millions of=20
> instances of =20
> >> String,
> >> Term, and TermInfo. Why?
> >>
> >> In my application, I use a single IndexSearcher object, which is =20
> >> shared by
> >> all the requests. It is opened initially, and will never be closed.
> >>
> >> What could have eaten up the memory? What is referring to=20
> millions of
> >> instances of Term and TermInfo?
> >>
> >> I can provide any snippets of codes if necessary.
> >> Thank you so much!
> >>
> >> Gong Cheng
> >>
> >>
> >>=20
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 15:07:45 2008
Return-Path: <java-user-return-36493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7801 invoked from network); 6 Oct 2008 15:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 15:07:45 -0000
Received: (qmail 53182 invoked by uid 500); 6 Oct 2008 15:07:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53149 invoked by uid 500); 6 Oct 2008 15:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53138 invoked by uid 99); 6 Oct 2008 15:07:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 08:07:36 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 15:06:33 +0000
Received: by gxk6 with SMTP id 6so5230663gxk.5
        for <java-user@lucene.apache.org>; Mon, 06 Oct 2008 08:06:08 -0700 (PDT)
Received: by 10.151.112.19 with SMTP id p19mr7833891ybm.65.1223305567055;
        Mon, 06 Oct 2008 08:06:07 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id h27sm12456136elf.14.2008.10.06.08.06.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 06 Oct 2008 08:06:06 -0700 (PDT)
Message-Id: <B36127D2-A0DB-4AC3-8C56-AD35B92277F6@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6fc71b230810060517x1a2cd714h2d44dc8c41de3283@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Document larger than setRAMBufferSizeMB()
Date: Mon, 6 Oct 2008 11:06:04 -0400
References: <6fc71b230810030105k1b80df91w1d95da5122d309b5@mail.gmail.com> <6fc71b230810030126jde6f6d3v1dbb4467e29c04b2@mail.gmail.com> <867513fe0810030142m17270231l60c027e7845a6000@mail.gmail.com> <6fc71b230810030233o5a97acefycffd38b62fd2db86@mail.gmail.com> <030501c92540$5b43bb70$330bc30a@sv.us.sonicwall.com> <6FE65A48-B397-4BB9-95B9-C441D13F69AF@mikemccandless.com> <6fc71b230810060517x1a2cd714h2d44dc8c41de3283@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


OK it sounds like you need to increase the RAM your JVM is allowed to  
use, or, make your documents smaller.

Mike

Aditi Goyal wrote:

> Thanks for showing interest Mike.
> The OOME comes in the middle of setting a value of one of the field  
> in the
> doc. That field has a fairly large value. May be that could have  
> been the
> reason.?
>
>
>
> On Fri, Oct 3, 2008 at 4:57 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Note that large stored fields do not use up any RAM in  
>> IndexWriter's RAM
>> buffer because these stored fields are immediately written to the  
>> directory
>> and not stored in RAM for very long.
>>
>> Aditi, I'd love to see the full stack trace of the OOME that was  
>> originally
>> hit if you still have it...
>>
>> Mike
>>
>>
>> Ganesh wrote:
>>
>> Single document of 16 MB seems to be big. I think you are trying to  
>> store
>>> the entire document content. If it is so drop the stored field and  
>>> store its
>>> reference information in the database, which could help to  
>>> retreive the
>>> content later.
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Aditi Goyal" <aditigupta20@gmail.com 
>>> >
>>> To: <java-user@lucene.apache.org>
>>> Sent: Friday, October 03, 2008 3:03 PM
>>> Subject: Re: Document larger than setRAMBufferSizeMB()
>>>
>>>
>>> Thanks Anshum.
>>>> Although it raises another query, committing the current buffer  
>>>> will
>>>> commit
>>>> the docs before and what will happen to the current doc which  
>>>> threw an
>>>> error
>>>> while adding a field to it, will that also get committed in the  
>>>> half??
>>>>
>>>> Thanks a lot
>>>> Aditi
>>>>
>>>> On Fri, Oct 3, 2008 at 2:12 PM, Anshum <anshumg@gmail.com> wrote:
>>>>
>>>> Hi Aditi,
>>>>>
>>>>> I guess increasing the buffer size would be a solution here, but  
>>>>> in case
>>>>> you
>>>>> wouldn't know the expected max doc size. I guess the best way to  
>>>>> handle
>>>>> that
>>>>> would be a regular try catch block in which you could commit the  
>>>>> current
>>>>> buffer. At the least you could just continue the loop after doing
>>>>> whatever
>>>>> you wish to do using an exception handling block.
>>>>>
>>>>> --
>>>>> Anshum Gupta
>>>>> Naukri Labs!
>>>>> http://ai-cafe.blogspot.com
>>>>>
>>>>> The facts expressed here belong to everybody, the opinions to  
>>>>> me. The
>>>>> distinction is yours to draw............
>>>>>
>>>>> On Fri, Oct 3, 2008 at 1:56 PM, Aditi Goyal <aditigupta20@gmail.com 
>>>>> >
>>>>> wrote:
>>>>>
>>>>>> Hi Everyone,
>>>>>>
>>>>>> I have an index which I am opening at one time only. I keep  
>>>>>> adding the
>>>>>> documents to it until I reach a limit of 500.
>>>>>> After this, I close the index and open it again. (This is done in
>>>>> order
>>>>> to
>>>>>> save time taken by opening and closing the index)
>>>>>> Also, I have set setRAMBufferSizeMB to 16MB.
>>>>>>
>>>>>> If the document size itself is greater than 16MB what will  
>>>>>> happen in >
>>>>> this
>>>>>> case??
>>>>>> It is throwing
>>>>>> java.lang.OutOfMemoryError: Java heap space
>>>>>> Now, my query is,
>>>>>> Can we change something in the way we parse/index to make it  
>>>>>> more >
>>>>> memory
>>>>>> friendly so that it doesnt throw this exception.
>>>>>> And, Can it be caught and overcome gracefully?
>>>>>>
>>>>>>
>>>>>> Thanks a lot
>>>>>> Aditi
>>>>>>
>>>>>
>>>>>
>>> Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 15:12:20 2008
Return-Path: <java-user-return-36494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8869 invoked from network); 6 Oct 2008 15:12:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 15:12:20 -0000
Received: (qmail 60750 invoked by uid 500); 6 Oct 2008 15:12:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60717 invoked by uid 500); 6 Oct 2008 15:12:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60706 invoked by uid 99); 6 Oct 2008 15:12:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 08:12:12 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of petercheng456@gmail.com designates 209.85.142.188 as permitted sender)
Received: from [209.85.142.188] (HELO ti-out-0910.google.com) (209.85.142.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 15:11:08 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1814766tic.11
        for <java-user@lucene.apache.org>; Mon, 06 Oct 2008 08:11:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:x-mimeole:thread-index:in-reply-to;
        bh=1+GhR+bnGsYwAbVjM+aqwnW5N0mjf5taWeLr3NzvfiU=;
        b=JOnvsjbJpb4Q0DJZorKIropZduzIGssuj1e5fsI4rfCESgD7eW5Espl/q2W7AMnkYu
         50i0DctYa0nx4h0claPCe6rOki6frqpPJG9kQ7J2UBOKmj0liOHFijk9T0SXUvsvRErM
         Xkjwc0L4OOSFA1DZl4F9o1FeylrVg0F9YS090=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:x-mimeole
         :thread-index:in-reply-to;
        b=qntJhI+lEXNwN5Tkb1PpMMHA+SzF/izgkKEHJMMoNOnwosNTD5YbJDifVQ92fpODA9
         bCyqDkqOFiilp7rUozaEGnLq0eH0L5FfhMdGqC+CMzlVyNUfggeS42GACW+HlvCvKgrp
         mbpwRaD9eIyhRGznnM5u7K5l7xlkk930Gadv0=
Received: by 10.110.15.9 with SMTP id 9mr6416416tio.12.1223305885351;
        Mon, 06 Oct 2008 08:11:25 -0700 (PDT)
Received: from gcheng ([58.192.125.60])
        by mx.google.com with ESMTPS id w12sm1410309tib.10.2008.10.06.08.11.21
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 06 Oct 2008 08:11:23 -0700 (PDT)
From: "Peter Cheng" <petercheng456@gmail.com>
To: <java-user@lucene.apache.org>
References: <CC2671C08F06704ABFD37ED1EA09AA56744DE5@birexchange.BIRPLAZA.local>
Subject: RE: Memory eaten up by String, Term and TermInfo?
Date: Mon, 6 Oct 2008 23:11:25 +0800
Message-ID: <9263133B61F64864BBA9C7D7E2FD9334@gcheng>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AckWdl0PQFXQ9rc3RdKl/tcAsL+FGgQamDMwADPnjSAABUBPYA==
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA56744DE5@birexchange.BIRPLAZA.local>
X-Virus-Checked: Checked by ClamAV on apache.org

Oh yes, I forget to mention that MaxPermSize is very useful, and may be
another key that solves my problem. I haven't tried UseConcMarkSweepGC and
the other two parameters, and I will try them instead of my own GC thread to
see whether the problem can also be solved.

Thanks Brian!

Regards,
Gong

> -----Original Message-----
> From: Beard, Brian [mailto:Brian.Beard@mybir.com] 
> Sent: Monday, October 06, 2008 8:48 PM
> To: java-user@lucene.apache.org
> Subject: RE: Memory eaten up by String, Term and TermInfo?
> 
> I played around with GC quite a bit in our app and found the following
> java settings to help a lot (Used with jboss, but should be 
> good for any
> jvm).
> 
> set JAVA_OPTS=%JAVA_OPTS% -XX:MaxPermSize=512M -XX:+UseConcMarkSweepGC
> -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled
> 
> While these settings did help when the GC starts to get taxed for
> keeping throughput better, the biggest thing was getting the heap size
> big enough. If the heap's big enough, then everything seems 
> to work well
> regardless of the GC algorithm selected.
> 
> If the heap size and algorithm are correct, then you shouldn't have to
> force GC. Usually the forced GC calls will trigger the total GC which
> has a long delay and slows down responsiveness to the app.
> 
> I found jstat fairly helpful in monitoring all of this. You can see if
> the following article helps at all.
> 
> http://java.sun.com/javase/technologies/hotspot/gc/index.jsp
> 
> -----Original Message-----
> From: Peter Cheng [mailto:petercheng456@gmail.com] 
> Sent: Sunday, October 05, 2008 7:55 AM
> To: java-user@lucene.apache.org
> Subject: RE: Memory eaten up by String, Term and TermInfo?
> 
> I have confirmed that the OutOfMemoryError is not Lucene's 
> problem. It's
> just because JVM failed to perform GC when necessary, and I don't know
> why.
> To fix this, I started another thread to call GC every six hours, and
> problems got solved.
> 
> Thank you all.
> 
> Gong
> 
> > -----Original Message-----
> > From: Michael McCandless [mailto:lucene@mikemccandless.com] 
> > Sent: Sunday, September 14, 2008 10:28 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Memory eaten up by String, Term and TermInfo?
> > 
> > 
> > Small correction: it was checked in this morning (at least, on the  
> > East Coast of the US).
> > 
> > So you need to either build your own JAR using Lucene's trunk, or,  
> > wait for tonite's build to run and then download the build 
> artifacts  
> > from here:
> > 
> >      http://hudson.zones.apache.org/hudson/job/Lucene-trunk
> > 
> > If possible, please report back if this fixed your OutOfMemoryError.
> > 
> > 2.4 will include this fix.
> > 
> > Mike
> > 
> > Chris Lu wrote:
> > 
> > > Can you try to update to the latest Lucene svn version, like  
> > > yesterday?
> > > LUCENE-1383 was checked in yesterday. This patch is 
> > addressing a leak
> > > problem particular to J2EE applications.
> > >
> > > -- 
> > > Chris Lu
> > > -------------------------
> > > Instant Scalable Full-Text Search On Any Database/Application
> > > site: http://www.dbsight.net
> > > demo: http://search.dbsight.com
> > > Lucene Database Search in 3 minutes:
> > > 
> > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database
> > _Search_in_3_minutes
> > > DBSight customer, a shopping comparison site, (anonymous per  
> > > request) got
> > > 2.6 Million Euro funding!
> > >
> > > On Sun, Sep 14, 2008 at 6:58 AM, Peter Cheng  
> > > <petercheng456@gmail.com>wrote:
> > >
> > >> Hi the community,
> > >>
> > >> In a Tomcat application (a keyword-based search engine), I use  
> > >> Lucene 2.3.2
> > >> to index 60 million documents, but each document is 
> small-sized.  
> > >> The total
> > >> index size is about 60GB.
> > >> After a successful running for a week, Tomcat was down due to  
> > >> OutOfMemory.
> > >> Then I restarted Tomcat, and after three days, I used jmap 
> > and jhat  
> > >> to find
> > >> out what had eaten up the memory. I found millions of 
> > instances of  
> > >> String,
> > >> Term, and TermInfo. Why?
> > >>
> > >> In my application, I use a single IndexSearcher object, 
> which is  
> > >> shared by
> > >> all the requests. It is opened initially, and will never 
> be closed.
> > >>
> > >> What could have eaten up the memory? What is referring to 
> > millions of
> > >> instances of Term and TermInfo?
> > >>
> > >> I can provide any snippets of codes if necessary.
> > >> Thank you so much!
> > >>
> > >> Gong Cheng
> > >>
> > >>
> > >> 
> > 
> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > 
> > 
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 16:00:55 2008
Return-Path: <java-user-return-36495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24716 invoked from network); 6 Oct 2008 16:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 16:00:55 -0000
Received: (qmail 45265 invoked by uid 500); 6 Oct 2008 16:00:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45233 invoked by uid 500); 6 Oct 2008 16:00:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45222 invoked by uid 99); 6 Oct 2008 16:00:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 09:00:46 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,DNS_FROM_SECURITYSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [119.160.244.249] (HELO n6c.bullet.tw1.yahoo.com) (119.160.244.249)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Oct 2008 15:59:41 +0000
Received: from [119.160.244.77] by n6.bullet.tw1.yahoo.com with NNFMP; 06 Oct 2008 15:59:00 -0000
Received: from [124.108.115.242] by t2.bullet.tw1.yahoo.com with NNFMP; 06 Oct 2008 15:59:00 -0000
Received: from [124.108.114.85] by t1.bullet.mail.sg1.yahoo.com with NNFMP; 06 Oct 2008 15:58:56 -0000
Received: from [127.0.0.1] by omp105.mail.sg1.yahoo.com with NNFMP; 06 Oct 2008 15:58:59 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 886015.43251.bm@omp105.mail.sg1.yahoo.com
Received: (qmail 65014 invoked by uid 60001); 6 Oct 2008 15:58:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.sg;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=APbrJkfBUAXkQL9IZqF8ZKXrXEK5THLbJUeMMvuQQvfR2qcf1SB0cZt7o2Mwy0s1T6Qm4PIpP12YExBM70xKoI32gO7IkVvppQ5q0CjoYgg3KBzz9CNTMR0oMTJh6Typ79OV1rNLlbkdFbaJtyKhzDpk5EDk46gNOWa6DLdn7fU=;
X-YMail-OSG: Z_TegL0VM1kO_PBVQBSA9r9iOvpodzxJJuXaZOFX28HT8MYVKaVCFcU9zVzLQvmGQBgZUDiowcnIU8Tre1MC1SWuvKo4emEWIb2U19_A0Spd93TRNuZIUqbfbZ_OZdGJWV8lruyzvYXlbjgSj_ImkFaL
Received: from [202.64.170.17] by web76011.mail.sg1.yahoo.com via HTTP; Mon, 06 Oct 2008 23:58:59 CST
Date: Mon, 6 Oct 2008 23:58:59 +0800 (CST)
From: Edwin Lee <edwin11_1979@yahoo.com.sg>
Subject: RE: Memory eaten up by String, Term and TermInfo?
To: java-user@lucene.apache.org
In-Reply-To: <9263133B61F64864BBA9C7D7E2FD9334@gcheng>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <810202.64754.qm@web76011.mail.sg1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Probably off-topic, but just like to plug a bit on my blog post here:
http://tinyurl.com/4vytcc :p (incidentally, Java GC is one of my favourite
topics) It's not very detailed, but i would like to think it's a good place to
start reading...

Just like to point out a couple of things:

1. If you have a long-running application with quite heavy use of caching, you
should examine your GC logs to see if you are violating the young generation
guarantee, and set NewSize and MaxNewSize if necessary.

2. Regarding GC strategies (e.g. UseConcMarkSweepGC), it really depends on
several factors, such as system specs, what kind of application that you have
(e.g. online transaction or batch processing), and even what the users'
expectations are (high throughput i.e. achieve x number of transactions in a
fixed time period, or low latency i.e. each transaction takes less than x
seconds).

Just some thoughts...



Regards,
Edwin



--- Peter Cheng <petercheng456@gmail.com> wrote:

> Oh yes, I forget to mention that MaxPermSize is very useful, and may be
> another key that solves my problem. I haven't tried UseConcMarkSweepGC and
> the other two parameters, and I will try them instead of my own GC thread to
> see whether the problem can also be solved.
> 
> Thanks Brian!
> 
> Regards,
> Gong
> 
> > -----Original Message-----
> > From: Beard, Brian [mailto:Brian.Beard@mybir.com] 
> > Sent: Monday, October 06, 2008 8:48 PM
> > To: java-user@lucene.apache.org
> > Subject: RE: Memory eaten up by String, Term and TermInfo?
> > 
> > I played around with GC quite a bit in our app and found the following
> > java settings to help a lot (Used with jboss, but should be 
> > good for any
> > jvm).
> > 
> > set JAVA_OPTS=%JAVA_OPTS% -XX:MaxPermSize=512M -XX:+UseConcMarkSweepGC
> > -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled
> > 
> > While these settings did help when the GC starts to get taxed for
> > keeping throughput better, the biggest thing was getting the heap size
> > big enough. If the heap's big enough, then everything seems 
> > to work well
> > regardless of the GC algorithm selected.
> > 
> > If the heap size and algorithm are correct, then you shouldn't have to
> > force GC. Usually the forced GC calls will trigger the total GC which
> > has a long delay and slows down responsiveness to the app.
> > 
> > I found jstat fairly helpful in monitoring all of this. You can see if
> > the following article helps at all.
> > 
> > http://java.sun.com/javase/technologies/hotspot/gc/index.jsp
> > 
> > -----Original Message-----
> > From: Peter Cheng [mailto:petercheng456@gmail.com] 
> > Sent: Sunday, October 05, 2008 7:55 AM
> > To: java-user@lucene.apache.org
> > Subject: RE: Memory eaten up by String, Term and TermInfo?
> > 
> > I have confirmed that the OutOfMemoryError is not Lucene's 
> > problem. It's
> > just because JVM failed to perform GC when necessary, and I don't know
> > why.
> > To fix this, I started another thread to call GC every six hours, and
> > problems got solved.
> > 
> > Thank you all.
> > 
> > Gong
> > 
> > > -----Original Message-----
> > > From: Michael McCandless [mailto:lucene@mikemccandless.com] 
> > > Sent: Sunday, September 14, 2008 10:28 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Memory eaten up by String, Term and TermInfo?
> > > 
> > > 
> > > Small correction: it was checked in this morning (at least, on the  
> > > East Coast of the US).
> > > 
> > > So you need to either build your own JAR using Lucene's trunk, or,  
> > > wait for tonite's build to run and then download the build 
> > artifacts  
> > > from here:
> > > 
> > >      http://hudson.zones.apache.org/hudson/job/Lucene-trunk
> > > 
> > > If possible, please report back if this fixed your OutOfMemoryError.
> > > 
> > > 2.4 will include this fix.
> > > 
> > > Mike
> > > 
> > > Chris Lu wrote:
> > > 
> > > > Can you try to update to the latest Lucene svn version, like  
> > > > yesterday?
> > > > LUCENE-1383 was checked in yesterday. This patch is 
> > > addressing a leak
> > > > problem particular to J2EE applications.
> > > >
> > > > -- 
> > > > Chris Lu
> > > > -------------------------
> > > > Instant Scalable Full-Text Search On Any Database/Application
> > > > site: http://www.dbsight.net
> > > > demo: http://search.dbsight.com
> > > > Lucene Database Search in 3 minutes:
> > > > 
> > > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database
> > > _Search_in_3_minutes
> > > > DBSight customer, a shopping comparison site, (anonymous per  
> > > > request) got
> > > > 2.6 Million Euro funding!
> > > >
> > > > On Sun, Sep 14, 2008 at 6:58 AM, Peter Cheng  
> > > > <petercheng456@gmail.com>wrote:
> > > >
> > > >> Hi the community,
> > > >>
> > > >> In a Tomcat application (a keyword-based search engine), I use  
> > > >> Lucene 2.3.2
> > > >> to index 60 million documents, but each document is 
> > small-sized.  
> > > >> The total
> > > >> index size is about 60GB.
> > > >> After a successful running for a week, Tomcat was down due to  
> > > >> OutOfMemory.
> > > >> Then I restarted Tomcat, and after three days, I used jmap 
> > > and jhat  
> > > >> to find
> > > >> out what had eaten up the memory. I found millions of 
> > > instances of  
> > > >> String,
> > > >> Term, and TermInfo. Why?
> > > >>
> > > >> In my application, I use a single IndexSearcher object, 
> > which is  
> > > >> shared by
> > > >> all the requests. It is opened initially, and will never 
> > be closed.
> > > >>
> > > >> What could have eaten up the memory? What is referring to 
> > > millions of
> > > >> instances of Term and TermInfo?
> > > >>
> > > >> I can provide any snippets of codes if necessary.
> > > >> Thank you so much!
> > > >>
> > > >> Gong Cheng
> > > >>
> > > >>
> > > >> 
> > > 
> > ---------------------------------------------------------------------
> > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >>
> > > >>
> > > 
> > > 
> > > 
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



      Try cool new emoticons, skins, plus more space for friends. 
Download Yahoo! Messenger Singapore now!
http://sg.messenger.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 16:06:20 2008
Return-Path: <java-user-return-36496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26097 invoked from network); 6 Oct 2008 16:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 16:06:19 -0000
Received: (qmail 59179 invoked by uid 500); 6 Oct 2008 16:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59144 invoked by uid 500); 6 Oct 2008 16:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59133 invoked by uid 99); 6 Oct 2008 16:06:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 09:06:11 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,DNS_FROM_SECURITYSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [119.160.244.190] (HELO n3a.bullet.tw1.yahoo.com) (119.160.244.190)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Oct 2008 16:05:05 +0000
Received: from [119.160.244.76] by n3.bullet.tw1.yahoo.com with NNFMP; 06 Oct 2008 16:04:24 -0000
Received: from [124.108.115.242] by t1.bullet.tw1.yahoo.com with NNFMP; 06 Oct 2008 16:04:24 -0000
Received: from [124.108.114.85] by t1.bullet.mail.sg1.yahoo.com with NNFMP; 06 Oct 2008 16:04:20 -0000
Received: from [127.0.0.1] by omp105.mail.sg1.yahoo.com with NNFMP; 06 Oct 2008 16:04:23 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 976290.43251.bm@omp105.mail.sg1.yahoo.com
Received: (qmail 98246 invoked by uid 60001); 6 Oct 2008 16:04:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.sg;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=QfIr/McAGd8ymkIXfapTRT88dOC69gBXkMYR7TmZjPdsTlmmYlXQfNAkXSADs4BInFXBhLXwv2pwkxHB9dejW668UDTAghL7JLstkzWpJI+SKTBzAozIQ5Cb5ZSms1y7UNAupXZLW1PssQCigRHa/MjOyN8+jrZuu+IiZgY9hxs=;
X-YMail-OSG: Zl6jxx0VM1nWncRF5TEZ6VyhznLw1NhTCeBxJ00A56nbKsPIsQBWZVOf_UQDMvAQEAExT8c1V72_907j3gOU7NdE3g5yX.z6bAXBIgX5KTSYt8remD6ksANOqAENX9u_15kboRXzUSaeQYbfw27K98uY
Received: from [202.64.170.17] by web76016.mail.sg1.yahoo.com via HTTP; Tue, 07 Oct 2008 00:04:23 CST
Date: Tue, 7 Oct 2008 00:04:23 +0800 (CST)
From: Edwin Lee <edwin11_1979@yahoo.com.sg>
Subject: Re: ClassCastException when writing to index writer
To: java-user@lucene.apache.org
In-Reply-To: <e9d73d4a0810052316q2484976dme4d6f356e6abcc0e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <895015.97467.qm@web76016.mail.sg1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul,

When you say that your dummy TestVector class works, are you running it using
the same classpaths that you used to run your actual application? Does it
contain the Lucene JAR files?



Regards,
Edwin



--- Paul Chan <wayofdragon@gmail.com> wrote:

> I have tried to recompile Lucene 2.3.2 under my environment (SUN JDK 1.6)
> and it still doesn't work.  I am beginning to think that maybe there is
> something wrong with lucene's build script.  My TestVector class's clone()
> method works without a hitch, but SegmentInfos' clone() method doesnt work
> at all.  I don't really know what to do at this moment.  Does anyone have
> any insight?
> 
> On Sun, Oct 5, 2008 at 10:45 PM, Paul Chan <wayofdragon@gmail.com> wrote:
> 
> > Thank you all for your input.  However, this is what I have discovered so
> > far:
> >
> >    - I tried running the test that Edwin suggested and it failed for me in
> >    my environment (Lucene 2.3.2, Windows XP, SUN JDK 1.5 or 1.6)
> >
> > e.g. SegmentInfos sis = new SegmentInfos();
> >       SegmentInfos sis2 = (SegmentInfos) sis.clone();
> >
> >    - Interestingly, I tried to create a dummy test class which mimics
> >    SegmentInfos as follows and it works!:
> >
> > public class TestVector extends Vector
> > {
> >    public TestVector clone()
> >    {
> >       TestVector cl = (TestVector)super.clone();
> >       return cl;
> >    }
> > }
> >
> >          TestVector vector = new TestVector();
> >          TestVector vClone = (TestVector)vector.clone();
> >
> >    - This tells me that perhaps there is something wrong with the lucene
> >    package that I have downloaded (some sort of incompatibility?).  I will
> try
> >    to recompile the lucene package in my own environment and see if I can
> fix
> >    the problem.
> >
> >
> > On Sat, Oct 4, 2008 at 2:21 AM, Edwin Lee <edwin11_1979@yahoo.com.sg>wrote:
> >
> >> i think, very likely, you have another copy of java.util.Vector loaded,
> >> and
> >> this one tries to be too clever with its implementation of clone
> >> (instantiate a
> >> new Vector instance) instead of delegating to its super class (Object).
> >>
> >>
> >>
> >> HTH,
> >> Edwin
> >>
> >>
> >>
> >> --- Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >>
> >> >
> >> > :        SegmentInfos sis = (SegmentInfos) super.clone();
> >> >
> >> > : We see that it is trying to cast a Vector into SegmentInfos which
> >> explains
> >> > : the ClassCastException.  This is definitely a bug.
> >> >
> >> > I'm really not sure how you could be getting that ClassCastException
> >> > unless there's a really horrific bug in the JRE you are using.
> >> >
> >> > You'll see this in just about every (non-trivial) use of super.clone()
> >> ...
> >>
> >>
> >>
> >>       Yahoo! Toolbar is now powered with Search Assist.Download it now!
> >> http://sg.toolbar.yahoo.com/
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> 



      Get your preferred Email name!
Now you can @ymail.com and @rocketmail.com
http://mail.promotions.yahoo.com/newdomains/sg/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 16:27:22 2008
Return-Path: <java-user-return-36497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36197 invoked from network); 6 Oct 2008 16:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 16:27:22 -0000
Received: (qmail 8529 invoked by uid 500); 6 Oct 2008 16:27:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8504 invoked by uid 500); 6 Oct 2008 16:27:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8476 invoked by uid 99); 6 Oct 2008 16:27:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 09:27:04 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 16:25:57 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2780452rvb.5
        for <java-user@lucene.apache.org>; Mon, 06 Oct 2008 09:26:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PLG0s4X7CeVr8+81vXMZJ3XCW7q9XTCppzPZr+oSoJk=;
        b=jvuK68IKsW3XgYqzEGAyrj8tQmgNOYxj6Ovif79LprvbX7IBFeVLox8cjZlbsbVmmc
         6++lPwZGPVj1arYOybEb2hnEaQwFY1Z3MZYZE5BjocYLgYzRyY9LLeNzVoiYRGRdA/rW
         QWilJadvVsOscIF3ZWoyRiVmtWbx+UmNlBQQQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=IQoVYF2/l/GIuT7u70fEKNBuiLLDoM1YXe6kHfyVI8SDNjrakOz6vGlCislunulNHn
         NdDNLfAYze6E2az7tIcxvDqKfsqC+mowltNAquingkYmXNAeh+uhRip9v3AZrUxHG29J
         eUfksmjQcTisU7hXlUFYxGUqCVstRwGtdTVrc=
Received: by 10.141.23.7 with SMTP id a7mr3085273rvj.5.1223310383265;
        Mon, 06 Oct 2008 09:26:23 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Mon, 6 Oct 2008 09:26:23 -0700 (PDT)
Message-ID: <e9d73d4a0810060926m50332ebey95a58dadb20912be@mail.gmail.com>
Date: Mon, 6 Oct 2008 12:26:23 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <895015.97467.qm@web76016.mail.sg1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42237_2419795.1223310383249"
References: <e9d73d4a0810052316q2484976dme4d6f356e6abcc0e@mail.gmail.com>
	 <895015.97467.qm@web76016.mail.sg1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42237_2419795.1223310383249
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Edwin,

Yes, I am running the TestVector against the same class path as my actual
application.  My class path contains the Lucene JAR files.  This is very
bizzard because my TestVector class extends Vector and it works, but for
some reason SegmentInfos also extends Vector but it doesnt work.
I did some more investigation and I found the following:

final class SegmentInfos extends Vector
{
   public Object clone() {
      Object a = super.clone(); --> code that I added to do some debug
     SegmentInfos sis = (SegmentInfos) a;
     ...
   }
}

When super.clone() returns, it actually returns a Vector object instead of a
SegmentInfos object against my expectation so that explains why the
ClassCastException occurs.  On the other hand, when I run my TestVector
class:

final class TestVector extends Vector
{
   public Object clone() {
      Object a = super.clone(); --> code that I added to do some debug
      TestVector sis = (TestVector) a;
     ...
   }
}

When super.clone() returns, it returns TestVector!

This tells me that there is something wrong with Lucene build file that
causes this problem, but I have no idea what it could be.  In Lucene's
common-build.xml, I changed the 1.4 properties to 1.6 propreties but still
to no avail.


On Mon, Oct 6, 2008 at 12:04 PM, Edwin Lee <edwin11_1979@yahoo.com.sg>wrote:

> Hi Paul,
>
> When you say that your dummy TestVector class works, are you running it
> using
> the same classpaths that you used to run your actual application? Does it
> contain the Lucene JAR files?
>
>
>
> Regards,
> Edwin
>
>
>
> --- Paul Chan <wayofdragon@gmail.com> wrote:
>
> > I have tried to recompile Lucene 2.3.2 under my environment (SUN JDK 1.6)
> > and it still doesn't work.  I am beginning to think that maybe there is
> > something wrong with lucene's build script.  My TestVector class's
> clone()
> > method works without a hitch, but SegmentInfos' clone() method doesnt
> work
> > at all.  I don't really know what to do at this moment.  Does anyone have
> > any insight?
> >
> > On Sun, Oct 5, 2008 at 10:45 PM, Paul Chan <wayofdragon@gmail.com>
> wrote:
> >
> > > Thank you all for your input.  However, this is what I have discovered
> so
> > > far:
> > >
> > >    - I tried running the test that Edwin suggested and it failed for me
> in
> > >    my environment (Lucene 2.3.2, Windows XP, SUN JDK 1.5 or 1.6)
> > >
> > > e.g. SegmentInfos sis = new SegmentInfos();
> > >       SegmentInfos sis2 = (SegmentInfos) sis.clone();
> > >
> > >    - Interestingly, I tried to create a dummy test class which mimics
> > >    SegmentInfos as follows and it works!:
> > >
> > > public class TestVector extends Vector
> > > {
> > >    public TestVector clone()
> > >    {
> > >       TestVector cl = (TestVector)super.clone();
> > >       return cl;
> > >    }
> > > }
> > >
> > >          TestVector vector = new TestVector();
> > >          TestVector vClone = (TestVector)vector.clone();
> > >
> > >    - This tells me that perhaps there is something wrong with the
> lucene
> > >    package that I have downloaded (some sort of incompatibility?).  I
> will
> > try
> > >    to recompile the lucene package in my own environment and see if I
> can
> > fix
> > >    the problem.
> > >
> > >
> > > On Sat, Oct 4, 2008 at 2:21 AM, Edwin Lee <edwin11_1979@yahoo.com.sg
> >wrote:
> > >
> > >> i think, very likely, you have another copy of java.util.Vector
> loaded,
> > >> and
> > >> this one tries to be too clever with its implementation of clone
> > >> (instantiate a
> > >> new Vector instance) instead of delegating to its super class
> (Object).
> > >>
> > >>
> > >>
> > >> HTH,
> > >> Edwin
> > >>
> > >>
> > >>
> > >> --- Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > >>
> > >> >
> > >> > :        SegmentInfos sis = (SegmentInfos) super.clone();
> > >> >
> > >> > : We see that it is trying to cast a Vector into SegmentInfos which
> > >> explains
> > >> > : the ClassCastException.  This is definitely a bug.
> > >> >
> > >> > I'm really not sure how you could be getting that ClassCastException
> > >> > unless there's a really horrific bug in the JRE you are using.
> > >> >
> > >> > You'll see this in just about every (non-trivial) use of
> super.clone()
> > >> ...
> > >>
> > >>
> > >>
> > >>       Yahoo! Toolbar is now powered with Search Assist.Download it
> now!
> > >> http://sg.toolbar.yahoo.com/
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> >
>
>
>
>       Get your preferred Email name!
> Now you can @ymail.com and @rocketmail.com
> http://mail.promotions.yahoo.com/newdomains/sg/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_42237_2419795.1223310383249--

From java-user-return-36498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 18:26:03 2008
Return-Path: <java-user-return-36498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12677 invoked from network); 6 Oct 2008 18:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 18:26:01 -0000
Received: (qmail 38636 invoked by uid 500); 6 Oct 2008 18:25:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38458 invoked by uid 500); 6 Oct 2008 18:25:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38447 invoked by uid 99); 6 Oct 2008 18:25:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 11:25:53 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 18:24:48 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 4736371C75F; Mon,  6 Oct 2008 11:24:53 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id F389171C75D
	for <java-user@lucene.apache.org>; Mon,  6 Oct 2008 11:24:53 -0700 (PDT)
Date: Mon, 6 Oct 2008 11:24:53 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: bunch of newbie queries, PS
In-Reply-To: <11764124.1222888423775.JavaMail.root@elwamui-lapwing.atl.sa.earthlink.net>
Message-ID: <Pine.LNX.4.62.0810061111300.3669@radix.cryptio.net>
References: <11764124.1222888423775.JavaMail.root@elwamui-lapwing.atl.sa.earthlink.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: bunch of newbie queries, PS

Paul: your subject linke seems to indicate that your email is a followup 
to previous questions, however i don't seem to have ever seen those 
questions posted on the list, and i can't seem to find any previous emails 
from you in any of hte online archives -- so if that is the case you may 
want to resend your questions.

: OK, after googling around for a while, I found this: 
: 
: http://wooga.drbacchus.com/lucene-and-documentation (alas, I agree) 

These comments are from 2004 -- at a time when "Lucene" was basicly 
just what is now known as "Lucene-Java". I'd like to think many of those
comments have since been addressed, particularly by the bg "What Is 
Lucene" section on the home page that breaks down the list of subprojects 
to help point people in the correct direction.

Specific comments on otherways the website and documentation can still be 
improved today are always welcome.

: and then eventually I realized that the download web-page directory has 
: a link to the "archive" where all the old stuff is (probably this is 
: common and obvious, but I kept missing it) -- every link that purports 
: to take me to an old version takes me to 
: http://apache.oc1.mirrors.redwire.net/lucene/java/ -- it would help a 
: lot (and would be easy to do, no?) if all the links to old stuff went to 
: http://apache.oc1.mirrors.redwire.net/lucene/java/archive/ instead. (Not 
: necessarily that particular mirror, of course.)

I'm not really sure if i'm understanding what your suggestion is -- what 
links are you finding that "purports to take me to an old version" .. can 
you give us specific examples? (ie: "On http://lucene.apache.org/foo.html 
there is a link with the text "Get 1.9" that really links to ...")

Part of the confusion may be that many pages, which are archived copies of 
hte documentation included in each release, have generic links like 
"Releases" or "Binary and source distributions are available __here__" 
type links that point at http://www.apache.org/dyn/closer.cgi/lucene/java/  
We do not update these links as new versions come out (and old versions 
are archived) becuase:
  1) these docs are archives of hte documentation included in teh releas, 
we don't revise history.
  2) we want to encourage visibility and downloading of the most current 
release, since it's the one with the most current bug fixes.  If someone 
has (or finds) old documentation we don't want that documentation to link  
directly to a download of whatever version was current at the time, 
we want to link to the *current* version (which includes current 
documentation)

But as i said: if you could tell us exactly whcih links confused you, we 
can figure out if that's the situation we're talking about.  I'm also open 
to suggestions for better ways to make the "archive" directory more 
obvious for people who really are looking for historical releases 
(although i'm at a loss to think of many common cases for wanting to find 
old releases)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 18:34:08 2008
Return-Path: <java-user-return-36499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16338 invoked from network); 6 Oct 2008 18:34:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 18:34:08 -0000
Received: (qmail 56077 invoked by uid 500); 6 Oct 2008 18:34:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55477 invoked by uid 500); 6 Oct 2008 18:33:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55466 invoked by uid 99); 6 Oct 2008 18:33:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 11:33:59 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.37.63] (HELO web53502.mail.re2.yahoo.com) (206.190.37.63)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Oct 2008 18:32:56 +0000
Received: (qmail 81613 invoked by uid 60001); 6 Oct 2008 18:32:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=pvk5nQeQpOkj3xyzZ6BmVYBkneUNqUzYBGkLxpCIoRqZifCScStS8942H5ByXJopt9lvVa9NG9ZfLMN/VH7ZVODzAxdf1qnZSkFqNoBTGEyfe8g4jF8Lx4iPy1Me7oZaSL/2gw2Y1z43OyzfVssuxaAaiAMzcQqKIGQuJflvQSE=;
X-YMail-OSG: R4iXL8wVM1n7BHBWZQGLWvQWqG3XRUmEOiHcZnj4xtgC3fb_QEL30qih5VdgDUKRmmkpsNTje79B_bxhjMT0bG2nupX9Xa0AVM1sZD12_MvSXy4EIqtOr03Dmrrc723rRjJxv_KNTVs5wPjWpdG3UdE6LniW
Received: from [67.161.151.103] by web53502.mail.re2.yahoo.com via HTTP; Mon, 06 Oct 2008 11:32:31 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 6 Oct 2008 11:32:31 -0700 (PDT)
From: Edwin Smith <edwin.smith@yahoo.com>
Subject: Re: ArrayIndexOutOfBoundsException in FastCharStream.readChar
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-823860557-1223317951=:79159"
Message-ID: <398902.79159.qm@web53502.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-823860557-1223317951=:79159
Content-Type: text/plain; charset=us-ascii

Oh, and in case it matters, I'm using Lucene 2.2.0.

Ed



----- Original Message ----


I am stumped and have not seen any other reference to this problem. I am getting the following exception on everything I try to index. Does anyone know what my problem might be?

Thanks,

Ed

java.lang.ArrayIndexOutOfBoundsException
at org.apache.lucene.analysis.standard.FastCharStream.readChar(
at org.apache.lucene.analysis.standard.FastCharStream.BeginToken(
at org.apache.lucene.analysis.standard.StandardTokenizerTokenManager.getNextToken(
at org.apache.lucene.analysis.standard.StandardTokenizer.jj_ntk(
at org.apache.lucene.analysis.standard.StandardTokenizer.next(
at org.apache.lucene.analysis.standard.StandardFilter.next(
at org.apache.lucene.analysis.LowerCaseFilter.next(
at org.apache.lucene.analysis.StopFilter.next(
at org.apache.lucene.index.DocumentWriter.invertDocument(
at org.apache.lucene.index.DocumentWriter.addDocument(
at org.apache.lucene.index.IndexWriter.buildSingleDocSegment(
at org.apache.lucene.index.IndexWriter.addDocument(
at org.apache.lucene.index.IndexWriter.addDocument(
at com.affinovate.v4.server.search.Indexer.index(
at com.affinovate.v4.server.search.Indexer.perform(
at com.affinovate.v4.server.db.TaskQueue.run(
at java.lang.Thread.run(: 2048FastCharStream.java:46)FastCharStream.java:79)StandardTokenizerTokenManager.java:1180)StandardTokenizer.java:158)StandardTokenizer.java:36)StandardFilter.java:41)LowerCaseFilter.java:33)StopFilter.java:107)DocumentWriter.java:219)DocumentWriter.java:95)IndexWriter.java:1013)IndexWriter.java:1001)IndexWriter.java:983)Indexer.java:61)Indexer.java:93)TaskQueue.java:115)Thread.java:619)
--0-823860557-1223317951=:79159--

From java-user-return-36500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 18:40:48 2008
Return-Path: <java-user-return-36500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19325 invoked from network); 6 Oct 2008 18:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 18:40:48 -0000
Received: (qmail 78134 invoked by uid 500); 6 Oct 2008 18:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78107 invoked by uid 500); 6 Oct 2008 18:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 37266 invoked by uid 99); 6 Oct 2008 18:25:28 -0000
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=RaiAyK29wrs2pXgMr0vmmO65qUWgDoCGlXZXGgIgF5L2GdX7FKI8By+JPlwTXNk6K1zR4NM/GnBz6/xNIhYNkZP1TrtUQaxKGdwlnKOMfUS96VKp3kyvehv8XQyuOLN0nr0qgUJSISYJWH7UxZpZBQH4nc6F4u1SRrn5zIhqAQQ=;
X-YMail-OSG: yPYLK9oVM1llQ8c0jfRtS9TWufGf7gETDyZ4gEiiabv.LcUZwNHiL8pOQCy24s8mYGbT1h43cu37411gYGNsFqO_RpJaiQNqf5Qmq.aAC9sD.jbapqwXi8GkhmWctjITtclhENITKnqUSTy2l1UEYJiYsUBz
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 6 Oct 2008 11:23:58 -0700 (PDT)
From: Edwin Smith <edwin.smith@yahoo.com>
Subject: ArrayIndexOutOfBoundsException in FastCharStream.readChar
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1068297173-1223317438=:55815"
Message-ID: <905217.55815.qm@web53511.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1068297173-1223317438=:55815
Content-Type: text/plain; charset=us-ascii

I am stumped and have not seen any other reference to this problem. I am getting the following exception on everything I try to index. Does anyone know what my problem might be?

Thanks,

Ed

java.lang.ArrayIndexOutOfBoundsException
at org.apache.lucene.analysis.standard.FastCharStream.readChar(
at org.apache.lucene.analysis.standard.FastCharStream.BeginToken(
at org.apache.lucene.analysis.standard.StandardTokenizerTokenManager.getNextToken(
at org.apache.lucene.analysis.standard.StandardTokenizer.jj_ntk(
at org.apache.lucene.analysis.standard.StandardTokenizer.next(
at org.apache.lucene.analysis.standard.StandardFilter.next(
at org.apache.lucene.analysis.LowerCaseFilter.next(
at org.apache.lucene.analysis.StopFilter.next(
at org.apache.lucene.index.DocumentWriter.invertDocument(
at org.apache.lucene.index.DocumentWriter.addDocument(
at org.apache.lucene.index.IndexWriter.buildSingleDocSegment(
at org.apache.lucene.index.IndexWriter.addDocument(
at org.apache.lucene.index.IndexWriter.addDocument(
at com.affinovate.v4.server.search.Indexer.index(
at com.affinovate.v4.server.search.Indexer.perform(
at com.affinovate.v4.server.db.TaskQueue.run(
at java.lang.Thread.run(: 2048FastCharStream.java:46)FastCharStream.java:79)StandardTokenizerTokenManager.java:1180)StandardTokenizer.java:158)StandardTokenizer.java:36)StandardFilter.java:41)LowerCaseFilter.java:33)StopFilter.java:107)DocumentWriter.java:219)DocumentWriter.java:95)IndexWriter.java:1013)IndexWriter.java:1001)IndexWriter.java:983)Indexer.java:61)Indexer.java:93)TaskQueue.java:115)Thread.java:619)
--0-1068297173-1223317438=:55815--

From java-user-return-36501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 18:48:51 2008
Return-Path: <java-user-return-36501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26223 invoked from network); 6 Oct 2008 18:48:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 18:48:51 -0000
Received: (qmail 670 invoked by uid 500); 6 Oct 2008 18:48:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 641 invoked by uid 500); 6 Oct 2008 18:48:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 630 invoked by uid 99); 6 Oct 2008 18:48:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 11:48:43 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 18:47:41 +0000
Received: by an-out-0708.google.com with SMTP id c37so143442anc.49
        for <java-user@lucene.apache.org>; Mon, 06 Oct 2008 11:48:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YD33BF12c92KEuo0gR2WK9Z23hE8CaeeDCIHUY6fRI0=;
        b=KjKbqHuQbe4bSkJC81JdW0UpH72ZtkScKsdPjG2FWGh+hdjrIlKnlxNy1Y3qLYcjfc
         FLKGvCDW4v7dwsLIdrbTpVW2r+YV/mqlaHFXhXoE/05lrfk7srVCIjbdcSzMSefwTBJP
         BYcXuQkGLzulEzLUaF9Kp8Su1NmCfQMBntbKs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=scN2JwAkoGBd4wtwmX8M2akcxeyBE2ns2Kbq5x6kmRSiU9uDVk9l79k7kcXVlgmVu6
         Kf+fXguUoa7/GyQxYqumLUvp1wIKpIwLppKdPT+bsXaS6lOF4u1C5Hs/RYPPzDXawlsr
         LONJ8YGgM1ryS0Gn9/C0RjCMXkbvGCGI0qjNk=
Received: by 10.142.72.21 with SMTP id u21mr2158682wfa.161.1223318895649;
        Mon, 06 Oct 2008 11:48:15 -0700 (PDT)
Received: by 10.142.49.5 with HTTP; Mon, 6 Oct 2008 11:48:15 -0700 (PDT)
Message-ID: <867513fe0810061148h2de6f71av6867bdbbdea5dc59@mail.gmail.com>
Date: Tue, 7 Oct 2008 00:18:15 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Single searcher vs Multi Searcher
In-Reply-To: <036d01c9276d$268e2c60$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51493_310640.1223318895634"
References: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com>
	 <867513fe0810030918m1b3ecd64k98ed01214caaaa5d@mail.gmail.com>
	 <036d01c9276d$268e2c60$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51493_310640.1223318895634
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ganesh,
About the memory consumption while sorting, it would end up using similar
amounts, perhaps even more.. like in the case of regular parallel
programming algorithms (hoping that you intend to search using a parallel
multi searcher). Would you have to query particular indexes only for a
particular search or would you be searching over all the indexes and then
follow it up by merger (which the parallel multi searcher would do
efficiently).?
Also, I guess 30 indexes would be a little too many, haven't really tried
out those many indexes for a multisearcher.
As far as maintenance of DB is concerned, it might be easy as long as you
don't have any document updates, in which case you'd have to shift the
documents from one DB/index to another (which includes creating an entry in
the latest index/DB and deleting the record from the older DB).
I guess you'd have to pilot it, in case memory is an issue in your case and
not speed, you could try a regular multisearcher instead of a parallel
multisearcher.
I guess when you say maintenance of the DB gets easier, you mean that the
data in each individual table is controlled (but remember there could be
other bigger hassles like the one mentioned above about moving data between
indexes/DB).

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Mon, Oct 6, 2008 at 10:06 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Hello Anshum,
>
> My index is growing 1 million documents per day. Initially i planned to
> have a single database but the sorting of one or more fields consumes more
> RAM. Whether sharding the index would also consume the same.
>
> My application should co-exist with other application of my product and my
> app could get 1 GB of RAM. Search speed is fine but i need to display the
> result in the sorted order.
>
> I thought to keep 7 days of documents in one index and create one more
> after the 7 days. After 30 days the first index may get deleted. I need to
> keep the documents in the index DB for 30 days. My Index DB is in HDD.
>
> I want to the pros and cons of sharding. I think maintance of the DB
> becomes easier.
>
> It would be very much helpful, if you share some of your thoughts.
>
> Regards
> Ganesh
>
>
> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, October 03, 2008 9:48 PM
> Subject: Re: Single searcher vs Multi Searcher
>
>
>
>  Hi Ganesh,
>>
>> I have experimented with sharded indexes and they seem to benefit
>> me(atleast
>> in my case). I would like to know a few things before I answer your
>> question:
>> 1. Do you have a reasonable criteria ( a calculated one) to shard the
>> indexes?
>> 2. How do you plan to split the index? Is it going to be document based
>> (which I guess it should be as otherwise you would have to build a
>> complete
>> distributed system)
>> 3. Do you plan to put your indexes on the RAM or on (physically) seperate
>> HDDs?
>>
>> Though all said and done, sharded indexes are a good approach, if done the
>> right way.
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Fri, Oct 3, 2008 at 3:01 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>  Hello all,
>>>
>>> My indexing is growing by 1 million records per day and the memory
>>> consumption of the searcher object is quite high.
>>>
>>> There are different opinion in the groups. Few suggest to use single
>>> database and few to use sharding. My Database has 10 million records now
>>> and
>>> it might go till 30 million or more. I plan to shard the index. but
>>> Multisearcher will give me benifit.
>>>
>>> Regards
>>> Ganesh
>>>
>>>
>>> Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_51493_310640.1223318895634--

From java-user-return-36502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 19:19:21 2008
Return-Path: <java-user-return-36502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39120 invoked from network); 6 Oct 2008 19:19:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 19:19:19 -0000
Received: (qmail 48127 invoked by uid 500); 6 Oct 2008 19:19:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48101 invoked by uid 500); 6 Oct 2008 19:19:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48090 invoked by uid 99); 6 Oct 2008 19:19:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 12:19:10 -0700
X-ASF-Spam-Status: No, hits=-3.9 required=10.0
	tests=DNS_FROM_SECURITYSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 19:18:08 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: ArrayIndexOutOfBoundsException in FastCharStream.readChar
Date: Mon, 6 Oct 2008 15:18:20 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3C62@SUEXCL-02.ad.syr.edu>
In-Reply-To: <398902.79159.qm@web53502.mail.re2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: ArrayIndexOutOfBoundsException in FastCharStream.readChar
Thread-Index: Ackn4iFED+Fp5lM8SbuLROXHI3dM2QABRt8A
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Edwin,

I don't know specifically what's causing the exception you're seeing, =
but note that in Lucene 2.3.0+, the JavaCC-generated version of =
StandardTokenizer (where your exception originates) has been replaced =
with a JFlex-generated version - see =
<http://issues.apache.org/jira/browse/LUCENE-966>.

FYI, indexing speed was much improved in 2.3.0 over previous versions -- =
up to 10 times faster, according to reports on this list -- is there any =
particular reason you aren't using 2.3.2 (the most recent release)?

Steve

On 10/06/2008 at 2:32 PM, Edwin Smith wrote:
> Oh, and in case it matters, I'm using Lucene 2.2.0.
>=20
> Ed
>=20
>=20
>=20
> ----- Original Message ----
>=20
>=20
> I am stumped and have not seen any other reference to this
> problem. I am getting the following exception on everything I
> try to index. Does anyone know what my problem might be?
>=20
> Thanks,
>=20
> Ed
>=20
> java.lang.ArrayIndexOutOfBoundsException at
> org.apache.lucene.analysis.standard.FastCharStream.readChar( at
> org.apache.lucene.analysis.standard.FastCharStream.BeginToken( at
> org.apache.lucene.analysis.standard.StandardTokenizerTokenMana
> ger.getNextToken( at
> org.apache.lucene.analysis.standard.StandardTokenizer.jj_ntk( at
> org.apache.lucene.analysis.standard.StandardTokenizer.next( at
> org.apache.lucene.analysis.standard.StandardFilter.next( at
> org.apache.lucene.analysis.LowerCaseFilter.next( at
> org.apache.lucene.analysis.StopFilter.next( at
> org.apache.lucene.index.DocumentWriter.invertDocument( at
> org.apache.lucene.index.DocumentWriter.addDocument( at
> org.apache.lucene.index.IndexWriter.buildSingleDocSegment( at
> org.apache.lucene.index.IndexWriter.addDocument( at
> org.apache.lucene.index.IndexWriter.addDocument( at
> com.affinovate.v4.server.search.Indexer.index( at
> com.affinovate.v4.server.search.Indexer.perform( at
> com.affinovate.v4.server.db.TaskQueue.run( at java.lang.Thread.run(:
> 2048FastCharStream.java:46)FastCharStream.java:79)StandardToke
> nizerTokenManager.java:1180)StandardTokenizer.java:158)Standar
> dTokenizer.java:36)StandardFilter.java:41)LowerCaseFilter.java
> > 33)StopFilter.java:107)DocumentWriter.java:219)DocumentWriter
> .java:95)IndexWriter.java:1013)IndexWriter.java:1001)IndexWrit
> er.java:983)Indexer.java:61)Indexer.java:93)TaskQueue.java:115
> )Thread.java:619)
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 19:21:29 2008
Return-Path: <java-user-return-36503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39853 invoked from network); 6 Oct 2008 19:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 19:21:29 -0000
Received: (qmail 56318 invoked by uid 500); 6 Oct 2008 19:21:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56291 invoked by uid 500); 6 Oct 2008 19:21:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56280 invoked by uid 99); 6 Oct 2008 19:21:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 12:21:20 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.37.66] (HELO web53505.mail.re2.yahoo.com) (206.190.37.66)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Oct 2008 19:20:17 +0000
Received: (qmail 30037 invoked by uid 60001); 6 Oct 2008 19:20:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=mjW57zIEexkT92XllwBDbj2zOzGK6QxBmahon9J0jArv0KfFQau7PSclxn6ceqqpyH93P/etTkfQ4fftbWpUis/cUz8YQ+VjEZP9iG4ebv/f8iMyXPREPmJECva8BMZ/51i7IntksnGmNMTpk/ejjq5hVVdZf1Z1b0veEuF2aIk=;
X-YMail-OSG: TMfuM0gVM1nfbLr5hYZRp33tNO8QbtORR_c1K1T5clb4UTpHvZhx9kCtEhryRNcLxi7CZD4nVsi0Hzeh3oYFUUDo8iJNPPYhPTfCqO3dlOeRUp3LVH37roB_pkmFkCFH0GcHMEbh3HBoIe2oK_BiV7wqCZac_fVqPMzDv7j3U4at_onG2g--
Received: from [67.161.151.103] by web53505.mail.re2.yahoo.com via HTTP; Mon, 06 Oct 2008 12:20:51 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 6 Oct 2008 12:20:51 -0700 (PDT)
From: Edwin Smith <edwin.smith@yahoo.com>
Subject: Re: ArrayIndexOutOfBoundsException in FastCharStream.readChar
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1109029740-1223320851=:29806"
Message-ID: <686529.29806.qm@web53505.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1109029740-1223320851=:29806
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

No particular reason. It is just what I had loaded last and hadn't upgraded=
. It sounds like there might be good reason to do that now.=0A=A0=0AThanks =
for the tip.=0A=A0=0AEd=0A=0A=0A=0A----- Original Message ----=0AFrom: Stev=
en A Rowe <sarowe@syr.edu>=0ATo: java-user@lucene.apache.org=0ASent: Monday=
, October 6, 2008 3:18:20 PM=0ASubject: RE: ArrayIndexOutOfBoundsException =
in FastCharStream.readChar=0A=0AHi Edwin,=0A=0AI don't know specifically wh=
at's causing the exception you're seeing, but note that in Lucene 2.3.0+, t=
he JavaCC-generated version of StandardTokenizer (where your exception orig=
inates) has been replaced with a JFlex-generated version - see <http://issu=
es.apache.org/jira/browse/LUCENE-966>.=0A=0AFYI, indexing speed was much im=
proved in 2.3.0 over previous versions -- up to 10 times faster, according =
to reports on this list -- is there any particular reason you aren't using =
2.3.2 (the most recent release)?=0A=0ASteve=0A=0AOn 10/06/2008 at 2:32 PM, =
Edwin Smith wrote:=0A> Oh, and in case it matters, I'm using Lucene 2.2.0.=
=0A> =0A> Ed=0A> =0A> =0A> =0A> ----- Original Message ----=0A> =0A> =0A> I=
 am stumped and have not seen any other reference to this=0A> problem. I am=
 getting the following exception on everything I=0A> try to index. Does any=
one know what my problem might be?=0A> =0A> Thanks,=0A> =0A> Ed=0A> =0A> ja=
va.lang.ArrayIndexOutOfBoundsException at=0A> org.apache.lucene.analysis.st=
andard.FastCharStream.readChar( at=0A> org.apache.lucene.analysis.standard.=
FastCharStream.BeginToken( at=0A> org.apache.lucene.analysis.standard.Stand=
ardTokenizerTokenMana=0A> ger.getNextToken( at=0A> org.apache.lucene.analys=
is.standard.StandardTokenizer.jj_ntk( at=0A> org.apache.lucene.analysis.sta=
ndard.StandardTokenizer.next( at=0A> org.apache.lucene.analysis.standard.St=
andardFilter.next( at=0A> org.apache.lucene.analysis.LowerCaseFilter.next( =
at=0A> org.apache.lucene.analysis.StopFilter.next( at=0A> org.apache.lucene=
.index.DocumentWriter.invertDocument( at=0A> org.apache.lucene.index.Docume=
ntWriter.addDocument( at=0A> org.apache.lucene.index.IndexWriter.buildSingl=
eDocSegment( at=0A> org.apache.lucene.index.IndexWriter.addDocument( at=0A>=
 org.apache.lucene.index.IndexWriter.addDocument( at=0A> com.affinovate.v4.=
server.search.Indexer.index( at=0A> com.affinovate.v4.server.search.Indexer=
.perform( at=0A> com.affinovate.v4.server.db.TaskQueue.run( at java.lang.Th=
read.run(:=0A> 2048FastCharStream.java:46)FastCharStream.java:79)StandardTo=
ke=0A> nizerTokenManager.java:1180)StandardTokenizer.java:158)Standar=0A> d=
Tokenizer.java:36)StandardFilter.java:41)LowerCaseFilter.java=0A> > 33)Stop=
Filter.java:107)DocumentWriter.java:219)DocumentWriter=0A> .java:95)IndexWr=
iter.java:1013)IndexWriter.java:1001)IndexWrit=0A> er.java:983)Indexer.java=
:61)Indexer.java:93)TaskQueue.java:115=0A> )Thread.java:619)=0A>=0A=0A=0A=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor ad=
ditional commands, e-mail: java-user-help@lucene.apache.org
--0-1109029740-1223320851=:29806--

From java-user-return-36504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 19:55:05 2008
Return-Path: <java-user-return-36504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57904 invoked from network); 6 Oct 2008 19:55:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 19:55:04 -0000
Received: (qmail 30421 invoked by uid 500); 6 Oct 2008 19:54:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30395 invoked by uid 500); 6 Oct 2008 19:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30383 invoked by uid 99); 6 Oct 2008 19:54:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 12:54:56 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_OPENWHOIS,DNS_FROM_SECURITYSAGE,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 19:53:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kmw9k-0001Sq-Sx
	for java-user@lucene.apache.org; Mon, 06 Oct 2008 12:54:12 -0700
Message-ID: <19845142.post@talk.nabble.com>
Date: Mon, 6 Oct 2008 12:54:12 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Field names with : in it.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


It appears if a search field value entered contains a ':' causes some issues
since if I have a field named

a.b.c and the user enters a value of foo the constructed query through the
api generates something like
+a.b.c:foo

If they enter in a value of foo:bar

I get +foo:bar where foo is substituted for the correct fieldname.

What is the best way to deal with this?

Thanks.
-- 
View this message in context: http://www.nabble.com/Field-names-with-%3A-in-it.-tp19845142p19845142.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 20:30:25 2008
Return-Path: <java-user-return-36505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76438 invoked from network); 6 Oct 2008 20:30:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 20:30:23 -0000
Received: (qmail 95265 invoked by uid 500); 6 Oct 2008 20:30:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95227 invoked by uid 500); 6 Oct 2008 20:30:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95215 invoked by uid 99); 6 Oct 2008 20:30:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 13:30:14 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 20:29:10 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2873621rvb.5
        for <java-user@lucene.apache.org>; Mon, 06 Oct 2008 13:29:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=bQpL7CkZk1FvcATl1kKKGoir9Iryb/R7+wnYa0O7Cq0=;
        b=NwYG+NBR597+JCYgXqc3wOoTiM6oVq3K9h7FIS+iMtUoEXxgB3rDjVWw6pDRvHr9/x
         MgkL1s88KJNmJYSbYUu4aEADdytguPzzq6so04sEsVFBlyC9R8Q0HQTm10bYhizaCXd9
         NBhg/VqUWLXyl0TSOFpSmnD7eu+Cq7MTsBAOE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lJ8cmxvfSQ9fVcy9Hub1a3Nbmg7h9bNuzfA/bhmO/U+J/OK7Uu01QMJA2n2EjGAFub
         2SRyxXDjUtwMOV1Lyf+Tr3bUqgNllNFRgjvCAny+xcJx9/hDQFZ1TpfoEEWE399Sgq6s
         pkm3SROxdI3BWKmUZi3mDB4+lCaBR/mOsO9zQ=
Received: by 10.140.192.9 with SMTP id p9mr3345933rvf.193.1223324976538;
        Mon, 06 Oct 2008 13:29:36 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Mon, 6 Oct 2008 13:29:36 -0700 (PDT)
Message-ID: <359a92830810061329o4a8f3f7frf4a7f198dd11a1a8@mail.gmail.com>
Date: Mon, 6 Oct 2008 16:29:36 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field names with : in it.
In-Reply-To: <19845142.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36237_21297422.1223324976534"
References: <19845142.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36237_21297422.1223324976534
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You have to escape it in a query. And did you mean to title your
post as field *names*? because I can't imagine how that would
work. Field *values*, sure....

See http://lucene.apache.org/java/docs/queryparsersyntax.html,
search for "escape"

On Mon, Oct 6, 2008 at 3:54 PM, samd <sdoyle_2@yahoo.com> wrote:

>
> It appears if a search field value entered contains a ':' causes some
> issues
> since if I have a field named
>
> a.b.c and the user enters a value of foo the constructed query through the
> api generates something like
> +a.b.c:foo
>
> If they enter in a value of foo:bar
>
> I get +foo:bar where foo is substituted for the correct fieldname.
>
> What is the best way to deal with this?
>
> Thanks.
> --
> View this message in context:
> http://www.nabble.com/Field-names-with-%3A-in-it.-tp19845142p19845142.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36237_21297422.1223324976534--

From java-user-return-36506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 21:23:07 2008
Return-Path: <java-user-return-36506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98946 invoked from network); 6 Oct 2008 21:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 21:23:07 -0000
Received: (qmail 73489 invoked by uid 500); 6 Oct 2008 21:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73179 invoked by uid 500); 6 Oct 2008 21:22:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73165 invoked by uid 99); 6 Oct 2008 21:22:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 14:22:58 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_OPENWHOIS,DNS_FROM_SECURITYSAGE,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 21:21:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KmxXC-0005Zb-Ak
	for java-user@lucene.apache.org; Mon, 06 Oct 2008 14:22:30 -0700
Message-ID: <19846712.post@talk.nabble.com>
Date: Mon, 6 Oct 2008 14:22:30 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Field names with : in it.
In-Reply-To: <359a92830810061329o4a8f3f7frf4a7f198dd11a1a8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <19845142.post@talk.nabble.com> <359a92830810061329o4a8f3f7frf4a7f198dd11a1a8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello and thanks for the response.

Yes the title should have been values. I'll take at look at the link you
provided.

Thanks again!

Erick Erickson wrote:
> 
> You have to escape it in a query. And did you mean to title your
> post as field *names*? because I can't imagine how that would
> work. Field *values*, sure....
> 
> See http://lucene.apache.org/java/docs/queryparsersyntax.html,
> search for "escape"
> 
> On Mon, Oct 6, 2008 at 3:54 PM, samd <sdoyle_2@yahoo.com> wrote:
> 
>>
>> It appears if a search field value entered contains a ':' causes some
>> issues
>> since if I have a field named
>>
>> a.b.c and the user enters a value of foo the constructed query through
>> the
>> api generates something like
>> +a.b.c:foo
>>
>> If they enter in a value of foo:bar
>>
>> I get +foo:bar where foo is substituted for the correct fieldname.
>>
>> What is the best way to deal with this?
>>
>> Thanks.
>> --
>> View this message in context:
>> http://www.nabble.com/Field-names-with-%3A-in-it.-tp19845142p19845142.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Field-names-with-%3A-in-it.-tp19845142p19846712.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 22:10:42 2008
Return-Path: <java-user-return-36507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32985 invoked from network); 6 Oct 2008 22:10:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 22:10:42 -0000
Received: (qmail 48782 invoked by uid 500); 6 Oct 2008 22:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48749 invoked by uid 500); 6 Oct 2008 22:10:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48738 invoked by uid 99); 6 Oct 2008 22:10:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 15:10:32 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.70] (HELO elasmtp-banded.atl.sa.earthlink.net) (209.86.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 22:09:27 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=I/E3lGrBcQDvuEMwtk6iJ4T4LjHHOBomO7v4AVwd98yYjiuf875Tn2wYeslXWMjk;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.48] (helo=elwamui-rustique.atl.sa.earthlink.net)
	by elasmtp-banded.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1KmyH9-0001e0-HW
	for java-user@lucene.apache.org; Mon, 06 Oct 2008 18:09:59 -0400
Received: from 71.247.169.86 by webmail.earthlink.net with HTTP; Mon, 6 Oct 2008 18:09:59 -0400
Message-ID: <18579896.1223330999510.JavaMail.root@elwamui-rustique.atl.sa.earthlink.net>
Date: Mon, 6 Oct 2008 18:09:59 -0400 (GMT-04:00)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: bunch of newbie queries, PS
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c260942ddc48411ad68de378fb4637733c6ee350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.48
X-Virus-Checked: Checked by ClamAV on apache.org

Hoss -- 

Thanks for reply -- 

>Paul: your subject linke seems to indicate that your email is a followup 
>to previous questions, however i don't seem to have ever seen those 
>questions posted on the list, and i can't seem to find any previous emails 
>from you in any of hte online archives -- so if that is the case you may 
>want to resend your questions.
>
Oh, probably more user-error on my part -- I tried to post "Bunch of newbie queries", and after getting some kind of "that failed" reply, went through several hoops to register, at the end of which I somehow assumed "OK, now my message will get posted." (Sort of like those web-logins, where after you register, then you are redirected back to the page to which you were originally headed.) 

Here's the first of those "newbie queries", not yet answered (the second is effectively answered, and the third was basically a plea for some version of a "how to do really really really simple things with Lucene" guide, since the one at the website is (cough) just way beyond where I am, so far. Once I have learned a little more, I'll re-post a more informed version of that. 

<<
the "anonymous" SVN (http://svn.apache.org/repos/asf/lucene/java/trunk/)
does not work for me (I am using Eclipse 3.3, and have the subversion plug-in, v.
1.2.4, and have successfully checked out code using SVN from other repositories).
Apparently here I need a user-id and pwd -- what is that or where do I get one? 
>>

(Since I've managed to download the source-jars, I guess I don't really need to know how to do this, but would still like to know.) 

==================================

>: ... -- every link that purports 
>: to take me to an old version takes me to 
>: http://apache.oc1.mirrors.redwire.net/lucene/java/ -- it would help a 
>: lot (and would be easy to do, no?) if all the links to old stuff went to 
>: http://apache.oc1.mirrors.redwire.net/lucene/java/archive/ instead. (Not 
>: necessarily that particular mirror, of course.)
>
>I'm not really sure if i'm understanding what your suggestion is -- what 
>links are you finding that "purports to take me to an old version" .. can 
>you give us specific examples? (ie: "On http://lucene.apache.org/foo.html 
>there is a link with the text "Get 1.9" that really links to ...")
>
Allowing for the explanation below ("preserving history"), it seems like there may not be a way to do what I had hoped for. Here's an example: I poke around, looking for 2.2; I get to here: 
http://lucene.apache.org/java/2_2_0/releases.html

OK, cool, now I click on ==>> Both binary and source releases are available for download from the Apache Mirrors

And find myself on the "mirror-selection" page; ok, fine, I just take the default, and ... 

I get to the *current* download page: 
http://www.ip97.com/apache.org/lucene/java/
(at the chosen mirror). 

So, my expectation was that "a link called 'download' on a page clearly labeled 'version nnn' will take me to download version nnn (not version 'current')".  

Maybe the closest one could get is to rephrase (from now on) the sentence/link above, to read something like this: 

==>> Both binary and source releases, for the <bold>current</bold> version, are available for download from the Apache Mirrors

(That way, the sentence-and-link will always be correct.) 

>Part of the confusion may be that many pages, which are archived copies of 
>hte documentation included in each release, have generic links ....
>We do not update these links as new versions come out (and old versions 
>are archived) becuase:
>  1) these docs are archives of hte documentation included in teh releas, 
>we don't revise history.
>  2) we want to encourage visibility and downloading of the most current 
>release, since it's the one with the most current bug fixes.  ....
>

===================== 

>can figure out if that's the situation we're talking about.  I'm also open 
>to suggestions for better ways to make the "archive" directory more 
>obvious for people who really are looking for historical releases 
>(although i'm at a loss to think of many common cases for wanting to find 
>old releases)
>
My use-case is pretty simple, and I'd be surprised if it were unique/rare: I am working with someone else's code, developed on 2.2, and they are not available to migrate to 2.3; so if I want to have their code run correctly, and to be able to debug into Lucene, I need to get 2.2-source-and-binary. (And no, having me migrate their code to 2.3 is not really an option -- I have no cycles, or Lucene-expertise, to do that.) So I really truly need an old version. 

Anyway, I have it now. 

thanks,
Paul 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 06 22:56:47 2008
Return-Path: <java-user-return-36508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54387 invoked from network); 6 Oct 2008 22:56:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Oct 2008 22:56:47 -0000
Received: (qmail 5636 invoked by uid 500); 6 Oct 2008 22:56:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5607 invoked by uid 500); 6 Oct 2008 22:56:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5596 invoked by uid 99); 6 Oct 2008 22:56:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 15:56:38 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.37.70] (HELO web53509.mail.re2.yahoo.com) (206.190.37.70)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Oct 2008 22:55:35 +0000
Received: (qmail 58845 invoked by uid 60001); 6 Oct 2008 22:56:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=j1LhsSbVY4wsz8aoJAeHgyVYS1ju0igFeKjxNF6TTQgoOBAeRg10DxNnO/VQP1HAMWIYZqAcp9esyf8/+DPLDwHHhaf4EQFhG+f8nSayrgfGuk1jBJyEJjXxtrk9hnGZeJNC1CBdlgKVrP8SM/g/xJchUKDmrMPxiGFb64/Yz70=;
X-YMail-OSG: EOdPiDsVM1kiTODa_ASRmFpVXlSCZqKJa19vgrowoQMEla_AY33tb6XSNYNpxR9A.Rg6qEe712rYEAZdMtHt_hpY9H7TqJvTU9n_oZXdUvVHN8aNbGW33LL_PsSfPkVfJJ_5rc1Ldr8je7t9PfVmmqiebNAbKG.CQrP3jT32r4..3AGFbg--
Received: from [67.161.151.103] by web53509.mail.re2.yahoo.com via HTTP; Mon, 06 Oct 2008 15:56:08 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 6 Oct 2008 15:56:08 -0700 (PDT)
From: Edwin Smith <edwin.smith@yahoo.com>
Subject: Re: ArrayIndexOutOfBoundsException in FastCharStream.readChar
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1066692429-1223333768=:56998"
Message-ID: <322047.56998.qm@web53509.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1066692429-1223333768=:56998
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

I upgraded to the latest, 3.3.2 and had the same problem, even though it wa=
s clearly a different lexer reading the text. =0A=A0=0AI did find some prob=
lems with the reader I was using, and it now reads some files that it didn'=
t before, so it may still be some reader problem I haven't identified, but =
the text coming in from it looks correct to me, so I don't know.=0A=A0=0AVe=
ry frustrating.=0A=A0=0AEd=0A=0A=0A=0A----- Original Message ----=0AFrom: E=
dwin Smith <edwin.smith@yahoo.com>=0ATo: java-user@lucene.apache.org=0ASent=
: Monday, October 6, 2008 3:20:51 PM=0ASubject: Re: ArrayIndexOutOfBoundsEx=
ception in FastCharStream.readChar=0A=0ANo particular reason. It is just wh=
at I had loaded last and hadn't upgraded. It sounds like there might be goo=
d reason to do that now.=0A=A0=0AThanks for the tip.=0A=A0=0AEd=0A=0A=0A=0A=
----- Original Message ----=0AFrom: Steven A Rowe <sarowe@syr.edu>=0ATo: ja=
va-user@lucene.apache.org=0ASent: Monday, October 6, 2008 3:18:20 PM=0ASubj=
ect: RE: ArrayIndexOutOfBoundsException in FastCharStream.readChar=0A=0AHi =
Edwin,=0A=0AI don't know specifically what's causing the exception you're s=
eeing, but note that in Lucene 2.3.0+, the JavaCC-generated version of Stan=
dardTokenizer (where your exception originates) has been replaced with a JF=
lex-generated version - see <http://issues.apache.org/jira/browse/LUCENE-96=
6>.=0A=0AFYI, indexing speed was much improved in 2.3.0 over previous versi=
ons -- up to 10 times faster, according to reports on this list -- is there=
 any particular reason you aren't using 2.3.2 (the most recent release)?=0A=
=0ASteve=0A=0AOn 10/06/2008 at 2:32 PM, Edwin Smith wrote:=0A> Oh, and in c=
ase it matters, I'm using Lucene 2.2.0.=0A> =0A> Ed=0A> =0A> =0A> =0A> ----=
- Original Message ----=0A> =0A> =0A> I am stumped and have not seen any ot=
her reference to this=0A> problem. I am getting the following exception on =
everything I=0A> try to index. Does anyone know what my problem might be?=
=0A> =0A> Thanks,=0A> =0A> Ed=0A> =0A> java.lang.ArrayIndexOutOfBoundsExcep=
tion at=0A> org.apache.lucene.analysis.standard.FastCharStream.readChar( at=
=0A> org.apache.lucene.analysis.standard.FastCharStream.BeginToken( at=0A> =
org.apache.lucene.analysis.standard.StandardTokenizerTokenMana=0A> ger.getN=
extToken( at=0A> org.apache.lucene.analysis.standard.StandardTokenizer.jj_n=
tk( at=0A> org.apache.lucene.analysis.standard.StandardTokenizer.next( at=
=0A> org.apache.lucene.analysis.standard.StandardFilter.next( at=0A> org.ap=
ache.lucene.analysis.LowerCaseFilter.next( at=0A> org.apache.lucene.analysi=
s.StopFilter.next( at=0A> org.apache.lucene.index.DocumentWriter.invertDocu=
ment( at=0A> org.apache.lucene.index.DocumentWriter.addDocument( at=0A> org=
.apache.lucene.index.IndexWriter.buildSingleDocSegment( at=0A> org.apache.l=
ucene.index.IndexWriter.addDocument( at=0A> org.apache.lucene.index.IndexWr=
iter.addDocument( at=0A> com.affinovate.v4.server.search.Indexer.index( at=
=0A> com.affinovate.v4.server.search.Indexer.perform( at=0A> com.affinovate=
.v4.server.db.TaskQueue.run( at java.lang.Thread.run(:=0A> 2048FastCharStre=
am.java:46)FastCharStream.java:79)StandardToke=0A> nizerTokenManager.java:1=
180)StandardTokenizer.java:158)Standar=0A> dTokenizer.java:36)StandardFilte=
r.java:41)LowerCaseFilter.java=0A> > 33)StopFilter.java:107)DocumentWriter.=
java:219)DocumentWriter=0A> .java:95)IndexWriter.java:1013)IndexWriter.java=
:1001)IndexWrit=0A> er.java:983)Indexer.java:61)Indexer.java:93)TaskQueue.j=
ava:115=0A> )Thread.java:619)=0A>=0A=0A=0A=0A=0A---------------------------=
------------------------------------------=0ATo unsubscribe, e-mail: java-u=
ser-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-u=
ser-help@lucene.apache.org
--0-1066692429-1223333768=:56998--

From java-user-return-36509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 02:40:28 2008
Return-Path: <java-user-return-36509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75344 invoked from network); 7 Oct 2008 02:40:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 02:40:28 -0000
Received: (qmail 5408 invoked by uid 500); 7 Oct 2008 02:40:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5361 invoked by uid 500); 7 Oct 2008 02:40:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5350 invoked by uid 99); 7 Oct 2008 02:40:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 19:40:20 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 02:39:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id EAA54292C07
	for <java-user@lucene.apache.org>; Mon,  6 Oct 2008 20:39:48 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 09333-05 for <java-user@lucene.apache.org>;
	Mon, 6 Oct 2008 20:39:47 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id E4444292C01
	for <java-user@lucene.apache.org>; Mon,  6 Oct 2008 20:39:46 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
Subject: Re-tokenized fields disappear
Date: Mon, 6 Oct 2008 20:39:28 -0600
Message-ID: <0A1F9DBDCEAA4D9FB947381E1600F777@desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0032_01C927F3.A11C9170"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AckoJettKtpK7ooUSHix1L4OSgj3iw==
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0032_01C927F3.A11C9170
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Guys,

 

I have documents with multiple stored, tokenized fields of the same name but
different values in them such as:

 

"codesearch", "B01"

"codesearch", "B0105"

"codesearch", "Q01"

 

Etc;

 

I receive a new code to add to the document so I create a copy of the
document, call deleteFields("codesearch") on the copy, use the original to
add the original fields and the new one to the copy (horribly inefficient I
know but its inherited code and this needs fixed first) to build new fields.
I delete the old document from the index and add the new one.

 

The document was searchable before the rewrite on any of the codes but after
the rewrite none of the codes are searchable. Luke shows them as present in
the new document in the index. I reopen the reader and am using a
StandardAnalyzer on both the build and query.

 

Is there any thing else I have to do? What gives? Is there a problem with
multiple fields with the same name?

 

John G. 

 

 

 


------=_NextPart_000_0032_01C927F3.A11C9170--


From java-user-return-36510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 03:38:03 2008
Return-Path: <java-user-return-36510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95318 invoked from network); 7 Oct 2008 03:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 03:38:02 -0000
Received: (qmail 63559 invoked by uid 500); 7 Oct 2008 03:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63525 invoked by uid 500); 7 Oct 2008 03:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63514 invoked by uid 99); 7 Oct 2008 03:37:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 20:37:54 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alex.devine@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 03:36:52 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1798315wag.5
        for <java-user@lucene.apache.org>; Mon, 06 Oct 2008 20:37:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=5fL6uAKFWdq7EHTrfnDC+nQFAEqgbKgnjob8uf+cIQk=;
        b=WpeCY4ynJQSGWnq32/TL4UmrNe2oUbTSQrtcCWhBMihzIYycs/xI4cQ5g5I9KdxHhP
         Q2Lf6UmM34T32I0lvQa+v9HlhWX3nccJQGjuJiZ2YwHTpaWOzXoUaCCBD4Cz2BfkjN/e
         JY47MoQhmk/8W2Z7YMkIHOGH23Cj0QhNKqBac=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=QbH9+VGsPlzUwuGNMPa3XPwsMa97G5F2o2IgvpkxWFCEVmYLuvQwUH+yrid8uY2TSI
         9OMjw0jWbr+qwDZiP87jUO6ViELs8RYSf72IKXrHgvuFQcE97I/I7iUtCI9yOv5vywHm
         iPgQ0sqd325GA2m6RoaJZ6a9Q9Wf4oRGoSmng=
Received: by 10.114.145.18 with SMTP id s18mr6668727wad.26.1223350638479;
        Mon, 06 Oct 2008 20:37:18 -0700 (PDT)
Received: by 10.114.178.9 with HTTP; Mon, 6 Oct 2008 20:37:18 -0700 (PDT)
Message-ID: <8ba65dac0810062037h260a466fv1e7350fc403e8658@mail.gmail.com>
Date: Mon, 6 Oct 2008 22:37:18 -0500
From: "Alexander Devine" <alex.devine@gmail.com>
To: java-user@lucene.apache.org
Subject: advice on using Lucene for sorting based on payloads
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33442_30195208.1223350638476"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33442_30195208.1223350638476
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Luceners,

I have a particular sorting problem and I wanted some advice on what the
best implementation approach would be. We currently use Lucene as the
searching engine for our vacation rental website. Each vacation rental
property is represented by a single document in Lucene. We want to add a
feature that allows users to sort results by price. The problem is that each
rental property can potentially have a different price for each day. For
example, many rental properties charge more on weekends, or higher rates for
on-season vs. off-season. When a user performs a search, they can specify
the start and end dates of their desired travel, so we should be able to
calculate the total price for that time period for each property by adding
up the price for each day.

I was thinking of implementing this using payloads. Each document would have
a "priceByDate" field and there would be one term stored for each day for
the next 2 years (which is as far out as we support booking a property). The
payload associated with each term would be the price, and then when
searching I could use those payloads as basis for scoring the docs using a
BoostingTermQuery. For example, suppose someone was searching for travel
dates Dec 1 - Dec 5, I would create a query like so:

BooleanQuery query = new BooleanQuery();
query.add(new PriceBoostingTermQuery(new Term("priceByDate", "20081201")),
BooleanClause.Occur.MUST);
query.add(new PriceBoostingTermQuery(new Term("priceByDate", "20081202")),
BooleanClause.Occur.MUST);
query.add(new PriceBoostingTermQuery(new Term("priceByDate", "20081203")),
BooleanClause.Occur.MUST);
query.add(new PriceBoostingTermQuery(new Term("priceByDate", "20081204")),
BooleanClause.Occur.MUST);

PriceBoostingTermQuery would be a subclass of BoostingTermQuery that
overrides getSimilarity() to return a Similarity with a custom scorePayload
method that scores based on the price.

Does this approach sound reasonable? Can anyone think of a better approach?
One thing I don't understand is that the score needs to be the SUM (or the
average) of all the payloads - how does the BooleanQuery handle that? Also,
I need to get the calculated total price back to the caller, and I'm worried
that making priceByDate a stored field will have negative performance
implications. Perhaps there is some way I could just return the calculated
price as the score and then get it from the ScoreDoc?

Thanks for any and all help, and a huge thank you to all the Lucene devs for
a great product. The reason I'm trying to solve this problem in Lucene
instead of a database is because Lucene is so much faster for our queries
and I don't want to add a DB into the mix.

Alex

------=_Part_33442_30195208.1223350638476--

From java-user-return-36511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 03:40:06 2008
Return-Path: <java-user-return-36511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96018 invoked from network); 7 Oct 2008 03:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 03:40:06 -0000
Received: (qmail 66262 invoked by uid 500); 7 Oct 2008 03:39:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66235 invoked by uid 500); 7 Oct 2008 03:39:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66224 invoked by uid 99); 7 Oct 2008 03:39:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 20:39:58 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 03:38:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 6B0252C2C23
	for <java-user@lucene.apache.org>; Mon,  6 Oct 2008 21:38:59 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 19431-05 for <java-user@lucene.apache.org>;
	Mon, 6 Oct 2008 21:38:57 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 6ABCC292C07
	for <java-user@lucene.apache.org>; Mon,  6 Oct 2008 21:38:57 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
Subject: Re-tokenized fields disappear
Date: Mon, 6 Oct 2008 21:38:38 -0600
Message-ID: <7E1E602E5D534D51882AB6FF738B57FC@desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0000_01C927FB.E51F7B50"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AckoLi9MAa/ffxk5QxiKUxnjz0VP9A==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0000_01C927FB.E51F7B50
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

My previous question may be moot but as is it is still a problem. Here's a
little more info on my problem. The same named fields contain two pieces of
information, a code "B05" and a value "1" as follows. The value can be a
range such as 1 to 5 or 1 to 100.

 

"codesearch", "B05 1"

 

This field and other identically names but differently valued fields in the
same document are related to a specific person as identified by another
field say SSN. So, one person can have multiple code searches. Both of the
codesearch values are related to one another and must be searchable such as 

 

Return all persons with a codesearch value of B05 ranging from 1 to 3. 

 

How can I go about this? Do these codesearch fields need to be in a separate
index related by SSN? 

 

Thanks in advance.

 

John G.


------=_NextPart_000_0000_01C927FB.E51F7B50--


From java-user-return-36512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 03:52:19 2008
Return-Path: <java-user-return-36512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 844 invoked from network); 7 Oct 2008 03:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 03:52:17 -0000
Received: (qmail 82194 invoked by uid 500); 7 Oct 2008 03:52:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82156 invoked by uid 500); 7 Oct 2008 03:52:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82145 invoked by uid 99); 7 Oct 2008 03:52:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 20:52:08 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 03:51:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3046175rvb.5
        for <java-user@lucene.apache.org>; Mon, 06 Oct 2008 20:51:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=FyOt+SOp6nua+AjtkQYXc+QKIBz7njP0DloktjYRvfo=;
        b=k98BWayGdPSKuHqVOGpuAMTDVPt+EJm+doIODwdhRXVOl1yT5D2KW6gwdpjgrbV2Cs
         mZbRNyxhLFL5KPJJgWLR7cFNOuRchEEvcKnS8VDlrSH9dCquE8KmtW6JNuz8em6h3Lp0
         kW5P2AWqZRmkzsjb19YQhqlo3rbObUd1uzBEU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jeNutvEHbZOsmsVkS9RUEhHZ4J6bHDRYhkW++uihoRmNTbXJyaUyOpKzbs//lFqdVG
         t8ID7/cMaaTttW9jpmb94mhq3eSLXSW5eRvMNWhSLA8w1d5RgaKEIpPN2OiusfvqVyoE
         Cd7EQEPztgacKHzARdVOCohZgvz9nrDkIIDnM=
Received: by 10.141.171.1 with SMTP id y1mr3494585rvo.252.1223351498404;
        Mon, 06 Oct 2008 20:51:38 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Mon, 6 Oct 2008 20:51:38 -0700 (PDT)
Message-ID: <e9d73d4a0810062051p56ab7783lc36dc2e0f771f6c0@mail.gmail.com>
Date: Mon, 6 Oct 2008 23:51:38 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <e9d73d4a0810060926m50332ebey95a58dadb20912be@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49899_19865589.1223351498395"
References: <e9d73d4a0810052316q2484976dme4d6f356e6abcc0e@mail.gmail.com>
	 <895015.97467.qm@web76016.mail.sg1.yahoo.com>
	 <e9d73d4a0810060926m50332ebey95a58dadb20912be@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49899_19865589.1223351498395
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Seems like I found the culprit to the problem.  Because I am using
Terracotta to doing JVM clustering, it has overriden many classes of
java.util.*.  If I take out Terracotta from my configuration, then I don't
get the ClassCastException problem any longer.  I will talk to the
Terracotta folks to see if I have done something wrong on my end.

Thanks again for everyone's help!

On Mon, Oct 6, 2008 at 12:26 PM, Paul Chan <wayofdragon@gmail.com> wrote:

> Hi Edwin,
>
> Yes, I am running the TestVector against the same class path as my actual
> application.  My class path contains the Lucene JAR files.  This is very
> bizzard because my TestVector class extends Vector and it works, but for
> some reason SegmentInfos also extends Vector but it doesnt work.
> I did some more investigation and I found the following:
>
> final class SegmentInfos extends Vector
> {
>    public Object clone() {
>       Object a = super.clone(); --> code that I added to do some debug
>      SegmentInfos sis = (SegmentInfos) a;
>      ...
>    }
> }
>
> When super.clone() returns, it actually returns a Vector object instead of
> a SegmentInfos object against my expectation so that explains why the
> ClassCastException occurs.  On the other hand, when I run my TestVector
> class:
>
> final class TestVector extends Vector
> {
>    public Object clone() {
>       Object a = super.clone(); --> code that I added to do some debug
>       TestVector sis = (TestVector) a;
>      ...
>    }
> }
>
> When super.clone() returns, it returns TestVector!
>
> This tells me that there is something wrong with Lucene build file that
> causes this problem, but I have no idea what it could be.  In Lucene's
> common-build.xml, I changed the 1.4 properties to 1.6 propreties but still
> to no avail.
>
>
>
> On Mon, Oct 6, 2008 at 12:04 PM, Edwin Lee <edwin11_1979@yahoo.com.sg>wrote:
>
>> Hi Paul,
>>
>> When you say that your dummy TestVector class works, are you running it
>> using
>> the same classpaths that you used to run your actual application? Does it
>> contain the Lucene JAR files?
>>
>>
>>
>> Regards,
>> Edwin
>>
>>
>>
>> --- Paul Chan <wayofdragon@gmail.com> wrote:
>>
>> > I have tried to recompile Lucene 2.3.2 under my environment (SUN JDK
>> 1.6)
>> > and it still doesn't work.  I am beginning to think that maybe there is
>> > something wrong with lucene's build script.  My TestVector class's
>> clone()
>> > method works without a hitch, but SegmentInfos' clone() method doesnt
>> work
>> > at all.  I don't really know what to do at this moment.  Does anyone
>> have
>> > any insight?
>> >
>> > On Sun, Oct 5, 2008 at 10:45 PM, Paul Chan <wayofdragon@gmail.com>
>> wrote:
>> >
>> > > Thank you all for your input.  However, this is what I have discovered
>> so
>> > > far:
>> > >
>> > >    - I tried running the test that Edwin suggested and it failed for
>> me in
>> > >    my environment (Lucene 2.3.2, Windows XP, SUN JDK 1.5 or 1.6)
>> > >
>> > > e.g. SegmentInfos sis = new SegmentInfos();
>> > >       SegmentInfos sis2 = (SegmentInfos) sis.clone();
>> > >
>> > >    - Interestingly, I tried to create a dummy test class which mimics
>> > >    SegmentInfos as follows and it works!:
>> > >
>> > > public class TestVector extends Vector
>> > > {
>> > >    public TestVector clone()
>> > >    {
>> > >       TestVector cl = (TestVector)super.clone();
>> > >       return cl;
>> > >    }
>> > > }
>> > >
>> > >          TestVector vector = new TestVector();
>> > >          TestVector vClone = (TestVector)vector.clone();
>> > >
>> > >    - This tells me that perhaps there is something wrong with the
>> lucene
>> > >    package that I have downloaded (some sort of incompatibility?).  I
>> will
>> > try
>> > >    to recompile the lucene package in my own environment and see if I
>> can
>> > fix
>> > >    the problem.
>> > >
>> > >
>> > > On Sat, Oct 4, 2008 at 2:21 AM, Edwin Lee <edwin11_1979@yahoo.com.sg
>> >wrote:
>> > >
>> > >> i think, very likely, you have another copy of java.util.Vector
>> loaded,
>> > >> and
>> > >> this one tries to be too clever with its implementation of clone
>> > >> (instantiate a
>> > >> new Vector instance) instead of delegating to its super class
>> (Object).
>> > >>
>> > >>
>> > >>
>> > >> HTH,
>> > >> Edwin
>> > >>
>> > >>
>> > >>
>> > >> --- Chris Hostetter <hossman_lucene@fucit.org> wrote:
>> > >>
>> > >> >
>> > >> > :        SegmentInfos sis = (SegmentInfos) super.clone();
>> > >> >
>> > >> > : We see that it is trying to cast a Vector into SegmentInfos which
>> > >> explains
>> > >> > : the ClassCastException.  This is definitely a bug.
>> > >> >
>> > >> > I'm really not sure how you could be getting that
>> ClassCastException
>> > >> > unless there's a really horrific bug in the JRE you are using.
>> > >> >
>> > >> > You'll see this in just about every (non-trivial) use of
>> super.clone()
>> > >> ...
>> > >>
>> > >>
>> > >>
>> > >>       Yahoo! Toolbar is now powered with Search Assist.Download it
>> now!
>> > >> http://sg.toolbar.yahoo.com/
>> > >>
>> > >>
>> > >> ---------------------------------------------------------------------
>> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >>
>> > >>
>> > >
>> >
>>
>>
>>
>>       Get your preferred Email name!
>> Now you can @ymail.com and @rocketmail.com
>> http://mail.promotions.yahoo.com/newdomains/sg/
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_49899_19865589.1223351498395--

From java-user-return-36513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 04:34:46 2008
Return-Path: <java-user-return-36513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8680 invoked from network); 7 Oct 2008 04:34:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 04:34:46 -0000
Received: (qmail 7205 invoked by uid 500); 7 Oct 2008 04:34:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7168 invoked by uid 500); 7 Oct 2008 04:34:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7157 invoked by uid 99); 7 Oct 2008 04:34:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 21:34:38 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,DNS_FROM_SECURITYSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [119.160.244.249] (HELO n6c.bullet.tw1.yahoo.com) (119.160.244.249)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Oct 2008 04:33:32 +0000
Received: from [119.160.244.76] by n6.bullet.tw1.yahoo.com with NNFMP; 07 Oct 2008 04:34:06 -0000
Received: from [124.108.115.243] by t1.bullet.tw1.yahoo.com with NNFMP; 07 Oct 2008 04:34:06 -0000
Received: from [124.108.114.81] by t2.bullet.mail.sg1.yahoo.com with NNFMP; 07 Oct 2008 04:34:06 -0000
Received: from [127.0.0.1] by omp101.mail.sg1.yahoo.com with NNFMP; 07 Oct 2008 04:34:06 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 511684.6347.bm@omp101.mail.sg1.yahoo.com
Received: (qmail 66048 invoked by uid 60001); 7 Oct 2008 04:34:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.sg;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=O/Kx8ZPrUVWAEKKC2+6NmDyUNLzmrWdWpAG4mALVu5rfGZDNTEynVERtPNtc56nlrByuldmJQds6slLLpngy9N4IsUnBcKeb/wBMc18X4xyvcT/Tqcvb78SN8o43vIxrbCAsy8uXZYuEIVsH1c9I3h3Wx6pQq1VLCeXpm1go4mo=;
X-YMail-OSG: zuIpc7kVM1mcI7EHTOZ2VqOXp2SvhPeDvA8fkc9NDCaDHak8X4aL8tSW2v4jYMaw6M3tZBXetNoxF.VcrkyggzRonIfCC6Y9tOWAhWjBBToda3PT16Nv3RfqMXBWvM5UzRpRbrvjcC.HNPR_1HQiUVoC
Received: from [210.3.19.162] by web76015.mail.sg1.yahoo.com via HTTP; Tue, 07 Oct 2008 12:34:06 CST
Date: Tue, 7 Oct 2008 12:34:06 +0800 (CST)
From: Edwin Lee <edwin11_1979@yahoo.com.sg>
Subject: Re: ClassCastException when writing to index writer
To: java-user@lucene.apache.org
In-Reply-To: <e9d73d4a0810062051p56ab7783lc36dc2e0f771f6c0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <376769.63552.qm@web76015.mail.sg1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul,

now i'm curious to know how the overriden java.util.Vector implements the clone
method. Any chance of posting a snippet? ;)



Cheers,
Edwin



--- Paul Chan <wayofdragon@gmail.com> wrote:

> Seems like I found the culprit to the problem.  Because I am using
> Terracotta to doing JVM clustering, it has overriden many classes of
> java.util.*.  If I take out Terracotta from my configuration, then I don't
> get the ClassCastException problem any longer.  I will talk to the
> Terracotta folks to see if I have done something wrong on my end.
> 
> Thanks again for everyone's help!
> 
> On Mon, Oct 6, 2008 at 12:26 PM, Paul Chan <wayofdragon@gmail.com> wrote:
> 
> > Hi Edwin,
> >
> > Yes, I am running the TestVector against the same class path as my actual
> > application.  My class path contains the Lucene JAR files.  This is very
> > bizzard because my TestVector class extends Vector and it works, but for
> > some reason SegmentInfos also extends Vector but it doesnt work.
> > I did some more investigation and I found the following:
> >
> > final class SegmentInfos extends Vector
> > {
> >    public Object clone() {
> >       Object a = super.clone(); --> code that I added to do some debug
> >      SegmentInfos sis = (SegmentInfos) a;
> >      ...
> >    }
> > }
> >
> > When super.clone() returns, it actually returns a Vector object instead of
> > a SegmentInfos object against my expectation so that explains why the
> > ClassCastException occurs.  On the other hand, when I run my TestVector
> > class:
> >
> > final class TestVector extends Vector
> > {
> >    public Object clone() {
> >       Object a = super.clone(); --> code that I added to do some debug
> >       TestVector sis = (TestVector) a;
> >      ...
> >    }
> > }
> >
> > When super.clone() returns, it returns TestVector!
> >
> > This tells me that there is something wrong with Lucene build file that
> > causes this problem, but I have no idea what it could be.  In Lucene's
> > common-build.xml, I changed the 1.4 properties to 1.6 propreties but still
> > to no avail.
> >
> >
> >
> > On Mon, Oct 6, 2008 at 12:04 PM, Edwin Lee
> <edwin11_1979@yahoo.com.sg>wrote:
> >
> >> Hi Paul,
> >>
> >> When you say that your dummy TestVector class works, are you running it
> >> using
> >> the same classpaths that you used to run your actual application? Does it
> >> contain the Lucene JAR files?
> >>
> >>
> >>
> >> Regards,
> >> Edwin
> >>
> >>
> >>
> >> --- Paul Chan <wayofdragon@gmail.com> wrote:
> >>
> >> > I have tried to recompile Lucene 2.3.2 under my environment (SUN JDK
> >> 1.6)
> >> > and it still doesn't work.  I am beginning to think that maybe there is
> >> > something wrong with lucene's build script.  My TestVector class's
> >> clone()
> >> > method works without a hitch, but SegmentInfos' clone() method doesnt
> >> work
> >> > at all.  I don't really know what to do at this moment.  Does anyone
> >> have
> >> > any insight?
> >> >
> >> > On Sun, Oct 5, 2008 at 10:45 PM, Paul Chan <wayofdragon@gmail.com>
> >> wrote:
> >> >
> >> > > Thank you all for your input.  However, this is what I have discovered
> >> so
> >> > > far:
> >> > >
> >> > >    - I tried running the test that Edwin suggested and it failed for
> >> me in
> >> > >    my environment (Lucene 2.3.2, Windows XP, SUN JDK 1.5 or 1.6)
> >> > >
> >> > > e.g. SegmentInfos sis = new SegmentInfos();
> >> > >       SegmentInfos sis2 = (SegmentInfos) sis.clone();
> >> > >
> >> > >    - Interestingly, I tried to create a dummy test class which mimics
> >> > >    SegmentInfos as follows and it works!:
> >> > >
> >> > > public class TestVector extends Vector
> >> > > {
> >> > >    public TestVector clone()
> >> > >    {
> >> > >       TestVector cl = (TestVector)super.clone();
> >> > >       return cl;
> >> > >    }
> >> > > }
> >> > >
> >> > >          TestVector vector = new TestVector();
> >> > >          TestVector vClone = (TestVector)vector.clone();
> >> > >
> >> > >    - This tells me that perhaps there is something wrong with the
> >> lucene
> >> > >    package that I have downloaded (some sort of incompatibility?).  I
> >> will
> >> > try
> >> > >    to recompile the lucene package in my own environment and see if I
> >> can
> >> > fix
> >> > >    the problem.
> >> > >
> >> > >
> >> > > On Sat, Oct 4, 2008 at 2:21 AM, Edwin Lee <edwin11_1979@yahoo.com.sg
> >> >wrote:
> >> > >
> >> > >> i think, very likely, you have another copy of java.util.Vector
> >> loaded,
> >> > >> and
> >> > >> this one tries to be too clever with its implementation of clone
> >> > >> (instantiate a
> >> > >> new Vector instance) instead of delegating to its super class
> >> (Object).
> >> > >>
> >> > >>
> >> > >>
> >> > >> HTH,
> >> > >> Edwin
> >> > >>
> >> > >>
> >> > >>
> >> > >> --- Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >> > >>
> >> > >> >
> >> > >> > :        SegmentInfos sis = (SegmentInfos) super.clone();
> >> > >> >
> >> > >> > : We see that it is trying to cast a Vector into SegmentInfos which
> >> > >> explains
> >> > >> > : the ClassCastException.  This is definitely a bug.
> >> > >> >
> >> > >> > I'm really not sure how you could be getting that
> >> ClassCastException
> >> > >> > unless there's a really horrific bug in the JRE you are using.
> >> > >> >
> >> > >> > You'll see this in just about every (non-trivial) use of
> >> super.clone()
> >> > >> ...
> >> > >>
> >> > >>
> >> > >>
> >> > >>       Yahoo! Toolbar is now powered with Search Assist.Download it
> >> now!
> >> > >> http://sg.toolbar.yahoo.com/
> >> > >>
> >> > >>
> >> > >> ---------------------------------------------------------------------
> >> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > >>
> >> > >>
> >> > >
> >> >
> >>
> >>
> >>
> >>       Get your preferred Email name!
> >> Now you can @ymail.com and @rocketmail.com
> >> http://mail.promotions.yahoo.com/newdomains/sg/
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> 



      New Email names for you! 
Get the Email name you&#39;ve always wanted on the new @ymail and @rocketmail. 
Hurry before someone else does!
http://mail.promotions.yahoo.com/newdomains/sg/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 05:35:59 2008
Return-Path: <java-user-return-36514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35992 invoked from network); 7 Oct 2008 05:35:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 05:35:58 -0000
Received: (qmail 46007 invoked by uid 500); 7 Oct 2008 05:35:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45975 invoked by uid 500); 7 Oct 2008 05:35:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45964 invoked by uid 99); 7 Oct 2008 05:35:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Oct 2008 22:35:50 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wayofdragon@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 05:34:45 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3086718rvb.5
        for <java-user@lucene.apache.org>; Mon, 06 Oct 2008 22:35:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=0bBTb9bgOKz8ErctMdS3u9rgEz7oPksyo4cR4vj+vYM=;
        b=xuphtDOfyAFJAb1k5VSudoIH8w5s5k45Mmj0pEbSd3giPX75bHLqRR2RAOHuMRYO3M
         qqOEXbzoYYrK+Qn82i4UO8ZHJEl0aGhDQjkK295vQ11H4iE2pHMhKDy+qD6R5pSKl/VP
         pOyUsCkyxG9JlU1FxLBr2AR43KyWyefS7Tqb4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pmuZBZ8Js76NmqcEWWk4/sxkQFyUSlPDnwE9brVBNXTmkNi8HbQPxJXPwO36Uqnvnd
         QMNQ7JpVCW9YfwYb2ID1vZQgPxk4ME5FWgdXe4e3toZrYUEesZvqO9gG5dgdCjjRBqrb
         QOG0Re+P40zIIqM53yCJBQtd1gA2HizzLV+fM=
Received: by 10.141.115.6 with SMTP id s6mr3555395rvm.224.1223357721158;
        Mon, 06 Oct 2008 22:35:21 -0700 (PDT)
Received: by 10.141.197.13 with HTTP; Mon, 6 Oct 2008 22:35:21 -0700 (PDT)
Message-ID: <e9d73d4a0810062235r226b6b3ekd2795216d613d5d4@mail.gmail.com>
Date: Tue, 7 Oct 2008 01:35:21 -0400
From: "Paul Chan" <wayofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ClassCastException when writing to index writer
In-Reply-To: <376769.63552.qm@web76015.mail.sg1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50885_30248119.1223357721164"
References: <e9d73d4a0810062051p56ab7783lc36dc2e0f771f6c0@mail.gmail.com>
	 <376769.63552.qm@web76015.mail.sg1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50885_30248119.1223357721164
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Edwin,

Would love to pose the code, but I don't have the Terracotta source code at
the moment as I only downloaded the binaries.  But Terracotta is an open
source project so you can checkout their code base (
http://www.terracotta.org/web/display/orgsite/DownloadCatalog).  I have no
idea how they override Vector either :p

Cheers,

Paul

On Tue, Oct 7, 2008 at 12:34 AM, Edwin Lee <edwin11_1979@yahoo.com.sg>wrote:

> Hi Paul,
>
> now i'm curious to know how the overriden java.util.Vector implements the
> clone
> method. Any chance of posting a snippet? ;)
>
>
>
> Cheers,
> Edwin
>
>
>
> --- Paul Chan <wayofdragon@gmail.com> wrote:
>
> > Seems like I found the culprit to the problem.  Because I am using
> > Terracotta to doing JVM clustering, it has overriden many classes of
> > java.util.*.  If I take out Terracotta from my configuration, then I
> don't
> > get the ClassCastException problem any longer.  I will talk to the
> > Terracotta folks to see if I have done something wrong on my end.
> >
> > Thanks again for everyone's help!
> >
> > On Mon, Oct 6, 2008 at 12:26 PM, Paul Chan <wayofdragon@gmail.com>
> wrote:
> >
> > > Hi Edwin,
> > >
> > > Yes, I am running the TestVector against the same class path as my
> actual
> > > application.  My class path contains the Lucene JAR files.  This is
> very
> > > bizzard because my TestVector class extends Vector and it works, but
> for
> > > some reason SegmentInfos also extends Vector but it doesnt work.
> > > I did some more investigation and I found the following:
> > >
> > > final class SegmentInfos extends Vector
> > > {
> > >    public Object clone() {
> > >       Object a = super.clone(); --> code that I added to do some debug
> > >      SegmentInfos sis = (SegmentInfos) a;
> > >      ...
> > >    }
> > > }
> > >
> > > When super.clone() returns, it actually returns a Vector object instead
> of
> > > a SegmentInfos object against my expectation so that explains why the
> > > ClassCastException occurs.  On the other hand, when I run my TestVector
> > > class:
> > >
> > > final class TestVector extends Vector
> > > {
> > >    public Object clone() {
> > >       Object a = super.clone(); --> code that I added to do some debug
> > >       TestVector sis = (TestVector) a;
> > >      ...
> > >    }
> > > }
> > >
> > > When super.clone() returns, it returns TestVector!
> > >
> > > This tells me that there is something wrong with Lucene build file that
> > > causes this problem, but I have no idea what it could be.  In Lucene's
> > > common-build.xml, I changed the 1.4 properties to 1.6 propreties but
> still
> > > to no avail.
> > >
> > >
> > >
> > > On Mon, Oct 6, 2008 at 12:04 PM, Edwin Lee
> > <edwin11_1979@yahoo.com.sg>wrote:
> > >
> > >> Hi Paul,
> > >>
> > >> When you say that your dummy TestVector class works, are you running
> it
> > >> using
> > >> the same classpaths that you used to run your actual application? Does
> it
> > >> contain the Lucene JAR files?
> > >>
> > >>
> > >>
> > >> Regards,
> > >> Edwin
> > >>
> > >>
> > >>
> > >> --- Paul Chan <wayofdragon@gmail.com> wrote:
> > >>
> > >> > I have tried to recompile Lucene 2.3.2 under my environment (SUN JDK
> > >> 1.6)
> > >> > and it still doesn't work.  I am beginning to think that maybe there
> is
> > >> > something wrong with lucene's build script.  My TestVector class's
> > >> clone()
> > >> > method works without a hitch, but SegmentInfos' clone() method
> doesnt
> > >> work
> > >> > at all.  I don't really know what to do at this moment.  Does anyone
> > >> have
> > >> > any insight?
> > >> >
> > >> > On Sun, Oct 5, 2008 at 10:45 PM, Paul Chan <wayofdragon@gmail.com>
> > >> wrote:
> > >> >
> > >> > > Thank you all for your input.  However, this is what I have
> discovered
> > >> so
> > >> > > far:
> > >> > >
> > >> > >    - I tried running the test that Edwin suggested and it failed
> for
> > >> me in
> > >> > >    my environment (Lucene 2.3.2, Windows XP, SUN JDK 1.5 or 1.6)
> > >> > >
> > >> > > e.g. SegmentInfos sis = new SegmentInfos();
> > >> > >       SegmentInfos sis2 = (SegmentInfos) sis.clone();
> > >> > >
> > >> > >    - Interestingly, I tried to create a dummy test class which
> mimics
> > >> > >    SegmentInfos as follows and it works!:
> > >> > >
> > >> > > public class TestVector extends Vector
> > >> > > {
> > >> > >    public TestVector clone()
> > >> > >    {
> > >> > >       TestVector cl = (TestVector)super.clone();
> > >> > >       return cl;
> > >> > >    }
> > >> > > }
> > >> > >
> > >> > >          TestVector vector = new TestVector();
> > >> > >          TestVector vClone = (TestVector)vector.clone();
> > >> > >
> > >> > >    - This tells me that perhaps there is something wrong with the
> > >> lucene
> > >> > >    package that I have downloaded (some sort of incompatibility?).
>  I
> > >> will
> > >> > try
> > >> > >    to recompile the lucene package in my own environment and see
> if I
> > >> can
> > >> > fix
> > >> > >    the problem.
> > >> > >
> > >> > >
> > >> > > On Sat, Oct 4, 2008 at 2:21 AM, Edwin Lee <
> edwin11_1979@yahoo.com.sg
> > >> >wrote:
> > >> > >
> > >> > >> i think, very likely, you have another copy of java.util.Vector
> > >> loaded,
> > >> > >> and
> > >> > >> this one tries to be too clever with its implementation of clone
> > >> > >> (instantiate a
> > >> > >> new Vector instance) instead of delegating to its super class
> > >> (Object).
> > >> > >>
> > >> > >>
> > >> > >>
> > >> > >> HTH,
> > >> > >> Edwin
> > >> > >>
> > >> > >>
> > >> > >>
> > >> > >> --- Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > >> > >>
> > >> > >> >
> > >> > >> > :        SegmentInfos sis = (SegmentInfos) super.clone();
> > >> > >> >
> > >> > >> > : We see that it is trying to cast a Vector into SegmentInfos
> which
> > >> > >> explains
> > >> > >> > : the ClassCastException.  This is definitely a bug.
> > >> > >> >
> > >> > >> > I'm really not sure how you could be getting that
> > >> ClassCastException
> > >> > >> > unless there's a really horrific bug in the JRE you are using.
> > >> > >> >
> > >> > >> > You'll see this in just about every (non-trivial) use of
> > >> super.clone()
> > >> > >> ...
> > >> > >>
> > >> > >>
> > >> > >>
> > >> > >>       Yahoo! Toolbar is now powered with Search Assist.Download
> it
> > >> now!
> > >> > >> http://sg.toolbar.yahoo.com/
> > >> > >>
> > >> > >>
> > >> > >>
> ---------------------------------------------------------------------
> > >> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> > >> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >> > >>
> > >> > >>
> > >> > >
> > >> >
> > >>
> > >>
> > >>
> > >>       Get your preferred Email name!
> > >> Now you can @ymail.com and @rocketmail.com
> > >> http://mail.promotions.yahoo.com/newdomains/sg/
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> >
>
>
>
>       New Email names for you!
> Get the Email name you've always wanted on the new @ymail and @rocketmail.
> Hurry before someone else does!
> http://mail.promotions.yahoo.com/newdomains/sg/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_50885_30248119.1223357721164--

From java-user-return-36515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 09:12:46 2008
Return-Path: <java-user-return-36515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36716 invoked from network); 7 Oct 2008 09:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 09:12:45 -0000
Received: (qmail 52841 invoked by uid 500); 7 Oct 2008 09:12:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52797 invoked by uid 500); 7 Oct 2008 09:12:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52786 invoked by uid 99); 7 Oct 2008 09:12:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 02:12:36 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 09:11:33 +0000
Received: by yx-out-2324.google.com with SMTP id 3so492777yxj.5
        for <java-user@lucene.apache.org>; Tue, 07 Oct 2008 02:12:07 -0700 (PDT)
Received: by 10.100.137.11 with SMTP id k11mr6228005and.39.1223370727530;
        Tue, 07 Oct 2008 02:12:07 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b19sm15353083ana.19.2008.10.07.02.12.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 07 Oct 2008 02:12:06 -0700 (PDT)
Message-Id: <FD624359-E99D-42A8-B391-E1920EE0BCA0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <322047.56998.qm@web53509.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: ArrayIndexOutOfBoundsException in FastCharStream.readChar
Date: Tue, 7 Oct 2008 05:12:05 -0400
References: <322047.56998.qm@web53509.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


If you capture the exact text produced by the reader, and wrap it in a  
StringReader and pass that to StandardAnalyzer, do you then see the  
same exception?

Can you post the full stack trace on 2.3.2?

Mike

Edwin Smith wrote:

> I upgraded to the latest, 3.3.2 and had the same problem, even  
> though it was clearly a different lexer reading the text.
>
> I did find some problems with the reader I was using, and it now  
> reads some files that it didn't before, so it may still be some  
> reader problem I haven't identified, but the text coming in from it  
> looks correct to me, so I don't know.
>
> Very frustrating.
>
> Ed
>
>
>
> ----- Original Message ----
> From: Edwin Smith <edwin.smith@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Monday, October 6, 2008 3:20:51 PM
> Subject: Re: ArrayIndexOutOfBoundsException in FastCharStream.readChar
>
> No particular reason. It is just what I had loaded last and hadn't  
> upgraded. It sounds like there might be good reason to do that now.
>
> Thanks for the tip.
>
> Ed
>
>
>
> ----- Original Message ----
> From: Steven A Rowe <sarowe@syr.edu>
> To: java-user@lucene.apache.org
> Sent: Monday, October 6, 2008 3:18:20 PM
> Subject: RE: ArrayIndexOutOfBoundsException in FastCharStream.readChar
>
> Hi Edwin,
>
> I don't know specifically what's causing the exception you're  
> seeing, but note that in Lucene 2.3.0+, the JavaCC-generated version  
> of StandardTokenizer (where your exception originates) has been  
> replaced with a JFlex-generated version - see <http://issues.apache.org/jira/browse/LUCENE-966 
> >.
>
> FYI, indexing speed was much improved in 2.3.0 over previous  
> versions -- up to 10 times faster, according to reports on this list  
> -- is there any particular reason you aren't using 2.3.2 (the most  
> recent release)?
>
> Steve
>
> On 10/06/2008 at 2:32 PM, Edwin Smith wrote:
>> Oh, and in case it matters, I'm using Lucene 2.2.0.
>>
>> Ed
>>
>>
>>
>> ----- Original Message ----
>>
>>
>> I am stumped and have not seen any other reference to this
>> problem. I am getting the following exception on everything I
>> try to index. Does anyone know what my problem might be?
>>
>> Thanks,
>>
>> Ed
>>
>> java.lang.ArrayIndexOutOfBoundsException at
>> org.apache.lucene.analysis.standard.FastCharStream.readChar( at
>> org.apache.lucene.analysis.standard.FastCharStream.BeginToken( at
>> org.apache.lucene.analysis.standard.StandardTokenizerTokenMana
>> ger.getNextToken( at
>> org.apache.lucene.analysis.standard.StandardTokenizer.jj_ntk( at
>> org.apache.lucene.analysis.standard.StandardTokenizer.next( at
>> org.apache.lucene.analysis.standard.StandardFilter.next( at
>> org.apache.lucene.analysis.LowerCaseFilter.next( at
>> org.apache.lucene.analysis.StopFilter.next( at
>> org.apache.lucene.index.DocumentWriter.invertDocument( at
>> org.apache.lucene.index.DocumentWriter.addDocument( at
>> org.apache.lucene.index.IndexWriter.buildSingleDocSegment( at
>> org.apache.lucene.index.IndexWriter.addDocument( at
>> org.apache.lucene.index.IndexWriter.addDocument( at
>> com.affinovate.v4.server.search.Indexer.index( at
>> com.affinovate.v4.server.search.Indexer.perform( at
>> com.affinovate.v4.server.db.TaskQueue.run( at java.lang.Thread.run(:
>> 2048FastCharStream.java:46)FastCharStream.java:79)StandardToke
>> nizerTokenManager.java:1180)StandardTokenizer.java:158)Standar
>> dTokenizer.java:36)StandardFilter.java:41)LowerCaseFilter.java
>>> 33)StopFilter.java:107)DocumentWriter.java:219)DocumentWriter
>> .java:95)IndexWriter.java:1013)IndexWriter.java:1001)IndexWrit
>> er.java:983)Indexer.java:61)Indexer.java:93)TaskQueue.java:115
>> )Thread.java:619)
>>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 10:01:38 2008
Return-Path: <java-user-return-36516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63757 invoked from network); 7 Oct 2008 10:01:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 10:01:38 -0000
Received: (qmail 99341 invoked by uid 500); 7 Oct 2008 10:01:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99212 invoked by uid 500); 7 Oct 2008 10:01:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99161 invoked by uid 99); 7 Oct 2008 10:01:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 03:01:27 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.227] (HELO smtp124.mail.mud.yahoo.com) (209.191.84.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Oct 2008 10:00:22 +0000
Received: (qmail 40396 invoked from network); 7 Oct 2008 09:59:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=dsKEfX01gRmelmInJcs21InkA5tdhgEGEDdoVLLFS2oSxi3XQNXEYfMpbMSn7uby0Z7E5rFUSsu0N4aJrOmhk+4IcFeBmUFUp/ZJmNUA5xyJ/1ia+swiAbr7hSWciPhlfMCcSmqqfwT2lTDx/jAMGJBLPnpfql8rx58KKtGueVU=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp124.mail.mud.yahoo.com with SMTP; 7 Oct 2008 09:59:50 -0000
X-YMail-OSG: F0Tvd8QVM1l.BQm2puXRwY8vCIQAJQqNNtijXnh0rqOlerxK6Z5R8_kiLb_gnDK_TACgmB3KkHe9QmIyAY_LQg5TbNEmWrfOKg57EDRQB16je0XJYGOC9.eq0Azu.Vrbt6AnXPCWdMcxg1wr6s9Dvfga
X-Yahoo-Newman-Property: ymail-3
Message-ID: <03f201c92863$710005b0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com> <867513fe0810030918m1b3ecd64k98ed01214caaaa5d@mail.gmail.com> <036d01c9276d$268e2c60$330bc30a@sv.us.sonicwall.com> <867513fe0810061148h2de6f71av6867bdbbdea5dc59@mail.gmail.com>
Subject: Re: Single searcher vs Multi Searcher
Date: Tue, 7 Oct 2008 15:29:33 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Anusham,

My intention is to shard the index after every 7 days (week). After 30 days, 
(4th  week) the first DB may get deleted. At any point of time i will be 
maitaining 3 to 4 DB.

I want to know the pros and cons of the MultiSearcher or Index sharding 
approach. Any web links would be helpful.

Regards
Ganesh

----- Original Message ----- 
From: "Anshum" <anshumg@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, October 07, 2008 12:18 AM
Subject: Re: Single searcher vs Multi Searcher


> Hi Ganesh,
> About the memory consumption while sorting, it would end up using similar
> amounts, perhaps even more.. like in the case of regular parallel
> programming algorithms (hoping that you intend to search using a parallel
> multi searcher). Would you have to query particular indexes only for a
> particular search or would you be searching over all the indexes and then
> follow it up by merger (which the parallel multi searcher would do
> efficiently).?
> Also, I guess 30 indexes would be a little too many, haven't really tried
> out those many indexes for a multisearcher.
> As far as maintenance of DB is concerned, it might be easy as long as you
> don't have any document updates, in which case you'd have to shift the
> documents from one DB/index to another (which includes creating an entry 
> in
> the latest index/DB and deleting the record from the older DB).
> I guess you'd have to pilot it, in case memory is an issue in your case 
> and
> not speed, you could try a regular multisearcher instead of a parallel
> multisearcher.
> I guess when you say maintenance of the DB gets easier, you mean that the
> data in each individual table is controlled (but remember there could be
> other bigger hassles like the one mentioned above about moving data 
> between
> indexes/DB).
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Mon, Oct 6, 2008 at 10:06 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> Hello Anshum,
>>
>> My index is growing 1 million documents per day. Initially i planned to
>> have a single database but the sorting of one or more fields consumes 
>> more
>> RAM. Whether sharding the index would also consume the same.
>>
>> My application should co-exist with other application of my product and 
>> my
>> app could get 1 GB of RAM. Search speed is fine but i need to display the
>> result in the sorted order.
>>
>> I thought to keep 7 days of documents in one index and create one more
>> after the 7 days. After 30 days the first index may get deleted. I need 
>> to
>> keep the documents in the index DB for 30 days. My Index DB is in HDD.
>>
>> I want to the pros and cons of sharding. I think maintance of the DB
>> becomes easier.
>>
>> It would be very much helpful, if you share some of your thoughts.
>>
>> Regards
>> Ganesh
>>
>>
>> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, October 03, 2008 9:48 PM
>> Subject: Re: Single searcher vs Multi Searcher
>>
>>
>>
>>  Hi Ganesh,
>>>
>>> I have experimented with sharded indexes and they seem to benefit
>>> me(atleast
>>> in my case). I would like to know a few things before I answer your
>>> question:
>>> 1. Do you have a reasonable criteria ( a calculated one) to shard the
>>> indexes?
>>> 2. How do you plan to split the index? Is it going to be document based
>>> (which I guess it should be as otherwise you would have to build a
>>> complete
>>> distributed system)
>>> 3. Do you plan to put your indexes on the RAM or on (physically) 
>>> seperate
>>> HDDs?
>>>
>>> Though all said and done, sharded indexes are a good approach, if done 
>>> the
>>> right way.
>>> --
>>> Anshum Gupta
>>> Naukri Labs!
>>> http://ai-cafe.blogspot.com
>>>
>>> The facts expressed here belong to everybody, the opinions to me. The
>>> distinction is yours to draw............
>>>
>>>
>>> On Fri, Oct 3, 2008 at 3:01 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>
>>>  Hello all,
>>>>
>>>> My indexing is growing by 1 million records per day and the memory
>>>> consumption of the searcher object is quite high.
>>>>
>>>> There are different opinion in the groups. Few suggest to use single
>>>> database and few to use sharding. My Database has 10 million records 
>>>> now
>>>> and
>>>> it might go till 30 million or more. I plan to shard the index. but
>>>> Multisearcher will give me benifit.
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>>
>>>> Send instant messages to your online friends
>>>> http://in.messenger.yahoo.com
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 12:26:37 2008
Return-Path: <java-user-return-36517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41419 invoked from network); 7 Oct 2008 12:26:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 12:26:37 -0000
Received: (qmail 39197 invoked by uid 500); 7 Oct 2008 12:26:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39162 invoked by uid 500); 7 Oct 2008 12:26:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39151 invoked by uid 99); 7 Oct 2008 12:26:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 05:26:28 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS,WHOIS_DMNBYPROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 12:25:22 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3542818wfc.20
        for <java-user@lucene.apache.org>; Tue, 07 Oct 2008 05:25:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Fe6E8INXA6Z5XVtsxASem5A95IQUc7Vn1UERA6tYPcg=;
        b=v3GzQiw7EfxbXqqKnqCc6fZS13YcRoGBShBiwjGmL9nSB1wAFjew48svYP8CX7vm/v
         N4YCKpkSfy3PJAuD/7HLUJrIB/+NZZnsTXiMkjvWfkarYV5CnP7a4hIHe7l21PKfQpgW
         wDHgLg+ML0RKFZRXlbQUeR8yU/2uM4nW5/TdQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VTkiL969ZcLdmGjE2K7MKTihaJ3VGSeeWTncv0gCTWGsPPWB7J2EPMOX1N6TJqs0aK
         JKHSfWzj6WR/8Q+T13ak5w9dvW6Cr37zSnQt+lsb1T14BzGzQYI0lyzmxo44GWLGKnjv
         uyrSMXZM/ASoH2mxjfV2MEbRJZr1Wuw3gagOs=
Received: by 10.142.58.5 with SMTP id g5mr2622127wfa.224.1223382347273;
        Tue, 07 Oct 2008 05:25:47 -0700 (PDT)
Received: by 10.142.49.5 with HTTP; Tue, 7 Oct 2008 05:25:47 -0700 (PDT)
Message-ID: <867513fe0810070525u706cd73ag7b4e846e72e112a@mail.gmail.com>
Date: Tue, 7 Oct 2008 17:55:47 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Single searcher vs Multi Searcher
In-Reply-To: <03f201c92863$710005b0$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59627_26983463.1223382347270"
References: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com>
	 <867513fe0810030918m1b3ecd64k98ed01214caaaa5d@mail.gmail.com>
	 <036d01c9276d$268e2c60$330bc30a@sv.us.sonicwall.com>
	 <867513fe0810061148h2de6f71av6867bdbbdea5dc59@mail.gmail.com>
	 <03f201c92863$710005b0$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59627_26983463.1223382347270
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There were all of the links I could find:
http://findmeajob.wordpress.com/2007/07/31/lucene-singlesearcher-vs-multisearcher/
http://archives.devshed.com/forums/java-118/how-do-lucene-ids-work-with-multireader-and-multisearcher-993682.html

It has been only out of personal experimentation.
Maintaining 4 indexes and having a multisearcher for the same sounds ok to
me, though it might(most probably would) use up more time (depending on your
term/doc distribution).
I have tried multisearchers for indexes that are sized at around 18Gs with
over 10 million records in them and they seem to be working fine. Memory
utilization hasn't really been my problem though maintenance has been
required to be taken care of if I had record updates as well i.e.
Lets assume we have 4 indexes {1,2,3,4} with 4 being the oldest one. Now a
document got updated and so you would want to move it to the freshest index
viz. index 1. In this case you would also have to delete this document from
index 4 (after figuring out that it exists in 4) else this doc would show up
as 2 hits using a multisearcher.
This is the document movement that I was talking about.
Talking only about online resource utilization ( as what I just spoke about
is generally an offline process), you would have to spend extra resource to
merge the hits from the different indexes.
The other overhead in case of a multisearcher would be of creating those
many searchers - for each index(though shouldn't be much, just though would
point out).
I guess you should try it as speed of search is not realy all that important
to you as compared to running it on a singe box within the memory
limitation.



--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Tue, Oct 7, 2008 at 3:29 PM, Ganesh <emailgane@yahoo.co.in> wrote:

> Hello Anusham,
>
> My intention is to shard the index after every 7 days (week). After 30
> days, (4th  week) the first DB may get deleted. At any point of time i will
> be maitaining 3 to 4 DB.
>
> I want to know the pros and cons of the MultiSearcher or Index sharding
> approach. Any web links would be helpful.
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, October 07, 2008 12:18 AM
>
> Subject: Re: Single searcher vs Multi Searcher
>
>
>  Hi Ganesh,
>> About the memory consumption while sorting, it would end up using similar
>> amounts, perhaps even more.. like in the case of regular parallel
>> programming algorithms (hoping that you intend to search using a parallel
>> multi searcher). Would you have to query particular indexes only for a
>> particular search or would you be searching over all the indexes and then
>> follow it up by merger (which the parallel multi searcher would do
>> efficiently).?
>> Also, I guess 30 indexes would be a little too many, haven't really tried
>> out those many indexes for a multisearcher.
>> As far as maintenance of DB is concerned, it might be easy as long as you
>> don't have any document updates, in which case you'd have to shift the
>> documents from one DB/index to another (which includes creating an entry
>> in
>> the latest index/DB and deleting the record from the older DB).
>> I guess you'd have to pilot it, in case memory is an issue in your case
>> and
>> not speed, you could try a regular multisearcher instead of a parallel
>> multisearcher.
>> I guess when you say maintenance of the DB gets easier, you mean that the
>> data in each individual table is controlled (but remember there could be
>> other bigger hassles like the one mentioned above about moving data
>> between
>> indexes/DB).
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Mon, Oct 6, 2008 at 10:06 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>  Hello Anshum,
>>>
>>> My index is growing 1 million documents per day. Initially i planned to
>>> have a single database but the sorting of one or more fields consumes
>>> more
>>> RAM. Whether sharding the index would also consume the same.
>>>
>>> My application should co-exist with other application of my product and
>>> my
>>> app could get 1 GB of RAM. Search speed is fine but i need to display the
>>> result in the sorted order.
>>>
>>> I thought to keep 7 days of documents in one index and create one more
>>> after the 7 days. After 30 days the first index may get deleted. I need
>>> to
>>> keep the documents in the index DB for 30 days. My Index DB is in HDD.
>>>
>>> I want to the pros and cons of sharding. I think maintance of the DB
>>> becomes easier.
>>>
>>> It would be very much helpful, if you share some of your thoughts.
>>>
>>> Regards
>>> Ganesh
>>>
>>>
>>> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Friday, October 03, 2008 9:48 PM
>>> Subject: Re: Single searcher vs Multi Searcher
>>>
>>>
>>>
>>>  Hi Ganesh,
>>>
>>>>
>>>> I have experimented with sharded indexes and they seem to benefit
>>>> me(atleast
>>>> in my case). I would like to know a few things before I answer your
>>>> question:
>>>> 1. Do you have a reasonable criteria ( a calculated one) to shard the
>>>> indexes?
>>>> 2. How do you plan to split the index? Is it going to be document based
>>>> (which I guess it should be as otherwise you would have to build a
>>>> complete
>>>> distributed system)
>>>> 3. Do you plan to put your indexes on the RAM or on (physically)
>>>> seperate
>>>> HDDs?
>>>>
>>>> Though all said and done, sharded indexes are a good approach, if done
>>>> the
>>>> right way.
>>>> --
>>>> Anshum Gupta
>>>> Naukri Labs!
>>>> http://ai-cafe.blogspot.com
>>>>
>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>> distinction is yours to draw............
>>>>
>>>>
>>>> On Fri, Oct 3, 2008 at 3:01 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>
>>>>  Hello all,
>>>>
>>>>>
>>>>> My indexing is growing by 1 million records per day and the memory
>>>>> consumption of the searcher object is quite high.
>>>>>
>>>>> There are different opinion in the groups. Few suggest to use single
>>>>> database and few to use sharding. My Database has 10 million records
>>>>> now
>>>>> and
>>>>> it might go till 30 million or more. I plan to shard the index. but
>>>>> Multisearcher will give me benifit.
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>>
>>>>>
>>>>> Send instant messages to your online friends
>>>>> http://in.messenger.yahoo.com
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>  Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_59627_26983463.1223382347270--

From java-user-return-36518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 12:53:09 2008
Return-Path: <java-user-return-36518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57981 invoked from network); 7 Oct 2008 12:53:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 12:53:09 -0000
Received: (qmail 82087 invoked by uid 500); 7 Oct 2008 12:53:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82061 invoked by uid 500); 7 Oct 2008 12:53:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82050 invoked by uid 99); 7 Oct 2008 12:53:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 05:53:01 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 12:51:59 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3562438wfc.20
        for <java-user@lucene.apache.org>; Tue, 07 Oct 2008 05:52:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RGXxu+IxAhT6aVmu3oRLnvj/b7qPbtg6QVLQlk9PStw=;
        b=va1U2zYm/YphuycfwaOkHM4fVkg207jnmDGf9I/0GnjuDWy4lx6y0HqTN7eQaW78tb
         U6gMaNQdyrT81Kps6qTeNpn/CbuXGhzfXeTvC+37EaHNmFQi4rCdxFVQDooSqH+cEThw
         nIvd6ZDYx+bFa4JqzqqLpNEA7Ys6/4z4zLGdQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mSI42xEx7NQaxlx/2px3oXtzcbPEWbnCxZVksKhU9SnmriH4jPNgVbTVcdxXp8X6/j
         MeZG8Xf2YVocKwU64KZtAg1mH2OR9zI3G2flVVi0yJXcECnsvFhP2mjv2Eh7tKThjQ2u
         h5yHnxNFk2I42TRnxcJbcYv+kalBYyi2AU5tc=
Received: by 10.141.179.5 with SMTP id g5mr3817558rvp.237.1223383944290;
        Tue, 07 Oct 2008 05:52:24 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Tue, 7 Oct 2008 05:52:24 -0700 (PDT)
Message-ID: <359a92830810070552w47667296m956d504929ee1216@mail.gmail.com>
Date: Tue, 7 Oct 2008 08:52:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re-tokenized fields disappear
In-Reply-To: <7E1E602E5D534D51882AB6FF738B57FC@desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44332_7048981.1223383944288"
References: <7E1E602E5D534D51882AB6FF738B57FC@desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44332_7048981.1223383944288
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is going to get really sticky given StandardAnalyzer. Let's say that
you have
codesearch:B05 1
codesearch:B05 2
codesearch:B05 3

When you index these, you'll index tokens B05, 1, 2, 3, along with
positional information. How to say "between 1 and 3" becomes a problem,
although it *might* work for you to search for
+codesearch:B05 +codesearch:[1 TO 3]...
(I've forgotten the between syntax, but you get the idea).
But I think that'll kinda work until you encounter case n + 1.......

But all is not lost. You might be well served by indexing these with
something like KeywordAnalyzer (note, you might want to roll your
own analyzer that, for instance, uppercases before passing to
KeywordAnalyzer).. Then, in the example above you'd index the following
tokens:

B05 1
B05 2
B05 3


Now, you can search for tokens between "B05 1" and "B05 3" using
the normal syntax syntax.

There are alternative schemes, but I think you would get some mileage
out of thinking about how to index these creatively.

A few points:
1> You may have to carefully massage the data for searching. For instance,
     assume that one of your tokens was B05 100. You might want to
     index "B05 001" rather than "B05 1" since Lucene normally
     searches lexically rather than numerically.
2> This could be a special search field that's a copy of your original. That
is,
     you would have two fields where before you had one.
3> PerFieldAnalyzerWrapper is your friend, both at index and search time
<G>.

Best
Erick

On Mon, Oct 6, 2008 at 11:38 PM, John Griffin <jgriffin@thebluezone.net>wrote:

> My previous question may be moot but as is it is still a problem. Here's a
> little more info on my problem. The same named fields contain two pieces of
> information, a code "B05" and a value "1" as follows. The value can be a
> range such as 1 to 5 or 1 to 100.
>
>
>
> "codesearch", "B05 1"
>
>
>
> This field and other identically names but differently valued fields in the
> same document are related to a specific person as identified by another
> field say SSN. So, one person can have multiple code searches. Both of the
> codesearch values are related to one another and must be searchable such as
>
>
>
> Return all persons with a codesearch value of B05 ranging from 1 to 3.
>
>
>
> How can I go about this? Do these codesearch fields need to be in a
> separate
> index related by SSN?
>
>
>
> Thanks in advance.
>
>
>
> John G.
>
>

------=_Part_44332_7048981.1223383944288--

From java-user-return-36519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 14:43:44 2008
Return-Path: <java-user-return-36519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47997 invoked from network); 7 Oct 2008 14:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 14:43:44 -0000
Received: (qmail 79130 invoked by uid 500); 7 Oct 2008 14:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79101 invoked by uid 500); 7 Oct 2008 14:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79090 invoked by uid 99); 7 Oct 2008 14:43:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 07:43:35 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.37.71] (HELO web53510.mail.re2.yahoo.com) (206.190.37.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Oct 2008 14:42:32 +0000
Received: (qmail 75528 invoked by uid 60001); 7 Oct 2008 14:43:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=P9s5zpewtmI+ToP5ZL2iUR2BIiVXkYqyng17/h3piVndsyJyw40DQ3vsHHCzT+eyu/x6tLIRhA8oiX7f2DIgQJQeVE5d3GoVxZWJtGTgaZ8coFA25fqZaTMBm9x1jvlg2jx8Ywz641V47CWFqzbs1Kj3vhUs2q6YrAzNQoSTtWg=;
X-YMail-OSG: 86n8YBMVM1kZXDde1ms1cIo66WU6r1kV85kWH3g_KkSPSUIfxnlfbFsSAcWkBMf7wGtrfbgPbHxpzclitgx9.vx7eJkWwxAjUKAJvf21GMeTsSfWAHa0NgnxLJi6Kh7fPkc.hFsxZuijf.L1oU1cnDY65Ox7dCiugCNk_GowLQqxEgPTxg--
Received: from [67.161.151.103] by web53510.mail.re2.yahoo.com via HTTP; Tue, 07 Oct 2008 07:43:06 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Tue, 7 Oct 2008 07:43:06 -0700 (PDT)
From: Edwin Smith <edwin.smith@yahoo.com>
Subject: Re: ArrayIndexOutOfBoundsException in FastCharStream.readChar
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-395815729-1223390586=:75183"
Message-ID: <132691.75183.qm@web53510.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-395815729-1223390586=:75183
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks for the tip. I tried your experiment and, sure enough, it works just=
 fine, so it's not the contents but obviously some other behavior of my cus=
tom reader. (Does the analyzer require that "mark" and "reset" be implement=
ed, for example? I did not implement them.)=0A=0AThe stack trace is as foll=
ows:=0A=0AException in thread "main" java.lang.ArrayIndexOutOfBoundsExcepti=
onat java.lang.System.arraycopy(=0Aat org.apache.lucene.analysis.standard.S=
tandardTokenizerImpl.zzRefill(=0Aat org.apache.lucene.analysis.standard.Sta=
ndardTokenizerImpl.getNextToken(=0Aat org.apache.lucene.analysis.standard.S=
tandardTokenizer.next(=0Aat org.apache.lucene.analysis.standard.StandardFil=
ter.next(=0Aat org.apache.lucene.analysis.LowerCaseFilter.next(=0Aat org.ap=
ache.lucene.analysis.StopFilter.next(=0Aat org.apache.lucene.index.Document=
sWriter$ThreadState$FieldData.invertField(=0Aat org.apache.lucene.index.Doc=
umentsWriter$ThreadState$FieldData.processField(=0Aat org.apache.lucene.ind=
ex.DocumentsWriter$ThreadState.processDocument(=0Aat org.apache.lucene.inde=
x.DocumentsWriter.updateDocument(=0Aat org.apache.lucene.index.DocumentsWri=
ter.addDocument(=0Aat org.apache.lucene.index.IndexWriter.addDocument(=0Aat=
 org.apache.lucene.index.IndexWriter.addDocument(=0Aat com.affinovate.v4.se=
rver.search.ServerTest.main(Native Method)StandardTokenizerImpl.java:366)St=
andardTokenizerImpl.java:573)StandardTokenizer.java:139)StandardFilter.java=
:42)LowerCaseFilter.java:33)StopFilter.java:118)DocumentsWriter.java:1522)D=
ocumentsWriter.java:1412)DocumentsWriter.java:1121)DocumentsWriter.java:244=
2)DocumentsWriter.java:2424)IndexWriter.java:1464)IndexWriter.java:1442)Ser=
verTest.java:36)=0A=0AThe error is occuring in the second line of zzRefill(=
):=0A=0ASystem.arraycopy(=0A=A0=0AI set a breakpoint to catch it before it =
erred, and the value of zzEndRead is 0 and the value of zzStartRead 1. Thus=
 the error.=0A=A0=0AI was being clever and made a custom reader using compe=
ting threads against a SAX parser. I probbably did it more to see if I coul=
d than for any valid reason, so I will probably just simplify my approach a=
nd use the parser to pull a complete string and use a string reader like yo=
u suggest.=0A=A0=0AThanks for the help.=0A=A0=0AEd=0AzzBuffer, zzStartRead,=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 zzBuffer, 0,=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 zzEndRead-zzSt=
artRead);=0A=0A=0A----- Original Message ----=0AFrom: Michael McCandless <l=
ucene@mikemccandless.com>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday=
, October 7, 2008 5:12:05 AM=0ASubject: Re: ArrayIndexOutOfBoundsException =
in FastCharStream.readChar=0A=0A=0AIf you capture the exact text produced b=
y the reader, and wrap it in a=A0 =0AStringReader and pass that to Standard=
Analyzer, do you then see the=A0 =0Asame exception?=0A=0ACan you post the f=
ull stack trace on 2.3.2?=0A=0AMike=0A=0AEdwin Smith wrote:=0A=0A> I upgrad=
ed to the latest, 3.3.2 and had the same problem, even=A0 =0A> though it wa=
s clearly a different lexer reading the text.=0A>=0A> I did find some probl=
ems with the reader I was using, and it now=A0 =0A> reads some files that i=
t didn't before, so it may still be some=A0 =0A> reader problem I haven't i=
dentified, but the text coming in from it=A0 =0A> looks correct to me, so I=
 don't know.=0A>=0A> Very frustrating.=0A>=0A> Ed=0A>=0A>=0A>=0A> ----- Ori=
ginal Message ----=0A> From: Edwin Smith <edwin.smith@yahoo.com>=0A> To: ja=
va-user@lucene.apache.org=0A> Sent: Monday, October 6, 2008 3:20:51 PM=0A> =
Subject: Re: ArrayIndexOutOfBoundsException in FastCharStream.readChar=0A>=
=0A> No particular reason. It is just what I had loaded last and hadn't=A0 =
=0A> upgraded. It sounds like there might be good reason to do that now.=0A=
>=0A> Thanks for the tip.=0A>=0A> Ed=0A>=0A>=0A>=0A> ----- Original Message=
 ----=0A> From: Steven A Rowe <sarowe@syr.edu>=0A> To: java-user@lucene.apa=
che.org=0A> Sent: Monday, October 6, 2008 3:18:20 PM=0A> Subject: RE: Array=
IndexOutOfBoundsException in FastCharStream.readChar=0A>=0A> Hi Edwin,=0A>=
=0A> I don't know specifically what's causing the exception you're=A0 =0A> =
seeing, but note that in Lucene 2.3.0+, the JavaCC-generated version=A0 =0A=
> of StandardTokenizer (where your exception originates) has been=A0 =0A> r=
eplaced with a JFlex-generated version - see <http://issues.apache.org/jira=
/browse/LUCENE-966 =0A> >.=0A>=0A> FYI, indexing speed was much improved in=
 2.3.0 over previous=A0 =0A> versions -- up to 10 times faster, according t=
o reports on this list=A0 =0A> -- is there any particular reason you aren't=
 using 2.3.2 (the most=A0 =0A> recent release)?=0A>=0A> Steve=0A>=0A> On 10=
/06/2008 at 2:32 PM, Edwin Smith wrote:=0A>> Oh, and in case it matters, I'=
m using Lucene 2.2.0.=0A>>=0A>> Ed=0A>>=0A>>=0A>>=0A>> ----- Original Messa=
ge ----=0A>>=0A>>=0A>> I am stumped and have not seen any other reference t=
o this=0A>> problem. I am getting the following exception on everything I=
=0A>> try to index. Does anyone know what my problem might be?=0A>>=0A>> Th=
anks,=0A>>=0A>> Ed=0A>>=0A>> java.lang.ArrayIndexOutOfBoundsException at=0A=
>> org.apache.lucene.analysis.standard.FastCharStream.readChar( at=0A>> org=
.apache.lucene.analysis.standard.FastCharStream.BeginToken( at=0A>> org.apa=
che.lucene.analysis.standard.StandardTokenizerTokenMana=0A>> ger.getNextTok=
en( at=0A>> org.apache.lucene.analysis.standard.StandardTokenizer.jj_ntk( a=
t=0A>> org.apache.lucene.analysis.standard.StandardTokenizer.next( at=0A>> =
org.apache.lucene.analysis.standard.StandardFilter.next( at=0A>> org.apache=
.lucene.analysis.LowerCaseFilter.next( at=0A>> org.apache.lucene.analysis.S=
topFilter.next( at=0A>> org.apache.lucene.index.DocumentWriter.invertDocume=
nt( at=0A>> org.apache.lucene.index.DocumentWriter.addDocument( at=0A>> org=
.apache.lucene.index.IndexWriter.buildSingleDocSegment( at=0A>> org.apache.=
lucene.index.IndexWriter.addDocument( at=0A>> org.apache.lucene.index.Index=
Writer.addDocument( at=0A>> com.affinovate.v4.server.search.Indexer.index( =
at=0A>> com.affinovate.v4.server.search.Indexer.perform( at=0A>> com.affino=
vate.v4.server.db.TaskQueue.run( at java.lang.Thread.run(:=0A>> 2048FastCha=
rStream.java:46)FastCharStream.java:79)StandardToke=0A>> nizerTokenManager.=
java:1180)StandardTokenizer.java:158)Standar=0A>> dTokenizer.java:36)Standa=
rdFilter.java:41)LowerCaseFilter.java=0A>>> 33)StopFilter.java:107)Document=
Writer.java:219)DocumentWriter=0A>> .java:95)IndexWriter.java:1013)IndexWri=
ter.java:1001)IndexWrit=0A>> er.java:983)Indexer.java:61)Indexer.java:93)Ta=
skQueue.java:115=0A>> )Thread.java:619)=0A>>=0A>=0A>=0A>=0A>=0A> ----------=
-----------------------------------------------------------=0A> To unsubscr=
ibe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional com=
mands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A-------------------=
--------------------------------------------------=0ATo unsubscribe, e-mail=
: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail=
: java-user-help@lucene.apache.org
--0-395815729-1223390586=:75183--

From java-user-return-36520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 14:56:49 2008
Return-Path: <java-user-return-36520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56137 invoked from network); 7 Oct 2008 14:56:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 14:56:49 -0000
Received: (qmail 18393 invoked by uid 500); 7 Oct 2008 14:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17421 invoked by uid 500); 7 Oct 2008 14:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17410 invoked by uid 99); 7 Oct 2008 14:56:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 07:56:40 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jrennie@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 14:55:38 +0000
Received: by ug-out-1314.google.com with SMTP id j3so298349ugf.23
        for <java-user@lucene.apache.org>; Tue, 07 Oct 2008 07:56:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lF/lZ1GT/fVzW5hvHryG1ZlfuSMU908kidE+AT97ndA=;
        b=PM8vg0r4LsUd1QyxyI22keyxPlfUaBZ+8xUsMgKhK3gEMYRoua0wcLwtBUdPmpPweG
         wysr4qV2qgPuLSdsw/bc84wYBmBpgQdo67NdWFp8xe+BcW/c4MrKqayRl52tvNCTA/xt
         KpQEG9rn0FpWbxNEX/Yw1DujL4NxGQ4wfBCgI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ep5eAu+UxL1ZUMzvPiOETyRZjStw3+PZPTtS/9esKy/BtAJg/ggloFDIuO+NueNJ8Z
         k1xqyZ64MlsXIh2nVIKsSm+PidwwjAKmH++RGwn2KzsFli2eK+21X7F75+q1byLK6DWg
         7fjsv1c5fliU1TO1OS0DtmzLy55/0iinDFQb4=
Received: by 10.86.98.14 with SMTP id v14mr6069504fgb.74.1223391372580;
        Tue, 07 Oct 2008 07:56:12 -0700 (PDT)
Received: by 10.86.3.13 with HTTP; Tue, 7 Oct 2008 07:56:12 -0700 (PDT)
Message-ID: <75c31b2a0810070756m68a1b4c4qe84bf3ba3ed1ca87@mail.gmail.com>
Date: Tue, 7 Oct 2008 10:56:12 -0400
From: "Jason Rennie" <jrennie@gmail.com>
To: java-user@lucene.apache.org
Subject: spellcheck: issues
In-Reply-To: <75c31b2a0810061308h8edf1begbe698bf0563920bd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2213_1807890.1223391372600"
References: <75c31b2a0810061308h8edf1begbe698bf0563920bd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2213_1807890.1223391372600
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello, I've been exploring usage of the spellcheck feature via solr 1.3.  I
have it working, but there are some issues I'm seeing that make it less
useful than it could be.  Response on the solr-user mailing list has been
limited.  I'm guessing the reason may be that I'm asking about issues which
are most relevant to the lucene codebase.  So, I hope you don't mind this
cross-posting.

I've noticed a few issues with spellcheck as I've been testing it out for
use on our site...

   1. Rebuild breaks requests - I'm using rebuildOnCommit ATM.  If a commit
   is going on and files are being rebuilt in the spellcheck data dir,
   spellcheck requests yield bogus answers.  I.e. I can issue identical
   requests and get drastically different answers.  The first time, I get
   suggestions and "correctlySpelled" is false.  The second time (during the
   commit), I get no suggestions and "correctlySpelled" is true.  Shouldn't
   spellcheck use the old index until the new one is ready for use, like solr
   does with optimizes?
   2. Inconsistent ordering - The first suggestion changes depending on the
   spellcheck.count that I specify.  If my query is "chanl" and I ask for one
   result, the suggestion is "chant" (freq. 16).  If I ask for 5 results, the
   first suggestion is also "chant"; the other 4 suggestions are less frequent
   (#2 is "chang", freq. 11).  However, if I ask for 10 results, the first
   suggestion is "chanel" (freq. 1296); #2 and #3 are "chant" and "chang"; #9
   is "chan" (freq. 174).  Shouldn't spellcheck always return the best
   suggestion first?  In my case, shouldn't "chanel" always top "chant" and
   "chang" since they all have the same edit distance yet "chanel" is two
   orders of mangnitude more popular?

Is there anything I could be doing wrong to create these problems?  If not,
are these known issues?  If not, should I create jira's for them?

Thanks,

Jason

------=_Part_2213_1807890.1223391372600--

From java-user-return-36521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 15:51:58 2008
Return-Path: <java-user-return-36521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6755 invoked from network); 7 Oct 2008 15:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 15:51:58 -0000
Received: (qmail 14998 invoked by uid 500); 7 Oct 2008 15:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14969 invoked by uid 500); 7 Oct 2008 15:51:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14958 invoked by uid 99); 7 Oct 2008 15:51:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 08:51:48 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.65] (HELO web53511.mail.re2.yahoo.com) (206.190.39.65)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Oct 2008 15:50:45 +0000
Received: (qmail 20905 invoked by uid 60001); 7 Oct 2008 15:50:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=jDJdEi6EsQ9LbIJOt+TO/dW4R2/x3Y6Ka7hl1QmJ2yxQFSqDXpZFEpWujr0BveGT5CYKaF/Es97x90Fg59t1+HI/R1NKaXGsPjRzFLboy0NN7eD6jIyVLRXPG9+CUeaPIcq/YsvhEwAt/fvRSpJJ2Kx2u0Wy9sfsHNXyPXpx5cA=;
Received: from [67.161.151.103] by web53511.mail.re2.yahoo.com via HTTP; Tue, 07 Oct 2008 08:50:19 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Tue, 7 Oct 2008 08:50:19 -0700 (PDT)
From: Edwin Smith <edwin.smith@yahoo.com>
Subject: Re: ArrayIndexOutOfBoundsException in FastCharStream.readChar
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1658430277-1223394619=:20237"
Message-ID: <903481.20237.qm@web53511.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1658430277-1223394619=:20237
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

I found it. My reader was returning 0 at the end of the stream instead of -=
1. Doh.=0A=A0=0AThanks again for the suggestions. They did ultimately lead =
me to the right answer.=0A=A0=0AEd=0A=0A=0A=0A----- Original Message ----=
=0AFrom: Edwin Smith <edwin.smith@yahoo.com>=0ATo: java-user@lucene.apache.=
org=0ASent: Tuesday, October 7, 2008 10:43:06 AM=0ASubject: Re: ArrayIndexO=
utOfBoundsException in FastCharStream.readChar=0A=0AThanks for the tip. I t=
ried your experiment and, sure enough, it works just fine, so it's not the =
contents but obviously some other behavior of my custom reader. (Does the a=
nalyzer require that "mark" and "reset" be implemented, for example? I did =
not implement them.)=0A=0AThe stack trace is as follows:=0A=0AException in =
thread "main" java.lang.ArrayIndexOutOfBoundsExceptionat java.lang.System.a=
rraycopy(=0Aat org.apache.lucene.analysis.standard.StandardTokenizerImpl.zz=
Refill(=0Aat org.apache.lucene.analysis.standard.StandardTokenizerImpl.getN=
extToken(=0Aat org.apache.lucene.analysis.standard.StandardTokenizer.next(=
=0Aat org.apache.lucene.analysis.standard.StandardFilter.next(=0Aat org.apa=
che.lucene.analysis.LowerCaseFilter.next(=0Aat org.apache.lucene.analysis.S=
topFilter.next(=0Aat org.apache.lucene.index.DocumentsWriter$ThreadState$Fi=
eldData.invertField(=0Aat org.apache.lucene.index.DocumentsWriter$ThreadSta=
te$FieldData.processField(=0Aat org.apache.lucene.index.DocumentsWriter$Thr=
eadState.processDocument(=0Aat org.apache.lucene.index.DocumentsWriter.upda=
teDocument(=0Aat org.apache.lucene.index.DocumentsWriter.addDocument(=0Aat =
org.apache.lucene.index.IndexWriter.addDocument(=0Aat org.apache.lucene.ind=
ex.IndexWriter.addDocument(=0Aat com.affinovate.v4.server.search.ServerTest=
.main(Native Method)StandardTokenizerImpl.java:366)StandardTokenizerImpl.ja=
va:573)StandardTokenizer.java:139)StandardFilter.java:42)LowerCaseFilter.ja=
va:33)StopFilter.java:118)DocumentsWriter.java:1522)DocumentsWriter.java:14=
12)DocumentsWriter.java:1121)DocumentsWriter.java:2442)DocumentsWriter.java=
:2424)IndexWriter.java:1464)IndexWriter.java:1442)ServerTest.java:36)=0A=0A=
The error is occuring in the second line of zzRefill():=0A=0ASystem.arrayco=
py(=0A=A0=0AI set a breakpoint to catch it before it erred, and the value o=
f zzEndRead is 0 and the value of zzStartRead 1. Thus the error.=0A=A0=0AI =
was being clever and made a custom reader using competing threads against a=
 SAX parser. I probbably did it more to see if I could than for any valid r=
eason, so I will probably just simplify my approach and use the parser to p=
ull a complete string and use a string reader like you suggest.=0A=A0=0ATha=
nks for the help.=0A=A0=0AEd=0AzzBuffer, zzStartRead,=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 zzBuffer, 0,=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 zzEndRead-zzStartRead);=0A=0A=0A---=
-- Original Message ----=0AFrom: Michael McCandless <lucene@mikemccandless.=
com>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, October 7, 2008 5:1=
2:05 AM=0ASubject: Re: ArrayIndexOutOfBoundsException in FastCharStream.rea=
dChar=0A=0A=0AIf you capture the exact text produced by the reader, and wra=
p it in a=A0 =0AStringReader and pass that to StandardAnalyzer, do you then=
 see the=A0 =0Asame exception?=0A=0ACan you post the full stack trace on 2.=
3.2?=0A=0AMike=0A=0AEdwin Smith wrote:=0A=0A> I upgraded to the latest, 3.3=
.2 and had the same problem, even=A0 =0A> though it was clearly a different=
 lexer reading the text.=0A>=0A> I did find some problems with the reader I=
 was using, and it now=A0 =0A> reads some files that it didn't before, so i=
t may still be some=A0 =0A> reader problem I haven't identified, but the te=
xt coming in from it=A0 =0A> looks correct to me, so I don't know.=0A>=0A> =
Very frustrating.=0A>=0A> Ed=0A>=0A>=0A>=0A> ----- Original Message ----=0A=
> From: Edwin Smith <edwin.smith@yahoo.com>=0A> To: java-user@lucene.apache=
.org=0A> Sent: Monday, October 6, 2008 3:20:51 PM=0A> Subject: Re: ArrayInd=
exOutOfBoundsException in FastCharStream.readChar=0A>=0A> No particular rea=
son. It is just what I had loaded last and hadn't=A0 =0A> upgraded. It soun=
ds like there might be good reason to do that now.=0A>=0A> Thanks for the t=
ip.=0A>=0A> Ed=0A>=0A>=0A>=0A> ----- Original Message ----=0A> From: Steven=
 A Rowe <sarowe@syr.edu>=0A> To: java-user@lucene.apache.org=0A> Sent: Mond=
ay, October 6, 2008 3:18:20 PM=0A> Subject: RE: ArrayIndexOutOfBoundsExcept=
ion in FastCharStream.readChar=0A>=0A> Hi Edwin,=0A>=0A> I don't know speci=
fically what's causing the exception you're=A0 =0A> seeing, but note that i=
n Lucene 2.3.0+, the JavaCC-generated version=A0 =0A> of StandardTokenizer =
(where your exception originates) has been=A0 =0A> replaced with a JFlex-ge=
nerated version - see <http://issues.apache.org/jira/browse/LUCENE-966 =0A>=
 >.=0A>=0A> FYI, indexing speed was much improved in 2.3.0 over previous=A0=
 =0A> versions -- up to 10 times faster, according to reports on this list=
=A0 =0A> -- is there any particular reason you aren't using 2.3.2 (the most=
=A0 =0A> recent release)?=0A>=0A> Steve=0A>=0A> On 10/06/2008 at 2:32 PM, E=
dwin Smith wrote:=0A>> Oh, and in case it matters, I'm using Lucene 2.2.0.=
=0A>>=0A>> Ed=0A>>=0A>>=0A>>=0A>> ----- Original Message ----=0A>>=0A>>=0A>=
> I am stumped and have not seen any other reference to this=0A>> problem. =
I am getting the following exception on everything I=0A>> try to index. Doe=
s anyone know what my problem might be?=0A>>=0A>> Thanks,=0A>>=0A>> Ed=0A>>=
=0A>> java.lang.ArrayIndexOutOfBoundsException at=0A>> org.apache.lucene.an=
alysis.standard.FastCharStream.readChar( at=0A>> org.apache.lucene.analysis=
.standard.FastCharStream.BeginToken( at=0A>> org.apache.lucene.analysis.sta=
ndard.StandardTokenizerTokenMana=0A>> ger.getNextToken( at=0A>> org.apache.=
lucene.analysis.standard.StandardTokenizer.jj_ntk( at=0A>> org.apache.lucen=
e.analysis.standard.StandardTokenizer.next( at=0A>> org.apache.lucene.analy=
sis.standard.StandardFilter.next( at=0A>> org.apache.lucene.analysis.LowerC=
aseFilter.next( at=0A>> org.apache.lucene.analysis.StopFilter.next( at=0A>>=
 org.apache.lucene.index.DocumentWriter.invertDocument( at=0A>> org.apache.=
lucene.index.DocumentWriter.addDocument( at=0A>> org.apache.lucene.index.In=
dexWriter.buildSingleDocSegment( at=0A>> org.apache.lucene.index.IndexWrite=
r.addDocument( at=0A>> org.apache.lucene.index.IndexWriter.addDocument( at=
=0A>> com.affinovate.v4.server.search.Indexer.index( at=0A>> com.affinovate=
.v4.server.search.Indexer.perform( at=0A>> com.affinovate.v4.server.db.Task=
Queue.run( at java.lang.Thread.run(:=0A>> 2048FastCharStream.java:46)FastCh=
arStream.java:79)StandardToke=0A>> nizerTokenManager.java:1180)StandardToke=
nizer.java:158)Standar=0A>> dTokenizer.java:36)StandardFilter.java:41)Lower=
CaseFilter.java=0A>>> 33)StopFilter.java:107)DocumentWriter.java:219)Docume=
ntWriter=0A>> .java:95)IndexWriter.java:1013)IndexWriter.java:1001)IndexWri=
t=0A>> er.java:983)Indexer.java:61)Indexer.java:93)TaskQueue.java:115=0A>> =
)Thread.java:619)=0A>>=0A>=0A>=0A>=0A>=0A> --------------------------------=
-------------------------------------=0A> To unsubscribe, e-mail: java-user=
-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-us=
er-help@lucene.apache.org=0A=0A=0A-----------------------------------------=
----------------------------=0ATo unsubscribe, e-mail: java-user-unsubscrib=
e@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucen=
e.apache.org
--0-1658430277-1223394619=:20237--

From java-user-return-36522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 17:31:15 2008
Return-Path: <java-user-return-36522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63347 invoked from network); 7 Oct 2008 17:31:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 17:31:15 -0000
Received: (qmail 75794 invoked by uid 500); 7 Oct 2008 17:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75761 invoked by uid 500); 7 Oct 2008 17:31:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 69837 invoked by uid 99); 7 Oct 2008 17:29:14 -0000
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Message-ID: <6bfa8b2b0810071028x62433456j55760d76837575d5@mail.gmail.com>
Date: Tue, 7 Oct 2008 11:28:45 -0600
From: "John Griffin" <griffij@sosstaffing.com>
To: java-user@lucene.apache.org
Subject: Only last field indexed
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38433_23603624.1223400525785"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38433_23603624.1223400525785
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Guys,

I'm adding multiple fields with the same name to a document as Store.YES,
Indexed.TOKENIZED and it seems that only the last field entered is indexed.
I read about this somewhere her but now I can't find it, naturally. Is there
a work around? does someone have a pointer to this discussion? Can someone
help?

Thanks in advance.

John G.

------=_Part_38433_23603624.1223400525785--

From java-user-return-36523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 18:00:21 2008
Return-Path: <java-user-return-36523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84130 invoked from network); 7 Oct 2008 18:00:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 18:00:21 -0000
Received: (qmail 24468 invoked by uid 500); 7 Oct 2008 18:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24441 invoked by uid 500); 7 Oct 2008 18:00:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24423 invoked by uid 99); 7 Oct 2008 18:00:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 11:00:12 -0700
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,DNS_FROM_SECURITYSAGE,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 17:59:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KnGqW-0005dV-BN
	for java-user@lucene.apache.org; Tue, 07 Oct 2008 10:59:44 -0700
Message-ID: <19863821.post@talk.nabble.com>
Date: Tue, 7 Oct 2008 10:59:44 -0700 (PDT)
From: John G <griffij@sosstaffing.com>
To: java-user@lucene.apache.org
Subject: Re: Re-tokenized fields disappear
In-Reply-To: <7E1E602E5D534D51882AB6FF738B57FC@desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: griffij@sosstaffing.com
References: <7E1E602E5D534D51882AB6FF738B57FC@desktop>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Erick,

Yes PerFieldAnalyzerWrapper is my friend :>).

Another related question, I'm putting these values into a document in fields
with the same name. 'codesearch' e.g.

"codesearch", "B05 1"
"codesearch", "Q070301 4" etc.

I read where only the last field entered is actually indexed but I can't
find that post now. Is this true? How can I get around it?

Thanks again.

John G.


John Griffin-3 wrote:
> 
> My previous question may be moot but as is it is still a problem. Here's a
> little more info on my problem. The same named fields contain two pieces
> of
> information, a code "B05" and a value "1" as follows. The value can be a
> range such as 1 to 5 or 1 to 100.
> 
>  
> 
> "codesearch", "B05 1"
> 
>  
> 
> This field and other identically names but differently valued fields in
> the
> same document are related to a specific person as identified by another
> field say SSN. So, one person can have multiple code searches. Both of the
> codesearch values are related to one another and must be searchable such
> as 
> 
>  
> 
> Return all persons with a codesearch value of B05 ranging from 1 to 3. 
> 
>  
> 
> How can I go about this? Do these codesearch fields need to be in a
> separate
> index related by SSN? 
> 
>  
> 
> Thanks in advance.
> 
>  
> 
> John G.
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Re-tokenized-fields-disappear-tp19850534p19863821.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 18:24:35 2008
Return-Path: <java-user-return-36524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5752 invoked from network); 7 Oct 2008 18:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 18:24:35 -0000
Received: (qmail 59439 invoked by uid 500); 7 Oct 2008 18:24:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58872 invoked by uid 500); 7 Oct 2008 18:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58861 invoked by uid 99); 7 Oct 2008 18:24:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 11:24:27 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 18:23:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3405070rvb.5
        for <java-user@lucene.apache.org>; Tue, 07 Oct 2008 11:23:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=L4o3T1ANZsO+1WxSEhIuPyWFIqhRExd/2qSUfRmrtA0=;
        b=q/14h2FHp4UVL0mYezgU6ROM099j3O2ySq6f2RvVgZI2S2U5su9+LltvgPJsGeSyI2
         cntOwDefGF60D8h/HxlBtbflaQnWn5lak9X8vnXvDTM4oANTbJIlvrqLd2uSmFHlDhji
         kxdxvI36KJJGPUogk8SNSGeXanLdThsrVe3vU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=e3CibC/NJQXK0H+n13ubfcThpIphg/l1Pq16G8qE6mbZ94bh5Lz13tPWndhZxCWsYq
         RjxUhybgqf0CS1+fN9WiGG94Aw9Bq1lefelpoLbU1NuGrFs+dPFZde797EOa0KR5N0VE
         R8c4bnHM8UIDbAk4mc+qS38G3RUg/ShcBPilI=
Received: by 10.141.4.3 with SMTP id g3mr4170875rvi.116.1223403831310;
        Tue, 07 Oct 2008 11:23:51 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Tue, 7 Oct 2008 11:23:51 -0700 (PDT)
Message-ID: <359a92830810071123s4dab155aka6190384c4d5e57e@mail.gmail.com>
Date: Tue, 7 Oct 2008 14:23:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Only last field indexed
In-Reply-To: <6bfa8b2b0810071028x62433456j55760d76837575d5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48159_20299679.1223403831308"
References: <6bfa8b2b0810071028x62433456j55760d76837575d5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48159_20299679.1223403831308
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Let's see the indexing code. It is perfectly reasonable to
add data to a field multiple times, so I suspect you're
doing something wrong.....

What evidence do you have that it's only the last field that's
indexed?

Best
Erick

On Tue, Oct 7, 2008 at 1:28 PM, John Griffin <griffij@sosstaffing.com>wrote:

> Guys,
>
> I'm adding multiple fields with the same name to a document as Store.YES,
> Indexed.TOKENIZED and it seems that only the last field entered is indexed.
> I read about this somewhere her but now I can't find it, naturally. Is
> there
> a work around? does someone have a pointer to this discussion? Can someone
> help?
>
> Thanks in advance.
>
> John G.
>

------=_Part_48159_20299679.1223403831308--

From java-user-return-36525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 07 18:25:46 2008
Return-Path: <java-user-return-36525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6443 invoked from network); 7 Oct 2008 18:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Oct 2008 18:25:45 -0000
Received: (qmail 62220 invoked by uid 500); 7 Oct 2008 18:25:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61599 invoked by uid 500); 7 Oct 2008 18:25:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61588 invoked by uid 99); 7 Oct 2008 18:25:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 11:25:38 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 18:24:34 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3405653rvb.5
        for <java-user@lucene.apache.org>; Tue, 07 Oct 2008 11:25:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NXKat+Bl/2i2YZai4YbxlsrIcYd73YOPVMApdKX2V+I=;
        b=llREsnnEQOZENbJK+SQBpomDpXm3OK1QTKUCspx3Zd7XNnxRORfF5hOH85XQ3fHT4U
         O1GDsHx9hDf4imSbLNK+ls470Qs9G3GAjYHLHuZ5JNTIk4m9nTk6HzDoD6oL0fdXMTco
         kwPi2X1+vqIzVpGTajoPgrjtOqygOiYKt7rnU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Et4BVrmAQ1Qa9iw80Q2Xoma8zGrGzY7KAzU06Ql+i5tFFLsukg+X93FLkD1NPgtSbh
         yriDEvATp8adXKHYWdJ7mGk7aHFB0SoomOaUY0fmPjrDn/nLpTXVLguP0TTFwiAIIxgp
         ngkrzKzLv3IK78dGNzZs9FAdbi/yvF5l53h7o=
Received: by 10.140.178.10 with SMTP id a10mr4123536rvf.297.1223403900798;
        Tue, 07 Oct 2008 11:25:00 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Tue, 7 Oct 2008 11:25:00 -0700 (PDT)
Message-ID: <359a92830810071125m3b6abf11m2b51e248b24fcd1a@mail.gmail.com>
Date: Tue, 7 Oct 2008 14:25:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re-tokenized fields disappear
In-Reply-To: <19863821.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48171_6326226.1223403900791"
References: <7E1E602E5D534D51882AB6FF738B57FC@desktop>
	 <19863821.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48171_6326226.1223403900791
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below (and your other mail)

On Tue, Oct 7, 2008 at 1:59 PM, John G <griffij@sosstaffing.com> wrote:

>
> Thanks Erick,
>
> Yes PerFieldAnalyzerWrapper is my friend :>).
>
> Another related question, I'm putting these values into a document in
> fields
> with the same name. 'codesearch' e.g.
>
> "codesearch", "B05 1"
> "codesearch", "Q070301 4" etc.
>
> I read where only the last field entered is actually indexed but I can't
> find that post now. Is this true? How can I get around it?


No, that's not true. That's what PositionIncrementGap is all about, handling
this very situation.


>
> Thanks again.
>
> John G.
>
>
> John Griffin-3 wrote:
> >
> > My previous question may be moot but as is it is still a problem. Here's
> a
> > little more info on my problem. The same named fields contain two pieces
> > of
> > information, a code "B05" and a value "1" as follows. The value can be a
> > range such as 1 to 5 or 1 to 100.
> >
> >
> >
> > "codesearch", "B05 1"
> >
> >
> >
> > This field and other identically names but differently valued fields in
> > the
> > same document are related to a specific person as identified by another
> > field say SSN. So, one person can have multiple code searches. Both of
> the
> > codesearch values are related to one another and must be searchable such
> > as
> >
> >
> >
> > Return all persons with a codesearch value of B05 ranging from 1 to 3.
> >
> >
> >
> > How can I go about this? Do these codesearch fields need to be in a
> > separate
> > index related by SSN?
> >
> >
> >
> > Thanks in advance.
> >
> >
> >
> > John G.
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Re-tokenized-fields-disappear-tp19850534p19863821.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_48171_6326226.1223403900791--

From java-user-return-36526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 08 02:12:14 2008
Return-Path: <java-user-return-36526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39099 invoked from network); 8 Oct 2008 02:12:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Oct 2008 02:12:14 -0000
Received: (qmail 21108 invoked by uid 500); 8 Oct 2008 02:12:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21084 invoked by uid 500); 8 Oct 2008 02:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21073 invoked by uid 99); 8 Oct 2008 02:12:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 19:12:05 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 02:11:01 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 1ACCDFE21F
	for <java-user@lucene.apache.org>; Tue,  7 Oct 2008 19:11:06 -0700 (PDT)
Message-Id: <215B9567-C833-4BF6-B566-A8E33A6CB66F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <8ba65dac0810062037h260a466fv1e7350fc403e8658@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: advice on using Lucene for sorting based on payloads
Date: Tue, 7 Oct 2008 22:11:06 -0400
References: <8ba65dac0810062037h260a466fv1e7350fc403e8658@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure if I fully get it, but bear with me...

Inline below.

On Oct 6, 2008, at 11:37 PM, Alexander Devine wrote:

> Hi Luceners,
>
> I have a particular sorting problem and I wanted some advice on what  
> the
> best implementation approach would be. We currently use Lucene as the
> searching engine for our vacation rental website. Each vacation rental
> property is represented by a single document in Lucene. We want to  
> add a
> feature that allows users to sort results by price. The problem is  
> that each
> rental property can potentially have a different price for each day.  
> For
> example, many rental properties charge more on weekends, or higher  
> rates for
> on-season vs. off-season. When a user performs a search, they can  
> specify
> the start and end dates of their desired travel, so we should be  
> able to
> calculate the total price for that time period for each property by  
> adding
> up the price for each day.
>
> I was thinking of implementing this using payloads. Each document  
> would have
> a "priceByDate" field and there would be one term stored for each  
> day for
> the next 2 years (which is as far out as we support booking a  
> property).

Don't you then have to update every document every day?


> The
> payload associated with each term would be the price, and then when
> searching I could use those payloads as basis for scoring the docs  
> using a
> BoostingTermQuery. For example, suppose someone was searching for  
> travel
> dates Dec 1 - Dec 5, I would create a query like so:
>
> BooleanQuery query = new BooleanQuery();
> query.add(new PriceBoostingTermQuery(new Term("priceByDate",  
> "20081201")),
> BooleanClause.Occur.MUST);
> query.add(new PriceBoostingTermQuery(new Term("priceByDate",  
> "20081202")),
> BooleanClause.Occur.MUST);
> query.add(new PriceBoostingTermQuery(new Term("priceByDate",  
> "20081203")),
> BooleanClause.Occur.MUST);
> query.add(new PriceBoostingTermQuery(new Term("priceByDate",  
> "20081204")),
> BooleanClause.Occur.MUST);
>
> PriceBoostingTermQuery would be a subclass of BoostingTermQuery that
> overrides getSimilarity() to return a Similarity with a custom  
> scorePayload
> method that scores based on the price.
>
> Does this approach sound reasonable? Can anyone think of a better  
> approach?
> One thing I don't understand is that the score needs to be the SUM  
> (or the
> average) of all the payloads - how does the BooleanQuery handle  
> that? Also,
> I need to get the calculated total price back to the caller, and I'm  
> worried
> that making priceByDate a stored field will have negative performance
> implications. Perhaps there is some way I could just return the  
> calculated
> price as the score and then get it from the ScoreDoc?
>
> Thanks for any and all help, and a huge thank you to all the Lucene  
> devs for
> a great product. The reason I'm trying to solve this problem in Lucene
> instead of a database is because Lucene is so much faster for our  
> queries
> and I don't want to add a DB into the mix.
>


I think you would be better off with a Function Query (see the  
org.apache.search.function package), but I am not sure.

How do you calculate the cost of the rental?  Is there some way to  
just factor that into the scoring process?  I think if you could do  
this, then you could implement a Function Query to do so.

You might look at Solr's function query capabilities as well.


> Alex

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 08 05:43:43 2008
Return-Path: <java-user-return-36527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5073 invoked from network); 8 Oct 2008 05:43:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Oct 2008 05:43:43 -0000
Received: (qmail 37447 invoked by uid 500); 8 Oct 2008 05:43:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37415 invoked by uid 500); 8 Oct 2008 05:43:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37404 invoked by uid 99); 8 Oct 2008 05:43:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Oct 2008 22:43:34 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alex.devine@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 05:42:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3690911rvb.5
        for <java-user@lucene.apache.org>; Tue, 07 Oct 2008 22:42:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=oq72pWoJC6EBz2+bSs8i5gseevjDoEAZGgc2TUi5XXU=;
        b=D7XVxnPIML3F1Eo5qNRc2KH6+Ok62EdIKwqN97zDGPheUky0bkPpy0sWGzcACbkWrs
         3QKY2lQWYrAHo7f6H6eWkahE0wQ1/OjAzwUzpiB45HSUgP2lNuGgJ/HpfSibB/juW/3o
         qmihi3960cIe4KhWKAiwnvhwN3FaLaVl4jmlA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=S94suSwbFmibpZlHUmRsIFlupjkU7MYNNDMF/HGuZLsJFqZ4nBBN68xyJtdPm3ZDUw
         iAvdoaXaHtYbX1nEF9G8s+j84uDbscpshQIhl9+oI9DzpTehuBT5GadtT03td1xzIAoM
         QdChKokFkSYFMI2uP4ZE/XqldF0mkgo4zTvpQ=
Received: by 10.114.193.1 with SMTP id q1mr8526403waf.70.1223444577758;
        Tue, 07 Oct 2008 22:42:57 -0700 (PDT)
Received: by 10.114.178.9 with HTTP; Tue, 7 Oct 2008 22:42:57 -0700 (PDT)
Message-ID: <8ba65dac0810072242v7152a825xd48d7806dcad19e@mail.gmail.com>
Date: Wed, 8 Oct 2008 00:42:57 -0500
From: "Alexander Devine" <alex.devine@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: advice on using Lucene for sorting based on payloads
In-Reply-To: <215B9567-C833-4BF6-B566-A8E33A6CB66F@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43585_28994796.1223444577761"
References: <8ba65dac0810062037h260a466fv1e7350fc403e8658@mail.gmail.com>
	 <215B9567-C833-4BF6-B566-A8E33A6CB66F@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43585_28994796.1223444577761
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks very much for your response, and for pointing me in the direction
towards Function Queries - you saved me a ton of time! You're right, that
seems to be a much better fit for what I am doing. My responses are below.

On Tue, Oct 7, 2008 at 9:11 PM, Grant Ingersoll <gsingers@apache.org> wrote:

> Not sure if I fully get it, but bear with me...
>
> Inline below.
>
> On Oct 6, 2008, at 11:37 PM, Alexander Devine wrote:
>
>  Hi Luceners,
>>
>> I have a particular sorting problem and I wanted some advice on what the
>> best implementation approach would be. We currently use Lucene as the
>> searching engine for our vacation rental website. Each vacation rental
>> property is represented by a single document in Lucene. We want to add a
>> feature that allows users to sort results by price. The problem is that
>> each
>> rental property can potentially have a different price for each day. For
>> example, many rental properties charge more on weekends, or higher rates
>> for
>> on-season vs. off-season. When a user performs a search, they can specify
>> the start and end dates of their desired travel, so we should be able to
>> calculate the total price for that time period for each property by adding
>> up the price for each day.
>>
>> I was thinking of implementing this using payloads. Each document would
>> have
>> a "priceByDate" field and there would be one term stored for each day for
>> the next 2 years (which is as far out as we support booking a property).
>>
>
> Don't you then have to update every document every day?
>

No, I should have been more clear. At any point in time a property has at
most 2 years of future pricing data, and as each day passes there is a day
less of pricing data. We update our documents when our rental owners make a
change to their data, and we also have some automated processes that cause
rental data to be updated, so in general every document gets updated about
every 1-2 months.

>
>
>  The
>> payload associated with each term would be the price, and then when
>> searching I could use those payloads as basis for scoring the docs using a
>> BoostingTermQuery. For example, suppose someone was searching for travel
>> dates Dec 1 - Dec 5, I would create a query like so:
>>
>> BooleanQuery query = new BooleanQuery();
>> query.add(new PriceBoostingTermQuery(new Term("priceByDate", "20081201")),
>> BooleanClause.Occur.MUST);
>> query.add(new PriceBoostingTermQuery(new Term("priceByDate", "20081202")),
>> BooleanClause.Occur.MUST);
>> query.add(new PriceBoostingTermQuery(new Term("priceByDate", "20081203")),
>> BooleanClause.Occur.MUST);
>> query.add(new PriceBoostingTermQuery(new Term("priceByDate", "20081204")),
>> BooleanClause.Occur.MUST);
>>
>> PriceBoostingTermQuery would be a subclass of BoostingTermQuery that
>> overrides getSimilarity() to return a Similarity with a custom
>> scorePayload
>> method that scores based on the price.
>>
>> Does this approach sound reasonable? Can anyone think of a better
>> approach?
>> One thing I don't understand is that the score needs to be the SUM (or the
>> average) of all the payloads - how does the BooleanQuery handle that?
>> Also,
>> I need to get the calculated total price back to the caller, and I'm
>> worried
>> that making priceByDate a stored field will have negative performance
>> implications. Perhaps there is some way I could just return the calculated
>> price as the score and then get it from the ScoreDoc?
>>
>> Thanks for any and all help, and a huge thank you to all the Lucene devs
>> for
>> a great product. The reason I'm trying to solve this problem in Lucene
>> instead of a database is because Lucene is so much faster for our queries
>> and I don't want to add a DB into the mix.
>>
>>
>
> I think you would be better off with a Function Query (see the
> org.apache.search.function package), but I am not sure.
>
> How do you calculate the cost of the rental?  Is there some way to just
> factor that into the scoring process?  I think if you could do this, then
> you could implement a Function Query to do so.


Yep, after looking at the function package this looks exactly like what I
want to do. Essentially each rental has a set of "rate periods" which
specify the rates between specific dates, e.g.
    <ratePeriod start="2008-11-01" end="2008-11-21" weeklyPrice="600.00"
midweekPrice="100.00" weekendPrice="125.00"/>
    <ratePeriod start="2008-11-21" end="2008-11-30" weeklyPrice="900.00"
midweekPrice="1500.00" weekendPrice="200.00"/>
We want to look at the intersection between the user's desired travel dates
and the ratePeriods to determine the total cost. The thing I like about the
Function queries is this lets us get as arbitrarily complex as we want with
our business rules for the price calculation, and we should be able to tweak
these rules to tradeoff between quoted price accuracy/implementation
simplicity/performance.

Thanks,
Alex

>
>
> You might look at Solr's function query capabilities as well.
>

>
>  Alex
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43585_28994796.1223444577761--

From java-user-return-36528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 08 09:02:20 2008
Return-Path: <java-user-return-36528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76928 invoked from network); 8 Oct 2008 09:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Oct 2008 09:02:20 -0000
Received: (qmail 42325 invoked by uid 500); 8 Oct 2008 09:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42296 invoked by uid 500); 8 Oct 2008 09:02:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42285 invoked by uid 99); 8 Oct 2008 09:02:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 02:02:12 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 09:01:10 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3215774fkq.5
        for <java-user@lucene.apache.org>; Wed, 08 Oct 2008 02:01:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=TzlSMJI+0cCpz8NsNZ1AEmBAN7cWZWtl8DC/kgGGY2A=;
        b=lYrIvMHLy+bfxuVnsYpj0/4c0ohjK/nTHmDGZFW2d2K4jZ1dA4S9a1YnxiGWecgY0+
         HDXzWnrMgrMuwuw0veZpegjbZ2ZeStdHfwRScRGkRqujKwA3a9FVFHY7SV+oOqeP2Au+
         KKEPwwTJnCdIuFip+iBgJNx+YpiJSZWUI3hLE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=PCne73lzUudBEho3lN21LxMR3ErHSFOb6Z4FJLGbxwCPSYaeR7b1fOG8188jMv5kaz
         fCSVa1IpkNkxeX9uS9FHNf1Km3H7KuddGXRnebIopX0NQCABkCAhSNtBaZgyRpDr3+ca
         T9912b+gV9AQTR2VG2CnZ/RfdqmtWedqUwFw4=
Received: by 10.187.201.4 with SMTP id d4mr1504699faq.17.1223456505360;
        Wed, 08 Oct 2008 02:01:45 -0700 (PDT)
Received: by 10.187.215.13 with HTTP; Wed, 8 Oct 2008 02:01:45 -0700 (PDT)
Message-ID: <5816fbdd0810080201u79bb7be7m1d31be856901da3f@mail.gmail.com>
Date: Wed, 8 Oct 2008 14:31:45 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Only last field indexed
In-Reply-To: <359a92830810071123s4dab155aka6190384c4d5e57e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65307_29253496.1223456505355"
References: <6bfa8b2b0810071028x62433456j55760d76837575d5@mail.gmail.com>
	 <359a92830810071123s4dab155aka6190384c4d5e57e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65307_29253496.1223456505355
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You are doing this kind of a thing?

document.add(new Field("id", id1, Field.Store.YES, Field.Index.TOKENIZED));
document.add(new Field("id", id2, Field.Store.YES, Field.Index.TOKENIZED));

I doubt whether this is possible. What happen to the value id1 when the
value id2 added to the same filed? merged or overridden?
Just curious.


Kalani.

On Tue, Oct 7, 2008 at 11:53 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Let's see the indexing code. It is perfectly reasonable to
> add data to a field multiple times, so I suspect you're
> doing something wrong.....
>
> What evidence do you have that it's only the last field that's
> indexed?
>
> Best
> Erick
>
> On Tue, Oct 7, 2008 at 1:28 PM, John Griffin <griffij@sosstaffing.com
> >wrote:
>
> > Guys,
> >
> > I'm adding multiple fields with the same name to a document as Store.YES,
> > Indexed.TOKENIZED and it seems that only the last field entered is
> indexed.
> > I read about this somewhere her but now I can't find it, naturally. Is
> > there
> > a work around? does someone have a pointer to this discussion? Can
> someone
> > help?
> >
> > Thanks in advance.
> >
> > John G.
> >
>



-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_65307_29253496.1223456505355--

From java-user-return-36529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 08 12:10:08 2008
Return-Path: <java-user-return-36529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47784 invoked from network); 8 Oct 2008 12:10:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Oct 2008 12:10:08 -0000
Received: (qmail 79881 invoked by uid 500); 8 Oct 2008 12:10:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79289 invoked by uid 500); 8 Oct 2008 12:09:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79278 invoked by uid 99); 8 Oct 2008 12:09:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 05:09:58 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_NEUTRAL,WHOIS_DMNBYPROXY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.165] (HELO smtp116.mail.mud.yahoo.com) (209.191.84.165)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 08 Oct 2008 12:08:51 +0000
Received: (qmail 41534 invoked from network); 8 Oct 2008 12:09:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=cndwfKgj4V4pprh5AZ1dEja5/x8RiLwx/dff9WXYdJmdy/Kngzy7N1Zjm8VO2L55HDV/CIyiTozxU6BzazjpHKnhzuPLBP78V33CAH7OnJ0fAFnlcclvhCPCuxoY+z1tWgNT24v2rjIu80oLHoxkq+vTyv/YOvoODFnwPB+w9pY=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp116.mail.mud.yahoo.com with SMTP; 8 Oct 2008 12:09:24 -0000
X-YMail-OSG: XbmmY0IVM1mRID4sFBb7u6PffHF5pR0DuwU0GuRG_Q_q9OK6uRKdEMYQPMBLgY5AnWs9O0e8Gn9U5UqWT2BxvCs_ynuBpE9FlvPVK8w2voPC9GCz1P7IKcLaApDCPSTEuE4Gmsh9UFEjSuJG2XWCmEi_kQ.CAeBrujjiQS5SP43TVViQMvCnFUrTAepWsA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <041401c9293e$b4be95b0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com> <867513fe0810030918m1b3ecd64k98ed01214caaaa5d@mail.gmail.com> <036d01c9276d$268e2c60$330bc30a@sv.us.sonicwall.com> <867513fe0810061148h2de6f71av6867bdbbdea5dc59@mail.gmail.com> <03f201c92863$710005b0$330bc30a@sv.us.sonicwall.com> <867513fe0810070525u706cd73ag7b4e846e72e112a@mail.gmail.com>
Subject: Re: Single searcher vs Multi Searcher
Date: Wed, 8 Oct 2008 17:39:21 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Anshum,

In my case i have to add /modify records to the current index database and 
there will be only delete in older index  DB. I will not have a situitation 
of updating the older records.

Please brief me about your requirement and how you configured your database.
Whether you have any incremental updates??
What have gained by sharding the index.

Regards
Ganesh


----- Original Message ----- 
From: "Anshum" <anshumg@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, October 07, 2008 5:55 PM
Subject: Re: Single searcher vs Multi Searcher


> There were all of the links I could find:
> http://findmeajob.wordpress.com/2007/07/31/lucene-singlesearcher-vs-multisearcher/
> http://archives.devshed.com/forums/java-118/how-do-lucene-ids-work-with-multireader-and-multisearcher-993682.html
>
> It has been only out of personal experimentation.
> Maintaining 4 indexes and having a multisearcher for the same sounds ok to
> me, though it might(most probably would) use up more time (depending on 
> your
> term/doc distribution).
> I have tried multisearchers for indexes that are sized at around 18Gs with
> over 10 million records in them and they seem to be working fine. Memory
> utilization hasn't really been my problem though maintenance has been
> required to be taken care of if I had record updates as well i.e.
> Lets assume we have 4 indexes {1,2,3,4} with 4 being the oldest one. Now a
> document got updated and so you would want to move it to the freshest 
> index
> viz. index 1. In this case you would also have to delete this document 
> from
> index 4 (after figuring out that it exists in 4) else this doc would show 
> up
> as 2 hits using a multisearcher.
> This is the document movement that I was talking about.
> Talking only about online resource utilization ( as what I just spoke 
> about
> is generally an offline process), you would have to spend extra resource 
> to
> merge the hits from the different indexes.
> The other overhead in case of a multisearcher would be of creating those
> many searchers - for each index(though shouldn't be much, just though 
> would
> point out).
> I guess you should try it as speed of search is not realy all that 
> important
> to you as compared to running it on a singe box within the memory
> limitation.
>
>
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Tue, Oct 7, 2008 at 3:29 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> Hello Anusham,
>>
>> My intention is to shard the index after every 7 days (week). After 30
>> days, (4th  week) the first DB may get deleted. At any point of time i 
>> will
>> be maitaining 3 to 4 DB.
>>
>> I want to know the pros and cons of the MultiSearcher or Index sharding
>> approach. Any web links would be helpful.
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Tuesday, October 07, 2008 12:18 AM
>>
>> Subject: Re: Single searcher vs Multi Searcher
>>
>>
>>  Hi Ganesh,
>>> About the memory consumption while sorting, it would end up using 
>>> similar
>>> amounts, perhaps even more.. like in the case of regular parallel
>>> programming algorithms (hoping that you intend to search using a 
>>> parallel
>>> multi searcher). Would you have to query particular indexes only for a
>>> particular search or would you be searching over all the indexes and 
>>> then
>>> follow it up by merger (which the parallel multi searcher would do
>>> efficiently).?
>>> Also, I guess 30 indexes would be a little too many, haven't really 
>>> tried
>>> out those many indexes for a multisearcher.
>>> As far as maintenance of DB is concerned, it might be easy as long as 
>>> you
>>> don't have any document updates, in which case you'd have to shift the
>>> documents from one DB/index to another (which includes creating an entry
>>> in
>>> the latest index/DB and deleting the record from the older DB).
>>> I guess you'd have to pilot it, in case memory is an issue in your case
>>> and
>>> not speed, you could try a regular multisearcher instead of a parallel
>>> multisearcher.
>>> I guess when you say maintenance of the DB gets easier, you mean that 
>>> the
>>> data in each individual table is controlled (but remember there could be
>>> other bigger hassles like the one mentioned above about moving data
>>> between
>>> indexes/DB).
>>>
>>> --
>>> Anshum Gupta
>>> Naukri Labs!
>>> http://ai-cafe.blogspot.com
>>>
>>> The facts expressed here belong to everybody, the opinions to me. The
>>> distinction is yours to draw............
>>>
>>>
>>> On Mon, Oct 6, 2008 at 10:06 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>
>>>  Hello Anshum,
>>>>
>>>> My index is growing 1 million documents per day. Initially i planned to
>>>> have a single database but the sorting of one or more fields consumes
>>>> more
>>>> RAM. Whether sharding the index would also consume the same.
>>>>
>>>> My application should co-exist with other application of my product and
>>>> my
>>>> app could get 1 GB of RAM. Search speed is fine but i need to display 
>>>> the
>>>> result in the sorted order.
>>>>
>>>> I thought to keep 7 days of documents in one index and create one more
>>>> after the 7 days. After 30 days the first index may get deleted. I need
>>>> to
>>>> keep the documents in the index DB for 30 days. My Index DB is in HDD.
>>>>
>>>> I want to the pros and cons of sharding. I think maintance of the DB
>>>> becomes easier.
>>>>
>>>> It would be very much helpful, if you share some of your thoughts.
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>>
>>>> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Friday, October 03, 2008 9:48 PM
>>>> Subject: Re: Single searcher vs Multi Searcher
>>>>
>>>>
>>>>
>>>>  Hi Ganesh,
>>>>
>>>>>
>>>>> I have experimented with sharded indexes and they seem to benefit
>>>>> me(atleast
>>>>> in my case). I would like to know a few things before I answer your
>>>>> question:
>>>>> 1. Do you have a reasonable criteria ( a calculated one) to shard the
>>>>> indexes?
>>>>> 2. How do you plan to split the index? Is it going to be document 
>>>>> based
>>>>> (which I guess it should be as otherwise you would have to build a
>>>>> complete
>>>>> distributed system)
>>>>> 3. Do you plan to put your indexes on the RAM or on (physically)
>>>>> seperate
>>>>> HDDs?
>>>>>
>>>>> Though all said and done, sharded indexes are a good approach, if done
>>>>> the
>>>>> right way.
>>>>> --
>>>>> Anshum Gupta
>>>>> Naukri Labs!
>>>>> http://ai-cafe.blogspot.com
>>>>>
>>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>>> distinction is yours to draw............
>>>>>
>>>>>
>>>>> On Fri, Oct 3, 2008 at 3:01 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>>
>>>>>  Hello all,
>>>>>
>>>>>>
>>>>>> My indexing is growing by 1 million records per day and the memory
>>>>>> consumption of the searcher object is quite high.
>>>>>>
>>>>>> There are different opinion in the groups. Few suggest to use single
>>>>>> database and few to use sharding. My Database has 10 million records
>>>>>> now
>>>>>> and
>>>>>> it might go till 30 million or more. I plan to shard the index. but
>>>>>> Multisearcher will give me benifit.
>>>>>>
>>>>>> Regards
>>>>>> Ganesh
>>>>>>
>>>>>>
>>>>>> Send instant messages to your online friends
>>>>>> http://in.messenger.yahoo.com
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>  Send instant messages to your online friends
>>>> http://in.messenger.yahoo.com
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 08 12:45:56 2008
Return-Path: <java-user-return-36530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66465 invoked from network); 8 Oct 2008 12:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Oct 2008 12:45:56 -0000
Received: (qmail 39937 invoked by uid 500); 8 Oct 2008 12:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39849 invoked by uid 500); 8 Oct 2008 12:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39838 invoked by uid 99); 8 Oct 2008 12:45:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 05:45:48 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.88 as permitted sender)
Received: from [65.55.111.88] (HELO blu0-omc2-s13.blu0.hotmail.com) (65.55.111.88)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 12:44:42 +0000
Received: from BLU149-W64 ([65.55.111.73]) by blu0-omc2-s13.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 8 Oct 2008 05:44:56 -0700
Message-ID: <BLU149-W648984021ED79C476AE687B93B0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_ec0fb17b-7842-42d8-95b5-1fb77696e7a7_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Wildcard query ...
Date: Wed, 8 Oct 2008 08:44:56 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 08 Oct 2008 12:44:56.0535 (UTC) FILETIME=[AB01F670:01C92943]
X-Virus-Checked: Checked by ClamAV on apache.org

--_ec0fb17b-7842-42d8-95b5-1fb77696e7a7_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Let's say my index has two fields (Type and Description).  Type is either 0=
 or 1 and Description is a string (up to 250 characters).  I'd like to exec=
ute the following search:

    +Description:Honda* +Type:0

Would the query run faster if I specify the Type first:

    +Type:0 +Description:Honda*

I imagine it's much faster for Lucene to evaluate the Type clause than the =
Description clause.  Is Lucene smart enough to filter out the Type 1 docume=
nts first before evaluating the more expensive wildcard clause? I'd like to=
 understand (at a high level) how Lucene would process the query above.  Th=
ank you.

_________________________________________________________________
Get more out of the Web. Learn 10 hidden secrets of Windows Live.
http://windowslive.com/connect/post/jamiethomson.spaces.live.com-Blog-cns!5=
50F681DAD532637!5295.entry?ocid=3DTXT_TAGLM_WL_domore_092008=

--_ec0fb17b-7842-42d8-95b5-1fb77696e7a7_--

From java-user-return-36531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 08 12:58:52 2008
Return-Path: <java-user-return-36531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70918 invoked from network); 8 Oct 2008 12:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Oct 2008 12:58:52 -0000
Received: (qmail 60313 invoked by uid 500); 8 Oct 2008 12:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60275 invoked by uid 500); 8 Oct 2008 12:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60261 invoked by uid 99); 8 Oct 2008 12:58:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 05:58:45 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 12:57:42 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3865642rvb.5
        for <java-user@lucene.apache.org>; Wed, 08 Oct 2008 05:58:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=UW9HqAIq1YEi1IoYP8EeMp/DAUyRQQQAGNalyi0rG94=;
        b=Yc5f1DYRw0fhWFjA2lzBO4+9KVXkR0dcAXkMiwd3QeCIfBqu2z6046N0l+2nD8eh4Q
         R2NLqMLSef4RqSeocBrIEFGIh9jB//1DDb+BojNYfYeocrv10M6fW37roEtdlP1+gnHy
         Sx7ySG/4K+MndUtBONZpqNHYacKlbHj3MeIPM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=W36iJHVxb242+MpwGyXEN8/gbAG7Ua9Dfi3DyfJ0tBHRhFtQXZ7C8RJJo2NRrAPcjH
         IEdT8RBb39NCBDxBREqOmFVYQmWca/NYtJ7RP/dTtgoWG/O0W44bJNOe/3JpboS7Jk6i
         9e/8BCLpY9KH0SJc/+D9bCeGpmcPWjkJQ7Xaw=
Received: by 10.141.197.14 with SMTP id z14mr4843831rvp.283.1223470685971;
        Wed, 08 Oct 2008 05:58:05 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Wed, 8 Oct 2008 05:58:05 -0700 (PDT)
Message-ID: <359a92830810080558y6b3437e6ta673f900689f1895@mail.gmail.com>
Date: Wed, 8 Oct 2008 08:58:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Only last field indexed
In-Reply-To: <5816fbdd0810080201u79bb7be7m1d31be856901da3f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57934_27862774.1223470685986"
References: <6bfa8b2b0810071028x62433456j55760d76837575d5@mail.gmail.com>
	 <359a92830810071123s4dab155aka6190384c4d5e57e@mail.gmail.com>
	 <5816fbdd0810080201u79bb7be7m1d31be856901da3f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57934_27862774.1223470685986
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Kalani:

You are mistaken to think this is not possible. In fact
it is explicitly supported, and I've done it in many
situations. These two are entirely identical if you
use an analyzer that breaks the stream up on
words.

doc = new Document()
doc.add("myfield", "some text", blah blah)
doc.add("myfield", "here is more text", blah blah)
indexwriter.addDocument(doc)


and


doc = new Document()
doc.add("myfield", "some text here is more text", blah blah)
indexwriter.addDocument(doc)


except for a rather technical issue that if your PositionIncrementGap is
greater than one (say 10), the first form will have the token "here"
at offset 12  and the second form will have the token "here" at offset 2.
Which is useful and why the PositionIncrementGap is there in
the first place.

Note that they would probably not be identical with, say KeywordAnalyzer
though.

Which you can easily check yourself with Luke....

Best
Erick




On Wed, Oct 8, 2008 at 5:01 AM, Kalani Ruwanpathirana <kalanir@gmail.com>wrote:

> You are doing this kind of a thing?
>
> document.add(new Field("id", id1, Field.Store.YES, Field.Index.TOKENIZED));
> document.add(new Field("id", id2, Field.Store.YES, Field.Index.TOKENIZED));
>
> I doubt whether this is possible. What happen to the value id1 when the
> value id2 added to the same filed? merged or overridden?
> Just curious.
>
>
> Kalani.
>
> On Tue, Oct 7, 2008 at 11:53 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > Let's see the indexing code. It is perfectly reasonable to
> > add data to a field multiple times, so I suspect you're
> > doing something wrong.....
> >
> > What evidence do you have that it's only the last field that's
> > indexed?
> >
> > Best
> > Erick
> >
> > On Tue, Oct 7, 2008 at 1:28 PM, John Griffin <griffij@sosstaffing.com
> > >wrote:
> >
> > > Guys,
> > >
> > > I'm adding multiple fields with the same name to a document as
> Store.YES,
> > > Indexed.TOKENIZED and it seems that only the last field entered is
> > indexed.
> > > I read about this somewhere her but now I can't find it, naturally. Is
> > > there
> > > a work around? does someone have a pointer to this discussion? Can
> > someone
> > > help?
> > >
> > > Thanks in advance.
> > >
> > > John G.
> > >
> >
>
>
>
> --
> Kalani Ruwanpathirana
> Department of Computer Science & Engineering
> University of Moratuwa
>

------=_Part_57934_27862774.1223470685986--

From java-user-return-36532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 08 15:15:57 2008
Return-Path: <java-user-return-36532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61763 invoked from network); 8 Oct 2008 15:15:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Oct 2008 15:15:57 -0000
Received: (qmail 65679 invoked by uid 500); 8 Oct 2008 15:15:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65321 invoked by uid 500); 8 Oct 2008 15:15:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65310 invoked by uid 99); 8 Oct 2008 15:15:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 08:15:50 -0700
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,DNS_FROM_SECURITYSAGE,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 15:14:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Knakz-0006T0-Lt
	for java-user@lucene.apache.org; Wed, 08 Oct 2008 08:15:21 -0700
Message-ID: <19880927.post@talk.nabble.com>
Date: Wed, 8 Oct 2008 08:15:21 -0700 (PDT)
From: excitingComm2 <lucene@mt2009.com>
To: java-user@lucene.apache.org
Subject: Access Scoring Values of Lucene for Post-Processing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lucene@mt2009.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi everybody,

I am using Lucene for searching items in a online shop. E.g. I search the
shop for "shirt" I get a resultset from lucene. Now I want to improve the
sort order by calculating the lucene score with my business data, e.g. sales
or margin. Is there any possibility to get the scoring value of lucene, so
that I can put it into my own formula and re-sort the products?

http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/Hit.html
The method getScore() sounds great, but is unfortunately marked as
deprecated.

Regards,
ExComm2
-- 
View this message in context: http://www.nabble.com/Access-Scoring-Values-of-Lucene-for-Post-Processing-tp19880927p19880927.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 08 15:53:08 2008
Return-Path: <java-user-return-36533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76748 invoked from network); 8 Oct 2008 15:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Oct 2008 15:53:07 -0000
Received: (qmail 30551 invoked by uid 500); 8 Oct 2008 15:53:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30519 invoked by uid 500); 8 Oct 2008 15:53:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30505 invoked by uid 99); 8 Oct 2008 15:53:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 08:53:04 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2008 15:52:01 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Wed, 8 Oct 2008 11:52:11 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 8 Oct 2008 11:48:12 -0400
Subject: custom tag scoring question
Thread-Topic: custom tag scoring question
Thread-Index: AckpXUUkG13R3gXJS6+NucoxZFY/aQ==
Message-ID: <36B4EF9511887240A973A93E7878B0560A0E3DECC6@US1-IIEX1.IICORP.DOM>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_36B4EF9511887240A973A93E7878B0560A0E3DECC6US1IIEX1IICOR_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_36B4EF9511887240A973A93E7878B0560A0E3DECC6US1IIEX1IICOR_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We have a custom "tagger" application which identifies certain entities (su=
ch as companies, etc.) and applies a "relevance" value to each entity based=
 upon overall relevance in some document.

Then we index these "tags" into Lucene index by storing them in an indexed =
field (same name, different values), for example "company=3DA, company=3DB,=
 company=3DC",etc.

I know how to set the boost on each field according the relevance value fro=
m our tagging application.  However, sorting does not seem to work properly=
, since according to documentation all boost values per document under fiel=
ds of the same name are actually combined by multiplying together:

>From http://lucene.apache.org/java/docs/scoring.html:

"For each field of a document, all boosts of that field (i.e. all boosts un=
der the same field name in that doc) are multiplied."

So if I have two document, each with some entities:

Doc 1: A (100%), B (50%), C (25%)
Doc2: A(75%), D (50%)

Then query for A should return Doc1 ahead of Doc2.  But seems like what hap=
pens is this:

Doc1 boost =3D 1.0 * 0.5 * 0.25 =3D 0.125
Doc2 boost =3D 0.75 * 0.50 =3D 0.375

Therefore query for A returns Doc2 ahead of Doc1.

Is there a way around this (besides creating a different field name for eac=
h tag)?  Can I create custom similarity or scoring classes to handle this a=
t query time somehow?

Thanks,
Bob

--_000_36B4EF9511887240A973A93E7878B0560A0E3DECC6US1IIEX1IICOR_--

From java-user-return-36534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 09 14:33:44 2008
Return-Path: <java-user-return-36534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97240 invoked from network); 9 Oct 2008 14:33:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Oct 2008 14:33:43 -0000
Received: (qmail 27186 invoked by uid 500); 9 Oct 2008 14:33:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27087 invoked by uid 500); 9 Oct 2008 14:33:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27050 invoked by uid 99); 9 Oct 2008 14:33:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Oct 2008 07:33:33 -0700
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,DNS_FROM_SECURITYSAGE,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Oct 2008 14:32:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KnwZe-00048N-5F
	for java-user@lucene.apache.org; Thu, 09 Oct 2008 07:33:06 -0700
Message-ID: <19900220.post@talk.nabble.com>
Date: Thu, 9 Oct 2008 07:33:06 -0700 (PDT)
From: Albert Juhe <albertjuhe@gmail.com>
To: java-user@lucene.apache.org
Subject: wizard for search in Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: albertjuhe@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I want to make a wizard that can help to find n-grams terms.
For example:
If i want to search History, after write it the system propose you the
following searches:
history europe
history spain
history .....
Consulting the terms indexed.

Does it exits in Lucene?

thank you,
Albert
-- 
View this message in context: http://www.nabble.com/wizard-for-search-in-Lucene-tp19900220p19900220.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 09 19:05:19 2008
Return-Path: <java-user-return-36535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97616 invoked from network); 9 Oct 2008 19:05:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Oct 2008 19:05:19 -0000
Received: (qmail 72026 invoked by uid 500); 9 Oct 2008 19:05:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71096 invoked by uid 500); 9 Oct 2008 19:05:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 93871 invoked by uid 99); 9 Oct 2008 16:50:28 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Date: Thu, 9 Oct 2008 18:49:26 +0200
From: =?iso-8859-1?Q?Asbj=F8rn_A=2E?= Fellinghaug <asbjorn@fellinghaug.com>
To: java-user@lucene.apache.org
Subject: Re: wizard for search in Lucene
Message-ID: <20081009164925.GA22879@stud.ntnu.no>
References: <19900220.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <19900220.post@talk.nabble.com>
User-Agent: Mutt/1.5.11
X-Virus-Scanned: Debian amavisd-new at bene2.itea.ntnu.no
X-Virus-Checked: Checked by ClamAV on apache.org

Albert Juhe:
> 
> Hi,
> 
> I want to make a wizard that can help to find n-grams terms.
> For example:
> If i want to search History, after write it the system propose you the
> following searches:
> history europe
> history spain
> history .....
> Consulting the terms indexed.
> 
> Does it exits in Lucene?

Hi.

I interpret your question in such a way that you want autocompletion in
your search system? In that case, I believe there are some Analyzer's
which does this in the 'contrib' package. Also, I've created an Analyzer
which creates "bigrams" (n-gram of size 2) in my master thesis.
Feel free to download it from this page: 
http://asbjorn.fellinghaug.com/blog/2008/08/the-code-for-my-master-thesis/

Also, have a look at the package org.apache.lucene.analysis.ngram:
http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/ngram/package-summary.html

-- 
Asbjrn A. Fellinghaug
asbjorn@fellinghaug.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 02:31:06 2008
Return-Path: <java-user-return-36536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43823 invoked from network); 10 Oct 2008 02:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 02:31:06 -0000
Received: (qmail 88914 invoked by uid 500); 10 Oct 2008 02:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88885 invoked by uid 500); 10 Oct 2008 02:30:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88874 invoked by uid 99); 10 Oct 2008 02:30:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Oct 2008 19:30:58 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 02:29:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 2BDEA2C2A5C
	for <java-user@lucene.apache.org>; Thu,  9 Oct 2008 20:29:59 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 05303-05 for <java-user@lucene.apache.org>;
	Thu, 9 Oct 2008 20:29:57 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 56875292C40
	for <java-user@lucene.apache.org>; Thu,  9 Oct 2008 20:29:57 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <6bfa8b2b0810071028x62433456j55760d76837575d5@mail.gmail.com> <359a92830810071123s4dab155aka6190384c4d5e57e@mail.gmail.com> <5816fbdd0810080201u79bb7be7m1d31be856901da3f@mail.gmail.com>
Subject: RE: Only last field indexed
Date: Thu, 9 Oct 2008 20:29:36 -0600
Message-ID: <2D6A559981E440C1A08FCFAFD393C23D@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <5816fbdd0810080201u79bb7be7m1d31be856901da3f@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AckpJJ3Q0bslo0lMSzy0DrJfAknO5QBWxzHA
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Kalani,

They are put into the document as separate fields. That's why there are
getFields() and deleteFields() methods on Document.

John G.

-----Original Message-----
From: Kalani Ruwanpathirana [mailto:kalanir@gmail.com] 
Sent: Wednesday, October 08, 2008 3:02 AM
To: java-user@lucene.apache.org
Subject: Re: Only last field indexed

You are doing this kind of a thing?

document.add(new Field("id", id1, Field.Store.YES, Field.Index.TOKENIZED));
document.add(new Field("id", id2, Field.Store.YES, Field.Index.TOKENIZED));

I doubt whether this is possible. What happen to the value id1 when the
value id2 added to the same filed? merged or overridden?
Just curious.


Kalani.

On Tue, Oct 7, 2008 at 11:53 PM, Erick Erickson
<erickerickson@gmail.com>wrote:

> Let's see the indexing code. It is perfectly reasonable to
> add data to a field multiple times, so I suspect you're
> doing something wrong.....
>
> What evidence do you have that it's only the last field that's
> indexed?
>
> Best
> Erick
>
> On Tue, Oct 7, 2008 at 1:28 PM, John Griffin <griffij@sosstaffing.com
> >wrote:
>
> > Guys,
> >
> > I'm adding multiple fields with the same name to a document as
Store.YES,
> > Indexed.TOKENIZED and it seems that only the last field entered is
> indexed.
> > I read about this somewhere her but now I can't find it, naturally. Is
> > there
> > a work around? does someone have a pointer to this discussion? Can
> someone
> > help?
> >
> > Thanks in advance.
> >
> > John G.
> >
>



-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 04:50:06 2008
Return-Path: <java-user-return-36537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76525 invoked from network); 10 Oct 2008 04:50:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 04:50:06 -0000
Received: (qmail 71300 invoked by uid 500); 10 Oct 2008 04:49:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71269 invoked by uid 500); 10 Oct 2008 04:49:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71258 invoked by uid 99); 10 Oct 2008 04:49:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Oct 2008 21:49:57 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS,WHOIS_DMNBYPROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 04:48:50 +0000
Received: by rv-out-0506.google.com with SMTP id f6so344198rvb.5
        for <java-user@lucene.apache.org>; Thu, 09 Oct 2008 21:49:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=6CvOARwQy/80gBwgUYKz0ncCjAGae408VZzWlcwff7I=;
        b=mKtRKeY9wWyZM4cglu9sr9mMmwIZwR6ZWz/GcRm7G+ms/qzdcusrhiPRXodte99xXd
         yYYruHwQqX7YCN1BnGi95eeolSkRT0baW0RrFjovYddnudOv9eFiZJ6l3+smZV18XS+f
         3apPcbreMPI2xKyloxgeqt3NiOPQ7ij4BgoxU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZdTJ3rvCpdO8MID3KovIeTY1PamS6Wg6BZZL3eScwMJhcXGPzipRp/CJ+QJTDdQ5f/
         jXv5VxiRSSykZqLhm9WALabt00oqZ875Qa7Q04uoREgeti4EVEK363sR1EN5GLHEhn+P
         /9pHFZ233pI/SUweg2Oe2v+TFQNOP1+mQcVDU=
Received: by 10.143.42.6 with SMTP id u6mr509534wfj.140.1223614156826;
        Thu, 09 Oct 2008 21:49:16 -0700 (PDT)
Received: by 10.142.49.5 with HTTP; Thu, 9 Oct 2008 21:49:16 -0700 (PDT)
Message-ID: <867513fe0810092149m62c5863cs9c8dbe27877a7ced@mail.gmail.com>
Date: Fri, 10 Oct 2008 10:19:16 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Single searcher vs Multi Searcher
In-Reply-To: <041401c9293e$b4be95b0$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_96262_15626003.1223614156816"
References: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com>
	 <867513fe0810030918m1b3ecd64k98ed01214caaaa5d@mail.gmail.com>
	 <036d01c9276d$268e2c60$330bc30a@sv.us.sonicwall.com>
	 <867513fe0810061148h2de6f71av6867bdbbdea5dc59@mail.gmail.com>
	 <03f201c92863$710005b0$330bc30a@sv.us.sonicwall.com>
	 <867513fe0810070525u706cd73ag7b4e846e72e112a@mail.gmail.com>
	 <041401c9293e$b4be95b0$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_96262_15626003.1223614156816
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ganesh,

Your situation seems pretty straight.
I did not really split my database (storage), just that while indexing, I
indexed the data into 'n' indexes (basis a particular field).
Talking about implementation and gain, I have tried using multi searcher as
well as parallel multisearcher and I seem to be running searches faster (my
priority being a better time complexity as compared to space complexity) in
case of a parallelmultisearcher.
This helps me perform my search in a little over 1/n times the regular
search time.
Also, there are times when I don't want to search on all the indexes and so
I end up only searching a select few indexes. I would advice you to shard
the indexes keeping in mind the search criteria as well so that, if possible
you search for lesser data as opposed to searching for everything.
Also, I did incrementally update my index and so deleted the older doc from
the older index and added it to a new incremental index (which was my
concern as this takes a little time assuming you have a lot of updates as
well).

All said and done, this is an implementation of doc based index sharding
i.e. everything for a particular document goes to a particular index. I also
tried splitting on terms (so that when I search for A and B, I know which
indexes store all docs (and other info) for the terms A and B. But this
would mean a lot of building things from scratch so I couldnt get to really
try it. There are a few distributed lucene implementations (though they are
not that good) you could have a look at them.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Oct 8, 2008 at 5:39 PM, Ganesh <emailgane@yahoo.co.in> wrote:

> Hello Anshum,
>
> In my case i have to add /modify records to the current index database and
> there will be only delete in older index  DB. I will not have a situitation
> of updating the older records.
>
> Please brief me about your requirement and how you configured your
> database.
> Whether you have any incremental updates??
> What have gained by sharding the index.
>
> Regards
> Ganesh
>
>
> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, October 07, 2008 5:55 PM
>
> Subject: Re: Single searcher vs Multi Searcher
>
>
>  There were all of the links I could find:
>>
>> http://findmeajob.wordpress.com/2007/07/31/lucene-singlesearcher-vs-multisearcher/
>>
>> http://archives.devshed.com/forums/java-118/how-do-lucene-ids-work-with-multireader-and-multisearcher-993682.html
>>
>> It has been only out of personal experimentation.
>> Maintaining 4 indexes and having a multisearcher for the same sounds ok to
>> me, though it might(most probably would) use up more time (depending on
>> your
>> term/doc distribution).
>> I have tried multisearchers for indexes that are sized at around 18Gs with
>> over 10 million records in them and they seem to be working fine. Memory
>> utilization hasn't really been my problem though maintenance has been
>> required to be taken care of if I had record updates as well i.e.
>> Lets assume we have 4 indexes {1,2,3,4} with 4 being the oldest one. Now a
>> document got updated and so you would want to move it to the freshest
>> index
>> viz. index 1. In this case you would also have to delete this document
>> from
>> index 4 (after figuring out that it exists in 4) else this doc would show
>> up
>> as 2 hits using a multisearcher.
>> This is the document movement that I was talking about.
>> Talking only about online resource utilization ( as what I just spoke
>> about
>> is generally an offline process), you would have to spend extra resource
>> to
>> merge the hits from the different indexes.
>> The other overhead in case of a multisearcher would be of creating those
>> many searchers - for each index(though shouldn't be much, just though
>> would
>> point out).
>> I guess you should try it as speed of search is not realy all that
>> important
>> to you as compared to running it on a singe box within the memory
>> limitation.
>>
>>
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Tue, Oct 7, 2008 at 3:29 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>  Hello Anusham,
>>>
>>> My intention is to shard the index after every 7 days (week). After 30
>>> days, (4th  week) the first DB may get deleted. At any point of time i
>>> will
>>> be maitaining 3 to 4 DB.
>>>
>>> I want to know the pros and cons of the MultiSearcher or Index sharding
>>> approach. Any web links would be helpful.
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Tuesday, October 07, 2008 12:18 AM
>>>
>>> Subject: Re: Single searcher vs Multi Searcher
>>>
>>>
>>>  Hi Ganesh,
>>>
>>>> About the memory consumption while sorting, it would end up using
>>>> similar
>>>> amounts, perhaps even more.. like in the case of regular parallel
>>>> programming algorithms (hoping that you intend to search using a
>>>> parallel
>>>> multi searcher). Would you have to query particular indexes only for a
>>>> particular search or would you be searching over all the indexes and
>>>> then
>>>> follow it up by merger (which the parallel multi searcher would do
>>>> efficiently).?
>>>> Also, I guess 30 indexes would be a little too many, haven't really
>>>> tried
>>>> out those many indexes for a multisearcher.
>>>> As far as maintenance of DB is concerned, it might be easy as long as
>>>> you
>>>> don't have any document updates, in which case you'd have to shift the
>>>> documents from one DB/index to another (which includes creating an entry
>>>> in
>>>> the latest index/DB and deleting the record from the older DB).
>>>> I guess you'd have to pilot it, in case memory is an issue in your case
>>>> and
>>>> not speed, you could try a regular multisearcher instead of a parallel
>>>> multisearcher.
>>>> I guess when you say maintenance of the DB gets easier, you mean that
>>>> the
>>>> data in each individual table is controlled (but remember there could be
>>>> other bigger hassles like the one mentioned above about moving data
>>>> between
>>>> indexes/DB).
>>>>
>>>> --
>>>> Anshum Gupta
>>>> Naukri Labs!
>>>> http://ai-cafe.blogspot.com
>>>>
>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>> distinction is yours to draw............
>>>>
>>>>
>>>> On Mon, Oct 6, 2008 at 10:06 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>
>>>>  Hello Anshum,
>>>>
>>>>>
>>>>> My index is growing 1 million documents per day. Initially i planned to
>>>>> have a single database but the sorting of one or more fields consumes
>>>>> more
>>>>> RAM. Whether sharding the index would also consume the same.
>>>>>
>>>>> My application should co-exist with other application of my product and
>>>>> my
>>>>> app could get 1 GB of RAM. Search speed is fine but i need to display
>>>>> the
>>>>> result in the sorted order.
>>>>>
>>>>> I thought to keep 7 days of documents in one index and create one more
>>>>> after the 7 days. After 30 days the first index may get deleted. I need
>>>>> to
>>>>> keep the documents in the index DB for 30 days. My Index DB is in HDD.
>>>>>
>>>>> I want to the pros and cons of sharding. I think maintance of the DB
>>>>> becomes easier.
>>>>>
>>>>> It would be very much helpful, if you share some of your thoughts.
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>>
>>>>>
>>>>> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
>>>>> To: <java-user@lucene.apache.org>
>>>>> Sent: Friday, October 03, 2008 9:48 PM
>>>>> Subject: Re: Single searcher vs Multi Searcher
>>>>>
>>>>>
>>>>>
>>>>>  Hi Ganesh,
>>>>>
>>>>>
>>>>>> I have experimented with sharded indexes and they seem to benefit
>>>>>> me(atleast
>>>>>> in my case). I would like to know a few things before I answer your
>>>>>> question:
>>>>>> 1. Do you have a reasonable criteria ( a calculated one) to shard the
>>>>>> indexes?
>>>>>> 2. How do you plan to split the index? Is it going to be document
>>>>>> based
>>>>>> (which I guess it should be as otherwise you would have to build a
>>>>>> complete
>>>>>> distributed system)
>>>>>> 3. Do you plan to put your indexes on the RAM or on (physically)
>>>>>> seperate
>>>>>> HDDs?
>>>>>>
>>>>>> Though all said and done, sharded indexes are a good approach, if done
>>>>>> the
>>>>>> right way.
>>>>>> --
>>>>>> Anshum Gupta
>>>>>> Naukri Labs!
>>>>>> http://ai-cafe.blogspot.com
>>>>>>
>>>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>>>> distinction is yours to draw............
>>>>>>
>>>>>>
>>>>>> On Fri, Oct 3, 2008 at 3:01 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>>>
>>>>>>  Hello all,
>>>>>>
>>>>>>
>>>>>>> My indexing is growing by 1 million records per day and the memory
>>>>>>> consumption of the searcher object is quite high.
>>>>>>>
>>>>>>> There are different opinion in the groups. Few suggest to use single
>>>>>>> database and few to use sharding. My Database has 10 million records
>>>>>>> now
>>>>>>> and
>>>>>>> it might go till 30 million or more. I plan to shard the index. but
>>>>>>> Multisearcher will give me benifit.
>>>>>>>
>>>>>>> Regards
>>>>>>> Ganesh
>>>>>>>
>>>>>>>
>>>>>>> Send instant messages to your online friends
>>>>>>> http://in.messenger.yahoo.com
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>   Send instant messages to your online friends
>>>>>>
>>>>> http://in.messenger.yahoo.com
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>  Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_96262_15626003.1223614156816--

From java-user-return-36538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 07:34:37 2008
Return-Path: <java-user-return-36538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48597 invoked from network); 10 Oct 2008 07:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 07:34:36 -0000
Received: (qmail 86872 invoked by uid 500); 10 Oct 2008 07:34:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86839 invoked by uid 500); 10 Oct 2008 07:34:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86828 invoked by uid 99); 10 Oct 2008 07:34:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 00:34:28 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.54] (HELO pebbles.fastcom.no) (62.73.241.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 07:33:22 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by pebbles.fastcom.no (Postfix) with ESMTP id D16A28BC5
	for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 09:33:51 +0200 (DFT)
Date: Fri, 10 Oct 2008 09:33:58 +0200
To: java-user@lucene.apache.org
Subject: Re: wizard for search in Lucene
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <19900220.post@talk.nabble.com>
 <20081009164925.GA22879@stud.ntnu.no>
Content-Transfer-Encoding: 8bit
Message-ID: <op.uissmwvgoftp72@melkor>
In-Reply-To: <20081009164925.GA22879@stud.ntnu.no>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

 From what I can understand, you want to insert the word "history" and then  
get proposed "related" terms in combination with your input query.
In essense this would be to do a "look-up" on top-terms in the subset of  
documents matching the initial query "history". Exactly how you could do  
this is a bit uncertain from my knowledge, but I suggest you read up on  
term-frequency and the tf-idf scheme.

Also: take a look at the org.apache.lucene.search.similar package:
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/similar/package-summary.html
and read the motivation email listed in the first segment of
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/similar/MoreLikeThis.html

I couldn't really see how you would autocomplete after the word history  
without listing a bunch of un-interesting terms as suggestions... But i  
might be wrong... Of course, if it was autocompletion you were looking  
for Asbjrn answered that one just fine:)

Best regards,
  Aleksander M. Stensby


On Thu, 09 Oct 2008 18:49:26 +0200, Asbjrn A. Fellinghaug  
<asbjorn@fellinghaug.com> wrote:

> Albert Juhe:
>>
>> Hi,
>>
>> I want to make a wizard that can help to find n-grams terms.
>> For example:
>> If i want to search History, after write it the system propose you the
>> following searches:
>> history europe
>> history spain
>> history .....
>> Consulting the terms indexed.
>>
>> Does it exits in Lucene?
>
> Hi.
>
> I interpret your question in such a way that you want autocompletion in
> your search system? In that case, I believe there are some Analyzer's
> which does this in the 'contrib' package. Also, I've created an Analyzer
> which creates "bigrams" (n-gram of size 2) in my master thesis.
> Feel free to download it from this page:
> http://asbjorn.fellinghaug.com/blog/2008/08/the-code-for-my-master-thesis/
>
> Also, have a look at the package org.apache.lucene.analysis.ngram:
> http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/ngram/package-summary.html
>



-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S
+47 41 22 82 72
aleksander.stensby@integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 09:13:13 2008
Return-Path: <java-user-return-36539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82919 invoked from network); 10 Oct 2008 09:13:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 09:13:13 -0000
Received: (qmail 99856 invoked by uid 500); 10 Oct 2008 09:13:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99823 invoked by uid 500); 10 Oct 2008 09:13:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99811 invoked by uid 99); 10 Oct 2008 09:13:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 02:13:05 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 09:12:01 +0000
Received: by yx-out-2324.google.com with SMTP id 3so141905yxj.5
        for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 02:12:36 -0700 (PDT)
Received: by 10.151.7.4 with SMTP id k4mr1563771ybi.187.1223629955991;
        Fri, 10 Oct 2008 02:12:35 -0700 (PDT)
Received: by 10.151.141.17 with HTTP; Fri, 10 Oct 2008 02:12:35 -0700 (PDT)
Message-ID: <7e536b1f0810100212q2af8f649w2604c6f16cf38725@mail.gmail.com>
Date: Fri, 10 Oct 2008 11:12:35 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Subject: Buzz measurement - Aggregate functions
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76420_24871142.1223629955988"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_76420_24871142.1223629955988
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi.

Anyone have an idea of how I would create a query which finds the data
backing a trend graph where date is X and num(docs) is on Y axis ?

This is quite a common use case in "buzz" analysis and currently I'm doing a
stupid query which iterates over the date range and queries lucene for every
date. Not very fast and not very flexible.

More specifically something like this but I need to add free text query as
well and then I cannot use MySQL for performance reasons. Any ideas ?

--clip--
mysql> select count(id) as Y,publishDate as X from FeedItem where
publishDate between "2008-08-01" and "2008-08-31" group by DAY(publishDate)
order by publishDate asc;
+-------+---------------------+
| Y     | X                   |
+-------+---------------------+
| 26663 | 2008-08-01 00:00:00 |
| 22478 | 2008-08-02 00:00:00 |
| 25745 | 2008-08-03 00:00:00 |
| 30576 | 2008-08-04 00:00:00 |
| 31351 | 2008-08-05 00:00:00 |
| 31084 | 2008-08-06 00:00:00 |
| 31245 | 2008-08-07 00:00:00 |
| 29518 | 2008-08-08 00:00:00 |
| 26001 | 2008-08-09 00:00:00 |
| 28687 | 2008-08-10 00:00:00 |
| 32957 | 2008-08-11 00:00:00 |
| 33251 | 2008-08-12 00:00:00 |
| 33062 | 2008-08-13 00:00:00 |
| 33960 | 2008-08-14 00:00:00 |
| 31034 | 2008-08-15 00:00:00 |
| 26726 | 2008-08-16 00:00:00 |
| 27543 | 2008-08-17 00:00:00 |
| 36887 | 2008-08-18 00:00:00 |
| 35376 | 2008-08-19 00:00:00 |
| 34573 | 2008-08-20 00:00:00 |
| 33889 | 2008-08-21 00:00:00 |
| 30604 | 2008-08-22 00:00:00 |
| 26875 | 2008-08-23 00:00:00 |
| 27356 | 2008-08-24 00:00:00 |
| 33438 | 2008-08-25 00:00:00 |
| 33102 | 2008-08-26 00:00:00 |
| 31720 | 2008-08-27 00:00:00 |
| 26133 | 2008-08-28 00:00:00 |
| 22781 | 2008-08-29 00:00:00 |
| 20198 | 2008-08-30 00:00:00 |
|    20 | 2008-08-31 00:00:00 |
+-------+---------------------+


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

------=_Part_76420_24871142.1223629955988--

From java-user-return-36540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 09:42:12 2008
Return-Path: <java-user-return-36540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99036 invoked from network); 10 Oct 2008 09:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 09:42:11 -0000
Received: (qmail 39455 invoked by uid 500); 10 Oct 2008 09:42:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39430 invoked by uid 500); 10 Oct 2008 09:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39419 invoked by uid 99); 10 Oct 2008 09:42:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 02:42:03 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,FUZZY_CPILL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Oct 2008 09:40:58 +0000
Received: (qmail 65218 invoked by uid 60001); 10 Oct 2008 09:40:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=vCgeqPZe982C+JVY0TWeC176qD3/CxLzNrXzH9vXdu83v2qkHxuNzNXo1416gRJmRZu1cvz1pJQ/lQPAXuwkyyzz28vJyNiHy6zh8Kix+eNPgOZvfqt7Tiq5tDvkNFG4HQf6hIwDuyPUfv5QG8FIke74GaBcmtBOIS2KjpiaXc4=;
X-YMail-OSG: 2BbG2MUVM1nDiCvbtQZh0hN2tcbyPRJ5KsBy1mhHwkYgAR7hH43UYguyJncmE0CHOdIBiyfwa0AQrSTvMhsGkfeiPrGoqPfTuDZl_kQk2rreuKNXdaLb2jEIB6SKDBH0UORSbyYi65kP8QnERl37f6wJiX_ZbEZuUuwiSQeCqQK2QQtpZz4-
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Fri, 10 Oct 2008 09:40:32 GMT
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.218.2
Date: Fri, 10 Oct 2008 09:40:32 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Buzz measurement - Aggregate functions
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <253534.65136.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Assuming your date data is held as YYYYMMDD and you want daily totals....=
=0A=0A        Term startTerm=3Dnew Term("date","20080101");=0A        TermE=
num termEnum =3D indexReader.terms(startTerm);=0A        do=0A        {=0A =
           Term currentTerm =3D termEnum.term();=0A            if(currentTe=
rm.field()!=3DstartTerm.field())=0A            {=0A                break;=
=0A            }=0A            System.out.println(currentTerm+" "+termEnum.=
docFreq());=0A        }while(termEnum.next());=0A=0AShould be plenty fast b=
ut if you need to avoid counting any deleted docs you'll need to look at us=
ing "TermDocs" in this loop (or optimize your index in advance)=0A=0ACheers=
,=0AMark=0A=0A=0A=0A----- Original Message ----=0AFrom: Marcus Herou <marcu=
s.herou@tailsweep.com>=0ATo: java-user@lucene.apache.org=0ASent: Friday, 10=
 October, 2008 10:12:35=0ASubject: Buzz measurement - Aggregate functions=
=0A=0AHi.=0A=0AAnyone have an idea of how I would create a query which find=
s the data=0Abacking a trend graph where date is X and num(docs) is on Y ax=
is ?=0A=0AThis is quite a common use case in "buzz" analysis and currently =
I'm doing a=0Astupid query which iterates over the date range and queries l=
ucene for every=0Adate. Not very fast and not very flexible.=0A=0AMore spec=
ifically something like this but I need to add free text query as=0Awell an=
d then I cannot use MySQL for performance reasons. Any ideas ?=0A=0A--clip-=
-=0Amysql> select count(id) as Y,publishDate as X from FeedItem where=0Apub=
lishDate between "2008-08-01" and "2008-08-31" group by DAY(publishDate)=0A=
order by publishDate asc;=0A+-------+---------------------+=0A| Y     | X  =
                 |=0A+-------+---------------------+=0A| 26663 | 2008-08-01=
 00:00:00 |=0A| 22478 | 2008-08-02 00:00:00 |=0A| 25745 | 2008-08-03 00:00:=
00 |=0A| 30576 | 2008-08-04 00:00:00 |=0A| 31351 | 2008-08-05 00:00:00 |=0A=
| 31084 | 2008-08-06 00:00:00 |=0A| 31245 | 2008-08-07 00:00:00 |=0A| 29518=
 | 2008-08-08 00:00:00 |=0A| 26001 | 2008-08-09 00:00:00 |=0A| 28687 | 2008=
-08-10 00:00:00 |=0A| 32957 | 2008-08-11 00:00:00 |=0A| 33251 | 2008-08-12 =
00:00:00 |=0A| 33062 | 2008-08-13 00:00:00 |=0A| 33960 | 2008-08-14 00:00:0=
0 |=0A| 31034 | 2008-08-15 00:00:00 |=0A| 26726 | 2008-08-16 00:00:00 |=0A|=
 27543 | 2008-08-17 00:00:00 |=0A| 36887 | 2008-08-18 00:00:00 |=0A| 35376 =
| 2008-08-19 00:00:00 |=0A| 34573 | 2008-08-20 00:00:00 |=0A| 33889 | 2008-=
08-21 00:00:00 |=0A| 30604 | 2008-08-22 00:00:00 |=0A| 26875 | 2008-08-23 0=
0:00:00 |=0A| 27356 | 2008-08-24 00:00:00 |=0A| 33438 | 2008-08-25 00:00:00=
 |=0A| 33102 | 2008-08-26 00:00:00 |=0A| 31720 | 2008-08-27 00:00:00 |=0A| =
26133 | 2008-08-28 00:00:00 |=0A| 22781 | 2008-08-29 00:00:00 |=0A| 20198 |=
 2008-08-30 00:00:00 |=0A|    20 | 2008-08-31 00:00:00 |=0A+-------+-------=
--------------+=0A=0A=0A-- =0AMarcus Herou CTO and co-founder Tailsweep AB=
=0A+46702561312=0Amarcus.herou@tailsweep.com=0Ahttp://www.tailsweep.com/=0A=
http://blogg.tailsweep.com/=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 10:06:05 2008
Return-Path: <java-user-return-36541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17245 invoked from network); 10 Oct 2008 10:06:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 10:06:05 -0000
Received: (qmail 82852 invoked by uid 500); 10 Oct 2008 10:05:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82825 invoked by uid 500); 10 Oct 2008 10:05:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82814 invoked by uid 99); 10 Oct 2008 10:05:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 03:05:57 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,FUZZY_CPILL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Oct 2008 10:04:51 +0000
Received: (qmail 57590 invoked by uid 60001); 10 Oct 2008 10:04:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=uwJHednd3WOxYmn1bASk30ztu7vHlPe5cm8LQb1eFAu2oJZ4k/SL2Yd8/Znufr0GNW84oUAAEQ8htLuJ2vhWaeggcwxGpshBJtJRgWnYvCU2FtmUZ5dez/JK9cVf2M/yiBWq42yJUczgBnCW7DYg5pD24bn9SrBxExLapYeAyqU=;
X-YMail-OSG: W9Yc7JgVM1n0sTY527aBIYG1lHE22A3xZcQl9GNGdD.qp0VAPI5osTt5KWEs17.y6_1coD4wEaTjx092Ywrn1mUG.fK5ooyWN5LpjizD0D_sNVcvG3qWVX68gavx6Fow41GX8aelf7r83RdasEWyqr1w6X_CX.uwL1iauQ7GRutzhIC1UsM-
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Fri, 10 Oct 2008 10:04:25 GMT
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.218.2
Date: Fri, 10 Oct 2008 10:04:25 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Buzz measurement - Aggregate functions
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <177438.57367.qm@web26002.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ah, sorry. Just saw the bit about the free text query too.=0A=0AA FieldCach=
e is the answer here I suspect in order to quickly retrieve the date values=
 for arbitrary queries.=0A=0A=0A=0A----- Original Message ----=0AFrom: mark=
 harwood <markharw00d@yahoo.co.uk>=0ATo: java-user@lucene.apache.org=0ASent=
: Friday, 10 October, 2008 10:40:32=0ASubject: Re: Buzz measurement - Aggre=
gate functions=0A=0AAssuming your date data is held as YYYYMMDD and you wan=
t daily totals....=0A=0A        Term startTerm=3Dnew Term("date","20080101"=
);=0A        TermEnum termEnum =3D indexReader.terms(startTerm);=0A        =
do=0A        {=0A            Term currentTerm =3D termEnum.term();=0A      =
      if(currentTerm.field()!=3DstartTerm.field())=0A            {=0A      =
          break;=0A            }=0A            System.out.println(currentTe=
rm+" "+termEnum.docFreq());=0A        }while(termEnum.next());=0A=0AShould =
be plenty fast but if you need to avoid counting any deleted docs you'll ne=
ed to look at using "TermDocs" in this loop (or optimize your index in adva=
nce)=0A=0ACheers,=0AMark=0A=0A=0A=0A----- Original Message ----=0AFrom: Mar=
cus Herou <marcus.herou@tailsweep.com>=0ATo: java-user@lucene.apache.org=0A=
Sent: Friday, 10 October, 2008 10:12:35=0ASubject: Buzz measurement - Aggre=
gate functions=0A=0AHi.=0A=0AAnyone have an idea of how I would create a qu=
ery which finds the data=0Abacking a trend graph where date is X and num(do=
cs) is on Y axis ?=0A=0AThis is quite a common use case in "buzz" analysis =
and currently I'm doing a=0Astupid query which iterates over the date range=
 and queries lucene for every=0Adate. Not very fast and not very flexible.=
=0A=0AMore specifically something like this but I need to add free text que=
ry as=0Awell and then I cannot use MySQL for performance reasons. Any ideas=
 ?=0A=0A--clip--=0Amysql> select count(id) as Y,publishDate as X from FeedI=
tem where=0ApublishDate between "2008-08-01" and "2008-08-31" group by DAY(=
publishDate)=0Aorder by publishDate asc;=0A+-------+---------------------+=
=0A| Y     | X                   |=0A+-------+---------------------+=0A| 26=
663 | 2008-08-01 00:00:00 |=0A| 22478 | 2008-08-02 00:00:00 |=0A| 25745 | 2=
008-08-03 00:00:00 |=0A| 30576 | 2008-08-04 00:00:00 |=0A| 31351 | 2008-08-=
05 00:00:00 |=0A| 31084 | 2008-08-06 00:00:00 |=0A| 31245 | 2008-08-07 00:0=
0:00 |=0A| 29518 | 2008-08-08 00:00:00 |=0A| 26001 | 2008-08-09 00:00:00 |=
=0A| 28687 | 2008-08-10 00:00:00 |=0A| 32957 | 2008-08-11 00:00:00 |=0A| 33=
251 | 2008-08-12 00:00:00 |=0A| 33062 | 2008-08-13 00:00:00 |=0A| 33960 | 2=
008-08-14 00:00:00 |=0A| 31034 | 2008-08-15 00:00:00 |=0A| 26726 | 2008-08-=
16 00:00:00 |=0A| 27543 | 2008-08-17 00:00:00 |=0A| 36887 | 2008-08-18 00:0=
0:00 |=0A| 35376 | 2008-08-19 00:00:00 |=0A| 34573 | 2008-08-20 00:00:00 |=
=0A| 33889 | 2008-08-21 00:00:00 |=0A| 30604 | 2008-08-22 00:00:00 |=0A| 26=
875 | 2008-08-23 00:00:00 |=0A| 27356 | 2008-08-24 00:00:00 |=0A| 33438 | 2=
008-08-25 00:00:00 |=0A| 33102 | 2008-08-26 00:00:00 |=0A| 31720 | 2008-08-=
27 00:00:00 |=0A| 26133 | 2008-08-28 00:00:00 |=0A| 22781 | 2008-08-29 00:0=
0:00 |=0A| 20198 | 2008-08-30 00:00:00 |=0A|    20 | 2008-08-31 00:00:00 |=
=0A+-------+---------------------+=0A=0A=0A-- =0AMarcus Herou CTO and co-fo=
under Tailsweep AB=0A+46702561312=0Amarcus.herou@tailsweep.com=0Ahttp://www=
.tailsweep.com/=0Ahttp://blogg.tailsweep.com/=0A=0A=0A=0A=0A=0A------------=
---------------------------------------------------------=0ATo unsubscribe,=
 e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands,=
 e-mail: java-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 12:10:42 2008
Return-Path: <java-user-return-36542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8407 invoked from network); 10 Oct 2008 12:10:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 12:10:42 -0000
Received: (qmail 22749 invoked by uid 500); 10 Oct 2008 12:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22707 invoked by uid 500); 10 Oct 2008 12:10:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22696 invoked by uid 99); 10 Oct 2008 12:10:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 05:10:33 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.56] (HELO mta.tdcsong.no) (62.73.241.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 12:09:29 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by mta.tdcsong.no (Postfix) with ESMTP id 47D544093
	for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 14:09:27 +0200 (CEST)
Date: Fri, 10 Oct 2008 14:09:36 +0200
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Question regarding sorting and memory consumption in lucene
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.uis5eaupoftp72@melkor>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello, I've read a lot of threads now on memory consumption and sorting,  
and I think I have a pretty good understanding of how things work, but I  
could still need some input here..

We currently have a system consisting of 6 different lucene indexes (all  
have the same structure, so you could say it is a form of sharding). We  
currently use this approach because we want to be able to give users  
access to different index (but not necessarily  all indexes) etc.

(We are planning to move to a solr-based system, but for now we would like  
to solve this issue with our current lucene-based system.)

The thing is, the indexes are rather big (ranging from 5G to 20G per index  
and 10 - 30 million entries per index.)
We keep one searcher object open per index, and when the index is changed  
(new documents added in batches several times a day), we update the  
searcher objects.
In the warmup procedure we did a couple of searches and things work fine,  
BUT i realized that in our application we return hits sorted by date by  
default, and our warmup procedure did non-sorted queries... so still the  
first searches done by the user after an update was slow (obviously).

To cope, I changed the warmup procedure to include a sorted search, and  
now the user will not notice slow queries. Good!
But, the problem at hand is that we are running into memory problems (and  
I understand that sorting does consume a lot of memory...) But is there  
any way that is "best practice" to deal with this? The field we sort on is  
an un_indexed text field representing the date. typically "2008-10-10". I  
am aware that string field sorting consumes a lot of memory, so should we  
change this field to something different? Would this help us with the  
memory problems?

As a sidenote / couriosity question: Does it matter if we use the search  
method returning Hits versus the search method returning TopFieldDocs? (we  
are not iterating them in any way when this memory issue occurs)

Thanks in advance for any guidance we may get.

Best regards,
  Aleksander M. Stensby



-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 12:28:51 2008
Return-Path: <java-user-return-36543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21922 invoked from network); 10 Oct 2008 12:28:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 12:28:51 -0000
Received: (qmail 39522 invoked by uid 500); 10 Oct 2008 12:28:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39495 invoked by uid 500); 10 Oct 2008 12:28:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39484 invoked by uid 99); 10 Oct 2008 12:28:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 05:28:43 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.187] (HELO moutng.kundenserver.de) (212.227.126.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 12:27:38 +0000
Received: from aleppo.local (81-232-34-14-no35.tbcn.telia.com [81.232.34.14])
	by mrelayeu.kundenserver.de (node=mrelayeu5) with ESMTP (Nemesis)
	id 0ML25U-1KoH5p0wsp-0005yl; Fri, 10 Oct 2008 14:27:41 +0200
Date: Fri, 10 Oct 2008 14:27:40 +0200
To: java-user@lucene.apache.org
Subject: Release 2.4 on ibiblio
From: "Hardy Ferentschik" <lucene@ferentschik.de>
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.uis58fbp7ont1c@aleppo.local>
User-Agent: Opera Mail/9.60 (MacIntel)
X-Provags-ID: V01U2FsdGVkX1+EC+B0y6Kd4NijHOLSR+BDS0FaNb5eqQoeM+R
 /crqlmjsbZNhhJtEQ39MI9jqYh3vdsPz+KUPUSg4VFj3mwPBQd
 BGxQw0mG1lnMwNU/ejYYSWn8p7C7ELUKszdx8xWHDs=
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,

I've just noticed that there is already a 2.4 release available on ibiblio  
(http://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/lucene/lucene-core/2.4.0/),
but there is no official release notification yet. What's the status of  
these aretifacts? When will 2.4 be officially released?

Cheers,
Hardy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 12:32:23 2008
Return-Path: <java-user-return-36544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23648 invoked from network); 10 Oct 2008 12:32:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 12:32:22 -0000
Received: (qmail 46633 invoked by uid 500); 10 Oct 2008 12:32:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46602 invoked by uid 500); 10 Oct 2008 12:32:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46591 invoked by uid 99); 10 Oct 2008 12:32:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 05:32:14 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 12:31:09 +0000
Received: by yx-out-2324.google.com with SMTP id 3so163097yxj.5
        for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 05:31:27 -0700 (PDT)
Received: by 10.151.141.8 with SMTP id t8mr2137088ybn.211.1223641887648;
        Fri, 10 Oct 2008 05:31:27 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id j13sm2013569rne.4.2008.10.10.05.31.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 10 Oct 2008 05:31:26 -0700 (PDT)
Message-Id: <9030C17C-C4C0-43FD-AC9A-C2FDC3A3A4AC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <op.uis58fbp7ont1c@aleppo.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Release 2.4 on ibiblio
Date: Fri, 10 Oct 2008 08:31:25 -0400
References: <op.uis58fbp7ont1c@aleppo.local>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


The release bits are indeed propagating through all mirrors, but I'm  
going to wait until tomorrow to do the announcement, to make sure all  
mirrors catch up.

Mike

Hardy Ferentschik wrote:

> Hi there,
>
> I've just noticed that there is already a 2.4 release available on  
> ibiblio (http://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/lucene/lucene-core/2.4.0/ 
> ),
> but there is no official release notification yet. What's the status  
> of these aretifacts? When will 2.4 be officially released?
>
> Cheers,
> Hardy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 12:48:09 2008
Return-Path: <java-user-return-36545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29671 invoked from network); 10 Oct 2008 12:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 12:48:09 -0000
Received: (qmail 69821 invoked by uid 500); 10 Oct 2008 12:48:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69792 invoked by uid 500); 10 Oct 2008 12:48:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69781 invoked by uid 99); 10 Oct 2008 12:48:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 05:48:02 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.247 as permitted sender)
Received: from [209.85.198.247] (HELO rv-out-0708.google.com) (209.85.198.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 12:46:59 +0000
Received: by rv-out-0708.google.com with SMTP id k29so592692rvb.0
        for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 05:47:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=3so0BBdd+028lQRv9Ag+nQ71fyOwV2D7KHuAQPQi0SE=;
        b=W0kcGsdq3G0jf7uMPXsXBlTCqJQqv+Z2TWDH9i+AuYftMbU9gpd/JZfgAfGX1VSg3Q
         MHq7gtU2oLEc61r8JlgcZD/6RSJ+GJBHBqHOE94GGlWIrxWSV166I4FVzMIR+tByGcBi
         ZjfV7PNO9o2zuTGOYRbTbG7fVR2177Lawg4vk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=TUPDeOcw6oSK/Emh6bngVwR6AOfLSMU6piBkIVPHAlkV3UuTFJvFG/KuMg+ikfjbL1
         pILOEB8W9DeBcLh2kQzSanbyYBfdffnBLH5jQSoetJFiSm5tbNxpwyhdU05H/nzKYSnL
         E9Bvy3e7xItTArgWvIDCkcOQgBAJShskb7xhw=
Received: by 10.141.71.14 with SMTP id y14mr1011241rvk.253.1223642855334;
        Fri, 10 Oct 2008 05:47:35 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Fri, 10 Oct 2008 05:47:34 -0700 (PDT)
Message-ID: <359a92830810100547j3119d590rbb37186e7e9f68a1@mail.gmail.com>
Date: Fri, 10 Oct 2008 08:47:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Only last field indexed
In-Reply-To: <2D6A559981E440C1A08FCFAFD393C23D@desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85234_32528920.1223642855355"
References: <6bfa8b2b0810071028x62433456j55760d76837575d5@mail.gmail.com>
	 <359a92830810071123s4dab155aka6190384c4d5e57e@mail.gmail.com>
	 <5816fbdd0810080201u79bb7be7m1d31be856901da3f@mail.gmail.com>
	 <2D6A559981E440C1A08FCFAFD393C23D@desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85234_32528920.1223642855355
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

True, I guess I was thinking of things from a search-only
perspective when I claimed they were identical... But
you're absolutely right in that you can retrieve them in
order (assuming you stored them) by getFields.

Best
Erick

On Thu, Oct 9, 2008 at 10:29 PM, John Griffin <jgriffin@thebluezone.net>wrote:

> Kalani,
>
> They are put into the document as separate fields. That's why there are
> getFields() and deleteFields() methods on Document.
>
> John G.
>
> -----Original Message-----
> From: Kalani Ruwanpathirana [mailto:kalanir@gmail.com]
> Sent: Wednesday, October 08, 2008 3:02 AM
> To: java-user@lucene.apache.org
> Subject: Re: Only last field indexed
>
> You are doing this kind of a thing?
>
> document.add(new Field("id", id1, Field.Store.YES, Field.Index.TOKENIZED));
> document.add(new Field("id", id2, Field.Store.YES, Field.Index.TOKENIZED));
>
> I doubt whether this is possible. What happen to the value id1 when the
> value id2 added to the same filed? merged or overridden?
> Just curious.
>
>
> Kalani.
>
> On Tue, Oct 7, 2008 at 11:53 PM, Erick Erickson
> <erickerickson@gmail.com>wrote:
>
> > Let's see the indexing code. It is perfectly reasonable to
> > add data to a field multiple times, so I suspect you're
> > doing something wrong.....
> >
> > What evidence do you have that it's only the last field that's
> > indexed?
> >
> > Best
> > Erick
> >
> > On Tue, Oct 7, 2008 at 1:28 PM, John Griffin <griffij@sosstaffing.com
> > >wrote:
> >
> > > Guys,
> > >
> > > I'm adding multiple fields with the same name to a document as
> Store.YES,
> > > Indexed.TOKENIZED and it seems that only the last field entered is
> > indexed.
> > > I read about this somewhere her but now I can't find it, naturally. Is
> > > there
> > > a work around? does someone have a pointer to this discussion? Can
> > someone
> > > help?
> > >
> > > Thanks in advance.
> > >
> > > John G.
> > >
> >
>
>
>
> --
> Kalani Ruwanpathirana
> Department of Computer Science & Engineering
> University of Moratuwa
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_85234_32528920.1223642855355--

From java-user-return-36546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 12:52:28 2008
Return-Path: <java-user-return-36546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30997 invoked from network); 10 Oct 2008 12:52:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 12:52:28 -0000
Received: (qmail 76795 invoked by uid 500); 10 Oct 2008 12:52:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76766 invoked by uid 500); 10 Oct 2008 12:52:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76748 invoked by uid 99); 10 Oct 2008 12:52:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 05:52:16 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.54] (HELO pebbles.fastcom.no) (62.73.241.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 12:51:11 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by pebbles.fastcom.no (Postfix) with ESMTP id B1FF06115
	for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 14:51:42 +0200 (DFT)
Date: Fri, 10 Oct 2008 14:51:50 +0200
To: java-user@lucene.apache.org
Subject: Re: Question regarding sorting and memory consumption in lucene
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <op.uis5eaupoftp72@melkor>
Content-Transfer-Encoding: 7bit
Message-ID: <op.uis7cobyoftp72@melkor>
In-Reply-To: <op.uis5eaupoftp72@melkor>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

I'll follow up on my own question...
Let's say that we have 4 years of data, meaning that there will be roughly  
4 * 365 = 1460 unique terms for our sort field.
For one index, lets say with 30 million docs, the cache should use approx  
100mb, or am I wrong? and thus for 6 indexes we would need approx 600 mb  
for the caches? (and an additional 100mb every time we warm a new searcher  
and swap it out...) As far as the string versus int or long goes, I don't  
really see any big gain in changig it since 1460 * 10  bytes extra memory  
doesnt really make much difference. Or?

I guess we should consider reducing the index size or at least only allow  
sorted search on a subset of the index (or a pruned version of the  
index...) ? Would that be better for us?
But then again, I assume that there are much larger lucene-based indexes  
out there than ours, and you guys must have some solution to this issue,  
right? :)

best regards,
  Aleksander


On Fri, 10 Oct 2008 14:09:36 +0200, Aleksander M. Stensby  
<aleksander.stensby@integrasco.no> wrote:

> Hello, I've read a lot of threads now on memory consumption and sorting,  
> and I think I have a pretty good understanding of how things work, but I  
> could still need some input here..
>
> We currently have a system consisting of 6 different lucene indexes (all  
> have the same structure, so you could say it is a form of sharding). We  
> currently use this approach because we want to be able to give users  
> access to different index (but not necessarily  all indexes) etc.
>
> (We are planning to move to a solr-based system, but for now we would  
> like to solve this issue with our current lucene-based system.)
>
> The thing is, the indexes are rather big (ranging from 5G to 20G per  
> index and 10 - 30 million entries per index.)
> We keep one searcher object open per index, and when the index is  
> changed (new documents added in batches several times a day), we update  
> the searcher objects.
> In the warmup procedure we did a couple of searches and things work  
> fine, BUT i realized that in our application we return hits sorted by  
> date by default, and our warmup procedure did non-sorted queries... so  
> still the first searches done by the user after an update was slow  
> (obviously).
>
> To cope, I changed the warmup procedure to include a sorted search, and  
> now the user will not notice slow queries. Good!
> But, the problem at hand is that we are running into memory problems  
> (and I understand that sorting does consume a lot of memory...) But is  
> there any way that is "best practice" to deal with this? The field we  
> sort on is an un_indexed text field representing the date. typically  
> "2008-10-10". I am aware that string field sorting consumes a lot of  
> memory, so should we change this field to something different? Would  
> this help us with the memory problems?
>
> As a sidenote / couriosity question: Does it matter if we use the search  
> method returning Hits versus the search method returning TopFieldDocs?  
> (we are not iterating them in any way when this memory issue occurs)
>
> Thanks in advance for any guidance we may get.
>
> Best regards,
>   Aleksander M. Stensby
>
>
>



-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S
+47 41 22 82 72
aleksander.stensby@integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 13:20:25 2008
Return-Path: <java-user-return-36547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42244 invoked from network); 10 Oct 2008 13:20:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 13:20:25 -0000
Received: (qmail 16348 invoked by uid 500); 10 Oct 2008 13:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16190 invoked by uid 500); 10 Oct 2008 13:20:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16179 invoked by uid 99); 10 Oct 2008 13:20:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 06:20:17 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Oct 2008 13:19:12 +0000
Received: (qmail 28616 invoked by uid 60001); 10 Oct 2008 13:18:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Od8HrPeIXMtjmom/B0KGyButTSfQFvA+9RHZymEX5KSxd0DubKmXk0pfHXFnObhtVVwGd+yHWI6TjhQhg4B8Y5xafXIKCA83RgTGZxd0PYsIFToh5yzZQ+vvVyLf6B9Z3RKiiP0qtHkvooGBPpEH5yd3auK7WTZn8D656G5eG7o=;
X-YMail-OSG: TpSPrfoVM1nbKBmCsQa4YKAaZje.E8pgHa08YSjXyAdPDoAqCTygzNi6IXVakqlrOOuv2TaVKWS02wbXIbGpMyk0GhBLiztOnn7_0s.3BMngjRSPcVMuQdn3_V4XLFY8kN9TEGRSFq_PnZm5mW0b9Sn1PGU3oH23oHhitDbiqYLfMEh81HI-
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Fri, 10 Oct 2008 13:18:46 GMT
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.218.2
Date: Fri, 10 Oct 2008 13:18:46 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Question regarding sorting and memory consumption in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <915178.28087.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Assuming content is added in chronological order and with no updates to exi=
sting docs couldn't you rely on internal Lucene document id to give a chron=
ological sort order?=0AThat would require no memory cache at all when sorti=
ng.=0A=0AQuerying across multiple indexes simultaneously however may presen=
t an added complication...=0A=0A=0A=0A----- Original Message ----=0AFrom: A=
leksander M. Stensby <aleksander.stensby@integrasco.no>=0ATo: java-user@luc=
ene.apache.org=0ASent: Friday, 10 October, 2008 13:51:50=0ASubject: Re: Que=
stion regarding sorting and memory consumption in lucene=0A=0AI'll follow u=
p on my own question...=0ALet's say that we have 4 years of data, meaning t=
hat there will be roughly  =0A4 * 365 =3D 1460 unique terms for our sort fi=
eld.=0AFor one index, lets say with 30 million docs, the cache should use a=
pprox  =0A100mb, or am I wrong? and thus for 6 indexes we would need approx=
 600 mb  =0Afor the caches? (and an additional 100mb every time we warm a n=
ew searcher  =0Aand swap it out...) As far as the string versus int or long=
 goes, I don't  =0Areally see any big gain in changig it since 1460 * 10  b=
ytes extra memory  =0Adoesnt really make much difference. Or?=0A=0AI guess =
we should consider reducing the index size or at least only allow  =0Asorte=
d search on a subset of the index (or a pruned version of the  =0Aindex...)=
 ? Would that be better for us?=0ABut then again, I assume that there are m=
uch larger lucene-based indexes  =0Aout there than ours, and you guys must =
have some solution to this issue,  =0Aright? :)=0A=0Abest regards,=0A  Alek=
sander=0A=0A=0AOn Fri, 10 Oct 2008 14:09:36 +0200, Aleksander M. Stensby  =
=0A<aleksander.stensby@integrasco.no> wrote:=0A=0A> Hello, I've read a lot =
of threads now on memory consumption and sorting,  =0A> and I think I have =
a pretty good understanding of how things work, but I  =0A> could still nee=
d some input here..=0A>=0A> We currently have a system consisting of 6 diff=
erent lucene indexes (all  =0A> have the same structure, so you could say i=
t is a form of sharding). We  =0A> currently use this approach because we w=
ant to be able to give users  =0A> access to different index (but not neces=
sarily  all indexes) etc.=0A>=0A> (We are planning to move to a solr-based =
system, but for now we would  =0A> like to solve this issue with our curren=
t lucene-based system.)=0A>=0A> The thing is, the indexes are rather big (r=
anging from 5G to 20G per  =0A> index and 10 - 30 million entries per index=
.)=0A> We keep one searcher object open per index, and when the index is  =
=0A> changed (new documents added in batches several times a day), we updat=
e  =0A> the searcher objects.=0A> In the warmup procedure we did a couple o=
f searches and things work  =0A> fine, BUT i realized that in our applicati=
on we return hits sorted by  =0A> date by default, and our warmup procedure=
 did non-sorted queries... so  =0A> still the first searches done by the us=
er after an update was slow  =0A> (obviously).=0A>=0A> To cope, I changed t=
he warmup procedure to include a sorted search, and  =0A> now the user will=
 not notice slow queries. Good!=0A> But, the problem at hand is that we are=
 running into memory problems  =0A> (and I understand that sorting does con=
sume a lot of memory...) But is  =0A> there any way that is "best practice"=
 to deal with this? The field we  =0A> sort on is an un_indexed text field =
representing the date. typically  =0A> "2008-10-10". I am aware that string=
 field sorting consumes a lot of  =0A> memory, so should we change this fie=
ld to something different? Would  =0A> this help us with the memory problem=
s?=0A>=0A> As a sidenote / couriosity question: Does it matter if we use th=
e search  =0A> method returning Hits versus the search method returning Top=
FieldDocs?  =0A> (we are not iterating them in any way when this memory iss=
ue occurs)=0A>=0A> Thanks in advance for any guidance we may get.=0A>=0A> B=
est regards,=0A>   Aleksander M. Stensby=0A>=0A>=0A>=0A=0A=0A=0A-- =0AAleks=
ander M. Stensby=0ASenior Software Developer=0AIntegrasco A/S=0A+47 41 22 8=
2 72=0Aaleksander.stensby@integrasco.no=0A=0A------------------------------=
---------------------------------------=0ATo unsubscribe, e-mail: java-user=
-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user=
-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 14:26:42 2008
Return-Path: <java-user-return-36548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97765 invoked from network); 10 Oct 2008 14:26:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 14:26:42 -0000
Received: (qmail 4838 invoked by uid 500); 10 Oct 2008 14:26:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4809 invoked by uid 500); 10 Oct 2008 14:26:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4789 invoked by uid 99); 10 Oct 2008 14:26:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 07:26:32 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.54] (HELO pebbles.fastcom.no) (62.73.241.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 14:25:21 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by pebbles.fastcom.no (Postfix) with ESMTP id 47358603B
	for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 16:25:20 +0200 (DFT)
Date: Fri, 10 Oct 2008 16:25:29 +0200
To: java-user@lucene.apache.org
Subject: Re: Question regarding sorting and memory consumption in lucene
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <915178.28087.qm@web26005.mail.ukl.yahoo.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.uitborqvoftp72@melkor>
In-Reply-To: <915178.28087.qm@web26005.mail.ukl.yahoo.com>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Unfortunately no, since the documents that are added may come form a new  
"source" containing old documents aswell..:/
I tried deploying our webapplication without any searcher objects and it  
consumes basically ~200mb of memory in tomcat.
With 6 searchers the same applications manages to consume over 2.5 GB of  
memory when warming... :(
I might have done some super-idiotic logic in the way I handle searching,  
but I can seriously not see what that might be...

But I assume that people deal with much larger indexes than this, right?

cheers,
  Aleksander


On Fri, 10 Oct 2008 15:18:46 +0200, mark harwood <markharw00d@yahoo.co.uk>  
wrote:

> Assuming content is added in chronological order and with no updates to  
> existing docs couldn't you rely on internal Lucene document id to give a  
> chronological sort order?
> That would require no memory cache at all when sorting.
>
> Querying across multiple indexes simultaneously however may present an  
> added complication...
>
>
>
> ----- Original Message ----
> From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
> To: java-user@lucene.apache.org
> Sent: Friday, 10 October, 2008 13:51:50
> Subject: Re: Question regarding sorting and memory consumption in lucene
>
> I'll follow up on my own question...
> Let's say that we have 4 years of data, meaning that there will be  
> roughly
> 4 * 365 = 1460 unique terms for our sort field.
> For one index, lets say with 30 million docs, the cache should use approx
> 100mb, or am I wrong? and thus for 6 indexes we would need approx 600 mb
> for the caches? (and an additional 100mb every time we warm a new  
> searcher
> and swap it out...) As far as the string versus int or long goes, I don't
> really see any big gain in changig it since 1460 * 10  bytes extra memory
> doesnt really make much difference. Or?
>
> I guess we should consider reducing the index size or at least only allow
> sorted search on a subset of the index (or a pruned version of the
> index...) ? Would that be better for us?
> But then again, I assume that there are much larger lucene-based indexes
> out there than ours, and you guys must have some solution to this issue,
> right? :)
>
> best regards,
>   Aleksander
>
>
> On Fri, 10 Oct 2008 14:09:36 +0200, Aleksander M. Stensby
> <aleksander.stensby@integrasco.no> wrote:
>
>> Hello, I've read a lot of threads now on memory consumption and sorting,
>> and I think I have a pretty good understanding of how things work, but I
>> could still need some input here..
>>
>> We currently have a system consisting of 6 different lucene indexes (all
>> have the same structure, so you could say it is a form of sharding). We
>> currently use this approach because we want to be able to give users
>> access to different index (but not necessarily  all indexes) etc.
>>
>> (We are planning to move to a solr-based system, but for now we would
>> like to solve this issue with our current lucene-based system.)
>>
>> The thing is, the indexes are rather big (ranging from 5G to 20G per
>> index and 10 - 30 million entries per index.)
>> We keep one searcher object open per index, and when the index is
>> changed (new documents added in batches several times a day), we update
>> the searcher objects.
>> In the warmup procedure we did a couple of searches and things work
>> fine, BUT i realized that in our application we return hits sorted by
>> date by default, and our warmup procedure did non-sorted queries... so
>> still the first searches done by the user after an update was slow
>> (obviously).
>>
>> To cope, I changed the warmup procedure to include a sorted search, and
>> now the user will not notice slow queries. Good!
>> But, the problem at hand is that we are running into memory problems
>> (and I understand that sorting does consume a lot of memory...) But is
>> there any way that is "best practice" to deal with this? The field we
>> sort on is an un_indexed text field representing the date. typically
>> "2008-10-10". I am aware that string field sorting consumes a lot of
>> memory, so should we change this field to something different? Would
>> this help us with the memory problems?
>>
>> As a sidenote / couriosity question: Does it matter if we use the search
>> method returning Hits versus the search method returning TopFieldDocs?
>> (we are not iterating them in any way when this memory issue occurs)
>>
>> Thanks in advance for any guidance we may get.
>>
>> Best regards,
>>   Aleksander M. Stensby
>>
>>
>>
>
>
>



-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S
+47 41 22 82 72
aleksander.stensby@integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 14:44:18 2008
Return-Path: <java-user-return-36549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7882 invoked from network); 10 Oct 2008 14:44:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 14:44:17 -0000
Received: (qmail 45658 invoked by uid 500); 10 Oct 2008 14:44:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45631 invoked by uid 500); 10 Oct 2008 14:44:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45620 invoked by uid 99); 10 Oct 2008 14:44:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 07:44:09 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.215] (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Oct 2008 14:43:04 +0000
Received: (qmail 50303 invoked by uid 60001); 10 Oct 2008 14:43:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Xr5mpEA0rjIGDqI81WCNUjWd8sAORyGAtwDeBUMRiGYRjZ1+OHz1uvacyCyYkC0yv4shOzk6gjvdVcbZOnUDBFjDk5asiJ67lmDDYhSRQeqnxyUW7SVPJy0hfTo6pBi4LfEFgMyhi63lVpvd+yp/iugW51NkeqYWP8RRK4eCpg4=;
X-YMail-OSG: sKiL_rcVM1kuG_6w2Er5eY7JPUHFLtglEqb3iO8Fjlze.8iEY6gQvxT5V90yLWk9GZfzMkOaO4wpFMCHKLYr4vkcZWZnerxkFiK7rD9XykFPj138RL77IA_TjOqtKsEnEs0ilsLhXu4bvRFJ77PrZxNOiJRgm5lIiLCGJ.cleUIs1fPh1b4-
Received: from [193.36.230.96] by web26004.mail.ukl.yahoo.com via HTTP; Fri, 10 Oct 2008 14:43:35 GMT
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.218.2
Date: Fri, 10 Oct 2008 14:43:35 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Question regarding sorting and memory consumption in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <306074.50126.qm@web26004.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think you have your memory cost calculation wrong.=0AThe cost is field si=
ze (10 bytes ?) times number of documents NOT number of unique terms.=0AThe=
 cache is essentially an array of  size reader.maxDoc() which is indexed di=
rectly into on docId to retrieve field values.=0A=0AYou are right in needin=
g to factor in the cost of keeping one active cache while busy warming-up a=
 new one so that effectively doubles the RAM requirements.=0A=0A=0A=0A=0A=
=0A=0A----- Original Message ----=0AFrom: Aleksander M. Stensby <aleksander=
.stensby@integrasco.no>=0ATo: java-user@lucene.apache.org=0ASent: Friday, 1=
0 October, 2008 15:25:29=0ASubject: Re: Question regarding sorting and memo=
ry consumption in lucene=0A=0AUnfortunately no, since the documents that ar=
e added may come form a new  =0A"source" containing old documents aswell..:=
/=0AI tried deploying our webapplication without any searcher objects and i=
t  =0Aconsumes basically ~200mb of memory in tomcat.=0AWith 6 searchers the=
 same applications manages to consume over 2.5 GB of  =0Amemory when warmin=
g... :(=0AI might have done some super-idiotic logic in the way I handle se=
arching,  =0Abut I can seriously not see what that might be...=0A=0ABut I a=
ssume that people deal with much larger indexes than this, right?=0A=0Achee=
rs,=0A  Aleksander=0A=0A=0AOn Fri, 10 Oct 2008 15:18:46 +0200, mark harwood=
 <markharw00d@yahoo.co.uk>  =0Awrote:=0A=0A> Assuming content is added in c=
hronological order and with no updates to  =0A> existing docs couldn't you =
rely on internal Lucene document id to give a  =0A> chronological sort orde=
r?=0A> That would require no memory cache at all when sorting.=0A>=0A> Quer=
ying across multiple indexes simultaneously however may present an  =0A> ad=
ded complication...=0A>=0A>=0A>=0A> ----- Original Message ----=0A> From: A=
leksander M. Stensby <aleksander.stensby@integrasco.no>=0A> To: java-user@l=
ucene.apache.org=0A> Sent: Friday, 10 October, 2008 13:51:50=0A> Subject: R=
e: Question regarding sorting and memory consumption in lucene=0A>=0A> I'll=
 follow up on my own question...=0A> Let's say that we have 4 years of data=
, meaning that there will be  =0A> roughly=0A> 4 * 365 =3D 1460 unique term=
s for our sort field.=0A> For one index, lets say with 30 million docs, the=
 cache should use approx=0A> 100mb, or am I wrong? and thus for 6 indexes w=
e would need approx 600 mb=0A> for the caches? (and an additional 100mb eve=
ry time we warm a new  =0A> searcher=0A> and swap it out...) As far as the =
string versus int or long goes, I don't=0A> really see any big gain in chan=
gig it since 1460 * 10  bytes extra memory=0A> doesnt really make much diff=
erence. Or?=0A>=0A> I guess we should consider reducing the index size or a=
t least only allow=0A> sorted search on a subset of the index (or a pruned =
version of the=0A> index...) ? Would that be better for us?=0A> But then ag=
ain, I assume that there are much larger lucene-based indexes=0A> out there=
 than ours, and you guys must have some solution to this issue,=0A> right? =
:)=0A>=0A> best regards,=0A>   Aleksander=0A>=0A>=0A> On Fri, 10 Oct 2008 1=
4:09:36 +0200, Aleksander M. Stensby=0A> <aleksander.stensby@integrasco.no>=
 wrote:=0A>=0A>> Hello, I've read a lot of threads now on memory consumptio=
n and sorting,=0A>> and I think I have a pretty good understanding of how t=
hings work, but I=0A>> could still need some input here..=0A>>=0A>> We curr=
ently have a system consisting of 6 different lucene indexes (all=0A>> have=
 the same structure, so you could say it is a form of sharding). We=0A>> cu=
rrently use this approach because we want to be able to give users=0A>> acc=
ess to different index (but not necessarily  all indexes) etc.=0A>>=0A>> (W=
e are planning to move to a solr-based system, but for now we would=0A>> li=
ke to solve this issue with our current lucene-based system.)=0A>>=0A>> The=
 thing is, the indexes are rather big (ranging from 5G to 20G per=0A>> inde=
x and 10 - 30 million entries per index.)=0A>> We keep one searcher object =
open per index, and when the index is=0A>> changed (new documents added in =
batches several times a day), we update=0A>> the searcher objects.=0A>> In =
the warmup procedure we did a couple of searches and things work=0A>> fine,=
 BUT i realized that in our application we return hits sorted by=0A>> date =
by default, and our warmup procedure did non-sorted queries... so=0A>> stil=
l the first searches done by the user after an update was slow=0A>> (obviou=
sly).=0A>>=0A>> To cope, I changed the warmup procedure to include a sorted=
 search, and=0A>> now the user will not notice slow queries. Good!=0A>> But=
, the problem at hand is that we are running into memory problems=0A>> (and=
 I understand that sorting does consume a lot of memory...) But is=0A>> the=
re any way that is "best practice" to deal with this? The field we=0A>> sor=
t on is an un_indexed text field representing the date. typically=0A>> "200=
8-10-10". I am aware that string field sorting consumes a lot of=0A>> memor=
y, so should we change this field to something different? Would=0A>> this h=
elp us with the memory problems?=0A>>=0A>> As a sidenote / couriosity quest=
ion: Does it matter if we use the search=0A>> method returning Hits versus =
the search method returning TopFieldDocs?=0A>> (we are not iterating them i=
n any way when this memory issue occurs)=0A>>=0A>> Thanks in advance for an=
y guidance we may get.=0A>>=0A>> Best regards,=0A>>   Aleksander M. Stensby=
=0A>>=0A>>=0A>>=0A>=0A>=0A>=0A=0A=0A=0A-- =0AAleksander M. Stensby=0ASenior=
 Software Developer=0AIntegrasco A/S=0A+47 41 22 82 72=0Aaleksander.stensby=
@integrasco.no=0A=0A-------------------------------------------------------=
--------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apach=
e.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=
=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 14:59:17 2008
Return-Path: <java-user-return-36550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17866 invoked from network); 10 Oct 2008 14:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 14:59:17 -0000
Received: (qmail 73163 invoked by uid 500); 10 Oct 2008 14:59:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72891 invoked by uid 500); 10 Oct 2008 14:59:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72880 invoked by uid 99); 10 Oct 2008 14:59:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 07:59:09 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.54] (HELO pebbles.fastcom.no) (62.73.241.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 14:58:05 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by pebbles.fastcom.no (Postfix) with ESMTP id 009CF6060
	for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 16:58:05 +0200 (DFT)
Date: Fri, 10 Oct 2008 16:58:14 +0200
To: java-user@lucene.apache.org
Subject: Re: Question regarding sorting and memory consumption in lucene
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <306074.50126.qm@web26004.mail.ukl.yahoo.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.uitc7ctvoftp72@melkor>
In-Reply-To: <306074.50126.qm@web26004.mail.ukl.yahoo.com>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I understand that, and I did mean the number of documents, but I read  
in the javadoc that:

"For String fields, the cache is larger: in addition to the above array,  
the value of every term in the field is kept in memory. If there are many  
unique terms in the field, this could be quite large."

and in one of the mails on the mailinglist i read:
"So if your field is an Int your talking numDocs*32 bits for your
cache. For a Long field its numDocs*64. For a String field Lucene caches
a String array with every unique term and then an int array indexing
into the term array."

But yes, I understand that the memory drain should not be significant due  
to the String field in our case since, but the fact that we have so many  
documents.
Still, if we have 30 000 000 docs * 10 bytes = ~300 mb (ok I was a bit off  
there... :p)
If we had a long field instead, it would be about 220 mb or something like  
that? hmm..

But does that mean that I will just have to reduce my index (at least for  
the sorting) ?
No other option?


Cheers, and thanks for your help!
  - Aleks

On Fri, 10 Oct 2008 16:43:35 +0200, mark harwood <markharw00d@yahoo.co.uk>  
wrote:

> I think you have your memory cost calculation wrong.
> The cost is field size (10 bytes ?) times number of documents NOT number  
> of unique terms.
> The cache is essentially an array of  size reader.maxDoc() which is  
> indexed directly into on docId to retrieve field values.
>
> You are right in needing to factor in the cost of keeping one active  
> cache while busy warming-up a new one so that effectively doubles the  
> RAM requirements.
>
>
>
>
>
>
> ----- Original Message ----
> From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
> To: java-user@lucene.apache.org
> Sent: Friday, 10 October, 2008 15:25:29
> Subject: Re: Question regarding sorting and memory consumption in lucene
>
> Unfortunately no, since the documents that are added may come form a new
> "source" containing old documents aswell..:/
> I tried deploying our webapplication without any searcher objects and it
> consumes basically ~200mb of memory in tomcat.
> With 6 searchers the same applications manages to consume over 2.5 GB of
> memory when warming... :(
> I might have done some super-idiotic logic in the way I handle searching,
> but I can seriously not see what that might be...
>
> But I assume that people deal with much larger indexes than this, right?
>
> cheers,
>   Aleksander
>
>
> On Fri, 10 Oct 2008 15:18:46 +0200, mark harwood  
> <markharw00d@yahoo.co.uk>
> wrote:
>
>> Assuming content is added in chronological order and with no updates to
>> existing docs couldn't you rely on internal Lucene document id to give a
>> chronological sort order?
>> That would require no memory cache at all when sorting.
>>
>> Querying across multiple indexes simultaneously however may present an
>> added complication...
>>
>>
>>
>> ----- Original Message ----
>> From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
>> To: java-user@lucene.apache.org
>> Sent: Friday, 10 October, 2008 13:51:50
>> Subject: Re: Question regarding sorting and memory consumption in lucene
>>
>> I'll follow up on my own question...
>> Let's say that we have 4 years of data, meaning that there will be
>> roughly
>> 4 * 365 = 1460 unique terms for our sort field.
>> For one index, lets say with 30 million docs, the cache should use  
>> approx
>> 100mb, or am I wrong? and thus for 6 indexes we would need approx 600 mb
>> for the caches? (and an additional 100mb every time we warm a new
>> searcher
>> and swap it out...) As far as the string versus int or long goes, I  
>> don't
>> really see any big gain in changig it since 1460 * 10  bytes extra  
>> memory
>> doesnt really make much difference. Or?
>>
>> I guess we should consider reducing the index size or at least only  
>> allow
>> sorted search on a subset of the index (or a pruned version of the
>> index...) ? Would that be better for us?
>> But then again, I assume that there are much larger lucene-based indexes
>> out there than ours, and you guys must have some solution to this issue,
>> right? :)
>>
>> best regards,
>>   Aleksander
>>
>>
>> On Fri, 10 Oct 2008 14:09:36 +0200, Aleksander M. Stensby
>> <aleksander.stensby@integrasco.no> wrote:
>>
>>> Hello, I've read a lot of threads now on memory consumption and  
>>> sorting,
>>> and I think I have a pretty good understanding of how things work, but  
>>> I
>>> could still need some input here..
>>>
>>> We currently have a system consisting of 6 different lucene indexes  
>>> (all
>>> have the same structure, so you could say it is a form of sharding). We
>>> currently use this approach because we want to be able to give users
>>> access to different index (but not necessarily  all indexes) etc.
>>>
>>> (We are planning to move to a solr-based system, but for now we would
>>> like to solve this issue with our current lucene-based system.)
>>>
>>> The thing is, the indexes are rather big (ranging from 5G to 20G per
>>> index and 10 - 30 million entries per index.)
>>> We keep one searcher object open per index, and when the index is
>>> changed (new documents added in batches several times a day), we update
>>> the searcher objects.
>>> In the warmup procedure we did a couple of searches and things work
>>> fine, BUT i realized that in our application we return hits sorted by
>>> date by default, and our warmup procedure did non-sorted queries... so
>>> still the first searches done by the user after an update was slow
>>> (obviously).
>>>
>>> To cope, I changed the warmup procedure to include a sorted search, and
>>> now the user will not notice slow queries. Good!
>>> But, the problem at hand is that we are running into memory problems
>>> (and I understand that sorting does consume a lot of memory...) But is
>>> there any way that is "best practice" to deal with this? The field we
>>> sort on is an un_indexed text field representing the date. typically
>>> "2008-10-10". I am aware that string field sorting consumes a lot of
>>> memory, so should we change this field to something different? Would
>>> this help us with the memory problems?
>>>
>>> As a sidenote / couriosity question: Does it matter if we use the  
>>> search
>>> method returning Hits versus the search method returning TopFieldDocs?
>>> (we are not iterating them in any way when this memory issue occurs)
>>>
>>> Thanks in advance for any guidance we may get.
>>>
>>> Best regards,
>>>   Aleksander M. Stensby
>>>
>>>
>>>
>>
>>
>>
>
>
>



-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S
+47 41 22 82 72
aleksander.stensby@integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 15:08:10 2008
Return-Path: <java-user-return-36551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45923 invoked from network); 10 Oct 2008 15:08:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 15:08:09 -0000
Received: (qmail 87456 invoked by uid 500); 10 Oct 2008 15:08:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87429 invoked by uid 500); 10 Oct 2008 15:08:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87418 invoked by uid 99); 10 Oct 2008 15:08:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 08:08:01 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Oct 2008 15:06:57 +0000
Received: (qmail 12487 invoked by uid 60001); 10 Oct 2008 15:07:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Tjcrd4gB4MwZQ3O0YppD68foiNkyt+O4NVhzg/tIpEPa3nX907aT6Hh/0amtJlYO4luFcvhG9KBW90clD5tN4VTq+LisnVEqocBCK3kuxmGeZ6bT7pxky0uvcUTC64SPz7Pyzo+Xa8ol9uweWLy8IuRcT04O3SADdeAzHMEwjGs=;
X-YMail-OSG: nk5ICfgVM1kNr6qeqB8lhvIno4tDaGqhOILXivp3bACKxP0L.QiWnTGOD3jYGAx54Q--
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Fri, 10 Oct 2008 15:07:31 GMT
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.218.2
Date: Fri, 10 Oct 2008 15:07:31 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Question regarding sorting and memory consumption in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <402804.99781.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Update: The statement "...cost is field size (10 bytes ?) times number of d=
ocuments" is wrong. =0AWhat you actually have is the cost of the unique str=
ings  (estimated at 10 * 1460  -effectively nothing) BUT you have to add th=
e cost of the array of object references to those strings so=0A=0A       30=
m x 8 bytes on 64bit java =3D 240mb=0Aor =0A    30m x 4 bytes on 32bit   =
=3D 120mb=0A=0A....which is where the bulk of the cost comes in.=0A=0AHow a=
bout using a field cache of "short" which is effectively:=0A=0A     new sho=
rt[reader.maxDoc]=0Aor=0A        2bytes * 30 million =3D 60 meg.=0A=0AEach =
short could represent up to 65536 values - capable of representing a date r=
ange of 179 years.=0A=0A    =0A=0A=0A=0A=0A----- Original Message ----=0AFr=
om: mark harwood <markharw00d@yahoo.co.uk>=0ATo: java-user@lucene.apache.or=
g=0ASent: Friday, 10 October, 2008 15:43:35=0ASubject: Re: Question regardi=
ng sorting and memory consumption in lucene=0A=0AI think you have your memo=
ry cost calculation wrong.=0AThe cost is field size (10 bytes ?) times numb=
er of documents NOT number of unique terms.=0AThe cache is essentially an a=
rray of  size reader.maxDoc() which is indexed directly into on docId to re=
trieve field values.=0A=0AYou are right in needing to factor in the cost of=
 keeping one active cache while busy warming-up a new one so that effective=
ly doubles the RAM requirements.=0A=0A=0A=0A=0A=0A=0A----- Original Message=
 ----=0AFrom: Aleksander M. Stensby <aleksander.stensby@integrasco.no>=0ATo=
: java-user@lucene.apache.org=0ASent: Friday, 10 October, 2008 15:25:29=0AS=
ubject: Re: Question regarding sorting and memory consumption in lucene=0A=
=0AUnfortunately no, since the documents that are added may come form a new=
  =0A"source" containing old documents aswell..:/=0AI tried deploying our w=
ebapplication without any searcher objects and it  =0Aconsumes basically ~2=
00mb of memory in tomcat.=0AWith 6 searchers the same applications manages =
to consume over 2.5 GB of  =0Amemory when warming... :(=0AI might have done=
 some super-idiotic logic in the way I handle searching,  =0Abut I can seri=
ously not see what that might be...=0A=0ABut I assume that people deal with=
 much larger indexes than this, right?=0A=0Acheers,=0A  Aleksander=0A=0A=0A=
On Fri, 10 Oct 2008 15:18:46 +0200, mark harwood <markharw00d@yahoo.co.uk> =
 =0Awrote:=0A=0A> Assuming content is added in chronological order and with=
 no updates to  =0A> existing docs couldn't you rely on internal Lucene doc=
ument id to give a  =0A> chronological sort order?=0A> That would require n=
o memory cache at all when sorting.=0A>=0A> Querying across multiple indexe=
s simultaneously however may present an  =0A> added complication...=0A>=0A>=
=0A>=0A> ----- Original Message ----=0A> From: Aleksander M. Stensby <aleks=
ander.stensby@integrasco.no>=0A> To: java-user@lucene.apache.org=0A> Sent: =
Friday, 10 October, 2008 13:51:50=0A> Subject: Re: Question regarding sorti=
ng and memory consumption in lucene=0A>=0A> I'll follow up on my own questi=
on...=0A> Let's say that we have 4 years of data, meaning that there will b=
e  =0A> roughly=0A> 4 * 365 =3D 1460 unique terms for our sort field.=0A> F=
or one index, lets say with 30 million docs, the cache should use approx=0A=
> 100mb, or am I wrong? and thus for 6 indexes we would need approx 600 mb=
=0A> for the caches? (and an additional 100mb every time we warm a new  =0A=
> searcher=0A> and swap it out...) As far as the string versus int or long =
goes, I don't=0A> really see any big gain in changig it since 1460 * 10  by=
tes extra memory=0A> doesnt really make much difference. Or?=0A>=0A> I gues=
s we should consider reducing the index size or at least only allow=0A> sor=
ted search on a subset of the index (or a pruned version of the=0A> index..=
.) ? Would that be better for us?=0A> But then again, I assume that there a=
re much larger lucene-based indexes=0A> out there than ours, and you guys m=
ust have some solution to this issue,=0A> right? :)=0A>=0A> best regards,=
=0A>   Aleksander=0A>=0A>=0A> On Fri, 10 Oct 2008 14:09:36 +0200, Aleksande=
r M. Stensby=0A> <aleksander.stensby@integrasco.no> wrote:=0A>=0A>> Hello, =
I've read a lot of threads now on memory consumption and sorting,=0A>> and =
I think I have a pretty good understanding of how things work, but I=0A>> c=
ould still need some input here..=0A>>=0A>> We currently have a system cons=
isting of 6 different lucene indexes (all=0A>> have the same structure, so =
you could say it is a form of sharding). We=0A>> currently use this approac=
h because we want to be able to give users=0A>> access to different index (=
but not necessarily  all indexes) etc.=0A>>=0A>> (We are planning to move t=
o a solr-based system, but for now we would=0A>> like to solve this issue w=
ith our current lucene-based system.)=0A>>=0A>> The thing is, the indexes a=
re rather big (ranging from 5G to 20G per=0A>> index and 10 - 30 million en=
tries per index.)=0A>> We keep one searcher object open per index, and when=
 the index is=0A>> changed (new documents added in batches several times a =
day), we update=0A>> the searcher objects.=0A>> In the warmup procedure we =
did a couple of searches and things work=0A>> fine, BUT i realized that in =
our application we return hits sorted by=0A>> date by default, and our warm=
up procedure did non-sorted queries... so=0A>> still the first searches don=
e by the user after an update was slow=0A>> (obviously).=0A>>=0A>> To cope,=
 I changed the warmup procedure to include a sorted search, and=0A>> now th=
e user will not notice slow queries. Good!=0A>> But, the problem at hand is=
 that we are running into memory problems=0A>> (and I understand that sorti=
ng does consume a lot of memory...) But is=0A>> there any way that is "best=
 practice" to deal with this? The field we=0A>> sort on is an un_indexed te=
xt field representing the date. typically=0A>> "2008-10-10". I am aware tha=
t string field sorting consumes a lot of=0A>> memory, so should we change t=
his field to something different? Would=0A>> this help us with the memory p=
roblems?=0A>>=0A>> As a sidenote / couriosity question: Does it matter if w=
e use the search=0A>> method returning Hits versus the search method return=
ing TopFieldDocs?=0A>> (we are not iterating them in any way when this memo=
ry issue occurs)=0A>>=0A>> Thanks in advance for any guidance we may get.=
=0A>>=0A>> Best regards,=0A>>   Aleksander M. Stensby=0A>>=0A>>=0A>>=0A>=0A=
>=0A>=0A=0A=0A=0A-- =0AAleksander M. Stensby=0ASenior Software Developer=0A=
Integrasco A/S=0A+47 41 22 82 72=0Aaleksander.stensby@integrasco.no=0A=0A--=
-------------------------------------------------------------------=0ATo un=
subscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional=
 commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A---------=
------------------------------------------------------------=0ATo unsubscri=
be, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 15:46:07 2008
Return-Path: <java-user-return-36552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62091 invoked from network); 10 Oct 2008 15:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 15:46:07 -0000
Received: (qmail 74383 invoked by uid 500); 10 Oct 2008 15:46:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73438 invoked by uid 500); 10 Oct 2008 15:45:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73427 invoked by uid 99); 10 Oct 2008 15:45:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 08:45:58 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_SECURITYSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.54] (HELO pebbles.fastcom.no) (62.73.241.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 15:44:54 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by pebbles.fastcom.no (Postfix) with ESMTP id 6EA7D8F68
	for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 17:44:53 +0200 (DFT)
Date: Fri, 10 Oct 2008 17:45:02 +0200
To: java-user@lucene.apache.org
Subject: Re: Question regarding sorting and memory consumption in lucene
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <402804.99781.qm@web26005.mail.ukl.yahoo.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.uitfdcj5oftp72@melkor>
In-Reply-To: <402804.99781.qm@web26005.mail.ukl.yahoo.com>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

That's a really good idea Mark! :)
Thanks! Will try to see if can make a quick change with your suggestion.  
(Too bad quick isn't really a word in my vocabulary when it's 6 o'clock on  
a Friday :(
Guess it'll be a looong night.. :(

Cheers,
  Aleks

On Fri, 10 Oct 2008 17:07:31 +0200, mark harwood <markharw00d@yahoo.co.uk>  
wrote:

> Update: The statement "...cost is field size (10 bytes ?) times number  
> of documents" is wrong.
> What you actually have is the cost of the unique strings  (estimated at  
> 10 * 1460  -effectively nothing) BUT you have to add the cost of the  
> array of object references to those strings so
>
>        30m x 8 bytes on 64bit java = 240mb
> or
>     30m x 4 bytes on 32bit   = 120mb
>
> ....which is where the bulk of the cost comes in.
>
> How about using a field cache of "short" which is effectively:
>
>      new short[reader.maxDoc]
> or
>         2bytes * 30 million = 60 meg.
>
> Each short could represent up to 65536 values - capable of representing  
> a date range of 179 years.
>
>
>
>
>
> ----- Original Message ----
> From: mark harwood <markharw00d@yahoo.co.uk>
> To: java-user@lucene.apache.org
> Sent: Friday, 10 October, 2008 15:43:35
> Subject: Re: Question regarding sorting and memory consumption in lucene
>
> I think you have your memory cost calculation wrong.
> The cost is field size (10 bytes ?) times number of documents NOT number  
> of unique terms.
> The cache is essentially an array of  size reader.maxDoc() which is  
> indexed directly into on docId to retrieve field values.
>
> You are right in needing to factor in the cost of keeping one active  
> cache while busy warming-up a new one so that effectively doubles the  
> RAM requirements.
>
>
>
>
>
>
> ----- Original Message ----
> From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
> To: java-user@lucene.apache.org
> Sent: Friday, 10 October, 2008 15:25:29
> Subject: Re: Question regarding sorting and memory consumption in lucene
>
> Unfortunately no, since the documents that are added may come form a new
> "source" containing old documents aswell..:/
> I tried deploying our webapplication without any searcher objects and it
> consumes basically ~200mb of memory in tomcat.
> With 6 searchers the same applications manages to consume over 2.5 GB of
> memory when warming... :(
> I might have done some super-idiotic logic in the way I handle searching,
> but I can seriously not see what that might be...
>
> But I assume that people deal with much larger indexes than this, right?
>
> cheers,
>   Aleksander
>
>
> On Fri, 10 Oct 2008 15:18:46 +0200, mark harwood  
> <markharw00d@yahoo.co.uk>
> wrote:
>
>> Assuming content is added in chronological order and with no updates to
>> existing docs couldn't you rely on internal Lucene document id to give a
>> chronological sort order?
>> That would require no memory cache at all when sorting.
>>
>> Querying across multiple indexes simultaneously however may present an
>> added complication...
>>
>>
>>
>> ----- Original Message ----
>> From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
>> To: java-user@lucene.apache.org
>> Sent: Friday, 10 October, 2008 13:51:50
>> Subject: Re: Question regarding sorting and memory consumption in lucene
>>
>> I'll follow up on my own question...
>> Let's say that we have 4 years of data, meaning that there will be
>> roughly
>> 4 * 365 = 1460 unique terms for our sort field.
>> For one index, lets say with 30 million docs, the cache should use  
>> approx
>> 100mb, or am I wrong? and thus for 6 indexes we would need approx 600 mb
>> for the caches? (and an additional 100mb every time we warm a new
>> searcher
>> and swap it out...) As far as the string versus int or long goes, I  
>> don't
>> really see any big gain in changig it since 1460 * 10  bytes extra  
>> memory
>> doesnt really make much difference. Or?
>>
>> I guess we should consider reducing the index size or at least only  
>> allow
>> sorted search on a subset of the index (or a pruned version of the
>> index...) ? Would that be better for us?
>> But then again, I assume that there are much larger lucene-based indexes
>> out there than ours, and you guys must have some solution to this issue,
>> right? :)
>>
>> best regards,
>>   Aleksander
>>
>>
>> On Fri, 10 Oct 2008 14:09:36 +0200, Aleksander M. Stensby
>> <aleksander.stensby@integrasco.no> wrote:
>>
>>> Hello, I've read a lot of threads now on memory consumption and  
>>> sorting,
>>> and I think I have a pretty good understanding of how things work, but  
>>> I
>>> could still need some input here..
>>>
>>> We currently have a system consisting of 6 different lucene indexes  
>>> (all
>>> have the same structure, so you could say it is a form of sharding). We
>>> currently use this approach because we want to be able to give users
>>> access to different index (but not necessarily  all indexes) etc.
>>>
>>> (We are planning to move to a solr-based system, but for now we would
>>> like to solve this issue with our current lucene-based system.)
>>>
>>> The thing is, the indexes are rather big (ranging from 5G to 20G per
>>> index and 10 - 30 million entries per index.)
>>> We keep one searcher object open per index, and when the index is
>>> changed (new documents added in batches several times a day), we update
>>> the searcher objects.
>>> In the warmup procedure we did a couple of searches and things work
>>> fine, BUT i realized that in our application we return hits sorted by
>>> date by default, and our warmup procedure did non-sorted queries... so
>>> still the first searches done by the user after an update was slow
>>> (obviously).
>>>
>>> To cope, I changed the warmup procedure to include a sorted search, and
>>> now the user will not notice slow queries. Good!
>>> But, the problem at hand is that we are running into memory problems
>>> (and I understand that sorting does consume a lot of memory...) But is
>>> there any way that is "best practice" to deal with this? The field we
>>> sort on is an un_indexed text field representing the date. typically
>>> "2008-10-10". I am aware that string field sorting consumes a lot of
>>> memory, so should we change this field to something different? Would
>>> this help us with the memory problems?
>>>
>>> As a sidenote / couriosity question: Does it matter if we use the  
>>> search
>>> method returning Hits versus the search method returning TopFieldDocs?
>>> (we are not iterating them in any way when this memory issue occurs)
>>>
>>> Thanks in advance for any guidance we may get.
>>>
>>> Best regards,
>>>   Aleksander M. Stensby
>>>
>>>
>>>
>>
>>
>>
>
>
>



-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S
+47 41 22 82 72
aleksander.stensby@integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 16:02:17 2008
Return-Path: <java-user-return-36553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69772 invoked from network); 10 Oct 2008 16:02:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 16:02:17 -0000
Received: (qmail 13519 invoked by uid 500); 10 Oct 2008 16:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13486 invoked by uid 500); 10 Oct 2008 16:02:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13475 invoked by uid 99); 10 Oct 2008 16:02:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 09:02:09 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_SECURITYSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 16:01:06 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Fri, 10 Oct 2008 12:01:20 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 10 Oct 2008 11:57:19 -0400
Subject: RE: Question regarding sorting and memory consumption in lucene
Thread-Topic: Question regarding sorting and memory consumption in lucene
Thread-Index: Ackq70+FIW4KTeY2SH6NjYQFashc5gAAOs5g
Message-ID: <36B4EF9511887240A973A93E7878B0560A0E3DEEF0@US1-IIEX1.IICORP.DOM>
References: <402804.99781.qm@web26005.mail.ukl.yahoo.com>
 <op.uitfdcj5oftp72@melkor>
In-Reply-To: <op.uitfdcj5oftp72@melkor>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SSBoYXZlIGhhZCBhIHNpbWlsYXIgcHJvYmxlbS4gV2hhdCBJIGRvIGlzIGxvYWQgYWxsIHRoZSBk
YXRlIGZpZWxkIHZhbHVlcyBhdCBpbmRleCBzdGFydHVwLCBjb252ZXJ0IGRhdGVzICh0aW1lc3Rh
bXBzKSB0byBhIEp1bGlhbiBkYXRlICgjIG9mIHNlY29uZHMgc2luY2UgMTk3MC8xLzEpLiBUaGVu
IEkgcHJlLXNvcnQgdGhhdCBhcnJheSB1c2luZyBhIHZlcnkgZmFzdCBPKG4pIGRpc3RyaWJ1dGlv
biBzb3J0LCBhbmQgdGhlbiBrZWVwIGFuIGFycmF5IG9mIGludGVnZXJzIHdoaWNoIGlzIHRoZSBw
cmUtc29ydGVkIHBlcm11dGF0aW9uIG9mIGFsbCBkb2N1bWVudHMgaW4gdGhlIGluZGV4LiBTbyB0
aGF0LCBmb3IgZG9jaWQ9TiwgcGVybVtOXT1zb3J0ZWQgb3JkZXIuICBUaGVuIGl0IGp1c3QgdGFr
ZXMgZW51bWVyYXRpbmcgZG9jaWRzIGluIHJlc3VsdHMgKGZyb20gYSBiaXRhcnJheSkgdG8gZ2V0
IHRoZSBzb3J0ZWQgb3JkZXIgb2YgcmVzdWx0cy4gIE91ciBpbmRleCBpcyBhcHByb3guIDM4bWls
bGlvbiBkb2NzLiBTb3J0aW5nIGJ5IGRhdGUgaXMgYXJvdW5kIDIwbXMuDQoNCi0tLS0tT3JpZ2lu
YWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBBbGVrc2FuZGVyIE0uIFN0ZW5zYnkgW21haWx0bzphbGVr
c2FuZGVyLnN0ZW5zYnlAaW50ZWdyYXNjby5ub10NClNlbnQ6IEZyaWRheSwgT2N0b2JlciAxMCwg
MjAwOCAxMTo0NSBBTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDog
UmU6IFF1ZXN0aW9uIHJlZ2FyZGluZyBzb3J0aW5nIGFuZCBtZW1vcnkgY29uc3VtcHRpb24gaW4g
bHVjZW5lDQoNClRoYXQncyBhIHJlYWxseSBnb29kIGlkZWEgTWFyayEgOikNClRoYW5rcyEgV2ls
bCB0cnkgdG8gc2VlIGlmIGNhbiBtYWtlIGEgcXVpY2sgY2hhbmdlIHdpdGggeW91ciBzdWdnZXN0
aW9uLg0KKFRvbyBiYWQgcXVpY2sgaXNuJ3QgcmVhbGx5IGEgd29yZCBpbiBteSB2b2NhYnVsYXJ5
IHdoZW4gaXQncyA2IG8nY2xvY2sgb24NCmEgRnJpZGF5IDooDQpHdWVzcyBpdCdsbCBiZSBhIGxv
b29uZyBuaWdodC4uIDooDQoNCkNoZWVycywNCiAgQWxla3MNCg0KT24gRnJpLCAxMCBPY3QgMjAw
OCAxNzowNzozMSArMDIwMCwgbWFyayBoYXJ3b29kIDxtYXJraGFydzAwZEB5YWhvby5jby51az4N
Cndyb3RlOg0KDQo+IFVwZGF0ZTogVGhlIHN0YXRlbWVudCAiLi4uY29zdCBpcyBmaWVsZCBzaXpl
ICgxMCBieXRlcyA/KSB0aW1lcyBudW1iZXINCj4gb2YgZG9jdW1lbnRzIiBpcyB3cm9uZy4NCj4g
V2hhdCB5b3UgYWN0dWFsbHkgaGF2ZSBpcyB0aGUgY29zdCBvZiB0aGUgdW5pcXVlIHN0cmluZ3Mg
IChlc3RpbWF0ZWQgYXQNCj4gMTAgKiAxNDYwICAtZWZmZWN0aXZlbHkgbm90aGluZykgQlVUIHlv
dSBoYXZlIHRvIGFkZCB0aGUgY29zdCBvZiB0aGUNCj4gYXJyYXkgb2Ygb2JqZWN0IHJlZmVyZW5j
ZXMgdG8gdGhvc2Ugc3RyaW5ncyBzbw0KPg0KPiAgICAgICAgMzBtIHggOCBieXRlcyBvbiA2NGJp
dCBqYXZhID0gMjQwbWINCj4gb3INCj4gICAgIDMwbSB4IDQgYnl0ZXMgb24gMzJiaXQgICA9IDEy
MG1iDQo+DQo+IC4uLi53aGljaCBpcyB3aGVyZSB0aGUgYnVsayBvZiB0aGUgY29zdCBjb21lcyBp
bi4NCj4NCj4gSG93IGFib3V0IHVzaW5nIGEgZmllbGQgY2FjaGUgb2YgInNob3J0IiB3aGljaCBp
cyBlZmZlY3RpdmVseToNCj4NCj4gICAgICBuZXcgc2hvcnRbcmVhZGVyLm1heERvY10NCj4gb3IN
Cj4gICAgICAgICAyYnl0ZXMgKiAzMCBtaWxsaW9uID0gNjAgbWVnLg0KPg0KPiBFYWNoIHNob3J0
IGNvdWxkIHJlcHJlc2VudCB1cCB0byA2NTUzNiB2YWx1ZXMgLSBjYXBhYmxlIG9mIHJlcHJlc2Vu
dGluZw0KPiBhIGRhdGUgcmFuZ2Ugb2YgMTc5IHllYXJzLg0KPg0KPg0KPg0KPg0KPg0KPiAtLS0t
LSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0NCj4gRnJvbTogbWFyayBoYXJ3b29kIDxtYXJraGFydzAw
ZEB5YWhvby5jby51az4NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBTZW50
OiBGcmlkYXksIDEwIE9jdG9iZXIsIDIwMDggMTU6NDM6MzUNCj4gU3ViamVjdDogUmU6IFF1ZXN0
aW9uIHJlZ2FyZGluZyBzb3J0aW5nIGFuZCBtZW1vcnkgY29uc3VtcHRpb24gaW4gbHVjZW5lDQo+
DQo+IEkgdGhpbmsgeW91IGhhdmUgeW91ciBtZW1vcnkgY29zdCBjYWxjdWxhdGlvbiB3cm9uZy4N
Cj4gVGhlIGNvc3QgaXMgZmllbGQgc2l6ZSAoMTAgYnl0ZXMgPykgdGltZXMgbnVtYmVyIG9mIGRv
Y3VtZW50cyBOT1QgbnVtYmVyDQo+IG9mIHVuaXF1ZSB0ZXJtcy4NCj4gVGhlIGNhY2hlIGlzIGVz
c2VudGlhbGx5IGFuIGFycmF5IG9mICBzaXplIHJlYWRlci5tYXhEb2MoKSB3aGljaCBpcw0KPiBp
bmRleGVkIGRpcmVjdGx5IGludG8gb24gZG9jSWQgdG8gcmV0cmlldmUgZmllbGQgdmFsdWVzLg0K
Pg0KPiBZb3UgYXJlIHJpZ2h0IGluIG5lZWRpbmcgdG8gZmFjdG9yIGluIHRoZSBjb3N0IG9mIGtl
ZXBpbmcgb25lIGFjdGl2ZQ0KPiBjYWNoZSB3aGlsZSBidXN5IHdhcm1pbmctdXAgYSBuZXcgb25l
IHNvIHRoYXQgZWZmZWN0aXZlbHkgZG91YmxlcyB0aGUNCj4gUkFNIHJlcXVpcmVtZW50cy4NCj4N
Cj4NCj4NCj4NCj4NCj4NCj4gLS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tDQo+IEZyb206IEFs
ZWtzYW5kZXIgTS4gU3RlbnNieSA8YWxla3NhbmRlci5zdGVuc2J5QGludGVncmFzY28ubm8+DQo+
IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU2VudDogRnJpZGF5LCAxMCBPY3Rv
YmVyLCAyMDA4IDE1OjI1OjI5DQo+IFN1YmplY3Q6IFJlOiBRdWVzdGlvbiByZWdhcmRpbmcgc29y
dGluZyBhbmQgbWVtb3J5IGNvbnN1bXB0aW9uIGluIGx1Y2VuZQ0KPg0KPiBVbmZvcnR1bmF0ZWx5
IG5vLCBzaW5jZSB0aGUgZG9jdW1lbnRzIHRoYXQgYXJlIGFkZGVkIG1heSBjb21lIGZvcm0gYSBu
ZXcNCj4gInNvdXJjZSIgY29udGFpbmluZyBvbGQgZG9jdW1lbnRzIGFzd2VsbC4uOi8NCj4gSSB0
cmllZCBkZXBsb3lpbmcgb3VyIHdlYmFwcGxpY2F0aW9uIHdpdGhvdXQgYW55IHNlYXJjaGVyIG9i
amVjdHMgYW5kIGl0DQo+IGNvbnN1bWVzIGJhc2ljYWxseSB+MjAwbWIgb2YgbWVtb3J5IGluIHRv
bWNhdC4NCj4gV2l0aCA2IHNlYXJjaGVycyB0aGUgc2FtZSBhcHBsaWNhdGlvbnMgbWFuYWdlcyB0
byBjb25zdW1lIG92ZXIgMi41IEdCIG9mDQo+IG1lbW9yeSB3aGVuIHdhcm1pbmcuLi4gOigNCj4g
SSBtaWdodCBoYXZlIGRvbmUgc29tZSBzdXBlci1pZGlvdGljIGxvZ2ljIGluIHRoZSB3YXkgSSBo
YW5kbGUgc2VhcmNoaW5nLA0KPiBidXQgSSBjYW4gc2VyaW91c2x5IG5vdCBzZWUgd2hhdCB0aGF0
IG1pZ2h0IGJlLi4uDQo+DQo+IEJ1dCBJIGFzc3VtZSB0aGF0IHBlb3BsZSBkZWFsIHdpdGggbXVj
aCBsYXJnZXIgaW5kZXhlcyB0aGFuIHRoaXMsIHJpZ2h0Pw0KPg0KPiBjaGVlcnMsDQo+ICAgQWxl
a3NhbmRlcg0KPg0KPg0KPiBPbiBGcmksIDEwIE9jdCAyMDA4IDE1OjE4OjQ2ICswMjAwLCBtYXJr
IGhhcndvb2QNCj4gPG1hcmtoYXJ3MDBkQHlhaG9vLmNvLnVrPg0KPiB3cm90ZToNCj4NCj4+IEFz
c3VtaW5nIGNvbnRlbnQgaXMgYWRkZWQgaW4gY2hyb25vbG9naWNhbCBvcmRlciBhbmQgd2l0aCBu
byB1cGRhdGVzIHRvDQo+PiBleGlzdGluZyBkb2NzIGNvdWxkbid0IHlvdSByZWx5IG9uIGludGVy
bmFsIEx1Y2VuZSBkb2N1bWVudCBpZCB0byBnaXZlIGENCj4+IGNocm9ub2xvZ2ljYWwgc29ydCBv
cmRlcj8NCj4+IFRoYXQgd291bGQgcmVxdWlyZSBubyBtZW1vcnkgY2FjaGUgYXQgYWxsIHdoZW4g
c29ydGluZy4NCj4+DQo+PiBRdWVyeWluZyBhY3Jvc3MgbXVsdGlwbGUgaW5kZXhlcyBzaW11bHRh
bmVvdXNseSBob3dldmVyIG1heSBwcmVzZW50IGFuDQo+PiBhZGRlZCBjb21wbGljYXRpb24uLi4N
Cj4+DQo+Pg0KPj4NCj4+IC0tLS0tIE9yaWdpbmFsIE1lc3NhZ2UgLS0tLQ0KPj4gRnJvbTogQWxl
a3NhbmRlciBNLiBTdGVuc2J5IDxhbGVrc2FuZGVyLnN0ZW5zYnlAaW50ZWdyYXNjby5ubz4NCj4+
IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IFNlbnQ6IEZyaWRheSwgMTAgT2N0
b2JlciwgMjAwOCAxMzo1MTo1MA0KPj4gU3ViamVjdDogUmU6IFF1ZXN0aW9uIHJlZ2FyZGluZyBz
b3J0aW5nIGFuZCBtZW1vcnkgY29uc3VtcHRpb24gaW4gbHVjZW5lDQo+Pg0KPj4gSSdsbCBmb2xs
b3cgdXAgb24gbXkgb3duIHF1ZXN0aW9uLi4uDQo+PiBMZXQncyBzYXkgdGhhdCB3ZSBoYXZlIDQg
eWVhcnMgb2YgZGF0YSwgbWVhbmluZyB0aGF0IHRoZXJlIHdpbGwgYmUNCj4+IHJvdWdobHkNCj4+
IDQgKiAzNjUgPSAxNDYwIHVuaXF1ZSB0ZXJtcyBmb3Igb3VyIHNvcnQgZmllbGQuDQo+PiBGb3Ig
b25lIGluZGV4LCBsZXRzIHNheSB3aXRoIDMwIG1pbGxpb24gZG9jcywgdGhlIGNhY2hlIHNob3Vs
ZCB1c2UNCj4+IGFwcHJveA0KPj4gMTAwbWIsIG9yIGFtIEkgd3Jvbmc/IGFuZCB0aHVzIGZvciA2
IGluZGV4ZXMgd2Ugd291bGQgbmVlZCBhcHByb3ggNjAwIG1iDQo+PiBmb3IgdGhlIGNhY2hlcz8g
KGFuZCBhbiBhZGRpdGlvbmFsIDEwMG1iIGV2ZXJ5IHRpbWUgd2Ugd2FybSBhIG5ldw0KPj4gc2Vh
cmNoZXINCj4+IGFuZCBzd2FwIGl0IG91dC4uLikgQXMgZmFyIGFzIHRoZSBzdHJpbmcgdmVyc3Vz
IGludCBvciBsb25nIGdvZXMsIEkNCj4+IGRvbid0DQo+PiByZWFsbHkgc2VlIGFueSBiaWcgZ2Fp
biBpbiBjaGFuZ2lnIGl0IHNpbmNlIDE0NjAgKiAxMCAgYnl0ZXMgZXh0cmENCj4+IG1lbW9yeQ0K
Pj4gZG9lc250IHJlYWxseSBtYWtlIG11Y2ggZGlmZmVyZW5jZS4gT3I/DQo+Pg0KPj4gSSBndWVz
cyB3ZSBzaG91bGQgY29uc2lkZXIgcmVkdWNpbmcgdGhlIGluZGV4IHNpemUgb3IgYXQgbGVhc3Qg
b25seQ0KPj4gYWxsb3cNCj4+IHNvcnRlZCBzZWFyY2ggb24gYSBzdWJzZXQgb2YgdGhlIGluZGV4
IChvciBhIHBydW5lZCB2ZXJzaW9uIG9mIHRoZQ0KPj4gaW5kZXguLi4pID8gV291bGQgdGhhdCBi
ZSBiZXR0ZXIgZm9yIHVzPw0KPj4gQnV0IHRoZW4gYWdhaW4sIEkgYXNzdW1lIHRoYXQgdGhlcmUg
YXJlIG11Y2ggbGFyZ2VyIGx1Y2VuZS1iYXNlZCBpbmRleGVzDQo+PiBvdXQgdGhlcmUgdGhhbiBv
dXJzLCBhbmQgeW91IGd1eXMgbXVzdCBoYXZlIHNvbWUgc29sdXRpb24gdG8gdGhpcyBpc3N1ZSwN
Cj4+IHJpZ2h0PyA6KQ0KPj4NCj4+IGJlc3QgcmVnYXJkcywNCj4+ICAgQWxla3NhbmRlcg0KPj4N
Cj4+DQo+PiBPbiBGcmksIDEwIE9jdCAyMDA4IDE0OjA5OjM2ICswMjAwLCBBbGVrc2FuZGVyIE0u
IFN0ZW5zYnkNCj4+IDxhbGVrc2FuZGVyLnN0ZW5zYnlAaW50ZWdyYXNjby5ubz4gd3JvdGU6DQo+
Pg0KPj4+IEhlbGxvLCBJJ3ZlIHJlYWQgYSBsb3Qgb2YgdGhyZWFkcyBub3cgb24gbWVtb3J5IGNv
bnN1bXB0aW9uIGFuZA0KPj4+IHNvcnRpbmcsDQo+Pj4gYW5kIEkgdGhpbmsgSSBoYXZlIGEgcHJl
dHR5IGdvb2QgdW5kZXJzdGFuZGluZyBvZiBob3cgdGhpbmdzIHdvcmssIGJ1dA0KPj4+IEkNCj4+
PiBjb3VsZCBzdGlsbCBuZWVkIHNvbWUgaW5wdXQgaGVyZS4uDQo+Pj4NCj4+PiBXZSBjdXJyZW50
bHkgaGF2ZSBhIHN5c3RlbSBjb25zaXN0aW5nIG9mIDYgZGlmZmVyZW50IGx1Y2VuZSBpbmRleGVz
DQo+Pj4gKGFsbA0KPj4+IGhhdmUgdGhlIHNhbWUgc3RydWN0dXJlLCBzbyB5b3UgY291bGQgc2F5
IGl0IGlzIGEgZm9ybSBvZiBzaGFyZGluZykuIFdlDQo+Pj4gY3VycmVudGx5IHVzZSB0aGlzIGFw
cHJvYWNoIGJlY2F1c2Ugd2Ugd2FudCB0byBiZSBhYmxlIHRvIGdpdmUgdXNlcnMNCj4+PiBhY2Nl
c3MgdG8gZGlmZmVyZW50IGluZGV4IChidXQgbm90IG5lY2Vzc2FyaWx5ICBhbGwgaW5kZXhlcykg
ZXRjLg0KPj4+DQo+Pj4gKFdlIGFyZSBwbGFubmluZyB0byBtb3ZlIHRvIGEgc29sci1iYXNlZCBz
eXN0ZW0sIGJ1dCBmb3Igbm93IHdlIHdvdWxkDQo+Pj4gbGlrZSB0byBzb2x2ZSB0aGlzIGlzc3Vl
IHdpdGggb3VyIGN1cnJlbnQgbHVjZW5lLWJhc2VkIHN5c3RlbS4pDQo+Pj4NCj4+PiBUaGUgdGhp
bmcgaXMsIHRoZSBpbmRleGVzIGFyZSByYXRoZXIgYmlnIChyYW5naW5nIGZyb20gNUcgdG8gMjBH
IHBlcg0KPj4+IGluZGV4IGFuZCAxMCAtIDMwIG1pbGxpb24gZW50cmllcyBwZXIgaW5kZXguKQ0K
Pj4+IFdlIGtlZXAgb25lIHNlYXJjaGVyIG9iamVjdCBvcGVuIHBlciBpbmRleCwgYW5kIHdoZW4g
dGhlIGluZGV4IGlzDQo+Pj4gY2hhbmdlZCAobmV3IGRvY3VtZW50cyBhZGRlZCBpbiBiYXRjaGVz
IHNldmVyYWwgdGltZXMgYSBkYXkpLCB3ZSB1cGRhdGUNCj4+PiB0aGUgc2VhcmNoZXIgb2JqZWN0
cy4NCj4+PiBJbiB0aGUgd2FybXVwIHByb2NlZHVyZSB3ZSBkaWQgYSBjb3VwbGUgb2Ygc2VhcmNo
ZXMgYW5kIHRoaW5ncyB3b3JrDQo+Pj4gZmluZSwgQlVUIGkgcmVhbGl6ZWQgdGhhdCBpbiBvdXIg
YXBwbGljYXRpb24gd2UgcmV0dXJuIGhpdHMgc29ydGVkIGJ5DQo+Pj4gZGF0ZSBieSBkZWZhdWx0
LCBhbmQgb3VyIHdhcm11cCBwcm9jZWR1cmUgZGlkIG5vbi1zb3J0ZWQgcXVlcmllcy4uLiBzbw0K
Pj4+IHN0aWxsIHRoZSBmaXJzdCBzZWFyY2hlcyBkb25lIGJ5IHRoZSB1c2VyIGFmdGVyIGFuIHVw
ZGF0ZSB3YXMgc2xvdw0KPj4+IChvYnZpb3VzbHkpLg0KPj4+DQo+Pj4gVG8gY29wZSwgSSBjaGFu
Z2VkIHRoZSB3YXJtdXAgcHJvY2VkdXJlIHRvIGluY2x1ZGUgYSBzb3J0ZWQgc2VhcmNoLCBhbmQN
Cj4+PiBub3cgdGhlIHVzZXIgd2lsbCBub3Qgbm90aWNlIHNsb3cgcXVlcmllcy4gR29vZCENCj4+
PiBCdXQsIHRoZSBwcm9ibGVtIGF0IGhhbmQgaXMgdGhhdCB3ZSBhcmUgcnVubmluZyBpbnRvIG1l
bW9yeSBwcm9ibGVtcw0KPj4+IChhbmQgSSB1bmRlcnN0YW5kIHRoYXQgc29ydGluZyBkb2VzIGNv
bnN1bWUgYSBsb3Qgb2YgbWVtb3J5Li4uKSBCdXQgaXMNCj4+PiB0aGVyZSBhbnkgd2F5IHRoYXQg
aXMgImJlc3QgcHJhY3RpY2UiIHRvIGRlYWwgd2l0aCB0aGlzPyBUaGUgZmllbGQgd2UNCj4+PiBz
b3J0IG9uIGlzIGFuIHVuX2luZGV4ZWQgdGV4dCBmaWVsZCByZXByZXNlbnRpbmcgdGhlIGRhdGUu
IHR5cGljYWxseQ0KPj4+ICIyMDA4LTEwLTEwIi4gSSBhbSBhd2FyZSB0aGF0IHN0cmluZyBmaWVs
ZCBzb3J0aW5nIGNvbnN1bWVzIGEgbG90IG9mDQo+Pj4gbWVtb3J5LCBzbyBzaG91bGQgd2UgY2hh
bmdlIHRoaXMgZmllbGQgdG8gc29tZXRoaW5nIGRpZmZlcmVudD8gV291bGQNCj4+PiB0aGlzIGhl
bHAgdXMgd2l0aCB0aGUgbWVtb3J5IHByb2JsZW1zPw0KPj4+DQo+Pj4gQXMgYSBzaWRlbm90ZSAv
IGNvdXJpb3NpdHkgcXVlc3Rpb246IERvZXMgaXQgbWF0dGVyIGlmIHdlIHVzZSB0aGUNCj4+PiBz
ZWFyY2gNCj4+PiBtZXRob2QgcmV0dXJuaW5nIEhpdHMgdmVyc3VzIHRoZSBzZWFyY2ggbWV0aG9k
IHJldHVybmluZyBUb3BGaWVsZERvY3M/DQo+Pj4gKHdlIGFyZSBub3QgaXRlcmF0aW5nIHRoZW0g
aW4gYW55IHdheSB3aGVuIHRoaXMgbWVtb3J5IGlzc3VlIG9jY3VycykNCj4+Pg0KPj4+IFRoYW5r
cyBpbiBhZHZhbmNlIGZvciBhbnkgZ3VpZGFuY2Ugd2UgbWF5IGdldC4NCj4+Pg0KPj4+IEJlc3Qg
cmVnYXJkcywNCj4+PiAgIEFsZWtzYW5kZXIgTS4gU3RlbnNieQ0KPj4+DQo+Pj4NCj4+Pg0KPj4N
Cj4+DQo+Pg0KPg0KPg0KPg0KDQoNCg0KLS0NCkFsZWtzYW5kZXIgTS4gU3RlbnNieQ0KU2VuaW9y
IFNvZnR3YXJlIERldmVsb3Blcg0KSW50ZWdyYXNjbyBBL1MNCis0NyA0MSAyMiA4MiA3Mg0KYWxl
a3NhbmRlci5zdGVuc2J5QGludGVncmFzY28ubm8NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNj
cmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnDQoNCg==


From java-user-return-36554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 16:23:52 2008
Return-Path: <java-user-return-36554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79180 invoked from network); 10 Oct 2008 16:23:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 16:23:52 -0000
Received: (qmail 54260 invoked by uid 500); 10 Oct 2008 16:23:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53656 invoked by uid 500); 10 Oct 2008 16:23:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53644 invoked by uid 99); 10 Oct 2008 16:23:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 09:23:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Oct 2008 16:22:39 +0000
Received: (qmail 39090 invoked by uid 60001); 10 Oct 2008 16:22:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=KphtZQiOCCyk7zzXTXHOBU82oFWqAsjTspxdDu4eAnorvp2XdtBmDdTNIqfoyNJTD2SfBY033TA8QhNbHnm+vJFYrpuC0ohjFOFfRbRPmhD7UVMD+yhhOlqjM3BHS5LJp7AiYn6rWSU8h3bAMwiJs654sWSV8jtziifNWtyo860=;
X-YMail-OSG: Qfm6k1cVM1koaSvwc.E88LNn6zclJGvy.Xf8ZDtQq4paintvkuw6Vfi7wyiYM5ZjYIh5hE2aWKsSH8bT2VXntUsn6h9k_aJ1tzM7Vm2SB3yz_J9_lCBAYJThiJFfIRIDHarrDESrU6bs_JPS.4akoszjjbXWH5xGn5glnAP899TE0z8V32g-
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Fri, 10 Oct 2008 16:22:13 GMT
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.218.2
Date: Fri, 10 Oct 2008 16:22:13 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Question regarding sorting and memory consumption in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <885439.39035.qm@web26008.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Actually looking at this a little deeper maybe Lucene could/should automati=
cally be doing this "short" optimisation here?=0A=0AGiven a comparitively s=
mall set of unique terms (as in your example) it seems feasible that FieldC=
acheImpl could allocate a short[reader.maxDoc] array rather than an int[rea=
der.maxDoc] array to represent values for sorting. =0AThat halves the memor=
y required and could support fields with up to 65 thousand unique terms. It=
 looks like towards the end of the code where FieldCacheImpl creates a Stri=
ngIndex it is in a position to recognise that this optimisation could be ma=
de.=0A=0AAnyone more familiar with the internal workings of the Sort api ca=
re to comment further on if that is an option or have I missed something?=
=0AI've not really poked around in this part of the code too much.=0A=0AChe=
ers,=0AMark=0A=0A=0A=0A=0A----- Original Message ----=0AFrom: Aleksander M.=
 Stensby <aleksander.stensby@integrasco.no>=0ATo: java-user@lucene.apache.o=
rg=0ASent: Friday, 10 October, 2008 16:45:02=0ASubject: Re: Question regard=
ing sorting and memory consumption in lucene=0A=0AThat's a really good idea=
 Mark! :)=0AThanks! Will try to see if can make a quick change with your su=
ggestion.  =0A(Too bad quick isn't really a word in my vocabulary when it's=
 6 o'clock on  =0Aa Friday :(=0AGuess it'll be a looong night.. :(=0A=0AChe=
ers,=0A  Aleks=0A=0AOn Fri, 10 Oct 2008 17:07:31 +0200, mark harwood <markh=
arw00d@yahoo.co.uk>  =0Awrote:=0A=0A> Update: The statement "...cost is fie=
ld size (10 bytes ?) times number  =0A> of documents" is wrong.=0A> What yo=
u actually have is the cost of the unique strings  (estimated at  =0A> 10 *=
 1460  -effectively nothing) BUT you have to add the cost of the  =0A> arra=
y of object references to those strings so=0A>=0A>        30m x 8 bytes on =
64bit java =3D 240mb=0A> or=0A>     30m x 4 bytes on 32bit   =3D 120mb=0A>=
=0A> ....which is where the bulk of the cost comes in.=0A>=0A> How about us=
ing a field cache of "short" which is effectively:=0A>=0A>      new short[r=
eader.maxDoc]=0A> or=0A>         2bytes * 30 million =3D 60 meg.=0A>=0A> Ea=
ch short could represent up to 65536 values - capable of representing  =0A>=
 a date range of 179 years.=0A>=0A>=0A>=0A>=0A>=0A> ----- Original Message =
----=0A> From: mark harwood <markharw00d@yahoo.co.uk>=0A> To: java-user@luc=
ene.apache.org=0A> Sent: Friday, 10 October, 2008 15:43:35=0A> Subject: Re:=
 Question regarding sorting and memory consumption in lucene=0A>=0A> I thin=
k you have your memory cost calculation wrong.=0A> The cost is field size (=
10 bytes ?) times number of documents NOT number  =0A> of unique terms.=0A>=
 The cache is essentially an array of  size reader.maxDoc() which is  =0A> =
indexed directly into on docId to retrieve field values.=0A>=0A> You are ri=
ght in needing to factor in the cost of keeping one active  =0A> cache whil=
e busy warming-up a new one so that effectively doubles the  =0A> RAM requi=
rements.=0A>=0A>=0A>=0A>=0A>=0A>=0A> ----- Original Message ----=0A> From: =
Aleksander M. Stensby <aleksander.stensby@integrasco.no>=0A> To: java-user@=
lucene.apache.org=0A> Sent: Friday, 10 October, 2008 15:25:29=0A> Subject: =
Re: Question regarding sorting and memory consumption in lucene=0A>=0A> Unf=
ortunately no, since the documents that are added may come form a new=0A> "=
source" containing old documents aswell..:/=0A> I tried deploying our webap=
plication without any searcher objects and it=0A> consumes basically ~200mb=
 of memory in tomcat.=0A> With 6 searchers the same applications manages to=
 consume over 2.5 GB of=0A> memory when warming... :(=0A> I might have done=
 some super-idiotic logic in the way I handle searching,=0A> but I can seri=
ously not see what that might be...=0A>=0A> But I assume that people deal w=
ith much larger indexes than this, right?=0A>=0A> cheers,=0A>   Aleksander=
=0A>=0A>=0A> On Fri, 10 Oct 2008 15:18:46 +0200, mark harwood  =0A> <markha=
rw00d@yahoo.co.uk>=0A> wrote:=0A>=0A>> Assuming content is added in chronol=
ogical order and with no updates to=0A>> existing docs couldn't you rely on=
 internal Lucene document id to give a=0A>> chronological sort order?=0A>> =
That would require no memory cache at all when sorting.=0A>>=0A>> Querying =
across multiple indexes simultaneously however may present an=0A>> added co=
mplication...=0A>>=0A>>=0A>>=0A>> ----- Original Message ----=0A>> From: Al=
eksander M. Stensby <aleksander.stensby@integrasco.no>=0A>> To: java-user@l=
ucene.apache.org=0A>> Sent: Friday, 10 October, 2008 13:51:50=0A>> Subject:=
 Re: Question regarding sorting and memory consumption in lucene=0A>>=0A>> =
I'll follow up on my own question...=0A>> Let's say that we have 4 years of=
 data, meaning that there will be=0A>> roughly=0A>> 4 * 365 =3D 1460 unique=
 terms for our sort field.=0A>> For one index, lets say with 30 million doc=
s, the cache should use  =0A>> approx=0A>> 100mb, or am I wrong? and thus f=
or 6 indexes we would need approx 600 mb=0A>> for the caches? (and an addit=
ional 100mb every time we warm a new=0A>> searcher=0A>> and swap it out...)=
 As far as the string versus int or long goes, I  =0A>> don't=0A>> really s=
ee any big gain in changig it since 1460 * 10  bytes extra  =0A>> memory=0A=
>> doesnt really make much difference. Or?=0A>>=0A>> I guess we should cons=
ider reducing the index size or at least only  =0A>> allow=0A>> sorted sear=
ch on a subset of the index (or a pruned version of the=0A>> index...) ? Wo=
uld that be better for us?=0A>> But then again, I assume that there are muc=
h larger lucene-based indexes=0A>> out there than ours, and you guys must h=
ave some solution to this issue,=0A>> right? :)=0A>>=0A>> best regards,=0A>=
>   Aleksander=0A>>=0A>>=0A>> On Fri, 10 Oct 2008 14:09:36 +0200, Aleksande=
r M. Stensby=0A>> <aleksander.stensby@integrasco.no> wrote:=0A>>=0A>>> Hell=
o, I've read a lot of threads now on memory consumption and  =0A>>> sorting=
,=0A>>> and I think I have a pretty good understanding of how things work, =
but  =0A>>> I=0A>>> could still need some input here..=0A>>>=0A>>> We curre=
ntly have a system consisting of 6 different lucene indexes  =0A>>> (all=0A=
>>> have the same structure, so you could say it is a form of sharding). We=
=0A>>> currently use this approach because we want to be able to give users=
=0A>>> access to different index (but not necessarily  all indexes) etc.=0A=
>>>=0A>>> (We are planning to move to a solr-based system, but for now we w=
ould=0A>>> like to solve this issue with our current lucene-based system.)=
=0A>>>=0A>>> The thing is, the indexes are rather big (ranging from 5G to 2=
0G per=0A>>> index and 10 - 30 million entries per index.)=0A>>> We keep on=
e searcher object open per index, and when the index is=0A>>> changed (new =
documents added in batches several times a day), we update=0A>>> the search=
er objects.=0A>>> In the warmup procedure we did a couple of searches and t=
hings work=0A>>> fine, BUT i realized that in our application we return hit=
s sorted by=0A>>> date by default, and our warmup procedure did non-sorted =
queries... so=0A>>> still the first searches done by the user after an upda=
te was slow=0A>>> (obviously).=0A>>>=0A>>> To cope, I changed the warmup pr=
ocedure to include a sorted search, and=0A>>> now the user will not notice =
slow queries. Good!=0A>>> But, the problem at hand is that we are running i=
nto memory problems=0A>>> (and I understand that sorting does consume a lot=
 of memory...) But is=0A>>> there any way that is "best practice" to deal w=
ith this? The field we=0A>>> sort on is an un_indexed text field representi=
ng the date. typically=0A>>> "2008-10-10". I am aware that string field sor=
ting consumes a lot of=0A>>> memory, so should we change this field to some=
thing different? Would=0A>>> this help us with the memory problems?=0A>>>=
=0A>>> As a sidenote / couriosity question: Does it matter if we use the  =
=0A>>> search=0A>>> method returning Hits versus the search method returnin=
g TopFieldDocs?=0A>>> (we are not iterating them in any way when this memor=
y issue occurs)=0A>>>=0A>>> Thanks in advance for any guidance we may get.=
=0A>>>=0A>>> Best regards,=0A>>>   Aleksander M. Stensby=0A>>>=0A>>>=0A>>>=
=0A>>=0A>>=0A>>=0A>=0A>=0A>=0A=0A=0A=0A-- =0AAleksander M. Stensby=0ASenior=
 Software Developer=0AIntegrasco A/S=0A+47 41 22 82 72=0Aaleksander.stensby=
@integrasco.no=0A=0A-------------------------------------------------------=
--------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apach=
e.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=
=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 10 21:05:56 2008
Return-Path: <java-user-return-36555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87671 invoked from network); 10 Oct 2008 21:05:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Oct 2008 21:05:56 -0000
Received: (qmail 98104 invoked by uid 500); 10 Oct 2008 21:05:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97153 invoked by uid 500); 10 Oct 2008 21:05:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97142 invoked by uid 99); 10 Oct 2008 21:05:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 14:05:48 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.15] (HELO relay01.pair.com) (209.68.5.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Oct 2008 21:04:43 +0000
Received: (qmail 50217 invoked from network); 10 Oct 2008 21:05:16 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.3?) (68.48.101.76)
  by relay01.pair.com with SMTP; 10 Oct 2008 21:05:16 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Indexing Scalability, Multiwriter?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Fri, 10 Oct 2008 17:05:16 -0400
Message-Id: <1223672716.6896.10.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi gang,
  Wondering how folks have address scaled up indexing. I saw old threads
about using clustered webapp with JNDI singleton index writer due to the
Lucene single writer limitation. Is this limitation lifted in 3 maybe?
Is there a best strategy for parallel writing to an index by many
threads? 

thanks for any tips! You guys rock.
Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 11 02:18:34 2008
Return-Path: <java-user-return-36556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21403 invoked from network); 11 Oct 2008 02:18:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Oct 2008 02:18:34 -0000
Received: (qmail 26419 invoked by uid 500); 11 Oct 2008 02:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26385 invoked by uid 500); 11 Oct 2008 02:18:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26372 invoked by uid 99); 11 Oct 2008 02:18:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Oct 2008 19:18:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Oct 2008 02:17:19 +0000
Received: by rv-out-0506.google.com with SMTP id f6so777388rvb.5
        for <java-user@lucene.apache.org>; Fri, 10 Oct 2008 19:17:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=nOQ0/I+u5r66JWCHhYyvu4M6n6YfanD6gNyuiJnrFPg=;
        b=be4C42YS3dGawykp3XLJXRvJjm2u6XASrJ//KZPKaNCG0u5NIR6EQhBacAc6FF/utq
         ZmY5+cdTxeTpiKAEdQ+C+3fXTYCFUsUIHlGMBQ9nidfIaLfW562kgQLUmR8C4V03DyqG
         iRtxqHxXOvsRSD2lLFsaqTSit4yxeoeRWJVpU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=KXFSDydc2a+INlHp1A21PChMA1JZ36Uhcj7hW9vAAqDsElR8oiZRWdNVlZ7bwNyTk8
         CxA+tjxV58clue6n0qV1KJ/2NtF3vy1D+zM77uPUdePSXlrR2PS7IQ5KTGVDVjNqNj80
         9WQqJb2fGnVtPB2pWifcYe/bkmWF7kODGMkXE=
Received: by 10.141.76.21 with SMTP id d21mr1688924rvl.242.1223691466023;
        Fri, 10 Oct 2008 19:17:46 -0700 (PDT)
Received: by 10.140.178.11 with HTTP; Fri, 10 Oct 2008 19:17:45 -0700 (PDT)
Message-ID: <5e76f3840810101917s113b1076g20f3d4a2ae1718a@mail.gmail.com>
Date: Fri, 10 Oct 2008 22:17:45 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Scalability, Multiwriter?
In-Reply-To: <1223672716.6896.10.camel@nuraku>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1223672716.6896.10.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

IndexWriter is thread-safe and has been for a while
(http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg00157.html)
so you don't have to worry about that.

As reported in my blog in April
(http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html)
but perhaps not explicitly enough: in indexing 6.4M full-text articles
generating an index of 83GB, I used a pipeline architecture consisting
of a several ThreadPoolExecutors:

1 - A main program that gets the article metadata (author, title,
abstract, etc) from JDBC + creates Article object + adds it to #2
queue;

2 - A pool with a queue of 100 Article objects; the Runnable reads the
full-text for the article from the file system. The files are GZiped,
so this is also done. Full-text is added to Article object & Article
object added to queue #3. 4 threads (as more causes major performance
degradation through IO waits).

3 - A pool with a queue of 1000 Article objects; the Runnable creates
a Lucene Document from the Article object fields and adds the Document
to queue #4. 64 threads are running in this pool.

4 - A pool with a queue of 100 Documents; the Runnable adds the
Document to one of
8 IndexWriters, sent roundrobin. 16 threads running in this queue.

When all documents are processed, all 8 IndexWriters are merged into a
single index and optimized. From the blog entry: 20.5 hours to process
6.4M articles, 143GB text. See the entry for software/VM/hardware
details.

I tried all combinations of threads/pool size/#IndexWriters and the
above was the 'sweet point' for my particular index and hardware.

I hope this is helpful. If you have any questions, please let me know.

Related:
http://zzzoot.blogspot.com/2008/06/lucene-concurrent-searcher-performance.html

-Glen



2008/10/10 Darren Govoni <darren@ontrenet.com>:
> Hi gang,
>  Wondering how folks have address scaled up indexing. I saw old threads
> about using clustered webapp with JNDI singleton index writer due to the
> Lucene single writer limitation. Is this limitation lifted in 3 maybe?
> Is there a best strategy for parallel writing to an index by many
> threads?
>
> thanks for any tips! You guys rock.
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 11 09:22:49 2008
Return-Path: <java-user-return-36557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30518 invoked from network); 11 Oct 2008 09:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Oct 2008 09:22:48 -0000
Received: (qmail 57152 invoked by uid 500); 11 Oct 2008 09:22:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57123 invoked by uid 500); 11 Oct 2008 09:22:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57112 invoked by uid 99); 11 Oct 2008 09:22:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Oct 2008 02:22:41 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.15] (HELO relay01.pair.com) (209.68.5.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 11 Oct 2008 09:21:32 +0000
Received: (qmail 53334 invoked from network); 11 Oct 2008 09:21:06 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.3?) (68.48.101.76)
  by relay01.pair.com with SMTP; 11 Oct 2008 09:21:06 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: Indexing Scalability, Multiwriter?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76f3840810101917s113b1076g20f3d4a2ae1718a@mail.gmail.com>
References: <1223672716.6896.10.camel@nuraku>
	 <5e76f3840810101917s113b1076g20f3d4a2ae1718a@mail.gmail.com>
Content-Type: text/plain
Date: Sat, 11 Oct 2008 05:21:08 -0400
Message-Id: <1223716868.6896.22.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Glen,
   Thank you for the details there. Its really great what you've done
and I will study it some more! I too though about using multiple writers
into separate indexes and then combining them into one and optimizing,
but haven't tried it yet.

Darren

On Fri, 2008-10-10 at 22:17 -0400, Glen Newton wrote:
> IndexWriter is thread-safe and has been for a while
> (http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg00157.html)
> so you don't have to worry about that.
> 
> As reported in my blog in April
> (http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html)
> but perhaps not explicitly enough: in indexing 6.4M full-text articles
> generating an index of 83GB, I used a pipeline architecture consisting
> of a several ThreadPoolExecutors:
> 
> 1 - A main program that gets the article metadata (author, title,
> abstract, etc) from JDBC + creates Article object + adds it to #2
> queue;
> 
> 2 - A pool with a queue of 100 Article objects; the Runnable reads the
> full-text for the article from the file system. The files are GZiped,
> so this is also done. Full-text is added to Article object & Article
> object added to queue #3. 4 threads (as more causes major performance
> degradation through IO waits).
> 
> 3 - A pool with a queue of 1000 Article objects; the Runnable creates
> a Lucene Document from the Article object fields and adds the Document
> to queue #4. 64 threads are running in this pool.
> 
> 4 - A pool with a queue of 100 Documents; the Runnable adds the
> Document to one of
> 8 IndexWriters, sent roundrobin. 16 threads running in this queue.
> 
> When all documents are processed, all 8 IndexWriters are merged into a
> single index and optimized. From the blog entry: 20.5 hours to process
> 6.4M articles, 143GB text. See the entry for software/VM/hardware
> details.
> 
> I tried all combinations of threads/pool size/#IndexWriters and the
> above was the 'sweet point' for my particular index and hardware.
> 
> I hope this is helpful. If you have any questions, please let me know.
> 
> Related:
> http://zzzoot.blogspot.com/2008/06/lucene-concurrent-searcher-performance.html
> 
> -Glen
> 
> 
> 
> 2008/10/10 Darren Govoni <darren@ontrenet.com>:
> > Hi gang,
> >  Wondering how folks have address scaled up indexing. I saw old threads
> > about using clustered webapp with JNDI singleton index writer due to the
> > Lucene single writer limitation. Is this limitation lifted in 3 maybe?
> > Is there a best strategy for parallel writing to an index by many
> > threads?
> >
> > thanks for any tips! You guys rock.
> > Darren
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 11 10:37:06 2008
Return-Path: <java-user-return-36558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60073 invoked from network); 11 Oct 2008 10:37:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Oct 2008 10:37:06 -0000
Received: (qmail 95660 invoked by uid 500); 11 Oct 2008 10:36:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95587 invoked by uid 500); 11 Oct 2008 10:36:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95576 invoked by uid 99); 11 Oct 2008 10:36:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Oct 2008 03:36:57 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.54] (HELO pebbles.fastcom.no) (62.73.241.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Oct 2008 10:35:52 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by pebbles.fastcom.no (Postfix) with ESMTP id 61D218E41
	for <java-user@lucene.apache.org>; Sat, 11 Oct 2008 12:35:50 +0200 (DFT)
Date: Sat, 11 Oct 2008 12:36:04 +0200
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Retrieving Top Terms for a subset of the index (or for all results of
 a query)
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.uiuvqekvoftp72@melkor>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello everyone. I've been fiddeling with the idea of retrieving the top  
terms from a subset of the index (i.e. top terms from the documents  
retrieved by a given search). This could for instance be useful to  
identify top ranking terms in a given datespan etc.

It would be something like getting the top 50 terms (like you can do with  
luke) but instead of doing it for the full index, I would like to do the  
same procedure after applying a filter or a query. Don't know if this is a  
bad explaination or wheter it makes any sense at all...

So, I really want to avoid iterating over all results (obviously), so my  
question is really if there is a prefered approach for doing such analysis  
/ has this been done in a good way before?

Thanks for any help!

Best regards,
  Aleksander

-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S
+47 41 22 82 72
aleksander.stensby@integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 11 14:23:13 2008
Return-Path: <java-user-return-36559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50549 invoked from network); 11 Oct 2008 14:23:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Oct 2008 14:23:13 -0000
Received: (qmail 4518 invoked by uid 500); 11 Oct 2008 14:23:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4472 invoked by uid 500); 11 Oct 2008 14:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4461 invoked by uid 99); 11 Oct 2008 14:23:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Oct 2008 07:23:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of magawake@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Oct 2008 14:22:01 +0000
Received: by rv-out-0506.google.com with SMTP id g9so563999rvb.5
        for <java-user@lucene.apache.org>; Sat, 11 Oct 2008 07:22:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=RtKMtRKz91S1WM2v0++U4tPDivK0kwi2w85ETDNkqyk=;
        b=N4UNtqQMwr/EebnnV0R6d7658xIdJYbfjydAUIiyQvXt6G/qeE67lvN9LzbrrgGLAj
         GmVyyWzyXuHB95DBsw5CGzkLIU+CGG6cjGzU1JJ2QAF6fWSxXBjfVzCz1rRJiAjH0Oig
         /475eNoeZ+6k4IRDLrtKQ31ajZHLOVdp36GLI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=Os27/tTWnPVrnPV4EkJ3hTQx35CA3SaBAcs7Cisnw8CN5LgdbbDhZgLxtPY6dOz4KO
         knxYlZIyiEbLVmOWHn/IO7TlivrQkJ1GFDCKrPAMM0xZokDJApQPRT8lLHReilRloUg8
         Zd13Efac1QhbSxAWYXqoy+ejYP4BKJwHT8Z7Q=
Received: by 10.141.69.1 with SMTP id w1mr2122921rvk.147.1223734948156;
        Sat, 11 Oct 2008 07:22:28 -0700 (PDT)
Received: by 10.141.49.19 with HTTP; Sat, 11 Oct 2008 07:22:28 -0700 (PDT)
Message-ID: <1cbd6f830810110722m36667f7m43c16603390cd585@mail.gmail.com>
Date: Sat, 11 Oct 2008 10:22:28 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Is lucene right for us
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All,

At my university we have over 20,000 small file ranging from 20k to
500k per directory and we would like to index them. I was wondering if
Lucene is the right tool for this? The information we would like to
keep is: filename, filesize, filedate, filecontent. Also, is it
possible to run the initial index in multithreaded mode since we are
talking about many directories with similar contents?

TIA

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 11 15:52:27 2008
Return-Path: <java-user-return-36560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4984 invoked from network); 11 Oct 2008 15:52:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Oct 2008 15:52:26 -0000
Received: (qmail 34416 invoked by uid 500); 11 Oct 2008 15:52:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34388 invoked by uid 500); 11 Oct 2008 15:52:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34377 invoked by uid 99); 11 Oct 2008 15:52:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Oct 2008 08:52:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Oct 2008 15:51:12 +0000
Received: by gxk6 with SMTP id 6so1347517gxk.5
        for <java-user@lucene.apache.org>; Sat, 11 Oct 2008 08:50:47 -0700 (PDT)
Received: by 10.90.95.18 with SMTP id s18mr3284908agb.118.1223740247516;
        Sat, 11 Oct 2008 08:50:47 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 1sm3949012agb.20.2008.10.11.08.50.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 11 Oct 2008 08:50:46 -0700 (PDT)
Message-Id: <0EDE14BC-56E6-480C-BDE6-CD350CED76F4@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-dev@lucene.apache.org,
 java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Lucene 2.4.0 release
Date: Sat, 11 Oct 2008 11:50:45 -0400
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Release 2.4.0 of Lucene is now available!

With 2.4.0 we have relaxed the backwards compatibility policy of the
Fieldable interface: we now allow changes on a case by case basis.
This means any custom classes that implement Fieldable will need to be
updated.  This was done to accommodate the new omitTf() method (to do
pure boolean searching).

Many new features, fixes and optimizations have happened since 2.3,
including:

   * New InstantiatedIndex (contrib/instantiated): RAM-based index that
     enables much faster searching than RAMDirectory.

   * New IndexWriter constructors now default autoCommit to false.

   * New commit() method in IndexWriter lets you control when changes
     are made visible and permanent in the index.

   * A machine or OS crash, or power loss, while IndexWriter is writing
     to an index will no longer corrupt the index.

   * TimeLimitedCollector adds timeout to searches.

   * Delete documents by Query in IndexWriter.

   * Pure boolean indexing (no frequency, positions nor payloads are
     indexed) using Field.setOmitTf().

   * A new Directory implementation, NIOFSDirectory, using java.nio's
     APIs to allow multiple threads to read from the same open file
     without locking.

   * IndexWriter.expungeDeletes() reclaims disk space from deleted
     documents by merging away segments that have deletions.

   * All filters now return a DocIdSet instead of java.util.BitSet,
     making filters more efficient and flexible.

   * Searching with a Filter is more efficient: now the filter is
     applied to a document before scoring is done.

   * IndexReader can be opened with new readOnly=true mode, which gives
     better performance in a multi-threaded environment.

The detailed changes are here:

   http://lucene.apache.org/java/2_4_0/changes/Changes.html

Lucene 2.4.0 includes index format changes that are not readable by  
older
versions of Lucene.  Lucene 2.4.0 can both read and update older Lucene
indexes.  Adding to an index with an older format will cause it to be
converted to the newer format.

Binary and source distributions are available at
http://www.apache.org/dyn/closer.cgi/lucene/java/

Lucene artifacts are also available in the Maven2 repository at
http://repo1.maven.org/maven2/org/apache/lucene/


NEXT RELEASE

The next release will be 2.9.  After that will be 3.0, which will
remove all deprecated APIs from 2.9 and will be the first release of
Lucene to require JRE 1.5.  The timing on these two releases is not
yet known.

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 12 02:29:39 2008
Return-Path: <java-user-return-36561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26693 invoked from network); 12 Oct 2008 02:29:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Oct 2008 02:29:38 -0000
Received: (qmail 88883 invoked by uid 500); 12 Oct 2008 02:29:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88845 invoked by uid 500); 12 Oct 2008 02:29:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88833 invoked by uid 99); 12 Oct 2008 02:29:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Oct 2008 19:29:30 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.15] (HELO relay01.pair.com) (209.68.5.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Oct 2008 02:28:24 +0000
Received: (qmail 53264 invoked from network); 12 Oct 2008 02:27:59 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.3?) (68.48.101.76)
  by relay01.pair.com with SMTP; 12 Oct 2008 02:27:59 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: Lucene 2.4.0 release
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Cc: java-dev@lucene.apache.org
In-Reply-To: <0EDE14BC-56E6-480C-BDE6-CD350CED76F4@mikemccandless.com>
References: <0EDE14BC-56E6-480C-BDE6-CD350CED76F4@mikemccandless.com>
Content-Type: text/plain
Date: Sat, 11 Oct 2008 22:28:05 -0400
Message-Id: <1223778485.6896.27.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Congratulations! 

A truly stellar achievement.

Can't wait to dive in!

On Sat, 2008-10-11 at 11:50 -0400, Michael McCandless wrote:
> Release 2.4.0 of Lucene is now available!
> 
> With 2.4.0 we have relaxed the backwards compatibility policy of the
> Fieldable interface: we now allow changes on a case by case basis.
> This means any custom classes that implement Fieldable will need to be
> updated.  This was done to accommodate the new omitTf() method (to do
> pure boolean searching).
> 
> Many new features, fixes and optimizations have happened since 2.3,
> including:
> 
>    * New InstantiatedIndex (contrib/instantiated): RAM-based index that
>      enables much faster searching than RAMDirectory.
> 
>    * New IndexWriter constructors now default autoCommit to false.
> 
>    * New commit() method in IndexWriter lets you control when changes
>      are made visible and permanent in the index.
> 
>    * A machine or OS crash, or power loss, while IndexWriter is writing
>      to an index will no longer corrupt the index.
> 
>    * TimeLimitedCollector adds timeout to searches.
> 
>    * Delete documents by Query in IndexWriter.
> 
>    * Pure boolean indexing (no frequency, positions nor payloads are
>      indexed) using Field.setOmitTf().
> 
>    * A new Directory implementation, NIOFSDirectory, using java.nio's
>      APIs to allow multiple threads to read from the same open file
>      without locking.
> 
>    * IndexWriter.expungeDeletes() reclaims disk space from deleted
>      documents by merging away segments that have deletions.
> 
>    * All filters now return a DocIdSet instead of java.util.BitSet,
>      making filters more efficient and flexible.
> 
>    * Searching with a Filter is more efficient: now the filter is
>      applied to a document before scoring is done.
> 
>    * IndexReader can be opened with new readOnly=true mode, which gives
>      better performance in a multi-threaded environment.
> 
> The detailed changes are here:
> 
>    http://lucene.apache.org/java/2_4_0/changes/Changes.html
> 
> Lucene 2.4.0 includes index format changes that are not readable by  
> older
> versions of Lucene.  Lucene 2.4.0 can both read and update older Lucene
> indexes.  Adding to an index with an older format will cause it to be
> converted to the newer format.
> 
> Binary and source distributions are available at
> http://www.apache.org/dyn/closer.cgi/lucene/java/
> 
> Lucene artifacts are also available in the Maven2 repository at
> http://repo1.maven.org/maven2/org/apache/lucene/
> 
> 
> NEXT RELEASE
> 
> The next release will be 2.9.  After that will be 3.0, which will
> remove all deprecated APIs from 2.9 and will be the first release of
> Lucene to require JRE 1.5.  The timing on these two releases is not
> yet known.
> 
> Mike
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 12 14:55:02 2008
Return-Path: <java-user-return-36562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71928 invoked from network); 12 Oct 2008 14:55:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Oct 2008 14:55:02 -0000
Received: (qmail 19751 invoked by uid 500); 12 Oct 2008 14:54:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19723 invoked by uid 500); 12 Oct 2008 14:54:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19712 invoked by uid 99); 12 Oct 2008 14:54:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 07:54:54 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 14:53:47 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id DBD1FFE1F3
	for <java-user@lucene.apache.org>; Sun, 12 Oct 2008 07:53:52 -0700 (PDT)
Message-Id: <E0588874-CE8F-48F8-83FF-5217CE18C281@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <1cbd6f830810110722m36667f7m43c16603390cd585@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Is lucene right for us
Date: Sun, 12 Oct 2008 10:53:51 -0400
References: <1cbd6f830810110722m36667f7m43c16603390cd585@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene should work quite well for this, you'll just need some  
infrastructure around it to get the file and extract the contents (see  
Lucene's Tika project).  And, yes, Lucene is thread-safe, so you can  
index safely as you describe.


On Oct 11, 2008, at 10:22 AM, Mag Gam wrote:

> Hello All,
>
> At my university we have over 20,000 small file ranging from 20k to
> 500k per directory and we would like to index them. I was wondering if
> Lucene is the right tool for this? The information we would like to
> keep is: filename, filesize, filedate, filecontent. Also, is it
> possible to run the initial index in multithreaded mode since we are
> talking about many directories with similar contents?
>
> TIA
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>






--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 12 15:40:02 2008
Return-Path: <java-user-return-36563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17107 invoked from network); 12 Oct 2008 15:40:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Oct 2008 15:40:01 -0000
Received: (qmail 45300 invoked by uid 500); 12 Oct 2008 15:39:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45257 invoked by uid 500); 12 Oct 2008 15:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45246 invoked by uid 99); 12 Oct 2008 15:39:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 08:39:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 15:38:48 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 267171FC8B
	for <java-user@lucene.apache.org>; Sun, 12 Oct 2008 08:38:52 -0700 (PDT)
Message-Id: <59BE1D2A-BC25-4A86-86C5-560B99D28DF7@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <op.uiuvqekvoftp72@melkor>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Retrieving Top Terms for a subset of the index (or for all results of a query)
Date: Sun, 12 Oct 2008 11:38:51 -0400
References: <op.uiuvqekvoftp72@melkor>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

How large of a subset are you talking?

You might look at the FitleredTermEnum class, but you will probably  
have to do some work on it to extend it to what you want

If you are talking a smallish subset (say, at most a couple hundred  
docs), then you could store Term Vectors and use the TermVectorMapper,  
I suspect.


HTH,
Grant


On Oct 11, 2008, at 6:36 AM, Aleksander M. Stensby wrote:

> Hello everyone. I've been fiddeling with the idea of retrieving the  
> top terms from a subset of the index (i.e. top terms from the  
> documents retrieved by a given search). This could for instance be  
> useful to identify top ranking terms in a given datespan etc.
>
> It would be something like getting the top 50 terms (like you can do  
> with luke) but instead of doing it for the full index, I would like  
> to do the same procedure after applying a filter or a query. Don't  
> know if this is a bad explaination or wheter it makes any sense at  
> all...
>
> So, I really want to avoid iterating over all results (obviously),  
> so my question is really if there is a prefered approach for doing  
> such analysis / has this been done in a good way before?
>
> Thanks for any help!
>
> Best regards,
> Aleksander
>
> -- 
> Aleksander M. Stensby
> Senior Software Developer
> Integrasco A/S
> +47 41 22 82 72
> aleksander.stensby@integrasco.no
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 12 15:41:11 2008
Return-Path: <java-user-return-36564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17354 invoked from network); 12 Oct 2008 15:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Oct 2008 15:41:11 -0000
Received: (qmail 46939 invoked by uid 500); 12 Oct 2008 15:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46904 invoked by uid 500); 12 Oct 2008 15:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46893 invoked by uid 99); 12 Oct 2008 15:41:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 08:41:04 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 15:39:57 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id BF03D1FC8B
	for <java-user@lucene.apache.org>; Sun, 12 Oct 2008 08:40:03 -0700 (PDT)
Message-Id: <0C538E17-056F-48E0-9126-25569122EF64@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <19880927.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Access Scoring Values of Lucene for Post-Processing
Date: Sun, 12 Oct 2008 11:40:02 -0400
References: <19880927.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the o.a.lucene.search.function package and the  
ValueSourceQuery.  You will probably be able to factor in those pieces  
during scoring, so no need to resort at all.

-Grant

On Oct 8, 2008, at 11:15 AM, excitingComm2 wrote:

>
> Hi everybody,
>
> I am using Lucene for searching items in a online shop. E.g. I  
> search the
> shop for "shirt" I get a resultset from lucene. Now I want to  
> improve the
> sort order by calculating the lucene score with my business data,  
> e.g. sales
> or margin. Is there any possibility to get the scoring value of  
> lucene, so
> that I can put it into my own formula and re-sort the products?
>
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/Hit.html
> The method getScore() sounds great, but is unfortunately marked as
> deprecated.
>
> Regards,
> ExComm2
> -- 
> View this message in context: http://www.nabble.com/Access-Scoring-Values-of-Lucene-for-Post-Processing-tp19880927p19880927.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 12 18:12:39 2008
Return-Path: <java-user-return-36565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75081 invoked from network); 12 Oct 2008 18:12:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Oct 2008 18:12:39 -0000
Received: (qmail 24439 invoked by uid 500); 12 Oct 2008 18:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24403 invoked by uid 500); 12 Oct 2008 18:12:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24392 invoked by uid 99); 12 Oct 2008 18:12:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 11:12:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Oct 2008 18:11:27 +0000
Received: (qmail invoked by alias); 12 Oct 2008 18:12:13 -0000
Received: from mail.bpberlin.de (EHLO msrvcn04) [217.9.112.178]
  by mail.gmx.net (mp030) with SMTP; 12 Oct 2008 20:12:13 +0200
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19YbFJLwMdY5Dq0b9Q+P2NeKhPvzy6h4kwuMFKDZZ
	M/nLlflC59Xssu
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Searching sets of documents
Date: Sun, 12 Oct 2008 20:11:57 +0200
Message-ID: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
thread-index: Ackslf14BLNhBERSTOi/NTMMeci8Rg==
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.71
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I want to search for sets of documents. For instance I index some folders
with documents in it and now I do not want to find certain documents but
folders.

Sample:

folder A
  doc 1, contains X, Y
  doc 2, contains Y, Z

folder B
  doc 3, contains X, Y
  doc 4, contains A, Z

Now I want to find all folders which match "A AND Y" -> folder B.

How can this be done?

Thank you



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 12 21:51:01 2008
Return-Path: <java-user-return-36566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42164 invoked from network); 12 Oct 2008 21:51:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Oct 2008 21:51:01 -0000
Received: (qmail 60221 invoked by uid 500); 12 Oct 2008 21:50:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60195 invoked by uid 500); 12 Oct 2008 21:50:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60184 invoked by uid 99); 12 Oct 2008 21:50:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 14:50:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 21:49:50 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1347247rvb.5
        for <java-user@lucene.apache.org>; Sun, 12 Oct 2008 14:50:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=Rp6cXt3WPj84pDmmZGsz00mEJfik/9bYNvqubclGxP8=;
        b=aL+kMJtW7ENCpdLm+TqDUVbKnI6HNOZjqCTQe3hxhwbg+7sdS7ucJTE0waO9CPeEIM
         8RyHHpSFmuRjzoKO8OAYrtQKWvTy3gBMksNpaM60AkGhmo1l+1HUneEJnrHtdVzFRcfU
         2tDs6zmRx2ZExYpxu+dfCOjADvup+oXg+Uu7g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Dfk7/5KzZv3rJytOOHcDUNVv28RGZNYodzmXXcFme3PoctUQI6qaR0cLmbCQzAF9Cx
         eqU+VAWBRmTVXX1a9v45VXSM8mVf9oYtgAXEQwD4SGueEBb6xqLSCphqDtSEDnVye5WH
         0UbvFAYq/UC8a0J3RA3URbdmRyybzlPguCUFY=
Received: by 10.115.74.1 with SMTP id b1mr4495673wal.169.1223848227411;
        Sun, 12 Oct 2008 14:50:27 -0700 (PDT)
Received: by 10.115.95.4 with HTTP; Sun, 12 Oct 2008 14:50:27 -0700 (PDT)
Message-ID: <6d6cf45b0810121450x363d4556l242d7405337d8bc2@mail.gmail.com>
Date: Sun, 12 Oct 2008 14:50:27 -0700
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Detecting why a collection of documents matched a query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_142334_535343.1223848227401"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_142334_535343.1223848227401
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,  I noticed that indexSearcher.explain() method is not supposed to be
run for a large collection of documents, so I am looking for an alternative
that just explains why a document matched without all the scoring
information. Basically, I would like to know which field of the document was
responsible for getting it included in the results so I can give users some
indication of what matched. We present the results 100 documents at a time.
I would appreciate any ideas or directions towards implementation.


Thanks!

------=_Part_142334_535343.1223848227401--

From java-user-return-36567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 12 22:13:34 2008
Return-Path: <java-user-return-36567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53936 invoked from network); 12 Oct 2008 22:13:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Oct 2008 22:13:34 -0000
Received: (qmail 70640 invoked by uid 500); 12 Oct 2008 22:13:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70606 invoked by uid 500); 12 Oct 2008 22:13:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70595 invoked by uid 99); 12 Oct 2008 22:13:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 15:13:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 22:12:24 +0000
Received: by wa-out-1112.google.com with SMTP id n4so718271wag.5
        for <java-user@lucene.apache.org>; Sun, 12 Oct 2008 15:13:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=OeWUPpR8tdeYVBym90lvCtwWdjgbGcO6TfBY3P2S/vc=;
        b=LCmVhlDYCPFwDyZ4LTtvBMEdADT0lXkuU8tOgPwyen5tFfEjMr2ro1RwQ21Rnzffw9
         U6bycVXqvuA5cbPUU7zlUidXdxmi6XAADQf3JE8FUTSXny6DWxzCcA8gOvPhaJgN3h3o
         fif23LBVG59F6/YRh8I9ixoA392e/jTb4HDNU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WYdf1RPts7ZsdClcFweqJzzT9rUBlYouUyIoUcuKqgHXNVuzc6OTm57jytM8wdxAPv
         4b37Gvfg8WJHxBWt8qrLRnPZvcBk1oYsBSSE7ngTTQmLI3lVmRuVHcSFZKMofrLeZYpM
         hCx0MRXu9Li3tstDWEWTOIwi88Ha7SpJcboqE=
Received: by 10.114.56.1 with SMTP id e1mr4501134waa.204.1223849581361;
        Sun, 12 Oct 2008 15:13:01 -0700 (PDT)
Received: by 10.115.95.4 with HTTP; Sun, 12 Oct 2008 15:13:01 -0700 (PDT)
Message-ID: <6d6cf45b0810121513x1a6a834dpebb430255026ce03@mail.gmail.com>
Date: Sun, 12 Oct 2008 15:13:01 -0700
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Enumerating all the terms of a particular field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_142420_2965782.1223849581359"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_142420_2965782.1223849581359
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,   How can I get a list of all the terms for a particular field? Is
the right approach to extend FilteredTermEnum?

Thanks!!

------=_Part_142420_2965782.1223849581359--

From java-user-return-36568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 00:28:29 2008
Return-Path: <java-user-return-36568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88896 invoked from network); 13 Oct 2008 00:28:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 00:28:29 -0000
Received: (qmail 40115 invoked by uid 500); 13 Oct 2008 00:28:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40078 invoked by uid 500); 13 Oct 2008 00:28:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40067 invoked by uid 99); 13 Oct 2008 00:28:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 17:28:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 00:27:17 +0000
Received: by yw-out-2324.google.com with SMTP id 3so343321ywj.5
        for <java-user@lucene.apache.org>; Sun, 12 Oct 2008 17:27:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=rQrI6ilTfOFtLv1R1SmFztADGkULAijDhYKfAtzV6mM=;
        b=jtANKx1kCKv5M13f+h79iSDmi4O2H7XfHvytYQGDx/aT0tahc2TuuFsucYZiMiwy26
         b2ojGh/0MVax4Z+PKOgWQP6d+eth4hTb6EdOD7ttNDJ1L/LR6spnVyl+gNFK+Zyi7ZOi
         flI1werzROfVACJlSh58kEbnMWfvjAWZwN+RY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rr6jcgOIBgFeV/Ad+CsGvRZAtbPYdjumXHyfgNZ3zFxMZvrYBsfWtRlRcBW9NUySaQ
         2cU4AdCfFN4rL7W4Ef5BL1Dq90mK7Zk2lX7u2bIJ6wGc9OQtsah1B6xi/IUnRaF5rpzj
         03IuRZYHSUj5lGvhts/tzY23t0x44GK9OruOE=
Received: by 10.150.228.2 with SMTP id a2mr6983245ybh.111.1223857674163;
        Sun, 12 Oct 2008 17:27:54 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Sun, 12 Oct 2008 17:27:54 -0700 (PDT)
Message-ID: <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com>
Date: Mon, 13 Oct 2008 08:27:54 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching sets of documents
In-Reply-To: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100976_29274176.1223857674159"
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100976_29274176.1223857674159
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

YWxsIGZvbGRlcnMgd2hpY2ggbWF0Y2ggIkEgQU5EIFkiLCBkbyB5b3Ugc2VhcmNoIGZvciBmaWxl
IG5hbWU/CklmIHllcywgQSBvciBZIGluICJBIEFORCBZIiBpcyBhIFN0cnJpbmcgdG9vLCBzbyB5
b3UgY2FuIGRvIGl0IGJ5Ogpjb25zdHJ1Y3QgYSBMdWNlbmUgRG9jdW1lbnQgZm9yIGVhY2ggZm9s
ZGVyLCBhbmQgbmFtZSBvZiBmaWxlcyB1bmRlciB0aGUKZm9sZGVyIGlzIHRoZSBzZWFyY2ggZGF0
YS4KCjIwMDgvMTAvMTMgPHNwcmluZ0BnbXguZXU+Cgo+IEhpLAo+Cj4gSSB3YW50IHRvIHNlYXJj
aCBmb3Igc2V0cyBvZiBkb2N1bWVudHMuIEZvciBpbnN0YW5jZSBJIGluZGV4IHNvbWUgZm9sZGVy
cwo+IHdpdGggZG9jdW1lbnRzIGluIGl0IGFuZCBub3cgSSBkbyBub3Qgd2FudCB0byBmaW5kIGNl
cnRhaW4gZG9jdW1lbnRzIGJ1dAo+IGZvbGRlcnMuCj4KPiBTYW1wbGU6Cj4KPiBmb2xkZXIgQQo+
ICBkb2MgMSwgY29udGFpbnMgWCwgWQo+ICBkb2MgMiwgY29udGFpbnMgWSwgWgo+Cj4gZm9sZGVy
IEIKPiAgZG9jIDMsIGNvbnRhaW5zIFgsIFkKPiAgZG9jIDQsIGNvbnRhaW5zIEEsIFoKPgo+IE5v
dyBJIHdhbnQgdG8gZmluZCBhbGwgZm9sZGVycyB3aGljaCBtYXRjaCAiQSBBTkQgWSIgLT4gZm9s
ZGVyIEIuCj4KPiBIb3cgY2FuIHRoaXMgYmUgZG9uZT8KPgo+IFRoYW5rIHlvdQo+Cj4KPgo+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIApTb3JyeSBmb3IgbXkgRW5n
bGlzaCEhIOaYjgpQbGVhc2UgaGVscCBtZSBjb3JyZWN0IG15IEVuZ2xpc2ggZXhwcmVzc2lvbiBh
bmQgZXJyb3IgaW4gc3ludGF4Cg==
------=_Part_100976_29274176.1223857674159--

From java-user-return-36569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 02:00:34 2008
Return-Path: <java-user-return-36569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26280 invoked from network); 13 Oct 2008 02:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 02:00:34 -0000
Received: (qmail 81177 invoked by uid 500); 13 Oct 2008 02:00:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81142 invoked by uid 500); 13 Oct 2008 02:00:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81131 invoked by uid 99); 13 Oct 2008 02:00:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 19:00:27 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 01:59:20 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A8E1171C478; Sun, 12 Oct 2008 18:59:27 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A62BB71C428
	for <java-user@lucene.apache.org>; Sun, 12 Oct 2008 18:59:27 -0700 (PDT)
Date: Sun, 12 Oct 2008 18:59:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Enumerating all the terms of a particular field
In-Reply-To: <6d6cf45b0810121513x1a6a834dpebb430255026ce03@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0810121858530.32744@radix.cryptio.net>
References: <6d6cf45b0810121513x1a6a834dpebb430255026ce03@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Someone just asked this question a week ago (unforunatley they asked it on 
the wrong list)...

http://www.nabble.com/Can-I-filter-the-results-returned-by-IndexReader.terms%28field%29-using-a-field--to19849593.html#a19849593

: Subject: Enumerating all the terms of a particular field



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 03:57:54 2008
Return-Path: <java-user-return-36570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75049 invoked from network); 13 Oct 2008 03:57:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 03:57:54 -0000
Received: (qmail 29817 invoked by uid 500); 13 Oct 2008 03:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29786 invoked by uid 500); 13 Oct 2008 03:57:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29775 invoked by uid 99); 13 Oct 2008 03:57:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Oct 2008 20:57:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 03:56:42 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 86A8A71C440; Sun, 12 Oct 2008 20:56:47 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 825D171C436;
	Sun, 12 Oct 2008 20:56:47 -0700 (PDT)
Date: Sun, 12 Oct 2008 20:56:47 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>, rolarenfan@earthlink.net
Subject: Re: bunch of newbie queries, PS
In-Reply-To: <18579896.1223330999510.JavaMail.root@elwamui-rustique.atl.sa.earthlink.net>
Message-ID: <Pine.LNX.4.62.0810122044090.27432@radix.cryptio.net>
References: <18579896.1223330999510.JavaMail.root@elwamui-rustique.atl.sa.earthlink.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: the "anonymous" SVN (http://svn.apache.org/repos/asf/lucene/java/trunk/)
: does not work for me (I am using Eclipse 3.3, and have the subversion plug-in, v.
: 1.2.4, and have successfully checked out code using SVN from other repositories).
: Apparently here I need a user-id and pwd -- what is that or where do I get one? 

i'm not sure why you would be having problems with that ... i can't speak 
for Eclipse, but I just double checked and it's definitely allowing 
anonymous checkout from the command line.  can you try that and see if it 
works for you? (perhaps it's an issue with the server running subversion 
1.5 and your plugin only working with 1.4 ?)


: Allowing for the explanation below ("preserving history"), it seems like 
: there may not be a way to do what I had hoped for. Here's an example: I 
: poke around, looking for 2.2; I get to here: 
: http://lucene.apache.org/java/2_2_0/releases.html
: 
: OK, cool, now I click on ==>> Both binary and source releases are 
: available for download from the Apache Mirrors

Hmm ... this is actually the generic wording we currently use -- that page 
provides generic info on "how to get official releases"  ... nothing about 
that link (or that page) suggests that it will take you directly to a 
specific version of Lucene.  The fact that the URL has 2_2_0 in it is just 
an indicator that you are looking at the version of releases.html that was 
inlcuded in 2.2.0.

If you can suggest better wording to make it clear to novice users that 
page is *general* info about Lucene-Java Downloads, and not specific to 
any one version, i'm certainly interested.

: Maybe the closest one could get is to rephrase (from now on) the 
: sentence/link above, to read something like this:
: 
: ==>> Both binary and source releases, for the <bold>current</bold> 
: version, are available for download from the Apache Mirrors

But that statement wouldn't be true: older versions are in fact 
available from the mirrors.  Perhaps the most straight forward way to help 
people in a similar situation in the future would be to make the archive 
sub directory more promoment ... i'll try to figure out where that 
README.html lives and update it with some more helpful verbage.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 12:03:29 2008
Return-Path: <java-user-return-36571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71316 invoked from network); 13 Oct 2008 12:03:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 12:03:29 -0000
Received: (qmail 3087 invoked by uid 500); 13 Oct 2008 12:03:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3053 invoked by uid 500); 13 Oct 2008 12:03:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3042 invoked by uid 99); 13 Oct 2008 12:03:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 05:03:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of geoffdegeoff@googlemail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 12:02:13 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1576482rvb.5
        for <java-user@lucene.apache.org>; Mon, 13 Oct 2008 05:02:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=9K7Xnc7t3sl3VYlpHt2LBKilycD4RdlAND/NSAHSQP0=;
        b=DopD2ieDhR3esVUH3zvL3W/LiL4qC3GemfVTYPsVThWz/kT8bP1isWzr4cFxZ5TvEW
         f+DMgaZVPSnTkYYEoq9zbawYnAOEIAC2X09XRfVbpqo14XnZPPD/MwG8eGDLGuV8AbU3
         mSa7YRCuwZjrJM7C5ShUcGrF+rk185c5FNjs8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=fy2wRKe0ozfeYlLbdR9HptkrEklmPziJ53rYUO+P0H9Bg36AeZjVYee2S8JG2MzHfl
         7n9bD7MGK+QXNLdPPsV5us/WxmgUfquQvxfYsHlvLDuSa1oc75psW+6lhYECXRWG0cXa
         EU/5mDPbJBpGRQbRqm2TKg2W7o84KyCKuLS74=
Received: by 10.141.3.17 with SMTP id f17mr3640074rvi.180.1223899360570;
        Mon, 13 Oct 2008 05:02:40 -0700 (PDT)
Received: by 10.141.63.9 with HTTP; Mon, 13 Oct 2008 05:02:40 -0700 (PDT)
Message-ID: <bae6c5640810130502g2b863446s29ed1b9304342bbe@mail.gmail.com>
Date: Mon, 13 Oct 2008 13:02:40 +0100
From: "Andrew Rimmer" <geoffdegeoff@googlemail.com>
To: java-user@lucene.apache.org
Subject: Is there a way to get numTokens via search?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_136010_9711423.1223899360563"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_136010_9711423.1223899360563
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am doing a search using Lucene, and when I get the search results (hits),
I want to be able to get the number of tokens in a certain field.

Is this possible? Where is this sort of information stored?

I know the IndexSearcher.Explain can get some information, but it seems
mostly in free text and I cannot see the numTokens value.

Ideally what I would like to be able to do is get the NumTokens value and
the amount of hits within a field and display to the user what the "keyword
density" is as a percentage.

Any pointers would be greatly appreciated.

Thanks,

Andrew

------=_Part_136010_9711423.1223899360563--

From java-user-return-36572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 12:31:11 2008
Return-Path: <java-user-return-36572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86240 invoked from network); 13 Oct 2008 12:31:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 12:31:11 -0000
Received: (qmail 49377 invoked by uid 500); 13 Oct 2008 12:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48998 invoked by uid 500); 13 Oct 2008 12:31:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48987 invoked by uid 99); 13 Oct 2008 12:31:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 05:31:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Oct 2008 12:29:58 +0000
Received: (qmail invoked by alias); 13 Oct 2008 12:29:33 -0000
Received: from e178072149.adsl.alicedsl.de (EHLO msrvcn04) [85.178.72.149]
  by mail.gmx.net (mp013) with SMTP; 13 Oct 2008 14:29:33 +0200
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19dcvBpsN5dNtErH7Q0GESwxcH1CBrfJVpm91UgS8
	SOW+2oLedtLFWz
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04> <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com>
Subject: RE: Searching sets of documents
Date: Mon, 13 Oct 2008 14:29:35 +0200
Message-ID: <1AF02086165F4369B3744AC60B20DAD4@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acksypynoe541YQaQ4ia/iJPbfXrQwAZKyGw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
In-Reply-To: <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com>
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.6
X-Virus-Checked: Checked by ClamAV on apache.org

The docs are already indexed. 

> -----Original Message-----
> From: ??? [mailto:yeshuangming@gmail.com] 
> Sent: Montag, 13. Oktober 2008 02:28
> To: java-user@lucene.apache.org
> Subject: Re: Searching sets of documents
> 
> all folders which match "A AND Y", do you search for file name?
> If yes, A or Y in "A AND Y" is a Strring too, so you can do it by:
> construct a Lucene Document for each folder, and name of 
> files under the
> folder is the search data.
> 
> 2008/10/13 <spring@gmx.eu>
> 
> > Hi,
> >
> > I want to search for sets of documents. For instance I 
> index some folders
> > with documents in it and now I do not want to find certain 
> documents but
> > folders.
> >
> > Sample:
> >
> > folder A
> >  doc 1, contains X, Y
> >  doc 2, contains Y, Z
> >
> > folder B
> >  doc 3, contains X, Y
> >  doc 4, contains A, Z
> >
> > Now I want to find all folders which match "A AND Y" -> folder B.
> >
> > How can this be done?
> >
> > Thank you
> >
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> -- 
> Sorry for my English!! ?
> Please help me correct my English expression and error in syntax
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 12:37:30 2008
Return-Path: <java-user-return-36573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87751 invoked from network); 13 Oct 2008 12:37:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 12:37:30 -0000
Received: (qmail 58843 invoked by uid 500); 13 Oct 2008 12:37:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58811 invoked by uid 500); 13 Oct 2008 12:37:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58800 invoked by uid 99); 13 Oct 2008 12:37:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 05:37:22 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_NEUTRAL,WHOIS_DMNBYPROXY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.224] (HELO smtp121.mail.mud.yahoo.com) (209.191.84.224)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Oct 2008 12:36:13 +0000
Received: (qmail 11524 invoked from network); 13 Oct 2008 12:36:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=it7M46mhuf+j8NcoK3usHbrvdaLmdgM6msXfBg1Du/sj2yozukOI8FYqCEEprnyZkqOaZDFrQTcyQEc/jbHsLvaqDtufIFbKI3ws1bjIu+BEEusxSzv5zQAqtFZqhzHlv7spzbkawSnLj9yxrhw8PyrlEPOc8gHQ1+5JFSbsTiU=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp121.mail.mud.yahoo.com with SMTP; 13 Oct 2008 12:36:47 -0000
X-YMail-OSG: Sq1Zt9UVM1lJ6bfHQPeMU4usUytOwUkz.FwTb1LiCjZ0mPG1kVS99_MWsr6vRF30iVB7dZTifxYfB32MuVq.aRw03.LDhAiKue1C5z8IPnMYnLezaAVEXQhYka5beKxpEJTSIveTu69VoDOor0PWQ7gg
X-Yahoo-Newman-Property: ymail-3
Message-ID: <007a01c92d30$5b903f70$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <02ed01c9253a$c5ecef60$330bc30a@sv.us.sonicwall.com> <867513fe0810030918m1b3ecd64k98ed01214caaaa5d@mail.gmail.com> <036d01c9276d$268e2c60$330bc30a@sv.us.sonicwall.com> <867513fe0810061148h2de6f71av6867bdbbdea5dc59@mail.gmail.com> <03f201c92863$710005b0$330bc30a@sv.us.sonicwall.com> <867513fe0810070525u706cd73ag7b4e846e72e112a@mail.gmail.com> <041401c9293e$b4be95b0$330bc30a@sv.us.sonicwall.com> <867513fe0810092149m62c5863cs9c8dbe27877a7ced@mail.gmail.com>
Subject: Re: Single searcher vs Multi Searcher
Date: Mon, 13 Oct 2008 18:06:38 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Anshum,

My criteria to shard would be date. I am planning to maintain 10 days of 
data in one DB. I think the memory required for single searcher and multi 
searcher would be more or less the same. In your case you may perform search 
on one DB but you might have all searcher objects of all DBs opened and 
warmed up and this will require same amount of memory as single searcher 
would do.

Let me conclude:
The benifits of going for sharding the database
1) increase in search time
2) increase in indexing speed
3) easy maintance.

Any other benifits?

Regards
Ganesh

----- Original Message ----- 
From: "Anshum" <anshumg@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, October 10, 2008 10:19 AM
Subject: Re: Single searcher vs Multi Searcher


> Hi Ganesh,
>
> Your situation seems pretty straight.
> I did not really split my database (storage), just that while indexing, I
> indexed the data into 'n' indexes (basis a particular field).
> Talking about implementation and gain, I have tried using multi searcher 
> as
> well as parallel multisearcher and I seem to be running searches faster 
> (my
> priority being a better time complexity as compared to space complexity) 
> in
> case of a parallelmultisearcher.
> This helps me perform my search in a little over 1/n times the regular
> search time.
> Also, there are times when I don't want to search on all the indexes and 
> so
> I end up only searching a select few indexes. I would advice you to shard
> the indexes keeping in mind the search criteria as well so that, if 
> possible
> you search for lesser data as opposed to searching for everything.
> Also, I did incrementally update my index and so deleted the older doc 
> from
> the older index and added it to a new incremental index (which was my
> concern as this takes a little time assuming you have a lot of updates as
> well).
>
> All said and done, this is an implementation of doc based index sharding
> i.e. everything for a particular document goes to a particular index. I 
> also
> tried splitting on terms (so that when I search for A and B, I know which
> indexes store all docs (and other info) for the terms A and B. But this
> would mean a lot of building things from scratch so I couldnt get to 
> really
> try it. There are a few distributed lucene implementations (though they 
> are
> not that good) you could have a look at them.
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Wed, Oct 8, 2008 at 5:39 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> Hello Anshum,
>>
>> In my case i have to add /modify records to the current index database 
>> and
>> there will be only delete in older index  DB. I will not have a 
>> situitation
>> of updating the older records.
>>
>> Please brief me about your requirement and how you configured your
>> database.
>> Whether you have any incremental updates??
>> What have gained by sharding the index.
>>
>> Regards
>> Ganesh
>>
>>
>> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Tuesday, October 07, 2008 5:55 PM
>>
>> Subject: Re: Single searcher vs Multi Searcher
>>
>>
>>  There were all of the links I could find:
>>>
>>> http://findmeajob.wordpress.com/2007/07/31/lucene-singlesearcher-vs-multisearcher/
>>>
>>> http://archives.devshed.com/forums/java-118/how-do-lucene-ids-work-with-multireader-and-multisearcher-993682.html
>>>
>>> It has been only out of personal experimentation.
>>> Maintaining 4 indexes and having a multisearcher for the same sounds ok 
>>> to
>>> me, though it might(most probably would) use up more time (depending on
>>> your
>>> term/doc distribution).
>>> I have tried multisearchers for indexes that are sized at around 18Gs 
>>> with
>>> over 10 million records in them and they seem to be working fine. Memory
>>> utilization hasn't really been my problem though maintenance has been
>>> required to be taken care of if I had record updates as well i.e.
>>> Lets assume we have 4 indexes {1,2,3,4} with 4 being the oldest one. Now 
>>> a
>>> document got updated and so you would want to move it to the freshest
>>> index
>>> viz. index 1. In this case you would also have to delete this document
>>> from
>>> index 4 (after figuring out that it exists in 4) else this doc would 
>>> show
>>> up
>>> as 2 hits using a multisearcher.
>>> This is the document movement that I was talking about.
>>> Talking only about online resource utilization ( as what I just spoke
>>> about
>>> is generally an offline process), you would have to spend extra resource
>>> to
>>> merge the hits from the different indexes.
>>> The other overhead in case of a multisearcher would be of creating those
>>> many searchers - for each index(though shouldn't be much, just though
>>> would
>>> point out).
>>> I guess you should try it as speed of search is not realy all that
>>> important
>>> to you as compared to running it on a singe box within the memory
>>> limitation.
>>>
>>>
>>>
>>> --
>>> Anshum Gupta
>>> Naukri Labs!
>>> http://ai-cafe.blogspot.com
>>>
>>> The facts expressed here belong to everybody, the opinions to me. The
>>> distinction is yours to draw............
>>>
>>>
>>> On Tue, Oct 7, 2008 at 3:29 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>
>>>  Hello Anusham,
>>>>
>>>> My intention is to shard the index after every 7 days (week). After 30
>>>> days, (4th  week) the first DB may get deleted. At any point of time i
>>>> will
>>>> be maitaining 3 to 4 DB.
>>>>
>>>> I want to know the pros and cons of the MultiSearcher or Index sharding
>>>> approach. Any web links would be helpful.
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Tuesday, October 07, 2008 12:18 AM
>>>>
>>>> Subject: Re: Single searcher vs Multi Searcher
>>>>
>>>>
>>>>  Hi Ganesh,
>>>>
>>>>> About the memory consumption while sorting, it would end up using
>>>>> similar
>>>>> amounts, perhaps even more.. like in the case of regular parallel
>>>>> programming algorithms (hoping that you intend to search using a
>>>>> parallel
>>>>> multi searcher). Would you have to query particular indexes only for a
>>>>> particular search or would you be searching over all the indexes and
>>>>> then
>>>>> follow it up by merger (which the parallel multi searcher would do
>>>>> efficiently).?
>>>>> Also, I guess 30 indexes would be a little too many, haven't really
>>>>> tried
>>>>> out those many indexes for a multisearcher.
>>>>> As far as maintenance of DB is concerned, it might be easy as long as
>>>>> you
>>>>> don't have any document updates, in which case you'd have to shift the
>>>>> documents from one DB/index to another (which includes creating an 
>>>>> entry
>>>>> in
>>>>> the latest index/DB and deleting the record from the older DB).
>>>>> I guess you'd have to pilot it, in case memory is an issue in your 
>>>>> case
>>>>> and
>>>>> not speed, you could try a regular multisearcher instead of a parallel
>>>>> multisearcher.
>>>>> I guess when you say maintenance of the DB gets easier, you mean that
>>>>> the
>>>>> data in each individual table is controlled (but remember there could 
>>>>> be
>>>>> other bigger hassles like the one mentioned above about moving data
>>>>> between
>>>>> indexes/DB).
>>>>>
>>>>> --
>>>>> Anshum Gupta
>>>>> Naukri Labs!
>>>>> http://ai-cafe.blogspot.com
>>>>>
>>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>>> distinction is yours to draw............
>>>>>
>>>>>
>>>>> On Mon, Oct 6, 2008 at 10:06 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>>
>>>>>  Hello Anshum,
>>>>>
>>>>>>
>>>>>> My index is growing 1 million documents per day. Initially i planned 
>>>>>> to
>>>>>> have a single database but the sorting of one or more fields consumes
>>>>>> more
>>>>>> RAM. Whether sharding the index would also consume the same.
>>>>>>
>>>>>> My application should co-exist with other application of my product 
>>>>>> and
>>>>>> my
>>>>>> app could get 1 GB of RAM. Search speed is fine but i need to display
>>>>>> the
>>>>>> result in the sorted order.
>>>>>>
>>>>>> I thought to keep 7 days of documents in one index and create one 
>>>>>> more
>>>>>> after the 7 days. After 30 days the first index may get deleted. I 
>>>>>> need
>>>>>> to
>>>>>> keep the documents in the index DB for 30 days. My Index DB is in 
>>>>>> HDD.
>>>>>>
>>>>>> I want to the pros and cons of sharding. I think maintance of the DB
>>>>>> becomes easier.
>>>>>>
>>>>>> It would be very much helpful, if you share some of your thoughts.
>>>>>>
>>>>>> Regards
>>>>>> Ganesh
>>>>>>
>>>>>>
>>>>>> ----- Original Message ----- From: "Anshum" <anshumg@gmail.com>
>>>>>> To: <java-user@lucene.apache.org>
>>>>>> Sent: Friday, October 03, 2008 9:48 PM
>>>>>> Subject: Re: Single searcher vs Multi Searcher
>>>>>>
>>>>>>
>>>>>>
>>>>>>  Hi Ganesh,
>>>>>>
>>>>>>
>>>>>>> I have experimented with sharded indexes and they seem to benefit
>>>>>>> me(atleast
>>>>>>> in my case). I would like to know a few things before I answer your
>>>>>>> question:
>>>>>>> 1. Do you have a reasonable criteria ( a calculated one) to shard 
>>>>>>> the
>>>>>>> indexes?
>>>>>>> 2. How do you plan to split the index? Is it going to be document
>>>>>>> based
>>>>>>> (which I guess it should be as otherwise you would have to build a
>>>>>>> complete
>>>>>>> distributed system)
>>>>>>> 3. Do you plan to put your indexes on the RAM or on (physically)
>>>>>>> seperate
>>>>>>> HDDs?
>>>>>>>
>>>>>>> Though all said and done, sharded indexes are a good approach, if 
>>>>>>> done
>>>>>>> the
>>>>>>> right way.
>>>>>>> --
>>>>>>> Anshum Gupta
>>>>>>> Naukri Labs!
>>>>>>> http://ai-cafe.blogspot.com
>>>>>>>
>>>>>>> The facts expressed here belong to everybody, the opinions to me. 
>>>>>>> The
>>>>>>> distinction is yours to draw............
>>>>>>>
>>>>>>>
>>>>>>> On Fri, Oct 3, 2008 at 3:01 PM, Ganesh <emailgane@yahoo.co.in> 
>>>>>>> wrote:
>>>>>>>
>>>>>>>  Hello all,
>>>>>>>
>>>>>>>
>>>>>>>> My indexing is growing by 1 million records per day and the memory
>>>>>>>> consumption of the searcher object is quite high.
>>>>>>>>
>>>>>>>> There are different opinion in the groups. Few suggest to use 
>>>>>>>> single
>>>>>>>> database and few to use sharding. My Database has 10 million 
>>>>>>>> records
>>>>>>>> now
>>>>>>>> and
>>>>>>>> it might go till 30 million or more. I plan to shard the index. but
>>>>>>>> Multisearcher will give me benifit.
>>>>>>>>
>>>>>>>> Regards
>>>>>>>> Ganesh
>>>>>>>>
>>>>>>>>
>>>>>>>> Send instant messages to your online friends
>>>>>>>> http://in.messenger.yahoo.com
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>   Send instant messages to your online friends
>>>>>>>
>>>>>> http://in.messenger.yahoo.com
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>  Send instant messages to your online friends
>>>> http://in.messenger.yahoo.com
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 12:44:28 2008
Return-Path: <java-user-return-36574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89941 invoked from network); 13 Oct 2008 12:44:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 12:44:27 -0000
Received: (qmail 65019 invoked by uid 500); 13 Oct 2008 12:44:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64995 invoked by uid 500); 13 Oct 2008 12:44:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64984 invoked by uid 99); 13 Oct 2008 12:44:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 05:44:20 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.121] (HELO smtp138.mail.mud.yahoo.com) (209.191.107.121)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Oct 2008 12:43:11 +0000
Received: (qmail 83428 invoked from network); 13 Oct 2008 12:42:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=jHwVUhRyAjaSXD2WLZQ4QgQMs3qvBA0rmwxe7g9VvLh456mLBuR7ZSUisD+kLAMPuN/U9Pxt7ahfPi3AtlAj58PgxLH/10YWixO8Gr1YJhphQ2qiUocc3W7Xq0ROGpuIsHrdOYOAbXmcu8+kZbMOD6I/Fzn3SDNwsyB1DJYM81U=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp138.mail.mud.yahoo.com with SMTP; 13 Oct 2008 12:42:44 -0000
X-YMail-OSG: Qc175pYVM1nP_syblmkq0JUnqTlM5KDUtMAmH09wuCUnEf8we89qzdM.VV7f4d8Ti027S12TPnfpwlXNCR2UbSTubYM_22L3OHK63Qhuf3JwbvCifd4Pbv7d2OaSJbvs_qHStUCxVLD9DMFdUqNg4mdfB.A6rfyVEE83R.nicNRcxo2UlxHYqiUwDd4g
X-Yahoo-Newman-Property: ymail-3
Message-ID: <008e01c92d31$30eb6370$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <915178.28087.qm@web26005.mail.ukl.yahoo.com>
Subject: Re: Question regarding sorting and memory consumption in lucene
Date: Mon, 13 Oct 2008 18:12:32 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Mark,

I am also facing the same sorting issue.
In my case there will be only addition and deletion of data [no modification 
of existing records]. Whether i could rely on the indexed order of sorting.

"SortField.FIELD_DOC" is the one helps to do sorting on indexed order?

Regards
Ganesh


----- Original Message ----- 
From: "mark harwood" <markharw00d@yahoo.co.uk>
To: <java-user@lucene.apache.org>
Sent: Friday, October 10, 2008 6:48 PM
Subject: Re: Question regarding sorting and memory consumption in lucene


Assuming content is added in chronological order and with no updates to 
existing docs couldn't you rely on internal Lucene document id to give a 
chronological sort order?
That would require no memory cache at all when sorting.

Querying across multiple indexes simultaneously however may present an added 
complication...



----- Original Message ----
From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
To: java-user@lucene.apache.org
Sent: Friday, 10 October, 2008 13:51:50
Subject: Re: Question regarding sorting and memory consumption in lucene

I'll follow up on my own question...
Let's say that we have 4 years of data, meaning that there will be roughly
4 * 365 = 1460 unique terms for our sort field.
For one index, lets say with 30 million docs, the cache should use approx
100mb, or am I wrong? and thus for 6 indexes we would need approx 600 mb
for the caches? (and an additional 100mb every time we warm a new searcher
and swap it out...) As far as the string versus int or long goes, I don't
really see any big gain in changig it since 1460 * 10  bytes extra memory
doesnt really make much difference. Or?

I guess we should consider reducing the index size or at least only allow
sorted search on a subset of the index (or a pruned version of the
index...) ? Would that be better for us?
But then again, I assume that there are much larger lucene-based indexes
out there than ours, and you guys must have some solution to this issue,
right? :)

best regards,
  Aleksander


On Fri, 10 Oct 2008 14:09:36 +0200, Aleksander M. Stensby
<aleksander.stensby@integrasco.no> wrote:

> Hello, I've read a lot of threads now on memory consumption and sorting,
> and I think I have a pretty good understanding of how things work, but I
> could still need some input here..
>
> We currently have a system consisting of 6 different lucene indexes (all
> have the same structure, so you could say it is a form of sharding). We
> currently use this approach because we want to be able to give users
> access to different index (but not necessarily  all indexes) etc.
>
> (We are planning to move to a solr-based system, but for now we would
> like to solve this issue with our current lucene-based system.)
>
> The thing is, the indexes are rather big (ranging from 5G to 20G per
> index and 10 - 30 million entries per index.)
> We keep one searcher object open per index, and when the index is
> changed (new documents added in batches several times a day), we update
> the searcher objects.
> In the warmup procedure we did a couple of searches and things work
> fine, BUT i realized that in our application we return hits sorted by
> date by default, and our warmup procedure did non-sorted queries... so
> still the first searches done by the user after an update was slow
> (obviously).
>
> To cope, I changed the warmup procedure to include a sorted search, and
> now the user will not notice slow queries. Good!
> But, the problem at hand is that we are running into memory problems
> (and I understand that sorting does consume a lot of memory...) But is
> there any way that is "best practice" to deal with this? The field we
> sort on is an un_indexed text field representing the date. typically
> "2008-10-10". I am aware that string field sorting consumes a lot of
> memory, so should we change this field to something different? Would
> this help us with the memory problems?
>
> As a sidenote / couriosity question: Does it matter if we use the search
> method returning Hits versus the search method returning TopFieldDocs?
> (we are not iterating them in any way when this memory issue occurs)
>
> Thanks in advance for any guidance we may get.
>
> Best regards,
>   Aleksander M. Stensby
>
>
>



-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S
+47 41 22 82 72
aleksander.stensby@integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 13:55:09 2008
Return-Path: <java-user-return-36575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39847 invoked from network); 13 Oct 2008 13:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 13:55:08 -0000
Received: (qmail 77438 invoked by uid 500); 13 Oct 2008 13:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77398 invoked by uid 500); 13 Oct 2008 13:55:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77383 invoked by uid 99); 13 Oct 2008 13:55:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 06:55:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 13:53:56 +0000
X-IronPort-AV: E=Sophos;i="4.33,403,1220223600"; 
   d="scan'208";a="95738195"
Received: from exbe1.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 13 Oct 2008 14:53:28 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 14:53:25 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 14:53:25 +0100
Message-ID: <48F352D6.6030407@deri.org>
Date: Mon, 13 Oct 2008 14:53:26 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Modification of positional information encoding
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Oct 2008 13:53:25.0788 (UTC) FILETIME=[1060F5C0:01C92D3B]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We are trying to modify the positional encoding of a term occurrence for 
experimentation purposes. One solution we adopt is to use payloads to 
sotre our own positional information encoding, but with this solution, 
it becomes difficult to measure the increase or decrease of index size. 
It is why we would like to directly change the positional encoding.

I have seen that Michael McCandless recently refactored the 
DocumentsWriter into a flexible indexer chain (see LUCENE-1301). By 
analysing the code, I have noticed that only two classes should be 
modified when writing a document:

When adding a document with IndexWriter.addDocument
- FieldInvertState (increment and store positions)
- FreqProxTermsWriterPerField.writeProx

When flushing documents:
- FreqProxTermsWriterPerField.appendPostings

I have noticed that only one class should be modified when reading a 
document:
- SegmentTermPositions.nextPositions, and
- SegmentTermPositions.readDeltaPositions

Could a member of the Lucene team approve my modifications ? Do I forget 
to modify some classes ?

Another question, since the lucene core classes are kind of close, what 
is the best way to implement these modifications ? Make a branch of 
lucene, and add my new classes to the lucene package 
org.apache.lucene.index ? Or do a more elegant solution is possible ?

Thanks in advance,
Regards.
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 14:23:23 2008
Return-Path: <java-user-return-36576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70494 invoked from network); 13 Oct 2008 14:23:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 14:23:22 -0000
Received: (qmail 22573 invoked by uid 500); 13 Oct 2008 14:23:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22543 invoked by uid 500); 13 Oct 2008 14:23:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22532 invoked by uid 99); 13 Oct 2008 14:23:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 07:23:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 14:22:09 +0000
X-IronPort-AV: E=Sophos;i="4.33,403,1220223600"; 
   d="scan'208";a="95741305"
Received: from exbe1.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 13 Oct 2008 15:21:47 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 15:21:46 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 15:21:46 +0100
Message-ID: <48F3597B.9080302@deri.org>
Date: Mon, 13 Oct 2008 15:21:47 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting posting lists before intersection
References: <48D10726.4010504@getopt.org>
In-Reply-To: <48D10726.4010504@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Oct 2008 14:21:46.0744 (UTC) FILETIME=[063A3F80:01C92D3F]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Andrzej,

sorry for the late reply.

I have looked at the code. As far as I understand, you sort the posting 
lists based on the first doc skip. The first posting list will be the 
one who have the first biggest document skip.
Do the sparseness of posting lists is a good predictor for sampling and 
ordering posting lists ? Do you know evaluation of such technique ?

In order to implement sorting based on frequency, we need the document 
frequency of each term. This information should be propagated through 
the Scorer classes (from TermScorer to higher level class such as 
ConjunctiveScorer). This will require a call to 
IndexReader.docFreq(term) for each of the term queries. Is docFreq call 
mean another IO access ?

Thanks for the clarification,
Regards.
-- 
Renaud Delbru


Andrzej Bialecki wrote:
>
> Renaud Delbru wrote:
> > Hi all,
> >
> > I am wondering if Lucene implements the query optimisation that consists
> > of ordering the posting lists based on the term frequency before
> > intersection ?
> > If yes, could somebody point me to the java class / method that
> > implements such strategy ?
>
> Lucene trunk: ConjunctionScorer, lines 85-103 - pay attention to the
> comments there, it's not strictly a sort by frequency, rather by the
> sampled "sparseness".
>
> --
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 14:54:47 2008
Return-Path: <java-user-return-36577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91618 invoked from network); 13 Oct 2008 14:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 14:54:47 -0000
Received: (qmail 90505 invoked by uid 500); 13 Oct 2008 14:54:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90475 invoked by uid 500); 13 Oct 2008 14:54:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90464 invoked by uid 99); 13 Oct 2008 14:54:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 07:54:41 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 14:53:34 +0000
Received: by wx-out-0506.google.com with SMTP id h28so572132wxd.20
        for <java-user@lucene.apache.org>; Mon, 13 Oct 2008 07:54:00 -0700 (PDT)
Received: by 10.70.11.11 with SMTP id 11mr6518672wxk.87.1223909640130;
        Mon, 13 Oct 2008 07:54:00 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id i20sm8951980wxd.23.2008.10.13.07.53.58
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 13 Oct 2008 07:53:59 -0700 (PDT)
Message-Id: <DBD1DD04-E974-4FF6-B41C-C3462554D0CB@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48F352D6.6030407@deri.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Modification of positional information encoding
Date: Mon, 13 Oct 2008 10:53:57 -0400
References: <48F352D6.6030407@deri.org>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Renaud Delbru wrote:

> Hi,
>
> We are trying to modify the positional encoding of a term occurrence  
> for experimentation purposes. One solution we adopt is to use  
> payloads to sotre our own positional information encoding, but with  
> this solution, it becomes difficult to measure the increase or  
> decrease of index size. It is why we would like to directly change  
> the positional encoding.
>
> I have seen that Michael McCandless recently refactored the  
> DocumentsWriter into a flexible indexer chain (see LUCENE-1301). By  
> analysing the code, I have noticed that only two classes should be  
> modified when writing a document:
>
> When adding a document with IndexWriter.addDocument
> - FieldInvertState (increment and store positions)
> - FreqProxTermsWriterPerField.writeProx
>
> When flushing documents:
> - FreqProxTermsWriterPerField.appendPostings
>
> I have noticed that only one class should be modified when reading a  
> document:
> - SegmentTermPositions.nextPositions, and
> - SegmentTermPositions.readDeltaPositions
>
> Could a member of the Lucene team approve my modifications ? Do I  
> forget to modify some classes ?

This looks right, though you would also need to modify SegmentMerger  
to read & write your new format when merging segments.

Another thing you could do is grep for "omitTf" which should touch  
exactly the same places you need to touch.

It'd be awesome to get to the point where this read & write logic is  
captured in a single "codec" that's cleanly shared in all these places  
("flexible indexing") but we are not quit there yet...

Out of curiosity, what change are you planning on trying?

> Another question, since the lucene core classes are kind of close,  
> what is the best way to implement these modifications ? Make a  
> branch of lucene, and add my new classes to the lucene package  
> org.apache.lucene.index ? Or do a more elegant solution is possible ?

For starters (to try things out) I would just make local modifications  
with a lucene source checkout (via svn).

Also, this issue was just opened:

   https://issues.apache.org/jira/browse/LUCENE-1419

which would make it possible for classes in the same package  
(oal.index) to use their own indexing chain.  With that fix, if you  
make your own classes in oal.index package, and perhaps subclass the  
above classes, you could then create your own indexing chain for  
indexing?  If you take that approach, please report back so we can  
learn how to improve Lucene for these very advanced customizations!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 15:00:56 2008
Return-Path: <java-user-return-36578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98628 invoked from network); 13 Oct 2008 15:00:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 15:00:56 -0000
Received: (qmail 8522 invoked by uid 500); 13 Oct 2008 15:00:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8495 invoked by uid 500); 13 Oct 2008 15:00:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8484 invoked by uid 99); 13 Oct 2008 15:00:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 08:00:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 14:59:42 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m9DF0Om28065
	for <java-user@lucene.apache.org>; Mon, 13 Oct 2008 10:00:24 -0500
Message-ID: <48F36276.9020603@getopt.org>
Date: Mon, 13 Oct 2008 17:00:06 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting posting lists before intersection
References: <48D10726.4010504@getopt.org> <48F3597B.9080302@deri.org>
In-Reply-To: <48F3597B.9080302@deri.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Renaud Delbru wrote:
> Hi Andrzej,
> 
> sorry for the late reply.
> 
> I have looked at the code. As far as I understand, you sort the posting 
> lists based on the first doc skip. The first posting list will be the 
> one who have the first biggest document skip.
> Do the sparseness of posting lists is a good predictor for sampling and 
> ordering posting lists ? Do you know evaluation of such technique ?

It is _some_ predictor ... :) whether it's a good one is another 
question. It's certainly very inexpensive - we don't do any additional 
IO except what we have to do anyway, which is scorer.skipTo().

In general case it's costly to calculate the frequency (or sparseness) 
of matches in a scorer without actually running the scorer through all 
its matches.

> 
> In order to implement sorting based on frequency, we need the document 
> frequency of each term. This information should be propagated through 
> the Scorer classes (from TermScorer to higher level class such as 
> ConjunctiveScorer). This will require a call to 
> IndexReader.docFreq(term) for each of the term queries. Is docFreq call 
> mean another IO access ?

It sounds like you plan to order scorers by term frequency ... but in 
general case they won't all be TermScorers, so the frequency of 
documents matching a scorer won't have any particular connection to a 
single term freq.

Answering your question: docFreq call uses TermInfo information, which 
uses a small RAM cache. If you're lucky then it won't cause any IO, 
otherwise it needs to read this info from the .ti file.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 15:22:15 2008
Return-Path: <java-user-return-36579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32525 invoked from network); 13 Oct 2008 15:22:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 15:22:15 -0000
Received: (qmail 47391 invoked by uid 500); 13 Oct 2008 15:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47350 invoked by uid 500); 13 Oct 2008 15:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47339 invoked by uid 99); 13 Oct 2008 15:22:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 08:22:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.31] (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 15:21:03 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr11.xs4all.nl (8.13.8/8.13.8) with ESMTP id m9DFL7RC009189
	for <java-user@lucene.apache.org>; Mon, 13 Oct 2008 17:21:09 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Sorting posting lists before intersection
Date: Mon, 13 Oct 2008 17:21:06 +0200
User-Agent: KMail/1.9.9
References: <48D10726.4010504@getopt.org> <48F3597B.9080302@deri.org> <48F36276.9020603@getopt.org>
In-Reply-To: <48F36276.9020603@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200810131721.06919.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Monday 13 October 2008 17:00:06 schreef Andrzej Bialecki:
> Renaud Delbru wrote:
> > Hi Andrzej,
> >
> > sorry for the late reply.
> >
> > I have looked at the code. As far as I understand, you sort the
> > posting lists based on the first doc skip. The first posting list
> > will be the one who have the first biggest document skip.
> > Do the sparseness of posting lists is a good predictor for sampling
> > and ordering posting lists ? Do you know evaluation of such
> > technique ?
>
> It is _some_ predictor ... :) whether it's a good one is another
> question. It's certainly very inexpensive - we don't do any
> additional IO except what we have to do anyway, which is
> scorer.skipTo().
>
> In general case it's costly to calculate the frequency (or
> sparseness) of matches in a scorer without actually running the
> scorer through all its matches.
>
> > In order to implement sorting based on frequency, we need the
> > document frequency of each term. This information should be
> > propagated through the Scorer classes (from TermScorer to higher
> > level class such as ConjunctiveScorer). This will require a call to
> > IndexReader.docFreq(term) for each of the term queries. Is docFreq
> > call mean another IO access ?
>
> It sounds like you plan to order scorers by term frequency ... but in
> general case they won't all be TermScorers, so the frequency of
> documents matching a scorer won't have any particular connection to a
> single term freq.

This could be done, but since not all scorers will be TermScorers it
will be necessary to add a method to Scorer (or perhaps even to its
DocIdSetIterator superclass):

   public abstract int estimatedDocFreq();

and implement this for all existing instances. TermScorer could
implement it without estimating.
For AND/OR/NOT such an estimation is straightforward but for
proximity queries it would be more of a guess.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 15:40:38 2008
Return-Path: <java-user-return-36580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44942 invoked from network); 13 Oct 2008 15:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 15:40:38 -0000
Received: (qmail 96702 invoked by uid 500); 13 Oct 2008 15:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96532 invoked by uid 500); 13 Oct 2008 15:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96521 invoked by uid 99); 13 Oct 2008 15:40:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 08:40:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 15:39:25 +0000
X-IronPort-AV: E=Sophos;i="4.33,403,1220223600"; 
   d="scan'208";a="95754792"
Received: from exbe1.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 13 Oct 2008 16:38:59 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 16:38:57 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 16:38:57 +0100
Message-ID: <48F36B92.2010506@deri.org>
Date: Mon, 13 Oct 2008 16:38:58 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Modification of positional information encoding
References: <48F352D6.6030407@deri.org> <DBD1DD04-E974-4FF6-B41C-C3462554D0CB@mikemccandless.com>
In-Reply-To: <DBD1DD04-E974-4FF6-B41C-C3462554D0CB@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Oct 2008 15:38:57.0188 (UTC) FILETIME=[CE2FEE40:01C92D49]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Michael McCandless wrote:
> This looks right, though you would also need to modify SegmentMerger 
> to read & write your new format when merging segments.
>
> Another thing you could do is grep for "omitTf" which should touch 
> exactly the same places you need to touch.
Ok, thanks for the pointers. I will examine this part of the Lucene code.
>
> It'd be awesome to get to the point where this read & write logic is 
> captured in a single "codec" that's cleanly shared in all these places 
> ("flexible indexing") but we are not quit there yet...
Yes, it will be really handy in order to experiment alternative inverted 
index structures. At the moment, it requires quite some work, and 
reverse engineering, in order to be able to modify the index structure.
>> Another question, since the lucene core classes are kind of close, 
>> what is the best way to implement these modifications ? Make a branch 
>> of lucene, and add my new classes to the lucene package 
>> org.apache.lucene.index ? Or do a more elegant solution is possible ?
>
> For starters (to try things out) I would just make local modifications 
> with a lucene source checkout (via svn).
>
> Also, this issue was just opened:
>
>   https://issues.apache.org/jira/browse/LUCENE-1419
>
> which would make it possible for classes in the same package 
> (oal.index) to use their own indexing chain.  With that fix, if you 
> make your own classes in oal.index package, and perhaps subclass the 
> above classes, you could then create your own indexing chain for 
> indexing?  If you take that approach, please report back so we can 
> learn how to improve Lucene for these very advanced customizations!
Ok, thanks for the reference. I will try this solution, and will report 
you any problems I will encounter.

Regards.
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 15:48:06 2008
Return-Path: <java-user-return-36581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47642 invoked from network); 13 Oct 2008 15:48:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 15:48:05 -0000
Received: (qmail 9362 invoked by uid 500); 13 Oct 2008 15:47:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9327 invoked by uid 500); 13 Oct 2008 15:47:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9316 invoked by uid 99); 13 Oct 2008 15:47:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 08:47:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 15:46:53 +0000
X-IronPort-AV: E=Sophos;i="4.33,404,1220223600"; 
   d="scan'208";a="95756244"
Received: from exbe1.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 13 Oct 2008 16:46:30 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 16:46:27 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 16:46:27 +0100
Message-ID: <48F36D54.30206@deri.org>
Date: Mon, 13 Oct 2008 16:46:28 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting posting lists before intersection
References: <48D10726.4010504@getopt.org> <48F3597B.9080302@deri.org> <48F36276.9020603@getopt.org>
In-Reply-To: <48F36276.9020603@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Oct 2008 15:46:27.0301 (UTC) FILETIME=[DA79B950:01C92D4A]
X-Virus-Checked: Checked by ClamAV on apache.org

Andrzej Bialecki wrote:
> Renaud Delbru wrote:
>> Hi Andrzej,
>>
>> sorry for the late reply.
>>
>> I have looked at the code. As far as I understand, you sort the 
>> posting lists based on the first doc skip. The first posting list 
>> will be the one who have the first biggest document skip.
>> Do the sparseness of posting lists is a good predictor for sampling 
>> and ordering posting lists ? Do you know evaluation of such technique ?
>
> It is _some_ predictor ... :) whether it's a good one is another 
> question. It's certainly very inexpensive - we don't do any additional 
> IO except what we have to do anyway, which is scorer.skipTo().
>
> In general case it's costly to calculate the frequency (or sparseness) 
> of matches in a scorer without actually running the scorer through all 
> its matches.
You can estimate the frequency for some scorers, such as 
ConjunctiveScorer, DisjunctiveScorer, etc., as Paul Eschot explained in 
the other reply.
> Answering your question: docFreq call uses TermInfo information, which 
> uses a small RAM cache. If you're lucky then it won't cause any IO, 
> otherwise it needs to read this info from the .ti file.
Thanks for the clarification.
If we assume that a query will be composed of few terms, this will 
require, in the worst case, one IO access per term. I think the cost of 
the additional IO access can be balanced by the better prediction that 
gives the frequency. This is something to benchmark / evaluate.

Regards
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 15:53:01 2008
Return-Path: <java-user-return-36582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49310 invoked from network); 13 Oct 2008 15:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 15:53:01 -0000
Received: (qmail 15456 invoked by uid 500); 13 Oct 2008 15:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15420 invoked by uid 500); 13 Oct 2008 15:52:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15409 invoked by uid 99); 13 Oct 2008 15:52:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 08:52:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 15:51:48 +0000
X-IronPort-AV: E=Sophos;i="4.33,404,1220223600"; 
   d="scan'208";a="95758128"
Received: from exbe1.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 13 Oct 2008 16:52:25 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 16:52:23 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Oct 2008 16:52:23 +0100
Message-ID: <48F36EB8.2030805@deri.org>
Date: Mon, 13 Oct 2008 16:52:24 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting posting lists before intersection
References: <48D10726.4010504@getopt.org> <48F3597B.9080302@deri.org> <48F36276.9020603@getopt.org> <200810131721.06919.paul.elschot@xs4all.nl>
In-Reply-To: <200810131721.06919.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Oct 2008 15:52:23.0245 (UTC) FILETIME=[AEA277D0:01C92D4B]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Paul Elschot wrote:
> This could be done, but since not all scorers will be TermScorers it
> will be necessary to add a method to Scorer (or perhaps even to its
> DocIdSetIterator superclass):
>
>    public abstract int estimatedDocFreq();
>
> and implement this for all existing instances. TermScorer could
> implement it without estimating.
> For AND/OR/NOT such an estimation is straightforward but for
> proximity queries it would be more of a guess.
>   
I agree. Indeed, for proximity queries, it is more tricky. Maybe taking 
the frequency of the rarest term in a PhraseQuery / SpanQuery could be a 
not so bad predictor in general.

Regards.
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 17:09:09 2008
Return-Path: <java-user-return-36583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84059 invoked from network); 13 Oct 2008 17:09:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 17:09:09 -0000
Received: (qmail 59159 invoked by uid 500); 13 Oct 2008 17:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58785 invoked by uid 500); 13 Oct 2008 17:09:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58774 invoked by uid 99); 13 Oct 2008 17:09:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 10:09:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 17:07:58 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: highlighter / fragmenter performance for large fields
Date: Mon, 13 Oct 2008 13:08:27 -0400
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA567453F4@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: highlighter / fragmenter performance for large fields
Thread-Index: AcktS8UjbnxsodLQTsuCkBejc/cCGgAB9LHA
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

We index some documents which have an "all" field containing all of the
data which can be searched on.

One of the problems we're having is when this field is say 10Mbytes the
highlighter takes about a second to calculate the best fragments. The
search only takes 30 milliseconds. I've accomodated the load time for
the text which is about 5-10X faster in general, so 0.1-0.2 seconds for
loading text from the document, and the other 0.8-0.9 performing
highlighting.

I've over-ridden the maxDocBytesToAnalyze so it will analyze the entire
field of the document. At least at the moment we need to try and match
the entire document.

I've also tried using a SimpleAnalyzer when the highlighting is
performed, but this doesn't seem to affect performance much.

Also, I've modified the QueryScorer so it can do wildcard term matches
without extracting the terms from the index (Because we're using a
ConstantScoreQuery which doesn't let highlighting work to get around the
MaxBooleanClauses exception). Basically if the term doesn't match in the
highlighter, then it will try to pattern match against the wildcard
search terms, so there's some more processing there, but disabling it
doesn't seem to affect the performance that much.

One other thing was just doing a simple regex search without using a
scorer or analyzer. This runs about 2x faster, but still is relatively
slow.

Has anyone had any good experience with performing fragmentation and
highlighting for larger documents?

Thanks,

Brian Beard


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 17:33:39 2008
Return-Path: <java-user-return-36584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99762 invoked from network); 13 Oct 2008 17:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 17:33:39 -0000
Received: (qmail 92938 invoked by uid 500); 13 Oct 2008 17:33:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92913 invoked by uid 500); 13 Oct 2008 17:33:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92902 invoked by uid 99); 13 Oct 2008 17:33:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 10:33:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of keltoi@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Oct 2008 17:32:26 +0000
Received: (qmail 20292 invoked by uid 0); 13 Oct 2008 17:33:01 -0000
Received: from 195.234.136.12 by www046.gmx.net with HTTP;
 Mon, 13 Oct 2008 19:33:01 +0200 (CEST)
Content-Type: text/plain; charset="iso-8859-1"
Date: Mon, 13 Oct 2008 19:33:01 +0200
From: "Thomas Birnbaum" <keltoi@gmx.net>
Message-ID: <20081013173301.26080@gmx.net>
MIME-Version: 1.0
Subject: is there an histogram feature in lucene ak Magelan
To: java-user@lucene.apache.org
X-Authenticated: #368715
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX19rCZVyUKhrJeSUSeeUrCE8tOIip0Hbbgvh2N+BtG
 xV7ONV7GJvnHdFsACzCAhelcJW0n5eAhqi3Q== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: f7/AcAU+MmA6SSDMbmFn0gk5MjQ1Nx2d
X-FuHaFi: 0.78
X-Virus-Checked: Checked by ClamAV on apache.org

hi...

currently we are using an propetary search engine witch supports a historam.

looks like this...
if i search for audi a4 i get the search results including how mutch red blue or black cars are in the result
result total 400
red 50
blue 50
black 100
green 200

private seller 50
commercial 350

damage unrepaired 30

metallic 60

something like this...

is there a way to do the same with lucene?

thx thomas.
-- 
GMX Kostenlose Spiele: Einfach online spielen und Spa haben mit Pastry Passion!
http://games.entertainment.gmx.net/de/entertainment/games/free/puzzle/6169196

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 18:29:06 2008
Return-Path: <java-user-return-36585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45901 invoked from network); 13 Oct 2008 18:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 18:29:06 -0000
Received: (qmail 72928 invoked by uid 500); 13 Oct 2008 18:28:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72898 invoked by uid 500); 13 Oct 2008 18:28:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72887 invoked by uid 99); 13 Oct 2008 18:28:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 11:28:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists.digitalpebble@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 18:27:51 +0000
Received: by mu-out-0910.google.com with SMTP id i10so1763623mue.5
        for <java-user@lucene.apache.org>; Mon, 13 Oct 2008 11:28:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SbfNXH7/Rkwj3U2VWjhTLoGF5OmizAvU2oF275bSRZY=;
        b=Bwm0rBxh+aPTu+bJ4+rItf3qnHs8mgVTQLg/gBJGSR0Dh1RfO3/fs9yody3E7UhwsM
         ESG/tOWYZ4p2CrOOy7umDrHSZTbx/rQE1kAIgzmpAyVgAnrnKYmJyjElaS5LjA1cnnU9
         Or6lR/a4/CICdtB2ILLXdWBYW8O08j4tW2uP8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pTyUWYnGSjHwl3vXf2xBX5ZlGRkhdVniP7uRi7HXqGlPcvfGYgL9PlRaOZMcF+oZRK
         /GjiKrAP1m1uXrbdfjuD9OdiZUGQadMoL2gRQmKQRGvauUBUWj6ZUHavIs2WgJmNG39u
         R5klw5ivdODZTUXlvPVPRKlkZD5LfU4b8Pnqg=
Received: by 10.181.146.11 with SMTP id y11mr4916806bkn.60.1223922484796;
        Mon, 13 Oct 2008 11:28:04 -0700 (PDT)
Received: by 10.181.15.7 with HTTP; Mon, 13 Oct 2008 11:28:04 -0700 (PDT)
Message-ID: <16d405e0810131128l122f81fbp1e92b139b3d9dbf0@mail.gmail.com>
Date: Mon, 13 Oct 2008 19:28:04 +0100
From: "Julien Nioche" <lists.digitalpebble@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: is there an histogram feature in lucene ak Magelan
In-Reply-To: <20081013173301.26080@gmx.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40375_15196358.1223922484786"
References: <20081013173301.26080@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40375_15196358.1223922484786
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Thomas,

Have a look at SOLR (*lucene.apache.org/solr*). It is based on Lucene and
provides additional functionalities including faceted search.

Best,

Julien

2008/10/13 Thomas Birnbaum <keltoi@gmx.net>

> hi...
>
> currently we are using an propetary search engine witch supports a
> historam.
>
> looks like this...
> if i search for audi a4 i get the search results including how mutch red
> blue or black cars are in the result
> result total 400
> red 50
> blue 50
> black 100
> green 200
>
> private seller 50
> commercial 350
>
> damage unrepaired 30
>
> metallic 60
>
> something like this...
>
> is there a way to do the same with lucene?
>
> thx thomas.
> --
> GMX Kostenlose Spiele: Einfach online spielen und Spa=DF haben mit Pastry
> Passion!
>
> http://games.entertainment.gmx.net/de/entertainment/games/free/puzzle/616=
9196
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
DigitalPebble Ltd
http://www.digitalpebble.com

------=_Part_40375_15196358.1223922484786--

From java-user-return-36586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 18:55:30 2008
Return-Path: <java-user-return-36586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54864 invoked from network); 13 Oct 2008 18:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 18:55:30 -0000
Received: (qmail 1477 invoked by uid 500); 13 Oct 2008 18:55:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1450 invoked by uid 500); 13 Oct 2008 18:55:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1439 invoked by uid 99); 13 Oct 2008 18:55:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 11:55:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 18:54:18 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 10A0471C417; Mon, 13 Oct 2008 11:54:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 0845D71C2C1
	for <java-user@lucene.apache.org>; Mon, 13 Oct 2008 11:54:25 -0700 (PDT)
Date: Mon, 13 Oct 2008 11:54:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Wildcard query ...
In-Reply-To: <BLU149-W648984021ED79C476AE687B93B0@phx.gbl>
Message-ID: <Pine.LNX.4.62.0810131145090.8047@radix.cryptio.net>
References: <BLU149-W648984021ED79C476AE687B93B0@phx.gbl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


BooleanQuery picks a Scorer based on the number of clauses and what their 
options are ... all of teh scorers it might pick from are smart enough to 
continuously reorder the clauses having them "skip ahead" to the next 
document they match, beyond whatever docIds it already knows can't match 
(based on the skipping of the other clauses.

so it really doesn't amtter what order hte clauses appear in, it will 
optimize away as much work as it can.

while *order* of clauses doesn't matter, *structure* of clauses can -- 
beyond just having subtle scoring differneces, these two queries...

   +(+A:X +B:Z) +(+C:Y +D:Z)
   +(+C:Y +B:Z) +(+A:X +D:Z)

...could have radically differnet performance characteristics, because the 
"skipping" happens at each level of the BooleanQuery hierarchy.  if 
only one doc matches (+A:X +B:Z) then lots of skipping will happen in that 
first query with only a few matches actually being tested for the other 
clauses and the query as a whole -- but if lots of docs match (+C:Y +B:Z) 
and lots of *other* docs match (+A:X +D:Z) the subqueries won't ever skip 
very far.

The other factor to keep in mind is the wildcard expansion ... Honda* will 
be expanded into all terms that start with Honda in that field before 
anything ever looks at what docs match any clauses of your query -- even 
if only one doc matches Type:0  ... which is why index partitioning can 
make sense in some situations like this.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 18:57:01 2008
Return-Path: <java-user-return-36587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55272 invoked from network); 13 Oct 2008 18:57:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 18:57:00 -0000
Received: (qmail 4665 invoked by uid 500); 13 Oct 2008 18:56:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4276 invoked by uid 500); 13 Oct 2008 18:56:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4265 invoked by uid 99); 13 Oct 2008 18:56:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 11:56:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 18:55:50 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 9C3AD71C417; Mon, 13 Oct 2008 11:56:27 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 97DB471C385
	for <java-user@lucene.apache.org>; Mon, 13 Oct 2008 11:56:27 -0700 (PDT)
Date: Mon, 13 Oct 2008 11:56:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: custom tag scoring question
In-Reply-To: <36B4EF9511887240A973A93E7878B0560A0E3DECC6@US1-IIEX1.IICORP.DOM>
Message-ID: <Pine.LNX.4.62.0810131155020.8047@radix.cryptio.net>
References: <36B4EF9511887240A973A93E7878B0560A0E3DECC6@US1-IIEX1.IICORP.DOM>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


You'll probably want to take a look at using Payloads and 
BoostingTermQuery ... i believe the combination of the two will solve your 
problem perfectly -- just set the payload to be the "relevancy" value for 
your entity.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 21:39:26 2008
Return-Path: <java-user-return-36588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29427 invoked from network); 13 Oct 2008 21:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 21:39:26 -0000
Received: (qmail 77298 invoked by uid 500); 13 Oct 2008 21:39:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77265 invoked by uid 500); 13 Oct 2008 21:39:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77254 invoked by uid 99); 13 Oct 2008 21:39:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 14:39:19 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 21:38:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KpV4k-0001gA-Pt
	for java-user@lucene.apache.org; Mon, 13 Oct 2008 14:35:38 -0700
Message-ID: <19963381.post@talk.nabble.com>
Date: Mon, 13 Oct 2008 14:35:38 -0700 (PDT)
From: lekamm <camille.blardone@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search with accent not match
In-Reply-To: <18848522.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: camille.blardone@gmail.com
References: <18848522.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Does this :

http://www.blardone.org/2008/10/12/lucene-query-accented-character/

solve your problem ?

Cheers,

lekamm



Christophe from paris wrote:
>=20
> Hello
>=20
> I'm use FrenchAnalyzer for index=20
>=20
> IndexWriter writer =3D new IndexWriter(pathOfIndex, new FrenchAnalyzer(),
> true);
> Document =3D new Document();
> doc.add(new
> Field("TXT_CHARACT_VALUE",word.toLowerCase(),Field.Store.YES,Field.Index.=
TOKENIZED));
> writer.addDocument(doc);
>=20
> And search
>=20
> IndexReader reader =3D IndexReader.open(pathOfIndex);=09=09=09
> Searcher searcher =3D new IndexSearcher(reader);
> Analyzer analyzer =3D new FrenchAnalyzer();=09=09=09=09=09=09
> QueryParser parser =3D new QueryParser(field, analyzer);=09=09=09=09=09
> Query query =3D parser.parse(motRecherche);
> Hits hits =3D searcher.search(query);
>=20
> in my document i have the word "lumiere" and "lumi=C3=A8re"
>=20
> when i search lumi=C3=A8re only document match lumi=C3=A8re but "lumiere"=
 is not
> return
>=20
> and if search "lumiere" the result is lumiere, lumieres ,lumi=C3=A9re,lum=
i=C3=A9res
> but not lumi=C3=A8re
>=20
> for a total match i must search "lumiere OR limi=C3=A8re"
> but is not the best solution=20
>=20

--=20
View this message in context: http://www.nabble.com/search-with-accent-not-=
match-tp18848522p19963381.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 13 21:55:23 2008
Return-Path: <java-user-return-36589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38222 invoked from network); 13 Oct 2008 21:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Oct 2008 21:55:23 -0000
Received: (qmail 98651 invoked by uid 500); 13 Oct 2008 21:55:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98565 invoked by uid 500); 13 Oct 2008 21:55:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98554 invoked by uid 99); 13 Oct 2008 21:55:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 14:55:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 21:54:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KpVNG-0002RJ-2J
	for java-user@lucene.apache.org; Mon, 13 Oct 2008 14:54:46 -0700
Message-ID: <19963673.post@talk.nabble.com>
Date: Mon, 13 Oct 2008 14:54:46 -0700 (PDT)
From: Ravis <ravish.web@gmail.com>
To: java-user@lucene.apache.org
Subject: Custom Sorting Based on Input Value
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ravish.web@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have a sorting requirement where I need to bubble up documents exactly
matching of particular value passed in sort criteria. 

For example: Hypothetically, Say I am sorting on field A. I want all values
matching value '5' on top and then regular sorting for other values. So I
would like to do something like: sort by: fieldA(5).

Any recommendation how I can achieve this using Lucene.

thanks,
Ravi
-- 
View this message in context: http://www.nabble.com/Custom-Sorting-Based-on-Input-Value-tp19963673p19963673.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 00:44:56 2008
Return-Path: <java-user-return-36590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10437 invoked from network); 14 Oct 2008 00:44:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 00:44:56 -0000
Received: (qmail 65758 invoked by uid 500); 14 Oct 2008 00:44:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65724 invoked by uid 500); 14 Oct 2008 00:44:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65712 invoked by uid 99); 14 Oct 2008 00:44:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 17:44:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 00:43:45 +0000
Received: by gxk6 with SMTP id 6so3691608gxk.5
        for <java-user@lucene.apache.org>; Mon, 13 Oct 2008 17:43:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KAtTLH9OTCalMC9ALE30+fyP0CIZIC5yqXwmS6t4yu0=;
        b=JAN8NT3R0PvhiU3JXp9y70s9qh2e7lp+LKGEY3+hU43A9MNaAz0Mw3bKSHKipBuAJo
         oAwDLPGV0KFowA25JHRqfjxruLOv9kp4ApnJBrg/o0fCb03MeHGfJ8Zrlu4/6kOlBFe9
         mGEhC1McckdlAjx2TjODGH94Z3ctCMpQ2poxs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=usWDw1SbRCXVSTn/KcXyXcIjL1/EwYEftY6v362+MRaL/DSeLnb+fenDpHfbNmTgb0
         KVVW+2L02cYRgztQhSn+EwuqmBylFCWLLrflDLcBTo5+ya9xYaSbrVpIdRD0l5VWphDN
         GfKrXHWsInqy8Re7srGakOd8kiyONJ8/N3+U8=
Received: by 10.151.109.11 with SMTP id l11mr9122284ybm.155.1223945001986;
        Mon, 13 Oct 2008 17:43:21 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Mon, 13 Oct 2008 17:43:21 -0700 (PDT)
Message-ID: <9233ccac0810131743x51fa89hcc4aaacfece64c38@mail.gmail.com>
Date: Tue, 14 Oct 2008 08:43:21 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching sets of documents
In-Reply-To: <1AF02086165F4369B3744AC60B20DAD4@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_114435_26224494.1223945002008"
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04>
	 <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com>
	 <1AF02086165F4369B3744AC60B20DAD4@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_114435_26224494.1223945002008
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBkb24ndCB1bmRlcnN0YW5kIHlvdXIgcHJvYmxlbT8KZG8geW91IGluZGV4IGZpbGUgYnV0IHdh
bnQgdG8gc2VhcmNoIGZvbGRlciB3aGljaCBjb250YWluIHRoZSBmaWxlcz8KCndoZW4geW91IHdh
bnQgdG8gc2VhcmNoIGZvbGRlciwgeW91IGNhbiBpbmRleCBmb2xkZXIsIHRoZSBkYXRhIGlzIGFs
bCBmaWxlcwp1bmRlciBpdC4KCjIwMDgvMTAvMTMgPHNwcmluZ0BnbXguZXU+Cgo+IFRoZSBkb2Nz
IGFyZSBhbHJlYWR5IGluZGV4ZWQuCj4KPiA+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tCj4g
PiBGcm9tOiA/Pz8gW21haWx0bzp5ZXNodWFuZ21pbmdAZ21haWwuY29tXQo+ID4gU2VudDogTW9u
dGFnLCAxMy4gT2t0b2JlciAyMDA4IDAyOjI4Cj4gPiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFj
aGUub3JnCj4gPiBTdWJqZWN0OiBSZTogU2VhcmNoaW5nIHNldHMgb2YgZG9jdW1lbnRzCj4gPgo+
ID4gYWxsIGZvbGRlcnMgd2hpY2ggbWF0Y2ggIkEgQU5EIFkiLCBkbyB5b3Ugc2VhcmNoIGZvciBm
aWxlIG5hbWU/Cj4gPiBJZiB5ZXMsIEEgb3IgWSBpbiAiQSBBTkQgWSIgaXMgYSBTdHJyaW5nIHRv
bywgc28geW91IGNhbiBkbyBpdCBieToKPiA+IGNvbnN0cnVjdCBhIEx1Y2VuZSBEb2N1bWVudCBm
b3IgZWFjaCBmb2xkZXIsIGFuZCBuYW1lIG9mCj4gPiBmaWxlcyB1bmRlciB0aGUKPiA+IGZvbGRl
ciBpcyB0aGUgc2VhcmNoIGRhdGEuCj4gPgo+ID4gMjAwOC8xMC8xMyA8c3ByaW5nQGdteC5ldT4K
PiA+Cj4gPiA+IEhpLAo+ID4gPgo+ID4gPiBJIHdhbnQgdG8gc2VhcmNoIGZvciBzZXRzIG9mIGRv
Y3VtZW50cy4gRm9yIGluc3RhbmNlIEkKPiA+IGluZGV4IHNvbWUgZm9sZGVycwo+ID4gPiB3aXRo
IGRvY3VtZW50cyBpbiBpdCBhbmQgbm93IEkgZG8gbm90IHdhbnQgdG8gZmluZCBjZXJ0YWluCj4g
PiBkb2N1bWVudHMgYnV0Cj4gPiA+IGZvbGRlcnMuCj4gPiA+Cj4gPiA+IFNhbXBsZToKPiA+ID4K
PiA+ID4gZm9sZGVyIEEKPiA+ID4gIGRvYyAxLCBjb250YWlucyBYLCBZCj4gPiA+ICBkb2MgMiwg
Y29udGFpbnMgWSwgWgo+ID4gPgo+ID4gPiBmb2xkZXIgQgo+ID4gPiAgZG9jIDMsIGNvbnRhaW5z
IFgsIFkKPiA+ID4gIGRvYyA0LCBjb250YWlucyBBLCBaCj4gPiA+Cj4gPiA+IE5vdyBJIHdhbnQg
dG8gZmluZCBhbGwgZm9sZGVycyB3aGljaCBtYXRjaCAiQSBBTkQgWSIgLT4gZm9sZGVyIEIuCj4g
PiA+Cj4gPiA+IEhvdyBjYW4gdGhpcyBiZSBkb25lPwo+ID4gPgo+ID4gPiBUaGFuayB5b3UKPiA+
ID4KPiA+ID4KPiA+ID4KPiA+ID4KPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gPiBUbyB1bnN1YnNjcmli
ZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4g
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcKPiA+ID4KPiA+ID4KPiA+Cj4gPgo+ID4gLS0KPiA+IFNvcnJ5IGZvciBteSBFbmds
aXNoISEgPwo+ID4gUGxlYXNlIGhlbHAgbWUgY29ycmVjdCBteSBFbmdsaXNoIGV4cHJlc3Npb24g
YW5kIGVycm9yIGluIHN5bnRheAo+ID4KPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3Jp
YmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9y
IGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNo
ZS5vcmcKPgo+CgoKLS0gClNvcnJ5IGZvciBteSBFbmdsaXNoISEg5piOClBsZWFzZSBoZWxwIG1l
IGNvcnJlY3QgbXkgRW5nbGlzaCBleHByZXNzaW9uIGFuZCBlcnJvciBpbiBzeW50YXgK
------=_Part_114435_26224494.1223945002008--

From java-user-return-36591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 01:16:46 2008
Return-Path: <java-user-return-36591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20802 invoked from network); 14 Oct 2008 01:16:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 01:16:46 -0000
Received: (qmail 85940 invoked by uid 500); 14 Oct 2008 01:16:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85911 invoked by uid 500); 14 Oct 2008 01:16:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85900 invoked by uid 99); 14 Oct 2008 01:16:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 18:16:40 -0700
X-ASF-Spam-Status: No, hits=-3.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of mgarski@myspace.com does not designate 207.46.51.80 as permitted sender)
Received: from [207.46.51.80] (HELO SG2EHSOBE003.bigfish.com) (207.46.51.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 01:15:34 +0000
Received: from mail158-sin-R.bigfish.com (10.3.40.3) by
 SG2EHSOBE003.bigfish.com (10.3.40.23) with Microsoft SMTP Server id
 8.1.240.5; Tue, 14 Oct 2008 01:16:10 +0000
Received: from mail158-sin (localhost.localdomain [127.0.0.1])	by
 mail158-sin-R.bigfish.com (Postfix) with ESMTP id DC75254009A	for
 <java-user@lucene.apache.org>; Tue, 14 Oct 2008 01:16:09 +0000 (UTC)
X-BigFish: VPS-7(zz542N4015M1fa4L936fO9371P10d1I103dKzzzz5a6ciz31n6bh87il61h)
X-Spam-TCS-SCL: 0:0
X-FB-DOMAIN-IP-MATCH: fail
Received: by mail158-sin (MessageSwitch) id 1223946968556515_28073; Tue, 14
 Oct 2008 01:16:08 +0000 (UCT)
Received: from fegplmsmmdz02.foxinc.com (unknown [216.205.229.106])	(using
 TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))	(No client certificate
 requested)	by mail158-sin.bigfish.com (Postfix) with ESMTP id DDAD317D8066
	for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 01:16:07 +0000 (UTC)
Received: from ffeplmsexbh04.ffe.foxeg.com (Not Verified[10.136.96.105]) by
 FOX.COM (post.office MTA v5.0 0924 ) with ESMTP	id <B48f3f2d60001>; Mon, 13
 Oct 2008 18:16:06 -0700
Received: from fegplmsexmb14.ffe.foxeg.com ([10.136.102.19]) by
 ffeplmsexbh04.ffe.foxeg.com with Microsoft SMTPSVC(6.0.3790.2499);	 Mon, 13
 Oct 2008 18:16:05 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Detecting why a collection of documents matched a query
Date: Mon, 13 Oct 2008 18:16:04 -0700
Message-ID: <7112862FD2F84D49927A5A5E0758451E010EDB5E@fegplmsexmb14.ffe.foxeg.com>
In-Reply-To: <6d6cf45b0810121450x363d4556l242d7405337d8bc2@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Detecting why a collection of documents matched a query
Thread-Index: AckstJ9HlAlKt7zVStW+Rw+D17+wyAA44SzQ
References: <6d6cf45b0810121450x363d4556l242d7405337d8bc2@mail.gmail.com>
From: Michael Garski <mgarski@myspace.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Oct 2008 01:16:05.0313 (UTC) FILETIME=[6E287B10:01C92D9A]
X-Virus-Checked: Checked by ClamAV on apache.org

I've seen this question come up a few times on the list in the past with
the potential solutions of:

1. Parsing out the results of the Explain() method
2. Perform a regex on the data post-search to determine which field
contained the match=20
3. Searching each field independently and removing duplicates
post-search

We've been experimenting with performing multiple searches - one search
against all desired fields to find the set of documents that match, then
executing a search against each field independently to determine where
the match took place.  The solution works but has a performance
drawback, especially as the number of fields in the original query grows
larger. =20

It would be nice to have some sort of search option and an overloaded
collector that would collect each hit along with the list of fields the
hit matched on, but that sort of functionality is not present at this
time.  I'm curious if anyone has started any thoughts or work in this
area, as we are about to begin determining what would be involved in
such a change and are comfortable in making (and by extension submitting
to JIRA) the necessary changes to add this feature.

Thanks,

Michael

-----Original Message-----
From: Khawaja Shams [mailto:ksshams@gmail.com]=20
Sent: Sunday, October 12, 2008 2:50 PM
To: java-user@lucene.apache.org
Subject: Detecting why a collection of documents matched a query

Hello,  I noticed that indexSearcher.explain() method is not supposed to
be
run for a large collection of documents, so I am looking for an
alternative
that just explains why a document matched without all the scoring
information. Basically, I would like to know which field of the document
was
responsible for getting it included in the results so I can give users
some
indication of what matched. We present the results 100 documents at a
time.
I would appreciate any ideas or directions towards implementation.


Thanks!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 06:45:17 2008
Return-Path: <java-user-return-36592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58193 invoked from network); 14 Oct 2008 06:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 06:45:17 -0000
Received: (qmail 56298 invoked by uid 500); 14 Oct 2008 06:45:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56272 invoked by uid 500); 14 Oct 2008 06:45:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56261 invoked by uid 99); 14 Oct 2008 06:45:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Oct 2008 23:45:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of massart.david@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 06:44:04 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1975441rvb.5
        for <java-user@lucene.apache.org>; Mon, 13 Oct 2008 23:44:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:x-google-sender-auth;
        bh=WOD1uauwpBIph3lpTQfKc11tmRPS7T/MUWkqHgh8kWg=;
        b=jHyPsI3z4spiwmNV4uMfeLAzf9B1V9i/WQoREg0EmjzvxIruZ3VLJIHYpz5Ixw23l3
         Ah+FwNhn95eznrLSOGEQ/ZEkneNAsTu0bvo06kXNZ2pzF5TEB3RphQOynEETDrgIQ+sT
         PzStwL9uu1hYOdVLOjJR6IVnIFFYFhp/SP1WM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :x-google-sender-auth;
        b=Yvz/e3osu8pmiijW+7awaDzbBIh/WPsXL4twmVQdeghhlW0ZGEi1uVAF8NO4DvCjyo
         u9Raz90m7V8vz+lCJsD60k7Z+OFbL+e05vtLIUx58l3PrVtjj6RcU3c8EfDdXcOdUWbX
         JX3IKi0nP4XpZnCWzcq9ADS+eiELfRbiBbZDs=
Received: by 10.140.136.5 with SMTP id j5mr4567117rvd.27.1223966679936;
        Mon, 13 Oct 2008 23:44:39 -0700 (PDT)
Received: by 10.140.177.18 with HTTP; Mon, 13 Oct 2008 23:44:39 -0700 (PDT)
Message-ID: <7b74fa660810132344o6e5f5751hb9fea14701309625@mail.gmail.com>
Date: Tue, 14 Oct 2008 08:44:39 +0200
From: "David Massart" <dmassart@acm.org>
Sender: massart.david@gmail.com
To: java-user@lucene.apache.org
Subject: querying without hits
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1591_10606583.1223966679908"
X-Google-Sender-Auth: 08e25fc5a57f4325
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1591_10606583.1223966679908
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all,
Could one of you point me to an example of code for querying without using
the deprecated class Hits ?

Thank you,

David

------=_Part_1591_10606583.1223966679908--

From java-user-return-36593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 07:27:03 2008
Return-Path: <java-user-return-36593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70780 invoked from network); 14 Oct 2008 07:27:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 07:27:03 -0000
Received: (qmail 93344 invoked by uid 500); 14 Oct 2008 07:26:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92681 invoked by uid 500); 14 Oct 2008 07:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92670 invoked by uid 99); 14 Oct 2008 07:26:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 00:26:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.105.6.20] (HELO sabe.cs.wisc.edu) (128.105.6.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 07:25:51 +0000
Received: from [192.168.1.3] (75-133-87-229.dhcp.mdsn.wi.charter.com [75.133.87.229])
	(authenticated bits=0)
	by sabe.cs.wisc.edu (8.14.1/8.14.1) with ESMTP id m9E7NIBf005091
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 02:23:19 -0500
Message-ID: <48F448E5.70902@cs.wisc.edu>
Date: Tue, 14 Oct 2008 02:23:17 -0500
From: Akanksha Baid <baid@cs.wisc.edu>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: distinct field values
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have indexed multiple documents - each of them have 3 fields ( id, tag 
, text). Is there an easy way to determine the set of tags for a given 
query without iterating through all the hits?
For example if I have 100 documents in my index and my set of tag = {A, 
B, C}. Query Q on the text field returns 15 docs with tag A , 10 with 
tag B and none with tag C (total of 25 hits). Is there a way to 
determine that the set of tags for query Q = {A, B} without iterating 
through all 25 hits.

Any ideas?

Thanks!
Akanksha


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 07:30:56 2008
Return-Path: <java-user-return-36594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72104 invoked from network); 14 Oct 2008 07:30:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 07:30:56 -0000
Received: (qmail 96822 invoked by uid 500); 14 Oct 2008 07:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96784 invoked by uid 500); 14 Oct 2008 07:30:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96772 invoked by uid 99); 14 Oct 2008 07:30:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 00:30:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.50] (HELO n66.bullet.mail.sp1.yahoo.com) (98.136.44.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Oct 2008 07:29:42 +0000
Received: from [216.252.122.219] by n66.bullet.mail.sp1.yahoo.com with NNFMP; 14 Oct 2008 07:30:19 -0000
Received: from [69.147.65.169] by t4.bullet.sp1.yahoo.com with NNFMP; 14 Oct 2008 07:30:19 -0000
Received: from [127.0.0.1] by omp504.mail.sp1.yahoo.com with NNFMP; 14 Oct 2008 07:30:19 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 226280.91981.bm@omp504.mail.sp1.yahoo.com
Received: (qmail 22258 invoked by uid 60001); 14 Oct 2008 07:30:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=rZAny1WikZ89JJ2Ch+PO4kR2ZvrNC7uN8Uu3B/1kOEPt4MUaAfsLZzJ2bQtzcWjVj98wtBYqZVBZ/zJ0UOgcw9J8NDELmSB8g3M0cJSvDXhV8C5ECTrDRacjHS/jq1OZlHlGB/8DwsB05JLmORI13fulkpPfiw++FOTzjDvpnoI=;
X-YMail-OSG: USASpwQVM1nwnS9kvcvp031uK_SaFRfsMwXIppY_lpuqSwPMCW5xtcQYm.WmzQoI4PO5CL_fsgdtrv2ZQxPRPeLLpWI6ER4kxhYWEUxnFaYq.eaqF5R9LvzXfnByybBf.mc0n.8uDbnsevasVYOwmS081PJjjh1VxBFy9fs-
Received: from [64.142.36.76] by web43140.mail.sp1.yahoo.com via HTTP; Tue, 14 Oct 2008 00:30:18 PDT
X-Mailer: YahooMailRC/1155.11 YahooMailWebService/0.7.247.3
Date: Tue, 14 Oct 2008 00:30:18 -0700 (PDT)
From: Michael Bell <mikebell90@yahoo.com>
Subject: LUCENE-1282 worked around in Lucene 2.4?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <965332.22230.qm@web43140.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

this is the issue with Java 6's server VM.

Yes I know it's fixed in Sun's beta update to Java 1.6, but did the workaround get committed to 2.4? It is not documented in the CHANGELOG.

Thanks



      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 07:55:37 2008
Return-Path: <java-user-return-36595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84788 invoked from network); 14 Oct 2008 07:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 07:55:37 -0000
Received: (qmail 42193 invoked by uid 500); 14 Oct 2008 07:55:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42156 invoked by uid 500); 14 Oct 2008 07:55:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42145 invoked by uid 99); 14 Oct 2008 07:55:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 00:55:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 07:54:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1998143rvb.5
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 00:54:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=qRNXX22hwuvm+Rxm5u94UrROMaJI4PMunm8gLZPVCRU=;
        b=Cp6abNiOAZtAI3kP5rVMlgnkup/NZ74YaD9r24o+EUnVLsVhV2lPTCJHDA/aXTCQv+
         6l2MV+t5Fxlr6LS6xf8f+bjc+c8/4QBdE94+c7OjreVeP1RKHxr+Z5pbQFF0+Xk6tWGk
         fhUtp1MyDUru8A0iarj/vXXZEjhfvIMicZy7c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Te57HJOAV6flJpz8pyj4igKnbUm2TrKcgcjFcBCAheEmfxqtohxEKgWdOcyYKtRyVr
         0UPrS5VulSRYfzl01dpp/tq+L4Q+DCaj8CWrRV+udM/jprnjFCS6Bwe1gRe+neLk84kI
         cX3BbmFzQSCGYYPUU/Wd40F5DUGKGplyL2bNI=
Received: by 10.142.237.19 with SMTP id k19mr3181027wfh.295.1223970892610;
        Tue, 14 Oct 2008 00:54:52 -0700 (PDT)
Received: by 10.142.49.5 with HTTP; Tue, 14 Oct 2008 00:54:52 -0700 (PDT)
Message-ID: <867513fe0810140054l6be2bcdcoe1592cd2864816f2@mail.gmail.com>
Date: Tue, 14 Oct 2008 13:24:52 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: distinct field values
In-Reply-To: <48F448E5.70902@cs.wisc.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1034_19166809.1223970892598"
References: <48F448E5.70902@cs.wisc.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1034_19166809.1223970892598
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

You could try changing (or extending) TopFieldDocCollector and do your
processing there (that is what I tried... and it worked fine). But that
would mean changing lucene code a little bit.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Tue, Oct 14, 2008 at 12:53 PM, Akanksha Baid <baid@cs.wisc.edu> wrote:

> I have indexed multiple documents - each of them have 3 fields ( id, tag ,
> text). Is there an easy way to determine the set of tags for a given query
> without iterating through all the hits?
> For example if I have 100 documents in my index and my set of tag = {A, B,
> C}. Query Q on the text field returns 15 docs with tag A , 10 with tag B and
> none with tag C (total of 25 hits). Is there a way to determine that the set
> of tags for query Q = {A, B} without iterating through all 25 hits.
>
> Any ideas?
>
> Thanks!
> Akanksha
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1034_19166809.1223970892598--

From java-user-return-36596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 08:35:59 2008
Return-Path: <java-user-return-36596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96923 invoked from network); 14 Oct 2008 08:35:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 08:35:58 -0000
Received: (qmail 93425 invoked by uid 500); 14 Oct 2008 08:35:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93399 invoked by uid 500); 14 Oct 2008 08:35:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93388 invoked by uid 99); 14 Oct 2008 08:35:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 01:35:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of reethahari@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 08:34:46 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2011561rvb.5
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 01:35:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=d0xfnH6wmCH049r280sdBqfcLSod+BEVHsHuXfjzlFs=;
        b=aKp/RzWxyIqMRwbJCEUeOhjoRgzVkJJMtl8HFa8coHLTwhvaFpbfyQ9sQWF8ilm/ue
         SxJ11u4d4VfNPeEQnCV+zLJ14K/YNVOpU99uPgNHi3gveRTD483a1M1+phL20gjqzXJ8
         XWzDKb0/bXChaX3zyW0pFTqFNMv1QJTO7XCWs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=sXrWlVG6Y7x4swAWshoSVIT/c16Ho7mdICUEl1JFsJHZYTwovdEMJUKAkRDoeTp+vX
         BEe0rPFu6KtP+SXnbcaVmwnM9OdPtYbM9+zKiSFOyDEExwOLsu6YhTCrrQkqQruAan9q
         qOCUMCjBKGXnZmAyMcBJcFV6NNod10VoQWXt8=
Received: by 10.141.128.9 with SMTP id f9mr3751476rvn.8.1223973323448;
        Tue, 14 Oct 2008 01:35:23 -0700 (PDT)
Received: by 10.141.22.6 with HTTP; Tue, 14 Oct 2008 01:35:23 -0700 (PDT)
Message-ID: <6e153e3c0810140135xdecf1fj3490108f51c0bc37@mail.gmail.com>
Date: Tue, 14 Oct 2008 01:35:23 -0700
From: "Reetha Hariharan" <reethahari@gmail.com>
To: java-user@lucene.apache.org
Subject: Newbie Question - Lucene Sorting NOT Ignoring NULL values
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4543_4586594.1223973323429"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4543_4586594.1223973323429
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am a newbie.

I just configured lucene using hibernate search. But I find that the sorting
doesn't ignore null values.

I am searching using one field, say X and want to sort the results using
another, say Y (Which can have null values). But I am expecting Sort to
ignore all the null values and just sort only records that has values in Y
field.

How can I achieve this. Is there anywhere I can set the flag in SortField
that specifies it to ignore all the null values ?

Please help.

Thanks
Reetha.

------=_Part_4543_4586594.1223973323429--

From java-user-return-36597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 08:42:02 2008
Return-Path: <java-user-return-36597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97796 invoked from network); 14 Oct 2008 08:42:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 08:42:02 -0000
Received: (qmail 562 invoked by uid 500); 14 Oct 2008 08:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 521 invoked by uid 500); 14 Oct 2008 08:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 510 invoked by uid 99); 14 Oct 2008 08:41:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 01:41:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.106.58] (HELO smtp147.mail.mud.yahoo.com) (209.191.106.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Oct 2008 08:40:47 +0000
Received: (qmail 28683 invoked from network); 14 Oct 2008 08:41:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=Th4LaWd5QjCNowPpg9Yc5YnyJB9ZRonvm88LUFBkFn55yc7MyHxI/CcjA3Jg6LpF8gXTSd/gAH9NQ3k4l8e55xQ/Ew7cA6Ja01rWCiNWd12E9gZym/C30zuNj6d+VkeRVHB7Slkzs4nM62FCzRBMvCSAKUgRmatSXwizhYGBmlk=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp147.mail.mud.yahoo.com with SMTP; 14 Oct 2008 08:41:20 -0000
X-YMail-OSG: axnCc8sVM1lDDaH9n8l78lWxRmMdt9fcE4swqXmvTJ13MWXTkPss8sBw5jUMYyY1rfKgGIsrww9.SzEkM6KunYWk6g5B8i5wUBGhe.IZZKAtbngS5eWs3YTTIFfFKDn3qFFW2HHpeKhGFw7dYJEutlIHVpmUKmSpwj1TD87btMVybNXXBkuNG4hMieHFZwpZrzXPkrt8d0e1g59O
X-Yahoo-Newman-Property: ymail-3
Message-ID: <00ca01c92dd8$a2745a90$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04> <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com> <1AF02086165F4369B3744AC60B20DAD4@msrvcn04> <9233ccac0810131743x51fa89hcc4aaacfece64c38@mail.gmail.com>
Subject: Re: Searching sets of documents
Date: Tue, 14 Oct 2008 14:11:09 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

You should have stored the foldername or fullpath of the file as part of 
Lucene document otherwise it is difficult to retrieve.

Regards
Ganesh

----- Original Message ----- 
From: "" <yeshuangming@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, October 14, 2008 6:13 AM
Subject: Re: Searching sets of documents


>I don't understand your problem?
> do you index file but want to search folder which contain the files?
>
> when you want to search folder, you can index folder, the data is all 
> files
> under it.
>
> 2008/10/13 <spring@gmx.eu>
>
>> The docs are already indexed.
>>
>> > -----Original Message-----
>> > From: ??? [mailto:yeshuangming@gmail.com]
>> > Sent: Montag, 13. Oktober 2008 02:28
>> > To: java-user@lucene.apache.org
>> > Subject: Re: Searching sets of documents
>> >
>> > all folders which match "A AND Y", do you search for file name?
>> > If yes, A or Y in "A AND Y" is a Strring too, so you can do it by:
>> > construct a Lucene Document for each folder, and name of
>> > files under the
>> > folder is the search data.
>> >
>> > 2008/10/13 <spring@gmx.eu>
>> >
>> > > Hi,
>> > >
>> > > I want to search for sets of documents. For instance I
>> > index some folders
>> > > with documents in it and now I do not want to find certain
>> > documents but
>> > > folders.
>> > >
>> > > Sample:
>> > >
>> > > folder A
>> > >  doc 1, contains X, Y
>> > >  doc 2, contains Y, Z
>> > >
>> > > folder B
>> > >  doc 3, contains X, Y
>> > >  doc 4, contains A, Z
>> > >
>> > > Now I want to find all folders which match "A AND Y" -> folder B.
>> > >
>> > > How can this be done?
>> > >
>> > > Thank you
>> > >
>> > >
>> > >
>> > >
>> > ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> >
>> > --
>> > Sorry for my English!! ?
>> > Please help me correct my English expression and error in syntax
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Sorry for my English!! 
> Please help me correct my English expression and error in syntax
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 08:52:36 2008
Return-Path: <java-user-return-36598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1774 invoked from network); 14 Oct 2008 08:52:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 08:52:36 -0000
Received: (qmail 17749 invoked by uid 500); 14 Oct 2008 08:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17722 invoked by uid 500); 14 Oct 2008 08:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17708 invoked by uid 99); 14 Oct 2008 08:52:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 01:52:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.219] (HELO smtp109.mail.mud.yahoo.com) (209.191.85.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Oct 2008 08:51:14 +0000
Received: (qmail 77553 invoked from network); 14 Oct 2008 08:50:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=dISTuzh6wJZoozIr5031gHFql20ov8GKiWM64UKMLYBncUoBfDhZjnKaBjEKD0jn6UV68ODvOqMS5hRi3lxIrFJOlOd7ESgYuyJPYPe+gnDKV+PfEg8I+XYbdmNomeXATM9VXqn3gVqd5wOGll4cIwhDtDS3M1FKJ5z7AMGiiAE=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp109.mail.mud.yahoo.com with SMTP; 14 Oct 2008 08:50:48 -0000
X-YMail-OSG: 7cvELIoVM1kqxtTkEDuIaAeNG3r6UVidE2_wjvwAubL3_FILEutaAGqxROrge8MoTCSulUCMi8mu_PiE4zEUHccbEGbPJu2VHedWTh8IWvLYrXFI3S34Q3EI7zvZ0_7_3DrRJ3TRpiNrzM4RbPS.j6i6x3AHhjaE6ZV9dhnSp4DUJIxO1G_WdIChsmHk
X-Yahoo-Newman-Property: ymail-3
Message-ID: <00e401c92dd9$f4f91ed0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <7b74fa660810132344o6e5f5751hb9fea14701309625@mail.gmail.com>
Subject: Re: querying without hits
Date: Tue, 14 Oct 2008 14:20:43 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello David,

Use TopDocs or TopFieldDocs to collect only required hits.

----
TopDocs topDocs  = searcher.search(query,10)
int docID = topDocs.scoreDocs[index].doc;
Document doc = searcher.doc(docID);
----

Regards
Ganesh


----- Original Message ----- 
From: "David Massart" <dmassart@acm.org>
To: <java-user@lucene.apache.org>
Sent: Tuesday, October 14, 2008 12:14 PM
Subject: querying without hits


> Dear all,
> Could one of you point me to an example of code for querying without using
> the deprecated class Hits ?
>
> Thank you,
>
> David
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 09:03:19 2008
Return-Path: <java-user-return-36599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4738 invoked from network); 14 Oct 2008 09:03:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 09:03:19 -0000
Received: (qmail 30650 invoked by uid 500); 14 Oct 2008 09:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30615 invoked by uid 500); 14 Oct 2008 09:03:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30604 invoked by uid 99); 14 Oct 2008 09:03:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 02:03:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 09:02:07 +0000
Received: by yw-out-2324.google.com with SMTP id 3so464314ywj.5
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 02:02:41 -0700 (PDT)
Received: by 10.150.230.15 with SMTP id c15mr9835224ybh.28.1223974961450;
        Tue, 14 Oct 2008 02:02:41 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 58sm10677683rnw.7.2008.10.14.02.02.39
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 14 Oct 2008 02:02:40 -0700 (PDT)
Message-Id: <1568115C-9FC8-4B92-ACE4-653147A68799@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <965332.22230.qm@web43140.mail.sp1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: LUCENE-1282 worked around in Lucene 2.4?
Date: Tue, 14 Oct 2008 05:02:37 -0400
References: <965332.22230.qm@web43140.mail.sp1.yahoo.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


2.4.0 does have the workaround for that JRE bug.

Mike

Michael Bell wrote:

> this is the issue with Java 6's server VM.
>
> Yes I know it's fixed in Sun's beta update to Java 1.6, but did the  
> workaround get committed to 2.4? It is not documented in the  
> CHANGELOG.
>
> Thanks
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 09:12:30 2008
Return-Path: <java-user-return-36600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6998 invoked from network); 14 Oct 2008 09:12:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 09:12:30 -0000
Received: (qmail 39402 invoked by uid 500); 14 Oct 2008 09:12:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39372 invoked by uid 500); 14 Oct 2008 09:12:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39357 invoked by uid 99); 14 Oct 2008 09:12:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 02:12:25 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 09:11:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KpfwX-0000sU-WC
	for java-user@lucene.apache.org; Tue, 14 Oct 2008 02:11:54 -0700
Message-ID: <19969684.post@talk.nabble.com>
Date: Tue, 14 Oct 2008 02:11:53 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: RE: Searching sets of documents
In-Reply-To: <1AF02086165F4369B3744AC60B20DAD4@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04> <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com> <1AF02086165F4369B3744AC60B20DAD4@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi spring,
unit of retrieval in lucene is a document.
There are no joins between document sets like in sql.

What you can do is to collect all hits for each term query on level of
folders and than implement the logical =E2=80=9Eand=E2=80=9C or =E2=80=9Eor=
=E2=80=9C by your own.
For this you could reuse the existing implementations of =E2=80=9Efaceted b=
rowsing=E2=80=9C
or =E2=80=9Edrill down=E2=80=9C.

Best regards=20
  Karsten



spgmx wrote:
>=20
> The docs are already indexed.=20
>=20

--=20
View this message in context: http://www.nabble.com/Searching-sets-of-docum=
ents-tp19944220p19969684.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 09:12:49 2008
Return-Path: <java-user-return-36601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7214 invoked from network); 14 Oct 2008 09:12:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 09:12:48 -0000
Received: (qmail 42586 invoked by uid 500); 14 Oct 2008 09:12:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42550 invoked by uid 500); 14 Oct 2008 09:12:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42539 invoked by uid 99); 14 Oct 2008 09:12:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 02:12:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Oct 2008 09:11:35 +0000
Received: (qmail 5103 invoked by uid 0); 14 Oct 2008 09:11:09 -0000
Received: from 193.111.217.134 by www153.gmx.net with HTTP;
 Tue, 14 Oct 2008 11:11:09 +0200 (CEST)
Content-Type: text/plain; charset="utf-8"
Date: Tue, 14 Oct 2008 11:11:09 +0200
From: spring@gmx.eu
In-Reply-To: <00ca01c92dd8$a2745a90$330bc30a@sv.us.sonicwall.com>
Message-ID: <20081014091109.3180@gmx.net>
MIME-Version: 1.0
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04>
 <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com>
 <1AF02086165F4369B3744AC60B20DAD4@msrvcn04>
 <9233ccac0810131743x51fa89hcc4aaacfece64c38@mail.gmail.com>
 <00ca01c92dd8$a2745a90$330bc30a@sv.us.sonicwall.com>
Subject: Re: Searching sets of documents
To: java-user@lucene.apache.org
X-Authenticated: #2635966
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX1/fh1YcsJ3fI8zbb65/pPRf8NQkiirjI53225QVQd
 jKDt2aPuGF6LstvRBnV4SHe24RorSBKXvTNw== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: G1fGcAkyPjl+BIsMHjU2hgE7MTE2NQmJ
X-FuHaFi: 0.58
X-Virus-Checked: Checked by ClamAV on apache.org

The folder name and the document name are stored for each document.

-------- Original-Nachricht --------
> Datum: Tue, 14 Oct 2008 14:11:09 +0530
> Von: "Ganesh" <emailgane@yahoo.co.in>
> An: java-user@lucene.apache.org
> Betreff: Re: Searching sets of documents

> You should have stored the foldername or fullpath of the file as part of 
> Lucene document otherwise it is difficult to retrieve.
> 
> Regards
> Ganesh
> 
> ----- Original Message ----- 
> From: "" <yeshuangming@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, October 14, 2008 6:13 AM
> Subject: Re: Searching sets of documents
> 
> 
> >I don't understand your problem?
> > do you index file but want to search folder which contain the files?
> >
> > when you want to search folder, you can index folder, the data is all 
> > files
> > under it.
> >
> > 2008/10/13 <spring@gmx.eu>
> >
> >> The docs are already indexed.
> >>
> >> > -----Original Message-----
> >> > From: ??? [mailto:yeshuangming@gmail.com]
> >> > Sent: Montag, 13. Oktober 2008 02:28
> >> > To: java-user@lucene.apache.org
> >> > Subject: Re: Searching sets of documents
> >> >
> >> > all folders which match "A AND Y", do you search for file name?
> >> > If yes, A or Y in "A AND Y" is a Strring too, so you can do it by:
> >> > construct a Lucene Document for each folder, and name of
> >> > files under the
> >> > folder is the search data.
> >> >
> >> > 2008/10/13 <spring@gmx.eu>
> >> >
> >> > > Hi,
> >> > >
> >> > > I want to search for sets of documents. For instance I
> >> > index some folders
> >> > > with documents in it and now I do not want to find certain
> >> > documents but
> >> > > folders.
> >> > >
> >> > > Sample:
> >> > >
> >> > > folder A
> >> > >  doc 1, contains X, Y
> >> > >  doc 2, contains Y, Z
> >> > >
> >> > > folder B
> >> > >  doc 3, contains X, Y
> >> > >  doc 4, contains A, Z
> >> > >
> >> > > Now I want to find all folders which match "A AND Y" -> folder B.
> >> > >
> >> > > How can this be done?
> >> > >
> >> > > Thank you
> >> > >
> >> > >
> >> > >
> >> > >
> >> > ---------------------------------------------------------------------
> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > >
> >> > >
> >> >
> >> >
> >> > --
> >> > Sorry for my English!! ?
> >> > Please help me correct my English expression and error in syntax
> >> >
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > -- 
> > Sorry for my English!! 
> > Please help me correct my English expression and error in syntax
> > 
> 
> Send instant messages to your online friends http://in.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 11:00:11 2008
Return-Path: <java-user-return-36602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78829 invoked from network); 14 Oct 2008 11:00:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 11:00:11 -0000
Received: (qmail 90260 invoked by uid 500); 14 Oct 2008 11:00:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90217 invoked by uid 500); 14 Oct 2008 11:00:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90206 invoked by uid 99); 14 Oct 2008 11:00:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 04:00:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.120] (HELO smtp137.mail.mud.yahoo.com) (209.191.107.120)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Oct 2008 10:58:52 +0000
Received: (qmail 76584 invoked from network); 14 Oct 2008 10:59:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=gON0hfFyun6LLFSOhTAJ3XcD9raCb7m3CeJRtwVImztc6ZWI/n20u7B3SYcaZBm72QjO3aICne92Ukynd3CYABLoRo86eL4kHH1zFFuNvCaqMlwFiSsFKiSsrxIJ9P+JJtplYwRfifY6xqnJzyZGURLQL4ZSm3y3O4l+vMx6Ofw=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp137.mail.mud.yahoo.com with SMTP; 14 Oct 2008 10:59:27 -0000
X-YMail-OSG: lI9t2_EVM1m9NfFF_EatbjnMwPI0FgtoHmlak4aGB2GuZiNeBS5.G.p1QowB4vxQy2iawO3eFEEYe8PWGqnPt_2kcmyPbFcq7OCVBTr9hdG9KWVfVRb0X5r4iDVX9ES302LSsDE1jpPYBsAD79zDuJ8o
X-Yahoo-Newman-Property: ymail-3
Message-ID: <010101c92deb$e9363c60$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04> <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com> <1AF02086165F4369B3744AC60B20DAD4@msrvcn04> <9233ccac0810131743x51fa89hcc4aaacfece64c38@mail.gmail.com> <00ca01c92dd8$a2745a90$330bc30a@sv.us.sonicwall.com> <20081014091109.3180@gmx.net>
Subject: Re: Searching sets of documents
Date: Tue, 14 Oct 2008 16:29:15 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

What is your problem?

If the foldernames are already stored then it could be retrieved from 
search. Use DuplicateFilter on field "foldername" to get the unique list of 
folders.
Hope this helps.

Regards
Ganesh


----- Original Message ----- 
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Sent: Tuesday, October 14, 2008 2:41 PM
Subject: Re: Searching sets of documents


> The folder name and the document name are stored for each document.
>
> -------- Original-Nachricht --------
>> Datum: Tue, 14 Oct 2008 14:11:09 +0530
>> Von: "Ganesh" <emailgane@yahoo.co.in>
>> An: java-user@lucene.apache.org
>> Betreff: Re: Searching sets of documents
>
>> You should have stored the foldername or fullpath of the file as part of
>> Lucene document otherwise it is difficult to retrieve.
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- 
>> From: "" <yeshuangming@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Tuesday, October 14, 2008 6:13 AM
>> Subject: Re: Searching sets of documents
>>
>>
>> >I don't understand your problem?
>> > do you index file but want to search folder which contain the files?
>> >
>> > when you want to search folder, you can index folder, the data is all
>> > files
>> > under it.
>> >
>> > 2008/10/13 <spring@gmx.eu>
>> >
>> >> The docs are already indexed.
>> >>
>> >> > -----Original Message-----
>> >> > From: ??? [mailto:yeshuangming@gmail.com]
>> >> > Sent: Montag, 13. Oktober 2008 02:28
>> >> > To: java-user@lucene.apache.org
>> >> > Subject: Re: Searching sets of documents
>> >> >
>> >> > all folders which match "A AND Y", do you search for file name?
>> >> > If yes, A or Y in "A AND Y" is a Strring too, so you can do it by:
>> >> > construct a Lucene Document for each folder, and name of
>> >> > files under the
>> >> > folder is the search data.
>> >> >
>> >> > 2008/10/13 <spring@gmx.eu>
>> >> >
>> >> > > Hi,
>> >> > >
>> >> > > I want to search for sets of documents. For instance I
>> >> > index some folders
>> >> > > with documents in it and now I do not want to find certain
>> >> > documents but
>> >> > > folders.
>> >> > >
>> >> > > Sample:
>> >> > >
>> >> > > folder A
>> >> > >  doc 1, contains X, Y
>> >> > >  doc 2, contains Y, Z
>> >> > >
>> >> > > folder B
>> >> > >  doc 3, contains X, Y
>> >> > >  doc 4, contains A, Z
>> >> > >
>> >> > > Now I want to find all folders which match "A AND Y" -> folder B.
>> >> > >
>> >> > > How can this be done?
>> >> > >
>> >> > > Thank you
>> >> > >
>> >> > >
>> >> > >
>> >> > >
>> >> > ---------------------------------------------------------------------
>> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> > >
>> >> > >
>> >> >
>> >> >
>> >> > --
>> >> > Sorry for my English!! ?
>> >> > Please help me correct my English expression and error in syntax
>> >> >
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> > -- 
>> > Sorry for my English!! 
>> > Please help me correct my English expression and error in syntax
>> >
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 12:21:19 2008
Return-Path: <java-user-return-36603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19645 invoked from network); 14 Oct 2008 12:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 12:21:19 -0000
Received: (qmail 5714 invoked by uid 500); 14 Oct 2008 12:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5688 invoked by uid 500); 14 Oct 2008 12:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5677 invoked by uid 99); 14 Oct 2008 12:21:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 05:21:13 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 12:20:04 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2086652rvb.5
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 05:20:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tPxCKto7uiv6ArgkTS6lBoAt0bJEX0yxAS35WGKERBc=;
        b=UVzMPi5qSvjdG3B92/VuagPIJVuGdFv+s0WcZHlkoL0wGxqbChAtDnLQr1og20d6o7
         0FGyst3V6LH6oEiAHsnEAdBlYV/AlPwi6U55unVttAXD9elCQuC70o/nyuu0BnrfIMiJ
         4iOqIO9UU3DW73p2w9ATFrtJb3mDgAooXgIvo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=c+IuT2hFCOlUZD04Y91WjEfCa6Ut2Bjt2P+nAuS4HkNKNTvdy8xv/Mco+9GIeuZuXj
         zb+Dx8BoA7wH5xVUin6OB9rPxoUsBRLF9Oj4MOT8MiwuuQy2f932kmshn9dEQs1x/NXK
         x/9zDaPR3Svh7B7MYunXTEBb8VtpxaNC/Re2k=
Received: by 10.141.128.19 with SMTP id f19mr4763522rvn.107.1223986841150;
        Tue, 14 Oct 2008 05:20:41 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Tue, 14 Oct 2008 05:20:41 -0700 (PDT)
Message-ID: <359a92830810140520p21d6d3cfj72b58ea9d45efd5d@mail.gmail.com>
Date: Tue, 14 Oct 2008 08:20:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Custom Sorting Based on Input Value
In-Reply-To: <19963673.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3998_7578961.1223986841140"
References: <19963673.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3998_7578961.1223986841140
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don' know how tight your result must be, but here's a couple
of ideas....

1> you could boost your target by a huge amount, although forming
your query might be "interesting". If you somehow worked the clause
fieldA:5^10000 say. I suspect that some of your results wouldn't be on
top, but it might be "close enough".

2> you could do something with FieldSortedHitQueue

3> maybe you could provide a custom sorter by using
SortComparator, although you should look at the warnings
in the API.

Now I'll wait for Hoss to say "Isn't that what XXX provides" <G>...

Best
Erick

On Mon, Oct 13, 2008 at 5:54 PM, Ravis <ravish.web@gmail.com> wrote:

>
> Hi,
>
> I have a sorting requirement where I need to bubble up documents exactly
> matching of particular value passed in sort criteria.
>
> For example: Hypothetically, Say I am sorting on field A. I want all values
> matching value '5' on top and then regular sorting for other values. So I
> would like to do something like: sort by: fieldA(5).
>
> Any recommendation how I can achieve this using Lucene.
>
> thanks,
> Ravi
> --
> View this message in context:
> http://www.nabble.com/Custom-Sorting-Based-on-Input-Value-tp19963673p19963673.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3998_7578961.1223986841140--

From java-user-return-36604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 12:51:03 2008
Return-Path: <java-user-return-36604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27738 invoked from network); 14 Oct 2008 12:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 12:51:03 -0000
Received: (qmail 42804 invoked by uid 500); 14 Oct 2008 12:50:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42770 invoked by uid 500); 14 Oct 2008 12:50:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42759 invoked by uid 99); 14 Oct 2008 12:50:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 05:50:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Oct 2008 12:49:50 +0000
Received: (qmail 23198 invoked by uid 0); 14 Oct 2008 12:50:25 -0000
Received: from 193.111.217.134 by www129.gmx.net with HTTP;
 Tue, 14 Oct 2008 14:50:25 +0200 (CEST)
Content-Type: text/plain; charset="utf-8"
Date: Tue, 14 Oct 2008 14:50:25 +0200
From: spring@gmx.eu
In-Reply-To: <010101c92deb$e9363c60$330bc30a@sv.us.sonicwall.com>
Message-ID: <20081014125025.3160@gmx.net>
MIME-Version: 1.0
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04>
 <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com>
 <1AF02086165F4369B3744AC60B20DAD4@msrvcn04>
 <9233ccac0810131743x51fa89hcc4aaacfece64c38@mail.gmail.com>
 <00ca01c92dd8$a2745a90$330bc30a@sv.us.sonicwall.com>
 <20081014091109.3180@gmx.net> <010101c92deb$e9363c60$330bc30a@sv.us.sonicwall.com>
Subject: Re: Searching sets of documents
To: java-user@lucene.apache.org
X-Authenticated: #2635966
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX1+VocdNZGOVYTJZNqF0ok+uD1++lmydnPZCsial7r
 Dl+dE1375faw6OqD+TgLlar/G5uzlFr4sbrQ== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: qaLHfH5zf2IsFulRRGxos7J4dWxlc1Zh
X-FuHaFi: 0.5600000000000001
X-Virus-Checked: Checked by ClamAV on apache.org

The problem is the logical combination of documents in folders not of terms in documents.
See original post.

-------- Original-Nachricht --------
> Datum: Tue, 14 Oct 2008 16:29:15 +0530
> Von: "Ganesh" <emailgane@yahoo.co.in>
> An: java-user@lucene.apache.org
> Betreff: Re: Searching sets of documents

> What is your problem?
> 
> If the foldernames are already stored then it could be retrieved from 
> search. Use DuplicateFilter on field "foldername" to get the unique list
> of 
> folders.
> Hope this helps.
> 
> Regards
> Ganesh
> 
> 
> ----- Original Message ----- 
> From: <spring@gmx.eu>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, October 14, 2008 2:41 PM
> Subject: Re: Searching sets of documents
> 
> 
> > The folder name and the document name are stored for each document.
> >
> > -------- Original-Nachricht --------
> >> Datum: Tue, 14 Oct 2008 14:11:09 +0530
> >> Von: "Ganesh" <emailgane@yahoo.co.in>
> >> An: java-user@lucene.apache.org
> >> Betreff: Re: Searching sets of documents
> >
> >> You should have stored the foldername or fullpath of the file as part
> of
> >> Lucene document otherwise it is difficult to retrieve.
> >>
> >> Regards
> >> Ganesh
> >>
> >> ----- Original Message ----- 
> >> From: "" <yeshuangming@gmail.com>
> >> To: <java-user@lucene.apache.org>
> >> Sent: Tuesday, October 14, 2008 6:13 AM
> >> Subject: Re: Searching sets of documents
> >>
> >>
> >> >I don't understand your problem?
> >> > do you index file but want to search folder which contain the files?
> >> >
> >> > when you want to search folder, you can index folder, the data is all
> >> > files
> >> > under it.
> >> >
> >> > 2008/10/13 <spring@gmx.eu>
> >> >
> >> >> The docs are already indexed.
> >> >>
> >> >> > -----Original Message-----
> >> >> > From: ??? [mailto:yeshuangming@gmail.com]
> >> >> > Sent: Montag, 13. Oktober 2008 02:28
> >> >> > To: java-user@lucene.apache.org
> >> >> > Subject: Re: Searching sets of documents
> >> >> >
> >> >> > all folders which match "A AND Y", do you search for file name?
> >> >> > If yes, A or Y in "A AND Y" is a Strring too, so you can do it by:
> >> >> > construct a Lucene Document for each folder, and name of
> >> >> > files under the
> >> >> > folder is the search data.
> >> >> >
> >> >> > 2008/10/13 <spring@gmx.eu>
> >> >> >
> >> >> > > Hi,
> >> >> > >
> >> >> > > I want to search for sets of documents. For instance I
> >> >> > index some folders
> >> >> > > with documents in it and now I do not want to find certain
> >> >> > documents but
> >> >> > > folders.
> >> >> > >
> >> >> > > Sample:
> >> >> > >
> >> >> > > folder A
> >> >> > >  doc 1, contains X, Y
> >> >> > >  doc 2, contains Y, Z
> >> >> > >
> >> >> > > folder B
> >> >> > >  doc 3, contains X, Y
> >> >> > >  doc 4, contains A, Z
> >> >> > >
> >> >> > > Now I want to find all folders which match "A AND Y" -> folder
> B.
> >> >> > >
> >> >> > > How can this be done?
> >> >> > >
> >> >> > > Thank you
> >> >> > >
> >> >> > >
> >> >> > >
> >> >> > >
> >> >> >
> ---------------------------------------------------------------------
> >> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >> >> > >
> >> >> > >
> >> >> >
> >> >> >
> >> >> > --
> >> >> > Sorry for my English!! ?
> >> >> > Please help me correct my English expression and error in syntax
> >> >> >
> >> >>
> >> >>
> >> >>
> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >> > -- 
> >> > Sorry for my English!! 
> >> > Please help me correct my English expression and error in syntax
> >> >
> >>
> >> Send instant messages to your online friends 
> >> http://in.messenger.yahoo.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> Send instant messages to your online friends http://in.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 12:52:59 2008
Return-Path: <java-user-return-36605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28345 invoked from network); 14 Oct 2008 12:52:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 12:52:59 -0000
Received: (qmail 45211 invoked by uid 500); 14 Oct 2008 12:52:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45174 invoked by uid 500); 14 Oct 2008 12:52:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45163 invoked by uid 99); 14 Oct 2008 12:52:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 05:52:54 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Oct 2008 12:51:46 +0000
Received: (qmail 8066 invoked by uid 0); 14 Oct 2008 12:51:21 -0000
Received: from 193.111.217.134 by www078.gmx.net with HTTP;
 Tue, 14 Oct 2008 14:51:21 +0200 (CEST)
Content-Type: text/plain; charset="utf-8"
Date: Tue, 14 Oct 2008 14:51:21 +0200
From: "Steffen Ramlow" <spring@gmx.eu>
In-Reply-To: <19969684.post@talk.nabble.com>
Message-ID: <20081014125121.3180@gmx.net>
MIME-Version: 1.0
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04>
 <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com>
 <1AF02086165F4369B3744AC60B20DAD4@msrvcn04> <19969684.post@talk.nabble.com>
Subject: Re: RE: Searching sets of documents
To: java-user@lucene.apache.org
X-Authenticated: #2635966
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX18W6dUD/KoWfYy3mBquO0omOwsHxqYW3h1ZxtdiNE
 qxrfbhhzSWioZtSFkdX2Ijmy1EGT4oz+B5TQ== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: /q3BfHVLRkkNZcpCW2RqkPNudWkvKFNs
X-FuHaFi: 0.6
X-Virus-Checked: Checked by ClamAV on apache.org

Well, this is what I thought too.
Thank you.

-------- Original-Nachricht --------
> Datum: Tue, 14 Oct 2008 02:11:53 -0700 (PDT)
> Von: "Karsten F." <karsten-lucene@fiz-technik.de>
> An: java-user@lucene.apache.org
> Betreff: RE: Searching sets of documents

> 
> Hi spring,
> unit of retrieval in lucene is a document.
> There are no joins between document sets like in sql.
> 
> What you can do is to collect all hits for each term query on level of
> folders and than implement the logical and or or by your own.
> For this you could reuse the existing implementations of faceted
> browsing
> or drill down.
> 
> Best regards 
>   Karsten
> 
> 
> 
> spgmx wrote:
> > 
> > The docs are already indexed. 
> > 
> 
> -- 
> View this message in context:
> http://www.nabble.com/Searching-sets-of-documents-tp19944220p19969684.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 13:37:30 2008
Return-Path: <java-user-return-36606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56080 invoked from network); 14 Oct 2008 13:37:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 13:37:30 -0000
Received: (qmail 4054 invoked by uid 500); 14 Oct 2008 13:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4024 invoked by uid 500); 14 Oct 2008 13:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4013 invoked by uid 99); 14 Oct 2008 13:37:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 06:37:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 13:36:17 +0000
X-IronPort-AV: E=Sophos;i="4.33,409,1220223600"; 
   d="scan'208";a="95892068"
Received: from exbe1.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 14 Oct 2008 14:35:43 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 14 Oct 2008 14:35:41 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 14 Oct 2008 14:35:41 +0100
Message-ID: <48F4A02D.3000702@deri.org>
Date: Tue, 14 Oct 2008 14:35:41 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Modification of positional information encoding
References: <DBD1DD04-E974-4FF6-B41C-C3462554D0CB@mikemccandless.com>
In-Reply-To: <DBD1DD04-E974-4FF6-B41C-C3462554D0CB@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 14 Oct 2008 13:35:41.0217 (UTC) FILETIME=[C0421110:01C92E01]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,

Michael McCandless wrote:
> Also, this issue was just opened:
>
>
>    https://issues.apache.org/jira/browse/LUCENE-1419
>
> which would make it possible for classes in the same package 
> (oal.index) to use their own indexing chain.  With that fix, if you 
> make your own classes in oal.index package, and perhaps subclass the 
> above classes, you could then create your own indexing chain for 
> indexing?  If you take that approach, please report back so we can 
> learn how to improve Lucene for these very advanced customizations!
>
As a first impression, what will be handy in order to customize postings 
list will be to make an abstract class FreqProxTermsWriter, that 
separates segment creation and term information serialisation. This 
class will implement the generic logic for flushing and appending 
postings, but will delegate to subclasses the way you write doc + freq 
and prox + payload info.

A first idea will be to have the following abstract methods:
- writeMinState : called by appendPostings, and define how to serialise 
one FreqProxFieldMergeState
- writeDocFreq : called by writeMinState, and define how to serialise 
docs and freq
- writeProx: called by writeMinState and define how to serialise 
positions and payloads

I think other parts of the FreqProxTermsWriter can stay generic. What do 
you think ?

Regards.
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 15:13:08 2008
Return-Path: <java-user-return-36607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43909 invoked from network); 14 Oct 2008 15:13:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 15:13:08 -0000
Received: (qmail 4050 invoked by uid 500); 14 Oct 2008 15:13:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4023 invoked by uid 500); 14 Oct 2008 15:13:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4012 invoked by uid 99); 14 Oct 2008 15:13:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 08:13:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 15:11:56 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2472530wfc.20
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 08:11:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=W6wBFCiRSXY5NER4Obpq/w1rHa8MLdl/3BRo+i3JEH0=;
        b=AuTA3cvs24a0XQoVh8CgP3FawcTIlIx/1RHqYq1V5oKE8dA7vFpPMArEmiUSPi8gLh
         cf/vW/SizvTqSm4FVVRVJAWan790lFwI/ldZtIiJbIjLMsjr1LQDQ8hUYfbj/hYBivWx
         4io+gzA9DSX4VPA7yZ+qFzyJofQGkcpSAf+lA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=ELI6J8JnOKNKqp18ix+P//T8H5Yzy5A+XflxJm91gunl/jw9sy2Oblo0Gn5ZMJzWuv
         08iKD8qarLWL48mBox75jw9rzfvVwnj/ZgxOuwCLMXFine9M/XiI9PIQfQFUbBDP6bj4
         +Bih6kwzTlfYxB6onze5JYJHd3KW/5AIkqkeU=
Received: by 10.141.169.11 with SMTP id w11mr4343569rvo.281.1223997072792;
        Tue, 14 Oct 2008 08:11:12 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Tue, 14 Oct 2008 08:11:12 -0700 (PDT)
Message-ID: <c68e39170810140811w54b37ee5u54fa6cdcf0075eb0@mail.gmail.com>
Date: Tue, 14 Oct 2008 11:11:12 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Newbie Question - Lucene Sorting NOT Ignoring NULL values
In-Reply-To: <6e153e3c0810140135xdecf1fj3490108f51c0bc37@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6e153e3c0810140135xdecf1fj3490108f51c0bc37@mail.gmail.com>
X-Google-Sender-Auth: 39b451f1967e319a
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Oct 14, 2008 at 4:35 AM, Reetha Hariharan <reethahari@gmail.com> wrote:
> I am searching using one field, say X and want to sort the results using
> another, say Y (Which can have null values). But I am expecting Sort to
> ignore all the null values and just sort only records that has values in Y
> field.

Do you want docs with null (missing) values in the results or not?
If so, they need to go somewhere (before or after the others).
If you don't want those docs at all, exclude them in the query, or
with a filter.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 16:39:42 2008
Return-Path: <java-user-return-36608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92127 invoked from network); 14 Oct 2008 16:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 16:39:42 -0000
Received: (qmail 69154 invoked by uid 500); 14 Oct 2008 16:39:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69134 invoked by uid 500); 14 Oct 2008 16:39:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69123 invoked by uid 99); 14 Oct 2008 16:39:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 09:39:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 16:38:29 +0000
Received: by gxk6 with SMTP id 6so4572209gxk.5
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 09:39:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=Q8D3Uqo3IVuTj8wCJVFvWW2jsAbcn63FxL7z8LWjNN0=;
        b=SDPaB5el5mIA/+WOoFo29FS3YaDD+t2kibFDac2p4ARaVf54nbZNVQXvMHTLhnQSug
         I2s3yhmjaZJcNdoUyKOA74zl2iFnFXaaECoRxUc6Ofhff89WypfnEDgfnZfH3/Bs3zjs
         kE7t1IUEWxv30NeoYUfL+31RYakYBWQ7uncB0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=GMjqyoauFL34XBOabOpq+9GcZ43qqBAfqqked+jczWuAEF9VWGwi3mzVvChF3iGmNx
         GS9AZRTgEzWGrqnBkLLcdoJNQ8wk/p+D3mglDpymkCPEPDi7dqNUCmbMF/HyLQHM48aj
         zNcgBlLbzV8UtZlh00GVCXFGI5h0qIR0tWvmA=
Received: by 10.142.223.20 with SMTP id v20mr3525640wfg.152.1224002345207;
        Tue, 14 Oct 2008 09:39:05 -0700 (PDT)
Received: from ?192.168.1.3? ([189.107.129.191])
        by mx.google.com with ESMTPS id 30sm18887842wff.18.2008.10.14.09.38.57
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 14 Oct 2008 09:39:02 -0700 (PDT)
Message-Id: <E3F89248-9AAA-49A5-929A-286ED613B53C@gmail.com>
From: "Rafael C. de Almeida" <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Unique tokens analyzer
Date: Tue, 14 Oct 2008 13:38:47 -0200
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Is there a analyzer that will tokenize the stream such that there's no  
repeated tokens in the stream? I have a keyword-field on my document,  
so if one keyword already appears on the list there's no point in  
having it shown again. Does it make sense having that analyzer? Or  
indexing repeated keywords on the same field shouldn't hurt  
performance or search quality in any way?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 16:55:48 2008
Return-Path: <java-user-return-36609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98486 invoked from network); 14 Oct 2008 16:55:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 16:55:48 -0000
Received: (qmail 98250 invoked by uid 500); 14 Oct 2008 16:55:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98221 invoked by uid 500); 14 Oct 2008 16:55:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98210 invoked by uid 99); 14 Oct 2008 16:55:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 09:55:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of reethahari@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 16:54:35 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2192451rvb.5
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 09:55:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=wWJc21dW0vnfrtRoV/wEo2ae2U6ccXekVVhsM0y6/P8=;
        b=mozOie7cP5UitmaNh2hBSfyJatmJWXGPJTUP2rzuZV+QlT+LUdOmwj8H/I0U0hP0s3
         IkuLqaGN/hq0Z7b6MkDDtqFt7jGrzhdt17db0V3F5ctYID8bURy9qG2l9U01PW/N9buW
         Xq+aI+KeI+sCp4r1N365VPC54qPl3PGMcAZAI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Fso+Y0elJBHIv4jn6JjPHZFP2WVU+7Pt5TCpc0BY+9DjmcLCQesbLCvjgsjy2RH4a5
         sCf96kYwuK4Y9aPD7YzGxVy1dWvNzIynLXvLErciAW1xSHlcHLeD2RsfEux4ElKbXXos
         /YWTcjqdJlVtNTs3oM3r2J4fq2ktepgqH0T+c=
Received: by 10.141.69.1 with SMTP id w1mr5031870rvk.147.1224003311857;
        Tue, 14 Oct 2008 09:55:11 -0700 (PDT)
Received: by 10.141.22.6 with HTTP; Tue, 14 Oct 2008 09:55:11 -0700 (PDT)
Message-ID: <6e153e3c0810140955u5c792ff9vcbed67b92dad063b@mail.gmail.com>
Date: Tue, 14 Oct 2008 09:55:11 -0700
From: "Reetha Hariharan" <reethahari@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie Question - Lucene Sorting NOT Ignoring NULL values
In-Reply-To: <c68e39170810140811w54b37ee5u54fa6cdcf0075eb0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10207_14758983.1224003311851"
References: <6e153e3c0810140135xdecf1fj3490108f51c0bc37@mail.gmail.com>
	 <c68e39170810140811w54b37ee5u54fa6cdcf0075eb0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10207_14758983.1224003311851
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Yonik,

Thanks for your reply.

In my case I don't want those document that has Null value for the field
that I am willing to sort

I tried writing my own filter using RangeFilter, but it doesn't work.

I used something like the following in my custom filter.

public class NotNullRangeFilter extends org.apache.lucene.search.Filter {
    private RangeFilter rangeFilter;
    public BitSet bits(IndexReader reader) throws IOException {
        rangeFilter = RangeFilter.More("lastUpdatedDate"/*Field to sort*/,
"" /*atleast an empty string but not null*/);
        return rangeFilter.bits(reader);
    }
}

The above does not work. Let me know if I am doing something wrong.

Any inputs on this ?

Thanks,

On Tue, Oct 14, 2008 at 8:11 AM, Yonik Seeley <yonik@apache.org> wrote:

> On Tue, Oct 14, 2008 at 4:35 AM, Reetha Hariharan <reethahari@gmail.com>
> wrote:
> > I am searching using one field, say X and want to sort the results using
> > another, say Y (Which can have null values). But I am expecting Sort to
> > ignore all the null values and just sort only records that has values in
> Y
> > field.
>
> Do you want docs with null (missing) values in the results or not?
> If so, they need to go somewhere (before or after the others).
> If you don't want those docs at all, exclude them in the query, or
> with a filter.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10207_14758983.1224003311851--

From java-user-return-36610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 17:13:25 2008
Return-Path: <java-user-return-36610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4471 invoked from network); 14 Oct 2008 17:13:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 17:13:24 -0000
Received: (qmail 25767 invoked by uid 500); 14 Oct 2008 17:13:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25727 invoked by uid 500); 14 Oct 2008 17:13:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25716 invoked by uid 99); 14 Oct 2008 17:13:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 10:13:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 17:12:12 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2529205wfc.20
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 10:12:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=zPjSpNjGr3tAyNLIrEC2nFsuXucTWhUNKVzrlHsvs+U=;
        b=Glf0+/GUoHP70E3rUAluYYbA+638ytZzCV2pZ2fBhUFbBcdyZ8e9PxZPdR5hSfm7/D
         NbLoP2cOyiw+/NXuTa/JiXzvIFpZ/PGnsObnWBfaza5Oqs0x3PeLwcWwvSMGf00VV9Zy
         boNUH0fY0+TkSNfwgnkwYPnQVaZYZCXI2o93M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=N8VuKpCp0m94eyfQBa3pxvBN5DZP7n+IQCxtrdjndJGAdx0839F4E+xC5hjrhNh4cI
         UFmOMBXPAVIOwAYUaNO24Jk3LTNvHggZWTBiXE5Lk+nW+oNRy5jsMDdIUr4DUfDTtpso
         dHRXdxBPpkyLCqRyrAj59s0Hc9DWnxEHDFUgc=
Received: by 10.141.211.13 with SMTP id n13mr5052290rvq.184.1224004359894;
        Tue, 14 Oct 2008 10:12:39 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Tue, 14 Oct 2008 10:12:39 -0700 (PDT)
Message-ID: <c68e39170810141012u1619a23cnd90e8fcfe6ac4327@mail.gmail.com>
Date: Tue, 14 Oct 2008 13:12:39 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Newbie Question - Lucene Sorting NOT Ignoring NULL values
In-Reply-To: <6e153e3c0810140955u5c792ff9vcbed67b92dad063b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6e153e3c0810140135xdecf1fj3490108f51c0bc37@mail.gmail.com>
	 <c68e39170810140811w54b37ee5u54fa6cdcf0075eb0@mail.gmail.com>
	 <6e153e3c0810140955u5c792ff9vcbed67b92dad063b@mail.gmail.com>
X-Google-Sender-Auth: bf06edcb42704033
X-Virus-Checked: Checked by ClamAV on apache.org

You're on the right track I think... perhaps try using RangeFilter
directly rather than creating your own class.  Something like:

Filter filter = RangeFilter.More("lastUpdatedDate","");
searcher.search(query, filter)

If that works for you, then the next step would be to look at
CachingWrapperFilter, which can help prevent calculating the filter
for every query.

-Yonik

On Tue, Oct 14, 2008 at 12:55 PM, Reetha Hariharan <reethahari@gmail.com> wrote:
> Hi Yonik,
>
> Thanks for your reply.
>
> In my case I don't want those document that has Null value for the field
> that I am willing to sort
>
> I tried writing my own filter using RangeFilter, but it doesn't work.
>
> I used something like the following in my custom filter.
>
> public class NotNullRangeFilter extends org.apache.lucene.search.Filter {
>    private RangeFilter rangeFilter;
>    public BitSet bits(IndexReader reader) throws IOException {
>        rangeFilter = RangeFilter.More("lastUpdatedDate"/*Field to sort*/,
> "" /*atleast an empty string but not null*/);
>        return rangeFilter.bits(reader);
>    }
> }
>
> The above does not work. Let me know if I am doing something wrong.
>
> Any inputs on this ?
>
> Thanks,
>
> On Tue, Oct 14, 2008 at 8:11 AM, Yonik Seeley <yonik@apache.org> wrote:
>
>> On Tue, Oct 14, 2008 at 4:35 AM, Reetha Hariharan <reethahari@gmail.com>
>> wrote:
>> > I am searching using one field, say X and want to sort the results using
>> > another, say Y (Which can have null values). But I am expecting Sort to
>> > ignore all the null values and just sort only records that has values in
>> Y
>> > field.
>>
>> Do you want docs with null (missing) values in the results or not?
>> If so, they need to go somewhere (before or after the others).
>> If you don't want those docs at all, exclude them in the query, or
>> with a filter.
>>
>> -Yonik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 17:35:41 2008
Return-Path: <java-user-return-36611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18869 invoked from network); 14 Oct 2008 17:35:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 17:35:40 -0000
Received: (qmail 61199 invoked by uid 500); 14 Oct 2008 17:35:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61170 invoked by uid 500); 14 Oct 2008 17:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61159 invoked by uid 99); 14 Oct 2008 17:35:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 10:35:34 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 17:34:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KpnnT-0005bG-Tg
	for java-user@lucene.apache.org; Tue, 14 Oct 2008 10:35:03 -0700
Message-ID: <19978466.post@talk.nabble.com>
Date: Tue, 14 Oct 2008 10:35:03 -0700 (PDT)
From: mattspitz <mspitz@stanford.edu>
To: java-user@lucene.apache.org
Subject: ThreadSafe SpellChecker?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mspitz@stanford.edu
X-Virus-Checked: Checked by ClamAV on apache.org


I was wondering if the Lucene SpellChecker class was threadsafe,
specifically, indexDictionary().

Such that:

for (int i = 0; i < numReaders; i++) {
    //spawn new thread to run:
        spellchecker.indexDictionary(new LuceneDictionary(readers[i],
myField));
}

Would work.

Thanks,
Matt
-- 
View this message in context: http://www.nabble.com/ThreadSafe-SpellChecker--tp19978466p19978466.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 19:01:02 2008
Return-Path: <java-user-return-36612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66589 invoked from network); 14 Oct 2008 19:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 19:01:02 -0000
Received: (qmail 69288 invoked by uid 500); 14 Oct 2008 19:00:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69025 invoked by uid 500); 14 Oct 2008 19:00:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68998 invoked by uid 99); 14 Oct 2008 19:00:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 12:00:53 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=RCVD_IN_SBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [87.248.110.148] (HELO n31.bullet.mail.ukl.yahoo.com) (87.248.110.148)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Oct 2008 18:59:44 +0000
Received: from [217.146.182.180] by n31.bullet.mail.ukl.yahoo.com with NNFMP; 14 Oct 2008 19:00:19 -0000
Received: from [87.248.111.149] by t6.bullet.ukl.yahoo.com with NNFMP; 14 Oct 2008 19:00:19 -0000
Received: from [127.0.0.1] by omp206.mail.ukl.yahoo.com with NNFMP; 14 Oct 2008 19:00:19 -0000
X-Yahoo-Newman-Id: 536534.24065.bm@omp206.mail.ukl.yahoo.com
Received: (qmail 80411 invoked from network); 14 Oct 2008 19:00:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=h/KsHb65Of5YBGHnrn3qrYN39S1rsM2vJKexif9JsQ9yy3pAKY5Uzjx0SBwgKRLQT4al92B8filRloJcbuRr1qB45VoDQLxggfeF3lAJpc+5n9/4t1Qb/rmu0smZ1z0LOSA/zSWIL42EBzdS74VrQIq2xKVDq+Di2Z7gfG8im9A=  ;
Received: from unknown (HELO ?192.168.2.2?) (markharw00d@194.106.34.5 with plain)
  by smtp149.mail.ukl.yahoo.com with SMTP; 14 Oct 2008 19:00:19 -0000
X-YMail-OSG: LOnBtUYVM1l_Nop.2I1M1oWvwzt9XK_LYkBicZAXjAUikYUhUP4arJtfKNu5_UI0w9h6D497D25jjNFVObrUX5_MMJ4fR2ATpafj7KwrRheXcKOpC80rwyMlk583OcYW7TwCf8xLle1_eN..Uo1q5p00e7hHHZv2fM5lP65G9KdYSS4iJY0-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <48F4EC3C.5040902@yahoo.co.uk>
Date: Tue, 14 Oct 2008 20:00:12 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Unique tokens analyzer
References: <E3F89248-9AAA-49A5-929A-286ED613B53C@gmail.com>
In-Reply-To: <E3F89248-9AAA-49A5-929A-286ED613B53C@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Related:
    https://issues.apache.org/jira/browse/LUCENE-725



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 19:23:40 2008
Return-Path: <java-user-return-36613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73429 invoked from network); 14 Oct 2008 19:23:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 19:23:39 -0000
Received: (qmail 19155 invoked by uid 500); 14 Oct 2008 19:23:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19126 invoked by uid 500); 14 Oct 2008 19:23:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19107 invoked by uid 99); 14 Oct 2008 19:23:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 12:23:28 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.105.6.39] (HELO sandstone.cs.wisc.edu) (128.105.6.39)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 19:22:21 +0000
Received: from nazm.cs.wisc.edu (nazm.cs.wisc.edu [128.105.165.141])
	by sandstone.cs.wisc.edu (8.14.1/8.14.1) with ESMTP id m9EJJndC024318
	for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 14:19:49 -0500
Message-ID: <48F4F0D5.5010308@cs.wisc.edu>
Date: Tue, 14 Oct 2008 14:19:49 -0500
From: Akanksha Baid <baid@cs.wisc.edu>
User-Agent: Thunderbird 2.0.0.16 (X11/20080707)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: distinct field values
References: <48F448E5.70902@cs.wisc.edu> <867513fe0810140054l6be2bcdcoe1592cd2864816f2@mail.gmail.com>
In-Reply-To: <867513fe0810140054l6be2bcdcoe1592cd2864816f2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there something I could do to Index the documents differently to 
accomplish this? Currently I am looking at all the hits to generate the 
set of tags for the query.
If I need to implement the same thing within Lucene, I am not sure if I 
will gain anything performance wise. Or am I wrong about this?



Anshum wrote:
> Hi,
> 
> You could try changing (or extending) TopFieldDocCollector and do your
> processing there (that is what I tried... and it worked fine). But that
> would mean changing lucene code a little bit.
> 
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
> 
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
> 
> 
> On Tue, Oct 14, 2008 at 12:53 PM, Akanksha Baid <baid@cs.wisc.edu> wrote:
> 
>> I have indexed multiple documents - each of them have 3 fields ( id, tag ,
>> text). Is there an easy way to determine the set of tags for a given query
>> without iterating through all the hits?
>> For example if I have 100 documents in my index and my set of tag = {A, B,
>> C}. Query Q on the text field returns 15 docs with tag A , 10 with tag B and
>> none with tag C (total of 25 hits). Is there a way to determine that the set
>> of tags for query Q = {A, B} without iterating through all 25 hits.
>>
>> Any ideas?
>>
>> Thanks!
>> Akanksha
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 20:38:36 2008
Return-Path: <java-user-return-36614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98663 invoked from network); 14 Oct 2008 20:38:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 20:38:35 -0000
Received: (qmail 33321 invoked by uid 500); 14 Oct 2008 20:38:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33141 invoked by uid 500); 14 Oct 2008 20:38:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33130 invoked by uid 99); 14 Oct 2008 20:38:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 13:38:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.gilliam.email.list@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 20:37:23 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1117831nfd.15
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 13:37:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=Nmp+MNQjiC8OTJ3CaInOygqej4O9Lv44ACviTlCeinQ=;
        b=ot4qKmjKaARHih3WqU61u2Xh89ZKQHKXICoMfQspuzz3EDqOK4pO9g2h8sm/3a3Baq
         vxbLjjCL23q+cFq4rn/AAMpkT64Sk4IHtnEYyNvOpjA0JKfkhKtAwhriJikICtTAJK+u
         XsLosUUbLwLjcBi0sJMK2MbqE8P7Ktoo+7RLM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=QMZYoikXiyWI6TN+yQajVrKUcbGjUtA8fMxZ5kResmaR7aDiD9HBZOov+jwZIlL7FK
         fmN1e4wJj/th4WcEhpnXNoDDjp3DU/ZAS+ZM4amQt0UavZC17DyEZxGj0Thr88qDQgos
         ZZCGZ/zalS8jD6n4Sxvwpu2tUc56yie1qk5Og=
Received: by 10.210.35.5 with SMTP id i5mr20759ebi.46.1224016678392;
        Tue, 14 Oct 2008 13:37:58 -0700 (PDT)
Received: by 10.210.137.15 with HTTP; Tue, 14 Oct 2008 13:37:58 -0700 (PDT)
Message-ID: <4356e7730810141337w60e45f2ew10ce18c964ec32a4@mail.gmail.com>
Date: Tue, 14 Oct 2008 15:37:58 -0500
From: "Chris Gilliam" <chris.gilliam.email.list@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching Log Files
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73885_5729414.1224016678414"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73885_5729414.1224016678414
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Everyone,
New to Lucene..

We currently roughly 100Gig of log files.  We are needing to build a search
application that can return rows of data from the files and combine the
results?

Does Lucene index the content in the files?

Will it be able to find  matching criteria say a date and then return the
next X number of lines?

The indexing piece, how does it work if I am looking for something that has
been added to the file since the indexing has taken place?

Thanks,
Chris

------=_Part_73885_5729414.1224016678414--

From java-user-return-36615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 20:58:35 2008
Return-Path: <java-user-return-36615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9021 invoked from network); 14 Oct 2008 20:58:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 20:58:35 -0000
Received: (qmail 72703 invoked by uid 500); 14 Oct 2008 20:58:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72326 invoked by uid 500); 14 Oct 2008 20:58:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72315 invoked by uid 99); 14 Oct 2008 20:58:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 13:58:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.gilliam.email.list@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 20:57:23 +0000
Received: by ug-out-1314.google.com with SMTP id j3so1149187ugf.23
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 13:57:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=kAFwalNiLRzTyk7gvSAAkdUSHNdhyxKLF7djb0CHypQ=;
        b=GnFGLNrBniA6CF77MbRC/Lq7bZtAFfFsAtcHBIwzHX8Ae36JqDe4Dbh5Rbl7HitShv
         9TJeoa5MCxM8/B90NBDzNlN5TXeyCGY5DxdWHZob2PizxVHqXwozHYPWg/sa5sBCE7lI
         fnmmPaTuKRc1FSpKkJ2/8xrCAxuUvUuux50ds=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hfW2+8EPn+WnVFi+tw+O1h/HvRSYo1IR12IYupIuTQ/LcN3Y9EXuFvfA9f7SAHtdqK
         d7/da9zv4s7Ppn+MKp/1i0Uy4JEuV7qRhYegi261bxAqSs/r1UVt1XLOno78UOwydjoJ
         sqwGs0k1qf8MJ9eML4a+X2oNRkxJNzLaVo2bc=
Received: by 10.210.41.1 with SMTP id o1mr38051ebo.75.1224017879040;
        Tue, 14 Oct 2008 13:57:59 -0700 (PDT)
Received: by 10.210.137.15 with HTTP; Tue, 14 Oct 2008 13:57:59 -0700 (PDT)
Message-ID: <4356e7730810141357q19f81ddi1342aa4d9bcad2fc@mail.gmail.com>
Date: Tue, 14 Oct 2008 15:57:59 -0500
From: "Chris Gilliam" <chris.gilliam.email.list@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WELCOME to java-user@lucene.apache.org
In-Reply-To: <1224016510.25845.ezmlm@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74101_1778030.1224017879062"
References: <1224016510.25845.ezmlm@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74101_1778030.1224017879062
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Everyone,
New to Lucene..

We currently roughly 100Gig of log files.  We are needing to build a search
application that can return rows of data from the files and combine the
results?

Does Lucene index the content in the files?

Will it be able to find  matching criteria say a date and then return the
next X number of lines?

The indexing piece, how does it work if I am looking for something that has
been added to the file since the indexing has taken place?

Thanks,
Chris

------=_Part_74101_1778030.1224017879062--

From java-user-return-36616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 21:27:21 2008
Return-Path: <java-user-return-36616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31540 invoked from network); 14 Oct 2008 21:27:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 21:27:21 -0000
Received: (qmail 5114 invoked by uid 500); 14 Oct 2008 21:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4706 invoked by uid 500); 14 Oct 2008 21:27:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4694 invoked by uid 99); 14 Oct 2008 21:27:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 14:27:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul.joseph.davis@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 21:26:09 +0000
Received: by qw-out-2122.google.com with SMTP id 5so676169qwi.53
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 14:26:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=Iemk+dTZWldpuES0Um7vuW4pbyw21K+CoPrcKVFeS7g=;
        b=R/+IJo6/fxRyTxkCJVTGvnoHtcJ0IM/5De0r6Wr6ZQrRieVx0+cWwohYHI2A7MyS0L
         8op03BCOee+kcFDnY1V9id4mbJLHLeVko4K7UP/hOfH1nNNVFkKRvEwWpfHav3y3oAyx
         rK1ytE2kJOsw3mIJkC/B++U4EhdnbRnVd7ob0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=H379e1X0k/lGNAnLVnZEF2oLsII2J2bm727aQ2etyxtBm4minFBhybyUCDvvWrdqKL
         Jv48dKkXCYrBJ/5m3hLN0zeBGxgKVExU1PyUHxMWoaeZlq+xt3KMk/JH79Lh9mRY4sl7
         sch0cCs6ouyNf8y+HSOOk1I1J1rFTZOmqq42g=
Received: by 10.214.44.5 with SMTP id r5mr75717qar.61.1224019605365;
        Tue, 14 Oct 2008 14:26:45 -0700 (PDT)
Received: by 10.214.215.21 with HTTP; Tue, 14 Oct 2008 14:26:45 -0700 (PDT)
Message-ID: <e2111bbb0810141426j13fac1ebp77b1ae35dbf96d3e@mail.gmail.com>
Date: Tue, 14 Oct 2008 17:26:45 -0400
From: "Paul Davis" <paul.joseph.davis@gmail.com>
To: java-user@lucene.apache.org
Subject: Terms Matching Query
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I'm working on indexing JSON documents via Lucene and I've run into a
bit of a snag. Currently, I'm indexing JSON documents by adding fields
that are path/value pairs. For example, given a JSON document like:

{
  "name":
    {
      "first": "Paul",
      "last": "Davis"
    }
  "jobs": ["hotdog vendor", "signboard guy"]
}

I build the doc with something like:

doc.add(new Field("/name/first", "Paul", ...))
doc.add(new Field("/name/last", "Davis", ...))
doc.add(new Field("/jobs/$0", "hotdog vendor", ...))
doc.add(new Field("/jobs/$1", "signboard guy", ...))

doc.add(new Field("__JSON_PATH__", "/name/first", ...))
doc.add(new Field("__JSON_PATH__", "/name/last", ...))
doc.add(new Field("__JSON_PATH__", "/jobs/$0", ...))
doc.add(new Field("__JSON_PATH__", "/jobs/$1", ...))

Now, at query time I'm attempting to support expanding searches as such:

alias:Paul
(OOB) alias =  "name.*" => __JSON_PATH__:name.*

Which would get expanded to the obvious "name.first:Paul
name.last:Paul". I was planning on just doing a search for
__JSON_PATH__:name.* collecting the terms and doing an OR like what
the old Prefix/Range queries. (I think I read that RangeQueries are
different now, but right now I'm going for Make It Work)

So anyway, long story short, is there a way to get just the list of
terms that match an arbitrary lucene query?

I tried poking at Query.extractTerms(Set terms) but it appears to fall
down for RangeQueries. I contemplated telling the query parser to use
old range queries, but wasn't sure if a different type of query would
cause the same problems or not. I've started just creating unique
documents for each possible path, but that seems like a Bad Idea (TM).

Any thoughts on ways to completely rework the whole system would also
be welcome. I'm relative new to Lucene so I may be completely screwing
the pooch on something I'm not even aware of.

Thanks,
Paul Davis

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 21:35:32 2008
Return-Path: <java-user-return-36617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41035 invoked from network); 14 Oct 2008 21:35:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 21:35:32 -0000
Received: (qmail 18885 invoked by uid 500); 14 Oct 2008 21:35:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18859 invoked by uid 500); 14 Oct 2008 21:35:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18848 invoked by uid 99); 14 Oct 2008 21:35:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 14:35:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.89.192.138] (HELO postoffice2.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 21:34:18 +0000
X-ASG-Debug-ID: 1224020076-5e22004a0000-H1Y1KX
X-Barracuda-URL: http://postoffice2.aconex.com:8000/cgi-bin/mark.cgi
Received: from postoffice.aconex.com (localhost [127.0.0.1])
	by postoffice2.aconex.com (Spam Firewall) with ESMTP id 478BC6392DA
	for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 08:34:36 +1100 (EST)
Received: from postoffice.aconex.com (postoffice.yarra.acx [192.168.102.1]) by postoffice2.aconex.com with ESMTP id Al3vt60ZdoMgkEdy for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 08:34:36 +1100 (EST)
Received: from [192.168.5.23] (melho0.aconex.com [203.89.192.141])
	by postoffice.aconex.com (Postfix) with ESMTP id 4209B92C2C3
	for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 08:32:34 +1100 (EST)
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <4356e7730810141337w60e45f2ew10ce18c964ec32a4@mail.gmail.com>
References: <4356e7730810141337w60e45f2ew10ce18c964ec32a4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FD791E61-9C38-40D7-B6E0-9F9D27933E79@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
X-ASG-Orig-Subj: Re: Searching Log Files
Subject: Re: Searching Log Files
Date: Wed, 15 Oct 2008 08:34:11 +1100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Barracuda-Connect: postoffice.yarra.acx[192.168.102.1]
X-Barracuda-Start-Time: 1224020076
X-Barracuda-Virus-Scanned: by Aconex Staff Email Spam Firewall at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org


On 15/10/2008, at 7:37 AM, Chris Gilliam wrote:

> Hello Everyone,
> New to Lucene..
>
> We currently roughly 100Gig of log files.  We are needing to build  
> a search
> application that can return rows of data from the files and combine  
> the
> results?
>
> Does Lucene index the content in the files?
>
> Will it be able to find  matching criteria say a date and then  
> return the
> next X number of lines?
>
> The indexing piece, how does it work if I am looking for something  
> that has
> been added to the file since the indexing has taken place?

I'm working on just such a thing over on my Apache Lab project called  
"Pinpoint":

http://svn.apache.org/repos/asf/labs/pinpoint/trunk/

It is designed to process log4j environments, soaking from network- 
based appenders, of by importing log files based on a pattern.  It's  
relatively early days but the pinpoint-service layer recently ran  
through a production load test environment soaking 500-1000 events  
per/second no problems at all.

The pinpoint-search layer provides an API to query a  
'context' (usually a days worth of logs) to find matching events, and  
then to be able to view the temporal context of specific matching  
events so you can see them inline with their related logs (either by  
the Thread that created the original matching event, +/-10 minutes,  
or by showing all logging events around that time +/- 10 minutes).

Really good for production triage.  I'm trying to work on a Web-based  
app that allows a dynamic sort-of-OLAP analysis of log files (charts,  
trends, etc).

cheers,

Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 14 23:57:16 2008
Return-Path: <java-user-return-36618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60489 invoked from network); 14 Oct 2008 23:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Oct 2008 23:57:16 -0000
Received: (qmail 50864 invoked by uid 500); 14 Oct 2008 23:57:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50834 invoked by uid 500); 14 Oct 2008 23:57:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50823 invoked by uid 99); 14 Oct 2008 23:57:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 16:57:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 23:56:04 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 72DD071C078; Tue, 14 Oct 2008 16:56:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6B80871C02E
	for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 16:56:11 -0700 (PDT)
Date: Tue, 14 Oct 2008 16:56:11 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question regarding sorting and memory consumption in lucene
In-Reply-To: <885439.39035.qm@web26008.mail.ukl.yahoo.com>
Message-ID: <Pine.LNX.4.62.0810141635400.24614@radix.cryptio.net>
References: <885439.39035.qm@web26008.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



: Actually looking at this a little deeper maybe Lucene could/should 
: automatically be doing this "short" optimisation here?

At the moment it can't, the array's in StringIndex are public.

The other thing that would be a bit tricky is the initialization ... i 
can't think of any easy way to know in advance how many terms there are 
before iterating over all the terms, so you'd have to assume one and then 
if you're wrong copy to the other -- not sure how expensive thta copy 
would be.

It's a little more feasible for custom clients to do when they know in 
advance how many terms they've got -- but some of the existing 
FieldCacheImpl code could probably be refactoredto make it easier on 
people.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 00:43:41 2008
Return-Path: <java-user-return-36619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 376 invoked from network); 15 Oct 2008 00:43:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 00:43:41 -0000
Received: (qmail 91517 invoked by uid 500); 15 Oct 2008 00:43:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91480 invoked by uid 500); 15 Oct 2008 00:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91469 invoked by uid 99); 15 Oct 2008 00:43:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 17:43:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 00:42:30 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D3AC371C436; Tue, 14 Oct 2008 17:42:37 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id C52EC71C428
	for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 17:42:37 -0700 (PDT)
Date: Tue, 14 Oct 2008 17:42:37 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: is there an histogram feature in lucene ak Magelan
In-Reply-To: <16d405e0810131128l122f81fbp1e92b139b3d9dbf0@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0810141741010.20071@radix.cryptio.net>
References: <20081013173301.26080@gmx.net> <16d405e0810131128l122f81fbp1e92b139b3d9dbf0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Have a look at SOLR (*lucene.apache.org/solr*). It is based on Lucene and
: provides additional functionalities including faceted search.

to more generally answer you question: while you may not find a lot of 
info searching for "lucene histogram" you should find loots of info about 
achieving getting the type of info you want (using either Solr or lucene) 
by searching the web and mailing list archives for info about "faceted 
search" ... it also gets asked about quite about under the name "category 
counts"



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 00:51:16 2008
Return-Path: <java-user-return-36620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2313 invoked from network); 15 Oct 2008 00:51:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 00:51:16 -0000
Received: (qmail 97507 invoked by uid 500); 15 Oct 2008 00:51:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97466 invoked by uid 500); 15 Oct 2008 00:51:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97455 invoked by uid 99); 15 Oct 2008 00:51:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 17:51:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 00:50:03 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 1CA8471C47C; Tue, 14 Oct 2008 17:50:40 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 0701571C47A
	for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 17:50:40 -0700 (PDT)
Date: Tue, 14 Oct 2008 17:50:40 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: search with accent not match
In-Reply-To: <19963381.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0810141744420.20071@radix.cryptio.net>
References: <18848522.post@talk.nabble.com> <19963381.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="1171305770-791139370-1224031840=:20071"
X-Virus-Checked: Checked by ClamAV on apache.org

--1171305770-791139370-1224031840=:20071
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE


: http://www.blardone.org/2008/10/12/lucene-query-accented-character/

thta post appears to be specificly about a PHP function to convert UTF-8=20
characters to their HTML equivilents ... which doesn'trelaly seem relevant=
=20
to the posters question ...

: > I'm use FrenchAnalyzer for index=20
=09...
: > in my document i have the word "lumiere" and "lumi=E8re"
: >=20
: > when i search lumi=E8re only document match lumi=E8re but "lumiere" is =
not
: > return
: >=20
: > and if search "lumiere" the result is lumiere, lumieres ,lumi=E9re,lumi=
=E9res
: > but not lumi=E8re

1) you should take a look at the Luke tool to help make sense of exactly=20
what is getting indexed and how your query is getting parsed -- or just=20
write a simple java program to look at the tokens produced by your=20
analyzer.

2) the FrenchAnalyzer doesn't by default do any accent normalization (so=20
i'm not sure why your search for lumiere is even matching lumi=E9re ... but=
=20
you may want to make your own Analyzer wrapping the FrenchAnalyzer that=20
also uses the ISOLatin1AccentFilter to deal with this.

-Hoss


--1171305770-791139370-1224031840=:20071
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--1171305770-791139370-1224031840=:20071--

From java-user-return-36621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 02:33:23 2008
Return-Path: <java-user-return-36621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72577 invoked from network); 15 Oct 2008 02:33:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 02:33:23 -0000
Received: (qmail 69341 invoked by uid 500); 15 Oct 2008 02:33:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69311 invoked by uid 500); 15 Oct 2008 02:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69300 invoked by uid 99); 15 Oct 2008 02:33:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 19:33:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 02:32:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KpwBq-0001nK-4p
	for java-user@lucene.apache.org; Tue, 14 Oct 2008 19:32:46 -0700
Message-ID: <19985703.post@talk.nabble.com>
Date: Tue, 14 Oct 2008 19:32:46 -0700 (PDT)
From: mattspitz <mspitz@stanford.edu>
To: java-user@lucene.apache.org
Subject: Spellchecker Evaluation Criteria
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mspitz@stanford.edu
X-Virus-Checked: Checked by ClamAV on apache.org


So, it appears to me that the criteria for a "good suggestion" is the n-gram
overlap of a given term, not the edit distance.

Thus, if we're looking for "britney", but we mess up and type "birtney",
"kortney" will come up before "birtney."

Is there a way to force the SpellChecker to use the edit distance?  Or does
anyone have any suggestions about this?

Thanks,
Matt
-- 
View this message in context: http://www.nabble.com/Spellchecker-Evaluation-Criteria-tp19985703p19985703.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 02:36:17 2008
Return-Path: <java-user-return-36622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73448 invoked from network); 15 Oct 2008 02:36:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 02:36:17 -0000
Received: (qmail 71942 invoked by uid 500); 15 Oct 2008 02:36:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71910 invoked by uid 500); 15 Oct 2008 02:36:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71899 invoked by uid 99); 15 Oct 2008 02:36:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 19:36:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 02:35:06 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1383158wag.5
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 19:35:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=eUqAEA9Ad9NPVmWyYItw2Ye+6nsyjuOFMIJobZwKGXE=;
        b=oPhMjYEIkHY/PfIU0/jkJngzqEbkRE15Y5PeHakk8T1P4eiEAEIt9hdR0MgBrkUe2/
         J08JwtkCBxVXN0UmD9dN17MuO+YiuHDCpiRUKFPBoVSDroBHtCqlehf3SWrH3fncrui7
         ZOIl94PdOj4EeLOvi/94dmNyqb1SFCSg5tMCE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=rkEWlgirtuR68bZybBr+D4tHmlyMIkpNQJjiEIMivCCKDHEI8umF6CmFaReb/CNz9o
         ktoICPPu4p0T0P7rN78bZTFREOauXun1cu9U078VlNBzcsfYMwvo2zuHcRGbzvWy7L5R
         UswbH9h5H9RWZfOnQj+w1o8T1skJRH+R2uTU8=
Received: by 10.115.78.1 with SMTP id f1mr279891wal.150.1224038132922;
        Tue, 14 Oct 2008 19:35:32 -0700 (PDT)
Received: by 10.115.95.4 with HTTP; Tue, 14 Oct 2008 19:35:32 -0700 (PDT)
Message-ID: <6d6cf45b0810141935j4d7fb29cj6e323b40a39d8381@mail.gmail.com>
Date: Tue, 14 Oct 2008 19:35:32 -0700
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Closing Index Reader
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15650_69248.1224038132910"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15650_69248.1224038132910
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,  I am using the reopen method in the IndexReader class. In the case
of the IndexReader being updated, I would like to create a new IndexSearcher
and close the old IndexReader. When closing an instance of IndexReader, do I
have to wait for currently executing searches (through an IndexSearcher with
this instance of the IndexReader)  to complete? The javadoc states that I
should not invoke any method on the reader after the close is called, but I
am curious about the state of the searches that are using the reader when
the close is called.


I would appreciate any thoughts on the question and on my approach.


Thanks!

------=_Part_15650_69248.1224038132910--

From java-user-return-36623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 03:15:42 2008
Return-Path: <java-user-return-36623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86377 invoked from network); 15 Oct 2008 03:15:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 03:15:42 -0000
Received: (qmail 822 invoked by uid 500); 15 Oct 2008 03:15:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 794 invoked by uid 500); 15 Oct 2008 03:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 783 invoked by uid 99); 15 Oct 2008 03:15:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 20:15:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 03:14:31 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B97D371C440; Tue, 14 Oct 2008 20:15:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B625571C3FC
	for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 20:15:08 -0700 (PDT)
Date: Tue, 14 Oct 2008 20:15:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: distinct field values
In-Reply-To: <48F448E5.70902@cs.wisc.edu>
Message-ID: <Pine.LNX.4.62.0810142013180.19989@radix.cryptio.net>
References: <48F448E5.70902@cs.wisc.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: For example if I have 100 documents in my index and my set of tag = {A, B, C}.
: Query Q on the text field returns 15 docs with tag A , 10 with tag B and none
: with tag C (total of 25 hits). Is there a way to determine that the set of
: tags for query Q = {A, B} without iterating through all 25 hits.

what you are describing is is a subset of a rbaoder topic known as 
"faceted searching" ... if you search the archives for that or "category 
counts" you'll find quite a bit of discussion on the approaches that can 
be used to ahieve this.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 03:17:30 2008
Return-Path: <java-user-return-36624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86841 invoked from network); 15 Oct 2008 03:17:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 03:17:30 -0000
Received: (qmail 2708 invoked by uid 500); 15 Oct 2008 03:17:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2676 invoked by uid 500); 15 Oct 2008 03:17:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2665 invoked by uid 99); 15 Oct 2008 03:17:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 20:17:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 03:16:19 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7A7D471C469; Tue, 14 Oct 2008 20:16:26 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5E57171C44E
	for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 20:16:26 -0700 (PDT)
Date: Tue, 14 Oct 2008 20:16:26 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: querying without hits
In-Reply-To: <7b74fa660810132344o6e5f5751hb9fea14701309625@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0810142015400.19989@radix.cryptio.net>
References: <7b74fa660810132344o6e5f5751hb9fea14701309625@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Could one of you point me to an example of code for querying without using
: the deprecated class Hits ?

The demo code included with Lucene releases was updated in Lucene 2.4 so 
that it does not use the Hits class.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 03:37:08 2008
Return-Path: <java-user-return-36625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92953 invoked from network); 15 Oct 2008 03:37:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 03:37:08 -0000
Received: (qmail 14528 invoked by uid 500); 15 Oct 2008 03:37:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14500 invoked by uid 500); 15 Oct 2008 03:37:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14489 invoked by uid 99); 15 Oct 2008 03:37:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 20:37:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 03:35:56 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 5F60371C47E; Tue, 14 Oct 2008 20:36:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5BF1C71C437
	for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 20:36:03 -0700 (PDT)
Date: Tue, 14 Oct 2008 20:36:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Custom Sorting Based on Input Value
In-Reply-To: <359a92830810140520p21d6d3cfj72b58ea9d45efd5d@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0810142025100.19989@radix.cryptio.net>
References: <19963673.post@talk.nabble.com> <359a92830810140520p21d6d3cfj72b58ea9d45efd5d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: 3> maybe you could provide a custom sorter by using
: SortComparator, although you should look at the warnings
: in the API.
: 
: Now I'll wait for Hoss to say "Isn't that what XXX provides" <G>...

I can't think of anything that would solve this problem direclty, mianly 
because i can't think of any practical use for a requirement like this, 
but one way it should be possible to solve this while avoiding the 
pitfalls people run into when subclassing SortComparator would be to avoid 
SortComparator (and it's use of FieldCache.DEFAULT.getCustom) and 
implement SortComparatorSource directly ... you don't need to *cache* a 
big array of true/false booleans for when the value does or doesnt' equal 
your magic input, can use FieldCache.DEFAULT.getInt or 
FieldCache.DEFAULT.getStrings, or whatever you need directly (just like a 
normal sort) but let the compare and sortValue short circut if the value 
isn't what it needs to be.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 04:08:34 2008
Return-Path: <java-user-return-36626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2278 invoked from network); 15 Oct 2008 04:08:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 04:08:33 -0000
Received: (qmail 38240 invoked by uid 500); 15 Oct 2008 04:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38209 invoked by uid 500); 15 Oct 2008 04:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38198 invoked by uid 99); 15 Oct 2008 04:08:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 21:08:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 04:07:19 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1399360wag.5
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 21:07:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KU4mTRk+KFgA+HVhEKLl3tuDqjt52XqryfDPbci8u90=;
        b=SKZ39KbMhRWEAqsOknoNyEIyWg4PtZkR8boC6zqaxYjL+hawoTh8tSmm14XWvm57Au
         zDTqs5wHQHwqYcgfwJsuupUST+reZ77IvRF/3SUwCkFx6MpqTOk2HkJWSeapeAHY746n
         ezFm1a1OosKGhkyFRkoa3uK93kAyd00cogG6M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LuyCo1xveezWXiu1D5HRKKCqSyQ8TDob0gmnCuHGqxIVuCTgCGERni/EaMPKO+A+er
         H5yOGTRCDCK4TC5TBdXR6brfZiXHyiKi2A7Z2qGuNOwDsgZElAwODrPwWmlgdLOEe9IR
         pe60pk9PUXP1m2bDvf3baKyoA26N5PGA83SfY=
Received: by 10.114.46.11 with SMTP id t11mr315814wat.211.1224043666113;
        Tue, 14 Oct 2008 21:07:46 -0700 (PDT)
Received: by 10.115.95.4 with HTTP; Tue, 14 Oct 2008 21:07:46 -0700 (PDT)
Message-ID: <6d6cf45b0810142107x7e2d8621l70c55af6657db613@mail.gmail.com>
Date: Tue, 14 Oct 2008 21:07:46 -0700
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: distinct field values
In-Reply-To: <Pine.LNX.4.62.0810142013180.19989@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16173_8196968.1224043666112"
References: <48F448E5.70902@cs.wisc.edu>
	 <Pine.LNX.4.62.0810142013180.19989@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16173_8196968.1224043666112
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,  You may also want to take a look at Carrot2:
http://demo.carrot2.org/demo-stable/main

Lucene documentation references them, but I was disappointed to see that
they had an open source version (really old) and one that you can buy. It
may work for you.

Also, take a look at SOLR's implementation of faceted searching:
http://wiki.apache.org/solr/SolrFacetingOverview

I have been dealing with a very similar problem.  Iterating over all the
hits may not be too slow if you do it right. One such brute-force way to
deal with this is to use the FieldCache for the tag field to quickly iterate
over all the document ids that came back with the search.  The constant
lookup time in an array makes it nice and easy, but if may not scale well
with the number of documents. If you know that the number of distinct tags
in your dataset is fairly small (5-10), you can always just run the query
with each tag added as a constraint to find out if there are any matches or
you can manage a filter for each value to deduce if it exists in the
resultset even faster.


 Please share your experience as you find more clues on this problem.



Regards,
Khawaja Shams

On Tue, Oct 14, 2008 at 8:15 PM, Chris Hostetter
<hossman_lucene@fucit.org>wrote:

>
> : For example if I have 100 documents in my index and my set of tag = {A,
> B, C}.
> : Query Q on the text field returns 15 docs with tag A , 10 with tag B and
> none
> : with tag C (total of 25 hits). Is there a way to determine that the set
> of
> : tags for query Q = {A, B} without iterating through all 25 hits.
>
> what you are describing is is a subset of a rbaoder topic known as
> "faceted searching" ... if you search the archives for that or "category
> counts" you'll find quite a bit of discussion on the approaches that can
> be used to ahieve this.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16173_8196968.1224043666112--

From java-user-return-36627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 04:32:50 2008
Return-Path: <java-user-return-36627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12416 invoked from network); 15 Oct 2008 04:32:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 04:32:50 -0000
Received: (qmail 53644 invoked by uid 500); 15 Oct 2008 04:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53612 invoked by uid 500); 15 Oct 2008 04:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53601 invoked by uid 99); 15 Oct 2008 04:32:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 21:32:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 04:31:35 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2750038wfc.20
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 21:32:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8vDo4X9waPhG+Iy62g7BvQmF++u/w2eC47LNPIkV/yk=;
        b=qpr8tIiY61Li8nUjBWnI3tjWsYcrZzlVuzZoz7oUNqiR+fg62k6Ji4Nvi1dgZTdZ3P
         Xg9T52ZquCOtO1jbVYWDZerxN/ER0BVbY/DDHA8UXwU6xH4Bg1DgxAIgQHL29HgZ+9C4
         arbc0iOY8HyvOLO5/UI+AnS6Fk6NF9xKAwL0E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FscQaPyhv8Oz+RnUGQEp5+PR/lAuYE0b+t3qpeRsfzriqa/oRQPTXlhc0tBLayb8dP
         6Thr5zAjewtekh0sV/igKw6tDW3WrrrtkCKICqnTtRVNd5wh0tO+7DEllU70kJZQ5x1n
         PyOW5HLHT/Vhu0mDblykl/JBZouTgOs4wqkXo=
Received: by 10.142.104.9 with SMTP id b9mr225759wfc.82.1224045133096;
        Tue, 14 Oct 2008 21:32:13 -0700 (PDT)
Received: by 10.142.49.5 with HTTP; Tue, 14 Oct 2008 21:32:13 -0700 (PDT)
Message-ID: <867513fe0810142132g7b9f0bd1qde7aed304dc99c06@mail.gmail.com>
Date: Wed, 15 Oct 2008 10:02:13 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: distinct field values
In-Reply-To: <48F4F0D5.5010308@cs.wisc.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16950_26907391.1224045133090"
References: <48F448E5.70902@cs.wisc.edu>
	 <867513fe0810140054l6be2bcdcoe1592cd2864816f2@mail.gmail.com>
	 <48F4F0D5.5010308@cs.wisc.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16950_26907391.1224045133090
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could go through this implementation. Have been using this (improvised)
for a while now. There might be better ways to do so too. so you could
check!

http://www.gossamer-threads.com/lists/lucene/java-user/35704?search_string=categorycounts;#35704
--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Oct 15, 2008 at 12:49 AM, Akanksha Baid <baid@cs.wisc.edu> wrote:

> Is there something I could do to Index the documents differently to
> accomplish this? Currently I am looking at all the hits to generate the set
> of tags for the query.
> If I need to implement the same thing within Lucene, I am not sure if I
> will gain anything performance wise. Or am I wrong about this?
>
>
>
>
> Anshum wrote:
>
>> Hi,
>>
>> You could try changing (or extending) TopFieldDocCollector and do your
>> processing there (that is what I tried... and it worked fine). But that
>> would mean changing lucene code a little bit.
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Tue, Oct 14, 2008 at 12:53 PM, Akanksha Baid <baid@cs.wisc.edu> wrote:
>>
>>  I have indexed multiple documents - each of them have 3 fields ( id, tag
>>> ,
>>> text). Is there an easy way to determine the set of tags for a given
>>> query
>>> without iterating through all the hits?
>>> For example if I have 100 documents in my index and my set of tag = {A,
>>> B,
>>> C}. Query Q on the text field returns 15 docs with tag A , 10 with tag B
>>> and
>>> none with tag C (total of 25 hits). Is there a way to determine that the
>>> set
>>> of tags for query Q = {A, B} without iterating through all 25 hits.
>>>
>>> Any ideas?
>>>
>>> Thanks!
>>> Akanksha
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16950_26907391.1224045133090--

From java-user-return-36628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 05:06:23 2008
Return-Path: <java-user-return-36628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22057 invoked from network); 15 Oct 2008 05:06:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 05:06:23 -0000
Received: (qmail 75667 invoked by uid 500); 15 Oct 2008 05:06:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75629 invoked by uid 500); 15 Oct 2008 05:06:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75618 invoked by uid 99); 15 Oct 2008 05:06:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 22:06:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 05:05:10 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m9F55aBs001077
	for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 08:05:36 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m-hbow6a; 15 Oct 2008 08:05:00 +0300
Message-ID: <48F57A18.7090905@teamware.com>
Date: Wed, 15 Oct 2008 16:05:28 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: distinct field values
References: <48F448E5.70902@cs.wisc.edu>
In-Reply-To: <48F448E5.70902@cs.wisc.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 15 Oct 2008 08:05:36 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Akanksha Baid wrote:
> I have indexed multiple documents - each of them have 3 fields ( id, tag 
> , text). Is there an easy way to determine the set of tags for a given 
> query without iterating through all the hits?
> For example if I have 100 documents in my index and my set of tag = {A, 
> B, C}. Query Q on the text field returns 15 docs with tag A , 10 with 
> tag B and none with tag C (total of 25 hits). Is there a way to 
> determine that the set of tags for query Q = {A, B} without iterating 
> through all 25 hits.

Another way is to use a HitCollector to collect all the hits into a Map and then 
use TermEnum + TermDocs to walk the tags / docs and see what tag the hit comes 
from.  This would be different to walking the Hits/Documents to fetch the tag 
from the Document.  Not sure if this is very efficient though, depends on the 
Document count.

Antony





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 05:14:05 2008
Return-Path: <java-user-return-36629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24288 invoked from network); 15 Oct 2008 05:14:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 05:14:05 -0000
Received: (qmail 82594 invoked by uid 500); 15 Oct 2008 05:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82552 invoked by uid 500); 15 Oct 2008 05:13:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82540 invoked by uid 99); 15 Oct 2008 05:13:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 22:13:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.43.219.9] (HELO web8315.mail.in.yahoo.com) (202.43.219.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Oct 2008 05:12:49 +0000
Received: (qmail 33274 invoked by uid 60001); 15 Oct 2008 05:12:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=bkP1CJIF4fl0cBVs9hJkiq5ftxAFTPfzDRXwekgIEqrmKz42DWrP0vTCndKSat1jAK0rq6fa0sWixsOda8yskCZiUYiYSI2zJAy84TR4R4qAzGGZhz/ptaqOOJpFd9IYobSYQ7kF7kf8qqt4CbQ9r/ViSESY/VHCIP1jZg6gNrc=;
X-YMail-OSG: 7N35z2gVM1lmp_4FJ7GjmcwsyaGSwSYI_jwUd8YuIvsE3iXMn.z6rx9Jfs47hwELopRxXiwleFCSreSkiHuKSiCvVxYn.MTIKcN5bZVYKXEpV9A4o_fP2SM8xrxb6Xq2z_jVmRFP7M7bcQa7l7d.d3pnRWm8NsiPdaCOwoaMWQpRd89y84k-
Received: from [192.251.134.5] by web8315.mail.in.yahoo.com via HTTP; Wed, 15 Oct 2008 10:42:22 IST
X-Mailer: YahooMailWebService/0.7.218.2
Date: Wed, 15 Oct 2008 10:42:22 +0530 (IST)
From: prabina pattanayak <prabina007@yahoo.co.in>
Reply-To: prabina007@yahoo.co.in
Subject: I am not able to run Lucene 2.4 Demo
To: java-user@lucene.apache.org, java-user-owner@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-320863723-1224047542=:32859"
Message-ID: <129036.32859.qm@web8315.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-320863723-1224047542=:32859
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi All,
i am a beginner to Lucene.=C2=A0
and i am trying to use Lucene 2.4.
when i have set lucene-core-2.4.0.jar & lucene-demos-2.4.0.jar in my CLASSP=
ATH. and trying to run:
=C2=A0=C2=A0=C2=A0=C2=A0 =C2=A0java org.apache.lucene.demo.IndexFiles E:\pr=
abina\lucene-2.4demo\src
it shows the error:
caught a class java.io.FileNotFoundException
with message: no segments* file found in org.apache.lucene.store.FSDirector=
y@E:\prabina\lucene-2.4demo\index: files:=20
but it creates the index folder in my current directory. but the index fold=
er is empty. no segments files are there.
=C2=A0
plz, help me out from this problem ASAP.
=C2=A0
=0A=0A=0A      Add more friends to your messenger and enjoy! Go to http://m=
essenger.yahoo.com/invite/
--0-320863723-1224047542=:32859--

From java-user-return-36630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 05:17:26 2008
Return-Path: <java-user-return-36630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25291 invoked from network); 15 Oct 2008 05:17:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 05:17:25 -0000
Received: (qmail 85495 invoked by uid 500); 15 Oct 2008 05:17:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85454 invoked by uid 500); 15 Oct 2008 05:17:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85441 invoked by uid 99); 15 Oct 2008 05:17:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 22:17:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 05:16:13 +0000
Received: by mu-out-0910.google.com with SMTP id i10so2530294mue.5
        for <java-user@lucene.apache.org>; Tue, 14 Oct 2008 22:16:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lVe6wm0iDiDMsFhbX97DWL9NwMBTeevnvV9be9rU5zM=;
        b=xmMdnUZ6JWEMdov2092bRhEvMHYyL3NnZwyM8z8zjBQWgAL2wzobJEgkNzOsahYAaf
         5NcJ01AZicaVM13pZTW1zItdd595NqQ8FwsXR1pq/c0iDEP5QTkNyp9GaB11i2p2iQ9G
         C6reCXSWlKs9fjN5AvJALLPMe3GoOqjWYkOGg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qjY9b01nSqx344HPtNrh57OfgBQiqlcBeXSCfYfR7ysWPklX1uN+9tr7P6nhxANIm0
         8/x0yB1g4mYzlZfrF7O/Ftp5+m/xOKpnIuc2dqW7J0fRuQwA0Pulg2CZsxhkb+XMKsgR
         HmTZKdcbPnUU6Wmtn88TZZayuWFQwC45HwFNI=
Received: by 10.142.173.8 with SMTP id v8mr230166wfe.266.1224047798547;
        Tue, 14 Oct 2008 22:16:38 -0700 (PDT)
Received: by 10.142.49.5 with HTTP; Tue, 14 Oct 2008 22:16:38 -0700 (PDT)
Message-ID: <867513fe0810142216p1009bcfai8377377b09d46433@mail.gmail.com>
Date: Wed, 15 Oct 2008 10:46:38 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching sets of documents
In-Reply-To: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17395_30303942.1224047798525"
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17395_30303942.1224047798525
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Spring,

If I got your question correctly, you want to search for Folders/Docs
depending on the condition, right!
Why don't you index the folder name as well and so you could fire a query
saying
Folder:A and (TEXT:x and TEXT:y)
So here the search would run only on folder A for the keywords.

In case you only want to search for docs in folder A you could run a search
only on the indexed 'Folder' field. i.e. Folder:A

Hope this solves the problem.
--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Sun, Oct 12, 2008 at 11:41 PM, <spring@gmx.eu> wrote:

> Hi,
>
> I want to search for sets of documents. For instance I index some folders
> with documents in it and now I do not want to find certain documents but
> folders.
>
> Sample:
>
> folder A
>  doc 1, contains X, Y
>  doc 2, contains Y, Z
>
> folder B
>  doc 3, contains X, Y
>  doc 4, contains A, Z
>
> Now I want to find all folders which match "A AND Y" -> folder B.
>
> How can this be done?
>
> Thank you
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17395_30303942.1224047798525--

From java-user-return-36631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 05:30:11 2008
Return-Path: <java-user-return-36631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34308 invoked from network); 15 Oct 2008 05:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 05:30:11 -0000
Received: (qmail 95858 invoked by uid 500); 15 Oct 2008 05:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95821 invoked by uid 500); 15 Oct 2008 05:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95810 invoked by uid 99); 15 Oct 2008 05:30:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 22:30:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 05:28:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kpyts-0007UI-2c
	for java-user@lucene.apache.org; Tue, 14 Oct 2008 22:26:24 -0700
Message-ID: <19986937.post@talk.nabble.com>
Date: Tue, 14 Oct 2008 22:26:23 -0700 (PDT)
From: lekamm <camille.blardone@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search with accent not match
In-Reply-To: <Pine.LNX.4.62.0810141744420.20071@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: camille.blardone@gmail.com
References: <18848522.post@talk.nabble.com> <19963381.post@talk.nabble.com> <Pine.LNX.4.62.0810141744420.20071@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


http://www.blardone.org/2008/10/12/lucene-query-accented-character/

Is specific about Php, but can be easily use try to solve the same problem
in Java.

I had the same problem as "Christophe from paris", and changing the query t=
o
it's html encoded equivalent makes my search queries work.

So Perhaps, Chris could try to html encode it's queries that contains accen=
t
and see if more results are returned.

And sorry if it is php only solution.



hossman wrote:
>=20
>=20
> : http://www.blardone.org/2008/10/12/lucene-query-accented-character/
>=20
> thta post appears to be specificly about a PHP function to convert UTF-8=
=20
> characters to their HTML equivilents ... which doesn'trelaly seem relevan=
t=20
> to the posters question ...
>=20
> : > I'm use FrenchAnalyzer for index=20
> =09...
> : > in my document i have the word "lumiere" and "lumi=C3=A8re"
> : >=20
> : > when i search lumi=C3=A8re only document match lumi=C3=A8re but "lumi=
ere" is not
> : > return
> : >=20
> : > and if search "lumiere" the result is lumiere, lumieres
> ,lumi=C3=A9re,lumi=C3=A9res
> : > but not lumi=C3=A8re
>=20
> 1) you should take a look at the Luke tool to help make sense of exactly=
=20
> what is getting indexed and how your query is getting parsed -- or just=
=20
> write a simple java program to look at the tokens produced by your=20
> analyzer.
>=20
> 2) the FrenchAnalyzer doesn't by default do any accent normalization (so=
=20
> i'm not sure why your search for lumiere is even matching lumi=C3=A9re ..=
. but=20
> you may want to make your own Analyzer wrapping the FrenchAnalyzer that=
=20
> also uses the ISOLatin1AccentFilter to deal with this.
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--=20
View this message in context: http://www.nabble.com/search-with-accent-not-=
match-tp18848522p19986937.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 06:40:15 2008
Return-Path: <java-user-return-36632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76748 invoked from network); 15 Oct 2008 06:40:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 06:40:14 -0000
Received: (qmail 58004 invoked by uid 500); 15 Oct 2008 06:40:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57977 invoked by uid 500); 15 Oct 2008 06:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57953 invoked by uid 99); 15 Oct 2008 06:40:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 23:40:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Oct 2008 06:39:01 +0000
Received: (qmail 6830 invoked by uid 60001); 15 Oct 2008 06:39:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=qqgdGGdVFPeL14J+b1OGRVVXeNrBuT/SGRHJ2FmFLp92BolTGpRWWekZ8DMvqit+mOTSovlD9+0Bzu+K1EwwO+FABMuA6pg2idF6eYwRobW433yl61112mbUl04883n8dXXHX7/LtJC+kN8GMiqLsFAt5b7ULjgowAky64MeKjo=;
X-YMail-OSG: Q7uS9HEVM1mngF5LkYQv3gDep5l_ByFphf6b3tT.Jqsus9K1Su_UvaaSsyVGDzXvwfp5.3XenER.iEX0AfiMbEMOCf9LdRQnoOzFWGz5WeLnZ6uPArqaa62E6V8VuHombiG_XeqsLgpL5tF9WBHnZytBfsYe2Dsg80BftPo1bTLECfWzewQ-
Received: from [87.248.121.30] by web26001.mail.ukl.yahoo.com via HTTP; Wed, 15 Oct 2008 06:39:35 GMT
X-Mailer: YahooMailWebService/0.7.247.3
Date: Wed, 15 Oct 2008 06:39:35 +0000 (GMT)
From: Mark Harwood <markharw00d@yahoo.co.uk>
Subject: Re: Question regarding sorting and memory consumption in lucene
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <599306.4376.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, StringIndex's public fields make life awkward.  Re initialization - I =
did think you could try use arrays of byte arrays. First 256 terms can be a=
ddressed using just one byte array, on encountering a 257th term an extra b=
yte array is allocated. References to terms then require indexing into 2 by=
te arrays and bit shifting the 2nd byte to produce a comibined short which =
can address up to 65k terms held in a term pool. =0A=0AWhen sorting, a fast=
 comparison of 2 values can avoid always indexing into all byte arrays and =
shifting to produce a number. Simply comparing entries from the most signif=
icant byte array first can reveal a difference in order, if equal then comp=
aring  bytes from the next most significant byte array is required and so o=
n. =0A=0ANot sure how this would perform compared to simply upgrading whole=
 byte arrays to shorts to ints as you go. =0A=0ACheers,=0AMark=0A=0AOn 15 O=
ct 2008, at 00:56, Chris Hostetter <hossman_lucene@fucit.org> wrote:=0A=0A=
=0A=0A: Actually looking at this a little deeper maybe Lucene could/should =
=0A: automatically be doing this "short" optimisation here?=0A=0AAt the mom=
ent it can't, the array's in StringIndex are public.=0A=0AThe other thing t=
hat would be a bit tricky is the initialization ... i =0Acan't think of any=
 easy way to know in advance how many terms there are =0Abefore iterating o=
ver all the terms, so you'd have to assume one and then =0Aif you're wrong =
copy to the other -- not sure how expensive thta copy =0Awould be.=0A=0AIt'=
s a little more feasible for custom clients to do when they know in =0Aadva=
nce how many terms they've got -- but some of the existing =0AFieldCacheImp=
l code could probably be refactoredto make it easier on =0Apeople.=0A=0A=0A=
=0A-Hoss=0A=0A=0A----------------------------------------------------------=
-----------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=
=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 06:56:19 2008
Return-Path: <java-user-return-36633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80868 invoked from network); 15 Oct 2008 06:56:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 06:56:19 -0000
Received: (qmail 80444 invoked by uid 500); 15 Oct 2008 06:56:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79926 invoked by uid 500); 15 Oct 2008 06:56:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79914 invoked by uid 99); 15 Oct 2008 06:56:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Oct 2008 23:56:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.127] (HELO smtp144.mail.mud.yahoo.com) (209.191.107.127)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Oct 2008 06:55:03 +0000
Received: (qmail 57220 invoked from network); 15 Oct 2008 06:55:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=ibVp/P6whIP9cnonAwGOf+iozNL2AxoU027WEDgYKxSwA+ziFedwzQBoxOhL7USZiNQwscalLBrsoVXG+C9ORoU3z+524ZIu0Wqmlvi9RL45hri3JR9WqrV9Fu6NA4s9FHZEF7GlugKIUQiguwRizkVkV70T3TkPJSu0wY4LnRI=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp144.mail.mud.yahoo.com with SMTP; 15 Oct 2008 06:55:37 -0000
X-YMail-OSG: I37JeOgVM1nR9iVAbgQ2_AU6B1HXOzWDsr9wRJm93AB6g.BZYqmBMY7ZBzL2k80t8K22OnIaw4vAV.2ttIZ_HqWYM4WhXppkZvxEUbLVvO.ahT_raMXeRwWoZKvv80zHaTUxRBU7cD2NE0Ek2CVirYqpOxjZDiHLZnaGpDf3KurufFdEpeax6VrH30MC
X-Yahoo-Newman-Property: ymail-3
Message-ID: <014501c92e93$06a1ff80$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <84CF21F6CDF84CC382CA59AEFEC460D4@msrvcn04> <9233ccac0810121727n171a2b10ka649cd3b51fc6007@mail.gmail.com> <1AF02086165F4369B3744AC60B20DAD4@msrvcn04> <9233ccac0810131743x51fa89hcc4aaacfece64c38@mail.gmail.com> <00ca01c92dd8$a2745a90$330bc30a@sv.us.sonicwall.com> <20081014091109.3180@gmx.net> <010101c92deb$e9363c60$330bc30a@sv.us.sonicwall.com> <20081014125025.3160@gmx.net>
Subject: Re: Searching sets of documents
Date: Wed, 15 Oct 2008 12:25:32 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry. I misunderstood.

As Karsten suggested, perform search for each term and do the logical 
operation on the collected hits.

Regards
Ganesh


----- Original Message ----- 
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Sent: Tuesday, October 14, 2008 6:20 PM
Subject: Re: Searching sets of documents


> The problem is the logical combination of documents in folders not of 
> terms in documents.
> See original post.
>
> -------- Original-Nachricht --------
>> Datum: Tue, 14 Oct 2008 16:29:15 +0530
>> Von: "Ganesh" <emailgane@yahoo.co.in>
>> An: java-user@lucene.apache.org
>> Betreff: Re: Searching sets of documents
>
>> What is your problem?
>>
>> If the foldernames are already stored then it could be retrieved from
>> search. Use DuplicateFilter on field "foldername" to get the unique list
>> of
>> folders.
>> Hope this helps.
>>
>> Regards
>> Ganesh
>>
>>
>> ----- Original Message ----- 
>> From: <spring@gmx.eu>
>> To: <java-user@lucene.apache.org>
>> Sent: Tuesday, October 14, 2008 2:41 PM
>> Subject: Re: Searching sets of documents
>>
>>
>> > The folder name and the document name are stored for each document.
>> >
>> > -------- Original-Nachricht --------
>> >> Datum: Tue, 14 Oct 2008 14:11:09 +0530
>> >> Von: "Ganesh" <emailgane@yahoo.co.in>
>> >> An: java-user@lucene.apache.org
>> >> Betreff: Re: Searching sets of documents
>> >
>> >> You should have stored the foldername or fullpath of the file as part
>> of
>> >> Lucene document otherwise it is difficult to retrieve.
>> >>
>> >> Regards
>> >> Ganesh
>> >>
>> >> ----- Original Message ----- 
>> >> From: "" <yeshuangming@gmail.com>
>> >> To: <java-user@lucene.apache.org>
>> >> Sent: Tuesday, October 14, 2008 6:13 AM
>> >> Subject: Re: Searching sets of documents
>> >>
>> >>
>> >> >I don't understand your problem?
>> >> > do you index file but want to search folder which contain the files?
>> >> >
>> >> > when you want to search folder, you can index folder, the data is 
>> >> > all
>> >> > files
>> >> > under it.
>> >> >
>> >> > 2008/10/13 <spring@gmx.eu>
>> >> >
>> >> >> The docs are already indexed.
>> >> >>
>> >> >> > -----Original Message-----
>> >> >> > From: ??? [mailto:yeshuangming@gmail.com]
>> >> >> > Sent: Montag, 13. Oktober 2008 02:28
>> >> >> > To: java-user@lucene.apache.org
>> >> >> > Subject: Re: Searching sets of documents
>> >> >> >
>> >> >> > all folders which match "A AND Y", do you search for file name?
>> >> >> > If yes, A or Y in "A AND Y" is a Strring too, so you can do it 
>> >> >> > by:
>> >> >> > construct a Lucene Document for each folder, and name of
>> >> >> > files under the
>> >> >> > folder is the search data.
>> >> >> >
>> >> >> > 2008/10/13 <spring@gmx.eu>
>> >> >> >
>> >> >> > > Hi,
>> >> >> > >
>> >> >> > > I want to search for sets of documents. For instance I
>> >> >> > index some folders
>> >> >> > > with documents in it and now I do not want to find certain
>> >> >> > documents but
>> >> >> > > folders.
>> >> >> > >
>> >> >> > > Sample:
>> >> >> > >
>> >> >> > > folder A
>> >> >> > >  doc 1, contains X, Y
>> >> >> > >  doc 2, contains Y, Z
>> >> >> > >
>> >> >> > > folder B
>> >> >> > >  doc 3, contains X, Y
>> >> >> > >  doc 4, contains A, Z
>> >> >> > >
>> >> >> > > Now I want to find all folders which match "A AND Y" -> folder
>> B.
>> >> >> > >
>> >> >> > > How can this be done?
>> >> >> > >
>> >> >> > > Thank you
>> >> >> > >
>> >> >> > >
>> >> >> > >
>> >> >> > >
>> >> >> >
>> ---------------------------------------------------------------------
>> >> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> > > For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>> >> >> > >
>> >> >> > >
>> >> >> >
>> >> >> >
>> >> >> > --
>> >> >> > Sorry for my English!! ?
>> >> >> > Please help me correct my English expression and error in syntax
>> >> >> >
>> >> >>
>> >> >>
>> >> >>
>> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >> >
>> >> > -- 
>> >> > Sorry for my English!! 
>> >> > Please help me correct my English expression and error in syntax
>> >> >
>> >>
>> >> Send instant messages to your online friends
>> >> http://in.messenger.yahoo.com
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 07:01:35 2008
Return-Path: <java-user-return-36634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82152 invoked from network); 15 Oct 2008 07:01:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 07:01:33 -0000
Received: (qmail 83381 invoked by uid 500); 15 Oct 2008 07:01:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83348 invoked by uid 500); 15 Oct 2008 07:01:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83337 invoked by uid 99); 15 Oct 2008 07:01:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 00:01:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul.joseph.davis@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 07:00:22 +0000
Received: by qw-out-2122.google.com with SMTP id 5so725532qwi.53
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 00:00:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=vGghU5WMe6u+nWr76eXqYTU2IVhiWywFsSJFMkzfU88=;
        b=Xm+ZIMMP4Wgc4jKp37wB3CcPZ2WYxqwchq05jzHiz5ayLC7KfMf2drW5XgD3mMGD33
         MPjlmaIiT8zkKemhtpifXgwGaiDy5WzsuuvnEQuBXZGzaK9RW3V5TiVdvczmOje1stgk
         7J0enBELfKRt99RnPSHbMNzowqIw4ADf497+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=lqyZ7PtoL88UBoDSPP3U/KqCUH800Rb471JatKJlKv4Bgnun5tp13/eDcUwSrkpkeq
         uYE4/8cy5WeaqMJtoMWaU8y6jKsZ3IfpvtdZkRdmeWsYsY5DppfNCsrLBmHuv0T6xmQu
         6MJWfU6iZtN+m0GjdNHPuv6urVi5IRv8zDHEA=
Received: by 10.214.79.6 with SMTP id c6mr516944qab.39.1224054058295;
        Wed, 15 Oct 2008 00:00:58 -0700 (PDT)
Received: by 10.214.215.21 with HTTP; Wed, 15 Oct 2008 00:00:58 -0700 (PDT)
Message-ID: <e2111bbb0810150000u7797f5ddpe2f457f7e03b7826@mail.gmail.com>
Date: Wed, 15 Oct 2008 03:00:58 -0400
From: "Paul Davis" <paul.joseph.davis@gmail.com>
To: java-user@lucene.apache.org
Subject: Terms Matching Query
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hopefully I'm not double posting this, but I haven't seen it show up
in the archive and I got a weird rejection email from
metalwaternews.com so I'll try again.

I'm working on indexing JSON documents via Lucene and I've run into a
bit of a snag. Currently, I'm indexing JSON documents by adding fields
that are path/value pairs. For example, given a JSON document like:

{
 "name":
   {
     "first": "Paul",
     "last": "Davis"
   }
 "jobs": ["hotdog vendor", "signboard guy"]
}

I build the doc with something like:

doc.add(new Field("/name/first", "Paul", ...))
doc.add(new Field("/name/last", "Davis", ...))
doc.add(new Field("/jobs/$0", "hotdog vendor", ...))
doc.add(new Field("/jobs/$1", "signboard guy", ...))

doc.add(new Field("__JSON_PATH__", "/name/first", ...))
doc.add(new Field("__JSON_PATH__", "/name/last", ...))
doc.add(new Field("__JSON_PATH__", "/jobs/$0", ...))
doc.add(new Field("__JSON_PATH__", "/jobs/$1", ...))

Now, at query time I'm attempting to support expanding searches as such:

alias:Paul
(OOB) alias =  "name.*" => __JSON_PATH__:name.*

Which would get expanded to the obvious "name.first:Paul
name.last:Paul". I was planning on just doing a search for
__JSON_PATH__:name.* collecting the terms and doing an OR like what
the old Prefix/Range queries. (I think I read that RangeQueries are
different now, but right now I'm going for Make It Work)

So anyway, long story short, is there a way to get just the list of
terms that match an arbitrary lucene query?

I tried poking at Query.extractTerms(Set terms) but it appears to fall
down for RangeQueries. I contemplated telling the query parser to use
old range queries, but wasn't sure if a different type of query would
cause the same problems or not. I've started just creating unique
documents for each possible path, but that seems like a Bad Idea (TM).

Any thoughts on ways to completely rework the whole system would also
be welcome. I'm relative new to Lucene so I may be completely screwing
the pooch on something I'm not even aware of.

Thanks,
Paul Davis

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 08:37:03 2008
Return-Path: <java-user-return-36635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20442 invoked from network); 15 Oct 2008 08:37:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 08:37:03 -0000
Received: (qmail 9350 invoked by uid 500); 15 Oct 2008 08:36:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9298 invoked by uid 500); 15 Oct 2008 08:36:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9287 invoked by uid 99); 15 Oct 2008 08:36:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 01:36:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.106.59] (HELO smtp148.mail.mud.yahoo.com) (209.191.106.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Oct 2008 08:35:46 +0000
Received: (qmail 70740 invoked from network); 15 Oct 2008 08:35:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=XTDiHKc/XBfIWzuTYtaqto94fPN5Ox8tzYf34iiJDqxbTzwy2TOBkDTzcgTePGg3migTUHTtVyllN1iU2r1PLLYgchC9DGlvIilJjCltC6ejhKIVpuB/zvaVaKZJ71lGnkhqokEvtmYAJXFrpPVvX+OPtBFdmzChvanvYs8dyOI=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp148.mail.mud.yahoo.com with SMTP; 15 Oct 2008 08:35:22 -0000
X-YMail-OSG: msjLJekVM1mjGZW1Lbnd9inD4GsYEWLzJqhU2tobiWxLato8eZdwq10vmTglXKNOakbdoe6v0nlWORjrp6C7.SXSlyeP6AwH1.XtomaBjOB3DHOrS8iZZUwev3f.DiHdGxfgS4J3jgzgVs3AP05J794D
X-Yahoo-Newman-Property: ymail-3
Message-ID: <01b801c92ea0$fa9343d0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <1224016510.25845.ezmlm@lucene.apache.org> <4356e7730810141357q19f81ddi1342aa4d9bcad2fc@mail.gmail.com>
Subject: Re: WELCOME to java-user@lucene.apache.org
Date: Wed, 15 Oct 2008 14:05:23 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene will not be able to directly index the files. You need to write a 
parser to parse the files and provide its contents.

In case if a file got modifed after index, then you need to re-index its 
content.

Regards
Ganesh

----- Original Message ----- 
From: "Chris Gilliam" <chris.gilliam.email.list@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, October 15, 2008 2:27 AM
Subject: Re: WELCOME to java-user@lucene.apache.org


> Hello Everyone,
> New to Lucene..
>
> We currently roughly 100Gig of log files.  We are needing to build a 
> search
> application that can return rows of data from the files and combine the
> results?
>
> Does Lucene index the content in the files?
>
> Will it be able to find  matching criteria say a date and then return the
> next X number of lines?
>
> The indexing piece, how does it work if I am looking for something that 
> has
> been added to the file since the indexing has taken place?
>
> Thanks,
> Chris
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 08:50:30 2008
Return-Path: <java-user-return-36636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23943 invoked from network); 15 Oct 2008 08:50:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 08:50:30 -0000
Received: (qmail 29480 invoked by uid 500); 15 Oct 2008 08:50:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29231 invoked by uid 500); 15 Oct 2008 08:50:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29220 invoked by uid 99); 15 Oct 2008 08:50:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 01:50:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 08:49:14 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2521622rvb.5
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 01:49:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=pNo/ysqHe1eJ7PCGCfwZUyK3e16LTa3JYcKeXRbCdg0=;
        b=v2QgEvYYbRW7kOugziLL+2wguHMDwj5+8T/vdgAkIWaybrOTQd0+RVqpnzPFmg1qiA
         G+3trYTPfYxUrvw5OJFjkdO75FuPzyqIKvL8Dl0CcdiqtVgrJX75IZQLaLmSSMS1O0it
         NAlQuargZrhnLTzhTwX/9JBg9NrmalqpX55+E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=X8XiDCYWDuBRfBQ0Yxj6py527gfOVZEF7AkrDQfOiLo09LCWniaowB/M635g8UkrhR
         tb+ZeSnsvOMIaUbgx86JLQbvHYPNFm5bbdPfl1HjYm+Ms6hErfAa1gzNvSNMJ8PqAuH1
         H6X4eWIf8nHaupyPFhX8CksTumHaY3K2gYm7o=
Received: by 10.140.132.3 with SMTP id f3mr424488rvd.71.1224060582478;
        Wed, 15 Oct 2008 01:49:42 -0700 (PDT)
Received: by 10.141.105.12 with HTTP; Wed, 15 Oct 2008 01:49:42 -0700 (PDT)
Message-ID: <52c3ddca0810150149g17bb4327v9d5fdc53de940dd0@mail.gmail.com>
Date: Wed, 15 Oct 2008 10:49:42 +0200
From: "=?ISO-8859-2?Q?Luk=E1=B9_Vl=E8ek?=" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WELCOME to java-user@lucene.apache.org
In-Reply-To: <01b801c92ea0$fa9343d0$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18149_1633493.1224060582438"
References: <1224016510.25845.ezmlm@lucene.apache.org>
	 <4356e7730810141357q19f81ddi1342aa4d9bcad2fc@mail.gmail.com>
	 <01b801c92ea0$fa9343d0$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18149_1633493.1224060582438
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

it has been a while when I was working with Compass but as far as I remember
someone reported that he was successful in indexing filesystem via JCR
(Jackrabbit). Try searching in Compass forum (
http://forum.compass-project.org/index.jspa). May be this would be useful to
you.

Regards,
Lukas

On Wed, Oct 15, 2008 at 10:35 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Lucene will not be able to directly index the files. You need to write a
> parser to parse the files and provide its contents.
>
> In case if a file got modifed after index, then you need to re-index its
> content.
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Chris Gilliam" <
> chris.gilliam.email.list@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, October 15, 2008 2:27 AM
> Subject: Re: WELCOME to java-user@lucene.apache.org
>
>
>
>  Hello Everyone,
>> New to Lucene..
>>
>> We currently roughly 100Gig of log files.  We are needing to build a
>> search
>> application that can return rows of data from the files and combine the
>> results?
>>
>> Does Lucene index the content in the files?
>>
>> Will it be able to find  matching criteria say a date and then return the
>> next X number of lines?
>>
>> The indexing piece, how does it work if I am looking for something that
>> has
>> been added to the file since the indexing has taken place?
>>
>> Thanks,
>> Chris
>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://blog.lukas-vlcek.com/

------=_Part_18149_1633493.1224060582438--

From java-user-return-36637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 08:58:58 2008
Return-Path: <java-user-return-36637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26688 invoked from network); 15 Oct 2008 08:58:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 08:58:57 -0000
Received: (qmail 40665 invoked by uid 500); 15 Oct 2008 08:58:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40640 invoked by uid 500); 15 Oct 2008 08:58:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40629 invoked by uid 99); 15 Oct 2008 08:58:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 01:58:51 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=FM_RE_HELLO_SPAM,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.115] (HELO smtp132.mail.mud.yahoo.com) (209.191.107.115)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Oct 2008 08:57:41 +0000
Received: (qmail 80891 invoked from network); 15 Oct 2008 08:57:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=kr07hyIURoOyfWEkR2DvsID+a8BhS384cFJ87ckSl2EjFgsKPV7vgKwI4/+cY2E9Smzk6QOsk0IeKEMqnE/+ujQs3krhws+ImIOswGhvmJoHgpno5Px7NA26I/yfdrPnSxSUCqmJqmGy78xjCcosiOAPjv/JHwEC/j1dT01LeZI=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp132.mail.mud.yahoo.com with SMTP; 15 Oct 2008 08:57:16 -0000
X-YMail-OSG: 8UvgiSsVM1nzppCZWg4TChQF1JRxAGy1QX5UkfD7IEHj0nFeH7BEPGN_.mfUKD9sME_GRI3xlh.8ujBUasDlSsv45Ac03SH.jkJJpG9ov1dr6xSkZZyUl4rKPoVjnYukpcy9oy1dVZoGJCdoAfX90rGtc.Pt09A2Qud6AFmB4fKr8rwz2YrTMgG_7YKR
X-Yahoo-Newman-Property: ymail-3
Message-ID: <01c701c92ea4$0c063f20$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6d6cf45b0810141935j4d7fb29cj6e323b40a39d8381@mail.gmail.com>
Subject: Re: Closing Index Reader
Date: Wed, 15 Oct 2008 14:27:21 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Yes. Once the Indexreader is closed, you should not do make any calls with 
that object.
Extend the IndexReader to add support for reference count. Close the reader 
once the count is zero.

Regards
Ganesh

----- Original Message ----- 
From: "Khawaja Shams" <ksshams@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, October 15, 2008 8:05 AM
Subject: Closing Index Reader


> Hello,  I am using the reopen method in the IndexReader class. In the case
> of the IndexReader being updated, I would like to create a new 
> IndexSearcher
> and close the old IndexReader. When closing an instance of IndexReader, do 
> I
> have to wait for currently executing searches (through an IndexSearcher 
> with
> this instance of the IndexReader)  to complete? The javadoc states that I
> should not invoke any method on the reader after the close is called, but 
> I
> am curious about the state of the searches that are using the reader when
> the close is called.
>
>
> I would appreciate any thoughts on the question and on my approach.
>
>
> Thanks!
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 09:02:12 2008
Return-Path: <java-user-return-36638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28733 invoked from network); 15 Oct 2008 09:02:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 09:02:12 -0000
Received: (qmail 46487 invoked by uid 500); 15 Oct 2008 09:02:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45979 invoked by uid 500); 15 Oct 2008 09:02:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45968 invoked by uid 99); 15 Oct 2008 09:02:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 02:02:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 09:00:59 +0000
Received: by gxk6 with SMTP id 6so5597975gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 02:01:35 -0700 (PDT)
Received: by 10.150.12.10 with SMTP id 10mr1419310ybl.178.1224061294803;
        Wed, 15 Oct 2008 02:01:34 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id m71sm13030000rnd.3.2008.10.15.02.01.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 15 Oct 2008 02:01:33 -0700 (PDT)
Message-Id: <3499CAC1-6382-4EDE-BDCC-9A952A39A742@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <01c701c92ea4$0c063f20$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Closing Index Reader
X-Priority: 3
Date: Wed, 15 Oct 2008 05:01:32 -0400
References: <6d6cf45b0810141935j4d7fb29cj6e323b40a39d8381@mail.gmail.com> <01c701c92ea4$0c063f20$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Ganesh wrote:

> Yes. Once the Indexreader is closed, you should not do make any  
> calls with that object.
> Extend the IndexReader to add support for reference count. Close the  
> reader once the count is zero.

Actually you can just use the [expert] incRef/decRef methods on  
IndexReader to track in-flight searches still using it.  You shouldn't  
have to extend it.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 09:12:15 2008
Return-Path: <java-user-return-36639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44441 invoked from network); 15 Oct 2008 09:12:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 09:12:15 -0000
Received: (qmail 57306 invoked by uid 500); 15 Oct 2008 09:12:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57264 invoked by uid 500); 15 Oct 2008 09:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57253 invoked by uid 99); 15 Oct 2008 09:12:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 02:12:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 09:11:00 +0000
Received: by el-out-1112.google.com with SMTP id p32so762267elf.14
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 02:11:35 -0700 (PDT)
Received: by 10.151.102.21 with SMTP id e21mr1419178ybm.229.1224061895662;
        Wed, 15 Oct 2008 02:11:35 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id k41sm12970935rnd.6.2008.10.15.02.11.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 15 Oct 2008 02:11:34 -0700 (PDT)
Cc: java-user-owner@lucene.apache.org
Message-Id: <ED03249E-E751-4974-B37A-DF690FC59750@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <129036.32859.qm@web8315.mail.in.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: I am not able to run Lucene 2.4 Demo
Date: Wed, 15 Oct 2008 05:11:32 -0400
References: <129036.32859.qm@web8315.mail.in.yahoo.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you post the full exception?

Mike

prabina pattanayak wrote:

> Hi All,
> i am a beginner to Lucene.
> and i am trying to use Lucene 2.4.
> when i have set lucene-core-2.4.0.jar & lucene-demos-2.4.0.jar in my  
> CLASSPATH. and trying to run:
>       java org.apache.lucene.demo.IndexFiles E:\prabina 
> \lucene-2.4demo\src
> it shows the error:
> caught a class java.io.FileNotFoundException
> with message: no segments* file found in  
> org.apache.lucene.store.FSDirectory@E:\prabina\lucene-2.4demo\index:  
> files:
> but it creates the index folder in my current directory. but the  
> index folder is empty. no segments files are there.
>
> plz, help me out from this problem ASAP.
>
>
>
>
>      Add more friends to your messenger and enjoy! Go to http://messenger.yahoo.com/invite/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 09:33:56 2008
Return-Path: <java-user-return-36640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62459 invoked from network); 15 Oct 2008 09:33:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 09:33:56 -0000
Received: (qmail 86585 invoked by uid 500); 15 Oct 2008 09:33:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86544 invoked by uid 500); 15 Oct 2008 09:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86533 invoked by uid 99); 15 Oct 2008 09:33:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 02:33:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of massart.david@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 09:32:42 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2536075rvb.5
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 02:33:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type:references
         :x-google-sender-auth;
        bh=NNz7lWaI7itqCurdD7GRZ2gvrXjw5Q8grjik19+ZGLA=;
        b=Py1faaElsqpc7YP37e1yywZFOhBgl9oUGhvyYbsYOM81yqJjpcyTcKOFGjeOqjFYlt
         bfKzRGfcs82w3S9J4tfAD+HU79xJaa3kM8gh1lm76IeFJg7RdzFe/kkIehkfz1vNCY7o
         8BOsTbYOy6hC2G+DviAJl/pmCak8DaBlHfmQk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:references:x-google-sender-auth;
        b=CwRXgiY7SiC7z7ZtSLfqDLMORvYjbg4sRGJ5/qlb+Xj6n7EMLdgGh5KBcYPp9v1FCx
         LIKkgjdqTtSrfuFI45jFGHxt2Wv6QVu/rc/RRwiijKtET3sfiOUeRmdKgcYhnWHFVGBu
         1AAcjNNMeLpx62NkhTLjXThxqWDBM172BYuY0=
Received: by 10.140.125.1 with SMTP id x1mr423200rvc.287.1224063199167;
        Wed, 15 Oct 2008 02:33:19 -0700 (PDT)
Received: by 10.140.177.18 with HTTP; Wed, 15 Oct 2008 02:33:19 -0700 (PDT)
Message-ID: <7b74fa660810150233x71968053ladb813be59bba0be@mail.gmail.com>
Date: Wed, 15 Oct 2008 11:33:19 +0200
From: "David Massart" <dmassart@acm.org>
Sender: massart.david@gmail.com
To: java-user@lucene.apache.org
Subject: Re: querying without hits
In-Reply-To: <Pine.LNX.4.62.0810142015400.19989@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19327_10897397.1224063199145"
References: <7b74fa660810132344o6e5f5751hb9fea14701309625@mail.gmail.com>
	 <Pine.LNX.4.62.0810142015400.19989@radix.cryptio.net>
X-Google-Sender-Auth: 9014d7cf893c86cc
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19327_10897397.1224063199145
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks guys.
Just looking at the examples and I wonder if there is a means to directly
get the total number of hits. Or is it always necessary to search for a few
top docs, get the the total number of hits and then create a new collector
to get all the results?

TopDocCollector collector = new TopDocCollector(5);

searcher.search(query, collector);

int numTotalHits = collector.getTotalHits();

collector = new TopDocCollector(numTotalHits);

searcher.search(query, collector);

ScoreDoc[] hits = collector.topDocs().scoreDocs;

If the later is true, is the code above the best way to do this?

Cheers,

David

On Wed, Oct 15, 2008 at 5:16 AM, Chris Hostetter
<hossman_lucene@fucit.org>wrote:

>
> : Could one of you point me to an example of code for querying without
> using
> : the deprecated class Hits ?
>
> The demo code included with Lucene releases was updated in Lucene 2.4 so
> that it does not use the Hits class.
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19327_10897397.1224063199145--

From java-user-return-36641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 09:34:04 2008
Return-Path: <java-user-return-36641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62621 invoked from network); 15 Oct 2008 09:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 09:34:04 -0000
Received: (qmail 88029 invoked by uid 500); 15 Oct 2008 09:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88000 invoked by uid 500); 15 Oct 2008 09:33:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87989 invoked by uid 99); 15 Oct 2008 09:33:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 02:33:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 09:32:48 +0000
Received: by gxk6 with SMTP id 6so5619224gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 02:33:24 -0700 (PDT)
Received: by 10.100.142.4 with SMTP id p4mr602468and.23.1224063203883;
        Wed, 15 Oct 2008 02:33:23 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id d38sm21201794and.20.2008.10.15.02.33.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 15 Oct 2008 02:33:23 -0700 (PDT)
Message-Id: <63B873E6-1439-4213-9F0E-908A0DF15AD0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48F4A02D.3000702@deri.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Modification of positional information encoding
Date: Wed, 15 Oct 2008 05:33:21 -0400
References: <DBD1DD04-E974-4FF6-B41C-C3462554D0CB@mikemccandless.com> <48F4A02D.3000702@deri.org>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Renaud Delbru wrote:

> Hi Michael,
>
> Michael McCandless wrote:
>> Also, this issue was just opened:
>>
>>
>>   https://issues.apache.org/jira/browse/LUCENE-1419
>>
>> which would make it possible for classes in the same package  
>> (oal.index) to use their own indexing chain.  With that fix, if you  
>> make your own classes in oal.index package, and perhaps subclass  
>> the above classes, you could then create your own indexing chain  
>> for indexing?  If you take that approach, please report back so we  
>> can learn how to improve Lucene for these very advanced  
>> customizations!
>>
> As a first impression, what will be handy in order to customize  
> postings list will be to make an abstract class FreqProxTermsWriter,  
> that separates segment creation and term information serialisation.  
> This class will implement the generic logic for flushing and  
> appending postings, but will delegate to subclasses the way you  
> write doc + freq and prox + payload info.
>
> A first idea will be to have the following abstract methods:
> - writeMinState : called by appendPostings, and define how to  
> serialise one FreqProxFieldMergeState
> - writeDocFreq : called by writeMinState, and define how to  
> serialise docs and freq
> - writeProx: called by writeMinState and define how to serialise  
> positions and payloads
>
> I think other parts of the FreqProxTermsWriter can stay generic.  
> What do you think ?

I agree: let's decouple the "codec" (how to write terms/freq/prox)  
from the other mechanics in FreqProxTermsWriter.

I don't think FreqProxFieldMergeState should be visible to that codec,  
though.  That class is used, internally to FreqProxTermsWriter, to  
manage the multiple threads that had accumulated postings data.

I think the codec API could look something like this:

   newField(...)
     startTerm(...)
       startDocument(...)
         addPosition(...)
       endDocument(...)
     endTerm(...)

We would then make a codec that matches today's index file format, but  
allow for others (you) to swap in a new codec.  All of this would be  
experimental & private to oal.index for starters.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 09:48:39 2008
Return-Path: <java-user-return-36642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73518 invoked from network); 15 Oct 2008 09:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 09:48:39 -0000
Received: (qmail 13190 invoked by uid 500); 15 Oct 2008 09:48:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13160 invoked by uid 500); 15 Oct 2008 09:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13149 invoked by uid 99); 15 Oct 2008 09:48:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 02:48:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 09:47:25 +0000
Received: by yx-out-2324.google.com with SMTP id 3so575158yxj.5
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 02:48:01 -0700 (PDT)
Received: by 10.90.96.1 with SMTP id t1mr902161agb.24.1224064081292;
        Wed, 15 Oct 2008 02:48:01 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id h34sm12536934wxd.9.2008.10.15.02.47.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 15 Oct 2008 02:48:00 -0700 (PDT)
Message-Id: <1523419E-35DC-40ED-B989-D79D2C8619FA@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <7b74fa660810150233x71968053ladb813be59bba0be@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: querying without hits
Date: Wed, 15 Oct 2008 05:47:58 -0400
References: <7b74fa660810132344o6e5f5751hb9fea14701309625@mail.gmail.com> <Pine.LNX.4.62.0810142015400.19989@radix.cryptio.net> <7b74fa660810150233x71968053ladb813be59bba0be@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


If you want to keep every single hit, which is very dangerous for a  
large index, you should make a new collector.

Here's an example (pulled from upcoming LIA revision):

public class AllDocCollector extends HitCollector {
   List<ScoreDoc> docs = new ArrayList<ScoreDoc>();
   public void collect(int doc, float score) {
     if (score > 0.0f) {
       docs.add(new ScoreDoc(doc, score));
     }
   }

   public void reset() {
     docs.clear();
   }

   public List<ScoreDoc> getHits() {
     return docs;
   }
}

If you need the results sorted then you should do the sort at the end.

Mike

David Massart wrote:

> Thanks guys.
> Just looking at the examples and I wonder if there is a means to  
> directly
> get the total number of hits. Or is it always necessary to search  
> for a few
> top docs, get the the total number of hits and then create a new  
> collector
> to get all the results?
>
> TopDocCollector collector = new TopDocCollector(5);
>
> searcher.search(query, collector);
>
> int numTotalHits = collector.getTotalHits();
>
> collector = new TopDocCollector(numTotalHits);
>
> searcher.search(query, collector);
>
> ScoreDoc[] hits = collector.topDocs().scoreDocs;
>
> If the later is true, is the code above the best way to do this?
>
> Cheers,
>
> David
>
> On Wed, Oct 15, 2008 at 5:16 AM, Chris Hostetter
> <hossman_lucene@fucit.org>wrote:
>
>>
>> : Could one of you point me to an example of code for querying  
>> without
>> using
>> : the deprecated class Hits ?
>>
>> The demo code included with Lucene releases was updated in Lucene  
>> 2.4 so
>> that it does not use the Hits class.
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 10:05:41 2008
Return-Path: <java-user-return-36643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87535 invoked from network); 15 Oct 2008 10:05:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 10:05:41 -0000
Received: (qmail 42615 invoked by uid 500); 15 Oct 2008 10:05:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42586 invoked by uid 500); 15 Oct 2008 10:05:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42562 invoked by uid 99); 15 Oct 2008 10:05:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 03:05:34 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.218] (HELO smtp108.mail.mud.yahoo.com) (209.191.85.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Oct 2008 10:04:25 +0000
Received: (qmail 20618 invoked from network); 15 Oct 2008 10:04:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=X62n5hdg6kK6WfcvbUnTXCwWEBCVTsgovNpMccFCCUxV60xjFBLs+I9W6Vtjk6rO3Vbzu2cbfBGS5ksDka4Yg3iXpTLJftbw0DmxNeeRTSSq8dTIbtkLNW5bNSJXhNaz6wg3OA3ao5RXyqnHF+nbihpvxychIyN+80YUEe4NHkk=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp108.mail.mud.yahoo.com with SMTP; 15 Oct 2008 10:03:59 -0000
X-YMail-OSG: 6h7BPDwVM1nOEbloA_ii4PHtB0ojiUEXvYmJ4AgyNiLtwEyPtA._6ycJ5zRWyf.f_9bVL5hiPVGw8Ik29Ii7g6Rs_MzQWug6rnszsuwCeM7r4h_gkJt.G9Sh2kuMGscGsnZ2M6XOI6rC3NjJsylvo7NQ7EmfLsWzIOHwPAU8Ufvh_FMoX_DG3lI_8_xj
X-Yahoo-Newman-Property: ymail-3
Message-ID: <01cf01c92ead$566131c0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6d6cf45b0810141935j4d7fb29cj6e323b40a39d8381@mail.gmail.com> <01c701c92ea4$0c063f20$330bc30a@sv.us.sonicwall.com> <3499CAC1-6382-4EDE-BDCC-9A952A39A742@mikemccandless.com>
Subject: Re: Closing Index Reader
Date: Wed, 15 Oct 2008 15:33:51 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

incRef/decRef  methods are protected. Is there any other way to use these 
methods without extending it?

Regards
Ganesh

----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, October 15, 2008 2:31 PM
Subject: Re: Closing Index Reader


>
> Ganesh wrote:
>
>> Yes. Once the Indexreader is closed, you should not do make any  calls 
>> with that object.
>> Extend the IndexReader to add support for reference count. Close the 
>> reader once the count is zero.
>
> Actually you can just use the [expert] incRef/decRef methods on 
> IndexReader to track in-flight searches still using it.  You shouldn't 
> have to extend it.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 10:11:01 2008
Return-Path: <java-user-return-36644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92847 invoked from network); 15 Oct 2008 10:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 10:11:01 -0000
Received: (qmail 52033 invoked by uid 500); 15 Oct 2008 10:10:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52001 invoked by uid 500); 15 Oct 2008 10:10:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51990 invoked by uid 99); 15 Oct 2008 10:10:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 03:10:53 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.250] (HELO ag-out-0708.google.com) (72.14.246.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 10:09:46 +0000
Received: by ag-out-0708.google.com with SMTP id 23so2873634agd.11
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 03:10:21 -0700 (PDT)
Received: by 10.100.140.15 with SMTP id n15mr569134and.111.1224065421893;
        Wed, 15 Oct 2008 03:10:21 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c16sm21207355anc.31.2008.10.15.03.10.20
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 15 Oct 2008 03:10:20 -0700 (PDT)
Message-Id: <BFE538E2-949B-462B-9C6E-99AC8AE5E00A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <01cf01c92ead$566131c0$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Closing Index Reader
X-Priority: 3
Date: Wed, 15 Oct 2008 06:10:19 -0400
References: <6d6cf45b0810141935j4d7fb29cj6e323b40a39d8381@mail.gmail.com> <01c701c92ea4$0c063f20$330bc30a@sv.us.sonicwall.com> <3499CAC1-6382-4EDE-BDCC-9A952A39A742@mikemccandless.com> <01cf01c92ead$566131c0$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


As of 2.4.0 they are public.

Mike

Ganesh wrote:

> incRef/decRef  methods are protected. Is there any other way to use  
> these methods without extending it?
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Michael McCandless" <lucene@mikemccandless.com 
> >
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, October 15, 2008 2:31 PM
> Subject: Re: Closing Index Reader
>
>
>>
>> Ganesh wrote:
>>
>>> Yes. Once the Indexreader is closed, you should not do make any   
>>> calls with that object.
>>> Extend the IndexReader to add support for reference count. Close  
>>> the reader once the count is zero.
>>
>> Actually you can just use the [expert] incRef/decRef methods on  
>> IndexReader to track in-flight searches still using it.  You  
>> shouldn't have to extend it.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 15:02:20 2008
Return-Path: <java-user-return-36645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5169 invoked from network); 15 Oct 2008 15:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 15:02:20 -0000
Received: (qmail 91653 invoked by uid 500); 15 Oct 2008 15:00:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91607 invoked by uid 500); 15 Oct 2008 15:00:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91595 invoked by uid 99); 15 Oct 2008 15:00:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 08:00:02 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: error (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport4.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 14:58:53 +0000
X-SBRS: None
X-MID: 110596309
Received: from fmd3tj002.fda.gov ([10.160.10.77])
  by ironport4.fda.gov with ESMTP; 15 Oct 2008 10:58:11 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.62]) by FMD3TJ002.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 15 Oct 2008 10:58:13 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: I am not able to run Lucene 2.4 Demo
Date: Wed, 15 Oct 2008 10:58:11 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73AF6@FMD3VS012.fda.gov>
In-Reply-To: <129036.32859.qm@web8315.mail.in.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: I am not able to run Lucene 2.4 Demo
Thread-Index: AckuhNdWlPOc9lL2TLGbemVL/moC5AAUWDYg
References: <129036.32859.qm@web8315.mail.in.yahoo.com>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>,
	<prabina007@yahoo.co.in>
X-OriginalArrivalTime: 15 Oct 2008 14:58:13.0032 (UTC) FILETIME=[722ED280:01C92ED6]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Prabina,

The way your are specifying path E:\... is not correct.=20
Use something like /prabina/lucene-2.4demo/src

Hope this helps,

Sincerely,
Sithu Sudarsan

-----Original Message-----
From: prabina pattanayak [mailto:prabina007@yahoo.co.in]=20
Sent: Wednesday, October 15, 2008 1:12 AM
To: java-user@lucene.apache.org; java-user-owner@lucene.apache.org
Subject: I am not able to run Lucene 2.4 Demo

Hi All,
i am a beginner to Lucene.=A0
and i am trying to use Lucene 2.4.
when i have set lucene-core-2.4.0.jar & lucene-demos-2.4.0.jar in my =
CLASSPATH. and trying to run:
=A0=A0=A0=A0 =A0java org.apache.lucene.demo.IndexFiles =
E:\prabina\lucene-2.4demo\src
it shows the error:
caught a class java.io.FileNotFoundException
with message: no segments* file found in =
org.apache.lucene.store.FSDirectory@E:\prabina\lucene-2.4demo\index: =
files:=20
but it creates the index folder in my current directory. but the index =
folder is empty. no segments files are there.
=A0
plz, help me out from this problem ASAP.
=A0



      Add more friends to your messenger and enjoy! Go to =
http://messenger.yahoo.com/invite/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 16:56:49 2008
Return-Path: <java-user-return-36646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5664 invoked from network); 15 Oct 2008 16:56:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 16:56:49 -0000
Received: (qmail 9610 invoked by uid 500); 15 Oct 2008 16:56:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9186 invoked by uid 500); 15 Oct 2008 16:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9175 invoked by uid 99); 15 Oct 2008 16:56:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 09:56:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.215] (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Oct 2008 16:55:35 +0000
Received: (qmail 30467 invoked by uid 60001); 15 Oct 2008 16:56:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=QmAeO56eTjiPD+uWJTjCbGf3ydwAeGGs0fqGQVozRXBt812/ChTWW4YdGiUlFqrww+gURDGcGwj1tL/YCD/0pMK54q3VPwmRQwCTDuKUIIk47aPs0iR+1HX1Bg66O9Gj1Y1xwqZobZvX5u8wCR6QG8PBwJO1pGtlboucmZUOsFs=;
X-YMail-OSG: mQKmf8sVM1kX4jJPT1h3Gc2S_D2FKldFILtYdfjqZtpDui69yONLfI.dHJlALwAqxfktnLy4Qi7_qsTtwQ2PJBGgTabl9Hqmon3qvLu0AyOAQIBeiV9MO7pvXu9cZAWEesxotsqdmvZEXKxSRmb_Fdmo5NFQ4w--
Received: from [193.36.230.96] by web26004.mail.ukl.yahoo.com via HTTP; Wed, 15 Oct 2008 16:56:07 GMT
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.247.3
Date: Wed, 15 Oct 2008 16:56:07 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Question regarding sorting and memory consumption in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <169286.30165.qm@web26004.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

=0A=0AFurther to our discussion - see below a class that measures the added=
 construction cost and memory savings for an optimised field value cache fo=
r a given index.=0AThe optimisation here being initial use of byte arrays, =
then shorts, then ints as more unique terms emerge.=0AI imagine the majorit=
y of "faceting" fields and, to a lesser extent sorting fields (e.g. dates) =
have <=3D 65k  unique terms and therefore can stand to benefit from this.=
=0A=0A=0ACheers=0AMark=0A=0A=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0ABegin co=
de.......=0A=0A=0A=0Apackage lucene.sort;=0A=0Aimport java.io.IOException;=
=0Aimport java.text.NumberFormat;=0Aimport java.util.Collection;=0Aimport j=
ava.util.Iterator;=0A=0Aimport org.apache.lucene.index.IndexReader;=0Aimpor=
t org.apache.lucene.index.Term;=0Aimport org.apache.lucene.index.TermDocs;=
=0Aimport org.apache.lucene.index.TermEnum;=0Aimport org.apache.lucene.inde=
x.IndexReader.FieldOption;=0A=0A/**=0A * =0A * Test to measure cost of dyna=
mically upgrading fieldcache from byte array to=0A * short to int depending=
 on index content term distribution.=0A * Currently tests all fields in an =
index but probably better to measure a sensible subset=0A * of fields ie th=
ose that are likely to be cached.=0A * =0A * @author MAHarwood=0A * =0A */=
=0Apublic class BenchmarkOptimisedFieldCacheConstruction=0A{=0Astatic long =
totalExtraCachingCostMilliseconds =3D 0;=0Astatic long totalRamBytesSaving =
=3D 0;=0Aprivate static int shortRange =3D ((int) Short.MAX_VALUE + (int) M=
ath=0A.abs(Short.MIN_VALUE));=0Aprivate static int byteRange =3D ((int) Byt=
e.MAX_VALUE + (int) Math=0A.abs(Byte.MIN_VALUE));=0Astatic NumberFormat nf =
=3D NumberFormat.getIntegerInstance();=0A=0Apublic static void main(String[=
] args) throws Exception=0A{=0Anf.setGroupingUsed(true);=0A=0A//! Change th=
is to analyse your choice of index=0AIndexReader reader =3D IndexReader.ope=
n("/indexes/myTestIndex");=0Aint numDocs =3D reader.maxDoc();=0A// Change t=
he above value to fake the number of docs in the index (thereby=0A// increa=
sing size of arrays manipulated in this test)=0A// int numDocs=3D30*1000*10=
00;=0A=0ACollection fields =3D reader.getFieldNames(FieldOption.INDEXED);=
=0Afor (Iterator iterator =3D fields.iterator(); iterator.hasNext();)=0A{=
=0AString fieldName =3D (String) iterator.next();=0AmeasureOptimisedCaching=
Cost(reader, fieldName, numDocs);=0A}=0ASystem.out=0A.println("Caching all =
terms in this index in an optimised form would cost an extra "=0A+ totalExt=
raCachingCostMilliseconds=0A+ " millis "=0A+ "but save "=0A+ nf.format(tota=
lRamBytesSaving)=0A+ " bytes RAM");=0A}=0A=0Aprivate static void measureOpt=
imisedCachingCost(IndexReader reader,String field, int numDocs) throws IOEx=
ception=0A{=0ATermDocs termDocs =3D reader.termDocs();=0ATermEnum termEnum =
=3D reader.terms(new Term(field, ""));=0Aint t =3D 0; // current term numbe=
r=0A=0AString[] mterms =3D new String[reader.maxDoc() + 1];=0A=0A// an entr=
y for documents that have no terms in this field=0A// should a document wit=
h no terms be at top or bottom?=0A// this puts them at the top - if it is c=
hanged, FieldDocSortedHitQueue=0A// needs to change as well.=0Amterms[t++] =
=3D null;=0A=0Abyte byteRefs[] =3D new byte[numDocs]; // up to 32 bits used=
 to refer=0A// into term pool=0Ashort shortRefs[] =3D null;=0Aint intRefs[]=
 =3D null;=0Along totalConvertTimeForField =3D 0;=0A=0Atry=0A{=0Ado=0A{=0AT=
erm term =3D termEnum.term();=0Aif (term =3D=3D null || term.field() !=3D f=
ield)=0Abreak;=0A// store term text=0A// we expect that there is at most on=
e term per document=0Aif (t >=3D mterms.length)=0Athrow new RuntimeExceptio=
n("there are more terms than "=0A+ "documents in field \"" + field=0A+ "\",=
 but it's impossible to sort on "=0A+ "tokenized fields");=0Amterms[t] =3D =
term.text();=0A=0AtermDocs.seek(termEnum);=0Awhile (termDocs.next())=0A{=0A=
int doc =3D termDocs.doc();=0Aif (intRefs !=3D null)=0A{=0AintRefs[doc] =3D=
 t;=0A} else if (shortRefs !=3D null)=0A{=0A// adjust number to make optima=
l use of negative range=0A// of values that can be stored=0AshortRefs[doc] =
=3D (short) ((short) t - Short.MAX_VALUE);=0Aint storedT =3D shortRefs[doc]=
 + Short.MAX_VALUE;=0Aif (storedT !=3D t)=0A{=0ASystem.err.println(storedT =
+ "!=3D" + t);=0A}=0A=0A} else=0A{=0A// adjust number to make optimal use o=
f negative range=0A// of values that can be stored=0AbyteRefs[doc] =3D (byt=
e) ((byte) t - Byte.MAX_VALUE);=0A}=0A=0A}=0At++;=0Aif ((byteRefs !=3D null=
) && (shortRefs =3D=3D null))=0A{=0A// More terms than can be accessed usin=
g a byte - move to shorts=0Aif (t >=3D byteRange)=0A{=0Along millis =3D Sys=
tem.currentTimeMillis();=0AshortRefs =3D new short[numDocs];=0Ashort adjust=
 =3D (Short.MAX_VALUE - (short) Byte.MAX_VALUE);=0Afor (int i =3D 0; i < by=
teRefs.length; i++)=0A{=0AshortRefs[i] =3D (short) ((short) ((short) byteRe=
fs[i]) - adjust);=0A}=0Along millisDiff =3D System.currentTimeMillis() - mi=
llis;=0AbyteRefs =3D null;=0AtotalConvertTimeForField +=3D millisDiff;=0A}=
=0A} else=0A{=0Aif (intRefs =3D=3D null)=0A{=0Aif (t >=3D shortRange)=0A{=
=0A//more terms than can be accessed using shorts - move to ints=0Along mil=
lis =3D System.currentTimeMillis();=0AintRefs =3D new int[numDocs];=0Aint a=
djust =3D Short.MAX_VALUE;=0Afor (int i =3D 0; i < shortRefs.length; i++)=
=0A{=0AintRefs[i] =3D (int) shortRefs[i] + adjust;=0A}=0Along millisDiff =
=3D System.currentTimeMillis()=0A- millis;=0AtotalConvertTimeForField +=3D =
millisDiff;=0AshortRefs =3D null;=0A}=0A}=0A}=0A} while (termEnum.next());=
=0A} finally=0A{=0AtermDocs.close();=0AtermEnum.close();=0A}=0Aif (intRefs =
!=3D null)=0A{=0Along ramBytesSaving =3D 0;=0AtotalRamBytesSaving +=3D ramB=
ytesSaving;=0ASystem.out.println("Field " +field + " added cache load cost =
of "=0A+ totalConvertTimeForField=0A+ " millis with no RAM saving over curr=
ent FieldCacheImpl");=0A} else=0A{=0Aif (shortRefs !=3D null)=0A{=0Along ra=
mBytesSaving =3D numDocs * 2;=0AtotalRamBytesSaving +=3D ramBytesSaving;=0A=
System.out.println("Field " +field + " added cache load cost of "=0A+ total=
ConvertTimeForField + " millis but saved "=0A+ nf.format(ramBytesSaving)=0A=
+ " bytes RAM over current FieldCacheImpl");=0A} else=0A{=0Along ramBytesSa=
ving =3D numDocs * 3;=0AtotalRamBytesSaving +=3D ramBytesSaving;=0ASystem.o=
ut.println("Field " +field + " added cache load cost of "=0A+ totalConvertT=
imeForField + " millis but saved "=0A+ nf.format(ramBytesSaving)=0A+ " byte=
s RAM over current FieldCacheImpl");=0A}=0A}=0AtotalExtraCachingCostMillise=
conds +=3D totalConvertTimeForField;=0A}=0A}=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 17:32:28 2008
Return-Path: <java-user-return-36647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21808 invoked from network); 15 Oct 2008 17:32:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 17:32:28 -0000
Received: (qmail 47604 invoked by uid 500); 15 Oct 2008 17:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47583 invoked by uid 500); 15 Oct 2008 17:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47570 invoked by uid 99); 15 Oct 2008 17:29:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 10:29:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 17:28:50 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1599182wag.5
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 10:29:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HbOcP1FJTgSJ3RMgdDN2ddZqKHJ4PwMncWPE8WvlWKI=;
        b=gp3fOFT5pYQaN4XJavPvQJGq52e6YSMxRytSnoC/UbqiL/UxydBfFv0gnRgjsNM54Q
         OfGTjWs2wagvbI01G+T3zrcY9AUrPVWpdxBjTD0130/LIvP8JpYXGyE5kMpgCwvrpr6V
         MKBfQfSp9thZ/I3/Oh638YCgBgqNP9Vd+Ppqk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nv46FM7VkYd0uOpaF2GzGHK0VOro0KIsueytwld8WhMwe4WB3WR3RqQFuAtL7YaJDo
         JunUn1yXH3o2hGs9NQDsNT8B6uKtjYOBvyg09GEFfaLP2YnK0YXwlDQnYOZZrlUkqcgB
         yDXarDm+zxxZSqksjokySksd1oUOPDzQTGeeU=
Received: by 10.115.73.20 with SMTP id a20mr1156153wal.142.1224091757706;
        Wed, 15 Oct 2008 10:29:17 -0700 (PDT)
Received: by 10.115.95.4 with HTTP; Wed, 15 Oct 2008 10:29:17 -0700 (PDT)
Message-ID: <6d6cf45b0810151029w192c16f5kf869d267f3194c17@mail.gmail.com>
Date: Wed, 15 Oct 2008 10:29:17 -0700
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Closing Index Reader
In-Reply-To: <BFE538E2-949B-462B-9C6E-99AC8AE5E00A@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26536_26881673.1224091757704"
References: <6d6cf45b0810141935j4d7fb29cj6e323b40a39d8381@mail.gmail.com>
	 <01c701c92ea4$0c063f20$330bc30a@sv.us.sonicwall.com>
	 <3499CAC1-6382-4EDE-BDCC-9A952A39A742@mikemccandless.com>
	 <01cf01c92ead$566131c0$330bc30a@sv.us.sonicwall.com>
	 <BFE538E2-949B-462B-9C6E-99AC8AE5E00A@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26536_26881673.1224091757704
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,   Thank you for your ideas. While these look promising, it seems like
there are many places within Lucene's codebase that are invoking the incRef
and decRef methods.  Upon a shallow analysis of the code, it seems like I
can call close, and the doClose method does not get called until refCount is
0.  Can anyone correct or confirm my assumption that you can call close and
any query in progress as you call close will succeed because the reader
won't be closed until the refCount is 0.  Thanks again!

On Wed, Oct 15, 2008 at 3:10 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> As of 2.4.0 they are public.
>
> Mike
>
>
> Ganesh wrote:
>
>  incRef/decRef  methods are protected. Is there any other way to use these
>> methods without extending it?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Michael McCandless" <
>> lucene@mikemccandless.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Wednesday, October 15, 2008 2:31 PM
>> Subject: Re: Closing Index Reader
>>
>>
>>
>>> Ganesh wrote:
>>>
>>>  Yes. Once the Indexreader is closed, you should not do make any  calls
>>>> with that object.
>>>> Extend the IndexReader to add support for reference count. Close the
>>>> reader once the count is zero.
>>>>
>>>
>>> Actually you can just use the [expert] incRef/decRef methods on
>>> IndexReader to track in-flight searches still using it.  You shouldn't have
>>> to extend it.
>>>
>>> Mike
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26536_26881673.1224091757704--

From java-user-return-36648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 17:42:11 2008
Return-Path: <java-user-return-36648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29100 invoked from network); 15 Oct 2008 17:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 17:42:11 -0000
Received: (qmail 73838 invoked by uid 500); 15 Oct 2008 17:42:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73482 invoked by uid 500); 15 Oct 2008 17:42:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73471 invoked by uid 99); 15 Oct 2008 17:42:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 10:42:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 17:40:59 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2711620rvb.5
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 10:41:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=/MClv1fly3SRFHTbol2x6dp0Vtal+as8Jhf7PNhwPQk=;
        b=xVvS2dqOXgoH6qRytLmmCfw2FVzHwFczjTyxF4rnPozirfk64MeQ0B+STpdZY9Tv3N
         igozxy0vNsVZvS2tJolGhE+QAtMCehlKmQjHszeJLF+ts0v3UQ3IyUFcQjNvO5zoYZEA
         wmIpPV0MBSO09JN/7+0PNHi2t0gnHCHG95Ews=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=DVMcI1r+EbdNx9r8rxU5RFSuvFWIRe1aEx9kWlKy8L3JZ/Rnt09Rx/aN2dubGnyQBV
         aMU6YCMMr7FWt6J5iE4Lyg82G1ZKgR8xNaF8A3zXJH5HFuQbE01ffskN5a27K5BI1qaQ
         AHqKUGN0HmhB+THmmIjhdj9bBz+6zO8Kl0KKc=
Received: by 10.141.44.13 with SMTP id w13mr915175rvj.13.1224092487468;
        Wed, 15 Oct 2008 10:41:27 -0700 (PDT)
Received: by 10.141.66.11 with HTTP; Wed, 15 Oct 2008 10:41:27 -0700 (PDT)
Message-ID: <6de6b1650810151041k3156654dyaf16887cc12c4311@mail.gmail.com>
Date: Wed, 15 Oct 2008 15:41:27 -0200
From: "Rafael Almeida" <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Fields with the same name
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I didn't quite understand the Document documentation so well, the
documentation says:

"Adds a field to a document. Several fields may be added with the same
name. In this case, if the fields are indexed, their text is treated
as though appended for the purposes of search."

Would

    doc.add(new Field("foo",
                              "bar1" + "bar2",
                              Field.Store.YES,
                              Field.Index.ANALYZED));

be different in any way than

    doc.add(new Field("foo",
                              "bar1",
                              Field.Store.YES,
                              Field.Index.ANALYZED));
    doc.add(new Field("foo",
                              "bar2",
                              Field.Store.YES,
                              Field.Index.ANALYZED));
?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 17:48:59 2008
Return-Path: <java-user-return-36649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35670 invoked from network); 15 Oct 2008 17:48:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 17:48:59 -0000
Received: (qmail 99741 invoked by uid 500); 15 Oct 2008 17:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99712 invoked by uid 500); 15 Oct 2008 17:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99700 invoked by uid 99); 15 Oct 2008 17:48:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 10:48:53 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 17:47:46 +0000
Received: by wx-out-0506.google.com with SMTP id h28so904445wxd.20
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 10:48:22 -0700 (PDT)
Received: by 10.70.113.12 with SMTP id l12mr1421815wxc.24.1224092902280;
        Wed, 15 Oct 2008 10:48:22 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id i18sm44779wxd.24.2008.10.15.10.48.20
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 15 Oct 2008 10:48:20 -0700 (PDT)
Message-Id: <68C36A6A-9107-48A6-9DCC-74CA92B9CF0E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6d6cf45b0810151029w192c16f5kf869d267f3194c17@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Closing Index Reader
Date: Wed, 15 Oct 2008 13:48:19 -0400
References: <6d6cf45b0810141935j4d7fb29cj6e323b40a39d8381@mail.gmail.com> <01c701c92ea4$0c063f20$330bc30a@sv.us.sonicwall.com> <3499CAC1-6382-4EDE-BDCC-9A952A39A742@mikemccandless.com> <01cf01c92ead$566131c0$330bc30a@sv.us.sonicwall.com> <BFE538E2-949B-462B-9C6E-99AC8AE5E00A@mikemccandless.com> <6d6cf45b0810151029w192c16f5kf869d267f3194c17@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


That is correct, as long as you incRef the reader before starting each  
query, and decRef the reader after finishing each query.

If you call close() during this time, the reader is not actually  
closed until decRef is called for all previous incRefs.

Be certain that once you close() a reader there is no way a new query  
can grab that reader.  That would be a thread hazard that could result  
in using an already closed reader.

Also be certain you always decRef, eg in a finally clause.

Mike

Khawaja Shams wrote:

> Hello,   Thank you for your ideas. While these look promising, it  
> seems like
> there are many places within Lucene's codebase that are invoking the  
> incRef
> and decRef methods.  Upon a shallow analysis of the code, it seems  
> like I
> can call close, and the doClose method does not get called until  
> refCount is
> 0.  Can anyone correct or confirm my assumption that you can call  
> close and
> any query in progress as you call close will succeed because the  
> reader
> won't be closed until the refCount is 0.  Thanks again!
>
> On Wed, Oct 15, 2008 at 3:10 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> As of 2.4.0 they are public.
>>
>> Mike
>>
>>
>> Ganesh wrote:
>>
>> incRef/decRef  methods are protected. Is there any other way to use  
>> these
>>> methods without extending it?
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Michael McCandless" <
>>> lucene@mikemccandless.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Wednesday, October 15, 2008 2:31 PM
>>> Subject: Re: Closing Index Reader
>>>
>>>
>>>
>>>> Ganesh wrote:
>>>>
>>>> Yes. Once the Indexreader is closed, you should not do make any   
>>>> calls
>>>>> with that object.
>>>>> Extend the IndexReader to add support for reference count. Close  
>>>>> the
>>>>> reader once the count is zero.
>>>>>
>>>>
>>>> Actually you can just use the [expert] incRef/decRef methods on
>>>> IndexReader to track in-flight searches still using it.  You  
>>>> shouldn't have
>>>> to extend it.
>>>>
>>>> Mike
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 18:22:49 2008
Return-Path: <java-user-return-36650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64864 invoked from network); 15 Oct 2008 18:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 18:22:48 -0000
Received: (qmail 68726 invoked by uid 500); 15 Oct 2008 18:22:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68469 invoked by uid 500); 15 Oct 2008 18:22:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68458 invoked by uid 99); 15 Oct 2008 18:22:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 11:22:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 18:21:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2726831rvb.5
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 11:22:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=czJ0dJKlO/WplZvMZhJNN3lWs5qRXx7QCym7yLqT0bs=;
        b=p3OG6Y62czcysTD1Bxf9+BvxDSUf9k4Bk5vdQ6eCvahfeMtH4yAP7jcKCNUYcCN50J
         OXiGQ4vBuo3qASRVTVDOj9+BHMokarCmpj+Y8EUGuiwjlWv2Lbuhc9AMhr/7gpiKWhtz
         WWS1rrd7mv9V75megw9IjOYcmZWRtKfR02l6s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=c3mmQlX2wBGBSLkMaPUxXHve8liWwnU9B5tTcH/mGH/yLgIRqnglBExUJ3K2XXwh7j
         pi08iHBnnfoWYvENt4mesYKAnbhtSThIGuKc0Twgasr0HT2iGZ1h2wJxiYr+5F3kgSNw
         Z4hXOPrZPMOfxReeOHOKTt/2fAtv57kfmQ37w=
Received: by 10.141.84.17 with SMTP id m17mr962221rvl.48.1224094933842;
        Wed, 15 Oct 2008 11:22:13 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Wed, 15 Oct 2008 11:22:13 -0700 (PDT)
Message-ID: <359a92830810151122k3dab0267ucb87819ac33ab82d@mail.gmail.com>
Date: Wed, 15 Oct 2008 14:22:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fields with the same name
In-Reply-To: <6de6b1650810151041k3156654dyaf16887cc12c4311@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13578_3772934.1224094933822"
References: <6de6b1650810151041k3156654dyaf16887cc12c4311@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13578_3772934.1224094933822
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, in terms of what you probably mean, but your first
example would index one token "bar1bar2". But if you
changed your first example to (note space): they would
be entirely equivalent.

   doc.add(new Field("foo",
                             "bar1 bar2",
                             Field.Store.YES,
                             Field.Index.ANALYZED));


One note: The rather technical difference between the two methods
is that multiple calls to index the same field add PositionIncrementGap
to the first token of calls 2-n. This defaults to 1, so it doesn't change
anything unless you change it in your analyzer. Don't worry about it
yet <G>...

Best
Erick



On Wed, Oct 15, 2008 at 1:41 PM, Rafael Almeida <almeidaraf@gmail.com>wrote:

> I didn't quite understand the Document documentation so well, the
> documentation says:
>
> "Adds a field to a document. Several fields may be added with the same
> name. In this case, if the fields are indexed, their text is treated
> as though appended for the purposes of search."
>
> Would
>
>    doc.add(new Field("foo",
>                              "bar1" + "bar2",
>                              Field.Store.YES,
>                              Field.Index.ANALYZED));
>
> be different in any way than
>
>    doc.add(new Field("foo",
>                              "bar1",
>                              Field.Store.YES,
>                              Field.Index.ANALYZED));
>    doc.add(new Field("foo",
>                              "bar2",
>                              Field.Store.YES,
>                              Field.Index.ANALYZED));
> ?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13578_3772934.1224094933822--

From java-user-return-36651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 18:33:31 2008
Return-Path: <java-user-return-36651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68851 invoked from network); 15 Oct 2008 18:33:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 18:33:31 -0000
Received: (qmail 94366 invoked by uid 500); 15 Oct 2008 18:33:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93731 invoked by uid 500); 15 Oct 2008 18:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93720 invoked by uid 99); 15 Oct 2008 18:33:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 11:33:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 18:32:18 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2730290rvb.5
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 11:32:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Lfm9sWsMnJrucuAqgypate3X4n0OeEdTAGt9ocvUAlk=;
        b=Er/R2F7j/BFSgur9BL0T41PoTUA1Y/2O8KnynsiACiHb+SllbjUqj75Gqx7jGrwJVu
         TMRhI+TYDipXfI1jJICI1CdO7FmDxmT/NKsP0xn10fKTSAIMw5uV0/+5WnNyYNJ13R7q
         +WYYDcUuKwru+uVKIFeheOFpKdgU+A6JdfZ0Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=NAJTICptbkAF7YtXuCacC46lGvfKt+/gZOuD1GfKr5YLt3eqHdQJ2QrpxiE/r1IQ1S
         f/LzVLlutNroQVEwM0a7WslFWDwb2B3fOXt/bJg/XtjOB2jGN38V94T9hz2KbJnLxUyj
         mUQcWg3Sz4LcCfJysO0KHUQzVvUi91CzxIFHU=
Received: by 10.140.192.9 with SMTP id p9mr948618rvf.193.1224095565852;
        Wed, 15 Oct 2008 11:32:45 -0700 (PDT)
Received: by 10.141.66.11 with HTTP; Wed, 15 Oct 2008 11:32:45 -0700 (PDT)
Message-ID: <6de6b1650810151132r709f6c34l3b25e2934690c63c@mail.gmail.com>
Date: Wed, 15 Oct 2008 16:32:45 -0200
From: "Rafael Almeida" <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fields with the same name
In-Reply-To: <359a92830810151122k3dab0267ucb87819ac33ab82d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6de6b1650810151041k3156654dyaf16887cc12c4311@mail.gmail.com>
	 <359a92830810151122k3dab0267ucb87819ac33ab82d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Oct 15, 2008 at 4:22 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> Yes, in terms of what you probably mean, but your first
> example would index one token "bar1bar2". But if you
> changed your first example to (note space): they would
> be entirely equivalent.
>
>   doc.add(new Field("foo",
>                             "bar1 bar2",
>                             Field.Store.YES,
>                             Field.Index.ANALYZED));
>
>
> One note: The rather technical difference between the two methods
> is that multiple calls to index the same field add PositionIncrementGap
> to the first token of calls 2-n. This defaults to 1, so it doesn't change
> anything unless you change it in your analyzer. Don't worry about it
> yet <G>...
>

So the WhiteSpaceAnalyzer, for instance, would treat bar1 and bar2 as
two different tokens, making either a search for bar1 or bar2 a hit?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 15 19:23:16 2008
Return-Path: <java-user-return-36652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82252 invoked from network); 15 Oct 2008 19:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Oct 2008 19:23:15 -0000
Received: (qmail 48865 invoked by uid 500); 15 Oct 2008 19:23:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48839 invoked by uid 500); 15 Oct 2008 19:23:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48828 invoked by uid 99); 15 Oct 2008 19:23:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 12:23:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 19:22:02 +0000
Received: by rv-out-0506.google.com with SMTP id g9so1658250rvb.2
        for <java-user@lucene.apache.org>; Wed, 15 Oct 2008 12:22:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=gVGHGESGq/3kUc2Ak9xCY7BCH4bbErIIWLeRdYCvJUs=;
        b=bXG7zOtzoiYqJsOA+JDfxU9HUmJ+BBOtJy8rAm9fcKNH4wHqSejsZX0iSh4g4mGlWO
         iXNx0JyHNsax/sSpPo5hiHimflzSEM422/+oyHqoYMH3i0qti5YQt0e+XD2JwvURyOlf
         or1NQoKiZ76xxsf4gb80NMW+9l9vEISGbay9w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Ni5/ZfKqCntUlW/ATqSTTMU+u1qR+sDYAVWaKe7Mj7X2JkswH8WfJM/asEJMZkJ/E8
         /Mwxnu/YYLlhc5eVjKp4jfoljWIodwPG9n6b0+22vJub+244/EU4Cdu9h7EzdWil8WBD
         1vxMBOrM8q4uln+I4za71kZUUkFOacSw2mfvo=
Received: by 10.141.79.12 with SMTP id g12mr992492rvl.126.1224098550329;
        Wed, 15 Oct 2008 12:22:30 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Wed, 15 Oct 2008 12:22:30 -0700 (PDT)
Message-ID: <359a92830810151222g413bf3c4u26cb5a07ac28e529@mail.gmail.com>
Date: Wed, 15 Oct 2008 15:22:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fields with the same name
In-Reply-To: <6de6b1650810151132r709f6c34l3b25e2934690c63c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14461_30402076.1224098550318"
References: <6de6b1650810151041k3156654dyaf16887cc12c4311@mail.gmail.com>
	 <359a92830810151122k3dab0267ucb87819ac33ab82d@mail.gmail.com>
	 <6de6b1650810151132r709f6c34l3b25e2934690c63c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14461_30402076.1224098550318
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, assuming as I pointed out that your input string had
whitespace between "bar1" and "bar2" in your first example...

Erick

On Wed, Oct 15, 2008 at 2:32 PM, Rafael Almeida <almeidaraf@gmail.com>wrote:

> On Wed, Oct 15, 2008 at 4:22 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
> > Yes, in terms of what you probably mean, but your first
> > example would index one token "bar1bar2". But if you
> > changed your first example to (note space): they would
> > be entirely equivalent.
> >
> >   doc.add(new Field("foo",
> >                             "bar1 bar2",
> >                             Field.Store.YES,
> >                             Field.Index.ANALYZED));
> >
> >
> > One note: The rather technical difference between the two methods
> > is that multiple calls to index the same field add PositionIncrementGap
> > to the first token of calls 2-n. This defaults to 1, so it doesn't change
> > anything unless you change it in your analyzer. Don't worry about it
> > yet <G>...
> >
>
> So the WhiteSpaceAnalyzer, for instance, would treat bar1 and bar2 as
> two different tokens, making either a search for bar1 or bar2 a hit?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14461_30402076.1224098550318--

From java-user-return-36653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 04:03:48 2008
Return-Path: <java-user-return-36653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30378 invoked from network); 16 Oct 2008 04:03:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 04:03:47 -0000
Received: (qmail 30126 invoked by uid 500); 16 Oct 2008 04:03:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30098 invoked by uid 500); 16 Oct 2008 04:03:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30071 invoked by uid 99); 16 Oct 2008 04:03:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 21:03:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.43.219.5] (HELO web8313.mail.in.yahoo.com) (202.43.219.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Oct 2008 04:02:26 +0000
Received: (qmail 79987 invoked by uid 60001); 16 Oct 2008 04:01:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=MYjnZiJ2wqxEoFgAAodJO7s8h5uTpvx5y0MIjTK3I2xwFJesIcwwwxTrIjuGur2P4h/YMsmgEtBN6cINeSWQj9OmkWiS/F05kSD38RdEo4GtwVx/47bes0xx0nhj8iBfdRDsCtVsRFr0tLyxQvlTHqq5NRC48h1ea5vAmXSIwYE=;
X-YMail-OSG: 6Z8KdbAVM1kafBGngCY_81H3yuOl1oKP1_FlMoysIRhEbAcwjsSMGtCw_KaFOdTRBqVHix4klH7yD7YOobVDpL7IEFFFHM0aKUB6ovNKAoa3n0.Shq7AhPll7hk_0kaPP2P4Kop4_sQcSAF4S1CbpXZ9YDg.pPhbNvm1.cXivncNR1b5Xqw-
Received: from [192.251.134.5] by web8313.mail.in.yahoo.com via HTTP; Thu, 16 Oct 2008 09:31:59 IST
X-Mailer: YahooMailWebService/0.7.218.2
Date: Thu, 16 Oct 2008 09:31:59 +0530 (IST)
From: prabina pattanayak <prabina007@yahoo.co.in>
Reply-To: prabina007@yahoo.co.in
Subject: RE: I am not able to run Lucene 2.4 Demo
To: java-user@lucene.apache.org, Sithu.Sudarsan@fda.hhs.gov
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73AF6@FMD3VS012.fda.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-290817334-1224129719=:79960"
Message-ID: <402311.79960.qm@web8313.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-290817334-1224129719=:79960
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

hi sudarsan. it also does not work for me.
no, i have tried the way you have specified, but it also does not work.
it is throwing the same error message.
one thing i want to share more is : i am using Windows OS.
is there anything specific to be done for Windows OS.
=C2=A0
plz, help me out from this problem.
=C2=A0
thanx in advance.
plz, somebody help.
i desparately need the help from you guys.
=C2=A0
regards,
Prabina


--- On Wed, 15/10/08, Sudarsan, Sithu D. <Sithu.Sudarsan@fda.hhs.gov> wrote=
:

From: Sudarsan, Sithu D. <Sithu.Sudarsan@fda.hhs.gov>
Subject: RE: I am not able to run Lucene 2.4 Demo
To: java-user@lucene.apache.org, prabina007@yahoo.co.in
Date: Wednesday, 15 October, 2008, 8:28 PM

Hi Prabina,

The way your are specifying path E:\... is not correct.=20
Use something like /prabina/lucene-2.4demo/src

Hope this helps,

Sincerely,
Sithu Sudarsan

-----Original Message-----
From: prabina pattanayak [mailto:prabina007@yahoo.co.in]=20
Sent: Wednesday, October 15, 2008 1:12 AM
To: java-user@lucene.apache.org; java-user-owner@lucene.apache.org
Subject: I am not able to run Lucene 2.4 Demo

Hi All,
i am a beginner to Lucene.=C2=A0
and i am trying to use Lucene 2.4.
when i have set lucene-core-2.4.0.jar & lucene-demos-2.4.0.jar in my
CLASSPATH. and trying to run:
=C2=A0=C2=A0=C2=A0=C2=A0 =C2=A0java org.apache.lucene.demo.IndexFiles
E:\prabina\lucene-2.4demo\src
it shows the error:
caught a class java.io.FileNotFoundException
with message: no segments* file found in
org.apache.lucene.store.FSDirectory@E:\prabina\lucene-2.4demo\index:
files:=20
but it creates the index folder in my current directory. but the index fold=
er
is empty. no segments files are there.
=C2=A0
plz, help me out from this problem ASAP.
=C2=A0



      Add more friends to your messenger and enjoy! Go to
http://messenger.yahoo.com/invite/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=0A=0A=0A      Add more friends to your messenger and enjoy! Go to http://m=
essenger.yahoo.com/invite/
--0-290817334-1224129719=:79960--

From java-user-return-36654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 06:36:14 2008
Return-Path: <java-user-return-36654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95038 invoked from network); 16 Oct 2008 06:36:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 06:36:14 -0000
Received: (qmail 36480 invoked by uid 500); 16 Oct 2008 06:36:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36452 invoked by uid 500); 16 Oct 2008 06:36:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36441 invoked by uid 99); 16 Oct 2008 06:36:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Oct 2008 23:36:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.125] (HELO smtp142.mail.mud.yahoo.com) (209.191.107.125)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Oct 2008 06:34:58 +0000
Received: (qmail 58426 invoked from network); 16 Oct 2008 06:35:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=FstjxsD6FTwlSMhxZVjay7X1UuDkAVcviWb6OyvNxL/DykaK1tJ6NCZutfmJZCK71wPAp/cVYSX2bZXpsHRhfjTY33SyEUdmrviOWj33FwMCMEK0Cl5dIawWjWHCu1oQ7GNxmJ97mL//wxPKFoXED4wRMyhz0vjh/zS2ouG7jes=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp142.mail.mud.yahoo.com with SMTP; 16 Oct 2008 06:35:32 -0000
X-YMail-OSG: xAYHlJEVM1nHIeVAMXtq9rpMLptkoiI3TKcPmOzEqrxC_F_zhy9xz61EOE86fQji9XQfrndChJNKpwr2eKYTYjOOeG9aM9YKa4nGGmdWKuHuj5tdFfpRXe4t6kHec71crZxKD3xRfpTQARbJJDJYXzEg
X-Yahoo-Newman-Property: ymail-3
Message-ID: <026901c92f59$6399d2f0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>,
	<prabina007@yahoo.co.in>,
	<java-user-owner@lucene.apache.org>
References: <129036.32859.qm@web8315.mail.in.yahoo.com>
Subject: Re: I am not able to run Lucene 2.4 Demo
Date: Thu, 16 Oct 2008 12:05:24 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello prabina,

I worked fine in windows. Could you provide the details of exception and 
also the System.out messages printed by the application.

Index folder will be created in the current directory. When you execute java 
org.apache.lucene.demo.IndexFiles <root directory>, the list of files 
available in the root directory will get indexed. In your case it is 
"E:\prabina\lucene-2.4demo\src"

I have tried the following and it worked.
D:\Program Files\lucene-2.4.0>java -cp 
"lucene-demos-2.4.0.jar;lucene-core-2.4.0.jar" 
org.apache.lucene.demo.IndexFiles "D:\Program Files\lucene-2.4.0\src"

Regards
Ganesh


----- Original Message ----- 
From: "prabina pattanayak" <prabina007@yahoo.co.in>
To: <java-user@lucene.apache.org>; <java-user-owner@lucene.apache.org>
Sent: Wednesday, October 15, 2008 10:42 AM
Subject: I am not able to run Lucene 2.4 Demo


Hi All,
i am a beginner to Lucene.
and i am trying to use Lucene 2.4.
when i have set lucene-core-2.4.0.jar & lucene-demos-2.4.0.jar in my 
CLASSPATH. and trying to run:
java org.apache.lucene.demo.IndexFiles E:\prabina\lucene-2.4demo\src
it shows the error:
caught a class java.io.FileNotFoundException
with message: no segments* file found in 
org.apache.lucene.store.FSDirectory@E:\prabina\lucene-2.4demo\index: files:
but it creates the index folder in my current directory. but the index 
folder is empty. no segments files are there.

plz, help me out from this problem ASAP.




      Add more friends to your messenger and enjoy! Go to 
http://messenger.yahoo.com/invite/ 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 10:02:11 2008
Return-Path: <java-user-return-36655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98958 invoked from network); 16 Oct 2008 10:02:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 10:02:06 -0000
Received: (qmail 96620 invoked by uid 500); 16 Oct 2008 10:02:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95636 invoked by uid 500); 16 Oct 2008 10:01:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95624 invoked by uid 99); 16 Oct 2008 10:01:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 03:01:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 10:00:52 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3095016fkq.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 03:01:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=GvT5jKEnRXUton8bera2QV+d9wd8DHBmbe1bGD+MWfI=;
        b=kzEQhQD5tplblapdbeTtWtAARL9v/s+NjfDhbpQK9a2aSv3VA3POKa4DeTUfdhtWxV
         SHLeUeSTU0CXHu+lvzkcMBz1E7W8opXtffh0FNxul5ELicNscdZQncEFZjLMmaDY5gJ6
         hf1b3HKhIVG+eQkg/+6SrOuD5lnHN3Fyr6gLU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=NIb6WrItWCgiQxBTKcxe1VPjtdkZE+iwefgMqNMiAFwRcNkulAqlqDSrY6e5GpZzEt
         78RLYFD/VnJLIjxW6FfSMgzRB8uztjwV1r/jK+94qgvayAhL/q9YRH6lnB36uxm5TIft
         Qcp97ULqmjdNrRX9xqKvsfaCpMl6ma93rA5gk=
Received: by 10.187.162.6 with SMTP id p6mr254987fao.9.1224151278531;
        Thu, 16 Oct 2008 03:01:18 -0700 (PDT)
Received: by 10.187.215.13 with HTTP; Thu, 16 Oct 2008 03:01:18 -0700 (PDT)
Message-ID: <5816fbdd0810160301x719431edica49e882bdd3a487@mail.gmail.com>
Date: Thu, 16 Oct 2008 15:31:18 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Using JdbcDirectory
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40519_30337132.1224151278535"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40519_30337132.1224151278535
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am using the Compass implementation of Lucene's JdbcDirectory interface,
to create the index in a database.

Currently I am using RAMDirectory to act in the middle to get some buffering
support to reduce the performance hit. Am I doing anything unnecessary here?
Somewhere I saw that JdbcDirectory itself supports some buffering. If so I
think I can keep the RAMDirectory away  and just continue with
JdbcDirectory.
Is it possible and reasonable? Can anyone give any idea please?

Thanks in advance,
Kalani.

-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_40519_30337132.1224151278535--

From java-user-return-36656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 10:04:10 2008
Return-Path: <java-user-return-36656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 607 invoked from network); 16 Oct 2008 10:04:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 10:04:10 -0000
Received: (qmail 217 invoked by uid 500); 16 Oct 2008 10:04:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 182 invoked by uid 500); 16 Oct 2008 10:04:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 171 invoked by uid 99); 16 Oct 2008 10:04:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 03:04:04 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 10:02:55 +0000
Received: from [192.168.236.156] (helo=isper.nabble.com)
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KqPhc-0006xH-KF
	for java-user@lucene.apache.org; Thu, 16 Oct 2008 03:03:32 -0700
Message-ID: <20010623.post@talk.nabble.com>
Date: Thu, 16 Oct 2008 03:02:42 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: highlighter / fragmenter performance for large fields
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA567453F4@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <CC2671C08F06704ABFD37ED1EA09AA567453F4@birexchange.BIRPLAZA.local>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Brian,

I don't know the internals of highlighting (=E2=80=9Eexplanation=E2=80=9C) =
in lucene.
But I know that XTF (
http://xtf.wiki.sourceforge.net/underHood_Documents#tocunderHood_Documents5
) can handle very large documents (above 100 Mbyte) with highlighting very
fast. The difference to your approach is, that xtf devide the document in
small (overlapping) chunks and store the original text as xml separately
with connection to lucene indexed fields via numbered xml-nodes.
For large texts (above 200 KByte), it is the best tool I know.

Best regards
  Karsten


Beard, Brian wrote:
>=20
> We index some documents which have an "all" field containing all of the
> data which can be searched on.
>=20
> One of the problems we're having is when this field is say 10Mbytes the
> highlighter takes about a second to calculate the best fragments. The
> search only takes 30 milliseconds. I've accomodated the load time for
> the text which is about 5-10X faster in general, so 0.1-0.2 seconds for
> loading text from the document, and the other 0.8-0.9 performing
> highlighting.
>=20

--=20
View this message in context: http://www.nabble.com/highlighter---fragmente=
r-performance-for-large-fields-tp19958865p20010623.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 10:13:48 2008
Return-Path: <java-user-return-36657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7745 invoked from network); 16 Oct 2008 10:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 10:13:48 -0000
Received: (qmail 20710 invoked by uid 500); 16 Oct 2008 10:13:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20449 invoked by uid 500); 16 Oct 2008 10:13:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20438 invoked by uid 99); 16 Oct 2008 10:13:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 03:13:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yarimahdi@gmail.com designates 72.14.246.248 as permitted sender)
Received: from [72.14.246.248] (HELO ag-out-0708.google.com) (72.14.246.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 10:12:35 +0000
Received: by ag-out-0708.google.com with SMTP id 23so4240596agd.11
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 03:13:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=r8zb2ZmTMkrymgqGDs+QzvSypE2Fxo8YLnWHv237zE0=;
        b=mxCQd4swKPtNepIUeX/3xO8EQxxQcDd09bk6M4wvhBnAZQwOI21cdHoMnbDXjvBmYg
         aHbmJ7mnntt+8YixIAZDfEx9D7NTpkh6H5abvYWpzfW+xWvAnbm0b4YDTwl9xZud8rcV
         QWLCVNGN7D9qgdwgo4Q6J1vUqFrQ51pfLoO8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=h1D3gJzbg1JqTkUNEbROsz0q3YgLM7f5nGxCxck14V6e/LblrttJKU1yIyZ01HZLgo
         cGlEqezyMNHyJnAMU4DWucprTYDSJzUeA19rj2KDS4XPIN4m/JbY19aW0wJ/vqMJrnsq
         9yfeHcPW1OQdcYt+dGoZH6E6EwAWT2vuvgm8M=
Received: by 10.187.231.13 with SMTP id i13mr251780far.49.1224151991400;
        Thu, 16 Oct 2008 03:13:11 -0700 (PDT)
Received: by 10.187.250.20 with HTTP; Thu, 16 Oct 2008 03:13:11 -0700 (PDT)
Message-ID: <aa609e6b0810160313t3bf4dd52u720b9e4e64772a04@mail.gmail.com>
Date: Thu, 16 Oct 2008 13:43:11 +0330
From: "mahdi yari" <yarimahdi@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexSearcher update
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64000_4106690.1224151991393"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64000_4106690.1224151991393
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi dears

i have a question of Lucene

i have on index with 1,000 document with id field(String:UUID) and one
indexSearcher for search on it,
after that, i start one IndexWriter that writes 1,000,000 new document in to
index,
now if i do not update IndexSearcher, can i search on first 1,000 document
without problem??

thanks and sorry for bad English
Mahdi

------=_Part_64000_4106690.1224151991393--

From java-user-return-36658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 10:15:22 2008
Return-Path: <java-user-return-36658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9011 invoked from network); 16 Oct 2008 10:15:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 10:15:22 -0000
Received: (qmail 24341 invoked by uid 500); 16 Oct 2008 10:15:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24316 invoked by uid 500); 16 Oct 2008 10:15:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24305 invoked by uid 99); 16 Oct 2008 10:15:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 03:15:15 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 10:14:09 +0000
Received: by ug-out-1314.google.com with SMTP id j3so1749268ugf.23
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 03:14:34 -0700 (PDT)
Received: by 10.67.116.7 with SMTP id t7mr6392379ugm.64.1224152074338;
        Thu, 16 Oct 2008 03:14:34 -0700 (PDT)
Received: by 10.66.251.16 with HTTP; Thu, 16 Oct 2008 03:14:34 -0700 (PDT)
Message-ID: <11e852b50810160314o395e0aaoa9602f0439b18e4d@mail.gmail.com>
Date: Thu, 16 Oct 2008 11:14:34 +0100
From: "Chris Mannion" <chris.mannion@nonstopgov.com>
To: java-user@lucene.apache.org
Subject: No hits for longer search strings
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36809_15385932.1224152074337"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36809_15385932.1224152074337
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I have a bit of a puzzle in the Lucene system we've been running.  Part of
our use involves inserting documents indexed by a unique key and then
running exact searches to find that single document again later to display
(the documents are also indexed by several other fields and used in a
broader search, hence using Lucene).  I've just hit a strange bug lately
where the documents are not being found under certain circumstances.  We've
usually been indexing by unique ids about 12 characters in length, e.g.
t10001c53421 and this has always worked fine, however when the id length is
whacked up to 18, e.g. t10001c63241985103, the search never finds the
documents.  I've used Luke which allows me to open the index for browsing
and can see that the documents are definitely in the index and have the
correct unique id values stored in there, so it seems to be a problem with
the search.

We're using a search string like (unique_id:(t10001c63241985103*) ) and
standard analyzers to run the search.  Does anyone have any ideas why the
increased search string length would affect things like this?

-- 
Chris Mannion
iCasework and LocalAlert implementation team
0208 144 4416

------=_Part_36809_15385932.1224152074337--

From java-user-return-36659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 10:18:15 2008
Return-Path: <java-user-return-36659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11015 invoked from network); 16 Oct 2008 10:18:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 10:18:15 -0000
Received: (qmail 27975 invoked by uid 500); 16 Oct 2008 10:18:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27920 invoked by uid 500); 16 Oct 2008 10:18:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27909 invoked by uid 99); 16 Oct 2008 10:18:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 03:18:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yarimahdi@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 10:17:00 +0000
Received: by mu-out-0910.google.com with SMTP id i10so3163701mue.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 03:17:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=SrXu0F4q5G0A92CBWRCdxliVRaWNUSZXL+TfR9JFUaU=;
        b=l319J2zdIxTI8nMuVctKx2/w/d615mUtZrIfpTvNiz3r8ao/omOXSV39TzkgiS5uEH
         TspvAed8wVqAItyITE9TgjCbdXpH/LeOaRUpicuHM+PzONeajDu2QJGhdlr1jcVLo4QA
         FEe+6uFg5Ty5VgwtkxyOT029XTMzst1bZ4VII=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=gBlKI0F7/lywfeQ/Lbq+1jJ8FAA4zYU87xCYlxE2FQNzMHKczRrJ/BSZMFj8sWUVB/
         FO/fSHfogJAq9JLlY7VGk8vS4oLz8gzDKWup43fxvYFY8mnZZQWx0I8kxGuyZAh6SK0Z
         wWLMwVbh1s4ugpPi9Sfp3uMPQCwg6eR7Bl2D4=
Received: by 10.187.219.6 with SMTP id w6mr253352faq.29.1224152256830;
        Thu, 16 Oct 2008 03:17:36 -0700 (PDT)
Received: by 10.187.250.20 with HTTP; Thu, 16 Oct 2008 03:17:36 -0700 (PDT)
Message-ID: <aa609e6b0810160317g78748e51kad2c743749e8471b@mail.gmail.com>
Date: Thu, 16 Oct 2008 13:47:36 +0330
From: "mahdi yari" <yarimahdi@gmail.com>
To: java-user@lucene.apache.org
Subject: update IndexSearcher
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64125_5550075.1224152256828"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64125_5550075.1224152256828
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi dears

i have a question of Lucene

i have on index with 1,000 document with id field(String:UUID) and one
indexSearcher for search on it,
after that, i start one IndexWriter that writes 1,000,000 new document in to
index,
now if i do not update IndexSearcher, can i search on first 1,000 document
without problem??

thanks and sorry for bad English
Mahdi

------=_Part_64125_5550075.1224152256828--

From java-user-return-36660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 10:50:17 2008
Return-Path: <java-user-return-36660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22834 invoked from network); 16 Oct 2008 10:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 10:50:16 -0000
Received: (qmail 68276 invoked by uid 500); 16 Oct 2008 10:50:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68181 invoked by uid 500); 16 Oct 2008 10:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68170 invoked by uid 99); 16 Oct 2008 10:50:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 03:50:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 10:49:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3073004rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 03:49:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=LF+eSkr+Tl3t9QTK9kPRNl+tUV1Hk0dj+CSxEtO+V74=;
        b=k/2gMLTx5rgTEGsfCMCvC4hdy6SGnBrQRzpqBd2N/aQM8oFrTnCLacfLF06M8laCjl
         NoCjGW7fs3g8F4Ux1YE9dG3R+/Os0jGm5OqJlPPvXkAxWAisVi4vV2dtChV9WDBQSLMk
         qjSKYatbs7F4njSEJHHttZevgnYU3WsWtyGio=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=R8v9P8ECeM1G72+AvbNBP0OlX6zhTOElxVCk6URUzukn4nTHVIVKSG159vQkLoWS9g
         L/mLr4xFRiBx7Z9UL05+f2mU4fw9AaUou0SOzRikD5cQfZmYXwZYOTIg/hpdSOJax47E
         xNNYKn5PqjfICu8YeqTYH4ZIWmlLPB/F2Nsys=
Received: by 10.140.157.4 with SMTP id f4mr1484632rve.118.1224154169579;
        Thu, 16 Oct 2008 03:49:29 -0700 (PDT)
Received: by 10.141.170.2 with HTTP; Thu, 16 Oct 2008 03:49:29 -0700 (PDT)
Message-ID: <867513fe0810160349n7bcf6362tbe441764be07f0cc@mail.gmail.com>
Date: Thu, 16 Oct 2008 16:19:29 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher update
In-Reply-To: <aa609e6b0810160313t3bf4dd52u720b9e4e64772a04@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39763_427693.1224154169579"
References: <aa609e6b0810160313t3bf4dd52u720b9e4e64772a04@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39763_427693.1224154169579
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes you can! :)
Very normally.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Oct 16, 2008 at 3:43 PM, mahdi yari <yarimahdi@gmail.com> wrote:

> hi dears
>
> i have a question of Lucene
>
> i have on index with 1,000 document with id field(String:UUID) and one
> indexSearcher for search on it,
> after that, i start one IndexWriter that writes 1,000,000 new document in
> to
> index,
> now if i do not update IndexSearcher, can i search on first 1,000 document
> without problem??
>
> thanks and sorry for bad English
> Mahdi
>

------=_Part_39763_427693.1224154169579--

From java-user-return-36661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 11:03:28 2008
Return-Path: <java-user-return-36661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29388 invoked from network); 16 Oct 2008 11:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 11:03:28 -0000
Received: (qmail 1273 invoked by uid 500); 16 Oct 2008 11:03:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1246 invoked by uid 500); 16 Oct 2008 11:03:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1235 invoked by uid 99); 16 Oct 2008 11:03:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 04:03:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yarimahdi@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 11:02:15 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2370643fgb.27
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 04:02:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=aeGNz+EBhc6c+0wGnqLPNras7NmhtvSYi5M7AyaHDZk=;
        b=T1I9rqAggSPfkbsuVq8wuU0QXJ+4sCwsJE2ZyYcjne7ms5u+OKluaLRHmCa+N7DaWb
         8IEweJShUjZ3a0DOuOZ9QOTfJIC/DhamMvXiuuIEXzQKD0b4lSzyJCVg8zUk5dni/sAf
         ID//LZx+UBVFZ6RxlbowHtUI/db0dkpu227Xs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZsqiWiIeqXdWlwXMi9VSJoa+m9TCTrro7ZrqHsaXxVX8j8ECcaqStEQGKztN7yHmce
         wThkqgS9kbZl6tN9ozbkP2FANrmHhCmntDKk4hzQjtZL6HyQ1H7XhWi40Kwo2DuYaNQ+
         IAMP+LajeXXX93d778Dbmk4h3UN/8ITQBVTk4=
Received: by 10.187.230.4 with SMTP id h4mr260872far.12.1224154962248;
        Thu, 16 Oct 2008 04:02:42 -0700 (PDT)
Received: by 10.187.250.20 with HTTP; Thu, 16 Oct 2008 04:02:42 -0700 (PDT)
Message-ID: <aa609e6b0810160402v40025adeo8568fd87d55018ed@mail.gmail.com>
Date: Thu, 16 Oct 2008 14:32:42 +0330
From: "mahdi yari" <yarimahdi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher update
In-Reply-To: <867513fe0810160349n7bcf6362tbe441764be07f0cc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65175_18289188.1224154962259"
References: <aa609e6b0810160313t3bf4dd52u720b9e4e64772a04@mail.gmail.com>
	 <867513fe0810160349n7bcf6362tbe441764be07f0cc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65175_18289188.1224154962259
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks for your reply.
and how about merge?
if i searcher on index1, and in other thread, i try to merge index2 into
index1 and i do not update searcher, can i continue searching on index1?
thanks
Mahdi

On Thu, Oct 16, 2008 at 2:19 PM, Anshum <anshumg@gmail.com> wrote:

> Yes you can! :)
> Very normally.
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Thu, Oct 16, 2008 at 3:43 PM, mahdi yari <yarimahdi@gmail.com> wrote:
>
> > hi dears
> >
> > i have a question of Lucene
> >
> > i have on index with 1,000 document with id field(String:UUID) and one
> > indexSearcher for search on it,
> > after that, i start one IndexWriter that writes 1,000,000 new document in
> > to
> > index,
> > now if i do not update IndexSearcher, can i search on first 1,000
> document
> > without problem??
> >
> > thanks and sorry for bad English
> > Mahdi
> >
>

------=_Part_65175_18289188.1224154962259--

From java-user-return-36662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 11:32:11 2008
Return-Path: <java-user-return-36662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39437 invoked from network); 16 Oct 2008 11:32:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 11:32:11 -0000
Received: (qmail 35739 invoked by uid 500); 16 Oct 2008 11:32:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35717 invoked by uid 500); 16 Oct 2008 11:32:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35706 invoked by uid 99); 16 Oct 2008 11:32:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 04:32:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 11:30:55 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to restore corrupted index
Date: Thu, 16 Oct 2008 17:01:24 +0530
Message-ID: <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com>
In-Reply-To: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to restore corrupted index
Thread-Index: Ackf5H2CRHH/h77eT8qZFgTxwBHSpQPnboew
From: "Chaula Ganatra" <cganatra@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am again getting the following error while optimization.


java.io.FileNotFoundException: \\machine01\indexes\_w5.cfs (The system
cannot find the file specified)
16:20:57,533 INFO  [STDOUT] : 140 	at
java.io.RandomAccessFile.open(Native Method)
16:20:57,533 INFO  [STDOUT] : 140 	at
java.io.RandomAccessFile.<init>(Unknown Source)
16:20:57,533 INFO  [STDOUT] : 140 	at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDir
ectory.java:506)
16:20:57,533 INFO  [STDOUT] : 140 	at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java
:536)
16:20:57,565 INFO  [STDOUT] : 140 	at
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
16:20:57,565 INFO  [STDOUT] : 140 	at
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
a:70)
16:20:57,565 INFO  [STDOUT] : 140 	at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:181)
16:20:57,565 INFO  [STDOUT] : 140 	at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:167)
16:20:57,565 INFO  [STDOUT] : 140 	at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:139)
16:20:57,565 INFO  [STDOUT] : 140 	at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1867)
16:20:57,565 INFO  [STDOUT] : 140 	at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1231)


If I try to optimize it again then also getting the same error.

Can anyone please help me out? It is occurring on live environment.


Regards,
Chaula

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 26 September, 2008 8:00 PM
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index


It's perfectly fine to have a reader open on an index, while an =20
IndexWriter runs optimize.

Which version of Lucene are you using?  And which OS & filesystem?

Mike

Chaula Ganatra wrote:

> It was the Reader on same index, which I did not close so gave =20
> exception
> in writer.optimise()
>
> Chaula
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 26 September, 2008 7:17 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to restore corrupted index
>
>
> Can you post the full stack trace in both cases?
>
> Mike
>
> Chaula Ganatra wrote:
>
>> I found one case when such multiple files are remained, when we call
>> writer.optimise() it throws exception and multiple files remained in
>> index dir.
>>
>> After such multiple files, when we add document in index by calling
>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>
>> Regards,
>> Chaula
>>
>> -----Original Message-----
>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>> Sent: 26 September, 2008 6:02 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: How to restore corrupted index
>>
>> There is the CheckIndex tool included in the distribution for
>> checking/
>> fixing bad indexes, but it can't solve everything.
>>
>> The bigger question is why it is happening to begin with.  Can you
>> describe your indexing process?  How do you know the index is =20
>> actually
>> corrupted?  Are you seeing exceptions when opening it?
>>
>> -Grant
>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>
>>> We have an application in which index will be updated frequently.
>>>
>>> During development time, found that index files gets corrupted, i.e.
>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>> nrm
>>>
>>> Remains there in index directory.
>>>
>>> Is there any way that such issue does not occur at all or if it
>>> happens
>>> we can recover the index data again?
>>>
>>> It would be a great help, if some one can.
>>>
>>>
>>>
>>>
>>>
>>> Regards,
>>>
>>> Chaula
>>>
>>>
>>>
>>>
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 11:53:49 2008
Return-Path: <java-user-return-36663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48402 invoked from network); 16 Oct 2008 11:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 11:53:49 -0000
Received: (qmail 71775 invoked by uid 500); 16 Oct 2008 11:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71745 invoked by uid 500); 16 Oct 2008 11:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71732 invoked by uid 99); 16 Oct 2008 11:53:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 04:53:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yarimahdi@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 11:52:33 +0000
Received: by mu-out-0910.google.com with SMTP id i10so3190443mue.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 04:53:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8EjlDbH+Lu9JXqRNLswVuIdFALmjjPUu6iWHTcqA08M=;
        b=Oix0n2kITsSL1iZjYP8goopAorrHbZ98GMA/3dPCQennMOPitnTHospVD2hy24xKdC
         PhcHAt8RNSe9xgIspgGc/wPXqRVQ5Y//zNXlbdV62OAKqEIqDmBkBxlLwIB1P/O0OmqD
         8hRk13TrlFL8fcBhF96czLvJJtOefymIq9uQw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=a54rO+oArNvuGhsrl+QkZ6zvVkbsF9g2o/AP5IANIRxroSTZMw/88T5x1BmVt2gEAg
         vxoeLMHLxPx55T0AyDa9fgXToeWr6AQrvpBylHY41/KyBboShlYa8Nv16SNcEq2a6/GU
         kpOikCrAIssb2muvoU7uzAVLlN2CA6at55Cxs=
Received: by 10.187.202.7 with SMTP id e7mr267106faq.8.1224157989097;
        Thu, 16 Oct 2008 04:53:09 -0700 (PDT)
Received: by 10.187.250.20 with HTTP; Thu, 16 Oct 2008 04:53:09 -0700 (PDT)
Message-ID: <aa609e6b0810160453i340e40d8p7592684afd620232@mail.gmail.com>
Date: Thu, 16 Oct 2008 15:23:09 +0330
From: "mahdi yari" <yarimahdi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index
In-Reply-To: <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65698_27303800.1224157989095"
References: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com>
	 <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65698_27303800.1224157989095
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi dears
i have same problem
i indexing on Ubuntu Linux Distro and i have large index (>30G) and
mergeFactor = 10,
my Lucene version is 2.2.0
i think this maybe bug on Lucene 2.2.0

but i get this error sometimes, not always
thanks alot


On Thu, Oct 16, 2008 at 3:01 PM, Chaula Ganatra <cganatra@asite.com> wrote:

> Hi,
>
> I am again getting the following error while optimization.
>
>
> java.io.FileNotFoundException: \\machine01\indexes\_w5.cfs (The system
> cannot find the file specified)
> 16:20:57,533 INFO  [STDOUT] : 140       at
> java.io.RandomAccessFile.open(Native Method)
> 16:20:57,533 INFO  [STDOUT] : 140       at
> java.io.RandomAccessFile.<init>(Unknown Source)
> 16:20:57,533 INFO  [STDOUT] : 140       at
> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDir
> ectory.java:506)
> 16:20:57,533 INFO  [STDOUT] : 140       at
> org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java
> :536)
> 16:20:57,565 INFO  [STDOUT] : 140       at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
> 16:20:57,565 INFO  [STDOUT] : 140       at
> org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
> a:70)
> 16:20:57,565 INFO  [STDOUT] : 140       at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:181)
> 16:20:57,565 INFO  [STDOUT] : 140       at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:167)
> 16:20:57,565 INFO  [STDOUT] : 140       at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:139)
> 16:20:57,565 INFO  [STDOUT] : 140       at
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1867)
> 16:20:57,565 INFO  [STDOUT] : 140       at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1231)
>
>
> If I try to optimize it again then also getting the same error.
>
> Can anyone please help me out? It is occurring on live environment.
>
>
> Regards,
> Chaula
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 26 September, 2008 8:00 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to restore corrupted index
>
>
> It's perfectly fine to have a reader open on an index, while an
> IndexWriter runs optimize.
>
> Which version of Lucene are you using?  And which OS & filesystem?
>
> Mike
>
> Chaula Ganatra wrote:
>
> > It was the Reader on same index, which I did not close so gave
> > exception
> > in writer.optimise()
> >
> > Chaula
> >
> > -----Original Message-----
> > From: Michael McCandless [mailto:lucene@mikemccandless.com]
> > Sent: 26 September, 2008 7:17 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: How to restore corrupted index
> >
> >
> > Can you post the full stack trace in both cases?
> >
> > Mike
> >
> > Chaula Ganatra wrote:
> >
> >> I found one case when such multiple files are remained, when we call
> >> writer.optimise() it throws exception and multiple files remained in
> >> index dir.
> >>
> >> After such multiple files, when we add document in index by calling
> >> writer.addDocument it throws java.lang.NegativeArraySizeException
> >>
> >> Regards,
> >> Chaula
> >>
> >> -----Original Message-----
> >> From: Grant Ingersoll [mailto:gsingers@apache.org]
> >> Sent: 26 September, 2008 6:02 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: How to restore corrupted index
> >>
> >> There is the CheckIndex tool included in the distribution for
> >> checking/
> >> fixing bad indexes, but it can't solve everything.
> >>
> >> The bigger question is why it is happening to begin with.  Can you
> >> describe your indexing process?  How do you know the index is
> >> actually
> >> corrupted?  Are you seeing exceptions when opening it?
> >>
> >> -Grant
> >> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
> >>
> >>> We have an application in which index will be updated frequently.
> >>>
> >>> During development time, found that index files gets corrupted, i.e.
> >>> more than one  cfs files,some other extension files e.g. frq, fnm,
> >>> nrm
> >>>
> >>> Remains there in index directory.
> >>>
> >>> Is there any way that such issue does not occur at all or if it
> >>> happens
> >>> we can recover the index data again?
> >>>
> >>> It would be a great help, if some one can.
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> Regards,
> >>>
> >>> Chaula
> >>>
> >>>
> >>>
> >>>
> >>>
> >>
> >> --------------------------
> >> Grant Ingersoll
> >> http://www.lucidimagination.com
> >>
> >> Lucene Helpful Hints:
> >> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_65698_27303800.1224157989095--

From java-user-return-36664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 13:33:01 2008
Return-Path: <java-user-return-36664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89666 invoked from network); 16 Oct 2008 13:33:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 13:33:00 -0000
Received: (qmail 29891 invoked by uid 500); 16 Oct 2008 13:32:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29556 invoked by uid 500); 16 Oct 2008 13:32:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29545 invoked by uid 99); 16 Oct 2008 13:32:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 06:32:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 13:31:46 +0000
Received: from [192.168.236.156] (helo=isper.nabble.com)
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KqSxj-0005QX-7T
	for java-user@lucene.apache.org; Thu, 16 Oct 2008 06:32:23 -0700
Message-ID: <20013818.post@talk.nabble.com>
Date: Thu, 16 Oct 2008 06:31:31 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: No hits for longer search strings
In-Reply-To: <11e852b50810160314o395e0aaoa9602f0439b18e4d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <11e852b50810160314o395e0aaoa9602f0439b18e4d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Chris,

most likely this is not a lucene problem.

You looked with luke in the stored fields of your document?
Please take a second look with luke in the terms of your field 'unique_id'
(with "Show top terms"):
What do you see?

Best regards
  Karsten

btw: why do you use the prefix search? This could also be reason for
problem, because your QueryParser could possible have extra rules to handle
prefixQueries.


Chris Mannion-2 wrote:
> 
> Hi All
> 
> I have a bit of a puzzle in the Lucene system we've been running.  Part of
> our use involves inserting documents indexed by a unique key and then
> running exact searches to find that single document again later to display
> (the documents are also indexed by several other fields and used in a
> broader search, hence using Lucene).  I've just hit a strange bug lately
> where the documents are not being found under certain circumstances. 
> We've
> usually been indexing by unique ids about 12 characters in length, e.g.
> t10001c53421 and this has always worked fine, however when the id length
> is
> whacked up to 18, e.g. t10001c63241985103, the search never finds the
> documents.  I've used Luke which allows me to open the index for browsing
> and can see that the documents are definitely in the index and have the
> correct unique id values stored in there, so it seems to be a problem with
> the search.
> 
> We're using a search string like (unique_id:(t10001c63241985103*) ) and
> standard analyzers to run the search.  Does anyone have any ideas why the
> increased search string length would affect things like this?
> 
> -- 
> Chris Mannion
> iCasework and LocalAlert implementation team
> 0208 144 4416
> 
> 

-- 
View this message in context: http://www.nabble.com/No-hits-for-longer-search-strings-tp20010839p20013818.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 13:40:23 2008
Return-Path: <java-user-return-36665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93210 invoked from network); 16 Oct 2008 13:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 13:40:22 -0000
Received: (qmail 38556 invoked by uid 500); 16 Oct 2008 13:40:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38523 invoked by uid 500); 16 Oct 2008 13:40:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38512 invoked by uid 99); 16 Oct 2008 13:40:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 06:40:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 13:39:10 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3133041rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 06:39:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=xKPeF1Gci5PCiUUR18LwJjmo6DxnDS8zegP/QGE1asc=;
        b=CIhpnWALd9Veb/uYlrSFMr/WbyYOEm7FdCSwR+9s/d9VRoSDgQ4u9cP0RlCMEV9Nnu
         0e5H2mPwCTfNBHggQiBtqkk6/bhK9MBrgRDAEnHM6kpdzZFKu8RU3k1xl55ls1QK217c
         lka8Kql9xKsmrsCb4om9RM0MwNK5S3Srq+KmU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OxkGUinb+bLaC9xfWK5+0g3xB4LMXbUuB4k9LpOc2KM2W5BL/9lSMizrw/kT/6ESZh
         lwCTdzCryNUe5nTleS1tDgMuWVttPI7VI8LA2ETw5i7Ln45uUxM6mSeWGsr8sBnJ4fsJ
         thPI/I7m91y5ppBqnmPlq8OSi2IEZkkK1sUKU=
Received: by 10.141.168.7 with SMTP id v7mr1602998rvo.95.1224164378767;
        Thu, 16 Oct 2008 06:39:38 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Thu, 16 Oct 2008 06:39:38 -0700 (PDT)
Message-ID: <359a92830810160639s49ea0577ud926d6e84147a505@mail.gmail.com>
Date: Thu, 16 Oct 2008 09:39:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: No hits for longer search strings
In-Reply-To: <11e852b50810160314o395e0aaoa9602f0439b18e4d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24596_22269973.1224164378764"
References: <11e852b50810160314o395e0aaoa9602f0439b18e4d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24596_22269973.1224164378764
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

query.toSting() is your friend, as is Luke's explain tab. I'd strongly
recommend that you try those, because I suspect that you're not
quite getting the search string you think.

That said, why use StandardAnalyzer for this? I'd recommend
KeywordAnalyzer instead (but watch the case).

The wildcard should be unnecessary since you're going for
exact matching.

But that query really seems like it should work. Could you post
your index and search code for this?

You can also use Luke to search your index, I'd really recommend
you try that too.

Best
Erick

On Thu, Oct 16, 2008 at 6:14 AM, Chris Mannion <chris.mannion@nonstopgov.com
> wrote:

> Hi All
>
> I have a bit of a puzzle in the Lucene system we've been running.  Part of
> our use involves inserting documents indexed by a unique key and then
> running exact searches to find that single document again later to display
> (the documents are also indexed by several other fields and used in a
> broader search, hence using Lucene).  I've just hit a strange bug lately
> where the documents are not being found under certain circumstances.  We've
> usually been indexing by unique ids about 12 characters in length, e.g.
> t10001c53421 and this has always worked fine, however when the id length is
> whacked up to 18, e.g. t10001c63241985103, the search never finds the
> documents.  I've used Luke which allows me to open the index for browsing
> and can see that the documents are definitely in the index and have the
> correct unique id values stored in there, so it seems to be a problem with
> the search.
>
> We're using a search string like (unique_id:(t10001c63241985103*) ) and
> standard analyzers to run the search.  Does anyone have any ideas why the
> increased search string length would affect things like this?
>
> --
> Chris Mannion
> iCasework and LocalAlert implementation team
> 0208 144 4416
>

------=_Part_24596_22269973.1224164378764--

From java-user-return-36666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 13:42:01 2008
Return-Path: <java-user-return-36666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94251 invoked from network); 16 Oct 2008 13:42:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 13:42:01 -0000
Received: (qmail 44992 invoked by uid 500); 16 Oct 2008 13:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44965 invoked by uid 500); 16 Oct 2008 13:41:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44954 invoked by uid 99); 16 Oct 2008 13:41:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 06:41:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 13:40:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3133714rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 06:41:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YURUtun9WGlpZgpuJtfuwtVDUg6hMSqk7yh1TPgVb/g=;
        b=IaplANuIyiMppDbtYpMWcOtF323UqdZret6eJ/oRkQPo1X7v34ih7lq9AplemuEZxr
         F9djm9PvDcBGOFBIhHfJ1QQOyYn/sV7OXQuMkHzDDBJLfY+z/b0KQpKDjzgHJVFvQDwl
         Dc5L2Q/8MKTS68y+gUs9qobuvde0jotBTHPfA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Eer9vVZ1Ikq/Oyq9c6Ku0nKmWT1ppsEn1oe2HRsmdg6HfRLbiKezM//b+Jg+WrRZA+
         wUt8SrKpVOxhJ/abcNCf2vW0C8smCdrTUazWpxv/sJHfSqb4AvBHRS0zpnr/9q35J5R5
         Qq65h8+HI0/K3H99GT/5Ke/bvMgdgA9S+Jkl4=
Received: by 10.141.129.14 with SMTP id g14mr1614163rvn.56.1224164486791;
        Thu, 16 Oct 2008 06:41:26 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Thu, 16 Oct 2008 06:41:26 -0700 (PDT)
Message-ID: <359a92830810160641y7a407118tf008d485e0ced6a9@mail.gmail.com>
Date: Thu, 16 Oct 2008 09:41:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: update IndexSearcher
In-Reply-To: <aa609e6b0810160317g78748e51kad2c743749e8471b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24641_1423118.1224164486777"
References: <aa609e6b0810160317g78748e51kad2c743749e8471b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24641_1423118.1224164486777
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, assuming that your searcher does not close/reopen the reader.
Conceptually, the indexsearcher takes a snapshot of your index at
the instant it's opened and uses that snapshot until you close the
underlying reader, so you should be fine.

Best
Erick

On Thu, Oct 16, 2008 at 6:17 AM, mahdi yari <yarimahdi@gmail.com> wrote:

> hi dears
>
> i have a question of Lucene
>
> i have on index with 1,000 document with id field(String:UUID) and one
> indexSearcher for search on it,
> after that, i start one IndexWriter that writes 1,000,000 new document in
> to
> index,
> now if i do not update IndexSearcher, can i search on first 1,000 document
> without problem??
>
> thanks and sorry for bad English
> Mahdi
>

------=_Part_24641_1423118.1224164486777--

From java-user-return-36667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 13:55:01 2008
Return-Path: <java-user-return-36667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1145 invoked from network); 16 Oct 2008 13:55:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 13:55:01 -0000
Received: (qmail 66653 invoked by uid 500); 16 Oct 2008 13:54:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65726 invoked by uid 500); 16 Oct 2008 13:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65715 invoked by uid 99); 16 Oct 2008 13:54:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 06:54:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 13:53:44 +0000
Received: by gxk6 with SMTP id 6so7297734gxk.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 06:54:21 -0700 (PDT)
Received: by 10.100.229.12 with SMTP id b12mr3418987anh.157.1224165260985;
        Thu, 16 Oct 2008 06:54:20 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b3sm2359192ana.7.2008.10.16.06.54.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 16 Oct 2008 06:54:19 -0700 (PDT)
Message-Id: <3681E3CA-CBE8-4ADC-AFC1-09525562D4B1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Thu, 16 Oct 2008 09:54:17 -0400
References: <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


You should run CheckIndex to quickly get back to a usable index, but  
it will remove any segments that have problems loading.

But... I'd like to get to the root cause here.

It looks like this is Lucene 2.2.0.

Somehow the file _w5.cfs is entirely missing.

Can you describe how your indexing process works?  Do you copy your  
index after using IndexWriter?

Is it at all possible two IndexWriters are in use against the same  
directory?  Can multiple machines do indexing against this directory?   
(It looks like (since you're using a UNC path) you have an IndexWriter  
open on a remote computer's directory.)

Mike

Chaula Ganatra wrote:

> Hi,
>
> I am again getting the following error while optimization.
>
>
> java.io.FileNotFoundException: \\machine01\indexes\_w5.cfs (The system
> cannot find the file specified)
> 16:20:57,533 INFO  [STDOUT] : 140 	at
> java.io.RandomAccessFile.open(Native Method)
> 16:20:57,533 INFO  [STDOUT] : 140 	at
> java.io.RandomAccessFile.<init>(Unknown Source)
> 16:20:57,533 INFO  [STDOUT] : 140 	at
> org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDir
> ectory.java:506)
> 16:20:57,533 INFO  [STDOUT] : 140 	at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java
> :536)
> 16:20:57,565 INFO  [STDOUT] : 140 	at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
> 16:20:57,565 INFO  [STDOUT] : 140 	at
> org 
> .apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
> a:70)
> 16:20:57,565 INFO  [STDOUT] : 140 	at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
> 181)
> 16:20:57,565 INFO  [STDOUT] : 140 	at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:167)
> 16:20:57,565 INFO  [STDOUT] : 140 	at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:139)
> 16:20:57,565 INFO  [STDOUT] : 140 	at
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java: 
> 1867)
> 16:20:57,565 INFO  [STDOUT] : 140 	at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1231)
>
>
> If I try to optimize it again then also getting the same error.
>
> Can anyone please help me out? It is occurring on live environment.
>
>
> Regards,
> Chaula
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 26 September, 2008 8:00 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to restore corrupted index
>
>
> It's perfectly fine to have a reader open on an index, while an
> IndexWriter runs optimize.
>
> Which version of Lucene are you using?  And which OS & filesystem?
>
> Mike
>
> Chaula Ganatra wrote:
>
>> It was the Reader on same index, which I did not close so gave
>> exception
>> in writer.optimise()
>>
>> Chaula
>>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: 26 September, 2008 7:17 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: How to restore corrupted index
>>
>>
>> Can you post the full stack trace in both cases?
>>
>> Mike
>>
>> Chaula Ganatra wrote:
>>
>>> I found one case when such multiple files are remained, when we call
>>> writer.optimise() it throws exception and multiple files remained in
>>> index dir.
>>>
>>> After such multiple files, when we add document in index by calling
>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>
>>> Regards,
>>> Chaula
>>>
>>> -----Original Message-----
>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>> Sent: 26 September, 2008 6:02 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: How to restore corrupted index
>>>
>>> There is the CheckIndex tool included in the distribution for
>>> checking/
>>> fixing bad indexes, but it can't solve everything.
>>>
>>> The bigger question is why it is happening to begin with.  Can you
>>> describe your indexing process?  How do you know the index is
>>> actually
>>> corrupted?  Are you seeing exceptions when opening it?
>>>
>>> -Grant
>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>
>>>> We have an application in which index will be updated frequently.
>>>>
>>>> During development time, found that index files gets corrupted,  
>>>> i.e.
>>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>>> nrm
>>>>
>>>> Remains there in index directory.
>>>>
>>>> Is there any way that such issue does not occur at all or if it
>>>> happens
>>>> we can recover the index data again?
>>>>
>>>> It would be a great help, if some one can.
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> Regards,
>>>>
>>>> Chaula
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 13:55:42 2008
Return-Path: <java-user-return-36668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1819 invoked from network); 16 Oct 2008 13:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 13:55:42 -0000
Received: (qmail 69623 invoked by uid 500); 16 Oct 2008 13:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69577 invoked by uid 500); 16 Oct 2008 13:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69566 invoked by uid 99); 16 Oct 2008 13:55:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 06:55:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 13:54:26 +0000
Received: by an-out-0708.google.com with SMTP id c37so464anc.49
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 06:55:03 -0700 (PDT)
Received: by 10.100.93.17 with SMTP id q17mr3468810anb.104.1224165302811;
        Thu, 16 Oct 2008 06:55:02 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b3sm2359192ana.7.2008.10.16.06.55.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 16 Oct 2008 06:55:01 -0700 (PDT)
Message-Id: <5B3E2464-285A-41A0-A1D5-73343E133B7F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <aa609e6b0810160453i340e40d8p7592684afd620232@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Thu, 16 Oct 2008 09:55:01 -0400
References: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com> <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com> <aa609e6b0810160453i340e40d8p7592684afd620232@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you post the full traceback for your exception, and describe your  
indexing process as well?

Mike

mahdi yari wrote:

> hi dears
> i have same problem
> i indexing on Ubuntu Linux Distro and i have large index (>30G) and
> mergeFactor = 10,
> my Lucene version is 2.2.0
> i think this maybe bug on Lucene 2.2.0
>
> but i get this error sometimes, not always
> thanks alot
>
>
> On Thu, Oct 16, 2008 at 3:01 PM, Chaula Ganatra <cganatra@asite.com>  
> wrote:
>
>> Hi,
>>
>> I am again getting the following error while optimization.
>>
>>
>> java.io.FileNotFoundException: \\machine01\indexes\_w5.cfs (The  
>> system
>> cannot find the file specified)
>> 16:20:57,533 INFO  [STDOUT] : 140       at
>> java.io.RandomAccessFile.open(Native Method)
>> 16:20:57,533 INFO  [STDOUT] : 140       at
>> java.io.RandomAccessFile.<init>(Unknown Source)
>> 16:20:57,533 INFO  [STDOUT] : 140       at
>> org.apache.lucene.store.FSDirectory$FSIndexInput 
>> $Descriptor.<init>(FSDir
>> ectory.java:506)
>> 16:20:57,533 INFO  [STDOUT] : 140       at
>> org.apache.lucene.store.FSDirectory 
>> $FSIndexInput.<init>(FSDirectory.java
>> :536)
>> 16:20:57,565 INFO  [STDOUT] : 140       at
>> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>> 16:20:57,565 INFO  [STDOUT] : 140       at
>> org 
>> .apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
>> a:70)
>> 16:20:57,565 INFO  [STDOUT] : 140       at
>> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
>> 181)
>> 16:20:57,565 INFO  [STDOUT] : 140       at
>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:167)
>> 16:20:57,565 INFO  [STDOUT] : 140       at
>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:139)
>> 16:20:57,565 INFO  [STDOUT] : 140       at
>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java: 
>> 1867)
>> 16:20:57,565 INFO  [STDOUT] : 140       at
>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1231)
>>
>>
>> If I try to optimize it again then also getting the same error.
>>
>> Can anyone please help me out? It is occurring on live environment.
>>
>>
>> Regards,
>> Chaula
>>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: 26 September, 2008 8:00 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: How to restore corrupted index
>>
>>
>> It's perfectly fine to have a reader open on an index, while an
>> IndexWriter runs optimize.
>>
>> Which version of Lucene are you using?  And which OS & filesystem?
>>
>> Mike
>>
>> Chaula Ganatra wrote:
>>
>>> It was the Reader on same index, which I did not close so gave
>>> exception
>>> in writer.optimise()
>>>
>>> Chaula
>>>
>>> -----Original Message-----
>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>> Sent: 26 September, 2008 7:17 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: How to restore corrupted index
>>>
>>>
>>> Can you post the full stack trace in both cases?
>>>
>>> Mike
>>>
>>> Chaula Ganatra wrote:
>>>
>>>> I found one case when such multiple files are remained, when we  
>>>> call
>>>> writer.optimise() it throws exception and multiple files remained  
>>>> in
>>>> index dir.
>>>>
>>>> After such multiple files, when we add document in index by calling
>>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>>
>>>> Regards,
>>>> Chaula
>>>>
>>>> -----Original Message-----
>>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>>> Sent: 26 September, 2008 6:02 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: How to restore corrupted index
>>>>
>>>> There is the CheckIndex tool included in the distribution for
>>>> checking/
>>>> fixing bad indexes, but it can't solve everything.
>>>>
>>>> The bigger question is why it is happening to begin with.  Can you
>>>> describe your indexing process?  How do you know the index is
>>>> actually
>>>> corrupted?  Are you seeing exceptions when opening it?
>>>>
>>>> -Grant
>>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>>
>>>>> We have an application in which index will be updated frequently.
>>>>>
>>>>> During development time, found that index files gets corrupted,  
>>>>> i.e.
>>>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>>>> nrm
>>>>>
>>>>> Remains there in index directory.
>>>>>
>>>>> Is there any way that such issue does not occur at all or if it
>>>>> happens
>>>>> we can recover the index data again?
>>>>>
>>>>> It would be a great help, if some one can.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> Regards,
>>>>>
>>>>> Chaula
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://www.lucidimagination.com
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 14:46:03 2008
Return-Path: <java-user-return-36669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38549 invoked from network); 16 Oct 2008 14:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 14:46:02 -0000
Received: (qmail 61373 invoked by uid 500); 16 Oct 2008 14:45:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61336 invoked by uid 500); 16 Oct 2008 14:45:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61310 invoked by uid 99); 16 Oct 2008 14:45:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 07:45:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 14:44:47 +0000
Received: from [192.168.236.156] (helo=isper.nabble.com)
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KqU6O-0008IQ-Ce
	for java-user@lucene.apache.org; Thu, 16 Oct 2008 07:45:24 -0700
Message-ID: <20014829.post@talk.nabble.com>
Date: Thu, 16 Oct 2008 07:44:34 -0700 (PDT)
From: Anselmo <anselm.bauer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Equal distribution over a field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: anselm.bauer@googlemail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am using Lucene to search for products in an online-shop with several
shops, brands etc.

Is it possible to sort documents with the same score, in a way that a field
(e.g. the brand field) is equally distributed. Otherwise, the products are
sorted by the appearance of the brands in the database and brands at the end
of the database are at the end of the pagination.

I want to avoid a random order of products...
-- 
View this message in context: http://www.nabble.com/Equal-distribution-over-a-field-tp20014829p20014829.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 15:48:52 2008
Return-Path: <java-user-return-36670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9012 invoked from network); 16 Oct 2008 15:48:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 15:48:52 -0000
Received: (qmail 23277 invoked by uid 500); 16 Oct 2008 15:48:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23249 invoked by uid 500); 16 Oct 2008 15:48:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23238 invoked by uid 99); 16 Oct 2008 15:48:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 08:48:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.63] (HELO elasmtp-junco.atl.sa.earthlink.net) (209.86.89.63)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 15:47:37 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=jCiBXNurLv7Y9IEkxSKScZm/Kg1WYjl6xCnyDggCVMXR4LyenaRhV1VeQP8oVjRj;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.42] (helo=elwamui-muscovy.atl.sa.earthlink.net)
	by elasmtp-junco.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1KqV5B-0006eM-Bg; Thu, 16 Oct 2008 11:48:13 -0400
Received: from 151.205.100.227 by webmail.earthlink.net with HTTP; Thu, 16 Oct 2008 11:48:13 -0400
Message-ID: <9670544.1224172093169.JavaMail.root@elwamui-muscovy.atl.sa.earthlink.net>
Date: Thu, 16 Oct 2008 11:48:13 -0400 (EDT)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: Chris Hostetter <hossman_lucene@fucit.org>, 
	Lucene Users <java-user@lucene.apache.org>
Subject: Re: bunch of newbie queries, PS
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c2609c9e4956d7742f70cc0bf455327e06deca8438e0f32a48e08350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.42
X-Virus-Checked: Checked by ClamAV on apache.org

Hoss -- 

Thanks for prior replies; now back to this one. 

Context: I am trying to work with 2.2.0 (as mentioned), but when I got the downloads (src and class-jar), they did not inclde something called "highlighter" that it now turns out I need. So ... 

>: the "anonymous" SVN (http://svn.apache.org/repos/asf/lucene/java/trunk/)
>: does not work for me (I am using Eclipse 3.3, and have the subversion plug-in, v.
>: 1.2.4, and have successfully checked out code using SVN from other repositories).
>: Apparently here I need a user-id and pwd -- what is that or where do I get one? 
>
>i'm not sure why you would be having problems with that ... i can't speak 
>for Eclipse, but I just double checked and it's definitely allowing 
>anonymous checkout from the command line.  can you try that and see if it 
>works for you? (perhaps it's an issue with the server running subversion 
>1.5 and your plugin only working with 1.4 ?)
>
OK, I tried again, and this time no-code asked for a user-id/pwd, and I could see the whole repository-tree (http://svn.apache.org/repos/asf/lucene/java/trunk/...); but ... when I tried to check out the "highlighter" project, Eclipse sent me into a "quasi-infinite" loop (described below to help others avoid this mess, not b/c I think there's anything wrong with the Lucene repository).

This way seems to work: 
   1) drill down and select "highlighter" 
   (the page http://lucene.apache.org/java/2_4_0/lucene-sandbox/index.html 
   has a link that takes me directly to that level of the tree, i.e., to 
   http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/); 

   2) ask Eclipse to check out the "highlighter" 

   3) Eclipse presents me with a dialog (I'd attach a PNG of a screen shot 
   of it, but some newsgroups reject attachments -- are they allowed here?), 
   that asks whether I want to check it out as a project ("Using the New 
   Project Wizard") or into a project in the workspace (which sounds like 
   it means an *existing* project); 

   4) after I aborted the quasi-inf-loop (below), I just selected the 
   "check out as project in the workspace" and accepted the default name 
   ("highlighter"). 

   5) ta-da: actual code!

(As for command-line checkout: I am pretty well an idiot about command-lines; no clue at all what the syntax would be ...) 

thanks,
Paul 

<quasi-inf-loop>
1) drill down and select "highlighter" (the page http://lucene.apache.org/java/2_4_0/lucene-sandbox/index.html has a link that takes me directly to that level of the tree, i.e., to http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/); 

2) ask Eclipse to check out the "highlighter" ...

3) Eclipse presents me with a dialog (I'd attach a PNG of a screen shot of it, but some newsgroups reject attachments -- are they allowed here?), that asks whether I want to check it out as a project ("Using the New Project Wizard") or into a project in the workspace (which sounds like it means an *existing* project); 

4) I pick "new project" (since I have no existing project that would make sense as a home for it -- I want to compile "highlighter" against the existing lucene jar that I have); 

5) Eclipse presents me with another dialog (ditto on screen shot) that asks me to select a wizard (a bit odd, this, since I thought I already did), and I select the obvious choice "Checkout projects from SVN"; 

6) then in the next page of that dialog I am asked to select a repository (ok, getting weirder -- surely I have selected a repository!?) -- I do so; 

7) then in the next page of that dialog I am asked to select a project (ummm...) so I drill down to /lucene/java/trunk/contrib/highlighter; 

8) I click "Next" and find myself back at step 3 ... (this repeats as often as one wants to bother). 
</quasi-inf-loop>










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 16:00:51 2008
Return-Path: <java-user-return-36671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17133 invoked from network); 16 Oct 2008 16:00:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 16:00:51 -0000
Received: (qmail 65890 invoked by uid 500); 16 Oct 2008 16:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65853 invoked by uid 500); 16 Oct 2008 16:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65842 invoked by uid 99); 16 Oct 2008 16:00:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 09:00:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.63] (HELO elasmtp-junco.atl.sa.earthlink.net) (209.86.89.63)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 15:59:35 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=ajUtnoaRZBrEeXjlfNLLzPtnzjMaC4mWYHHI28xPOoDArZ0ZqblUcTTkcLepMpaG;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.42] (helo=elwamui-muscovy.atl.sa.earthlink.net)
	by elasmtp-junco.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1KqVGl-0007Hf-DK; Thu, 16 Oct 2008 12:00:11 -0400
Received: from 151.205.100.227 by webmail.earthlink.net with HTTP; Thu, 16 Oct 2008 12:00:10 -0400
Message-ID: <13493396.1224172811125.JavaMail.root@elwamui-muscovy.atl.sa.earthlink.net>
Date: Thu, 16 Oct 2008 12:00:10 -0400 (EDT)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org, Lucene Users <java-user@lucene.apache.org>
Subject: how to get the "highlight" code for v 2.2.0 (or any prior version)?
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c2609c9e4956d7742f70c4f1e9a63be03bb163ca473d225a0f487350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.42
X-Virus-Checked: Checked by ClamAV on apache.org

Still a newbie here, sorry: 

a) I can see how to get a zip/jar of the Lucene 
   v.2.2.0 (http://www.urlstructure.com/apache/lucene/java/archive/) 
   or v.2.3.0 (http://www.urlstructure.com/apache/lucene/java/)

b) but none of those contain the package "org.apache.lucene.search.highlight" 

c) I can get the HEAD stream code for the package 
   "org.apache.lucene.search.highlight" by checking out the "highlight" 
   project through SVN, but that gets me 2.4-level code 
   (using http://svn.apache.org/repos/asf). 

How can I get the 2.2.0-level "highlight" code? 

thanks,
Paul 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 16:13:50 2008
Return-Path: <java-user-return-36672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23436 invoked from network); 16 Oct 2008 16:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 16:13:50 -0000
Received: (qmail 6728 invoked by uid 500); 16 Oct 2008 16:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6702 invoked by uid 500); 16 Oct 2008 16:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6691 invoked by uid 99); 16 Oct 2008 16:13:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 09:13:44 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 16:12:33 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id m9GGD0SC007396
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 12:13:00 -0400
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Thu, 16 Oct 2008 12:13:00 -0400
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Thu, 16 Oct 2008 12:12:59 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: how to get the "highlight" code for v 2.2.0 (or any prior version)?
Date: Thu, 16 Oct 2008 12:12:59 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3EB8@SUEXCL-02.ad.syr.edu>
In-Reply-To: <13493396.1224172811125.JavaMail.root@elwamui-muscovy.atl.sa.earthlink.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to get the "highlight" code for v 2.2.0 (or any prior version)?
Thread-Index: AckvqGGHzp6Zswg0Sgaly9qlhfAYjgAASvSw
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 16 Oct 2008 16:12:59.0589 (UTC) FILETIME=[0ECAD750:01C92FAA]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7160:2.4.4,1.2.40,4.0.166 definitions=2008-10-16_06:2008-10-10,2008-10-16,2008-10-16 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgUGF1bCwNCg0KT24gMTAvMTYvMjAwOCBhdCAxMjowMCBQTSwgcm9sYXJlbmZhbkBlYXJ0aGxp
bmsubmV0IHdyb3RlOg0KPiBTdGlsbCBhIG5ld2JpZSBoZXJlLCBzb3JyeToNCj4gDQo+IGEpIEkg
Y2FuIHNlZSBob3cgdG8gZ2V0IGEgemlwL2phciBvZiB0aGUgTHVjZW5lDQo+ICAgIHYuMi4yLjAg
KGh0dHA6Ly93d3cudXJsc3RydWN0dXJlLmNvbS9hcGFjaGUvbHVjZW5lL2phdmEvYXJjaGl2ZS8p
DQo+ICAgIG9yIHYuMi4zLjAgKGh0dHA6Ly93d3cudXJsc3RydWN0dXJlLmNvbS9hcGFjaGUvbHVj
ZW5lL2phdmEvKQ0KPiANCj4gYikgYnV0IG5vbmUgb2YgdGhvc2UgY29udGFpbiB0aGUgcGFja2Fn
ZQ0KPiAib3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLmhpZ2hsaWdodCINCj4gDQo+IGMpIEkgY2Fu
IGdldCB0aGUgSEVBRCBzdHJlYW0gY29kZSBmb3IgdGhlIHBhY2thZ2UNCj4gICAgIm9yZy5hcGFj
aGUubHVjZW5lLnNlYXJjaC5oaWdobGlnaHQiIGJ5IGNoZWNraW5nIG91dCB0aGUgImhpZ2hsaWdo
dCINCj4gICAgcHJvamVjdCB0aHJvdWdoIFNWTiwgYnV0IHRoYXQgZ2V0cyBtZSAyLjQtbGV2ZWwg
Y29kZSAodXNpbmcNCj4gICAgaHR0cDovL3N2bi5hcGFjaGUub3JnL3JlcG9zL2FzZikuDQo+IA0K
PiBIb3cgY2FuIEkgZ2V0IHRoZSAyLjIuMC1sZXZlbCAiaGlnaGxpZ2h0IiBjb2RlPw0KDQpkKSBH
ZXQgdGhlIHRhZ2dlZCB2ZXJzaW9uIGJ5IGNoZWNraW5nIG91dCB0aGUgImhpZ2hsaWdodCIgcGFj
a2FnZSB0aHJvdWdoIFNWTjoNCg0KPGh0dHA6Ly9zdm4uYXBhY2hlLm9yZy9yZXBvcy9hc2YvbHVj
ZW5lL2phdmEvdGFncy9sdWNlbmVfMl8yXzAvY29udHJpYi9oaWdobGlnaHRlci8+DQoNCg0KU3Rl
dmUNCg==


From java-user-return-36673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 17:45:27 2008
Return-Path: <java-user-return-36673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79801 invoked from network); 16 Oct 2008 17:45:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 17:45:27 -0000
Received: (qmail 62999 invoked by uid 500); 16 Oct 2008 17:45:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62971 invoked by uid 500); 16 Oct 2008 17:45:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62960 invoked by uid 99); 16 Oct 2008 17:45:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 10:45:21 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.16] (HELO relay02.pair.com) (209.68.5.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Oct 2008 17:44:13 +0000
Received: (qmail 22799 invoked from network); 16 Oct 2008 17:43:48 -0000
Received: from 64.83.44.54 (HELO ?10.0.1.25?) (64.83.44.54)
  by relay02.pair.com with SMTP; 16 Oct 2008 17:43:48 -0000
X-pair-Authenticated: 64.83.44.54
Subject: Link map over results? or term freq
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Thu, 16 Oct 2008 13:43:48 -0400
Message-Id: <1224179028.7519.12.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  Has anyone created a link map over lucene results or know of a link
describing the process? If not, I would like to build one to contribute.

Also, I read about term frequencies in the book, but wanted to know if I
can extract the strongest occurring terms from a given result set or
result?

thank you for any help. I will keep reading/looking.

Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 18:01:08 2008
Return-Path: <java-user-return-36674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91484 invoked from network); 16 Oct 2008 18:01:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 18:01:08 -0000
Received: (qmail 85095 invoked by uid 500); 16 Oct 2008 18:01:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85051 invoked by uid 500); 16 Oct 2008 18:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85034 invoked by uid 99); 16 Oct 2008 18:01:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 11:01:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.68] (HELO elasmtp-masked.atl.sa.earthlink.net) (209.86.89.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 17:59:54 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=lVOUPNTzQ8rbLDKxiYeM6xldS5QR7YggdGIKl9ywAT60oIomwWDHKEOk92BP1zUb;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.42] (helo=elwamui-muscovy.atl.sa.earthlink.net)
	by elasmtp-masked.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1KqX9D-00042O-37; Thu, 16 Oct 2008 14:00:31 -0400
Received: from 151.205.100.227 by webmail.earthlink.net with HTTP; Thu, 16 Oct 2008 14:00:30 -0400
Message-ID: <20414951.1224180031110.JavaMail.root@elwamui-muscovy.atl.sa.earthlink.net>
Date: Thu, 16 Oct 2008 14:00:30 -0400 (EDT)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org, java-user@lucene.apache.org
Subject: RE: how to get the
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c2609bdc8f2440c9e5ab0a2007f54d0750b7b3ca473d225a0f487350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.42
X-Virus-Checked: Checked by ClamAV on apache.org

Steve- 

>On 10/16/2008 at 12:00 PM, rolarenfan@earthlink.net wrote:
>> Still a newbie here, sorry:
>> 
>d) Get the tagged version by checking out the "highlight" package through SVN:
>
><http://svn.apache.org/repos/asf/lucene/java/tags/lucene_2_2_0/contrib/highlighter/>
>
Perfect -- thanks! (Just didn't know to look there; now I do.) 

-Paul 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 18:10:13 2008
Return-Path: <java-user-return-36675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99628 invoked from network); 16 Oct 2008 18:10:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 18:10:13 -0000
Received: (qmail 98377 invoked by uid 500); 16 Oct 2008 18:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98344 invoked by uid 500); 16 Oct 2008 18:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98333 invoked by uid 99); 16 Oct 2008 18:10:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 11:10:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 18:09:01 +0000
Received: by rv-out-0506.google.com with SMTP id f6so98470rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 11:09:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=8fNBvslJXBRP5nqevVrGF5O/9I3pxZ55h5nAxmZQLm0=;
        b=c2OFPNiyYfITCqFP+Rr9g2efhZcgjxmIJLcx6txpIQj0GRXfdPzBL4cYkcCNlkV2Wt
         9RgV7ggmg5sh8g2+XDaco2uWgiCDpjgoDZaTPnEWHHKJGRw8gO8w+4LJ3HVAHVLDNqGU
         2lVwPrmVb3k6mO8J4Yzllo96eYn7qmUCGD/5M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Nm4qc9+NOFRXkLFTyY3zc5T187htrP06445Lksalv3PGuoxRdfigBBGI5ltRgjIq3s
         NKdg0usBz6AKGQw6ZXnVenP+0y11uAa+XnVH5BoVrqRnY9a2WGFnGPZSaql1OTU3O1bk
         YdK+6ca9lVQ4kfokiOt/a2vlhps6LP5ybstkU=
Received: by 10.141.185.3 with SMTP id m3mr1855787rvp.40.1224180568677;
        Thu, 16 Oct 2008 11:09:28 -0700 (PDT)
Received: by 10.141.68.16 with HTTP; Thu, 16 Oct 2008 11:09:28 -0700 (PDT)
Message-ID: <5e76f3840810161109j18f2ae03pb18d7a58e7944c85@mail.gmail.com>
Date: Thu, 16 Oct 2008 14:09:28 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Link map over results? or term freq
In-Reply-To: <1224179028.7519.12.camel@nuraku>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1224179028.7519.12.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, could you explain what you mean by a "link map over lucene results"?

thanks,
-glen

2008/10/16 Darren Govoni <darren@ontrenet.com>:
> Hi,
>  Has anyone created a link map over lucene results or know of a link
> describing the process? If not, I would like to build one to contribute.
>
> Also, I read about term frequencies in the book, but wanted to know if I
> can extract the strongest occurring terms from a given result set or
> result?
>
> thank you for any help. I will keep reading/looking.
>
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 18:45:40 2008
Return-Path: <java-user-return-36676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35026 invoked from network); 16 Oct 2008 18:45:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 18:45:39 -0000
Received: (qmail 51049 invoked by uid 500); 16 Oct 2008 18:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50730 invoked by uid 500); 16 Oct 2008 18:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50719 invoked by uid 99); 16 Oct 2008 18:45:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 11:45:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 18:44:25 +0000
Received: by rv-out-0506.google.com with SMTP id g9so1996958rvb.3
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 11:44:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=mu315HO1MZ5058f0eQ2wI7I4DaqRi+qo6tAW2uVcGZY=;
        b=ZvONSIWO/feidIuZ7BKO0K7EmG4COar7QasalS8EO6XptyBG5f5Y87IeeZSYYb52Qc
         0PcdEZzMiiYCE6aUgTvmSC5GAH3cpqqKX2jnN3sNE6Qgwpy23g5w3pnMRSKMAkf9dpRw
         oX9tMsfKSdUn2+c3KgJOD4euRnVOOl9cWqxW4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=QGfjMNQ8i0ePQknqodFJ/RCP581HKKQV4pp+SfSEXGceWA8pDSmOJWaqFDpXb7vgNL
         xUaa428dj1JzZcv+12fmxPN8ZJZYEvQ27NUzMWcnQWC/E6kurJaONMBdQMxwtJ4oi6rr
         79z2LlUfsqudCIsuuAC2/S9s+Dy+dscXrKa7A=
Received: by 10.141.4.3 with SMTP id g3mr1880031rvi.116.1224182693654;
        Thu, 16 Oct 2008 11:44:53 -0700 (PDT)
Received: by 10.141.22.21 with HTTP; Thu, 16 Oct 2008 11:44:53 -0700 (PDT)
Message-ID: <295da8fe0810161144p35b17d16k5ed411a5a945fa71@mail.gmail.com>
Date: Fri, 17 Oct 2008 00:14:53 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: using list of items to be excluded while querying
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20519_18943210.1224182693631"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20519_18943210.1224182693631
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,     I have a large index of documents of fields "id" "name" and few
other.
while querying i do want to exclude a list of ids i passed in.

for this what i use is
Query query = new BooleanQuery();

 for (int i=0; i<list.size(); i++){

                term = new Term("id", list.get(i).toString());

                termQuery = new TermQuery(term);

                query.add(termQuery, Occur.MUST_NOT);

            }


the problem with this is that when my list size grows larger (more than
1024) it gives tooManyBooleanCauses exception.


i tried by changing the query to

query.add(new QueryParser("id", new StandardAnalyzer()).parse(list.toString()),
Occur.MUST_NOT);


this also gives the same problem when list size is big.


I do not want to increase the max clause limit ('coz of performance issues)


Is there any simple solution to such problem?


Any suggestion will be greatly appreciated.


Prabin

------=_Part_20519_18943210.1224182693631--

From java-user-return-36677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 18:51:48 2008
Return-Path: <java-user-return-36677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39598 invoked from network); 16 Oct 2008 18:51:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 18:51:48 -0000
Received: (qmail 67203 invoked by uid 500); 16 Oct 2008 18:51:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67170 invoked by uid 500); 16 Oct 2008 18:51:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67159 invoked by uid 99); 16 Oct 2008 18:51:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 11:51:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 18:50:35 +0000
Received: by rv-out-0506.google.com with SMTP id f6so113838rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 11:51:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=h8GclUD5d1VYFtizrp+cI3uIQEdltbAwpIdsqtzovDI=;
        b=LHBUpj5RCImOPoOMnaDXlOLMaq99Y4dAl3MXHkbke+7R2ftwT/pGnc56ZlrVW6BmFk
         e3n0G8wLdzaQR6t6qBtwW7KOh+m1RBsfMt6zOa8+rwnayBnTU1TJdbVxqVFkcGkODhZT
         XtsV6uZPrRLHAMYD7KIghJGWbCaaP6Go1FPUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=QxV3l7lqj/5p5h4PDbHJIU07Jbg4IxKkLveWY4deq2KQ+xvtonR/IZm2Qfhs2fPApZ
         aemkkSjnElRXTjgqKHsOcsW7ysNHaQ94P+feGhcGO/DYM+xlqGIGITcmvhrtymevrX7u
         gYmpOSAlXGFSlgicD3mb72/+g1oiKbL2ZqzCk=
Received: by 10.140.171.18 with SMTP id t18mr1903872rve.22.1224183073147;
        Thu, 16 Oct 2008 11:51:13 -0700 (PDT)
Received: by 10.141.22.21 with HTTP; Thu, 16 Oct 2008 11:51:13 -0700 (PDT)
Message-ID: <295da8fe0810161151g39bab19dsb596fb549e28175a@mail.gmail.com>
Date: Fri, 17 Oct 2008 00:21:13 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: excluding a list of items while querying
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20686_20379468.1224183073170"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20686_20379468.1224183073170
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,     I have a large index of documents of fields "id" "name" and few
other.
while querying i do want to exclude a list of ids i passed in.

for this what i use is
Query query = new BooleanQuery();

 for (int i=0; i<list.size(); i++){

                term = new Term("id", list.get(i).toString());

                termQuery = new TermQuery(term);

                query.add(termQuery, Occur.MUST_NOT);

            }


the problem with this is that when my list size grows larger (more than
1024) it gives tooManyBooleanCauses exception.


i tried by changing the query to

query.add(new QueryParser("id", new StandardAnalyzer()).parse(list.toString()),
Occur.MUST_NOT);


this also gives the same problem when list size is big.


I do not want to increase the max clause limit ('coz of performance issues)


Is there any simple solution to such problem?


In similar situation I want to get only the list of ids i passed in. i want
to use lucene only for scoring


Any suggestion will be greatly appreciated.


Prabin

------=_Part_20686_20379468.1224183073170--

From java-user-return-36678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 19:04:55 2008
Return-Path: <java-user-return-36678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44225 invoked from network); 16 Oct 2008 19:04:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 19:04:55 -0000
Received: (qmail 91162 invoked by uid 500); 16 Oct 2008 19:04:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91134 invoked by uid 500); 16 Oct 2008 19:04:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91123 invoked by uid 99); 16 Oct 2008 19:04:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 12:04:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 19:03:39 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6C3CC71C496; Thu, 16 Oct 2008 12:04:16 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6905671C44A;
	Thu, 16 Oct 2008 12:04:16 -0700 (PDT)
Date: Thu, 16 Oct 2008 12:04:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>, rolarenfan@earthlink.net
Subject: Re: how to get the "highlight" code for v 2.2.0 (or any prior
 version)?
In-Reply-To: <13493396.1224172811125.JavaMail.root@elwamui-muscovy.atl.sa.earthlink.net>
Message-ID: <Pine.LNX.4.62.0810161203100.28012@radix.cryptio.net>
References: <13493396.1224172811125.JavaMail.root@elwamui-muscovy.atl.sa.earthlink.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: a) I can see how to get a zip/jar of the Lucene 
:    v.2.2.0 (http://www.urlstructure.com/apache/lucene/java/archive/) 
:    or v.2.3.0 (http://www.urlstructure.com/apache/lucene/java/)
: 
: b) but none of those contain the package "org.apache.lucene.search.highlight" 

it's located in the highlighter contrib jar...

chrish@asimov:~/tmp/lucene-old$ tar -xzf lucene-2.2.0.tar.gz
chrish@asimov:~/tmp/lucene-old$ find lucene-2.2.0 | grep highlight | grep jar
lucene-2.2.0/contrib/highlighter/lucene-highlighter-2.2.0.jar


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 19:24:00 2008
Return-Path: <java-user-return-36679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55145 invoked from network); 16 Oct 2008 19:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 19:24:00 -0000
Received: (qmail 10853 invoked by uid 500); 16 Oct 2008 19:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10819 invoked by uid 500); 16 Oct 2008 19:23:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10808 invoked by uid 99); 16 Oct 2008 19:23:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 12:23:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 19:22:47 +0000
Received: by rv-out-0506.google.com with SMTP id f6so125317rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 12:23:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=g184SwCOGxjWOdQtcfWDbxzcTfxvdSZA/1vyAISk4WU=;
        b=Zy6kB6CawdVvA/DDC+Ge4c6aC8xMhI5FfhRCLMb1l7LnoFeTmJlu4vDTgjv+l0yJcI
         wzgTce5qWhfu7q0T0hbmgGFsAmmTZyHI58U2uUiEeluFxLjSXLXMsS/ah5irIUBbMdVQ
         gPni9PwLuvmMuA/qsMQDPf4AG9O1jlrdEC7Q4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Z16ITdXSkeSnS44Alh7S0LZWKtiea+vzHUzXgpoA6+Q14gSigO5ABMIo99Oy4UV/MA
         jvg+btpf42dL+jauVEbMyNeXxaYM9Vjm8uOx4ONtnATfIc2uA4njr3yytuIkVPrL2u2v
         xaNL25Dgq8rKsrC7nwN8gy5JGEyxPPFzD/7BU=
Received: by 10.141.163.12 with SMTP id q12mr1904652rvo.190.1224185005061;
        Thu, 16 Oct 2008 12:23:25 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Thu, 16 Oct 2008 12:23:25 -0700 (PDT)
Message-ID: <359a92830810161223je7dd347q70d1d9b11d761cc7@mail.gmail.com>
Date: Thu, 16 Oct 2008 15:23:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: using list of items to be excluded while querying
In-Reply-To: <295da8fe0810161144p35b17d16k5ed411a5a945fa71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28617_10072158.1224185005067"
References: <295da8fe0810161144p35b17d16k5ed411a5a945fa71@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28617_10072158.1224185005067
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This sounds like a filter would work here. The basic idea of a filter
is that it's a bitmap where each bit's ordinal position
represents the a doc ID. Only documents corresponding to
"on" bits are returned.

Filters can be combined, flipped, etc. All the things you'd expect
to do with a bunch of bits. See the Filter class.

See TermEnum/TermDocs for ways to get the Lucene ID
corresponding to a particular term (i.e. one of the BooleanClauses
you were creating), which corresponds to a bit to turn on or
off in your Filter.

Also see CachingWrapperFilter and ChainedFilter as well.

Best
Erick

On Thu, Oct 16, 2008 at 2:44 PM, prabin meitei <prabin.meitei@gmail.com>wrote:

> Hi,     I have a large index of documents of fields "id" "name" and few
> other.
> while querying i do want to exclude a list of ids i passed in.
>
> for this what i use is
> Query query = new BooleanQuery();
>
>  for (int i=0; i<list.size(); i++){
>
>                term = new Term("id", list.get(i).toString());
>
>                termQuery = new TermQuery(term);
>
>                query.add(termQuery, Occur.MUST_NOT);
>
>            }
>
>
> the problem with this is that when my list size grows larger (more than
> 1024) it gives tooManyBooleanCauses exception.
>
>
> i tried by changing the query to
>
> query.add(new QueryParser("id", new
> StandardAnalyzer()).parse(list.toString()),
> Occur.MUST_NOT);
>
>
> this also gives the same problem when list size is big.
>
>
> I do not want to increase the max clause limit ('coz of performance issues)
>
>
> Is there any simple solution to such problem?
>
>
> Any suggestion will be greatly appreciated.
>
>
> Prabin
>

------=_Part_28617_10072158.1224185005067--

From java-user-return-36680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 20:22:24 2008
Return-Path: <java-user-return-36680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90437 invoked from network); 16 Oct 2008 20:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 20:22:23 -0000
Received: (qmail 4676 invoked by uid 500); 16 Oct 2008 20:22:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4648 invoked by uid 500); 16 Oct 2008 20:22:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4632 invoked by uid 99); 16 Oct 2008 20:22:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 13:22:13 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.16] (HELO relay02.pair.com) (209.68.5.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Oct 2008 20:21:05 +0000
Received: (qmail 6191 invoked from network); 16 Oct 2008 20:21:39 -0000
Received: from 64.83.44.54 (HELO ?10.0.1.25?) (64.83.44.54)
  by relay02.pair.com with SMTP; 16 Oct 2008 20:21:39 -0000
X-pair-Authenticated: 64.83.44.54
Subject: Re: Link map over results? or term freq
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76f3840810161109j18f2ae03pb18d7a58e7944c85@mail.gmail.com>
References: <1224179028.7519.12.camel@nuraku>
	 <5e76f3840810161109j18f2ae03pb18d7a58e7944c85@mail.gmail.com>
Content-Type: text/plain
Date: Thu, 16 Oct 2008 16:21:40 -0400
Message-Id: <1224188500.7519.42.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I guess a link map (as I understand it) is a collection of hyperlinks of
words/phrases where the dominant ones are bolder color and larger font.
Its relatively new schema, some sites are using. 

For example, someone searches for a person and a link map would show
them all the most frequent terms in the results they got back. Sort of
like latent relationships.

Does that help?

I thought this could be done using term frequency vectors in Lucene, but
I've never used TFV's before. And can then be limited to just a set of
results.

HTH,
Darren

On Thu, 2008-10-16 at 14:09 -0400, Glen Newton wrote:
> Sorry, could you explain what you mean by a "link map over lucene results"?
> 
> thanks,
> -glen
> 
> 2008/10/16 Darren Govoni <darren@ontrenet.com>:
> > Hi,
> >  Has anyone created a link map over lucene results or know of a link
> > describing the process? If not, I would like to build one to contribute.
> >
> > Also, I read about term frequencies in the book, but wanted to know if I
> > can extract the strongest occurring terms from a given result set or
> > result?
> >
> > thank you for any help. I will keep reading/looking.
> >
> > Darren
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 21:18:13 2008
Return-Path: <java-user-return-36681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25748 invoked from network); 16 Oct 2008 21:18:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 21:18:13 -0000
Received: (qmail 851 invoked by uid 500); 16 Oct 2008 21:18:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 811 invoked by uid 500); 16 Oct 2008 21:18:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 800 invoked by uid 99); 16 Oct 2008 21:18:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 14:18:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.200.237] (HELO smtp102.biz.mail.mud.yahoo.com) (68.142.200.237)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Oct 2008 21:16:56 +0000
Received: (qmail 85302 invoked from network); 16 Oct 2008 21:17:31 -0000
Received: from unknown (HELO ?192.168.1.103?) (nhira@75.168.0.33 with plain)
  by smtp102.biz.mail.mud.yahoo.com with SMTP; 16 Oct 2008 21:17:31 -0000
X-YMail-OSG: E7l85FUVM1nELoZXoNzWiicDOQuLWRfK6zAMyu2ihCEhkA6dIptku0fwJAXv_mFpEeVuyZiobgqqumYNFo_qP4C9mHfLeMjhDCdLq9R1UDH9m5dkI_rOQPO04vu_.U0dOPiz30bxNbpudMfe2tgzTlVn80zVwoZbgQ9tPh.jFXh3ENwaa8CpPy5OR3Vc
X-Yahoo-Newman-Property: ymail-3
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <1224188500.7519.42.camel@nuraku>
References: <1224179028.7519.12.camel@nuraku> <5e76f3840810161109j18f2ae03pb18d7a58e7944c85@mail.gmail.com> <1224188500.7519.42.camel@nuraku>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <01E56262-4A8F-467A-A4D8-32DC81A6E6FE@cognocys.com>
Content-Transfer-Encoding: 7bit
From: "N. Hira" <nhira@cognocys.com>
Subject: Re: Link map over results? or term freq
Date: Thu, 16 Oct 2008 16:17:28 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

I think I understand what you're describing as a "link map" to be a  
"tag cloud" where each tag is a "frequent" or "strong" term.

We did something like this as an experiment (without Lucene):
http://www.cognocys.com/prospector/news.html

If you're talking about something similar, then I think you can use  
Lucene's TFVs only to get at the frequency data in the context of the  
Documents (not the results).  I'm no expert, but I say this because  
I've only ever seen TermFrequencyVectors being discussed in the  
context of an IndexReader, not in the context of Hits or TopDocs.
http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/ 
class-use/TermFreqVector.html

The other thing, though, is that TF may not be sufficient to  
determine what to use for each tag/link.  For example, given a set of  
Results, R, would you like to use:
1.  the top N most frequent terms for each Document in R?
2.  the top M most frequent terms that are common to all/many  
Documents in R?
3.  the top O most frequent terms that are common in results built  
using the highlighter?
...

To a certain extent, this is a clustering problem:-- given some set  
of Documents, R, which just happen to be the results of some search,  
represent R using a tag cloud/link map of terms that best represent R.

Have you looked at carrot2?  I haven't seen the tag cloud  
visualization there, but you may find some ideas for clustering/ 
document-set representation there:
http://project.carrot2.org/


Good luck!

-h

On 16-Oct-2008, at 3:21 PM, Darren Govoni wrote:

> I guess a link map (as I understand it) is a collection of  
> hyperlinks of
> words/phrases where the dominant ones are bolder color and larger  
> font.
> Its relatively new schema, some sites are using.
>
> For example, someone searches for a person and a link map would show
> them all the most frequent terms in the results they got back. Sort of
> like latent relationships.
>
> Does that help?
>
> I thought this could be done using term frequency vectors in  
> Lucene, but
> I've never used TFV's before. And can then be limited to just a set of
> results.
>
> HTH,
> Darren
>
> On Thu, 2008-10-16 at 14:09 -0400, Glen Newton wrote:
>> Sorry, could you explain what you mean by a "link map over lucene  
>> results"?
>>
>> thanks,
>> -glen
>>
>> 2008/10/16 Darren Govoni <darren@ontrenet.com>:
>>> Hi,
>>>  Has anyone created a link map over lucene results or know of a link
>>> describing the process? If not, I would like to build one to  
>>> contribute.
>>>
>>> Also, I read about term frequencies in the book, but wanted to  
>>> know if I
>>> can extract the strongest occurring terms from a given result set or
>>> result?
>>>
>>> thank you for any help. I will keep reading/looking.
>>>
>>> Darren
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 21:38:37 2008
Return-Path: <java-user-return-36682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39827 invoked from network); 16 Oct 2008 21:38:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 21:38:37 -0000
Received: (qmail 25508 invoked by uid 500); 16 Oct 2008 21:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25469 invoked by uid 500); 16 Oct 2008 21:38:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25458 invoked by uid 99); 16 Oct 2008 21:38:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 14:38:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 21:37:21 +0000
Received: by rv-out-0506.google.com with SMTP id f6so173669rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 14:37:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=13thvU4NEe7iwR4F6s7acNeSzt0GtCIwCPcg1e1Jl4U=;
        b=P271XHpamzUwElN77/rUvFcRWG7DScnLunImuW09LJ+IyVxJR8H3fHiv7jAwpPEXlq
         qHIA7LyEAbWbERgACsCS2RPmMX0+oJ4/uESOzkw5Anw9N43xuhHTgBNFksYwWvwjg3Pn
         BIvtw6OW07l8lZYoeIy4kp2G2zeguDWGpWwRM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=TDERsyS5Lae5sucG1ClYuFhDkZ6vYp5ne32iB7jZ3vm2ocMowSn91oIzQFYkS/YN0U
         nH0CDkazXRHn4Lr6MDS77Nw8Ynvge2bWNgd3aTsr5SRgONeZsUgB7UIFBqmPT2GMCxYm
         tZ8OMNKuyLWS+rGP7yjnE4xAdePmxStX18YTY=
Received: by 10.141.185.3 with SMTP id m3mr2018029rvp.40.1224193068461;
        Thu, 16 Oct 2008 14:37:48 -0700 (PDT)
Received: by 10.141.68.16 with HTTP; Thu, 16 Oct 2008 14:37:48 -0700 (PDT)
Message-ID: <5e76f3840810161437g4d529431k92e1b44dea9f8b3a@mail.gmail.com>
Date: Thu, 16 Oct 2008 17:37:48 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Link map over results? or term freq
In-Reply-To: <1224188500.7519.42.camel@nuraku>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1224179028.7519.12.camel@nuraku>
	 <5e76f3840810161109j18f2ae03pb18d7a58e7944c85@mail.gmail.com>
	 <1224188500.7519.42.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, tag clouds.

I've implemented them using Lucene here for NRC Research Press articles:
http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava/Search?tagCloud=true&collection=jos&tagField=keyword&keyword=%22chromatin%22&numCloudDocs=200&numCloudTags=50&sortBy=relevance

and here on the Colorado State University Libraries' Catalog:
http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava01/Search?tagCloud=true&collection=csu&tagField=keyword&title=cell&numCloudDocs=200&numCloudTags=50&sortBy=relevance

As I use them for query refinement (click on the term & it is appended
to your existing query & you get new results), I call them "drill
clouds": http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/Drill_Clouds#Drill_Clouds

-glen

2008/10/16 Darren Govoni <darren@ontrenet.com>:
> I guess a link map (as I understand it) is a collection of hyperlinks of
> words/phrases where the dominant ones are bolder color and larger font.
> Its relatively new schema, some sites are using.
>
> For example, someone searches for a person and a link map would show
> them all the most frequent terms in the results they got back. Sort of
> like latent relationships.
>
> Does that help?
>
> I thought this could be done using term frequency vectors in Lucene, but
> I've never used TFV's before. And can then be limited to just a set of
> results.
>
> HTH,
> Darren
>
> On Thu, 2008-10-16 at 14:09 -0400, Glen Newton wrote:
>> Sorry, could you explain what you mean by a "link map over lucene results"?
>>
>> thanks,
>> -glen
>>
>> 2008/10/16 Darren Govoni <darren@ontrenet.com>:
>> > Hi,
>> >  Has anyone created a link map over lucene results or know of a link
>> > describing the process? If not, I would like to build one to contribute.
>> >
>> > Also, I read about term frequencies in the book, but wanted to know if I
>> > can extract the strongest occurring terms from a given result set or
>> > result?
>> >
>> > thank you for any help. I will keep reading/looking.
>> >
>> > Darren
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 16 21:40:28 2008
Return-Path: <java-user-return-36683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40934 invoked from network); 16 Oct 2008 21:40:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Oct 2008 21:40:28 -0000
Received: (qmail 28246 invoked by uid 500); 16 Oct 2008 21:40:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28203 invoked by uid 500); 16 Oct 2008 21:40:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28192 invoked by uid 99); 16 Oct 2008 21:40:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 14:40:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 21:39:13 +0000
Received: by rv-out-0506.google.com with SMTP id f6so174313rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 14:39:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=z2lY9usLr2ksUXPj+BWdsru3nXg8dnpQU2RaLHTFhvI=;
        b=DoLggFcTzBLL2q7qrtmNuMdbXzOQLVlMG5D82/U+5xKOvo3La8NXxGBEKupL1hBDhe
         arbzCll5mK7O3KvNiMKcE5VH1Fw6LFJPr3NaQl0vLX5qrqsX5cy6cqTqIz61PVrrfo+I
         +vELNuUw0goi9koRVWkEn7ovL2QgzCCY0+oDE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=jL7lofkVMLa6V+3VTkBuz+FvCDuuS8nWrZMB3GGWPXLyUfUAsYNmNnOp6bPIQTH80t
         jOHS3oXWiIJS0GLExwPhTRXNY38NfkHao8Jle5xP1S9GTo9YwAfHSfyi6Ujr4/AxGmra
         XBAx4Y6rmfOvt6Tmft5h/pm6Pkmj0yXJ8BpmQ=
Received: by 10.140.127.13 with SMTP id z13mr1994765rvc.194.1224193180925;
        Thu, 16 Oct 2008 14:39:40 -0700 (PDT)
Received: by 10.141.68.16 with HTTP; Thu, 16 Oct 2008 14:39:40 -0700 (PDT)
Message-ID: <5e76f3840810161439s66cd3134n45b4453333d0d9b0@mail.gmail.com>
Date: Thu, 16 Oct 2008 17:39:40 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Link map over results? or term freq
In-Reply-To: <5e76f3840810161437g4d529431k92e1b44dea9f8b3a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1224179028.7519.12.camel@nuraku>
	 <5e76f3840810161109j18f2ae03pb18d7a58e7944c85@mail.gmail.com>
	 <1224188500.7519.42.camel@nuraku>
	 <5e76f3840810161437g4d529431k92e1b44dea9f8b3a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

See also:
http://zzzoot.blogspot.com/2007/10/drill-clouds-for-search-refinement-id.html
 and
http://zzzoot.blogspot.com/2007/10/tag-cloud-inspired-html-select-lists.html

-glen

2008/10/16 Glen Newton <glen.newton@gmail.com>:
> Yes, tag clouds.
>
> I've implemented them using Lucene here for NRC Research Press articles:
> http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava/Search?tagCloud=true&collection=jos&tagField=keyword&keyword=%22chromatin%22&numCloudDocs=200&numCloudTags=50&sortBy=relevance
>
> and here on the Colorado State University Libraries' Catalog:
> http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava01/Search?tagCloud=true&collection=csu&tagField=keyword&title=cell&numCloudDocs=200&numCloudTags=50&sortBy=relevance
>
> As I use them for query refinement (click on the term & it is appended
> to your existing query & you get new results), I call them "drill
> clouds": http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/Drill_Clouds#Drill_Clouds
>
> -glen
>
> 2008/10/16 Darren Govoni <darren@ontrenet.com>:
>> I guess a link map (as I understand it) is a collection of hyperlinks of
>> words/phrases where the dominant ones are bolder color and larger font.
>> Its relatively new schema, some sites are using.
>>
>> For example, someone searches for a person and a link map would show
>> them all the most frequent terms in the results they got back. Sort of
>> like latent relationships.
>>
>> Does that help?
>>
>> I thought this could be done using term frequency vectors in Lucene, but
>> I've never used TFV's before. And can then be limited to just a set of
>> results.
>>
>> HTH,
>> Darren
>>
>> On Thu, 2008-10-16 at 14:09 -0400, Glen Newton wrote:
>>> Sorry, could you explain what you mean by a "link map over lucene results"?
>>>
>>> thanks,
>>> -glen
>>>
>>> 2008/10/16 Darren Govoni <darren@ontrenet.com>:
>>> > Hi,
>>> >  Has anyone created a link map over lucene results or know of a link
>>> > describing the process? If not, I would like to build one to contribute.
>>> >
>>> > Also, I read about term frequencies in the book, but wanted to know if I
>>> > can extract the strongest occurring terms from a given result set or
>>> > result?
>>> >
>>> > thank you for any help. I will keep reading/looking.
>>> >
>>> > Darren
>>> >
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
>
> -
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 17 01:32:09 2008
Return-Path: <java-user-return-36684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65565 invoked from network); 17 Oct 2008 01:32:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Oct 2008 01:32:09 -0000
Received: (qmail 80563 invoked by uid 500); 17 Oct 2008 01:32:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79636 invoked by uid 500); 17 Oct 2008 01:32:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79619 invoked by uid 99); 17 Oct 2008 01:32:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 18:32:03 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Oct 2008 01:30:53 +0000
Received: (qmail 23708 invoked from network); 17 Oct 2008 01:30:28 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.3?) (68.48.101.76)
  by relay03.pair.com with SMTP; 17 Oct 2008 01:30:28 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: Link map over results? or term freq
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76f3840810161439s66cd3134n45b4453333d0d9b0@mail.gmail.com>
References: <1224179028.7519.12.camel@nuraku>
	 <5e76f3840810161109j18f2ae03pb18d7a58e7944c85@mail.gmail.com>
	 <1224188500.7519.42.camel@nuraku>
	 <5e76f3840810161437g4d529431k92e1b44dea9f8b3a@mail.gmail.com>
	 <5e76f3840810161439s66cd3134n45b4453333d0d9b0@mail.gmail.com>
Content-Type: text/plain
Date: Thu, 16 Oct 2008 21:30:28 -0400
Message-Id: <1224207028.10505.1.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You guys are so awesome!

Thank you for the detailed and thoughtful responses. I will eagerly look
at your work!

I see the tag cloud thing similar to clustering as N.Hira mentions
except its more "fuzzy" than clustering. I also recently looked at
carrot as well and am learning what it does, but even with it, the
clusters are more discrete than a tag cloud which has "shades of gray".

Darren

On Thu, 2008-10-16 at 17:39 -0400, Glen Newton wrote:
> See also:
> http://zzzoot.blogspot.com/2007/10/drill-clouds-for-search-refinement-id.html
>  and
> http://zzzoot.blogspot.com/2007/10/tag-cloud-inspired-html-select-lists.html
> 
> -glen
> 
> 2008/10/16 Glen Newton <glen.newton@gmail.com>:
> > Yes, tag clouds.
> >
> > I've implemented them using Lucene here for NRC Research Press articles:
> > http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava/Search?tagCloud=true&collection=jos&tagField=keyword&keyword=%22chromatin%22&numCloudDocs=200&numCloudTags=50&sortBy=relevance
> >
> > and here on the Colorado State University Libraries' Catalog:
> > http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava01/Search?tagCloud=true&collection=csu&tagField=keyword&title=cell&numCloudDocs=200&numCloudTags=50&sortBy=relevance
> >
> > As I use them for query refinement (click on the term & it is appended
> > to your existing query & you get new results), I call them "drill
> > clouds": http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/Drill_Clouds#Drill_Clouds
> >
> > -glen
> >
> > 2008/10/16 Darren Govoni <darren@ontrenet.com>:
> >> I guess a link map (as I understand it) is a collection of hyperlinks of
> >> words/phrases where the dominant ones are bolder color and larger font.
> >> Its relatively new schema, some sites are using.
> >>
> >> For example, someone searches for a person and a link map would show
> >> them all the most frequent terms in the results they got back. Sort of
> >> like latent relationships.
> >>
> >> Does that help?
> >>
> >> I thought this could be done using term frequency vectors in Lucene, but
> >> I've never used TFV's before. And can then be limited to just a set of
> >> results.
> >>
> >> HTH,
> >> Darren
> >>
> >> On Thu, 2008-10-16 at 14:09 -0400, Glen Newton wrote:
> >>> Sorry, could you explain what you mean by a "link map over lucene results"?
> >>>
> >>> thanks,
> >>> -glen
> >>>
> >>> 2008/10/16 Darren Govoni <darren@ontrenet.com>:
> >>> > Hi,
> >>> >  Has anyone created a link map over lucene results or know of a link
> >>> > describing the process? If not, I would like to build one to contribute.
> >>> >
> >>> > Also, I read about term frequencies in the book, but wanted to know if I
> >>> > can extract the strongest occurring terms from a given result set or
> >>> > result?
> >>> >
> >>> > thank you for any help. I will keep reading/looking.
> >>> >
> >>> > Darren
> >>> >
> >>> >
> >>> > ---------------------------------------------------------------------
> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >>> >
> >>> >
> >>>
> >>>
> >>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> >
> > --
> >
> > -
> >
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 17 01:37:53 2008
Return-Path: <java-user-return-36685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68145 invoked from network); 17 Oct 2008 01:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Oct 2008 01:37:53 -0000
Received: (qmail 83084 invoked by uid 500); 17 Oct 2008 01:37:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83044 invoked by uid 500); 17 Oct 2008 01:37:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83033 invoked by uid 99); 17 Oct 2008 01:37:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 18:37:48 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Oct 2008 01:36:38 +0000
Received: (qmail 24599 invoked from network); 17 Oct 2008 01:36:15 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.3?) (68.48.101.76)
  by relay03.pair.com with SMTP; 17 Oct 2008 01:36:15 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: Link map over results? or term freq
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76f3840810161437g4d529431k92e1b44dea9f8b3a@mail.gmail.com>
References: <1224179028.7519.12.camel@nuraku>
	 <5e76f3840810161109j18f2ae03pb18d7a58e7944c85@mail.gmail.com>
	 <1224188500.7519.42.camel@nuraku>
	 <5e76f3840810161437g4d529431k92e1b44dea9f8b3a@mail.gmail.com>
Content-Type: text/plain
Date: Thu, 16 Oct 2008 21:36:14 -0400
Message-Id: <1224207374.10505.4.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Very nice work. That's what I'm wanting to do. Without giving away your
paper thesis algorithm, does it use TFV's? Are the tags in the cloud
calculated from the result documents by some non-Lucene scoring
mechanism?

I could probably come up with one given the results, but was curious if
Lucene made this easier with information built into the Document objects
(which would be logical to me).

Darren

On Thu, 2008-10-16 at 17:37 -0400, Glen Newton wrote:
> Yes, tag clouds.
> 
> I've implemented them using Lucene here for NRC Research Press articles:
> http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava/Search?tagCloud=true&collection=jos&tagField=keyword&keyword=%22chromatin%22&numCloudDocs=200&numCloudTags=50&sortBy=relevance
> 
> and here on the Colorado State University Libraries' Catalog:
> http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava01/Search?tagCloud=true&collection=csu&tagField=keyword&title=cell&numCloudDocs=200&numCloudTags=50&sortBy=relevance
> 
> As I use them for query refinement (click on the term & it is appended
> to your existing query & you get new results), I call them "drill
> clouds": http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/Drill_Clouds#Drill_Clouds
> 
> -glen
> 
> 2008/10/16 Darren Govoni <darren@ontrenet.com>:
> > I guess a link map (as I understand it) is a collection of hyperlinks of
> > words/phrases where the dominant ones are bolder color and larger font.
> > Its relatively new schema, some sites are using.
> >
> > For example, someone searches for a person and a link map would show
> > them all the most frequent terms in the results they got back. Sort of
> > like latent relationships.
> >
> > Does that help?
> >
> > I thought this could be done using term frequency vectors in Lucene, but
> > I've never used TFV's before. And can then be limited to just a set of
> > results.
> >
> > HTH,
> > Darren
> >
> > On Thu, 2008-10-16 at 14:09 -0400, Glen Newton wrote:
> >> Sorry, could you explain what you mean by a "link map over lucene results"?
> >>
> >> thanks,
> >> -glen
> >>
> >> 2008/10/16 Darren Govoni <darren@ontrenet.com>:
> >> > Hi,
> >> >  Has anyone created a link map over lucene results or know of a link
> >> > describing the process? If not, I would like to build one to contribute.
> >> >
> >> > Also, I read about term frequencies in the book, but wanted to know if I
> >> > can extract the strongest occurring terms from a given result set or
> >> > result?
> >> >
> >> > thank you for any help. I will keep reading/looking.
> >> >
> >> > Darren
> >> >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >>
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 17 03:02:43 2008
Return-Path: <java-user-return-36686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5155 invoked from network); 17 Oct 2008 03:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Oct 2008 03:02:43 -0000
Received: (qmail 24784 invoked by uid 500); 17 Oct 2008 03:02:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24749 invoked by uid 500); 17 Oct 2008 03:02:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24738 invoked by uid 99); 17 Oct 2008 03:02:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 20:02:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 03:01:30 +0000
Received: by rv-out-0506.google.com with SMTP id f6so292845rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 20:02:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=XNGz01pFB/cXUCM8/gllN+F/ZwSzhqWHrDKYriJJiEw=;
        b=nkbPfEsXoLwFJS9JEULNuB/WqB62m8yoEtUN500QpZMkzyih1SAC5Z1JLw1Qo+uXDD
         oteop87H/MDKXkjnR1ojpLUcen5SAYBHhMs9UV94tncPcI1Z+WwLWeJsi1jdX3STSr1b
         1uRRniazNyba+qWo8njQV4H/Bn2hMtnk/ciMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KDTrqTm2N6Q/iTsr6BYqGflqlyDnyi4FLqJKR3MQyJ/pPtiRedl0dauAPeOyZu2bRs
         DK/z0tRAZjkyUiLtcPIH4SLetPqnC2jOWtS/VfvbzV21kdyiOPaVNJFc5VdYCpA3kSNG
         4z2gm/9bynHzmiq8Mv57VgxqnLzpUv7AwLawQ=
Received: by 10.141.170.10 with SMTP id x10mr2166630rvo.105.1224212527797;
        Thu, 16 Oct 2008 20:02:07 -0700 (PDT)
Received: by 10.141.22.21 with HTTP; Thu, 16 Oct 2008 20:02:07 -0700 (PDT)
Message-ID: <295da8fe0810162002t7a020b74i4039a29c87376f5@mail.gmail.com>
Date: Fri, 17 Oct 2008 08:32:07 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: using list of items to be excluded while querying
In-Reply-To: <359a92830810161223je7dd347q70d1d9b11d761cc7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23873_9966887.1224212527782"
References: <295da8fe0810161144p35b17d16k5ed411a5a945fa71@mail.gmail.com>
	 <359a92830810161223je7dd347q70d1d9b11d761cc7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23873_9966887.1224212527782
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, Thanks for the reply. I looked through the Filter class. I think i can
use the TermFilter for my requirement. But I have few doubs regarding the
use of termFilter.

Can I add any number of terms to it?? say 5000 terms? Is there any limit?
Can i use this term filter by adding to another boolean filter??

Prabin

On Fri, Oct 17, 2008 at 12:53 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> This sounds like a filter would work here. The basic idea of a filter
> is that it's a bitmap where each bit's ordinal position
> represents the a doc ID. Only documents corresponding to
> "on" bits are returned.
>
> Filters can be combined, flipped, etc. All the things you'd expect
> to do with a bunch of bits. See the Filter class.
>
> See TermEnum/TermDocs for ways to get the Lucene ID
> corresponding to a particular term (i.e. one of the BooleanClauses
> you were creating), which corresponds to a bit to turn on or
> off in your Filter.
>
> Also see CachingWrapperFilter and ChainedFilter as well.
>
> Best
> Erick
>
> On Thu, Oct 16, 2008 at 2:44 PM, prabin meitei <prabin.meitei@gmail.com
> >wrote:
>
> > Hi,     I have a large index of documents of fields "id" "name" and few
> > other.
> > while querying i do want to exclude a list of ids i passed in.
> >
> > for this what i use is
> > Query query = new BooleanQuery();
> >
> >  for (int i=0; i<list.size(); i++){
> >
> >                term = new Term("id", list.get(i).toString());
> >
> >                termQuery = new TermQuery(term);
> >
> >                query.add(termQuery, Occur.MUST_NOT);
> >
> >            }
> >
> >
> > the problem with this is that when my list size grows larger (more than
> > 1024) it gives tooManyBooleanCauses exception.
> >
> >
> > i tried by changing the query to
> >
> > query.add(new QueryParser("id", new
> > StandardAnalyzer()).parse(list.toString()),
> > Occur.MUST_NOT);
> >
> >
> > this also gives the same problem when list size is big.
> >
> >
> > I do not want to increase the max clause limit ('coz of performance
> issues)
> >
> >
> > Is there any simple solution to such problem?
> >
> >
> > Any suggestion will be greatly appreciated.
> >
> >
> > Prabin
> >
>

------=_Part_23873_9966887.1224212527782--

From java-user-return-36687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 17 04:40:14 2008
Return-Path: <java-user-return-36687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25267 invoked from network); 17 Oct 2008 04:40:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Oct 2008 04:40:14 -0000
Received: (qmail 78338 invoked by uid 500); 17 Oct 2008 04:40:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78309 invoked by uid 500); 17 Oct 2008 04:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78298 invoked by uid 99); 17 Oct 2008 04:40:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 21:40:08 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of benjams@il.ibm.com does not designate 195.212.17.161 as permitted sender)
Received: from [195.212.17.161] (HELO mtagate1.de.ibm.com) (195.212.17.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 04:39:00 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.1/8.13.1) with ESMTP id m9H4daTJ022995
	for <java-user@lucene.apache.org>; Fri, 17 Oct 2008 04:39:36 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v9.1) with ESMTP id m9H4daiC2781240
	for <java-user@lucene.apache.org>; Fri, 17 Oct 2008 06:39:36 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m9H4daS9029818
	for <java-user@lucene.apache.org>; Fri, 17 Oct 2008 06:39:36 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m9H4daLQ029806
	for <java-user@lucene.apache.org>; Fri, 17 Oct 2008 06:39:36 +0200
Subject: AUTO: Benjamin Sznajder/Haifa/Contr/IBM is out of the office. (returning 22/10/2008)
Auto-Submitted: auto-generated
From: Benjamin Sznajder <benjams@il.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OF4CAA15A5.FCD92FA8-ONC22574E5.001998BD-C22574E5.001998BE@il.ibm.com>
Date: Fri, 17 Oct 2008 06:39:35 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0.1|February 07, 2008) at
 17/10/2008 06:39:35
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I am out of the office until 22/10/2008.




Note: This is an automated response to your message  "Re: Unique tokens
analyzer" sent on 14/10/08 21:00:12.

This is the only notification you will receive while this person is away.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 17 04:57:38 2008
Return-Path: <java-user-return-36688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28400 invoked from network); 17 Oct 2008 04:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Oct 2008 04:57:38 -0000
Received: (qmail 88101 invoked by uid 500); 17 Oct 2008 04:57:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88072 invoked by uid 500); 17 Oct 2008 04:57:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88061 invoked by uid 99); 17 Oct 2008 04:57:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 21:57:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 04:56:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so331230rvb.5
        for <java-user@lucene.apache.org>; Thu, 16 Oct 2008 21:56:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=iFnnvTHV8DK6RF9AYZsWRy+lvhyjdzjPtM4wsMLbn7k=;
        b=kUR98q3CnDvZTd8MFpv1jnr2uH5WdN0oAKbNDuLDbvPYgcSi3ImZZ1vDKLQw+fmGKl
         cLg+TSFTmkxLkWlHWXOQBnktKXLt8Q5v8WNZmLD6qniIvOeDnGdweSbzu55+BMDcXrwJ
         yYBNWeu4MxV/ujgn1fJazJhYMdL7ebtZAKxMs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wUktIpDhEbNarE11ORTIras0lXRCm8xO2i9ZCP0LUy9f7udr2wF1NQAbCyLyaEQpzF
         sD4VWnuJHalqtZ4p46kl2DivtQpRKBmAIA+CZ5fcAOVmZtniEjNQMrCbsFaEFT72hO0o
         nP9TzVcsC8dMbkxWr3Yyaa9205oEV3h8HGdQE=
Received: by 10.141.52.5 with SMTP id e5mr2242535rvk.10.1224219412843;
        Thu, 16 Oct 2008 21:56:52 -0700 (PDT)
Received: by 10.141.170.2 with HTTP; Thu, 16 Oct 2008 21:56:52 -0700 (PDT)
Message-ID: <867513fe0810162156g77824765w211f391131e5874b@mail.gmail.com>
Date: Fri, 17 Oct 2008 10:26:52 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher update
In-Reply-To: <aa609e6b0810160402v40025adeo8568fd87d55018ed@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53421_10305277.1224219412954"
References: <aa609e6b0810160313t3bf4dd52u720b9e4e64772a04@mail.gmail.com>
	 <867513fe0810160349n7bcf6362tbe441764be07f0cc@mail.gmail.com>
	 <aa609e6b0810160402v40025adeo8568fd87d55018ed@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53421_10305277.1224219412954
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes you may do that as well... no updates are noted by the searcher until it
(the searcher) is updated :)

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Oct 16, 2008 at 4:32 PM, mahdi yari <yarimahdi@gmail.com> wrote:

> thanks for your reply.
> and how about merge?
> if i searcher on index1, and in other thread, i try to merge index2 into
> index1 and i do not update searcher, can i continue searching on index1?
> thanks
> Mahdi
>
> On Thu, Oct 16, 2008 at 2:19 PM, Anshum <anshumg@gmail.com> wrote:
>
> > Yes you can! :)
> > Very normally.
> >
> > --
> > Anshum Gupta
> > Naukri Labs!
> > http://ai-cafe.blogspot.com
> >
> > The facts expressed here belong to everybody, the opinions to me. The
> > distinction is yours to draw............
> >
> >
> > On Thu, Oct 16, 2008 at 3:43 PM, mahdi yari <yarimahdi@gmail.com> wrote:
> >
> > > hi dears
> > >
> > > i have a question of Lucene
> > >
> > > i have on index with 1,000 document with id field(String:UUID) and one
> > > indexSearcher for search on it,
> > > after that, i start one IndexWriter that writes 1,000,000 new document
> in
> > > to
> > > index,
> > > now if i do not update IndexSearcher, can i search on first 1,000
> > document
> > > without problem??
> > >
> > > thanks and sorry for bad English
> > > Mahdi
> > >
> >
>

------=_Part_53421_10305277.1224219412954--

From java-user-return-36689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 17 06:32:51 2008
Return-Path: <java-user-return-36689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86142 invoked from network); 17 Oct 2008 06:32:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Oct 2008 06:32:51 -0000
Received: (qmail 57310 invoked by uid 500); 17 Oct 2008 06:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57278 invoked by uid 500); 17 Oct 2008 06:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57267 invoked by uid 99); 17 Oct 2008 06:32:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Oct 2008 23:32:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Oct 2008 06:31:37 +0000
Received: (qmail 89830 invoked by uid 60001); 17 Oct 2008 06:32:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=sZLQO5ab6O0o7Y2O9IeV0tr7d81/DxpxFx1AdQPDpG7fxrbkUPuNlDTaDB4aOqqXBxSYLHL5JZKq9nut2LOWFVVUeCq4RArbXTkgc0vNjCsZ9yvBlCcTjJu+37PlNKn2Ay4uKwnZzMK6axU4Xb+V1gMEFPt26JhBFLjtx4FbPZk=;
X-YMail-OSG: UKGXaVcVM1njx6DitdGWxxiE72dMqrVhkckTkuReMMdRWf_Y5eqbqOj9CzNHZ_zyGzkMIF6CPBEg2b9U.xq6f45BhIGiExBHmuSABW0qV6XiF.PYqSUVlpjinsgS0Z_f0l0zdN5R9O4coupqFuYG7cWqyJ2VNSFgojyGhisf2yN8uu3m0zs-
Received: from [87.248.121.27] by web26005.mail.ukl.yahoo.com via HTTP; Fri, 17 Oct 2008 06:32:12 GMT
X-Mailer: YahooMailWebService/0.7.247.3
Date: Fri, 17 Oct 2008 06:32:12 +0000 (GMT)
From: Mark Harwood <markharw00d@yahoo.co.uk>
Subject: Re: using list of items to be excluded while querying
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <683705.89521.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, use TermsFilter to add your 5000 terms by calling TermsFilter.addTerm(=
term) repeatedly then put that single filter as a single "not" clause in a =
BooleanFilter=0ACheers=0AMark=0A=0A=0AOn 17 Oct 2008, at 04:02, "prabin mei=
tei" <prabin.meitei@gmail.com> wrote:=0A=0AHi, Thanks for the reply. I look=
ed through the Filter class. I think i can=0Ause the TermFilter for my requ=
irement. But I have few doubs regarding the=0Ause of termFilter.=0A=0ACan I=
 add any number of terms to it?? say 5000 terms? Is there any limit?=0ACan =
i use this term filter by adding to another boolean filter??=0A=0APrabin=0A=
=0AOn Fri, Oct 17, 2008 at 12:53 AM, Erick Erickson <erickerickson@gmail.co=
m>wrote:=0A=0AThis sounds like a filter would work here. The basic idea of =
a filter=0Ais that it's a bitmap where each bit's ordinal position=0Arepres=
ents the a doc ID. Only documents corresponding to=0A"on" bits are returned=
.=0A=0AFilters can be combined, flipped, etc. All the things you'd expect=
=0Ato do with a bunch of bits. See the Filter class.=0A=0ASee TermEnum/Term=
Docs for ways to get the Lucene ID=0Acorresponding to a particular term (i.=
e. one of the BooleanClauses=0Ayou were creating), which corresponds to a b=
it to turn on or=0Aoff in your Filter.=0A=0AAlso see CachingWrapperFilter a=
nd ChainedFilter as well.=0A=0ABest=0AErick=0A=0AOn Thu, Oct 16, 2008 at 2:=
44 PM, prabin meitei <prabin.meitei@gmail.com=0Awrote:=0A=0AHi,     I have =
a large index of documents of fields "id" "name" and few=0Aother.=0Awhile q=
uerying i do want to exclude a list of ids i passed in.=0A=0Afor this what =
i use is=0AQuery query =3D new BooleanQuery();=0A=0Afor (int i=3D0; i<list.=
size(); i++){=0A=0A              term =3D new Term("id", list.get(i).toStri=
ng());=0A=0A              termQuery =3D new TermQuery(term);=0A=0A         =
     query.add(termQuery, Occur.MUST_NOT);=0A=0A          }=0A=0A=0Athe pro=
blem with this is that when my list size grows larger (more than=0A1024) it=
 gives tooManyBooleanCauses exception.=0A=0A=0Ai tried by changing the quer=
y to=0A=0Aquery.add(new QueryParser("id", new=0AStandardAnalyzer()).parse(l=
ist.toString()),=0AOccur.MUST_NOT);=0A=0A=0Athis also gives the same proble=
m when list size is big.=0A=0A=0AI do not want to increase the max clause l=
imit ('coz of performance=0Aissues)=0A=0A=0AIs there any simple solution to=
 such problem?=0A=0A=0AAny suggestion will be greatly appreciated.=0A=0A=0A=
Prabin=0A=0A=0A=0A=0ASend instant messages to your online friends http://uk=
.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 17 08:10:26 2008
Return-Path: <java-user-return-36690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19326 invoked from network); 17 Oct 2008 08:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Oct 2008 08:10:26 -0000
Received: (qmail 45199 invoked by uid 500); 17 Oct 2008 08:10:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45165 invoked by uid 500); 17 Oct 2008 08:10:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45154 invoked by uid 99); 17 Oct 2008 08:10:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 01:10:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yarimahdi@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 08:09:09 +0000
Received: by fk-out-0910.google.com with SMTP id 18so412245fkq.5
        for <java-user@lucene.apache.org>; Fri, 17 Oct 2008 01:09:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=/GDfAIp4VHLYH+XfmygpQR+S30NQASH0g9bxLamzfTA=;
        b=L9sCKrX1au0YVmeOF2qcrZ3s/VIh/5g5AmW0x6PH550bUx3J9JWrM4fxVND7B80fXO
         pJeNtCNH3sTJlnBD2j2yVmguDC65aubAtWk6wdXojaiPsAyCOnqX/BLKebcOxCOBIK0z
         6NNqZUaGL/o6XawTY8b2KmIF2qwKeP9Y5O7qU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VObbXL+E3QNYtMcXiuUbeABTVML8SkDHobXggq5bXluW4C/iUTfs7YyBeGKxAWiSld
         rhDqrx4HTyKhsKHfnWOz89Cms+J/XPRb+fi3KR1wulNS2vdoDhDA3yNeq6s9MGZ1Iitz
         /DQ6/DiCKmafYCi00DyBGIwprPNqYPPSILZ5g=
Received: by 10.187.221.13 with SMTP id y13mr502794faq.1.1224230976109;
        Fri, 17 Oct 2008 01:09:36 -0700 (PDT)
Received: by 10.187.250.20 with HTTP; Fri, 17 Oct 2008 01:09:36 -0700 (PDT)
Message-ID: <aa609e6b0810170109o7a6f96a0k89b687d6ef168813@mail.gmail.com>
Date: Fri, 17 Oct 2008 11:39:36 +0330
From: "mahdi yari" <yarimahdi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index
In-Reply-To: <5B3E2464-285A-41A0-A1D5-73343E133B7F@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86387_22709108.1224230976114"
References: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com>
	 <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com>
	 <aa609e6b0810160453i340e40d8p7592684afd620232@mail.gmail.com>
	 <5B3E2464-285A-41A0-A1D5-73343E133B7F@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86387_22709108.1224230976114
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

just one IndexWriter writes on Index and after a specific time(like one day
or one week etc), i create a new IndexWriter on new Directory and another
thread try to optimize old IndexWirter.

On Thu, Oct 16, 2008 at 5:25 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Can you post the full traceback for your exception, and describe your
> indexing process as well?
>
> Mike
>
>
> mahdi yari wrote:
>
>  hi dears
>> i have same problem
>> i indexing on Ubuntu Linux Distro and i have large index (>30G) and
>> mergeFactor = 10,
>> my Lucene version is 2.2.0
>> i think this maybe bug on Lucene 2.2.0
>>
>> but i get this error sometimes, not always
>> thanks alot
>>
>>
>> On Thu, Oct 16, 2008 at 3:01 PM, Chaula Ganatra <cganatra@asite.com>
>> wrote:
>>
>>  Hi,
>>>
>>> I am again getting the following error while optimization.
>>>
>>>
>>> java.io.FileNotFoundException: \\machine01\indexes\_w5.cfs (The system
>>> cannot find the file specified)
>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>> java.io.RandomAccessFile.open(Native Method)
>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>> java.io.RandomAccessFile.<init>(Unknown Source)
>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDir
>>> ectory.java:506)
>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>> org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java
>>> :536)
>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>> org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
>>> a:70)
>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:181)
>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:167)
>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:139)
>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1867)
>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1231)
>>>
>>>
>>> If I try to optimize it again then also getting the same error.
>>>
>>> Can anyone please help me out? It is occurring on live environment.
>>>
>>>
>>> Regards,
>>> Chaula
>>>
>>> -----Original Message-----
>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>> Sent: 26 September, 2008 8:00 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: How to restore corrupted index
>>>
>>>
>>> It's perfectly fine to have a reader open on an index, while an
>>> IndexWriter runs optimize.
>>>
>>> Which version of Lucene are you using?  And which OS & filesystem?
>>>
>>> Mike
>>>
>>> Chaula Ganatra wrote:
>>>
>>>  It was the Reader on same index, which I did not close so gave
>>>> exception
>>>> in writer.optimise()
>>>>
>>>> Chaula
>>>>
>>>> -----Original Message-----
>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>> Sent: 26 September, 2008 7:17 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: How to restore corrupted index
>>>>
>>>>
>>>> Can you post the full stack trace in both cases?
>>>>
>>>> Mike
>>>>
>>>> Chaula Ganatra wrote:
>>>>
>>>>  I found one case when such multiple files are remained, when we call
>>>>> writer.optimise() it throws exception and multiple files remained in
>>>>> index dir.
>>>>>
>>>>> After such multiple files, when we add document in index by calling
>>>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>>>
>>>>> Regards,
>>>>> Chaula
>>>>>
>>>>> -----Original Message-----
>>>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>>>> Sent: 26 September, 2008 6:02 PM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: How to restore corrupted index
>>>>>
>>>>> There is the CheckIndex tool included in the distribution for
>>>>> checking/
>>>>> fixing bad indexes, but it can't solve everything.
>>>>>
>>>>> The bigger question is why it is happening to begin with.  Can you
>>>>> describe your indexing process?  How do you know the index is
>>>>> actually
>>>>> corrupted?  Are you seeing exceptions when opening it?
>>>>>
>>>>> -Grant
>>>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>>>
>>>>>  We have an application in which index will be updated frequently.
>>>>>>
>>>>>> During development time, found that index files gets corrupted, i.e.
>>>>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>>>>> nrm
>>>>>>
>>>>>> Remains there in index directory.
>>>>>>
>>>>>> Is there any way that such issue does not occur at all or if it
>>>>>> happens
>>>>>> we can recover the index data again?
>>>>>>
>>>>>> It would be a great help, if some one can.
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> Regards,
>>>>>>
>>>>>> Chaula
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> --------------------------
>>>>> Grant Ingersoll
>>>>> http://www.lucidimagination.com
>>>>>
>>>>> Lucene Helpful Hints:
>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_86387_22709108.1224230976114--

From java-user-return-36691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 17 08:32:41 2008
Return-Path: <java-user-return-36691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27267 invoked from network); 17 Oct 2008 08:32:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Oct 2008 08:32:41 -0000
Received: (qmail 82455 invoked by uid 500); 17 Oct 2008 08:32:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82430 invoked by uid 500); 17 Oct 2008 08:32:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82419 invoked by uid 99); 17 Oct 2008 08:32:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 01:32:35 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yarimahdi@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 08:31:26 +0000
Received: by fg-out-1718.google.com with SMTP id l27so336556fgb.27
        for <java-user@lucene.apache.org>; Fri, 17 Oct 2008 01:32:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=MkHZECWfa52M0Qf/vA8ZTbPTM8jUPvbPHXLaRVZmKFs=;
        b=K9kGIIjQ/NCwd0Yz3NLUFD7XidIqqvoV6esuLEGyRXB47nSAw35afu7f48QyDtoTqD
         OjPXDDZhHeWkkUW7hLHDKPs5KDseyCf/UZEU9C6KPI6MWMRdqRrKhuJxU/AybJQnthFl
         1UE3cnS7lz/R5B2HJSU9D/nC48XFNDgBhxn9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FVtPOlTfY0efRLLx3x78EJgo0KWIK+XJoE4Kv9BFJUCBhXJ1dJjTVuI2eIWxMBO/dS
         Ev6Luehd0aM4nIzXf5hjeuW1DcOljsUvIvY14ZuO6Ovo5yTpYJFyNAsLsE3J3AsVRrJ7
         WC+fxtBOXWxXCjSd8BJI3afFiePI4gAxzsU2s=
Received: by 10.187.251.11 with SMTP id d11mr495166fas.104.1224232322949;
        Fri, 17 Oct 2008 01:32:02 -0700 (PDT)
Received: by 10.187.250.20 with HTTP; Fri, 17 Oct 2008 01:32:02 -0700 (PDT)
Message-ID: <aa609e6b0810170132l2c27c47ag9abd6f868199b801@mail.gmail.com>
Date: Fri, 17 Oct 2008 12:02:02 +0330
From: "mahdi yari" <yarimahdi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Equal distribution over a field
In-Reply-To: <20014829.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86715_24502854.1224232322942"
References: <20014829.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86715_24502854.1224232322942
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i think you can use SortComparatorSource to control on sort of documents.
but i can not understand your problem correctly


On Thu, Oct 16, 2008 at 6:14 PM, Anselmo <anselm.bauer@googlemail.com>wrote:

>
> I am using Lucene to search for products in an online-shop with several
> shops, brands etc.
>
> Is it possible to sort documents with the same score, in a way that a field
> (e.g. the brand field) is equally distributed. Otherwise, the products are
> sorted by the appearance of the brands in the database and brands at the
> end
> of the database are at the end of the pagination.
>
> I want to avoid a random order of products...
> --
> View this message in context:
> http://www.nabble.com/Equal-distribution-over-a-field-tp20014829p20014829.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_86715_24502854.1224232322942--

From java-user-return-36692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 17 09:12:24 2008
Return-Path: <java-user-return-36692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36237 invoked from network); 17 Oct 2008 09:12:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Oct 2008 09:12:24 -0000
Received: (qmail 21118 invoked by uid 500); 17 Oct 2008 09:12:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21094 invoked by uid 500); 17 Oct 2008 09:12:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21078 invoked by uid 99); 17 Oct 2008 09:12:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 02:12:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 09:11:07 +0000
Received: by gxk6 with SMTP id 6so791188gxk.5
        for <java-user@lucene.apache.org>; Fri, 17 Oct 2008 02:11:43 -0700 (PDT)
Received: by 10.90.50.7 with SMTP id x7mr4331248agx.16.1224234703121;
        Fri, 17 Oct 2008 02:11:43 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm2844905agd.33.2008.10.17.02.11.41
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 17 Oct 2008 02:11:42 -0700 (PDT)
Message-Id: <E88AEC74-6C0E-461E-9437-DC30F48B361A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <aa609e6b0810170109o7a6f96a0k89b687d6ef168813@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Fri, 17 Oct 2008 05:11:40 -0400
References: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com> <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com> <aa609e6b0810160453i340e40d8p7592684afd620232@mail.gmail.com> <5B3E2464-285A-41A0-A1D5-73343E133B7F@mikemccandless.com> <aa609e6b0810170109o7a6f96a0k89b687d6ef168813@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


When you run the optimize, is it with the already opened IndexWriter  
on the old directory?

Do you use the default locking impl. in Directory  
(SimpleFSLockFactory)?  Are you changing the lock directory, or ever  
forcefully removing the lock file (or calling IndexReader/ 
Writer#unlock)?

Most often, an entirely missing file is due to two writers  
accidentally being opened at the same time on the same index.

If you can use IndexWriter.setInfoStream to turn on logging & capture  
all logs leading up to the missing file then I could dig further.

Mike

On Oct 17, 2008, at 4:09 AM, mahdi yari wrote:

> just one IndexWriter writes on Index and after a specific time(like  
> one day
> or one week etc), i create a new IndexWriter on new Directory and  
> another
> thread try to optimize old IndexWirter.
>
> On Thu, Oct 16, 2008 at 5:25 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Can you post the full traceback for your exception, and describe your
>> indexing process as well?
>>
>> Mike
>>
>>
>> mahdi yari wrote:
>>
>> hi dears
>>> i have same problem
>>> i indexing on Ubuntu Linux Distro and i have large index (>30G) and
>>> mergeFactor = 10,
>>> my Lucene version is 2.2.0
>>> i think this maybe bug on Lucene 2.2.0
>>>
>>> but i get this error sometimes, not always
>>> thanks alot
>>>
>>>
>>> On Thu, Oct 16, 2008 at 3:01 PM, Chaula Ganatra <cganatra@asite.com>
>>> wrote:
>>>
>>> Hi,
>>>>
>>>> I am again getting the following error while optimization.
>>>>
>>>>
>>>> java.io.FileNotFoundException: \\machine01\indexes\_w5.cfs (The  
>>>> system
>>>> cannot find the file specified)
>>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>>> java.io.RandomAccessFile.open(Native Method)
>>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>>> java.io.RandomAccessFile.<init>(Unknown Source)
>>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>>> org.apache.lucene.store.FSDirectory$FSIndexInput 
>>>> $Descriptor.<init>(FSDir
>>>> ectory.java:506)
>>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>>> org.apache.lucene.store.FSDirectory 
>>>> $FSIndexInput.<init>(FSDirectory.java
>>>> :536)
>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>> org 
>>>> .apache 
>>>> .lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
>>>> a:70)
>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>> org 
>>>> .apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
>>>> 181)
>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:167)
>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:139)
>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>> org 
>>>> .apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java: 
>>>> 1867)
>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1231)
>>>>
>>>>
>>>> If I try to optimize it again then also getting the same error.
>>>>
>>>> Can anyone please help me out? It is occurring on live environment.
>>>>
>>>>
>>>> Regards,
>>>> Chaula
>>>>
>>>> -----Original Message-----
>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>> Sent: 26 September, 2008 8:00 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: How to restore corrupted index
>>>>
>>>>
>>>> It's perfectly fine to have a reader open on an index, while an
>>>> IndexWriter runs optimize.
>>>>
>>>> Which version of Lucene are you using?  And which OS & filesystem?
>>>>
>>>> Mike
>>>>
>>>> Chaula Ganatra wrote:
>>>>
>>>> It was the Reader on same index, which I did not close so gave
>>>>> exception
>>>>> in writer.optimise()
>>>>>
>>>>> Chaula
>>>>>
>>>>> -----Original Message-----
>>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>>> Sent: 26 September, 2008 7:17 PM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: How to restore corrupted index
>>>>>
>>>>>
>>>>> Can you post the full stack trace in both cases?
>>>>>
>>>>> Mike
>>>>>
>>>>> Chaula Ganatra wrote:
>>>>>
>>>>> I found one case when such multiple files are remained, when we  
>>>>> call
>>>>>> writer.optimise() it throws exception and multiple files  
>>>>>> remained in
>>>>>> index dir.
>>>>>>
>>>>>> After such multiple files, when we add document in index by  
>>>>>> calling
>>>>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>>>>
>>>>>> Regards,
>>>>>> Chaula
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>>>>> Sent: 26 September, 2008 6:02 PM
>>>>>> To: java-user@lucene.apache.org
>>>>>> Subject: Re: How to restore corrupted index
>>>>>>
>>>>>> There is the CheckIndex tool included in the distribution for
>>>>>> checking/
>>>>>> fixing bad indexes, but it can't solve everything.
>>>>>>
>>>>>> The bigger question is why it is happening to begin with.  Can  
>>>>>> you
>>>>>> describe your indexing process?  How do you know the index is
>>>>>> actually
>>>>>> corrupted?  Are you seeing exceptions when opening it?
>>>>>>
>>>>>> -Grant
>>>>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>>>>
>>>>>> We have an application in which index will be updated frequently.
>>>>>>>
>>>>>>> During development time, found that index files gets  
>>>>>>> corrupted, i.e.
>>>>>>> more than one  cfs files,some other extension files e.g. frq,  
>>>>>>> fnm,
>>>>>>> nrm
>>>>>>>
>>>>>>> Remains there in index directory.
>>>>>>>
>>>>>>> Is there any way that such issue does not occur at all or if it
>>>>>>> happens
>>>>>>> we can recover the index data again?
>>>>>>>
>>>>>>> It would be a great help, if some one can.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Regards,
>>>>>>>
>>>>>>> Chaula
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> --------------------------
>>>>>> Grant Ingersoll
>>>>>> http://www.lucidimagination.com
>>>>>>
>>>>>> Lucene Helpful Hints:
>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 18 01:34:56 2008
Return-Path: <java-user-return-36693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56311 invoked from network); 18 Oct 2008 01:34:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Oct 2008 01:34:56 -0000
Received: (qmail 38973 invoked by uid 500); 18 Oct 2008 01:34:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38933 invoked by uid 500); 18 Oct 2008 01:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38922 invoked by uid 99); 18 Oct 2008 01:34:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 18:34:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yarimahdi@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Oct 2008 01:33:40 +0000
Received: by fk-out-0910.google.com with SMTP id 18so816360fkq.5
        for <java-user@lucene.apache.org>; Fri, 17 Oct 2008 18:34:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ahPNhiedDkWcAyYJnSpVwILmPRmIrpI4utxBhmcTrD0=;
        b=TgsaCV7IZ6U14GNgKyRSM5Iqjwv5jEe8Rl1CTKg2vSsvRgoM/DxUzEblWxVEfRirWE
         wDV/RSQXqnDHr2CnU8zAHe/yh2qnAcDrrcJNOi0uZILenqY9YiKYFrAGCKFg82syNZZB
         dwjJGqUDgZT5eotrjyN5xXyKOXGYi4zOLi8NU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MUW932dMeKvNXfRZfiiKB8m1Avy0v8kPCqz76rW01QfVRZY0J3FXe3hZQVIvAwTxtm
         OsMs7J/TlLIbhke+U3gM/f12PH2w6UScrU/TgB7Zb/6BeWWL4DxiQgAh2sor/N0oyOKK
         xE5yYI3Ek5+F+Dhxe/oibANo+i22qLFQJ40aU=
Received: by 10.187.171.8 with SMTP id y8mr739481fao.62.1224293646910;
        Fri, 17 Oct 2008 18:34:06 -0700 (PDT)
Received: by 10.187.250.20 with HTTP; Fri, 17 Oct 2008 18:34:06 -0700 (PDT)
Message-ID: <aa609e6b0810171834h82a8bbapa39025efcaeeeed4@mail.gmail.com>
Date: Sat, 18 Oct 2008 05:04:06 +0330
From: "mahdi yari" <yarimahdi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index
In-Reply-To: <E88AEC74-6C0E-461E-9437-DC30F48B361A@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_103593_2927847.1224293646905"
References: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com>
	 <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com>
	 <aa609e6b0810160453i340e40d8p7592684afd620232@mail.gmail.com>
	 <5B3E2464-285A-41A0-A1D5-73343E133B7F@mikemccandless.com>
	 <aa609e6b0810170109o7a6f96a0k89b687d6ef168813@mail.gmail.com>
	 <E88AEC74-6C0E-461E-9437-DC30F48B361A@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_103593_2927847.1224293646905
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i use SimpleFSLockFactory and optimized opened IndexWriter, but i use api to
forcefully removing the lock file.
this missing file, just occurs in sometimes not always??


On Fri, Oct 17, 2008 at 12:41 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> When you run the optimize, is it with the already opened IndexWriter on the
> old directory?
>
> Do you use the default locking impl. in Directory (SimpleFSLockFactory)?
>  Are you changing the lock directory, or ever forcefully removing the lock
> file (or calling IndexReader/Writer#unlock)?
>
> Most often, an entirely missing file is due to two writers accidentally
> being opened at the same time on the same index.
>
> If you can use IndexWriter.setInfoStream to turn on logging & capture all
> logs leading up to the missing file then I could dig further.
>
> Mike
>
>
> On Oct 17, 2008, at 4:09 AM, mahdi yari wrote:
>
>  just one IndexWriter writes on Index and after a specific time(like one
>> day
>> or one week etc), i create a new IndexWriter on new Directory and another
>> thread try to optimize old IndexWirter.
>>
>> On Thu, Oct 16, 2008 at 5:25 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>
>>> Can you post the full traceback for your exception, and describe your
>>> indexing process as well?
>>>
>>> Mike
>>>
>>>
>>> mahdi yari wrote:
>>>
>>> hi dears
>>>
>>>> i have same problem
>>>> i indexing on Ubuntu Linux Distro and i have large index (>30G) and
>>>> mergeFactor = 10,
>>>> my Lucene version is 2.2.0
>>>> i think this maybe bug on Lucene 2.2.0
>>>>
>>>> but i get this error sometimes, not always
>>>> thanks alot
>>>>
>>>>
>>>> On Thu, Oct 16, 2008 at 3:01 PM, Chaula Ganatra <cganatra@asite.com>
>>>> wrote:
>>>>
>>>> Hi,
>>>>
>>>>>
>>>>> I am again getting the following error while optimization.
>>>>>
>>>>>
>>>>> java.io.FileNotFoundException: \\machine01\indexes\_w5.cfs (The system
>>>>> cannot find the file specified)
>>>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>>>> java.io.RandomAccessFile.open(Native Method)
>>>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>>>> java.io.RandomAccessFile.<init>(Unknown Source)
>>>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>>>>
>>>>> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDir
>>>>> ectory.java:506)
>>>>> 16:20:57,533 INFO  [STDOUT] : 140       at
>>>>>
>>>>> org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java
>>>>> :536)
>>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>>> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>>>
>>>>> org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
>>>>> a:70)
>>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>>>
>>>>> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:181)
>>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:167)
>>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:139)
>>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>>>
>>>>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1867)
>>>>> 16:20:57,565 INFO  [STDOUT] : 140       at
>>>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1231)
>>>>>
>>>>>
>>>>> If I try to optimize it again then also getting the same error.
>>>>>
>>>>> Can anyone please help me out? It is occurring on live environment.
>>>>>
>>>>>
>>>>> Regards,
>>>>> Chaula
>>>>>
>>>>> -----Original Message-----
>>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>>> Sent: 26 September, 2008 8:00 PM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: How to restore corrupted index
>>>>>
>>>>>
>>>>> It's perfectly fine to have a reader open on an index, while an
>>>>> IndexWriter runs optimize.
>>>>>
>>>>> Which version of Lucene are you using?  And which OS & filesystem?
>>>>>
>>>>> Mike
>>>>>
>>>>> Chaula Ganatra wrote:
>>>>>
>>>>> It was the Reader on same index, which I did not close so gave
>>>>>
>>>>>> exception
>>>>>> in writer.optimise()
>>>>>>
>>>>>> Chaula
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>>>> Sent: 26 September, 2008 7:17 PM
>>>>>> To: java-user@lucene.apache.org
>>>>>> Subject: Re: How to restore corrupted index
>>>>>>
>>>>>>
>>>>>> Can you post the full stack trace in both cases?
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Chaula Ganatra wrote:
>>>>>>
>>>>>> I found one case when such multiple files are remained, when we call
>>>>>>
>>>>>>> writer.optimise() it throws exception and multiple files remained in
>>>>>>> index dir.
>>>>>>>
>>>>>>> After such multiple files, when we add document in index by calling
>>>>>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>>>>>
>>>>>>> Regards,
>>>>>>> Chaula
>>>>>>>
>>>>>>> -----Original Message-----
>>>>>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>>>>>> Sent: 26 September, 2008 6:02 PM
>>>>>>> To: java-user@lucene.apache.org
>>>>>>> Subject: Re: How to restore corrupted index
>>>>>>>
>>>>>>> There is the CheckIndex tool included in the distribution for
>>>>>>> checking/
>>>>>>> fixing bad indexes, but it can't solve everything.
>>>>>>>
>>>>>>> The bigger question is why it is happening to begin with.  Can you
>>>>>>> describe your indexing process?  How do you know the index is
>>>>>>> actually
>>>>>>> corrupted?  Are you seeing exceptions when opening it?
>>>>>>>
>>>>>>> -Grant
>>>>>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>>>>>
>>>>>>> We have an application in which index will be updated frequently.
>>>>>>>
>>>>>>>>
>>>>>>>> During development time, found that index files gets corrupted, i.e.
>>>>>>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>>>>>>> nrm
>>>>>>>>
>>>>>>>> Remains there in index directory.
>>>>>>>>
>>>>>>>> Is there any way that such issue does not occur at all or if it
>>>>>>>> happens
>>>>>>>> we can recover the index data again?
>>>>>>>>
>>>>>>>> It would be a great help, if some one can.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Regards,
>>>>>>>>
>>>>>>>> Chaula
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>  --------------------------
>>>>>>> Grant Ingersoll
>>>>>>> http://www.lucidimagination.com
>>>>>>>
>>>>>>> Lucene Helpful Hints:
>>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_103593_2927847.1224293646905--

From java-user-return-36694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 18 05:11:51 2008
Return-Path: <java-user-return-36694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17206 invoked from network); 18 Oct 2008 05:11:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Oct 2008 05:11:50 -0000
Received: (qmail 7905 invoked by uid 500); 18 Oct 2008 05:11:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7879 invoked by uid 500); 18 Oct 2008 05:11:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7868 invoked by uid 99); 18 Oct 2008 05:11:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2008 22:11:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.43.219.6] (HELO web8314.mail.in.yahoo.com) (202.43.219.6)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 18 Oct 2008 05:10:34 +0000
Received: (qmail 61226 invoked by uid 60001); 18 Oct 2008 05:10:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=FOWcpQlZsfHxnEKohnRd9BE5Pr1dUkRHkBkE9MN21Qx7+lNQE7S0Ymi6gy0PR5K4K9oJ4CsfztA3YtdhB82Vy0b0BbfLZW0cbJA8F2DAQ98dWF5jCUTuxRRKaKz2aaN1JsFybzabygYT9K491FUgas7w2HsySTuRWrUAO1ag9uM=;
X-YMail-OSG: T4Q4V8YVM1nYzrOSGu4WOqIUYtzgF_610zp1I1_WZmL18xl3g3KZJfCKiBBYe1ItKfNrCVMs6rLzzTieeYUW_VutHFdYlT.r8RHSogH2gXC.pBbj8ChRDFFGr_W8gqdSdESfagha6_5oV1uWN3ahGx1zn09W99e9Up1joYe5lPU5aoMWpnU-
Received: from [192.251.134.5] by web8314.mail.in.yahoo.com via HTTP; Sat, 18 Oct 2008 10:40:07 IST
X-Mailer: YahooMailWebService/0.7.247.3
Date: Sat, 18 Oct 2008 10:40:07 +0530 (IST)
From: prabina pattanayak <prabina007@yahoo.co.in>
Reply-To: prabina007@yahoo.co.in
Subject: Re: I am not able to run Lucene 2.4 Demo
To: java-user@lucene.apache.org, java-user-owner@lucene.apache.org,
  Ganesh <emailgane@yahoo.co.in>
In-Reply-To: <026901c92f59$6399d2f0$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-941338068-1224306607=:60495"
Message-ID: <416694.60495.qm@web8314.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-941338068-1224306607=:60495
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

what i observed is that it creates the index folder, but that is empty.
it should have one/two file named segments.gen and segments_x(any no.) .
but these two files are not being created inside the index folder.
that's why it is throwing the exception message:
no segments* file found in org.apache.lucene.store.FSDirectory@E:\prabina\l=
ucene-2.4demo\index: files :
=C2=A0
Regards,
Prabina
--- On Thu, 16/10/08, Ganesh <emailgane@yahoo.co.in> wrote:

From: Ganesh <emailgane@yahoo.co.in>
Subject: Re: I am not able to run Lucene 2.4 Demo
To: java-user@lucene.apache.org, prabina007@yahoo.co.in, java-user-owner@lu=
cene.apache.org
Date: Thursday, 16 October, 2008, 12:05 PM

Hello prabina,

I worked fine in windows. Could you provide the details of exception and=20
also the System.out messages printed by the application.

Index folder will be created in the current directory. When you execute jav=
a=20
org.apache.lucene.demo.IndexFiles <root directory>, the list of files=20
available in the root directory will get indexed. In your case it is=20
"E:\prabina\lucene-2.4demo\src"

I have tried the following and it worked.
D:\Program Files\lucene-2.4.0>java -cp=20
"lucene-demos-2.4.0.jar;lucene-core-2.4.0.jar"=20
org.apache.lucene.demo.IndexFiles "D:\Program
Files\lucene-2.4.0\src"

Regards
Ganesh


----- Original Message -----=20
From: "prabina pattanayak" <prabina007@yahoo.co.in>
To: <java-user@lucene.apache.org>;
<java-user-owner@lucene.apache.org>
Sent: Wednesday, October 15, 2008 10:42 AM
Subject: I am not able to run Lucene 2.4 Demo


Hi All,
i am a beginner to Lucene.
and i am trying to use Lucene 2.4.
when i have set lucene-core-2.4.0.jar & lucene-demos-2.4.0.jar in my=20
CLASSPATH. and trying to run:
java org.apache.lucene.demo.IndexFiles
E:\prabina\lucene-2.4demo\src
it shows the error:
caught a class java.io.FileNotFoundException
with message: no segments* file found in=20
org.apache.lucene.store.FSDirectory@E:\prabina\lucene-2.4demo\index:
files:
but it creates the index folder in my current directory. but the index=20
folder is empty. no segments files are there.

plz, help me out from this problem ASAP.




      Add more friends to your messenger and enjoy! Go to=20
http://messenger.yahoo.com/invite/=20

Send instant messages to your online friends http://in.messenger.yahoo.com=
=20
=0A=0ASend free SMS to your Friends on Mobile from your Yahoo! Messenger. D=
ownload Now! http://messenger.yahoo.com/download.php
--0-941338068-1224306607=:60495--

From java-user-return-36695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 18 21:12:37 2008
Return-Path: <java-user-return-36695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70865 invoked from network); 18 Oct 2008 21:12:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Oct 2008 21:12:35 -0000
Received: (qmail 36720 invoked by uid 500); 18 Oct 2008 21:12:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36683 invoked by uid 500); 18 Oct 2008 21:12:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36671 invoked by uid 99); 18 Oct 2008 21:12:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Oct 2008 14:12:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Oct 2008 21:11:21 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1066240rvb.5
        for <java-user@lucene.apache.org>; Sat, 18 Oct 2008 14:11:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=gzO3BpZJ5BF0GaXSqeAJ7BGCc3YbI9o9C4JZ8/MeXBQ=;
        b=AhqlsHQe1zEMcPJF6rQAbJixqpGK01G8p0u66BAEnH282i+qwnbxOYVwq6mkTv7zB9
         +7DnHT15gAeYfrHq2EtiASqpj6f37b62AdM/4oWrfS03Q1Ff7ysX3JkRLelUyfQQZqAi
         R+0Z2JnPv5ne23m7RqrtyMf/W+KSiSNafrpq8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=rBLh6XCkPWr271cpqAAZefdUFPwLLlTg8Y1jk5UMLhonZZMM9TH39y2YxR3y5U9lp8
         cyHb+SIAGtLPBgfGLxAopElF76hTLYBb7nGV8VJdePSVviPkwa6JVMO046kNpdkUY3HP
         wmDgKU0h2/NBPJ5Fq0aaTjhSe9J+0UFoybGQU=
Received: by 10.141.198.9 with SMTP id a9mr3548177rvq.238.1224364309897;
        Sat, 18 Oct 2008 14:11:49 -0700 (PDT)
Received: by 10.141.66.11 with HTTP; Sat, 18 Oct 2008 14:11:49 -0700 (PDT)
Message-ID: <6de6b1650810181411x520dce31i1b2b45ddd78e41fd@mail.gmail.com>
Date: Sat, 18 Oct 2008 19:11:49 -0200
From: "Rafael Almeida" <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: QueryParser
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

On queryparser's documentation says:
"Note that QueryParser is not thread-safe."
it only means that the same instance of QueryParser can't be used by
multiple threads, right? But if each thread has its own QueryParser
instance, then it's OK, right?

BTW, the link http://lucene.apache.org/java/docs/queryparsersyntax.html
on http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/queryParser/QueryParser.html
seems to be broken.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 18 22:31:52 2008
Return-Path: <java-user-return-36696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1451 invoked from network); 18 Oct 2008 22:31:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Oct 2008 22:31:52 -0000
Received: (qmail 68595 invoked by uid 500); 18 Oct 2008 22:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68087 invoked by uid 500); 18 Oct 2008 22:31:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68076 invoked by uid 99); 18 Oct 2008 22:31:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Oct 2008 15:31:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Oct 2008 22:30:38 +0000
Received: by gxk6 with SMTP id 6so2450923gxk.5
        for <java-user@lucene.apache.org>; Sat, 18 Oct 2008 15:30:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=md4MDm+lDMfr18rpAcjHKQ2AsXLPiuw/4i6CbGzf+Zw=;
        b=PJdah4LwXc56MZy9CZrLLqrg98LHU1MMTz+o8XqACxykt952MRazMCo+5y/u6OgnGn
         nn0+s93+vFS/dnj+J6L0+q2o0pXIIwn6GYCUnCeKESAnfJwlpYyjlF3jsQ7GxLo1z626
         FW5lSoGj5LlNebPj87XAcFRXQTywpFnoNcAFE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=q9hExYZ//AB+nrixBgEUjEiorfX1/Rf7w339QE4kVtBFLM0WjraH0iWA3i/DVtimFL
         NAfZu9HqIZj9hwMbmoYQRcPWKKxXGQ65MbK5f1NC24Q2KMhQwVPgLbHg860sIGsT7xhl
         5XB5dnHSxcwjZntYWMA7rMwE7dcalhPkvbspA=
Received: by 10.100.172.17 with SMTP id u17mr1053375ane.105.1224369015877;
        Sat, 18 Oct 2008 15:30:15 -0700 (PDT)
Received: from ?10.145.240.3? ([166.188.218.159])
        by mx.google.com with ESMTPS id c37sm11158582ana.11.2008.10.18.15.30.14
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 18 Oct 2008 15:30:15 -0700 (PDT)
Message-Id: <77E7E935-B855-436F-8DA7-D48E7A79460F@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <6de6b1650810181411x520dce31i1b2b45ddd78e41fd@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5F136)
Mime-Version: 1.0 (iPhone Mail 5F136)
Subject: Re: QueryParser
Date: Sat, 18 Oct 2008 16:30:06 -0600
References: <6de6b1650810181411x520dce31i1b2b45ddd78e41fd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Right, just don't share the same instance across threads.

- Mark


On Oct 18, 2008, at 3:11 PM, "Rafael Almeida" <almeidaraf@gmail.com>  
wrote:

> On queryparser's documentation says:
> "Note that QueryParser is not thread-safe."
> it only means that the same instance of QueryParser can't be used by
> multiple threads, right? But if each thread has its own QueryParser
> instance, then it's OK, right?
>
> BTW, the link http://lucene.apache.org/java/docs/ 
> queryparsersyntax.html
> on http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/queryParser/QueryParser.html
> seems to be broken.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 19 17:37:30 2008
Return-Path: <java-user-return-36697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57556 invoked from network); 19 Oct 2008 17:37:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Oct 2008 17:37:30 -0000
Received: (qmail 10676 invoked by uid 500); 19 Oct 2008 17:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10173 invoked by uid 500); 19 Oct 2008 17:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10162 invoked by uid 99); 19 Oct 2008 17:37:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 10:37:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 17:36:16 +0000
Received: by gxk6 with SMTP id 6so2893134gxk.5
        for <java-user@lucene.apache.org>; Sun, 19 Oct 2008 10:36:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=RYsf1cCKNeUlhc9RqR30tSsBy196Dy+iczcwk0mA+Uo=;
        b=rw3yhRDynrZnMd7xUFsPWCN+ap7IKuXzy0vjcp/m7Fv8t1EVpN920q5fawDpXhoTVU
         zs5YFQA1T2SOo7OQu+nRmjqg4Vhd2bgd9dvvntlNXN/UFOFl6ENVmLPeJBo3Fj5ZuzbN
         x8/1wrYH19hXziB1nYXH7wITwfMmXcfIKGvkk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=rla0AnOejyf8C1B6QnIpxXT1+jUvJLjwjTcbD3Qgr9gPbNbIcSjUuv424HTGxgCF7b
         Y9zUqTg5UHaCGAjJ9G9c4UcytdCCO8yIxjlZh4eDCRNnacbqXByOQe5z3X47YdL7MYQ/
         cHOc68wHH33WQV0SgZ1d84tmCqIiiP5C4Fj5w=
Received: by 10.151.111.1 with SMTP id o1mr10500976ybm.43.1224437812746;
        Sun, 19 Oct 2008 10:36:52 -0700 (PDT)
Received: by 10.151.7.16 with HTTP; Sun, 19 Oct 2008 10:36:52 -0700 (PDT)
Message-ID: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com>
Date: Sun, 19 Oct 2008 18:36:52 +0100
From: "Richard Marr" <richard.marr@gmail.com>
To: java-user@lucene.apache.org
Subject: Hiring etiquette
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Is there a mailing-list-appropriate way to hire coders with Lucene
experience? I don't want to just spam the list because I don't want to
crap where I live. I'm a programmer not a recruiter if that makes any
difference.

Cheers,

Rich

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 19 18:19:51 2008
Return-Path: <java-user-return-36698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87644 invoked from network); 19 Oct 2008 18:19:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Oct 2008 18:19:51 -0000
Received: (qmail 38383 invoked by uid 500); 19 Oct 2008 18:19:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38362 invoked by uid 500); 19 Oct 2008 18:19:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38351 invoked by uid 99); 19 Oct 2008 18:19:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 11:19:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 18:18:37 +0000
Received: by gxk6 with SMTP id 6so2914724gxk.5
        for <java-user@lucene.apache.org>; Sun, 19 Oct 2008 11:18:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=VF4Utu8f8g8ERCjA1aPikKu7qJXMH4b/YLA8lUp8bLg=;
        b=DPfKEIAU/0ouaWaXyrX+L82DhtD3xDf3mCCgl+8cqA+0jG9k700bdUgwlWVU5+DPGx
         q9ch3yiJxaaGfpz4eMEaEipcLjWD3LCVVvMfwNRXMakTzAqFsvKDR4ljqaomGxYl/kQM
         AusHoQRWnyvYT4TrCBlBjnfy2izUDb4dPw6JI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=hrrxKGDEeF2+LySwKbLzdm6CqlNgblev1fk/VW5/gMsTWABH99DYKRoVUaEu3J17KU
         7/oRcSZetxknh/+XTPqLlRjx++rehIndrA5zzwCt0Ia61PgYBQX/Y++yQELYQmK4qrdN
         ikxZfsooW97oSAVcDYQMGQmJEM1xHkNKcaPcI=
Received: by 10.90.28.20 with SMTP id b20mr6522970agb.53.1224440295179;
        Sun, 19 Oct 2008 11:18:15 -0700 (PDT)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 38sm7226915aga.4.2008.10.19.11.18.13
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 19 Oct 2008 11:18:13 -0700 (PDT)
Message-ID: <48FB79E4.2060400@gmail.com>
Date: Sun, 19 Oct 2008 14:18:12 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Hiring etiquette
References: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com>
In-Reply-To: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Richard Marr wrote:
> Hi all,
>
> Is there a mailing-list-appropriate way to hire coders with Lucene
> experience? I don't want to just spam the list because I don't want to
> crap where I live. I'm a programmer not a recruiter if that makes any
> difference.
>
> Cheers,
>
> Rich
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   
Generally, people just throw out the request to the list and no one 
really complains, but I do think its frowned upon. I'm sure someone else 
can give the 'official' stance (since we are not a job board/list I 
assume its against).

You might instead limit your email to those that have agreed to be 
contacted at http://wiki.apache.org/lucene-java/Support

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 19 21:29:01 2008
Return-Path: <java-user-return-36699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24422 invoked from network); 19 Oct 2008 21:29:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Oct 2008 21:29:00 -0000
Received: (qmail 42949 invoked by uid 500); 19 Oct 2008 21:28:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42924 invoked by uid 500); 19 Oct 2008 21:28:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42913 invoked by uid 99); 19 Oct 2008 21:28:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 14:28:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.66] (HELO elasmtp-spurfowl.atl.sa.earthlink.net) (209.86.89.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 21:27:46 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=n4vbR4REiYNYKi7WLfqwEJugWtpMFCfqnf9qvqjbS6UIpkXSDN06GZlidIn7Ra92;
  h=Received:From:To:Subject:Date:Message-ID:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:In-Reply-To:X-MimeOLE:Importance:X-ELNK-Trace:X-Originating-IP;
Received: from [69.107.110.116] (helo=sys2a)
	by elasmtp-spurfowl.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <bedouglas@earthlink.net>)
	id 1Krfp1-0001aB-Kv
	for java-user@lucene.apache.org; Sun, 19 Oct 2008 17:28:23 -0400
From: "bruce" <bedouglas@earthlink.net>
To: <java-user@lucene.apache.org>
Subject: RE: Hiring etiquette
Date: Sun, 19 Oct 2008 14:28:21 -0700
Message-ID: <62eb01c93231$9d2d2e60$0301a8c0@tmesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <48FB79E4.2060400@gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1914
Importance: Normal
X-ELNK-Trace: 37ffaa9bc7b967c00cc1426638a40ef67e972de0d01da940ae742745aea7c783c2cf0320df2a1152350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 69.107.110.116
X-Virus-Checked: Checked by ClamAV on apache.org

as someone who's posted, and replied to other project requests on other
sites, if you're not apamming... then i'd say go ahead!!

in this day/time, when you don't know if your job is safe next week, who's
really going to frown upon a potentially serious project/offer...

just be cool on the spamming aspect, and you should be ok!!



-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]
Sent: Sunday, October 19, 2008 11:18 AM
To: java-user@lucene.apache.org
Subject: Re: Hiring etiquette


Richard Marr wrote:
> Hi all,
>
> Is there a mailing-list-appropriate way to hire coders with Lucene
> experience? I don't want to just spam the list because I don't want to
> crap where I live. I'm a programmer not a recruiter if that makes any
> difference.
>
> Cheers,
>
> Rich
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Generally, people just throw out the request to the list and no one
really complains, but I do think its frowned upon. I'm sure someone else
can give the 'official' stance (since we are not a job board/list I
assume its against).

You might instead limit your email to those that have agreed to be
contacted at http://wiki.apache.org/lucene-java/Support

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 19 22:58:47 2008
Return-Path: <java-user-return-36700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55898 invoked from network); 19 Oct 2008 22:58:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Oct 2008 22:58:47 -0000
Received: (qmail 86817 invoked by uid 500); 19 Oct 2008 22:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86790 invoked by uid 500); 19 Oct 2008 22:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86779 invoked by uid 99); 19 Oct 2008 22:58:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 15:58:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 22:57:34 +0000
Received: by wa-out-1112.google.com with SMTP id n4so774520wag.5
        for <java-user@lucene.apache.org>; Sun, 19 Oct 2008 15:58:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=StLKPJ/IJk79VCKFcMs547w8IwfepHXmWs5aSznG+9k=;
        b=smMkVCvzm1wx+RxMbGOq3blFxMfn4O51MsUbq449UkuobTHYOWo837J0bSGRyP7X/D
         z/xU4A/kxQNMLY8NgocN55Lwv3dcZQMHgKVcVvf1tGoZqESpO6ePI6KxWDbFgx4IbRYy
         FRmrNoWpusIIyVvCqphLQddVHFvGMFvvyosMQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=b68o+s3sNzMoEJ6JkQjqlK9J/Rhh6kZA1TxBjwt1/LAemBJ4W/nc00n0R1n6y+THzI
         6fmA1W5MfrDpS3jS4v1e+DdiFQvGmtQFbNXx9IUG9WcPlfQCFAy5fodYTU8TeFEQuSxc
         JZed0KkNdSkkbHvAUr8EKkybsaLAg0nYCDd0s=
Received: by 10.114.12.9 with SMTP id 9mr4848203wal.121.1224457092790;
        Sun, 19 Oct 2008 15:58:12 -0700 (PDT)
Received: by 10.114.72.5 with HTTP; Sun, 19 Oct 2008 15:58:12 -0700 (PDT)
Message-ID: <2cda2fc90810191558v6c8436a3s5d5a860b4d88ecf5@mail.gmail.com>
Date: Sun, 19 Oct 2008 15:58:12 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hiring etiquette
In-Reply-To: <48FB79E4.2060400@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com>
	 <48FB79E4.2060400@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

2008/10/19 Mark Miller <markrmiller@gmail.com>:
> You might instead limit your email to those that have agreed to be contacted
> at http://wiki.apache.org/lucene-java/Support

FWIW, the page indicated is immutable.
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 19 23:11:32 2008
Return-Path: <java-user-return-36701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60542 invoked from network); 19 Oct 2008 23:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Oct 2008 23:11:31 -0000
Received: (qmail 92952 invoked by uid 500); 19 Oct 2008 23:11:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92916 invoked by uid 500); 19 Oct 2008 23:11:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92905 invoked by uid 99); 19 Oct 2008 23:11:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 16:11:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 23:10:19 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1412853rvb.5
        for <java-user@lucene.apache.org>; Sun, 19 Oct 2008 16:10:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=gMlSOQPxdLDDN3+yzvg4TFJxcD+9rqJcs099feNFeeI=;
        b=qE+vNpXlSwBBvke2ErO6D17dXnF4UrFlM4mLV/94ESvY7+oCZKEZKIMW5yOJWmh9ZH
         UGx6K/jR84bEykI98GJnn7SRwyUoMm+4aNX9jk3NfDgUbaLqpO61r1l4DAmhVIFD4Wjx
         ghvt7b4v7piHZhkPKGup7vIImJIEQo9ujuqm8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=DBrZbpi4GSNnOxqMLaDVlLV69llnUxv8SvGZml9yKGr+VM0zWUcM+RbTlXZzeH9OTt
         8nGUw772rU7Mp9TSjErtGy1Voaz5eNiQ1EwC9m9Xzoc43t868Ahyp2czNYdjobGcRWyS
         KnybeMiteu19WIVy73w3nB2qcPFrSMv60tGRk=
Received: by 10.140.191.14 with SMTP id o14mr4349122rvf.130.1224457848325;
        Sun, 19 Oct 2008 16:10:48 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Sun, 19 Oct 2008 16:10:48 -0700 (PDT)
Message-ID: <1bcb7c7f0810191610h4d992715sa43b42d20eeab16@mail.gmail.com>
Date: Mon, 20 Oct 2008 02:10:48 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hiring etiquette
In-Reply-To: <2cda2fc90810191558v6c8436a3s5d5a860b4d88ecf5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com>
	 <48FB79E4.2060400@gmail.com>
	 <2cda2fc90810191558v6c8436a3s5d5a860b4d88ecf5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

How can we get on to that list?

Best,

On Mon, Oct 20, 2008 at 1:58 AM, Hasan Diwan <hasan.diwan@gmail.com> wrote:
> 2008/10/19 Mark Miller <markrmiller@gmail.com>:
>> You might instead limit your email to those that have agreed to be contacted
>> at http://wiki.apache.org/lucene-java/Support
>
> FWIW, the page indicated is immutable.
> --
> Cheers,
> Hasan Diwan <hasan.diwan@gmail.com>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 19 23:20:00 2008
Return-Path: <java-user-return-36702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63170 invoked from network); 19 Oct 2008 23:20:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Oct 2008 23:20:00 -0000
Received: (qmail 895 invoked by uid 500); 19 Oct 2008 23:19:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 859 invoked by uid 500); 19 Oct 2008 23:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 846 invoked by uid 99); 19 Oct 2008 23:19:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 16:19:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 23:18:45 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D928430EFC18; Sun, 19 Oct 2008 17:18:52 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.199] (va-76-1-139-108.dhcp.embarqhsd.net [76.1.139.108])
	by ehatchersolutions.com (Postfix) with ESMTP id AC04630EFC16
	for <java-user@lucene.apache.org>; Sun, 19 Oct 2008 17:18:51 -0600 (MDT)
Message-Id: <495AAE3C-9EA9-4E1B-B61F-852F8951D7CB@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0810191610h4d992715sa43b42d20eeab16@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Hiring etiquette
Date: Sun, 19 Oct 2008 19:18:50 -0400
References: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com> <48FB79E4.2060400@gmail.com> <2cda2fc90810191558v6c8436a3s5d5a860b4d88ecf5@mail.gmail.com> <1bcb7c7f0810191610h4d992715sa43b42d20eeab16@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.0 required=5.0 tests=BAYES_00,
	DNS_FROM_SECURITYSAGE,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

It's a wiki... create an account and add yourself :)		

	Erik

On Oct 19, 2008, at 7:10 PM, Cam Bazz wrote:

> How can we get on to that list?
>
> Best,
>
> On Mon, Oct 20, 2008 at 1:58 AM, Hasan Diwan <hasan.diwan@gmail.com>  
> wrote:
>> 2008/10/19 Mark Miller <markrmiller@gmail.com>:
>>> You might instead limit your email to those that have agreed to be  
>>> contacted
>>> at http://wiki.apache.org/lucene-java/Support
>>
>> FWIW, the page indicated is immutable.
>> --
>> Cheers,
>> Hasan Diwan <hasan.diwan@gmail.com>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 06:20:29 2008
Return-Path: <java-user-return-36703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20507 invoked from network); 20 Oct 2008 06:20:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 06:20:29 -0000
Received: (qmail 66219 invoked by uid 500); 20 Oct 2008 06:20:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65580 invoked by uid 500); 20 Oct 2008 06:20:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65569 invoked by uid 99); 20 Oct 2008 06:20:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Oct 2008 23:20:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.196.101.27] (HELO web59201.mail.re1.yahoo.com) (66.196.101.27)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Oct 2008 06:19:15 +0000
Received: (qmail 67960 invoked by uid 60001); 20 Oct 2008 06:19:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=C14+hXTgrY79rlARU/9H8G+C5jZkhquAA7A8MobKdBp0hEA6lFhCz/y/YQvXxgp4xSlpLz2yAmyy49Kt7vtfU5Qo0aKRN2P6izfoKu2ca3ih2D/YF89c6hwaeaxkAX9Nk2LcSKUeGfx0W/V6Mse/oRi6kH1NM0RoXWFjjKMz0r4=;
X-YMail-OSG: _56GO2AVM1k0ZB3vanCotKpSnzeTfxFx73JUXLqe7P0yiA9pFEKOexIiPBWfds8NJvzT_6JevHi1Qr.3cXMRF3SHIR9PmNmRIaI8twcPVm3xTCjh8haRM27aAQgXLbiJrm5c2V6ZwmMaxAcoLcFRPxynGK4-
Received: from [116.197.178.83] by web59201.mail.re1.yahoo.com via HTTP; Sun, 19 Oct 2008 23:19:52 PDT
X-Mailer: YahooMailWebService/0.7.247.3
Date: Sun, 19 Oct 2008 23:19:52 -0700 (PDT)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Reply-To: techcool.kumar@yahoo.com
Subject: Problem with updating Index continuously
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <278379.67931.qm@web59201.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
   I have requirement of updating search index and it results in creation of lots of index files as well as size is also getting increased. I create index writer with autocommit true and create false

directory = FSDirectory.getDirectory(indexDir);
docWriter = new IndexWriter(directory, true, analyzer, false);

The index gets updated in specified period of time. At the end of update, I use following methods to refresh it 

IndexReader newReader =  reader.reopen();
//Old reader is updated
reader = newReader;

However above steps resulted in creating lots of files.

 segments.gen
 segments_c5
 _4t.cfs
 _5i.cfs
 _5v.cfs
 _5w.cfs

And also lots of duplicate entries keep of increasing. In order to avoid duplicate, I have developed a customized method to remove duplicates in index. However still number and size of index gets increased, though actual update is very few.

Appreciate your help on this.

regards,
RB

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 08:18:48 2008
Return-Path: <java-user-return-36704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54806 invoked from network); 20 Oct 2008 08:18:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 08:18:47 -0000
Received: (qmail 74843 invoked by uid 500); 20 Oct 2008 08:18:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74814 invoked by uid 500); 20 Oct 2008 08:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74803 invoked by uid 99); 20 Oct 2008 08:18:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 01:18:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of carlosrf82@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 08:17:34 +0000
Received: by mu-out-0910.google.com with SMTP id i10so1599637mue.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 01:18:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=mA6fWb+eWUJ5KdI5fMdsNWtUEco2tnPLIanGvmVFNus=;
        b=s25FYHUzJXF/DDyUzW6MqtkhFUCPjr4MZ3ROhIhxUUBcNFIhOfxQNZ/5OEBH9IBmVy
         fvHS5eavwIRs/381pJeA6LeKCEU11YTFO5r4rbySJl06iEWPVEQR6E+rCEVxzMU0aqC2
         db82R3ABwySzsyklX4MwNPW9PanBPZfyO8v/Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=OBrArL1RJAL0CGC9rJJM+TdLMpNDyEawQBBeLAfsJ9uXMJ5fE4R3K5eGcmYd017y83
         s2G2m0dr+GW55k11MIGYU0W/9SwUYYvUM10X7EoHGj2ouVmsPm6ywZ5g6s+ZOzGganYT
         saOIf7vJNKoDiJc6ZBO71MVaJe6aIz+0Zn1SE=
Received: by 10.181.149.7 with SMTP id b7mr773385bko.210.1224490681866;
        Mon, 20 Oct 2008 01:18:01 -0700 (PDT)
Received: by 10.180.203.7 with HTTP; Mon, 20 Oct 2008 01:18:01 -0700 (PDT)
Message-ID: <574b5e9b0810200118u54ae72bex295ed66ec4255271@mail.gmail.com>
Date: Mon, 20 Oct 2008 10:18:01 +0200
From: "=?ISO-8859-1?Q?Carlos_Rodr=EDguez_Fern=E1ndez?=" <carlosrf82@gmail.com>
To: java-user@lucene.apache.org
Subject: TermDocs and "read"
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_141668_15274088.1224490681853"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_141668_15274088.1224490681853
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello:
I have a problem with TermDocs#read operation.

the following code has an incorrect result:

            .....
            int termFreq=0;
            .....
            TermDocs termDocs = indexReader.termDocs(new
Term(((Field)field).name(),termCons));
            int[] freqs = new int[]{0};
            termDocs.read(new int[]{doc}, freqs);
            termFreq+=freqs[0];
            ....

the freqs array always return with a "[1]" for all terms and for all
documents. :S

Can you help me please?

Thanks a lot!
Carlos

------=_Part_141668_15274088.1224490681853--

From java-user-return-36705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 08:28:17 2008
Return-Path: <java-user-return-36705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56917 invoked from network); 20 Oct 2008 08:28:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 08:28:17 -0000
Received: (qmail 83055 invoked by uid 500); 20 Oct 2008 08:28:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83026 invoked by uid 500); 20 Oct 2008 08:28:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83015 invoked by uid 99); 20 Oct 2008 08:28:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 01:28:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of carlosrf82@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 08:27:05 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1884111fkq.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 01:27:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=LiPDx1EFGs+6WbNBwT+nXLJz/x0+wof2yv2bRX4DwjQ=;
        b=BN61F6ikw3Z7cOu5jCWbdxdLcDVA4jYkhcyNN8tlxgMvU22XioUjmWKO6U+U/DMsZy
         AgSJrapjqQ7jTCw2ON0Mp5FcEAhcGYtP9myKwybJsTbqV07QpBbQvc7367RZLaRr3wmg
         aKSuISy5PCk0Srn6wgqQqTUb63qnyX6dy8HT0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=L35VtWebLVbeCbkrGQaf3H9i4ppP4GBPiAv6jcVY4OU7jrJmvqlwNhCE3cJjMqUUlY
         11L4UKD9NgFxcfT1lfdCcTEazXedE9mZzidCYS5oXex4tA4a4VRSdg7FRlQswUCmIM6d
         KBgM5DDLv77uYgUAR2RsTPgIP9Gtx2Iiv4m1g=
Received: by 10.181.144.10 with SMTP id w10mr2554872bkn.30.1224491252591;
        Mon, 20 Oct 2008 01:27:32 -0700 (PDT)
Received: by 10.180.203.7 with HTTP; Mon, 20 Oct 2008 01:27:32 -0700 (PDT)
Message-ID: <574b5e9b0810200127g475abf38g8f14f6bc73c6729d@mail.gmail.com>
Date: Mon, 20 Oct 2008 10:27:32 +0200
From: "=?ISO-8859-1?Q?Carlos_Rodr=EDguez_Fern=E1ndez?=" <carlosrf82@gmail.com>
To: java-user@lucene.apache.org
Subject: TermDocs and "read"
In-Reply-To: <574b5e9b0810200118u54ae72bex295ed66ec4255271@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_141765_19638254.1224491252590"
References: <574b5e9b0810200118u54ae72bex295ed66ec4255271@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_141765_19638254.1224491252590
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello:
I have a problem with TermDocs#read operation.

the following code has an incorrect result:

            .....
            int termFreq=0;
            .....
            TermDocs termDocs = indexReader.termDocs(new
Term(((Field)field).name(),termCons));
            int[] freqs = new int[]{0};
            termDocs.read(new int[]{doc}, freqs);
            termFreq+=freqs[0];
            ....

the freqs array always return with a "[1]" for all terms and for all
documents. :S

Can you help me please?

Thanks a lot!
Carlos

------=_Part_141765_19638254.1224491252590--

From java-user-return-36706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 09:01:55 2008
Return-Path: <java-user-return-36706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63580 invoked from network); 20 Oct 2008 09:01:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 09:01:55 -0000
Received: (qmail 16995 invoked by uid 500); 20 Oct 2008 09:01:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16956 invoked by uid 500); 20 Oct 2008 09:01:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16945 invoked by uid 99); 20 Oct 2008 09:01:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 02:01:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 09:00:41 +0000
Received: by an-out-0708.google.com with SMTP id c37so80365anc.49
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 02:01:07 -0700 (PDT)
Received: by 10.100.196.17 with SMTP id t17mr7994450anf.84.1224493266954;
        Mon, 20 Oct 2008 02:01:06 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c27sm15586381ana.37.2008.10.20.02.01.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 20 Oct 2008 02:01:06 -0700 (PDT)
Message-Id: <354BBA37-542E-429B-B99A-C20A717C204B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <278379.67931.qm@web59201.mail.re1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Problem with updating Index continuously
Date: Mon, 20 Oct 2008 05:01:04 -0400
References: <278379.67931.qm@web59201.mail.re1.yahoo.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


You need to close the old read, only if the newReader is different  
(ie, it was in fact reopened because there were changes in the index).

Not closing the old reader will cause the files it held open to be  
undeletable.

Mike

Cool The Breezer wrote:

> Hi,
>   I have requirement of updating search index and it results in  
> creation of lots of index files as well as size is also getting  
> increased. I create index writer with autocommit true and create false
>
> directory = FSDirectory.getDirectory(indexDir);
> docWriter = new IndexWriter(directory, true, analyzer, false);
>
> The index gets updated in specified period of time. At the end of  
> update, I use following methods to refresh it
>
> IndexReader newReader =  reader.reopen();
> //Old reader is updated
> reader = newReader;
>
> However above steps resulted in creating lots of files.
>
> segments.gen
> segments_c5
> _4t.cfs
> _5i.cfs
> _5v.cfs
> _5w.cfs
>
> And also lots of duplicate entries keep of increasing. In order to  
> avoid duplicate, I have developed a customized method to remove  
> duplicates in index. However still number and size of index gets  
> increased, though actual update is very few.
>
> Appreciate your help on this.
>
> regards,
> RB
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 09:07:04 2008
Return-Path: <java-user-return-36707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64379 invoked from network); 20 Oct 2008 09:07:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 09:07:04 -0000
Received: (qmail 23570 invoked by uid 500); 20 Oct 2008 09:06:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23540 invoked by uid 500); 20 Oct 2008 09:06:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23529 invoked by uid 99); 20 Oct 2008 09:06:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 02:06:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 09:05:50 +0000
Received: by yx-out-2324.google.com with SMTP id 3so247441yxj.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 02:06:27 -0700 (PDT)
Received: by 10.151.156.12 with SMTP id i12mr11846770ybo.203.1224493587186;
        Mon, 20 Oct 2008 02:06:27 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id a30sm9330248rnb.10.2008.10.20.02.06.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 20 Oct 2008 02:06:26 -0700 (PDT)
Message-Id: <8EB0CF47-59FF-43D2-9E7F-7D46F9F27DC6@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <574b5e9b0810200127g475abf38g8f14f6bc73c6729d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: TermDocs and "read"
Date: Mon, 20 Oct 2008 05:06:25 -0400
References: <574b5e9b0810200118u54ae72bex295ed66ec4255271@mail.gmail.com> <574b5e9b0810200127g475abf38g8f14f6bc73c6729d@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It seems like you are trying to use the TermDocs iterator to load the =20=

term freq for that particular document (doc)?

It doesn't work that way -- instead, it simply iterates over all =20
documents that this term occurred in.  (Ie it will replace the doc in =20=

the int[] that you passed in, with the next doc in the term's postings).

If you only want to read one doc at a time, you should its next() =20
method to advance, and then call doc() and freq().  When next() =20
returns false, it means there are no more documents, so you should =20
then break out of your loop.

Mike

Carlos Rodr=EDguez Fern=E1ndez wrote:

> Hello:
> I have a problem with TermDocs#read operation.
>
> the following code has an incorrect result:
>
>            .....
>            int termFreq=3D0;
>            .....
>            TermDocs termDocs =3D indexReader.termDocs(new
> Term(((Field)field).name(),termCons));
>            int[] freqs =3D new int[]{0};
>            termDocs.read(new int[]{doc}, freqs);
>            termFreq+=3Dfreqs[0];
>            ....
>
> the freqs array always return with a "[1]" for all terms and for all
> documents. :S
>
> Can you help me please?
>
> Thanks a lot!
> Carlos


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 09:22:13 2008
Return-Path: <java-user-return-36708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67739 invoked from network); 20 Oct 2008 09:22:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 09:22:12 -0000
Received: (qmail 39623 invoked by uid 500); 20 Oct 2008 09:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39241 invoked by uid 500); 20 Oct 2008 09:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39230 invoked by uid 99); 20 Oct 2008 09:22:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 02:22:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 09:21:00 +0000
Received: by gxk6 with SMTP id 6so3348056gxk.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 02:21:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=J/RsoDbQnHr0kvrgKQh9CrFZixco+Rq8JKSW4rZ3+50=;
        b=lzya6absKHFF/5/GamGRrdT7ZAimiOoKHqlZ2/3W0DyGou+9mSdSjM7w2xYZBUYUw5
         CWO7QRZrsNUIMK/zPMhlwRqciaEMAhlKr4FAvPBP/AEyaXw5A0WrhdFGkscSbUs91OeK
         1cqQoqlGKrINhJp5PyAW2Qkwsk93F2mHNSQqU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=klyDisYBRX18i7ozcj6noLGLOJoRkjc+R/7QIe0JzSNPFFr/2tHE7M+XR81cFrDafw
         UmM30hTkKVFm2IgVOvuDoNJkT3zH6+6CE2rNAn42u8/N+sg1v3wimHo8u0svtkFjH52f
         aFBQya8QrkmW5O4P9YQx9IFVm6bfm+ZoHjtZQ=
Received: by 10.151.112.17 with SMTP id p17mr10655672ybm.59.1224494498381;
        Mon, 20 Oct 2008 02:21:38 -0700 (PDT)
Received: by 10.151.7.16 with HTTP; Mon, 20 Oct 2008 02:21:38 -0700 (PDT)
Message-ID: <dba8f29c0810200221g74cfbcb3na39880a1a5829414@mail.gmail.com>
Date: Mon, 20 Oct 2008 10:21:38 +0100
From: "Richard Marr" <richard.marr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hiring etiquette
In-Reply-To: <62eb01c93231$9d2d2e60$0301a8c0@tmesa.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48FB79E4.2060400@gmail.com>
	 <62eb01c93231$9d2d2e60$0301a8c0@tmesa.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> in this day/time, when you don't know if your job is safe next week, who's
> really going to frown upon a potentially serious project/offer...
>
> just be cool on the spamming aspect, and you should be ok!!


Thanks for the feedback everybody.

If there's anybody in or near London that might be interested in a
position in a funded start-up working on visual comparison / image
search, get in touch with me at this address.

Thanks for your time.

Rich

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 09:41:16 2008
Return-Path: <java-user-return-36709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79022 invoked from network); 20 Oct 2008 09:41:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 09:41:16 -0000
Received: (qmail 58056 invoked by uid 500); 20 Oct 2008 09:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57943 invoked by uid 500); 20 Oct 2008 09:41:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57904 invoked by uid 99); 20 Oct 2008 09:41:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 02:41:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of carlosrf82@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 09:39:58 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1912433fkq.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 02:40:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=aE+cRlPBUQshARoFuj6GCl6LYP95eievbOx6d2Rf7uY=;
        b=nGbQX8bjhht1YYn5RugCUFHXvR5uGJRQTIEzwpbatIwy6/9tp0VgqL7I+WZGQdRmxU
         XUOWPN/Dk3vm47NS5ReYFEBFKPv7vTX8M0SewH8ppIN9b/963hoYSMf1XpzlbXcQsO1+
         sf24lPheUKvTlPg2pu39G2E4Jg6Yk5iTBwQ3w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=tsAjW64Xw3mJVqNV5sJLk+zmkVGXAmXbgTa03mvkv3WsiDE3UcaG0DLJ2ewIuaYZUE
         z4GC/oKK6V++HCqrEO7DcGKhTFV4Q/zhg2ZKVjOtg/gOfaeUchZk/JyRI9W84wZMcZFx
         iJJcNBZjhN7fCqMdBUJMOAHEMODcJOxLzDeEc=
Received: by 10.181.204.4 with SMTP id g4mr789364bkq.114.1224495625515;
        Mon, 20 Oct 2008 02:40:25 -0700 (PDT)
Received: by 10.180.203.7 with HTTP; Mon, 20 Oct 2008 02:40:25 -0700 (PDT)
Message-ID: <574b5e9b0810200240s41252ba6pc5c8b5aa6d76e7c4@mail.gmail.com>
Date: Mon, 20 Oct 2008 11:40:25 +0200
From: "=?ISO-8859-1?Q?Carlos_Rodr=EDguez_Fern=E1ndez?=" <carlosrf82@gmail.com>
To: java-user@lucene.apache.org
Subject: About TermQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_142821_23624134.1224495625508"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_142821_23624134.1224495625508
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How can I get the boost value of the subqueries "TermQuery" from a
BooleanQuery?
In the Similarity ecuation
http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/search/Similarity.html
I don't know how I can get the t.getBoost() value.

Could you help me?

I need it because I need to recalculate the scores of the documents which
were got from differents crawls. MultiReader is not the solution for me :).

Thanks!
Carlos

------=_Part_142821_23624134.1224495625508--

From java-user-return-36710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 09:42:13 2008
Return-Path: <java-user-return-36710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79756 invoked from network); 20 Oct 2008 09:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 09:42:13 -0000
Received: (qmail 62797 invoked by uid 500); 20 Oct 2008 09:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62767 invoked by uid 500); 20 Oct 2008 09:42:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62756 invoked by uid 99); 20 Oct 2008 09:42:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 02:42:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.196.101.31] (HELO web59205.mail.re1.yahoo.com) (66.196.101.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Oct 2008 09:41:00 +0000
Received: (qmail 42319 invoked by uid 60001); 20 Oct 2008 09:40:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=2ZhtNypMVC/V5ZTft5NsjkSxoVLKK53tfX/4XiBAK8kFKvab2qEIUE59w9d/SNGUsL4aWEOzdrdyHv7z+od9VgKKeA81aLamii8EuLlrsRmWVMnKrEikCkfLVPnfWnCNCTAS8HGQlKLM1CTvJI1mcp0gbP8KwKLpcKrXDzJPCqA=;
X-YMail-OSG: wUvrnEcVM1nDu8QwMM1Ozqx2.IF0rWa2ZyAR.JkNC4SMc2jj_mCmbBdObumqZuKOXljkusc1Ke.eyY8Op28Jp9tzqnwBbgJjgTR7hjyH5k4wP03UF8hyus5BknS_C3jV5wKyetKv6iLOqcImei5yX2wQayA-
Received: from [116.197.178.83] by web59205.mail.re1.yahoo.com via HTTP; Mon, 20 Oct 2008 02:40:36 PDT
X-Mailer: YahooMailWebService/0.7.247.3
Date: Mon, 20 Oct 2008 02:40:36 -0700 (PDT)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Reply-To: techcool.kumar@yahoo.com
Subject: Re: Problem with updating Index continuously
To: java-user@lucene.apache.org
In-Reply-To: <354BBA37-542E-429B-B99A-C20A717C204B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <899229.41516.qm@web59205.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> You need to close the old read, only if the newReader is
> different  
> (ie, it was in fact reopened because there were changes in
> the index).

I tried closing but getting "index already closed" error.

IndexReader newReader =  reader.reopen();
			if (newReader != reader) {
//			    reader was reopened
			   reader.close(); 
			 }
			
			reader = newReader;

I think when old reader is assigned with new reader, somehow it is not successful. can you think, these could be any problem?

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 09:51:31 2008
Return-Path: <java-user-return-36711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84489 invoked from network); 20 Oct 2008 09:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 09:51:31 -0000
Received: (qmail 73532 invoked by uid 500); 20 Oct 2008 09:51:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73500 invoked by uid 500); 20 Oct 2008 09:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73489 invoked by uid 99); 20 Oct 2008 09:51:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 02:51:26 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.106.56] (HELO smtp145.mail.mud.yahoo.com) (209.191.106.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Oct 2008 09:50:14 +0000
Received: (qmail 33971 invoked from network); 20 Oct 2008 09:50:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=vGCUc3p7bcYfGE6f5EoVBvwTcvXy4J83kzbxCFERLXJwoa5l5hygWq/Ni7jQdXy3FxVrluWY+Y6h+F+Syzgvan7iVX8aRyuoWJwhTvgloZyPQFyQ5gCs3sPMJzSi0hiygGZZgOCw3z+inJawGWNmdChvl117dA5W/CZ7FjkrLWI=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp145.mail.mud.yahoo.com with SMTP; 20 Oct 2008 09:50:50 -0000
X-YMail-OSG: TN7kASQVM1nViKmjORQLztaQTNDfKw8oYitVAazYAlnFw71UT6y4J3LGqe1KTcnkbg1fOmopqYpzXQlTZC7hqGuq80DhpeA5go75rJvYrlGyCxc_PcxdUA7iGMO.JBrG0tr6o1i_NiNdj5u8ShmcIQD1
X-Yahoo-Newman-Property: ymail-3
Message-ID: <039301c93299$55ad84f0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <prabina007@yahoo.co.in>,
	<java-user@lucene.apache.org>,
	<java-user-owner@lucene.apache.org>
References: <416694.60495.qm@web8314.mail.in.yahoo.com>
Subject: Re: I am not able to run Lucene 2.4 Demo
Date: Mon, 20 Oct 2008 15:20:46 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_038F_01C932C7.6D18EAC0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_038F_01C932C7.6D18EAC0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

Could you give me full stack trace.

Also provide the output messges displayed on the console.

Regards
Ganesh
  ----- Original Message -----=20
  From: prabina pattanayak=20
  To: java-user@lucene.apache.org ; java-user-owner@lucene.apache.org ; =
Ganesh=20
  Sent: Saturday, October 18, 2008 10:40 AM
  Subject: Re: I am not able to run Lucene 2.4 Demo


        what i observed is that it creates the index folder, but that is =
empty.
        it should have one/two file named segments.gen and =
segments_x(any no.) .
        but these two files are not being created inside the index =
folder.
        that's why it is throwing the exception message:
        no segments* file found in =
org.apache.lucene.store.FSDirectory@E:\prabina\lucene-2.4demo\index: =
files :

        Regards,
        Prabina
        --- On Thu, 16/10/08, Ganesh <emailgane@yahoo.co.in> wrote:

          From: Ganesh <emailgane@yahoo.co.in>
          Subject: Re: I am not able to run Lucene 2.4 Demo
          To: java-user@lucene.apache.org, prabina007@yahoo.co.in, =
java-user-owner@lucene.apache.org
          Date: Thursday, 16 October, 2008, 12:05 PM


Hello prabina,

I worked fine in windows. Could you provide the details of exception and =

also the System.out messages printed by the application.

Index folder will be created in the current directory. When you execute =
java=20
org.apache.lucene.demo.IndexFiles <root directory>, the list of files=20
available in the root directory will get indexed. In your case it is=20
"E:\prabina\lucene-2.4demo\src"

I have tried the following and it worked.
D:\Program Files\lucene-2.4.0>java -cp=20
"lucene-demos-2.4.0.jar;lucene-core-2.4.0.jar"=20
org.apache.lucene.demo.IndexFiles "D:\Program
Files\lucene-2.4.0\src"

Regards
Ganesh


----- Original Message -----=20
From: "prabina pattanayak" <prabina007@yahoo.co.in>
To: <java-user@lucene.apache.org>;
<java-user-owner@lucene.apache.org>
Sent: Wednesday, October 15, 2008 10:42 AM
Subject: I am not able to run Lucene 2.4 Demo


Hi All,
i am a beginner to Lucene.
and i am trying to use Lucene 2.4.
when i have set lucene-core-2.4.0.jar & lucene-demos-2.4.0.jar in my=20
CLASSPATH. and trying to run:
java org.apache.lucene.demo.IndexFiles
E:\prabina\lucene-2.4demo\src
it shows the error:
caught a class java.io.FileNotFoundException
with message: no segments* file found in=20
org.apache.lucene.store.FSDirectory@E:\prabina\lucene-2.4demo\index:
files:
but it creates the index folder in my current directory. but the index=20
folder is empty. no segments files are there.

plz, help me out from this problem ASAP.




      Add more friends to your messenger and enjoy! Go to=20
http://messenger.yahoo.com/invite/=20

Send instant messages to your online friends =
http://in.messenger.yahoo.com=20
=20

  Send free SMS to your Friends on Mobile from your Yahoo! Messenger. =
Download Now! http://messenger.yahoo.com/download.php
------=_NextPart_000_038F_01C932C7.6D18EAC0--

Send instant messages to your online friends http://in.messenger.yahoo.com 

From java-user-return-36712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 10:08:18 2008
Return-Path: <java-user-return-36712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95205 invoked from network); 20 Oct 2008 10:08:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 10:08:18 -0000
Received: (qmail 95078 invoked by uid 500); 20 Oct 2008 10:08:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94826 invoked by uid 500); 20 Oct 2008 10:08:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94815 invoked by uid 99); 20 Oct 2008 10:08:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 03:08:12 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 10:07:03 +0000
Received: by wx-out-0506.google.com with SMTP id h28so805747wxd.20
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 03:07:30 -0700 (PDT)
Received: by 10.70.39.10 with SMTP id m10mr8471184wxm.2.1224497250394;
        Mon, 20 Oct 2008 03:07:30 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id h8sm7244772wxd.16.2008.10.20.03.07.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 20 Oct 2008 03:07:29 -0700 (PDT)
Message-Id: <C806D615-1389-42FF-B31E-90107E405C68@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <899229.41516.qm@web59205.mail.re1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Problem with updating Index continuously
Date: Mon, 20 Oct 2008 06:07:27 -0400
References: <899229.41516.qm@web59205.mail.re1.yahoo.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Is it possible you are closing it somewhere else?

This code fragment looks correct to me.

Mike

Cool The Breezer wrote:

>> You need to close the old read, only if the newReader is
>> different
>> (ie, it was in fact reopened because there were changes in
>> the index).
>
> I tried closing but getting "index already closed" error.
>
> IndexReader newReader =  reader.reopen();
> 			if (newReader != reader) {
> //			    reader was reopened
> 			   reader.close();
> 			 }
> 			
> 			reader = newReader;
>
> I think when old reader is assigned with new reader, somehow it is  
> not successful. can you think, these could be any problem?
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 10:10:02 2008
Return-Path: <java-user-return-36713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96723 invoked from network); 20 Oct 2008 10:10:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 10:10:01 -0000
Received: (qmail 2206 invoked by uid 500); 20 Oct 2008 10:09:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2186 invoked by uid 500); 20 Oct 2008 10:09:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2175 invoked by uid 99); 20 Oct 2008 10:09:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 03:09:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.215] (HELO smtp105.mail.mud.yahoo.com) (209.191.85.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Oct 2008 10:08:43 +0000
Received: (qmail 27096 invoked from network); 20 Oct 2008 10:08:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=PFePhpeGDc7wJvEbin5vWPaFgdu5oL+xsbcWTXFiosLMspVBjnEPYY9fXEP5HDFnMVzLRSAxLlEQ2y9SoUd2ZMsFI7EHKdNtlxCHMjVotPTVsTK786iNu6iY5vgM4nDrvztwHuNH/4aI5xUvBvvP731YqeAzvE/fINyTJ2ILKVs=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp105.mail.mud.yahoo.com with SMTP; 20 Oct 2008 10:08:19 -0000
X-YMail-OSG: 5bA2IxMVM1li0aEE0qwsBkq0I1a8.INZrDTLfPILU2671QQEw_hR8bTOwwGizMkwEVRrcrJurTw8d28gOtZCqPsnxNklWTqn48ty5d7de8rrmCLzGhOK.rMZG..J7H70CbMO_Grf6Z1kyQor1UC4Kq9EVipPYw7q1eoAJ.c-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <03ee01c9329b$c6dde3c0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Merge index will maintain index order
Date: Mon, 20 Oct 2008 15:38:13 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I am planning to merge two or more indexes. Once merged, will the DB 
maintain the same index order as before merge?
I am doing sorting on Index Order as sorting on date-time takes more amount 
of RAM. If i merge the index DB, will the same index order be maintained or 
the indexes will be overlapped?

Regards
Ganesh

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 10:13:34 2008
Return-Path: <java-user-return-36714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1278 invoked from network); 20 Oct 2008 10:13:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 10:13:34 -0000
Received: (qmail 9889 invoked by uid 500); 20 Oct 2008 10:13:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9726 invoked by uid 500); 20 Oct 2008 10:13:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9715 invoked by uid 99); 20 Oct 2008 10:13:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 03:13:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.133.51.241] (HELO mail.hippo.nl) (213.133.51.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 10:12:20 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Hiring etiquette
Date: Mon, 20 Oct 2008 12:12:54 +0200
Message-ID: <F8E386B54CE3E6408F3A32ABB9A7908A015CAF72@hai02.hippointern.lan>
In-Reply-To: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Hiring etiquette
Thread-Index: AckyEVyei0HIGPp/RqCe20GaBsaK8wAisbug
References: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com>
From: "Ard Schrijvers" <a.schrijvers@onehippo.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Rich,

There is actually also a specific list indeed for it, jobs@apache.org,
but it is a really low traffic list I must admit, most likely not read
at all by the people you are looking for...though, officially, it is the
list to use :-)

Ard


> Hi all,
>=20
> Is there a mailing-list-appropriate way to hire coders with=20
> Lucene experience? I don't want to just spam the list because=20
> I don't want to crap where I live. I'm a programmer not a=20
> recruiter if that makes any difference.
>=20
> Cheers,
>=20
> Rich
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 10:16:10 2008
Return-Path: <java-user-return-36715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3748 invoked from network); 20 Oct 2008 10:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 10:16:10 -0000
Received: (qmail 14744 invoked by uid 500); 20 Oct 2008 10:16:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14436 invoked by uid 500); 20 Oct 2008 10:16:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14425 invoked by uid 99); 20 Oct 2008 10:16:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 03:16:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.219] (HELO smtp109.mail.mud.yahoo.com) (209.191.85.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Oct 2008 10:14:51 +0000
Received: (qmail 91976 invoked from network); 20 Oct 2008 10:14:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=hgm7/x/n9BQmAl+8Vu2DQAK5V2/RgeJnen9hUpatFoW7fyX6r1WTMCggD38dmUitRW5Rm4929foWxrmdpamI1qTpb7ZU+xYoB/ataWEUcEf9gzZASBsRZ3JHtwzYxbA+tPfN15OuabFAnHMq3/c37QGDIRYAfPLjKq8+t2tEaPQ=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp109.mail.mud.yahoo.com with SMTP; 20 Oct 2008 10:14:26 -0000
X-YMail-OSG: mvUJAgIVM1mymOFQAQOJ7K0Bls6WcaAgtURp_UK1h8OfhnR7lV4CetqxmUjYNc537bPaLrEnAzOk0DKJgfj2gf.80WucV8JXIHSoHmW4T3r8EFhO17GYTLPF.XPd72_rQA8-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <03ef01c9329c$a1ab39d0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: How to avoid Index corruption
Date: Mon, 20 Oct 2008 15:44:18 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I am using Lucene 2.3.2 in Windows and Linux. I have to do incremental 
indexing.

I am worried about the corruption of index in case of power failure or 
forceful restart the server or application crash. How to avoid the 
situitation of corruption.
Any tips would be grately appricated. I think most of folks might have done 
this before.

Does Lucene 2.4 handles this better?

Regards
Ganesh 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 10:27:17 2008
Return-Path: <java-user-return-36716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11021 invoked from network); 20 Oct 2008 10:27:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 10:27:16 -0000
Received: (qmail 30883 invoked by uid 500); 20 Oct 2008 10:27:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30815 invoked by uid 500); 20 Oct 2008 10:27:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30804 invoked by uid 99); 20 Oct 2008 10:27:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 03:27:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shore.cloud@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 10:26:00 +0000
Received: by qw-out-2122.google.com with SMTP id 5so498661qwi.53
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 03:26:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=C9OVMkjJTd9/HlcnHZJXbnbQSu6wJWFMIU22yNq6ffk=;
        b=KQLnkK3XidW5k+rjUyNzi5CP91r1WfiWYk6BaBCoUPagF3sXnFMFbBg4F8vwoEt4sF
         obRaWxCpy3yOChyKE3mnHqp0x4HelAQ8GNJ9qAcUEtBr2X3Xi09mWhxgjwqEUVrDH/QB
         ufrxH+8WyR28rtptnUmch4XZ6bW/2hCvGlSVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jb2WCBp6P8ZIJ8R3ntEGQJvAUvtlz1LtrkTDGsrI7uf1s5jeiKtV08YFkOnH5sYWbC
         hErj/fv9ufj5+AMdih1VVwNblykWD0PEad1gx5koxF8R6dLbYwhsqMWwnLkbsg3U3ykU
         dxzvY4+qO/n7yOFnrl5eGw9ZN4GnqsplC9WAI=
Received: by 10.215.15.18 with SMTP id s18mr10193511qai.50.1224498397922;
        Mon, 20 Oct 2008 03:26:37 -0700 (PDT)
Received: by 10.214.60.8 with HTTP; Mon, 20 Oct 2008 03:26:37 -0700 (PDT)
Message-ID: <ae7ef6650810200326g33b2a97ek56f5dee94064541c@mail.gmail.com>
Date: Mon, 20 Oct 2008 18:26:37 +0800
From: "Mr Shore" <shore.cloud@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with updating Index continuously
In-Reply-To: <C806D615-1389-42FF-B31E-90107E405C68@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76590_6251800.1224498397914"
References: <899229.41516.qm@web59205.mail.re1.yahoo.com>
	 <C806D615-1389-42FF-B31E-90107E405C68@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_76590_6251800.1224498397914
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mysql supports freetext search,why still stick on nutch?

2008/10/20 Michael McCandless <lucene@mikemccandless.com>

>
> Is it possible you are closing it somewhere else?
>
> This code fragment looks correct to me.
>
> Mike
>
> Cool The Breezer wrote:
>
>  You need to close the old read, only if the newReader is
>>> different
>>> (ie, it was in fact reopened because there were changes in
>>> the index).
>>>
>>
>> I tried closing but getting "index already closed" error.
>>
>> IndexReader newReader =  reader.reopen();
>>                        if (newReader != reader) {
>> //                          reader was reopened
>>                           reader.close();
>>                         }
>>
>>                        reader = newReader;
>>
>> I think when old reader is assigned with new reader, somehow it is not
>> successful. can you think, these could be any problem?
>>
>> __________________________________________________
>> Do You Yahoo!?
>> Tired of spam?  Yahoo! Mail has the best spam protection around
>> http://mail.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_76590_6251800.1224498397914--

From java-user-return-36717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 10:32:49 2008
Return-Path: <java-user-return-36717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14017 invoked from network); 20 Oct 2008 10:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 10:32:49 -0000
Received: (qmail 43824 invoked by uid 500); 20 Oct 2008 10:32:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43723 invoked by uid 500); 20 Oct 2008 10:32:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43712 invoked by uid 99); 20 Oct 2008 10:32:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 03:32:42 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 10:31:33 +0000
Received: by an-out-0708.google.com with SMTP id c37so81455anc.49
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 03:32:00 -0700 (PDT)
Received: by 10.100.255.10 with SMTP id c10mr1397168ani.108.1224498720708;
        Mon, 20 Oct 2008 03:32:00 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b12sm14372446ana.14.2008.10.20.03.31.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 20 Oct 2008 03:31:59 -0700 (PDT)
Message-Id: <B5E95805-2803-4526-9E93-B3A79F3B8DF0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <03ef01c9329c$a1ab39d0$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to avoid Index corruption
X-Priority: 3
Date: Mon, 20 Oct 2008 06:31:58 -0400
References: <03ef01c9329c$a1ab39d0$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


If the application (JVM) crashes or is killed or otherwise  
ungracefully shut down, it should never corrupt the Lucene index.

The only known "normal" (ie, assuming no errors in your hard drives,  
bugs in the OS/filesystem, etc.) cases where corruption may occur is  
if power is lost to the machine or the OS crashes.  In such cases,  
written bytes may still be cached in RAM and not flushed to stable  
storage, which can lead to corruption.

2.4.0 fixes that case, by explicitly sync'ing all files in the index  
for a given commit before removing the past commits.

I would recommend upgrading to 2.4.0 to avoid index corruption on  
power loss or OS crash.

Mike

Ganesh wrote:

> Hello all,
>
> I am using Lucene 2.3.2 in Windows and Linux. I have to do  
> incremental indexing.
>
> I am worried about the corruption of index in case of power failure  
> or forceful restart the server or application crash. How to avoid  
> the situitation of corruption.
> Any tips would be grately appricated. I think most of folks might  
> have done this before.
>
> Does Lucene 2.4 handles this better?
>
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 10:35:28 2008
Return-Path: <java-user-return-36718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15424 invoked from network); 20 Oct 2008 10:35:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 10:35:27 -0000
Received: (qmail 48775 invoked by uid 500); 20 Oct 2008 10:35:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48592 invoked by uid 500); 20 Oct 2008 10:35:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48580 invoked by uid 99); 20 Oct 2008 10:35:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 03:35:21 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 10:34:12 +0000
Received: by gxk6 with SMTP id 6so3392793gxk.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 03:34:49 -0700 (PDT)
Received: by 10.101.69.6 with SMTP id w6mr1821849ank.140.1224498889716;
        Mon, 20 Oct 2008 03:34:49 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b19sm14394605ana.19.2008.10.20.03.34.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 20 Oct 2008 03:34:48 -0700 (PDT)
Message-Id: <EDAAF5F1-58AE-4240-BFDD-F1DD409FBFBF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <03ee01c9329b$c6dde3c0$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Merge index will maintain index order
X-Priority: 3
Date: Mon, 20 Oct 2008 06:34:47 -0400
References: <03ee01c9329b$c6dde3c0$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


By merge you mean using addIndexes*, right?

Those methods logically concatenate the indices in order by doc ID.   
So the original docs in your index will keep all their docIDs, and the  
newly added indices are assigned docIDs after that, in the order they  
were added.

So the final index will only be chronologically ordered by doc ID only  
if the indexes you added were all ordered chronologically by docID,  
and after all docs in the original index.

Mike

Ganesh wrote:

> Hello all,
>
> I am planning to merge two or more indexes. Once merged, will the DB  
> maintain the same index order as before merge?
> I am doing sorting on Index Order as sorting on date-time takes more  
> amount of RAM. If i merge the index DB, will the same index order be  
> maintained or the indexes will be overlapped?
>
> Regards
> Ganesh
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 10:41:35 2008
Return-Path: <java-user-return-36719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22793 invoked from network); 20 Oct 2008 10:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 10:41:34 -0000
Received: (qmail 59194 invoked by uid 500); 20 Oct 2008 10:41:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58086 invoked by uid 500); 20 Oct 2008 10:41:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58071 invoked by uid 99); 20 Oct 2008 10:41:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 03:41:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 64.233.170.185 as permitted sender)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 10:40:18 +0000
Received: by rn-out-0910.google.com with SMTP id j71so545565rne.4
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 03:40:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=i281YxctIJYK6rj43IGh4V5nGsfmSCEE2cSQNMUgZUI=;
        b=bVffxcfG0GnzbxYnY1NyBbTfrbLHkQSkSqcoa6GzXBIpccmihI05pP+KSrkXwtt1Px
         +pSWeNn/JV9SvTfYn8ROG52KBAlQ5GIEW1ZkbQ9wyAyhMFke0BxWYoOzasjsB7igYSn2
         vS0ENeTZwt7IxXo98smvebAsKglERnqseabnU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Ed8a6M9rFhRUcPS3wQeZmHvS9HTjl9HiMX4dJk9dOBFYztXPQW3V20WPZmvgpresln
         KjywOZ2MseUG4ZEkEZgMtLCzLIsQXuvoUyapYl1iK135lU4Qu1685fwYbEi0RNsLak7v
         o95wnETtYDKj9g9MtZthwlbmnMXg86/hYIWbQ=
Received: by 10.150.147.9 with SMTP id u9mr4905064ybd.96.1224499255624;
        Mon, 20 Oct 2008 03:40:55 -0700 (PDT)
Received: by 10.151.7.16 with HTTP; Mon, 20 Oct 2008 03:40:55 -0700 (PDT)
Message-ID: <dba8f29c0810200340q45eca939w270f71cfdfe708e2@mail.gmail.com>
Date: Mon, 20 Oct 2008 11:40:55 +0100
From: "Richard Marr" <richard.marr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hiring etiquette
In-Reply-To: <F8E386B54CE3E6408F3A32ABB9A7908A015CAF72@hai02.hippointern.lan>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com>
	 <F8E386B54CE3E6408F3A32ABB9A7908A015CAF72@hai02.hippointern.lan>
X-Virus-Checked: Checked by ClamAV on apache.org

Ah, okay.

Thanks for the advice Ard. I'll use that list in future.

Anybody who is annoyed by my hiring notice is quite welcome to get in
touch with me and I'll buy them a beer or something if and when they
come through London. Oh dear, spamming _and_ bribery in one day. My
moral fibre is looking decidedly patchy  :o)

Back on-topic:

Is there a resource (wiki page or similar) that details common causes
of Lucene index corruption? I'm having issues merging indexes using
indexWriter.addIndexes().

All the best,

Rich



2008/10/20 Ard Schrijvers <a.schrijvers@onehippo.com>:
> Hello Rich,
>
> There is actually also a specific list indeed for it, jobs@apache.org,
> but it is a really low traffic list I must admit, most likely not read
> at all by the people you are looking for...though, officially, it is the
> list to use :-)
>
> Ard
>
>
>> Hi all,
>>
>> Is there a mailing-list-appropriate way to hire coders with
>> Lucene experience? I don't want to just spam the list because
>> I don't want to crap where I live. I'm a programmer not a
>> recruiter if that makes any difference.
>>
>> Cheers,
>>
>> Rich
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Richard Marr
richard.marr@gmail.com
07976 910 515

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 11:28:50 2008
Return-Path: <java-user-return-36720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40086 invoked from network); 20 Oct 2008 11:28:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 11:28:50 -0000
Received: (qmail 5715 invoked by uid 500); 20 Oct 2008 11:28:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5673 invoked by uid 500); 20 Oct 2008 11:28:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5662 invoked by uid 99); 20 Oct 2008 11:28:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 04:28:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 11:27:36 +0000
Received: by gxk6 with SMTP id 6so3432620gxk.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 04:27:13 -0700 (PDT)
Received: by 10.100.164.20 with SMTP id m20mr1177123ane.97.1224502033351;
        Mon, 20 Oct 2008 04:27:13 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c20sm15967021ana.21.2008.10.20.04.27.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 20 Oct 2008 04:27:12 -0700 (PDT)
Message-Id: <4F296269-9F89-48C3-B94C-0ADB802AFF60@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <dba8f29c0810200340q45eca939w270f71cfdfe708e2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Hiring etiquette
Date: Mon, 20 Oct 2008 07:27:10 -0400
References: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com> <F8E386B54CE3E6408F3A32ABB9A7908A015CAF72@hai02.hippointern.lan> <dba8f29c0810200340q45eca939w270f71cfdfe708e2@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Richard Marr wrote:

> I'm having issues merging indexes using
> indexWriter.addIndexes().

Can you post details of what you're hitting?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 12:59:22 2008
Return-Path: <java-user-return-36721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86737 invoked from network); 20 Oct 2008 12:59:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 12:59:22 -0000
Received: (qmail 91331 invoked by uid 500); 20 Oct 2008 12:59:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91296 invoked by uid 500); 20 Oct 2008 12:59:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91285 invoked by uid 99); 20 Oct 2008 12:59:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 05:59:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.aristov@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 12:58:10 +0000
Received: by yx-out-2324.google.com with SMTP id 3so259362yxj.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 05:58:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=WEUqDnhz0nylPsxdpBjx6/N156g4vlFlTtkE4eWAOTE=;
        b=DeQfOqcARxEFZV6wJ8u2fURFwBGCDELVotB+MCJoSQFIHIonmhZ+tNS7Ch/NLApH1g
         Btg+7AvrprauThLfb7JsZvE7Utpv0fjFmoybVY6nazQMUAZifawN9usqT0Bt1+S8T4+2
         6FR53h90t6A6mhtKEWxt59br5c8Z6sBZ1lx9w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=dTRiYmQdckjuk79hpNwHytsiDpd1frXvzzeXXBYXK8QVYeP4IkWcgzYArYG/mhvjhk
         u/pGhLwlJMnAmbURo4NKoC7bw6/X/pwAeQ1xKCmk8aFY2mS2Z1cPDb+eHiXDMrAL2YBb
         YNq+1XEXEBsWh2A8g2H1jIw75npqvngV9SwJU=
Received: by 10.142.154.20 with SMTP id b20mr3044574wfe.99.1224507517745;
        Mon, 20 Oct 2008 05:58:37 -0700 (PDT)
Received: by 10.142.252.20 with HTTP; Mon, 20 Oct 2008 05:58:37 -0700 (PDT)
Message-ID: <11975c90810200558m2301021aib391b51ff2428e67@mail.gmail.com>
Date: Mon, 20 Oct 2008 16:58:37 +0400
From: "Alexander Aristov" <alexander.aristov@gmail.com>
To: java-user@lucene.apache.org
Subject: robots.txt
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102553_3269950.1224507517751"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_102553_3269950.1224507517751
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Just wonder if Nutch takes into consideration rules from the robots.txt file
while crawling a site.

-- 
Best Regards
Alexander Aristov

------=_Part_102553_3269950.1224507517751--

From java-user-return-36722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 13:12:25 2008
Return-Path: <java-user-return-36722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94246 invoked from network); 20 Oct 2008 13:12:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 13:12:23 -0000
Received: (qmail 7491 invoked by uid 500); 20 Oct 2008 13:12:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7457 invoked by uid 500); 20 Oct 2008 13:12:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7096 invoked by uid 99); 20 Oct 2008 13:12:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 06:12:17 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 13:11:05 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 9EC31E24BD
	for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 06:11:40 -0700 (PDT)
Message-Id: <D4B9E1E0-DCAA-40B5-A75E-13EF1FA7C57F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <574b5e9b0810200240s41252ba6pc5c8b5aa6d76e7c4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: About TermQuery
Date: Mon, 20 Oct 2008 09:11:38 -0400
References: <574b5e9b0810200240s41252ba6pc5c8b5aa6d76e7c4@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You should be able to get the clauses from the BooleanQuery: =
http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/search/Bool=
eanQuery.html#clauses()

And, from there, you can do instanceof to determine the query type, =20
eventually getting to a TermQuery, where you can do: =
http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/search/Quer=
y.html#getBoost()

Every Query has a boost, thus, you can call Query.getBoost().

-Grant

On Oct 20, 2008, at 5:40 AM, Carlos Rodr=EDguez Fern=E1ndez wrote:

> How can I get the boost value of the subqueries "TermQuery" from a
> BooleanQuery?
> In the Similarity ecuation
> =
http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/search/Similarit=
y.html
> I don't know how I can get the t.getBoost() value.
>
> Could you help me?
>
> I need it because I need to recalculate the scores of the documents =20=

> which
> were got from differents crawls. MultiReader is not the solution for =20=

> me :).
>
> Thanks!
> Carlos

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 13:48:32 2008
Return-Path: <java-user-return-36723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29130 invoked from network); 20 Oct 2008 13:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 13:48:31 -0000
Received: (qmail 79056 invoked by uid 500); 20 Oct 2008 13:48:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79023 invoked by uid 500); 20 Oct 2008 13:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79012 invoked by uid 99); 20 Oct 2008 13:48:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 06:48:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yarimahdi@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 13:47:18 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1505390fgb.27
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 06:47:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=qHKdrRM5QJqPS4x9bhn27oAsDJWkqNZMaOLSkdJkuqU=;
        b=EgTlmqtFGS84bxsKnTSRJ6wvJC0aLlHNEybgGGat7OivRyYvyD/8iUS805XuzD55XD
         BmiOTuqgs/TINvV87CFdKJdD3P/7UTBCr/yMDBvmARPsBNoDy+k1G4HwEXUJTipOZGl5
         J8BLRdllFg08QyOlX/w0BwYWQLmAccfo9IlUQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=IOBDVG2kHyeGC6O3lpFlP0YMcJ6yhH6G02foT3hfhw6ixM7zk8JkybT4KtKCpU1oNK
         ghkpzc9etat1ry4lTuhuNlSCuyV/B+nfhyDCfn4KbVF8Jv6eAEyuWKkcgmij1XJo6UrO
         ymUjnSVLTZpkhyvatv9mDaNqM6fXrWMhI5j5c=
Received: by 10.187.249.5 with SMTP id b5mr1139854fas.71.1224510474883;
        Mon, 20 Oct 2008 06:47:54 -0700 (PDT)
Received: by 10.187.250.20 with HTTP; Mon, 20 Oct 2008 06:47:54 -0700 (PDT)
Message-ID: <aa609e6b0810200647h3b827545u6d76d5d20869e28a@mail.gmail.com>
Date: Mon, 20 Oct 2008 17:17:54 +0330
From: "mahdi yari" <yarimahdi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merge index will maintain index order
In-Reply-To: <EDAAF5F1-58AE-4240-BFDD-F1DD409FBFBF@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_150631_31965754.1224510474892"
References: <03ee01c9329b$c6dde3c0$330bc30a@sv.us.sonicwall.com>
	 <EDAAF5F1-58AE-4240-BFDD-F1DD409FBFBF@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_150631_31965754.1224510474892
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i can not understand about last sentence "So the final index will only ..."
can you write more about this, because i have same question...
thanks

On Mon, Oct 20, 2008 at 2:04 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> By merge you mean using addIndexes*, right?
>
> Those methods logically concatenate the indices in order by doc ID.  So the
> original docs in your index will keep all their docIDs, and the newly added
> indices are assigned docIDs after that, in the order they were added.
>
> So the final index will only be chronologically ordered by doc ID only if
> the indexes you added were all ordered chronologically by docID, and after
> all docs in the original index.
>
> Mike
>
>
> Ganesh wrote:
>
>  Hello all,
>>
>> I am planning to merge two or more indexes. Once merged, will the DB
>> maintain the same index order as before merge?
>> I am doing sorting on Index Order as sorting on date-time takes more
>> amount of RAM. If i merge the index DB, will the same index order be
>> maintained or the indexes will be overlapped?
>>
>> Regards
>> Ganesh
>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_150631_31965754.1224510474892--

From java-user-return-36724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 14:00:11 2008
Return-Path: <java-user-return-36724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38046 invoked from network); 20 Oct 2008 14:00:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 14:00:11 -0000
Received: (qmail 96286 invoked by uid 500); 20 Oct 2008 14:00:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96246 invoked by uid 500); 20 Oct 2008 14:00:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96235 invoked by uid 99); 20 Oct 2008 14:00:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 07:00:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 13:58:58 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8803A30EFC18; Mon, 20 Oct 2008 07:59:04 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.249.18] (unknown [209.145.85.93])
	by ehatchersolutions.com (Postfix) with ESMTP id B391730EFC16
	for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 07:59:02 -0600 (MDT)
Message-Id: <7F9B9F34-13F3-4EC2-A918-CC8BE9797CFF@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <11975c90810200558m2301021aib391b51ff2428e67@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: robots.txt
Date: Mon, 20 Oct 2008 09:59:01 -0400
References: <11975c90810200558m2301021aib391b51ff2428e67@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.8 required=5.0 tests=AWL,BAYES_00,
	DNS_FROM_SECURITYSAGE autolearn=no version=3.1.1


On Oct 20, 2008, at 8:58 AM, Alexander Aristov wrote:
> Just wonder if Nutch takes into consideration rules from the  
> robots.txt file
> while crawling a site.

Wrong e-mail list, but yeah, Nutch supports robots.txt considerations.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 14:14:14 2008
Return-Path: <java-user-return-36725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45671 invoked from network); 20 Oct 2008 14:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 14:14:14 -0000
Received: (qmail 27694 invoked by uid 500); 20 Oct 2008 14:14:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27666 invoked by uid 500); 20 Oct 2008 14:14:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27625 invoked by uid 99); 20 Oct 2008 14:14:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 07:14:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 14:12:57 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1710373rvb.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 07:13:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=FsgNddMSC1JZYMZsgnfeg1khLkFImPhn3VUtt0D3fUc=;
        b=O7v8o+6ilNEhYsEDdG0XJyaWX7+0dETuCfnDx/EGjrtVcx2Jqy4rEDF6ZDPUge+FGD
         nxpJUszQRMmTz6Wl2mW4EGphQidvini0sn5QsS9hg9TYZhZqjJ0pgsdvqingqiB1Ia6f
         C0IWTEozL2mVDbDGVn9z6p88CR9AxN0M9GZ10=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lCGIyQQF+K59ouJUnx9F83Xne/57Ex9T1CDKPrXq0ifr0UP28/QEcsg1uQsJKkR++V
         nhwUmJdmhEu3XwchDU2+igc2a5H++ds6tq+6zy6q0THzCAM0iKMIvH2hjew3semW21bI
         4iZv1cPaVwPcm/unpV3Pzrf234iQ7kUpIvC+w=
Received: by 10.141.28.4 with SMTP id f4mr4864651rvj.66.1224512015172;
        Mon, 20 Oct 2008 07:13:35 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 20 Oct 2008 07:13:35 -0700 (PDT)
Message-ID: <359a92830810200713t36aaa5d0ne53d5d58edac824@mail.gmail.com>
Date: Mon, 20 Oct 2008 10:13:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merge index will maintain index order
In-Reply-To: <aa609e6b0810200647h3b827545u6d76d5d20869e28a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74400_12525165.1224512015151"
References: <03ee01c9329b$c6dde3c0$330bc30a@sv.us.sonicwall.com>
	 <EDAAF5F1-58AE-4240-BFDD-F1DD409FBFBF@mikemccandless.com>
	 <aa609e6b0810200647h3b827545u6d76d5d20869e28a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74400_12525165.1224512015151
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Let's claim you have build indexes in this order (by date).
index1
index2
index3

Now if you addindexes clause has them ordered the same way, then,
in the merged index, the first docID from index 2 will be greater than
the last doc id from index1 in the merged index. The first doc id from
index 3 will be greater than the last doc ID from index2.

But, if you ordered them as:
index2
index1
index3
in your addindexes statement, the first doc ID from index 1 will be greater
than the last doc ID from index2. etc.


But I'd recommend that you think carefully about whether you care
or not. Building your app such that it's sensitive to the ordering of
Lucene's internal document IDs should be done with care, and
only after you're absolutely sure that the other options don't work.
For instance, indexing a date field instead and sorting on that....

Best
Erick


On Mon, Oct 20, 2008 at 9:47 AM, mahdi yari <yarimahdi@gmail.com> wrote:

> i can not understand about last sentence "So the final index will only ..."
> can you write more about this, because i have same question...
> thanks
>
> On Mon, Oct 20, 2008 at 2:04 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
> >
> > By merge you mean using addIndexes*, right?
> >
> > Those methods logically concatenate the indices in order by doc ID.  So
> the
> > original docs in your index will keep all their docIDs, and the newly
> added
> > indices are assigned docIDs after that, in the order they were added.
> >
> > So the final index will only be chronologically ordered by doc ID only if
> > the indexes you added were all ordered chronologically by docID, and
> after
> > all docs in the original index.
> >
> > Mike
> >
> >
> > Ganesh wrote:
> >
> >  Hello all,
> >>
> >> I am planning to merge two or more indexes. Once merged, will the DB
> >> maintain the same index order as before merge?
> >> I am doing sorting on Index Order as sorting on date-time takes more
> >> amount of RAM. If i merge the index DB, will the same index order be
> >> maintained or the indexes will be overlapped?
> >>
> >> Regards
> >> Ganesh
> >>
> >> Send instant messages to your online friends
> >> http://in.messenger.yahoo.com
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_74400_12525165.1224512015151--

From java-user-return-36726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 14:23:41 2008
Return-Path: <java-user-return-36726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51343 invoked from network); 20 Oct 2008 14:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 14:23:41 -0000
Received: (qmail 45869 invoked by uid 500); 20 Oct 2008 14:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45828 invoked by uid 500); 20 Oct 2008 14:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45816 invoked by uid 99); 20 Oct 2008 14:23:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 07:23:36 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 14:22:28 +0000
X-SBRS: None
X-MID: 100988235
Received: from fmd3tj002.fda.gov ([10.160.10.77])
  by ironport5.fda.gov with ESMTP; 20 Oct 2008 10:23:04 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.63]) by FMD3TJ002.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Oct 2008 10:23:04 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: I am not able to run Lucene 2.4 Demo
Date: Mon, 20 Oct 2008 10:23:03 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73AF8@FMD3VS012.fda.gov>
In-Reply-To: <416694.60495.qm@web8314.mail.in.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: I am not able to run Lucene 2.4 Demo
Thread-Index: Ackw4AfAq1TD8vLLSaWt9kaQ2dXaOgB3yq8w
References: <026901c92f59$6399d2f0$330bc30a@sv.us.sonicwall.com> <416694.60495.qm@web8314.mail.in.yahoo.com>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>,
	<prabina007@yahoo.co.in>
X-OriginalArrivalTime: 20 Oct 2008 14:23:04.0214 (UTC) FILETIME=[5D4B7B60:01C932BF]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I'm using Lucene2.3.2, and no problem so far with Windows.

One issue to look at would be, whether your Index directory has the =
permission to write.=20
Probably, your Index folder is Read_only.=20


Sincerely,
Sithu Sudarsan
Graduate Research Assistant, UALR
& Visiting Researcher, CDRH/OSEL

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: prabina pattanayak [mailto:prabina007@yahoo.co.in]=20
Sent: Saturday, October 18, 2008 1:10 AM
To: java-user@lucene.apache.org; java-user-owner@lucene.apache.org; =
Ganesh
Subject: Re: I am not able to run Lucene 2.4 Demo

what i observed is that it creates the index folder, but that is empty.
it should have one/two file named segments.gen and segments_x(any no.) .
but these two files are not being created inside the index folder.
that's why it is throwing the exception message:
no segments* file found in =
org.apache.lucene.store.FSDirectory@E:\prabina\lucene-2.4demo\index: =
files :
=A0
Regards,
Prabina
--- On Thu, 16/10/08, Ganesh <emailgane@yahoo.co.in> wrote:

From: Ganesh <emailgane@yahoo.co.in>
Subject: Re: I am not able to run Lucene 2.4 Demo
To: java-user@lucene.apache.org, prabina007@yahoo.co.in, =
java-user-owner@lucene.apache.org
Date: Thursday, 16 October, 2008, 12:05 PM

Hello prabina,

I worked fine in windows. Could you provide the details of exception and =

also the System.out messages printed by the application.

Index folder will be created in the current directory. When you execute =
java=20
org.apache.lucene.demo.IndexFiles <root directory>, the list of files=20
available in the root directory will get indexed. In your case it is=20
"E:\prabina\lucene-2.4demo\src"

I have tried the following and it worked.
D:\Program Files\lucene-2.4.0>java -cp=20
"lucene-demos-2.4.0.jar;lucene-core-2.4.0.jar"=20
org.apache.lucene.demo.IndexFiles "D:\Program
Files\lucene-2.4.0\src"

Regards
Ganesh


----- Original Message -----=20
From: "prabina pattanayak" <prabina007@yahoo.co.in>
To: <java-user@lucene.apache.org>;
<java-user-owner@lucene.apache.org>
Sent: Wednesday, October 15, 2008 10:42 AM
Subject: I am not able to run Lucene 2.4 Demo


Hi All,
i am a beginner to Lucene.
and i am trying to use Lucene 2.4.
when i have set lucene-core-2.4.0.jar & lucene-demos-2.4.0.jar in my=20
CLASSPATH. and trying to run:
java org.apache.lucene.demo.IndexFiles
E:\prabina\lucene-2.4demo\src
it shows the error:
caught a class java.io.FileNotFoundException
with message: no segments* file found in=20
org.apache.lucene.store.FSDirectory@E:\prabina\lucene-2.4demo\index:
files:
but it creates the index folder in my current directory. but the index=20
folder is empty. no segments files are there.

plz, help me out from this problem ASAP.




      Add more friends to your messenger and enjoy! Go to=20
http://messenger.yahoo.com/invite/=20

Send instant messages to your online friends =
http://in.messenger.yahoo.com=20


Send free SMS to your Friends on Mobile from your Yahoo! Messenger. =
Download Now! http://messenger.yahoo.com/download.php

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 14:32:53 2008
Return-Path: <java-user-return-36727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55410 invoked from network); 20 Oct 2008 14:32:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 14:32:51 -0000
Received: (qmail 58826 invoked by uid 500); 20 Oct 2008 14:32:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58788 invoked by uid 500); 20 Oct 2008 14:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58777 invoked by uid 99); 20 Oct 2008 14:32:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 07:32:46 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 14:31:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Krvnp-0003py-TS
	for java-user@lucene.apache.org; Mon, 20 Oct 2008 07:32:13 -0700
Message-ID: <20069124.post@talk.nabble.com>
Date: Mon, 20 Oct 2008 07:32:13 -0700 (PDT)
From: mil84 <mil84@centrum.sk>
To: java-user@lucene.apache.org
Subject: How to search in metadata? (filename, document title, cocument
 creator, ...)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mil84@centrum.sk
X-Virus-Checked: Checked by ClamAV on apache.org


I've a problem witch searching. I need to search not only in file contents,
but also in metadata. But I don't know how to do it. My code:

Document doc = new Document();
doc.add(new Field("contents", new FileReader(f)));
writer.addDocument(doc);
...
QueryParser parser = new QueryParser("contents", new StandardAnalyzer());
Query q = parser.parse(list.get(i));
Hits hits = is.search(createQuery(searchText));

Everything is ok, it searches document's contents. But how to search for
example in filenames? I I add this:

doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
Field.Index.UN_TOKENIZED));

it doesn't work. Same problem is searching in metadata...Anyone knows how to
do it? I browsed whole google 3 hours, but found nothing, not even just one
working example, simple nothing....Thanx a lot.
-- 
View this message in context: http://www.nabble.com/How-to-search-in-metadata--%28filename%2C-document-title%2C-cocument-creator%2C-...%29-tp20069124p20069124.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 15:21:14 2008
Return-Path: <java-user-return-36728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71898 invoked from network); 20 Oct 2008 15:21:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 15:21:14 -0000
Received: (qmail 46754 invoked by uid 500); 20 Oct 2008 15:21:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46717 invoked by uid 500); 20 Oct 2008 15:21:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46698 invoked by uid 99); 20 Oct 2008 15:21:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 08:21:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 15:20:01 +0000
Received: by gxk6 with SMTP id 6so3797277gxk.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 08:19:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=n9FOBMpwzl6kuXv5A+/btzI+gPIAj8hrn/Zv9WsWdrs=;
        b=hP2LgMeEKqxAyWCnYXTOur72WFhNpv5bFD7fL/uyu/+jjWU4A7JW+4D1+qb6Gtkj0F
         16YobL7Tn2Qh4RJpLgXzdJxTKCfadHJPVPuX1zfrlUfImDNxoZdlkeWNMU8fYUL5U9Jc
         5tEw9pvBXFMcwujg0BFPQ6ReTizfxGd1GZW18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=VwWRNHivEkxdvLvkS4NwC5xYViVEA9+d7YdDn3jRyKZLy/og8h3C/2AMcx5Hziwohz
         bhoPXOn9uypqkT7nSfBHtF59CsmWYaxJ+wOvIJyStpg6A8g49GB3xaPs90FhNva2pP7g
         O1B+q9Kik0nZWpR3mYD3mkYi+SYXbLrRcQEPA=
Received: by 10.151.13.7 with SMTP id q7mr8405473ybi.228.1224515979517;
        Mon, 20 Oct 2008 08:19:39 -0700 (PDT)
Received: by 10.151.7.16 with HTTP; Mon, 20 Oct 2008 08:19:39 -0700 (PDT)
Message-ID: <dba8f29c0810200819g5c2aa13dk2cb98baa66502eb7@mail.gmail.com>
Date: Mon, 20 Oct 2008 16:19:39 +0100
From: "Richard Marr" <richard.marr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hiring etiquette
In-Reply-To: <4F296269-9F89-48C3-B94C-0ADB802AFF60@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dba8f29c0810191036g13f6af97hf8c55b934f0c61b6@mail.gmail.com>
	 <F8E386B54CE3E6408F3A32ABB9A7908A015CAF72@hai02.hippointern.lan>
	 <dba8f29c0810200340q45eca939w270f71cfdfe708e2@mail.gmail.com>
	 <4F296269-9F89-48C3-B94C-0ADB802AFF60@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> Can you post details of what you're hitting?

Sorry Mike, my problem doesn't seem to be repeatable. I'll bring it
back to the group if/when I nail it down.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 15:30:54 2008
Return-Path: <java-user-return-36729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75264 invoked from network); 20 Oct 2008 15:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 15:30:54 -0000
Received: (qmail 60506 invoked by uid 500); 20 Oct 2008 15:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59940 invoked by uid 500); 20 Oct 2008 15:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59929 invoked by uid 99); 20 Oct 2008 15:30:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 08:30:49 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 15:29:37 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 42B191FCA6
	for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 08:29:45 -0700 (PDT)
Message-Id: <92C6C58A-6CAD-42FE-9CB2-67B737E7F810@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20069124.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to search in metadata? (filename, document title, cocument creator, ...)
Date: Mon, 20 Oct 2008 11:29:44 -0400
References: <20069124.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Oct 20, 2008, at 10:32 AM, mil84 wrote:

>
> I've a problem witch searching. I need to search not only in file  
> contents,
> but also in metadata. But I don't know how to do it. My code:
>
> Document doc = new Document();
> doc.add(new Field("contents", new FileReader(f)));
> writer.addDocument(doc);
> ...
> QueryParser parser = new QueryParser("contents", new  
> StandardAnalyzer());
> Query q = parser.parse(list.get(i));
> Hits hits = is.search(createQuery(searchText));
>
> Everything is ok, it searches document's contents. But how to search  
> for
> example in filenames? I I add this:
>
> doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
> Field.Index.UN_TOKENIZED));


You'll have to tokenize the filename in order for it to match anything  
other than an exact query.  I believe the Lucene demo shows adding  
other fields.  Lucene doesn't have a concept of "metadata".  It only  
has a concept of Document and Fields.  It's up to you to put in your  
metadata, just as you have suggested here.  Try just making that  
filename Field a tokenized field and see what happens.

If you're looking for tools to get metadata from files, then have a  
look at Tika or Aperture, which can easily be paired with Lucene.   
Aperture, I believe, even comes with a Lucene example.

>
>
> it doesn't work. Same problem is searching in metadata...Anyone  
> knows how to
> do it? I browsed whole google 3 hours, but found nothing, not even  
> just one
> working example, simple nothing....Thanx a lot.
> -- 
> View this message in context: http://www.nabble.com/How-to-search-in-metadata--%28filename%2C-document-title%2C-cocument-creator%2C-...%29-tp20069124p20069124.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 15:33:14 2008
Return-Path: <java-user-return-36730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75764 invoked from network); 20 Oct 2008 15:33:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 15:33:13 -0000
Received: (qmail 65779 invoked by uid 500); 20 Oct 2008 15:33:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65378 invoked by uid 500); 20 Oct 2008 15:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65367 invoked by uid 99); 20 Oct 2008 15:33:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 08:33:09 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 15:31:54 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1740226rvb.5
        for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 08:32:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=H5Nu2RQ1UrnB3rVk4hCg4mVE1+dvIv6kQ5VLAR52Ex0=;
        b=eFHoHEVsWsw2dIaxdihWETAodkk1RqQ71Kux8iyTkhI7vRgNLgYUhZrIIJF43NKfns
         RMID+QqQk1PLSZEwgvxIT1oNG6RhnXlSKguNMu5uXdgw8GUAPrL0T7f4gU6WvDewmghC
         FjkBqiCVzB7b5TqF/Nk9/HWre/pKxy99iwNoY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=NPG+82ro/1MgBU2ja1F5tBxQuDL+bO/DO1i+Gwb2G/KjwjgMJqdhEhp/aypPucKyrh
         zhXf+Dq/S4KxfgelMx2b2C1c4asoVW7xABXxwQTSu+PfCh/bfd+zZhAu3B3oEdKDTVdi
         oI2QY0pQO8jDEBFS6TuRj9qJ/ErX9DU22cWyE=
Received: by 10.141.1.2 with SMTP id d2mr4927325rvi.42.1224516738251;
        Mon, 20 Oct 2008 08:32:18 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 20 Oct 2008 08:32:18 -0700 (PDT)
Message-ID: <359a92830810200832g24475704nf4516522c69734df@mail.gmail.com>
Date: Mon, 20 Oct 2008 11:32:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search in metadata? (filename, document title, cocument creator, ...)
In-Reply-To: <92C6C58A-6CAD-42FE-9CB2-67B737E7F810@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_75471_19366790.1224516738232"
References: <20069124.post@talk.nabble.com>
	 <92C6C58A-6CAD-42FE-9CB2-67B737E7F810@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_75471_19366790.1224516738232
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If Grant's suggestions don't help you, some examples of your search
code would be helpful to further pinpoint things...

Best
Erick


On Mon, Oct 20, 2008 at 11:29 AM, Grant Ingersoll <gsingers@apache.org>wrote:

>
> On Oct 20, 2008, at 10:32 AM, mil84 wrote:
>
>
>> I've a problem witch searching. I need to search not only in file
>> contents,
>> but also in metadata. But I don't know how to do it. My code:
>>
>> Document doc = new Document();
>> doc.add(new Field("contents", new FileReader(f)));
>> writer.addDocument(doc);
>> ...
>> QueryParser parser = new QueryParser("contents", new StandardAnalyzer());
>> Query q = parser.parse(list.get(i));
>> Hits hits = is.search(createQuery(searchText));
>>
>> Everything is ok, it searches document's contents. But how to search for
>> example in filenames? I I add this:
>>
>> doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
>> Field.Index.UN_TOKENIZED));
>>
>
>
> You'll have to tokenize the filename in order for it to match anything
> other than an exact query.  I believe the Lucene demo shows adding other
> fields.  Lucene doesn't have a concept of "metadata".  It only has a concept
> of Document and Fields.  It's up to you to put in your metadata, just as you
> have suggested here.  Try just making that filename Field a tokenized field
> and see what happens.
>
> If you're looking for tools to get metadata from files, then have a look at
> Tika or Aperture, which can easily be paired with Lucene.  Aperture, I
> believe, even comes with a Lucene example.
>
>
>>
>> it doesn't work. Same problem is searching in metadata...Anyone knows how
>> to
>> do it? I browsed whole google 3 hours, but found nothing, not even just
>> one
>> working example, simple nothing....Thanx a lot.
>> --
>> View this message in context:
>> http://www.nabble.com/How-to-search-in-metadata--%28filename%2C-document-title%2C-cocument-creator%2C-...%29-tp20069124p20069124.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> --------------------------
> Grant Ingersoll
> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
> http://www.lucenebootcamp.com
>
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_75471_19366790.1224516738232--

From java-user-return-36731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 16:44:00 2008
Return-Path: <java-user-return-36731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95144 invoked from network); 20 Oct 2008 16:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 16:44:00 -0000
Received: (qmail 75019 invoked by uid 500); 20 Oct 2008 16:43:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74991 invoked by uid 500); 20 Oct 2008 16:43:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74980 invoked by uid 99); 20 Oct 2008 16:43:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 09:43:55 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 16:42:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KrxpG-0000ad-1u
	for java-user@lucene.apache.org; Mon, 20 Oct 2008 09:41:50 -0700
Message-ID: <20073802.post@talk.nabble.com>
Date: Mon, 20 Oct 2008 09:41:50 -0700 (PDT)
From: mil84 <mil84@centrum.sk>
To: java-user@lucene.apache.org
Subject: Re: How to search in metadata? (filename, document title, cocument
 creator, ...)
In-Reply-To: <359a92830810200832g24475704nf4516522c69734df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mil84@centrum.sk
References: <20069124.post@talk.nabble.com> <92C6C58A-6CAD-42FE-9CB2-67B737E7F810@apache.org> <359a92830810200832g24475704nf4516522c69734df@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ok, better example. For example I want to search pdf file.

1) Indexing:

Document doc = LucenePDFDocument.getDocument(f);
		
doc.add(new Field("contents", new FileReader(f)));
doc.add(new Field("filename", "Example.pdf", Field.Store.YES,
Field.Index.TOKENIZED));
doc.add(new Field("Creator", "John Smith", Field.Store.YES,
Field.Index.TOKENIZED));
doc.add(new Field("Title", "hohoho", Field.Store.YES,
Field.Index.TOKENIZED));

2) Searching in contents - it WORKS OK

QueryParser parser = new QueryParser("contents", new StandardAnalyzer());
Query q = parser.parse(searchText);
Hits hits = is.search(q); 

3) Searching in title - it DON'T WORK (I try to find hohoho, and nothing).
Same with searching in creator, etc...

QueryParser parser = new QueryParser("title", new StandardAnalyzer());
Query q = parser.parse(searchText);
Hits hits = is.search(q); 


I simple can't understand, where I made mistake? It's simple code...


-- 
View this message in context: http://www.nabble.com/How-to-search-in-metadata--%28filename%2C-document-title%2C-cocument-creator%2C-...%29-tp20069124p20073802.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 16:50:52 2008
Return-Path: <java-user-return-36732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96308 invoked from network); 20 Oct 2008 16:50:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 16:50:51 -0000
Received: (qmail 79692 invoked by uid 500); 20 Oct 2008 16:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79648 invoked by uid 500); 20 Oct 2008 16:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79637 invoked by uid 99); 20 Oct 2008 16:50:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 09:50:47 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 16:49:37 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id m9KGo4Ac024652
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 12:50:04 -0400
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Mon, 20 Oct 2008 12:50:04 -0400
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Mon, 20 Oct 2008 12:50:03 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to search in metadata? (filename, document title, cocument creator, ...)
Date: Mon, 20 Oct 2008 12:50:03 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3F3C@SUEXCL-02.ad.syr.edu>
In-Reply-To: <20073802.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to search in metadata? (filename, document title, cocument creator, ...)
Thread-Index: Acky0xDO2Yxmq8+dQSybdBhjBSIFdwAAJVhg
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Oct 2008 16:50:03.0459 (UTC) FILETIME=[E5F97930:01C932D3]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7160:2.4.4,1.2.40,4.0.166 definitions=2008-10-20_05:2008-10-10,2008-10-20,2008-10-20 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

On 10/20/2008 at 12:41 PM, mil84 wrote:
> doc.add(new Field("Title", "hohoho", Field.Store.YES, =
Field.Index.TOKENIZED));
[...]
> 3) Searching in title - it DON'T WORK (I try to find hohoho, and =
nothing).
[...]
> QueryParser parser =3D new QueryParser("title", new =
StandardAnalyzer());

Field names are case-sensitive: "Title" !=3D "title".

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 21:07:48 2008
Return-Path: <java-user-return-36733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11903 invoked from network); 20 Oct 2008 21:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 21:07:48 -0000
Received: (qmail 18608 invoked by uid 500); 20 Oct 2008 21:07:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18581 invoked by uid 500); 20 Oct 2008 21:07:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18570 invoked by uid 99); 20 Oct 2008 21:07:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 14:07:43 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 21:06:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ks1y2-0004GQ-BK
	for java-user@lucene.apache.org; Mon, 20 Oct 2008 14:07:10 -0700
Message-ID: <20078814.post@talk.nabble.com>
Date: Mon, 20 Oct 2008 14:07:10 -0700 (PDT)
From: mil84 <mil84@centrum.sk>
To: java-user@lucene.apache.org
Subject: RE: How to search in metadata? (filename, document title, cocument
 creator, ...)
In-Reply-To: <9294E20AED46934EA459020706463F94EF3F3C@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mil84@centrum.sk
References: <20069124.post@talk.nabble.com> <92C6C58A-6CAD-42FE-9CB2-67B737E7F810@apache.org> <359a92830810200832g24475704nf4516522c69734df@mail.gmail.com> <20073802.post@talk.nabble.com> <9294E20AED46934EA459020706463F94EF3F3C@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


thx :) There was also another problem with filename (because I indexed full
path, not only name). But I fixed it, and now it finally works.

Last question - how to get number of hits in every document (not only global
number of hits)? Best would be a simple example, if possible...
-- 
View this message in context: http://www.nabble.com/How-to-search-in-metadata--%28filename%2C-document-title%2C-cocument-creator%2C-...%29-tp20069124p20078814.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 21:46:23 2008
Return-Path: <java-user-return-36734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29835 invoked from network); 20 Oct 2008 21:46:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 21:46:23 -0000
Received: (qmail 59396 invoked by uid 500); 20 Oct 2008 21:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59360 invoked by uid 500); 20 Oct 2008 21:46:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59349 invoked by uid 99); 20 Oct 2008 21:46:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 14:46:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of brian_s_beard@hotmail.com designates 65.55.111.79 as permitted sender)
Received: from [65.55.111.79] (HELO blu0-omc2-s4.blu0.hotmail.com) (65.55.111.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 21:45:06 +0000
Received: from BLU143-W31 ([65.55.111.73]) by blu0-omc2-s4.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Oct 2008 14:42:48 -0700
Message-ID: <BLU143-W310D391C06B63D0BBF621FBA2F0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_2337b6e8-d9f3-479c-9ca7-63325ab98957_"
X-Originating-IP: [24.125.37.195]
From: Brian Beard <brian_s_beard@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Re: highlighter / fragmenter performance for large fields
Date: Mon, 20 Oct 2008 17:42:48 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 20 Oct 2008 21:42:48.0868 (UTC) FILETIME=[CBC62E40:01C932FC]
X-Virus-Checked: Checked by ClamAV on apache.org

--_2337b6e8-d9f3-479c-9ca7-63325ab98957_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


Karsten=2C

Thanks=2C I will look into this.

>Hi Brian=2C
>
>I don't know the internals of highlighting (=84explanation=93) in lucene.
>But I know that XTF (
>http://xtf.wiki.sourceforge.net/underHood_Documents#tocunderHood_Documents=
5
>) can handle very large documents (above 100 Mbyte) with highlighting very
>fast. The difference to your approach is=2C that xtf devide the document i=
n
>small (overlapping) chunks and store the original text as xml separately
>with connection to lucene indexed fields via numbered xml-nodes.
>For large texts (above 200 KByte)=2C it is the best tool I know.
>
>Best regards
>  Karsten


_________________________________________________________________
Store=2C manage and share up to 5GB with Windows Live SkyDrive.
http://skydrive.live.com/welcome.aspx?provision=3D1?ocid=3DTXT_TAGLM_WL_sky=
drive_102008=

--_2337b6e8-d9f3-479c-9ca7-63325ab98957_--

From java-user-return-36735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 20 23:33:03 2008
Return-Path: <java-user-return-36735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74991 invoked from network); 20 Oct 2008 23:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Oct 2008 23:33:03 -0000
Received: (qmail 70519 invoked by uid 500); 20 Oct 2008 23:32:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70472 invoked by uid 500); 20 Oct 2008 23:32:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70461 invoked by uid 99); 20 Oct 2008 23:32:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 16:32:58 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 23:31:46 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 9C62A73487
	for <java-user@lucene.apache.org>; Mon, 20 Oct 2008 16:32:24 -0700 (PDT)
Message-Id: <D7BB5DFC-F041-48BF-A56F-F236F425DCC9@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20078814.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to search in metadata? (filename, document title, cocument creator, ...)
Date: Mon, 20 Oct 2008 19:32:23 -0400
References: <20069124.post@talk.nabble.com> <92C6C58A-6CAD-42FE-9CB2-67B737E7F810@apache.org> <359a92830810200832g24475704nf4516522c69734df@mail.gmail.com> <20073802.post@talk.nabble.com> <9294E20AED46934EA459020706463F94EF3F3C@SUEXCL-02.ad.syr.edu> <20078814.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Oct 20, 2008, at 5:07 PM, mil84 wrote:

>
> thx :) There was also another problem with filename (because I  
> indexed full
> path, not only name). But I fixed it, and now it finally works.
>
> Last question - how to get number of hits in every document (not  
> only global
> number of hits)? Best would be a simple example, if possible...

You'll have to use SpanQuery and it's derivatives for that.  See the  
javadocs and/or search the archives of the mailing list.  I don't have  
any examples handy, but I believe I did a talk on Span Queries a few  
years back at ApacheCon.

>
> -- 
> View this message in context: http://www.nabble.com/How-to-search-in-metadata--%28filename%2C-document-title%2C-cocument-creator%2C-...%29-tp20069124p20078814.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 02:31:52 2008
Return-Path: <java-user-return-36736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73233 invoked from network); 21 Oct 2008 02:31:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 02:31:52 -0000
Received: (qmail 98843 invoked by uid 500); 21 Oct 2008 02:31:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98816 invoked by uid 500); 21 Oct 2008 02:31:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98805 invoked by uid 99); 21 Oct 2008 02:31:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 19:31:47 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 02:30:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ks71e-00086J-PO
	for java-user@lucene.apache.org; Mon, 20 Oct 2008 19:31:14 -0700
Message-ID: <20082388.post@talk.nabble.com>
Date: Mon, 20 Oct 2008 19:31:14 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: QueryParser returning TermQuery instead of PhraseQuery?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have field for example say "foo" I need to match exactly foo but there is
also another field for exampled called "foo1"

What I want is a PhraseQuery so I surround foo with quotes before it gets
passed to the QueryParser.parse method. However I get back a TermQuery and
the values that match foo1 end up being returned in the results but I need
an exact match on foo.

Why am I getting back a Term instead of Phrase query? I'm using the English
SnowballAnalyzer. 

What can I do to get the PhraseQuery? I'm relying on the parse method to
return the appropriate query. And I'm doing the string manipulation prior to
the parse call.

I don't want to have to have a special case for PhraseQuery where I need to
bypass the parse method and manually construct this. Besides I'm not even
sure if that will work.

Thanks.


-- 
View this message in context: http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20082388.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 05:46:01 2008
Return-Path: <java-user-return-36737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32458 invoked from network); 21 Oct 2008 05:46:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 05:46:01 -0000
Received: (qmail 99354 invoked by uid 500); 21 Oct 2008 05:46:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99328 invoked by uid 500); 21 Oct 2008 05:46:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99304 invoked by uid 99); 21 Oct 2008 05:46:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Oct 2008 22:46:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 05:44:50 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id DF6844A81F3
	for <java-user@lucene.apache.org>; Tue, 21 Oct 2008 16:45:25 +1100 (EST)
Message-ID: <48FD6C7A.4010305@nuix.com>
Date: Tue, 21 Oct 2008 16:45:30 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryParser returning TermQuery instead of PhraseQuery?
References: <20082388.post@talk.nabble.com>
In-Reply-To: <20082388.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

samd wrote:
> I have field for example say "foo" I need to match exactly foo but there is
> also another field for exampled called "foo1"
> 
> What I want is a PhraseQuery so I surround foo with quotes before it gets
> passed to the QueryParser.parse method. However I get back a TermQuery and
> the values that match foo1 end up being returned in the results but I need
> an exact match on foo.

I'm not sure what you're trying to achieve, but:

    1. Merely putting quotes around something doesn't make it a
       PhraseQuery, having more than one term inside the quotes makes
       something a phrase query.

    2. Stop words sometimes removes a word such that what you thought
       was a two-term query is actually one.

    3. Whether it's a PhraseQuery or TermQuery has no effect on the way
       it matches each individual term, i.e. it won't be any more or less
       "exact".

> I don't want to have to have a special case for PhraseQuery where I need to
> bypass the parse method and manually construct this. Besides I'm not even
> sure if that will work.

Even if it does "work" it won't change the semantics.

This is sounding like an X-Y problem, so what are you actually trying to 
achieve?  It sounds like you don't want stemming (talking about "exact" 
matches) yet you chose the snowball analyser (whose sole purpose is 
stemming, unless I am mistaken...)

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 10:46:22 2008
Return-Path: <java-user-return-36738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68857 invoked from network); 21 Oct 2008 10:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 10:46:22 -0000
Received: (qmail 37537 invoked by uid 500); 21 Oct 2008 10:46:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37485 invoked by uid 500); 21 Oct 2008 10:46:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37459 invoked by uid 99); 21 Oct 2008 10:46:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 03:46:14 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 10:45:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KsEk8-0000EV-Vo
	for java-user@lucene.apache.org; Tue, 21 Oct 2008 03:45:40 -0700
Message-ID: <20087679.post@talk.nabble.com>
Date: Tue, 21 Oct 2008 03:45:40 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser returning TermQuery instead of PhraseQuery?
In-Reply-To: <48FD6C7A.4010305@nuix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <20082388.post@talk.nabble.com> <48FD6C7A.4010305@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org


The Snowball Analyzer was chosen since there are cases where the stemming is
desired. This is one case where it is not although the same results are
produced with the Standard Analyzer. If this doesn't work I guess I'll
probably need to try to programmatically provide an additional field to the
search parameters in order to make the results unique.


Daniel Noll-3 wrote:
> 
> samd wrote:
>> I have field for example say "foo" I need to match exactly foo but there
>> is
>> also another field for exampled called "foo1"
>> 
>> What I want is a PhraseQuery so I surround foo with quotes before it gets
>> passed to the QueryParser.parse method. However I get back a TermQuery
>> and
>> the values that match foo1 end up being returned in the results but I
>> need
>> an exact match on foo.
> 
> I'm not sure what you're trying to achieve, but:
> 
>     1. Merely putting quotes around something doesn't make it a
>        PhraseQuery, having more than one term inside the quotes makes
>        something a phrase query.
> 
>     2. Stop words sometimes removes a word such that what you thought
>        was a two-term query is actually one.
> 
>     3. Whether it's a PhraseQuery or TermQuery has no effect on the way
>        it matches each individual term, i.e. it won't be any more or less
>        "exact".
> 
>> I don't want to have to have a special case for PhraseQuery where I need
>> to
>> bypass the parse method and manually construct this. Besides I'm not even
>> sure if that will work.
> 
> Even if it does "work" it won't change the semantics.
> 
> This is sounding like an X-Y problem, so what are you actually trying to 
> achieve?  It sounds like you don't want stemming (talking about "exact" 
> matches) yet you chose the snowball analyser (whose sole purpose is 
> stemming, unless I am mistaken...)
> 
> Daniel
> 
> 
> -- 
> Daniel Noll                            Forensic and eDiscovery Software
> Senior Developer                              The world's most advanced
> Nuix                                                email data analysis
> http://nuix.com/                                and eDiscovery software
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20087679.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 12:13:00 2008
Return-Path: <java-user-return-36739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4312 invoked from network); 21 Oct 2008 12:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 12:13:00 -0000
Received: (qmail 76037 invoked by uid 500); 21 Oct 2008 12:12:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75994 invoked by uid 500); 21 Oct 2008 12:12:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75981 invoked by uid 99); 21 Oct 2008 12:12:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 05:12:55 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 12:11:44 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2170253rvb.5
        for <java-user@lucene.apache.org>; Tue, 21 Oct 2008 05:12:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HqEmNpiT8WEqdNwIQDWU9F7MNJFNtvbGevl6AIxzLow=;
        b=g4F2W11fJtlBKxFcgq3I0s2j9mBkW4qTIVDIwTQ37lRjPVBPBOwB8sxgbjfbwvuB4A
         Zhe+4vr6TG1brkn6BG5n/iazo/Z/2O4Ay7qjZDG/72IeAV40MzioI+cj6Hk4s0vnXx/5
         rESeWPbLt1gPTIB1PoFq7ECXtWBZhc55TTZeI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=v0mPa/PSYHt13q7E6+wRz0v5nVjc5vUOeGmLAgadm/5uFQ9U3I2EupqPyv++t5sJzi
         Ca+pz1ujDlEU6N5jdcFs4XZy/MIdlG13VW89iSvcDXVzwEAJfOOBudF+ja5b97X5Xuzp
         59/DGGDvIC8/0L6jClbn5ukyXz21UIfVPUg+c=
Received: by 10.141.129.14 with SMTP id g14mr5633875rvn.50.1224591133000;
        Tue, 21 Oct 2008 05:12:13 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 21 Oct 2008 05:12:12 -0700 (PDT)
Message-ID: <359a92830810210512u2a71242aj67a27b1eca4c9833@mail.gmail.com>
Date: Tue, 21 Oct 2008 08:12:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser returning TermQuery instead of PhraseQuery?
In-Reply-To: <20087679.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3976_14341594.1224591133005"
References: <20082388.post@talk.nabble.com> <48FD6C7A.4010305@nuix.com>
	 <20087679.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3976_14341594.1224591133005
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd really recommend you get a copy of Luke and examine what
your index really contains. You say:

<<<This is one case where it is not although the same results are
produced with the Standard Analyzer.>>>

StandardAnalyzer? When? If you *index* with SnowballAnalyzer, your
token would (probably) be "foo" rather than "foo1". So at *query* time,
it wouldn't make any difference whether you used StandardAnalyzer
or ShowballAnalyzer, since you dind't index the '1' in foo1. This is
mostly a guess though....

StandardAnalyzer is, IMO, a bit of a misnomer. It tries to do more
than one thinks (e.g. handle e-mail addresses). This sometimes
produces surprising results.

You'll find Luke (google lucene luke) is invaluable both for figuring
out what is in your index and what queries look like when processed
by various analyzers. And what documents get found. And why <G>.

And I second Daniel's point. Why do you "sometimes" want exact
matches and sometimes want stemmed matches? You can't really
get both of those things out of one field in your documents. If you
stem at indexing time, the extra data is lost and you can't regain it.
If you don't stem at index time, you can't very well get stemmed
matches at query time.....

Best
Erick

On Tue, Oct 21, 2008 at 6:45 AM, samd <sdoyle_2@yahoo.com> wrote:

>
> The Snowball Analyzer was chosen since there are cases where the stemming
> is
> desired. This is one case where it is not although the same results are
> produced with the Standard Analyzer. If this doesn't work I guess I'll
> probably need to try to programmatically provide an additional field to the
> search parameters in order to make the results unique.
>
>
> Daniel Noll-3 wrote:
> >
> > samd wrote:
> >> I have field for example say "foo" I need to match exactly foo but there
> >> is
> >> also another field for exampled called "foo1"
> >>
> >> What I want is a PhraseQuery so I surround foo with quotes before it
> gets
> >> passed to the QueryParser.parse method. However I get back a TermQuery
> >> and
> >> the values that match foo1 end up being returned in the results but I
> >> need
> >> an exact match on foo.
> >
> > I'm not sure what you're trying to achieve, but:
> >
> >     1. Merely putting quotes around something doesn't make it a
> >        PhraseQuery, having more than one term inside the quotes makes
> >        something a phrase query.
> >
> >     2. Stop words sometimes removes a word such that what you thought
> >        was a two-term query is actually one.
> >
> >     3. Whether it's a PhraseQuery or TermQuery has no effect on the way
> >        it matches each individual term, i.e. it won't be any more or less
> >        "exact".
> >
> >> I don't want to have to have a special case for PhraseQuery where I need
> >> to
> >> bypass the parse method and manually construct this. Besides I'm not
> even
> >> sure if that will work.
> >
> > Even if it does "work" it won't change the semantics.
> >
> > This is sounding like an X-Y problem, so what are you actually trying to
> > achieve?  It sounds like you don't want stemming (talking about "exact"
> > matches) yet you chose the snowball analyser (whose sole purpose is
> > stemming, unless I am mistaken...)
> >
> > Daniel
> >
> >
> > --
> > Daniel Noll                            Forensic and eDiscovery Software
> > Senior Developer                              The world's most advanced
> > Nuix                                                email data analysis
> > http://nuix.com/                                and eDiscovery software
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20087679.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3976_14341594.1224591133005--

From java-user-return-36740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 13:39:56 2008
Return-Path: <java-user-return-36740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58445 invoked from network); 21 Oct 2008 13:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 13:39:56 -0000
Received: (qmail 43214 invoked by uid 500); 21 Oct 2008 13:39:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43193 invoked by uid 500); 21 Oct 2008 13:39:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43182 invoked by uid 99); 21 Oct 2008 13:39:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 06:39:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.115] (HELO smtp132.mail.mud.yahoo.com) (209.191.107.115)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Oct 2008 13:38:38 +0000
Received: (qmail 94783 invoked from network); 21 Oct 2008 13:38:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=hcKKBx8QnUKAJQVZF3/6wTwvz1Y/86Ik5DKfypWsQjursGvV5Hq/eiqUcSIulOdAZ4dz55FCqhz9lxn2bzQlnAphDYXlvY9BslxM9mq/IRaEnalXMr/d2hqt1NYY0hydk6O7VyfMej4bWkQy0uaZqN0c1Zi9WGTC3AH2L7U6l2A=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp132.mail.mud.yahoo.com with SMTP; 21 Oct 2008 13:38:14 -0000
X-YMail-OSG: hzgx1EwVM1m.UqKxO9HleSnYS0hl0jNQfhtZ3l8McACbg.0Tzx2JYVLOTRU8ALxWeLEppVdKawNpJ6Eff0Tm1IZz8WVLAnxm7Dsahi.0Gto788_OqdO_6j7lk2ovyTQNdoI-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Multisearcher will maintain index order sorting?
Date: Tue, 21 Oct 2008 19:08:11 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I need to maintain multiple db and i don't want to sort on datetime as it is 
taking huge RAM. I want to sort on indexed order. Using Multisearcher or 
ParallelMultiSearcher will maintain the index order. If it does then i don't 
need to merge the indexDB.

Regards
Ganesh

 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 14:15:03 2008
Return-Path: <java-user-return-36741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84153 invoked from network); 21 Oct 2008 14:15:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 14:15:03 -0000
Received: (qmail 7885 invoked by uid 500); 21 Oct 2008 14:14:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7819 invoked by uid 500); 21 Oct 2008 14:14:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7798 invoked by uid 99); 21 Oct 2008 14:14:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 07:14:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jose.aguera@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 14:13:39 +0000
Received: by mu-out-0910.google.com with SMTP id i10so2144416mue.5
        for <java-user@lucene.apache.org>; Tue, 21 Oct 2008 07:14:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=nyUPGGNSjq9vZPZrz3GDVdFOcjfYqhrRmnfEksnvgfs=;
        b=h8+/LroDXJVSdXU7gFAicm0FwPziA8s9f3QNVlBjT0qFcqOqh18t9RwC7zoXUWDI5q
         oU+fzyR+M5BX2hmZ7X0BWPM6scjr/xkQHg9EWtjEH6nahAR+gHa6TAGoEXujnTxElb5Q
         qOW7Nsr8OOi4ysXV+ruwMDDhGO0D/stvtTc5Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=RcuEBIuV2QB9tFteEqUGS7GuKc2jLXGCpV3jECYZZNkdiDwaHaCJ+AE0QRjedH0OmK
         kVHUokTR3UeFtsuoPii/AOqB+WTHjajc0afGRJHrEvT9QHl+5xO0Oz0KKZTPpPMpx6QS
         AXTFteNe16gn04ap9U3w8qQeIePwcvxGj0P8o=
Received: by 10.181.203.11 with SMTP id f11mr1114383bkq.67.1224598456168;
        Tue, 21 Oct 2008 07:14:16 -0700 (PDT)
Received: by 10.181.14.3 with HTTP; Tue, 21 Oct 2008 07:14:16 -0700 (PDT)
Message-ID: <9ab5344d0810210714v2a498c93g626cf9d659104baa@mail.gmail.com>
Date: Tue, 21 Oct 2008 16:14:16 +0200
From: "=?ISO-8859-1?Q?Jos=E9_Ram=F3n_P=E9rez_Ag=FCera?=" <jose.aguera@gmail.com>
To: java-user@lucene.apache.org
Subject: Query Expansion Module for Lucene based on BM25 ranking function
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

We have implemented a research module for lucene using BM25 and our
structured version of BM25 as ranking functions and a couple of
state-of-art query expansion algoritms.

This implementation is quite different to other query expansion
modules for Lucene that are available in the web.

We have used this implementation in CLEF 2008 Robust WSD track
http://ixa2.si.ehu.es/clirwsd/ with very good results. The code and
other technical and scientific details can be accessed here:

http://grasia.fdi.ucm.es/jose/query-expansion

This is an alpha0.0.never.used.before.by.anyone version, we will work
on it in the following months to make it easier to use.

Please do not hesitate to send comments, questions and/or complaints
to the authors.

jose

--=20
Jos=E9 Ram=F3n P=E9rez Ag=FCera

Dept. de Ingenier=EDa del Software e Inteligencia Artificial
Despacho 411 tlf. 913947599
Facultad de Inform=E1tica
Universidad Complutense de Madrid

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 14:49:26 2008
Return-Path: <java-user-return-36742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6708 invoked from network); 21 Oct 2008 14:49:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 14:49:26 -0000
Received: (qmail 71477 invoked by uid 500); 21 Oct 2008 14:49:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71444 invoked by uid 500); 21 Oct 2008 14:49:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71433 invoked by uid 99); 21 Oct 2008 14:49:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 07:49:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 14:48:13 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2227483rvb.5
        for <java-user@lucene.apache.org>; Tue, 21 Oct 2008 07:48:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=cIFY9gdlvE/7VGmrGJ+q1Cu0t0qSldVRz6HYOm8j4vE=;
        b=deGBPtng/Ll/5KmmmTVJEZbWfHYEXiFm8yKjmFSys8oMjIpm2187R3rJbOgQLreA9D
         btsW8pBjBIg941RjLcNEkc/zJD0e9xxddmXpDSn6KfY1OwIBfnVdxznW/ixCp5Vj5kiQ
         vGFJimo+zoHs541eSqnyI0zXszGUXFvKMGLrA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nSJ5dn6cLo/NfZfU1jnHrG5NYOfh4lWVPalG4rp3soP9HHzW0eSgpCsHpeL2NqkqSo
         jSRTn3bRyKXEcmoZn6s9XHHdxKCEsm0nin2SGPOF7JikACfMCpLAyP11IYv3PDa6rAI3
         rUQxRDygh7D5cHFybVkhsdPonC/8DJo9o/PoI=
Received: by 10.141.74.17 with SMTP id b17mr5717399rvl.119.1224600522301;
        Tue, 21 Oct 2008 07:48:42 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 21 Oct 2008 07:48:42 -0700 (PDT)
Message-ID: <359a92830810210748n5eab2590o379838222308de1c@mail.gmail.com>
Date: Tue, 21 Oct 2008 10:48:42 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multisearcher will maintain index order sorting?
In-Reply-To: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5703_25630590.1224600522295"
References: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5703_25630590.1224600522295
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You say the timestamp sort is taking lots of RAM, which leads
me to ask "what resolution are you using and do you need
that great a resolution"?

As I understand it, sorting is sensitive to the number of unique
terms, so if you're storing millisecond timestamps you have a
whole lot more terms than if you store, say, minute resolution.
So one possibility would be to use a coarser resolution than
you are now, if you app can.

Best
Erick

On Tue, Oct 21, 2008 at 9:38 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Hello all,
>
> I need to maintain multiple db and i don't want to sort on datetime as it
> is taking huge RAM. I want to sort on indexed order. Using Multisearcher or
> ParallelMultiSearcher will maintain the index order. If it does then i don't
> need to merge the indexDB.
>
> Regards
> Ganesh
>
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5703_25630590.1224600522295--

From java-user-return-36743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 18:59:46 2008
Return-Path: <java-user-return-36743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78653 invoked from network); 21 Oct 2008 18:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 18:59:45 -0000
Received: (qmail 24664 invoked by uid 500); 21 Oct 2008 18:59:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24635 invoked by uid 500); 21 Oct 2008 18:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24620 invoked by uid 99); 21 Oct 2008 18:59:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 11:59:40 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 18:58:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KsMRd-0007VN-RW
	for java-user@lucene.apache.org; Tue, 21 Oct 2008 11:59:05 -0700
Message-ID: <20097121.post@talk.nabble.com>
Date: Tue, 21 Oct 2008 11:59:05 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser returning TermQuery instead of PhraseQuery?
In-Reply-To: <359a92830810210512u2a71242aj67a27b1eca4c9833@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <20082388.post@talk.nabble.com> <48FD6C7A.4010305@nuix.com> <20087679.post@talk.nabble.com> <359a92830810210512u2a71242aj67a27b1eca4c9833@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I have tried doing both the indexing and parsing with the same parser being
the StandardAnalyzer. I'm seeing the same result. 

I'm going to have to search based off the documentid by the looks of it if I
can't do an exact search on a single term.


Erick Erickson wrote:
> 
> I'd really recommend you get a copy of Luke and examine what
> your index really contains. You say:
> 
> <<<This is one case where it is not although the same results are
> produced with the Standard Analyzer.>>>
> 
> StandardAnalyzer? When? If you *index* with SnowballAnalyzer, your
> token would (probably) be "foo" rather than "foo1". So at *query* time,
> it wouldn't make any difference whether you used StandardAnalyzer
> or ShowballAnalyzer, since you dind't index the '1' in foo1. This is
> mostly a guess though....
> 
> StandardAnalyzer is, IMO, a bit of a misnomer. It tries to do more
> than one thinks (e.g. handle e-mail addresses). This sometimes
> produces surprising results.
> 
> You'll find Luke (google lucene luke) is invaluable both for figuring
> out what is in your index and what queries look like when processed
> by various analyzers. And what documents get found. And why <G>.
> 
> And I second Daniel's point. Why do you "sometimes" want exact
> matches and sometimes want stemmed matches? You can't really
> get both of those things out of one field in your documents. If you
> stem at indexing time, the extra data is lost and you can't regain it.
> If you don't stem at index time, you can't very well get stemmed
> matches at query time.....
> 
> Best
> Erick
> 
> On Tue, Oct 21, 2008 at 6:45 AM, samd <sdoyle_2@yahoo.com> wrote:
> 
>>
>> The Snowball Analyzer was chosen since there are cases where the stemming
>> is
>> desired. This is one case where it is not although the same results are
>> produced with the Standard Analyzer. If this doesn't work I guess I'll
>> probably need to try to programmatically provide an additional field to
>> the
>> search parameters in order to make the results unique.
>>
>>
>> Daniel Noll-3 wrote:
>> >
>> > samd wrote:
>> >> I have field for example say "foo" I need to match exactly foo but
>> there
>> >> is
>> >> also another field for exampled called "foo1"
>> >>
>> >> What I want is a PhraseQuery so I surround foo with quotes before it
>> gets
>> >> passed to the QueryParser.parse method. However I get back a TermQuery
>> >> and
>> >> the values that match foo1 end up being returned in the results but I
>> >> need
>> >> an exact match on foo.
>> >
>> > I'm not sure what you're trying to achieve, but:
>> >
>> >     1. Merely putting quotes around something doesn't make it a
>> >        PhraseQuery, having more than one term inside the quotes makes
>> >        something a phrase query.
>> >
>> >     2. Stop words sometimes removes a word such that what you thought
>> >        was a two-term query is actually one.
>> >
>> >     3. Whether it's a PhraseQuery or TermQuery has no effect on the way
>> >        it matches each individual term, i.e. it won't be any more or
>> less
>> >        "exact".
>> >
>> >> I don't want to have to have a special case for PhraseQuery where I
>> need
>> >> to
>> >> bypass the parse method and manually construct this. Besides I'm not
>> even
>> >> sure if that will work.
>> >
>> > Even if it does "work" it won't change the semantics.
>> >
>> > This is sounding like an X-Y problem, so what are you actually trying
>> to
>> > achieve?  It sounds like you don't want stemming (talking about "exact"
>> > matches) yet you chose the snowball analyser (whose sole purpose is
>> > stemming, unless I am mistaken...)
>> >
>> > Daniel
>> >
>> >
>> > --
>> > Daniel Noll                            Forensic and eDiscovery Software
>> > Senior Developer                              The world's most advanced
>> > Nuix                                                email data analysis
>> > http://nuix.com/                                and eDiscovery software
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20087679.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20097121.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 19:04:25 2008
Return-Path: <java-user-return-36744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81238 invoked from network); 21 Oct 2008 19:04:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 19:04:24 -0000
Received: (qmail 35883 invoked by uid 500); 21 Oct 2008 19:04:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35856 invoked by uid 500); 21 Oct 2008 19:04:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35845 invoked by uid 99); 21 Oct 2008 19:04:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 12:04:20 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 19:03:09 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2319705rvb.5
        for <java-user@lucene.apache.org>; Tue, 21 Oct 2008 12:03:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=C9208KlX80xiP9fMVgT9NUI97pF5aDQzxnGWLOJeNL0=;
        b=lrCUgFsCxFgMii0vOzG2okgMFgAm+BHz0saGTwKSEPHTn/koxWM9qJCFaQUEj+hg3I
         +FqV2Sk6vAwZ8PGtCEfK+M3cEgihewTXopD+1lJFLUnt6wso+rdC+8ueQlQRGCSHk8MS
         3c4ifJ0AYmt9WokwC0j23ya/fRp1HH1Xuf/a0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XXgvqDkVjQe01Xupsz4M2PSK7UW95wlpGftwRcT0+k8qURO1g/GP7lQvL2h0SmYF1r
         2XHrAkT3ImEExwv8QtV6HboGE2x6U3kKltPLB48Pt5i9rmPnwPCmO7cdLMBQi//cI3Z5
         HB36ZL7rRGCCBdINA0dBysquHYsYAy6Ns7hWo=
Received: by 10.141.75.6 with SMTP id c6mr5809893rvl.286.1224615827747;
        Tue, 21 Oct 2008 12:03:47 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 21 Oct 2008 12:03:47 -0700 (PDT)
Message-ID: <359a92830810211203n437e6be3m19d9e605ccc5049a@mail.gmail.com>
Date: Tue, 21 Oct 2008 15:03:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser returning TermQuery instead of PhraseQuery?
In-Reply-To: <20097121.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8790_23295543.1224615827737"
References: <20082388.post@talk.nabble.com> <48FD6C7A.4010305@nuix.com>
	 <20087679.post@talk.nabble.com>
	 <359a92830810210512u2a71242aj67a27b1eca4c9833@mail.gmail.com>
	 <20097121.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8790_23295543.1224615827737
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

this can absolutely be done, so don't go off the deep end <G>.

Could we see the index snippet and the search snippet when
you tried with StandardAnalyzer?

Etick

On Tue, Oct 21, 2008 at 2:59 PM, samd <sdoyle_2@yahoo.com> wrote:

>
> I have tried doing both the indexing and parsing with the same parser being
> the StandardAnalyzer. I'm seeing the same result.
>
> I'm going to have to search based off the documentid by the looks of it if
> I
> can't do an exact search on a single term.
>
>
> Erick Erickson wrote:
> >
> > I'd really recommend you get a copy of Luke and examine what
> > your index really contains. You say:
> >
> > <<<This is one case where it is not although the same results are
> > produced with the Standard Analyzer.>>>
> >
> > StandardAnalyzer? When? If you *index* with SnowballAnalyzer, your
> > token would (probably) be "foo" rather than "foo1". So at *query* time,
> > it wouldn't make any difference whether you used StandardAnalyzer
> > or ShowballAnalyzer, since you dind't index the '1' in foo1. This is
> > mostly a guess though....
> >
> > StandardAnalyzer is, IMO, a bit of a misnomer. It tries to do more
> > than one thinks (e.g. handle e-mail addresses). This sometimes
> > produces surprising results.
> >
> > You'll find Luke (google lucene luke) is invaluable both for figuring
> > out what is in your index and what queries look like when processed
> > by various analyzers. And what documents get found. And why <G>.
> >
> > And I second Daniel's point. Why do you "sometimes" want exact
> > matches and sometimes want stemmed matches? You can't really
> > get both of those things out of one field in your documents. If you
> > stem at indexing time, the extra data is lost and you can't regain it.
> > If you don't stem at index time, you can't very well get stemmed
> > matches at query time.....
> >
> > Best
> > Erick
> >
> > On Tue, Oct 21, 2008 at 6:45 AM, samd <sdoyle_2@yahoo.com> wrote:
> >
> >>
> >> The Snowball Analyzer was chosen since there are cases where the
> stemming
> >> is
> >> desired. This is one case where it is not although the same results are
> >> produced with the Standard Analyzer. If this doesn't work I guess I'll
> >> probably need to try to programmatically provide an additional field to
> >> the
> >> search parameters in order to make the results unique.
> >>
> >>
> >> Daniel Noll-3 wrote:
> >> >
> >> > samd wrote:
> >> >> I have field for example say "foo" I need to match exactly foo but
> >> there
> >> >> is
> >> >> also another field for exampled called "foo1"
> >> >>
> >> >> What I want is a PhraseQuery so I surround foo with quotes before it
> >> gets
> >> >> passed to the QueryParser.parse method. However I get back a
> TermQuery
> >> >> and
> >> >> the values that match foo1 end up being returned in the results but I
> >> >> need
> >> >> an exact match on foo.
> >> >
> >> > I'm not sure what you're trying to achieve, but:
> >> >
> >> >     1. Merely putting quotes around something doesn't make it a
> >> >        PhraseQuery, having more than one term inside the quotes makes
> >> >        something a phrase query.
> >> >
> >> >     2. Stop words sometimes removes a word such that what you thought
> >> >        was a two-term query is actually one.
> >> >
> >> >     3. Whether it's a PhraseQuery or TermQuery has no effect on the
> way
> >> >        it matches each individual term, i.e. it won't be any more or
> >> less
> >> >        "exact".
> >> >
> >> >> I don't want to have to have a special case for PhraseQuery where I
> >> need
> >> >> to
> >> >> bypass the parse method and manually construct this. Besides I'm not
> >> even
> >> >> sure if that will work.
> >> >
> >> > Even if it does "work" it won't change the semantics.
> >> >
> >> > This is sounding like an X-Y problem, so what are you actually trying
> >> to
> >> > achieve?  It sounds like you don't want stemming (talking about
> "exact"
> >> > matches) yet you chose the snowball analyser (whose sole purpose is
> >> > stemming, unless I am mistaken...)
> >> >
> >> > Daniel
> >> >
> >> >
> >> > --
> >> > Daniel Noll                            Forensic and eDiscovery
> Software
> >> > Senior Developer                              The world's most
> advanced
> >> > Nuix                                                email data
> analysis
> >> > http://nuix.com/                                and eDiscovery
> software
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> >
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20087679.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20097121.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8790_23295543.1224615827737--

From java-user-return-36745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 20:25:09 2008
Return-Path: <java-user-return-36745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11644 invoked from network); 21 Oct 2008 20:25:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 20:25:09 -0000
Received: (qmail 67272 invoked by uid 500); 21 Oct 2008 20:25:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67246 invoked by uid 500); 21 Oct 2008 20:25:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67235 invoked by uid 99); 21 Oct 2008 20:25:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 13:25:04 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 20:23:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KsNmJ-0003c2-8C
	for java-user@lucene.apache.org; Tue, 21 Oct 2008 13:24:31 -0700
Message-ID: <20098587.post@talk.nabble.com>
Date: Tue, 21 Oct 2008 13:24:31 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser returning TermQuery instead of PhraseQuery?
In-Reply-To: <359a92830810211203n437e6be3m19d9e605ccc5049a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <20082388.post@talk.nabble.com> <48FD6C7A.4010305@nuix.com> <20087679.post@talk.nabble.com> <359a92830810210512u2a71242aj67a27b1eca4c9833@mail.gmail.com> <20097121.post@talk.nabble.com> <359a92830810211203n437e6be3m19d9e605ccc5049a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm using Hibernate Search and now looking I think it is more related to
this. Hibernate Search indexing and parsing is based on Lucene but it is
tied to the entities unless you use projections.

I guess I'll need to go down this road for now.

Thanks
-- 
View this message in context: http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20098587.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 21:20:23 2008
Return-Path: <java-user-return-36746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31442 invoked from network); 21 Oct 2008 21:20:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 21:20:23 -0000
Received: (qmail 30973 invoked by uid 500); 21 Oct 2008 21:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30508 invoked by uid 500); 21 Oct 2008 21:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30495 invoked by uid 99); 21 Oct 2008 21:20:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 14:20:18 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 21:19:08 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2369490rvb.5
        for <java-user@lucene.apache.org>; Tue, 21 Oct 2008 14:19:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=+VgDE/P1WmGhym4offrvbTVPMTlb4WprnQl6uDxMtk4=;
        b=d1eDeGn/sW26RQuXiGl2VAVgCmv9iK/VuiEHUoHRvMv712iVIAl+LuIunpZYaWX4XM
         j0Z84nbVuJar9vQrHHCxEZvrNr+j4feDvGMdGDAnTX7V9CH+r8GAlcy+NiEJJw6Gt0hh
         W8fNayaQPAqbAzRZ/3+pt9IcoAjZ4BwpVLbws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vmId2hwXs3DiAUW2tgC1592qIe1ow+zDF7FA2fiCjLqjYUzS+vpb1JKo9+IR7ZxyIi
         PJRduOZ9/VR736sy7t4bH4D2czP7kTFwOwAUbXqIbOSvxtT28z/ibDHfVc5gKNVIzHOI
         0H37jARysGDdNMMLMeAtpB4XDnd5L0Q95B0z0=
Received: by 10.140.249.20 with SMTP id w20mr5931081rvh.189.1224623986491;
        Tue, 21 Oct 2008 14:19:46 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 21 Oct 2008 14:19:46 -0700 (PDT)
Message-ID: <359a92830810211419t48fa381eged928ad5e1c2e65a@mail.gmail.com>
Date: Tue, 21 Oct 2008 17:19:46 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser returning TermQuery instead of PhraseQuery?
In-Reply-To: <20098587.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10784_23935661.1224623986485"
References: <20082388.post@talk.nabble.com> <48FD6C7A.4010305@nuix.com>
	 <20087679.post@talk.nabble.com>
	 <359a92830810210512u2a71242aj67a27b1eca4c9833@mail.gmail.com>
	 <20097121.post@talk.nabble.com>
	 <359a92830810211203n437e6be3m19d9e605ccc5049a@mail.gmail.com>
	 <20098587.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10784_23935661.1224623986485
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

ummmm, that would have been a really useful bit of information in
your original post....

Erick

On Tue, Oct 21, 2008 at 4:24 PM, samd <sdoyle_2@yahoo.com> wrote:

>
> I'm using Hibernate Search and now looking I think it is more related to
> this. Hibernate Search indexing and parsing is based on Lucene but it is
> tied to the entities unless you use projections.
>
> I guess I'll need to go down this road for now.
>
> Thanks
> --
> View this message in context:
> http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20098587.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10784_23935661.1224623986485--

From java-user-return-36747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 23:12:32 2008
Return-Path: <java-user-return-36747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88707 invoked from network); 21 Oct 2008 23:12:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 23:12:32 -0000
Received: (qmail 96907 invoked by uid 500); 21 Oct 2008 23:12:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96876 invoked by uid 500); 21 Oct 2008 23:12:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96865 invoked by uid 99); 21 Oct 2008 23:12:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 16:12:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 23:11:19 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7065271C2C1; Tue, 21 Oct 2008 16:11:28 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6C32F71C02E
	for <java-user@lucene.apache.org>; Tue, 21 Oct 2008 16:11:28 -0700 (PDT)
Date: Tue, 21 Oct 2008 16:11:28 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Is there a way to get numTokens via search?
In-Reply-To: <bae6c5640810130502g2b863446s29ed1b9304342bbe@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0810211610050.12571@radix.cryptio.net>
References: <bae6c5640810130502g2b863446s29ed1b9304342bbe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I want to be able to get the number of tokens in a certain field.
: 
: Is this possible? Where is this sort of information stored?

generally this info isn't actually recorded in the index -- it's used to 
compute a fieldNorm, and that is recorded.

You might be able to get this by turning on TermVectors, but that's not a 
feature i've played with so i'm not sure off hte top of my head how you 
would do it.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 21 23:33:21 2008
Return-Path: <java-user-return-36748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98011 invoked from network); 21 Oct 2008 23:33:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Oct 2008 23:33:21 -0000
Received: (qmail 25873 invoked by uid 500); 21 Oct 2008 23:33:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25844 invoked by uid 500); 21 Oct 2008 23:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25833 invoked by uid 99); 21 Oct 2008 23:33:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 16:33:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 23:32:08 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8BEF171C4DB; Tue, 21 Oct 2008 16:32:16 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 884F071C48E
	for <java-user@lucene.apache.org>; Tue, 21 Oct 2008 16:32:16 -0700 (PDT)
Date: Tue, 21 Oct 2008 16:32:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Terms Matching Query
In-Reply-To: <e2111bbb0810141426j13fac1ebp77b1ae35dbf96d3e@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0810211629240.12571@radix.cryptio.net>
References: <e2111bbb0810141426j13fac1ebp77b1ae35dbf96d3e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Dislaimer: I don't really understand your goal, or JSON, so i'm only 
addressing the part of your question i do understand, but i may be 
overlooking something obvious that could help you...


: Which would get expanded to the obvious "name.first:Paul
: name.last:Paul". I was planning on just doing a search for
: __JSON_PATH__:name.* collecting the terms and doing an OR like what
: the old Prefix/Range queries. (I think I read that RangeQueries are
: different now, but right now I'm going for Make It Work)
: 
: So anyway, long story short, is there a way to get just the list of
: terms that match an arbitrary lucene query?

If i'm understanding this part, you don't care about hte results of the 
query, you just wnat to know what Terms match a prefix ... directly using 
the TermEnum is probably the most straight forward way to do this.

: I tried poking at Query.extractTerms(Set terms) but it appears to fall
: down for RangeQueries. I contemplated telling the query parser to use

extractTerms should work fine when dealing with a RangeQuery (but not a 
constantScoreRangeQuery) but the trick is extractTerms only makes sense on 
a query once it has been rewritten (at which point hte RnageQuery is 
expanded to a BooleanQuery containing all of the terms)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 22 02:25:39 2008
Return-Path: <java-user-return-36749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92442 invoked from network); 22 Oct 2008 02:25:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Oct 2008 02:25:38 -0000
Received: (qmail 14713 invoked by uid 500); 22 Oct 2008 02:25:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14688 invoked by uid 500); 22 Oct 2008 02:25:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14677 invoked by uid 99); 22 Oct 2008 02:25:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 19:25:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of crackeur@comcast.net designates 76.96.30.56 as permitted sender)
Received: from [76.96.30.56] (HELO QMTA06.emeryville.ca.mail.comcast.net) (76.96.30.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 02:24:23 +0000
Received: from OMTA04.emeryville.ca.mail.comcast.net ([76.96.30.35])
	by QMTA06.emeryville.ca.mail.comcast.net with comcast
	id Vb6a1a00L0lTkoCA6eQuWP; Wed, 22 Oct 2008 02:24:54 +0000
Received: from your55e5f9e3d2 ([67.161.51.57])
	by OMTA04.emeryville.ca.mail.comcast.net with comcast
	id VeQt1a00P1E2z8r8QeQubH; Wed, 22 Oct 2008 02:24:54 +0000
X-Authority-Analysis: v=1.0 c=1 a=gYQ6COCDvtIA:10 a=FP58Ms26AAAA:8
 a=z-Wa-r2W7BqCDPdfP-AA:9 a=PYFriOfRv9zggwNhk5MA:7
 a=ucK6EiTqDbnPTkn6rLb6UsvgfigA:4 a=XF7b4UCPwd8A:10
Message-ID: <00c001c933ed$5d40bfc0$0402a8c0@your55e5f9e3d2>
From: "jimmy Zhang" <crackeur@comcast.net>
To: <java-user@lucene.apache.org>
References: <e2111bbb0810141426j13fac1ebp77b1ae35dbf96d3e@mail.gmail.com> <Pine.LNX.4.62.0810211629240.12571@radix.cryptio.net>
Subject: [ANN] VTD-XML extended edition released
Date: Tue, 21 Oct 2008 19:24:51 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
X-Virus-Checked: Checked by ClamAV on apache.org

The Java version of extended VTD-XmL is released and available for download.
This version supports 256 GB max file sizes and memory mapped capabilities.
The updated documentation is also available for download. In short, you can
basically do full XPath query on documents that are bigger than memory space
available on your machine.

A special thanks to Duane May who provided value suggestions and inputs and
helped refine the VTD specs to make this happen.

To download the package and the documentation, go to
https://sourceforge.net/project/downloading.php?group_id=110612&use_mirror=&filename=vtd-xml_2.4_doc.zip&64621261

https://sourceforge.net/project/downloading.php?group_id=110612&use_mirror=&filename=ximpleware_extended_2.4.zip&99532507 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 22 03:20:30 2008
Return-Path: <java-user-return-36750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8794 invoked from network); 22 Oct 2008 03:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Oct 2008 03:20:30 -0000
Received: (qmail 55073 invoked by uid 500); 22 Oct 2008 03:20:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54941 invoked by uid 500); 22 Oct 2008 03:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54930 invoked by uid 99); 22 Oct 2008 03:20:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Oct 2008 20:20:25 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 03:19:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KsUGG-0003Y3-HA
	for java-user@lucene.apache.org; Tue, 21 Oct 2008 20:19:52 -0700
Message-ID: <20103354.post@talk.nabble.com>
Date: Tue, 21 Oct 2008 20:19:52 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser returning TermQuery instead of PhraseQuery?
In-Reply-To: <359a92830810211419t48fa381eged928ad5e1c2e65a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <20082388.post@talk.nabble.com> <48FD6C7A.4010305@nuix.com> <20087679.post@talk.nabble.com> <359a92830810210512u2a71242aj67a27b1eca4c9833@mail.gmail.com> <20097121.post@talk.nabble.com> <359a92830810211203n437e6be3m19d9e605ccc5049a@mail.gmail.com> <20098587.post@talk.nabble.com> <359a92830810211419t48fa381eged928ad5e1c2e65a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry about that. The areas were related to Lucene specific features in terms
of the indexing and parsing. The problem lied with the dataset tied to the
entities.

I'll be sure to state that before hand in the future.

Thanks.


Erick Erickson wrote:
> 
> ummmm, that would have been a really useful bit of information in
> your original post....
> 
> Erick
> 
> On Tue, Oct 21, 2008 at 4:24 PM, samd <sdoyle_2@yahoo.com> wrote:
> 
>>
>> I'm using Hibernate Search and now looking I think it is more related to
>> this. Hibernate Search indexing and parsing is based on Lucene but it is
>> tied to the entities unless you use projections.
>>
>> I guess I'll need to go down this road for now.
>>
>> Thanks
>> --
>> View this message in context:
>> http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20098587.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/QueryParser-returning-TermQuery-instead-of-PhraseQuery--tp20082388p20103354.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 22 18:16:41 2008
Return-Path: <java-user-return-36751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90682 invoked from network); 22 Oct 2008 18:16:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Oct 2008 18:16:41 -0000
Received: (qmail 35181 invoked by uid 500); 22 Oct 2008 18:16:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35156 invoked by uid 500); 22 Oct 2008 18:16:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35145 invoked by uid 99); 22 Oct 2008 18:16:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 11:16:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 18:15:23 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 74DFC5B4F9
	for <java-user@lucene.apache.org>; Wed, 22 Oct 2008 11:16:01 -0700 (PDT)
Message-Id: <55F85F1A-7A18-4E9F-AECB-D006805996B0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <9ab5344d0810210714v2a498c93g626cf9d659104baa@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Query Expansion Module for Lucene based on BM25 ranking function
Date: Wed, 22 Oct 2008 14:16:00 -0400
References: <9ab5344d0810210714v2a498c93g626cf9d659104baa@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jos=E9,

Can you explain your approach to implementing?  I'm curious how you =20
incorporated in the avg. doc length.  Also, have you followed any of =20
the flexible indexing discussions?

Finally, what's the license on this code?

Thanks,
Grant

On Oct 21, 2008, at 10:14 AM, Jos=E9 Ram=F3n P=E9rez Ag=FCera wrote:

> Hello,
>
> We have implemented a research module for lucene using BM25 and our
> structured version of BM25 as ranking functions and a couple of
> state-of-art query expansion algoritms.
>
> This implementation is quite different to other query expansion
> modules for Lucene that are available in the web.
>
> We have used this implementation in CLEF 2008 Robust WSD track
> http://ixa2.si.ehu.es/clirwsd/ with very good results. The code and
> other technical and scientific details can be accessed here:
>
> http://grasia.fdi.ucm.es/jose/query-expansion
>
> This is an alpha0.0.never.used.before.by.anyone version, we will work
> on it in the following months to make it easier to use.
>
> Please do not hesitate to send comments, questions and/or complaints
> to the authors.
>
> jose
>
> --=20
> Jos=E9 Ram=F3n P=E9rez Ag=FCera
>
> Dept. de Ingenier=EDa del Software e Inteligencia Artificial
> Despacho 411 tlf. 913947599
> Facultad de Inform=E1tica
> Universidad Complutense de Madrid
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 22 22:08:19 2008
Return-Path: <java-user-return-36752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12518 invoked from network); 22 Oct 2008 22:08:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Oct 2008 22:08:18 -0000
Received: (qmail 17580 invoked by uid 500); 22 Oct 2008 22:08:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16599 invoked by uid 500); 22 Oct 2008 22:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16588 invoked by uid 99); 22 Oct 2008 22:08:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 15:08:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jose.aguera@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 22:07:00 +0000
Received: by nf-out-0910.google.com with SMTP id g16so12917nfd.15
        for <java-user@lucene.apache.org>; Wed, 22 Oct 2008 15:06:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=+AIwYD2xgDjkrr1yvil8+IVi9i9W/SbTelVQ98rAeEk=;
        b=r0CKP5QfiTkkJ3r5nS+dD7pqjaQMNsplqu3K5/aitgMORnVXe7p/e35ap1YosUkLfe
         Y8w7iBtxJYSZZAcm6vOOh/WZvlkf554nDzuOGulq88RoCFCgN+nV0MnCIyIvPraTWdUn
         pe8mEpiF0t1tgyLwXJXGAZJV4PMkllFZ4onTo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=PlN3e9KOMIMZGbFhS8+8RfLsTYCDHlZp6G4sMEGC59Fe8VFZeVTX94KEsMUwGX5iqL
         1g6bz/XtAqfS4CUMIEtvRd1Mh3Nww7WIAPA8Ukj9ONBP+5NwZ1YgkYmZ1vZVhwZBRHeE
         lc7Y9jxaCun6vGRMI903hn4KvDAgcVVkZyX4E=
Received: by 10.210.92.8 with SMTP id p8mr8003627ebb.101.1224713210968;
        Wed, 22 Oct 2008 15:06:50 -0700 (PDT)
Received: from ?10.0.0.6? (78.Red-83-39-147.dynamicIP.rima-tde.net [83.39.147.78])
        by mx.google.com with ESMTPS id m5sm3967635gve.3.2008.10.22.15.06.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 22 Oct 2008 15:06:49 -0700 (PDT)
Message-Id: <FB376DC8-2A1A-4630-87B4-B01BF5C23327@gmail.com>
From: =?GB2312?Q?Jos=A8=A6_Ram=A8=AEn_Perez_Aguera?= <jose.aguera@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <55F85F1A-7A18-4E9F-AECB-D006805996B0@apache.org>
Content-Type: text/plain;
	charset=GB2312;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable
X-Mailer: iPhone Mail (5C1)
Mime-Version: 1.0 (iPhone Mail 5C1)
Subject: Re: Query Expansion Module for Lucene based on BM25 ranking function
Date: Thu, 23 Oct 2008 00:07:00 +0200
References: <9ab5344d0810210714v2a498c93g626cf9d659104baa@mail.gmail.com> <55F85F1A-7A18-4E9F-AECB-D006805996B0@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Grant,

Our query expansion approach is quite simple, we apply pseudo-=20
relevance feedback techniques, where a number of top retrieved =20
documents are used to extract the terms candidates to expand the =20
original query. We have used TermPositions in query time to extract =20
the term statistics necessaries for query expansion. On the other =20
hand, to implement BM25, we have used the implementation propoused by =20=

Joaquin perez, where avg. Length is computed in indexing time and it =20
is used as a constant in query time.

We know that this is not the best way to do that, but we don't have =20
the knowledge about lucene to made a better implementation. Our code =20
is  for research projects only, and it is not robust enougth for real-=20=

world projects.

I have not followed any of the flexible indexing discussions, but this =20=

subject seems to be very interesting to me. Do you have any pointers?.

Finally, the code has been reliased under apache license. But we are =20
not experts on this kind of things. Our idea is that everyone can take =20=

the code, change it and use it without constraints.

Best regards

Jose

Jos=A8=A6 Ram=A8=AEn P=A8=A6rez Ag=A8=B9era

On 22/10/2008, at 20:16, Grant Ingersoll <gsingers@apache.org> wrote:

> Hi Jos=A8=A6,
>
> Can you explain your approach to implementing?  I'm curious how you =20=

> incorporated in the avg. doc length.  Also, have you followed any of =20=

> the flexible indexing discussions?
>
> Finally, what's the license on this code?
>
> Thanks,
> Grant
>
> On Oct 21, 2008, at 10:14 AM, Jos=A8=A6 Ram=A8=AEn P=A8=A6rez Ag=A8=B9er=
a wrote:
>
>> Hello,
>>
>> We have implemented a research module for lucene using BM25 and our
>> structured version of BM25 as ranking functions and a couple of
>> state-of-art query expansion algoritms.
>>
>> This implementation is quite different to other query expansion
>> modules for Lucene that are available in the web.
>>
>> We have used this implementation in CLEF 2008 Robust WSD track
>> http://ixa2.si.ehu.es/clirwsd/ with very good results. The code and
>> other technical and scientific details can be accessed here:
>>
>> http://grasia.fdi.ucm.es/jose/query-expansion
>>
>> This is an alpha0.0.never.used.before.by.anyone version, we will work
>> on it in the following months to make it easier to use.
>>
>> Please do not hesitate to send comments, questions and/or complaints
>> to the authors.
>>
>> jose
>>
>> --=20
>> Jos=A8=A6 Ram=A8=AEn P=A8=A6rez Ag=A8=B9era
>>
>> Dept. de Ingenier=A8=AAa del Software e Inteligencia Artificial
>> Despacho 411 tlf. 913947599
>> Facultad de Inform=A8=A2tica
>> Universidad Complutense de Madrid
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
> http://www.lucenebootcamp.com
>
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 22 23:02:15 2008
Return-Path: <java-user-return-36753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26885 invoked from network); 22 Oct 2008 23:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Oct 2008 23:02:15 -0000
Received: (qmail 56271 invoked by uid 500); 22 Oct 2008 23:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56247 invoked by uid 500); 22 Oct 2008 23:02:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56236 invoked by uid 99); 22 Oct 2008 23:02:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 16:02:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of reethahari@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 23:01:03 +0000
Received: by rv-out-0506.google.com with SMTP id f6so38770rvb.5
        for <java-user@lucene.apache.org>; Wed, 22 Oct 2008 16:01:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=uZprHEaztBHQDxWJPHcsa+FIVAUwxZe7CfyMC7CHrLA=;
        b=WL2YX1cSM+VLI1sNirkYXatTqsL6rQ4pvgc/K09IAM0qYVqWnquFkko2UP0QhwboQ6
         jIjA8fbdV7PgRnOeOvmsvu8ZFHGJSsZ4/Ahzd4wONwLfmflVe3Ka80LUllzrWn4ce8MG
         W7tzMKPM47Pmcp/xmexzVDjAfZjb4n/RygG5E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=DdMDf8PNNIv14imAqlOA3ioxueCKOA5MY0U2wAq5UJcMtz0Y59fOhv3JX3UKA9dQOj
         GeQh6EIKLPnWKtSMlMSZKzeF+WV/Z8WwdovZsfChNgksLY4bRp+RVU440Sl7Q3ajttyR
         Grk1SPzfigNOmjk96AxyjTn+Nciy8R4xjeDDE=
Received: by 10.141.179.5 with SMTP id g5mr6808475rvp.237.1224716492902;
        Wed, 22 Oct 2008 16:01:32 -0700 (PDT)
Received: by 10.141.22.6 with HTTP; Wed, 22 Oct 2008 16:01:32 -0700 (PDT)
Message-ID: <6e153e3c0810221601l63c6935dteed1cd36d58b9e4e@mail.gmail.com>
Date: Wed, 22 Oct 2008 16:01:32 -0700
From: "Reetha Hariharan" <reethahari@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie Question - Lucene Sorting NOT Ignoring NULL values
In-Reply-To: <c68e39170810141012u1619a23cnd90e8fcfe6ac4327@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24576_9986907.1224716492896"
References: <6e153e3c0810140135xdecf1fj3490108f51c0bc37@mail.gmail.com>
	 <c68e39170810140811w54b37ee5u54fa6cdcf0075eb0@mail.gmail.com>
	 <6e153e3c0810140955u5c792ff9vcbed67b92dad063b@mail.gmail.com>
	 <c68e39170810141012u1619a23cnd90e8fcfe6ac4327@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24576_9986907.1224716492896
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Yonik:

A simple RangeFilter did the trick

> public class NotNullRangeFilter extends org.apache.lucene.search.Filter {
>    private RangeFilter rangeFilter;
>    public BitSet bits(IndexReader reader) throws IOException {
>        rangeFilter = RangeFilter.More("lastUpdatedDate"/*Field to sort*/,
> "" /*atleast an empty string but not null*/);
>        return rangeFilter.bits(reader);
>    }
> }

the above code actually works perfectly.



On 10/14/08, Yonik Seeley <yonik@apache.org> wrote:
>
> You're on the right track I think... perhaps try using RangeFilter
> directly rather than creating your own class.  Something like:
>
> Filter filter = RangeFilter.More("lastUpdatedDate","");
> searcher.search(query, filter)
>
> If that works for you, then the next step would be to look at
> CachingWrapperFilter, which can help prevent calculating the filter
> for every query.
>
> -Yonik
>
> On Tue, Oct 14, 2008 at 12:55 PM, Reetha Hariharan <reethahari@gmail.com>
> wrote:
> > Hi Yonik,
> >
> > Thanks for your reply.
> >
> > In my case I don't want those document that has Null value for the field
> > that I am willing to sort
> >
> > I tried writing my own filter using RangeFilter, but it doesn't work.
> >
> > I used something like the following in my custom filter.
> >
> > public class NotNullRangeFilter extends org.apache.lucene.search.Filter {
> >    private RangeFilter rangeFilter;
> >    public BitSet bits(IndexReader reader) throws IOException {
> >        rangeFilter = RangeFilter.More("lastUpdatedDate"/*Field to sort*/,
> > "" /*atleast an empty string but not null*/);
> >        return rangeFilter.bits(reader);
> >    }
> > }
> >
> > The above does not work. Let me know if I am doing something wrong.
> >
> > Any inputs on this ?
> >
> > Thanks,
> >
> > On Tue, Oct 14, 2008 at 8:11 AM, Yonik Seeley <yonik@apache.org> wrote:
> >
> >> On Tue, Oct 14, 2008 at 4:35 AM, Reetha Hariharan <reethahari@gmail.com
> >
> >> wrote:
> >> > I am searching using one field, say X and want to sort the results
> using
> >> > another, say Y (Which can have null values). But I am expecting Sort
> to
> >> > ignore all the null values and just sort only records that has values
> in
> >> Y
> >> > field.
> >>
> >> Do you want docs with null (missing) values in the results or not?
> >> If so, they need to go somewhere (before or after the others).
> >> If you don't want those docs at all, exclude them in the query, or
> >> with a filter.
> >>
> >> -Yonik
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24576_9986907.1224716492896--

From java-user-return-36754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 03:49:29 2008
Return-Path: <java-user-return-36754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52105 invoked from network); 23 Oct 2008 03:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 03:49:29 -0000
Received: (qmail 27090 invoked by uid 500); 23 Oct 2008 03:49:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27062 invoked by uid 500); 23 Oct 2008 03:49:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27051 invoked by uid 99); 23 Oct 2008 03:49:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 20:49:24 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aashish.Agrawal@morganstanley.com designates 205.228.53.69 as permitted sender)
Received: from [205.228.53.69] (HELO hqmtaint02.ms.com) (205.228.53.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 03:48:12 +0000
Received: from hqmtaint02 (localhost.ms.com [127.0.0.1])
	by hqmtaint02.ms.com (output Postfix) with ESMTP id 6E5A0E38556
	for <java-user@lucene.apache.org>; Wed, 22 Oct 2008 23:48:50 -0400 (EDT)
Received: from ny0030as02 (unknown [170.74.93.68])
	by hqmtaint02.ms.com (internal Postfix) with ESMTP id 4575C11002F
	for <java-user@lucene.apache.org>; Wed, 22 Oct 2008 23:48:50 -0400 (EDT)
Received: from ny0030as02 (localhost [127.0.0.1])
	by ny0030as02 (msa-out Postfix) with ESMTP id AE96CAB80CB
	for <java-user@lucene.apache.org>; Wed, 22 Oct 2008 23:48:49 -0400 (EDT)
Received: from PIWEXOB02.msad.ms.com (piwexob02 [205.228.46.104])
	by ny0030as02 (mta-in Postfix) with ESMTP id 929965CC011
	for <java-user@lucene.apache.org>; Wed, 22 Oct 2008 23:48:49 -0400 (EDT)
Received: from KJWEXBH01.msad.ms.com ([161.144.49.137]) by PIWEXOB02.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Wed, 22 Oct 2008 23:48:49 -0400
Received: from TKWEXMB22.msad.ms.com ([161.144.49.148]) by KJWEXBH01.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Thu, 23 Oct 2008 12:48:46 +0900
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C934C2.4050718E"
Content-Transfer-Encoding: 7bit
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2992
Subject: How to use regexQuery along with fuzzy logic capabilities
Date: Thu, 23 Oct 2008 12:48:46 +0900
Message-ID: <ABF971E134098D40A9F82A75E3D2B46B023D4C22@TKWEXMB22.msad.ms.com>
X-MS-Has-Attach: 
Importance: normal
Priority: normal
X-MS-TNEF-Correlator: 
Thread-Topic: How to use regexQuery along with fuzzy logic capabilities
Thread-Index: Ack0wj+rG7bHRiiHRIObDx8E2aSbEA==
From: "Agrawal, Aashish \(IT\)" <Aashish.Agrawal@morganstanley.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Oct 2008 03:48:46.0759 (UTC) FILETIME=[4085F370:01C934C2]
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 23102008 #1198545, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C934C2.4050718E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,=20
=20
I want to use lucene for a simple search engine. If I use the code like
this,=20
QueryParser parser =3D new QueryParser(field, analyzer);
Query query =3D parser.parse(line);
searcher.search(query)=20
above code doesn't give me regular expression search power, while at the
other hand if I use the below code,=20
RegexQuery rexquery =3D new RegexQuery(new Term(field, line));
searcher.search(rexquery).,=20
I don't get the fuzzy logic and other search abilities which I get using
the analyzer.
=20
I am not java expert, could you please give me a simple example on this
?=20
=20
thanks
Aashish Agrawal
--------------------------------------------------------

NOTICE: If received in error, please destroy and notify sender. Sender =
does not intend to waive confidentiality or privilege. Use of this email =
is prohibited when received in error.

------_=_NextPart_001_01C934C2.4050718E--

From java-user-return-36755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 04:03:54 2008
Return-Path: <java-user-return-36755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56403 invoked from network); 23 Oct 2008 04:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 04:03:53 -0000
Received: (qmail 38412 invoked by uid 500); 23 Oct 2008 04:03:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38054 invoked by uid 500); 23 Oct 2008 04:03:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38043 invoked by uid 99); 23 Oct 2008 04:03:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 21:03:50 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 04:02:40 +0000
Received: by gxk6 with SMTP id 6so8662764gxk.5
        for <java-user@lucene.apache.org>; Wed, 22 Oct 2008 21:03:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:to:subject:from:date
         :content-type:mime-version;
        bh=t1cVEK2jvBc0jBIPB7ZkB0zx/rjPv4SvbQlkxh/I78s=;
        b=fyKOKPdmNQsuB37V4xdrz925xQ+QVXSY1Xnd/X1x1BDAJGvNttmiCMgT9BBigyQH1F
         tIyhp4TYuH4Ls3TOL/nHKaoKjBZm/mkDvF8boB9u6tGq1Dy8Jt/SHxhP60u9qDOBpSiQ
         MqM8P6JUl7PNlBH8wqYGr728yVRQOJkYr7Hqk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:to:subject
         :from:date:content-type:mime-version;
        b=D5GvI2eEWzamPVd3fa7kLB/7DSqkdYUxOso3p8xeRI07r8oqW+NEa2nA8l0IZ1kZej
         eOai1dk/M7dTXweafzNsNVX9B7mVAIimsuu/tsLCCq/5UzLtoup2u3HEVEwIpHDwChfc
         4Q9U5ea4IsOFffHWn4uhUyGcUK+b4dzc1IpAM=
Received: by 10.100.227.6 with SMTP id z6mr42347ang.120.1224734598985;
        Wed, 22 Oct 2008 21:03:18 -0700 (PDT)
Received: from bda153.bisx.prod.on.blackberry (bda153e.bis.na.blackberry.com [67.223.77.153])
        by mx.google.com with ESMTPS id d19sm1726174and.17.2008.10.22.21.03.16
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 22 Oct 2008 21:03:17 -0700 (PDT)
X-rim-org-msg-ref-id:23763016
Message-ID:<23763016-1224734593-cardhu_decombobulator_blackberry.rim.net-597100483-@bxe038.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: hasan.diwan@gmail.com
X-Priority: Normal
References: <ABF971E134098D40A9F82A75E3D2B46B023D4C22@TKWEXMB22.msad.ms.com>
In-Reply-To: <ABF971E134098D40A9F82A75E3D2B46B023D4C22@TKWEXMB22.msad.ms.com>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: How to use regexQuery along with fuzzy logic capabilities
From: "Hasan Diwan" <hasan.diwan@gmail.com>
Date: Thu, 23 Oct 2008 04:00:44 +0000
Content-Type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SSBzZWVtIHRvIHJlY2FsbCBydW5uaW5nIHRoZSBTaW1wbGVRdWVyeVBhcnNlciBmaXJzdC4gSWYg
dGhhdCB0aHJvd3MgYW4gRXhjZXB0aW9uLCBJIHRoZW4gcmFuIGl0IHdpdGggdGhlIFJlZ2V4UXVl
cnlQYXJzZXIgd2l0aCBhIHJlZHVjZWQgc2NvcmUuIEh0aA0KU2VudCB2aWEgQmxhY2tCZXJyeSBi
eSBBVCZUDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiAiQWdyYXdhbCwgQWFz
aGlzaCBcKElUXCkiIDxBYXNoaXNoLkFncmF3YWxAbW9yZ2Fuc3RhbmxleS5jb20+DQoNCkRhdGU6
IFRodSwgMjMgT2N0IDIwMDggMTI6NDg6NDYgDQpUbzogPGphdmEtdXNlckBsdWNlbmUuYXBhY2hl
Lm9yZz4NClN1YmplY3Q6IEhvdyB0byB1c2UgcmVnZXhRdWVyeSBhbG9uZyB3aXRoIGZ1enp5IGxv
Z2ljIGNhcGFiaWxpdGllcw0KDQoNCkhpLCANCiANCkkgd2FudCB0byB1c2UgbHVjZW5lIGZvciBh
IHNpbXBsZSBzZWFyY2ggZW5naW5lLiBJZiBJIHVzZSB0aGUgY29kZSBsaWtlDQp0aGlzLCANClF1
ZXJ5UGFyc2VyIHBhcnNlciA9IG5ldyBRdWVyeVBhcnNlcihmaWVsZCwgYW5hbHl6ZXIpOw0KUXVl
cnkgcXVlcnkgPSBwYXJzZXIucGFyc2UobGluZSk7DQpzZWFyY2hlci5zZWFyY2gocXVlcnkpIA0K
YWJvdmUgY29kZSBkb2Vzbid0IGdpdmUgbWUgcmVndWxhciBleHByZXNzaW9uIHNlYXJjaCBwb3dl
ciwgd2hpbGUgYXQgdGhlDQpvdGhlciBoYW5kIGlmIEkgdXNlIHRoZSBiZWxvdyBjb2RlLCANClJl
Z2V4UXVlcnkgcmV4cXVlcnkgPSBuZXcgUmVnZXhRdWVyeShuZXcgVGVybShmaWVsZCwgbGluZSkp
Ow0Kc2VhcmNoZXIuc2VhcmNoKHJleHF1ZXJ5KS4sIA0KSSBkb24ndCBnZXQgdGhlIGZ1enp5IGxv
Z2ljIGFuZCBvdGhlciBzZWFyY2ggYWJpbGl0aWVzIHdoaWNoIEkgZ2V0IHVzaW5nDQp0aGUgYW5h
bHl6ZXIuDQogDQpJIGFtIG5vdCBqYXZhIGV4cGVydCwgY291bGQgeW91IHBsZWFzZSBnaXZlIG1l
IGEgc2ltcGxlIGV4YW1wbGUgb24gdGhpcw0KPyANCiANCnRoYW5rcw0KQWFzaGlzaCBBZ3Jhd2Fs
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQ0KDQpOT1RJQ0U6IElmIHJlY2VpdmVkIGluIGVycm9yLCBwbGVhc2UgZGVzdHJveSBhbmQgbm90
aWZ5IHNlbmRlci4gU2VuZGVyIGRvZXMgbm90IGludGVuZCB0byB3YWl2ZSBjb25maWRlbnRpYWxp
dHkgb3IgcHJpdmlsZWdlLiBVc2Ugb2YgdGhpcyBlbWFpbCBpcyBwcm9oaWJpdGVkIHdoZW4gcmVj
ZWl2ZWQgaW4gZXJyb3IuDQoNCg==



From java-user-return-36756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 05:22:33 2008
Return-Path: <java-user-return-36756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85466 invoked from network); 23 Oct 2008 05:22:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 05:22:33 -0000
Received: (qmail 89613 invoked by uid 500); 23 Oct 2008 05:22:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89586 invoked by uid 500); 23 Oct 2008 05:22:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89575 invoked by uid 99); 23 Oct 2008 05:22:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 22:22:28 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.77] (HELO smtp120.mail.mud.yahoo.com) (209.191.84.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Oct 2008 05:21:15 +0000
Received: (qmail 63935 invoked from network); 23 Oct 2008 05:21:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=ZGnBEfbwYOjiDGlzrklq1Cx4hY9GeKZDS+pe3rjjmzXQlZ7yOBCakL95g0XSKeBqhC81ZrXIm+h+zsLiSQdVCIm+e1dfGJ5d7OKTMznZkplgDZv1OqUYv19LxQV3Je3TJ304FQYFBhj3WmVnqd6fdmMsxDG4mB8ATx66XOwh7tM=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp120.mail.mud.yahoo.com with SMTP; 23 Oct 2008 05:21:51 -0000
X-YMail-OSG: tsHNC8EVM1lsqInL8HwkMgxFTqU..jmAgRxZW8FHGp3wndPsUb76bggRZiQnWFvY7R3a7kS.7fhZ8HBivYXdwy7nML3goQ2SGq119NBwodTbChdN11Hz3rrAU2lnr8EwxGmqiHrZzSPI2K5utLv2QMIi
X-Yahoo-Newman-Property: ymail-3
Message-ID: <050a01c934cf$412fdc20$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com> <359a92830810210748n5eab2590o379838222308de1c@mail.gmail.com>
Subject: Re: Multisearcher will maintain index order sorting?
Date: Thu, 23 Oct 2008 10:50:52 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

My Index DB is having 10 million records and it will grow to 30 million. 
Currently I am using millisecond timestamp and the RAM cosumption is more. I 
will change the resolution to minute. I am using 2 searcher objects 
refreshing each other every minute. When i do a warmup query with sort of 
timestamp then the cpu is spiked to 100% and this is happening for every 
minute.  In order to avoid these issues, i am planning to break my DB and to 
do sort on indexed order.

Will multisearcher will maintain indexed order on sorting?

Regards
Ganesh


----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, October 21, 2008 8:18 PM
Subject: Re: Multisearcher will maintain index order sorting?


> You say the timestamp sort is taking lots of RAM, which leads
> me to ask "what resolution are you using and do you need
> that great a resolution"?
>
> As I understand it, sorting is sensitive to the number of unique
> terms, so if you're storing millisecond timestamps you have a
> whole lot more terms than if you store, say, minute resolution.
> So one possibility would be to use a coarser resolution than
> you are now, if you app can.
>
> Best
> Erick
>
> On Tue, Oct 21, 2008 at 9:38 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> Hello all,
>>
>> I need to maintain multiple db and i don't want to sort on datetime as it
>> is taking huge RAM. I want to sort on indexed order. Using Multisearcher 
>> or
>> ParallelMultiSearcher will maintain the index order. If it does then i 
>> don't
>> need to merge the indexDB.
>>
>> Regards
>> Ganesh
>>
>>
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 05:28:12 2008
Return-Path: <java-user-return-36757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90390 invoked from network); 23 Oct 2008 05:28:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 05:28:12 -0000
Received: (qmail 95539 invoked by uid 500); 23 Oct 2008 05:28:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95500 invoked by uid 500); 23 Oct 2008 05:28:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95489 invoked by uid 99); 23 Oct 2008 05:28:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Oct 2008 22:28:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.89.192.138] (HELO postoffice2.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 05:26:58 +0000
X-ASG-Debug-ID: 1224739627-187201ad0000-H1Y1KX
X-Barracuda-URL: http://postoffice2.aconex.com:8000/cgi-bin/mark.cgi
Received: from postoffice.aconex.com (localhost [127.0.0.1])
	by postoffice2.aconex.com (Spam Firewall) with ESMTP id 8B4F32770D8
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 16:27:07 +1100 (EST)
Received: from postoffice.aconex.com (postoffice.yarra.acx [192.168.102.1]) by postoffice2.aconex.com with ESMTP id ztsGCuUXJwjWQtcK for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 16:27:07 +1100 (EST)
Received: from [192.168.5.7] (melho0.aconex.com [203.89.192.141])
	by postoffice.aconex.com (Postfix) with ESMTP id 206DB92C2E9
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 16:23:00 +1100 (EST)
Message-Id: <DE4E6F97-9895-404B-845F-B485A5A4F33C@aconex.com>
From: Paul Smith <psmith@aconex.com>
To: java-user@lucene.apache.org
In-Reply-To: <050a01c934cf$412fdc20$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
X-ASG-Orig-Subj: Re: Multisearcher will maintain index order sorting?
Subject: Re: Multisearcher will maintain index order sorting?
X-Priority: 3
Date: Thu, 23 Oct 2008 16:27:06 +1100
References: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com> <359a92830810210748n5eab2590o379838222308de1c@mail.gmail.com> <050a01c934cf$412fdc20$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Barracuda-Connect: postoffice.yarra.acx[192.168.102.1]
X-Barracuda-Start-Time: 1224739628
X-Barracuda-Virus-Scanned: by Aconex Staff Email Spam Firewall at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org


On 23/10/2008, at 4:20 PM, Ganesh wrote:

> My Index DB is having 10 million records and it will grow to 30  
> million. Currently I am using millisecond timestamp and the RAM  
> cosumption is more. I will change the resolution to minute. I am  
> using 2 searcher objects refreshing each other every minute. When i  
> do a warmup query with sort of timestamp then the cpu is spiked to  
> 100% and this is happening for every minute.  In order to avoid  
> these issues, i am planning to break my DB and to do sort on indexed  
> order.
>
> Will multisearcher will maintain indexed order on sorting?


If you need to keep the millisecond accuracy, break down the timestamp  
into 3 fields: day, time, millisecond, and sort on 3 fields.  This way  
each field has a much smaller number of distinct values and well  
occupy vastly less memory over time.  I don't think there's much  
overhead in this approach either, because in most cases, the top-level  
field (day) will provide most of the sorting ability, and Lucene will  
only need to hit the time & millisecond fields less frequently for  
comparison.

I believe Multisearcher does a merge sort of the 2 (or more) sub- 
searchers, so there is an overhead in using in versus a single searcher.

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 08:08:34 2008
Return-Path: <java-user-return-36758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70306 invoked from network); 23 Oct 2008 08:08:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 08:08:33 -0000
Received: (qmail 91505 invoked by uid 500); 23 Oct 2008 08:08:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91168 invoked by uid 500); 23 Oct 2008 08:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91157 invoked by uid 99); 23 Oct 2008 08:08:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 01:08:28 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.224] (HELO smtp121.mail.mud.yahoo.com) (209.191.84.224)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Oct 2008 08:07:15 +0000
Received: (qmail 28846 invoked from network); 23 Oct 2008 08:07:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=O55JA8MhFxWOTRYGMQeK4GMlGW6Fba6Ig4/coUlNC+GBdMVY0jkl/EMhocldD5RDlOWelKm1M2WEXCSE2R8dJ+JtXrMPs4CvMhUZHU27hQciM2kLLcor3vC6R134rDmQMm4kKaVs/uLgRMcIVqM2CxckmDVo45ehskAOR3+Ht0U=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp121.mail.mud.yahoo.com with SMTP; 23 Oct 2008 08:07:52 -0000
X-YMail-OSG: .SpwvsMVM1lYEtEbYVaxpDoe_sDtnujZZuZZgK2w_wxqvW4Ze9F.5FzYaeqpfce8lELWpWwJo4XQYN8.uXH2_fmGAEhWWuiTkS4i9cvlk2BtmciYOOfQdAdgIacsqcE7JapPZ2P3aMLHc7fmfz_qNDVpfntJmbQkRiNXJgXEEuA832DqM2.iq7Laydwf
X-Yahoo-Newman-Property: ymail-3
Message-ID: <055f01c934e6$731e0740$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com> <359a92830810210748n5eab2590o379838222308de1c@mail.gmail.com> <050a01c934cf$412fdc20$330bc30a@sv.us.sonicwall.com> <DE4E6F97-9895-404B-845F-B485A5A4F33C@aconex.com>
Subject: Re: Multisearcher will maintain index order sorting?
Date: Thu, 23 Oct 2008 13:37:49 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Multisearcher and ParallelMultiSearcher, when requested to sort on doc 
(indexed order), it merges the result by docID of each DB.

Regards
Ganesh

----- Original Message ----- 
From: "Paul Smith" <psmith@aconex.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, October 23, 2008 10:57 AM
Subject: Re: Multisearcher will maintain index order sorting?


>
> On 23/10/2008, at 4:20 PM, Ganesh wrote:
>
>> My Index DB is having 10 million records and it will grow to 30  million. 
>> Currently I am using millisecond timestamp and the RAM  cosumption is 
>> more. I will change the resolution to minute. I am  using 2 searcher 
>> objects refreshing each other every minute. When i  do a warmup query 
>> with sort of timestamp then the cpu is spiked to  100% and this is 
>> happening for every minute.  In order to avoid  these issues, i am 
>> planning to break my DB and to do sort on indexed  order.
>>
>> Will multisearcher will maintain indexed order on sorting?
>
>
> If you need to keep the millisecond accuracy, break down the timestamp 
> into 3 fields: day, time, millisecond, and sort on 3 fields.  This way 
> each field has a much smaller number of distinct values and well  occupy 
> vastly less memory over time.  I don't think there's much  overhead in 
> this approach either, because in most cases, the top-level  field (day) 
> will provide most of the sorting ability, and Lucene will  only need to 
> hit the time & millisecond fields less frequently for  comparison.
>
> I believe Multisearcher does a merge sort of the 2 (or more) sub- 
> searchers, so there is an overhead in using in versus a single searcher.
>
> Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 08:56:55 2008
Return-Path: <java-user-return-36759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80070 invoked from network); 23 Oct 2008 08:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 08:56:55 -0000
Received: (qmail 31502 invoked by uid 500); 23 Oct 2008 08:56:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31465 invoked by uid 500); 23 Oct 2008 08:56:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31447 invoked by uid 99); 23 Oct 2008 08:56:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 01:56:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.204.192.102] (HELO hermes-uno.uned.es) (62.204.192.102)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 08:55:38 +0000
Received: from hermes-uno.uned.es (localhost.localdomain [127.0.0.1])
	by localhost.uned.es (Postfix) with ESMTP id 4935130DB9F
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 10:55:45 +0200 (CEST)
Received: from [62.204.207.17] (bubastis.lsi.uned.es [62.204.207.17])
	by hermes-uno.uned.es (Postfix) with ESMTP id EBA1830DB96
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 10:55:44 +0200 (CEST)
Message-ID: <49003C2C.7030300@lsi.uned.es>
Date: Thu, 23 Oct 2008 10:56:12 +0200
From: Joaquin Perez Iglesias <joaquin.perez@lsi.uned.es>
Reply-To: joaquin.perez@lsi.uned.es
Organization: LSI UNED
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query Expansion Module for Lucene based on BM25 ranking 	function
References: <9ab5344d0810210714v2a498c93g626cf9d659104baa@mail.gmail.com> 	<55F85F1A-7A18-4E9F-AECB-D006805996B0@apache.org> <FB376DC8-2A1A-4630-87B4-B01BF5C23327@gmail.com>
In-Reply-To: <FB376DC8-2A1A-4630-87B4-B01BF5C23327@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Grant and Jose,

just to give some more details, as Jose said avg_length is precalculated 
at indexing time using an specific Similarity class. Basically this can 
be done through the lengthNorm method, for each document and field the 
total length is stored, when the indexing process is finished these 
values are divided by the total number of docs, and results are saved in 
a file with the following format:

FIELD_NAME
FLOAT_VALUE
FIELD_NAME_2
FIELD_VALUE_2

for example:
CONTENT
459.2903f
ANCHOR
84.55523f

A more detailed explanation can be found at 
http://nlp.uned.es/~jperezi/Lucene-BM25/

Best Regards.


Jos Ramn Perez Aguera wrote:
> Hi Grant,
>
> Our query expansion approach is quite simple, we apply 
> pseudo-relevance feedback techniques, where a number of top retrieved 
> documents are used to extract the terms candidates to expand the 
> original query. We have used TermPositions in query time to extract 
> the term statistics necessaries for query expansion. On the other 
> hand, to implement BM25, we have used the implementation propoused by 
> Joaquin perez, where avg. Length is computed in indexing time and it 
> is used as a constant in query time.
>
> We know that this is not the best way to do that, but we don't have 
> the knowledge about lucene to made a better implementation. Our code 
> is for research projects only, and it is not robust enougth for 
> real-world projects.
>
> I have not followed any of the flexible indexing discussions, but this 
> subject seems to be very interesting to me. Do you have any pointers?.
>
> Finally, the code has been reliased under apache license. But we are 
> not experts on this kind of things. Our idea is that everyone can take 
> the code, change it and use it without constraints.
>
> Best regards
>
> Jose
>
> Jos Ramn Prez Agera
>
> On 22/10/2008, at 20:16, Grant Ingersoll <gsingers@apache.org> wrote:
>
>> Hi Jos,
>>
>> Can you explain your approach to implementing? I'm curious how you 
>> incorporated in the avg. doc length. Also, have you followed any of 
>> the flexible indexing discussions?
>>
>> Finally, what's the license on this code?
>>
>> Thanks,
>> Grant
>>
>> On Oct 21, 2008, at 10:14 AM, Jos Ramn Prez Agera wrote:
>>
>>> Hello,
>>>
>>> We have implemented a research module for lucene using BM25 and our
>>> structured version of BM25 as ranking functions and a couple of
>>> state-of-art query expansion algoritms.
>>>
>>> This implementation is quite different to other query expansion
>>> modules for Lucene that are available in the web.
>>>
>>> We have used this implementation in CLEF 2008 Robust WSD track
>>> http://ixa2.si.ehu.es/clirwsd/ with very good results. The code and
>>> other technical and scientific details can be accessed here:
>>>
>>> http://grasia.fdi.ucm.es/jose/query-expansion
>>>
>>> This is an alpha0.0.never.used.before.by.anyone version, we will work
>>> on it in the following months to make it easier to use.
>>>
>>> Please do not hesitate to send comments, questions and/or complaints
>>> to the authors.
>>>
>>> jose
>>>
>>> -- 
>>> Jos Ramn Prez Agera
>>>
>>> Dept. de Ingeniera del Software e Inteligencia Artificial
>>> Despacho 411 tlf. 913947599
>>> Facultad de Informtica
>>> Universidad Complutense de Madrid
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
>> http://www.lucenebootcamp.com
>>
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
-----------------------------------------------------------
Joaqun Prez Iglesias
Dpto. Lenguajes y Sistemas Informticos
E.T.S.I. Informtica (UNED)
Ciudad Universitaria
C/ Juan del Rosal n 16
28040 Madrid - Spain
Phone. +34 91 398 89 19
Fax    +34 91 398 65 35
Office  2.11
Email: joaquin.perez@lsi.uned.es
web:   http://nlp.uned.es/~jperezi/
-----------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 09:19:05 2008
Return-Path: <java-user-return-36760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85211 invoked from network); 23 Oct 2008 09:19:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 09:19:05 -0000
Received: (qmail 58534 invoked by uid 500); 23 Oct 2008 09:19:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58504 invoked by uid 500); 23 Oct 2008 09:19:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58493 invoked by uid 99); 23 Oct 2008 09:19:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 02:19:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.120] (HELO smtp137.mail.mud.yahoo.com) (209.191.107.120)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Oct 2008 09:17:47 +0000
Received: (qmail 19541 invoked from network); 23 Oct 2008 09:17:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=sqfKoNz6Wt80U1BFwCq++7D6rRxxvXgwRU2yahKeR63aYN8gGX4TEEzpyWwAz6IFhzlrymVqYnoJoaKAPs5VVwuoEyuy3yVP/k/sdC/278ROMOamW9asu+8F/+fGXr3Dc/zxUBQeoa/ldWT08ZLNKZC/H4x+JIAIR4wtChaVH8M=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp137.mail.mud.yahoo.com with SMTP; 23 Oct 2008 09:17:24 -0000
X-YMail-OSG: Xe4f59YVM1nMjbvtrOBV2xE66MeyLw8dP9tNKUNt.f9gwr0tPQ6LQuSEOxp7zM_fKUXr_nNWQjgaO.aWp.PxAqtME3qSUlqbmU2SjixhPaSd4KuwyyQLo9AhhuTDjXQB0E_EEn7UMQKFRUeJMz0i8tYI
X-Yahoo-Newman-Property: ymail-3
Message-ID: <057d01c934f0$2906b2b0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com> <359a92830810210748n5eab2590o379838222308de1c@mail.gmail.com> <050a01c934cf$412fdc20$330bc30a@sv.us.sonicwall.com> <DE4E6F97-9895-404B-845F-B485A5A4F33C@aconex.com> <055f01c934e6$731e0740$330bc30a@sv.us.sonicwall.com>
Subject: Re: Multisearcher will maintain index order sorting?
Date: Thu, 23 Oct 2008 14:47:20 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

In IndexA there are 3 docs
DocID, Terms
0,X
1,X Y
2,X Z

In IndexB there are 3 docs
DocID, Terms
0,X
1,X Y
2,X Z

When i do sort on indexed order using Multisearcher and 
ParallelMultiSearcher, it returns the result
0,X
3,X
1,X Y
4,X Y
2,X Z
5,X Z

But it should be in the order of 0,1,2,3,4,5. Could anyone explain why?

Regards
Ganesh

----- Original Message ----- 
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Sent: Thursday, October 23, 2008 1:37 PM
Subject: Re: Multisearcher will maintain index order sorting?


> Multisearcher and ParallelMultiSearcher, when requested to sort on doc 
> (indexed order), it merges the result by docID of each DB.
>
> Regards
> Ganesh
>
> ----- Original Message ----- 
> From: "Paul Smith" <psmith@aconex.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, October 23, 2008 10:57 AM
> Subject: Re: Multisearcher will maintain index order sorting?
>
>
>>
>> On 23/10/2008, at 4:20 PM, Ganesh wrote:
>>
>>> My Index DB is having 10 million records and it will grow to 30 
>>> million. Currently I am using millisecond timestamp and the RAM 
>>> cosumption is more. I will change the resolution to minute. I am  using 
>>> 2 searcher objects refreshing each other every minute. When i  do a 
>>> warmup query with sort of timestamp then the cpu is spiked to  100% and 
>>> this is happening for every minute.  In order to avoid  these issues, i 
>>> am planning to break my DB and to do sort on indexed  order.
>>>
>>> Will multisearcher will maintain indexed order on sorting?
>>
>>
>> If you need to keep the millisecond accuracy, break down the timestamp 
>> into 3 fields: day, time, millisecond, and sort on 3 fields.  This way 
>> each field has a much smaller number of distinct values and well  occupy 
>> vastly less memory over time.  I don't think there's much  overhead in 
>> this approach either, because in most cases, the top-level  field (day) 
>> will provide most of the sorting ability, and Lucene will  only need to 
>> hit the time & millisecond fields less frequently for  comparison.
>>
>> I believe Multisearcher does a merge sort of the 2 (or more) sub- 
>> searchers, so there is an overhead in using in versus a single searcher.
>>
>> Paul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 09:56:10 2008
Return-Path: <java-user-return-36761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6510 invoked from network); 23 Oct 2008 09:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 09:56:10 -0000
Received: (qmail 562 invoked by uid 500); 23 Oct 2008 09:56:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 532 invoked by uid 500); 23 Oct 2008 09:56:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 520 invoked by uid 99); 23 Oct 2008 09:56:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 02:56:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hadi4i@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 09:54:54 +0000
Received: by rv-out-0506.google.com with SMTP id g9so1744733rvb.6
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 02:55:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=W482A8cGv1+IIJ57ef9/8iCGOEspqsiGMLCM+YqEYxs=;
        b=NQkbOTcKhFFEqgI5iHa9UX5uy19o6I/1wWdK0IVz+MkKHgth70/9aoj2Ry37Pmpafb
         hGU96YKgbnzdHLgJE0MaJ56Y7+FUMICHaskXP5ch8g7R+SNtHHWHA7Ocirf1g32RZ7B+
         yRzCEmh24b1ra0WZmUeZQdX/mXGRjSrf0YR/I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=AzjEiI9LQj9iYvvH3bZGHMDNf/5qC6P1rjScJtRfjb6b0JCJbNkEN/7LFDCTRmKQO5
         WUJgUHbFn/qITZz0rA5UtQDyqa5m1yC0Yq5MbzU+S6wzJomM9wV86w/09yx8RjbtMliP
         gNZlZQElHWxmpD1vTBox5llZM36WMRFfBkw7M=
Received: by 10.141.128.9 with SMTP id f9mr248673rvn.8.1224755724016;
        Thu, 23 Oct 2008 02:55:24 -0700 (PDT)
Received: by 10.141.26.2 with HTTP; Thu, 23 Oct 2008 02:55:23 -0700 (PDT)
Message-ID: <18df68a40810230255n35cc1705if0bef8736c357cd2@mail.gmail.com>
Date: Thu, 23 Oct 2008 13:25:23 +0330
From: "Hadi Forghani" <hadi4i@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multisearcher will maintain index order sorting?
In-Reply-To: <057d01c934f0$2906b2b0$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32785_13568119.1224755724017"
References: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com>
	 <359a92830810210748n5eab2590o379838222308de1c@mail.gmail.com>
	 <050a01c934cf$412fdc20$330bc30a@sv.us.sonicwall.com>
	 <DE4E6F97-9895-404B-845F-B485A5A4F33C@aconex.com>
	 <055f01c934e6$731e0740$330bc30a@sv.us.sonicwall.com>
	 <057d01c934f0$2906b2b0$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32785_13568119.1224755724017
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

because when you want to find X of second index, shoud pass docId=3 to
MultiSearcher and MultiSearcher can Find Sub Search of this Document with
calculation length of all subSearcher.
for example when you get doc with DocID 3(Second X), multisearch (see the
code of multisearcher doc(int i)), mines 3 from your DocID(because the first
Searcher has 3 documents) and then pass zero to second Searcher and want to
return 0 doc from it.
on the other hand, multisearcher find subsearcher by BinarySearchTree no
just that is said.

On Thu, Oct 23, 2008 at 12:47 PM, Ganesh <emailgane@yahoo.co.in> wrote:

> In IndexA there are 3 docs
> DocID, Terms
> 0,X
> 1,X Y
> 2,X Z
>
> In IndexB there are 3 docs
> DocID, Terms
> 0,X
> 1,X Y
> 2,X Z
>
> When i do sort on indexed order using Multisearcher and
> ParallelMultiSearcher, it returns the result
> 0,X
> 3,X
> 1,X Y
> 4,X Y
> 2,X Z
> 5,X Z
>
> But it should be in the order of 0,1,2,3,4,5. Could anyone explain why?
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Ganesh" <emailgane@yahoo.co.in>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, October 23, 2008 1:37 PM
>
> Subject: Re: Multisearcher will maintain index order sorting?
>
>
>  Multisearcher and ParallelMultiSearcher, when requested to sort on doc
>> (indexed order), it merges the result by docID of each DB.
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Paul Smith" <psmith@aconex.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, October 23, 2008 10:57 AM
>> Subject: Re: Multisearcher will maintain index order sorting?
>>
>>
>>
>>> On 23/10/2008, at 4:20 PM, Ganesh wrote:
>>>
>>>  My Index DB is having 10 million records and it will grow to 30 million.
>>>> Currently I am using millisecond timestamp and the RAM cosumption is more. I
>>>> will change the resolution to minute. I am  using 2 searcher objects
>>>> refreshing each other every minute. When i  do a warmup query with sort of
>>>> timestamp then the cpu is spiked to  100% and this is happening for every
>>>> minute.  In order to avoid  these issues, i am planning to break my DB and
>>>> to do sort on indexed  order.
>>>>
>>>> Will multisearcher will maintain indexed order on sorting?
>>>>
>>>
>>>
>>> If you need to keep the millisecond accuracy, break down the timestamp
>>> into 3 fields: day, time, millisecond, and sort on 3 fields.  This way each
>>> field has a much smaller number of distinct values and well  occupy vastly
>>> less memory over time.  I don't think there's much  overhead in this
>>> approach either, because in most cases, the top-level  field (day) will
>>> provide most of the sorting ability, and Lucene will  only need to hit the
>>> time & millisecond fields less frequently for  comparison.
>>>
>>> I believe Multisearcher does a merge sort of the 2 (or more) sub-
>>> searchers, so there is an overhead in using in versus a single searcher.
>>>
>>> Paul
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_32785_13568119.1224755724017--

From java-user-return-36762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 10:16:56 2008
Return-Path: <java-user-return-36762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20755 invoked from network); 23 Oct 2008 10:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 10:16:56 -0000
Received: (qmail 18778 invoked by uid 500); 23 Oct 2008 10:16:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18709 invoked by uid 500); 23 Oct 2008 10:16:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18698 invoked by uid 99); 23 Oct 2008 10:16:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 03:16:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.215] (HELO smtp105.mail.mud.yahoo.com) (209.191.85.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Oct 2008 10:15:33 +0000
Received: (qmail 15509 invoked from network); 23 Oct 2008 10:15:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=ZOOvk1b5BTJbfq1zd0Va1FeAnlSHhXwEiAc/mbY6QDNOH9iHZ++Q5QlbqTqo2Eh1KgZ5Fkmbm1BaUAMh6iP5Xi9w8bOxGcXtw8XQUmNubGJxg3YRYU26h8mT2z8GEE+LX32YtUibbLLH1HFURevsS0bMsXDC3RBcruW6hB9Htrw=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp105.mail.mud.yahoo.com with SMTP; 23 Oct 2008 10:15:09 -0000
X-YMail-OSG: OekCY3EVM1mYv2hFLadL4fA6KZC93d.TwfOf4gdBTmqtMu7Gdoyj8SiumvxyK54RNG9X5f9SjaYYn_2vTJylb0qkDNOKfW6sJl.o0rqVZKokDa1qh1Vo1WAcDikC0sSaNYQ7ooFRFhgbUKefXeXHeplpKMmrxCznWdEScxvbum8eUev5xgon8bEACEeD
X-Yahoo-Newman-Property: ymail-3
Message-ID: <059101c934f8$3ac088c0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com> <359a92830810210748n5eab2590o379838222308de1c@mail.gmail.com> <050a01c934cf$412fdc20$330bc30a@sv.us.sonicwall.com> <DE4E6F97-9895-404B-845F-B485A5A4F33C@aconex.com> <055f01c934e6$731e0740$330bc30a@sv.us.sonicwall.com> <057d01c934f0$2906b2b0$330bc30a@sv.us.sonicwall.com> <18df68a40810230255n35cc1705if0bef8736c357cd2@mail.gmail.com>
Subject: Re: Multisearcher will maintain index order sorting?
Date: Thu, 23 Oct 2008 15:45:05 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Multisearcher after performing search on second index, adds the resultant 
docid with the maxdocid of the first index. In my case it would be 3. After 
incrementing the docid, the document is inserted in to the 
FieldDocSortedHitQueue. FieldDocSortedHitQueue is an extension of priority 
queue should sort in the increasing order. It should insert docid 3 after 2 
and not after 0.

code snippet of MultiSearcher.Java
--------------------------------------
if (hq == null) hq = new FieldDocSortedHitQueue (docs.fields, n);
.....
for (int j = 0; j < scoreDocs.length; j++) { // merge scoreDocs into hq
        ScoreDoc scoreDoc = scoreDocs[j];
        scoreDoc.doc += starts[i];                //Doc id is 
incremented*******
        if (!hq.insert (scoreDoc))                  //Insertion should do 
automatic sorting
          break;                                        }

Regards
Ganesh


----- Original Message ----- 
From: "Hadi Forghani" <hadi4i@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, October 23, 2008 3:25 PM
Subject: Re: Multisearcher will maintain index order sorting?


> because when you want to find X of second index, shoud pass docId=3 to
> MultiSearcher and MultiSearcher can Find Sub Search of this Document with
> calculation length of all subSearcher.
> for example when you get doc with DocID 3(Second X), multisearch (see the
> code of multisearcher doc(int i)), mines 3 from your DocID(because the 
> first
> Searcher has 3 documents) and then pass zero to second Searcher and want 
> to
> return 0 doc from it.
> on the other hand, multisearcher find subsearcher by BinarySearchTree no
> just that is said.
>
> On Thu, Oct 23, 2008 at 12:47 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> In IndexA there are 3 docs
>> DocID, Terms
>> 0,X
>> 1,X Y
>> 2,X Z
>>
>> In IndexB there are 3 docs
>> DocID, Terms
>> 0,X
>> 1,X Y
>> 2,X Z
>>
>> When i do sort on indexed order using Multisearcher and
>> ParallelMultiSearcher, it returns the result
>> 0,X
>> 3,X
>> 1,X Y
>> 4,X Y
>> 2,X Z
>> 5,X Z
>>
>> But it should be in the order of 0,1,2,3,4,5. Could anyone explain why?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Ganesh" <emailgane@yahoo.co.in>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, October 23, 2008 1:37 PM
>>
>> Subject: Re: Multisearcher will maintain index order sorting?
>>
>>
>>  Multisearcher and ParallelMultiSearcher, when requested to sort on doc
>>> (indexed order), it merges the result by docID of each DB.
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Paul Smith" <psmith@aconex.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Thursday, October 23, 2008 10:57 AM
>>> Subject: Re: Multisearcher will maintain index order sorting?
>>>
>>>
>>>
>>>> On 23/10/2008, at 4:20 PM, Ganesh wrote:
>>>>
>>>>  My Index DB is having 10 million records and it will grow to 30 
>>>> million.
>>>>> Currently I am using millisecond timestamp and the RAM cosumption is 
>>>>> more. I
>>>>> will change the resolution to minute. I am  using 2 searcher objects
>>>>> refreshing each other every minute. When i  do a warmup query with 
>>>>> sort of
>>>>> timestamp then the cpu is spiked to  100% and this is happening for 
>>>>> every
>>>>> minute.  In order to avoid  these issues, i am planning to break my DB 
>>>>> and
>>>>> to do sort on indexed  order.
>>>>>
>>>>> Will multisearcher will maintain indexed order on sorting?
>>>>>
>>>>
>>>>
>>>> If you need to keep the millisecond accuracy, break down the timestamp
>>>> into 3 fields: day, time, millisecond, and sort on 3 fields.  This way 
>>>> each
>>>> field has a much smaller number of distinct values and well  occupy 
>>>> vastly
>>>> less memory over time.  I don't think there's much  overhead in this
>>>> approach either, because in most cases, the top-level  field (day) will
>>>> provide most of the sorting ability, and Lucene will  only need to hit 
>>>> the
>>>> time & millisecond fields less frequently for  comparison.
>>>>
>>>> I believe Multisearcher does a merge sort of the 2 (or more) sub-
>>>> searchers, so there is an overhead in using in versus a single 
>>>> searcher.
>>>>
>>>> Paul
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 12:30:53 2008
Return-Path: <java-user-return-36763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70780 invoked from network); 23 Oct 2008 12:30:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 12:30:53 -0000
Received: (qmail 84704 invoked by uid 500); 23 Oct 2008 12:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84674 invoked by uid 500); 23 Oct 2008 12:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84663 invoked by uid 99); 23 Oct 2008 12:30:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 05:30:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liuping.james@gmail.com designates 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:29:37 +0000
Received: by ti-out-0910.google.com with SMTP id b8so207746tic.11
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 05:30:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=3vAzf+tcZvUHOyQKz8s5QOzXIrBQFcUaN0mTkammG+4=;
        b=HktmQl4yLPeuW/2mjdYnm5vZxnkw67eTBbBmcKpqfKCQAb2oDXAjr9J4NWN47ffRLU
         ptqUltqhPra6cgoFPplK9NWBuSeIJ5VsuisNipnu+EpojxKCGveFrLZfiIw3FQCx16Tr
         OklFV0SOG8fKDt0CPv/6EUmnZhhsvyi2lR9+A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=t2gB6Dv/snP3ZZZXeXgL/YY3YTbotW9NahphK3OrzMY1/q8AtpuV6zSy9ou2kzijbg
         b6QOIBVxejWUXZYpFEUtLo7MDANG+fHf3XgoxD1Qs/pcmjmAW+bvWTxYgL4IdnBIyaAp
         3Hu/QsMvPOSplGu+k5TcS4vMqduKbOxKPIrw0=
Received: by 10.110.46.3 with SMTP id t3mr447670tit.30.1224765005973;
        Thu, 23 Oct 2008 05:30:05 -0700 (PDT)
Received: by 10.110.16.14 with HTTP; Thu, 23 Oct 2008 05:30:05 -0700 (PDT)
Message-ID: <5d5204510810230530j1033fb40yc3110e163755574a@mail.gmail.com>
Date: Thu, 23 Oct 2008 20:30:05 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Question about QueryParser
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33361_25061629.1224765005949"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33361_25061629.1224765005949
Content-Type: text/plain; charset=BIG5
Content-Transfer-Encoding: base64
Content-Disposition: inline

cHVibGljIGNsYXNzIEFuYWx5emVyVGVzdCB7CiAgIEBUZXN0CiAgIHB1YmxpYyB2b2lkIHRlc3Qo
KSB0aHJvd3MgUGFyc2VFeGNlcHRpb24gewogICAgICAgUXVlcnlQYXJzZXIgcGFyc2VyID0gbmV3
IE11bHRpRmllbGRRdWVyeVBhcnNlcihuZXcgU3RyaW5nW117InRpdGxlIiwKImJvZHkifSwgbmV3
IFN0YW5kYXJkQW5hbHl6ZXIoKSk7CiAgICAgICBRdWVyeSBxdWVyeTEgPSBwYXJzZXIucGFyc2Uo
IqSkpOUiKTsKICAgICAgIFF1ZXJ5IHF1ZXJ5MiA9IHBhcnNlci5wYXJzZSgipKQgpOUiKTsKICAg
ICAgIFN5c3RlbS5vdXQucHJpbnRsbihxdWVyeTEpOwogICAgICAgU3lzdGVtLm91dC5wcmludGxu
KHF1ZXJ5Mik7CiAgIH0KfQoKCm91dHB1dCA6Cgp0aXRsZToipKQgpOUiIGJvZHk6IqSkIKTlIgoo
dGl0bGU6pKQgYm9keTqkpCkgKHRpdGxlOqTlIGJvZHk6pOUpCgoKCndoeSB0aGV5IG5vdCAgc2Ft
ZT8KCgoKLS0gCnJlZ2FyZHMKai5MCg==
------=_Part_33361_25061629.1224765005949--

From java-user-return-36764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 12:34:25 2008
Return-Path: <java-user-return-36764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71570 invoked from network); 23 Oct 2008 12:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 12:34:25 -0000
Received: (qmail 91924 invoked by uid 500); 23 Oct 2008 12:34:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91904 invoked by uid 500); 23 Oct 2008 12:34:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91893 invoked by uid 99); 23 Oct 2008 12:34:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 05:34:20 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [134.2.3.3] (HELO mx06.uni-tuebingen.de) (134.2.3.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:33:07 +0000
Received: from [134.2.129.126] (ithaka.sfs.uni-tuebingen.de [134.2.129.126])
	by mx06.uni-tuebingen.de (8.13.6/8.13.6) with ESMTP id m9NCRMWN020929;
	Thu, 23 Oct 2008 14:27:23 +0200
Message-ID: <49006DC9.4070502@sfs.uni-tuebingen.de>
Date: Thu, 23 Oct 2008 14:27:53 +0200
From: Niels Ott <nott@sfs.uni-tuebingen.de>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Combining keyword queries with database-style queries
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiVirus: checked by AntiVir MailGate (version: 2.1.2-11; AVE: 7.9.0.5; VDF: 7.0.7.77; host: mx06)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everybody,

I need to query for documents not only for search terms but also for
numeric values (or other general types). Let me try to explain with a
hypothetical example.

Assuming there is a value for the number words in each document (or the
number of person names, or whatever), I would want to formulate a query
like "Give me documents containing 'jack johnson' AND with token_count >
250".

I've been working with Lucene before and the keyword part is easy, but
what would be a good solution to query for numbers etc.?

One first idea I had was storing the numbers (which are basically a
HashMap<String,Double>) in the index in some way or the other. But it is
not at all obvious for me how to query them then.

Another thing I could think of would be using a separate database of any
type, but then how to bring those two together in a way that makes sense?

Any pointers to useful resources and any types of hints are welcome! :-)

Best,

   Niels


-- 
Niels Ott
Computational Linguist (B.A.)
http://www.drni.de/niels/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 12:41:21 2008
Return-Path: <java-user-return-36765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73140 invoked from network); 23 Oct 2008 12:41:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 12:41:20 -0000
Received: (qmail 181 invoked by uid 500); 23 Oct 2008 12:41:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 140 invoked by uid 500); 23 Oct 2008 12:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 129 invoked by uid 99); 23 Oct 2008 12:41:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 05:41:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.227.122.98] (HELO mail.garambrogne.net) (82.227.122.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:40:02 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.garambrogne.net (Postfix) with ESMTP id C2A8E38E395
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 14:43:53 +0200 (CEST)
Received: from mail.garambrogne.net ([127.0.0.1])
	by localhost (localhost.localdomain [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FZerm1zVLf5G for <java-user@lucene.apache.org>;
	Thu, 23 Oct 2008 14:43:46 +0200 (CEST)
Received: by mail.garambrogne.net (Postfix, from userid 33)
	id BD8D638E3BD; Thu, 23 Oct 2008 14:43:46 +0200 (CEST)
To: java-user@lucene.apache.org
Subject: Re: Combining keyword queries with database-style queries
MIME-Version: 1.0
Date: Thu, 23 Oct 2008 14:43:46 +0200
From: mathieu <mathieu@garambrogne.net>
Organization: Garambrogne
In-Reply-To: <49006DC9.4070502@sfs.uni-tuebingen.de>
References: <49006DC9.4070502@sfs.uni-tuebingen.de>
Message-ID: <3ae99e516efaeb962ee26a8fb73e5038@localhost>
X-Sender: mathieu@garambrogne.net
User-Agent: RoundCube Webmail/0.1b
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


Compass handles that nicely.
You  can first query, lucene and building a IN (...) in your SQL db.
Or you can ask your SQL first, and handling it with a bitset in Lucene.

M.

On Thu, 23 Oct 2008 14:27:53 +0200, Niels Ott <nott@sfs.uni-tuebingen.de>
wrote:
> Hi everybody,
> 
> I need to query for documents not only for search terms but also for
> numeric values (or other general types). Let me try to explain with a
> hypothetical example.
> 
> Assuming there is a value for the number words in each document (or the
> number of person names, or whatever), I would want to formulate a query
> like "Give me documents containing 'jack johnson' AND with token_count >
> 250".
> 
> I've been working with Lucene before and the keyword part is easy, but
> what would be a good solution to query for numbers etc.?
> 
> One first idea I had was storing the numbers (which are basically a
> HashMap<String,Double>) in the index in some way or the other. But it is
> not at all obvious for me how to query them then.
> 
> Another thing I could think of would be using a separate database of any
> type, but then how to bring those two together in a way that makes sense?
> 
> Any pointers to useful resources and any types of hints are welcome! :-)
> 
> Best,
> 
>    Niels
> 
> 
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 12:44:02 2008
Return-Path: <java-user-return-36766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73966 invoked from network); 23 Oct 2008 12:44:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 12:44:02 -0000
Received: (qmail 6635 invoked by uid 500); 23 Oct 2008 12:43:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6607 invoked by uid 500); 23 Oct 2008 12:43:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6596 invoked by uid 99); 23 Oct 2008 12:43:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 05:43:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:42:45 +0000
Received: by rv-out-0506.google.com with SMTP id f6so324041rvb.5
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 05:43:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=IWgzaxN/pJmVLdUhyMJbVvH0T9wJcDAlvAK0JkGEYPI=;
        b=Za4kYBPkjklpVb041ttNiZG6IQ6wyPW6Cf2jyzRpcjYqMnk3eeHUcAcmW4Y6ib8ON1
         dNTNiWvEFF7htnMzzgXB1z5aUAamCLoWVVR0nsi8cGrGuaBv5aRia4+0TfzeWZcPslED
         4SpfsLp7/SOF25i7OI2lNbqK30lgMm0Nb+yo0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=w5zSJ08qqEpUpeZ1TXyxkzCGRnxmkzABwcahOzJNohwh3uO2uOMezQ/fwhVRsO/WzW
         h/t4cdhYwoeqNzO/8tqsalVoJ6efLMCqqYRlRVd1J5jg0gIXLxvNlMKYzkTlf2bQp8vS
         KUqqEZwI+jAPmb5s15msvv54WjpvV6Hceuxgk=
Received: by 10.141.70.18 with SMTP id x18mr312536rvk.284.1224765804895;
        Thu, 23 Oct 2008 05:43:24 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Thu, 23 Oct 2008 05:43:24 -0700 (PDT)
Message-ID: <359a92830810230543y6a958af3l3bfd75abc465c86a@mail.gmail.com>
Date: Thu, 23 Oct 2008 08:43:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question about QueryParser
In-Reply-To: <5d5204510810230530j1033fb40yc3110e163755574a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30970_6600124.1224765804876"
References: <5d5204510810230530j1033fb40yc3110e163755574a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30970_6600124.1224765804876
Content-Type: text/plain; charset=BIG5
Content-Transfer-Encoding: base64
Content-Disposition: inline

SXQgbG9va3MgdG8gbWUgbGlrZSB5b3UndmUgZ290IGEgc3BhY2UgYmV0d2VlbiB0aGUKY2hhcmFj
dGVycyBpbiB0aGUgc2Vjb25kIGV4YW1wbGUuLi4uCgpCZXN0CkVyaWNrCgoyMDA4LzEwLzIzIEph
bWVzIGxpdSA8bGl1cGluZy5qYW1lc0BnbWFpbC5jb20+Cgo+IHB1YmxpYyBjbGFzcyBBbmFseXpl
clRlc3Qgewo+ICAgQFRlc3QKPiAgIHB1YmxpYyB2b2lkIHRlc3QoKSB0aHJvd3MgUGFyc2VFeGNl
cHRpb24gewo+ICAgICAgIFF1ZXJ5UGFyc2VyIHBhcnNlciA9IG5ldyBNdWx0aUZpZWxkUXVlcnlQ
YXJzZXIobmV3IFN0cmluZ1tdeyJ0aXRsZSIsCj4gImJvZHkifSwgbmV3IFN0YW5kYXJkQW5hbHl6
ZXIoKSk7Cj4gICAgICAgUXVlcnkgcXVlcnkxID0gcGFyc2VyLnBhcnNlKCKkpKTlIik7Cj4gICAg
ICAgUXVlcnkgcXVlcnkyID0gcGFyc2VyLnBhcnNlKCKkpCCk5SIpOwo+ICAgICAgIFN5c3RlbS5v
dXQucHJpbnRsbihxdWVyeTEpOwo+ICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihxdWVyeTIpOwo+
ICAgfQo+IH0KPgo+Cj4gb3V0cHV0IDoKPgo+IHRpdGxlOiKkpCCk5SIgYm9keToipKQgpOUiCj4g
KHRpdGxlOqSkIGJvZHk6pKQpICh0aXRsZTqk5SBib2R5OqTlKQo+Cj4KPgo+IHdoeSB0aGV5IG5v
dCAgc2FtZT8KPgo+Cj4KPiAtLQo+IHJlZ2FyZHMKPiBqLkwKPgo=
------=_Part_30970_6600124.1224765804876--

From java-user-return-36767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 12:47:59 2008
Return-Path: <java-user-return-36767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75421 invoked from network); 23 Oct 2008 12:47:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 12:47:59 -0000
Received: (qmail 17493 invoked by uid 500); 23 Oct 2008 12:47:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17350 invoked by uid 500); 23 Oct 2008 12:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17339 invoked by uid 99); 23 Oct 2008 12:47:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 05:47:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:46:42 +0000
Received: by rv-out-0506.google.com with SMTP id f6so325330rvb.5
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 05:47:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=sN8ixSmSvdUeG0hOIIbuonQQWzBK0Sera+b44Xe4g6A=;
        b=c5EtXUE4O15orYtjWed+kaz8/qbzG7clcgcIhktxLrt3UErc6bzBiINYEkUSPAiHw7
         OkcSppV0uMRlMUk1aDjR/pOYdlNrm80c9jIuXgY0pwBM0y5q4d1Ie5kwjajFtT8/lWF8
         HeWYC5tSVnb808kgdIG/EmRcquUyLIqBJYnkk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZSR9daw05YA5Q+KOD3xSEbnhYdB0Fyx2jo6Q4Zj8svacZSWOwO6f8csguZB5er1sID
         72j6Ayj6KaXH+NKEDkn+YlfoDCybcPE1dPy/t6xMolHI+Ju6N6og3eyH95rymBLsefow
         jX8bJpEIvysopoq2VZh2OQpE+99oA77Ov/Tts=
Received: by 10.141.50.11 with SMTP id c11mr321661rvk.222.1224766040950;
        Thu, 23 Oct 2008 05:47:20 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Thu, 23 Oct 2008 05:47:20 -0700 (PDT)
Message-ID: <359a92830810230547n629c5e0ek4daf18e971761439@mail.gmail.com>
Date: Thu, 23 Oct 2008 08:47:20 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Combining keyword queries with database-style queries
In-Reply-To: <49006DC9.4070502@sfs.uni-tuebingen.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31021_24402821.1224766040925"
References: <49006DC9.4070502@sfs.uni-tuebingen.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31021_24402821.1224766040925
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, assuming that token_count is an indexed field
in your documents (i.e. not something you're
computing on the fly), just use a RangeQuery for the numeric
part. Actually, you probably want to use
ConstantScoreRangeQuery...

The only thing you have to watch is that Lucene does a
lexical compare, so you have to index your numbers
as comparable strings, probably left-padding to some
fixed width with zeros, see NumberTools.

Best
Erick

On Thu, Oct 23, 2008 at 8:27 AM, Niels Ott <nott@sfs.uni-tuebingen.de>wrote:

> Hi everybody,
>
> I need to query for documents not only for search terms but also for
> numeric values (or other general types). Let me try to explain with a
> hypothetical example.
>
> Assuming there is a value for the number words in each document (or the
> number of person names, or whatever), I would want to formulate a query
> like "Give me documents containing 'jack johnson' AND with token_count >
> 250".
>
> I've been working with Lucene before and the keyword part is easy, but
> what would be a good solution to query for numbers etc.?
>
> One first idea I had was storing the numbers (which are basically a
> HashMap<String,Double>) in the index in some way or the other. But it is
> not at all obvious for me how to query them then.
>
> Another thing I could think of would be using a separate database of any
> type, but then how to bring those two together in a way that makes sense?
>
> Any pointers to useful resources and any types of hints are welcome! :-)
>
> Best,
>
>  Niels
>
>
> --
> Niels Ott
> Computational Linguist (B.A.)
> http://www.drni.de/niels/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31021_24402821.1224766040925--

From java-user-return-36768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 13:08:41 2008
Return-Path: <java-user-return-36768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84071 invoked from network); 23 Oct 2008 13:08:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 13:08:41 -0000
Received: (qmail 43069 invoked by uid 500); 23 Oct 2008 13:08:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43033 invoked by uid 500); 23 Oct 2008 13:08:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43022 invoked by uid 99); 23 Oct 2008 13:08:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 06:08:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 13:07:24 +0000
Received: by wa-out-1112.google.com with SMTP id n4so179471wag.5
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 06:07:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=jySYlq+vRQgBvpxQH2Uv+wEKzrSZxeE0pJgXZYXdGqM=;
        b=p0MltXBS2XV86vOEbygY/8LnKnCCL0vPZdb8fDb46Lq+ZVz7j+RXzglNvrZY70etzW
         FIApTk+q8xX/l3/MbD2UxcQgwQrLE9mDGwBw+OEPrPaEy24Pf/kqvCmbUBSNHqBaevVv
         xFMEmWe7Mz+1AldSc2ChWGf5xOXSDYj4yDISo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=A4ML2hLgIv09e5klliA6DG3n+njyfA7Ba96mKEETzBKomtwq5A0IgO9X5UBiyHQOQR
         sGCIESa8jrqOY2aiXs2BUsIHE1LmjWvMnoM7fY/FQ21iWRGRy2m40P0ZfjIZr6FLkZJ/
         IaD7G6sV8wbh3h0RoESFnQIy2fWF4qkI5st8k=
Received: by 10.114.73.1 with SMTP id v1mr514257waa.110.1224767273311;
        Thu, 23 Oct 2008 06:07:53 -0700 (PDT)
Received: by 10.115.107.12 with HTTP; Thu, 23 Oct 2008 06:07:53 -0700 (PDT)
Message-ID: <b8bb47ad0810230607w1e6637d3s7d5c1c25b726f769@mail.gmail.com>
Date: Thu, 23 Oct 2008 15:07:53 +0200
From: "Anshul jain" <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Payload
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23027_17568263.1224767273300"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23027_17568263.1224767273300
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Has anyone used the payload functionality in Lucene? I would really
appreciate if someone can provide an explain using a code or something.

Thanks,
Anshul

------=_Part_23027_17568263.1224767273300--

From java-user-return-36769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 15:09:55 2008
Return-Path: <java-user-return-36769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74075 invoked from network); 23 Oct 2008 15:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 15:09:55 -0000
Received: (qmail 4914 invoked by uid 500); 23 Oct 2008 15:09:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4873 invoked by uid 500); 23 Oct 2008 15:09:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4861 invoked by uid 99); 23 Oct 2008 15:09:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 08:09:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 15:08:38 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 6DF8B870D8
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 08:08:46 -0700 (PDT)
Message-Id: <CF662C5F-07F5-4B9D-847A-CE0E7BF78F2D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <b8bb47ad0810230607w1e6637d3s7d5c1c25b726f769@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene Payload
Date: Thu, 23 Oct 2008 11:08:45 -0400
References: <b8bb47ad0810230607w1e6637d3s7d5c1c25b726f769@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You can search the archives for some background info.  Also, Michael  
Busch has a nice presentation from ApacheCon at http://people.apache.org/~buschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt

Basically, the payload allows you to associate an arbitrary byte array  
with 1 or more terms.

On Oct 23, 2008, at 9:07 AM, Anshul jain wrote:

> Hi all,
>
> Has anyone used the payload functionality in Lucene? I would really
> appreciate if someone can provide an explain using a code or  
> something.
>
> Thanks,
> Anshul

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 16:17:49 2008
Return-Path: <java-user-return-36770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93592 invoked from network); 23 Oct 2008 16:17:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 16:17:49 -0000
Received: (qmail 6568 invoked by uid 500); 23 Oct 2008 16:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6526 invoked by uid 500); 23 Oct 2008 16:17:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6515 invoked by uid 99); 23 Oct 2008 16:17:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 09:17:44 -0700
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport4.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 16:16:34 +0000
X-SBRS: None
X-MID: 111528856
Received: from fmd3tj001.fda.gov ([10.160.10.76])
  by ironport4.fda.gov with ESMTP; 23 Oct 2008 12:16:30 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.63]) by FMD3TJ001.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 23 Oct 2008 12:16:30 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9352A.B48B7120"
Subject: Multi -threaded indexing of large number of PDF documents 
Date: Thu, 23 Oct 2008 12:16:29 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Multi -threaded indexing of large number of PDF documents 
Thread-Index: Ack1KrSyJ2KTA7fwTiC5IYvzYdGokA==
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Oct 2008 16:16:30.0468 (UTC) FILETIME=[B560AC40:01C9352A]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9352A.B48B7120
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,

We are trying to index large collection of PDF documents, sizes varying
from few KB to few GB.  Lucene 2.3.2 with jdk 1.6.0_01 (with PDFBox for
text extraction) and on Windows as well as CentOS Linux. Used java -Xms
and -Xmx options, both at 1080m, even though we have 4GB on Windows and
32 GB on Linux with sufficient swap space.

With just one thread, though it takes time, the indexing happens. To
speed up, we tried multi-threaded approach with one Indexwriter for each
thread. After all the threads finish their indexing, they are merged.
With about 100 sample files and 10 threads, the program works pretty
well and it does speed up. But, when we run on document collection of
about 25GB, couple of threads just hang, while the rest have completed
their indexing. The program never gracefully exits, and the threads that
seem to have died ensure that the final index merging does not take
place. The program needs to be manually terminated.=20

Tried both with simple analyzer as well as standard analyzer, with
similar results.

Any useful tips / solutions welcome.

Thanks in advance,
Sithu Sudarsan
Graduate Research Assistant, UALR
& Visiting Researcher, CDRH/OSEL

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu


------_=_NextPart_001_01C9352A.B48B7120--

From java-user-return-36771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 16:57:39 2008
Return-Path: <java-user-return-36771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3755 invoked from network); 23 Oct 2008 16:57:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 16:57:39 -0000
Received: (qmail 52328 invoked by uid 500); 23 Oct 2008 16:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52296 invoked by uid 500); 23 Oct 2008 16:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52284 invoked by uid 99); 23 Oct 2008 16:57:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 09:57:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 16:56:24 +0000
Received: by rv-out-0506.google.com with SMTP id f6so419159rvb.5
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 09:57:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=OfMuTafMgWsEDvVU1QY9PQqJivHY+mWVJKDimjr9DX4=;
        b=MqipRm9oZABxy9/N6qX/I+1rV7GwRFZqLqAojh5CH71C+ELa7uL6UXFqNoQtnibFLv
         vGfbzADfRnRLlCBmgUX9g7dPlfJbH067mHEmkXAOpoSUQRvCmHKGPFL3mSUwBxJttbij
         3bDg6xsiCdlJp2RodhwSKWyEiMkHrGZ+x45O8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Fhg8LTt6KLkar0Re6jDREZtOhJF6s3dcr7OWLK+h+yqbNnpI/7qXgo7MNQsd/j5JOB
         xRNHFr5FSkOBXkKGgyUIy4bJqa0fnGx4a6jEGBF2MMGOuYum8/+4+xg88MXTF5QqcVCL
         Ieni0VEgF03Iiiq9kArLYfuXN/uFGSBDp2+qY=
Received: by 10.140.162.21 with SMTP id k21mr516969rve.261.1224781023748;
        Thu, 23 Oct 2008 09:57:03 -0700 (PDT)
Received: by 10.141.68.16 with HTTP; Thu, 23 Oct 2008 09:57:03 -0700 (PDT)
Message-ID: <5e76f3840810230957u2fddb307t9bcbff325a571b05@mail.gmail.com>
Date: Thu, 23 Oct 2008 12:57:03 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi -threaded indexing of large number of PDF documents
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
X-Virus-Checked: Checked by ClamAV on apache.org

You might want to look at my indexing of 6.4 million PDF articles,
full-text and metadata. It resulted in an 83GB index taking 20.5 hours
to run. It uses multiple writers, is massively multithreaded.

More info here:
http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html
Check-out the notes at the bottom for details.

In order to make threading/queues much easier and more robust, you
want to use: java.util.concurrent.ThreadPoolExecutor
http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html

Even with these, I've also had problems like you describe. One thing
I've found is that you need to shut the  ThreadPoolExecutor down
correctly, something like:
                 threadPoolExecutor.shutdown();
		while(!threadPoolExecutor.isTerminated())
		{
		    try {
			Thread.sleep(ShutdownDelay);
		    } catch (InterruptedException ie) {
			System.out.println(" interrupted");
		    }
		}

You also need to simplify your threading so as to make reduce deadlock
possibilities.

I hope this is useful.

-Glen

2008/10/23 Sudarsan, Sithu D. <Sithu.Sudarsan@fda.hhs.gov>:
>
> Hi,
>
> We are trying to index large collection of PDF documents, sizes varying
> from few KB to few GB.  Lucene 2.3.2 with jdk 1.6.0_01 (with PDFBox for
> text extraction) and on Windows as well as CentOS Linux. Used java -Xms
> and -Xmx options, both at 1080m, even though we have 4GB on Windows and
> 32 GB on Linux with sufficient swap space.
>
> With just one thread, though it takes time, the indexing happens. To
> speed up, we tried multi-threaded approach with one Indexwriter for each
> thread. After all the threads finish their indexing, they are merged.
> With about 100 sample files and 10 threads, the program works pretty
> well and it does speed up. But, when we run on document collection of
> about 25GB, couple of threads just hang, while the rest have completed
> their indexing. The program never gracefully exits, and the threads that
> seem to have died ensure that the final index merging does not take
> place. The program needs to be manually terminated.
>
> Tried both with simple analyzer as well as standard analyzer, with
> similar results.
>
> Any useful tips / solutions welcome.
>
> Thanks in advance,
> Sithu Sudarsan
> Graduate Research Assistant, UALR
> & Visiting Researcher, CDRH/OSEL
>
> sithu.sudarsan@fda.hhs.gov
> sdsudarsan@ualr.edu
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 17:31:30 2008
Return-Path: <java-user-return-36772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22665 invoked from network); 23 Oct 2008 17:31:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 17:31:30 -0000
Received: (qmail 4516 invoked by uid 500); 23 Oct 2008 17:31:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3564 invoked by uid 500); 23 Oct 2008 17:31:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3553 invoked by uid 99); 23 Oct 2008 17:31:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 10:31:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 17:30:14 +0000
Received: by yw-out-2324.google.com with SMTP id 3so119721ywj.5
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 10:30:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=NFHuk+gNVW3Vt7FEctbnR7QLVLMQkZHc3hqW82nFL4k=;
        b=n9QIE9HjN4ro+oBjclPlb1jBj0zF/F5L0NK3pMDeCDf64MkWmDu0OHEAdkimWfiU3T
         /VEb3+ie6SOMqUYDz8z//h0lVWoqo3xjo5pBrnB64cEvvSeQ9+nw/EcLG0Coq35c7V4h
         GYQ7GF/e0emYs5JxYg1fSkLg25I9BXqEaXTFc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=FCVmFiQa67ghj52uRlCSXltgCc/Ayf9ErK1SW7NGBFnj4MGQvklViDvp5s0FsBzdrR
         CH8eSh75Vr/4XjfiBUo8uRsB72OYgzLCz6hXVGRTuh/lqwTD+Av+Tthjx0ZSH9osaVg/
         ubT5uApwjVpBst6mTZjnRatNPF0nx/7dM3UkE=
Received: by 10.90.120.14 with SMTP id s14mr790651agc.25.1224779813771;
        Thu, 23 Oct 2008 09:36:53 -0700 (PDT)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm6075agc.14.2008.10.23.09.36.52
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 23 Oct 2008 09:36:53 -0700 (PDT)
Message-ID: <4900A823.50804@gmail.com>
Date: Thu, 23 Oct 2008 12:36:51 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multi -threaded indexing of large number of PDF documents
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It sounds like you might have some thread synchronization issues outside 
of Lucene. To simplify things a bit, you might try just using one 
IndexWriter. If I remember right, the IndexWriter is now pretty 
efficient, and there isn't much need to index to smaller indexes and 
then merge. There is a lot of juggling to get wrong with that approach.

- Mark

Sudarsan, Sithu D. wrote:
> Hi,
>
> We are trying to index large collection of PDF documents, sizes varying
> from few KB to few GB.  Lucene 2.3.2 with jdk 1.6.0_01 (with PDFBox for
> text extraction) and on Windows as well as CentOS Linux. Used java -Xms
> and -Xmx options, both at 1080m, even though we have 4GB on Windows and
> 32 GB on Linux with sufficient swap space.
>
> With just one thread, though it takes time, the indexing happens. To
> speed up, we tried multi-threaded approach with one Indexwriter for each
> thread. After all the threads finish their indexing, they are merged.
> With about 100 sample files and 10 threads, the program works pretty
> well and it does speed up. But, when we run on document collection of
> about 25GB, couple of threads just hang, while the rest have completed
> their indexing. The program never gracefully exits, and the threads that
> seem to have died ensure that the final index merging does not take
> place. The program needs to be manually terminated. 
>
> Tried both with simple analyzer as well as standard analyzer, with
> similar results.
>
> Any useful tips / solutions welcome.
>
> Thanks in advance,
> Sithu Sudarsan
> Graduate Research Assistant, UALR
> & Visiting Researcher, CDRH/OSEL
>
> sithu.sudarsan@fda.hhs.gov
> sdsudarsan@ualr.edu
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 17:49:22 2008
Return-Path: <java-user-return-36773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32867 invoked from network); 23 Oct 2008 17:49:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 17:49:22 -0000
Received: (qmail 31620 invoked by uid 500); 23 Oct 2008 17:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31594 invoked by uid 500); 23 Oct 2008 17:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31583 invoked by uid 99); 23 Oct 2008 17:49:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 10:49:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 17:48:08 +0000
Received: by rv-out-0506.google.com with SMTP id g9so1807978rvb.2
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 10:48:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=TXt3yLRwA5O7ZB1n/+5/cYizdmz7e3Z4ZEXAPtORJnY=;
        b=MMIskg0GulEzxV81Pg1xknSeY8eoTBcfzlrgBql+zGv8DOn1MHiv6COTMRVZXkc6zu
         oe+EMfzfs66RFOykvhDs7b/yi3tjSWE3YamwnExEImQ+urBxcU7OjDuDybhcnlUMwA44
         t0uuCiGkcv1yf1xtBFYJ1sX8WzwKyO8SUTzqU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Z8eBT61N5EAclCEpDfFgqzsgFMN7grCZBcCJgJdfXEyIujFT50tvVPQ0p1fO5Oy+Hr
         6J4hohWG5imD2MMQzva8IGhYz0hfCw+vgis160rxQmYWfEy9OZHFPkUZY0Jq5oQe6UId
         uKOfullc2R3oRV5XYQJY27crADPeXE15YvNWw=
Received: by 10.141.63.20 with SMTP id q20mr549194rvk.291.1224784117994;
        Thu, 23 Oct 2008 10:48:37 -0700 (PDT)
Received: by 10.141.68.16 with HTTP; Thu, 23 Oct 2008 10:48:37 -0700 (PDT)
Message-ID: <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com>
Date: Thu, 23 Oct 2008 13:48:37 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi -threaded indexing of large number of PDF documents
In-Reply-To: <4900A823.50804@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
	 <4900A823.50804@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

2008/10/23 Mark Miller <markrmiller@gmail.com>:
> It sounds like you might have some thread synchronization issues outside of
> Lucene. To simplify things a bit, you might try just using one IndexWriter.
> If I remember right, the IndexWriter is now pretty efficient, and there
> isn't much need to index to smaller indexes and then merge. There is a lot
> of juggling to get wrong with that approach.

While I agree it is easier to have a single IndexWriter, if you have
multiple cores you will get significant speed-ups with multiple
IndexWriters, even with the impact of merging at the end.
#IndexWriters = # physical cores is an reasonable rule of thumb.

General speed-up estimate: # cores * 0.6 - 0.8  over single IndexWriter
YMMV

When I get around to it, I'll re-run my tests varying the # of
IndexWriters & post.

-Glen

>
> - Mark
>
> Sudarsan, Sithu D. wrote:
>>
>> Hi,
>>
>> We are trying to index large collection of PDF documents, sizes varying
>> from few KB to few GB.  Lucene 2.3.2 with jdk 1.6.0_01 (with PDFBox for
>> text extraction) and on Windows as well as CentOS Linux. Used java -Xms
>> and -Xmx options, both at 1080m, even though we have 4GB on Windows and
>> 32 GB on Linux with sufficient swap space.
>>
>> With just one thread, though it takes time, the indexing happens. To
>> speed up, we tried multi-threaded approach with one Indexwriter for each
>> thread. After all the threads finish their indexing, they are merged.
>> With about 100 sample files and 10 threads, the program works pretty
>> well and it does speed up. But, when we run on document collection of
>> about 25GB, couple of threads just hang, while the rest have completed
>> their indexing. The program never gracefully exits, and the threads that
>> seem to have died ensure that the final index merging does not take
>> place. The program needs to be manually terminated.
>> Tried both with simple analyzer as well as standard analyzer, with
>> similar results.
>>
>> Any useful tips / solutions welcome.
>>
>> Thanks in advance,
>> Sithu Sudarsan
>> Graduate Research Assistant, UALR
>> & Visiting Researcher, CDRH/OSEL
>>
>> sithu.sudarsan@fda.hhs.gov
>> sdsudarsan@ualr.edu
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 18:53:31 2008
Return-Path: <java-user-return-36774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73921 invoked from network); 23 Oct 2008 18:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 18:53:31 -0000
Received: (qmail 37749 invoked by uid 500); 23 Oct 2008 18:53:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37439 invoked by uid 500); 23 Oct 2008 18:53:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37428 invoked by uid 99); 23 Oct 2008 18:53:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 11:53:27 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 18:52:15 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id m9NIqgtv026543
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 14:52:43 -0400
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Thu, 23 Oct 2008 14:52:42 -0400
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Thu, 23 Oct 2008 14:52:41 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="big5"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Question about QueryParser
Date: Thu, 23 Oct 2008 14:52:41 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF401B@SUEXCL-02.ad.syr.edu>
In-Reply-To: <5d5204510810230530j1033fb40yc3110e163755574a@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question about QueryParser
Thread-Index: Ack1CzRUV3FChCAFT7+2cMDdVmoBUwAJ6jbQ
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Oct 2008 18:52:41.0754 (UTC) FILETIME=[87196FA0:01C93540]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2008-10-23_09:2008-10-10,2008-10-23,2008-10-23 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi James,

On 10/23/2008 at 8:30 AM, James liu wrote:
> public class AnalyzerTest {
>    @Test
>    public void test() throws ParseException {
>        QueryParser parser =3D new MultiFieldQueryParser(new =
String[]{"title", "body"}, new StandardAnalyzer());
>        Query query1 =3D parser.parse("=A4=A4=A4=E5");=20
>              Query query2 =3D parser.parse("=A4=A4 =A4=E5");
>             System.out.println(query1);
>             System.out.println(query2);
>    }
> }
>=20
> output :
>=20
> title:"=A4=A4 =A4=E5" body:"=A4=A4 =A4=E5"
> (title:=A4=A4 body:=A4=A4) (title:=A4=E5 body:=A4=E5)
>=20
> why they not  same?

MultiFieldQueryParser extends QueryParser.

QueryParser first breaks up its input on whitespace, and then sends each =
chunk to the analyzer.

query1 contains no whitespace, so the entire string is sent to =
StandardAnalyzer, which produces one token per CJK character, for a =
total of two tokens.  When QueryParser receives more than one token back =
from the analyzer, it produces a PhraseQuery (unless tokens share the =
same position, but this is not applicable to your situation).  =
MultiFieldQueryParser specializes this action by producing one =
PhraseQuery per Field.

query2 contains a space, so the following is performed for each =
whitespace-separated chunk (in query2, this means one character per =
chunk):

The chunk is sent to the analyzer, which produces a single token for =
each CJK character - one token is produced because each chunk contains a =
single character.  When QueryParser receives a single token back from =
the analyzer, it produces a TermQuery.  MultiFieldQueryParser =
specializes this action by producing one TermQuery per Field, and then =
groups these per-Field TermQuery's together in a BooleanQuery, denoted =
in the output as a parenthesized group. =20

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 19:11:07 2008
Return-Path: <java-user-return-36775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85583 invoked from network); 23 Oct 2008 19:11:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 19:11:07 -0000
Received: (qmail 63539 invoked by uid 500); 23 Oct 2008 19:11:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63503 invoked by uid 500); 23 Oct 2008 19:11:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63492 invoked by uid 99); 23 Oct 2008 19:11:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:11:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 19:09:51 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id 29F89129B33
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 12:09:59 -0700 (PDT)
Message-Id: <922D466B-350C-4EB8-AD13-7B78218B9A6D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Multi -threaded indexing of large number of PDF documents 
Date: Thu, 23 Oct 2008 15:09:57 -0400
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you describe your process a bit more?  Are you measuring just the  
Lucene part or the whole ingestion part as well?  If it's the latter,  
how do you know the issue is in Lucene?  PDF extraction is annoying at  
best and highly problematic at its worst.  Not saying it isn't Lucene,  
but I've seen PDFBox and other extractors fail a lot more than I've  
seen Lucene fail.

Are there any exceptions that you are seeing anywhere in your log files?

If you do have extraction as part of the process, what happens if you  
separate out extraction from indexing?   Does it fail when you just  
index raw text in this manner?

Cheers,
Grant


On Oct 23, 2008, at 12:16 PM, Sudarsan, Sithu D. wrote:

>
> Hi,
>
> We are trying to index large collection of PDF documents, sizes  
> varying
> from few KB to few GB.  Lucene 2.3.2 with jdk 1.6.0_01 (with PDFBox  
> for
> text extraction) and on Windows as well as CentOS Linux. Used java - 
> Xms
> and -Xmx options, both at 1080m, even though we have 4GB on Windows  
> and
> 32 GB on Linux with sufficient swap space.
>
> With just one thread, though it takes time, the indexing happens. To
> speed up, we tried multi-threaded approach with one Indexwriter for  
> each
> thread. After all the threads finish their indexing, they are merged.
> With about 100 sample files and 10 threads, the program works pretty
> well and it does speed up. But, when we run on document collection of
> about 25GB, couple of threads just hang, while the rest have completed
> their indexing. The program never gracefully exits, and the threads  
> that
> seem to have died ensure that the final index merging does not take
> place. The program needs to be manually terminated.
>
> Tried both with simple analyzer as well as standard analyzer, with
> similar results.
>
> Any useful tips / solutions welcome.
>
> Thanks in advance,
> Sithu Sudarsan
> Graduate Research Assistant, UALR
> & Visiting Researcher, CDRH/OSEL
>
> sithu.sudarsan@fda.hhs.gov
> sdsudarsan@ualr.edu
>

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 19:11:52 2008
Return-Path: <java-user-return-36776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85924 invoked from network); 23 Oct 2008 19:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 19:11:52 -0000
Received: (qmail 66445 invoked by uid 500); 23 Oct 2008 19:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66405 invoked by uid 500); 23 Oct 2008 19:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66394 invoked by uid 99); 23 Oct 2008 19:11:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:11:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 19:10:38 +0000
Received: by yx-out-2324.google.com with SMTP id 3so149199yxj.5
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 12:11:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=yyV/Gnc5Fs0fRFCFsUQY3RK8axulvjt2b0/y9X8N4W0=;
        b=hkUxIJVOM4m9kiJnsb9hrX1kBCAowYOPFkwA7GhtUrTjNFM+5YzLhZ4zJHvGu5Xn/c
         b26cc/P+KJTjg3CIVqe5WyoTiY1UYh9PD+vgtWPQe6xIgCTH3E1UO7OvdxpKnwQ9RAMH
         R7QcEOcWv7Yo44qEnVRQbbrL+oZ/hRv+4/CEM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=QkKAAeEw9n8n92oEA3fGQnsMRghuhzdP7gvkKyA+JZii2AZZACmkQTrrxQgohtLsCn
         GC4IBdybNf+FHqQiwGJc5j3ZNVcC4RkhtbByfh9VIryrWgoD/K5C3wLmgN4rWkJ2bYsU
         nTw+l3+I60S2AA2ghmAIOuvyCsmI0FujmY5Vc=
Received: by 10.90.100.17 with SMTP id x17mr957620agb.110.1224789067301;
        Thu, 23 Oct 2008 12:11:07 -0700 (PDT)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 20sm187211agb.38.2008.10.23.12.11.05
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 23 Oct 2008 12:11:06 -0700 (PDT)
Message-ID: <4900CC48.8070008@gmail.com>
Date: Thu, 23 Oct 2008 15:11:04 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multi -threaded indexing of large number of PDF documents
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>	 <4900A823.50804@gmail.com> <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com>
In-Reply-To: <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Glen Newton wrote:
> 2008/10/23 Mark Miller <markrmiller@gmail.com>:
>   
>> It sounds like you might have some thread synchronization issues outside of
>> Lucene. To simplify things a bit, you might try just using one IndexWriter.
>> If I remember right, the IndexWriter is now pretty efficient, and there
>> isn't much need to index to smaller indexes and then merge. There is a lot
>> of juggling to get wrong with that approach.
>>     
>
> While I agree it is easier to have a single IndexWriter, if you have
> multiple cores you will get significant speed-ups with multiple
> IndexWriters, even with the impact of merging at the end.
> #IndexWriters = # physical cores is an reasonable rule of thumb.
>
> General speed-up estimate: # cores * 0.6 - 0.8  over single IndexWriter
> YMMV
>
> When I get around to it, I'll re-run my tests varying the # of
> IndexWriters & post.
>
> -Glen
>   
Hey Mr McCandless, whats up with that? Can IndexWriter be made to be as 
efficient as using Multiple Writers? Where do you suppose the hold up 
is? Number of threads doing merges? Sync contention? I hate the idea of 
multiple IndexWriter/Readers being more efficient than a single 
instance. In an ideal Lucene world, a single instance would hide the 
complexity and use the number of threads needed to match multiple 
instance performance.
>   
>> - Mark
>>
>> Sudarsan, Sithu D. wrote:
>>     
>>> Hi,
>>>
>>> We are trying to index large collection of PDF documents, sizes varying
>>> from few KB to few GB.  Lucene 2.3.2 with jdk 1.6.0_01 (with PDFBox for
>>> text extraction) and on Windows as well as CentOS Linux. Used java -Xms
>>> and -Xmx options, both at 1080m, even though we have 4GB on Windows and
>>> 32 GB on Linux with sufficient swap space.
>>>
>>> With just one thread, though it takes time, the indexing happens. To
>>> speed up, we tried multi-threaded approach with one Indexwriter for each
>>> thread. After all the threads finish their indexing, they are merged.
>>> With about 100 sample files and 10 threads, the program works pretty
>>> well and it does speed up. But, when we run on document collection of
>>> about 25GB, couple of threads just hang, while the rest have completed
>>> their indexing. The program never gracefully exits, and the threads that
>>> seem to have died ensure that the final index merging does not take
>>> place. The program needs to be manually terminated.
>>> Tried both with simple analyzer as well as standard analyzer, with
>>> similar results.
>>>
>>> Any useful tips / solutions welcome.
>>>
>>> Thanks in advance,
>>> Sithu Sudarsan
>>> Graduate Research Assistant, UALR
>>> & Visiting Researcher, CDRH/OSEL
>>>
>>> sithu.sudarsan@fda.hhs.gov
>>> sdsudarsan@ualr.edu
>>>
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 19:19:18 2008
Return-Path: <java-user-return-36777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89096 invoked from network); 23 Oct 2008 19:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 19:19:18 -0000
Received: (qmail 78642 invoked by uid 500); 23 Oct 2008 19:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77803 invoked by uid 500); 23 Oct 2008 19:19:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77792 invoked by uid 99); 23 Oct 2008 19:19:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:19:14 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.245] (HELO ag-out-0708.google.com) (72.14.246.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 19:18:00 +0000
Received: by ag-out-0708.google.com with SMTP id 23so571126agd.11
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 12:18:38 -0700 (PDT)
Received: by 10.70.34.13 with SMTP id h13mr1135539wxh.34.1224789518016;
        Thu, 23 Oct 2008 12:18:38 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm198866aga.13.2008.10.23.12.18.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 23 Oct 2008 12:18:36 -0700 (PDT)
Message-Id: <1D225047-4D79-4EE6-8EBE-487CBD5E3FC0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <922D466B-350C-4EB8-AD13-7B78218B9A6D@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Multi -threaded indexing of large number of PDF documents
Date: Thu, 23 Oct 2008 15:18:34 -0400
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov> <922D466B-350C-4EB8-AD13-7B78218B9A6D@apache.org>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Also, could you kill your process with -QUIT (on Linux; maybe there is  
something analogous on Windows?) when you see the threads hanging?   
That will give a stack dump for every thread.

Mike

Grant Ingersoll wrote:

> Can you describe your process a bit more?  Are you measuring just  
> the Lucene part or the whole ingestion part as well?  If it's the  
> latter, how do you know the issue is in Lucene?  PDF extraction is  
> annoying at best and highly problematic at its worst.  Not saying it  
> isn't Lucene, but I've seen PDFBox and other extractors fail a lot  
> more than I've seen Lucene fail.
>
> Are there any exceptions that you are seeing anywhere in your log  
> files?
>
> If you do have extraction as part of the process, what happens if  
> you separate out extraction from indexing?   Does it fail when you  
> just index raw text in this manner?
>
> Cheers,
> Grant
>
>
> On Oct 23, 2008, at 12:16 PM, Sudarsan, Sithu D. wrote:
>
>>
>> Hi,
>>
>> We are trying to index large collection of PDF documents, sizes  
>> varying
>> from few KB to few GB.  Lucene 2.3.2 with jdk 1.6.0_01 (with PDFBox  
>> for
>> text extraction) and on Windows as well as CentOS Linux. Used java - 
>> Xms
>> and -Xmx options, both at 1080m, even though we have 4GB on Windows  
>> and
>> 32 GB on Linux with sufficient swap space.
>>
>> With just one thread, though it takes time, the indexing happens. To
>> speed up, we tried multi-threaded approach with one Indexwriter for  
>> each
>> thread. After all the threads finish their indexing, they are merged.
>> With about 100 sample files and 10 threads, the program works pretty
>> well and it does speed up. But, when we run on document collection of
>> about 25GB, couple of threads just hang, while the rest have  
>> completed
>> their indexing. The program never gracefully exits, and the threads  
>> that
>> seem to have died ensure that the final index merging does not take
>> place. The program needs to be manually terminated.
>>
>> Tried both with simple analyzer as well as standard analyzer, with
>> similar results.
>>
>> Any useful tips / solutions welcome.
>>
>> Thanks in advance,
>> Sithu Sudarsan
>> Graduate Research Assistant, UALR
>> & Visiting Researcher, CDRH/OSEL
>>
>> sithu.sudarsan@fda.hhs.gov
>> sdsudarsan@ualr.edu
>>
>
> --------------------------
> Grant Ingersoll
> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
> http://www.lucenebootcamp.com
>
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 19:46:02 2008
Return-Path: <java-user-return-36778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2105 invoked from network); 23 Oct 2008 19:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 19:46:02 -0000
Received: (qmail 9924 invoked by uid 500); 23 Oct 2008 19:45:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9494 invoked by uid 500); 23 Oct 2008 19:45:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9483 invoked by uid 99); 23 Oct 2008 19:45:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:45:58 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.241] (HELO ag-out-0708.google.com) (72.14.246.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 19:44:47 +0000
Received: by ag-out-0708.google.com with SMTP id 23so578774agd.11
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 12:45:13 -0700 (PDT)
Received: by 10.70.6.4 with SMTP id 4mr1136364wxf.71.1224791113453;
        Thu, 23 Oct 2008 12:45:13 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 18sm253155agb.12.2008.10.23.12.45.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 23 Oct 2008 12:45:12 -0700 (PDT)
Message-Id: <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4900CC48.8070008@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Multi -threaded indexing of large number of PDF documents
Date: Thu, 23 Oct 2008 15:45:09 -0400
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>	 <4900A823.50804@gmail.com> <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com> <4900CC48.8070008@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Mark Miller wrote:

> Glen Newton wrote:
>> 2008/10/23 Mark Miller <markrmiller@gmail.com>:
>>
>>> It sounds like you might have some thread synchronization issues  
>>> outside of
>>> Lucene. To simplify things a bit, you might try just using one  
>>> IndexWriter.
>>> If I remember right, the IndexWriter is now pretty efficient, and  
>>> there
>>> isn't much need to index to smaller indexes and then merge. There  
>>> is a lot
>>> of juggling to get wrong with that approach.
>>>
>>
>> While I agree it is easier to have a single IndexWriter, if you have
>> multiple cores you will get significant speed-ups with multiple
>> IndexWriters, even with the impact of merging at the end.
>> #IndexWriters = # physical cores is an reasonable rule of thumb.
>>
>> General speed-up estimate: # cores * 0.6 - 0.8  over single  
>> IndexWriter
>> YMMV
>>
>> When I get around to it, I'll re-run my tests varying the # of
>> IndexWriters & post.
>>
>> -Glen
>>
> Hey Mr McCandless, whats up with that? Can IndexWriter be made to be  
> as efficient as using Multiple Writers? Where do you suppose the  
> hold up is? Number of threads doing merges? Sync contention? I hate  
> the idea of multiple IndexWriter/Readers being more efficient than a  
> single instance. In an ideal Lucene world, a single instance would  
> hide the complexity and use the number of threads needed to match  
> multiple instance performance.

Honestly this surprises me: I would expect a single IndexWriter with  
multiple threads to be as fast (or faster, considering the extra merge  
time at the end) than multiple IndexWriters.

IndexWriter's concurrency has improved alot lately, with  
ConcurrentMergeScheduler.  The only serious operation that is not  
concurrent is flushing the RAM buffer as a new segment; but in a well  
tuned indexing process (large RAM buffer) the time spent there should  
be quite small, especially with a fast IO system.

Actually, addIndexes is also not concurrent in that if multiple  
threads call it, only one can run at once.  But normally you would  
call it with all the indices you want to add, and then the merging is  
concurrent.

Glen, in your single IndexWriter test, is it possible there was  
accidental thread contention during document preparation or analysis?

I do agree that we should strive to have enough concurrency in  
IndexWriter and IndexReader so that you don't get any real benefit by  
using separate instances. Eg in 2.4.0 you can now open read-only  
IndexReaders, and on Unix you can use NIOFSDirectory, both of which  
should go a long ways towards fixing IndexReader's concurrency issue.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 19:58:10 2008
Return-Path: <java-user-return-36779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9153 invoked from network); 23 Oct 2008 19:58:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 19:58:10 -0000
Received: (qmail 23860 invoked by uid 500); 23 Oct 2008 19:58:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23552 invoked by uid 500); 23 Oct 2008 19:58:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23541 invoked by uid 99); 23 Oct 2008 19:58:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 12:58:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 19:56:57 +0000
Received: by wf-out-1314.google.com with SMTP id 28so527967wfc.20
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 12:57:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=jWX1PV6kjshQbW81OtnLxvrbd8uxf7J5+AIIjs35Jx0=;
        b=vHHGO4iO/zRpT1HwwusWm068ZH9R46Cf+BGgR1RxhTuy+uMGaI4lb2YfBwfHoX7Yyc
         S5+2WKuPgIE5lUV4nVY7v3Oak5oW3DTtQ1yLtM2TJQyqwUcYKGDsgsHSH7LZ5a7Y/D9K
         Ydv78HLNV0m/ghKH015uHyoMmV6xVfhGrOHrs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Et73Pkn9mnLShRdFkh2xo4ILsPCw4EAZ/sbRSfczADnDT4jeKui2fqzfVuqb+LzfS0
         w5pQlpu/fY1CGRAXK4ILQSYaVhmqpPHmvegW/STQpI8Lls89USbbK8X+/FUPgBilArGx
         iJ+HKvNhTFS24GrYsHMJDDvJ4KtV5C+T4UiwE=
Received: by 10.140.166.21 with SMTP id o21mr640341rve.167.1224791847158;
        Thu, 23 Oct 2008 12:57:27 -0700 (PDT)
Received: by 10.141.68.16 with HTTP; Thu, 23 Oct 2008 12:57:27 -0700 (PDT)
Message-ID: <5e76f3840810231257u57ef4017qcbf916928ffc123a@mail.gmail.com>
Date: Thu, 23 Oct 2008 15:57:27 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi -threaded indexing of large number of PDF documents
In-Reply-To: <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
	 <4900A823.50804@gmail.com>
	 <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com>
	 <4900CC48.8070008@gmail.com>
	 <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

2008/10/23 Michael McCandless <lucene@mikemccandless.com>:
>
> Mark Miller wrote:
>
>> Glen Newton wrote:
>>>
>>> 2008/10/23 Mark Miller <markrmiller@gmail.com>:
>>>
>>>> It sounds like you might have some thread synchronization issues outside
>>>> of
>>>> Lucene. To simplify things a bit, you might try just using one
>>>> IndexWriter.
>>>> If I remember right, the IndexWriter is now pretty efficient, and there
>>>> isn't much need to index to smaller indexes and then merge. There is a
>>>> lot
>>>> of juggling to get wrong with that approach.
>>>>
>>>
>>> While I agree it is easier to have a single IndexWriter, if you have
>>> multiple cores you will get significant speed-ups with multiple
>>> IndexWriters, even with the impact of merging at the end.
>>> #IndexWriters = # physical cores is an reasonable rule of thumb.
>>>
>>> General speed-up estimate: # cores * 0.6 - 0.8  over single IndexWriter
>>> YMMV
>>>
>>> When I get around to it, I'll re-run my tests varying the # of
>>> IndexWriters & post.
>>>
>>> -Glen
>>>
>> Hey Mr McCandless, whats up with that? Can IndexWriter be made to be as
>> efficient as using Multiple Writers? Where do you suppose the hold up is?
>> Number of threads doing merges? Sync contention? I hate the idea of multiple
>> IndexWriter/Readers being more efficient than a single instance. In an ideal
>> Lucene world, a single instance would hide the complexity and use the number
>> of threads needed to match multiple instance performance.
>
> Honestly this surprises me: I would expect a single IndexWriter with
> multiple threads to be as fast (or faster, considering the extra merge time
> at the end) than multiple IndexWriters.
>
> IndexWriter's concurrency has improved alot lately, with
> ConcurrentMergeScheduler.  The only serious operation that is not concurrent
> is flushing the RAM buffer as a new segment; but in a well tuned indexing
> process (large RAM buffer) the time spent there should be quite small,
> especially with a fast IO system.
>
> Actually, addIndexes is also not concurrent in that if multiple threads call
> it, only one can run at once.  But normally you would call it with all the
> indices you want to add, and then the merging is concurrent.
>
> Glen, in your single IndexWriter test, is it possible there was accidental
> thread contention during document preparation or analysis?

I don't think there is. I've been refining this for quite a while, and
have done a lot of analysis and hand-checking of the threading stuff.

I do use multiple threads for document creation: this is where much of
the speed-up happens (at least in my case where I have a large indexed
field for the full-text of an article: the parsing becomes a
significant part of the process).

> I do agree that we should strive to have enough concurrency in IndexWriter
> and IndexReader so that you don't get any real benefit by using separate
> instances. Eg in 2.4.0 you can now open read-only IndexReaders, and on Unix
> you can use NIOFSDirectory, both of which should go a long ways towards
> fixing IndexReader's concurrency issue.

My original tests were in the Spring with 2.3.1. I am planning on
doing the new tests with 2.4 for indexing, as well as re-doing my
concurrent query tests[1] and concurrent multiple reader tests[2]
using the features you describe. I am sure the results will be quite
different...

BTW the files I am indexing were originally PDFs, but were batch
converted to text and stored compressed on the filesystem, so except
for GUnzipping them there is no other overhead.

[1]http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
[2]http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html

-glen

> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 21:02:07 2008
Return-Path: <java-user-return-36780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33470 invoked from network); 23 Oct 2008 21:02:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 21:02:07 -0000
Received: (qmail 1349 invoked by uid 500); 23 Oct 2008 21:02:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1314 invoked by uid 500); 23 Oct 2008 21:02:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1303 invoked by uid 99); 23 Oct 2008 21:02:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 14:02:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.251] (HELO ag-out-0708.google.com) (72.14.246.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 21:00:52 +0000
Received: by ag-out-0708.google.com with SMTP id 23so600316agd.11
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 14:01:19 -0700 (PDT)
Received: by 10.70.126.8 with SMTP id y8mr1230164wxc.60.1224795679457;
        Thu, 23 Oct 2008 14:01:19 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 36sm349498agc.9.2008.10.23.14.01.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 23 Oct 2008 14:01:18 -0700 (PDT)
Message-Id: <16F4CE0A-68D2-4CA8-8ADC-6D3AE42DC0C1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org,
 Glen Newton <glen.newton@gmail.com>
In-Reply-To: <5e76f3840810231257u57ef4017qcbf916928ffc123a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Multi -threaded indexing of large number of PDF documents
Date: Thu, 23 Oct 2008 17:01:16 -0400
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov> <4900A823.50804@gmail.com> <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com> <4900CC48.8070008@gmail.com> <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com> <5e76f3840810231257u57ef4017qcbf916928ffc123a@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Glen Newton wrote:

> 2008/10/23 Michael McCandless <lucene@mikemccandless.com>:
>>
>> Mark Miller wrote:
>>
>>> Glen Newton wrote:
>>>>
>>>> 2008/10/23 Mark Miller <markrmiller@gmail.com>:
>>>>
>>>>> It sounds like you might have some thread synchronization issues  
>>>>> outside
>>>>> of
>>>>> Lucene. To simplify things a bit, you might try just using one
>>>>> IndexWriter.
>>>>> If I remember right, the IndexWriter is now pretty efficient,  
>>>>> and there
>>>>> isn't much need to index to smaller indexes and then merge.  
>>>>> There is a
>>>>> lot
>>>>> of juggling to get wrong with that approach.
>>>>>
>>>>
>>>> While I agree it is easier to have a single IndexWriter, if you  
>>>> have
>>>> multiple cores you will get significant speed-ups with multiple
>>>> IndexWriters, even with the impact of merging at the end.
>>>> #IndexWriters = # physical cores is an reasonable rule of thumb.
>>>>
>>>> General speed-up estimate: # cores * 0.6 - 0.8  over single  
>>>> IndexWriter
>>>> YMMV
>>>>
>>>> When I get around to it, I'll re-run my tests varying the # of
>>>> IndexWriters & post.
>>>>
>>>> -Glen
>>>>
>>> Hey Mr McCandless, whats up with that? Can IndexWriter be made to  
>>> be as
>>> efficient as using Multiple Writers? Where do you suppose the hold  
>>> up is?
>>> Number of threads doing merges? Sync contention? I hate the idea  
>>> of multiple
>>> IndexWriter/Readers being more efficient than a single instance.  
>>> In an ideal
>>> Lucene world, a single instance would hide the complexity and use  
>>> the number
>>> of threads needed to match multiple instance performance.
>>
>> Honestly this surprises me: I would expect a single IndexWriter with
>> multiple threads to be as fast (or faster, considering the extra  
>> merge time
>> at the end) than multiple IndexWriters.
>>
>> IndexWriter's concurrency has improved alot lately, with
>> ConcurrentMergeScheduler.  The only serious operation that is not  
>> concurrent
>> is flushing the RAM buffer as a new segment; but in a well tuned  
>> indexing
>> process (large RAM buffer) the time spent there should be quite  
>> small,
>> especially with a fast IO system.
>>
>> Actually, addIndexes is also not concurrent in that if multiple  
>> threads call
>> it, only one can run at once.  But normally you would call it with  
>> all the
>> indices you want to add, and then the merging is concurrent.
>>
>> Glen, in your single IndexWriter test, is it possible there was  
>> accidental
>> thread contention during document preparation or analysis?
>
> I don't think there is. I've been refining this for quite a while, and
> have done a lot of analysis and hand-checking of the threading stuff.

OK.

For your multiple-index-writer test, how much time is spent building  
the N indices vs merging them in the end?

> I do use multiple threads for document creation: this is where much of
> the speed-up happens (at least in my case where I have a large indexed
> field for the full-text of an article: the parsing becomes a
> significant part of the process).

So in the single-index-writer vs multiple-index-writer tests, this  
part (64 threads that construct document objects) is unchanged, right?

How do you rate limit the 64 threads?  (Ie, slow them down when they  
get too far ahead of indexing).

If you only process documents with the 64 threads (but not index  
them), what percentage of the total time is that?  I'd like to tease  
out "building documents" vs "indexing" times.

>> I do agree that we should strive to have enough concurrency in  
>> IndexWriter
>> and IndexReader so that you don't get any real benefit by using  
>> separate
>> instances. Eg in 2.4.0 you can now open read-only IndexReaders, and  
>> on Unix
>> you can use NIOFSDirectory, both of which should go a long ways  
>> towards
>> fixing IndexReader's concurrency issue.
>
> My original tests were in the Spring with 2.3.1. I am planning on
> doing the new tests with 2.4 for indexing, as well as re-doing my
> concurrent query tests[1] and concurrent multiple reader tests[2]
> using the features you describe. I am sure the results will be quite
> different...

Also, for the indexing tests, make sure you run with autoCommit=false.

> BTW the files I am indexing were originally PDFs, but were batch
> converted to text and stored compressed on the filesystem, so except
> for GUnzipping them there is no other overhead.

But I'm confused: why do you need 64 threads to build up the  
documents?  Gunzipping should be very low CPU cost.  Are you pre- 
analyzing the fields on your documents?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 23 22:15:11 2008
Return-Path: <java-user-return-36781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73799 invoked from network); 23 Oct 2008 22:15:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Oct 2008 22:15:11 -0000
Received: (qmail 95420 invoked by uid 500); 23 Oct 2008 22:15:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95391 invoked by uid 500); 23 Oct 2008 22:15:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95380 invoked by uid 99); 23 Oct 2008 22:15:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 15:15:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 22:13:57 +0000
X-ASG-Debug-ID: 1224800074-6af9034c0000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 9D7F652D0F
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 15:14:34 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id D5X0VWWOtBWJunMl for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 15:14:34 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: Any Spanish analyzer available?
Subject: Any Spanish analyzer available?
Date: Thu, 23 Oct 2008 15:13:31 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6A95@rw-ex2003.BROADVISION.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Any Spanish analyzer available?
Thread-Index: Ack1XJUizbCYIEPMRwGehJdmlX3W4A==
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1224800074
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Is there any Spanish analyzer available for lucene applications?=20
I did not see any in lucene 2.4.0 contribute folders.

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 01:00:54 2008
Return-Path: <java-user-return-36782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30463 invoked from network); 24 Oct 2008 01:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 01:00:54 -0000
Received: (qmail 31333 invoked by uid 500); 24 Oct 2008 01:00:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31307 invoked by uid 500); 24 Oct 2008 01:00:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31296 invoked by uid 99); 24 Oct 2008 01:00:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 18:00:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liuping.james@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 00:59:38 +0000
Received: by ti-out-0910.google.com with SMTP id b8so358200tic.11
        for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 18:00:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=6P2GkKI+x3hstQNFou5uIS+XNEnMulsP0b68kky5AgY=;
        b=d2ktEtr4RcrVqcoPQvcjXscqvce+zbHv64pgH7s+OVHGNEi7+jMetiM/Nwcf4r0HwN
         uXsqmF3BqCvMM2IRt8jfv061H9cNxIff+0XgTuP7xxjEY7v7jrtTGBQXLpzYhQFnldBC
         GCOrvWYJRnj8ABdxH56l9d86VdrtcuY0lXoFQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=cKVxaom9LDzN41O8w4cnAE7G64OSkmHkOBLKEYmuUpkOkcZ+2x97X6cZWJMAZGrnMz
         3hlGxbAKMM0Pr3mhQy9iYSe3/H99+WVLyycNjkucx3W1KkRMV5Dr28NFh3wiaQMIDkPw
         RUDRwpMSX66a/GU7KBCHh3hYhI8OgvD9NKF9c=
Received: by 10.110.103.5 with SMTP id a5mr955527tic.2.1224810016185;
        Thu, 23 Oct 2008 18:00:16 -0700 (PDT)
Received: by 10.110.16.14 with HTTP; Thu, 23 Oct 2008 18:00:16 -0700 (PDT)
Message-ID: <5d5204510810231800r7391dd68ie98b63727cd82494@mail.gmail.com>
Date: Fri, 24 Oct 2008 09:00:16 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question about QueryParser
In-Reply-To: <9294E20AED46934EA459020706463F94EF401B@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39183_25874940.1224810016175"
References: <5d5204510810230530j1033fb40yc3110e163755574a@mail.gmail.com>
	 <9294E20AED46934EA459020706463F94EF401B@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39183_25874940.1224810016175
Content-Type: text/plain; charset=BIG5
Content-Transfer-Encoding: base64
Content-Disposition: inline

dGhrcyBzdGV2ZSwgaSBnZXQgaXQuCgoyMDA4LzEwLzI0IFN0ZXZlbiBBIFJvd2UgPHNhcm93ZUBz
eXIuZWR1PgoKPiBIaSBKYW1lcywKPgo+IE9uIDEwLzIzLzIwMDggYXQgODozMCBBTSwgSmFtZXMg
bGl1IHdyb3RlOgo+ID4gcHVibGljIGNsYXNzIEFuYWx5emVyVGVzdCB7Cj4gPiAgICBAVGVzdAo+
ID4gICAgcHVibGljIHZvaWQgdGVzdCgpIHRocm93cyBQYXJzZUV4Y2VwdGlvbiB7Cj4gPiAgICAg
ICAgUXVlcnlQYXJzZXIgcGFyc2VyID0gbmV3IE11bHRpRmllbGRRdWVyeVBhcnNlcihuZXcKPiBT
dHJpbmdbXXsidGl0bGUiLCAiYm9keSJ9LCBuZXcgU3RhbmRhcmRBbmFseXplcigpKTsKPiA+ICAg
ICAgICBRdWVyeSBxdWVyeTEgPSBwYXJzZXIucGFyc2UoIqSkpOUiKTsKPiA+ICAgICAgICAgICAg
ICBRdWVyeSBxdWVyeTIgPSBwYXJzZXIucGFyc2UoIqSkIKTlIik7Cj4gPiAgICAgICAgICAgICBT
eXN0ZW0ub3V0LnByaW50bG4ocXVlcnkxKTsKPiA+ICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJp
bnRsbihxdWVyeTIpOwo+ID4gICAgfQo+ID4gfQo+ID4KPiA+IG91dHB1dCA6Cj4gPgo+ID4gdGl0
bGU6IqSkIKTlIiBib2R5OiKkpCCk5SIKPiA+ICh0aXRsZTqkpCBib2R5OqSkKSAodGl0bGU6pOUg
Ym9keTqk5SkKPiA+Cj4gPiB3aHkgdGhleSBub3QgIHNhbWU/Cj4KPiBNdWx0aUZpZWxkUXVlcnlQ
YXJzZXIgZXh0ZW5kcyBRdWVyeVBhcnNlci4KPgo+IFF1ZXJ5UGFyc2VyIGZpcnN0IGJyZWFrcyB1
cCBpdHMgaW5wdXQgb24gd2hpdGVzcGFjZSwgYW5kIHRoZW4gc2VuZHMgZWFjaAo+IGNodW5rIHRv
IHRoZSBhbmFseXplci4KPgo+IHF1ZXJ5MSBjb250YWlucyBubyB3aGl0ZXNwYWNlLCBzbyB0aGUg
ZW50aXJlIHN0cmluZyBpcyBzZW50IHRvCj4gU3RhbmRhcmRBbmFseXplciwgd2hpY2ggcHJvZHVj
ZXMgb25lIHRva2VuIHBlciBDSksgY2hhcmFjdGVyLCBmb3IgYSB0b3RhbCBvZgo+IHR3byB0b2tl
bnMuICBXaGVuIFF1ZXJ5UGFyc2VyIHJlY2VpdmVzIG1vcmUgdGhhbiBvbmUgdG9rZW4gYmFjayBm
cm9tIHRoZQo+IGFuYWx5emVyLCBpdCBwcm9kdWNlcyBhIFBocmFzZVF1ZXJ5ICh1bmxlc3MgdG9r
ZW5zIHNoYXJlIHRoZSBzYW1lIHBvc2l0aW9uLAo+IGJ1dCB0aGlzIGlzIG5vdCBhcHBsaWNhYmxl
IHRvIHlvdXIgc2l0dWF0aW9uKS4gIE11bHRpRmllbGRRdWVyeVBhcnNlcgo+IHNwZWNpYWxpemVz
IHRoaXMgYWN0aW9uIGJ5IHByb2R1Y2luZyBvbmUgUGhyYXNlUXVlcnkgcGVyIEZpZWxkLgo+Cj4g
cXVlcnkyIGNvbnRhaW5zIGEgc3BhY2UsIHNvIHRoZSBmb2xsb3dpbmcgaXMgcGVyZm9ybWVkIGZv
ciBlYWNoCj4gd2hpdGVzcGFjZS1zZXBhcmF0ZWQgY2h1bmsgKGluIHF1ZXJ5MiwgdGhpcyBtZWFu
cyBvbmUgY2hhcmFjdGVyIHBlciBjaHVuayk6Cj4KPiBUaGUgY2h1bmsgaXMgc2VudCB0byB0aGUg
YW5hbHl6ZXIsIHdoaWNoIHByb2R1Y2VzIGEgc2luZ2xlIHRva2VuIGZvciBlYWNoCj4gQ0pLIGNo
YXJhY3RlciAtIG9uZSB0b2tlbiBpcyBwcm9kdWNlZCBiZWNhdXNlIGVhY2ggY2h1bmsgY29udGFp
bnMgYSBzaW5nbGUKPiBjaGFyYWN0ZXIuICBXaGVuIFF1ZXJ5UGFyc2VyIHJlY2VpdmVzIGEgc2lu
Z2xlIHRva2VuIGJhY2sgZnJvbSB0aGUgYW5hbHl6ZXIsCj4gaXQgcHJvZHVjZXMgYSBUZXJtUXVl
cnkuICBNdWx0aUZpZWxkUXVlcnlQYXJzZXIgc3BlY2lhbGl6ZXMgdGhpcyBhY3Rpb24gYnkKPiBw
cm9kdWNpbmcgb25lIFRlcm1RdWVyeSBwZXIgRmllbGQsIGFuZCB0aGVuIGdyb3VwcyB0aGVzZSBw
ZXItRmllbGQKPiBUZXJtUXVlcnkncyB0b2dldGhlciBpbiBhIEJvb2xlYW5RdWVyeSwgZGVub3Rl
ZCBpbiB0aGUgb3V0cHV0IGFzIGEKPiBwYXJlbnRoZXNpemVkIGdyb3VwLgo+Cj4gU3RldmUKPgo+
IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNj
cmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6
IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIApyZWdhcmRzCmouTAo=
------=_Part_39183_25874940.1224810016175--

From java-user-return-36783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 01:08:31 2008
Return-Path: <java-user-return-36783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31743 invoked from network); 24 Oct 2008 01:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 01:08:31 -0000
Received: (qmail 36392 invoked by uid 500); 24 Oct 2008 01:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36363 invoked by uid 500); 24 Oct 2008 01:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36352 invoked by uid 99); 24 Oct 2008 01:08:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 18:08:28 -0700
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aashish.Agrawal@morganstanley.com designates 199.89.103.68 as permitted sender)
Received: from [199.89.103.68] (HELO pimtaint01.ms.com) (199.89.103.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 01:07:15 +0000
Received: from pimtaint01 (localhost.ms.com [127.0.0.1])
	by pimtaint01.ms.com (output Postfix) with ESMTP id 4897E9D8094
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 21:07:53 -0400 (EDT)
Received: from ny0032as02 (unknown [170.74.93.69])
	by pimtaint01.ms.com (internal Postfix) with ESMTP id 25EC55B0031
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 21:07:53 -0400 (EDT)
Received: from ny0032as02 (localhost [127.0.0.1])
	by ny0032as02 (msa-out Postfix) with ESMTP id 0D7B6D3C0C0
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 21:07:53 -0400 (EDT)
Received: from PIWEXOB01.msad.ms.com (piwexob01 [144.14.3.72])
	by ny0032as02 (mta-in Postfix) with ESMTP id 078FB64C02F
	for <java-user@lucene.apache.org>; Thu, 23 Oct 2008 21:07:53 -0400 (EDT)
Received: from KJWEXBH01.msad.ms.com ([161.144.49.137]) by PIWEXOB01.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Thu, 23 Oct 2008 21:07:52 -0400
Received: from TKWEXMB22.msad.ms.com ([161.144.49.148]) by KJWEXBH01.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Fri, 24 Oct 2008 10:07:50 +0900
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C93574.EEA3F18B"
Content-Transfer-Encoding: 7bit
x-mimeole: Produced By Microsoft MimeOLE V6.00.3790.2992
Subject: RE: How to use regexQuery along with fuzzy logic capabilities
Date: Fri, 24 Oct 2008 10:07:49 +0900
Message-ID: <ABF971E134098D40A9F82A75E3D2B46B023D4C29@TKWEXMB22.msad.ms.com>
In-Reply-To: <ABF971E134098D40A9F82A75E3D2B46B023D4C22@TKWEXMB22.msad.ms.com>
X-MS-Has-Attach: 
Importance: normal
Priority: normal
X-MS-TNEF-Correlator: 
Thread-Topic: How to use regexQuery along with fuzzy logic capabilities
Thread-Index: Ack0wj+rG7bHRiiHRIObDx8E2aSbEAAseMAA
References: <ABF971E134098D40A9F82A75E3D2B46B023D4C22@TKWEXMB22.msad.ms.com>
From: "Agrawal, Aashish \(IT\)" <Aashish.Agrawal@morganstanley.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Oct 2008 01:07:50.0305 (UTC) FILETIME=[EF3DC110:01C93574]
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 23102008 #1201277, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C93574.EEA3F18B
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

any comments / help on this question ?
=20
thanks,=20
Aashish
=20
 Hi,=20
=20
I want to use lucene for a simple search engine. If I use the code like
this,=20
QueryParser parser =3D new QueryParser(field, analyzer);
Query query =3D parser.parse(line);
searcher.search(query)=20
above code doesn't give me regular expression search power, while at the
other hand if I use the below code,=20
RegexQuery rexquery =3D new RegexQuery(new Term(field, line));
searcher.search(rexquery).,=20
I don't get the fuzzy logic and other search abilities which I get using
the analyzer.
=20
I am not java expert, could you please give me a simple example on this
?=20
=20
thanks
Aashish Agrawal
--------------------------------------------------------

NOTICE: If received in error, please destroy and notify sender. Sender =
does not intend to waive confidentiality or privilege. Use of this email =
is prohibited when received in error.

------_=_NextPart_001_01C93574.EEA3F18B--

From java-user-return-36784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 06:31:03 2008
Return-Path: <java-user-return-36784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60335 invoked from network); 24 Oct 2008 06:31:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 06:31:03 -0000
Received: (qmail 88059 invoked by uid 500); 24 Oct 2008 06:31:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87311 invoked by uid 500); 24 Oct 2008 06:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87300 invoked by uid 99); 24 Oct 2008 06:30:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Oct 2008 23:30:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.217] (HELO smtp107.mail.mud.yahoo.com) (209.191.85.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Oct 2008 06:29:45 +0000
Received: (qmail 56168 invoked from network); 24 Oct 2008 06:30:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=f1FHBz6UghevrF+urQF9dpwufTkewdIvQEdZd4OEkn8C64oVrtxTWerY2cY/gvZ/nNhB14enc1XzKHWKBHQE4uX76A8JWriGPUir0ISIPJre2KNH3aRLwrpNQrbIe2QvVwNUCH0tfgBgHyMSAA5zNhn9qh/SAnUnYd4kEnvbOU4=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp107.mail.mud.yahoo.com with SMTP; 24 Oct 2008 06:30:22 -0000
X-YMail-OSG: R8E8IFYVM1mWbiZDCpLCLzkgJBh2N5mo.a_Q2Mcq7zhDdAcprkIPvEpCR7yoJ3LP4kqy3hnMftaWoi3hRKGVcexbFIjjlY3tMSYw6WSR6grQ_skZrtORDkuQq9IIsTKtoyptvTak888I7BgY5MlnVosAsDXhS5INinK2VgcTIMOisla5iGSJUVkUyYGB
X-Yahoo-Newman-Property: ymail-3
Message-ID: <05e901c935a1$fb3aeec0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <04ef01c93382$44c7ce40$330bc30a@sv.us.sonicwall.com> <359a92830810210748n5eab2590o379838222308de1c@mail.gmail.com> <050a01c934cf$412fdc20$330bc30a@sv.us.sonicwall.com> <DE4E6F97-9895-404B-845F-B485A5A4F33C@aconex.com> <055f01c934e6$731e0740$330bc30a@sv.us.sonicwall.com> <057d01c934f0$2906b2b0$330bc30a@sv.us.sonicwall.com> <18df68a40810230255n35cc1705if0bef8736c357cd2@mail.gmail.com> <059101c934f8$3ac088c0$330bc30a@sv.us.sonicwall.com>
Subject: Re: Multisearcher will maintain index order sorting?
Date: Fri, 24 Oct 2008 12:00:13 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Any commets are suggestions are greatly appreciated.

Regards
Ganesh

----- Original Message ----- 
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Sent: Thursday, October 23, 2008 3:45 PM
Subject: Re: Multisearcher will maintain index order sorting?


> Multisearcher after performing search on second index, adds the resultant 
> docid with the maxdocid of the first index. In my case it would be 3. 
> After incrementing the docid, the document is inserted in to the 
> FieldDocSortedHitQueue. FieldDocSortedHitQueue is an extension of priority 
> queue should sort in the increasing order. It should insert docid 3 after 
> 2 and not after 0.
>
> code snippet of MultiSearcher.Java
> --------------------------------------
> if (hq == null) hq = new FieldDocSortedHitQueue (docs.fields, n);
> .....
> for (int j = 0; j < scoreDocs.length; j++) { // merge scoreDocs into hq
>        ScoreDoc scoreDoc = scoreDocs[j];
>        scoreDoc.doc += starts[i];                //Doc id is 
> incremented*******
>        if (!hq.insert (scoreDoc))                  //Insertion should do 
> automatic sorting
>          break;                                        }
>
> Regards
> Ganesh
>
>
> ----- Original Message ----- 
> From: "Hadi Forghani" <hadi4i@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, October 23, 2008 3:25 PM
> Subject: Re: Multisearcher will maintain index order sorting?
>
>
>> because when you want to find X of second index, shoud pass docId=3 to
>> MultiSearcher and MultiSearcher can Find Sub Search of this Document with
>> calculation length of all subSearcher.
>> for example when you get doc with DocID 3(Second X), multisearch (see the
>> code of multisearcher doc(int i)), mines 3 from your DocID(because the 
>> first
>> Searcher has 3 documents) and then pass zero to second Searcher and want 
>> to
>> return 0 doc from it.
>> on the other hand, multisearcher find subsearcher by BinarySearchTree no
>> just that is said.
>>
>> On Thu, Oct 23, 2008 at 12:47 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>> In IndexA there are 3 docs
>>> DocID, Terms
>>> 0,X
>>> 1,X Y
>>> 2,X Z
>>>
>>> In IndexB there are 3 docs
>>> DocID, Terms
>>> 0,X
>>> 1,X Y
>>> 2,X Z
>>>
>>> When i do sort on indexed order using Multisearcher and
>>> ParallelMultiSearcher, it returns the result
>>> 0,X
>>> 3,X
>>> 1,X Y
>>> 4,X Y
>>> 2,X Z
>>> 5,X Z
>>>
>>> But it should be in the order of 0,1,2,3,4,5. Could anyone explain why?
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Ganesh" <emailgane@yahoo.co.in>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Thursday, October 23, 2008 1:37 PM
>>>
>>> Subject: Re: Multisearcher will maintain index order sorting?
>>>
>>>
>>>  Multisearcher and ParallelMultiSearcher, when requested to sort on doc
>>>> (indexed order), it merges the result by docID of each DB.
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Paul Smith" <psmith@aconex.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Thursday, October 23, 2008 10:57 AM
>>>> Subject: Re: Multisearcher will maintain index order sorting?
>>>>
>>>>
>>>>
>>>>> On 23/10/2008, at 4:20 PM, Ganesh wrote:
>>>>>
>>>>>  My Index DB is having 10 million records and it will grow to 30 
>>>>> million.
>>>>>> Currently I am using millisecond timestamp and the RAM cosumption is 
>>>>>> more. I
>>>>>> will change the resolution to minute. I am  using 2 searcher objects
>>>>>> refreshing each other every minute. When i  do a warmup query with 
>>>>>> sort of
>>>>>> timestamp then the cpu is spiked to  100% and this is happening for 
>>>>>> every
>>>>>> minute.  In order to avoid  these issues, i am planning to break my 
>>>>>> DB and
>>>>>> to do sort on indexed  order.
>>>>>>
>>>>>> Will multisearcher will maintain indexed order on sorting?
>>>>>>
>>>>>
>>>>>
>>>>> If you need to keep the millisecond accuracy, break down the timestamp
>>>>> into 3 fields: day, time, millisecond, and sort on 3 fields.  This way 
>>>>> each
>>>>> field has a much smaller number of distinct values and well  occupy 
>>>>> vastly
>>>>> less memory over time.  I don't think there's much  overhead in this
>>>>> approach either, because in most cases, the top-level  field (day) 
>>>>> will
>>>>> provide most of the sorting ability, and Lucene will  only need to hit 
>>>>> the
>>>>> time & millisecond fields less frequently for  comparison.
>>>>>
>>>>> I believe Multisearcher does a merge sort of the 2 (or more) sub-
>>>>> searchers, so there is an overhead in using in versus a single 
>>>>> searcher.
>>>>>
>>>>> Paul
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>> Send instant messages to your online friends
>>>> http://in.messenger.yahoo.com
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> Send instant messages to your online friends 
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 07:36:21 2008
Return-Path: <java-user-return-36785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95701 invoked from network); 24 Oct 2008 07:36:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 07:36:21 -0000
Received: (qmail 63610 invoked by uid 500); 24 Oct 2008 07:36:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63583 invoked by uid 500); 24 Oct 2008 07:36:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63572 invoked by uid 99); 24 Oct 2008 07:36:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 00:36:17 -0700
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aashish.Agrawal@morganstanley.com designates 199.89.103.69 as permitted sender)
Received: from [199.89.103.69] (HELO pimtaint02.ms.com) (199.89.103.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 07:35:04 +0000
Received: from pimtaint02 (localhost.ms.com [127.0.0.1])
	by pimtaint02.ms.com (output Postfix) with ESMTP id E4A005F0017
	for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 03:35:42 -0400 (EDT)
Received: from ny0031as01 (unknown [144.203.194.93])
	by pimtaint02.ms.com (internal Postfix) with ESMTP id BDAF592C030
	for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 03:35:42 -0400 (EDT)
Received: from ny0031as01 (localhost [127.0.0.1])
	by ny0031as01 (msa-out Postfix) with ESMTP id A4D339700EA
	for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 03:35:42 -0400 (EDT)
Received: from piwexob04.msad.ms.com (piwexob04 [205.228.46.148])
	by ny0031as01 (mta-in Postfix) with ESMTP id A1DAFC002F
	for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 03:35:42 -0400 (EDT)
Received: from TJWEXBH01.msad.ms.com ([161.144.49.190]) by piwexob04.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Fri, 24 Oct 2008 03:35:42 -0400
Received: from TKWEXMB22.msad.ms.com ([161.144.49.148]) by TJWEXBH01.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Fri, 24 Oct 2008 16:35:40 +0900
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C935AB.1CCE90AD"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2992
Content-Transfer-Encoding: 7bit
Subject: RE: example on RegexQuery 
Date: Fri, 24 Oct 2008 16:35:38 +0900
Message-ID: <ABF971E134098D40A9F82A75E3D2B46B023D4C35@TKWEXMB22.msad.ms.com>
In-Reply-To: <ABF971E134098D40A9F82A75E3D2B46B023D4C29@TKWEXMB22.msad.ms.com>
X-MS-Has-Attach: 
Importance: normal
Priority: normal
X-MS-TNEF-Correlator: 
Thread-Topic: example on RegexQuery 
Thread-Index: Ack0wj+rG7bHRiiHRIObDx8E2aSbEAAseMAAAA2vZNA=
References: <ABF971E134098D40A9F82A75E3D2B46B023D4C22@TKWEXMB22.msad.ms.com> <ABF971E134098D40A9F82A75E3D2B46B023D4C29@TKWEXMB22.msad.ms.com>
From: "Agrawal, Aashish \(IT\)" <Aashish.Agrawal@morganstanley.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Oct 2008 07:35:40.0339 (UTC) FILETIME=[1D432830:01C935AB]
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 24102008 #1201648, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C935AB.1CCE90AD
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,=20
=20
I want to use lucene for a simple search engine  with regex support .
I tried using RegexQuery.. but seems I am missing something.
Is there any working exmaple on using RegexQuery ??
=20
thanks
Aashish Agrawal
--------------------------------------------------------

NOTICE: If received in error, please destroy and notify sender. Sender =
does not intend to waive confidentiality or privilege. Use of this email =
is prohibited when received in error.

------_=_NextPart_001_01C935AB.1CCE90AD--

From java-user-return-36786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 10:59:16 2008
Return-Path: <java-user-return-36786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83435 invoked from network); 24 Oct 2008 10:59:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 10:59:16 -0000
Received: (qmail 30109 invoked by uid 500); 24 Oct 2008 10:59:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30066 invoked by uid 500); 24 Oct 2008 10:59:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30041 invoked by uid 99); 24 Oct 2008 10:59:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 03:59:11 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 10:58:00 +0000
Received: by fg-out-1718.google.com with SMTP id l27so943034fgb.27
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 03:58:37 -0700 (PDT)
Received: by 10.181.137.17 with SMTP id p17mr686719bkn.93.1224845917632;
        Fri, 24 Oct 2008 03:58:37 -0700 (PDT)
Received: from ?192.168.3.91? ([62.22.171.242])
        by mx.google.com with ESMTPS id 4sm330448fgg.4.2008.10.24.03.58.36
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 24 Oct 2008 03:58:36 -0700 (PDT)
Message-ID: <4901AA65.6010209@dagi3d.net>
Date: Fri, 24 Oct 2008 12:58:45 +0200
From: =?ISO-8859-1?Q?Borja_Mart=EDn?= <borjam@dagi3d.net>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: tag search
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I want to index a document that has a field called 'tags' that looks
like that : 'foo, foo bar'
The comma is the separator for each tag, so I have a tag with the value
'foo' and another one with 'foo bar'
What I want to do is to be able to retrieve the documents with certain
tag(only one tag per query), so if I search by 'foo', this document
should be hit, as well as if I search by 'foo bar', but if I enter 'bar'
as the tag, it shouldn't although it is being retrieved too. I tried to
index the field as keyword and as text(I know so it's tokenized so it
shouldn't work at all) and tried several queries with no success. Any
tip to achieve what I want? Should I write my own analyzer?
Thanks in advance.

Regards


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 11:26:52 2008
Return-Path: <java-user-return-36787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92318 invoked from network); 24 Oct 2008 11:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 11:26:52 -0000
Received: (qmail 48923 invoked by uid 500); 24 Oct 2008 11:26:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48887 invoked by uid 500); 24 Oct 2008 11:26:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48876 invoked by uid 99); 24 Oct 2008 11:26:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 04:26:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.2.129.75] (HELO penthesilea.sfs.uni-tuebingen.de) (134.2.129.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 11:25:36 +0000
Received: from [134.2.129.126] (ithaka.sfs.uni-tuebingen.de [134.2.129.126])
	by penthesilea.sfs.uni-tuebingen.de (Postfix) with ESMTP id 696E6C6D8
	for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 13:25:44 +0200 (MET DST)
Message-ID: <4901B0D8.7000504@sfs.uni-tuebingen.de>
Date: Fri, 24 Oct 2008 13:26:16 +0200
From: Niels Ott <nott@sfs.uni-tuebingen.de>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining keyword queries with database-style queries
References: <49006DC9.4070502@sfs.uni-tuebingen.de> <359a92830810230547n629c5e0ek4daf18e971761439@mail.gmail.com>
In-Reply-To: <359a92830810230547n629c5e0ek4daf18e971761439@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,

this RangeQuery thing looks promising. It might be a bit hacky but it 
will most probably do the job in the given time and framework.

Thanks a lot,

    Niels

Erick Erickson schrieb:
> Well, assuming that token_count is an indexed field
> in your documents (i.e. not something you're
> computing on the fly), just use a RangeQuery for the numeric
> part. Actually, you probably want to use
> ConstantScoreRangeQuery...
> 
> The only thing you have to watch is that Lucene does a
> lexical compare, so you have to index your numbers
> as comparable strings, probably left-padding to some
> fixed width with zeros, see NumberTools.
> 
> Best
> Erick
> 
> On Thu, Oct 23, 2008 at 8:27 AM, Niels Ott <nott@sfs.uni-tuebingen.de>wrote:
> 
>> Hi everybody,
>>
>> I need to query for documents not only for search terms but also for
>> numeric values (or other general types). Let me try to explain with a
>> hypothetical example.
>>
>> Assuming there is a value for the number words in each document (or the
>> number of person names, or whatever), I would want to formulate a query
>> like "Give me documents containing 'jack johnson' AND with token_count >
>> 250".
>>
>> I've been working with Lucene before and the keyword part is easy, but
>> what would be a good solution to query for numbers etc.?
>>
>> One first idea I had was storing the numbers (which are basically a
>> HashMap<String,Double>) in the index in some way or the other. But it is
>> not at all obvious for me how to query them then.
>>
>> Another thing I could think of would be using a separate database of any
>> type, but then how to bring those two together in a way that makes sense?
>>
>> Any pointers to useful resources and any types of hints are welcome! :-)
>>
>> Best,
>>
>>  Niels
>>

-- 
Niels Ott
Computational Linguist (B.A.)
http://www.drni.de/niels/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 11:56:37 2008
Return-Path: <java-user-return-36788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1492 invoked from network); 24 Oct 2008 11:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 11:56:37 -0000
Received: (qmail 75959 invoked by uid 500); 24 Oct 2008 11:56:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75931 invoked by uid 500); 24 Oct 2008 11:56:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75912 invoked by uid 99); 24 Oct 2008 11:56:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 04:56:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [83.247.21.92] (HELO mail.local.wis.nl) (83.247.21.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Oct 2008 11:55:24 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: tag search
Date: Fri, 24 Oct 2008 13:55:32 +0200
Message-ID: <50CA25BD6EEA954FA592C097399942E319CF4FB4@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: tag search
Thread-Index: Ack1x3921xZx1z6fSnm6dXhhFE94aQAB89nQ
References: <4901AA65.6010209@dagi3d.net>
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Borja,

Try to add multiple untokenized fields named 'tag', each holding one =
tag.

Regards,
Daan

> -----Original Message-----
> From: Borja Mart=EDn [mailto:borjam@dagi3d.net]
> Sent: vrijdag 24 oktober 2008 12:59
> To: java-user@lucene.apache.org
> Subject: tag search
>=20
> Hi,
> I want to index a document that has a field called 'tags' that looks
> like that : 'foo, foo bar'
> The comma is the separator for each tag, so I have a tag with the =
value
> 'foo' and another one with 'foo bar'
> What I want to do is to be able to retrieve the documents with certain
> tag(only one tag per query), so if I search by 'foo', this document
> should be hit, as well as if I search by 'foo bar', but if I enter =
'bar'
> as the tag, it shouldn't although it is being retrieved too. I tried =
to
> index the field as keyword and as text(I know so it's tokenized so it
> shouldn't work at all) and tried several queries with no success. Any
> tip to achieve what I want? Should I write my own analyzer?
> Thanks in advance.
>=20
> Regards
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 12:14:36 2008
Return-Path: <java-user-return-36789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6854 invoked from network); 24 Oct 2008 12:14:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 12:14:36 -0000
Received: (qmail 95584 invoked by uid 500); 24 Oct 2008 12:14:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95502 invoked by uid 500); 24 Oct 2008 12:14:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95490 invoked by uid 99); 24 Oct 2008 12:14:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 05:14:32 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 12:13:18 +0000
Received: by fk-out-0910.google.com with SMTP id 18so669334fkq.5
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 05:13:55 -0700 (PDT)
Received: by 10.181.134.11 with SMTP id l11mr733732bkn.73.1224850435232;
        Fri, 24 Oct 2008 05:13:55 -0700 (PDT)
Received: from ?192.168.3.91? ([62.22.171.242])
        by mx.google.com with ESMTPS id 3sm411489fge.3.2008.10.24.05.13.54
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 24 Oct 2008 05:13:54 -0700 (PDT)
Message-ID: <4901BC0A.7070208@dagi3d.net>
Date: Fri, 24 Oct 2008 14:14:02 +0200
From: =?ISO-8859-1?Q?Borja_Mart=EDn?= <borjam@dagi3d.net>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: tag search
References: <4901AA65.6010209@dagi3d.net> <50CA25BD6EEA954FA592C097399942E319CF4FB4@CM1.wis.local>
In-Reply-To: <50CA25BD6EEA954FA592C097399942E319CF4FB4@CM1.wis.local>
Content-Type: multipart/alternative;
 boundary="------------000306050608020507060801"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------000306050608020507060801
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

I already tried that but with no success. Here is a snippet of what if I 
tried: http://pastebin.com/m41f6719a
Regards

Daan de Wit escribi:
> Hi Borja,
>
> Try to add multiple untokenized fields named 'tag', each holding one tag.
>
> Regards,
> Daan
>
>   
>> -----Original Message-----
>> From: Borja Martn [mailto:borjam@dagi3d.net]
>> Sent: vrijdag 24 oktober 2008 12:59
>> To: java-user@lucene.apache.org
>> Subject: tag search
>>
>> Hi,
>> I want to index a document that has a field called 'tags' that looks
>> like that : 'foo, foo bar'
>> The comma is the separator for each tag, so I have a tag with the value
>> 'foo' and another one with 'foo bar'
>> What I want to do is to be able to retrieve the documents with certain
>> tag(only one tag per query), so if I search by 'foo', this document
>> should be hit, as well as if I search by 'foo bar', but if I enter 'bar'
>> as the tag, it shouldn't although it is being retrieved too. I tried to
>> index the field as keyword and as text(I know so it's tokenized so it
>> shouldn't work at all) and tried several queries with no success. Any
>> tip to achieve what I want? Should I write my own analyzer?
>> Thanks in advance.
>>
>> Regards
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


--------------000306050608020507060801--

From java-user-return-36790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 12:17:55 2008
Return-Path: <java-user-return-36790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7865 invoked from network); 24 Oct 2008 12:17:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 12:17:55 -0000
Received: (qmail 99216 invoked by uid 500); 24 Oct 2008 12:17:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99173 invoked by uid 500); 24 Oct 2008 12:17:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99162 invoked by uid 99); 24 Oct 2008 12:17:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 05:17:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 12:16:39 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 31057109F32
	for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 05:16:47 -0700 (PDT)
Message-Id: <C7AC6859-81DF-4774-992B-63CDE448DEFA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6A95@rw-ex2003.BROADVISION.COM>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Any Spanish analyzer available?
Date: Fri, 24 Oct 2008 08:16:46 -0400
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6A95@rw-ex2003.BROADVISION.COM>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

The Snowball stuff supports Spanish.

On Oct 23, 2008, at 6:13 PM, Zhang, Lisheng wrote:

> Hi,
>
> Is there any Spanish analyzer available for lucene applications?
> I did not see any in lucene 2.4.0 contribute folders.
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 12:18:53 2008
Return-Path: <java-user-return-36791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8159 invoked from network); 24 Oct 2008 12:18:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 12:18:52 -0000
Received: (qmail 1083 invoked by uid 500); 24 Oct 2008 12:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1053 invoked by uid 500); 24 Oct 2008 12:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1042 invoked by uid 99); 24 Oct 2008 12:18:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 05:18:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 12:17:35 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id E2FF47FAA
	for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 05:18:13 -0700 (PDT)
Message-Id: <BB8FF42F-4CA7-44FB-8EC8-32B848485A95@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4901AA65.6010209@dagi3d.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: tag search
Date: Fri, 24 Oct 2008 08:18:11 -0400
References: <4901AA65.6010209@dagi3d.net>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You either need to write a tokenizer that breaks on comma or you can =20
do as Daan suggested.

On Oct 24, 2008, at 6:58 AM, Borja Mart=EDn wrote:

> Hi,
> I want to index a document that has a field called 'tags' that looks
> like that : 'foo, foo bar'
> The comma is the separator for each tag, so I have a tag with the =20
> value
> 'foo' and another one with 'foo bar'
> What I want to do is to be able to retrieve the documents with certain
> tag(only one tag per query), so if I search by 'foo', this document
> should be hit, as well as if I search by 'foo bar', but if I enter =20
> 'bar'
> as the tag, it shouldn't although it is being retrieved too. I tried =20=

> to
> index the field as keyword and as text(I know so it's tokenized so it
> shouldn't work at all) and tried several queries with no success. Any
> tip to achieve what I want? Should I write my own analyzer?
> Thanks in advance.
>
> Regards
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 12:23:09 2008
Return-Path: <java-user-return-36792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15697 invoked from network); 24 Oct 2008 12:23:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 12:23:09 -0000
Received: (qmail 10937 invoked by uid 500); 24 Oct 2008 12:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10903 invoked by uid 500); 24 Oct 2008 12:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10891 invoked by uid 99); 24 Oct 2008 12:23:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 05:23:05 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 12:21:54 +0000
Received: by nf-out-0910.google.com with SMTP id g16so353117nfd.15
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 05:22:32 -0700 (PDT)
Received: by 10.86.59.2 with SMTP id h2mr268616fga.73.1224850952198;
        Fri, 24 Oct 2008 05:22:32 -0700 (PDT)
Received: from ?192.168.3.91? ([62.22.171.242])
        by mx.google.com with ESMTPS id 4sm488953fge.8.2008.10.24.05.22.31
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 24 Oct 2008 05:22:31 -0700 (PDT)
Message-ID: <4901BE0F.6020709@dagi3d.net>
Date: Fri, 24 Oct 2008 14:22:39 +0200
From: =?ISO-8859-1?Q?Borja_Mart=EDn?= <borjam@dagi3d.net>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: tag search
References: <4901AA65.6010209@dagi3d.net> <50CA25BD6EEA954FA592C097399942E319CF4FB4@CM1.wis.local>
In-Reply-To: <50CA25BD6EEA954FA592C097399942E319CF4FB4@CM1.wis.local>
Content-Type: multipart/alternative;
 boundary="------------060709060100010704070301"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060709060100010704070301
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Sorry,
as I was trying to do this with the php implementation and thought it 
was a problem with the query syntax, I sent the message to this list 
too. But it seems that is the php version lacks from some features. 
Sorry for the incoveniences.

Regards.

Daan de Wit escribi:
> Hi Borja,
>
> Try to add multiple untokenized fields named 'tag', each holding one tag.
>
> Regards,
> Daan
>
>   
>> -----Original Message-----
>> From: Borja Martn [mailto:borjam@dagi3d.net]
>> Sent: vrijdag 24 oktober 2008 12:59
>> To: java-user@lucene.apache.org
>> Subject: tag search
>>
>> Hi,
>> I want to index a document that has a field called 'tags' that looks
>> like that : 'foo, foo bar'
>> The comma is the separator for each tag, so I have a tag with the value
>> 'foo' and another one with 'foo bar'
>> What I want to do is to be able to retrieve the documents with certain
>> tag(only one tag per query), so if I search by 'foo', this document
>> should be hit, as well as if I search by 'foo bar', but if I enter 'bar'
>> as the tag, it shouldn't although it is being retrieved too. I tried to
>> index the field as keyword and as text(I know so it's tokenized so it
>> shouldn't work at all) and tried several queries with no success. Any
>> tip to achieve what I want? Should I write my own analyzer?
>> Thanks in advance.
>>
>> Regards
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


--------------060709060100010704070301--

From java-user-return-36793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 12:38:17 2008
Return-Path: <java-user-return-36793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21724 invoked from network); 24 Oct 2008 12:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 12:38:17 -0000
Received: (qmail 27618 invoked by uid 500); 24 Oct 2008 12:38:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27584 invoked by uid 500); 24 Oct 2008 12:38:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27573 invoked by uid 99); 24 Oct 2008 12:38:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 05:38:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 12:37:00 +0000
Received: by rv-out-0506.google.com with SMTP id f6so835735rvb.5
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 05:37:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=djaRAv6u1wU7/lMeZLMZZ8g/AWJ8HD1gLYK056xmwP0=;
        b=o3g3IN+5ZC18dfrdKYbXT4CJPUWqJbpULST3aoZ8ny/rPK8GzB9/uWgonkGzg630nZ
         deKiMEmqJg9i5Cz9NaXgYYUZv7yWnj7N32hESD4ekHQXUNqjM+OFmBWsWGt3nydCi+U5
         paLP1/DwEOfL+6/wf6bIf2PF8WTwfdvYL2+/w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OTEyzHEDnwfMisBXvIR3ZYalRMARgvxzEDGw+JOKLkYTjjKbxDZ63upllKLqQbgArq
         Z4EP75LlWnNKPxTshaN+V8vWQT/fpxJ2q8us086JGUz7rxyJD1Gs2aKlZ09fQppJAWa+
         IPvp4vlSCraEJmaFyRvffR9YiP9aZO8ySDZPY=
Received: by 10.141.43.5 with SMTP id v5mr1148520rvj.49.1224851849340;
        Fri, 24 Oct 2008 05:37:29 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Fri, 24 Oct 2008 05:37:29 -0700 (PDT)
Message-ID: <359a92830810240537y5166e11bwae0fd00d0163d08a@mail.gmail.com>
Date: Fri, 24 Oct 2008 08:37:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Combining keyword queries with database-style queries
In-Reply-To: <4901B0D8.7000504@sfs.uni-tuebingen.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44249_14570173.1224851849324"
References: <49006DC9.4070502@sfs.uni-tuebingen.de>
	 <359a92830810230547n629c5e0ek4daf18e971761439@mail.gmail.com>
	 <4901B0D8.7000504@sfs.uni-tuebingen.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44249_14570173.1224851849324
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hacky is in the eye of the hacker <G>.

It's hard to keep in mind that Lucene is a search engine,
not a database, so whenever I find myself thinking in
database terms, I'm usually making things difficult. It
operates on strings, not the "usual" data types that one
thinks are available in programming languages, DBs, etc...

So I find myself doing things that "aren't natural" <G>...

Best
Erick

On Fri, Oct 24, 2008 at 7:26 AM, Niels Ott <nott@sfs.uni-tuebingen.de>wrote:

> Erick,
>
> this RangeQuery thing looks promising. It might be a bit hacky but it will
> most probably do the job in the given time and framework.
>
> Thanks a lot,
>
>   Niels
>
> Erick Erickson schrieb:
>
>  Well, assuming that token_count is an indexed field
>> in your documents (i.e. not something you're
>> computing on the fly), just use a RangeQuery for the numeric
>> part. Actually, you probably want to use
>> ConstantScoreRangeQuery...
>>
>> The only thing you have to watch is that Lucene does a
>> lexical compare, so you have to index your numbers
>> as comparable strings, probably left-padding to some
>> fixed width with zeros, see NumberTools.
>>
>> Best
>> Erick
>>
>> On Thu, Oct 23, 2008 at 8:27 AM, Niels Ott <nott@sfs.uni-tuebingen.de
>> >wrote:
>>
>>  Hi everybody,
>>>
>>> I need to query for documents not only for search terms but also for
>>> numeric values (or other general types). Let me try to explain with a
>>> hypothetical example.
>>>
>>> Assuming there is a value for the number words in each document (or the
>>> number of person names, or whatever), I would want to formulate a query
>>> like "Give me documents containing 'jack johnson' AND with token_count >
>>> 250".
>>>
>>> I've been working with Lucene before and the keyword part is easy, but
>>> what would be a good solution to query for numbers etc.?
>>>
>>> One first idea I had was storing the numbers (which are basically a
>>> HashMap<String,Double>) in the index in some way or the other. But it is
>>> not at all obvious for me how to query them then.
>>>
>>> Another thing I could think of would be using a separate database of any
>>> type, but then how to bring those two together in a way that makes sense?
>>>
>>> Any pointers to useful resources and any types of hints are welcome! :-)
>>>
>>> Best,
>>>
>>>  Niels
>>>
>>>
> --
> Niels Ott
> Computational Linguist (B.A.)
> http://www.drni.de/niels/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44249_14570173.1224851849324--

From java-user-return-36794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 14:02:35 2008
Return-Path: <java-user-return-36794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66275 invoked from network); 24 Oct 2008 14:02:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 14:02:35 -0000
Received: (qmail 38936 invoked by uid 500); 24 Oct 2008 14:02:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38909 invoked by uid 500); 24 Oct 2008 14:02:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38898 invoked by uid 99); 24 Oct 2008 14:02:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 07:02:31 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 14:01:21 +0000
X-SBRS: None
X-MID: 101530126
Received: from fmd3tj001.fda.gov ([10.160.10.76])
  by ironport5.fda.gov with ESMTP; 24 Oct 2008 10:01:57 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.62]) by FMD3TJ001.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 24 Oct 2008 10:01:57 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Multi -threaded indexing of large number of PDF documents
Date: Fri, 24 Oct 2008 10:01:56 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73AFF@FMD3VS012.fda.gov>
In-Reply-To: <16F4CE0A-68D2-4CA8-8ADC-6D3AE42DC0C1@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Multi -threaded indexing of large number of PDF documents
Thread-Index: Ack1Ups+qJvgYxZJS92DrL2gRcYiogAjOYDQ
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov> <4900A823.50804@gmail.com> <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com> <4900CC48.8070008@gmail.com> <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com> <5e76f3840810231257u57ef4017qcbf916928ffc123a@mail.gmail.com> <16F4CE0A-68D2-4CA8-8ADC-6D3AE42DC0C1@mikemccandless.com>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Oct 2008 14:01:57.0273 (UTC) FILETIME=[13CAA090:01C935E1]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
Hi Glen, Mike, Grant & Mark

Thank you for the quick responses.

1. Yes, I'm looking now at ThreadPoolExecutor. Looking for a sample code
to improve the multi-threaded code.

2. We'll try using as many Indexwriters as the number of cores, first
(which is 2cpu x 4 core =3D 8).

3. Yes, PDFBox exceptions have been independently checked. We've a
prototype module to check PDF files that contain errors. Generally they
are few, less than 1% of the total number of files. The PDFs all have
been OCRed. Also, if any throws exceptions then they are quarantined in
a separate folder for further analysis to have a look at the document
itself.

4. We've tried using larger JVM space by defining -Xms1800m and
-Xmx1800m, but it runs out of memory. Only -Xms1080m and -Xmx1080m seems
stable. That is strange as we have 32 GB of RAM and 34GB swap space.
Typically no other application is running. However, the CentOS version
is 32 bit. The Ungava project seems to be using 64 bit.

5. -QUIT option for Linux does throw stack trace, but after few threads
it hangs. Don't know why. Need to look at that.

Meantime, we're seriously looking for a ThreadPoolExecutor sample source
code. It looks like, we need to use unbounded queues.

Really appreciate your inputs and will keep you posted on what we get.

Now working on the code for ThreadPoolExecutor.

Thanks and regards,
Sithu Sudarsan
Graduate Research Assistant, UALR
& Visiting Researcher, CDRH/OSEL

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Thursday, October 23, 2008 5:01 PM
To: java-user@lucene.apache.org; Glen Newton
Subject: Re: Multi -threaded indexing of large number of PDF documents


Glen Newton wrote:

> 2008/10/23 Michael McCandless <lucene@mikemccandless.com>:
>>
>> Mark Miller wrote:
>>
>>> Glen Newton wrote:
>>>>
>>>> 2008/10/23 Mark Miller <markrmiller@gmail.com>:
>>>>
>>>>> It sounds like you might have some thread synchronization issues =20
>>>>> outside
>>>>> of
>>>>> Lucene. To simplify things a bit, you might try just using one
>>>>> IndexWriter.
>>>>> If I remember right, the IndexWriter is now pretty efficient, =20
>>>>> and there
>>>>> isn't much need to index to smaller indexes and then merge. =20
>>>>> There is a
>>>>> lot
>>>>> of juggling to get wrong with that approach.
>>>>>
>>>>
>>>> While I agree it is easier to have a single IndexWriter, if you =20
>>>> have
>>>> multiple cores you will get significant speed-ups with multiple
>>>> IndexWriters, even with the impact of merging at the end.
>>>> #IndexWriters =3D # physical cores is an reasonable rule of thumb.
>>>>
>>>> General speed-up estimate: # cores * 0.6 - 0.8  over single =20
>>>> IndexWriter
>>>> YMMV
>>>>
>>>> When I get around to it, I'll re-run my tests varying the # of
>>>> IndexWriters & post.
>>>>
>>>> -Glen
>>>>
>>> Hey Mr McCandless, whats up with that? Can IndexWriter be made to =20
>>> be as
>>> efficient as using Multiple Writers? Where do you suppose the hold =20
>>> up is?
>>> Number of threads doing merges? Sync contention? I hate the idea =20
>>> of multiple
>>> IndexWriter/Readers being more efficient than a single instance. =20
>>> In an ideal
>>> Lucene world, a single instance would hide the complexity and use =20
>>> the number
>>> of threads needed to match multiple instance performance.
>>
>> Honestly this surprises me: I would expect a single IndexWriter with
>> multiple threads to be as fast (or faster, considering the extra =20
>> merge time
>> at the end) than multiple IndexWriters.
>>
>> IndexWriter's concurrency has improved alot lately, with
>> ConcurrentMergeScheduler.  The only serious operation that is not =20
>> concurrent
>> is flushing the RAM buffer as a new segment; but in a well tuned =20
>> indexing
>> process (large RAM buffer) the time spent there should be quite =20
>> small,
>> especially with a fast IO system.
>>
>> Actually, addIndexes is also not concurrent in that if multiple =20
>> threads call
>> it, only one can run at once.  But normally you would call it with =20
>> all the
>> indices you want to add, and then the merging is concurrent.
>>
>> Glen, in your single IndexWriter test, is it possible there was =20
>> accidental
>> thread contention during document preparation or analysis?
>
> I don't think there is. I've been refining this for quite a while, and
> have done a lot of analysis and hand-checking of the threading stuff.

OK.

For your multiple-index-writer test, how much time is spent building =20
the N indices vs merging them in the end?

> I do use multiple threads for document creation: this is where much of
> the speed-up happens (at least in my case where I have a large indexed
> field for the full-text of an article: the parsing becomes a
> significant part of the process).

So in the single-index-writer vs multiple-index-writer tests, this =20
part (64 threads that construct document objects) is unchanged, right?

How do you rate limit the 64 threads?  (Ie, slow them down when they =20
get too far ahead of indexing).

If you only process documents with the 64 threads (but not index =20
them), what percentage of the total time is that?  I'd like to tease =20
out "building documents" vs "indexing" times.

>> I do agree that we should strive to have enough concurrency in =20
>> IndexWriter
>> and IndexReader so that you don't get any real benefit by using =20
>> separate
>> instances. Eg in 2.4.0 you can now open read-only IndexReaders, and =20
>> on Unix
>> you can use NIOFSDirectory, both of which should go a long ways =20
>> towards
>> fixing IndexReader's concurrency issue.
>
> My original tests were in the Spring with 2.3.1. I am planning on
> doing the new tests with 2.4 for indexing, as well as re-doing my
> concurrent query tests[1] and concurrent multiple reader tests[2]
> using the features you describe. I am sure the results will be quite
> different...

Also, for the indexing tests, make sure you run with autoCommit=3Dfalse.

> BTW the files I am indexing were originally PDFs, but were batch
> converted to text and stored compressed on the filesystem, so except
> for GUnzipping them there is no other overhead.

But I'm confused: why do you need 64 threads to build up the =20
documents?  Gunzipping should be very low CPU cost.  Are you pre-=20
analyzing the fields on your documents?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 14:43:33 2008
Return-Path: <java-user-return-36795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92904 invoked from network); 24 Oct 2008 14:43:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 14:43:33 -0000
Received: (qmail 1226 invoked by uid 500); 24 Oct 2008 14:43:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 916 invoked by uid 500); 24 Oct 2008 14:43:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 904 invoked by uid 99); 24 Oct 2008 14:43:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 07:43:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 14:42:19 +0000
Received: from [172.18.230.243] (172.18.230.243) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.291.1; Fri, 24 Oct 2008 16:42:35 +0200
Subject: RE: Multi -threaded indexing of large number of PDF documents
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73AFF@FMD3VS012.fda.gov>
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
	 <4900A823.50804@gmail.com>
	 <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com>
	 <4900CC48.8070008@gmail.com>
	 <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com>
	 <5e76f3840810231257u57ef4017qcbf916928ffc123a@mail.gmail.com>
	 <16F4CE0A-68D2-4CA8-8ADC-6D3AE42DC0C1@mikemccandless.com>
	 <F8A04958BB57B64096F9BE6B9572564304C73AFF@FMD3VS012.fda.gov>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Fri, 24 Oct 2008 16:42:49 +0200
Message-ID: <1224859369.6523.49.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2008-10-24 at 16:01 +0200, Sudarsan, Sithu D. wrote:
> 4. We've tried using larger JVM space by defining -Xms1800m and
> -Xmx1800m, but it runs out of memory. Only -Xms1080m and -Xmx1080m seems
> stable. That is strange as we have 32 GB of RAM and 34GB swap space.
> Typically no other application is running. However, the CentOS version
> is 32 bit. The Ungava project seems to be using 64 bit.

The <2GB limit for Java is a known problem under Windows. I don't know
about CentOS, but from your description it seems that the problem exists
on that platform too. Anyway, you'll never get above 4GB for Java when
you're running 32bit. Might I ask why you're not using 64bit for a 32GB
machine?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 14:52:46 2008
Return-Path: <java-user-return-36796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96081 invoked from network); 24 Oct 2008 14:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 14:52:46 -0000
Received: (qmail 20986 invoked by uid 500); 24 Oct 2008 14:52:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20957 invoked by uid 500); 24 Oct 2008 14:52:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20946 invoked by uid 99); 24 Oct 2008 14:52:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 07:52:42 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 14:51:32 +0000
X-SBRS: None
X-MID: 101537305
Received: from fmd3tj001.fda.gov ([10.160.10.76])
  by ironport5.fda.gov with ESMTP; 24 Oct 2008 10:51:11 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.62]) by FMD3TJ001.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 24 Oct 2008 10:51:11 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Multi -threaded indexing of large number of PDF documents
Date: Fri, 24 Oct 2008 10:51:10 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73B00@FMD3VS012.fda.gov>
In-Reply-To: <1224859369.6523.49.camel@pc286>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Multi -threaded indexing of large number of PDF documents
Thread-Index: Ack15uRvG0lpXHM+RNeHeHx/J+upiwAALBgg
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov> <4900A823.50804@gmail.com> <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com> <4900CC48.8070008@gmail.com> <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com> <5e76f3840810231257u57ef4017qcbf916928ffc123a@mail.gmail.com> <16F4CE0A-68D2-4CA8-8ADC-6D3AE42DC0C1@mikemccandless.com> <F8A04958BB57B64096F9BE6B9572564304C73AFF@FMD3VS012.fda.gov> <1224859369.6523.49.camel@pc286>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>,
	<te@statsbiblioteket.dk>
X-OriginalArrivalTime: 24 Oct 2008 14:51:11.0093 (UTC) FILETIME=[F467CA50:01C935E7]
X-Virus-Checked: Checked by ClamAV on apache.org


 There have been some earlier messages, where memory consumption issue
for Lucene Documents due to 64 bit (double that of 32 bit). We expect
the index to grow very large, and we may end up maintaining more than
one with different analyzers for the same data set. Hence we are
concerned about the index size as well. If there are ways to overcome
it, we're game for 64 bit version as well :-)

Any ideas,


Thanks and regards,
Sithu Sudarsan
Graduate Research Assistant, UALR
& Visiting Researcher, CDRH/OSEL

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]=20
Sent: Friday, October 24, 2008 10:43 AM
To: java-user@lucene.apache.org
Subject: RE: Multi -threaded indexing of large number of PDF documents

On Fri, 2008-10-24 at 16:01 +0200, Sudarsan, Sithu D. wrote:
> 4. We've tried using larger JVM space by defining -Xms1800m and
> -Xmx1800m, but it runs out of memory. Only -Xms1080m and -Xmx1080m
seems
> stable. That is strange as we have 32 GB of RAM and 34GB swap space.
> Typically no other application is running. However, the CentOS version
> is 32 bit. The Ungava project seems to be using 64 bit.

The <2GB limit for Java is a known problem under Windows. I don't know
about CentOS, but from your description it seems that the problem exists
on that platform too. Anyway, you'll never get above 4GB for Java when
you're running 32bit. Might I ask why you're not using 64bit for a 32GB
machine?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 15:03:41 2008
Return-Path: <java-user-return-36797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 707 invoked from network); 24 Oct 2008 15:03:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 15:03:40 -0000
Received: (qmail 41426 invoked by uid 500); 24 Oct 2008 15:03:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41095 invoked by uid 500); 24 Oct 2008 15:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 41612 invoked by uid 99); 22 Oct 2008 12:03:18 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=5n3EWrYtsXZEc3qo/lrZILPe9A+DFGZwq/H2yUFs6ZiYQIzIi4pHmTNIShY7IYeTupVmnhDnyKe5YbelOHOpUWS9ENuXLBtpmm09sIjf41ijCW45tPdprzhEDkWuDV5wVWOdC/ZfR+U4Jx9JMsRWltWnAfYnN2rgir2HejIb4DM=;
X-YMail-OSG: iXYkFusVM1ms2iMklixkCXUze3nWjQ085BZFhyyIF.tmZYuRwioKRpkn0yPkCJa0XprEc04gxv7slFqPcGbI87gmzNDe0Uw_QgLiBrVyrUNCwgMvB5nuYhY6MHxLDY7YYngjbuWroPIFx0a7hIPyWObrUbDq
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.218.2
Date: Wed, 22 Oct 2008 12:02:41 +0000 (GMT)
From: pfaun <pfaun@yahoo.de>
Subject: performance boost through multithreaded query processing?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2140132003-1224676961=:67110"
Message-ID: <740655.67110.qm@web27605.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2140132003-1224676961=:67110
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hello,=0A=0ACurrently we are facing the problem that some searches espacial=
ly fuzzy (term~0.6) wildcard searches (*term*) needs some time depending on=
 the field-searchword combination (the more terms there are the more proces=
sing has to be done).=0AWe improved the performance through caching the bit=
sets of the single fuzzy query/wildcard query.=0A=0AWithin our logs we can =
see that combined queries within a BooleanQuery are processed sequentially.=
 So our question are: Does it make sense for you to parallelize the process=
ing of the queries within a boolean query (with a restriction of the amount=
 of prallel processed queries)? With the caches in mind it might be faster =
and the system is running on a multicore machine. Has anyone experience in =
prallelizing single query processing within a BooleanQuery?=0ACould there b=
e drawbacks combining the results of the booelan clauses. At the end there =
should only be the bitsets connected to the terms, shouldn't it? =0A=0AThan=
ks in advance=0A=0Astephan=0A=0A=0A=0A      
--0-2140132003-1224676961=:67110--

From java-user-return-36798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 15:04:36 2008
Return-Path: <java-user-return-36798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 968 invoked from network); 24 Oct 2008 15:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 15:04:36 -0000
Received: (qmail 47612 invoked by uid 500); 24 Oct 2008 15:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47591 invoked by uid 500); 24 Oct 2008 15:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 44261 invoked by uid 99); 23 Oct 2008 13:08:41 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=NGOui31HXutkSapxb1zk0HJfTa/VTBheSLA2I8KNwzX9Ci2tj/9fdG++4Z4n0P2067P5UZkHF/wb8Oppr3wYIyDHb682CE3SU6xEuz9r5lpmKI/bk8u2pcuW83p5LKVbT2aEHg0WO3IBn9qEwd3ktY/l2vgRBLK1AUALjuesTVE=;
X-YMail-OSG: O91PzccVM1moj0p4GjwvTPz_1CYm4F.ZymcwAnc2Md3_lMSITG0BJyiKIpMUAu0lLg9ahRos0HjjocRFkXPrpddtthy2hk8CiyQ0bsbO04jwFnh6MO3fWjGgLPVpDn991wTMIn2HAcfbemFr5OSd_yO5N3vi
X-Mailer: YahooMailRC/1096.40 YahooMailWebService/0.7.247.3
Date: Thu, 23 Oct 2008 13:07:03 +0000 (GMT)
From: pfaun <stephan.huth@yahoo.de>
Subject: WG: performance boost through multithreaded query processing?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-279114825-1224767223=:95151"
Message-ID: <724174.95151.qm@web27608.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-279114825-1224767223=:95151
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hello,=0A=0ACurrently we are facing the problem that some searches espacial=
ly fuzzy (term~0.6) wildcard searches (*term*) needs some time depending on=
 the field-searchword combination (the more terms there are the more proces=
sing has to be done).=0AWe improved the performance through caching the bit=
sets of the single fuzzy query/wildcard query.=0A=0AWithin our logs we can =
see that combined queries within a BooleanQuery are processed sequentially.=
 So our question are: Does it make sense for you to parallelize the process=
ing of the queries within a boolean query (with a restriction of the amount=
 of prallel processed queries)? With the caches in mind it might be faster =
and the system is running on a multicore machine. Has anyone experience in =
prallelizing single query processing within a BooleanQuery?=0ACould there b=
e drawbacks combining the results of the booelan clauses (e.g some IO). At =
the end there should only be the bitsets connected to the terms and this sh=
ould be in memory already, shouldn't it?=0A=0AThanks in advance=0A=0Astepha=
n=0A=0A=0A=0A      
--0-279114825-1224767223=:95151--

From java-user-return-36799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 15:05:00 2008
Return-Path: <java-user-return-36799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1054 invoked from network); 24 Oct 2008 15:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 15:05:00 -0000
Received: (qmail 49454 invoked by uid 500); 24 Oct 2008 15:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49432 invoked by uid 500); 24 Oct 2008 15:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 33540 invoked by uid 99); 22 Oct 2008 13:14:38 -0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Message-ID: <48FF2736.6090302@drni.de>
Date: Wed, 22 Oct 2008 15:14:30 +0200
From: Niels Ott <niels@drni.de>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Combining keyword queries with database-style queries
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiVirus: checked by AntiVir MailGate (version: 2.1.2-11; AVE: 7.9.0.5; VDF: 7.0.7.74; host: mx06)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everybody,

I need to query for documents not only for search terms but also for 
numeric values (or other general types). Let me try to explain with a 
hypothetical example.

Assuming there is a value for the number words in each document (or the 
number of person names, or whatever), I would want to formulate a query 
like "Give me documents containing 'jack johnson' AND with token_count > 
250".

I've been working with Lucene before and the keyword part is easy, but 
what would be a good solution to query for numbers etc.?

One first idea I had was storing the numbers (which are basically a 
HashMap<String,Double>) in the index in some way or the other. But it is 
not at all obvious for me how to query them then.

Another thing I could think of would be using a separate database of any 
type, but then how to bring those two together in a way that makes sense?

Any pointers to useful resources and any types of hints are welcome! :-)

Best,

   Niels


-- 
Niels Ott
Computational Linguist (B.A.)
http://www.drni.de/niels/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 15:31:47 2008
Return-Path: <java-user-return-36800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9773 invoked from network); 24 Oct 2008 15:31:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 15:31:47 -0000
Received: (qmail 81698 invoked by uid 500); 24 Oct 2008 15:31:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81661 invoked by uid 500); 24 Oct 2008 15:31:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81650 invoked by uid 99); 24 Oct 2008 15:31:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 08:31:42 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 15:30:30 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id m9OFV52A028126
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 11:31:08 -0400
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Fri, 24 Oct 2008 11:31:05 -0400
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Fri, 24 Oct 2008 11:31:05 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: example on RegexQuery 
Date: Fri, 24 Oct 2008 11:31:03 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF4046@SUEXCL-02.ad.syr.edu>
In-Reply-To: <ABF971E134098D40A9F82A75E3D2B46B023D4C35@TKWEXMB22.msad.ms.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: example on RegexQuery 
Thread-Index: Ack0wj+rG7bHRiiHRIObDx8E2aSbEAAseMAAAA2vZNAAEEVmkA==
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Oct 2008 15:31:05.0542 (UTC) FILETIME=[879BB660:01C935ED]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2008-10-24_07:2008-10-10,2008-10-24,2008-10-24 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Aashish,

On 10/24/2008 at 3:35 AM, Agrawal, Aashish (IT) wrote:
> I want to use lucene for a simple search engine  with regex support .
> I tried using RegexQuery.. but seems I am missing something.
> Is there any working exmaple on using RegexQuery ??

How about TestRegexQuery?:

<http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_4_0/contrib/regex=
/src/test/org/apache/lucene/search/regex/TestRegexQuery.java?view=3Dmarku=
p>

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 15:37:26 2008
Return-Path: <java-user-return-36801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12436 invoked from network); 24 Oct 2008 15:37:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 15:37:25 -0000
Received: (qmail 93458 invoked by uid 500); 24 Oct 2008 15:37:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93426 invoked by uid 500); 24 Oct 2008 15:37:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93415 invoked by uid 99); 24 Oct 2008 15:37:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 08:37:21 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 15:36:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KtOiW-0001Wr-AY
	for java-user@lucene.apache.org; Fri, 24 Oct 2008 08:36:48 -0700
Message-ID: <20152411.post@talk.nabble.com>
Date: Fri, 24 Oct 2008 08:36:48 -0700 (PDT)
From: agatone <zoran.zoki@gmail.com>
To: java-user@lucene.apache.org
Subject: Multiple values in field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: zoran.zoki@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I know I can store multiple values under same field and I can later retrieve
all those values. But the problem I have is a bit structure related. When
I'm reading those fields (that usually have more than one value) it happens
that it has only one value and I cannot know if that field is meant to have
multiple values.

Is there a way (at indexing (creating fields)) to set that certain field is
meant for multiple values, so that later when I'm searching and I get
document/s hit, I can get from each field in it how to represent the hit.

Thank you.

-- 
View this message in context: http://www.nabble.com/Multiple-values-in-field-tp20152411p20152411.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 16:00:39 2008
Return-Path: <java-user-return-36802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21517 invoked from network); 24 Oct 2008 16:00:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 16:00:39 -0000
Received: (qmail 27022 invoked by uid 500); 24 Oct 2008 16:00:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26694 invoked by uid 500); 24 Oct 2008 16:00:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26683 invoked by uid 99); 24 Oct 2008 16:00:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 09:00:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 15:59:22 +0000
Received: by rv-out-0506.google.com with SMTP id f6so915138rvb.5
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 08:59:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Oi7UHzhwXKYn0C5Z2RPBv9AeNywFqv9ON3xXQigx/sc=;
        b=r7e8jsjhEqeOLOk+SCT5GIFFN2kmdGOU5T6Q2r1vx1jh/mrsxJbQpBTmryEYjG7tRR
         +2kDuQNdrEY5IX7wVwQkxjjOdQx8l5AHmkpuWQEJcBio+xRPqaDAelgMMkHZjAF8bodM
         7GjKy5Tf1bw0S60wf23STNnIDumWeT/5iIdd4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=G/zM5xtyMNeJNvPM+Khs1sJufvsQpeKdenoOg6nP877mDoFtscMN6a9GUOO8RsCMx/
         oKmz7d7h75Xlz1B2P/0sHD5AsrZNz+yIRwWdZAVcDkW9rd1hiamkq5RGIWYVtsz6wllF
         p11qdLy+Cr4hbfLh52TKg3rO31rVPSb/L7ivk=
Received: by 10.141.69.1 with SMTP id w1mr1281823rvk.185.1224863991892;
        Fri, 24 Oct 2008 08:59:51 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Fri, 24 Oct 2008 08:59:51 -0700 (PDT)
Message-ID: <359a92830810240859k623290a2u3d7e670f38c19d4f@mail.gmail.com>
Date: Fri, 24 Oct 2008 11:59:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Combining keyword queries with database-style queries
In-Reply-To: <48FF2736.6090302@drni.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47811_6203485.1224863991865"
References: <48FF2736.6090302@drni.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47811_6203485.1224863991865
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is this an inadvertent re-post or is there still something you're wondering
about?

Erick

On Wed, Oct 22, 2008 at 9:14 AM, Niels Ott <niels@drni.de> wrote:

> Hi everybody,
>
> I need to query for documents not only for search terms but also for
> numeric values (or other general types). Let me try to explain with a
> hypothetical example.
>
> Assuming there is a value for the number words in each document (or the
> number of person names, or whatever), I would want to formulate a query like
> "Give me documents containing 'jack johnson' AND with token_count > 250".
>
> I've been working with Lucene before and the keyword part is easy, but what
> would be a good solution to query for numbers etc.?
>
> One first idea I had was storing the numbers (which are basically a
> HashMap<String,Double>) in the index in some way or the other. But it is not
> at all obvious for me how to query them then.
>
> Another thing I could think of would be using a separate database of any
> type, but then how to bring those two together in a way that makes sense?
>
> Any pointers to useful resources and any types of hints are welcome! :-)
>
> Best,
>
>  Niels
>
>
> --
> Niels Ott
> Computational Linguist (B.A.)
> http://www.drni.de/niels/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_47811_6203485.1224863991865--

From java-user-return-36803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 16:01:57 2008
Return-Path: <java-user-return-36803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21951 invoked from network); 24 Oct 2008 16:01:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 16:01:57 -0000
Received: (qmail 29231 invoked by uid 500); 24 Oct 2008 16:01:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29199 invoked by uid 500); 24 Oct 2008 16:01:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29188 invoked by uid 99); 24 Oct 2008 16:01:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 09:01:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 16:00:42 +0000
Received: from SBMAILBOX1.sb.statsbiblioteket.dk ([130.225.24.61]) by
 sbexch03.sb.statsbiblioteket.dk ([130.225.24.68]) with mapi; Fri, 24 Oct 2008
 18:00:59 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 24 Oct 2008 18:00:58 +0200
Subject: RE: Multi -threaded indexing of large number of PDF documents
Thread-Topic: Multi -threaded indexing of large number of PDF documents
Thread-Index: Ack15uRvG0lpXHM+RNeHeHx/J+upiwAALBggAAI64a8=
Message-ID: <2E6A89A648463A4EBF093A9062C166836DA8235866@SBMAILBOX1.sb.statsbiblioteket.dk>
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov>
 <4900A823.50804@gmail.com>
 <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com>
 <4900CC48.8070008@gmail.com>
 <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com>
 <5e76f3840810231257u57ef4017qcbf916928ffc123a@mail.gmail.com>
 <16F4CE0A-68D2-4CA8-8ADC-6D3AE42DC0C1@mikemccandless.com>
 <F8A04958BB57B64096F9BE6B9572564304C73AFF@FMD3VS012.fda.gov>
 <1224859369.6523.49.camel@pc286>,<F8A04958BB57B64096F9BE6B9572564304C73B00@FMD3VS012.fda.gov>
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73B00@FMD3VS012.fda.gov>
Accept-Language: en-US, da-DK
Content-Language: en-GB
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, da-DK
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Sudarsan, Sithu D. [Sithu.Sudarsan@fda.hhs.gov] wrote:
> There have been some earlier messages, where memory consumption issue
> for Lucene Documents due to 64 bit (double that of 32 bit).

All pointers are doubled, yes. While not a doubling in total RAM consumptio=
n,
it does give a substantial overhead.

> We expect the index to grow very large, and we may end up maintaining
> more than one with different analyzers for the same data set. Hence we ar=
e
> concerned about the index size as well. If there are ways to overcome
> it, we're game for 64 bit version as well :-)

Fair enough.  We've chosen to use use 64bit on our 16 and 32GB machines
and have never looked back, but our initial requirements called for ~7GB
for each JVM, so we didn't have a choice at the time.

> Any ideas,

Solaris should be capable of giving you ~3.5GB for JVMs with 32bit.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 16:05:34 2008
Return-Path: <java-user-return-36804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23154 invoked from network); 24 Oct 2008 16:05:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 16:05:34 -0000
Received: (qmail 32709 invoked by uid 500); 24 Oct 2008 16:05:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32674 invoked by uid 500); 24 Oct 2008 16:05:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32663 invoked by uid 99); 24 Oct 2008 16:05:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 09:05:29 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 16:04:17 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1006580wfc.20
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 09:04:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PUOnMNAFFVcNwqbAn1JJejzLAx4Hr5QGerTyDbUM0Dw=;
        b=uC/j/7kyZDV9DG4TSD0J2SVsMqy7kPQJPNgJZ0bdNwDF5XPmQLwBms4aFQ10xdb1Ph
         FVaFntR/jG8FZyA82Wn/ubJPPhUFpbIlyMpnfXH1bUJ1S/McWZHPNJUP9VkFRVWmzu3P
         FRLYFaQbqZjwEcV3L/8p1Sm8pSOOhCsvfZdZQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dmi1Rot9HN203Kk6jg+2Ll/Bgc2i9Pf7coL8AxcE7NrSpGW3sIQM75Tf67ZcMv/akh
         DHyqHU00vvrPztVyNQut7JWMhJ9smK59B2UGOccNwIQHX0ssDm2j0e7QungMlaQtf807
         nCFeidIdjODuzNUD+eSzxAkfgeuI/kMI0UAfI=
Received: by 10.141.204.16 with SMTP id g16mr1274791rvq.275.1224864287110;
        Fri, 24 Oct 2008 09:04:47 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Fri, 24 Oct 2008 09:04:47 -0700 (PDT)
Message-ID: <359a92830810240904q2864737av2239ef007452ccc2@mail.gmail.com>
Date: Fri, 24 Oct 2008 12:04:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple values in field
In-Reply-To: <20152411.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47841_23990740.1224864287102"
References: <20152411.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47841_23990740.1224864287102
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I *think* what you're looking for is Document.getFields(String field),
which returns a list corresponding to every Document.add() you did
originally.

Alternatively, you could always index a companion field that had the
count of times you called Document.add() on a particular field.....

Best
Erick

On Fri, Oct 24, 2008 at 11:36 AM, agatone <zoran.zoki@gmail.com> wrote:

>
> Hello,
>
> I know I can store multiple values under same field and I can later
> retrieve
> all those values. But the problem I have is a bit structure related. When
> I'm reading those fields (that usually have more than one value) it happens
> that it has only one value and I cannot know if that field is meant to have
> multiple values.
>
> Is there a way (at indexing (creating fields)) to set that certain field is
> meant for multiple values, so that later when I'm searching and I get
> document/s hit, I can get from each field in it how to represent the hit.
>
> Thank you.
>
> --
> View this message in context:
> http://www.nabble.com/Multiple-values-in-field-tp20152411p20152411.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_47841_23990740.1224864287102--

From java-user-return-36805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 16:09:10 2008
Return-Path: <java-user-return-36805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24615 invoked from network); 24 Oct 2008 16:09:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 16:09:10 -0000
Received: (qmail 37058 invoked by uid 500); 24 Oct 2008 16:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37023 invoked by uid 500); 24 Oct 2008 16:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37012 invoked by uid 99); 24 Oct 2008 16:09:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 09:09:04 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 16:07:52 +0000
Received: by wr-out-0506.google.com with SMTP id c30so191161wra.21
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 09:08:29 -0700 (PDT)
Received: by 10.100.126.7 with SMTP id y7mr2882394anc.116.1224864509449;
        Fri, 24 Oct 2008 09:08:29 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id d34sm980832and.3.2008.10.24.09.08.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 24 Oct 2008 09:08:28 -0700 (PDT)
Message-Id: <F01553A0-21C6-4DDC-AC10-E86609C918A1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73AFF@FMD3VS012.fda.gov>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Multi -threaded indexing of large number of PDF documents
Date: Fri, 24 Oct 2008 12:08:26 -0400
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov> <4900A823.50804@gmail.com> <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com> <4900CC48.8070008@gmail.com> <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com> <5e76f3840810231257u57ef4017qcbf916928ffc123a@mail.gmail.com> <16F4CE0A-68D2-4CA8-8ADC-6D3AE42DC0C1@mikemccandless.com> <F8A04958BB57B64096F9BE6B9572564304C73AFF@FMD3VS012.fda.gov>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Sudarsan, Sithu D. wrote:

>
> Hi Glen, Mike, Grant & Mark
>
> Thank you for the quick responses.
>
> 1. Yes, I'm looking now at ThreadPoolExecutor. Looking for a sample  
> code
> to improve the multi-threaded code.
>
> 2. We'll try using as many Indexwriters as the number of cores, first
> (which is 2cpu x 4 core = 8).

You could also try multiple threads against a single IndexWriter.   
It's simpler, and you don't have to merge indices in the end.  It'd be  
great if you could post back on net throughput because I'd really like  
to understand if there is some sort of thread issue sharing a single  
IndexWriter.

> 3. Yes, PDFBox exceptions have been independently checked. We've a
> prototype module to check PDF files that contain errors. Generally  
> they
> are few, less than 1% of the total number of files. The PDFs all have
> been OCRed. Also, if any throws exceptions then they are quarantined  
> in
> a separate folder for further analysis to have a look at the document
> itself.
>
> 4. We've tried using larger JVM space by defining -Xms1800m and
> -Xmx1800m, but it runs out of memory. Only -Xms1080m and -Xmx1080m  
> seems
> stable. That is strange as we have 32 GB of RAM and 34GB swap space.
> Typically no other application is running. However, the CentOS version
> is 32 bit. The Ungava project seems to be using 64 bit.
>
> 5. -QUIT option for Linux does throw stack trace, but after few  
> threads
> it hangs. Don't know why. Need to look at that.

Can you post the stack traces that you did see?  (Do you think those  
threads are hung?)

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 16:50:34 2008
Return-Path: <java-user-return-36806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42059 invoked from network); 24 Oct 2008 16:50:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 16:50:34 -0000
Received: (qmail 79790 invoked by uid 500); 24 Oct 2008 16:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79766 invoked by uid 500); 24 Oct 2008 16:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79755 invoked by uid 99); 24 Oct 2008 16:50:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 09:50:30 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 16:49:17 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1026363wfc.20
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 09:49:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=kSNGbuG88N3cj9Ok6eCVNjNy/xwjfjUnuWXI+8xECkY=;
        b=Fagua4LsREmdmdO3F7W/dln1lSSCHmD7kcUcCCnDHfXfnScVa8DsMH7NmGSiP/Wx05
         3X+8CN0nrrVToHTqst7Jp2Us3UN/yMawOg80tAaC9x+3RDKOOV81Gp9t6DpvAr0cqKR3
         EtRgjZnAyD5XDRo1E5ldaeNiO7Ej36d1wnB/Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=gG5baa+Br1IyESy9ipNddX1wmhTZR7GU/6MjZuRUa+VVha0uMSTfvs/FoPjY29i+0g
         HrCWog0Iwil3P1iK4gzp9tff4ZrThxXF7UPTFbnW45CbINE0yWzvHb9Cej0xuFWUiVc7
         0s6h1eGfM3Vh5X2g+XuEZDRewxdOvAuxTuPKI=
Received: by 10.141.123.4 with SMTP id a4mr1314740rvn.172.1224866986902;
        Fri, 24 Oct 2008 09:49:46 -0700 (PDT)
Received: by 10.141.115.15 with HTTP; Fri, 24 Oct 2008 09:49:46 -0700 (PDT)
Message-ID: <126142c0810240949g1860b849x9fb43125ae794c9b@mail.gmail.com>
Date: Fri, 24 Oct 2008 14:49:46 -0200
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Any Spanish analyzer available?
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6A95@rw-ex2003.BROADVISION.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6A95@rw-ex2003.BROADVISION.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

Zhang:
  I have done a simple SpanishAnalyzer for Lucene Domain Index test
suites which index Spanish WikiPedia dumps.
 This simple analyzer have a list of stops words and is faster than
SnowballAnalyzer which also performs stemming.
  You can get the code using CVS from SourceForget.net servers or
simple cut a paste this code:
http://dbprism.cvs.sourceforge.net/viewvc/dbprism/ojvm/src/test/org/apache/lucene/analysis/SpanishAnalyzer.java?revision=1.2&view=markup
  Also there is a WikiPediaAnalyzer which uses previous analyzer:
http://dbprism.cvs.sourceforge.net/viewvc/dbprism/ojvm/src/test/org/apache/lucene/analysis/SpanishWikipediaAnalyzer.java?revision=1.3&view=markup
  Best regards, Marcelo.

On Thu, Oct 23, 2008 at 8:13 PM, Zhang, Lisheng
<Lisheng.Zhang@broadvision.com> wrote:
> Hi,
>
> Is there any Spanish analyzer available for lucene applications?
> I did not see any in lucene 2.4.0 contribute folders.
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 19:39:26 2008
Return-Path: <java-user-return-36807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17445 invoked from network); 24 Oct 2008 19:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 19:39:26 -0000
Received: (qmail 96387 invoked by uid 500); 24 Oct 2008 19:39:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96352 invoked by uid 500); 24 Oct 2008 19:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96341 invoked by uid 99); 24 Oct 2008 19:39:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 12:39:22 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 19:38:10 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KtSUi-0002wS-Vb
	for java-user@lucene.apache.org; Fri, 24 Oct 2008 12:38:48 -0700
Message-ID: <20156607.post@talk.nabble.com>
Date: Fri, 24 Oct 2008 12:38:48 -0700 (PDT)
From: agatone <zoran.zoki@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple values in field
In-Reply-To: <359a92830810240904q2864737av2239ef007452ccc2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: zoran.zoki@gmail.com
References: <20152411.post@talk.nabble.com> <359a92830810240904q2864737av2239ef007452ccc2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


That sounds like abuse of Document.add()  :)
Ok, so adding first one extra "empty" value for every field i wish to mark
as multi.
Well if that ain't so wrong, I'll use that :)

Ty




Erick Erickson wrote:
> 
> I *think* what you're looking for is Document.getFields(String field),
> which returns a list corresponding to every Document.add() you did
> originally.
> 
> Alternatively, you could always index a companion field that had the
> count of times you called Document.add() on a particular field.....
> 
> Best
> Erick
> 
> On Fri, Oct 24, 2008 at 11:36 AM, agatone <zoran.zoki@gmail.com> wrote:
> 
>>
>> Hello,
>>
>> I know I can store multiple values under same field and I can later
>> retrieve
>> all those values. But the problem I have is a bit structure related. When
>> I'm reading those fields (that usually have more than one value) it
>> happens
>> that it has only one value and I cannot know if that field is meant to
>> have
>> multiple values.
>>
>> Is there a way (at indexing (creating fields)) to set that certain field
>> is
>> meant for multiple values, so that later when I'm searching and I get
>> document/s hit, I can get from each field in it how to represent the hit.
>>
>> Thank you.
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Multiple-values-in-field-tp20152411p20152411.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Multiple-values-in-field-tp20152411p20156607.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 19:51:46 2008
Return-Path: <java-user-return-36808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20655 invoked from network); 24 Oct 2008 19:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 19:51:45 -0000
Received: (qmail 9230 invoked by uid 500); 24 Oct 2008 19:51:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9199 invoked by uid 500); 24 Oct 2008 19:51:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9183 invoked by uid 99); 24 Oct 2008 19:51:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 12:51:35 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 19:50:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KtSgX-0003NG-7y
	for java-user@lucene.apache.org; Fri, 24 Oct 2008 12:51:01 -0700
Message-ID: <20156805.post@talk.nabble.com>
Date: Fri, 24 Oct 2008 12:51:01 -0700 (PDT)
From: JulieSoko <julie.sokolowski@saic.com>
To: java-user@lucene.apache.org
Subject: Lucene Input/Output error
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: julie.sokolowski@saic.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello All,
  First of all I=E2=80=99m new to Lucene, and have written code using it to=
 search
over 1 to man indexes, using a user defined query.=20
 I don't have any code on this system so have to type everything in here...=
=20
I have the following design but am getting
 An Input / Output error exception which I have typed in a part of it below=
.=20
My question is this?  Do I have  glaring flaw
In this design?  I am reusing the IndexSearchers/IndexReaders and not
closing them.   The input/output error arises when 2 or
More searches occur at the same time over some of the same indexes.  Can yo=
u
give me some direction where I should look=20
For the solution to the exception?

Here is an explanation of my =20
    Data:
        Up to 60 different indexes used at a time =20
         1 directory per 1 day of data
        Millions of documents per day
        Data  is received and indexes  merged on a continual bases - whole
separate process

    Index contains
            value: content    eventType: type of data   eventTime: time dat=
a
collected

    1 to many users can create individual queries containing 1 or more of
the fields and values
    searching over 1 to many indexes=20

    Design:
         Utilize the IndexAccessor classes  to cache
IndexSearcher/IndexReaders i.e. they are made one per index  and never
closed.
      =20

         Use a ParallelMultiSearcher  - create one per request using 1 to
many of the indexes

         try {
         QueryParser parser =3D new QueryParser("value", new
StandardAnalyzer(0);
         parser.setDefaultOperator(QueryParser.AND_OPERATOR);
         Query query =3D parser.parse(queryString);

        TopDocCollector col =3D new TopDocCollector(MAX_NUMBER_HITS);
        multiSearcher.search(query, new
RangeFilter("eventTime",startTime,endTime,true,true),col);
        int numHits =3D col.getTotalHits(0);
        TopDocs docs =3D col.topDocs();
   =20
        if (numHits > 0))
          for (int i=3D0; i< numHits && i< MAX_NUMBER_HITS; i++)[
            Document doc =3D multiSearcher.doc(docs.scoreDocs[i].doc);
              ....
          }
     =20
     }catch(Exception e  ){
         e.printStackTrace();
  } finally{
      //IndexSearchers are not closed since shared by many users
}
          =20


        =20
When the second user accesses directories used by the first query then I ge=
t
the following error:

java.io.IOException: Input/output error
 java.io.RandomAccessFile.readBytes(Native Method)
 java.io.RandomAccessFile.read(RandomAccessFile.java:315)
 at
org.apache.lucene.store.FSDirecotry$FSIndexInput.readInternal(FSDirectory.j=
ava:550)
 at
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.jav=
a:131)
 at
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Compou=
ndFileReader.java:240)
at
org.apache.lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
152)
at
org.apache.lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.jav=
a:
152)
at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:123)
at org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:154)
at
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:223)
at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:217)
at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:678)
at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:87)
at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
at
org.apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:311)
at org.apache.lucene.search.Searcher.search(Searcher.java:178)

Thanks!

--=20
View this message in context: http://www.nabble.com/Lucene-Input-Output-err=
or-tp20156805p20156805.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 24 20:04:09 2008
Return-Path: <java-user-return-36809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25156 invoked from network); 24 Oct 2008 20:04:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Oct 2008 20:04:09 -0000
Received: (qmail 24382 invoked by uid 500); 24 Oct 2008 20:04:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24345 invoked by uid 500); 24 Oct 2008 20:04:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24334 invoked by uid 99); 24 Oct 2008 20:04:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 13:04:05 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 20:02:53 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1007860rvb.5
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 13:03:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=nwVHYHw1MBeHhQLgS1fFkVjq5Sq29XzAM11DjcIPKBU=;
        b=LMEkJ/236A7BnY1wbO7cOvsvyYJA/MTLKc39WDc1mgwN9NMYPxtcWtOh5/Fzj6iyro
         zklTnwR1dc8ufJs88ntUoMgn+rkayv3DvfQcVG7ZaTCVmDJdQ9KnXSdRjkjMPsAJ64BN
         T1u9sJnDabIizHTxdv5Ku9kVpfHoKjb3n3u8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uHO4fxJwNewkb9NI8rakrvBU2MDaws8eR1VfAOSM5a0xZ11ROQEp3iSgZ2wfTnlxuJ
         t/SykW7SL+tfMs1KEA5gW+63SBb9lEiMt4c4+G7wY3ZEhz9MRhtxs1iUnUKrZiuo+aW5
         4qaX1bqlkDNe0PYfmuFwMWMkYXG4shrhDCCxw=
Received: by 10.140.172.19 with SMTP id u19mr1438365rve.133.1224878602494;
        Fri, 24 Oct 2008 13:03:22 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Fri, 24 Oct 2008 13:03:22 -0700 (PDT)
Message-ID: <359a92830810241303h3327f309wcf7b5f7bbaceeb4a@mail.gmail.com>
Date: Fri, 24 Oct 2008 16:03:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple values in field
In-Reply-To: <20156607.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53710_20155712.1224878602481"
References: <20152411.post@talk.nabble.com>
	 <359a92830810240904q2864737av2239ef007452ccc2@mail.gmail.com>
	 <20156607.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53710_20155712.1224878602481
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No, no, no...

Say you have the following
Document doc = new Document()
doc.add("field1", "stuff", blah, blah)
doc.add("field1", "more stuff", blah, blah)
doc.add("field1", "stuff and nonsense", blah, blah)
IndexWriter.addDocument(doc)




Now, in your search code that document comes up as a hit and you have
Field[] adds = doc.getFields("field1");


adds.size() should == 3

whenever adds.size() > 1, you can know it has multiple entries....

I wasn't suggesting that you ever add empty fields, and I don't think an
empty
add would even compile.

Best
Erick@LetMeConfuseYouSomeMore.com


On Fri, Oct 24, 2008 at 3:38 PM, agatone <zoran.zoki@gmail.com> wrote:

>
> That sounds like abuse of Document.add()  :)
> Ok, so adding first one extra "empty" value for every field i wish to mark
> as multi.
> Well if that ain't so wrong, I'll use that :)
>
> Ty
>
>
>
>
> Erick Erickson wrote:
> >
> > I *think* what you're looking for is Document.getFields(String field),
> > which returns a list corresponding to every Document.add() you did
> > originally.
> >
> > Alternatively, you could always index a companion field that had the
> > count of times you called Document.add() on a particular field.....
> >
> > Best
> > Erick
> >
> > On Fri, Oct 24, 2008 at 11:36 AM, agatone <zoran.zoki@gmail.com> wrote:
> >
> >>
> >> Hello,
> >>
> >> I know I can store multiple values under same field and I can later
> >> retrieve
> >> all those values. But the problem I have is a bit structure related.
> When
> >> I'm reading those fields (that usually have more than one value) it
> >> happens
> >> that it has only one value and I cannot know if that field is meant to
> >> have
> >> multiple values.
> >>
> >> Is there a way (at indexing (creating fields)) to set that certain field
> >> is
> >> meant for multiple values, so that later when I'm searching and I get
> >> document/s hit, I can get from each field in it how to represent the
> hit.
> >>
> >> Thank you.
> >>
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Multiple-values-in-field-tp20152411p20152411.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Multiple-values-in-field-tp20152411p20156607.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_53710_20155712.1224878602481--

From java-user-return-36810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 25 06:54:11 2008
Return-Path: <java-user-return-36810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83275 invoked from network); 25 Oct 2008 06:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Oct 2008 06:54:11 -0000
Received: (qmail 63060 invoked by uid 500); 25 Oct 2008 06:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63031 invoked by uid 500); 25 Oct 2008 06:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63020 invoked by uid 99); 25 Oct 2008 06:54:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Oct 2008 23:54:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fatihemekci@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 06:52:54 +0000
Received: by wa-out-1112.google.com with SMTP id n4so676711wag.5
        for <java-user@lucene.apache.org>; Fri, 24 Oct 2008 23:53:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=9Af81E8OCUVRPdG8OQD5fYYICR4ZOHJ4Pkns5Zm6xgA=;
        b=akElEGImk9w4Pqk6V9JW8OHTdDGmXOTqB1/YkPVLmFZklMChu11SLa9W467BnE3Sx/
         NZeTg2fxDXnKkqTNjxelVj4Pc5uHO1ytR3COYhuc1lbbmhE2eyUuAclx9g/hnxLR3FRz
         +WDWGJ9+8nBn9l0AKQKrn825Q4iJjjRCN7mHM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=VvQbeu8vTjHSdY1DjqkSu2cUOSW3GdQn42jXhL8B4fQLZpWj2COqbkhmGkKCeSlcPr
         eto2cJwxs7UynIAy+uGrVi8/ezDEvCZYUAAW0hHjUOhBAexhD1kMFxnJkBCCH1WDBbEx
         j40gBMMgBCP67+7YheOnUcfj96MomepOIu4Ks=
Received: by 10.115.18.3 with SMTP id v3mr2838699wai.180.1224917603926;
        Fri, 24 Oct 2008 23:53:23 -0700 (PDT)
Received: by 10.114.52.6 with HTTP; Fri, 24 Oct 2008 23:53:23 -0700 (PDT)
Message-ID: <3244431d0810242353p4e693f29vd6852b279c8f2bb3@mail.gmail.com>
Date: Fri, 24 Oct 2008 23:53:23 -0700
From: "Fatih Emekci" <fatihemekci@gmail.com>
To: java-user@lucene.apache.org
Subject: Possible payload bug in lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5108_23673721.1224917603909"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5108_23673721.1224917603909
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
I am getting the below exception when try to read the payload data:
   [java] java.lang.NullPointerException
     [java]     at
org.apache.lucene.index.MultiSegmentReader$MultiTermPositions.nextPosition(MultiSegmentReader.java:631)

However, if I optimize the index before reading the payload, it just works
fine.
This seems like a bug. Pasting the code below. please let me know if I am
doing something wrong.

thanks


import java.util.ArrayList;
import java.util.List;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermPositions;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.store.FSDirectory;

import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.index.Payload;
import java.io.IOException;

public class Experiment
{

  /**
   * TOkenStream for the anet ids' payload
   */
  private static class IDArrayPayloadStream extends TokenStream
  {
    private final Token _token;
    private boolean _returnToken = false;

    public IDArrayPayloadStream(Term term)
    {
      _token = new Token(term.text(), 0, 0);
    }


    /**
     * Output the ids into the payload
     * @param ids the list of ids.
     */
    void setIDs(List<Integer> ids)
    {
      byte[] buffer = new byte[ (ids.size()) * 4];
      for (int i = 0; i < ids.size(); i++)
      {
        buffer = intToByteArray(ids.get(i));
      }
      _token.setPayload(new Payload(buffer));
      _returnToken = true;
    }


    /**
     * Return the single token created.
     * @return token if it's already been set, null otherwise.
     * @throws IOException
     */
    public Token next() throws IOException
    {
      if (_returnToken)
      {
        _returnToken = false;
        return _token;
      }
      else
      {
        return null;
      }
    }
  }

  /**
   * Helper method to add payload (list of integers) to the term in the
document.
   * @param document given document
   * @param term term to use to add payload
   * @param data payload content
   */
  private static void  addPayload(Document document, Term term,
List<Integer> data)
  {
    if (data.size() > 0)
    {
      // add a payload for the anet ids
      IDArrayPayloadStream aps = new IDArrayPayloadStream(term);
      aps.setIDs(data);
      Field f = document.getField(term.field());
      if (f == null)
      {
        f = new Field(term.field(), aps);
        document.add(f);
      }
      else
      {
        f.setValue(aps);
      }
    }
  }

  public static byte[] intToByteArray(int value) {
    byte[] b = new byte[4];
    for (int i = 0; i < 4; i++) {
      int offset = (b.length - 1 - i) * 8;
      b[i] = (byte) ((value >>> offset) & 0xFF);
    }
    return b;
  }

  public static final int byteArrayToInt(byte [] b) {
    return (b[0] << 24)
    + ((b[1] & 0xFF) << 16)
    + ((b[2] & 0xFF) << 8)
    + (b[3] & 0xFF);
  }
  /**
   * @param args
   */
  public static void main(String[] args) throws Exception
  {
    int TOTDOC = 100000;
    IndexWriter writer = new IndexWriter("/Users/femekci/lucene/deneme3",
new WhitespaceAnalyzer(),
                                         true);
    try {
      int ll =0;
      while( ll < TOTDOC){
        try {
          String state   =  (ll*ll%10)+"123";
          String email = ll*2 +"s";

          String last_tran = ll*3+"67";
          String memid = ll +"0";
          String fname = ll + " " + ll*101;
          String lname = ll + " " + ll*1001;;

          Document doc = new Document();
          doc.add(new Field("state", state, Field.Store.NO,
Field.Index.TOKENIZED));

          doc.add(new Field("email", email, Field.Store.NO,
Field.Index.TOKENIZED));
          doc.add(new Field("last_tran", last_tran, Field.Store.NO,
Field.Index.TOKENIZED));
          doc.add(new Field("memid", memid.trim(), Field.Store.NO,
Field.Index.TOKENIZED));
          doc.add(new Field("fname", fname.trim(), Field.Store.NO,
Field.Index.TOKENIZED));
          doc.add(new Field("lname", lname.trim(), Field.Store.NO,
Field.Index.TOKENIZED));


          Term t = new Term("dids", "did");
          List<Integer> l = new ArrayList<Integer>();
          l.add(new Integer(ll));
          addPayload(doc, t, l);
          System.out.println(memid);
          doc.add(new Field("row", email + " " + fname + " " + lname +" "
+memid, Field.Store.NO,   Field.Index.TOKENIZED));
          writer.addDocument(doc);
          ll++;
        } catch(Exception e) {System.out.println("except" + e.toString());

        }
      }
      //writer.optimize(); /***************Removing the comment and
optimizing fixes the problem *********/
      writer.close();
    } catch (Exception e)
    {
      //writer.optimize();
      writer.close();
      System.out.println("exception in indexing " +e.toString());
    }

    try {
      IndexReader reader=
IndexReader.open(FSDirectory.getDirectory("/Users/femekci/lucene/deneme3",
false));

      //System.out.println("docnum: " + is.maxDoc());
      Term t2 = new Term("dids", "did");
      TermPositions tp =reader.termPositions(t2);
      byte [] data = new byte[4];
      tp.nextPosition();
      for(int i = 0; i < TOTDOC; i++)
      {
        if(tp != null && tp.isPayloadAvailable())
        {
          tp.getPayload(data, 0);
        }
        tp.nextPosition();
      }
    } catch(Exception e) {
      System.out.println("exception in payload ");
      e.printStackTrace();
    }
 }

}

------=_Part_5108_23673721.1224917603909--

From java-user-return-36811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 25 08:16:36 2008
Return-Path: <java-user-return-36811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13327 invoked from network); 25 Oct 2008 08:16:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Oct 2008 08:16:36 -0000
Received: (qmail 94144 invoked by uid 500); 25 Oct 2008 08:16:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94110 invoked by uid 500); 25 Oct 2008 08:16:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94099 invoked by uid 99); 25 Oct 2008 08:16:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 01:16:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 08:15:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KteGP-00023o-AB
	for java-user@lucene.apache.org; Sat, 25 Oct 2008 01:12:49 -0700
Message-ID: <20162152.post@talk.nabble.com>
Date: Sat, 25 Oct 2008 01:12:49 -0700 (PDT)
From: agatone <zoran.zoki@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple values in field
In-Reply-To: <359a92830810241303h3327f309wcf7b5f7bbaceeb4a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: zoran.zoki@gmail.com
References: <20152411.post@talk.nabble.com> <359a92830810240904q2864737av2239ef007452ccc2@mail.gmail.com> <20156607.post@talk.nabble.com> <359a92830810241303h3327f309wcf7b5f7bbaceeb4a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yeah but if it happens that for a certain document field1 has only one value
and in that case I can't know it is intended as a multiple. in that case
adds.size() would be == 1 and it would look as normal field.

What i need is to mark that field is intended to be multiple no matter if it
contains 1 value or 10.

I need this because my serach results are passed as JSON to other consumers
and i have to tell them what's the structure.


Erick Erickson wrote:
> 
> No, no, no...
> 
> Say you have the following
> Document doc = new Document()
> doc.add("field1", "stuff", blah, blah)
> doc.add("field1", "more stuff", blah, blah)
> doc.add("field1", "stuff and nonsense", blah, blah)
> IndexWriter.addDocument(doc)
> 
> 
> 
> 
> Now, in your search code that document comes up as a hit and you have
> Field[] adds = doc.getFields("field1");
> 
> 
> adds.size() should == 3
> 
> whenever adds.size() > 1, you can know it has multiple entries....
> 
> I wasn't suggesting that you ever add empty fields, and I don't think an
> empty
> add would even compile.
> 
> Best
> Erick@LetMeConfuseYouSomeMore.com
> 
> 
> On Fri, Oct 24, 2008 at 3:38 PM, agatone <zoran.zoki@gmail.com> wrote:
> 
>>
>> That sounds like abuse of Document.add()  :)
>> Ok, so adding first one extra "empty" value for every field i wish to
>> mark
>> as multi.
>> Well if that ain't so wrong, I'll use that :)
>>
>> Ty
>>
>>
>>
>>
>> Erick Erickson wrote:
>> >
>> > I *think* what you're looking for is Document.getFields(String field),
>> > which returns a list corresponding to every Document.add() you did
>> > originally.
>> >
>> > Alternatively, you could always index a companion field that had the
>> > count of times you called Document.add() on a particular field.....
>> >
>> > Best
>> > Erick
>> >
>> > On Fri, Oct 24, 2008 at 11:36 AM, agatone <zoran.zoki@gmail.com> wrote:
>> >
>> >>
>> >> Hello,
>> >>
>> >> I know I can store multiple values under same field and I can later
>> >> retrieve
>> >> all those values. But the problem I have is a bit structure related.
>> When
>> >> I'm reading those fields (that usually have more than one value) it
>> >> happens
>> >> that it has only one value and I cannot know if that field is meant to
>> >> have
>> >> multiple values.
>> >>
>> >> Is there a way (at indexing (creating fields)) to set that certain
>> field
>> >> is
>> >> meant for multiple values, so that later when I'm searching and I get
>> >> document/s hit, I can get from each field in it how to represent the
>> hit.
>> >>
>> >> Thank you.
>> >>
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/Multiple-values-in-field-tp20152411p20152411.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Multiple-values-in-field-tp20152411p20156607.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Multiple-values-in-field-tp20152411p20162152.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 25 09:55:57 2008
Return-Path: <java-user-return-36812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37827 invoked from network); 25 Oct 2008 09:55:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Oct 2008 09:55:56 -0000
Received: (qmail 24871 invoked by uid 500); 25 Oct 2008 09:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24841 invoked by uid 500); 25 Oct 2008 09:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24830 invoked by uid 99); 25 Oct 2008 09:55:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 02:55:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 09:54:39 +0000
Received: by rn-out-0910.google.com with SMTP id j71so871184rne.4
        for <java-user@lucene.apache.org>; Sat, 25 Oct 2008 02:55:07 -0700 (PDT)
Received: by 10.150.98.18 with SMTP id v18mr7668040ybb.79.1224928506970;
        Sat, 25 Oct 2008 02:55:06 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id k47sm1822123rnd.2.2008.10.25.02.55.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 25 Oct 2008 02:55:05 -0700 (PDT)
Message-Id: <FC426E6B-BE6A-48D6-8883-695EDBBAE12B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <3244431d0810242353p4e693f29vd6852b279c8f2bb3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Possible payload bug in lucene
Date: Sat, 25 Oct 2008 05:55:04 -0400
References: <3244431d0810242353p4e693f29vd6852b279c8f2bb3@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


The problem is you are not first calling tp.next().

If you fail to call tp.next() then tp.nextPosition()'s behavior is  
undefined.  In a multi-segment index, you'll hit the NPE you're  
seeing.  In a single-segment (fully optimized) index, you don't hit  
that exception but I'm not sure if the result you get back is correct.

Mike

Fatih Emekci wrote:

> Hi all,
> I am getting the below exception when try to read the payload data:
>   [java] java.lang.NullPointerException
>     [java]     at
> org.apache.lucene.index.MultiSegmentReader 
> $MultiTermPositions.nextPosition(MultiSegmentReader.java:631)
>
> However, if I optimize the index before reading the payload, it just  
> works
> fine.
> This seems like a bug. Pasting the code below. please let me know if  
> I am
> doing something wrong.
>
> thanks
>
>
> import java.util.ArrayList;
> import java.util.List;
>
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.index.TermPositions;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.store.FSDirectory;
>
> import org.apache.lucene.analysis.Token;
> import org.apache.lucene.analysis.TokenStream;
> import org.apache.lucene.index.Payload;
> import java.io.IOException;
>
> public class Experiment
> {
>
>  /**
>   * TOkenStream for the anet ids' payload
>   */
>  private static class IDArrayPayloadStream extends TokenStream
>  {
>    private final Token _token;
>    private boolean _returnToken = false;
>
>    public IDArrayPayloadStream(Term term)
>    {
>      _token = new Token(term.text(), 0, 0);
>    }
>
>
>    /**
>     * Output the ids into the payload
>     * @param ids the list of ids.
>     */
>    void setIDs(List<Integer> ids)
>    {
>      byte[] buffer = new byte[ (ids.size()) * 4];
>      for (int i = 0; i < ids.size(); i++)
>      {
>        buffer = intToByteArray(ids.get(i));
>      }
>      _token.setPayload(new Payload(buffer));
>      _returnToken = true;
>    }
>
>
>    /**
>     * Return the single token created.
>     * @return token if it's already been set, null otherwise.
>     * @throws IOException
>     */
>    public Token next() throws IOException
>    {
>      if (_returnToken)
>      {
>        _returnToken = false;
>        return _token;
>      }
>      else
>      {
>        return null;
>      }
>    }
>  }
>
>  /**
>   * Helper method to add payload (list of integers) to the term in the
> document.
>   * @param document given document
>   * @param term term to use to add payload
>   * @param data payload content
>   */
>  private static void  addPayload(Document document, Term term,
> List<Integer> data)
>  {
>    if (data.size() > 0)
>    {
>      // add a payload for the anet ids
>      IDArrayPayloadStream aps = new IDArrayPayloadStream(term);
>      aps.setIDs(data);
>      Field f = document.getField(term.field());
>      if (f == null)
>      {
>        f = new Field(term.field(), aps);
>        document.add(f);
>      }
>      else
>      {
>        f.setValue(aps);
>      }
>    }
>  }
>
>  public static byte[] intToByteArray(int value) {
>    byte[] b = new byte[4];
>    for (int i = 0; i < 4; i++) {
>      int offset = (b.length - 1 - i) * 8;
>      b[i] = (byte) ((value >>> offset) & 0xFF);
>    }
>    return b;
>  }
>
>  public static final int byteArrayToInt(byte [] b) {
>    return (b[0] << 24)
>    + ((b[1] & 0xFF) << 16)
>    + ((b[2] & 0xFF) << 8)
>    + (b[3] & 0xFF);
>  }
>  /**
>   * @param args
>   */
>  public static void main(String[] args) throws Exception
>  {
>    int TOTDOC = 100000;
>    IndexWriter writer = new IndexWriter("/Users/femekci/lucene/ 
> deneme3",
> new WhitespaceAnalyzer(),
>                                         true);
>    try {
>      int ll =0;
>      while( ll < TOTDOC){
>        try {
>          String state   =  (ll*ll%10)+"123";
>          String email = ll*2 +"s";
>
>          String last_tran = ll*3+"67";
>          String memid = ll +"0";
>          String fname = ll + " " + ll*101;
>          String lname = ll + " " + ll*1001;;
>
>          Document doc = new Document();
>          doc.add(new Field("state", state, Field.Store.NO,
> Field.Index.TOKENIZED));
>
>          doc.add(new Field("email", email, Field.Store.NO,
> Field.Index.TOKENIZED));
>          doc.add(new Field("last_tran", last_tran, Field.Store.NO,
> Field.Index.TOKENIZED));
>          doc.add(new Field("memid", memid.trim(), Field.Store.NO,
> Field.Index.TOKENIZED));
>          doc.add(new Field("fname", fname.trim(), Field.Store.NO,
> Field.Index.TOKENIZED));
>          doc.add(new Field("lname", lname.trim(), Field.Store.NO,
> Field.Index.TOKENIZED));
>
>
>          Term t = new Term("dids", "did");
>          List<Integer> l = new ArrayList<Integer>();
>          l.add(new Integer(ll));
>          addPayload(doc, t, l);
>          System.out.println(memid);
>          doc.add(new Field("row", email + " " + fname + " " + lname  
> +" "
> +memid, Field.Store.NO,   Field.Index.TOKENIZED));
>          writer.addDocument(doc);
>          ll++;
>        } catch(Exception e) {System.out.println("except" +  
> e.toString());
>
>        }
>      }
>      //writer.optimize(); /***************Removing the comment and
> optimizing fixes the problem *********/
>      writer.close();
>    } catch (Exception e)
>    {
>      //writer.optimize();
>      writer.close();
>      System.out.println("exception in indexing " +e.toString());
>    }
>
>    try {
>      IndexReader reader=
> IndexReader.open(FSDirectory.getDirectory("/Users/femekci/lucene/ 
> deneme3",
> false));
>
>      //System.out.println("docnum: " + is.maxDoc());
>      Term t2 = new Term("dids", "did");
>      TermPositions tp =reader.termPositions(t2);
>      byte [] data = new byte[4];
>      tp.nextPosition();
>      for(int i = 0; i < TOTDOC; i++)
>      {
>        if(tp != null && tp.isPayloadAvailable())
>        {
>          tp.getPayload(data, 0);
>        }
>        tp.nextPosition();
>      }
>    } catch(Exception e) {
>      System.out.println("exception in payload ");
>      e.printStackTrace();
>    }
> }
>
> }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 25 10:37:45 2008
Return-Path: <java-user-return-36813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57526 invoked from network); 25 Oct 2008 10:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Oct 2008 10:37:44 -0000
Received: (qmail 42622 invoked by uid 500); 25 Oct 2008 10:37:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42526 invoked by uid 500); 25 Oct 2008 10:37:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42515 invoked by uid 99); 25 Oct 2008 10:37:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 03:37:38 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 10:36:24 +0000
Received: by yx-out-2324.google.com with SMTP id 3so382318yxj.5
        for <java-user@lucene.apache.org>; Sat, 25 Oct 2008 03:37:02 -0700 (PDT)
Received: by 10.100.208.7 with SMTP id f7mr3879127ang.94.1224931021948;
        Sat, 25 Oct 2008 03:37:01 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c20sm4298928ana.21.2008.10.25.03.37.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 25 Oct 2008 03:37:00 -0700 (PDT)
Message-Id: <A6FD517F-CCDB-414A-BFFE-46E89A596846@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20156805.post@talk.nabble.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene Input/Output error
Date: Sat, 25 Oct 2008 06:36:59 -0400
References: <20156805.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


What OS/filesystem are you using?

The code looks fine to me.  2 or more searches running at the same =20
time on the same index should be harmless; this happens in Lucene all =20=

the time in normal applications.

Are you sure you're re-using already opened Searchers, and not =20
accidentally opening a new searcher per user's search?

Is it possible you are running out of file descriptors? That =20
IOException (generic Input/output error) means there is a low level IO =20=

issue.

Mike

JulieSoko wrote:

>
> Hello All,
>  First of all I=92m new to Lucene, and have written code using it to =20=

> search
> over 1 to man indexes, using a user defined query.
> I don't have any code on this system so have to type everything in =20
> here...
> I have the following design but am getting
> An Input / Output error exception which I have typed in a part of it =20=

> below.
> My question is this?  Do I have  glaring flaw
> In this design?  I am reusing the IndexSearchers/IndexReaders and not
> closing them.   The input/output error arises when 2 or
> More searches occur at the same time over some of the same indexes.  =20=

> Can you
> give me some direction where I should look
> For the solution to the exception?
>
> Here is an explanation of my
>    Data:
>        Up to 60 different indexes used at a time
>         1 directory per 1 day of data
>        Millions of documents per day
>        Data  is received and indexes  merged on a continual bases - =20=

> whole
> separate process
>
>    Index contains
>            value: content    eventType: type of data   eventTime: =20
> time data
> collected
>
>    1 to many users can create individual queries containing 1 or =20
> more of
> the fields and values
>    searching over 1 to many indexes
>
>    Design:
>         Utilize the IndexAccessor classes  to cache
> IndexSearcher/IndexReaders i.e. they are made one per index  and never
> closed.
>
>
>         Use a ParallelMultiSearcher  - create one per request using =20=

> 1 to
> many of the indexes
>
>         try {
>         QueryParser parser =3D new QueryParser("value", new
> StandardAnalyzer(0);
>         parser.setDefaultOperator(QueryParser.AND_OPERATOR);
>         Query query =3D parser.parse(queryString);
>
>        TopDocCollector col =3D new TopDocCollector(MAX_NUMBER_HITS);
>        multiSearcher.search(query, new
> RangeFilter("eventTime",startTime,endTime,true,true),col);
>        int numHits =3D col.getTotalHits(0);
>        TopDocs docs =3D col.topDocs();
>
>        if (numHits > 0))
>          for (int i=3D0; i< numHits && i< MAX_NUMBER_HITS; i++)[
>            Document doc =3D multiSearcher.doc(docs.scoreDocs[i].doc);
>              ....
>          }
>
>     }catch(Exception e  ){
>         e.printStackTrace();
>  } finally{
>      //IndexSearchers are not closed since shared by many users
> }
>
>
>
>
> When the second user accesses directories used by the first query =20
> then I get
> the following error:
>
> java.io.IOException: Input/output error
> java.io.RandomAccessFile.readBytes(Native Method)
> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
> at
> org.apache.lucene.store.FSDirecotry=20
> $FSIndexInput.readInternal(FSDirectory.java:550)
> at
> org=20
> .apache=20
> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:=20
> 131)
> at
> org.apache.lucene.index.CompoundFileReader=20
> $CSIndexInput.readInternal(CompoundFileReader.java:240)
> at
> org=20
> .apache=20
> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
> 152)
> at
> org=20
> .apache=20
> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
> 152)
> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
> at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:=20=

> 123)
> at =20
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:=20=

> 154)
> at
> org=20
> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:=20
> 223)
> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:=20=

> 217)
> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:=20=

> 678)
> at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:=20=

> 87)
> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
> at
> org=20
> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:=20=

> 311)
> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>
> Thanks!
>
> --=20
> View this message in context: =
http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20156805.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 25 14:05:38 2008
Return-Path: <java-user-return-36814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32351 invoked from network); 25 Oct 2008 14:05:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Oct 2008 14:05:38 -0000
Received: (qmail 3196 invoked by uid 500); 25 Oct 2008 14:05:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3154 invoked by uid 500); 25 Oct 2008 14:05:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3143 invoked by uid 99); 25 Oct 2008 14:05:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 07:05:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.2.129.75] (HELO penthesilea.sfs.uni-tuebingen.de) (134.2.129.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 14:04:21 +0000
Received: from [134.2.129.126] (ithaka.sfs.uni-tuebingen.de [134.2.129.126])
	by penthesilea.sfs.uni-tuebingen.de (Postfix) with ESMTP id BC93EC6E4
	for <java-user@lucene.apache.org>; Sat, 25 Oct 2008 16:04:55 +0200 (MET DST)
Message-ID: <490327AB.2050605@sfs.uni-tuebingen.de>
Date: Sat, 25 Oct 2008 16:05:31 +0200
From: Niels Ott <nott@sfs.uni-tuebingen.de>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining keyword queries with database-style queries
References: <48FF2736.6090302@drni.de> <359a92830810240859k623290a2u3d7e670f38c19d4f@mail.gmail.com>
In-Reply-To: <359a92830810240859k623290a2u3d7e670f38c19d4f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson schrieb:
> Is this an inadvertent re-post or is there still something you're wondering
> about?

I originally posted with an address not subscribed to the list, causing 
the list server to silently swallow the message. Now the message 
apparently made it here with some delay, for whatever reason.

Sorry for the inconvenience.

    Niels

-- 
Niels Ott
Computational Linguist (B.A.)
http://www.drni.de/niels/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 25 21:50:06 2008
Return-Path: <java-user-return-36815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82015 invoked from network); 25 Oct 2008 21:50:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Oct 2008 21:50:06 -0000
Received: (qmail 69085 invoked by uid 500); 25 Oct 2008 21:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69057 invoked by uid 500); 25 Oct 2008 21:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69046 invoked by uid 99); 25 Oct 2008 21:50:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 14:50:02 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 21:48:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ktr0j-0004mu-Vk
	for java-user@lucene.apache.org; Sat, 25 Oct 2008 14:49:29 -0700
Message-ID: <20168138.post@talk.nabble.com>
Date: Sat, 25 Oct 2008 14:49:29 -0700 (PDT)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: Memory problem dealing with indexsearcher and topdocs
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey there,
I am having some memory trouble with my Lucene app. I need to get the info
and delete about 1000 docs every time I execute the app. I get the IDs of
the documents to delete from a database and for all single ID I get the data
from the indexed doc using an index searcher and topdocs (searching by the
ID I previously got). Once I get the info I close the index searcher and
delete the doc using indexwriter (indexwriter.deletedocuments(term)). I do
this fore every document I need to delete. The problem is than the app
starts increasing memory in use until 778Mb... and doing similar stuff like
adding documents from DB to index it stands in 150 as maximum.
I think the problem happen when i get the documents. I tryed to use the same
indexsearcher to get all the docs but nothithng changed. I try also to put
topdocs to null and the query and queryparse I use to get the doc to null
aswell but nothing changes.
Has someone experienced this problem?.
I am using lucene 2.4 but with 2.3 was the same
Sorry for my english and thanks in advanced.

-- 
View this message in context: http://www.nabble.com/Memory-problem-dealing-with-indexsearcher-and-topdocs-tp20168138p20168138.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 26 00:22:43 2008
Return-Path: <java-user-return-36816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31867 invoked from network); 26 Oct 2008 00:22:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2008 00:22:43 -0000
Received: (qmail 23606 invoked by uid 500); 26 Oct 2008 00:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23447 invoked by uid 500); 26 Oct 2008 00:22:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23436 invoked by uid 99); 26 Oct 2008 00:22:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 17:22:39 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 00:21:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KttOP-0001HH-DS
	for java-user@lucene.apache.org; Sat, 25 Oct 2008 17:22:05 -0700
Message-ID: <20169285.post@talk.nabble.com>
Date: Sat, 25 Oct 2008 17:22:05 -0700 (PDT)
From: JulieSoko <julie.sokolowski@saic.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Input/Output error
In-Reply-To: <A6FD517F-CCDB-414A-BFFE-46E89A596846@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: julie.sokolowski@saic.com
References: <20156805.post@talk.nabble.com> <A6FD517F-CCDB-414A-BFFE-46E89A596846@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm using Linux... running out of file descriptors... I didn't think of tha=
t!=20
I will check on Monday...
I forgot to mention that I am using the Lucene 2.3.1 version.  Not sure if
that makes any difference.
Could there be an issue with the indexes being merged and searched at the
same time?


Michael McCandless-2 wrote:
>=20
>=20
> What OS/filesystem are you using?
>=20
> The code looks fine to me.  2 or more searches running at the same =20
> time on the same index should be harmless; this happens in Lucene all =20
> the time in normal applications.
>=20
> Are you sure you're re-using already opened Searchers, and not =20
> accidentally opening a new searcher per user's search?
>=20
> Is it possible you are running out of file descriptors? That =20
> IOException (generic Input/output error) means there is a low level IO =
=20
> issue.
>=20
> Mike
>=20
> JulieSoko wrote:
>=20
>>
>> Hello All,
>>  First of all I=E2=80=99m new to Lucene, and have written code using it =
to =20
>> search
>> over 1 to man indexes, using a user defined query.
>> I don't have any code on this system so have to type everything in =20
>> here...
>> I have the following design but am getting
>> An Input / Output error exception which I have typed in a part of it =20
>> below.
>> My question is this?  Do I have  glaring flaw
>> In this design?  I am reusing the IndexSearchers/IndexReaders and not
>> closing them.   The input/output error arises when 2 or
>> More searches occur at the same time over some of the same indexes.  =20
>> Can you
>> give me some direction where I should look
>> For the solution to the exception?
>>
>> Here is an explanation of my
>>    Data:
>>        Up to 60 different indexes used at a time
>>         1 directory per 1 day of data
>>        Millions of documents per day
>>        Data  is received and indexes  merged on a continual bases - =20
>> whole
>> separate process
>>
>>    Index contains
>>            value: content    eventType: type of data   eventTime: =20
>> time data
>> collected
>>
>>    1 to many users can create individual queries containing 1 or =20
>> more of
>> the fields and values
>>    searching over 1 to many indexes
>>
>>    Design:
>>         Utilize the IndexAccessor classes  to cache
>> IndexSearcher/IndexReaders i.e. they are made one per index  and never
>> closed.
>>
>>
>>         Use a ParallelMultiSearcher  - create one per request using =20
>> 1 to
>> many of the indexes
>>
>>         try {
>>         QueryParser parser =3D new QueryParser("value", new
>> StandardAnalyzer(0);
>>         parser.setDefaultOperator(QueryParser.AND_OPERATOR);
>>         Query query =3D parser.parse(queryString);
>>
>>        TopDocCollector col =3D new TopDocCollector(MAX_NUMBER_HITS);
>>        multiSearcher.search(query, new
>> RangeFilter("eventTime",startTime,endTime,true,true),col);
>>        int numHits =3D col.getTotalHits(0);
>>        TopDocs docs =3D col.topDocs();
>>
>>        if (numHits > 0))
>>          for (int i=3D0; i< numHits && i< MAX_NUMBER_HITS; i++)[
>>            Document doc =3D multiSearcher.doc(docs.scoreDocs[i].doc);
>>              ....
>>          }
>>
>>     }catch(Exception e  ){
>>         e.printStackTrace();
>>  } finally{
>>      //IndexSearchers are not closed since shared by many users
>> }
>>
>>
>>
>>
>> When the second user accesses directories used by the first query =20
>> then I get
>> the following error:
>>
>> java.io.IOException: Input/output error
>> java.io.RandomAccessFile.readBytes(Native Method)
>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>> at
>> org.apache.lucene.store.FSDirecotry=20
>> $FSIndexInput.readInternal(FSDirectory.java:550)
>> at
>> org=20
>> .apache=20
>> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:=20
>> 131)
>> at
>> org.apache.lucene.index.CompoundFileReader=20
>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>> at
>> org=20
>> .apache=20
>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>> 152)
>> at
>> org=20
>> .apache=20
>> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>> 152)
>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>> at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:=20
>> 123)
>> at =20
>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:=20
>> 154)
>> at
>> org=20
>> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:=20
>> 223)
>> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:=20
>> 217)
>> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:=20
>> 678)
>> at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:=20
>> 87)
>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>> at
>> org=20
>> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:=20
>> 311)
>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>
>> Thanks!
>>
>> --=20
>> View this message in context:
>> http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20156805.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Lucene-Input-Output-err=
or-tp20156805p20169285.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 26 00:55:03 2008
Return-Path: <java-user-return-36817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38303 invoked from network); 26 Oct 2008 00:55:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2008 00:55:03 -0000
Received: (qmail 29951 invoked by uid 500); 26 Oct 2008 00:55:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29912 invoked by uid 500); 26 Oct 2008 00:55:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29901 invoked by uid 99); 26 Oct 2008 00:55:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Oct 2008 17:55:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 00:53:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kttth-00027x-Kr
	for java-user@lucene.apache.org; Sat, 25 Oct 2008 17:54:25 -0700
Message-ID: <20169473.post@talk.nabble.com>
Date: Sat, 25 Oct 2008 17:54:25 -0700 (PDT)
From: JulieSoko <julie.sokolowski@saic.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Input/Output error
In-Reply-To: <A6FD517F-CCDB-414A-BFFE-46E89A596846@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: julie.sokolowski@saic.com
References: <20156805.post@talk.nabble.com> <A6FD517F-CCDB-414A-BFFE-46E89A596846@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I have been doing some reading and think something that I am doing icould b=
e
a problem.  For each search of an index,  I first check to see if the
IndexReader is current and  if not reopen it... I think I should not reopen
the IndexReader until I make sure that there are no other queries running
using this searcher/reader.  Could this be causing my Input/Output error?


Michael McCandless-2 wrote:
>=20
>=20
> What OS/filesystem are you using?
>=20
> The code looks fine to me.  2 or more searches running at the same =20
> time on the same index should be harmless; this happens in Lucene all =20
> the time in normal applications.
>=20
> Are you sure you're re-using already opened Searchers, and not =20
> accidentally opening a new searcher per user's search?
>=20
> Is it possible you are running out of file descriptors? That =20
> IOException (generic Input/output error) means there is a low level IO =
=20
> issue.
>=20
> Mike
>=20
> JulieSoko wrote:
>=20
>>
>> Hello All,
>>  First of all I=E2=80=99m new to Lucene, and have written code using it =
to =20
>> search
>> over 1 to man indexes, using a user defined query.
>> I don't have any code on this system so have to type everything in =20
>> here...
>> I have the following design but am getting
>> An Input / Output error exception which I have typed in a part of it =20
>> below.
>> My question is this?  Do I have  glaring flaw
>> In this design?  I am reusing the IndexSearchers/IndexReaders and not
>> closing them.   The input/output error arises when 2 or
>> More searches occur at the same time over some of the same indexes.  =20
>> Can you
>> give me some direction where I should look
>> For the solution to the exception?
>>
>> Here is an explanation of my
>>    Data:
>>        Up to 60 different indexes used at a time
>>         1 directory per 1 day of data
>>        Millions of documents per day
>>        Data  is received and indexes  merged on a continual bases - =20
>> whole
>> separate process
>>
>>    Index contains
>>            value: content    eventType: type of data   eventTime: =20
>> time data
>> collected
>>
>>    1 to many users can create individual queries containing 1 or =20
>> more of
>> the fields and values
>>    searching over 1 to many indexes
>>
>>    Design:
>>         Utilize the IndexAccessor classes  to cache
>> IndexSearcher/IndexReaders i.e. they are made one per index  and never
>> closed.
>>
>>
>>         Use a ParallelMultiSearcher  - create one per request using =20
>> 1 to
>> many of the indexes
>>
>>         try {
>>         QueryParser parser =3D new QueryParser("value", new
>> StandardAnalyzer(0);
>>         parser.setDefaultOperator(QueryParser.AND_OPERATOR);
>>         Query query =3D parser.parse(queryString);
>>
>>        TopDocCollector col =3D new TopDocCollector(MAX_NUMBER_HITS);
>>        multiSearcher.search(query, new
>> RangeFilter("eventTime",startTime,endTime,true,true),col);
>>        int numHits =3D col.getTotalHits(0);
>>        TopDocs docs =3D col.topDocs();
>>
>>        if (numHits > 0))
>>          for (int i=3D0; i< numHits && i< MAX_NUMBER_HITS; i++)[
>>            Document doc =3D multiSearcher.doc(docs.scoreDocs[i].doc);
>>              ....
>>          }
>>
>>     }catch(Exception e  ){
>>         e.printStackTrace();
>>  } finally{
>>      //IndexSearchers are not closed since shared by many users
>> }
>>
>>
>>
>>
>> When the second user accesses directories used by the first query =20
>> then I get
>> the following error:
>>
>> java.io.IOException: Input/output error
>> java.io.RandomAccessFile.readBytes(Native Method)
>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>> at
>> org.apache.lucene.store.FSDirecotry=20
>> $FSIndexInput.readInternal(FSDirectory.java:550)
>> at
>> org=20
>> .apache=20
>> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:=20
>> 131)
>> at
>> org.apache.lucene.index.CompoundFileReader=20
>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>> at
>> org=20
>> .apache=20
>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>> 152)
>> at
>> org=20
>> .apache=20
>> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>> 152)
>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>> at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:=20
>> 123)
>> at =20
>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:=20
>> 154)
>> at
>> org=20
>> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:=20
>> 223)
>> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:=20
>> 217)
>> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:=20
>> 678)
>> at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:=20
>> 87)
>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>> at
>> org=20
>> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:=20
>> 311)
>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>
>> Thanks!
>>
>> --=20
>> View this message in context:
>> http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20156805.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Lucene-Input-Output-err=
or-tp20156805p20169473.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 26 09:32:32 2008
Return-Path: <java-user-return-36818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4661 invoked from network); 26 Oct 2008 09:32:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2008 09:32:31 -0000
Received: (qmail 48330 invoked by uid 500); 26 Oct 2008 09:32:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48066 invoked by uid 500); 26 Oct 2008 09:32:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48055 invoked by uid 99); 26 Oct 2008 09:32:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 02:32:26 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.181] (HELO el-out-1112.google.com) (209.85.162.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 09:31:13 +0000
Received: by el-out-1112.google.com with SMTP id p32so577160elf.14
        for <java-user@lucene.apache.org>; Sun, 26 Oct 2008 02:31:41 -0700 (PDT)
Received: by 10.90.31.8 with SMTP id e8mr3313228age.37.1225013501201;
        Sun, 26 Oct 2008 02:31:41 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 9sm2690047agc.31.2008.10.26.02.31.39
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 26 Oct 2008 02:31:39 -0700 (PDT)
Message-Id: <EDCE3AA7-F4E1-4A37-9A8E-80C14A153874@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20169473.post@talk.nabble.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene Input/Output error
Date: Sun, 26 Oct 2008 05:31:38 -0400
References: <20156805.post@talk.nabble.com> <A6FD517F-CCDB-414A-BFFE-46E89A596846@mikemccandless.com> <20169473.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


That would definitely cause problems for any searches still in flight =20=

on the old IndexReader (though I'm not certain that generic Input/=20
output error IOException is what would be thrown).

You can use the IndexReader's incRef/decRef methods to ensure the =20
reader stays open for all in flight queries.  Call incRef when the =20
query starts in a synchronized block that ensures the reader isn't =20
being closed at the same time, and then decRef (in a finally clause) =20
when the query is completely finished.  Then you can call close() on =20
the old reader, and it will in fact remain open until all in flight =20
queries have decRef'd it.

Mike

JulieSoko wrote:

>
> I have been doing some reading and think something that I am doing =20
> icould be
> a problem.  For each search of an index,  I first check to see if the
> IndexReader is current and  if not reopen it... I think I should not =20=

> reopen
> the IndexReader until I make sure that there are no other queries =20
> running
> using this searcher/reader.  Could this be causing my Input/Output =20
> error?
>
>
> Michael McCandless-2 wrote:
>>
>>
>> What OS/filesystem are you using?
>>
>> The code looks fine to me.  2 or more searches running at the same
>> time on the same index should be harmless; this happens in Lucene all
>> the time in normal applications.
>>
>> Are you sure you're re-using already opened Searchers, and not
>> accidentally opening a new searcher per user's search?
>>
>> Is it possible you are running out of file descriptors? That
>> IOException (generic Input/output error) means there is a low level =20=

>> IO
>> issue.
>>
>> Mike
>>
>> JulieSoko wrote:
>>
>>>
>>> Hello All,
>>> First of all I=92m new to Lucene, and have written code using it to
>>> search
>>> over 1 to man indexes, using a user defined query.
>>> I don't have any code on this system so have to type everything in
>>> here...
>>> I have the following design but am getting
>>> An Input / Output error exception which I have typed in a part of it
>>> below.
>>> My question is this?  Do I have  glaring flaw
>>> In this design?  I am reusing the IndexSearchers/IndexReaders and =20=

>>> not
>>> closing them.   The input/output error arises when 2 or
>>> More searches occur at the same time over some of the same indexes.
>>> Can you
>>> give me some direction where I should look
>>> For the solution to the exception?
>>>
>>> Here is an explanation of my
>>>   Data:
>>>       Up to 60 different indexes used at a time
>>>        1 directory per 1 day of data
>>>       Millions of documents per day
>>>       Data  is received and indexes  merged on a continual bases -
>>> whole
>>> separate process
>>>
>>>   Index contains
>>>           value: content    eventType: type of data   eventTime:
>>> time data
>>> collected
>>>
>>>   1 to many users can create individual queries containing 1 or
>>> more of
>>> the fields and values
>>>   searching over 1 to many indexes
>>>
>>>   Design:
>>>        Utilize the IndexAccessor classes  to cache
>>> IndexSearcher/IndexReaders i.e. they are made one per index  and =20
>>> never
>>> closed.
>>>
>>>
>>>        Use a ParallelMultiSearcher  - create one per request using
>>> 1 to
>>> many of the indexes
>>>
>>>        try {
>>>        QueryParser parser =3D new QueryParser("value", new
>>> StandardAnalyzer(0);
>>>        parser.setDefaultOperator(QueryParser.AND_OPERATOR);
>>>        Query query =3D parser.parse(queryString);
>>>
>>>       TopDocCollector col =3D new TopDocCollector(MAX_NUMBER_HITS);
>>>       multiSearcher.search(query, new
>>> RangeFilter("eventTime",startTime,endTime,true,true),col);
>>>       int numHits =3D col.getTotalHits(0);
>>>       TopDocs docs =3D col.topDocs();
>>>
>>>       if (numHits > 0))
>>>         for (int i=3D0; i< numHits && i< MAX_NUMBER_HITS; i++)[
>>>           Document doc =3D multiSearcher.doc(docs.scoreDocs[i].doc);
>>>             ....
>>>         }
>>>
>>>    }catch(Exception e  ){
>>>        e.printStackTrace();
>>> } finally{
>>>     //IndexSearchers are not closed since shared by many users
>>> }
>>>
>>>
>>>
>>>
>>> When the second user accesses directories used by the first query
>>> then I get
>>> the following error:
>>>
>>> java.io.IOException: Input/output error
>>> java.io.RandomAccessFile.readBytes(Native Method)
>>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>>> at
>>> org.apache.lucene.store.FSDirecotry
>>> $FSIndexInput.readInternal(FSDirectory.java:550)
>>> at
>>> org
>>> .apache
>>> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:
>>> 131)
>>> at
>>> org.apache.lucene.index.CompoundFileReader
>>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>>> at
>>> org
>>> .apache
>>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>>> 152)
>>> at
>>> org
>>> .apache
>>> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>>> 152)
>>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>>> at =20
>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:
>>> 123)
>>> at
>>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:
>>> 154)
>>> at
>>> org
>>> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:
>>> 223)
>>> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:
>>> 217)
>>> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:
>>> 678)
>>> at =20
>>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:
>>> 87)
>>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>>> at
>>> org
>>> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:
>>> 311)
>>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>>
>>> Thanks!
>>>
>>> --=20
>>> View this message in context:
>>> =
http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20156805.html
>>> Sent from the Lucene - Java Users mailing list archive at =20
>>> Nabble.com.
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --=20
> View this message in context: =
http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20169473.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 26 09:35:44 2008
Return-Path: <java-user-return-36819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6778 invoked from network); 26 Oct 2008 09:35:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2008 09:35:40 -0000
Received: (qmail 50919 invoked by uid 500); 26 Oct 2008 09:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50883 invoked by uid 500); 26 Oct 2008 09:35:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50872 invoked by uid 99); 26 Oct 2008 09:35:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 02:35:35 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 09:34:23 +0000
Received: by wr-out-0506.google.com with SMTP id c30so410843wra.21
        for <java-user@lucene.apache.org>; Sun, 26 Oct 2008 02:34:51 -0700 (PDT)
Received: by 10.90.99.3 with SMTP id w3mr3311058agb.89.1225013690466;
        Sun, 26 Oct 2008 02:34:50 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm2690535agb.22.2008.10.26.02.34.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 26 Oct 2008 02:34:49 -0700 (PDT)
Message-Id: <BB8DE11C-C4A6-4F21-A988-0ED3DF2E1E42@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20169285.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene Input/Output error
Date: Sun, 26 Oct 2008 05:34:46 -0400
References: <20156805.post@talk.nabble.com> <A6FD517F-CCDB-414A-BFFE-46E89A596846@mikemccandless.com> <20169285.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


JulieSoko wrote:

> I'm using Linux... running out of file descriptors... I didn't think  
> of that!
> I will check on Monday...

Try running "lsof" and count how many files are held open by the JRE  
process.

> I forgot to mention that I am using the Lucene 2.3.1 version.  Not  
> sure if
> that makes any difference.

That's fine, though I'd upgrade 2.3.2.

> Could there be an issue with the indexes being merged and searched  
> at the
> same time?

Merging & searching at the same time is completely fine.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 26 17:53:14 2008
Return-Path: <java-user-return-36820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78922 invoked from network); 26 Oct 2008 17:53:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2008 17:53:14 -0000
Received: (qmail 22376 invoked by uid 500); 26 Oct 2008 17:53:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22337 invoked by uid 500); 26 Oct 2008 17:53:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22325 invoked by uid 99); 26 Oct 2008 17:53:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 10:53:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 17:52:00 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 4C75371C490; Sun, 26 Oct 2008 10:52:37 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1F00671C48F
	for <java-user@lucene.apache.org>; Sun, 26 Oct 2008 10:52:37 -0700 (PDT)
Date: Sun, 26 Oct 2008 10:52:37 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index
In-Reply-To: <aa609e6b0810171834h82a8bbapa39025efcaeeeed4@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0810261048530.26091@radix.cryptio.net>
References: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com> 
 <0CD49D04A7B5534CA56257ADD9719EF703751240@indiaserv01.asite.asitehq.com> 
 <aa609e6b0810160453i340e40d8p7592684afd620232@mail.gmail.com> 
 <5B3E2464-285A-41A0-A1D5-73343E133B7F@mikemccandless.com> 
 <aa609e6b0810170109o7a6f96a0k89b687d6ef168813@mail.gmail.com> 
 <E88AEC74-6C0E-461E-9437-DC30F48B361A@mikemccandless.com>
 <aa609e6b0810171834h82a8bbapa39025efcaeeeed4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: i use SimpleFSLockFactory and optimized opened IndexWriter, but i use api to
: forcefully removing the lock file.
: this missing file, just occurs in sometimes not always??

forcibly removing hte lock file isn't something that should be done in a 
typical situation ... if the lock file is there, there's a reason for it, 
and it's not suprising to me that something might break if you forcibly 
remove the lock file while the app is running -- as Michael said, that can 
easily lead to two writers both thinking they have access to write to the 
index.

http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/org/apache/lucene/index/IndexWriter.html#unlock(org.apache.lucene.store.Directory)
>Forcibly unlocks the index in the named directory.
>
>Caution: this should only be used by failure recovery code, when it is 
>known that no other process nor thread is in fact currently accessing 
>this index. 


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 03:37:52 2008
Return-Path: <java-user-return-36821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89075 invoked from network); 27 Oct 2008 03:37:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 03:37:52 -0000
Received: (qmail 74688 invoked by uid 500); 27 Oct 2008 03:37:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74650 invoked by uid 500); 27 Oct 2008 03:37:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74639 invoked by uid 99); 27 Oct 2008 03:37:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 20:37:48 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aashish.Agrawal@morganstanley.com designates 199.89.103.68 as permitted sender)
Received: from [199.89.103.68] (HELO pimtaint01.ms.com) (199.89.103.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 03:36:34 +0000
Received: from pimtaint01 (localhost.ms.com [127.0.0.1])
	by pimtaint01.ms.com (output Postfix) with ESMTP id A68902946A8
	for <java-user@lucene.apache.org>; Sun, 26 Oct 2008 23:36:42 -0400 (EDT)
Received: from ny0031as01 (unknown [144.203.194.93])
	by pimtaint01.ms.com (internal Postfix) with ESMTP id 8C8FE5B0031
	for <java-user@lucene.apache.org>; Sun, 26 Oct 2008 23:36:42 -0400 (EDT)
Received: from ny0031as01 (localhost [127.0.0.1])
	by ny0031as01 (msa-out Postfix) with ESMTP id 740269700EA
	for <java-user@lucene.apache.org>; Sun, 26 Oct 2008 23:36:42 -0400 (EDT)
Received: from piwexob04.msad.ms.com (piwexob04 [205.228.46.148])
	by ny0031as01 (mta-in Postfix) with ESMTP id 6FE4BC002F
	for <java-user@lucene.apache.org>; Sun, 26 Oct 2008 23:36:42 -0400 (EDT)
Received: from TJWEXBH01.msad.ms.com ([161.144.49.190]) by piwexob04.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Sun, 26 Oct 2008 23:36:42 -0400
Received: from TKWEXMB22.msad.ms.com ([161.144.49.149]) by TJWEXBH01.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Mon, 27 Oct 2008 12:36:39 +0900
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: example on RegexQuery 
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.3168
Date: Mon, 27 Oct 2008 12:36:39 +0900
Message-ID: <ABF971E134098D40A9F82A75E3D2B46B023D4C42@TKWEXMB22.msad.ms.com>
In-Reply-To: <9294E20AED46934EA459020706463F94EF4046@SUEXCL-02.ad.syr.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: example on RegexQuery 
Importance: normal
Priority: normal
Thread-Index: Ack0wj+rG7bHRiiHRIObDx8E2aSbEAAseMAAAA2vZNAAEEVmkAB+ElLA
References: <ABF971E134098D40A9F82A75E3D2B46B023D4C35@TKWEXMB22.msad.ms.com> <9294E20AED46934EA459020706463F94EF4046@SUEXCL-02.ad.syr.edu>
From: "Agrawal, Aashish \(IT\)" <Aashish.Agrawal@morganstanley.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Oct 2008 03:36:39.0851 (UTC) FILETIME=[38E797B0:01C937E5]
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 26102008 #1208729, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steven

thanks for pointing to the example of RegexQuery.=20

I have a simple code snippet which is not working, not sure if I am
using it incorrectly.=20
----
      RegexQuery query =3D new RegexQuery (new Term (field, line));=20
      query.setRegexImplementation(new JavaUtilRegexCapabilities());
      System.out.println("Searching for: " + query.toString(field));
      Hits hits =3D searcher.search(query);=20
--------

I am searching a sample file like below -=20
---
agrawal fdfdf
fsdfafasf 3495549584
fsfsfs fsffsf r4e3fdere j4343 =20
---------

when I search this file with pattern -=20
.*4343*
.*[a-z]4343
j4343
or even search for   3495549584

all are failing with result no match found..

could you point me what is wrong here ?? Also if I try to search *4343*,
it throws exception,, shouldn't * at start be  allowed with regexQuery ?


thanks
Aashish Agrawal

-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]=20
Sent: Saturday, October 25, 2008 12:31 AM
To: java-user@lucene.apache.org
Subject: RE: example on RegexQuery=20

Hi Aashish,

On 10/24/2008 at 3:35 AM, Agrawal, Aashish (IT) wrote:
> I want to use lucene for a simple search engine  with regex support .
> I tried using RegexQuery.. but seems I am missing something.
> Is there any working exmaple on using RegexQuery ??

How about TestRegexQuery?:

<http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_4_0/contrib/rege
x/src/test/org/apache/lucene/search/regex/TestRegexQuery.java?view=3Dmark=
u
p>

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------------------------------------------------

NOTICE: If received in error, please destroy and notify sender. Sender =
does not intend to waive confidentiality or privilege. Use of this email =
is prohibited when received in error.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 04:20:21 2008
Return-Path: <java-user-return-36822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2342 invoked from network); 27 Oct 2008 04:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 04:20:21 -0000
Received: (qmail 88699 invoked by uid 500); 27 Oct 2008 04:20:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88668 invoked by uid 500); 27 Oct 2008 04:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88654 invoked by uid 99); 27 Oct 2008 04:20:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 21:20:19 -0700
X-ASF-Spam-Status: No, hits=-8.0 required=10.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [204.152.239.220] (HELO l4dupmt4.hewitt.com) (204.152.239.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 04:19:07 +0000
Received: from linkap13.hewitt.com (linkap13.hewitt.com [10.64.63.9])
	by l4dupmt4.hewitt.com (8.13.4/8.13.4) with ESMTP id m9R4J5vh014251
	for <java-user@lucene.apache.org>; Sun, 26 Oct 2008 23:19:31 -0500 (CDT)
Received: from [10.20.63.62] by linkap13.hewitt.com with ESMTP (
 Tumbleweed MMS SMTP Relay); Sun, 26 Oct 2008 23:19:24 -0500
X-Server-Uuid: 00C1C84A-C61B-441D-AFFB-A60DA65DD480
Subject: Neeraj Gupta is out of the office.
From: "Neeraj Gupta" <neeraj.gupta.2@hewitt.com>
To: java-user@lucene.apache.org
Message-ID: <OF60EDC845.319AD1B3-ON862574EF.00145889-862574EF.00145889@hewitt.com>
Date: Sun, 26 Oct 2008 22:42:13 -0500
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.6FP2|October 17, 2007) at 10/26/2008 11:19:25 PM
MIME-Version: 1.0
X-WSS-ID: 651B9EC62M8857197-02-01
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Regarding your message: RE: example on RegexQuery

I will be out of the office starting  27-Oct-2008 and will not return until
03-Nov-2008.

I will respond to your message when I return.




The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient is strictly prohibited. All messages sent to and from this e-mail address may be monitored as permitted by applicable law and regulations to ensure compliance with our internal policies and to protect our business. E-mails are not secure and cannot be guaranteed to be error free as they can be intercepted, amended, lost or destroyed, or contain viruses. You are deemed to have accepted these risks if you communicate with us by e-mail. 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 05:05:26 2008
Return-Path: <java-user-return-36823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9321 invoked from network); 27 Oct 2008 05:05:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 05:05:26 -0000
Received: (qmail 97496 invoked by uid 500); 27 Oct 2008 05:05:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97462 invoked by uid 500); 27 Oct 2008 05:05:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97451 invoked by uid 99); 27 Oct 2008 05:05:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 22:05:24 -0700
X-ASF-Spam-Status: No, hits=-8.0 required=10.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [204.152.239.220] (HELO l4dupmt4.hewitt.com) (204.152.239.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 05:04:12 +0000
Received: from linkap13.hewitt.com (linkap13.hewitt.com [10.64.63.9])
	by l4dupmt4.hewitt.com (8.13.4/8.13.4) with ESMTP id m9R54kna005486
	for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 00:04:51 -0500 (CDT)
Received: from [10.20.63.62] by linkap13.hewitt.com with ESMTP (
 Tumbleweed MMS SMTP Relay); Mon, 27 Oct 2008 00:04:45 -0500
X-Server-Uuid: 00C1C84A-C61B-441D-AFFB-A60DA65DD480
Subject: Neeraj Gupta is out of the office.
From: "Neeraj Gupta" <neeraj.gupta.2@hewitt.com>
To: java-user@lucene.apache.org
Message-ID: <OF60EDC845.319AD1B3-ON862574EF.00145889-862574EF.00145889@hewitt.com>
Date: Sun, 26 Oct 2008 22:42:13 -0500
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.6FP2|October 17, 2007) at 10/27/2008 12:04:46 AM
MIME-Version: 1.0
X-WSS-ID: 651B94672M8865383-05-01
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Regarding your message: RE: example on RegexQuery

I will be out of the office starting  27-Oct-2008 and will not return until
03-Nov-2008.

I will respond to your message when I return.




The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient is strictly prohibited. All messages sent to and from this e-mail address may be monitored as permitted by applicable law and regulations to ensure compliance with our internal policies and to protect our business. E-mails are not secure and cannot be guaranteed to be error free as they can be intercepted, amended, lost or destroyed, or contain viruses. You are deemed to have accepted these risks if you communicate with us by e-mail. 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 06:46:39 2008
Return-Path: <java-user-return-36824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67536 invoked from network); 27 Oct 2008 06:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 06:46:39 -0000
Received: (qmail 45674 invoked by uid 500); 27 Oct 2008 06:46:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45643 invoked by uid 500); 27 Oct 2008 06:46:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45631 invoked by uid 99); 27 Oct 2008 06:46:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Oct 2008 23:46:37 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aashish.Agrawal@morganstanley.com designates 199.89.103.68 as permitted sender)
Received: from [199.89.103.68] (HELO pimtaint01.ms.com) (199.89.103.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 06:45:22 +0000
Received: from pimtaint01 (localhost.ms.com [127.0.0.1])
	by pimtaint01.ms.com (output Postfix) with ESMTP id C2999294472
	for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 02:46:01 -0400 (EDT)
Received: from ny0032as01 (unknown [144.203.194.95])
	by pimtaint01.ms.com (internal Postfix) with ESMTP id A57D85B0031
	for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 02:46:01 -0400 (EDT)
Received: from ny0032as01 (localhost [127.0.0.1])
	by ny0032as01 (msa-out Postfix) with ESMTP id 8D1A8C945DF
	for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 02:46:01 -0400 (EDT)
Received: from PIWEXOB02.msad.ms.com (piwexob02 [205.228.46.104])
	by ny0032as01 (mta-in Postfix) with ESMTP id 8A8C7BC4001
	for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 02:46:01 -0400 (EDT)
Received: from TJWEXBH01.msad.ms.com ([161.144.49.190]) by PIWEXOB02.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Mon, 27 Oct 2008 02:46:01 -0400
Received: from TKWEXMB22.msad.ms.com ([161.144.49.149]) by TJWEXBH01.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Mon, 27 Oct 2008 15:45:58 +0900
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C937FF.AAEC5767"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.3168
Content-Transfer-Encoding: 7bit
Subject: API to get the matched lines in  a file? 
Date: Mon, 27 Oct 2008 15:45:57 +0900
Message-ID: <ABF971E134098D40A9F82A75E3D2B46B023D4C4C@TKWEXMB22.msad.ms.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: API to get the matched lines in  a file? 
Importance: normal
Priority: normal
Thread-Index: Ack3/6i3aix9szNETouxtq1zDJ31fQ==
From: "Agrawal, Aashish \(IT\)" <Aashish.Agrawal@morganstanley.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Oct 2008 06:45:58.0564 (UTC) FILETIME=[AB39A640:01C937FF]
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 26102008 #1208729, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C937FF.AAEC5767
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is there any API in lucene which gives you matched lines or offiset in a
file to first instance of matched pattern?=20
=20
thanks,=20
Aashish Agrawal
--------------------------------------------------------

NOTICE: If received in error, please destroy and notify sender. Sender =
does not intend to waive confidentiality or privilege. Use of this email =
is prohibited when received in error.

------_=_NextPart_001_01C937FF.AAEC5767--

From java-user-return-36825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 07:14:58 2008
Return-Path: <java-user-return-36825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77568 invoked from network); 27 Oct 2008 07:14:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 07:14:58 -0000
Received: (qmail 59145 invoked by uid 500); 27 Oct 2008 07:14:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59115 invoked by uid 500); 27 Oct 2008 07:14:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59104 invoked by uid 99); 27 Oct 2008 07:14:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 00:14:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oskwon@thinkfree.com designates 211.214.213.251 as permitted sender)
Received: from [211.214.213.251] (HELO tfmail.thinkfree.com) (211.214.213.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 07:13:43 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by tfmail.thinkfree.com (Postfix) with ESMTP id 129BC16687D6
	for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 16:13:23 +0900 (KST)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -2.087
X-Spam-Level: 
Received: from tfmail.thinkfree.com ([127.0.0.1])
	by localhost (tfmail.thinkfree.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4ExND9bxExDa for <java-user@lucene.apache.org>;
	Mon, 27 Oct 2008 16:13:22 +0900 (KST)
Received: from oskwon (unknown [211.214.213.193])
	by tfmail.thinkfree.com (Postfix) with ESMTP id C0B8F16687CE
	for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 16:13:22 +0900 (KST)
From: "Kwon, Ohsang" <oskwon@thinkfree.com>
To: <java-user@lucene.apache.org>
References: <E75025441A85463AB6991E0529DFC07F@oskwon> <727619087FE74FD992B3D669E08F4FAA@oskwon> <D134EA770ABD457CBFF3EB57FB1C2F03@oskwon> <9E4AC128B849452BA1D5ABBEFC142B45@oskwon>
Subject: How can I get to the Document for architecture of lucene index.
Date: Mon, 27 Oct 2008 16:13:18 +0900
Message-ID: <4D42A7E6E7314620B62491247125CAF9@oskwon>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001F_01C9384E.EC70A6A0"
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <9E4AC128B849452BA1D5ABBEFC142B45@oskwon>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: Ack4ARXE2Xx3cxu7T6Gq8VR2DUHA/AAACa3gAAAIbCAAAApZEAAAKdTg
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.087 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.529, BAYES_00=-2.599,
	DNS_FROM_SECURITYSAGE=1.513, HTML_90_100=0.113,
	HTML_FONT_FACE_BAD=0.156, HTML_MESSAGE=0.001]

------=_NextPart_000_001F_01C9384E.EC70A6A0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I want to know how the lucene stored the data in the index internally.

(Lucene`s index format changed very often.)

 

I can not find this information in wiki.

Where can I get that?

 

Does the same document or picture for index fomat?

plz help me.

 


------=_NextPart_000_001F_01C9384E.EC70A6A0--


From java-user-return-36826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 07:54:40 2008
Return-Path: <java-user-return-36826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87043 invoked from network); 27 Oct 2008 07:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 07:54:40 -0000
Received: (qmail 79490 invoked by uid 500); 27 Oct 2008 07:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79449 invoked by uid 500); 27 Oct 2008 07:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79438 invoked by uid 99); 27 Oct 2008 07:54:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 00:54:38 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 07:53:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KuMvM-0003OF-9F
	for java-user@lucene.apache.org; Mon, 27 Oct 2008 00:54:04 -0700
Message-ID: <20183160.post@talk.nabble.com>
Date: Mon, 27 Oct 2008 00:54:04 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: How can I get to the Document for architecture of lucene index.
In-Reply-To: <4D42A7E6E7314620B62491247125CAF9@oskwon>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <4D42A7E6E7314620B62491247125CAF9@oskwon>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Ohsang,

are you looking for
http://lucene.apache.org/java/2_4_0/fileformats.html
?

Best regards
  Karsten

Kwon, Ohsang wrote:
> 
> I want to know how the lucene stored the data in the index internally.
> 
> (Lucene`s index format changed very often.)
> 
>  
> 
> I can not find this information in wiki.
> 
> Where can I get that?
> Does the same document or picture for index fomat?
> plz help me.
> 
> 

-- 
View this message in context: http://www.nabble.com/How-can-I-get-to-the-Document-for-architecture-of-lucene-index.-tp20182768p20183160.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 08:55:34 2008
Return-Path: <java-user-return-36827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 297 invoked from network); 27 Oct 2008 08:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 08:55:34 -0000
Received: (qmail 42860 invoked by uid 500); 27 Oct 2008 08:55:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42837 invoked by uid 500); 27 Oct 2008 08:55:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42826 invoked by uid 99); 27 Oct 2008 08:55:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 01:55:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blured75@hotmail.com designates 65.55.111.99 as permitted sender)
Received: from [65.55.111.99] (HELO blu0-omc2-s24.blu0.hotmail.com) (65.55.111.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 08:54:16 +0000
Received: from BLU149-W26 ([65.55.111.72]) by blu0-omc2-s24.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 27 Oct 2008 01:54:56 -0700
Message-ID: <BLU149-W26881C0CA3A4D958FE96A1C5240@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_08283b07-7471-4818-96a7-d69ff92ae52b_"
X-Originating-IP: [90.63.45.73]
From: blured blured <blured75@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Use SQL frontend to read lucene index
Date: Mon, 27 Oct 2008 08:54:55 +0000
Importance: Normal
In-Reply-To: <1225097476.39076.ezmlm@lucene.apache.org>
References: <1225097476.39076.ezmlm@lucene.apache.org>
MIME-Version: 1.0
X-OriginalArrivalTime: 27 Oct 2008 08:54:56.0122 (UTC) FILETIME=[AF2B4DA0:01C93811]
X-Virus-Checked: Checked by ClamAV on apache.org

--_08283b07-7471-4818-96a7-d69ff92ae52b_
Content-Type: text/plain; charset="windows-1251"
Content-Transfer-Encoding: quoted-printable

Hi=2C

Do you know if a plugin or a third party software allow to read Lucene inde=
x using sql statements ?

Regards=2C
Blured.

_________________________________________________________________
Discover the new Windows Vista
http://search.msn.com/results.aspx?q=3Dwindows+vista&mkt=3Den-US&form=3DQBR=
E=

--_08283b07-7471-4818-96a7-d69ff92ae52b_--

From java-user-return-36828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 09:16:32 2008
Return-Path: <java-user-return-36828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17206 invoked from network); 27 Oct 2008 09:16:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 09:16:31 -0000
Received: (qmail 69498 invoked by uid 500); 27 Oct 2008 09:16:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69461 invoked by uid 500); 27 Oct 2008 09:16:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69450 invoked by uid 99); 27 Oct 2008 09:16:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 02:16:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 09:15:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KuOCZ-0006ha-0C
	for java-user@lucene.apache.org; Mon, 27 Oct 2008 02:15:55 -0700
Message-ID: <20184101.post@talk.nabble.com>
Date: Mon, 27 Oct 2008 02:15:55 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Use SQL frontend to read lucene index
In-Reply-To: <BLU149-W26881C0CA3A4D958FE96A1C5240@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <BLU149-W26881C0CA3A4D958FE96A1C5240@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Blured,

if you are asking about integration of lucene and a DBMS, possible compass
is something for you
http://www.nabble.com/Lucene-vs.-Database-tp19755932p19758736.html

if you think about using hibernate: I think there already exist a lucene
connector, so you don't have to use jdbc.

if you are thinking about joins and "greater than" and all this what sql can
but lucene api can not: lucene is not a DBMS, so there can't be a sql
wrapper.

if you have a problem, you want to solve by sql: usual there is a solution
in lucene. So please ask more concrete.

Best regards
  Karsten


blured blured wrote:
> 
> Hi,
> 
> Do you know if a plugin or a third party software allow to read Lucene
> index using sql statements ?
> 
> Regards,
> Blured.
> 
> _________________________________________________________________
> Discover the new Windows Vista
> http://search.msn.com/results.aspx?q=windows+vista&mkt=en-US&form=QBRE
> 

-- 
View this message in context: http://www.nabble.com/Use-SQL-frontend-to-read-lucene-index-tp20183856p20184101.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 09:21:49 2008
Return-Path: <java-user-return-36829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18749 invoked from network); 27 Oct 2008 09:21:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 09:21:49 -0000
Received: (qmail 79520 invoked by uid 500); 27 Oct 2008 09:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79314 invoked by uid 500); 27 Oct 2008 09:21:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79303 invoked by uid 99); 27 Oct 2008 09:21:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 02:21:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of easy.lin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 09:20:35 +0000
Received: by gxk6 with SMTP id 6so2245099gxk.5
        for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 02:21:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=oUqLVn/vBLNrge8jCqInV+8drQO9+XkQY3qR5wMBrfk=;
        b=TE4oQHtNrxK5gBTVsvWyueTZ3G2kkqbyz4EEl3alsBJab8gVrxMHcUbq6DKeTD/wuI
         5ql3UBexl/HnW7Xa1bPGEcLUSFeVUJV0VFJ6r5u/7yTI9n040IayhYuw87WGq2EC4xUv
         TUCBGDk0QOex18JuTs7hmDWePrPmXs9SnZ2e8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=d2aT7XDDyY/r5WRjwX82v57yMw1SorUs4zCd7tdFJYD88X8425OSH6aTMqS6GHTaTB
         NwjYT7N4PKPBQ7JSJoT1ijCb6G8brsLJMM4KlqC6iCMcctSJoR1h6bR98AECYk34Oj9U
         3dQ14YMuj/W+Nq+xCayDOeSyW0g2EiBpoVEgU=
Received: by 10.150.220.19 with SMTP id s19mr5856600ybg.55.1225099274381;
        Mon, 27 Oct 2008 02:21:14 -0700 (PDT)
Received: by 10.150.181.20 with HTTP; Mon, 27 Oct 2008 02:21:14 -0700 (PDT)
Message-ID: <fba082560810270221q550f6f98g13177ab17ece2423@mail.gmail.com>
Date: Mon, 27 Oct 2008 10:21:14 +0100
From: "T. H. Lin" <easy.lin@gmail.com>
To: java-user@lucene.apache.org
Subject: Search on tag / category / label / keyword ...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27761_31421315.1225099274391"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27761_31421315.1225099274391
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would like to search a collection of "keyword"s with lucene.

A Document has one or many keywords. The keywords appear only once in a
document. (tf = 1)
for example:
Document_1 : ( "aa"  "bb"  "cc"         )
Document_2 : (         "bb"  "cc"         )
Document_3 : (                 "cc"  "dd" )
Document_4 : ( "aa"          "cc"  "dd" )

I have a query from more terms with different boost. The coord(int overlap,
int maxOverlap) is turn off. i.e. always return 1.0.
query = "aa^0.1 bb^0.9 xx^0.1 yy^0.1 zz^0.1"
the query may contain many terms which do not appear in a Document. i.e.
"xx" "yy" and "zz" here.

Amd I got
3 hits
Document_2 : (         "bb"  "cc"         ) : score : 0.75391763
Document_1 : ( "aa"  "bb"  "cc"         ) : score : 0.67014897
Document_4 : ( "aa"          "cc"  "dd" ) : score : 0.0670149

[Question] is...why Document_2 better than Document_1 !?
Document_1 does match two terms; "aa" and "bb".
I want to emphasize the "match" and less care the "mismatch".
How should I modify Similarity to achieve that? (Document_1 should get
higher score!)

Is there any suggestion or example to implement such "keyword collection"
searching?

For the query above,
I actually use BooleanQuery with TermQuery. What else should I take care of?

/* ************************************************** */
BooleanQuery q = new BooleanQuery(true);  // disable  coord
TermQuery tq;
{
   tq = new TermQuery(new Term(field, "aa"));
   tq.setBoost(.1f);
   q.add(tq, BooleanClause.Occur.SHOULD);
}
{
   tq = new TermQuery(new Term(field, "bb"));
   tq.setBoost(.9f);
   q.add(tq, BooleanClause.Occur.SHOULD);
}
{
    tq = new TermQuery(new Term(field, "xx"));
    tq.setBoost(.1f);
    q.add(tq, BooleanClause.Occur.SHOULD);
}
....
Hits hits = isearcher.search(q);
/* ************************************************** */

Thanks

Lin

------=_Part_27761_31421315.1225099274391--

From java-user-return-36830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 09:25:03 2008
Return-Path: <java-user-return-36830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20918 invoked from network); 27 Oct 2008 09:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 09:25:02 -0000
Received: (qmail 84673 invoked by uid 500); 27 Oct 2008 09:25:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84649 invoked by uid 500); 27 Oct 2008 09:25:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84635 invoked by uid 99); 27 Oct 2008 09:25:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 02:25:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of easy.lin@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 09:23:50 +0000
Received: by wr-out-0506.google.com with SMTP id c30so499804wra.21
        for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 02:24:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JgLRyL5t80j5kIfSFobHDb2FbSETtV0IF+kYHPdB1dM=;
        b=hbucjEzd71xK7EBJesyiqwWUusKAmOFyk3gkc2nU8qzxB18ptwnHCMtEeNjWK/syS+
         joBZuNp+VD1X5I5ujobQkMGE/7QuAMNwVjr0jLq5XhtpkYUS9pmcpKrkSHoAeyQ701Ns
         u9qPTWysDp0coADVql5V1JjHi95q+jGi/scWI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=eBwmB0ktWSiSJm8XB3p2OQIL5DA7XnqKv8ZSR09oSel8VfF4TQoVWroDes7FalcXAC
         D+1mojlhLxpeiUHir7g0cqziS7MHszRhCn86FQ2QnOi3hY81m3xQe0S5/+PwJnm5hzNx
         smImvvldHdhXKfuYrZhUcGSoNY9SYnIWcWsn4=
Received: by 10.150.206.11 with SMTP id d11mr8012739ybg.215.1225099459979;
        Mon, 27 Oct 2008 02:24:19 -0700 (PDT)
Received: by 10.150.181.20 with HTTP; Mon, 27 Oct 2008 02:24:19 -0700 (PDT)
Message-ID: <fba082560810270224x720ff523j778a0f7f1859618b@mail.gmail.com>
Date: Mon, 27 Oct 2008 10:24:19 +0100
From: "T. H. Lin" <easy.lin@gmail.com>
To: java-user@lucene.apache.org
Subject: Search on tag / category / label / keyword ...
In-Reply-To: <fba082560810270221q550f6f98g13177ab17ece2423@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27791_30913861.1225099459992"
References: <fba082560810270221q550f6f98g13177ab17ece2423@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27791_30913861.1225099459992
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would like to search a collection of "keyword"s with lucene.

A Document has one or many keywords. The keywords appear only once in a
document. (tf = 1)
for example:
Document_1 : ( "aa"  "bb"  "cc"         )
Document_2 : (         "bb"  "cc"         )
Document_3 : (                 "cc"  "dd" )
Document_4 : ( "aa"          "cc"  "dd" )

I have a query from more terms with different boost. The coord(int overlap,
int maxOverlap) is turn off. i.e. always return 1.0.
query = "aa^0.1 bb^0.9 xx^0.1 yy^0.1 zz^0.1"
the query may contain many terms which do not appear in a Document. i.e.
"xx" "yy" and "zz" here.

Amd I got
3 hits
Document_2 : (         "bb"  "cc"         ) : score : 0.75391763
Document_1 : ( "aa"  "bb"  "cc"         ) : score : 0.67014897
Document_4 : ( "aa"          "cc"  "dd" ) : score : 0.0670149

[Question] is...why Document_2 better than Document_1 !?
Document_1 does match two terms; "aa" and "bb".
I want to emphasize the "match" and less care the "mismatch".
How should I modify Similarity to achieve that? (Document_1 should get
higher score!)

Is there any suggestion or example to implement such "keyword collection"
searching?

For the query above,
I actually use BooleanQuery with TermQuery. What else should I take care of?

/* ************************************************** */
BooleanQuery q = new BooleanQuery(true);  // disable  coord
TermQuery tq;
{
   tq = new TermQuery(new Term(field, "aa"));
   tq.setBoost(.1f);
   q.add(tq, BooleanClause.Occur.SHOULD);
}
{
   tq = new TermQuery(new Term(field, "bb"));
   tq.setBoost(.9f);
   q.add(tq, BooleanClause.Occur.SHOULD);
}
{
    tq = new TermQuery(new Term(field, "xx"));
    tq.setBoost(.1f);
    q.add(tq, BooleanClause.Occur.SHOULD);
}
....
Hits hits = isearcher.search(q);
/* ************************************************** */

Thanks

Lin

------=_Part_27791_30913861.1225099459992--

From java-user-return-36831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 10:06:45 2008
Return-Path: <java-user-return-36831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56894 invoked from network); 27 Oct 2008 10:06:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 10:06:45 -0000
Received: (qmail 59247 invoked by uid 500); 27 Oct 2008 10:06:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59209 invoked by uid 500); 27 Oct 2008 10:06:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59196 invoked by uid 99); 27 Oct 2008 10:06:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 03:06:40 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blured75@hotmail.com designates 65.55.111.89 as permitted sender)
Received: from [65.55.111.89] (HELO blu0-omc2-s14.blu0.hotmail.com) (65.55.111.89)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 10:05:24 +0000
Received: from BLU149-W39 ([65.55.111.73]) by blu0-omc2-s14.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 27 Oct 2008 03:06:04 -0700
Message-ID: <BLU149-W39B98CD0B22326925C47CCC5240@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_6232428a-892a-4095-86f4-27a03b551879_"
X-Originating-IP: [90.63.45.73]
From: blured blured <blured75@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Use SQL frontend to read lucene index
Date: Mon, 27 Oct 2008 10:06:03 +0000
Importance: Normal
In-Reply-To: <20184101.post@talk.nabble.com>
References: <BLU149-W26881C0CA3A4D958FE96A1C5240@phx.gbl>
 <20184101.post@talk.nabble.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 27 Oct 2008 10:06:04.0004 (UTC) FILETIME=[9F066A40:01C9381B]
X-Virus-Checked: Checked by ClamAV on apache.org

--_6232428a-892a-4095-86f4-27a03b551879_
Content-Type: text/plain; charset="windows-1251"
Content-Transfer-Encoding: quoted-printable

Hi=2C
=20
Thanks for this response. The fact is I'd like to make some select request =
to read documents already indexed in a Lucene index in order to base a Ecli=
pse Birt dataSource and dataset on this index.
=20
Regards=2C
Blured.



> Date: Mon=2C 27 Oct 2008 02:15:55 -0700> From: karsten-lucene@fiz-technik=
.de> To: java-user@lucene.apache.org> Subject: Re: Use SQL frontend to read=
 lucene index> > > Hi Blured=2C> > if you are asking about integration of l=
ucene and a DBMS=2C possible compass> is something for you> http://www.nabb=
le.com/Lucene-vs.-Database-tp19755932p19758736.html> > if you think about u=
sing hibernate: I think there already exist a lucene> connector=2C so you d=
on't have to use jdbc.>=20
=20
=20
> if you are thinking about joins and "greater than" and all this what sql =
can> but lucene api can not: lucene is not a DBMS=2C so there can't be a sq=
l> wrapper.> > if you have a problem=2C you want to solve by sql: usual the=
re is a solution> in lucene. So please ask more concrete.> > Best regards> =
Karsten> > > blured blured wrote:> > > > Hi=2C> > > > Do you know if a plug=
in or a third party software allow to read Lucene> > index using sql statem=
ents ?> > > > Regards=2C> > Blured.> > > > ________________________________=
_________________________________> > Discover the new Windows Vista> > http=
://search.msn.com/results.aspx?q=3Dwindows+vista&mkt=3Den-US&form=3DQBRE> >=
 > > -- > View this message in context: http://www.nabble.com/Use-SQL-front=
end-to-read-lucene-index-tp20183856p20184101.html> Sent from the Lucene - J=
ava Users mailing list archive at Nabble.com.> > > ------------------------=
---------------------------------------------> To unsubscribe=2C e-mail: ja=
va-user-unsubscribe@lucene.apache.org> For additional commands=2C e-mail: j=
ava-user-help@lucene.apache.org>=20
_________________________________________________________________
Invite your mail contacts to join your friends list with Windows Live Space=
s. It's easy!
http://spaces.live.com/spacesapi.aspx?wx_action=3Dcreate&wx_url=3D/friends.=
aspx&mkt=3Den-us=

--_6232428a-892a-4095-86f4-27a03b551879_--

From java-user-return-36832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 11:06:11 2008
Return-Path: <java-user-return-36832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86258 invoked from network); 27 Oct 2008 11:06:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 11:06:11 -0000
Received: (qmail 29605 invoked by uid 500); 27 Oct 2008 11:06:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29526 invoked by uid 500); 27 Oct 2008 11:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29490 invoked by uid 99); 27 Oct 2008 11:06:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 04:06:03 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 11:04:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KuPua-00031D-Rk
	for java-user@lucene.apache.org; Mon, 27 Oct 2008 04:05:28 -0700
Message-ID: <20185604.post@talk.nabble.com>
Date: Mon, 27 Oct 2008 04:05:28 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: RE: Use SQL frontend to read lucene index
In-Reply-To: <BLU149-W39B98CD0B22326925C47CCC5240@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <BLU149-W26881C0CA3A4D958FE96A1C5240@phx.gbl> <20184101.post@talk.nabble.com> <BLU149-W39B98CD0B22326925C47CCC5240@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Blured,

sorry I don't know anything about eclipse birt.
I recommend to start a new thread "eclipse birt with lucene" where you
describe your problem again in detail.

be aware that lucene don't know numerical values. lucene only knows strings.

best regards
  Karsten


blured blured wrote:
> 
> Hi,
>  
> Thanks for this response. The fact is I'd like to make some select request
> to read documents already indexed in a Lucene index in order to base a
> Eclipse Birt dataSource and dataset on this index.
>  
> Regards,
> Blured.
> 

-- 
View this message in context: http://www.nabble.com/Use-SQL-frontend-to-read-lucene-index-tp20183856p20185604.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 12:40:42 2008
Return-Path: <java-user-return-36833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16973 invoked from network); 27 Oct 2008 12:40:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 12:40:42 -0000
Received: (qmail 34741 invoked by uid 500); 27 Oct 2008 12:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34446 invoked by uid 500); 27 Oct 2008 12:40:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34435 invoked by uid 99); 27 Oct 2008 12:40:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 05:40:39 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 12:39:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2058465rvb.5
        for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 05:39:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=84nlpRuGruIogcpbkXXMw7EhrBiVvprHTOL6+Cm+uyQ=;
        b=p1LdXhRPWAnFsiWGxGHEMQIg3hh4hWz4BUui0EKVRGlPgoyqde4dVtRr/mtjeXye3w
         QaSWuy6HRPC3DqSzUt95jXXEwNvxlcdQMWKftNwT17iWhA3GisisK2mekjP75N1vWCq3
         bjwZF1UUGPHKOjUr3z9fMUPBPpQFZpoNiMlP0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pW7tFYmOXlx7c2GnwEswXtfcGzRIeQkOPasDaSgHFtiLUTgAlvOtfOo7Jlmwf+wl9/
         ceHqqvLV1B5dpLO2/BNFKnrsV++RvZkDZIpl7YNwUxrO9e+56v7fjqRvaIEPAIW82mYn
         csJ73ZZdfsZSD+8Lhe4dhRmhQ+oCYK3DJ454Y=
Received: by 10.141.133.14 with SMTP id k14mr3223706rvn.127.1225111195500;
        Mon, 27 Oct 2008 05:39:55 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 27 Oct 2008 05:39:55 -0700 (PDT)
Message-ID: <359a92830810270539i7ab9ec78i7685e1d06758459f@mail.gmail.com>
Date: Mon, 27 Oct 2008 08:39:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple values in field
In-Reply-To: <20162152.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72340_21585507.1225111195491"
References: <20152411.post@talk.nabble.com>
	 <359a92830810240904q2864737av2239ef007452ccc2@mail.gmail.com>
	 <20156607.post@talk.nabble.com>
	 <359a92830810241303h3327f309wcf7b5f7bbaceeb4a@mail.gmail.com>
	 <20162152.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_72340_21585507.1225111195491
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

then you'll need to index another field that records that intention, or
just "know" which fields are intended to be multiple.

Best
Erick

On Sat, Oct 25, 2008 at 4:12 AM, agatone <zoran.zoki@gmail.com> wrote:

>
> Yeah but if it happens that for a certain document field1 has only one
> value
> and in that case I can't know it is intended as a multiple. in that case
> adds.size() would be == 1 and it would look as normal field.
>
> What i need is to mark that field is intended to be multiple no matter if
> it
> contains 1 value or 10.
>
> I need this because my serach results are passed as JSON to other consumers
> and i have to tell them what's the structure.
>
>
> Erick Erickson wrote:
> >
> > No, no, no...
> >
> > Say you have the following
> > Document doc = new Document()
> > doc.add("field1", "stuff", blah, blah)
> > doc.add("field1", "more stuff", blah, blah)
> > doc.add("field1", "stuff and nonsense", blah, blah)
> > IndexWriter.addDocument(doc)
> >
> >
> >
> >
> > Now, in your search code that document comes up as a hit and you have
> > Field[] adds = doc.getFields("field1");
> >
> >
> > adds.size() should == 3
> >
> > whenever adds.size() > 1, you can know it has multiple entries....
> >
> > I wasn't suggesting that you ever add empty fields, and I don't think an
> > empty
> > add would even compile.
> >
> > Best
> > Erick@LetMeConfuseYouSomeMore.com
> >
> >
> > On Fri, Oct 24, 2008 at 3:38 PM, agatone <zoran.zoki@gmail.com> wrote:
> >
> >>
> >> That sounds like abuse of Document.add()  :)
> >> Ok, so adding first one extra "empty" value for every field i wish to
> >> mark
> >> as multi.
> >> Well if that ain't so wrong, I'll use that :)
> >>
> >> Ty
> >>
> >>
> >>
> >>
> >> Erick Erickson wrote:
> >> >
> >> > I *think* what you're looking for is Document.getFields(String field),
> >> > which returns a list corresponding to every Document.add() you did
> >> > originally.
> >> >
> >> > Alternatively, you could always index a companion field that had the
> >> > count of times you called Document.add() on a particular field.....
> >> >
> >> > Best
> >> > Erick
> >> >
> >> > On Fri, Oct 24, 2008 at 11:36 AM, agatone <zoran.zoki@gmail.com>
> wrote:
> >> >
> >> >>
> >> >> Hello,
> >> >>
> >> >> I know I can store multiple values under same field and I can later
> >> >> retrieve
> >> >> all those values. But the problem I have is a bit structure related.
> >> When
> >> >> I'm reading those fields (that usually have more than one value) it
> >> >> happens
> >> >> that it has only one value and I cannot know if that field is meant
> to
> >> >> have
> >> >> multiple values.
> >> >>
> >> >> Is there a way (at indexing (creating fields)) to set that certain
> >> field
> >> >> is
> >> >> meant for multiple values, so that later when I'm searching and I get
> >> >> document/s hit, I can get from each field in it how to represent the
> >> hit.
> >> >>
> >> >> Thank you.
> >> >>
> >> >> --
> >> >> View this message in context:
> >> >>
> >> http://www.nabble.com/Multiple-values-in-field-tp20152411p20152411.html
> >> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> >>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >>
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Multiple-values-in-field-tp20152411p20156607.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Multiple-values-in-field-tp20152411p20162152.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_72340_21585507.1225111195491--

From java-user-return-36834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 12:45:30 2008
Return-Path: <java-user-return-36834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18151 invoked from network); 27 Oct 2008 12:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 12:45:30 -0000
Received: (qmail 42399 invoked by uid 500); 27 Oct 2008 12:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42368 invoked by uid 500); 27 Oct 2008 12:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42357 invoked by uid 99); 27 Oct 2008 12:45:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 05:45:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blured75@hotmail.com designates 65.55.111.76 as permitted sender)
Received: from [65.55.111.76] (HELO blu0-omc2-s1.blu0.hotmail.com) (65.55.111.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 12:44:12 +0000
Received: from BLU149-W29 ([65.55.111.71]) by blu0-omc2-s1.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 27 Oct 2008 05:44:51 -0700
Message-ID: <BLU149-W298BCF08260A7A9CA232D3C5240@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_191a1934-8909-4576-b808-3c96c33fa1fb_"
X-Originating-IP: [90.63.45.73]
From: blured blured <blured75@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: eclipse birt with lucene
Date: Mon, 27 Oct 2008 12:44:51 +0000
Importance: Normal
In-Reply-To: <20185604.post@talk.nabble.com>
References: <BLU149-W26881C0CA3A4D958FE96A1C5240@phx.gbl>
 <20184101.post@talk.nabble.com> <BLU149-W39B98CD0B22326925C47CCC5240@phx.gbl>
 <20185604.post@talk.nabble.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 27 Oct 2008 12:44:51.0862 (UTC) FILETIME=[CE122B60:01C93831]
X-Virus-Checked: Checked by ClamAV on apache.org

--_191a1934-8909-4576-b808-3c96c33fa1fb_
Content-Type: text/plain; charset="windows-1251"
Content-Transfer-Encoding: quoted-printable

Hi=2C

I'd like to use Eclipse Birt in order to make reports based on Lucene index=
 content as if I use a database. The idea is to use SQL statement to read t=
his index with a JDBC wrapper like the one existing for LDAP (http://www.op=
enldap.org/jdbcldap/). Perhaps somebody already have done a custom ODA data=
source or a scripted datasource to read such index ?

Regards=2C
Blured.

_________________________________________________________________
News=2C entertainment and everything you care about at Live.com. Get it now=
!
http://www.live.com/getstarted.aspx=

--_191a1934-8909-4576-b808-3c96c33fa1fb_--

From java-user-return-36835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 12:48:02 2008
Return-Path: <java-user-return-36835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18888 invoked from network); 27 Oct 2008 12:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 12:48:02 -0000
Received: (qmail 50658 invoked by uid 500); 27 Oct 2008 12:47:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50632 invoked by uid 500); 27 Oct 2008 12:47:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50621 invoked by uid 99); 27 Oct 2008 12:47:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 05:47:59 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 12:46:46 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2061203rvb.5
        for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 05:47:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=1QdgXRtIM+pl47Y3epuOPC2ddty6o6nbG1lm24OaavM=;
        b=Qcz+ZUV6jx0nB6T4KK5RflB3gWVmTiTdVZuztfWywAzrbqYk4eqaEqw1AE7A3Yvzxb
         fm2O9/3Np85Su74JM6IoGGPkC3eUWeGhcoA2B2MUzr8rXFfn7VuGPAt4RfO/Nmx1BjCI
         LpNlMtPyF44tVhMJFrF+H0WlBsjNOG82L1Gu8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ssWwDbRBCfPQUTK8CGOi/fFCXz5hCpqpGRyRCigLTNbf3pJ4stW91+6mzPHEQiMUeb
         kqR3ciJNvOSqnbg/fk0zbOAmJT54EskEEFJOoSq5/zHlndDWGeYC/Me+AEmcUlf3M0NG
         1RPH9nQaMRu+JBbqeEBjxbrtT3Orkill9GOb8=
Received: by 10.141.128.9 with SMTP id f9mr2304597rvn.2.1225111645659;
        Mon, 27 Oct 2008 05:47:25 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 27 Oct 2008 05:47:25 -0700 (PDT)
Message-ID: <359a92830810270547k6b83f73i1820be29b6caa967@mail.gmail.com>
Date: Mon, 27 Oct 2008 08:47:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Memory problem dealing with indexsearcher and topdocs
In-Reply-To: <20168138.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72461_9488286.1225111645624"
References: <20168138.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_72461_9488286.1225111645624
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are you opening/closing your searcher and writer for each document?
If so, it sounds like you're not closing all of them appropriately and
that would be the cause of your memory increase. But you shouldn't
have to do that anyway. Why not just use the same IndexReader to
search and delete all your documents? I'm pretty sure that you can
search/delete on the same reader without any problems....

If this is way off base, could you post some code snippets where you
search/delete? That would help a lot.

Best
Erick

On Sat, Oct 25, 2008 at 5:49 PM, Marc Sturlese <marc.sturlese@gmail.com>wrote:

>
> Hey there,
> I am having some memory trouble with my Lucene app. I need to get the info
> and delete about 1000 docs every time I execute the app. I get the IDs of
> the documents to delete from a database and for all single ID I get the
> data
> from the indexed doc using an index searcher and topdocs (searching by the
> ID I previously got). Once I get the info I close the index searcher and
> delete the doc using indexwriter (indexwriter.deletedocuments(term)). I do
> this fore every document I need to delete. The problem is than the app
> starts increasing memory in use until 778Mb... and doing similar stuff like
> adding documents from DB to index it stands in 150 as maximum.
> I think the problem happen when i get the documents. I tryed to use the
> same
> indexsearcher to get all the docs but nothithng changed. I try also to put
> topdocs to null and the query and queryparse I use to get the doc to null
> aswell but nothing changes.
> Has someone experienced this problem?.
> I am using lucene 2.4 but with 2.3 was the same
> Sorry for my english and thanks in advanced.
>
> --
> View this message in context:
> http://www.nabble.com/Memory-problem-dealing-with-indexsearcher-and-topdocs-tp20168138p20168138.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_72461_9488286.1225111645624--

From java-user-return-36836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 12:55:29 2008
Return-Path: <java-user-return-36836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20651 invoked from network); 27 Oct 2008 12:55:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 12:55:28 -0000
Received: (qmail 62028 invoked by uid 500); 27 Oct 2008 12:55:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61670 invoked by uid 500); 27 Oct 2008 12:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61659 invoked by uid 99); 27 Oct 2008 12:55:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 05:55:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 12:54:14 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2063972rvb.5
        for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 05:54:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RTD1nYok8AVLwlftIZ0OVVSW3hZEU/RMOa4mrz5q86I=;
        b=Vc04r3sVfNaz1YmVq8IndmA2sG9lBYQxGkmiZbs/GAof9gajoVyTLUY/z2FrU0Q724
         O3YCDFjfy3vW7hXfknGrRgkQ2hGgP6nUsKn9wE7hSKqxWYRUHjQo8DDeZ7m/4LDgY/hY
         w4WPBUemjQ1T1Zg5H6CpveHUp7k8WdUc8tnYk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=tV0h8v1GUsYtybkpOgInmk0tlAfgruNlOCdGl56NeTQt7N+a+E+tEZsIIXAbLp3yCy
         5SGvMNSi8KsCO57L4GKaKiz5yp56kGgaZiOHkXtmIGnHkCFQ9u8cdeZfqY0fA+kbN5VY
         DtexFu7R3tgMuZHZN03MPN8JgtOpjS2i4k9BI=
Received: by 10.141.53.4 with SMTP id f4mr3237146rvk.32.1225112094008;
        Mon, 27 Oct 2008 05:54:54 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 27 Oct 2008 05:54:53 -0700 (PDT)
Message-ID: <359a92830810270554v36f6f0eflbade22a6b860c6a8@mail.gmail.com>
Date: Mon, 27 Oct 2008 08:54:53 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: example on RegexQuery
In-Reply-To: <ABF971E134098D40A9F82A75E3D2B46B023D4C42@TKWEXMB22.msad.ms.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72589_27864608.1225112094007"
References: <ABF971E134098D40A9F82A75E3D2B46B023D4C35@TKWEXMB22.msad.ms.com>
	 <9294E20AED46934EA459020706463F94EF4046@SUEXCL-02.ad.syr.edu>
	 <ABF971E134098D40A9F82A75E3D2B46B023D4C42@TKWEXMB22.msad.ms.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_72589_27864608.1225112094007
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

query.toString() is your friend, as is Luke <G>. Two things are
often the problem here.
1> your index doesn't contain what you think it does. Luke helps a LOT here.
2> your regex isn't doing what you think, toString() whould help here

Best
Erick

On Sun, Oct 26, 2008 at 11:36 PM, Agrawal, Aashish (IT) <
Aashish.Agrawal@morganstanley.com> wrote:

> Hi Steven
>
> thanks for pointing to the example of RegexQuery.
>
> I have a simple code snippet which is not working, not sure if I am
> using it incorrectly.
> ----
>      RegexQuery query = new RegexQuery (new Term (field, line));
>      query.setRegexImplementation(new JavaUtilRegexCapabilities());
>      System.out.println("Searching for: " + query.toString(field));
>      Hits hits = searcher.search(query);
> --------
>
> I am searching a sample file like below -
> ---
> agrawal fdfdf
> fsdfafasf 3495549584
> fsfsfs fsffsf r4e3fdere j4343
> ---------
>
> when I search this file with pattern -
> .*4343*
> .*[a-z]4343
> j4343
> or even search for   3495549584
>
> all are failing with result no match found..
>
> could you point me what is wrong here ?? Also if I try to search *4343*,
> it throws exception,, shouldn't * at start be  allowed with regexQuery ?
>
>
> thanks
> Aashish Agrawal
>
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: Saturday, October 25, 2008 12:31 AM
> To: java-user@lucene.apache.org
> Subject: RE: example on RegexQuery
>
> Hi Aashish,
>
> On 10/24/2008 at 3:35 AM, Agrawal, Aashish (IT) wrote:
> > I want to use lucene for a simple search engine  with regex support .
> > I tried using RegexQuery.. but seems I am missing something.
> > Is there any working exmaple on using RegexQuery ??
>
> How about TestRegexQuery?:
>
> <http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_4_0/contrib/rege
> x/src/test/org/apache/lucene/search/regex/TestRegexQuery.java?view=marku<http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_4_0/contrib/regex/src/test/org/apache/lucene/search/regex/TestRegexQuery.java?view=marku>
> p>
>
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> --------------------------------------------------------
>
> NOTICE: If received in error, please destroy and notify sender. Sender does
> not intend to waive confidentiality or privilege. Use of this email is
> prohibited when received in error.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_72589_27864608.1225112094007--

From java-user-return-36837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 12:57:24 2008
Return-Path: <java-user-return-36837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21327 invoked from network); 27 Oct 2008 12:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 12:57:24 -0000
Received: (qmail 67307 invoked by uid 500); 27 Oct 2008 12:57:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67280 invoked by uid 500); 27 Oct 2008 12:57:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67269 invoked by uid 99); 27 Oct 2008 12:57:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 05:57:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 12:56:10 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2064655rvb.5
        for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 05:56:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=rZSEKuG7pxzqVyR01aYAK3J4aB3AcRJT1FvTynj05TY=;
        b=TjxkH8Yo1SybfTgz4WX8vr88UQAkk0mG82+SbcRLWCQ8uqcLkroZR9f5eLWSQQSUUD
         dsA9C0wDZ6c9i3mjgR9C/5/PDwH1r6IWVrKWmYpmhs4lXLLgounpr7PFOu6v6xetFsSC
         rucEn6CDTvusX8FjznDW1r9z3jy5+XERsKECI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lvi7zRpUqUvB66N8fyclIeTGvCGk4wbeWwuQCGnspHqlowt9pH37t8FzD04t8dWnnZ
         FC9QZJKmvzccM2WKifLcX+SrVeOi4stxsoxFSGgBoowPb8wtdO8oIbgCX1wTE4hShGF2
         Balsmd8QaShWSzbKTN3QWR6LoaM9/yKgoTD6Q=
Received: by 10.141.34.12 with SMTP id m12mr3242088rvj.26.1225112210692;
        Mon, 27 Oct 2008 05:56:50 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 27 Oct 2008 05:56:50 -0700 (PDT)
Message-ID: <359a92830810270556n365dee8fjb83d13ba9262e2@mail.gmail.com>
Date: Mon, 27 Oct 2008 08:56:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: API to get the matched lines in a file?
In-Reply-To: <ABF971E134098D40A9F82A75E3D2B46B023D4C4C@TKWEXMB22.msad.ms.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72620_28293725.1225112210684"
References: <ABF971E134098D40A9F82A75E3D2B46B023D4C4C@TKWEXMB22.msad.ms.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_72620_28293725.1225112210684
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No, you have to build that in yourself.... It can be a bit
tricky defining how you indicate that lines are in a file, but
this has been discussed extensively so searching the mail
archive should get you some pointers.

Best
Erick

On Mon, Oct 27, 2008 at 2:45 AM, Agrawal, Aashish (IT) <
Aashish.Agrawal@morganstanley.com> wrote:

> Is there any API in lucene which gives you matched lines or offiset in a
> file to first instance of matched pattern?
>
> thanks,
> Aashish Agrawal
> --------------------------------------------------------
>
> NOTICE: If received in error, please destroy and notify sender. Sender does
> not intend to waive confidentiality or privilege. Use of this email is
> prohibited when received in error.
>

------=_Part_72620_28293725.1225112210684--

From java-user-return-36838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 14:22:27 2008
Return-Path: <java-user-return-36838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61867 invoked from network); 27 Oct 2008 14:22:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 14:22:26 -0000
Received: (qmail 5314 invoked by uid 500); 27 Oct 2008 14:22:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5146 invoked by uid 500); 27 Oct 2008 14:22:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5135 invoked by uid 99); 27 Oct 2008 14:22:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 07:22:24 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.241.37.240] (HELO black.choicepoint.com) (66.241.37.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 14:21:12 +0000
Received: from ([172.25.227.133])
	by black.choicepoint.com with ESMTP  id KP-TRRG1.210509933;
	Mon, 27 Oct 2008 10:20:15 -0400
Received: from alawpmsg010.na.choicepoint.net ([172.25.227.129]) by alawpmsg013.na.choicepoint.net with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 27 Oct 2008 10:20:15 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: Lucene 2.2.0 Strange QueryParser behavior
Date: Mon, 27 Oct 2008 10:20:15 -0400
Message-ID: <14EC4CE01577D54AA7B5B5F201352DF0054EC956@alawpmsg010.na.choicepoint.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene 2.2.0 Strange QueryParser behavior
Thread-Index: Ack4Pxo8jIQXpgrMTpud9XNnC5tksA==
From: "Bob Rhodes" <Bob.Rhodes@choicepoint.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Oct 2008 14:20:15.0720 (UTC) FILETIME=[21C19680:01C9383F]
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9383F.21B69C68"
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9383F.21B69C68
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,=0D=0AI'm hoping this is an easy question=2E I have a Lucene index t=
hat contains=0D=0Anames and states, and I'm having an issue when the state =
is Oregon,=0D=0Aspecifically OR=2E Below is an example of the query I pass =
in and the=0D=0Aquery string that QueryParser builds below it=2E=0D=0A =0D=
=0AThis works for every state except OR=2E=0D=0A =0D=0AString I build: last=
name:"rhodes" AND state:"AK"=0D=0AQueryParser output: +lastname:rhodes +sta=
te:ak=0D=0A =0D=0AThis is what OR look like:=0D=0A =0D=0Alastname:"Rhodes" =
AND state:"OR"=0D=0Alastname:rhodes=0D=0A =0D=0AAs you can see the state:"O=
R" is cleaned off by QueryParser=2E Is there=0D=0Aany way around this?=0D=
=0A =0D=0AThanks for the time=2E=0D=0A =0D=0ABob=0D=0A=0D=0A=0D=0A=0D=0A---=
--------------------------------------=0D=0AThe information contained in th=
is e-mail message is intended only=0Afor the personal and confidential use =
of the recipient(s) named=0Aabove=2E This message may be an attorney-client=
 communication and/or=0Awork product and as such is privileged and confiden=
tial=2E If the=0Areader of this message is not the intended recipient or an=
 agent=0Aresponsible for delivering it to the intended recipient, you are=
=0Ahereby notified that you have received this document in error and=0Athat=
 any review, dissemination, distribution, or copying of this=0Amessage is s=
trictly prohibited=2E If you have received this=0Acommunication in error, p=
lease notify us immediately by e-mail, and=0Adelete the original message=2E
------_=_NextPart_001_01C9383F.21B69C68--


From java-user-return-36839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 14:32:49 2008
Return-Path: <java-user-return-36839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68868 invoked from network); 27 Oct 2008 14:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 14:32:49 -0000
Received: (qmail 28119 invoked by uid 500); 27 Oct 2008 14:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27801 invoked by uid 500); 27 Oct 2008 14:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27790 invoked by uid 99); 27 Oct 2008 14:32:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 07:32:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of itsadok@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 14:31:34 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2296113wfc.20
        for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 07:32:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=BmgmqgTsRd0x1u9nAvhRTHk57J8YtU04lphL9pEoR3U=;
        b=r/+0+DzIYbSYxCoe8ydSA4BA/DSuxcyXJY1d92lQgVmSA5PTJbl2kfe49RtYCdwZtM
         iogvrASMV573nnj6uIif1WPe4tKoqOFXC7qzYkIb1KySBUfo570g+0I0vF7PZED1JPWi
         Lj29bPPACQ8ELmQ0R9ArbwxCoe09LqckEMFqM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BALQ/wssW3M4uzJwaPs2TP4LWHEViaxY0C8qDTp13V4xmWrpchbFTf8BV4lFU1Hhsz
         UIvyP6GR/pUIvd+jYzog+nNOhar44PvPyOOe6kti3iEoKxh864yJgIPSUrZZdrV8NAWT
         azDyrObawBJ+aKOz5Z5xFX3m5di8KFAsX4sT0=
Received: by 10.114.198.1 with SMTP id v1mr5281992waf.64.1225117922019;
        Mon, 27 Oct 2008 07:32:02 -0700 (PDT)
Received: by 10.114.39.3 with HTTP; Mon, 27 Oct 2008 07:32:01 -0700 (PDT)
Message-ID: <b4615b180810270732w6f34999peae76aaec95f8fe0@mail.gmail.com>
Date: Mon, 27 Oct 2008 16:32:01 +0200
From: "Israel Tsadok" <itsadok@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search on tag / category / label / keyword ...
In-Reply-To: <fba082560810270221q550f6f98g13177ab17ece2423@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18343_14480619.1225117922025"
References: <fba082560810270221q550f6f98g13177ab17ece2423@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18343_14480619.1225117922025
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Mon, Oct 27, 2008 at 11:21 AM, T. H. Lin <easy.lin@gmail.com> wrote:

> I would like to search a collection of "keyword"s with lucene.
>
> A Document has one or many keywords. The keywords appear only once in a
> document. (tf = 1)
> for example:
> Document_1 : ( "aa"  "bb"  "cc"         )
> Document_2 : (         "bb"  "cc"         )
> Document_3 : (                 "cc"  "dd" )
> Document_4 : ( "aa"          "cc"  "dd" )
>
> I have a query from more terms with different boost. The coord(int overlap,
> int maxOverlap) is turn off. i.e. always return 1.0.
> query = "aa^0.1 bb^0.9 xx^0.1 yy^0.1 zz^0.1"
> the query may contain many terms which do not appear in a Document. i.e.
> "xx" "yy" and "zz" here.
>
> Amd I got
> 3 hits
> Document_2 : (         "bb"  "cc"         ) : score : 0.75391763
> Document_1 : ( "aa"  "bb"  "cc"         ) : score : 0.67014897
> Document_4 : ( "aa"          "cc"  "dd" ) : score : 0.0670149
>
> [Question] is...why Document_2 better than Document_1 !?
> Document_1 does match two terms; "aa" and "bb".
> I want to emphasize the "match" and less care the "mismatch".
> How should I modify Similarity to achieve that? (Document_1 should get
> higher score!)
>

First, you should use Searcher.explain() when you have questions about the
scoring. You'll get a lot of hints as to why a document gets a better score
than another.

In your case, it seems that document2 is shorter, and therefore
the occurrence of "bb" in it is given a greater weight. I've had a similar
problem in the past, where short documents would get a huge advantage in the
search results.

We solved it using a custom similarity at index time:

IndexWriter writer = new IndexWriter( ...
writer.setSimilarity(new DefaultSimilarity() {
    public float lengthNorm(String fieldName, int numTerms) {
        numTerms = numTerms < 15 ? 15 : numTerms;
        return super.lengthNorm(fieldName, numTerms);
    }
});

The code above eliminates the advantage of documents with less than 15
terms. In your case, you probably want to replace 15 with 1000 (or as high
as you need).

Note that I'm not sure if this is the preferred method to achieve what
you're looking for, but it works for me.

Israel Tsadok

------=_Part_18343_14480619.1225117922025--

From java-user-return-36840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 14:43:36 2008
Return-Path: <java-user-return-36840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72041 invoked from network); 27 Oct 2008 14:43:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 14:43:36 -0000
Received: (qmail 45744 invoked by uid 500); 27 Oct 2008 14:43:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45719 invoked by uid 500); 27 Oct 2008 14:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45708 invoked by uid 99); 27 Oct 2008 14:43:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 07:43:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 14:42:22 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2105701rvb.5
        for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 07:43:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=E0m5bWMHxqWtWNKGIEn5bGNBTM3yv6leVaOapFzFwQ0=;
        b=tT+Can6Nr52BZyswyMr0FRxp3GKTLC4OqS2ZX8z9l8fvYMOAyMulnH8/2hzZHAybHM
         rqM5K2CIVhG8bFtYiw1co2EHi5OxnmSq2SkkR0kGo5hAtkyU/0rsYBdErYdAsDg2jqFh
         zt2Z6IB2mI2+jTaT8hzv8N6i/xJeN4JcpyJso=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=sfP5OlFf1xAFbGOsQY1c5HO/VYmA+AxQ2s9rMpIK7dUJ12hvZFD6koOP7Ctx4OZuOz
         DHcIJ0sYPITjF1EqgRKaaUeddZdKPUyOJ5zNAoitYQSW0R39ShLBhfEDR5J1l6pS3SiD
         dKqo82USLb4FIWC0EtmFhxF25FdNAFHw/ss80=
Received: by 10.141.162.5 with SMTP id p5mr3297617rvo.113.1225118582590;
        Mon, 27 Oct 2008 07:43:02 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 27 Oct 2008 07:43:02 -0700 (PDT)
Message-ID: <359a92830810270743l3bd0bc0bmd2d3cb1725409af7@mail.gmail.com>
Date: Mon, 27 Oct 2008 10:43:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2.0 Strange QueryParser behavior
In-Reply-To: <14EC4CE01577D54AA7B5B5F201352DF0054EC956@alawpmsg010.na.choicepoint.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73428_31488533.1225118582568"
References: <14EC4CE01577D54AA7B5B5F201352DF0054EC956@alawpmsg010.na.choicepoint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73428_31488533.1225118582568
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OR is both a stopword and a reserved word.... In this
case you *probably* are getting hit by it being a stopword.
Changing your analyzer to not use stopwords is probably
the way to go, but beware that you should probably use the
same analyzer at index AND query time.

If you're using StandardAnalyzer, you're getting your case
folded, so if you change analyzers be aware of that.

Get a copy of Luke to see the effects of various analyzers on
queries and to examine the actual contents of your index, it's
invaluable.

PerFieldAnalyzerWrapper may be your friend <G>. It would
allow you to use a different analyzer for your "state" field than
others, which may be very useful.

Best
Erick

On Mon, Oct 27, 2008 at 10:20 AM, Bob Rhodes <Bob.Rhodes@choicepoint.com>wrote:

> Hi all,
> I'm hoping this is an easy question. I have a Lucene index that contains
> names and states, and I'm having an issue when the state is Oregon,
> specifically OR. Below is an example of the query I pass in and the
> query string that QueryParser builds below it.
>
> This works for every state except OR.
>
> String I build: lastname:"rhodes" AND state:"AK"
> QueryParser output: +lastname:rhodes +state:ak
>
> This is what OR look like:
>
> lastname:"Rhodes" AND state:"OR"
> lastname:rhodes
>
> As you can see the state:"OR" is cleaned off by QueryParser. Is there
> any way around this?
>
> Thanks for the time.
>
> Bob
>
>
>
> -----------------------------------------
> The information contained in this e-mail message is intended only
> for the personal and confidential use of the recipient(s) named
> above. This message may be an attorney-client communication and/or
> work product and as such is privileged and confidential. If the
> reader of this message is not the intended recipient or an agent
> responsible for delivering it to the intended recipient, you are
> hereby notified that you have received this document in error and
> that any review, dissemination, distribution, or copying of this
> message is strictly prohibited. If you have received this
> communication in error, please notify us immediately by e-mail, and
> delete the original message.

------=_Part_73428_31488533.1225118582568--

From java-user-return-36841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 14:44:11 2008
Return-Path: <java-user-return-36841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72202 invoked from network); 27 Oct 2008 14:44:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 14:44:11 -0000
Received: (qmail 48937 invoked by uid 500); 27 Oct 2008 14:44:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48901 invoked by uid 500); 27 Oct 2008 14:44:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48865 invoked by uid 99); 27 Oct 2008 14:44:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 07:44:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 14:42:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KuTJb-0004f9-1H
	for java-user@lucene.apache.org; Mon, 27 Oct 2008 07:43:31 -0700
Message-ID: <20189082.post@talk.nabble.com>
Date: Mon, 27 Oct 2008 07:43:31 -0700 (PDT)
From: JulieSoko <julie.sokolowski@saic.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Input/Output error
In-Reply-To: <EDCE3AA7-F4E1-4A37-9A8E-80C14A153874@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: julie.sokolowski@saic.com
References: <20156805.post@talk.nabble.com> <A6FD517F-CCDB-414A-BFFE-46E89A596846@mikemccandless.com> <20169473.post@talk.nabble.com> <EDCE3AA7-F4E1-4A37-9A8E-80C14A153874@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I was able to upgrade to the 2.3.2 version of Lucene... We do not have the
2.4.0 version in house ...
I am trying to facilitate downloading that version.  I did notice that the
incRef and decRef methods for the IndexReader are protected in both the
2.3.1 and 2.3.2 versions... How did you get around this or are you using
lucene 2.4.0? =20
Thanks!


Michael McCandless-2 wrote:
>=20
>=20
> That would definitely cause problems for any searches still in flight =20
> on the old IndexReader (though I'm not certain that generic Input/=20
> output error IOException is what would be thrown).
>=20
> You can use the IndexReader's incRef/decRef methods to ensure the =20
> reader stays open for all in flight queries.  Call incRef when the =20
> query starts in a synchronized block that ensures the reader isn't =20
> being closed at the same time, and then decRef (in a finally clause) =20
> when the query is completely finished.  Then you can call close() on =20
> the old reader, and it will in fact remain open until all in flight =20
> queries have decRef'd it.
>=20
> Mike
>=20
> JulieSoko wrote:
>=20
>>
>> I have been doing some reading and think something that I am doing =20
>> icould be
>> a problem.  For each search of an index,  I first check to see if the
>> IndexReader is current and  if not reopen it... I think I should not =20
>> reopen
>> the IndexReader until I make sure that there are no other queries =20
>> running
>> using this searcher/reader.  Could this be causing my Input/Output =20
>> error?
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> What OS/filesystem are you using?
>>>
>>> The code looks fine to me.  2 or more searches running at the same
>>> time on the same index should be harmless; this happens in Lucene all
>>> the time in normal applications.
>>>
>>> Are you sure you're re-using already opened Searchers, and not
>>> accidentally opening a new searcher per user's search?
>>>
>>> Is it possible you are running out of file descriptors? That
>>> IOException (generic Input/output error) means there is a low level =20
>>> IO
>>> issue.
>>>
>>> Mike
>>>
>>> JulieSoko wrote:
>>>
>>>>
>>>> Hello All,
>>>> First of all I=E2=80=99m new to Lucene, and have written code using it=
 to
>>>> search
>>>> over 1 to man indexes, using a user defined query.
>>>> I don't have any code on this system so have to type everything in
>>>> here...
>>>> I have the following design but am getting
>>>> An Input / Output error exception which I have typed in a part of it
>>>> below.
>>>> My question is this?  Do I have  glaring flaw
>>>> In this design?  I am reusing the IndexSearchers/IndexReaders and =20
>>>> not
>>>> closing them.   The input/output error arises when 2 or
>>>> More searches occur at the same time over some of the same indexes.
>>>> Can you
>>>> give me some direction where I should look
>>>> For the solution to the exception?
>>>>
>>>> Here is an explanation of my
>>>>   Data:
>>>>       Up to 60 different indexes used at a time
>>>>        1 directory per 1 day of data
>>>>       Millions of documents per day
>>>>       Data  is received and indexes  merged on a continual bases -
>>>> whole
>>>> separate process
>>>>
>>>>   Index contains
>>>>           value: content    eventType: type of data   eventTime:
>>>> time data
>>>> collected
>>>>
>>>>   1 to many users can create individual queries containing 1 or
>>>> more of
>>>> the fields and values
>>>>   searching over 1 to many indexes
>>>>
>>>>   Design:
>>>>        Utilize the IndexAccessor classes  to cache
>>>> IndexSearcher/IndexReaders i.e. they are made one per index  and =20
>>>> never
>>>> closed.
>>>>
>>>>
>>>>        Use a ParallelMultiSearcher  - create one per request using
>>>> 1 to
>>>> many of the indexes
>>>>
>>>>        try {
>>>>        QueryParser parser =3D new QueryParser("value", new
>>>> StandardAnalyzer(0);
>>>>        parser.setDefaultOperator(QueryParser.AND_OPERATOR);
>>>>        Query query =3D parser.parse(queryString);
>>>>
>>>>       TopDocCollector col =3D new TopDocCollector(MAX_NUMBER_HITS);
>>>>       multiSearcher.search(query, new
>>>> RangeFilter("eventTime",startTime,endTime,true,true),col);
>>>>       int numHits =3D col.getTotalHits(0);
>>>>       TopDocs docs =3D col.topDocs();
>>>>
>>>>       if (numHits > 0))
>>>>         for (int i=3D0; i< numHits && i< MAX_NUMBER_HITS; i++)[
>>>>           Document doc =3D multiSearcher.doc(docs.scoreDocs[i].doc);
>>>>             ....
>>>>         }
>>>>
>>>>    }catch(Exception e  ){
>>>>        e.printStackTrace();
>>>> } finally{
>>>>     //IndexSearchers are not closed since shared by many users
>>>> }
>>>>
>>>>
>>>>
>>>>
>>>> When the second user accesses directories used by the first query
>>>> then I get
>>>> the following error:
>>>>
>>>> java.io.IOException: Input/output error
>>>> java.io.RandomAccessFile.readBytes(Native Method)
>>>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>>>> at
>>>> org.apache.lucene.store.FSDirecotry
>>>> $FSIndexInput.readInternal(FSDirectory.java:550)
>>>> at
>>>> org
>>>> .apache
>>>> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:
>>>> 131)
>>>> at
>>>> org.apache.lucene.index.CompoundFileReader
>>>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>>>> at
>>>> org
>>>> .apache
>>>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>>>> 152)
>>>> at
>>>> org
>>>> .apache
>>>> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>>>> 152)
>>>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>>>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>>>> at =20
>>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:
>>>> 123)
>>>> at
>>>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:
>>>> 154)
>>>> at
>>>> org
>>>> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:
>>>> 223)
>>>> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:
>>>> 217)
>>>> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:
>>>> 678)
>>>> at =20
>>>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:
>>>> 87)
>>>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>>>> at
>>>> org
>>>> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:
>>>> 311)
>>>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>>>
>>>> Thanks!
>>>>
>>>> --=20
>>>> View this message in context:
>>>> http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20156805.ht=
ml
>>>> Sent from the Lucene - Java Users mailing list archive at =20
>>>> Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --=20
>> View this message in context:
>> http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20169473.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Lucene-Input-Output-err=
or-tp20156805p20189082.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 15:01:25 2008
Return-Path: <java-user-return-36842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76914 invoked from network); 27 Oct 2008 15:01:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 15:01:25 -0000
Received: (qmail 74516 invoked by uid 500); 27 Oct 2008 15:01:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74486 invoked by uid 500); 27 Oct 2008 15:01:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74475 invoked by uid 99); 27 Oct 2008 15:01:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 08:01:22 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 15:00:06 +0000
Received: by gxk6 with SMTP id 6so2643068gxk.5
        for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 08:00:41 -0700 (PDT)
Received: by 10.150.225.10 with SMTP id x10mr1474699ybg.216.1225119641154;
        Mon, 27 Oct 2008 08:00:41 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id m55sm21036rnd.19.2008.10.27.08.00.39
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 27 Oct 2008 08:00:40 -0700 (PDT)
Message-Id: <ED20264F-E5A0-4051-ACA0-778EA94AA39A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20189082.post@talk.nabble.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene Input/Output error
Date: Mon, 27 Oct 2008 11:00:38 -0400
References: <20156805.post@talk.nabble.com> <A6FD517F-CCDB-414A-BFFE-46E89A596846@mikemccandless.com> <20169473.post@talk.nabble.com> <EDCE3AA7-F4E1-4A37-9A8E-80C14A153874@mikemccandless.com> <20189082.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry, those methods do indeed require 2.4.0 -- I forgot it was only =20
with 2.4.0 that we made them public.

If for some reason you can't upgrade, then you can always put your own =20=

incRef/decRef wrapper around the IndexReader.

Mike

JulieSoko wrote:

>
> I was able to upgrade to the 2.3.2 version of Lucene... We do not =20
> have the
> 2.4.0 version in house ...
> I am trying to facilitate downloading that version.  I did notice =20
> that the
> incRef and decRef methods for the IndexReader are protected in both =20=

> the
> 2.3.1 and 2.3.2 versions... How did you get around this or are you =20
> using
> lucene 2.4.0?
> Thanks!
>
>
> Michael McCandless-2 wrote:
>>
>>
>> That would definitely cause problems for any searches still in flight
>> on the old IndexReader (though I'm not certain that generic Input/
>> output error IOException is what would be thrown).
>>
>> You can use the IndexReader's incRef/decRef methods to ensure the
>> reader stays open for all in flight queries.  Call incRef when the
>> query starts in a synchronized block that ensures the reader isn't
>> being closed at the same time, and then decRef (in a finally clause)
>> when the query is completely finished.  Then you can call close() on
>> the old reader, and it will in fact remain open until all in flight
>> queries have decRef'd it.
>>
>> Mike
>>
>> JulieSoko wrote:
>>
>>>
>>> I have been doing some reading and think something that I am doing
>>> icould be
>>> a problem.  For each search of an index,  I first check to see if =20=

>>> the
>>> IndexReader is current and  if not reopen it... I think I should not
>>> reopen
>>> the IndexReader until I make sure that there are no other queries
>>> running
>>> using this searcher/reader.  Could this be causing my Input/Output
>>> error?
>>>
>>>
>>> Michael McCandless-2 wrote:
>>>>
>>>>
>>>> What OS/filesystem are you using?
>>>>
>>>> The code looks fine to me.  2 or more searches running at the same
>>>> time on the same index should be harmless; this happens in Lucene =20=

>>>> all
>>>> the time in normal applications.
>>>>
>>>> Are you sure you're re-using already opened Searchers, and not
>>>> accidentally opening a new searcher per user's search?
>>>>
>>>> Is it possible you are running out of file descriptors? That
>>>> IOException (generic Input/output error) means there is a low level
>>>> IO
>>>> issue.
>>>>
>>>> Mike
>>>>
>>>> JulieSoko wrote:
>>>>
>>>>>
>>>>> Hello All,
>>>>> First of all I=92m new to Lucene, and have written code using it =
to
>>>>> search
>>>>> over 1 to man indexes, using a user defined query.
>>>>> I don't have any code on this system so have to type everything in
>>>>> here...
>>>>> I have the following design but am getting
>>>>> An Input / Output error exception which I have typed in a part =20
>>>>> of it
>>>>> below.
>>>>> My question is this?  Do I have  glaring flaw
>>>>> In this design?  I am reusing the IndexSearchers/IndexReaders and
>>>>> not
>>>>> closing them.   The input/output error arises when 2 or
>>>>> More searches occur at the same time over some of the same =20
>>>>> indexes.
>>>>> Can you
>>>>> give me some direction where I should look
>>>>> For the solution to the exception?
>>>>>
>>>>> Here is an explanation of my
>>>>>  Data:
>>>>>      Up to 60 different indexes used at a time
>>>>>       1 directory per 1 day of data
>>>>>      Millions of documents per day
>>>>>      Data  is received and indexes  merged on a continual bases -
>>>>> whole
>>>>> separate process
>>>>>
>>>>>  Index contains
>>>>>          value: content    eventType: type of data   eventTime:
>>>>> time data
>>>>> collected
>>>>>
>>>>>  1 to many users can create individual queries containing 1 or
>>>>> more of
>>>>> the fields and values
>>>>>  searching over 1 to many indexes
>>>>>
>>>>>  Design:
>>>>>       Utilize the IndexAccessor classes  to cache
>>>>> IndexSearcher/IndexReaders i.e. they are made one per index  and
>>>>> never
>>>>> closed.
>>>>>
>>>>>
>>>>>       Use a ParallelMultiSearcher  - create one per request using
>>>>> 1 to
>>>>> many of the indexes
>>>>>
>>>>>       try {
>>>>>       QueryParser parser =3D new QueryParser("value", new
>>>>> StandardAnalyzer(0);
>>>>>       parser.setDefaultOperator(QueryParser.AND_OPERATOR);
>>>>>       Query query =3D parser.parse(queryString);
>>>>>
>>>>>      TopDocCollector col =3D new TopDocCollector(MAX_NUMBER_HITS);
>>>>>      multiSearcher.search(query, new
>>>>> RangeFilter("eventTime",startTime,endTime,true,true),col);
>>>>>      int numHits =3D col.getTotalHits(0);
>>>>>      TopDocs docs =3D col.topDocs();
>>>>>
>>>>>      if (numHits > 0))
>>>>>        for (int i=3D0; i< numHits && i< MAX_NUMBER_HITS; i++)[
>>>>>          Document doc =3D =
multiSearcher.doc(docs.scoreDocs[i].doc);
>>>>>            ....
>>>>>        }
>>>>>
>>>>>   }catch(Exception e  ){
>>>>>       e.printStackTrace();
>>>>> } finally{
>>>>>    //IndexSearchers are not closed since shared by many users
>>>>> }
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> When the second user accesses directories used by the first query
>>>>> then I get
>>>>> the following error:
>>>>>
>>>>> java.io.IOException: Input/output error
>>>>> java.io.RandomAccessFile.readBytes(Native Method)
>>>>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>>>>> at
>>>>> org.apache.lucene.store.FSDirecotry
>>>>> $FSIndexInput.readInternal(FSDirectory.java:550)
>>>>> at
>>>>> org
>>>>> .apache
>>>>> .lucene=20
>>>>> .store.BufferedIndexInput.readBytes(BufferedInputInput.java:
>>>>> 131)
>>>>> at
>>>>> org.apache.lucene.index.CompoundFileReader
>>>>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>>>>> at
>>>>> org
>>>>> .apache
>>>>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>>>>> 152)
>>>>> at
>>>>> org
>>>>> .apache
>>>>> .lucene=20
>>>>> .instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>>>>> 152)
>>>>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>>>>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>>>>> at
>>>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:
>>>>> 123)
>>>>> at
>>>>> org=20
>>>>> .apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:
>>>>> 154)
>>>>> at
>>>>> org
>>>>> .apache=20
>>>>> .lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:
>>>>> 223)
>>>>> at =20
>>>>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:
>>>>> 217)
>>>>> at =20
>>>>> org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:
>>>>> 678)
>>>>> at
>>>>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:
>>>>> 87)
>>>>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>>>>> at
>>>>> org
>>>>> .apache=20
>>>>> .lucene.search.MultiSearcher.createWeight(MultiSearcher.java:
>>>>> 311)
>>>>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>>>>
>>>>> Thanks!
>>>>>
>>>>> --=20
>>>>> View this message in context:
>>>>> =
http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20156805.html
>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>> Nabble.com.
>>>>>
>>>>>
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> --=20
>>> View this message in context:
>>> =
http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20169473.html
>>> Sent from the Lucene - Java Users mailing list archive at =20
>>> Nabble.com.
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --=20
> View this message in context: =
http://www.nabble.com/Lucene-Input-Output-error-tp20156805p20189082.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 15:33:29 2008
Return-Path: <java-user-return-36843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89120 invoked from network); 27 Oct 2008 15:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 15:33:29 -0000
Received: (qmail 17369 invoked by uid 500); 27 Oct 2008 15:33:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17333 invoked by uid 500); 27 Oct 2008 15:33:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17322 invoked by uid 99); 27 Oct 2008 15:33:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 08:33:25 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.241.37.240] (HELO black.choicepoint.com) (66.241.37.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 15:32:13 +0000
Received: from ([172.25.227.132])
	by black.choicepoint.com with ESMTP  id KP-TRRG1.210515772;
	Mon, 27 Oct 2008 11:31:16 -0400
Received: from alawpmsg010.na.choicepoint.net ([172.25.227.129]) by alawpmsg012.na.choicepoint.net with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 27 Oct 2008 11:31:16 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene 2.2.0 Strange QueryParser behavior
Date: Mon, 27 Oct 2008 11:31:15 -0400
Message-ID: <14EC4CE01577D54AA7B5B5F201352DF0054EC9D9@alawpmsg010.na.choicepoint.net>
In-Reply-To: <359a92830810270743l3bd0bc0bmd2d3cb1725409af7@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene 2.2.0 Strange QueryParser behavior
Thread-Index: Ack4Qmq/zrCZofoGR7egahKFULOOgwABbfCA
References: <14EC4CE01577D54AA7B5B5F201352DF0054EC956@alawpmsg010.na.choicepoint.net> <359a92830810270743l3bd0bc0bmd2d3cb1725409af7@mail.gmail.com>
From: "Bob Rhodes" <Bob.Rhodes@choicepoint.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Oct 2008 15:31:16.0354 (UTC) FILETIME=[0D4ABE20:01C93849]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the tip!

I used the StandardAnalyser(Set stopWords) constructor and passed in an
empty stop words set.=20

Now my queries in OR look like this:
+lastname:rhodes +state:or=20

I think that solved the problem.

Bob


-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Monday, October 27, 2008 10:43 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2.0 Strange QueryParser behavior

OR is both a stopword and a reserved word.... In this case you
*probably* are getting hit by it being a stopword.
Changing your analyzer to not use stopwords is probably the way to go,
but beware that you should probably use the same analyzer at index AND
query time.

If you're using StandardAnalyzer, you're getting your case folded, so if
you change analyzers be aware of that.

Get a copy of Luke to see the effects of various analyzers on queries
and to examine the actual contents of your index, it's invaluable.

PerFieldAnalyzerWrapper may be your friend <G>. It would allow you to
use a different analyzer for your "state" field than others, which may
be very useful.

Best
Erick

On Mon, Oct 27, 2008 at 10:20 AM, Bob Rhodes
<Bob.Rhodes@choicepoint.com>wrote:

> Hi all,
> I'm hoping this is an easy question. I have a Lucene index that=20
> contains names and states, and I'm having an issue when the state is=20
> Oregon, specifically OR. Below is an example of the query I pass in=20
> and the query string that QueryParser builds below it.
>
> This works for every state except OR.
>
> String I build: lastname:"rhodes" AND state:"AK"
> QueryParser output: +lastname:rhodes +state:ak
>
> This is what OR look like:
>
> lastname:"Rhodes" AND state:"OR"
> lastname:rhodes
>
> As you can see the state:"OR" is cleaned off by QueryParser. Is there=20
> any way around this?
>
> Thanks for the time.
>
> Bob
>
>
>
> -----------------------------------------
> The information contained in this e-mail message is intended only for=20
> the personal and confidential use of the recipient(s) named above.=20
> This message may be an attorney-client communication and/or work=20
> product and as such is privileged and confidential. If the reader of=20
> this message is not the intended recipient or an agent responsible for

> delivering it to the intended recipient, you are hereby notified that=20
> you have received this document in error and that any review,=20
> dissemination, distribution, or copying of this message is strictly=20
> prohibited. If you have received this communication in error, please=20
> notify us immediately by e-mail, and delete the original message.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 17:07:58 2008
Return-Path: <java-user-return-36844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33669 invoked from network); 27 Oct 2008 17:07:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 17:07:58 -0000
Received: (qmail 54186 invoked by uid 500); 27 Oct 2008 17:07:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53993 invoked by uid 500); 27 Oct 2008 17:07:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53982 invoked by uid 99); 27 Oct 2008 17:07:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 10:07:55 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 17:06:41 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id m9RH7JMK015952
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 27 Oct 2008 13:07:20 -0400
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Mon, 27 Oct 2008 13:07:19 -0400
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Mon, 27 Oct 2008 13:07:20 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: example on RegexQuery 
Date: Mon, 27 Oct 2008 13:07:18 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF4099@SUEXCL-02.ad.syr.edu>
In-Reply-To: <ABF971E134098D40A9F82A75E3D2B46B023D4C42@TKWEXMB22.msad.ms.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: example on RegexQuery 
Thread-Index: Ack0wj+rG7bHRiiHRIObDx8E2aSbEAAseMAAAA2vZNAAEEVmkAB+ElLAABviyOA=
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Oct 2008 17:07:20.0167 (UTC) FILETIME=[78CACF70:01C93856]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2008-10-27_05:2008-10-10,2008-10-27,2008-10-27 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Aashish,

On 10/26/2008 at 11:36 PM, Agrawal, Aashish (IT) wrote:
> I am searching a sample file like below -
> ---
> agrawal fdfdf
> fsdfafasf 3495549584
> fsfsfs fsffsf r4e3fdere j4343
> ---------
>=20
> when I search this file with pattern -
> .*4343*
> .*[a-z]4343
> j4343
> or even search for   3495549584
>=20
> all are failing with result no match found..

Have you tried searching for terms without digits, e.g. 'f(df)+'?  It is =
possible that the analyzer you're using at index time is not including =
digits.  As Erick suggested, look inside your index with Luke.

> Also if I try to search *4343*, it throws exception,,
> shouldn't * at start be allowed with regexQuery ?

In Java's regular expression language, '*' is a repeat operator, and =
must follow the regular expression to be repeated (like '.' or 'a' or =
'[a-z]') -- probably what you mean is: '.*4343.*'

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 17:09:21 2008
Return-Path: <java-user-return-36845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34714 invoked from network); 27 Oct 2008 17:09:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 17:09:21 -0000
Received: (qmail 61204 invoked by uid 500); 27 Oct 2008 17:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61165 invoked by uid 500); 27 Oct 2008 17:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61154 invoked by uid 99); 27 Oct 2008 17:09:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 10:09:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [8.7.216.163] (HELO mta1.evaultmail.com) (8.7.216.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 17:08:06 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AqkDAJWSBUnR+dAJgWdsb2JhbACCTCuRCgEBFiIurmyDTw
X-IronPort-AV: E=Sophos;i="4.33,493,1220252400"; 
   d="scan'208,217";a="29539257"
Received: from mail.seagateservices.com ([209.249.208.9])
  by smtp1.seagateservices.com with ESMTP; 27 Oct 2008 10:07:45 -0700
Received: from SSV-MAILBOXES.corp.ssv.com ([10.100.70.45]) by
 ssv-mail-hub.corp.ssv.com ([10.100.70.35]) with mapi; Mon, 27 Oct 2008
 10:07:44 -0700
From: Tom Saulpaugh <Tom.Saulpaugh@i365.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 27 Oct 2008 10:07:43 -0700
Subject: Change the merge factor for an existing index?  
Thread-Topic: Change the merge factor for an existing index?  
Thread-Index: Ack4VobHFh8qtWcpRMeFElXppML2+A==
Message-ID: <CDE2EE927B8B334995EB357C23D08D950B19A3C336@SSV-MAILBOXES.corp.ssv.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_CDE2EE927B8B334995EB357C23D08D950B19A3C336SSVMAILBOXESc_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_CDE2EE927B8B334995EB357C23D08D950B19A3C336SSVMAILBOXESc_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,

We are currently using lucene v2.1 and we are planning to upgrade to lucene=
 v2.4.
Can we change the merge factor for an existing index and then add more docu=
ments to that index?  Is there some kind of upgrade path like using optimiz=
e to move an existing index to a different merge factor?

Thanks,

Tom


--_000_CDE2EE927B8B334995EB357C23D08D950B19A3C336SSVMAILBOXESc_--

From java-user-return-36846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 19:10:30 2008
Return-Path: <java-user-return-36846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8612 invoked from network); 27 Oct 2008 19:10:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 19:10:30 -0000
Received: (qmail 39510 invoked by uid 500); 27 Oct 2008 19:10:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39472 invoked by uid 500); 27 Oct 2008 19:10:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39461 invoked by uid 99); 27 Oct 2008 19:10:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 12:10:27 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.9] (HELO relay00.pair.com) (209.68.5.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 27 Oct 2008 19:09:14 +0000
Received: (qmail 63068 invoked from network); 27 Oct 2008 19:09:51 -0000
Received: from 70.165.251.169 (HELO ?70.165.251.169?) (70.165.251.169)
  by relay00.pair.com with SMTP; 27 Oct 2008 19:09:51 -0000
X-pair-Authenticated: 70.165.251.169
Subject: Re: instantiated index in 2.4
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809150945p576143bdta1d5e06d9c0b3f82@mail.gmail.com>
References: <1bcb7c7f0809150945p576143bdta1d5e06d9c0b3f82@mail.gmail.com>
Content-Type: text/plain
Date: Mon, 27 Oct 2008 15:09:51 -0400
Message-Id: <1225134591.7486.33.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Has anyone gotten some initial performance observations about
instantiated index?

I replaced my RAMDirectory searcher with one and it was slower or about
the same. The note about it claims 100x possible performance
improvement. Maybe there is a data size beyond which its performance
excels.

thanks.

On Mon, 2008-09-15 at 19:45 +0300, Cam Bazz wrote:
> Hello,
> 
> I have been looking at instantiated index in the trunk. Does this come
> with a searcher? Are the adds reflected directly to the index?
> 
> Or is it just an experimental thing only with reader and writer?
> 
> Best.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 19:56:42 2008
Return-Path: <java-user-return-36847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22866 invoked from network); 27 Oct 2008 19:56:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 19:56:41 -0000
Received: (qmail 98597 invoked by uid 500); 27 Oct 2008 19:56:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98572 invoked by uid 500); 27 Oct 2008 19:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98561 invoked by uid 99); 27 Oct 2008 19:56:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 12:56:40 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 19:55:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KuY92-0003Sc-II
	for java-user@lucene.apache.org; Mon, 27 Oct 2008 12:52:56 -0700
Message-ID: <20195065.post@talk.nabble.com>
Date: Mon, 27 Oct 2008 12:52:56 -0700 (PDT)
From: JulieSoko <julie.sokolowski@saic.com>
To: java-user@lucene.apache.org
Subject: Newbie Question: Query Creation Best Approach
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: julie.sokolowski@saic.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am having some strange behavior and want to rule out that the query that I
am constructing is the correct way to deal with this type of query.   This
is what I am working with:

I am creating a query that contains 3 different fields
 Field 1: value   - String
 Field 2: type    - String
 Field 3: time    - Unfortunately Strings

The query will always contain the date range.  The query can contain all 3
fields or at least 1 and 3.
i.e
   1 & 2 & 3
   1 & 3


I tried creating a  BooleanQuery similiar to
   BooleanQuery bq = new BooleanQuery();
   bq.add(new TermQuery(new Term("value",
"hello")),BooleanClause.Occur.MUST);
   bq.add(new TermQuery(new Term("type","email")),BooleanClause.Occur.MUST);

   parallelSearcher.search(bq, new RangeFilter("time", startTime,
endTime,true,true),col);

 TopDoccollector col = new TopDocCollector(1000);
 ParallelMultiSearcher parallelSearcher =  new
ParallelMultiSearcher(indexes);  //  1 to many indexes 

//Now I add the date range
parallelSearcher.search(bq, new RangeFilter("time", startTime,
endTime,true,true),col);


The problem is when there are no matches for the boolean part of the
query... I get an input/output error... 


java.io.IOException: Input/output error
 java.io.RandomAccessFile.readBytes(Native Method)
 java.io.RandomAccessFile.read(RandomAccessFile.java:315)
 at
org.apache.lucene.store.FSDirecotry$FSIndexInput.readInternal(FSDirectory.java:550)
 at
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:131)
 at
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240)
at
org.apache.lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
152)
at
org.apache.lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
152)
at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:123)
at org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:154)
at
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:223)
at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:217)
at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:678)
at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:87)
at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
at
org.apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:311)
at org.apache.lucene.search.Searcher.search(Searcher.java:178) 






Thanks!
Julie

-- 
View this message in context: http://www.nabble.com/Newbie-Question%3A-Query-Creation-Best-Approach-tp20195065p20195065.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 27 20:01:36 2008
Return-Path: <java-user-return-36848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23880 invoked from network); 27 Oct 2008 20:01:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2008 20:01:36 -0000
Received: (qmail 2337 invoked by uid 500); 27 Oct 2008 20:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2298 invoked by uid 500); 27 Oct 2008 20:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2287 invoked by uid 99); 27 Oct 2008 20:01:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 13:01:34 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 20:00:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KuYGq-0003q7-2C
	for java-user@lucene.apache.org; Mon, 27 Oct 2008 13:01:00 -0700
Message-ID: <20195217.post@talk.nabble.com>
Date: Mon, 27 Oct 2008 13:01:00 -0700 (PDT)
From: agatone <zoran.zoki@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple values in field
In-Reply-To: <359a92830810270539i7ab9ec78i7685e1d06758459f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: zoran.zoki@gmail.com
References: <20152411.post@talk.nabble.com> <359a92830810240904q2864737av2239ef007452ccc2@mail.gmail.com> <20156607.post@talk.nabble.com> <359a92830810241303h3327f309wcf7b5f7bbaceeb4a@mail.gmail.com> <20162152.post@talk.nabble.com> <359a92830810270539i7ab9ec78i7685e1d06758459f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I just hope indexing one extra field isn't gonna be performance issue later.

Ty for your replies.


Erick Erickson wrote:
> 
> then you'll need to index another field that records that intention, or
> just "know" which fields are intended to be multiple.
> 
> Best
> Erick
> 
> On Sat, Oct 25, 2008 at 4:12 AM, agatone <zoran.zoki@gmail.com> wrote:
> 
>>
>> Yeah but if it happens that for a certain document field1 has only one
>> value
>> and in that case I can't know it is intended as a multiple. in that case
>> adds.size() would be == 1 and it would look as normal field.
>>
>> What i need is to mark that field is intended to be multiple no matter if
>> it
>> contains 1 value or 10.
>>
>> I need this because my serach results are passed as JSON to other
>> consumers
>> and i have to tell them what's the structure.
>>
>>
>> Erick Erickson wrote:
>> >
>> > No, no, no...
>> >
>> > Say you have the following
>> > Document doc = new Document()
>> > doc.add("field1", "stuff", blah, blah)
>> > doc.add("field1", "more stuff", blah, blah)
>> > doc.add("field1", "stuff and nonsense", blah, blah)
>> > IndexWriter.addDocument(doc)
>> >
>> >
>> >
>> >
>> > Now, in your search code that document comes up as a hit and you have
>> > Field[] adds = doc.getFields("field1");
>> >
>> >
>> > adds.size() should == 3
>> >
>> > whenever adds.size() > 1, you can know it has multiple entries....
>> >
>> > I wasn't suggesting that you ever add empty fields, and I don't think
>> an
>> > empty
>> > add would even compile.
>> >
>> > Best
>> > Erick@LetMeConfuseYouSomeMore.com
>> >
>> >
>> > On Fri, Oct 24, 2008 at 3:38 PM, agatone <zoran.zoki@gmail.com> wrote:
>> >
> 
> 

-- 
View this message in context: http://www.nabble.com/Multiple-values-in-field-tp20152411p20195217.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 01:19:22 2008
Return-Path: <java-user-return-36849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74903 invoked from network); 28 Oct 2008 01:19:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 01:19:22 -0000
Received: (qmail 16169 invoked by uid 500); 28 Oct 2008 01:19:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16146 invoked by uid 500); 28 Oct 2008 01:19:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16135 invoked by uid 99); 28 Oct 2008 01:19:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 18:19:19 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oskwon@thinkfree.com designates 211.214.213.251 as permitted sender)
Received: from [211.214.213.251] (HELO tfmail.thinkfree.com) (211.214.213.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 01:18:04 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by tfmail.thinkfree.com (Postfix) with ESMTP id 241A11668976
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 10:17:43 +0900 (KST)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -2.223
X-Spam-Level: 
Received: from tfmail.thinkfree.com ([127.0.0.1])
	by localhost (tfmail.thinkfree.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ayFrFvaMpa7y for <java-user@lucene.apache.org>;
	Tue, 28 Oct 2008 10:17:41 +0900 (KST)
Received: from oskwon (unknown [211.214.213.193])
	by tfmail.thinkfree.com (Postfix) with ESMTP id 4BD6A1668978
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 10:17:41 +0900 (KST)
From: "Kwon, Ohsang" <oskwon@thinkfree.com>
To: <java-user@lucene.apache.org>
References: <4D42A7E6E7314620B62491247125CAF9@oskwon> <20183160.post@talk.nabble.com>
Subject: RE: How can I get to the Document for architecture of lucene index.
Date: Tue, 28 Oct 2008 10:17:39 +0900
Message-ID: <9339B69337F54078B75FE2B724417973@oskwon>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <20183160.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: Ack4CU8eIgv1JAofRDiEPGxHTkBQfAAAmQyg
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.223 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.663, BAYES_00=-2.599,
	DNS_FROM_SECURITYSAGE=1.513]

Dear Karsten, thank for your help.
It`s so difficult. ^^;

Thank you again.

-----Original Message-----
From: Karsten F. [mailto:karsten-lucene@fiz-technik.de] 
Sent: Monday, October 27, 2008 4:54 PM
To: java-user@lucene.apache.org
Subject: Re: How can I get to the Document for architecture of lucene index.


Hi Ohsang,

are you looking for
http://lucene.apache.org/java/2_4_0/fileformats.html
?

Best regards
  Karsten

Kwon, Ohsang wrote:
> 
> I want to know how the lucene stored the data in the index internally.
> 
> (Lucene`s index format changed very often.)
> 
>  
> 
> I can not find this information in wiki.
> 
> Where can I get that?
> Does the same document or picture for index fomat?
> plz help me.
> 
> 

-- 
View this message in context:
http://www.nabble.com/How-can-I-get-to-the-Document-for-architecture-of-luce
ne-index.-tp20182768p20183160.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 06:02:54 2008
Return-Path: <java-user-return-36850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98712 invoked from network); 28 Oct 2008 06:02:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 06:02:54 -0000
Received: (qmail 67709 invoked by uid 500); 28 Oct 2008 06:02:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67679 invoked by uid 500); 28 Oct 2008 06:02:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67668 invoked by uid 99); 28 Oct 2008 06:02:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Oct 2008 23:02:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 06:01:37 +0000
Received: from sparkling.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id A62081631E8C
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 01:02:16 -0500 (CDT)
Message-ID: <4906AAE6.2000803@atlassian.com>
Date: Tue, 28 Oct 2008 17:02:14 +1100
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: IllegalStateEx thrown when calling close
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

All,

We have seen the following stacktrace in production with Lucene 2.3.2:

java.lang.IllegalStateException: abort() can only be called when 
IndexWriter was opened with autoCommit=false
    at org.apache.lucene.index.IndexWriter.abort(IndexWriter.java:2009)
    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1175)
    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1154)

This is caused by some IndexWriter method catching an OutOfMemoryError 
previously and then aborting the close.

My question is twofold. Firstly, does it make any sense for this to 
happen (it feels like a bug, shouldn't close not call abort if 
autoCommit=true?). Secondly, is there anything I can do to recover 
(should I call flush()?), or can I just ignore it if autoCommit is true?

Following is a test that reproduces the problem:

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.RAMDirectory;
import org.junit.Assert;
import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.PrintStream;
import java.util.concurrent.atomic.AtomicBoolean;

public class TestIndexWriter {

    @Test public void testOutOfMemoryErrorCausesCloseToFail() throws 
Exception {
        final AtomicBoolean throwFirst = new AtomicBoolean(true);
        final IndexWriter writer = new IndexWriter(new RAMDirectory(), 
new StandardAnalyzer()) {
            @Override public void message(final String message) {
                if (message.startsWith("now flush at close") && 
throwFirst.getAndSet(false)) {
                    throw new OutOfMemoryError(message);
                }
            }
        };
        // need to set an info stream so message is called
        writer.setInfoStream(new PrintStream(new 
ByteArrayOutputStream())); //or better, use NullOS from commons-io
        try {
            writer.close();
            Assert.fail("OutOfMemoryError expected");
        }
        catch (final OutOfMemoryError expected) {}

        // throws IllegalStateEx
        writer.close();
    }
}

thanks for any help,
jed.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 10:57:46 2008
Return-Path: <java-user-return-36851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24117 invoked from network); 28 Oct 2008 10:57:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 10:57:46 -0000
Received: (qmail 9361 invoked by uid 500); 28 Oct 2008 10:57:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9330 invoked by uid 500); 28 Oct 2008 10:57:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9319 invoked by uid 99); 28 Oct 2008 10:57:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 03:57:43 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 10:56:29 +0000
Received: by el-out-1112.google.com with SMTP id p32so790041elf.14
        for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 03:57:07 -0700 (PDT)
Received: by 10.90.93.13 with SMTP id q13mr5883669agb.120.1225191427478;
        Tue, 28 Oct 2008 03:57:07 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id i10sm1576106wxd.18.2008.10.28.03.57.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 28 Oct 2008 03:57:06 -0700 (PDT)
Message-Id: <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4906AAE6.2000803@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IllegalStateEx thrown when calling close
Date: Tue, 28 Oct 2008 06:57:04 -0400
References: <4906AAE6.2000803@atlassian.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Woops, you're right: this is a bug.  I'll open an issue, fold in your
nice test case & fix it.  Thanks Jed!

On hitting OOM, IndexWriter marks that its internal state (buffered
documents, deletions) may be corrupt and so it rollsback to the last
commit instead of flushing a new segment.

To workaround this, on catching an OOME on any of IndexWriter's
methods, you should 1) forcibly remove the write lock
(IndexWriter.unlock static method) and then 2) not call any methods on
the old writer.  Even if the old writer has concurrent merges running,
they will refuse to commit on seeing that an OOM had occurred.

Mike

Jed Wesley-Smith wrote:

> All,
>
> We have seen the following stacktrace in production with Lucene 2.3.2:
>
> java.lang.IllegalStateException: abort() can only be called when  
> IndexWriter was opened with autoCommit=false
>   at org.apache.lucene.index.IndexWriter.abort(IndexWriter.java:2009)
>   at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1175)
>   at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1154)
>
> This is caused by some IndexWriter method catching an  
> OutOfMemoryError previously and then aborting the close.
>
> My question is twofold. Firstly, does it make any sense for this to  
> happen (it feels like a bug, shouldn't close not call abort if  
> autoCommit=true?). Secondly, is there anything I can do to recover  
> (should I call flush()?), or can I just ignore it if autoCommit is  
> true?
>
> Following is a test that reproduces the problem:
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.store.RAMDirectory;
> import org.junit.Assert;
> import org.junit.Test;
>
> import java.io.ByteArrayOutputStream;
> import java.io.PrintStream;
> import java.util.concurrent.atomic.AtomicBoolean;
>
> public class TestIndexWriter {
>
>   @Test public void testOutOfMemoryErrorCausesCloseToFail() throws  
> Exception {
>       final AtomicBoolean throwFirst = new AtomicBoolean(true);
>       final IndexWriter writer = new IndexWriter(new RAMDirectory(),  
> new StandardAnalyzer()) {
>           @Override public void message(final String message) {
>               if (message.startsWith("now flush at close") &&  
> throwFirst.getAndSet(false)) {
>                   throw new OutOfMemoryError(message);
>               }
>           }
>       };
>       // need to set an info stream so message is called
>       writer.setInfoStream(new PrintStream(new  
> ByteArrayOutputStream())); //or better, use NullOS from commons-io
>       try {
>           writer.close();
>           Assert.fail("OutOfMemoryError expected");
>       }
>       catch (final OutOfMemoryError expected) {}
>
>       // throws IllegalStateEx
>       writer.close();
>   }
> }
>
> thanks for any help,
> jed.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 20:36:09 2008
Return-Path: <java-user-return-36852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95704 invoked from network); 28 Oct 2008 20:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 20:36:09 -0000
Received: (qmail 78910 invoked by uid 500); 28 Oct 2008 20:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78871 invoked by uid 500); 28 Oct 2008 20:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78860 invoked by uid 99); 28 Oct 2008 20:36:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 13:36:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 20:34:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KuvHl-00068c-KX
	for java-user@lucene.apache.org; Tue, 28 Oct 2008 13:35:29 -0700
Message-ID: <20215525.post@talk.nabble.com>
Date: Tue, 28 Oct 2008 13:35:29 -0700 (PDT)
From: Sebastian23 <sebi@icu.uzh.ch>
To: java-user@lucene.apache.org
Subject: Query Search returns always the same id
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebi@icu.uzh.ch
X-Virus-Checked: Checked by ClamAV on apache.org


hi folks,

i have great trouble while using lucene to implement search functionality to
my application:

this way i index:
[code]
public void indexData() throws CorruptIndexException,
LockObtainFailedException, IOException {
		Analyzer analyzer = new StandardAnalyzer();
		IndexWriter iwriter = new IndexWriter(indexFolder, analyzer, true);
		iwriter.setMaxFieldLength(25000);
		Document doc = new Document();
		for (int i = 0; i < sourcefiles.size(); i++) {
			for (int j = 0; j < sourcefiles.elementAt(i).getNumberOfRevisions(); j++)
{
				doc.add(new Field("id", sourcefiles.elementAt(i).getID(j),
Field.Store.YES, Field.Index.UN_TOKENIZED));
				doc.add(new Field("message",
sourcefiles.elementAt(i).getCommitMessage(j), Field.Store.NO,
Field.Index.TOKENIZED));
				iwriter.addDocument(doc);
				System.out.println("Indexed: Source: " + (i+1) + " Revision: "  +
(j+1));
				System.out.println(sourcefiles.elementAt(i).getCommitMessage(j));
				System.out.println(sourcefiles.elementAt(i).getID(j));
			}
		}
		iwriter.optimize();
		iwriter.close();
	}
[/code]

and this way i make the query

[code]
public void luceneSearch(String queryString) throws CorruptIndexException,
IOException, ParseException {
		System.out.println("Searching started");
		IndexSearcher isearcher = new IndexSearcher(indexFolder);
		Analyzer analyzer = new StandardAnalyzer();
		QueryParser parser = new QueryParser("message", analyzer);
		org.apache.lucene.search.Query query = parser.parse(queryString);
		Hits hits = isearcher.search(query);
		
		if(hits.length() > 0) { 
			System.out.println("found: " + hits.length() + " documents.");
			for (int i = 0; i < hits.length(); i++) {
				System.out.println((i + 1) + ". " + hits.doc(i).get("id") +
hits.doc(i).getField("message"));
			}
		} else {
			System.out.println("No matching documents found.");
		}
	}	
[/code]

my  problem is, that the query always returns a lot of too much results. and
the other problem is, the id is always for every result in the list the same
id, namly the first i added to the writer. and the message is always null.

while adding i check with sysout that all the ids are different and the
messages arent null

whats going wrong?? thx for your hints
-- 
View this message in context: http://www.nabble.com/Query-Search-returns-always-the-same-id-tp20215525p20215525.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 20:39:54 2008
Return-Path: <java-user-return-36853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97374 invoked from network); 28 Oct 2008 20:39:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 20:39:54 -0000
Received: (qmail 82949 invoked by uid 500); 28 Oct 2008 20:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82918 invoked by uid 500); 28 Oct 2008 20:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82907 invoked by uid 99); 28 Oct 2008 20:39:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 13:39:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 20:38:37 +0000
Received: by yx-out-2324.google.com with SMTP id 3so637949yxj.5
        for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 13:39:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=zg7t9HlmNY4r7s5nsnyFVv06VYCYWPV1l6/dbsBuTv4=;
        b=pkuGW+XPRKdykUqmbUB6wn7e0mnXQvmpK7CdpghbFmbNGDieZtNAlYaccAgAEL15DD
         GXz4L8Y1buRAR2iLhGT8SHR/Q9YPMJ6XYXdttdaYWsIP/EupAcUL8O8NU3/jRCnqVVgC
         I2EglF2AXydM7Wa7ryuNGTXv9cTrtuiSWNLR4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=A7xnfshk/1xIsmgxb4+hBIkMpZC6vxPx1OzQqx4B2zAFp+pVrfCWyqnB6GOIK1vrVy
         r+I2FZI4M9fqB4i1mNFyP4IMz1pXslH+knQ/1x5YrQBgbgnj6rp1TxLFiLbWU9/cXWzr
         OnRNHVdB+ueE04v7333A9ud1a5wMzxH4k/nIU=
Received: by 10.90.86.10 with SMTP id j10mr6492149agb.6.1225226356468;
        Tue, 28 Oct 2008 13:39:16 -0700 (PDT)
Received: from ?192.168.1.101? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm2874814agb.34.2008.10.28.13.39.14
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 28 Oct 2008 13:39:15 -0700 (PDT)
Message-Id: <AF03D4E1-A8C8-4C35-BF50-27656CFCE87F@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <CDE2EE927B8B334995EB357C23D08D950B19A3C336@SSV-MAILBOXES.corp.ssv.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5F136)
Mime-Version: 1.0 (iPhone Mail 5F136)
Subject: Re: Change the merge factor for an existing index?
Date: Tue, 28 Oct 2008 16:39:10 -0400
References: <CDE2EE927B8B334995EB357C23D08D950B19A3C336@SSV-MAILBOXES.corp.ssv.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Just change it. Merges will start obeying the new merge factor  
seamlessly.

- Mark


On Oct 27, 2008, at 1:07 PM, Tom Saulpaugh <Tom.Saulpaugh@i365.com>  
wrote:

> Hello,
>
> We are currently using lucene v2.1 and we are planning to upgrade to  
> lucene v2.4.
> Can we change the merge factor for an existing index and then add  
> more documents to that index?  Is there some kind of upgrade path  
> like using optimize to move an existing index to a different merge  
> factor?
>
> Thanks,
>
> Tom
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 20:51:10 2008
Return-Path: <java-user-return-36854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3979 invoked from network); 28 Oct 2008 20:51:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 20:51:10 -0000
Received: (qmail 97586 invoked by uid 500); 28 Oct 2008 20:51:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97548 invoked by uid 500); 28 Oct 2008 20:51:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97533 invoked by uid 99); 28 Oct 2008 20:51:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 13:51:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.60.73.15] (HELO watermelon.icu.uzh.ch) (130.60.73.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 20:49:54 +0000
Received: from localhost (localhost [127.0.0.1])
	by watermelon.icu.uzh.ch (Postfix) with ESMTP id 305E34A1C0F
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 21:50:03 +0100 (CET)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -2.353
X-Spam-Level: 
Received: from watermelon.icu.uzh.ch ([127.0.0.1])
	by localhost (watermelon.icu.uzh.ch [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id sK5Fq0096v4V for <java-user@lucene.apache.org>;
	Tue, 28 Oct 2008 21:50:00 +0100 (CET)
Received: from watermelon.icu.uzh.ch (watermelon.icu.uzh.ch [130.60.73.15])
	by watermelon.icu.uzh.ch (Postfix) with ESMTP id 543404A1BA0
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 21:50:00 +0100 (CET)
Date: Tue, 28 Oct 2008 21:50:00 +0100 (CET)
From: =?utf-8?Q?Sebastian_M=C3=BCller?= <sebi@icu.uzh.ch>
To: java-user@lucene.apache.org
Message-ID: <27355892.8761225227000296.JavaMail.root@watermelon>
Subject: Lucene Query returns always the first ID
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [130.60.73.15]
X-Mailer: Zimbra 5.0.10_GA_2638.UBUNTU6 (ZimbraWebClient - FF3.0 (Win)/5.0.10_GA_2638.UBUNTU6)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO
X-Old-Spam-Status: No, score=-2.353 tagged_above=-10 required=3 tests=[AWL=0.246,
	BAYES_00=-2.599]

hi folks,

i have great trouble while using lucene to implement search functionality to my application:

this way i index:
[code]
public void indexData() throws CorruptIndexException, LockObtainFailedException, IOException {
                Analyzer analyzer = new StandardAnalyzer();
                IndexWriter iwriter = new IndexWriter(indexFolder, analyzer, true);
                iwriter.setMaxFieldLength(25000);
                Document doc = new Document();
                for (int i = 0; i < sourcefiles.size(); i++) {
                        for (int j = 0; j < sourcefiles.elementAt(i).getNumberOfRevisions(); j++) {
                                doc.add(new Field("id", sourcefiles.elementAt(i).getID(j), Field.Store.YES, Field.Index.UN_TOKENIZED));
                                doc.add(new Field("message", sourcefiles.elementAt(i).getCommitMessage(j), Field.Store.NO, Field.Index.TOKENIZED));
                                iwriter.addDocument(doc);
                                System.out.println("Indexed: Source: " + (i+1) + " Revision: "  + (j+1));
                                System.out.println(sourcefiles.elementAt(i).getCommitMessage(j));
                                System.out.println(sourcefiles.elementAt(i).getID(j));
                        }
                }
                iwriter.optimize();
                iwriter.close();
        }
[/code]

and this way i make the query

[code]
public void luceneSearch(String queryString) throws CorruptIndexException, IOException, ParseException {
                System.out.println("Searching started");
                IndexSearcher isearcher = new IndexSearcher(indexFolder);
                Analyzer analyzer = new StandardAnalyzer();
                QueryParser parser = new QueryParser("message", analyzer);
                org.apache.lucene.search.Query query = parser.parse(queryString);
                Hits hits = isearcher.search(query);
              
                if(hits.length() > 0) {
                        System.out.println("found: " + hits.length() + " documents.");
                        for (int i = 0; i < hits.length(); i++) {
                                System.out.println((i + 1) + ". " + hits.doc(i).get("id") + hits.doc(i).getField("message"));
                        }
                } else {
                        System.out.println("No matching documents found.");
                }
        }
[/code]

my  problem is, that the query always returns a lot of too much results. and the other problem is, the id is always for every result in the list the same id, namly the first i added to the writer. and the message is always null.

while adding i check with sysout that all the ids are different and the messages arent null

whats going wrong?? thx for your hints

-- 
Sebastian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 20:53:30 2008
Return-Path: <java-user-return-36855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4714 invoked from network); 28 Oct 2008 20:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 20:53:30 -0000
Received: (qmail 782 invoked by uid 500); 28 Oct 2008 20:53:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 748 invoked by uid 500); 28 Oct 2008 20:53:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 737 invoked by uid 99); 28 Oct 2008 20:53:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 13:53:28 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 20:52:12 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2829649rvb.5
        for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 13:52:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=9LrUHOOEscLTm2UNymourDFx7CSraobpM+XAQ0YeJYM=;
        b=yBXH5TB6SvyxztAeELC8fJauAi+iM7fW8uQMtqht3dg/jj4ZrzzstenHwlcRuKvtNa
         OveML133OjHStqVQgUwI0FNS/ud2dV/IpE+Ruz1SM2lYdZ1eaHthC/1LeB+beYsGxRoo
         o77qSNKjZW5k9c+9pX/V/3vfPzMOxFt6LCoTI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Xh8MmgBI7+Ov0/r1sRS/4mxzppTFvCqPkM6ekITM++Z95muhHn9Uh6xJcwhVwo1Ztt
         nAiiYCxaqQXheVsBS1obDbXxk0AWOIh/H2qAcfa4MyFCRfBJfIptYlEgKXRXCksvpZpW
         sGq+Dlw562N4ysk+UhXLMtzwuEn8OHtBaRmb8=
Received: by 10.141.1.2 with SMTP id d2mr4409514rvi.129.1225227171088;
        Tue, 28 Oct 2008 13:52:51 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 28 Oct 2008 13:52:51 -0700 (PDT)
Message-ID: <359a92830810281352j4eaa387aoe644408dd38ff206@mail.gmail.com>
Date: Tue, 28 Oct 2008 16:52:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query Search returns always the same id
In-Reply-To: <20215525.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93063_14758511.1225227171085"
References: <20215525.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93063_14758511.1225227171085
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think your root problem is that you're using the same Document
over and over to add to the index. Your inner loop should be
something like:


    for (int j = 0; j < sourcefiles.elementAt(i).getNumberOfRevisions();
j++)

> {

       Document doc = new Document()

>
>    doc.add(new Field("id",
> sourcefiles.elementAt(i).getID(j),Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>    doc.add(new
> Field("message",sourcefiles.elementAt(i).getCommitMessage(j),
> Field.Store.NO <http://field.store.no/>,Field.Index.TOKENIZED));
>    iwriter.addDocument(doc);
>    System.out.println("Indexed: Source: " + (i+1) + " Revision: "  +(j+1));
>    System.out.println(sourcefiles.elementAt(i).getCommitMessage(j));
>    System.out.println(sourcefiles.elementAt(i).getID(j));
>  }
>

rather than creating a new document outside the outer loop.

If you haven't yet, a copy of Luke (google Lucene Luke) is invaluable for
examining indexes and seeing what they look like...

I'm not quite sure why the document id is always the same, but try making a
new document
and let us know if you're still having a problem.

Best
Erick

On Tue, Oct 28, 2008 at 4:35 PM, Sebastian23 <sebi@icu.uzh.ch> wrote:

>
> hi folks,
>
> i have great trouble while using lucene to implement search functionality
> to
> my application:
>
> this way i index:
> [code]
> public void indexData() throws CorruptIndexException,
> LockObtainFailedException, IOException {
>                Analyzer analyzer = new StandardAnalyzer();
>                IndexWriter iwriter = new IndexWriter(indexFolder, analyzer,
> true);
>                iwriter.setMaxFieldLength(25000);
>                Document doc = new Document();
>                for (int i = 0; i < sourcefiles.size(); i++) {
>                        for (int j = 0; j <
> sourcefiles.elementAt(i).getNumberOfRevisions(); j++)
> {
>                                doc.add(new Field("id",
> sourcefiles.elementAt(i).getID(j),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>                                doc.add(new Field("message",
> sourcefiles.elementAt(i).getCommitMessage(j), Field.Store.NO,
> Field.Index.TOKENIZED));
>                                iwriter.addDocument(doc);
>                                System.out.println("Indexed: Source: " +
> (i+1) + " Revision: "  +
> (j+1));
>
>  System.out.println(sourcefiles.elementAt(i).getCommitMessage(j));
>
>  System.out.println(sourcefiles.elementAt(i).getID(j));
>                        }
>                }
>                iwriter.optimize();
>                iwriter.close();
>        }
> [/code]
>
> and this way i make the query
>
> [code]
> public void luceneSearch(String queryString) throws CorruptIndexException,
> IOException, ParseException {
>                System.out.println("Searching started");
>                IndexSearcher isearcher = new IndexSearcher(indexFolder);
>                Analyzer analyzer = new StandardAnalyzer();
>                QueryParser parser = new QueryParser("message", analyzer);
>                org.apache.lucene.search.Query query =
> parser.parse(queryString);
>                Hits hits = isearcher.search(query);
>
>                if(hits.length() > 0) {
>                        System.out.println("found: " + hits.length() + "
> documents.");
>                        for (int i = 0; i < hits.length(); i++) {
>                                System.out.println((i + 1) + ". " +
> hits.doc(i).get("id") +
> hits.doc(i).getField("message"));
>                        }
>                } else {
>                        System.out.println("No matching documents found.");
>                }
>        }
> [/code]
>
> my  problem is, that the query always returns a lot of too much results.
> and
> the other problem is, the id is always for every result in the list the
> same
> id, namly the first i added to the writer. and the message is always null.
>
> while adding i check with sysout that all the ids are different and the
> messages arent null
>
> whats going wrong?? thx for your hints
> --
> View this message in context:
> http://www.nabble.com/Query-Search-returns-always-the-same-id-tp20215525p20215525.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_93063_14758511.1225227171085--

From java-user-return-36856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 21:08:31 2008
Return-Path: <java-user-return-36856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9603 invoked from network); 28 Oct 2008 21:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 21:08:31 -0000
Received: (qmail 14740 invoked by uid 500); 28 Oct 2008 21:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14696 invoked by uid 500); 28 Oct 2008 21:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14682 invoked by uid 99); 28 Oct 2008 21:08:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 14:08:28 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.60.73.15] (HELO watermelon.icu.uzh.ch) (130.60.73.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 21:07:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by watermelon.icu.uzh.ch (Postfix) with ESMTP id 662E54A1BE5
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 22:07:50 +0100 (CET)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -1.615
X-Spam-Level: 
Received: from watermelon.icu.uzh.ch ([127.0.0.1])
	by localhost (watermelon.icu.uzh.ch [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id co8U8sTTM1Lu for <java-user@lucene.apache.org>;
	Tue, 28 Oct 2008 22:07:47 +0100 (CET)
Received: from watermelon.icu.uzh.ch (watermelon.icu.uzh.ch [130.60.73.15])
	by watermelon.icu.uzh.ch (Postfix) with ESMTP id 2373F4A1BAC
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 22:07:47 +0100 (CET)
Date: Tue, 28 Oct 2008 22:07:47 +0100 (CET)
From: =?utf-8?Q?Sebastian_M=C3=BCller?= <sebi@icu.uzh.ch>
To: java-user@lucene.apache.org
Message-ID: <5541794.8791225228067019.JavaMail.root@watermelon>
In-Reply-To: <359a92830810281352j4eaa387aoe644408dd38ff206@mail.gmail.com>
Subject: Re: Query Search returns always the same id
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Originating-IP: [130.60.73.15]
X-Mailer: Zimbra 5.0.10_GA_2638.UBUNTU6 (ZimbraWebClient - FF3.0 (Win)/5.0.10_GA_2638.UBUNTU6)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO
X-Old-Spam-Status: No, score=-1.615 tagged_above=-10 required=3 tests=[AWL=-0.515,
	BAYES_00=-2.599, WHOIS_MYPRIVREG=1.499]

Hi Erick

thank you for you fast reply. the problem with the ID and the wrong results=
 is solved. that was kinda noob failure of me ;)

but the message is still null. but i think somehow i can fix that ;)

regards sebastian


----- Urspr=C3=BCngliche Mail -----
Von: "Erick Erickson" <erickerickson@gmail.com>
An: java-user@lucene.apache.org
Gesendet: Dienstag, 28. Oktober 2008 21:52:51 GMT +01:00 Amsterdam/Berlin/B=
ern/Rom/Stockholm/Wien
Betreff: Re: Query Search returns always the same id

I think your root problem is that you're using the same Document
over and over to add to the index. Your inner loop should be
something like:


    for (int j =3D 0; j < sourcefiles.elementAt(i).getNumberOfRevisions();
j++)

> {

       Document doc =3D new Document()

>
>    doc.add(new Field("id",
> sourcefiles.elementAt(i).getID(j),Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>    doc.add(new
> Field("message",sourcefiles.elementAt(i).getCommitMessage(j),
> Field.Store.NO <http://field.store.no/>,Field.Index.TOKENIZED));
>    iwriter.addDocument(doc);
>    System.out.println("Indexed: Source: " + (i+1) + " Revision: "  +(j+1)=
);
>    System.out.println(sourcefiles.elementAt(i).getCommitMessage(j));
>    System.out.println(sourcefiles.elementAt(i).getID(j));
>  }
>

rather than creating a new document outside the outer loop.

If you haven't yet, a copy of Luke (google Lucene Luke) is invaluable for
examining indexes and seeing what they look like...

I'm not quite sure why the document id is always the same, but try making a
new document
and let us know if you're still having a problem.

Best
Erick

On Tue, Oct 28, 2008 at 4:35 PM, Sebastian23 <sebi@icu.uzh.ch> wrote:

>
> hi folks,
>
> i have great trouble while using lucene to implement search functionality
> to
> my application:
>
> this way i index:
> [code]
> public void indexData() throws CorruptIndexException,
> LockObtainFailedException, IOException {
>                Analyzer analyzer =3D new StandardAnalyzer();
>                IndexWriter iwriter =3D new IndexWriter(indexFolder, analy=
zer,
> true);
>                iwriter.setMaxFieldLength(25000);
>                Document doc =3D new Document();
>                for (int i =3D 0; i < sourcefiles.size(); i++) {
>                        for (int j =3D 0; j <
> sourcefiles.elementAt(i).getNumberOfRevisions(); j++)
> {
>                                doc.add(new Field("id",
> sourcefiles.elementAt(i).getID(j),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>                                doc.add(new Field("message",
> sourcefiles.elementAt(i).getCommitMessage(j), Field.Store.NO,
> Field.Index.TOKENIZED));
>                                iwriter.addDocument(doc);
>                                System.out.println("Indexed: Source: " +
> (i+1) + " Revision: "  +
> (j+1));
>
>  System.out.println(sourcefiles.elementAt(i).getCommitMessage(j));
>
>  System.out.println(sourcefiles.elementAt(i).getID(j));
>                        }
>                }
>                iwriter.optimize();
>                iwriter.close();
>        }
> [/code]
>
> and this way i make the query
>
> [code]
> public void luceneSearch(String queryString) throws CorruptIndexException=
,
> IOException, ParseException {
>                System.out.println("Searching started");
>                IndexSearcher isearcher =3D new IndexSearcher(indexFolder)=
;
>                Analyzer analyzer =3D new StandardAnalyzer();
>                QueryParser parser =3D new QueryParser("message", analyzer=
);
>                org.apache.lucene.search.Query query =3D
> parser.parse(queryString);
>                Hits hits =3D isearcher.search(query);
>
>                if(hits.length() > 0) {
>                        System.out.println("found: " + hits.length() + "
> documents.");
>                        for (int i =3D 0; i < hits.length(); i++) {
>                                System.out.println((i + 1) + ". " +
> hits.doc(i).get("id") +
> hits.doc(i).getField("message"));
>                        }
>                } else {
>                        System.out.println("No matching documents found.")=
;
>                }
>        }
> [/code]
>
> my  problem is, that the query always returns a lot of too much results.
> and
> the other problem is, the id is always for every result in the list the
> same
> id, namly the first i added to the writer. and the message is always null=
.
>
> while adding i check with sysout that all the ids are different and the
> messages arent null
>
> whats going wrong?? thx for your hints
> --
> View this message in context:
> http://www.nabble.com/Query-Search-returns-always-the-same-id-tp20215525p=
20215525.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--=20
Sebastian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 22:29:24 2008
Return-Path: <java-user-return-36857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60221 invoked from network); 28 Oct 2008 22:29:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 22:29:21 -0000
Received: (qmail 4061 invoked by uid 500); 28 Oct 2008 22:29:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4034 invoked by uid 500); 28 Oct 2008 22:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4023 invoked by uid 99); 28 Oct 2008 22:29:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 15:29:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 22:28:02 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B57CC4A801D
	for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 09:28:39 +1100 (EST)
Message-ID: <4907923E.6080505@nuix.com>
Date: Wed, 29 Oct 2008 09:29:18 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query Search returns always the same id
References: <5541794.8791225228067019.JavaMail.root@watermelon>
In-Reply-To: <5541794.8791225228067019.JavaMail.root@watermelon>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sebastian Mller wrote:
> Hi Erick
> 
> thank you for you fast reply. the problem with the ID and the wrong
> results is solved. that was kinda noob failure of me ;)
> 
> but the message is still null. but i think somehow i can fix that ;)

You had passed Field.Store.NO for the message, so it isn't particularly 
surprising that it isn't stored. ;-)

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 22:32:52 2008
Return-Path: <java-user-return-36858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61332 invoked from network); 28 Oct 2008 22:32:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 22:32:52 -0000
Received: (qmail 6722 invoked by uid 500); 28 Oct 2008 22:32:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6693 invoked by uid 500); 28 Oct 2008 22:32:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6682 invoked by uid 99); 28 Oct 2008 22:32:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 15:32:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.60.73.15] (HELO watermelon.icu.uzh.ch) (130.60.73.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 22:31:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by watermelon.icu.uzh.ch (Postfix) with ESMTP id 726484A1C63
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 23:31:42 +0100 (CET)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -2.369
X-Spam-Level: 
Received: from watermelon.icu.uzh.ch ([127.0.0.1])
	by localhost (watermelon.icu.uzh.ch [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hKM4MJAy3sf9 for <java-user@lucene.apache.org>;
	Tue, 28 Oct 2008 23:31:39 +0100 (CET)
Received: from watermelon.icu.uzh.ch (watermelon.icu.uzh.ch [130.60.73.15])
	by watermelon.icu.uzh.ch (Postfix) with ESMTP id BD8434A1C5E
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 23:31:39 +0100 (CET)
Date: Tue, 28 Oct 2008 23:31:39 +0100 (CET)
From: =?utf-8?Q?Sebastian_M=C3=BCller?= <sebi@icu.uzh.ch>
To: java-user@lucene.apache.org
Message-ID: <33020772.8821225233099614.JavaMail.root@watermelon>
In-Reply-To: <4907923E.6080505@nuix.com>
Subject: Re: Query Search returns always the same id
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Originating-IP: [130.60.73.15]
X-Mailer: Zimbra 5.0.10_GA_2638.UBUNTU6 (ZimbraWebClient - FF3.0 (Win)/5.0.10_GA_2638.UBUNTU6)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO
X-Old-Spam-Status: No, score=-2.369 tagged_above=-10 required=3 tests=[AWL=0.230,
	BAYES_00=-2.599]

hmm yes thats true. omg. but in meantime i solved the problem by making a n=
ew database query to the message using the ids i extract with the search. t=
hx a lot for the help.

----- Urspr=C3=BCngliche Mail -----
Von: "Daniel Noll" <daniel@nuix.com>
An: java-user@lucene.apache.org
Gesendet: Dienstag, 28. Oktober 2008 23:29:18 GMT +01:00 Amsterdam/Berlin/B=
ern/Rom/Stockholm/Wien
Betreff: Re: Query Search returns always the same id

Sebastian M=C3=BCller wrote:
> Hi Erick
>=20
> thank you for you fast reply. the problem with the ID and the wrong
> results is solved. that was kinda noob failure of me ;)
>=20
> but the message is still null. but i think somehow i can fix that ;)

You had passed Field.Store.NO for the message, so it isn't particularly=20
surprising that it isn't stored. ;-)

Daniel


--=20
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


--=20
Sebastian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 23:12:41 2008
Return-Path: <java-user-return-36859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76521 invoked from network); 28 Oct 2008 23:12:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 23:12:41 -0000
Received: (qmail 50861 invoked by uid 500); 28 Oct 2008 23:12:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50826 invoked by uid 500); 28 Oct 2008 23:12:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50815 invoked by uid 99); 28 Oct 2008 23:12:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 16:12:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [8.7.216.163] (HELO mta1.evaultmail.com) (8.7.216.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 23:11:25 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ap4DAJw5B0nR+dAJgWdsb2JhbACUAwEBFiIutlWDUA
X-IronPort-AV: E=Sophos;i="4.33,501,1220252400"; 
   d="scan'208";a="29575352"
Received: from mail.seagateservices.com ([209.249.208.9])
  by smtp1.seagateservices.com with ESMTP; 28 Oct 2008 16:11:52 -0700
Received: from SSV-MAILBOXES.corp.ssv.com ([10.100.70.45]) by
 ssv-mail-hub.corp.ssv.com ([10.100.70.35]) with mapi; Tue, 28 Oct 2008
 16:11:51 -0700
From: Tom Saulpaugh <Tom.Saulpaugh@i365.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 28 Oct 2008 16:11:49 -0700
Subject: RE: Change the merge factor for an existing index?
Thread-Topic: Change the merge factor for an existing index?
Thread-Index: Ack5PVKOw7VU8Xq5TaCTCXvMkk6K5QAFMnXw
Message-ID: <CDE2EE927B8B334995EB357C23D08D950B19C7DF48@SSV-MAILBOXES.corp.ssv.com>
In-Reply-To: <AF03D4E1-A8C8-4C35-BF50-27656CFCE87F@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Also, Can I change maxMergeDocs?
Thanks.
Tom

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]
Sent: Tuesday, October 28, 2008 1:39 PM
To: java-user@lucene.apache.org
Subject: Re: Change the merge factor for an existing index?

Just change it. Merges will start obeying the new merge factor
seamlessly.

- Mark


On Oct 27, 2008, at 1:07 PM, Tom Saulpaugh <Tom.Saulpaugh@i365.com>
wrote:

> Hello,
>
> We are currently using lucene v2.1 and we are planning to upgrade to
> lucene v2.4.
> Can we change the merge factor for an existing index and then add
> more documents to that index?  Is there some kind of upgrade path
> like using optimize to move an existing index to a different merge
> factor?
>
> Thanks,
>
> Tom
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 28 23:18:07 2008
Return-Path: <java-user-return-36860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78234 invoked from network); 28 Oct 2008 23:18:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2008 23:18:07 -0000
Received: (qmail 64930 invoked by uid 500); 28 Oct 2008 23:18:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64902 invoked by uid 500); 28 Oct 2008 23:18:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64891 invoked by uid 99); 28 Oct 2008 23:18:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 16:18:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 23:16:50 +0000
Received: from sparkling.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id A66551631E8A
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 18:17:29 -0500 (CDT)
Message-ID: <49079D87.4090809@atlassian.com>
Date: Wed, 29 Oct 2008 10:17:27 +1100
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IllegalStateEx thrown when calling close
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com>
In-Reply-To: <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael,

https://issues.apache.org/jira/browse/LUCENE-1429

Thanks mate. I'll try and work out the client handling policy of the 
IndexWriter calls. I see that flush now aborts the transaction as well...

cheers,
jed.

Michael McCandless wrote:
>
> Woops, you're right: this is a bug.  I'll open an issue, fold in your
> nice test case & fix it.  Thanks Jed!
>
> On hitting OOM, IndexWriter marks that its internal state (buffered
> documents, deletions) may be corrupt and so it rollsback to the last
> commit instead of flushing a new segment.
>
> To workaround this, on catching an OOME on any of IndexWriter's
> methods, you should 1) forcibly remove the write lock
> (IndexWriter.unlock static method) and then 2) not call any methods on
> the old writer.  Even if the old writer has concurrent merges running,
> they will refuse to commit on seeing that an OOM had occurred.
>
> Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 00:24:34 2008
Return-Path: <java-user-return-36861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11245 invoked from network); 29 Oct 2008 00:24:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 00:24:34 -0000
Received: (qmail 28816 invoked by uid 500); 29 Oct 2008 00:24:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28783 invoked by uid 500); 29 Oct 2008 00:24:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28772 invoked by uid 99); 29 Oct 2008 00:24:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 17:24:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 00:23:17 +0000
Received: by gxk6 with SMTP id 6so105006gxk.5
        for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 17:22:55 -0700 (PDT)
Received: by 10.100.143.12 with SMTP id q12mr8010145and.22.1225239775314;
        Tue, 28 Oct 2008 17:22:55 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 3sm1929686hsw.16.2008.10.28.17.22.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 28 Oct 2008 17:22:54 -0700 (PDT)
Message-Id: <05560314-92E8-416E-87B0-5F86BC4DAF01@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <49079D87.4090809@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IllegalStateEx thrown when calling close
Date: Tue, 28 Oct 2008 20:22:51 -0400
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <49079D87.4090809@atlassian.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry I forgot to follow up with the issue, but yup that's the one.

I did also fix IW to disallow flush after it has seen an OOME.

Mike

Jed Wesley-Smith wrote:

> Michael,
>
> https://issues.apache.org/jira/browse/LUCENE-1429
>
> Thanks mate. I'll try and work out the client handling policy of the  
> IndexWriter calls. I see that flush now aborts the transaction as  
> well...
>
> cheers,
> jed.
>
> Michael McCandless wrote:
>>
>> Woops, you're right: this is a bug.  I'll open an issue, fold in your
>> nice test case & fix it.  Thanks Jed!
>>
>> On hitting OOM, IndexWriter marks that its internal state (buffered
>> documents, deletions) may be corrupt and so it rollsback to the last
>> commit instead of flushing a new segment.
>>
>> To workaround this, on catching an OOME on any of IndexWriter's
>> methods, you should 1) forcibly remove the write lock
>> (IndexWriter.unlock static method) and then 2) not call any methods  
>> on
>> the old writer.  Even if the old writer has concurrent merges  
>> running,
>> they will refuse to commit on seeing that an OOM had occurred.
>>
>> Mike
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 00:56:39 2008
Return-Path: <java-user-return-36862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19478 invoked from network); 29 Oct 2008 00:56:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 00:56:39 -0000
Received: (qmail 46541 invoked by uid 500); 29 Oct 2008 00:56:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46508 invoked by uid 500); 29 Oct 2008 00:56:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46497 invoked by uid 99); 29 Oct 2008 00:56:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 17:56:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 00:55:22 +0000
Received: from sparkling.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id B6BDD1631E8A
	for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 19:56:01 -0500 (CDT)
Message-ID: <4907B49F.7020309@atlassian.com>
Date: Wed, 29 Oct 2008 11:55:59 +1100
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IllegalStateEx thrown when calling close
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <49079D87.4090809@atlassian.com> <05560314-92E8-416E-87B0-5F86BC4DAF01@mikemccandless.com>
In-Reply-To: <05560314-92E8-416E-87B0-5F86BC4DAF01@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, I saw the change to flush(). Trying to work out the correct 
strategy for our IndexWriter handling now. We probably should not be 
using autocommit for our writers.

It was brought up by others that the OutOfMemoryError handling 
requirements are a fairly strong part of the contract now - but aren't 
documented. Do you think the last paragraph below should be incorporated 
into the class JavaDoc?

cheers,
jed.

Michael McCandless wrote:
>
> Sorry I forgot to follow up with the issue, but yup that's the one.
>
> I did also fix IW to disallow flush after it has seen an OOME.
>
> Mike
>
> Jed Wesley-Smith wrote:
>
>> Michael,
>>
>> https://issues.apache.org/jira/browse/LUCENE-1429
>>
>> Thanks mate. I'll try and work out the client handling policy of the 
>> IndexWriter calls. I see that flush now aborts the transaction as 
>> well...
>>
>> cheers,
>> jed.
>>
>> Michael McCandless wrote:
>>>
>>> Woops, you're right: this is a bug.  I'll open an issue, fold in your
>>> nice test case & fix it.  Thanks Jed!
>>>
>>> On hitting OOM, IndexWriter marks that its internal state (buffered
>>> documents, deletions) may be corrupt and so it rollsback to the last
>>> commit instead of flushing a new segment.
>>>
>>> To workaround this, on catching an OOME on any of IndexWriter's
>>> methods, you should 1) forcibly remove the write lock
>>> (IndexWriter.unlock static method) and then 2) not call any methods on
>>> the old writer.  Even if the old writer has concurrent merges running,
>>> they will refuse to commit on seeing that an OOM had occurred.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 02:42:19 2008
Return-Path: <java-user-return-36863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76709 invoked from network); 29 Oct 2008 02:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 02:42:18 -0000
Received: (qmail 12118 invoked by uid 500); 29 Oct 2008 02:42:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12087 invoked by uid 500); 29 Oct 2008 02:42:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 77974 invoked by uid 99); 28 Oct 2008 20:35:40 -0000
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bwaldiya@cisco.com designates 64.104.129.195 as permitted sender)
X-IronPort-AV: E=Sophos;i="4.33,501,1220227200"; 
   d="scan'208,217";a="32021537"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9393C.82660859"
Subject: Lucene Index taking a lot to time 
Date: Wed, 29 Oct 2008 02:03:57 +0530
Message-ID: <621ABB1EF4B0404FAB81D083A82006FD067E3B89@xmb-blr-412.apac.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Index taking a lot to time 
Thread-Index: Ack5PIC0l3qC7VVmSUSAejapJceuLQ==
From: "Birendar Singh Waldiya -X (bwaldiya - TCS at Cisco)" <bwaldiya@cisco.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Oct 2008 20:34:00.0640 (UTC) FILETIME=[82769400:01C9393C]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=8243; t=1225226041; x=1226090041;
	c=relaxed/simple; s=inddkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=bwaldiya@cisco.com;
	z=From:=20=22Birendar=20Singh=20Waldiya=20-X=20(bwaldiya=20-
	=20TCS=20at=20Cisco)=22=20<bwaldiya@cisco.com>
	|Subject:=20Lucene=20Index=20taking=20a=20lot=20to=20time=2
	0
	|Sender:=20;
	bh=uJGFJgVvHt9+qdVdzgg3meH1ah9zhPoJ2uaDCenTZDE=;
	b=hUzmb7f1iCnK1LDdaCYg6LAhpCjoJXmuGkks7Rr9xTNIV7HokiWUsEelqS
	tvBAO0zUiaZL3qe4XgBkx78EMhDxKnOR+O53ERPSquWje6f3QP5f92wLMDfM
	IHETiS1Don;
Authentication-Results: ind-dkim-1; header.From=bwaldiya@cisco.com; dkim=pass (
	sig from cisco.com/inddkim1002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9393C.82660859
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi Gurus,=20
=20
We are using Lucene for creating indexes on some database column  and
suddenly my indexcreation time sems to have increased considerably,=20
=20
Here is the code snippet we are using ,  we are wondering how come the
index creation has increaed suddenly..any pointer please=20
=20
Date start =3D new Date();
   Map inputParams =3D new HashMap();
         IndexWriter writer =3D new
IndexWriter(SDSUtil.getSDLuceneIndexDirectory(), new
StandardAnalyzer(),true, IndexWriter.MaxFieldLength.UNLIMITED);
   //IndexWriter writer =3D new
IndexWriter(SDSUtil.getSDLuceneIndexDirectory(), new
StandardAnalyzer());
   logger.info("Adding records - Before creating Lucene Index");
   CreateLuceneIndexPr createLuceneIndexPr =3D new
CreateLuceneIndexPr(sdsJdbcTemplate, writer);
   Map outParams =3D createLuceneIndexPr.execute(inputParams);
  =20
   //now add partner Exceptions also to index
   List ptnrExcpnList =3D getPartnerExceptionList("vipmistr"); //TODO:
change it:passing userId as blank to get all prtnr Excpns
  =20
  for (Iterator iter =3D ptnrExcpnList.iterator(); iter.hasNext();) {
    PartnerException partnerException =3D (PartnerException) =
iter.next();
    Document doc =3D new Document();
    doc.add(new Field("intd_id", "",
org.apache.lucene.document.Field.Store.NO,
org.apache.lucene.document.Field.Index.NOT_ANALYZED));
             doc.add(new Field("cntry_id", "",
org.apache.lucene.document.Field.Store.NO,
org.apache.lucene.document.Field.Index.NOT_ANALYZED));
             doc.add(new Field("Technology_Node", "",
org.apache.lucene.document.Field.Store.YES,
org.apache.lucene.document.Field.Index.NO));
             doc.add(new Field("product_id", "",
org.apache.lucene.document.Field.Store.NO,
org.apache.lucene.document.Field.Index.NOT_ANALYZED));
             doc.add(new Field("RULE_AUT_SPEC", "",
org.apache.lucene.document.Field.Store.YES,
org.apache.lucene.document.Field.Index.NO));
             doc.add(new Field("ptnrExcpn",
partnerException.getPgtmvBeId(),
org.apache.lucene.document.Field.Store.YES,
org.apache.lucene.document.Field.Index.NOT_ANALYZED));
             writer.addDocument(doc);
   }
   logger.info("Optimizing...");
   writer.optimize();
   writer.close();
   Date end =3D new Date();
   logger.info("#################Index Create Time :-->>>>> " +
(end.getTime() - start.getTime()) + " milliseconds");
  } catch (Exception e) {
   if (e instanceof DAOException) {
    throw (DAOException) e;
   } else {
    e.printStackTrace();
    throw new DAOSystemException("error.admin.error",e);
   }
  }
 }
=20
=20
=20
--------------------------
Thanks & Regards=20
Birendar=20
Ph#919-392-5181
=20

------_=_NextPart_001_01C9393C.82660859--

From java-user-return-36864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 05:02:38 2008
Return-Path: <java-user-return-36864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25182 invoked from network); 29 Oct 2008 05:02:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 05:02:38 -0000
Received: (qmail 96145 invoked by uid 500); 29 Oct 2008 05:02:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96119 invoked by uid 500); 29 Oct 2008 05:02:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96108 invoked by uid 99); 29 Oct 2008 05:02:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 22:02:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 05:01:18 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3026033rvb.5
        for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 22:01:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=FnxOtVSm0L6TEe0b00wW1ADyslyfXaSh9ucfF1bE4JQ=;
        b=gz5Rcn8t/U6LsoODvvvV8n3rMRND/gpY0TxMBcd03Thy4QgQLh5UjGiV9L7nT/Irf+
         fzbwlaBex++KYePAzSPFXJ+KGFoXVAxurP6CTfCxW86/9JubH851gF5SPeJLOQvzBDTu
         syDz7evDYtIDFbZ+MwTnEw84lvTeZ0MNLJvRc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FAtf4roQgzdCy62fRcM+CTv5GEMWcj5QxDjZ6cTSEoDcme3Kw8PySEiskEUv10+E5R
         zF9LOumhqASjGCBO67x+djMtCJD0PX+qku0mXRBO+dt5pcA5loLfF9BjKMAoudTJNwVM
         UiNIp+sk7iOzwRXS+5ReEvpV+oWk2hRwvvsBw=
Received: by 10.141.171.1 with SMTP id y1mr4627709rvo.38.1225256517666;
        Tue, 28 Oct 2008 22:01:57 -0700 (PDT)
Received: by 10.141.170.2 with HTTP; Tue, 28 Oct 2008 22:01:57 -0700 (PDT)
Message-ID: <867513fe0810282201o1533af74la7b254cb8451b756@mail.gmail.com>
Date: Wed, 29 Oct 2008 10:31:57 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Index taking a lot to time
In-Reply-To: <621ABB1EF4B0404FAB81D083A82006FD067E3B89@xmb-blr-412.apac.cisco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_107140_8038160.1225256517660"
References: <621ABB1EF4B0404FAB81D083A82006FD067E3B89@xmb-blr-412.apac.cisco.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_107140_8038160.1225256517660
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Was there something that you changed or some disk issues?
The code seemed fine. Moreover, I could have asked the version of lucene you
are using, but that seems out of question for the issue as you say that it
is just the same indexer running on the same source and machine that is now
taking longer.
Correct me if 'm wrong!
Could you also add markers(prints) to check what is it that is taking more
time. Plus in case you are using an older variant of lucene (or had upgraded
recently) that could be the issue. i.e. you might be having 2 jars in the
same directory(your classpath) which now picks up older lucene, thereby
taking more time as compared to the older thing(which had no conflict in the
jar)

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Oct 29, 2008 at 2:03 AM, Birendar Singh Waldiya -X (bwaldiya - TCS
at Cisco) <bwaldiya@cisco.com> wrote:

> Hi Gurus,
>
> We are using Lucene for creating indexes on some database column  and
> suddenly my indexcreation time sems to have increased considerably,
>
> Here is the code snippet we are using ,  we are wondering how come the
> index creation has increaed suddenly..any pointer please
>
> Date start = new Date();
>   Map inputParams = new HashMap();
>         IndexWriter writer = new
> IndexWriter(SDSUtil.getSDLuceneIndexDirectory(), new
> StandardAnalyzer(),true, IndexWriter.MaxFieldLength.UNLIMITED);
>   //IndexWriter writer = new
> IndexWriter(SDSUtil.getSDLuceneIndexDirectory(), new
> StandardAnalyzer());
>   logger.info("Adding records - Before creating Lucene Index");
>   CreateLuceneIndexPr createLuceneIndexPr = new
> CreateLuceneIndexPr(sdsJdbcTemplate, writer);
>   Map outParams = createLuceneIndexPr.execute(inputParams);
>
>   //now add partner Exceptions also to index
>   List ptnrExcpnList = getPartnerExceptionList("vipmistr"); //TODO:
> change it:passing userId as blank to get all prtnr Excpns
>
>  for (Iterator iter = ptnrExcpnList.iterator(); iter.hasNext();) {
>    PartnerException partnerException = (PartnerException) iter.next();
>    Document doc = new Document();
>    doc.add(new Field("intd_id", "",
> org.apache.lucene.document.Field.Store.NO,
> org.apache.lucene.document.Field.Index.NOT_ANALYZED));
>             doc.add(new Field("cntry_id", "",
> org.apache.lucene.document.Field.Store.NO,
> org.apache.lucene.document.Field.Index.NOT_ANALYZED));
>             doc.add(new Field("Technology_Node", "",
> org.apache.lucene.document.Field.Store.YES,
> org.apache.lucene.document.Field.Index.NO));
>             doc.add(new Field("product_id", "",
> org.apache.lucene.document.Field.Store.NO,
> org.apache.lucene.document.Field.Index.NOT_ANALYZED));
>             doc.add(new Field("RULE_AUT_SPEC", "",
> org.apache.lucene.document.Field.Store.YES,
> org.apache.lucene.document.Field.Index.NO));
>             doc.add(new Field("ptnrExcpn",
> partnerException.getPgtmvBeId(),
> org.apache.lucene.document.Field.Store.YES,
> org.apache.lucene.document.Field.Index.NOT_ANALYZED));
>             writer.addDocument(doc);
>   }
>   logger.info("Optimizing...");
>   writer.optimize();
>   writer.close();
>   Date end = new Date();
>   logger.info("#################Index Create Time :-->>>>> " +
> (end.getTime() - start.getTime()) + " milliseconds");
>  } catch (Exception e) {
>   if (e instanceof DAOException) {
>    throw (DAOException) e;
>   } else {
>    e.printStackTrace();
>    throw new DAOSystemException("error.admin.error",e);
>   }
>  }
>  }
>
>
>
> --------------------------
> Thanks & Regards
> Birendar
> Ph#919-392-5181
>
>

------=_Part_107140_8038160.1225256517660--

From java-user-return-36865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 05:33:47 2008
Return-Path: <java-user-return-36865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42991 invoked from network); 29 Oct 2008 05:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 05:33:46 -0000
Received: (qmail 24094 invoked by uid 500); 29 Oct 2008 05:33:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24075 invoked by uid 500); 29 Oct 2008 05:33:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24064 invoked by uid 99); 29 Oct 2008 05:33:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 22:33:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hadi4i@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 05:32:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3036261rvb.5
        for <java-user@lucene.apache.org>; Tue, 28 Oct 2008 22:33:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=D9+dBanN2S/f9xGlBTFvG6sy0OcuNJ9v49kTRJyTkmQ=;
        b=MZgzXAZN9AzYpszzxj5mi+BIowX42ru4QIdqnTk55L5ekHQlNLDJTW1Jdvi+z+mZio
         8CbycaY35PotaQLhx+DGAnL0XJrAl+R0uclxuX/AN3yHAG3cMnrEFnLUfLjrTUhYq1BD
         Y2OdbLulr9pzy1FKdIuynJ1CZ0P3U3e4vWYa4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qk/Mdl/srJxYLKE1W6GHIvBphYR/adMsrIkjSL+9Sxai6mg+x7SONxfU54NbIdkriV
         VY18RaMZN89QjoMbbP9Bj+2D+yUpLIbqDYHFcWutQ3cKkA/br8lLiqDh8knrcDgJImPp
         0U2qzWQMfzxsfM3Hq539JCQlGtxR8Uj8fgEfc=
Received: by 10.141.170.10 with SMTP id x10mr4640777rvo.140.1225258387121;
        Tue, 28 Oct 2008 22:33:07 -0700 (PDT)
Received: by 10.141.26.2 with HTTP; Tue, 28 Oct 2008 22:33:07 -0700 (PDT)
Message-ID: <18df68a40810282233o72afad1cka3566da253f5db5b@mail.gmail.com>
Date: Wed, 29 Oct 2008 09:03:07 +0330
From: "Hadi Forghani" <hadi4i@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Query returns always the first ID
In-Reply-To: <27355892.8761225227000296.JavaMail.root@watermelon>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104476_32052219.1225258387116"
References: <27355892.8761225227000296.JavaMail.root@watermelon>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104476_32052219.1225258387116
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

your problem is about new one Document for all sourcefiles
i think you have 2 solution
1.new document in first step of loop(like below code)
[code]
               for (int i =3D 0; i < sourcefiles.size(); i++) {
                       for (int j =3D 0; j <
sourcefiles.elementAt(i).getNumberOfRevisions(); j++) {
                               Document doc =3D new Document();
[/code]
2.after iwriter.addDocument, remove all fields in doc

On Wed, Oct 29, 2008 at 12:20 AM, Sebastian M=FCller <sebi@icu.uzh.ch> wrot=
e:

> hi folks,
>
> i have great trouble while using lucene to implement search functionality
> to my application:
>
> this way i index:
> [code]
> public void indexData() throws CorruptIndexException,
> LockObtainFailedException, IOException {
>                Analyzer analyzer =3D new StandardAnalyzer();
>                IndexWriter iwriter =3D new IndexWriter(indexFolder, analy=
zer,
> true);
>                iwriter.setMaxFieldLength(25000);
>                Document doc =3D new Document();
>                for (int i =3D 0; i < sourcefiles.size(); i++) {
>                        for (int j =3D 0; j <
> sourcefiles.elementAt(i).getNumberOfRevisions(); j++) {
>                                doc.add(new Field("id",
> sourcefiles.elementAt(i).getID(j), Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>                                doc.add(new Field("message",
> sourcefiles.elementAt(i).getCommitMessage(j), Field.Store.NO,
> Field.Index.TOKENIZED));
>                                iwriter.addDocument(doc);
>                                System.out.println("Indexed: Source: " +
> (i+1) + " Revision: "  + (j+1));
>
>  System.out.println(sourcefiles.elementAt(i).getCommitMessage(j));
>
>  System.out.println(sourcefiles.elementAt(i).getID(j));
>                        }
>                }
>                iwriter.optimize();
>                iwriter.close();
>        }
> [/code]
>
> and this way i make the query
>
> [code]
> public void luceneSearch(String queryString) throws CorruptIndexException=
,
> IOException, ParseException {
>                System.out.println("Searching started");
>                IndexSearcher isearcher =3D new IndexSearcher(indexFolder)=
;
>                Analyzer analyzer =3D new StandardAnalyzer();
>                QueryParser parser =3D new QueryParser("message", analyzer=
);
>                org.apache.lucene.search.Query query =3D
> parser.parse(queryString);
>                Hits hits =3D isearcher.search(query);
>
>                if(hits.length() > 0) {
>                        System.out.println("found: " + hits.length() + "
> documents.");
>                        for (int i =3D 0; i < hits.length(); i++) {
>                                System.out.println((i + 1) + ". " +
> hits.doc(i).get("id") + hits.doc(i).getField("message"));
>                        }
>                } else {
>                        System.out.println("No matching documents found.")=
;
>                }
>        }
> [/code]
>
> my  problem is, that the query always returns a lot of too much results.
> and the other problem is, the id is always for every result in the list t=
he
> same id, namly the first i added to the writer. and the message is always
> null.
>
> while adding i check with sysout that all the ids are different and the
> messages arent null
>
> whats going wrong?? thx for your hints
>
> --
> Sebastian
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_104476_32052219.1225258387116--

From java-user-return-36866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 06:01:59 2008
Return-Path: <java-user-return-36866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62099 invoked from network); 29 Oct 2008 06:01:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 06:01:59 -0000
Received: (qmail 43519 invoked by uid 500); 29 Oct 2008 06:01:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42507 invoked by uid 500); 29 Oct 2008 06:01:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42496 invoked by uid 99); 29 Oct 2008 06:01:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2008 23:01:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 06:00:43 +0000
Received: from sparkling.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id 854E91631E90
	for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 01:01:20 -0500 (CDT)
Message-ID: <4907FC2D.2070709@atlassian.com>
Date: Wed, 29 Oct 2008 17:01:17 +1100
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IllegalStateEx thrown when calling close
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com>
In-Reply-To: <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
>
> To workaround this, on catching an OOME on any of IndexWriter's
> methods, you should 1) forcibly remove the write lock
> (IndexWriter.unlock static method) 

IndexWriter.unlock(*) is 2.4 only.

Use the following instead:

    directory.makeLock(IndexWriter.WRITE_LOCK_NAME).release();

cheers,
jed.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 09:37:00 2008
Return-Path: <java-user-return-36867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52216 invoked from network); 29 Oct 2008 09:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 09:37:00 -0000
Received: (qmail 26564 invoked by uid 500); 29 Oct 2008 09:36:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26526 invoked by uid 500); 29 Oct 2008 09:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26515 invoked by uid 99); 29 Oct 2008 09:36:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 02:36:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 09:35:42 +0000
Received: by gxk6 with SMTP id 6so438374gxk.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 02:35:20 -0700 (PDT)
Received: by 10.90.54.16 with SMTP id c16mr4956035aga.1.1225272920675;
        Wed, 29 Oct 2008 02:35:20 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 9sm4463051agc.31.2008.10.29.02.35.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 02:35:19 -0700 (PDT)
Message-Id: <EF97CC01-762E-4F20-94EA-AA1948657A2A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4907FC2D.2070709@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IllegalStateEx thrown when calling close
Date: Wed, 29 Oct 2008 05:35:18 -0400
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <4907FC2D.2070709@atlassian.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Or you can use IndexReader.unlock.

Mike

Jed Wesley-Smith wrote:

> Michael McCandless wrote:
>>
>> To workaround this, on catching an OOME on any of IndexWriter's
>> methods, you should 1) forcibly remove the write lock
>> (IndexWriter.unlock static method)
>
> IndexWriter.unlock(*) is 2.4 only.
>
> Use the following instead:
>
>   directory.makeLock(IndexWriter.WRITE_LOCK_NAME).release();
>
> cheers,
> jed.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 09:42:31 2008
Return-Path: <java-user-return-36868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55527 invoked from network); 29 Oct 2008 09:42:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 09:42:31 -0000
Received: (qmail 35621 invoked by uid 500); 29 Oct 2008 09:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35589 invoked by uid 500); 29 Oct 2008 09:42:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35578 invoked by uid 99); 29 Oct 2008 09:42:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 02:42:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 09:41:12 +0000
Received: by gxk6 with SMTP id 6so441629gxk.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 02:40:51 -0700 (PDT)
Received: by 10.100.131.16 with SMTP id e16mr1574129and.67.1225273251533;
        Wed, 29 Oct 2008 02:40:51 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id d38sm7342872and.20.2008.10.29.02.40.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 02:40:50 -0700 (PDT)
Message-Id: <E4E73EE5-0A99-4632-A25A-6741D715686C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <621ABB1EF4B0404FAB81D083A82006FD067E3B89@xmb-blr-412.apac.cisco.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene Index taking a lot to time 
Date: Wed, 29 Oct 2008 05:40:49 -0400
References: <621ABB1EF4B0404FAB81D083A82006FD067E3B89@xmb-blr-412.apac.cisco.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It looks like this is using Lucene 2.4.0.

Indexing time suddenly increased with respect to what baseline?  2.3?   
A previous run on 2.4?

Mike

Birendar Singh Waldiya -X (bwaldiya - TCS at Cisco) wrote:

> Hi Gurus,
>
> We are using Lucene for creating indexes on some database column  and
> suddenly my indexcreation time sems to have increased considerably,
>
> Here is the code snippet we are using ,  we are wondering how come the
> index creation has increaed suddenly..any pointer please
>
> Date start = new Date();
>   Map inputParams = new HashMap();
>         IndexWriter writer = new
> IndexWriter(SDSUtil.getSDLuceneIndexDirectory(), new
> StandardAnalyzer(),true, IndexWriter.MaxFieldLength.UNLIMITED);
>   //IndexWriter writer = new
> IndexWriter(SDSUtil.getSDLuceneIndexDirectory(), new
> StandardAnalyzer());
>   logger.info("Adding records - Before creating Lucene Index");
>   CreateLuceneIndexPr createLuceneIndexPr = new
> CreateLuceneIndexPr(sdsJdbcTemplate, writer);
>   Map outParams = createLuceneIndexPr.execute(inputParams);
>
>   //now add partner Exceptions also to index
>   List ptnrExcpnList = getPartnerExceptionList("vipmistr"); //TODO:
> change it:passing userId as blank to get all prtnr Excpns
>
>  for (Iterator iter = ptnrExcpnList.iterator(); iter.hasNext();) {
>    PartnerException partnerException = (PartnerException) iter.next();
>    Document doc = new Document();
>    doc.add(new Field("intd_id", "",
> org.apache.lucene.document.Field.Store.NO,
> org.apache.lucene.document.Field.Index.NOT_ANALYZED));
>             doc.add(new Field("cntry_id", "",
> org.apache.lucene.document.Field.Store.NO,
> org.apache.lucene.document.Field.Index.NOT_ANALYZED));
>             doc.add(new Field("Technology_Node", "",
> org.apache.lucene.document.Field.Store.YES,
> org.apache.lucene.document.Field.Index.NO));
>             doc.add(new Field("product_id", "",
> org.apache.lucene.document.Field.Store.NO,
> org.apache.lucene.document.Field.Index.NOT_ANALYZED));
>             doc.add(new Field("RULE_AUT_SPEC", "",
> org.apache.lucene.document.Field.Store.YES,
> org.apache.lucene.document.Field.Index.NO));
>             doc.add(new Field("ptnrExcpn",
> partnerException.getPgtmvBeId(),
> org.apache.lucene.document.Field.Store.YES,
> org.apache.lucene.document.Field.Index.NOT_ANALYZED));
>             writer.addDocument(doc);
>   }
>   logger.info("Optimizing...");
>   writer.optimize();
>   writer.close();
>   Date end = new Date();
>   logger.info("#################Index Create Time :-->>>>> " +
> (end.getTime() - start.getTime()) + " milliseconds");
>  } catch (Exception e) {
>   if (e instanceof DAOException) {
>    throw (DAOException) e;
>   } else {
>    e.printStackTrace();
>    throw new DAOSystemException("error.admin.error",e);
>   }
>  }
> }
>
>
>
> --------------------------
> Thanks & Regards
> Birendar
> Ph#919-392-5181
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 09:48:20 2008
Return-Path: <java-user-return-36869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58223 invoked from network); 29 Oct 2008 09:48:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 09:48:20 -0000
Received: (qmail 48775 invoked by uid 500); 29 Oct 2008 09:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48737 invoked by uid 500); 29 Oct 2008 09:48:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48726 invoked by uid 99); 29 Oct 2008 09:48:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 02:48:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 09:47:04 +0000
Received: by yx-out-2324.google.com with SMTP id 3so699450yxj.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 02:47:32 -0700 (PDT)
Received: by 10.90.32.14 with SMTP id f14mr7158959agf.118.1225273651179;
        Wed, 29 Oct 2008 02:47:31 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 18sm4498709agb.12.2008.10.29.02.47.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 02:47:30 -0700 (PDT)
Message-Id: <4CFED863-992E-4596-9E90-7E395F3BCB51@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4907B49F.7020309@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IllegalStateEx thrown when calling close
Date: Wed, 29 Oct 2008 05:47:28 -0400
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <49079D87.4090809@atlassian.com> <05560314-92E8-416E-87B0-5F86BC4DAF01@mikemccandless.com> <4907B49F.7020309@atlassian.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Jed Wesley-Smith wrote:

> Yeah, I saw the change to flush(). Trying to work out the correct  
> strategy for our IndexWriter handling now. We probably should not be  
> using autocommit for our writers.

autoCommit=true is deprecated as of 2.4.0, and will go away when we  
finally get to 3.0, so I think switching to false, and possibly  
changing your app to periodically commit() if you were relying on  
those semantics, is a good step forward.

> It was brought up by others that the OutOfMemoryError handling  
> requirements are a fairly strong part of the contract now - but  
> aren't documented. Do you think the last paragraph below should be  
> incorporated into the class JavaDoc?

Well, that paragraph is a workaround for the issue you hit, which only  
applies when autoCommit is true, so going forward (or, if you use  
autoCommit=false) you should simply close the IndexWriter.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 11:16:20 2008
Return-Path: <java-user-return-36870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4934 invoked from network); 29 Oct 2008 11:16:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 11:16:18 -0000
Received: (qmail 79915 invoked by uid 500); 29 Oct 2008 11:16:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79884 invoked by uid 500); 29 Oct 2008 11:16:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79873 invoked by uid 99); 29 Oct 2008 11:16:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 04:16:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.189 as permitted sender)
Received: from [209.85.142.189] (HELO ti-out-0910.google.com) (209.85.142.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 11:15:03 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1874874tic.11
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 04:15:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=D0JFd4QRaydtIX18NY/1L/hl/Bpun+8eTvzDp6phKNE=;
        b=f8oSMif0s8kFzNGK5gY/JxdoM3cqXB4+fPkTT11g9IfDfiApPbJwLxPF1fZxGT0H87
         bqJieTb0snjR0+0DEl2AOlj7TJSgskh31I3wZngOjb147VjUxlsNCU6adST8Re4kurqm
         +WKJHMmN8oY1FeeeTlfAejMjmXtYKVEBAECuo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=G6tmQXk4dR8LKp5vcezP+d5xcMBCqV/TQCGMZ57l/DpP3ZZlJ8Gy3BLykuRgLZbbc5
         krsdkKtVpvtx01KbjT4kTir48fjELKt6xgRHx5wPBUPKhooIdTqeXfi+24twNP54R7f/
         Vfo2zsiuxPRVLLKvQn7w/EPiiyvXHMjhWws84=
Received: by 10.110.49.2 with SMTP id w2mr5680852tiw.56.1225278942638;
        Wed, 29 Oct 2008 04:15:42 -0700 (PDT)
Received: by 10.110.109.13 with HTTP; Wed, 29 Oct 2008 04:15:42 -0700 (PDT)
Message-ID: <6fc71b230810290415r6e676177i26894a9f41402bf0@mail.gmail.com>
Date: Wed, 29 Oct 2008 16:45:42 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Querying wildcard
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_151929_25515739.1225278942627"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_151929_25515739.1225278942627
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I have been wanting to do a wildcard search with * as a first letter on an
index.
Is there a way out except for setAllowLeadingWildcard() of QueryParser to
true? Because, i have heard it is an expensive operation.

Thanks
Aditi

------=_Part_151929_25515739.1225278942627--

From java-user-return-36871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 12:20:13 2008
Return-Path: <java-user-return-36871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27237 invoked from network); 29 Oct 2008 12:20:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 12:20:13 -0000
Received: (qmail 58328 invoked by uid 500); 29 Oct 2008 12:20:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58293 invoked by uid 500); 29 Oct 2008 12:20:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58282 invoked by uid 99); 29 Oct 2008 12:20:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 05:20:10 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 12:18:56 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1748910rne.4
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 05:19:24 -0700 (PDT)
Received: by 10.90.68.20 with SMTP id q20mr3899583aga.99.1225282764581;
        Wed, 29 Oct 2008 05:19:24 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm4734005aga.13.2008.10.29.05.19.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 05:19:23 -0700 (PDT)
Message-Id: <9142ED4C-D5C4-4353-8D35-9DFF43E637FE@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <CDE2EE927B8B334995EB357C23D08D950B19C7DF48@SSV-MAILBOXES.corp.ssv.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Change the merge factor for an existing index?
Date: Wed, 29 Oct 2008 08:19:22 -0400
References: <CDE2EE927B8B334995EB357C23D08D950B19C7DF48@SSV-MAILBOXES.corp.ssv.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It's fine to change any of IW's parameters on an existing index.   
Nothing will break.

However, in general, such changes won't be retroactive: they only  
apply to future actions the IW will take.

So, changing maxMergeDocs will only prevent future merges from  
producing segments larger than that size.

But mergeFactor is an exception to this rule: if you suddenly create  
an IW with a lower mergeFactor, the MergePolicy will likely look at  
your current index and choose to do a bunch of merges (if your index  
has alot of segments) which ConcurrentMergeScheduler will then run,  
concurrently.

Mike

Tom Saulpaugh wrote:

> Also, Can I change maxMergeDocs?
> Thanks.
> Tom
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]
> Sent: Tuesday, October 28, 2008 1:39 PM
> To: java-user@lucene.apache.org
> Subject: Re: Change the merge factor for an existing index?
>
> Just change it. Merges will start obeying the new merge factor
> seamlessly.
>
> - Mark
>
>
> On Oct 27, 2008, at 1:07 PM, Tom Saulpaugh <Tom.Saulpaugh@i365.com>
> wrote:
>
>> Hello,
>>
>> We are currently using lucene v2.1 and we are planning to upgrade to
>> lucene v2.4.
>> Can we change the merge factor for an existing index and then add
>> more documents to that index?  Is there some kind of upgrade path
>> like using optimize to move an existing index to a different merge
>> factor?
>>
>> Thanks,
>>
>> Tom
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 12:29:26 2008
Return-Path: <java-user-return-36872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29993 invoked from network); 29 Oct 2008 12:29:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 12:29:26 -0000
Received: (qmail 71880 invoked by uid 500); 29 Oct 2008 12:29:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71840 invoked by uid 500); 29 Oct 2008 12:29:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71829 invoked by uid 99); 29 Oct 2008 12:29:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 05:29:23 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 12:28:08 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3193289rvb.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 05:28:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=u4PraohQ4cociLRW1mi4A2nseHaujtXWqbOgrVJVO78=;
        b=GX7zaC6KdUCuAgLdcHIBAWSRhq1aotL+prM1NvWqgtQAFR58WbVW07iRAD7XurFoSh
         mKJQf1La76T9reYNda8D2l+vauC8FquxTZQzRP5yRtSyv5albiS1zW6S0B+xXMh01AhX
         vJ4zzsEdgd+QEY/UATGAXUvIdN+MFL9sP3024=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FGO0A+lkOl52kzKHgbIMt3qiO8xwa5Yd4ZXTeRKsJc8UOzEa9GdpA2KB42U1bg8fJl
         IE30k9kPBYmGRfX+WOuHT75auIw+U86biVzCIX80mt91RfZBe0ho2NN7/Hp6KOnHYuHm
         KD3V/B0oFE+dePt/Y6nnxhLWZdh0aJ+lAwmYA=
Received: by 10.140.165.21 with SMTP id n21mr4839223rve.244.1225283318278;
        Wed, 29 Oct 2008 05:28:38 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Wed, 29 Oct 2008 05:28:38 -0700 (PDT)
Message-ID: <359a92830810290528v27ad2f21k83442f66f849c531@mail.gmail.com>
Date: Wed, 29 Oct 2008 08:28:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query Search returns always the same id
In-Reply-To: <359a92830810281352j4eaa387aoe644408dd38ff206@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_99640_32002059.1225283318271"
References: <20215525.post@talk.nabble.com>
	 <359a92830810281352j4eaa387aoe644408dd38ff206@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_99640_32002059.1225283318271
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Actually, FWIW, just after I posted last night I realized why the
ID was always the same, perhaps it'll be useful as an insight
into how Lucene works...

When you add the same field to a document, all the values are
added and retrieved in order. So calling " hits.doc(i).get("id")"
returns the *first* id stored stored. Since you were using
the same document, the first ID stored was identical for each
document added..

Had you called getFields instead, you'd have gotten a list of all
the IDs stored for that document.....

About storing the field, it's an "interesting" balancing act between
storing data in the index for, say, display and storing it somewhere
*else* and using the results of a search to retrieve it. Which is
best completely depends upon your problem space. Personally
I like to use one data source, either the Lucene index or the DB
if at all possible, fewer moving parts and all that. Sometimes that's
not reasonable though....

Best
Erick

On Tue, Oct 28, 2008 at 4:52 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> I think your root problem is that you're using the same Document
> over and over to add to the index. Your inner loop should be
> something like:
>
>
>     for (int j = 0; j < sourcefiles.elementAt(i).getNumberOfRevisions();
> j++)
>
>> {
>
>        Document doc = new Document()
>
>>
>>    doc.add(new Field("id",
>> sourcefiles.elementAt(i).getID(j),Field.Store.YES,
>> Field.Index.UN_TOKENIZED));
>>    doc.add(new
>> Field("message",sourcefiles.elementAt(i).getCommitMessage(j),
>> Field.Store.NO <http://field.store.no/>,Field.Index.TOKENIZED));
>>    iwriter.addDocument(doc);
>>    System.out.println("Indexed: Source: " + (i+1) + " Revision: "
>>  +(j+1));
>>    System.out.println(sourcefiles.elementAt(i).getCommitMessage(j));
>>    System.out.println(sourcefiles.elementAt(i).getID(j));
>>  }
>>
>
> rather than creating a new document outside the outer loop.
>
> If you haven't yet, a copy of Luke (google Lucene Luke) is invaluable for
> examining indexes and seeing what they look like...
>
> I'm not quite sure why the document id is always the same, but try making a
> new document
> and let us know if you're still having a problem.
>
> Best
> Erick
>
>
> On Tue, Oct 28, 2008 at 4:35 PM, Sebastian23 <sebi@icu.uzh.ch> wrote:
>
>>
>> hi folks,
>>
>> i have great trouble while using lucene to implement search functionality
>> to
>> my application:
>>
>> this way i index:
>> [code]
>> public void indexData() throws CorruptIndexException,
>> LockObtainFailedException, IOException {
>>                Analyzer analyzer = new StandardAnalyzer();
>>                IndexWriter iwriter = new IndexWriter(indexFolder,
>> analyzer, true);
>>                iwriter.setMaxFieldLength(25000);
>>                Document doc = new Document();
>>                for (int i = 0; i < sourcefiles.size(); i++) {
>>                        for (int j = 0; j <
>> sourcefiles.elementAt(i).getNumberOfRevisions(); j++)
>> {
>>                                doc.add(new Field("id",
>> sourcefiles.elementAt(i).getID(j),
>> Field.Store.YES, Field.Index.UN_TOKENIZED));
>>                                doc.add(new Field("message",
>> sourcefiles.elementAt(i).getCommitMessage(j), Field.Store.NO,
>> Field.Index.TOKENIZED));
>>                                iwriter.addDocument(doc);
>>                                System.out.println("Indexed: Source: " +
>> (i+1) + " Revision: "  +
>> (j+1));
>>
>>  System.out.println(sourcefiles.elementAt(i).getCommitMessage(j));
>>
>>  System.out.println(sourcefiles.elementAt(i).getID(j));
>>                        }
>>                }
>>                iwriter.optimize();
>>                iwriter.close();
>>        }
>> [/code]
>>
>> and this way i make the query
>>
>> [code]
>> public void luceneSearch(String queryString) throws CorruptIndexException,
>> IOException, ParseException {
>>                System.out.println("Searching started");
>>                IndexSearcher isearcher = new IndexSearcher(indexFolder);
>>                Analyzer analyzer = new StandardAnalyzer();
>>                QueryParser parser = new QueryParser("message", analyzer);
>>                org.apache.lucene.search.Query query =
>> parser.parse(queryString);
>>                Hits hits = isearcher.search(query);
>>
>>                if(hits.length() > 0) {
>>                        System.out.println("found: " + hits.length() + "
>> documents.");
>>                        for (int i = 0; i < hits.length(); i++) {
>>                                System.out.println((i + 1) + ". " +
>> hits.doc(i).get("id") +
>> hits.doc(i).getField("message"));
>>                        }
>>                } else {
>>                        System.out.println("No matching documents found.");
>>                }
>>        }
>> [/code]
>>
>> my  problem is, that the query always returns a lot of too much results.
>> and
>> the other problem is, the id is always for every result in the list the
>> same
>> id, namly the first i added to the writer. and the message is always null.
>>
>> while adding i check with sysout that all the ids are different and the
>> messages arent null
>>
>> whats going wrong?? thx for your hints
>> --
>> View this message in context:
>> http://www.nabble.com/Query-Search-returns-always-the-same-id-tp20215525p20215525.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_99640_32002059.1225283318271--

From java-user-return-36873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 12:35:15 2008
Return-Path: <java-user-return-36873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32804 invoked from network); 29 Oct 2008 12:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 12:35:15 -0000
Received: (qmail 83563 invoked by uid 500); 29 Oct 2008 12:35:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83539 invoked by uid 500); 29 Oct 2008 12:35:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83528 invoked by uid 99); 29 Oct 2008 12:35:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 05:35:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 12:34:00 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3196053rvb.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 05:34:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ETa+3DiK4bWbZpM8tf5urR+qr920dPNVq5ne8eqX58U=;
        b=LzVrNUx5V3mPJj5cF6l2gRFQOUFGgJenY8ZpyxuD7aVKm3LQfhO/kiFtYkI/o77fxO
         uUUsvCGUXcdHvYvdTvCBsA7Blwkf9sTsVihrU/vpJD5kdZQ8Kfakre5n5RtYFsBq9NYZ
         87hb4H0O9Twc4j9L1y9DZI2cLcij6xcVJtWfc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pFuVRbgF2FFdVzGlhGhS3l9AePUA69C9ibi/QF/yWFUJWFFPvzq5vsTHGLlaFgtriB
         UJosyEWTFfKECA4JmATttyxgP9F5rcB3QF7LfiHDsiBoyyeVQa9Y1UMWnBRphAdXH/yr
         DWRegGvgbsHVfqBJ7LoJCcTaizs7FTYR/fkoA=
Received: by 10.141.146.4 with SMTP id y4mr4836943rvn.272.1225283680514;
        Wed, 29 Oct 2008 05:34:40 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Wed, 29 Oct 2008 05:34:40 -0700 (PDT)
Message-ID: <359a92830810290534r2858e013u8b929dd22f6b296@mail.gmail.com>
Date: Wed, 29 Oct 2008 08:34:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Querying wildcard
In-Reply-To: <6fc71b230810290415r6e676177i26894a9f41402bf0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_99663_18212493.1225283680510"
References: <6fc71b230810290415r6e676177i26894a9f41402bf0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_99663_18212493.1225283680510
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, there are many tricks. If you search the mail archives you'll
find a bunch of them.

One would be to reverse the tokens and make your leading
wildcard queries into trailing ones on the reversed field.

But without more details about what you're trying to accomplish,
there's not much really useful advice we can offer.

Best
Erick

On Wed, Oct 29, 2008 at 7:15 AM, Aditi Goyal <aditigupta20@gmail.com> wrote:

> Hi All,
>
> I have been wanting to do a wildcard search with * as a first letter on an
> index.
> Is there a way out except for setAllowLeadingWildcard() of QueryParser to
> true? Because, i have heard it is an expensive operation.
>
> Thanks
> Aditi
>

------=_Part_99663_18212493.1225283680510--

From java-user-return-36874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 12:43:29 2008
Return-Path: <java-user-return-36874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35319 invoked from network); 29 Oct 2008 12:43:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 12:43:28 -0000
Received: (qmail 96123 invoked by uid 500); 29 Oct 2008 12:43:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96095 invoked by uid 500); 29 Oct 2008 12:43:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96084 invoked by uid 99); 29 Oct 2008 12:43:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 05:43:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 12:42:14 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1278250nfd.15
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 05:42:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=IOvZv3A00/kjczUUTuHeyvWb7//f6VoSRj4+mzs3rmw=;
        b=MXdWB1LxPbo2ei+idJoERRMTp26HbGw7HuPmXkWEDPXEbcauoXy8ARO2gPefFQKYl1
         LqZ7WY/rhi7IopCqp/2+Pa0VbFMXDghmU/enhzWr8r+qE2Q8kRIRTyWYh7oUrq25Q1zk
         OoJZpYoUBNm3dFjJpbPByaGBdnFrZfKwtsGs0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=gIu7uhVbpZV3t2HuIRtAujsJcUUqrGL916WIP4f1jv5Yvg/SC9VhxffXuAs7MYPq1Y
         fGXIl8HBYwzuaGVcVNyEDCnMU9FKxWepnY8FnTUoadxv+sjb2Pw80Ns9t7O/1stChq5E
         QmnwetmlRMZ6kGIMvrP/tUoGjCW2OltzOflWA=
Received: by 10.86.62.3 with SMTP id k3mr5632511fga.6.1225284173386;
        Wed, 29 Oct 2008 05:42:53 -0700 (PDT)
Received: by 10.86.58.18 with HTTP; Wed, 29 Oct 2008 05:42:53 -0700 (PDT)
Message-ID: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com>
Date: Wed, 29 Oct 2008 12:42:53 +0000
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Runtime exception when creating IndexSearcher
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We're using Lucene 2.4.0 on Linux. Java version is 1.6.0_06.

Is there any reason why Lucene would be throwing this error:

org.apache.lucene.store.AlreadyClosedException: this Directory is closed
	at org.apache.lucene.store.Directory.ensureOpen(Directory.java:220)
	at org.apache.lucene.store.FSDirectory.fileExists(FSDirectory.java:326)
	at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:680)
	at org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:111)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:316)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:206)
	at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:47)
        <..our own code which calls new IndexSearcher( String ) ..>

If the index would be corrupted I'd expect
org.apache.lucene.index.CorruptIndexException; similar for
java.io.IOException, however this is something different.
Obviously, AlreadyClosedException is a runtime exception and doesn't
have to be declared in constructor javadoc, however, the problem is a
bit scary as it leaves me in a position with no choice.
Thanks is advance.

Regards,
Mindaugas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 12:44:03 2008
Return-Path: <java-user-return-36875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35628 invoked from network); 29 Oct 2008 12:44:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 12:44:03 -0000
Received: (qmail 98182 invoked by uid 500); 29 Oct 2008 12:44:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98156 invoked by uid 500); 29 Oct 2008 12:44:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98145 invoked by uid 99); 29 Oct 2008 12:44:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 05:44:01 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 12:42:44 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id B17707FA9
	for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 05:42:53 -0700 (PDT)
Message-Id: <FAA3F751-E789-4805-B12A-48F48B321EAF@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20195065.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Newbie Question: Query Creation Best Approach
Date: Wed, 29 Oct 2008 08:42:52 -0400
References: <20195065.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm, this strikes me as there being something wrong with the index,  
but it could be a bug, too.  Do you get an error if you just run the  
BooleanQuery without the filter?  How about if you run a simple  
TermQuery with the Filter?  Can you open the index with Luke?  Does  
the CheckIndex tool (in Lucene) provide any useful information?  Also,  
what version of Lucene are you using?


On Oct 27, 2008, at 3:52 PM, JulieSoko wrote:

>
> I am having some strange behavior and want to rule out that the  
> query that I
> am constructing is the correct way to deal with this type of  
> query.   This
> is what I am working with:
>
> I am creating a query that contains 3 different fields
> Field 1: value   - String
> Field 2: type    - String
> Field 3: time    - Unfortunately Strings
>
> The query will always contain the date range.  The query can contain  
> all 3
> fields or at least 1 and 3.
> i.e
>   1 & 2 & 3
>   1 & 3
>
>
> I tried creating a  BooleanQuery similiar to
>   BooleanQuery bq = new BooleanQuery();
>   bq.add(new TermQuery(new Term("value",
> "hello")),BooleanClause.Occur.MUST);
>   bq.add(new TermQuery(new  
> Term("type","email")),BooleanClause.Occur.MUST);
>
>   parallelSearcher.search(bq, new RangeFilter("time", startTime,
> endTime,true,true),col);
>
> TopDoccollector col = new TopDocCollector(1000);
> ParallelMultiSearcher parallelSearcher =  new
> ParallelMultiSearcher(indexes);  //  1 to many indexes
>
> //Now I add the date range
> parallelSearcher.search(bq, new RangeFilter("time", startTime,
> endTime,true,true),col);
>
>
> The problem is when there are no matches for the boolean part of the
> query... I get an input/output error...
>
>
> java.io.IOException: Input/output error
> java.io.RandomAccessFile.readBytes(Native Method)
> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
> at
> org.apache.lucene.store.FSDirecotry 
> $FSIndexInput.readInternal(FSDirectory.java:550)
> at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java: 
> 131)
> at
> org.apache.lucene.index.CompoundFileReader 
> $CSIndexInput.readInternal(CompoundFileReader.java:240)
> at
> org 
> .apache 
> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
> 152)
> at
> org 
> .apache 
> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
> 152)
> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
> at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java: 
> 123)
> at  
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java: 
> 154)
> at
> org 
> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java: 
> 223)
> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java: 
> 217)
> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java: 
> 678)
> at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java: 
> 87)
> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
> at
> org 
> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java: 
> 311)
> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>
>
>
>
>
>
> Thanks!
> Julie
>
> -- 
> View this message in context: http://www.nabble.com/Newbie-Question%3A-Query-Creation-Best-Approach-tp20195065p20195065.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 12:52:08 2008
Return-Path: <java-user-return-36876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38050 invoked from network); 29 Oct 2008 12:52:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 12:52:08 -0000
Received: (qmail 11390 invoked by uid 500); 29 Oct 2008 12:52:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11357 invoked by uid 500); 29 Oct 2008 12:52:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11346 invoked by uid 99); 29 Oct 2008 12:52:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 05:52:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 12:50:53 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3203860rvb.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 05:51:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=U1oc/y1g67qAWadPTjGfQXlJqRRAjK7EgwK5S48pg9U=;
        b=fR1gjSpz8oz/cOA9Lct1CLTfBgKxsoiJuCaM7rs1+5f8c+6vztDjcJXsvhIrHhfdbf
         K8/NWGvfgO1vAh1Ogb793+La+kz5BBYDp06PwlJ8Xzg3LocZ1O2RF8jXuch93pNGjp+A
         3WvOY7Iog4JWiTTh3nn86Fr5xCGo4nnmHDpzc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=f59MXYpEdxhYA9vuowsncg6aHbZQvnUbCuwAdI715VIjtBMypas11ZuhQgCmDLUDiX
         FVh9lBZGsRx/DSTkpvY5HFj5bF7Xzr7czYU3p61LgtOcXqe5VHnC1nANNCZEdXJp74BQ
         B1KU7L5BfmSXyeGb6ZcPaTyYvdhOkleggG/oo=
Received: by 10.141.1.2 with SMTP id d2mr4868154rvi.129.1225284694078;
        Wed, 29 Oct 2008 05:51:34 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Wed, 29 Oct 2008 05:51:34 -0700 (PDT)
Message-ID: <359a92830810290551g16ec464cld42bbd43ef55573b@mail.gmail.com>
Date: Wed, 29 Oct 2008 08:51:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Runtime exception when creating IndexSearcher
In-Reply-To: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_99713_13856506.1225284694070"
References: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_99713_13856506.1225284694070
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, I'd expect it to throw this error if you tried to close
an already-closed FSDirectory, But that's pretty useless since
you don't provide much context around your problem.

Did this just start occurring? Did you just migrate to 2.4 from
a previous version? Are you sure you aren't closing an already-
closed FSDir? What was the last thing you changed before
you saw this behavior? Did it ever work?

Best
Erick

On Wed, Oct 29, 2008 at 8:42 AM, Mindaugas =8Eak=9Aauskas <mindas@gmail.com=
>wrote:

> Hi,
>
> We're using Lucene 2.4.0 on Linux. Java version is 1.6.0_06.
>
> Is there any reason why Lucene would be throwing this error:
>
> org.apache.lucene.store.AlreadyClosedException: this Directory is closed
>        at org.apache.lucene.store.Directory.ensureOpen(Directory.java:220=
)
>        at
> org.apache.lucene.store.FSDirectory.fileExists(FSDirectory.java:326)
>        at
> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.ja=
va:680)
>        at
> org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.ja=
va:111)
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:316)
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:206)
>        at
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:47)
>        <..our own code which calls new IndexSearcher( String ) ..>
>
> If the index would be corrupted I'd expect
> org.apache.lucene.index.CorruptIndexException; similar for
> java.io.IOException, however this is something different.
> Obviously, AlreadyClosedException is a runtime exception and doesn't
> have to be declared in constructor javadoc, however, the problem is a
> bit scary as it leaves me in a position with no choice.
> Thanks is advance.
>
> Regards,
> Mindaugas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_99713_13856506.1225284694070--

From java-user-return-36877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 14:04:47 2008
Return-Path: <java-user-return-36877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87627 invoked from network); 29 Oct 2008 14:04:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 14:04:47 -0000
Received: (qmail 59099 invoked by uid 500); 29 Oct 2008 14:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58826 invoked by uid 500); 29 Oct 2008 14:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58815 invoked by uid 99); 29 Oct 2008 14:04:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 07:04:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 14:03:32 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1744eyi.53
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 07:04:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=8qwuoq6PSy9WX3atNgFAcgakFEW6EQwi00UUcNZp8lI=;
        b=NY+IYYspXVS7GhHv4Cxed23IyUlv3UB+qBtQoNEZygAc7RWcNWM/IAJ/fegY0gh/ez
         kVacvR8EFTjGIgrvgSFqTKZ3F9hI5fMH9qi7tZ8rU5fzrIkjM3Q3ly+VPfyF5QohrNIQ
         Ks5y8ac1eRZZ7FdSy4NXIU8rRYpJ9z8DrAEPw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=fUFZ5n530IK6Ws50im+jPJQ5OY+nLC09y8On6SbGQ5ztEP8sQKVom7Q5cWbSjYRLPq
         QB6QQxQtMnVrsZvbFf3UZXCI7KAn6sAWIGRe/E2XN+fNMPEnya0385rL2dylTCkPGaT2
         elXzj3QGZlJ2U3d6ZeRK+jboRLQQTDAWyGSCU=
Received: by 10.86.63.19 with SMTP id l19mr5755013fga.15.1225289050864;
        Wed, 29 Oct 2008 07:04:10 -0700 (PDT)
Received: by 10.86.94.8 with HTTP; Wed, 29 Oct 2008 07:04:10 -0700 (PDT)
Message-ID: <a4d7dcf50810290704j16fa2829wca448b48645faa8e@mail.gmail.com>
Date: Wed, 29 Oct 2008 14:04:10 +0000
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Runtime exception when creating IndexSearcher
In-Reply-To: <359a92830810290551g16ec464cld42bbd43ef55573b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com>
	 <359a92830810290551g16ec464cld42bbd43ef55573b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

Sorry for not providing the context. The problem is that I couldn't
work out the exact test case for causing this - I will definitely post
one if I find. There's a possible cause for this but I don't want to
speculate as I don't know for sure.

Just to answer (some of) your questions, this error has nothing to do
with migration, closing, etc. and this only occurred on v2.4.0. As you
can probably see from the stack trace, I'm simply opening an
IndexSearcher. If anyone's interested, I can post compressed folder
with index files (3Mb uncompressed) which are causing trouble.

Currently, a very basic test on this folder fails with the same exception:

8<-------------------------------
import org.apache.lucene.search.IndexSearcher;

public class Test {
 public static void main( String[] args ) throws Exception {
    new IndexSearcher(
"/home/mindas/temp/luke/collection_32/checkedout_index" );
 }
}
8<-------------------------------

My point of this post was - should the constructor ever throw this
exception? Can this not be gracefully swallowed and handled inside?

Regards,
Mindaugas

On Wed, Oct 29, 2008 at 12:51 PM, Erick Erickson
<erickerickson@gmail.com> wrote:
> Well, I'd expect it to throw this error if you tried to close
> an already-closed FSDirectory, But that's pretty useless since
> you don't provide much context around your problem.
>
> Did this just start occurring? Did you just migrate to 2.4 from
> a previous version? Are you sure you aren't closing an already-
> closed FSDir? What was the last thing you changed before
> you saw this behavior? Did it ever work?
>
> Best
> Erick
>
> On Wed, Oct 29, 2008 at 8:42 AM, Mindaugas =8Eak=9Aauskas <mindas@gmail.c=
om>wrote:
>
>> Hi,
>>
>> We're using Lucene 2.4.0 on Linux. Java version is 1.6.0_06.
>>
>> Is there any reason why Lucene would be throwing this error:
>>
>> org.apache.lucene.store.AlreadyClosedException: this Directory is closed
>>        at org.apache.lucene.store.Directory.ensureOpen(Directory.java:22=
0)
>>        at
>> org.apache.lucene.store.FSDirectory.fileExists(FSDirectory.java:326)
>>        at
>> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.j=
ava:680)
>>        at
>> org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.j=
ava:111)
>>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:316)
>>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:206)
>>        at
>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:47)
>>        <..our own code which calls new IndexSearcher( String ) ..>
>>
>> If the index would be corrupted I'd expect
>> org.apache.lucene.index.CorruptIndexException; similar for
>> java.io.IOException, however this is something different.
>> Obviously, AlreadyClosedException is a runtime exception and doesn't
>> have to be declared in constructor javadoc, however, the problem is a
>> bit scary as it leaves me in a position with no choice.
>> Thanks is advance.
>>
>> Regards,
>> Mindaugas
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 14:19:47 2008
Return-Path: <java-user-return-36878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 302 invoked from network); 29 Oct 2008 14:19:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 14:19:46 -0000
Received: (qmail 92695 invoked by uid 500); 29 Oct 2008 14:19:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92660 invoked by uid 500); 29 Oct 2008 14:19:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92649 invoked by uid 99); 29 Oct 2008 14:19:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 07:19:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 14:18:29 +0000
Received: by ug-out-1314.google.com with SMTP id c2so751950ugf.23
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 07:18:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=IdCKik4LQWORTacFiVZqAOSprPnDNNd6Qkq95vphqBI=;
        b=e3ijWvB9tftjLKlXIPo8gVDysRQQqSWG02j5U+xy+TNImBNNGZwm3UDvR1zSCMAQYd
         +x+RuHjIdL+ptBJEiHWZs3FlCvoGgLzztrtb1CS3+C0OwG+XwpOYE8aHQ78Oh0SpA55J
         XxQ9LVh8tKfMP72+gEGrXyMMV9ZWLFeMEpVuo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=FX0sH4drQcGj9IrkAbYkefixAVVIztINOouaweaRwAEWS6K5fYuBvdIVpqwY26Sm/5
         pWOc985bXplQEEdGt0AR4LfeIimbWzaTwKD2L++HYgYLNOTqNG/NiiNO8MXB6oMQPLGa
         6mPNF5P8QWWGYzHqTJwiUdahNgvG3HH34XlT4=
Received: by 10.210.120.7 with SMTP id s7mr599193ebc.110.1225289938558;
        Wed, 29 Oct 2008 07:18:58 -0700 (PDT)
Received: from kodapan.lan (c83-254-190-200.bredband.comhem.se [83.254.190.200])
        by mx.google.com with ESMTPS id g12sm2058336nfb.28.2008.10.29.07.18.57
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 07:18:57 -0700 (PDT)
Message-Id: <0ECA6549-8CD4-4D41-9D7F-D586ACB7EC4E@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1225134591.7486.33.camel@nuraku>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: instantiated index in 2.4
Date: Wed, 29 Oct 2008 15:18:54 +0100
References: <1bcb7c7f0809150945p576143bdta1d5e06d9c0b3f82@mail.gmail.com> <1225134591.7486.33.camel@nuraku>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Darren,

How large is your corpus? The speed you can expect depends on how much  
data you load it with. There is a graph in the package level javadocs  
that shows this:

http://lucene.apache.org/java/2_4_0/api/contrib-instantiated/org/apache/lucene/store/instantiated/package-summary.html



     karl


27 okt 2008 kl. 20.09 skrev Darren Govoni:

> Has anyone gotten some initial performance observations about
> instantiated index?
>
> I replaced my RAMDirectory searcher with one and it was slower or  
> about
> the same. The note about it claims 100x possible performance
> improvement. Maybe there is a data size beyond which its performance
> excels.
>
> thanks.
>
> On Mon, 2008-09-15 at 19:45 +0300, Cam Bazz wrote:
>> Hello,
>>
>> I have been looking at instantiated index in the trunk. Does this  
>> come
>> with a searcher? Are the adds reflected directly to the index?
>>
>> Or is it just an experimental thing only with reader and writer?
>>
>> Best.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 15:13:04 2008
Return-Path: <java-user-return-36879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85706 invoked from network); 29 Oct 2008 15:13:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 15:13:03 -0000
Received: (qmail 99792 invoked by uid 500); 29 Oct 2008 15:13:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99751 invoked by uid 500); 29 Oct 2008 15:13:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99739 invoked by uid 99); 29 Oct 2008 15:13:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 08:13:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 15:11:46 +0000
Received: by yx-out-2324.google.com with SMTP id 3so11880yxj.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 08:12:24 -0700 (PDT)
Received: by 10.100.44.4 with SMTP id r4mr8753670anr.100.1225293144547;
        Wed, 29 Oct 2008 08:12:24 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b45sm1868hsa.11.2008.10.29.08.12.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 08:12:23 -0700 (PDT)
Message-Id: <E0FAF77F-E4DC-4FF1-8E08-58AF2DB62BF2@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a4d7dcf50810290704j16fa2829wca448b48645faa8e@mail.gmail.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Runtime exception when creating IndexSearcher
Date: Wed, 29 Oct 2008 11:12:21 -0400
References: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com> <359a92830810290551g16ec464cld42bbd43ef55573b@mail.gmail.com> <a4d7dcf50810290704j16fa2829wca448b48645faa8e@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


I think I see how this exception can happen.  I think you are hitting =20=

a different exception, which is masked by the exception you're seeing.

Can you run CheckIndex on this index?  I think that should show the =20
actual root cause.

I think another simple way to see the root cause would be to =20
separately first open the directory:

   Directory dir =3D FSDirectory.getDirectory("/path/to/index");

And then instantiate your IndexSearcher with that dir.

Is there only 1 segment in the index?

I see a path whereby on opening a SegmentReader (ie there's only a =20
single segment), on then hitting an exception we call doClose() on the =20=

SegmentReader, which will close the directory, but then the retry =20
logic (trying different segments_N files) kicks in which then hits the =20=

AlreadyClosedException.  It's a bug we should fix (I'll open it & fix =20=

it).

Mike

Mindaugas =8Eak=9Aauskas wrote:

> Hi Erick,
>
> Sorry for not providing the context. The problem is that I couldn't
> work out the exact test case for causing this - I will definitely post
> one if I find. There's a possible cause for this but I don't want to
> speculate as I don't know for sure.
>
> Just to answer (some of) your questions, this error has nothing to do
> with migration, closing, etc. and this only occurred on v2.4.0. As you
> can probably see from the stack trace, I'm simply opening an
> IndexSearcher. If anyone's interested, I can post compressed folder
> with index files (3Mb uncompressed) which are causing trouble.
>
> Currently, a very basic test on this folder fails with the same =20
> exception:
>
> 8<-------------------------------
> import org.apache.lucene.search.IndexSearcher;
>
> public class Test {
> public static void main( String[] args ) throws Exception {
>    new IndexSearcher(
> "/home/mindas/temp/luke/collection_32/checkedout_index" );
> }
> }
> 8<-------------------------------
>
> My point of this post was - should the constructor ever throw this
> exception? Can this not be gracefully swallowed and handled inside?
>
> Regards,
> Mindaugas
>
> On Wed, Oct 29, 2008 at 12:51 PM, Erick Erickson
> <erickerickson@gmail.com> wrote:
>> Well, I'd expect it to throw this error if you tried to close
>> an already-closed FSDirectory, But that's pretty useless since
>> you don't provide much context around your problem.
>>
>> Did this just start occurring? Did you just migrate to 2.4 from
>> a previous version? Are you sure you aren't closing an already-
>> closed FSDir? What was the last thing you changed before
>> you saw this behavior? Did it ever work?
>>
>> Best
>> Erick
>>
>> On Wed, Oct 29, 2008 at 8:42 AM, Mindaugas =8Eak=9Aauskas =
<mindas@gmail.com=20
>> >wrote:
>>
>>> Hi,
>>>
>>> We're using Lucene 2.4.0 on Linux. Java version is 1.6.0_06.
>>>
>>> Is there any reason why Lucene would be throwing this error:
>>>
>>> org.apache.lucene.store.AlreadyClosedException: this Directory is =20=

>>> closed
>>>       at =20
>>> org.apache.lucene.store.Directory.ensureOpen(Directory.java:220)
>>>       at
>>> org.apache.lucene.store.FSDirectory.fileExists(FSDirectory.java:326)
>>>       at
>>> org.apache.lucene.index.SegmentInfos=20
>>> $FindSegmentsFile.run(SegmentInfos.java:680)
>>>       at
>>> org=20
>>> .apache=20
>>> .lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:=20=

>>> 111)
>>>       at org.apache.lucene.index.IndexReader.open(IndexReader.java:=20=

>>> 316)
>>>       at org.apache.lucene.index.IndexReader.open(IndexReader.java:=20=

>>> 206)
>>>       at
>>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:47)
>>>       <..our own code which calls new IndexSearcher( String ) ..>
>>>
>>> If the index would be corrupted I'd expect
>>> org.apache.lucene.index.CorruptIndexException; similar for
>>> java.io.IOException, however this is something different.
>>> Obviously, AlreadyClosedException is a runtime exception and doesn't
>>> have to be declared in constructor javadoc, however, the problem =20
>>> is a
>>> bit scary as it leaves me in a position with no choice.
>>> Thanks is advance.
>>>
>>> Regards,
>>> Mindaugas
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 15:46:24 2008
Return-Path: <java-user-return-36880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99433 invoked from network); 29 Oct 2008 15:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 15:46:24 -0000
Received: (qmail 74980 invoked by uid 500); 29 Oct 2008 15:46:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74944 invoked by uid 500); 29 Oct 2008 15:46:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74933 invoked by uid 99); 29 Oct 2008 15:46:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 08:46:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 15:45:09 +0000
Received: by ug-out-1314.google.com with SMTP id c2so785552ugf.23
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 08:45:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=oUb3uJeb4Ee62Ly4I5lwYYURJxWKRoPea9JZJJlLD5Q=;
        b=XDldAatjYXeOzZtXyI8EpWeOnE/+ATXIPQCr9/7eo9buzHRvI6vM03eRmeqpui0kDH
         2ASPhN4jrwe8Fg8wxxgASfo4/j0XdJ1/rjiplHDhmJ0+qDaE9FCVL0/OzuPqymzZohWK
         YUe32BijZZ6qrXcHUYxdPJZASzgj2pRyxorgQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=g0z3S0tS3I1bpB0y/xvt0v8Er3xkoWHUrWYX6itlFBJBlcKyIiaMxHYxMG3AKc/dOi
         J+EyPC3hbsShXF14MJL4g1lqafNlgwEQaPUcTcAI45TdX4ixOAnIZjA+unwIuOg+3jjc
         FV8N6V9zGuCxhdoDPxzmUTiCRywf9JuEkyd7Y=
Received: by 10.86.29.8 with SMTP id c8mr5887432fgc.67.1225295148025;
        Wed, 29 Oct 2008 08:45:48 -0700 (PDT)
Received: by 10.86.94.8 with HTTP; Wed, 29 Oct 2008 08:45:47 -0700 (PDT)
Message-ID: <a4d7dcf50810290845vd2cecc8u6e3f7e41a68a7b71@mail.gmail.com>
Date: Wed, 29 Oct 2008 15:45:47 +0000
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Runtime exception when creating IndexSearcher
In-Reply-To: <E0FAF77F-E4DC-4FF1-8E08-58AF2DB62BF2@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com>
	 <359a92830810290551g16ec464cld42bbd43ef55573b@mail.gmail.com>
	 <a4d7dcf50810290704j16fa2829wca448b48645faa8e@mail.gmail.com>
	 <E0FAF77F-E4DC-4FF1-8E08-58AF2DB62BF2@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Following Mike's advice, the actual (non-masked exception using
Directory constructor) was as following:

Exception in thread "main" java.io.IOException: read past EOF
        at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:151)
        at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
        at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:68)
        at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:84)
        at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:357)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:306)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:269)
        at org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:99)
        at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:653)
        at org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:111)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:316)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:227)
        at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:55)
        at Test.main(Test.java:8)

CheckIndex.Status value for this index:
  clean=false
  missingSegments=false
  cantOpenSegments=false
  segmentsFileName=segments_11a
  numSegments=1
  segmentFormat="FORMAT_CHARED_DOC_STORE[Lucene 2.3]"
  segmentsChecked is an empty ArrayList of 10 elements
  toolOutOfDate=false
(let me know if you need values of the rest of the attributes)

I have ran the fixIndex( CheckIndex.Status ) which seemed to fix the
problem (creating IndexSearcher does not throw exceptions any more).
Btw, I was pretty sure this index was created using v2.4.0 - I'm
terribly sorry for misleading Erick in previous email.

Last but not least, thanks a lot for the amazing support, hopefully
this issue can benefit to the Lucene library as well.

Regards,
Mindaugas

On Wed, Oct 29, 2008 at 3:12 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> I think I see how this exception can happen.  I think you are hitting a
> different exception, which is masked by the exception you're seeing.
>
> Can you run CheckIndex on this index?  I think that should show the actual
> root cause.
>
> I think another simple way to see the root cause would be to separately
> first open the directory:
>
>  Directory dir = FSDirectory.getDirectory("/path/to/index");
>
> And then instantiate your IndexSearcher with that dir.
>
> Is there only 1 segment in the index?
>
> I see a path whereby on opening a SegmentReader (ie there's only a single
> segment), on then hitting an exception we call doClose() on the
> SegmentReader, which will close the directory, but then the retry logic
> (trying different segments_N files) kicks in which then hits the
> AlreadyClosedException.  It's a bug we should fix (I'll open it & fix it).
>
> Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 16:06:51 2008
Return-Path: <java-user-return-36881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8106 invoked from network); 29 Oct 2008 16:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 16:06:51 -0000
Received: (qmail 11468 invoked by uid 500); 29 Oct 2008 16:06:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11432 invoked by uid 500); 29 Oct 2008 16:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11421 invoked by uid 99); 29 Oct 2008 16:06:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 09:06:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 16:05:35 +0000
Received: by gxk6 with SMTP id 6so899482gxk.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 09:05:14 -0700 (PDT)
Received: by 10.90.67.10 with SMTP id p10mr7560774aga.51.1225296314260;
        Wed, 29 Oct 2008 09:05:14 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 36sm136151agc.9.2008.10.29.09.05.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 09:05:13 -0700 (PDT)
Message-Id: <54CC7730-09A9-486D-945F-6A9E514870B0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a4d7dcf50810290845vd2cecc8u6e3f7e41a68a7b71@mail.gmail.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Runtime exception when creating IndexSearcher
Date: Wed, 29 Oct 2008 12:05:11 -0400
References: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com> <359a92830810290551g16ec464cld42bbd43ef55573b@mail.gmail.com> <a4d7dcf50810290704j16fa2829wca448b48645faa8e@mail.gmail.com> <E0FAF77F-E4DC-4FF1-8E08-58AF2DB62BF2@mikemccandless.com> <a4d7dcf50810290845vd2cecc8u6e3f7e41a68a7b71@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Hmm, so somehow your stored fields file is truncated -- FieldsReader =20
was unable to read the first int.

Are you using compound file format in this index?

Do you have any idea how your index may have become corrupt?

Do you still have the original corrupt (not yet fixed) index?  If so =20
can you zip it up & send to me?

For future reference, CheckIndex has a main() so you can just invoke =20
it from the command line.

Mike

Mindaugas =8Eak=9Aauskas wrote:

> Hi,
>
> Following Mike's advice, the actual (non-masked exception using
> Directory constructor) was as following:
>
> Exception in thread "main" java.io.IOException: read past EOF
>        at =20
> org=20
> .apache=20
> .lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:151)
>        at =20
> org=20
> .apache=20
> .lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>        at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:=20=

> 68)
>        at =20
> org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:84)
>        at =20
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:=20=

> 357)
>        at =20
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:306)
>        at =20
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:269)
>        at org.apache.lucene.index.DirectoryIndexReader=20
> $1.doBody(DirectoryIndexReader.java:99)
>        at org.apache.lucene.index.SegmentInfos=20
> $FindSegmentsFile.run(SegmentInfos.java:653)
>        at =20
> org=20
> .apache=20
> .lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:111)
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:=20=

> 316)
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:=20=

> 227)
>        at =20
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:55)
>        at Test.main(Test.java:8)
>
> CheckIndex.Status value for this index:
>  clean=3Dfalse
>  missingSegments=3Dfalse
>  cantOpenSegments=3Dfalse
>  segmentsFileName=3Dsegments_11a
>  numSegments=3D1
>  segmentFormat=3D"FORMAT_CHARED_DOC_STORE[Lucene 2.3]"
>  segmentsChecked is an empty ArrayList of 10 elements
>  toolOutOfDate=3Dfalse
> (let me know if you need values of the rest of the attributes)
>
> I have ran the fixIndex( CheckIndex.Status ) which seemed to fix the
> problem (creating IndexSearcher does not throw exceptions any more).
> Btw, I was pretty sure this index was created using v2.4.0 - I'm
> terribly sorry for misleading Erick in previous email.
>
> Last but not least, thanks a lot for the amazing support, hopefully
> this issue can benefit to the Lucene library as well.
>
> Regards,
> Mindaugas
>
> On Wed, Oct 29, 2008 at 3:12 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> I think I see how this exception can happen.  I think you are =20
>> hitting a
>> different exception, which is masked by the exception you're seeing.
>>
>> Can you run CheckIndex on this index?  I think that should show the =20=

>> actual
>> root cause.
>>
>> I think another simple way to see the root cause would be to =20
>> separately
>> first open the directory:
>>
>> Directory dir =3D FSDirectory.getDirectory("/path/to/index");
>>
>> And then instantiate your IndexSearcher with that dir.
>>
>> Is there only 1 segment in the index?
>>
>> I see a path whereby on opening a SegmentReader (ie there's only a =20=

>> single
>> segment), on then hitting an exception we call doClose() on the
>> SegmentReader, which will close the directory, but then the retry =20
>> logic
>> (trying different segments_N files) kicks in which then hits the
>> AlreadyClosedException.  It's a bug we should fix (I'll open it & =20
>> fix it).
>>
>> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 16:34:21 2008
Return-Path: <java-user-return-36882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28387 invoked from network); 29 Oct 2008 16:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 16:34:21 -0000
Received: (qmail 68843 invoked by uid 500); 29 Oct 2008 16:34:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67931 invoked by uid 500); 29 Oct 2008 16:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67918 invoked by uid 99); 29 Oct 2008 16:34:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 09:34:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 16:33:06 +0000
Received: by gxk6 with SMTP id 6so951531gxk.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 09:32:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=kb3Qg0esETFKTs4VrCjMIogYwTfi8d7yFsUW1kdQGRs=;
        b=RNOKFYEpDqWP8mgZ7vxEp9BpYIm0BbB5XTDaBdOdLcNiuGFkrCxElkNfmYQSWGTmZ9
         Sedk/T8rpbI6/xPTf/6oqHBVPMFQs36qcXleAXfHnwpHm9UUUiJQ+ffHXDCxvJHcar71
         TbEmgZg4CRFprfR0ALljxQDPcYSu+wmR+/MJc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=LYXwHgYwJHaG/ukWgsHK1kOjGFYvKPPiIFZtP685XZ7aLppPS+3rMmPxmU75LU2qGo
         g9q90QN5k303xGxS+KCff4rtUojhkB0Xe2Oq3GGSn9doNLEL/FP+qTvdHrtI4Bis2HWO
         +FiwOlQ8nAXGTxc1PSXOhikW4/ysgcA773lWI=
Received: by 10.86.72.3 with SMTP id u3mr5968386fga.1.1225297965443;
        Wed, 29 Oct 2008 09:32:45 -0700 (PDT)
Received: by 10.86.94.8 with HTTP; Wed, 29 Oct 2008 09:32:45 -0700 (PDT)
Message-ID: <a4d7dcf50810290932s3c7df1a8uf88b6c0fc0acdb2c@mail.gmail.com>
Date: Wed, 29 Oct 2008 16:32:45 +0000
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Runtime exception when creating IndexSearcher
In-Reply-To: <54CC7730-09A9-486D-945F-6A9E514870B0@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com>
	 <359a92830810290551g16ec464cld42bbd43ef55573b@mail.gmail.com>
	 <a4d7dcf50810290704j16fa2829wca448b48645faa8e@mail.gmail.com>
	 <E0FAF77F-E4DC-4FF1-8E08-58AF2DB62BF2@mikemccandless.com>
	 <a4d7dcf50810290845vd2cecc8u6e3f7e41a68a7b71@mail.gmail.com>
	 <54CC7730-09A9-486D-945F-6A9E514870B0@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

see my comments between Mike's text:

On Wed, Oct 29, 2008 at 4:05 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Hmm, so somehow your stored fields file is truncated -- FieldsReader was
> unable to read the first int.
>
> Are you using compound file format in this index?

I'm not calling setUseCompoundFile deliberately, so I presume it uses
the default value (false, correct?).

> Do you have any idea how your index may have become corrupt?

I have tried to work out some basic tests but couldn't reproduce this
issue. It could be something related to not closing IndexWriter
properly, but I cannot confirm that with any unit tests.
Will definitely post anything useful here if I get to this point.

> Do you still have the original corrupt (not yet fixed) index?  If so can you
> zip it up & send to me?

No problem!

> For future reference, CheckIndex has a main() so you can just invoke it from
> the command line.
>
> Mike

Thanks a lot! Let me know if you need any other info.

Regards,
Mindaugas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 17:03:54 2008
Return-Path: <java-user-return-36883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45899 invoked from network); 29 Oct 2008 17:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 17:03:53 -0000
Received: (qmail 6279 invoked by uid 500); 29 Oct 2008 17:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6256 invoked by uid 500); 29 Oct 2008 17:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6245 invoked by uid 99); 29 Oct 2008 17:03:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 10:03:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 17:02:38 +0000
Received: by yw-out-2324.google.com with SMTP id 3so29727ywj.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 10:03:16 -0700 (PDT)
Received: by 10.100.57.13 with SMTP id f13mr8904642ana.143.1225299796395;
        Wed, 29 Oct 2008 10:03:16 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b19sm257993ana.19.2008.10.29.10.03.15
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 10:03:15 -0700 (PDT)
Message-Id: <310EB3A9-EA1F-480A-9160-3F8ED2BCC7F5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a4d7dcf50810290932s3c7df1a8uf88b6c0fc0acdb2c@mail.gmail.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Runtime exception when creating IndexSearcher
Date: Wed, 29 Oct 2008 13:03:13 -0400
References: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com> <359a92830810290551g16ec464cld42bbd43ef55573b@mail.gmail.com> <a4d7dcf50810290704j16fa2829wca448b48645faa8e@mail.gmail.com> <E0FAF77F-E4DC-4FF1-8E08-58AF2DB62BF2@mikemccandless.com> <a4d7dcf50810290845vd2cecc8u6e3f7e41a68a7b71@mail.gmail.com> <54CC7730-09A9-486D-945F-6A9E514870B0@mikemccandless.com> <a4d7dcf50810290932s3c7df1a8uf88b6c0fc0acdb2c@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually, compound file defaults to true.

One odd thing about your index: it has a single segment with 0 docs.  =20=

What was the history that led to this index?  Did you create an index, =20=

and then delete all of its documents, and optimize that?  Or... =20
something else?

Mike

Mindaugas =8Eak=9Aauskas wrote:

> Hi,
>
> see my comments between Mike's text:
>
> On Wed, Oct 29, 2008 at 4:05 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Hmm, so somehow your stored fields file is truncated -- =20
>> FieldsReader was
>> unable to read the first int.
>>
>> Are you using compound file format in this index?
>
> I'm not calling setUseCompoundFile deliberately, so I presume it uses
> the default value (false, correct?).
>
>> Do you have any idea how your index may have become corrupt?
>
> I have tried to work out some basic tests but couldn't reproduce this
> issue. It could be something related to not closing IndexWriter
> properly, but I cannot confirm that with any unit tests.
> Will definitely post anything useful here if I get to this point.
>
>> Do you still have the original corrupt (not yet fixed) index?  If =20
>> so can you
>> zip it up & send to me?
>
> No problem!
>
>> For future reference, CheckIndex has a main() so you can just =20
>> invoke it from
>> the command line.
>>
>> Mike
>
> Thanks a lot! Let me know if you need any other info.
>
> Regards,
> Mindaugas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 19:20:52 2008
Return-Path: <java-user-return-36884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45317 invoked from network); 29 Oct 2008 19:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 19:20:51 -0000
Received: (qmail 3093 invoked by uid 500); 29 Oct 2008 19:20:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3054 invoked by uid 500); 29 Oct 2008 19:20:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3043 invoked by uid 99); 29 Oct 2008 19:20:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 12:20:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 19:19:35 +0000
Received: by an-out-0708.google.com with SMTP id c37so16793anc.49
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 12:20:13 -0700 (PDT)
Received: by 10.100.216.12 with SMTP id o12mr1296560ang.92.1225307595586;
        Wed, 29 Oct 2008 12:13:15 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b14sm827549ana.23.2008.10.29.12.13.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 12:13:14 -0700 (PDT)
Message-Id: <0FCB3E2A-5F53-459C-8316-44E0B91D2809@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a4d7dcf50810290932s3c7df1a8uf88b6c0fc0acdb2c@mail.gmail.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Runtime exception when creating IndexSearcher
Date: Wed, 29 Oct 2008 15:13:12 -0400
References: <a4d7dcf50810290542y11d441fbl8252021091c36d4a@mail.gmail.com> <359a92830810290551g16ec464cld42bbd43ef55573b@mail.gmail.com> <a4d7dcf50810290704j16fa2829wca448b48645faa8e@mail.gmail.com> <E0FAF77F-E4DC-4FF1-8E08-58AF2DB62BF2@mikemccandless.com> <a4d7dcf50810290845vd2cecc8u6e3f7e41a68a7b71@mail.gmail.com> <54CC7730-09A9-486D-945F-6A9E514870B0@mikemccandless.com> <a4d7dcf50810290932s3c7df1a8uf88b6c0fc0acdb2c@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I created this issue:

     https://issues.apache.org/jira/browse/LUCENE-1430

Mike

Mindaugas =8Eak=9Aauskas wrote:

> Hi,
>
> see my comments between Mike's text:
>
> On Wed, Oct 29, 2008 at 4:05 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Hmm, so somehow your stored fields file is truncated -- =20
>> FieldsReader was
>> unable to read the first int.
>>
>> Are you using compound file format in this index?
>
> I'm not calling setUseCompoundFile deliberately, so I presume it uses
> the default value (false, correct?).
>
>> Do you have any idea how your index may have become corrupt?
>
> I have tried to work out some basic tests but couldn't reproduce this
> issue. It could be something related to not closing IndexWriter
> properly, but I cannot confirm that with any unit tests.
> Will definitely post anything useful here if I get to this point.
>
>> Do you still have the original corrupt (not yet fixed) index?  If =20
>> so can you
>> zip it up & send to me?
>
> No problem!
>
>> For future reference, CheckIndex has a main() so you can just =20
>> invoke it from
>> the command line.
>>
>> Mike
>
> Thanks a lot! Let me know if you need any other info.
>
> Regards,
> Mindaugas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 22:04:31 2008
Return-Path: <java-user-return-36885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26374 invoked from network); 29 Oct 2008 22:04:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 22:04:31 -0000
Received: (qmail 2150 invoked by uid 500); 29 Oct 2008 22:04:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2114 invoked by uid 500); 29 Oct 2008 22:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2103 invoked by uid 99); 29 Oct 2008 22:04:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 15:04:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 22:03:15 +0000
Received: by yx-out-2324.google.com with SMTP id 3so85790yxj.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 15:03:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=YfpYkOBwLoevbvJ6DF4fgYhPBvP3LQCZ8zEbK0XeqDs=;
        b=ch2qt3Z09zN/loPpoqtJnD8qXT4IyXuCZQIW9na2UKpEADeVs6uOLjeVPbWY5wJRc3
         e1MOOIQPEgs4Uu2XeuSTwZXx7BffaJNIbj0NPFXypMXUeuNNf3uXX18BXme0cjQUn1YP
         y4VVI4Iam3Ky0X6pH1OuV1B9/LBetBxfKGR4Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=gdPfAHYflEeZ2kgg7gYrra1KETZ0ad0JbNtiis7rIL6fKhwQN7MF+jBwzi+RoPXaD2
         RTwO9K5xuIy+3z4rnI49sWyp6D51XgmoJnqKdN0nz2IT6GN0UtvAxhDS9Cr5hzz6xGB1
         yyK+fAmoTyXTwhtWsoWYCbo/9S8JFIYXRalqE=
Received: by 10.150.137.9 with SMTP id k9mr2229412ybd.44.1225317825663;
        Wed, 29 Oct 2008 15:03:45 -0700 (PDT)
Received: by 10.150.177.5 with HTTP; Wed, 29 Oct 2008 15:03:45 -0700 (PDT)
Message-ID: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
Date: Wed, 29 Oct 2008 16:03:45 -0600
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: OutOfMemory Problems Lucene 2.4 / Tomcat
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm the lead engineer for search on a large website using lucene for search.

We're indexing about 300M documents in ~ 100 indices.  The indices add
 up to ~ 60G.

The indices are sorted into 4 different Multisearcher with the largest
handling ~50G.

The code is basically like the following:

private static MultiSearcher searcher;

public void init(File files) {

     IndexSearcer [] searchers = new IndexSearcher[files.length] ();
     int i = 0;
     for ( File file: files ) {
          searchers[i++] = new IndexSearcher(FSDirectory.getDirectory(file);
     }

searcher = new MultiSearcher(searchers);
}

public Searcher getSearcher() {
   return searcher;
}

We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
Performance is good but servers are consistently hanging with
OutOfMemory errors.

We're allocating 4G in the heap to each server.

Is there any way to control the amount of memory Lucene consume for
caching?  Any other suggestions on fixing the memory errors?

Thanks,

Todd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 22:09:59 2008
Return-Path: <java-user-return-36886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30433 invoked from network); 29 Oct 2008 22:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 22:09:59 -0000
Received: (qmail 9093 invoked by uid 500); 29 Oct 2008 22:09:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9059 invoked by uid 500); 29 Oct 2008 22:09:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9048 invoked by uid 99); 29 Oct 2008 22:09:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 15:09:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 22:08:43 +0000
Received: by ug-out-1314.google.com with SMTP id c2so926969ugf.23
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 15:09:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=rfuiQyMDtk5K+fH32tJmS5iELRQ2S02VNCNLMr2ImTg=;
        b=iJ6Wlm8SajPp7kYtoosLFv0b+/ZrLqt+rNCicPooXvIuaDWu/krQKk4Z5V43wBljdz
         /mrpiqrDqj3VOHaQpgs+17cSgeniV62dxRnQn1wnh/hJoQ5NZV5dhZTvyavS0U7LeCmV
         2qiOp34fsRFpGZRw35+m0JuH+Tr7ZJhNQFwB4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=VD8BcCTWCZyaS1ldvbIZmlozzN7rR2aJfiCq9VY4nw1AW7/NILaRBCvAMiJIBxzeD9
         B1uP+wiEDGCtR5UWDg9dLM+vzFeRD26Wn+pKdVyTV0yuy6SFaKKd8ZulM33gFXLES7xA
         x7JTXGtPVTZJcGebr0poJhNGb+dTL3RO/M84M=
Received: by 10.103.213.10 with SMTP id p10mr4479789muq.46.1225318152033;
        Wed, 29 Oct 2008 15:09:12 -0700 (PDT)
Received: from ?10.148.150.111? ([32.138.151.139])
        by mx.google.com with ESMTPS id e8sm2238448muf.6.2008.10.29.15.09.08
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 15:09:10 -0700 (PDT)
Message-Id: <489B48AB-797F-41F3-BC4C-7978FC20C52C@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5F136)
Mime-Version: 1.0 (iPhone Mail 5F136)
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
Date: Wed, 29 Oct 2008 18:08:59 -0400
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

How many fields are you sorting on? Lots of unuiqe terms in those  
fields?

- Mark


On Oct 29, 2008, at 6:03 PM, "Todd Benge" <todd.benge@gmail.com> wrote:

> Hi,
>
> I'm the lead engineer for search on a large website using lucene for  
> search.
>
> We're indexing about 300M documents in ~ 100 indices.  The indices add
> up to ~ 60G.
>
> The indices are sorted into 4 different Multisearcher with the largest
> handling ~50G.
>
> The code is basically like the following:
>
> private static MultiSearcher searcher;
>
> public void init(File files) {
>
>     IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>     int i = 0;
>     for ( File file: files ) {
>          searchers[i++] = new  
> IndexSearcher(FSDirectory.getDirectory(file);
>     }
>
> searcher = new MultiSearcher(searchers);
> }
>
> public Searcher getSearcher() {
>   return searcher;
> }
>
> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
> Performance is good but servers are consistently hanging with
> OutOfMemory errors.
>
> We're allocating 4G in the heap to each server.
>
> Is there any way to control the amount of memory Lucene consume for
> caching?  Any other suggestions on fixing the memory errors?
>
> Thanks,
>
> Todd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 23:31:52 2008
Return-Path: <java-user-return-36887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58760 invoked from network); 29 Oct 2008 23:31:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 23:31:52 -0000
Received: (qmail 95916 invoked by uid 500); 29 Oct 2008 23:31:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95894 invoked by uid 500); 29 Oct 2008 23:31:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95883 invoked by uid 99); 29 Oct 2008 23:31:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 16:31:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 23:30:36 +0000
Received: from sparkling.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id A0E251631E87
	for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 18:31:15 -0500 (CDT)
Message-ID: <4908F241.1000009@atlassian.com>
Date: Thu, 30 Oct 2008 10:31:13 +1100
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IllegalStateEx thrown when calling close
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <4907FC2D.2070709@atlassian.com> <EF97CC01-762E-4F20-94EA-AA1948657A2A@mikemccandless.com>
In-Reply-To: <EF97CC01-762E-4F20-94EA-AA1948657A2A@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

not in 2.3.2 though.

cheers,
jed.

Michael McCandless wrote:
>
> Or you can use IndexReader.unlock.
>
> Mike
>
> Jed Wesley-Smith wrote:
>
>> Michael McCandless wrote:
>>>
>>> To workaround this, on catching an OOME on any of IndexWriter's
>>> methods, you should 1) forcibly remove the write lock
>>> (IndexWriter.unlock static method)
>>
>> IndexWriter.unlock(*) is 2.4 only.
>>
>> Use the following instead:
>>
>>   directory.makeLock(IndexWriter.WRITE_LOCK_NAME).release();


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 29 23:44:04 2008
Return-Path: <java-user-return-36888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64736 invoked from network); 29 Oct 2008 23:44:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2008 23:44:04 -0000
Received: (qmail 9059 invoked by uid 500); 29 Oct 2008 23:44:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9021 invoked by uid 500); 29 Oct 2008 23:44:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9010 invoked by uid 99); 29 Oct 2008 23:44:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 16:44:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 23:42:49 +0000
Received: by yx-out-2324.google.com with SMTP id 3so101012yxj.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 16:43:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=MkiJ5Qc651VpTB3+kL4PYL0DsJJnGmG//KbGnNWb8tQ=;
        b=pUiSQPdSGpFvZP94ILuLDDXX30DSD4wmDHyNls/69BOkmvVZtyYRhh86EYeOZM/CTU
         KLsAcnchDrSMz5vCHgMpem+RpuaPZOkvxHStQNYnE/b9KcL3ATulcgYMKrAZrBmnhgBp
         hkyJ4mOktgXqG5LWCnm5Kbv9H3/BtuBKxNL44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=UhK+jeYmoGDwVWy01Oq8dcBl5DzNgmX5Lw1bhKTcLPI7mPJKQTOdwZLBM7c/r8Ks2G
         WsRasDOParRx8dXlyiHWPI6Q2qWq1L/fbO3PV56acWmv/6Nddew5D0JIyjKX67EgCq3n
         3rr3wBy3aDnWziJ9Su/uuGHxfhzQ5kbePx78g=
Received: by 10.150.202.9 with SMTP id z9mr2279613ybf.226.1225323809406;
        Wed, 29 Oct 2008 16:43:29 -0700 (PDT)
Received: by 10.150.177.5 with HTTP; Wed, 29 Oct 2008 16:43:29 -0700 (PDT)
Message-ID: <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com>
Date: Wed, 29 Oct 2008 17:43:29 -0600
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

There's usually only a couple sort fields and a bunch of terms in the
various indices.  The terms are user entered on various media so the
number of terms is very large.

Thanks for the help.

Todd



On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:
> Hi,
>
> I'm the lead engineer for search on a large website using lucene for search.
>
> We're indexing about 300M documents in ~ 100 indices.  The indices add
>  up to ~ 60G.
>
> The indices are sorted into 4 different Multisearcher with the largest
> handling ~50G.
>
> The code is basically like the following:
>
> private static MultiSearcher searcher;
>
> public void init(File files) {
>
>      IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>      int i = 0;
>      for ( File file: files ) {
>           searchers[i++] = new IndexSearcher(FSDirectory.getDirectory(file);
>      }
>
> searcher = new MultiSearcher(searchers);
> }
>
> public Searcher getSearcher() {
>    return searcher;
> }
>
> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
> Performance is good but servers are consistently hanging with
> OutOfMemory errors.
>
> We're allocating 4G in the heap to each server.
>
> Is there any way to control the amount of memory Lucene consume for
> caching?  Any other suggestions on fixing the memory errors?
>
> Thanks,
>
> Todd
>

-- 
Sent from Gmail for mobile | mobile.google.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 00:07:48 2008
Return-Path: <java-user-return-36889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73164 invoked from network); 30 Oct 2008 00:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 00:07:48 -0000
Received: (qmail 33711 invoked by uid 500); 30 Oct 2008 00:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33677 invoked by uid 500); 30 Oct 2008 00:07:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33666 invoked by uid 99); 30 Oct 2008 00:07:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 17:07:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 00:06:32 +0000
Received: by yx-out-2324.google.com with SMTP id 3so103033yxj.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 17:07:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=6pYng5CRfhnXU7KE6JZnbptJs4myS0G3+sKquxYztxQ=;
        b=dVbLCs95p+3NLI8IrHO1BfYZQhI96Ho6q0bFECBvqIYBYgjElyGOwg2uwTqzktWYWR
         pFLVZPv5sVnHCKLmP0Djf3uSWC4XNVCGC5xd3ba7ZUh4nzyWdnYyE1SgRrryxWLHQ0cz
         DVwZUZh+7U//bzCk1WEWkVl8uHRoldUabDRSg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=ez/k+G3WZMHCi62RiRCAidvRLmhY6ufFU+xngoYVoyu4r+mloXv7gBvTwsQS65satm
         jJuH/IhpbSLvaoU+Faz7QzYOdpQ2Cw2Erii8cSqqvp9yLvmAZZ0QrMrfP8Ubpe/q0teb
         bVluSs1n2aMsWVqwoIGQyEkH/DOhwOxt+b9KI=
Received: by 10.90.99.3 with SMTP id w3mr8040620agb.111.1225325222028;
        Wed, 29 Oct 2008 17:07:02 -0700 (PDT)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 9sm972726agc.31.2008.10.29.17.07.00
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 29 Oct 2008 17:07:01 -0700 (PDT)
Message-ID: <4908FAA4.9070809@gmail.com>
Date: Wed, 29 Oct 2008 20:07:00 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com> <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com>
In-Reply-To: <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The term, terminfo, indexreader internals stuff is prob on the low end 
compared to the size of your field caches (needed for sorting). If you 
are sorting by String I think the space needed is 32 bits x number of 
docs + an array to hold all of the unique terms. So checking 300 million 
docs (I know you are actually breaking it up smaller than that, but for 
example) and ignoring things like String chars being variable byte 
lengths and storing the length, etc and randomly picking 50000 unique 
terms at 6 chars per:

32 bits x 300000000 + 50000 x 6 x 16 bits to MB = 1 144.98138 megabytes

Thats per field your sorting on. If you are sorting on an int field it 
should be closer to 32 bits x num docs - shorts, 32 bits x num docs, etc.

So you have those field caches, plus the IndexReader terminfo, term 
stuff, plus whatever RAM your app needs beyond Lucene. 4 gig might just 
not *quite* cut it is my guess.

Todd Benge wrote:
> There's usually only a couple sort fields and a bunch of terms in the
> various indices.  The terms are user entered on various media so the
> number of terms is very large.
>
> Thanks for the help.
>
> Todd
>
>
>
> On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:
>   
>> Hi,
>>
>> I'm the lead engineer for search on a large website using lucene for search.
>>
>> We're indexing about 300M documents in ~ 100 indices.  The indices add
>>  up to ~ 60G.
>>
>> The indices are sorted into 4 different Multisearcher with the largest
>> handling ~50G.
>>
>> The code is basically like the following:
>>
>> private static MultiSearcher searcher;
>>
>> public void init(File files) {
>>
>>      IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>>      int i = 0;
>>      for ( File file: files ) {
>>           searchers[i++] = new IndexSearcher(FSDirectory.getDirectory(file);
>>      }
>>
>> searcher = new MultiSearcher(searchers);
>> }
>>
>> public Searcher getSearcher() {
>>    return searcher;
>> }
>>
>> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
>> Performance is good but servers are consistently hanging with
>> OutOfMemory errors.
>>
>> We're allocating 4G in the heap to each server.
>>
>> Is there any way to control the amount of memory Lucene consume for
>> caching?  Any other suggestions on fixing the memory errors?
>>
>> Thanks,
>>
>> Todd
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 02:30:46 2008
Return-Path: <java-user-return-36890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65054 invoked from network); 30 Oct 2008 02:30:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 02:30:46 -0000
Received: (qmail 5831 invoked by uid 500); 30 Oct 2008 02:30:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5796 invoked by uid 500); 30 Oct 2008 02:30:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5785 invoked by uid 99); 30 Oct 2008 02:30:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 19:30:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 02:29:31 +0000
Received: by rn-out-0910.google.com with SMTP id j71so273566rne.4
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 19:30:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=yRuPIrMHxi6qTReVYmOn+TOpjHa0drbda2h+Xj+FtAo=;
        b=CleLAgF5y8s8tS2q7bIZuJ3hhuIhoYQfwLWLq+2ic92LFvq9qYeNwQRgVncOEN+qdt
         /sXDTF+yuR8f7PsqhXgldyH0d5RQiqiS1gb0EvFI/OwRuYHNP9RJL1nzusVKaFMrwRDf
         7iYnrAnYnSz8m7bSlWkvnqWEh8S5vRk0ySpHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=VPAoe+sUHwISaLaiHhywKqST6pbZtCcljnYERqsMSD1NZnoxn5QyGqjh9A+02AYXh9
         ny00sDzPSlQosnM4MtT7CB+VdJhtfwiKlfGp1UjVX519hathz/CZ3+uRzUe8VfKZPipu
         4aIeZB63eUZ4k1yfodpcaYcQGFqZTW3AA81wA=
Received: by 10.150.225.10 with SMTP id x10mr6720028ybg.231.1225333800989;
        Wed, 29 Oct 2008 19:30:00 -0700 (PDT)
Received: by 10.150.177.5 with HTTP; Wed, 29 Oct 2008 19:30:00 -0700 (PDT)
Message-ID: <847931a70810291930u8cea406oc4363b1c15cb0f1c@mail.gmail.com>
Date: Wed, 29 Oct 2008 20:30:00 -0600
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <4908FAA4.9070809@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
	 <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com>
	 <4908FAA4.9070809@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mark.  I appreciate the help.

I thought our memory may be low but wanted to verify there if there is
any way to control memory usage.  I think we'll likely upgrade the
memory on the machines but that may just delay the inevitable.

Wondering if anyone else has encountered similar issues with indices
if a similar size.  I've been thinking we will need to move to a
clustered solution and have been reading on hadoop, nutch, solr &
terracotta for possibilities such as index sharding.

Has anyone implemented a solution using hadoop or terracotta for a
large scale system?  Just wondering the pro's / con's of the various
approaches.

Thanks,

Todd

On Wed, Oct 29, 2008 at 6:07 PM, Mark Miller <markrmiller@gmail.com> wrote:
> The term, terminfo, indexreader internals stuff is prob on the low end
> compared to the size of your field caches (needed for sorting). If you are
> sorting by String I think the space needed is 32 bits x number of docs + an
> array to hold all of the unique terms. So checking 300 million docs (I know
> you are actually breaking it up smaller than that, but for example) and
> ignoring things like String chars being variable byte lengths and storing
> the length, etc and randomly picking 50000 unique terms at 6 chars per:
>
> 32 bits x 300000000 + 50000 x 6 x 16 bits to MB = 1 144.98138 megabytes
>
> Thats per field your sorting on. If you are sorting on an int field it
> should be closer to 32 bits x num docs - shorts, 32 bits x num docs, etc.
>
> So you have those field caches, plus the IndexReader terminfo, term stuff,
> plus whatever RAM your app needs beyond Lucene. 4 gig might just not *quite*
> cut it is my guess.
>
> Todd Benge wrote:
>>
>> There's usually only a couple sort fields and a bunch of terms in the
>> various indices.  The terms are user entered on various media so the
>> number of terms is very large.
>>
>> Thanks for the help.
>>
>> Todd
>>
>>
>>
>> On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:
>>
>>>
>>> Hi,
>>>
>>> I'm the lead engineer for search on a large website using lucene for
>>> search.
>>>
>>> We're indexing about 300M documents in ~ 100 indices.  The indices add
>>>  up to ~ 60G.
>>>
>>> The indices are sorted into 4 different Multisearcher with the largest
>>> handling ~50G.
>>>
>>> The code is basically like the following:
>>>
>>> private static MultiSearcher searcher;
>>>
>>> public void init(File files) {
>>>
>>>     IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>>>     int i = 0;
>>>     for ( File file: files ) {
>>>          searchers[i++] = new
>>> IndexSearcher(FSDirectory.getDirectory(file);
>>>     }
>>>
>>> searcher = new MultiSearcher(searchers);
>>> }
>>>
>>> public Searcher getSearcher() {
>>>   return searcher;
>>> }
>>>
>>> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
>>> Performance is good but servers are consistently hanging with
>>> OutOfMemory errors.
>>>
>>> We're allocating 4G in the heap to each server.
>>>
>>> Is there any way to control the amount of memory Lucene consume for
>>> caching?  Any other suggestions on fixing the memory errors?
>>>
>>> Thanks,
>>>
>>> Todd
>>>
>>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 03:09:02 2008
Return-Path: <java-user-return-36891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75884 invoked from network); 30 Oct 2008 03:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 03:09:01 -0000
Received: (qmail 26738 invoked by uid 500); 30 Oct 2008 03:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26701 invoked by uid 500); 30 Oct 2008 03:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26690 invoked by uid 99); 30 Oct 2008 03:09:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 20:09:00 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aashish.Agrawal@morganstanley.com designates 199.89.103.68 as permitted sender)
Received: from [199.89.103.68] (HELO pimtaint01.ms.com) (199.89.103.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 03:07:44 +0000
Received: from pimtaint01 (localhost.ms.com [127.0.0.1])
	by pimtaint01.ms.com (output Postfix) with ESMTP id 83515294937
	for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 23:07:53 -0400 (EDT)
Received: from ny0032as01 (unknown [144.203.194.95])
	by pimtaint01.ms.com (internal Postfix) with ESMTP id 652845B0031
	for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 23:07:53 -0400 (EDT)
Received: from ny0032as01 (localhost [127.0.0.1])
	by ny0032as01 (msa-out Postfix) with ESMTP id 4C2A0C94603
	for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 23:07:53 -0400 (EDT)
Received: from PIWEXOB02.msad.ms.com (piwexob02 [205.228.46.104])
	by ny0032as01 (mta-in Postfix) with ESMTP id 4918BBC4001
	for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 23:07:53 -0400 (EDT)
Received: from KJWEXBH01.msad.ms.com ([161.144.49.137]) by PIWEXOB02.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Wed, 29 Oct 2008 23:07:53 -0400
Received: from TKWEXMB22.msad.ms.com ([161.144.49.149]) by KJWEXBH01.msad.ms.com with Microsoft SMTPSVC(6.0.3790.1830); Thu, 30 Oct 2008 12:07:49 +0900
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C93A3C.B06666E7"
Content-Transfer-Encoding: 7bit
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.3168
Subject: problem with highlighter 
Date: Thu, 30 Oct 2008 12:07:48 +0900
Message-ID: <ABF971E134098D40A9F82A75E3D2B46B023D4C80@TKWEXMB22.msad.ms.com>
Importance: normal
Priority: normal
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: problem with highlighter 
Thread-Index: Ack6PKsI9Jj8ZjAyRrOLz0Yv9ltumA==
From: "Agrawal, Aashish \(IT\)" <Aashish.Agrawal@morganstanley.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Oct 2008 03:07:49.0269 (UTC) FILETIME=[B0A2FC50:01C93A3C]
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 30102008 #1217072, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C93A3C.B06666E7
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,=20
=20
I am using RegexQuery and Highlighter, my query works fine and i get the
matches, but there is nothing being printed out from highlighter ?=20
at the same time, if I use Query, it works fine .=20
is something wrong with the code below ?=20
code --
=20
   //line -->input string (ie ".*out")
   RegexQuery query =3D new RegexQuery (new Term (field, line));
   QueryScorer scorer =3D new QueryScorer(query);
   SimpleHTMLFormatter formatter =3D new SimpleHTMLFormatter("", "");
   Highlighter highlighter =3D new Highlighter(formatter, scorer);
   Highlighter high =3D new Highlighter(formatter, scorer);
   Fragmenter fragmenter =3D new NullFragmenter();
   Fragmenter fragment =3D new SimpleFragmenter(250);
   highlighter.setTextFragmenter(fragmenter);
   high.setTextFragmenter(fragment);
   System.out.println("Searching for: " + query.toString(field));
=20
  Hits hits =3D searcher.search(query);
=20
snip..
=20
   TokenStream lines =3D analyzer.tokenStream("filedata", new
StringReader(doc.get("filedata")));
   CachingTokenFilter filter =3D new CachingTokenFilter(lines);
   String highlightedLines =3D highlighter.getBestFragment(filter,
doc.get("filedata"));
   filter.reset();
   String highlight =3D high.getBestFragments(filter,
doc.get("filedata"),5, "........next match..........");
   System.out.println (highlight);    //nothing printed out
   System.out.println (highlightedLines); //nothing pritned out.=20
=20
=20
thanks,=20
Aashish Agrawal
--------------------------------------------------------

NOTICE: If received in error, please destroy and notify sender. Sender =
does not intend to waive confidentiality or privilege. Use of this email =
is prohibited when received in error.

------_=_NextPart_001_01C93A3C.B06666E7--

From java-user-return-36892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 05:29:28 2008
Return-Path: <java-user-return-36892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10983 invoked from network); 30 Oct 2008 05:29:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 05:29:28 -0000
Received: (qmail 93497 invoked by uid 500); 30 Oct 2008 05:29:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93468 invoked by uid 500); 30 Oct 2008 05:29:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93457 invoked by uid 99); 30 Oct 2008 05:29:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 22:29:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 05:28:13 +0000
Received: by rv-out-0506.google.com with SMTP id f6so392410rvb.5
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 22:28:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SnUQ+yzWAIcPMYOWiPf7EhnC+n/wjJv9bmWFKa9lx9s=;
        b=IH4H0hj7lmmRxYJkulE5QRY1ebNdvHO9S9N5sfMI9CUVmuqY5s2dpD1BZ8IQAGm8sP
         /OnoYceR5p4RDVnuml5QYG+6wqMOtRSng9GypKMfQj1QLDZc+DDEMENhZ+hqOLGggbRH
         +7py477j24vKbJooNFTEM3I9yHz/+4rCYq078=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=v6GU54zhgSOVAZHDdPalWq84RcB/o8QaFHYYmzBvbgqwGhusGhNB/9G3fSKFS8ozVE
         1XaVQWuvfbpKL+9t9OCaBv9sPOu7L/KSMx1XLToYeGHTZ+mPhsukK1+LgKB1reDqgafX
         /025CygfCRRSSOb6yvRzGNtToXKB1n3Xkr8VE=
Received: by 10.141.4.3 with SMTP id g3mr5407836rvi.116.1225344524404;
        Wed, 29 Oct 2008 22:28:44 -0700 (PDT)
Received: by 10.141.170.2 with HTTP; Wed, 29 Oct 2008 22:28:44 -0700 (PDT)
Message-ID: <867513fe0810292228t46d9a9cal403635aafd073c15@mail.gmail.com>
Date: Thu, 30 Oct 2008 10:58:44 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Querying wildcard
In-Reply-To: <359a92830810290534r2858e013u8b929dd22f6b296@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3303_12269500.1225344524395"
References: <6fc71b230810290415r6e676177i26894a9f41402bf0@mail.gmail.com>
	 <359a92830810290534r2858e013u8b929dd22f6b296@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3303_12269500.1225344524395
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Aditi,
As Eric mentioned, we'd need to know more to provide a rather apt solution.
At the same time, a prefix wildcard is a highly unoptimized thing for lucene
because of the way the index is stored/read. Ideally you'd atleast want to
reverse the tokens as already mentioned.
This is because the index terms are lexically sorted while storing and so
the seem/fetch is efficient under normal cases(and not under the case of a
prefix wildcard).

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Oct 29, 2008 at 6:04 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Sure, there are many tricks. If you search the mail archives you'll
> find a bunch of them.
>
> One would be to reverse the tokens and make your leading
> wildcard queries into trailing ones on the reversed field.
>
> But without more details about what you're trying to accomplish,
> there's not much really useful advice we can offer.
>
> Best
> Erick
>
> On Wed, Oct 29, 2008 at 7:15 AM, Aditi Goyal <aditigupta20@gmail.com>
> wrote:
>
> > Hi All,
> >
> > I have been wanting to do a wildcard search with * as a first letter on
> an
> > index.
> > Is there a way out except for setAllowLeadingWildcard() of QueryParser to
> > true? Because, i have heard it is an expensive operation.
> >
> > Thanks
> > Aditi
> >
>

------=_Part_3303_12269500.1225344524395--

From java-user-return-36893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 05:34:34 2008
Return-Path: <java-user-return-36893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14136 invoked from network); 30 Oct 2008 05:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 05:34:34 -0000
Received: (qmail 97910 invoked by uid 500); 30 Oct 2008 05:34:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97882 invoked by uid 500); 30 Oct 2008 05:34:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97871 invoked by uid 99); 30 Oct 2008 05:34:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 22:34:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 05:33:19 +0000
Received: from sparkling.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id 874421631E87
	for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 00:33:58 -0500 (CDT)
Message-ID: <49094744.10200@atlassian.com>
Date: Thu, 30 Oct 2008 16:33:56 +1100
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IllegalStateEx thrown when calling close
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <49079D87.4090809@atlassian.com> <05560314-92E8-416E-87B0-5F86BC4DAF01@mikemccandless.com> <4907B49F.7020309@atlassian.com> <4CFED863-992E-4596-9E90-7E395F3BCB51@mikemccandless.com>
In-Reply-To: <4CFED863-992E-4596-9E90-7E395F3BCB51@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

regarding this paragraph:

"To workaround this, on catching an OOME on any of IndexWriter's
methods, you should 1) forcibly remove the write lock
(IndexWriter.unlock static method) and then 2) not call any methods on
the old writer.  Even if the old writer has concurrent merges running,
they will refuse to commit on seeing that an OOM had occurred."

I'm not sure that an IndexWriter is particularly useful once its hitOOM 
flag is set to true, whether autocommit is true or not. Once it is true 
you can't do anything with it (it reverts to its last commit point and 
stays there) and need to discard it. I am suggesting that this could be 
documented as it is not immediately obvious without coming across it and 
debugging it. That being said, the VM is probably not that useful once 
OOMEs are flying around anyway :-)

cheers,
jed.

Michael McCandless wrote:
>
> Jed Wesley-Smith wrote:
>
>> Yeah, I saw the change to flush(). Trying to work out the correct 
>> strategy for our IndexWriter handling now. We probably should not be 
>> using autocommit for our writers.
>
> autoCommit=true is deprecated as of 2.4.0, and will go away when we 
> finally get to 3.0, so I think switching to false, and possibly 
> changing your app to periodically commit() if you were relying on 
> those semantics, is a good step forward.
>
>> It was brought up by others that the OutOfMemoryError handling 
>> requirements are a fairly strong part of the contract now - but 
>> aren't documented. Do you think the last paragraph below should be 
>> incorporated into the class JavaDoc?
>
> Well, that paragraph is a workaround for the issue you hit, which only 
> applies when autoCommit is true, so going forward (or, if you use 
> autoCommit=false) you should simply close the IndexWriter.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 06:43:57 2008
Return-Path: <java-user-return-36894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57056 invoked from network); 30 Oct 2008 06:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 06:43:57 -0000
Received: (qmail 37226 invoked by uid 500); 30 Oct 2008 06:43:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37191 invoked by uid 500); 30 Oct 2008 06:43:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37180 invoked by uid 99); 30 Oct 2008 06:43:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2008 23:43:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.188 as permitted sender)
Received: from [209.85.142.188] (HELO ti-out-0910.google.com) (209.85.142.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 06:42:42 +0000
Received: by ti-out-0910.google.com with SMTP id b8so208954tic.11
        for <java-user@lucene.apache.org>; Wed, 29 Oct 2008 23:43:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jYz5HPh3C57CVBud84F/7ZTptYIGIeJ7lmSoNeSohhg=;
        b=ZfJnknhVzX9FRbFqT9Bc9LzopSWBmDgcrlfirPem37zBSaqPO5vd62CzV9uPcpQdye
         m18dSyN1e7zD4dicgVCl0kT3fhZHy6a5qn/VvXnwJiBxZ6YiwhPee71iRbRBn863q/cv
         FKnUMd06fLq138tPZYcLbhTaQ4rM8QGMcEqRg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=aJ+xt1NCP5kKypHVdGWnitWJjeZwqU01MLR5WmhgvourzlKRpmHrWEOxQfbO1/A7re
         cmnw5nuBY4ZKJjIkfcZ+OM8TZ1MVNpwaa7cIZ2w3IwRgdp4/qH6wIVoGiSrw8ksmhiwA
         DkDYD9p4ZqUuHJNac/KHmGDhGOfvTrwOE6v+Q=
Received: by 10.110.105.10 with SMTP id d10mr2773286tic.8.1225348991834;
        Wed, 29 Oct 2008 23:43:11 -0700 (PDT)
Received: by 10.110.109.13 with HTTP; Wed, 29 Oct 2008 23:43:11 -0700 (PDT)
Message-ID: <6fc71b230810292343s23787310yd16f9e5188c69d14@mail.gmail.com>
Date: Thu, 30 Oct 2008 12:13:11 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Querying wildcard
In-Reply-To: <867513fe0810292228t46d9a9cal403635aafd073c15@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4113_10399237.1225348991799"
References: <6fc71b230810290415r6e676177i26894a9f41402bf0@mail.gmail.com>
	 <359a92830810290534r2858e013u8b929dd22f6b296@mail.gmail.com>
	 <867513fe0810292228t46d9a9cal403635aafd073c15@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4113_10399237.1225348991799
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Anshum and Eric.

Well, I was looking for something like searching by domain name in the email
address etc.
How can I reverse the tokens? Can you please explain in little detail?

Thanks,
Aditi

On Thu, Oct 30, 2008 at 10:58 AM, Anshum <anshumg@gmail.com> wrote:

> Hi Aditi,
> As Eric mentioned, we'd need to know more to provide a rather apt solution.
> At the same time, a prefix wildcard is a highly unoptimized thing for
> lucene
> because of the way the index is stored/read. Ideally you'd atleast want to
> reverse the tokens as already mentioned.
> This is because the index terms are lexically sorted while storing and so
> the seem/fetch is efficient under normal cases(and not under the case of a
> prefix wildcard).
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Wed, Oct 29, 2008 at 6:04 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > Sure, there are many tricks. If you search the mail archives you'll
> > find a bunch of them.
> >
> > One would be to reverse the tokens and make your leading
> > wildcard queries into trailing ones on the reversed field.
> >
> > But without more details about what you're trying to accomplish,
> > there's not much really useful advice we can offer.
> >
> > Best
> > Erick
> >
> > On Wed, Oct 29, 2008 at 7:15 AM, Aditi Goyal <aditigupta20@gmail.com>
> > wrote:
> >
> > > Hi All,
> > >
> > > I have been wanting to do a wildcard search with * as a first letter on
> > an
> > > index.
> > > Is there a way out except for setAllowLeadingWildcard() of QueryParser
> to
> > > true? Because, i have heard it is an expensive operation.
> > >
> > > Thanks
> > > Aditi
> > >
> >
>

------=_Part_4113_10399237.1225348991799--

From java-user-return-36895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 09:24:35 2008
Return-Path: <java-user-return-36895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7602 invoked from network); 30 Oct 2008 09:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 09:24:35 -0000
Received: (qmail 60992 invoked by uid 500); 30 Oct 2008 09:24:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60954 invoked by uid 500); 30 Oct 2008 09:24:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60943 invoked by uid 99); 30 Oct 2008 09:24:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 02:24:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 09:23:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so474125rvb.5
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 02:23:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=bl17+ib/wXX7JshA2Wkuy2dy5qMbCzucTVt707V2lrM=;
        b=xcNglmKHT3lWCPYuc8YiiiBR/93m3mODlf9SFpTBthcRo9/J7MG0MvKH3i8mCS8wPb
         3fK35LcAUFwQ5RXw4+Q0mSS2lFkwLw0zI0MjBOmJx0ZL3Rn/o6Wp+naRxL/+60Ia/7II
         iscM5ISMtN0NNO8mj/8+hhl6/KNlWcyPyivHk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=V37wskLJpdjWtbGlccbfsbZ0cYI0JfogfYxIAmlGV81NMD3TQOP6vDebRW3IckIsQZ
         8xgSgZ7k6twV+/lFrJ6MCDCC1MdW1gEDTSBB0n+xANka0hpCz93o1NaOis51QQQWhupZ
         FVlyvYdgYK2bp9mLX/3hlr0GB2/j4FBmUjbY8=
Received: by 10.141.49.18 with SMTP id b18mr5517222rvk.92.1225358630576;
        Thu, 30 Oct 2008 02:23:50 -0700 (PDT)
Received: by 10.141.170.2 with HTTP; Thu, 30 Oct 2008 02:23:50 -0700 (PDT)
Message-ID: <867513fe0810300223w2b754ca4id9e897a43f2ad756@mail.gmail.com>
Date: Thu, 30 Oct 2008 14:53:50 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Querying wildcard
In-Reply-To: <6fc71b230810292343s23787310yd16f9e5188c69d14@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5423_25922902.1225358630567"
References: <6fc71b230810290415r6e676177i26894a9f41402bf0@mail.gmail.com>
	 <359a92830810290534r2858e013u8b929dd22f6b296@mail.gmail.com>
	 <867513fe0810292228t46d9a9cal403635aafd073c15@mail.gmail.com>
	 <6fc71b230810292343s23787310yd16f9e5188c69d14@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5423_25922902.1225358630567
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Aditi,
In that case I could suggest you to just index the domain name seperately as
well i.e. index the following fields : email adddess, domain name; instead
of just email address.
When I said reverse the tokens, you could reverse the tokens while
indexing(just flipping the text string while indexing) and search for
reverse string while searching.
Eric might have a better solution though ! :)
Let me know if that solves the issue.
--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Oct 30, 2008 at 12:13 PM, Aditi Goyal <aditigupta20@gmail.com>wrote:

> Thanks Anshum and Eric.
>
> Well, I was looking for something like searching by domain name in the
> email
> address etc.
> How can I reverse the tokens? Can you please explain in little detail?
>
> Thanks,
> Aditi
>
> On Thu, Oct 30, 2008 at 10:58 AM, Anshum <anshumg@gmail.com> wrote:
>
> > Hi Aditi,
> > As Eric mentioned, we'd need to know more to provide a rather apt
> solution.
> > At the same time, a prefix wildcard is a highly unoptimized thing for
> > lucene
> > because of the way the index is stored/read. Ideally you'd atleast want
> to
> > reverse the tokens as already mentioned.
> > This is because the index terms are lexically sorted while storing and so
> > the seem/fetch is efficient under normal cases(and not under the case of
> a
> > prefix wildcard).
> >
> > --
> > Anshum Gupta
> > Naukri Labs!
> > http://ai-cafe.blogspot.com
> >
> > The facts expressed here belong to everybody, the opinions to me. The
> > distinction is yours to draw............
> >
> >
> > On Wed, Oct 29, 2008 at 6:04 PM, Erick Erickson <erickerickson@gmail.com
> > >wrote:
> >
> > > Sure, there are many tricks. If you search the mail archives you'll
> > > find a bunch of them.
> > >
> > > One would be to reverse the tokens and make your leading
> > > wildcard queries into trailing ones on the reversed field.
> > >
> > > But without more details about what you're trying to accomplish,
> > > there's not much really useful advice we can offer.
> > >
> > > Best
> > > Erick
> > >
> > > On Wed, Oct 29, 2008 at 7:15 AM, Aditi Goyal <aditigupta20@gmail.com>
> > > wrote:
> > >
> > > > Hi All,
> > > >
> > > > I have been wanting to do a wildcard search with * as a first letter
> on
> > > an
> > > > index.
> > > > Is there a way out except for setAllowLeadingWildcard() of
> QueryParser
> > to
> > > > true? Because, i have heard it is an expensive operation.
> > > >
> > > > Thanks
> > > > Aditi
> > > >
> > >
> >
>

------=_Part_5423_25922902.1225358630567--

From java-user-return-36896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 10:07:56 2008
Return-Path: <java-user-return-36896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35137 invoked from network); 30 Oct 2008 10:07:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 10:07:56 -0000
Received: (qmail 97036 invoked by uid 500); 30 Oct 2008 10:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97003 invoked by uid 500); 30 Oct 2008 10:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96992 invoked by uid 99); 30 Oct 2008 10:07:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 03:07:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 10:06:37 +0000
Received: by an-out-0708.google.com with SMTP id c37so49206anc.49
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 03:07:15 -0700 (PDT)
Received: by 10.100.140.1 with SMTP id n1mr441366and.13.1225361235515;
        Thu, 30 Oct 2008 03:07:15 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c20sm3352825ana.21.2008.10.30.03.07.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 30 Oct 2008 03:07:14 -0700 (PDT)
Message-Id: <35CB63A7-41FA-498F-AC28-C436B4DEE0D6@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <49094744.10200@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IllegalStateEx thrown when calling close
Date: Thu, 30 Oct 2008 06:07:11 -0400
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <49079D87.4090809@atlassian.com> <05560314-92E8-416E-87B0-5F86BC4DAF01@mikemccandless.com> <4907B49F.7020309@atlassian.com> <4CFED863-992E-4596-9E90-7E395F3BCB51@mikemccandless.com> <49094744.10200@atlassian.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I'll add that (what IW does on setting an OOME) to the javadocs.

Mike

Jed Wesley-Smith wrote:

> Mike,
>
> regarding this paragraph:
>
> "To workaround this, on catching an OOME on any of IndexWriter's
> methods, you should 1) forcibly remove the write lock
> (IndexWriter.unlock static method) and then 2) not call any methods on
> the old writer.  Even if the old writer has concurrent merges running,
> they will refuse to commit on seeing that an OOM had occurred."
>
> I'm not sure that an IndexWriter is particularly useful once its  
> hitOOM flag is set to true, whether autocommit is true or not. Once  
> it is true you can't do anything with it (it reverts to its last  
> commit point and stays there) and need to discard it. I am  
> suggesting that this could be documented as it is not immediately  
> obvious without coming across it and debugging it. That being said,  
> the VM is probably not that useful once OOMEs are flying around  
> anyway :-)
>
> cheers,
> jed.
>
> Michael McCandless wrote:
>>
>> Jed Wesley-Smith wrote:
>>
>>> Yeah, I saw the change to flush(). Trying to work out the correct  
>>> strategy for our IndexWriter handling now. We probably should not  
>>> be using autocommit for our writers.
>>
>> autoCommit=true is deprecated as of 2.4.0, and will go away when we  
>> finally get to 3.0, so I think switching to false, and possibly  
>> changing your app to periodically commit() if you were relying on  
>> those semantics, is a good step forward.
>>
>>> It was brought up by others that the OutOfMemoryError handling  
>>> requirements are a fairly strong part of the contract now - but  
>>> aren't documented. Do you think the last paragraph below should be  
>>> incorporated into the class JavaDoc?
>>
>> Well, that paragraph is a workaround for the issue you hit, which  
>> only applies when autoCommit is true, so going forward (or, if you  
>> use autoCommit=false) you should simply close the IndexWriter.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 10:20:05 2008
Return-Path: <java-user-return-36897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43515 invoked from network); 30 Oct 2008 10:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 10:20:05 -0000
Received: (qmail 13011 invoked by uid 500); 30 Oct 2008 10:20:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12630 invoked by uid 500); 30 Oct 2008 10:20:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12613 invoked by uid 99); 30 Oct 2008 10:20:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 03:20:00 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 10:18:45 +0000
Received: by el-out-1112.google.com with SMTP id p32so205537elf.14
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 03:19:24 -0700 (PDT)
Received: by 10.90.53.5 with SMTP id b5mr4199437aga.15.1225361964178;
        Thu, 30 Oct 2008 03:19:24 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c44sm1994115hsc.9.2008.10.30.03.19.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 30 Oct 2008 03:19:23 -0700 (PDT)
Message-Id: <E3582D03-93FC-4B0F-9F0D-8CE2C6CF18B3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <847931a70810291930u8cea406oc4363b1c15cb0f1c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
Date: Thu, 30 Oct 2008 06:19:21 -0400
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com> <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com> <4908FAA4.9070809@gmail.com> <847931a70810291930u8cea406oc4363b1c15cb0f1c@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


The terms index (*.tii), which is loaded entirely into RAM, can  
consume an unexpectedly large amount of memory when there are an  
unusually high number of terms.   If you are not using compound file  
format, can you look at the size of *.tii?

If this is what is affecting you, one simple workaround is to call  
IndexReader.setTermInfosIndexDivisor, which subsamples the terms in  
*.tii when loading them into RAM.  EG passing in 2 halves the RAM  
used, but, seeks to a given term will take longer.

I think we can actually improve the memory usage of tii as part of the  
flexible indexing work; I think with a small change to the file format  
we don't need to store a separate TermInfo instance for each indexed  
term, which'd be a big RAM savings for indices with many unique terms.

Another thing to watch out for is norms: if you have 300M docs, then  
each fields which has norms turned on (they are turned on by default)  
will consume 300M of RAM.  If you decide to turn norms off, you have  
to fully re-index since norms "spread" during segment merging.

Mike

Todd Benge wrote:

> Thanks Mark.  I appreciate the help.
>
> I thought our memory may be low but wanted to verify there if there is
> any way to control memory usage.  I think we'll likely upgrade the
> memory on the machines but that may just delay the inevitable.
>
> Wondering if anyone else has encountered similar issues with indices
> if a similar size.  I've been thinking we will need to move to a
> clustered solution and have been reading on hadoop, nutch, solr &
> terracotta for possibilities such as index sharding.
>
> Has anyone implemented a solution using hadoop or terracotta for a
> large scale system?  Just wondering the pro's / con's of the various
> approaches.
>
> Thanks,
>
> Todd
>
> On Wed, Oct 29, 2008 at 6:07 PM, Mark Miller <markrmiller@gmail.com>  
> wrote:
>> The term, terminfo, indexreader internals stuff is prob on the low  
>> end
>> compared to the size of your field caches (needed for sorting). If  
>> you are
>> sorting by String I think the space needed is 32 bits x number of  
>> docs + an
>> array to hold all of the unique terms. So checking 300 million docs  
>> (I know
>> you are actually breaking it up smaller than that, but for example)  
>> and
>> ignoring things like String chars being variable byte lengths and  
>> storing
>> the length, etc and randomly picking 50000 unique terms at 6 chars  
>> per:
>>
>> 32 bits x 300000000 + 50000 x 6 x 16 bits to MB = 1 144.98138  
>> megabytes
>>
>> Thats per field your sorting on. If you are sorting on an int field  
>> it
>> should be closer to 32 bits x num docs - shorts, 32 bits x num  
>> docs, etc.
>>
>> So you have those field caches, plus the IndexReader terminfo, term  
>> stuff,
>> plus whatever RAM your app needs beyond Lucene. 4 gig might just  
>> not *quite*
>> cut it is my guess.
>>
>> Todd Benge wrote:
>>>
>>> There's usually only a couple sort fields and a bunch of terms in  
>>> the
>>> various indices.  The terms are user entered on various media so the
>>> number of terms is very large.
>>>
>>> Thanks for the help.
>>>
>>> Todd
>>>
>>>
>>>
>>> On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:
>>>
>>>>
>>>> Hi,
>>>>
>>>> I'm the lead engineer for search on a large website using lucene  
>>>> for
>>>> search.
>>>>
>>>> We're indexing about 300M documents in ~ 100 indices.  The  
>>>> indices add
>>>> up to ~ 60G.
>>>>
>>>> The indices are sorted into 4 different Multisearcher with the  
>>>> largest
>>>> handling ~50G.
>>>>
>>>> The code is basically like the following:
>>>>
>>>> private static MultiSearcher searcher;
>>>>
>>>> public void init(File files) {
>>>>
>>>>    IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>>>>    int i = 0;
>>>>    for ( File file: files ) {
>>>>         searchers[i++] = new
>>>> IndexSearcher(FSDirectory.getDirectory(file);
>>>>    }
>>>>
>>>> searcher = new MultiSearcher(searchers);
>>>> }
>>>>
>>>> public Searcher getSearcher() {
>>>>  return searcher;
>>>> }
>>>>
>>>> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
>>>> Performance is good but servers are consistently hanging with
>>>> OutOfMemory errors.
>>>>
>>>> We're allocating 4G in the heap to each server.
>>>>
>>>> Is there any way to control the amount of memory Lucene consume for
>>>> caching?  Any other suggestions on fixing the memory errors?
>>>>
>>>> Thanks,
>>>>
>>>> Todd
>>>>
>>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 10:21:40 2008
Return-Path: <java-user-return-36898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44327 invoked from network); 30 Oct 2008 10:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 10:21:40 -0000
Received: (qmail 17098 invoked by uid 500); 30 Oct 2008 10:21:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16936 invoked by uid 500); 30 Oct 2008 10:21:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16925 invoked by uid 99); 30 Oct 2008 10:21:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 03:21:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 10:20:23 +0000
Received: by yw-out-2324.google.com with SMTP id 3so153045ywj.5
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 03:21:02 -0700 (PDT)
Received: by 10.90.71.16 with SMTP id t16mr6195561aga.26.1225362062433;
        Thu, 30 Oct 2008 03:21:02 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c44sm1995844hsc.9.2008.10.30.03.21.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 30 Oct 2008 03:21:01 -0700 (PDT)
Message-Id: <3C9FEDB4-C296-426B-A776-924A199CA721@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4908F241.1000009@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IllegalStateEx thrown when calling close
Date: Thu, 30 Oct 2008 06:20:59 -0400
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <4907FC2D.2070709@atlassian.com> <EF97CC01-762E-4F20-94EA-AA1948657A2A@mikemccandless.com> <4908F241.1000009@atlassian.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually, yes in 2.3.2: IndexReader.unlock has existed for a long time.

In 2.4.0, we moved this to IndexWriter.unlock.

Mike

Jed Wesley-Smith wrote:

> not in 2.3.2 though.
>
> cheers,
> jed.
>
> Michael McCandless wrote:
>>
>> Or you can use IndexReader.unlock.
>>
>> Mike
>>
>> Jed Wesley-Smith wrote:
>>
>>> Michael McCandless wrote:
>>>>
>>>> To workaround this, on catching an OOME on any of IndexWriter's
>>>> methods, you should 1) forcibly remove the write lock
>>>> (IndexWriter.unlock static method)
>>>
>>> IndexWriter.unlock(*) is 2.4 only.
>>>
>>> Use the following instead:
>>>
>>>  directory.makeLock(IndexWriter.WRITE_LOCK_NAME).release();
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 10:38:47 2008
Return-Path: <java-user-return-36899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53230 invoked from network); 30 Oct 2008 10:38:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 10:38:47 -0000
Received: (qmail 43296 invoked by uid 500); 30 Oct 2008 10:38:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42995 invoked by uid 500); 30 Oct 2008 10:38:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42984 invoked by uid 99); 30 Oct 2008 10:38:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 03:38:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.170.186 as permitted sender)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 10:37:28 +0000
Received: by rn-out-0910.google.com with SMTP id j71so401465rne.4
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 03:37:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=MgV47ZavG0eRmZNO9iW5LXeJ05q2LZzzZAHAsTr2WDo=;
        b=CVOZLROdd+Md8ge+yz8fYF6H13IN3slSN+fn8XKPkAVX4/WvuxbKmWAHRJXnwyD79E
         pvwEmPiqM5J34Pk737YPr7a/rAf78Bv9aUs/hVpovGq8cRJ957F1wKxWXDE7ukpP8hg7
         +KFrWpRz1Yus8NCaDsZcgYaQE3UqdB9FzI+/M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=XEAX9iOFKWbxYMgF+LUcZ2ajCSBEi2lB+sHcBhv2VQ9w8NOdo5Z1/Vh/uLBaouwBCx
         wah9TK8Y3t+OkGC+iUta/9UylQVRQntfv4bjwrNe27+0P63lRsb+kHIcG1WmlWv5tMRc
         +xjXGVQbaAQTsXKvupJuKO9642m+hTBo/C1AI=
Received: by 10.64.196.9 with SMTP id t9mr10653768qbf.66.1225363078475;
        Thu, 30 Oct 2008 03:37:58 -0700 (PDT)
Received: from ?10.148.150.111? ([32.138.216.87])
        by mx.google.com with ESMTPS id 9sm2388698qbw.6.2008.10.30.03.37.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 30 Oct 2008 03:37:57 -0700 (PDT)
Message-Id: <7503256B-491D-47ED-BABC-138C3364E72E@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <847931a70810291930u8cea406oc4363b1c15cb0f1c@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5F136)
Mime-Version: 1.0 (iPhone Mail 5F136)
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
Date: Thu, 30 Oct 2008 06:37:48 -0400
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com> <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com> <4908FAA4.9070809@gmail.com> <847931a70810291930u8cea406oc4363b1c15cb0f1c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Michaels got some great points (he the lucene master), especially  
possibly turning off norms if you can, but for an index like that i'd  
reccomwnd solr. Solr sharding can be scaled to billions (min a billion  
or two anyway) with few limitations (of course there are a few). Plus  
it has further caching options, indexreader refresh managment, etc etc  
etc


- Mark


On Oct 29, 2008, at 10:30 PM, "Todd Benge" <todd.benge@gmail.com> wrote:

> Thanks Mark.  I appreciate the help.
>
> I thought our memory may be low but wanted to verify there if there is
> any way to control memory usage.  I think we'll likely upgrade the
> memory on the machines but that may just delay the inevitable.
>
> Wondering if anyone else has encountered similar issues with indices
> if a similar size.  I've been thinking we will need to move to a
> clustered solution and have been reading on hadoop, nutch, solr &
> terracotta for possibilities such as index sharding.
>
> Has anyone implemented a solution using hadoop or terracotta for a
> large scale system?  Just wondering the pro's / con's of the various
> approaches.
>
> Thanks,
>
> Todd
>
> On Wed, Oct 29, 2008 at 6:07 PM, Mark Miller <markrmiller@gmail.com>  
> wrote:
>> The term, terminfo, indexreader internals stuff is prob on the low  
>> end
>> compared to the size of your field caches (needed for sorting). If  
>> you are
>> sorting by String I think the space needed is 32 bits x number of  
>> docs + an
>> array to hold all of the unique terms. So checking 300 million docs  
>> (I know
>> you are actually breaking it up smaller than that, but for example)  
>> and
>> ignoring things like String chars being variable byte lengths and  
>> storing
>> the length, etc and randomly picking 50000 unique terms at 6 chars  
>> per:
>>
>> 32 bits x 300000000 + 50000 x 6 x 16 bits to MB = 1 144.98138  
>> megabytes
>>
>> Thats per field your sorting on. If you are sorting on an int field  
>> it
>> should be closer to 32 bits x num docs - shorts, 32 bits x num  
>> docs, etc.
>>
>> So you have those field caches, plus the IndexReader terminfo, term  
>> stuff,
>> plus whatever RAM your app needs beyond Lucene. 4 gig might just  
>> not *quite*
>> cut it is my guess.
>>
>> Todd Benge wrote:
>>>
>>> There's usually only a couple sort fields and a bunch of terms in  
>>> the
>>> various indices.  The terms are user entered on various media so the
>>> number of terms is very large.
>>>
>>> Thanks for the help.
>>>
>>> Todd
>>>
>>>
>>>
>>> On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:
>>>
>>>>
>>>> Hi,
>>>>
>>>> I'm the lead engineer for search on a large website using lucene  
>>>> for
>>>> search.
>>>>
>>>> We're indexing about 300M documents in ~ 100 indices.  The  
>>>> indices add
>>>> up to ~ 60G.
>>>>
>>>> The indices are sorted into 4 different Multisearcher with the  
>>>> largest
>>>> handling ~50G.
>>>>
>>>> The code is basically like the following:
>>>>
>>>> private static MultiSearcher searcher;
>>>>
>>>> public void init(File files) {
>>>>
>>>>    IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>>>>    int i = 0;
>>>>    for ( File file: files ) {
>>>>         searchers[i++] = new
>>>> IndexSearcher(FSDirectory.getDirectory(file);
>>>>    }
>>>>
>>>> searcher = new MultiSearcher(searchers);
>>>> }
>>>>
>>>> public Searcher getSearcher() {
>>>>  return searcher;
>>>> }
>>>>
>>>> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
>>>> Performance is good but servers are consistently hanging with
>>>> OutOfMemory errors.
>>>>
>>>> We're allocating 4G in the heap to each server.
>>>>
>>>> Is there any way to control the amount of memory Lucene consume for
>>>> caching?  Any other suggestions on fixing the memory errors?
>>>>
>>>> Thanks,
>>>>
>>>> Todd
>>>>
>>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 11:08:01 2008
Return-Path: <java-user-return-36900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63657 invoked from network); 30 Oct 2008 11:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 11:08:00 -0000
Received: (qmail 71139 invoked by uid 500); 30 Oct 2008 11:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71103 invoked by uid 500); 30 Oct 2008 11:08:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71091 invoked by uid 99); 30 Oct 2008 11:07:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 04:07:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 11:06:43 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m9UB6Rb11906
	for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 06:06:27 -0500
Message-ID: <4909951A.5050309@getopt.org>
Date: Thu, 30 Oct 2008 12:06:02 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Luke is coming .. not there yet.
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Many people ask me when the next version of Luke becomes available. It's 
almost ready, and the release should happen in about a week, depending 
on the situation in my daily job.

I'd like to ask the Lucene user community what version of Lucene would 
be preferable to include in this Luke release:

1) Luke 2.4 release. This has the advantage of being an official stable 
release, with a well-defined functionality. The disadvantage is that you 
will miss some new features available in 2.9 (current trunk) for a long 
time to come, at least until the next Lucene release.

2) Luke 2.9-dev snapshot. This has the advantage that you get the 
cutting-edge features, and it's easier to update Luke to the most recent 
version of Lucene. However, it means that any modifications to existing 
indexes (such as e.g. deleting a doc, or optimizing an index) will 
promote the index to a new format, incompatible with earlier versions of 
Lucene (including 2.4 release).

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 11:22:40 2008
Return-Path: <java-user-return-36901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69198 invoked from network); 30 Oct 2008 11:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 11:22:40 -0000
Received: (qmail 85684 invoked by uid 500); 30 Oct 2008 11:22:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85647 invoked by uid 500); 30 Oct 2008 11:22:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85636 invoked by uid 99); 30 Oct 2008 11:22:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 04:22:37 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.218] (HELO web26007.mail.ukl.yahoo.com) (217.12.10.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Oct 2008 11:21:21 +0000
Received: (qmail 71357 invoked by uid 60001); 30 Oct 2008 11:21:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=WFnQx0rpdNWatvEjU38Pt0SncgrpdktVUJAml/p93qsklCg/dp2QnUkSP/91JBDnT/fTshIz9H93PHmOfRa1VoBLSiVaN5lFzHKlahIR91gkOoCoc3wTuVICi8Un+KKvpOmmhyocu5Ho1nRkc8b8KSY3NKOulqAzZxjNgJTkxDs=;
X-YMail-OSG: TUu7ULUVM1l7GWQRxEqg87CWBqu.BrbqImOeVDdr6Xzir8rpaCnymaNDz70TGVRkMPmViFV0umWfds35QTKF0kGVegi8wvE9AYjzTCaS.xxpBo.XWYJANOdT3hbyMfqbf1p6M8JquLNW90w__jVDSa65jkj.CKK_CBJeSw34i5.avI0_nultT1meTZCh
Received: from [193.36.230.96] by web26007.mail.ukl.yahoo.com via HTTP; Thu, 30 Oct 2008 11:21:58 GMT
X-Mailer: YahooMailRC/1155.20 YahooMailWebService/0.7.260.1
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com> <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com> <4908FAA4.9070809@gmail.com> <847931a70810291930u8cea406oc4363b1c15cb0f1c@mail.gmail.com> <7503256B-491D-47ED-BABC-138C3364E72E@gmail.com>
Date: Thu, 30 Oct 2008 11:21:58 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <546908.71196.qm@web26007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

One issue with the existing field cache implementation is that it uses int =
arrays to reference into the list of unique terms where short or even byte =
arrays may suffice for fields with smaller numbers of unique terms.=0AHow m=
any unique terms do you have?=0A=0AI posted some code that measures the pot=
ential RAM savings to be had, given your particular index.=0A    See here: =
http://www.nabble.com/Re%3A-Question-regarding-sorting-and-memory-consumpti=
on-in-lucene-p19997753.html=0A=0AThis code shows what theoretically could b=
e saved given a different approach to field caching. Unfortunately the use =
of int arrays is not abstracted in Lucene's StringIndex so this optimisatio=
n cannot be dropped in without some disruption.=0AShame, as there is a big =
difference between byte[reader.maxDoc] and int[reader.maxDoc] when you are =
working with large indexes and are tight on RAM.=0A=0AIf you're prepared to=
 write a more optimized custom field cache then the above code may be a use=
ful start point.=0A=0ACheers,=0AMark=0A=0A=0A=0A=0A=0A----- Original Messag=
e ----=0AFrom: Mark Miller <markrmiller@gmail.com>=0ATo: "java-user@lucene.=
apache.org" <java-user@lucene.apache.org>=0ASent: Thursday, 30 October, 200=
8 10:37:48=0ASubject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat=0A=0AMic=
haels got some great points (he the lucene master), especially possibly tur=
ning off norms if you can, but for an index like that i'd reccomwnd solr. S=
olr sharding can be scaled to billions (min a billion or two anyway) with f=
ew limitations (of course there are a few). Plus it has further caching opt=
ions, indexreader refresh managment, etc etc etc=0A=0A=0A- Mark=0A=0A=0AOn =
Oct 29, 2008, at 10:30 PM, "Todd Benge" <todd.benge@gmail.com> wrote:=0A=0A=
> Thanks Mark.  I appreciate the help.=0A> =0A> I thought our memory may be=
 low but wanted to verify there if there is=0A> any way to control memory u=
sage.  I think we'll likely upgrade the=0A> memory on the machines but that=
 may just delay the inevitable.=0A> =0A> Wondering if anyone else has encou=
ntered similar issues with indices=0A> if a similar size.  I've been thinki=
ng we will need to move to a=0A> clustered solution and have been reading o=
n hadoop, nutch, solr &=0A> terracotta for possibilities such as index shar=
ding.=0A> =0A> Has anyone implemented a solution using hadoop or terracotta=
 for a=0A> large scale system?  Just wondering the pro's / con's of the var=
ious=0A> approaches.=0A> =0A> Thanks,=0A> =0A> Todd=0A> =0A> On Wed, Oct 29=
, 2008 at 6:07 PM, Mark Miller <markrmiller@gmail.com> wrote:=0A>> The term=
, terminfo, indexreader internals stuff is prob on the low end=0A>> compare=
d to the size of your field caches (needed for sorting). If you are=0A>> so=
rting by String I think the space needed is 32 bits x number of docs + an=
=0A>> array to hold all of the unique terms. So checking 300 million docs (=
I know=0A>> you are actually breaking it up smaller than that, but for exam=
ple) and=0A>> ignoring things like String chars being variable byte lengths=
 and storing=0A>> the length, etc and randomly picking 50000 unique terms a=
t 6 chars per:=0A>> =0A>> 32 bits x 300000000 + 50000 x 6 x 16 bits to MB =
=3D 1 144.98138 megabytes=0A>> =0A>> Thats per field your sorting on. If yo=
u are sorting on an int field it=0A>> should be closer to 32 bits x num doc=
s - shorts, 32 bits x num docs, etc.=0A>> =0A>> So you have those field cac=
hes, plus the IndexReader terminfo, term stuff,=0A>> plus whatever RAM your=
 app needs beyond Lucene. 4 gig might just not *quite*=0A>> cut it is my gu=
ess.=0A>> =0A>> Todd Benge wrote:=0A>>> =0A>>> There's usually only a coupl=
e sort fields and a bunch of terms in the=0A>>> various indices.  The terms=
 are user entered on various media so the=0A>>> number of terms is very lar=
ge.=0A>>> =0A>>> Thanks for the help.=0A>>> =0A>>> Todd=0A>>> =0A>>> =0A>>>=
 =0A>>> On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:=0A>>> =0A>>>>=
 =0A>>>> Hi,=0A>>>> =0A>>>> I'm the lead engineer for search on a large web=
site using lucene for=0A>>>> search.=0A>>>> =0A>>>> We're indexing about 30=
0M documents in ~ 100 indices.  The indices add=0A>>>> up to ~ 60G.=0A>>>> =
=0A>>>> The indices are sorted into 4 different Multisearcher with the larg=
est=0A>>>> handling ~50G.=0A>>>> =0A>>>> The code is basically like the fol=
lowing:=0A>>>> =0A>>>> private static MultiSearcher searcher;=0A>>>> =0A>>>=
> public void init(File files) {=0A>>>> =0A>>>>    IndexSearcer [] searcher=
s =3D new IndexSearcher[files.length] ();=0A>>>>    int i =3D 0;=0A>>>>    =
for ( File file: files ) {=0A>>>>         searchers[i++] =3D new=0A>>>> Ind=
exSearcher(FSDirectory.getDirectory(file);=0A>>>>    }=0A>>>> =0A>>>> searc=
her =3D new MultiSearcher(searchers);=0A>>>> }=0A>>>> =0A>>>> public Search=
er getSearcher() {=0A>>>>  return searcher;=0A>>>> }=0A>>>> =0A>>>> We're s=
eeing a high cache rate with Term & TermInfo in Lucene 2.4.=0A>>>> Performa=
nce is good but servers are consistently hanging with=0A>>>> OutOfMemory er=
rors.=0A>>>> =0A>>>> We're allocating 4G in the heap to each server.=0A>>>>=
 =0A>>>> Is there any way to control the amount of memory Lucene consume fo=
r=0A>>>> caching?  Any other suggestions on fixing the memory errors?=0A>>>=
> =0A>>>> Thanks,=0A>>>> =0A>>>> Todd=0A>>>> =0A>>>> =0A>>> =0A>>> =0A>> =
=0A>> =0A>> ---------------------------------------------------------------=
------=0A>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A>> For additional commands, e-mail: java-user-help@lucene.apache.org=0A>=
> =0A>> =0A> =0A> ---------------------------------------------------------=
------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apach=
e.org=0A> For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A> =0A=0A----------------------------------------------------------------=
-----=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AF=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A  =
    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 11:24:49 2008
Return-Path: <java-user-return-36902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69641 invoked from network); 30 Oct 2008 11:24:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 11:24:49 -0000
Received: (qmail 88432 invoked by uid 500); 30 Oct 2008 11:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88250 invoked by uid 500); 30 Oct 2008 11:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88239 invoked by uid 99); 30 Oct 2008 11:24:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 04:24:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Oct 2008 11:23:30 +0000
Received: (qmail 58504 invoked by uid 60001); 30 Oct 2008 11:24:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Pii9PqAGLqYSYlPMFF2n4Fal4lQCXyQGm38abiXwtYbZ77QQTbEF44Sk1yT9+0Tj6la6PG9JaTqqPW4Su85mCpAr64cPtLSkl0XQwPum9B+2NwLdoFk6UZBAd+Mz7GnG8Vi7iv0Rrqv3jehWjTBuQV7Qo2oJ7W1SiAyNEBK5tlQ=;
X-YMail-OSG: sbQ9RgoVM1mv77ZY.POhkOdp1f6O1C87J7.dDuWCk1VOSZDFS0STakQ5wlLVUZk_MOGDpsnX.IAasFi65eXpdkqzLRP9TT0bi102M_DeDpJxS2228Srh4CLXI7uQkRjQqj_gxzbEYjvugYX7.w._F94BFnHCOH37x3SpK7LrDQ9V9mOBSmA65GvrWXvm
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Thu, 30 Oct 2008 11:24:08 GMT
X-Mailer: YahooMailRC/1155.20 YahooMailWebService/0.7.260.1
References: <4909951A.5050309@getopt.org>
Date: Thu, 30 Oct 2008 11:24:08 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Luke is coming .. not there yet.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <137265.58484.qm@web26008.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>I'd like to ask the Lucene user community what version of Lucene would be=
 preferable=0A=0AA Swing-based one, managed in Lucene/contrib and released =
with every Lucene build .=0A=0A;)=0A=0A=0A=0A=0A=0A=0A----- Original Messag=
e ----=0AFrom: Andrzej Bialecki <ab@getopt.org>=0ATo: java-user@lucene.apac=
he.org=0ASent: Thursday, 30 October, 2008 11:06:02=0ASubject: Luke is comin=
g .. not there yet.=0A=0AHi all,=0A=0AMany people ask me when the next vers=
ion of Luke becomes available. It's almost ready, and the release should ha=
ppen in about a week, depending on the situation in my daily job.=0A=0AI'd =
like to ask the Lucene user community what version of Lucene would be prefe=
rable to include in this Luke release:=0A=0A1) Luke 2.4 release. This has t=
he advantage of being an official stable release, with a well-defined funct=
ionality. The disadvantage is that you will miss some new features availabl=
e in 2.9 (current trunk) for a long time to come, at least until the next L=
ucene release.=0A=0A2) Luke 2.9-dev snapshot. This has the advantage that y=
ou get the cutting-edge features, and it's easier to update Luke to the mos=
t recent version of Lucene. However, it means that any modifications to exi=
sting indexes (such as e.g. deleting a doc, or optimizing an index) will pr=
omote the index to a new format, incompatible with earlier versions of Luce=
ne (including 2.4 release).=0A=0A-- Best regards,=0AAndrzej Bialecki     <>=
<=0A___. ___ ___ ___ _ _   __________________________________=0A[__ || __|_=
_/|__||\/|  Information Retrieval, Semantic Web=0A___|||__||  \|  ||  |  Em=
bedded Unix, System Integration=0Ahttp://www.sigram.com  Contact: info at s=
igram dot com=0A=0A=0A-----------------------------------------------------=
----------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apa=
che.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=
=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 11:27:53 2008
Return-Path: <java-user-return-36903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70751 invoked from network); 30 Oct 2008 11:27:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 11:27:52 -0000
Received: (qmail 95122 invoked by uid 500); 30 Oct 2008 11:27:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95096 invoked by uid 500); 30 Oct 2008 11:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95085 invoked by uid 99); 30 Oct 2008 11:27:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 04:27:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 11:26:36 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m9UBRLZ20546
	for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 06:27:21 -0500
Message-ID: <49099A00.6070307@getopt.org>
Date: Thu, 30 Oct 2008 12:26:56 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Luke is coming .. not there yet.
References: <4909951A.5050309@getopt.org>
In-Reply-To: <4909951A.5050309@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Andrzej Bialecki wrote:

> 1) Luke 2.4 release. This has the advantage of being an official stable 
[...]

> 2) Luke 2.9-dev snapshot. This has the advantage that you get the 
[...]

Of course I meant Lucene 2.4 and Lucene 2.9-dev ... sorry for the confusion.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 11:33:33 2008
Return-Path: <java-user-return-36904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73579 invoked from network); 30 Oct 2008 11:33:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 11:33:32 -0000
Received: (qmail 14225 invoked by uid 500); 30 Oct 2008 11:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14191 invoked by uid 500); 30 Oct 2008 11:33:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14180 invoked by uid 99); 30 Oct 2008 11:33:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 04:33:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 11:32:16 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m9UBX1G04796
	for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 06:33:01 -0500
Message-ID: <49099B55.5040702@getopt.org>
Date: Thu, 30 Oct 2008 12:32:37 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Luke is coming .. not there yet.
References: <4909951A.5050309@getopt.org> <137265.58484.qm@web26008.mail.ukl.yahoo.com>
In-Reply-To: <137265.58484.qm@web26008.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

mark harwood wrote:
>>> I'd like to ask the Lucene user community what version of Lucene would be preferable
> 
> A Swing-based one, managed in Lucene/contrib and released with every Lucene build .
> 
> ;)


I agree, this would be ideal. Regretfully, I'm a terrible Swing 
programmer, so unless someone else does it it's simply not going to 
happen. All code in Luke except for the Thinlet class is under Apache 
License, so feel free to start coding :)

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 11:53:16 2008
Return-Path: <java-user-return-36905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79669 invoked from network); 30 Oct 2008 11:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 11:53:15 -0000
Received: (qmail 54007 invoked by uid 500); 30 Oct 2008 11:53:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53970 invoked by uid 500); 30 Oct 2008 11:53:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53959 invoked by uid 99); 30 Oct 2008 11:53:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 04:53:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Oct 2008 11:51:55 +0000
Received: (qmail 53642 invoked by uid 60001); 30 Oct 2008 11:52:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=tDcj5B6KEFp0xUFTQAOzuuoQ0Jrqicc6j4EyWJMCommV6IC18j9H/+/Prmmtiskrf0MMwaXyE+4PEuN9K9K+k2KeGIyuymzatHzR9njawRfWqqW6fQO6Jqs+LaulYf2uk4Sj7pnuTlOU16ctaZrAfLwVAC1kVZSGimjzE6Bovqw=;
X-YMail-OSG: PRDoT9EVM1kTR20tYzomBt3MMD4UgRCrVtU2tQZvB_aIJxDnL3xx2vav4nJz_r0o0Ks2p1vN16t8_cD9yFthUMxw1ekFKkoJaovWZToOlIJH__8yPZuHbkZ2SUT88KQviOHdQynBJ_JS88czR.NVAaTF7qQytujvi51vaQBZGWlq11TntaOkTX0UXgl.
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Thu, 30 Oct 2008 11:52:33 GMT
X-Mailer: YahooMailRC/1155.20 YahooMailWebService/0.7.260.1
References: <4909951A.5050309@getopt.org> <137265.58484.qm@web26008.mail.ukl.yahoo.com> <49099B55.5040702@getopt.org>
Date: Thu, 30 Oct 2008 11:52:33 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Luke is coming .. not there yet.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <629842.53512.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>Regretfully, I'm a terrible Swing programmer=0A=0AI know you've raised th=
is before, - I wasn't prompting you to do the work :)=0A=0AI did make some =
promising in-roads into a GWT web-based version which was Apache-license fr=
iendly but ultimately I didn't want to bring in a build-time dependency on =
the 10Mb Google GWT compiler. That seemed too cumbersome to add to the Luce=
ne packaging. =0ASwing is probably the way to go but like a lot of people h=
ere I have limited time - maybe a Summer of Code project would help get thi=
s laid to rest?=0A=0ACheers=0AMark=0A=0A=0A=0A=0A=0A----- Original Message =
----=0AFrom: Andrzej Bialecki <ab@getopt.org>=0ATo: java-user@lucene.apache=
.org=0ASent: Thursday, 30 October, 2008 11:32:37=0ASubject: Re: Luke is com=
ing .. not there yet.=0A=0Amark harwood wrote:=0A>>> I'd like to ask the Lu=
cene user community what version of Lucene would be preferable=0A> =0A> A S=
wing-based one, managed in Lucene/contrib and released with every Lucene bu=
ild .=0A> =0A> ;)=0A=0A=0AI agree, this would be ideal. Regretfully, I'm a =
terrible Swing programmer, so unless someone else does it it's simply not g=
oing to happen. All code in Luke except for the Thinlet class is under Apac=
he License, so feel free to start coding :)=0A=0A-- Best regards,=0AAndrzej=
 Bialecki     <><=0A___. ___ ___ ___ _ _   ________________________________=
__=0A[__ || __|__/|__||\/|  Information Retrieval, Semantic Web=0A___|||__|=
|  \|  ||  |  Embedded Unix, System Integration=0Ahttp://www.sigram.com  Co=
ntact: info at sigram dot com=0A=0A=0A-------------------------------------=
--------------------------------=0ATo unsubscribe, e-mail: java-user-unsubs=
cribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 13:29:37 2008
Return-Path: <java-user-return-36906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23069 invoked from network); 30 Oct 2008 13:29:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 13:29:37 -0000
Received: (qmail 805 invoked by uid 500); 30 Oct 2008 13:29:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 737 invoked by uid 500); 30 Oct 2008 13:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 711 invoked by uid 99); 30 Oct 2008 13:29:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 06:29:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 13:28:15 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 0B07D7B194;
	Thu, 30 Oct 2008 06:28:52 -0700 (PDT)
Message-Id: <B8F2898E-1F49-4D22-9E24-0F5A1F4BDD3A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org,
	mahout-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: ApacheCon Reminder
Date: Thu, 30 Oct 2008 09:28:51 -0400
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

For those attending ApacheCon in New Orleans next week, the Lucene  
Search and Machine Learning Birds of a Feather (BOF) will be held  
Wednesday night.  Please indicate your interest at: http://wiki.apache.org/apachecon/BirdsOfaFeatherUs08

Also, note there are a number of Lucene/Solr/Mahout talks on  
Wednesday, and, of course, it's not to late to sign up for Lucene or  
Solr training.  See the ApacheCon website for more info: http://us.apachecon.com/c/acus2008/

See you there,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 14:36:56 2008
Return-Path: <java-user-return-36907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67722 invoked from network); 30 Oct 2008 14:36:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 14:36:56 -0000
Received: (qmail 12566 invoked by uid 500); 30 Oct 2008 14:36:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12534 invoked by uid 500); 30 Oct 2008 14:36:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12523 invoked by uid 99); 30 Oct 2008 14:36:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 07:36:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 14:35:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KvYdG-0000FY-Qw
	for java-user@lucene.apache.org; Thu, 30 Oct 2008 07:36:18 -0700
Message-ID: <20248272.post@talk.nabble.com>
Date: Thu, 30 Oct 2008 07:36:18 -0700 (PDT)
From: John G <griffij@sosstaffing.com>
To: java-user@lucene.apache.org
Subject: Document marked as deleted
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: griffij@sosstaffing.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have an index with a particular document marked as deleted. If I use the
search method that returns TopDocs and that deleted document satisfies the
search criteria, will it be included in the returned TopDocs object even
though it has been marked as deleted?

Thanks in advance.

John G.
-- 
View this message in context: http://www.nabble.com/Document-marked-as-deleted-tp20248272p20248272.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 14:39:57 2008
Return-Path: <java-user-return-36908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68853 invoked from network); 30 Oct 2008 14:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 14:39:57 -0000
Received: (qmail 14855 invoked by uid 500); 30 Oct 2008 14:39:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14825 invoked by uid 500); 30 Oct 2008 14:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14814 invoked by uid 99); 30 Oct 2008 14:39:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 07:39:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 14:38:41 +0000
Received: by yw-out-2324.google.com with SMTP id 3so209068ywj.5
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 07:39:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=+Q1l5y54mMhPJbn98FVOqOA8nu8l5RdyaZySNstsrdU=;
        b=rY3M/g1Zhj39/rRMG0+OgI6zaPL+ON0tpDafIk1UjXR88LHreP2+MMck1moTA88ega
         2jmlOSe6xaQFqIlpZivsbMUOaldYweWZBgiaixVbGwy8O6mi/y/pnC9uVWCby0bmC1K2
         SaNJoP3WtGfsdWBVYnrQDN33+X/iRXN4O+iQE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=r9SoLl/+H38IX+MP3hz6gaV1UDTov1YcycDp5Ju3iAiXjcBADzOy0G/YAOCqLhP57V
         iKAtiX3RD+XOPMwG5g5qPyN5a6/42584utGQAVHPetzAR/aqrhzrKDqYG9kOjDxGDBwE
         CO1DfPqy0xPbd6IcQrtXsNfhHFs5mJbr9Zz0s=
Received: by 10.90.79.12 with SMTP id c12mr8787920agb.65.1225377559842;
        Thu, 30 Oct 2008 07:39:19 -0700 (PDT)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 8sm1686966agd.21.2008.10.30.07.39.18
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 30 Oct 2008 07:39:18 -0700 (PDT)
Message-ID: <4909C715.2040906@gmail.com>
Date: Thu, 30 Oct 2008 10:39:17 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document marked as deleted
References: <20248272.post@talk.nabble.com>
In-Reply-To: <20248272.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

John G wrote:
> I have an index with a particular document marked as deleted. If I use the
> search method that returns TopDocs and that deleted document satisfies the
> search criteria, will it be included in the returned TopDocs object even
> though it has been marked as deleted?
>
> Thanks in advance.
>
> John G.
>   
Nope. It will still be loaded in the field cache and used for corpus 
statistics I believe, but it won't be returned in search results, no 
matter which search method on searcher you are using.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 15:22:09 2008
Return-Path: <java-user-return-36909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12185 invoked from network); 30 Oct 2008 15:22:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 15:22:09 -0000
Received: (qmail 63657 invoked by uid 500); 30 Oct 2008 15:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63612 invoked by uid 500); 30 Oct 2008 15:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63601 invoked by uid 99); 30 Oct 2008 15:22:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 08:22:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andy.triana@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 15:20:52 +0000
Received: by yx-out-2324.google.com with SMTP id 3so223859yxj.5
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 08:21:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=5bDcZxzHlKdsrHkPHbOAFtjw8u04tOxRxFKDncKQLG8=;
        b=OcUQkAFSkSOxf9qVW2qAAIVPodwLRDJirAVXDAqUtFr1gFZ6MqdzHfvQDYUVzsblSh
         2P1IgUwSJhsdWAsUaz/WFa5KPSclgTF6JYTph0hvQI8bZSteOQSnQQhnGzbg7YNrZiCB
         jSkp7ha9L5r786x/XxR76Ozo93Rgz/QUne8Rw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=CMZ+XCKxLcrP4SglX8sAZa6GnKgz0TPE99ewo6NNLjLFadVsgMafSYumTmxYt93hJR
         ZJOLIs/O0I4wn/vq8sKLCrp3zcjd0B0vtQTTcADGcKJgqiTOprmrwYFFphdJDr29QZc9
         xkkR47pa+lkaVrYZiskCH3abFcXLYwlgpAokc=
Received: by 10.115.79.1 with SMTP id g1mr8572664wal.61.1225380091810;
        Thu, 30 Oct 2008 08:21:31 -0700 (PDT)
Received: by 10.115.79.5 with HTTP; Thu, 30 Oct 2008 08:21:31 -0700 (PDT)
Message-ID: <bb2591e60810300821u2b9a0939ka1532c981049632d@mail.gmail.com>
Date: Thu, 30 Oct 2008 08:21:31 -0700
From: "Andy Triana" <andy.triana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Luke is coming .. not there yet.
In-Reply-To: <4909951A.5050309@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4909951A.5050309@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

whichever is chosen.

Just a huge thank you for making this tool available!

Great tool!

//andy

On Thu, Oct 30, 2008 at 4:06 AM, Andrzej Bialecki <ab@getopt.org> wrote:
> Hi all,
>
> Many people ask me when the next version of Luke becomes available. It's
> almost ready, and the release should happen in about a week, depending on
> the situation in my daily job.
>
> I'd like to ask the Lucene user community what version of Lucene would be
> preferable to include in this Luke release:
>
> 1) Luke 2.4 release. This has the advantage of being an official stable
> release, with a well-defined functionality. The disadvantage is that you
> will miss some new features available in 2.9 (current trunk) for a long time
> to come, at least until the next Lucene release.
>
> 2) Luke 2.9-dev snapshot. This has the advantage that you get the
> cutting-edge features, and it's easier to update Luke to the most recent
> version of Lucene. However, it means that any modifications to existing
> indexes (such as e.g. deleting a doc, or optimizing an index) will promote
> the index to a new format, incompatible with earlier versions of Lucene
> (including 2.4 release).
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 16:23:40 2008
Return-Path: <java-user-return-36910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36452 invoked from network); 30 Oct 2008 16:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 16:23:38 -0000
Received: (qmail 56622 invoked by uid 500); 30 Oct 2008 16:23:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56590 invoked by uid 500); 30 Oct 2008 16:23:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56579 invoked by uid 99); 30 Oct 2008 16:23:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 09:23:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 16:22:21 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m9UGMAc22127
	for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 11:22:10 -0500
Message-ID: <4909DF14.9060408@getopt.org>
Date: Thu, 30 Oct 2008 17:21:40 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Luke is coming .. not there yet.
References: <4909951A.5050309@getopt.org> <137265.58484.qm@web26008.mail.ukl.yahoo.com> <49099B55.5040702@getopt.org> <629842.53512.qm@web26001.mail.ukl.yahoo.com>
In-Reply-To: <629842.53512.qm@web26001.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

mark harwood wrote:
>>> Regretfully, I'm a terrible Swing programmer
> 
> I know you've raised this before, - I wasn't prompting you to do the work :)
> 
> I did make some promising in-roads into a GWT web-based version which was Apache-license friendly but ultimately I didn't want to bring in a build-time dependency on the 10Mb Google GWT compiler. That seemed too cumbersome to add to the Lucene packaging. 
> Swing is probably the way to go but like a lot of people here I have limited time - maybe a Summer of Code project would help get this laid to rest?

That's a nice idea - we can include this in the proposals for the next 
summer.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 16:43:19 2008
Return-Path: <java-user-return-36911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46950 invoked from network); 30 Oct 2008 16:43:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 16:43:19 -0000
Received: (qmail 90223 invoked by uid 500); 30 Oct 2008 16:43:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89744 invoked by uid 500); 30 Oct 2008 16:43:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89733 invoked by uid 99); 30 Oct 2008 16:43:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 09:43:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 16:42:02 +0000
Received: by wf-out-1314.google.com with SMTP id 28so714926wfc.20
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 09:42:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type:references
         :x-google-sender-auth;
        bh=MFhHqbSDuQ9OKpDihCA8U0juYgMYcbNKcYU0GcagnxQ=;
        b=o4OM74O2r+LqTlgPBdLFktQzX6X48Ad/2vzZ5bBY17Ru80cdfWqowLfx+vF0NGeUvX
         k07ePHZ2bVWHGBudiBJcQi1i05un3vh/zFPg4ByXSXWfGThIAoAYNDaf7+OkZ3tq1oRu
         AjBJ9npa6o/YKorB11TWVwypBXm3N2QpEr6oU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:references:x-google-sender-auth;
        b=wQensdQrZGxsErms2T8mGgFjhPVL5+RuxYSANbnnXvqJOtXwjqsiJtNd/fiAzS1qUT
         HPZThR2WlsVh91XdduBQWV4y7mlAiwercmkQRK+qk8vkue9dcjAUI8nou8CZZIZzCY1s
         BZrm+w+txlwXZ14FvR7y5UddTyYL8MTYqzT7E=
Received: by 10.114.106.13 with SMTP id e13mr8702133wac.157.1225384952840;
        Thu, 30 Oct 2008 09:42:32 -0700 (PDT)
Received: by 10.115.107.12 with HTTP; Thu, 30 Oct 2008 09:42:32 -0700 (PDT)
Message-ID: <b8bb47ad0810300942m209ecbd8r3bb7d1c8d68dad8f@mail.gmail.com>
Date: Thu, 30 Oct 2008 17:42:32 +0100
From: "Anshul jain" <anshul.jain@epfl.ch>
Sender: anshulnirvana@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene Payload
In-Reply-To: <CF662C5F-07F5-4B9D-847A-CE0E7BF78F2D@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4455_13569525.1225384952833"
References: <b8bb47ad0810230607w1e6637d3s7d5c1c25b726f769@mail.gmail.com>
	 <CF662C5F-07F5-4B9D-847A-CE0E7BF78F2D@apache.org>
X-Google-Sender-Auth: 8a5e3c07e5a0802e
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4455_13569525.1225384952833
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Grant the presentation, it was very useful.

Can payload work for queries other than Term queries and Span queries? Or is
there any function to convert Query into span query?

Thanks




On Thu, Oct 23, 2008 at 4:08 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> You can search the archives for some background info.  Also, Michael Busch
> has a nice presentation from ApacheCon at
> http://people.apache.org/~buschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt<http://people.apache.org/%7Ebuschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt>
>
> Basically, the payload allows you to associate an arbitrary byte array with
> 1 or more terms.
>
>
> On Oct 23, 2008, at 9:07 AM, Anshul jain wrote:
>
>  Hi all,
>>
>> Has anyone used the payload functionality in Lucene? I would really
>> appreciate if someone can provide an explain using a code or something.
>>
>> Thanks,
>> Anshul
>>
>
> --------------------------
> Grant Ingersoll
> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
> http://www.lucenebootcamp.com
>
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Anshul Jain

------=_Part_4455_13569525.1225384952833--

From java-user-return-36912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 16:48:40 2008
Return-Path: <java-user-return-36912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49384 invoked from network); 30 Oct 2008 16:48:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 16:48:40 -0000
Received: (qmail 94282 invoked by uid 500); 30 Oct 2008 16:48:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94256 invoked by uid 500); 30 Oct 2008 16:48:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94244 invoked by uid 99); 30 Oct 2008 16:48:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 09:48:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 16:47:22 +0000
Received: by wf-out-1314.google.com with SMTP id 28so717986wfc.20
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 09:47:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JzYkaIsjNqyuA1LkDncfY2G4W1PRc/vnECe68uPKjgc=;
        b=g1PLlyvQxNn08kJkU9h1/5Jztl6fnvOdR2DloqM94D+q4pLYPmwnXuRXLHSWrLFjKA
         +vYo5QLg/0v2sq2k7hwUEUO0XqOC77hud2Tk0hOVJP8U1c0x8lBXQ1Hp1r50Wv82C+uc
         WBq6NLWPuCP9INVdgMG8x/D/CDEn9P1VfYMr8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZGdlvaGXFPAfZr4xuJLMXnxP/dQHLvxbG3TxOiW8XtjUKZyum30hGOgd77l9ypDCmg
         vuOfTVnzMQuhwWbsEDEo8jeEbeX3nGtt11w7GljX9S1RFXKv1gtnEH4nUNiINmHXWRBV
         TRlsZEnHsiBO8UgVrKYmvO6kZB6a4/TwajuAk=
Received: by 10.114.192.3 with SMTP id p3mr8702146waf.189.1225385273004;
        Thu, 30 Oct 2008 09:47:53 -0700 (PDT)
Received: by 10.115.107.12 with HTTP; Thu, 30 Oct 2008 09:47:52 -0700 (PDT)
Message-ID: <b8bb47ad0810300947q47afab05pc7eff825c133a2e1@mail.gmail.com>
Date: Thu, 30 Oct 2008 17:47:52 +0100
From: "Anshul jain" <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Payload
In-Reply-To: <CF662C5F-07F5-4B9D-847A-CE0E7BF78F2D@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4523_23421141.1225385273008"
References: <b8bb47ad0810230607w1e6637d3s7d5c1c25b726f769@mail.gmail.com>
	 <CF662C5F-07F5-4B9D-847A-CE0E7BF78F2D@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4523_23421141.1225385273008
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Grant the presentation, it was very useful.

Can payload work for queries other than Term queries and Span queries? Or is
there any function to convert Query into span query?

Thanks

On Thu, Oct 23, 2008 at 4:08 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> You can search the archives for some background info.  Also, Michael Busch
> has a nice presentation from ApacheCon at
> http://people.apache.org/~buschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt<http://people.apache.org/%7Ebuschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt>
>
> Basically, the payload allows you to associate an arbitrary byte array with
> 1 or more terms.
>
>
> On Oct 23, 2008, at 9:07 AM, Anshul jain wrote:
>
>  Hi all,
>>
>> Has anyone used the payload functionality in Lucene? I would really
>> appreciate if someone can provide an explain using a code or something.
>>
>> Thanks,
>> Anshul
>>
>
> --------------------------
> Grant Ingersoll
> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
> http://www.lucenebootcamp.com
>
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Anshul Jain

------=_Part_4523_23421141.1225385273008--

From java-user-return-36913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 17:22:03 2008
Return-Path: <java-user-return-36913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66358 invoked from network); 30 Oct 2008 17:22:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 17:22:03 -0000
Received: (qmail 54843 invoked by uid 500); 30 Oct 2008 17:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54809 invoked by uid 500); 30 Oct 2008 17:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54798 invoked by uid 99); 30 Oct 2008 17:22:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 10:22:01 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 17:20:44 +0000
Received: by yw-out-2324.google.com with SMTP id 3so263430ywj.5
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 10:21:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=9cJIPNflGjOu/ed84tYo69uaJRnRHl2EPSWBTfMSzws=;
        b=DRIb16mm5qPdBh5kXDg7sHwt9w85IFE8Qs6GjdEYXaY/GRJHl/Emzoz2AkH+OR0E6v
         as87GQmSULevaMhHJEhmQ/q1zw7oIHHjoxDyCAJ6SLc76oYK1Dj/YKO8p+dPK38LbpfN
         Lt+rD8jD+SajKU8ZwItS1dawAmH35RIbMWqJo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=GnlpB7FqgKDjPzzMA7Lir5EyARVNKnvGs2hbUKgMo0tLegJRC9oJ1N0lKJr0+MuaiS
         EeKdGtKdAuNtpwn+YSTonv8DEm0Kw+tvcMlRoLDa+hyftUfosMUtJMFojXylY+djgjQT
         UUvggIENI3vrgZqv/log+pM9RDsRw7Wiwu/8Y=
Received: by 10.150.157.17 with SMTP id f17mr8057413ybe.110.1225387284354;
        Thu, 30 Oct 2008 10:21:24 -0700 (PDT)
Received: by 10.150.177.5 with HTTP; Thu, 30 Oct 2008 10:21:24 -0700 (PDT)
Message-ID: <847931a70810301021i39a4b04ev6a9f47b43add35f3@mail.gmail.com>
Date: Thu, 30 Oct 2008 11:21:24 -0600
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <546908.71196.qm@web26007.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
	 <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com>
	 <4908FAA4.9070809@gmail.com>
	 <847931a70810291930u8cea406oc4363b1c15cb0f1c@mail.gmail.com>
	 <7503256B-491D-47ED-BABC-138C3364E72E@gmail.com>
	 <546908.71196.qm@web26007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I tried the term divisor index prior to the posting and didn't see
much difference in the memory usage.

I don't think we can turn off field norms because we use boosting to
influence some content to the front of the results.

Will definitely spend some time with Solr, Terracotta, and possibly
hadoop to see if any of that helps.

Also planning on running the example code Mark posted to see if we can
see any optimizations.

We really appreciate the help.

Todd

On Thu, Oct 30, 2008 at 5:21 AM, mark harwood <markharw00d@yahoo.co.uk> wrote:
> One issue with the existing field cache implementation is that it uses int arrays to reference into the list of unique terms where short or even byte arrays may suffice for fields with smaller numbers of unique terms.
> How many unique terms do you have?

I don't know the actual number for unique terms but they're vast since
they're using entered data on 300M media objects.

>
> I posted some code that measures the potential RAM savings to be had, given your particular index.
>    See here: http://www.nabble.com/Re%3A-Question-regarding-sorting-and-memory-consumption-in-lucene-p19997753.html
>
> This code shows what theoretically could be saved given a different approach to field caching. Unfortunately the use of int arrays is not abstracted in Lucene's StringIndex so this optimisation cannot be dropped in without some disruption.
> Shame, as there is a big difference between byte[reader.maxDoc] and int[reader.maxDoc] when you are working with large indexes and are tight on RAM.
>
> If you're prepared to write a more optimized custom field cache then the above code may be a useful start point.
>
> Cheers,
> Mark
>
>
>
>
>
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> Sent: Thursday, 30 October, 2008 10:37:48
> Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
>
> Michaels got some great points (he the lucene master), especially possibly turning off norms if you can, but for an index like that i'd reccomwnd solr. Solr sharding can be scaled to billions (min a billion or two anyway) with few limitations (of course there are a few). Plus it has further caching options, indexreader refresh managment, etc etc etc
>
>
> - Mark
>
>
> On Oct 29, 2008, at 10:30 PM, "Todd Benge" <todd.benge@gmail.com> wrote:
>
>> Thanks Mark.  I appreciate the help.
>>
>> I thought our memory may be low but wanted to verify there if there is
>> any way to control memory usage.  I think we'll likely upgrade the
>> memory on the machines but that may just delay the inevitable.
>>
>> Wondering if anyone else has encountered similar issues with indices
>> if a similar size.  I've been thinking we will need to move to a
>> clustered solution and have been reading on hadoop, nutch, solr &
>> terracotta for possibilities such as index sharding.
>>
>> Has anyone implemented a solution using hadoop or terracotta for a
>> large scale system?  Just wondering the pro's / con's of the various
>> approaches.
>>
>> Thanks,
>>
>> Todd
>>
>> On Wed, Oct 29, 2008 at 6:07 PM, Mark Miller <markrmiller@gmail.com> wrote:
>>> The term, terminfo, indexreader internals stuff is prob on the low end
>>> compared to the size of your field caches (needed for sorting). If you are
>>> sorting by String I think the space needed is 32 bits x number of docs + an
>>> array to hold all of the unique terms. So checking 300 million docs (I know
>>> you are actually breaking it up smaller than that, but for example) and
>>> ignoring things like String chars being variable byte lengths and storing
>>> the length, etc and randomly picking 50000 unique terms at 6 chars per:
>>>
>>> 32 bits x 300000000 + 50000 x 6 x 16 bits to MB = 1 144.98138 megabytes
>>>
>>> Thats per field your sorting on. If you are sorting on an int field it
>>> should be closer to 32 bits x num docs - shorts, 32 bits x num docs, etc.
>>>
>>> So you have those field caches, plus the IndexReader terminfo, term stuff,
>>> plus whatever RAM your app needs beyond Lucene. 4 gig might just not *quite*
>>> cut it is my guess.
>>>
>>> Todd Benge wrote:
>>>>
>>>> There's usually only a couple sort fields and a bunch of terms in the
>>>> various indices.  The terms are user entered on various media so the
>>>> number of terms is very large.
>>>>
>>>> Thanks for the help.
>>>>
>>>> Todd
>>>>
>>>>
>>>>
>>>> On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:
>>>>
>>>>>
>>>>> Hi,
>>>>>
>>>>> I'm the lead engineer for search on a large website using lucene for
>>>>> search.
>>>>>
>>>>> We're indexing about 300M documents in ~ 100 indices.  The indices add
>>>>> up to ~ 60G.
>>>>>
>>>>> The indices are sorted into 4 different Multisearcher with the largest
>>>>> handling ~50G.
>>>>>
>>>>> The code is basically like the following:
>>>>>
>>>>> private static MultiSearcher searcher;
>>>>>
>>>>> public void init(File files) {
>>>>>
>>>>>    IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>>>>>    int i = 0;
>>>>>    for ( File file: files ) {
>>>>>         searchers[i++] = new
>>>>> IndexSearcher(FSDirectory.getDirectory(file);
>>>>>    }
>>>>>
>>>>> searcher = new MultiSearcher(searchers);
>>>>> }
>>>>>
>>>>> public Searcher getSearcher() {
>>>>>  return searcher;
>>>>> }
>>>>>
>>>>> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
>>>>> Performance is good but servers are consistently hanging with
>>>>> OutOfMemory errors.
>>>>>
>>>>> We're allocating 4G in the heap to each server.
>>>>>
>>>>> Is there any way to control the amount of memory Lucene consume for
>>>>> caching?  Any other suggestions on fixing the memory errors?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Todd
>>>>>
>>>>>
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 18:07:57 2008
Return-Path: <java-user-return-36914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95705 invoked from network); 30 Oct 2008 18:07:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 18:07:56 -0000
Received: (qmail 34047 invoked by uid 500); 30 Oct 2008 18:07:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34017 invoked by uid 500); 30 Oct 2008 18:07:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34006 invoked by uid 99); 30 Oct 2008 18:07:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 11:07:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 18:06:42 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id E254B71C4A8; Thu, 30 Oct 2008 11:06:52 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D15CC71C499
	for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 11:06:52 -0700 (PDT)
Date: Thu, 30 Oct 2008 11:06:52 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: performance boost through multithreaded query processing?
In-Reply-To: <740655.67110.qm@web27605.mail.ukl.yahoo.com>
Message-ID: <Pine.LNX.4.62.0810301100380.4524@radix.cryptio.net>
References: <740655.67110.qm@web27605.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: We improved the performance through caching the bitsets of the single 
: fuzzy query/wildcard query.

: Within our logs we can see that combined queries within a BooleanQuery 
: are processed sequentially. So our question are: Does it make sense for 
: you to parallelize the processing of the queries within a boolean query 
: (with a restriction of the amount of prallel processed queries)? With 

inspite of it's name a BooleanQuery doesn't just provide boolean logic on 
sets -- it's actually computing aggregate scoring information based on the 
subscores.  that's not something that i can imaging being easy to do if 
you try to parallelize the processing of hte subclauses.

based on your first comment however, it sounds like you don't care about 
scoring -- if that's the case, then sure: instead of using a BooleanQuery, 
compute your disjoint sets (in parallel) and then interset/union them

: Could there be drawbacks combining the results of the booelan clauses. 

one gotcha i can imagine is dealing with SHOULD clauses ... if youre 
boolean queries are all MUST and MUST_NOT life is easy, but trying to 
apply set intersection logic with SHOULD clauses gets interesting (1 is 
fine, 2 get unioned, 2 with a MUST get unioned and then intersected with 
the MUST, etc...)






-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 18:08:42 2008
Return-Path: <java-user-return-36915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95887 invoked from network); 30 Oct 2008 18:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 18:08:42 -0000
Received: (qmail 36030 invoked by uid 500); 30 Oct 2008 18:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35839 invoked by uid 500); 30 Oct 2008 18:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35828 invoked by uid 99); 30 Oct 2008 18:08:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 11:08:41 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 18:07:24 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id A36B2109F3B
	for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 11:08:03 -0700 (PDT)
Message-Id: <3888E929-667D-4C7D-A3B5-CEEDED8EC352@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <b8bb47ad0810300942m209ecbd8r3bb7d1c8d68dad8f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene Payload
Date: Thu, 30 Oct 2008 14:08:02 -0400
References: <b8bb47ad0810230607w1e6637d3s7d5c1c25b726f769@mail.gmail.com> <CF662C5F-07F5-4B9D-847A-CE0E7BF78F2D@apache.org> <b8bb47ad0810300942m209ecbd8r3bb7d1c8d68dad8f@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Not directly, I don't think.  Mark Miller contributed some  
highlighting code that converts phrase queries to SpanNearQueries, I  
believe, but this isn't general purpose.    We probably need a  
QueryParser that produces SpanQueries instead of regular Queries, I  
suppose, but they aren't always 1-1.  Ideally, there would be no perf.  
penalty for SpanQueries and everything would be a span query, but  
until someone figures out that magic, I don't know.

What is it that you are trying to do?

-Grant

On Oct 30, 2008, at 12:42 PM, Anshul jain wrote:

> Thanks Grant the presentation, it was very useful.
>
> Can payload work for queries other than Term queries and Span  
> queries? Or is
> there any function to convert Query into span query?
>
> Thanks
>
>
>
>
> On Thu, Oct 23, 2008 at 4:08 PM, Grant Ingersoll  
> <gsingers@apache.org>wrote:
>
>> You can search the archives for some background info.  Also,  
>> Michael Busch
>> has a nice presentation from ApacheCon at
>> http://people.apache.org/~buschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt 
>> <http://people.apache.org/%7Ebuschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt 
>> >
>>
>> Basically, the payload allows you to associate an arbitrary byte  
>> array with
>> 1 or more terms.
>>
>>
>> On Oct 23, 2008, at 9:07 AM, Anshul jain wrote:
>>
>> Hi all,
>>>
>>> Has anyone used the payload functionality in Lucene? I would really
>>> appreciate if someone can provide an explain using a code or  
>>> something.
>>>
>>> Thanks,
>>> Anshul
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
>> http://www.lucenebootcamp.com
>>
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Anshul Jain

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 19:25:48 2008
Return-Path: <java-user-return-36916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33296 invoked from network); 30 Oct 2008 19:25:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 19:25:48 -0000
Received: (qmail 37166 invoked by uid 500); 30 Oct 2008 19:25:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37127 invoked by uid 500); 30 Oct 2008 19:25:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37116 invoked by uid 99); 30 Oct 2008 19:25:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 12:25:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.76 as permitted sender)
Received: from [65.55.111.76] (HELO blu0-omc2-s1.blu0.hotmail.com) (65.55.111.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 19:24:31 +0000
Received: from BLU149-W3 ([65.55.111.73]) by blu0-omc2-s1.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 30 Oct 2008 12:24:51 -0700
Message-ID: <BLU149-W32AB003904D7CB3141E4CB9210@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_22037a99-a287-4f50-bde8-ed446aaf23ba_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Read all the data from an index
Date: Thu, 30 Oct 2008 15:24:50 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Oct 2008 19:24:51.0026 (UTC) FILETIME=[2DED3B20:01C93AC5]
X-Virus-Checked: Checked by ClamAV on apache.org

--_22037a99-a287-4f50-bde8-ed446aaf23ba_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

Hi=2C

I have an old index that was built a few months ago.  The data that I used =
to build the index has been deleted from the database.  I'd like to read al=
l the data from the old index to build a new index.  Which Lucene API calls=
 should I use to read all the data from the old index? Thank you in advance=
 for your help.

_________________________________________________________________
When your life is on the go=97take your life with you.
http://clk.atdmt.com/MRT/go/115298558/direct/01/=

--_22037a99-a287-4f50-bde8-ed446aaf23ba_--

From java-user-return-36917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 20:10:21 2008
Return-Path: <java-user-return-36917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50067 invoked from network); 30 Oct 2008 20:10:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 20:10:21 -0000
Received: (qmail 83481 invoked by uid 500); 30 Oct 2008 20:10:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83445 invoked by uid 500); 30 Oct 2008 20:10:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83433 invoked by uid 99); 30 Oct 2008 20:10:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 13:10:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 20:09:07 +0000
Received: by rv-out-0506.google.com with SMTP id f6so784675rvb.5
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 13:09:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=hy7Qf+MxmfAKtw7wlf5rW38sEP/+1NM43acru2jw5IQ=;
        b=p/YtsjZFnT5OEEVTVDHVK5Uh9ro/Z/OHfr5LW7SijJidzL6FrR+X0yWCY6N9S3uel1
         mpZ9UbekdVqS5SnNf5rhu8Dy9t15X8Fif9hvrP2nztRQ6MPKD67wHPl7GCY9XNMBL/g5
         FzUqltEooxVERxeGh2oA2q9UqxLR/7rGskKpE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=EmfzdWL+D34SOesZL/g36lzoiE7++Oc2iuPbG97tVbBNZIJkhJd2s4v09GFRCsPXeV
         12zedvG2Q/9x6O4U08tLoOcgCv4FbyS4rNvYKM8iL+uEU+K6QjQI64YbAryViudmKGCP
         XFVT+xZ0fMOZkD2Zj15UNRynh2t4NkiLTo89k=
Received: by 10.141.161.6 with SMTP id n6mr6071410rvo.201.1225397387323;
        Thu, 30 Oct 2008 13:09:47 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Thu, 30 Oct 2008 13:09:47 -0700 (PDT)
Message-ID: <359a92830810301309u6f787bfepd0a0783b1663875a@mail.gmail.com>
Date: Thu, 30 Oct 2008 16:09:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read all the data from an index
In-Reply-To: <BLU149-W32AB003904D7CB3141E4CB9210@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11229_17738271.1225397387301"
References: <BLU149-W32AB003904D7CB3141E4CB9210@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11229_17738271.1225397387301
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, that's trickier than you might think. You can easily get
all the STORED data just by getting doc IDs 1-MaxDoc(). But
reconstructing the data from data that is NOT stored is more
difficult. Luke tries, but it may be a lossy process.

Best
Erick

On Thu, Oct 30, 2008 at 3:24 PM, Dragon Fly <dragon-fly999@hotmail.com>wrot=
e:

> Hi,
>
> I have an old index that was built a few months ago.  The data that I use=
d
> to build the index has been deleted from the database.  I'd like to read =
all
> the data from the old index to build a new index.  Which Lucene API calls
> should I use to read all the data from the old index? Thank you in advanc=
e
> for your help.
>
> _________________________________________________________________
> When your life is on the go=97take your life with you.
> http://clk.atdmt.com/MRT/go/115298558/direct/01/

------=_Part_11229_17738271.1225397387301--

From java-user-return-36918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 20:26:27 2008
Return-Path: <java-user-return-36918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56885 invoked from network); 30 Oct 2008 20:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 20:26:26 -0000
Received: (qmail 8851 invoked by uid 500); 30 Oct 2008 20:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8349 invoked by uid 500); 30 Oct 2008 20:26:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8337 invoked by uid 99); 30 Oct 2008 20:26:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 13:26:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.77 as permitted sender)
Received: from [65.55.111.77] (HELO blu0-omc2-s2.blu0.hotmail.com) (65.55.111.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 20:25:07 +0000
Received: from BLU149-W24 ([65.55.111.71]) by blu0-omc2-s2.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 30 Oct 2008 13:25:26 -0700
Message-ID: <BLU149-W24E80A4C2A7E31710F2F70B9210@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_20ecd2bb-91f5-4c45-8bbf-02aa5dec75ef_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Read all the data from an index
Date: Thu, 30 Oct 2008 16:25:26 -0400
Importance: Normal
In-Reply-To: <359a92830810301309u6f787bfepd0a0783b1663875a@mail.gmail.com>
References: <BLU149-W32AB003904D7CB3141E4CB9210@phx.gbl>
 <359a92830810301309u6f787bfepd0a0783b1663875a@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Oct 2008 20:25:26.0642 (UTC) FILETIME=[A4EC3520:01C93ACD]
X-Virus-Checked: Checked by ClamAV on apache.org

--_20ecd2bb-91f5-4c45-8bbf-02aa5dec75ef_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

I'll double check but I believe all the fields in my index are stored.  Sho=
uld I just loop using indexSearcher.doc() or is there a faster way? Thanks.

> Date: Thu=2C 30 Oct 2008 16:09:47 -0400
> From: erickerickson@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Read all the data from an index
>=20
> Well=2C that's trickier than you might think. You can easily get
> all the STORED data just by getting doc IDs 1-MaxDoc(). But
> reconstructing the data from data that is NOT stored is more
> difficult. Luke tries=2C but it may be a lossy process.
>=20
> Best
> Erick
>=20
> On Thu=2C Oct 30=2C 2008 at 3:24 PM=2C Dragon Fly <dragon-fly999@hotmail.=
com>wrote:
>=20
> > Hi=2C
> >
> > I have an old index that was built a few months ago.  The data that I u=
sed
> > to build the index has been deleted from the database.  I'd like to rea=
d all
> > the data from the old index to build a new index.  Which Lucene API cal=
ls
> > should I use to read all the data from the old index? Thank you in adva=
nce
> > for your help.
> >
> > _________________________________________________________________
> > When your life is on the go=97take your life with you.
> > http://clk.atdmt.com/MRT/go/115298558/direct/01/

_________________________________________________________________
Stay organized with simple drag and drop from Windows Live Hotmail.
http://windowslive.com/Explore/hotmail?ocid=3DTXT_TAGLM_WL_hotmail_102008=

--_20ecd2bb-91f5-4c45-8bbf-02aa5dec75ef_--

From java-user-return-36919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 23:29:43 2008
Return-Path: <java-user-return-36919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38845 invoked from network); 30 Oct 2008 23:29:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 23:29:42 -0000
Received: (qmail 32342 invoked by uid 500); 30 Oct 2008 23:29:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32312 invoked by uid 500); 30 Oct 2008 23:29:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31808 invoked by uid 99); 30 Oct 2008 23:29:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 16:29:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 23:28:19 +0000
Received: by wa-out-1112.google.com with SMTP id n4so497504wag.5
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 16:28:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=0Y6Yj9EJ4lGGWBsPbiJtH7fb7TzTMdNdUssfrko3/5k=;
        b=VFxAek2U4RSMBFsMaDM6tUHgNVl6az2odnnpu63fUQGrlI9tTgOMtXnOC7qANDR7lB
         bCjqE626LyamV/8SCEa0Vlsxxcx/CwqHVrFM3qHq2qROpetFAFaUKZmTY9bhk4yuNGr3
         rJR0rng6RgEISpCNvp9ssBdjyID4iwz0005uM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KgT/NNgGjptnnuN343MuAHYYfQGTuNeSpzIj0j8YEGTTkx70d58TA53jdPyvtQKpD5
         9EycopuXU4Q4eDKWZ0bGUQp2e4c22jrHM725y96X1wQYvwtqjSJaRZ8WZVOvo4cJmy/j
         2KlQYkRZ3vKQ/ZJX0MJ+elk1b9UYTnauMBIhI=
Received: by 10.114.178.13 with SMTP id a13mr9341514waf.182.1225409330336;
        Thu, 30 Oct 2008 16:28:50 -0700 (PDT)
Received: by 10.115.107.12 with HTTP; Thu, 30 Oct 2008 16:28:50 -0700 (PDT)
Message-ID: <b8bb47ad0810301628t1b044f83qc9ec3ef04d1218d1@mail.gmail.com>
Date: Fri, 31 Oct 2008 00:28:50 +0100
From: "Anshul jain" <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Payload
In-Reply-To: <3888E929-667D-4C7D-A3B5-CEEDED8EC352@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8661_25543423.1225409330363"
References: <b8bb47ad0810230607w1e6637d3s7d5c1c25b726f769@mail.gmail.com>
	 <CF662C5F-07F5-4B9D-847A-CE0E7BF78F2D@apache.org>
	 <b8bb47ad0810300942m209ecbd8r3bb7d1c8d68dad8f@mail.gmail.com>
	 <3888E929-667D-4C7D-A3B5-CEEDED8EC352@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8661_25543423.1225409330363
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I want to give more weight to some terms in the document. Like title of the
book should be given more weight than the contents. And we are testing over
a wide varieties of lucene queries, with quotes, w/o quotes, phrase, span
etc.

As our system will be expecting more number of queries that contain nouns
and documents in which that term in heading or title or in bold should be
given higher score.

But this payload thing is not supporting us fully. As it is only working for
single term queries or boolean term queries. It would also be good if it
supports phrase queries also, as using closeness of terms for scoring is
quite important for us.

Do you've any suggestions?


On Thu, Oct 30, 2008 at 7:08 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> Not directly, I don't think.  Mark Miller contributed some highlighting
> code that converts phrase queries to SpanNearQueries, I believe, but this
> isn't general purpose.    We probably need a QueryParser that produces
> SpanQueries instead of regular Queries, I suppose, but they aren't always
> 1-1.  Ideally, there would be no perf. penalty for SpanQueries and
> everything would be a span query, but until someone figures out that magic,
> I don't know.
>
> What is it that you are trying to do?
>
> -Grant
>
> On Oct 30, 2008, at 12:42 PM, Anshul jain wrote:
>
>  Thanks Grant the presentation, it was very useful.
>>
>> Can payload work for queries other than Term queries and Span queries? Or
>> is
>> there any function to convert Query into span query?
>>
>> Thanks
>>
>>
>>
>>
>> On Thu, Oct 23, 2008 at 4:08 PM, Grant Ingersoll <gsingers@apache.org
>> >wrote:
>>
>>  You can search the archives for some background info.  Also, Michael
>>> Busch
>>> has a nice presentation from ApacheCon at
>>>
>>> http://people.apache.org/~buschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt<http://people.apache.org/%7Ebuschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt>
>>> <
>>> http://people.apache.org/%7Ebuschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt
>>> >
>>>
>>>
>>> Basically, the payload allows you to associate an arbitrary byte array
>>> with
>>> 1 or more terms.
>>>
>>>
>>> On Oct 23, 2008, at 9:07 AM, Anshul jain wrote:
>>>
>>> Hi all,
>>>
>>>>
>>>> Has anyone used the payload functionality in Lucene? I would really
>>>> appreciate if someone can provide an explain using a code or something.
>>>>
>>>> Thanks,
>>>> Anshul
>>>>
>>>>
>>> --------------------------
>>> Grant Ingersoll
>>> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
>>> http://www.lucenebootcamp.com
>>>
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --
>> Anshul Jain
>>
>
> --------------------------
> Grant Ingersoll
> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
> http://www.lucenebootcamp.com
>
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Anshul Jain

------=_Part_8661_25543423.1225409330363--

From java-user-return-36920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 30 23:57:53 2008
Return-Path: <java-user-return-36920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45399 invoked from network); 30 Oct 2008 23:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2008 23:57:53 -0000
Received: (qmail 64147 invoked by uid 500); 30 Oct 2008 23:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64122 invoked by uid 500); 30 Oct 2008 23:57:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64111 invoked by uid 99); 30 Oct 2008 23:57:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 16:57:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 23:56:34 +0000
Received: by rv-out-0506.google.com with SMTP id f6so892846rvb.5
        for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 16:57:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=cZ6d5BxaWjyRLP0yel5b24UEG7dmbAsVvJTbN5KMNwg=;
        b=TfG6P4ISK/S25nfgMSExt/E51qx9gckWLxpfXc8cZ8HZ+CTB3q1AZyDXp5cb631UzN
         V+A/p62cDb9Z3OZFOzruZoq26kfbKRZMURoKTS/6FDdv7yceQ6SkOLRDdptg5M3bV+X4
         5KTdIAjbAZeJTpSfshSaPeMdzEpN7gxpvxxGw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dwkFqD5EDdQRkt1mj7CNk58GNJhJVczFzgxIr/3kxQDZAO9IQ3iwvE3Vrkz2017Whh
         S1Bg+6E521+eZ6YR2NYVBEBilMnH4+OmFuaM5IbWAkaf2jJVk0MbTGmv0uiiixzpn0Wr
         Pqkj+rWxDJtbScwWEPlmjHuecilSAV/C5sDaM=
Received: by 10.140.166.21 with SMTP id o21mr6214753rve.167.1225411025532;
        Thu, 30 Oct 2008 16:57:05 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Thu, 30 Oct 2008 16:57:05 -0700 (PDT)
Message-ID: <359a92830810301657m42f727peb56b9f8bc7ec219@mail.gmail.com>
Date: Thu, 30 Oct 2008 19:57:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read all the data from an index
In-Reply-To: <BLU149-W24E80A4C2A7E31710F2F70B9210@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13341_6756109.1225411025521"
References: <BLU149-W32AB003904D7CB3141E4CB9210@phx.gbl>
	 <359a92830810301309u6f787bfepd0a0783b1663875a@mail.gmail.com>
	 <BLU149-W24E80A4C2A7E31710F2F70B9210@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13341_6756109.1225411025521
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm not sure what *could* be easier than looping with IndexSearcher.doc(),
looping from 1 to maxDoc. Of course you'll have to pay some attention to
whether you get a document back or not, and I'm not quite sure whether you'=
d
have to worry about getting deleted documents. But I don't think either of
these
really count if the index was optimized

Best
Erick

On Thu, Oct 30, 2008 at 4:25 PM, Dragon Fly <dragon-fly999@hotmail.com>wrot=
e:

> I'll double check but I believe all the fields in my index are stored.
>  Should I just loop using indexSearcher.doc() or is there a faster way?
> Thanks.
>
> > Date: Thu, 30 Oct 2008 16:09:47 -0400
> > From: erickerickson@gmail.com
> > To: java-user@lucene.apache.org
> > Subject: Re: Read all the data from an index
> >
> > Well, that's trickier than you might think. You can easily get
> > all the STORED data just by getting doc IDs 1-MaxDoc(). But
> > reconstructing the data from data that is NOT stored is more
> > difficult. Luke tries, but it may be a lossy process.
> >
> > Best
> > Erick
> >
> > On Thu, Oct 30, 2008 at 3:24 PM, Dragon Fly <dragon-fly999@hotmail.com
> >wrote:
> >
> > > Hi,
> > >
> > > I have an old index that was built a few months ago.  The data that I
> used
> > > to build the index has been deleted from the database.  I'd like to
> read all
> > > the data from the old index to build a new index.  Which Lucene API
> calls
> > > should I use to read all the data from the old index? Thank you in
> advance
> > > for your help.
> > >
> > > _________________________________________________________________
> > > When your life is on the go=97take your life with you.
> > > http://clk.atdmt.com/MRT/go/115298558/direct/01/
>
> _________________________________________________________________
> Stay organized with simple drag and drop from Windows Live Hotmail.
> http://windowslive.com/Explore/hotmail?ocid=3DTXT_TAGLM_WL_hotmail_102008
>

------=_Part_13341_6756109.1225411025521--

From java-user-return-36921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 03:27:16 2008
Return-Path: <java-user-return-36921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43525 invoked from network); 31 Oct 2008 03:27:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 03:27:16 -0000
Received: (qmail 68499 invoked by uid 500); 31 Oct 2008 03:27:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68461 invoked by uid 500); 31 Oct 2008 03:27:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68450 invoked by uid 99); 31 Oct 2008 03:27:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 20:27:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 03:26:00 +0000
Received: from sparkling.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id 6B4221631E88
	for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 22:26:40 -0500 (CDT)
Message-ID: <490A7AEE.2090402@atlassian.com>
Date: Fri, 31 Oct 2008 14:26:38 +1100
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IllegalStateEx thrown when calling close
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <49079D87.4090809@atlassian.com> <05560314-92E8-416E-87B0-5F86BC4DAF01@mikemccandless.com> <4907B49F.7020309@atlassian.com> <4CFED863-992E-4596-9E90-7E395F3BCB51@mikemccandless.com> <49094744.10200@atlassian.com> <35CB63A7-41FA-498F-AC28-C436B4DEE0D6@mikemccandless.com>
In-Reply-To: <35CB63A7-41FA-498F-AC28-C436B4DEE0D6@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mike!

Michael McCandless wrote:
>
> OK I'll add that (what IW does on setting an OOME) to the javadocs.
>
> Mike
>
> Jed Wesley-Smith wrote:
>
>> Mike,
>>
>> regarding this paragraph:
>>
>> "To workaround this, on catching an OOME on any of IndexWriter's
>> methods, you should 1) forcibly remove the write lock
>> (IndexWriter.unlock static method) and then 2) not call any methods on
>> the old writer.  Even if the old writer has concurrent merges running,
>> they will refuse to commit on seeing that an OOM had occurred."
>>
>> I'm not sure that an IndexWriter is particularly useful once its 
>> hitOOM flag is set to true, whether autocommit is true or not. Once 
>> it is true you can't do anything with it (it reverts to its last 
>> commit point and stays there) and need to discard it. I am suggesting 
>> that this could be documented as it is not immediately obvious 
>> without coming across it and debugging it. That being said, the VM is 
>> probably not that useful once OOMEs are flying around anyway :-)
>>
>> cheers,
>> jed.
>>
>> Michael McCandless wrote:
>>>
>>> Jed Wesley-Smith wrote:
>>>
>>>> Yeah, I saw the change to flush(). Trying to work out the correct 
>>>> strategy for our IndexWriter handling now. We probably should not 
>>>> be using autocommit for our writers.
>>>
>>> autoCommit=true is deprecated as of 2.4.0, and will go away when we 
>>> finally get to 3.0, so I think switching to false, and possibly 
>>> changing your app to periodically commit() if you were relying on 
>>> those semantics, is a good step forward.
>>>
>>>> It was brought up by others that the OutOfMemoryError handling 
>>>> requirements are a fairly strong part of the contract now - but 
>>>> aren't documented. Do you think the last paragraph below should be 
>>>> incorporated into the class JavaDoc?
>>>
>>> Well, that paragraph is a workaround for the issue you hit, which 
>>> only applies when autoCommit is true, so going forward (or, if you 
>>> use autoCommit=false) you should simply close the IndexWriter.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 03:27:24 2008
Return-Path: <java-user-return-36922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43647 invoked from network); 31 Oct 2008 03:27:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 03:27:23 -0000
Received: (qmail 69891 invoked by uid 500); 31 Oct 2008 03:27:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69863 invoked by uid 500); 31 Oct 2008 03:27:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69733 invoked by uid 99); 31 Oct 2008 03:27:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Oct 2008 20:27:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 03:26:03 +0000
Received: from sparkling.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id 9E94B1631E87
	for <java-user@lucene.apache.org>; Thu, 30 Oct 2008 22:26:13 -0500 (CDT)
Message-ID: <490A7AD3.4040405@atlassian.com>
Date: Fri, 31 Oct 2008 14:26:11 +1100
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IllegalStateEx thrown when calling close
References: <4906AAE6.2000803@atlassian.com> <34D7999B-FF48-478D-9BD8-15E8114EFFD1@mikemccandless.com> <4907FC2D.2070709@atlassian.com> <EF97CC01-762E-4F20-94EA-AA1948657A2A@mikemccandless.com> <4908F241.1000009@atlassian.com> <3C9FEDB4-C296-426B-A776-924A199CA721@mikemccandless.com>
In-Reply-To: <3C9FEDB4-C296-426B-A776-924A199CA721@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

ahh, yes, sorry, the ability to read is occasionally handy... [wipes egg 
off forehead]

cheers,
jed.

Michael McCandless wrote:
>
> Actually, yes in 2.3.2: IndexReader.unlock has existed for a long time.
>
> In 2.4.0, we moved this to IndexWriter.unlock.
>
> Mike
>
> Jed Wesley-Smith wrote:
>
>> not in 2.3.2 though.
>>
>> cheers,
>> jed.
>>
>> Michael McCandless wrote:
>>>
>>> Or you can use IndexReader.unlock.
>>>
>>> Mike
>>>
>>> Jed Wesley-Smith wrote:
>>>
>>>> Michael McCandless wrote:
>>>>>
>>>>> To workaround this, on catching an OOME on any of IndexWriter's
>>>>> methods, you should 1) forcibly remove the write lock
>>>>> (IndexWriter.unlock static method)
>>>>
>>>> IndexWriter.unlock(*) is 2.4 only.
>>>>
>>>> Use the following instead:
>>>>
>>>>  directory.makeLock(IndexWriter.WRITE_LOCK_NAME).release();


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 08:07:50 2008
Return-Path: <java-user-return-36923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58272 invoked from network); 31 Oct 2008 08:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 08:07:49 -0000
Received: (qmail 41784 invoked by uid 500); 31 Oct 2008 08:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41749 invoked by uid 500); 31 Oct 2008 08:07:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41738 invoked by uid 99); 31 Oct 2008 08:07:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 01:07:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 08:06:31 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m9V87CE11620
	for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 03:07:12 -0500
Message-ID: <490ABC9A.7080201@getopt.org>
Date: Fri, 31 Oct 2008 09:06:50 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Read all the data from an index
References: <BLU149-W32AB003904D7CB3141E4CB9210@phx.gbl>	 <359a92830810301309u6f787bfepd0a0783b1663875a@mail.gmail.com>	 <BLU149-W24E80A4C2A7E31710F2F70B9210@phx.gbl> <359a92830810301657m42f727peb56b9f8bc7ec219@mail.gmail.com>
In-Reply-To: <359a92830810301657m42f727peb56b9f8bc7ec219@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> I'm not sure what *could* be easier than looping with IndexSearcher.doc(),
> looping from 1 to maxDoc. Of course you'll have to pay some attention to
> whether you get a document back or not, and I'm not quite sure whether you'd
> have to worry about getting deleted documents. But I don't think either of
> these
> really count if the index was optimized

Document numbers start at 0. You will never get a document marked 
"deleted" from either IndexReader or IndexSearcher.

Why use IndexSearcher and not IndexReader?

IndexReader reader = IndexReader.open(....);

for (int i = 0; i < reader.maxDoc(); i++) {
	if (reader.isDeleted(i)) {
		continue;
	}
	Document doc = reader.document(i);
	...
}

Hint: if you have an unoptimized index with deleted documents, and you 
want to retrieve also the content of these deleted documents, call first 
IndexReader.undeleteAll().

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 10:32:53 2008
Return-Path: <java-user-return-36924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17749 invoked from network); 31 Oct 2008 10:32:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 10:32:52 -0000
Received: (qmail 73552 invoked by uid 500); 31 Oct 2008 10:32:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73526 invoked by uid 500); 31 Oct 2008 10:32:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73515 invoked by uid 99); 31 Oct 2008 10:32:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 03:32:49 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 10:31:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KvrIb-0005Tq-2T
	for java-user@lucene.apache.org; Fri, 31 Oct 2008 03:32:13 -0700
Message-ID: <20263342.post@talk.nabble.com>
Date: Fri, 31 Oct 2008 03:32:13 -0700 (PDT)
From: PabloS <pablo.a.saavedra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <4908FAA4.9070809@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pablo.a.saavedra@gmail.com
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com> <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com> <4908FAA4.9070809@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm having a similar problem with my application, although we are using
lucene 2.3.2. The problem we have is that we are required to sort on most of
the fields (20 at least). Is there any way of changing the cache being used?
I can't seem to find a way, since the cache is being accessed using the
FieldCache.DEFAULT static field..

Any tip would be appreciated, otherwise I'll have to start looking for a
clustered solution like Todd.

Thanks in advance.
Pablo




markrmiller wrote:
> 
> The term, terminfo, indexreader internals stuff is prob on the low end 
> compared to the size of your field caches (needed for sorting). If you 
> are sorting by String I think the space needed is 32 bits x number of 
> docs + an array to hold all of the unique terms. So checking 300 million 
> docs (I know you are actually breaking it up smaller than that, but for 
> example) and ignoring things like String chars being variable byte 
> lengths and storing the length, etc and randomly picking 50000 unique 
> terms at 6 chars per:
> 
> 32 bits x 300000000 + 50000 x 6 x 16 bits to MB = 1 144.98138 megabytes
> 
> Thats per field your sorting on. If you are sorting on an int field it 
> should be closer to 32 bits x num docs - shorts, 32 bits x num docs, etc.
> 
> So you have those field caches, plus the IndexReader terminfo, term 
> stuff, plus whatever RAM your app needs beyond Lucene. 4 gig might just 
> not *quite* cut it is my guess.
> 
> Todd Benge wrote:
>> There's usually only a couple sort fields and a bunch of terms in the
>> various indices.  The terms are user entered on various media so the
>> number of terms is very large.
>>
>> Thanks for the help.
>>
>> Todd
>>
>>
>>
>> On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:
>>   
>>> Hi,
>>>
>>> I'm the lead engineer for search on a large website using lucene for
>>> search.
>>>
>>> We're indexing about 300M documents in ~ 100 indices.  The indices add
>>>  up to ~ 60G.
>>>
>>> The indices are sorted into 4 different Multisearcher with the largest
>>> handling ~50G.
>>>
>>> The code is basically like the following:
>>>
>>> private static MultiSearcher searcher;
>>>
>>> public void init(File files) {
>>>
>>>      IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>>>      int i = 0;
>>>      for ( File file: files ) {
>>>           searchers[i++] = new
>>> IndexSearcher(FSDirectory.getDirectory(file);
>>>      }
>>>
>>> searcher = new MultiSearcher(searchers);
>>> }
>>>
>>> public Searcher getSearcher() {
>>>    return searcher;
>>> }
>>>
>>> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
>>> Performance is good but servers are consistently hanging with
>>> OutOfMemory errors.
>>>
>>> We're allocating 4G in the heap to each server.
>>>
>>> Is there any way to control the amount of memory Lucene consume for
>>> caching?  Any other suggestions on fixing the memory errors?
>>>
>>> Thanks,
>>>
>>> Todd
>>>
>>>     
>>
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20263342.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 11:30:46 2008
Return-Path: <java-user-return-36925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36009 invoked from network); 31 Oct 2008 11:30:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 11:30:46 -0000
Received: (qmail 44664 invoked by uid 500); 31 Oct 2008 11:30:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44626 invoked by uid 500); 31 Oct 2008 11:30:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44615 invoked by uid 99); 31 Oct 2008 11:30:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 04:30:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.178.250 as permitted sender)
Received: from [64.233.178.250] (HELO hs-out-0708.google.com) (64.233.178.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 11:29:29 +0000
Received: by hs-out-0708.google.com with SMTP id 4so596968hsl.5
        for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 04:29:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=lhQwOz0qgjL4fV9w0jpf7KmcIOLhHwQHVKqkHgPeWAU=;
        b=PXjOcEIEwhCNtG8VRCvkzGDpD94gI7aLLv4SEhWkRFpjRtBPM/4qbRyOpkb95uPDLR
         xguDGJiUpZNU10WapfOtpe9zICItccw5Apu/m9DqPGNRbfllEOIagmKUteHMAXJYtyvN
         rq9aI1gF/hI12EG54p0iZFDJRL8NGd2k6R+1w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=ws+sAT/SwkCUUCEsFLgbDQAiidLV+3Q3M+DeWRt+fd8XQBVP+CJpOFmPrVOEZ//myn
         Vzl7m3dk5YkpwjB3PejN4fOnSiqyS74+uTLhULfx5x+i+7Xspa6+1f4NzmNgTzWEdfwi
         kXHtX8oaxz2L0LszNFglK/dItmfjjUKSX/iHM=
Received: by 10.90.55.9 with SMTP id d9mr6476103aga.61.1225452598111;
        Fri, 31 Oct 2008 04:29:58 -0700 (PDT)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm3077983agc.14.2008.10.31.04.29.56
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 31 Oct 2008 04:29:57 -0700 (PDT)
Message-ID: <490AEC34.9020809@gmail.com>
Date: Fri, 31 Oct 2008 07:29:56 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com> <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com> <4908FAA4.9070809@gmail.com> <20263342.post@talk.nabble.com>
In-Reply-To: <20263342.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

20 fields on a huge index? Wow - not sure there is a ton you can do with 
that...anyone have any suggestions for that one? Distributed should help 
I suppose, but thats a lot of sort fields for a large index.

If LUCENE-831 ever gets off the ground you will be able to change the 
cache used, and possibly use something that spills over to disk.

PabloS wrote:
> Hi,
>
> I'm having a similar problem with my application, although we are using
> lucene 2.3.2. The problem we have is that we are required to sort on most of
> the fields (20 at least). Is there any way of changing the cache being used?
> I can't seem to find a way, since the cache is being accessed using the
> FieldCache.DEFAULT static field..
>
> Any tip would be appreciated, otherwise I'll have to start looking for a
> clustered solution like Todd.
>
> Thanks in advance.
> Pablo
>
>
>
>
> markrmiller wrote:
>   
>> The term, terminfo, indexreader internals stuff is prob on the low end 
>> compared to the size of your field caches (needed for sorting). If you 
>> are sorting by String I think the space needed is 32 bits x number of 
>> docs + an array to hold all of the unique terms. So checking 300 million 
>> docs (I know you are actually breaking it up smaller than that, but for 
>> example) and ignoring things like String chars being variable byte 
>> lengths and storing the length, etc and randomly picking 50000 unique 
>> terms at 6 chars per:
>>
>> 32 bits x 300000000 + 50000 x 6 x 16 bits to MB = 1 144.98138 megabytes
>>
>> Thats per field your sorting on. If you are sorting on an int field it 
>> should be closer to 32 bits x num docs - shorts, 32 bits x num docs, etc.
>>
>> So you have those field caches, plus the IndexReader terminfo, term 
>> stuff, plus whatever RAM your app needs beyond Lucene. 4 gig might just 
>> not *quite* cut it is my guess.
>>
>> Todd Benge wrote:
>>     
>>> There's usually only a couple sort fields and a bunch of terms in the
>>> various indices.  The terms are user entered on various media so the
>>> number of terms is very large.
>>>
>>> Thanks for the help.
>>>
>>> Todd
>>>
>>>
>>>
>>> On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:
>>>   
>>>       
>>>> Hi,
>>>>
>>>> I'm the lead engineer for search on a large website using lucene for
>>>> search.
>>>>
>>>> We're indexing about 300M documents in ~ 100 indices.  The indices add
>>>>  up to ~ 60G.
>>>>
>>>> The indices are sorted into 4 different Multisearcher with the largest
>>>> handling ~50G.
>>>>
>>>> The code is basically like the following:
>>>>
>>>> private static MultiSearcher searcher;
>>>>
>>>> public void init(File files) {
>>>>
>>>>      IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>>>>      int i = 0;
>>>>      for ( File file: files ) {
>>>>           searchers[i++] = new
>>>> IndexSearcher(FSDirectory.getDirectory(file);
>>>>      }
>>>>
>>>> searcher = new MultiSearcher(searchers);
>>>> }
>>>>
>>>> public Searcher getSearcher() {
>>>>    return searcher;
>>>> }
>>>>
>>>> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
>>>> Performance is good but servers are consistently hanging with
>>>> OutOfMemory errors.
>>>>
>>>> We're allocating 4G in the heap to each server.
>>>>
>>>> Is there any way to control the amount of memory Lucene consume for
>>>> caching?  Any other suggestions on fixing the memory errors?
>>>>
>>>> Thanks,
>>>>
>>>> Todd
>>>>
>>>>     
>>>>         
>>>   
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 12:00:33 2008
Return-Path: <java-user-return-36926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45039 invoked from network); 31 Oct 2008 12:00:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 12:00:33 -0000
Received: (qmail 2518 invoked by uid 500); 31 Oct 2008 12:00:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2494 invoked by uid 500); 31 Oct 2008 12:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2483 invoked by uid 99); 31 Oct 2008 12:00:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 05:00:31 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 11:59:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KvsfT-0000PJ-Hb
	for java-user@lucene.apache.org; Fri, 31 Oct 2008 04:59:55 -0700
Message-ID: <20264511.post@talk.nabble.com>
Date: Fri, 31 Oct 2008 04:59:55 -0700 (PDT)
From: PabloS <pablo.a.saavedra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <490AEC34.9020809@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pablo.a.saavedra@gmail.com
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com> <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com> <4908FAA4.9070809@gmail.com> <20263342.post@talk.nabble.com> <490AEC34.9020809@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the quick reply :). For now, I'd settle with just storing cache
values in soft references so at least the GC would be able to free up some
space when it needs to.

I think I'll just try to override the default sorting mechanism by
subclassing FieldSortedHitQueue. I'll let you know how it goes.

If anyone else has any idea please do let me know.
Regards.
Pablo.



markrmiller wrote:
> 
> 20 fields on a huge index? Wow - not sure there is a ton you can do with 
> that...anyone have any suggestions for that one? Distributed should help 
> I suppose, but thats a lot of sort fields for a large index.
> 
> If LUCENE-831 ever gets off the ground you will be able to change the 
> cache used, and possibly use something that spills over to disk.
> 
> PabloS wrote:
>> Hi,
>>
>> I'm having a similar problem with my application, although we are using
>> lucene 2.3.2. The problem we have is that we are required to sort on most
>> of
>> the fields (20 at least). Is there any way of changing the cache being
>> used?
>> I can't seem to find a way, since the cache is being accessed using the
>> FieldCache.DEFAULT static field..
>>
>> Any tip would be appreciated, otherwise I'll have to start looking for a
>> clustered solution like Todd.
>>
>> Thanks in advance.
>> Pablo
>>
>>
>>
>>
>> markrmiller wrote:
>>   
>>> The term, terminfo, indexreader internals stuff is prob on the low end 
>>> compared to the size of your field caches (needed for sorting). If you 
>>> are sorting by String I think the space needed is 32 bits x number of 
>>> docs + an array to hold all of the unique terms. So checking 300 million 
>>> docs (I know you are actually breaking it up smaller than that, but for 
>>> example) and ignoring things like String chars being variable byte 
>>> lengths and storing the length, etc and randomly picking 50000 unique 
>>> terms at 6 chars per:
>>>
>>> 32 bits x 300000000 + 50000 x 6 x 16 bits to MB = 1 144.98138 megabytes
>>>
>>> Thats per field your sorting on. If you are sorting on an int field it 
>>> should be closer to 32 bits x num docs - shorts, 32 bits x num docs,
>>> etc.
>>>
>>> So you have those field caches, plus the IndexReader terminfo, term 
>>> stuff, plus whatever RAM your app needs beyond Lucene. 4 gig might just 
>>> not *quite* cut it is my guess.
>>>
>>> Todd Benge wrote:
>>>     
>>>> There's usually only a couple sort fields and a bunch of terms in the
>>>> various indices.  The terms are user entered on various media so the
>>>> number of terms is very large.
>>>>
>>>> Thanks for the help.
>>>>
>>>> Todd
>>>>
>>>>
>>>>
>>>> On 10/29/08, Todd Benge <todd.benge@gmail.com> wrote:
>>>>   
>>>>       
>>>>> Hi,
>>>>>
>>>>> I'm the lead engineer for search on a large website using lucene for
>>>>> search.
>>>>>
>>>>> We're indexing about 300M documents in ~ 100 indices.  The indices add
>>>>>  up to ~ 60G.
>>>>>
>>>>> The indices are sorted into 4 different Multisearcher with the largest
>>>>> handling ~50G.
>>>>>
>>>>> The code is basically like the following:
>>>>>
>>>>> private static MultiSearcher searcher;
>>>>>
>>>>> public void init(File files) {
>>>>>
>>>>>      IndexSearcer [] searchers = new IndexSearcher[files.length] ();
>>>>>      int i = 0;
>>>>>      for ( File file: files ) {
>>>>>           searchers[i++] = new
>>>>> IndexSearcher(FSDirectory.getDirectory(file);
>>>>>      }
>>>>>
>>>>> searcher = new MultiSearcher(searchers);
>>>>> }
>>>>>
>>>>> public Searcher getSearcher() {
>>>>>    return searcher;
>>>>> }
>>>>>
>>>>> We're seeing a high cache rate with Term & TermInfo in Lucene 2.4.
>>>>> Performance is good but servers are consistently hanging with
>>>>> OutOfMemory errors.
>>>>>
>>>>> We're allocating 4G in the heap to each server.
>>>>>
>>>>> Is there any way to control the amount of memory Lucene consume for
>>>>> caching?  Any other suggestions on fixing the memory errors?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Todd
>>>>>
>>>>>     
>>>>>         
>>>>   
>>>>       
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>     
>>
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20264511.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 12:46:44 2008
Return-Path: <java-user-return-36927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63412 invoked from network); 31 Oct 2008 12:46:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 12:46:43 -0000
Received: (qmail 48198 invoked by uid 500); 31 Oct 2008 12:46:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48170 invoked by uid 500); 31 Oct 2008 12:46:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48045 invoked by uid 99); 31 Oct 2008 12:46:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 05:46:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.45.11] (HELO n64a.bullet.mail.sp1.yahoo.com) (98.136.45.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 31 Oct 2008 12:45:19 +0000
Received: from [216.252.122.218] by n64.bullet.mail.sp1.yahoo.com with NNFMP; 31 Oct 2008 12:44:43 -0000
Received: from [69.147.65.164] by t3.bullet.sp1.yahoo.com with NNFMP; 31 Oct 2008 12:44:43 -0000
Received: from [127.0.0.1] by omp409.mail.sp1.yahoo.com with NNFMP; 31 Oct 2008 12:44:43 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 262967.43896.bm@omp409.mail.sp1.yahoo.com
Received: (qmail 19039 invoked by uid 60001); 31 Oct 2008 12:44:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=F3xBbjCAZD3pgBM5GLBcIj1li5vEqyw/uD1ORfkCYOafQxyqS6cwME+iVNjX+ReABf0FB7PNQnkadABd71Pd/0a964506aLUAFVRLC8p30S/Mydd3EWC4ZwA6WnWZ9nI2zQ0WEQ801urb5gbVCdWWynNKqNxxhf7ioBP8sotDyQ=;
X-YMail-OSG: LIxQx7YVM1meNIFjy9sc9bxg40C5cxc6jCMh.8lay2ufY6qb5ICeVFV142qs7HsnjOfceg6sAFz.s5pKSpQIohDUf9aOZdlFrL51hOaugr6F7hrkxGLTt2wNA_5ucTzo2ng-
Received: from [93.96.69.199] by web45105.mail.sp1.yahoo.com via HTTP; Fri, 31 Oct 2008 05:44:42 PDT
X-Mailer: YahooMailWebService/0.7.247.3
Date: Fri, 31 Oct 2008 05:44:42 -0700 (PDT)
From: semelak ss <semelak_14@yahoo.com>
Reply-To: semelak_14@yahoo.com
Subject: Exact Phrase Query
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <71545.19024.qm@web45105.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I have documents containing multiple words in the the field "word"
for example, one of the documents contain in the field "word" the following:
homeowners work

When searching for single words (i.e. homewoners ) I get hits.

However, searching for the exact phrase "homeowners work" gives me no hits!! I use the double quotes when searching for exact phrases.

Any idea why ??




      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 12:49:18 2008
Return-Path: <java-user-return-36928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64052 invoked from network); 31 Oct 2008 12:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 12:49:17 -0000
Received: (qmail 53988 invoked by uid 500); 31 Oct 2008 12:49:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53951 invoked by uid 500); 31 Oct 2008 12:49:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53937 invoked by uid 99); 31 Oct 2008 12:49:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 05:49:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 12:47:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KvtQd-0002Uy-Si
	for java-user@lucene.apache.org; Fri, 31 Oct 2008 05:48:39 -0700
Message-ID: <20265229.post@talk.nabble.com>
Date: Fri, 31 Oct 2008 05:48:39 -0700 (PDT)
From: Albert Juhe <albertjuhe@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Any Spanish analyzer available?
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6A95@rw-ex2003.BROADVISION.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: albertjuhe@gmail.com
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6A95@rw-ex2003.BROADVISION.COM>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 

Actually I'm using a Spanish analyzer for my search engine, I don't know if
it's the best, but its useful for my purpose.
http://www.nabble.com/file/p20265229/SpanishAnalyzer.java
SpanishAnalyzer.java 
http://www.nabble.com/file/p20265229/SpanishStemFilter.java
SpanishStemFilter.java 
http://www.nabble.com/file/p20265229/SpanishStemmer.java SpanishStemmer.java 
http://www.nabble.com/file/p20265229/stopWords.java stopWords.java 

if you improve it, tell me.


Zhang, Lisheng wrote:
> 
> Hi,
> 
> Is there any Spanish analyzer available for lucene applications? 
> I did not see any in lucene 2.4.0 contribute folders.
> 
> Thanks very much for helps, Lisheng
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Any-Spanish-analyzer-available--tp20140630p20265229.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 12:55:55 2008
Return-Path: <java-user-return-36929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65301 invoked from network); 31 Oct 2008 12:55:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 12:55:55 -0000
Received: (qmail 60620 invoked by uid 500); 31 Oct 2008 12:55:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60588 invoked by uid 500); 31 Oct 2008 12:55:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60577 invoked by uid 99); 31 Oct 2008 12:55:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 05:55:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.49] (HELO n57.bullet.mail.sp1.yahoo.com) (98.136.44.49)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 31 Oct 2008 12:54:36 +0000
Received: from [216.252.122.216] by n57.bullet.mail.sp1.yahoo.com with NNFMP; 31 Oct 2008 12:54:00 -0000
Received: from [69.147.65.170] by t1.bullet.sp1.yahoo.com with NNFMP; 31 Oct 2008 12:54:00 -0000
Received: from [127.0.0.1] by omp505.mail.sp1.yahoo.com with NNFMP; 31 Oct 2008 12:54:00 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 308366.13225.bm@omp505.mail.sp1.yahoo.com
Received: (qmail 52794 invoked by uid 60001); 31 Oct 2008 12:54:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=AMGHyvko7THLJ5+iGuFEc8V2eC069uGkYFjWVIeWUcSqqKZWRrW48VYIgYw2QJB1XcvbSecWxRKyeFOqQLrJ63ksY+Hk9Pq8BkbZ4fc2YlUNa2NwDlIDHUqPWN1OZaqTWB2781JnS4N1ROifvbsk01pXr7SjWRl6esBy03bd12w=;
X-YMail-OSG: 8WXWHIMVM1mm1WMTzisFRIN7glkj5tFOLpiLBglLzXjEp95nIjJOkGddauajulUdubnuPF8yAb1K2ujEngVWzP9Am91DKxeGkWkPFLa843RYG6ESyHlJyfYz1rI5JcwgGGegwvbwSW30vfyWOx6eSf2w
Received: from [93.96.69.199] by web45102.mail.sp1.yahoo.com via HTTP; Fri, 31 Oct 2008 05:54:00 PDT
X-Mailer: YahooMailWebService/0.7.247.3
Date: Fri, 31 Oct 2008 05:54:00 -0700 (PDT)
From: semelak ss <semelak_14@yahoo.com>
Reply-To: semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
To: java-user@lucene.apache.org
In-Reply-To: <71545.19024.qm@web45105.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <201897.52401.qm@web45102.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Was my message sent successfully ?
I received this automated response from support@magentanews.com right after sending the message !!

===========
Dear sender,

Delivery of your message has failed. This is an automatic reply.

The domain magentanews.com has been changed and is longer in use. Please resend your email to the same user in the format "name@meltwater.com" and be sure to update your address book.

If this is a support request or you require further assistance please resend your mail to support@meltwaternews.com

Best regards,
Meltwater Group
==========



--- On Fri, 10/31/08, semelak ss <semelak_14@yahoo.com> wrote:

> From: semelak ss <semelak_14@yahoo.com>
> Subject: Exact Phrase Query
> To: java-user@lucene.apache.org
> Date: Friday, October 31, 2008, 5:44 AM
> I have documents containing multiple words in the the field
> "word"
> for example, one of the documents contain in the field
> "word" the following:
> homeowners work
> 
> When searching for single words (i.e. homewoners ) I get
> hits.
> 
> However, searching for the exact phrase "homeowners
> work" gives me no hits!! I use the double quotes when
> searching for exact phrases.
> 
> Any idea why ??
> 
> 
> 
> 
>       
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 12:57:58 2008
Return-Path: <java-user-return-36930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65890 invoked from network); 31 Oct 2008 12:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 12:57:58 -0000
Received: (qmail 64275 invoked by uid 500); 31 Oct 2008 12:57:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64237 invoked by uid 500); 31 Oct 2008 12:57:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64226 invoked by uid 99); 31 Oct 2008 12:57:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 05:57:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 12:56:43 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1198242rvb.5
        for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 05:57:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=gyaR+pKd5KzIbMI9KDtdn4uKlqknSi8GiLXyLJ56Vx4=;
        b=cZspzc/DKYF9YcY7Kdh1n4krEDB0IQSi5oKNiu9GZh9GSI++xOL/20atpPp0IUae2M
         j0eXntaSZxjfYoH9s0rYzKts9Wh7ldPFVR8KqKdtpYzXlhdgtWFUV6I35fk1VyrHgCq9
         1NC/+SZoJliFrvqxznVemBB6amEwZkUiiAtPw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lXcJMib/C1ugo+4KkWEvzaCoiJNKTNeYbkFYvwc99wPunGmO9mOyokX7BqQQJTe2Rp
         JEpILAGslIjT3T5/YPjyqR97UIE40R9RG/ulRwxJwBhPQxhPnrZPu633IFoVK6LGUNwg
         H9JV7VRJ0udLbHD1TjrSDAwJWkB4xU7Rf7F7s=
Received: by 10.141.18.10 with SMTP id v10mr2594782rvi.3.1225457843939;
        Fri, 31 Oct 2008 05:57:23 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Fri, 31 Oct 2008 05:57:23 -0700 (PDT)
Message-ID: <359a92830810310557i1bceb83n5d0cd7fb84b3934e@mail.gmail.com>
Date: Fri, 31 Oct 2008 08:57:23 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
In-Reply-To: <71545.19024.qm@web45105.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16757_26561471.1225457843929"
References: <71545.19024.qm@web45105.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16757_26561471.1225457843929
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You need to give us more information for meaningful replies, like
the analyzers you use when indexing and searching, the exact
query you use, perhaps the snippets of the code, etc.

That said, things to check:
Get a copy of Luke and examine your index. You can even
run queries through that tool and see what gets sent to the
database and what responses you get with those analyzers.

Make sure you're analyzers at query and index time are doing
what you expect. Query.toString() is your friend. If you don't
take the time to understand analyzers, you'll spend lots of time
spinning your wheels.

And you really should wait more than 9 minutes before pinging
the list....

Best
Erick



On Fri, Oct 31, 2008 at 8:44 AM, semelak ss <semelak_14@yahoo.com> wrote:

> I have documents containing multiple words in the the field "word"
> for example, one of the documents contain in the field "word" the
> following:
> homeowners work
>
> When searching for single words (i.e. homewoners ) I get hits.
>
> However, searching for the exact phrase "homeowners work" gives me no
> hits!! I use the double quotes when searching for exact phrases.
>
> Any idea why ??
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16757_26561471.1225457843929--

From java-user-return-36931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 13:08:30 2008
Return-Path: <java-user-return-36931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68654 invoked from network); 31 Oct 2008 13:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 13:08:30 -0000
Received: (qmail 77356 invoked by uid 500); 31 Oct 2008 13:08:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77334 invoked by uid 500); 31 Oct 2008 13:08:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77323 invoked by uid 99); 31 Oct 2008 13:08:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 06:08:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 13:07:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KvtjE-0003Xp-59
	for java-user@lucene.apache.org; Fri, 31 Oct 2008 06:07:52 -0700
Message-ID: <20265608.post@talk.nabble.com>
Date: Fri, 31 Oct 2008 06:07:52 -0700 (PDT)
From: Albert Juhe <albertjuhe@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wizard for search in Lucene
In-Reply-To: <op.uissmwvgoftp72@melkor>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: albertjuhe@gmail.com
References: <19900220.post@talk.nabble.com> <20081009164925.GA22879@stud.ntnu.no> <op.uissmwvgoftp72@melkor>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

This is my first version, it isn't fast, because I want to get this
information without modifying index.
Now I'm working to improve it (including freeling).

public String docsTerme(IndexReader reader, String terme) {
        String resultat =3D "";
        TermPositions tP;
        ArrayList alDocs =3D new ArrayList();
        long start =3D new Date().getTime();
        int veinsTrobats =3D 0; //neightbours find it

        //Where is the term
        try {
            tP =3D reader.termPositions(new Term("contingut", terme));
//Documents where the term is found.
            while (tP.next()) {
                infoTerme it =3D new infoTerme(terme, tP.doc(), tP.freq());
                resultat +=3D it.toString();
                for (int i =3D 0; i < it.getFrequencia(); i++) {
                    it.add(tP.nextPosition());
                }
                alDocs.add(it); //we store: term, document id, positions
                resultat +=3D "(" + it.toStringPosicions() + ")<br/>";
            }

        } catch (IOException e) {
            System.out.println("Error trobant documents termes: " + e);
            return null;
        }

        //Terms in a document
        for (int i =3D 0; i < alDocs.size(); i++) {
            infoTerme iT =3D (infoTerme) alDocs.get(i); //We need term,id
document and positions
            resultat +=3D "<br/>" + iT.getId_document() + ":<br/>"; //Id
document
            try {
                TermFreqVector[] tfv =3D
reader.getTermFreqVectors(iT.getId_document()); //All the terms found in a
document
                int j =3D 0;
                String[] llistatTermes =3D tfv[j].getTerms();
                int paraulesAnalitzades =3D 0;
                veinsTrobats =3D 0;
                while (veinsTrobats < iT.getFrequencia() &&
paraulesAnalitzades < llistatTermes.length) {
                    resultat +=3D "," + llistatTermes[paraulesAnalitzades];
                    TermPositions termP =3D reader.termPositions(new
Term("contingut", llistatTermes[paraulesAnalitzades]));//Documents on
apareix el terme
                    while (termP.next()) {=20
                        if (termP.doc() =3D=3D iT.getId_document()) { //The=
 word
it's found in the same id document, maybe neightbours
                            boolean veins =3D false;
                            int ind =3D 0;
                            while (!veins && ind < termP.freq()) {
                                int posicio =3D termP.nextPosition();
                                if (iT.sonVeins(posicio)) {
                                    veins =3D true;
                                    resultat +=3D "<br/>" + veinsTrobats + =
"/"
+ iT.getFrequencia() + " They are neightbours (proximity 1):" +
iT.getTerme() + " i " + llistatTermes[paraulesAnalitzades] + "(" + posicio =
+
")<br/>";
                                    veinsTrobats++;
                                } else {
                                    ind++;
                                }
                            }
                        }
                    }
                    paraulesAnalitzades++;
                }

            } catch (IOException e) {
                System.out.println("Error I cant find terms: " + e);
                return null;
            }
        }
        long end =3D new Date().getTime();
        resultat +=3D "<br/>Time elapsed: " + (end - start) + "ms";
        return resultat;
    }
http://www.nabble.com/file/p20265608/infoTerme.java infoTerme.java=20

thank you,
Albert


Aleksander M. Stensby wrote:
>=20
>  From what I can understand, you want to insert the word "history" and
> then =20
> get proposed "related" terms in combination with your input query.
> In essense this would be to do a "look-up" on top-terms in the subset of =
=20
> documents matching the initial query "history". Exactly how you could do =
=20
> this is a bit uncertain from my knowledge, but I suggest you read up on =
=20
> term-frequency and the tf-idf scheme.
>=20
> Also: take a look at the org.apache.lucene.search.similar package:
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apach=
e/lucene/search/similar/package-summary.html
> and read the motivation email listed in the first segment of
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apach=
e/lucene/search/similar/MoreLikeThis.html
>=20
> I couldn't really see how you would autocomplete after the word history =
=20
> without listing a bunch of un-interesting terms as suggestions... But i =
=20
> might be wrong... Of course, if it was autocompletion you were looking =
=20
> for=C2=B8 Asbj=C3=B8rn answered that one just fine:)
>=20
> Best regards,
>   Aleksander M. Stensby
>=20
>=20
> On Thu, 09 Oct 2008 18:49:26 +0200, Asbj=C3=B8rn A. Fellinghaug =20
> <asbjorn@fellinghaug.com> wrote:
>=20
>> Albert Juhe:
>>>
>>> Hi,
>>>
>>> I want to make a wizard that can help to find n-grams terms.
>>> For example:
>>> If i want to search History, after write it the system propose you the
>>> following searches:
>>> history europe
>>> history spain
>>> history .....
>>> Consulting the terms indexed.
>>>
>>> Does it exits in Lucene?
>>
>> Hi.
>>
>> I interpret your question in such a way that you want autocompletion in
>> your search system? In that case, I believe there are some Analyzer's
>> which does this in the 'contrib' package. Also, I've created an Analyzer
>> which creates "bigrams" (n-gram of size 2) in my master thesis.
>> Feel free to download it from this page:
>> http://asbjorn.fellinghaug.com/blog/2008/08/the-code-for-my-master-thesi=
s/
>>
>> Also, have a look at the package org.apache.lucene.analysis.ngram:
>> http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/ngram=
/package-summary.html
>>
>=20
>=20
>=20
> --=20
> Aleksander M. Stensby
> Senior Software Developer
> Integrasco A/S
> +47 41 22 82 72
> aleksander.stensby@integrasco.no
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/wizard-for-search-in-Lu=
cene-tp19900220p20265608.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 15:38:10 2008
Return-Path: <java-user-return-36932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72872 invoked from network); 31 Oct 2008 15:38:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 15:38:10 -0000
Received: (qmail 97957 invoked by uid 500); 31 Oct 2008 15:38:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97921 invoked by uid 500); 31 Oct 2008 15:38:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97903 invoked by uid 99); 31 Oct 2008 15:38:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 08:38:08 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 15:36:50 +0000
X-ASG-Debug-ID: 1225467431-23bf01a70000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 230376368
	for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 08:37:11 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id ZrZO0Hz7GGB1CVXl for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 08:37:11 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Any Spanish analyzer available?
Subject: RE: Any Spanish analyzer available?
Date: Fri, 31 Oct 2008 08:35:57 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6AC3@rw-ex2003.BROADVISION.COM>
In-Reply-To: <20265229.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Any Spanish analyzer available?
Thread-Index: Ack7VufRrwHnn5rrR0uhzcrvyibRrwAF0NiQ
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1225467431
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks very much for your helps, I will inform
if we can improve later in any way.

Best regards, Lisheng

-----Original Message-----
From: Albert Juhe [mailto:albertjuhe@gmail.com]
Sent: Friday, October 31, 2008 5:49 AM
To: java-user@lucene.apache.org
Subject: Re: Any Spanish analyzer available?



Hi,=20

Actually I'm using a Spanish analyzer for my search engine, I don't know =
if
it's the best, but its useful for my purpose.
http://www.nabble.com/file/p20265229/SpanishAnalyzer.java
SpanishAnalyzer.java=20
http://www.nabble.com/file/p20265229/SpanishStemFilter.java
SpanishStemFilter.java=20
http://www.nabble.com/file/p20265229/SpanishStemmer.java =
SpanishStemmer.java=20
http://www.nabble.com/file/p20265229/stopWords.java stopWords.java=20

if you improve it, tell me.


Zhang, Lisheng wrote:
>=20
> Hi,
>=20
> Is there any Spanish analyzer available for lucene applications?=20
> I did not see any in lucene 2.4.0 contribute folders.
>=20
> Thanks very much for helps, Lisheng
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: =
http://www.nabble.com/Any-Spanish-analyzer-available--tp20140630p20265229=
.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 15:54:05 2008
Return-Path: <java-user-return-36933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76431 invoked from network); 31 Oct 2008 15:54:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 15:54:05 -0000
Received: (qmail 23908 invoked by uid 500); 31 Oct 2008 15:54:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23880 invoked by uid 500); 31 Oct 2008 15:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23869 invoked by uid 99); 31 Oct 2008 15:54:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 08:54:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 15:52:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1283455rvb.5
        for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 08:53:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=6C1NdVrq8pzYxdDObtsUFzazGk71V1a8C68/nYx9uu0=;
        b=mBCRpaBMLsIy5Ztr2loCEj4aSb0rqytiRuHIjJ4Me82V7JWu+WiR7NHJoGukTVXCFq
         koPykvbj7xo2DS8Dkfpdz00HS1X0S+eQpkB2Eyb/egbar8+reG3X/daM5tWEbrRXLvYY
         +qprXpvJAUkD1Cf4Cu15Q7l9iR9CUeUQSDSeo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=RaC3fubheIm048/N+NNS9MivfgAF9HIxNdCuh4GPU+qvdbDZtluCyWy4kR9fSQ925C
         AR0RwszeXcsHBU6t8ub5T1fnlSuE9BH//l5jTWTr6WLA1oFzTIyczmIT4Zzr3eBmlWn5
         6CT4CDE3GayLq3guBdWJBJoyLlERjrmwlxphQ=
Received: by 10.141.88.3 with SMTP id q3mr6753681rvl.3.1225468400418;
        Fri, 31 Oct 2008 08:53:20 -0700 (PDT)
Received: by 10.141.68.16 with HTTP; Fri, 31 Oct 2008 08:53:20 -0700 (PDT)
Message-ID: <5e76f3840810310853k10d21647g175cddd5fd96709@mail.gmail.com>
Date: Fri, 31 Oct 2008 11:53:20 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Document thread safe?
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I am using Lucene 2.3.1.

I have concurrent threads adding Fields to the same Document, but
getting some odd behaviour.
Before going into too much depth, is Document thread-safe?

thanks,

Glen

http://zzzoot.blogspot.com/

-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 16:13:43 2008
Return-Path: <java-user-return-36934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84603 invoked from network); 31 Oct 2008 16:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 16:13:42 -0000
Received: (qmail 56791 invoked by uid 500); 31 Oct 2008 16:13:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56756 invoked by uid 500); 31 Oct 2008 16:13:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56745 invoked by uid 99); 31 Oct 2008 16:13:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 09:13:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.242 as permitted sender)
Received: from [209.85.198.242] (HELO rv-out-0708.google.com) (209.85.198.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 16:12:27 +0000
Received: by rv-out-0708.google.com with SMTP id k29so1514144rvb.0
        for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 09:12:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=fBFCfXEC10YGnHFa5/F9F1DsI2KnILvLTaY17LolXOQ=;
        b=V9AlYDoRNvSnffcBP9JqJtFShiJASwRi0ZnWCBf42SBQRQpxmNruw+040YhfUQhXXd
         sA2r7Qn/2Aij9LZscA1EwEFEwTjXIcvy3InOV6da434hkfZ1qSU8yib3tRcSh9Jjjc6/
         4KjqlcG++qmoEiLIc4T2726BBHbZcYp/rVpZM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=Lg05J82wtr8F/r/7TNhe0/fnL4ayW1T6bTHNo8JHkkke9o76sErPNbT2OrxGyBh0So
         euyTmFnqmLmOy9nmSvGkXHh0wXSy/hO1KuWUb3qKKEYKsydYj4TGJV3G3TUllJP1q57c
         J400TSyGvMj0q+ulfriWPKzw4qZjMQNCO8VvE=
Received: by 10.141.84.5 with SMTP id m5mr6765680rvl.14.1225469578031;
        Fri, 31 Oct 2008 09:12:58 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Fri, 31 Oct 2008 09:12:58 -0700 (PDT)
Message-ID: <c68e39170810310912icd5b959v7182496fe6f5ced8@mail.gmail.com>
Date: Fri, 31 Oct 2008 12:12:58 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Document thread safe?
In-Reply-To: <5e76f3840810310853k10d21647g175cddd5fd96709@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840810310853k10d21647g175cddd5fd96709@mail.gmail.com>
X-Google-Sender-Auth: 78e75df4939c5a53
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Oct 31, 2008 at 11:53 AM, Glen Newton <glen.newton@gmail.com> wrote:
> I have concurrent threads adding Fields to the same Document, but
> getting some odd behaviour.
> Before going into too much depth, is Document thread-safe?

No, it's not.
synchronizing on Document when adding a new field would probably be
the easiest fix for you.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 16:17:54 2008
Return-Path: <java-user-return-36935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85444 invoked from network); 31 Oct 2008 16:17:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 16:17:53 -0000
Received: (qmail 61760 invoked by uid 500); 31 Oct 2008 16:17:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61490 invoked by uid 500); 31 Oct 2008 16:17:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61479 invoked by uid 99); 31 Oct 2008 16:17:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 09:17:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 16:16:38 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1294467rvb.5
        for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 09:17:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=OOIJFKBQ8ZIuINHIQCbyPAfDbq/C/UASOglQ6kVD1is=;
        b=nFd72sp9jsUTlPVUaiHFslWfv8flPRdkFAbv9uQXyUuyI8HsHP4QOyJuTc4J4ikZy3
         5pZ9SiuxXpXtNEXngnLuxSmdnE5SCChaBWJXI3bjMED0CodoZ+Yrqu6a9Bcvmj5HU8NQ
         cepUROtwnjHu0BCkAk9MQ4tdrDqkyWS8tgCZg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=M2l5aOoUmYcDKX++yyH5386XKCOCFk114sB6/oECZDrR/MyzFRQdoY9iaj5qpKDN5x
         z+hponvjWW3cxE1eObPLkVExQuun/YDXZEYj1tYdekJZj33r8fgMSwMU+1NuC0X9UrBU
         HWwWbmiB58GE005hzcrH/KtP4gzszjZ1zpFvQ=
Received: by 10.141.113.6 with SMTP id q6mr6766920rvm.135.1225469829374;
        Fri, 31 Oct 2008 09:17:09 -0700 (PDT)
Received: by 10.141.68.16 with HTTP; Fri, 31 Oct 2008 09:17:09 -0700 (PDT)
Message-ID: <5e76f3840810310917y3dd73b37rd508f9e63c3de370@mail.gmail.com>
Date: Fri, 31 Oct 2008 12:17:09 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document thread safe?
In-Reply-To: <c68e39170810310912icd5b959v7182496fe6f5ced8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840810310853k10d21647g175cddd5fd96709@mail.gmail.com>
	 <c68e39170810310912icd5b959v7182496fe6f5ced8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, the problem goes away when I do the following:
 synchronized(doc)
{
   doc.add(field);
}

Thanks.

[I'll use a Lock to do this properly]

-glen

2008/10/31 Yonik Seeley <yonik@apache.org>:
> On Fri, Oct 31, 2008 at 11:53 AM, Glen Newton <glen.newton@gmail.com> wrote:
>> I have concurrent threads adding Fields to the same Document, but
>> getting some odd behaviour.
>> Before going into too much depth, is Document thread-safe?
>
> No, it's not.
> synchronizing on Document when adding a new field would probably be
> the easiest fix for you.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 16:41:57 2008
Return-Path: <java-user-return-36936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92871 invoked from network); 31 Oct 2008 16:41:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 16:41:57 -0000
Received: (qmail 95243 invoked by uid 500); 31 Oct 2008 16:41:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95196 invoked by uid 500); 31 Oct 2008 16:41:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95179 invoked by uid 99); 31 Oct 2008 16:41:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 09:41:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.42] (HELO n78.bullet.mail.sp1.yahoo.com) (98.136.44.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 31 Oct 2008 16:40:32 +0000
Received: from [216.252.122.218] by n78.bullet.mail.sp1.yahoo.com with NNFMP; 31 Oct 2008 16:41:12 -0000
Received: from [69.147.65.165] by t3.bullet.sp1.yahoo.com with NNFMP; 31 Oct 2008 16:41:12 -0000
Received: from [127.0.0.1] by omp500.mail.sp1.yahoo.com with NNFMP; 31 Oct 2008 16:41:12 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 866024.63334.bm@omp500.mail.sp1.yahoo.com
Received: (qmail 70063 invoked by uid 60001); 31 Oct 2008 16:41:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=vefu2Z9kd+I3nLL3skhxTa6DMip3Nif92mrwHvOBA+s5quMFiI7Cj13kJCDV4+zrrBv05xVOdgVFSknDkRDroxbilaXYQdnU7qOEaBr0zManjg73dn9Fy3jhaJoERdWebIdAqXAR9BmEsZqL4OIUbcKF0Go+fRtVIGCz7gDNDn0=;
X-YMail-OSG: rghxynsVM1nfio3hvC5YpZbKvj4jSR_XrebXl7f7G.N8tgpdFPWEFWxBs97jiYRXbq08W3rOcuxjODlvlHigCNGnINK5kwNzKYmaZZx2TMC3.bs8FWgeQkCAywn.7zaK5SvRviAKJSw0S9oMWrTx7x8_
Received: from [93.96.69.199] by web45107.mail.sp1.yahoo.com via HTTP; Fri, 31 Oct 2008 09:41:12 PDT
X-Mailer: YahooMailWebService/0.7.247.3
Date: Fri, 31 Oct 2008 09:41:12 -0700 (PDT)
From: semelak ss <semelak_14@yahoo.com>
Reply-To: semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
To: java-user@lucene.apache.org
In-Reply-To: <359a92830810310557i1bceb83n5d0cd7fb84b3934e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <741099.69873.qm@web45107.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

For indexing, I use the following:
===========
writer = new IndexWriter(INDEX_DIR,new WhitespaceAnalyzer(),true ,IndexWriter.MaxFieldLength.UNLIMITED);
Document doc = new Document();            
String tmpword = this.getProperForm(word1, word2);
doc.add(new Field("WORDS", tmpword, Field.Store.YES, Field.Index.TOKENIZED));
doc.add(new Field("score", Double.toString(score) , Field.Store.YES, Field.Index.NO));
writer.addDocument(adoc);
============

For searching,, I use the following (query = "homeowner work" gives no hits ,, "homeowner" gives results):
============
_searcher = new IndexSearcher(INDEX_DIR);
_parser = new QueryParser("WORDS", new WhitespaceAnalyzer());
q = _parser.parse(query);
Hits tmph = _searcher.search(q);

============

A sample document (contained in the index) is the following:

filed: value
-----: -----
WORDS:"homeowners work"
score: 0.1515417


Also, please note that I tried using Luke to browse the index and the fields seem to be filled out with words just as expected. Searching, however, with exact phrases yield no answer. Searching with single words gives hits.




--- On Fri, 10/31/08, Erick Erickson <erickerickson@gmail.com> wrote:

> From: Erick Erickson <erickerickson@gmail.com>
> Subject: Re: Exact Phrase Query
> To: java-user@lucene.apache.org, semelak_14@yahoo.com
> Date: Friday, October 31, 2008, 5:57 AM
> You need to give us more information for meaningful replies,
> like
> the analyzers you use when indexing and searching, the
> exact
> query you use, perhaps the snippets of the code, etc.
> 
> That said, things to check:
> Get a copy of Luke and examine your index. You can even
> run queries through that tool and see what gets sent to the
> database and what responses you get with those analyzers.
> 
> Make sure you're analyzers at query and index time are
> doing
> what you expect. Query.toString() is your friend. If you
> don't
> take the time to understand analyzers, you'll spend
> lots of time
> spinning your wheels.
> 
> And you really should wait more than 9 minutes before
> pinging
> the list....
> 
> Best
> Erick
> 
> 
> 
> On Fri, Oct 31, 2008 at 8:44 AM, semelak ss
> <semelak_14@yahoo.com> wrote:
> 
> > I have documents containing multiple words in the the
> field "word"
> > for example, one of the documents contain in the field
> "word" the
> > following:
> > homeowners work
> >
> > When searching for single words (i.e. homewoners ) I
> get hits.
> >
> > However, searching for the exact phrase
> "homeowners work" gives me no
> > hits!! I use the double quotes when searching for
> exact phrases.
> >
> > Any idea why ??
> >
> >
> >
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >


      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 31 21:49:32 2008
Return-Path: <java-user-return-36937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33058 invoked from network); 31 Oct 2008 21:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2008 21:49:32 -0000
Received: (qmail 47194 invoked by uid 500); 31 Oct 2008 21:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47156 invoked by uid 500); 31 Oct 2008 21:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47144 invoked by uid 99); 31 Oct 2008 21:49:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 14:49:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 21:48:12 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id 77EBB15D48F
	for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 14:48:22 -0700 (PDT)
Message-Id: <B59D31E1-A618-41E0-A073-DA39E952E516@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <b8bb47ad0810301628t1b044f83qc9ec3ef04d1218d1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene Payload
Date: Fri, 31 Oct 2008 17:48:21 -0400
References: <b8bb47ad0810230607w1e6637d3s7d5c1c25b726f769@mail.gmail.com> <CF662C5F-07F5-4B9D-847A-CE0E7BF78F2D@apache.org> <b8bb47ad0810300942m209ecbd8r3bb7d1c8d68dad8f@mail.gmail.com> <3888E929-667D-4C7D-A3B5-CEEDED8EC352@apache.org> <b8bb47ad0810301628t1b044f83qc9ec3ef04d1218d1@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Oct 30, 2008, at 7:28 PM, Anshul jain wrote:

> I want to give more weight to some terms in the document. Like title  
> of the
> book should be given more weight than the contents. And we are  
> testing over
> a wide varieties of lucene queries, with quotes, w/o quotes, phrase,  
> span
> etc.

If the whole title is important, just boost the Title field.

>
>
> As our system will be expecting more number of queries that contain  
> nouns
> and documents in which that term in heading or title or in bold  
> should be
> given higher score.
>
> But this payload thing is not supporting us fully. As it is only  
> working for
> single term queries or boolean term queries. It would also be good  
> if it
> supports phrase queries also, as using closeness of terms for  
> scoring is
> quite important for us.
>
> Do you've any suggestions?

Could you get by using just field boosts?

As for phrase payload queries, I agree they would be nice to have.   
Only way they are getting in is if someone donates a patch.  I can  
review it if you can produce it, but don't have time at the moment to  
produce it.

-Grant

>
>
>
> On Thu, Oct 30, 2008 at 7:08 PM, Grant Ingersoll  
> <gsingers@apache.org>wrote:
>
>> Not directly, I don't think.  Mark Miller contributed some  
>> highlighting
>> code that converts phrase queries to SpanNearQueries, I believe,  
>> but this
>> isn't general purpose.    We probably need a QueryParser that  
>> produces
>> SpanQueries instead of regular Queries, I suppose, but they aren't  
>> always
>> 1-1.  Ideally, there would be no perf. penalty for SpanQueries and
>> everything would be a span query, but until someone figures out  
>> that magic,
>> I don't know.
>>
>> What is it that you are trying to do?
>>
>> -Grant
>>
>> On Oct 30, 2008, at 12:42 PM, Anshul jain wrote:
>>
>> Thanks Grant the presentation, it was very useful.
>>>
>>> Can payload work for queries other than Term queries and Span  
>>> queries? Or
>>> is
>>> there any function to convert Query into span query?
>>>
>>> Thanks
>>>
>>>
>>>
>>>
>>> On Thu, Oct 23, 2008 at 4:08 PM, Grant Ingersoll  
>>> <gsingers@apache.org
>>>> wrote:
>>>
>>> You can search the archives for some background info.  Also, Michael
>>>> Busch
>>>> has a nice presentation from ApacheCon at
>>>>
>>>> http://people.apache.org/~buschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt 
>>>> <http://people.apache.org/%7Ebuschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt 
>>>> >
>>>> <
>>>> http://people.apache.org/%7Ebuschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt
>>>>>
>>>>
>>>>
>>>> Basically, the payload allows you to associate an arbitrary byte  
>>>> array
>>>> with
>>>> 1 or more terms.
>>>>
>>>>
>>>> On Oct 23, 2008, at 9:07 AM, Anshul jain wrote:
>>>>
>>>> Hi all,
>>>>
>>>>>
>>>>> Has anyone used the payload functionality in Lucene? I would  
>>>>> really
>>>>> appreciate if someone can provide an explain using a code or  
>>>>> something.
>>>>>
>>>>> Thanks,
>>>>> Anshul
>>>>>
>>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
>>>> http://www.lucenebootcamp.com
>>>>
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> --
>>> Anshul Jain
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
>> http://www.lucenebootcamp.com
>>
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Anshul Jain

--------------------------
Grant Ingersoll
Lucene Boot Camp Training Nov. 3-4, 2008, ApacheCon US New Orleans.
http://www.lucenebootcamp.com


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


